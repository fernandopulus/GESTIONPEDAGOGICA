var rhe=Object.defineProperty;var nhe=(e,t,r)=>t in e?rhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _3=(e,t,r)=>nhe(e,typeof t!="symbol"?t+"":t,r);function ahe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var amt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function she(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var S3={exports:{}},ey={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X7;function ihe(){if(X7)return ey;X7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return ey.Fragment=t,ey.jsx=r,ey.jsxs=r,ey}var Y7;function ohe(){return Y7||(Y7=1,S3.exports=ihe()),S3.exports}var o=ohe(),k3={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J7;function lhe(){if(J7)return cn;J7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(ee){return ee===null||typeof ee!="object"?null:(ee=f&&ee[f]||ee["@@iterator"],typeof ee=="function"?ee:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function v(ee,X,D){this.props=ee,this.context=X,this.refs=x,this.updater=D||m}v.prototype.isReactComponent={},v.prototype.setState=function(ee,X){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,X,"setState")},v.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(ee,X,D){this.props=ee,this.context=X,this.refs=x,this.updater=D||m}var N=w.prototype=new y;N.constructor=w,g(N,v.prototype),N.isPureReactComponent=!0;var B=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function E(ee,X,D,Q,z,J){return D=J.ref,{$$typeof:e,type:ee,key:X,ref:D!==void 0?D:null,props:J}}function S(ee,X){return E(ee.type,X,void 0,void 0,void 0,ee.props)}function T(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===e}function L(ee){var X={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(D){return X[D]})}var R=/\/+/g;function j(ee,X){return typeof ee=="object"&&ee!==null&&ee.key!=null?L(""+ee.key):X.toString(36)}function P(){}function M(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(P,P):(ee.status="pending",ee.then(function(X){ee.status==="pending"&&(ee.status="fulfilled",ee.value=X)},function(X){ee.status==="pending"&&(ee.status="rejected",ee.reason=X)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function Z(ee,X,D,Q,z){var J=typeof ee;(J==="undefined"||J==="boolean")&&(ee=null);var te=!1;if(ee===null)te=!0;else switch(J){case"bigint":case"string":case"number":te=!0;break;case"object":switch(ee.$$typeof){case e:case t:te=!0;break;case d:return te=ee._init,Z(te(ee._payload),X,D,Q,z)}}if(te)return z=z(ee),te=Q===""?"."+j(ee,0):Q,B(z)?(D="",te!=null&&(D=te.replace(R,"$&/")+"/"),Z(z,X,D,"",function(le){return le})):z!=null&&(T(z)&&(z=S(z,D+(z.key==null||ee&&ee.key===z.key?"":(""+z.key).replace(R,"$&/")+"/")+te)),X.push(z)),1;te=0;var se=Q===""?".":Q+":";if(B(ee))for(var ie=0;ie<ee.length;ie++)Q=ee[ie],J=se+j(Q,ie),te+=Z(Q,X,D,J,z);else if(ie=h(ee),typeof ie=="function")for(ee=ie.call(ee),ie=0;!(Q=ee.next()).done;)Q=Q.value,J=se+j(Q,ie++),te+=Z(Q,X,D,J,z);else if(J==="object"){if(typeof ee.then=="function")return Z(M(ee),X,D,Q,z);throw X=String(ee),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return te}function V(ee,X,D){if(ee==null)return ee;var Q=[],z=0;return Z(ee,Q,"","",function(J){return X.call(D,J,z++)}),Q}function W(ee){if(ee._status===-1){var X=ee._result;X=X(),X.then(function(D){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=D)},function(D){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=D)}),ee._status===-1&&(ee._status=0,ee._result=X)}if(ee._status===1)return ee._result.default;throw ee._result}var G=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function K(){}return cn.Children={map:V,forEach:function(ee,X,D){V(ee,function(){X.apply(this,arguments)},D)},count:function(ee){var X=0;return V(ee,function(){X++}),X},toArray:function(ee){return V(ee,function(X){return X})||[]},only:function(ee){if(!T(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},cn.Component=v,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=w,cn.StrictMode=n,cn.Suspense=c,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,cn.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return k.H.useMemoCache(ee)}},cn.cache=function(ee){return function(){return ee.apply(null,arguments)}},cn.cloneElement=function(ee,X,D){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var Q=g({},ee.props),z=ee.key,J=void 0;if(X!=null)for(te in X.ref!==void 0&&(J=void 0),X.key!==void 0&&(z=""+X.key),X)!F.call(X,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&X.ref===void 0||(Q[te]=X[te]);var te=arguments.length-2;if(te===1)Q.children=D;else if(1<te){for(var se=Array(te),ie=0;ie<te;ie++)se[ie]=arguments[ie+2];Q.children=se}return E(ee.type,z,void 0,void 0,J,Q)},cn.createContext=function(ee){return ee={$$typeof:i,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:s,_context:ee},ee},cn.createElement=function(ee,X,D){var Q,z={},J=null;if(X!=null)for(Q in X.key!==void 0&&(J=""+X.key),X)F.call(X,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(z[Q]=X[Q]);var te=arguments.length-2;if(te===1)z.children=D;else if(1<te){for(var se=Array(te),ie=0;ie<te;ie++)se[ie]=arguments[ie+2];z.children=se}if(ee&&ee.defaultProps)for(Q in te=ee.defaultProps,te)z[Q]===void 0&&(z[Q]=te[Q]);return E(ee,J,void 0,void 0,null,z)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(ee){return{$$typeof:l,render:ee}},cn.isValidElement=T,cn.lazy=function(ee){return{$$typeof:d,_payload:{_status:-1,_result:ee},_init:W}},cn.memo=function(ee,X){return{$$typeof:u,type:ee,compare:X===void 0?null:X}},cn.startTransition=function(ee){var X=k.T,D={};k.T=D;try{var Q=ee(),z=k.S;z!==null&&z(D,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(K,G)}catch(J){G(J)}finally{k.T=X}},cn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},cn.use=function(ee){return k.H.use(ee)},cn.useActionState=function(ee,X,D){return k.H.useActionState(ee,X,D)},cn.useCallback=function(ee,X){return k.H.useCallback(ee,X)},cn.useContext=function(ee){return k.H.useContext(ee)},cn.useDebugValue=function(){},cn.useDeferredValue=function(ee,X){return k.H.useDeferredValue(ee,X)},cn.useEffect=function(ee,X,D){var Q=k.H;if(typeof D=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(ee,X)},cn.useId=function(){return k.H.useId()},cn.useImperativeHandle=function(ee,X,D){return k.H.useImperativeHandle(ee,X,D)},cn.useInsertionEffect=function(ee,X){return k.H.useInsertionEffect(ee,X)},cn.useLayoutEffect=function(ee,X){return k.H.useLayoutEffect(ee,X)},cn.useMemo=function(ee,X){return k.H.useMemo(ee,X)},cn.useOptimistic=function(ee,X){return k.H.useOptimistic(ee,X)},cn.useReducer=function(ee,X,D){return k.H.useReducer(ee,X,D)},cn.useRef=function(ee){return k.H.useRef(ee)},cn.useState=function(ee){return k.H.useState(ee)},cn.useSyncExternalStore=function(ee,X,D){return k.H.useSyncExternalStore(ee,X,D)},cn.useTransition=function(){return k.H.useTransition()},cn.version="19.1.1",cn}var Z7;function O1(){return Z7||(Z7=1,k3.exports=lhe()),k3.exports}var _=O1();const at=kl(_),che=ahe({__proto__:null,default:at},[_]);var j3={exports:{}},ty={},B3={exports:{}},T3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e9;function uhe(){return e9||(e9=1,function(e){function t(V,W){var G=V.length;V.push(W);e:for(;0<G;){var K=G-1>>>1,ee=V[K];if(0<a(ee,W))V[K]=W,V[G]=ee,G=K;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var W=V[0],G=V.pop();if(G!==W){V[0]=G;e:for(var K=0,ee=V.length,X=ee>>>1;K<X;){var D=2*(K+1)-1,Q=V[D],z=D+1,J=V[z];if(0>a(Q,G))z<ee&&0>a(J,Q)?(V[K]=J,V[z]=G,K=z):(V[K]=Q,V[D]=G,K=D);else if(z<ee&&0>a(J,G))V[K]=J,V[z]=G,K=z;else break e}}return W}function a(V,W){var G=V.sortIndex-W.sortIndex;return G!==0?G:V.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function B(V){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=V)n(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=r(u)}}function k(V){if(x=!1,B(V),!g)if(r(c)!==null)g=!0,F||(F=!0,j());else{var W=r(u);W!==null&&Z(k,W.startTime-V)}}var F=!1,E=-1,S=5,T=-1;function L(){return v?!0:!(e.unstable_now()-T<S)}function R(){if(v=!1,F){var V=e.unstable_now();T=V;var W=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),m=!0;var G=h;try{t:{for(B(V),f=r(c);f!==null&&!(f.expirationTime>V&&L());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var ee=K(f.expirationTime<=V);if(V=e.unstable_now(),typeof ee=="function"){f.callback=ee,B(V),W=!0;break t}f===r(c)&&n(c),B(V)}else n(c);f=r(c)}if(f!==null)W=!0;else{var X=r(u);X!==null&&Z(k,X.startTime-V),W=!1}}break e}finally{f=null,h=G,m=!1}W=void 0}}finally{W?j():F=!1}}}var j;if(typeof N=="function")j=function(){N(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=R,j=function(){M.postMessage(null)}}else j=function(){y(R,0)};function Z(V,W){E=y(function(){V(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var G=h;h=W;try{return V()}finally{h=G}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var G=h;h=V;try{return W()}finally{h=G}},e.unstable_scheduleCallback=function(V,W,G){var K=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,V){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,V={id:d++,callback:W,priorityLevel:V,startTime:G,expirationTime:ee,sortIndex:-1},G>K?(V.sortIndex=G,t(u,V),r(c)===null&&V===r(u)&&(x?(w(E),E=-1):x=!0,Z(k,G-K))):(V.sortIndex=ee,t(c,V),g||m||(g=!0,F||(F=!0,j()))),V},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(V){var W=h;return function(){var G=h;h=W;try{return V.apply(this,arguments)}finally{h=G}}}}(T3)),T3}var t9;function dhe(){return t9||(t9=1,B3.exports=uhe()),B3.exports}var I3={exports:{}},Po={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r9;function Ahe(){if(r9)return Po;r9=1;var e=O1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Po.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Po.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Po.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},Po.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Po.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Po.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Po.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Po.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=l(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Po.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Po.requestFormReset=function(c){n.d.r(c)},Po.unstable_batchedUpdates=function(c,u){return c(u)},Po.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},Po.useFormStatus=function(){return i.H.useHostTransitionStatus()},Po.version="19.1.1",Po}var n9;function zY(){if(n9)return I3.exports;n9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),I3.exports=Ahe(),I3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a9;function fhe(){if(a9)return ty;a9=1;var e=dhe(),t=O1(),r=zY();function n(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var p=A,b=A;if(A.alternate)for(;p.return;)p=p.return;else{A=p;do p=A,(p.flags&4098)!==0&&(b=p.return),A=p.return;while(A)}return p.tag===3?b:null}function i(A){if(A.tag===13){var p=A.memoizedState;if(p===null&&(A=A.alternate,A!==null&&(p=A.memoizedState)),p!==null)return p.dehydrated}return null}function l(A){if(s(A)!==A)throw Error(n(188))}function c(A){var p=A.alternate;if(!p){if(p=s(A),p===null)throw Error(n(188));return p!==A?null:A}for(var b=A,C=p;;){var U=b.return;if(U===null)break;var q=U.alternate;if(q===null){if(C=U.return,C!==null){b=C;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===b)return l(U),A;if(q===C)return l(U),p;q=q.sibling}throw Error(n(188))}if(b.return!==C.return)b=U,C=q;else{for(var de=!1,ye=U.child;ye;){if(ye===b){de=!0,b=U,C=q;break}if(ye===C){de=!0,C=U,b=q;break}ye=ye.sibling}if(!de){for(ye=q.child;ye;){if(ye===b){de=!0,b=q,C=U;break}if(ye===C){de=!0,C=q,b=U;break}ye=ye.sibling}if(!de)throw Error(n(189))}}if(b.alternate!==C)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?A:p}function u(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A;for(A=A.child;A!==null;){if(p=u(A),p!==null)return p;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),N=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function j(A){return A===null||typeof A!="object"?null:(A=R&&A[R]||A["@@iterator"],typeof A=="function"?A:null)}var P=Symbol.for("react.client.reference");function M(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===P?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList";case T:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case m:return"Portal";case N:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case B:var p=A.render;return A=A.displayName,A||(A=p.displayName||p.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return p=A.displayName||null,p!==null?p:M(A.type)||"Memo";case S:p=A._payload,A=A._init;try{return M(A(p))}catch{}}return null}var Z=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},K=[],ee=-1;function X(A){return{current:A}}function D(A){0>ee||(A.current=K[ee],K[ee]=null,ee--)}function Q(A,p){ee++,K[ee]=A.current,A.current=p}var z=X(null),J=X(null),te=X(null),se=X(null);function ie(A,p){switch(Q(te,p),Q(J,A),Q(z,null),p.nodeType){case 9:case 11:A=(A=p.documentElement)&&(A=A.namespaceURI)?C7(A):0;break;default:if(A=p.tagName,p=p.namespaceURI)p=C7(p),A=N7(p,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}D(z),Q(z,A)}function le(){D(z),D(J),D(te)}function ue(A){A.memoizedState!==null&&Q(se,A);var p=z.current,b=N7(p,A.type);p!==b&&(Q(J,A),Q(z,b))}function je(A){J.current===A&&(D(z),D(J)),se.current===A&&(D(se),Wb._currentValue=G)}var ae=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,_e=e.unstable_shouldYield,he=e.unstable_requestPaint,Be=e.unstable_now,Le=e.unstable_getCurrentPriorityLevel,We=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Re=e.unstable_LowPriority,$e=e.unstable_IdlePriority,et=e.log,ct=e.unstable_setDisableYieldValue,gt=null,It=null;function Mt(A){if(typeof et=="function"&&ct(A),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(gt,A)}catch{}}var Pt=Math.clz32?Math.clz32:Tr,Qt=Math.log,wt=Math.LN2;function Tr(A){return A>>>=0,A===0?32:31-(Qt(A)/wt|0)|0}var tr=256,an=4194304;function Sr(A){var p=A&42;if(p!==0)return p;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function $r(A,p,b){var C=A.pendingLanes;if(C===0)return 0;var U=0,q=A.suspendedLanes,de=A.pingedLanes;A=A.warmLanes;var ye=C&134217727;return ye!==0?(C=ye&~q,C!==0?U=Sr(C):(de&=ye,de!==0?U=Sr(de):b||(b=ye&~A,b!==0&&(U=Sr(b))))):(ye=C&~q,ye!==0?U=Sr(ye):de!==0?U=Sr(de):b||(b=C&~A,b!==0&&(U=Sr(b)))),U===0?0:p!==0&&p!==U&&(p&q)===0&&(q=U&-U,b=p&-p,q>=b||q===32&&(b&4194048)!==0)?p:U}function Fn(A,p){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&p)===0}function Pr(A,p){switch(A){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function As(){var A=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),A}function mn(){var A=an;return an<<=1,(an&62914560)===0&&(an=4194304),A}function la(A){for(var p=[],b=0;31>b;b++)p.push(A);return p}function ja(A,p){A.pendingLanes|=p,p!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function rn(A,p,b,C,U,q){var de=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var ye=A.entanglements,Pe=A.expirationTimes,lt=A.hiddenUpdates;for(b=de&~b;0<b;){var St=31-Pt(b),Ot=1<<St;ye[St]=0,Pe[St]=-1;var At=lt[St];if(At!==null)for(lt[St]=null,St=0;St<At.length;St++){var ht=At[St];ht!==null&&(ht.lane&=-536870913)}b&=~Ot}C!==0&&gr(A,C,0),q!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=q&~(de&~p))}function gr(A,p,b){A.pendingLanes|=p,A.suspendedLanes&=~p;var C=31-Pt(p);A.entangledLanes|=p,A.entanglements[C]=A.entanglements[C]|1073741824|b&4194090}function Ze(A,p){var b=A.entangledLanes|=p;for(A=A.entanglements;b;){var C=31-Pt(b),U=1<<C;U&p|A[C]&p&&(A[C]|=p),b&=~U}}function mt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Je(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xt(){var A=W.p;return A!==0?A:(A=window.event,A===void 0?32:z7(A.type))}function Et(A,p){var b=W.p;try{return W.p=A,p()}finally{W.p=b}}var bt=Math.random().toString(36).slice(2),nr="__reactFiber$"+bt,xr="__reactProps$"+bt,Wr="__reactContainer$"+bt,Zr="__reactEvents$"+bt,qr="__reactListeners$"+bt,me="__reactHandles$"+bt,Ie="__reactResources$"+bt,Ce="__reactMarker$"+bt;function we(A){delete A[nr],delete A[xr],delete A[Zr],delete A[qr],delete A[me]}function Se(A){var p=A[nr];if(p)return p;for(var b=A.parentNode;b;){if(p=b[Wr]||b[nr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(A=j7(A);A!==null;){if(b=A[nr])return b;A=j7(A)}return p}A=b,b=A.parentNode}return null}function Fe(A){if(A=A[nr]||A[Wr]){var p=A.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return A}return null}function Ye(A){var p=A.tag;if(p===5||p===26||p===27||p===6)return A.stateNode;throw Error(n(33))}function dt(A){var p=A[Ie];return p||(p=A[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Ge(A){A[Ce]=!0}var rt=new Set,it={};function Ft(A,p){$t(A,p),$t(A+"Capture",p)}function $t(A,p){for(it[A]=p,A=0;A<p.length;A++)rt.add(p[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Gt={};function kr(A){return ae.call(Gt,A)?!0:ae.call(Ht,A)?!1:Jt.test(A)?Gt[A]=!0:(Ht[A]=!0,!1)}function sn(A,p,b){if(kr(p))if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(p);return;case"boolean":var C=p.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){A.removeAttribute(p);return}}A.setAttribute(p,""+b)}}function on(A,p,b){if(b===null)A.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttribute(p,""+b)}}function An(A,p,b,C){if(C===null)A.removeAttribute(b);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(p,b,""+C)}}var fs,No;function hs(A){if(fs===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);fs=p&&p[1]||"",No=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fs+A+No}var ri=!1;function Ps(A,p){if(!A||ri)return"";ri=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(ht){var At=ht}Reflect.construct(A,[],Ot)}else{try{Ot.call()}catch(ht){At=ht}A.call(Ot.prototype)}}else{try{throw Error()}catch(ht){At=ht}(Ot=A())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(ht){if(ht&&At&&typeof ht.stack=="string")return[ht.stack,At.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=C.DetermineComponentFrameRoot(),de=q[0],ye=q[1];if(de&&ye){var Pe=de.split(`
`),lt=ye.split(`
`);for(U=C=0;C<Pe.length&&!Pe[C].includes("DetermineComponentFrameRoot");)C++;for(;U<lt.length&&!lt[U].includes("DetermineComponentFrameRoot");)U++;if(C===Pe.length||U===lt.length)for(C=Pe.length-1,U=lt.length-1;1<=C&&0<=U&&Pe[C]!==lt[U];)U--;for(;1<=C&&0<=U;C--,U--)if(Pe[C]!==lt[U]){if(C!==1||U!==1)do if(C--,U--,0>U||Pe[C]!==lt[U]){var St=`
`+Pe[C].replace(" at new "," at ");return A.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",A.displayName)),St}while(1<=C&&0<=U);break}}}finally{ri=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?hs(b):""}function yi(A){switch(A.tag){case 26:case 27:case 5:return hs(A.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return Ps(A.type,!1);case 11:return Ps(A.type.render,!1);case 1:return Ps(A.type,!0);case 31:return hs("Activity");default:return""}}function xa(A){try{var p="";do p+=yi(A),A=A.return;while(A);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function ni(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Zd(A){var p=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function $h(A){var p=Zd(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,p),C=""+A[p];if(!A.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var U=b.get,q=b.set;return Object.defineProperty(A,p,{configurable:!0,get:function(){return U.call(this)},set:function(de){C=""+de,q.call(this,de)}}),Object.defineProperty(A,p,{enumerable:b.enumerable}),{getValue:function(){return C},setValue:function(de){C=""+de},stopTracking:function(){A._valueTracker=null,delete A[p]}}}}function eu(A){A._valueTracker||(A._valueTracker=$h(A))}function hf(A){if(!A)return!1;var p=A._valueTracker;if(!p)return!0;var b=p.getValue(),C="";return A&&(C=Zd(A)?A.checked?"true":"false":A.value),A=C,A!==b?(p.setValue(A),!0):!1}function wi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var eA=/[\n"\\]/g;function On(A){return A.replace(eA,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function Ei(A,p,b,C,U,q,de,ye){A.name="",de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?A.type=de:A.removeAttribute("type"),p!=null?de==="number"?(p===0&&A.value===""||A.value!=p)&&(A.value=""+ni(p)):A.value!==""+ni(p)&&(A.value=""+ni(p)):de!=="submit"&&de!=="reset"||A.removeAttribute("value"),p!=null?ru(A,de,ni(p)):b!=null?ru(A,de,ni(b)):C!=null&&A.removeAttribute("value"),U==null&&q!=null&&(A.defaultChecked=!!q),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"?A.name=""+ni(ye):A.removeAttribute("name")}function tu(A,p,b,C,U,q,de,ye){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(A.type=q),p!=null||b!=null){if(!(q!=="submit"&&q!=="reset"||p!=null))return;b=b!=null?""+ni(b):"",p=p!=null?""+ni(p):b,ye||p===A.value||(A.value=p),A.defaultValue=p}C=C??U,C=typeof C!="function"&&typeof C!="symbol"&&!!C,A.checked=ye?A.checked:!!C,A.defaultChecked=!!C,de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"&&(A.name=de)}function ru(A,p,b){p==="number"&&wi(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Bl(A,p,b,C){if(A=A.options,p){p={};for(var U=0;U<b.length;U++)p["$"+b[U]]=!0;for(b=0;b<A.length;b++)U=p.hasOwnProperty("$"+A[b].value),A[b].selected!==U&&(A[b].selected=U),U&&C&&(A[b].defaultSelected=!0)}else{for(b=""+ni(b),p=null,U=0;U<A.length;U++){if(A[U].value===b){A[U].selected=!0,C&&(A[U].defaultSelected=!0);return}p!==null||A[U].disabled||(p=A[U])}p!==null&&(p.selected=!0)}}function Vn(A,p,b){if(p!=null&&(p=""+ni(p),p!==A.value&&(A.value=p),b==null)){A.defaultValue!==p&&(A.defaultValue=p);return}A.defaultValue=b!=null?""+ni(b):""}function nu(A,p,b,C){if(p==null){if(C!=null){if(b!=null)throw Error(n(92));if(Z(C)){if(1<C.length)throw Error(n(93));C=C[0]}b=C}b==null&&(b=""),p=b}b=ni(p),A.defaultValue=b,C=A.textContent,C===b&&C!==""&&C!==null&&(A.value=C)}function _o(A,p){if(p){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=p;return}}A.textContent=p}var Ac=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gh(A,p,b){var C=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?C?A.setProperty(p,""):p==="float"?A.cssFloat="":A[p]="":C?A.setProperty(p,b):typeof b!="number"||b===0||Ac.has(p)?p==="float"?A.cssFloat=b:A[p]=(""+b).trim():A[p]=b+"px"}function mf(A,p,b){if(p!=null&&typeof p!="object")throw Error(n(62));if(A=A.style,b!=null){for(var C in b)!b.hasOwnProperty(C)||p!=null&&p.hasOwnProperty(C)||(C.indexOf("--")===0?A.setProperty(C,""):C==="float"?A.cssFloat="":A[C]="");for(var U in p)C=p[U],p.hasOwnProperty(U)&&b[U]!==C&&Gh(A,U,C)}else for(var q in p)p.hasOwnProperty(q)&&Gh(A,q,p[q])}function pf(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hc(A){return tA.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Tl=null;function ca(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var mc=null,Il=null;function Fr(A){var p=Fe(A);if(p&&(A=p.stateNode)){var b=A[xr]||null;e:switch(A=p.stateNode,p.type){case"input":if(Ei(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+On(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var C=b[p];if(C!==A&&C.form===A.form){var U=C[xr]||null;if(!U)throw Error(n(90));Ei(C,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(p=0;p<b.length;p++)C=b[p],C.form===A.form&&hf(C)}break e;case"textarea":Vn(A,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Bl(A,!!b.multiple,p,!1)}}}var Fl=!1;function Kh(A,p,b){if(Fl)return A(p,b);Fl=!0;try{var C=A(p);return C}finally{if(Fl=!1,(mc!==null||Il!==null)&&(aC(),mc&&(p=mc,A=Il,Il=mc=null,Fr(p),A)))for(p=0;p<A.length;p++)Fr(A[p])}}function Li(A,p){var b=A.stateNode;if(b===null)return null;var C=b[xr]||null;if(C===null)return null;b=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(A=A.type,C=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!C;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(n(231,p,typeof b));return b}var So=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),io=!1;if(So)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){io=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{io=!1}var ko=null,au=null,pc=null;function gf(){if(pc)return pc;var A,p=au,b=p.length,C,U="value"in ko?ko.value:ko.textContent,q=U.length;for(A=0;A<b&&p[A]===U[A];A++);var de=b-A;for(C=1;C<=de&&p[b-C]===U[q-C];C++);return pc=U.slice(A,1<C?1-C:void 0)}function jo(A){var p=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&p===13&&(A=13)):A=p,A===10&&(A=13),32<=A||A===13?A:0}function Mi(){return!0}function Dl(){return!1}function ms(A){function p(b,C,U,q,de){this._reactName=b,this._targetInst=U,this.type=C,this.nativeEvent=q,this.target=de,this.currentTarget=null;for(var ye in A)A.hasOwnProperty(ye)&&(b=A[ye],this[ye]=b?b(q):q[ye]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Mi:Dl,this.isPropagationStopped=Dl,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),p}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},su=ms(bn),Pl=d({},bn,{view:0,detail:0}),xf=ms(Pl),Zu,ed,cl,Ui=d({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==cl&&(cl&&A.type==="mousemove"?(Zu=A.screenX-cl.screenX,ed=A.screenY-cl.screenY):ed=Zu=0,cl=A),Zu)},movementY:function(A){return"movementY"in A?A.movementY:ed}}),ps=ms(Ui),qh=d({},Ui,{dataTransfer:0}),iu=ms(qh),Ci=d({},Pl,{relatedTarget:0}),ou=ms(Ci),gc=d({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),rA=ms(gc),td=d({},bn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),nA=ms(td),vf=d({},bn,{data:0}),rd=ms(vf),lu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ad(A){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(A):(A=aA[A])?!!p[A]:!1}function cu(){return ad}var Wh=d({},Pl,{key:function(A){if(A.key){var p=lu[A.key]||A.key;if(p!=="Unidentified")return p}return A.type==="keypress"?(A=jo(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?nd[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(A){return A.type==="keypress"?jo(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?jo(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),xc=ms(Wh),uu=d({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=ms(uu),Qi=d({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),sA=ms(Qi),Y=d({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fe=ms(Y),De=d({},Ui,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=ms(De),Ke=d({},bn,{newState:0,oldState:0}),yt=ms(Ke),Lt=[9,13,27,32],Zt=So&&"CompositionEvent"in window,O=null;So&&"documentMode"in document&&(O=document.documentMode);var ne=So&&"TextEvent"in window&&!O,ce=So&&(!Zt||O&&8<O&&11>=O),be=" ",ze=!1;function ot(A,p){switch(A){case"keyup":return Lt.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Or=!1;function yn(A,p){switch(A){case"compositionend":return Ut(p);case"keypress":return p.which!==32?null:(ze=!0,be);case"textInput":return A=p.data,A===be&&ze?null:A;default:return null}}function Xr(A,p){if(Or)return A==="compositionend"||!Zt&&ot(A,p)?(A=gf(),pc=au=ko=null,Or=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ce&&p.locale!=="ko"?null:p.data;default:return null}}var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p==="input"?!!zn[A.type]:p==="textarea"}function Rl(A,p,b,C){mc?Il?Il.push(C):Il=[C]:mc=C,p=uC(p,"onChange"),0<p.length&&(b=new su("onChange","change",null,b,C),A.push({event:b,listeners:p}))}var es=null,Bo=null;function du(A){v7(A,0)}function iA(A){var p=Ye(A);if(hf(p))return A}function Xh(A,p){if(A==="change")return p}var bf=!1;if(So){var Rs;if(So){var oA="oninput"in document;if(!oA){var yf=document.createElement("div");yf.setAttribute("oninput","return;"),oA=typeof yf.oninput=="function"}Rs=oA}else Rs=!1;bf=Rs&&(!document.documentMode||9<document.documentMode)}function wf(){es&&(es.detachEvent("onpropertychange",Yh),Bo=es=null)}function Yh(A){if(A.propertyName==="value"&&iA(Bo)){var p=[];Rl(p,Bo,A,ca(A)),Kh(du,p)}}function To(A,p,b){A==="focusin"?(wf(),es=p,Bo=b,es.attachEvent("onpropertychange",Yh)):A==="focusout"&&wf()}function pb(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return iA(Bo)}function Jm(A,p){if(A==="click")return iA(p)}function Zg(A,p){if(A==="input"||A==="change")return iA(p)}function Ll(A,p){return A===p&&(A!==0||1/A===1/p)||A!==A&&p!==p}var ai=typeof Object.is=="function"?Object.is:Ll;function lA(A,p){if(ai(A,p))return!0;if(typeof A!="object"||A===null||typeof p!="object"||p===null)return!1;var b=Object.keys(A),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var U=b[C];if(!ae.call(p,U)||!ai(A[U],p[U]))return!1}return!0}function Zm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function id(A,p){var b=Zm(A);A=0;for(var C;b;){if(b.nodeType===3){if(C=A+b.textContent.length,A<=p&&C>=p)return{node:b,offset:p-A};A=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Zm(b)}}function cA(A,p){return A&&p?A===p?!0:A&&A.nodeType===3?!1:p&&p.nodeType===3?cA(A,p.parentNode):"contains"in A?A.contains(p):A.compareDocumentPosition?!!(A.compareDocumentPosition(p)&16):!1:!1}function oo(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var p=wi(A.document);p instanceof A.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)A=p.contentWindow;else break;p=wi(A.document)}return p}function Ni(A){var p=A&&A.nodeName&&A.nodeName.toLowerCase();return p&&(p==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||p==="textarea"||A.contentEditable==="true")}var uA=So&&"documentMode"in document&&11>=document.documentMode,Io=null,vc=null,Au=null,bc=!1;function Ga(A,p,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;bc||Io==null||Io!==wi(C)||(C=Io,"selectionStart"in C&&Ni(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Au&&lA(Au,C)||(Au=C,C=uC(vc,"onSelect"),0<C.length&&(p=new su("onSelect","select",null,p,b),A.push({event:p,listeners:C}),p.target=Io)))}function yc(A,p){var b={};return b[A.toLowerCase()]=p.toLowerCase(),b["Webkit"+A]="webkit"+p,b["Moz"+A]="moz"+p,b}var gs={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionrun:yc("Transition","TransitionRun"),transitionstart:yc("Transition","TransitionStart"),transitioncancel:yc("Transition","TransitionCancel"),transitionend:yc("Transition","TransitionEnd")},Fo={},Ef={};So&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function fu(A){if(Fo[A])return Fo[A];if(!gs[A])return A;var p=gs[A],b;for(b in p)if(p.hasOwnProperty(b)&&b in Ef)return Fo[A]=p[b];return A}var Jh=fu("animationend"),dA=fu("animationiteration"),AA=fu("animationstart"),fA=fu("transitionrun"),Cf=fu("transitionstart"),Zh=fu("transitioncancel"),hA=fu("transitionend"),od=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function Ka(A,p){od.set(A,p),Ft(p,[A])}var ul=new WeakMap;function pn(A,p){if(typeof A=="object"&&A!==null){var b=ul.get(A);return b!==void 0?b:(p={value:A,source:p,stack:xa(p)},ul.set(A,p),p)}return{value:A,source:p,stack:xa(p)}}var gn=[],va=0,ts=0;function Ml(){for(var A=va,p=ts=va=0;p<A;){var b=gn[p];gn[p++]=null;var C=gn[p];gn[p++]=null;var U=gn[p];gn[p++]=null;var q=gn[p];if(gn[p++]=null,C!==null&&U!==null){var de=C.pending;de===null?U.next=U:(U.next=de.next,de.next=U),C.pending=U}q!==0&&ex(b,U,q)}}function mA(A,p,b,C){gn[va++]=A,gn[va++]=p,gn[va++]=b,gn[va++]=C,ts|=C,A.lanes|=C,A=A.alternate,A!==null&&(A.lanes|=C)}function pA(A,p,b,C){return mA(A,p,b,C),_f(A)}function ld(A,p){return mA(A,null,null,p),_f(A)}function ex(A,p,b){A.lanes|=b;var C=A.alternate;C!==null&&(C.lanes|=b);for(var U=!1,q=A.return;q!==null;)q.childLanes|=b,C=q.alternate,C!==null&&(C.childLanes|=b),q.tag===22&&(A=q.stateNode,A===null||A._visibility&1||(U=!0)),A=q,q=q.return;return A.tag===3?(q=A.stateNode,U&&p!==null&&(U=31-Pt(b),A=q.hiddenUpdates,C=A[U],C===null?A[U]=[p]:C.push(p),p.lane=b|536870912),q):null}function _f(A){if(50<Qb)throw Qb=0,Xj=null,Error(n(185));for(var p=A.return;p!==null;)A=p,p=A.return;return A.tag===3?A.stateNode:null}var si={};function Ul(A,p,b,C){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(A,p,b,C){return new Ul(A,p,b,C)}function e0(A){return A=A.prototype,!(!A||!A.isReactComponent)}function hu(A,p){var b=A.alternate;return b===null?(b=Hi(A.tag,p,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=p,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,p=A.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function ep(A,p){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=p,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,p=b.dependencies,A.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A}function Sf(A,p,b,C,U,q){var de=0;if(C=A,typeof A=="function")e0(A)&&(de=1);else if(typeof A=="string")de=Vfe(A,b,z.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case T:return A=Hi(31,b,p,U),A.elementType=T,A.lanes=q,A;case g:return cd(b.children,U,q,p);case x:de=8,U|=24;break;case v:return A=Hi(12,b,p,U|2),A.elementType=v,A.lanes=q,A;case k:return A=Hi(13,b,p,U),A.elementType=k,A.lanes=q,A;case F:return A=Hi(19,b,p,U),A.elementType=F,A.lanes=q,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case N:de=10;break e;case w:de=9;break e;case B:de=11;break e;case E:de=14;break e;case S:de=16,C=null;break e}de=29,b=Error(n(130,A===null?"null":typeof A,"")),C=null}return p=Hi(de,b,p,U),p.elementType=A,p.type=C,p.lanes=q,p}function cd(A,p,b,C){return A=Hi(7,A,C,p),A.lanes=b,A}function tx(A,p,b){return A=Hi(6,A,null,p),A.lanes=b,A}function tp(A,p,b){return p=Hi(4,A.children!==null?A.children:[],A.key,p),p.lanes=b,p.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},p}var gA=[],ud=0,t0=null,rx=0,Ql=[],dl=0,kf=null,dd=1,Ad="";function jf(A,p){gA[ud++]=rx,gA[ud++]=t0,t0=A,rx=p}function kE(A,p,b){Ql[dl++]=dd,Ql[dl++]=Ad,Ql[dl++]=kf,kf=A;var C=dd;A=Ad;var U=32-Pt(C)-1;C&=~(1<<U),b+=1;var q=32-Pt(p)+U;if(30<q){var de=U-U%5;q=(C&(1<<de)-1).toString(32),C>>=de,U-=de,dd=1<<32-Pt(p)+U|b<<U|C,Ad=q+A}else dd=1<<q|b<<U|C,Ad=A}function rp(A){A.return!==null&&(jf(A,1),kE(A,1,0))}function np(A){for(;A===t0;)t0=gA[--ud],gA[ud]=null,rx=gA[--ud],gA[ud]=null;for(;A===kf;)kf=Ql[--dl],Ql[dl]=null,Ad=Ql[--dl],Ql[dl]=null,dd=Ql[--dl],Ql[dl]=null}var Ls=null,qa=null,Un=!1,xA=null,mu=!1,gb=Error(n(519));function Bf(A){var p=Error(n(418,""));throw r0(pn(p,A)),gb}function jE(A){var p=A.stateNode,b=A.type,C=A.memoizedProps;switch(p[nr]=A,p[xr]=C,b){case"dialog":_n("cancel",p),_n("close",p);break;case"iframe":case"object":case"embed":_n("load",p);break;case"video":case"audio":for(b=0;b<Vb.length;b++)_n(Vb[b],p);break;case"source":_n("error",p);break;case"img":case"image":case"link":_n("error",p),_n("load",p);break;case"details":_n("toggle",p);break;case"input":_n("invalid",p),tu(p,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),eu(p);break;case"select":_n("invalid",p);break;case"textarea":_n("invalid",p),nu(p,C.value,C.defaultValue,C.children),eu(p)}b=C.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||C.suppressHydrationWarning===!0||E7(p.textContent,b)?(C.popover!=null&&(_n("beforetoggle",p),_n("toggle",p)),C.onScroll!=null&&_n("scroll",p),C.onScrollEnd!=null&&_n("scrollend",p),C.onClick!=null&&(p.onclick=dC),p=!0):p=!1,p||Bf(A)}function fd(A){for(Ls=A.return;Ls;)switch(Ls.tag){case 5:case 13:mu=!1;return;case 27:case 3:mu=!0;return;default:Ls=Ls.return}}function lo(A){if(A!==Ls)return!1;if(!Un)return fd(A),Un=!0,!1;var p=A.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||A3(A.type,A.memoizedProps)),b=!b),b&&qa&&Bf(A),fd(A),p===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,p=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(p===0){qa=yd(A.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++;A=A.nextSibling}qa=null}}else p===27?(p=qa,v0(A.type)?(A=p3,p3=null,qa=A):qa=p):qa=Ls?yd(A.stateNode.nextSibling):null;return!0}function Al(){qa=Ls=null,Un=!1}function BE(){var A=xA;return A!==null&&(zl===null?zl=A:zl.push.apply(zl,A),xA=null),A}function r0(A){xA===null?xA=[A]:xA.push(A)}var pu=X(null),ii=null,hd=null;function vA(A,p,b){Q(pu,p._currentValue),p._currentValue=b}function gu(A){A._currentValue=pu.current,D(pu)}function nx(A,p,b){for(;A!==null;){var C=A.alternate;if((A.childLanes&p)!==p?(A.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),A===b)break;A=A.return}}function ax(A,p,b,C){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var q=U.dependencies;if(q!==null){var de=U.child;q=q.firstContext;e:for(;q!==null;){var ye=q;q=U;for(var Pe=0;Pe<p.length;Pe++)if(ye.context===p[Pe]){q.lanes|=b,ye=q.alternate,ye!==null&&(ye.lanes|=b),nx(q.return,b,A),C||(de=null);break e}q=ye.next}}else if(U.tag===18){if(de=U.return,de===null)throw Error(n(341));de.lanes|=b,q=de.alternate,q!==null&&(q.lanes|=b),nx(de,b,A),de=null}else de=U.child;if(de!==null)de.return=U;else for(de=U;de!==null;){if(de===A){de=null;break}if(U=de.sibling,U!==null){U.return=de.return,de=U;break}de=de.return}U=de}}function n0(A,p,b,C){A=null;for(var U=p,q=!1;U!==null;){if(!q){if((U.flags&524288)!==0)q=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var de=U.alternate;if(de===null)throw Error(n(387));if(de=de.memoizedProps,de!==null){var ye=U.type;ai(U.pendingProps.value,de.value)||(A!==null?A.push(ye):A=[ye])}}else if(U===se.current){if(de=U.alternate,de===null)throw Error(n(387));de.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(Wb):A=[Wb])}U=U.return}A!==null&&ax(p,A,b,C),p.flags|=262144}function sx(A){for(A=A.firstContext;A!==null;){if(!ai(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function xu(A){ii=A,hd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ms(A){return ix(ii,A)}function bA(A,p){return ii===null&&xu(A),ix(A,p)}function ix(A,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},hd===null){if(A===null)throw Error(n(308));hd=p,A.dependencies={lanes:0,firstContext:p},A.flags|=524288}else hd=hd.next=p;return b}var yj=typeof AbortController<"u"?AbortController:function(){var A=[],p=this.signal={aborted:!1,addEventListener:function(b,C){A.push(C)}};this.abort=function(){p.aborted=!0,A.forEach(function(b){return b()})}},TE=e.unstable_scheduleCallback,wj=e.unstable_NormalPriority,Us={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xb(){return{controller:new yj,data:new Map,refCount:0}}function ap(A){A.refCount--,A.refCount===0&&TE(wj,function(){A.controller.abort()})}var sp=null,vb=0,Tf=0,md=null;function Ej(A,p){if(sp===null){var b=sp=[];vb=0,Tf=n3(),md={status:"pending",value:void 0,then:function(C){b.push(C)}}}return vb++,p.then(IE,IE),p}function IE(){if(--vb===0&&sp!==null){md!==null&&(md.status="fulfilled");var A=sp;sp=null,Tf=0,md=null;for(var p=0;p<A.length;p++)(0,A[p])()}}function FE(A,p){var b=[],C={status:"pending",value:null,reason:null,then:function(U){b.push(U)}};return A.then(function(){C.status="fulfilled",C.value=p;for(var U=0;U<b.length;U++)(0,b[U])(p)},function(U){for(C.status="rejected",C.reason=U,U=0;U<b.length;U++)(0,b[U])(void 0)}),C}var I=V.S;V.S=function(A,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Ej(A,p),I!==null&&I(A,p)};var H=X(null);function re(){var A=H.current;return A!==null?A:Ta.pooledCache}function oe(A,p){p===null?Q(H,H.current):Q(H,p.pool)}function Ae(){var A=re();return A===null?null:{parent:Us._currentValue,pool:A}}var pe=Error(n(460)),ge=Error(n(474)),ve=Error(n(542)),Ee={then:function(){}};function Te(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function st(A,p,b){switch(b=A[b],b===void 0?A.push(p):b!==p&&(p.then(Ue,Ue),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Bt(A),A;default:if(typeof p.status=="string")p.then(Ue,Ue);else{if(A=Ta,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=p,A.status="pending",A.then(function(C){if(p.status==="pending"){var U=p;U.status="fulfilled",U.value=C}},function(C){if(p.status==="pending"){var U=p;U.status="rejected",U.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw A=p.reason,Bt(A),A}throw tt=p,pe}}var tt=null;function qe(){if(tt===null)throw Error(n(459));var A=tt;return tt=null,A}function Bt(A){if(A===pe||A===ve)throw Error(n(483))}var pt=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,p){A=A.updateQueue,p.updateQueue===A&&(p.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function _t(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Tt(A,p,b){var C=A.updateQueue;if(C===null)return null;if(C=C.shared,(da&2)!==0){var U=C.pending;return U===null?p.next=p:(p.next=U.next,U.next=p),C.pending=p,p=_f(A),ex(A,null,b),p}return mA(A,C,p,b),_f(A)}function kt(A,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var C=p.lanes;C&=A.pendingLanes,b|=C,p.lanes=b,Ze(A,b)}}function rr(A,p){var b=A.updateQueue,C=A.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var U=null,q=null;if(b=b.firstBaseUpdate,b!==null){do{var de={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};q===null?U=q=de:q=q.next=de,b=b.next}while(b!==null);q===null?U=q=p:q=q.next=p}else U=q=p;b={baseState:C.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:C.shared,callbacks:C.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=p:A.next=p,b.lastBaseUpdate=p}var Xt=!1;function br(){if(Xt){var A=md;if(A!==null)throw A}}function er(A,p,b,C){Xt=!1;var U=A.updateQueue;pt=!1;var q=U.firstBaseUpdate,de=U.lastBaseUpdate,ye=U.shared.pending;if(ye!==null){U.shared.pending=null;var Pe=ye,lt=Pe.next;Pe.next=null,de===null?q=lt:de.next=lt,de=Pe;var St=A.alternate;St!==null&&(St=St.updateQueue,ye=St.lastBaseUpdate,ye!==de&&(ye===null?St.firstBaseUpdate=lt:ye.next=lt,St.lastBaseUpdate=Pe))}if(q!==null){var Ot=U.baseState;de=0,St=lt=Pe=null,ye=q;do{var At=ye.lane&-536870913,ht=At!==ye.lane;if(ht?(Ln&At)===At:(C&At)===At){At!==0&&At===Tf&&(Xt=!0),St!==null&&(St=St.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var Gr=A,Dr=ye;At=p;var ya=b;switch(Dr.tag){case 1:if(Gr=Dr.payload,typeof Gr=="function"){Ot=Gr.call(ya,Ot,At);break e}Ot=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Dr.payload,At=typeof Gr=="function"?Gr.call(ya,Ot,At):Gr,At==null)break e;Ot=d({},Ot,At);break e;case 2:pt=!0}}At=ye.callback,At!==null&&(A.flags|=64,ht&&(A.flags|=8192),ht=U.callbacks,ht===null?U.callbacks=[At]:ht.push(At))}else ht={lane:At,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},St===null?(lt=St=ht,Pe=Ot):St=St.next=ht,de|=At;if(ye=ye.next,ye===null){if(ye=U.shared.pending,ye===null)break;ht=ye,ye=ht.next,ht.next=null,U.lastBaseUpdate=ht,U.shared.pending=null}}while(!0);St===null&&(Pe=Ot),U.baseState=Pe,U.firstBaseUpdate=lt,U.lastBaseUpdate=St,q===null&&(U.shared.lanes=0),m0|=de,A.lanes=de,A.memoizedState=Ot}}function Pn(A,p){if(typeof A!="function")throw Error(n(191,A));A.call(p)}function $n(A,p){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)Pn(b[A],p)}var fn=X(null),ln=X(0);function ra(A,p){A=Qf,Q(ln,A),Q(fn,p),Qf=A|p.baseLanes}function Gn(){Q(ln,Qf),Q(fn,fn.current)}function Yr(){Qf=ln.current,D(fn),D(ln)}var ua=0,jr=null,Ur=null,Dn=null,Rn=!1,oi=!1,Qs=!1,rs=0,ns=0,xs=null,Hl=0;function Kn(){throw Error(n(321))}function vs(A,p){if(p===null)return!1;for(var b=0;b<p.length&&b<A.length;b++)if(!ai(A[b],p[b]))return!1;return!0}function wc(A,p,b,C,U,q){return ua=q,jr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,V.H=A===null||A.memoizedState===null?nU:aU,Qs=!1,q=b(C,U),Qs=!1,oi&&(q=If(p,b,C,U)),yA(A),q}function yA(A){V.H=$E;var p=Ur!==null&&Ur.next!==null;if(ua=0,Dn=Ur=jr=null,Rn=!1,ns=0,xs=null,p)throw Error(n(300));A===null||Vi||(A=A.dependencies,A!==null&&sx(A)&&(Vi=!0))}function If(A,p,b,C){jr=A;var U=0;do{if(oi&&(xs=null),ns=0,oi=!1,25<=U)throw Error(n(301));if(U+=1,Dn=Ur=null,A.updateQueue!=null){var q=A.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}V.H=efe,q=p(b,C)}while(oi);return q}function wA(){var A=V.H,p=A.useState()[0];return p=typeof p.then=="function"?EA(p):p,A=A.useState()[0],(Ur!==null?Ur.memoizedState:null)!==A&&(jr.flags|=1024),p}function Ba(){var A=rs!==0;return rs=0,A}function ip(A,p,b){p.updateQueue=A.updateQueue,p.flags&=-2053,A.lanes&=~b}function ox(A){if(Rn){for(A=A.memoizedState;A!==null;){var p=A.queue;p!==null&&(p.pending=null),A=A.next}Rn=!1}ua=0,Dn=Ur=jr=null,oi=!1,ns=rs=0,xs=null}function co(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?jr.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function La(){if(Ur===null){var A=jr.alternate;A=A!==null?A.memoizedState:null}else A=Ur.next;var p=Dn===null?jr.memoizedState:Dn.next;if(p!==null)Dn=p,Ur=A;else{if(A===null)throw jr.alternate===null?Error(n(467)):Error(n(310));Ur=A,A={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Dn===null?jr.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function Ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function EA(A){var p=ns;return ns+=1,xs===null&&(xs=[]),A=st(xs,A,p),p=jr,(Dn===null?p.memoizedState:Dn.next)===null&&(p=p.alternate,V.H=p===null||p.memoizedState===null?nU:aU),A}function Oo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return EA(A);if(A.$$typeof===N)return Ms(A)}throw Error(n(438,String(A)))}function CA(A){var p=null,b=jr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var C=jr.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(U){return U.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=Ff(),jr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(A),C=0;C<A;C++)b[C]=L;return p.index++,b}function Do(A,p){return typeof p=="function"?p(A):p}function op(A){var p=La();return a0(p,Ur,A)}function a0(A,p,b){var C=A.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=b;var U=A.baseQueue,q=C.pending;if(q!==null){if(U!==null){var de=U.next;U.next=q.next,q.next=de}p.baseQueue=U=q,C.pending=null}if(q=A.baseState,U===null)A.memoizedState=q;else{p=U.next;var ye=de=null,Pe=null,lt=p,St=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(Ln&Ot)===Ot:(ua&Ot)===Ot){var At=lt.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===Tf&&(St=!0);else if((ua&At)===At){lt=lt.next,At===Tf&&(St=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(ye=Pe=Ot,de=q):Pe=Pe.next=Ot,jr.lanes|=At,m0|=At;Ot=lt.action,Qs&&b(q,Ot),q=lt.hasEagerState?lt.eagerState:b(q,Ot)}else At={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(ye=Pe=At,de=q):Pe=Pe.next=At,jr.lanes|=Ot,m0|=Ot;lt=lt.next}while(lt!==null&&lt!==p);if(Pe===null?de=q:Pe.next=ye,!ai(q,A.memoizedState)&&(Vi=!0,St&&(b=md,b!==null)))throw b;A.memoizedState=q,A.baseState=de,A.baseQueue=Pe,C.lastRenderedState=q}return U===null&&(C.lanes=0),[A.memoizedState,C.dispatch]}function lx(A){var p=La(),b=p.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=A;var C=b.dispatch,U=b.pending,q=p.memoizedState;if(U!==null){b.pending=null;var de=U=U.next;do q=A(q,de.action),de=de.next;while(de!==U);ai(q,p.memoizedState)||(Vi=!0),p.memoizedState=q,p.baseQueue===null&&(p.baseState=q),b.lastRenderedState=q}return[q,C]}function lp(A,p,b){var C=jr,U=La(),q=Un;if(q){if(b===void 0)throw Error(n(407));b=b()}else b=p();var de=!ai((Ur||U).memoizedState,b);de&&(U.memoizedState=b,Vi=!0),U=U.queue;var ye=s0.bind(null,C,U,A);if(l0(2048,8,ye,[A]),U.getSnapshot!==p||de||Dn!==null&&Dn.memoizedState.tag&1){if(C.flags|=2048,gd(9,Ap(),cp.bind(null,C,U,b,p),null),Ta===null)throw Error(n(349));q||(ua&124)!==0||cx(C,p,b)}return b}function cx(A,p,b){A.flags|=16384,A={getSnapshot:p,value:b},p=jr.updateQueue,p===null?(p=Ff(),jr.updateQueue=p,p.stores=[A]):(b=p.stores,b===null?p.stores=[A]:b.push(A))}function cp(A,p,b,C){p.value=b,p.getSnapshot=C,OE(p)&&DE(A)}function s0(A,p,b){return b(function(){OE(p)&&DE(A)})}function OE(A){var p=A.getSnapshot;A=A.value;try{var b=p();return!ai(A,b)}catch{return!0}}function DE(A){var p=ld(A,2);p!==null&&kc(p,A,2)}function up(A){var p=co();if(typeof A=="function"){var b=A;if(A=b(),Qs){Mt(!0);try{b()}finally{Mt(!1)}}}return p.memoizedState=p.baseState=A,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:A},p}function pd(A,p,b,C){return A.baseState=b,a0(A,Ur,typeof C=="function"?C:Do)}function Cj(A,p,b,C,U){if(zE(A))throw Error(n(485));if(A=p.action,A!==null){var q={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(de){q.listeners.push(de)}};V.T!==null?b(!0):q.isTransition=!1,C(q),b=p.pending,b===null?(q.next=p.pending=q,PE(p,q)):(q.next=b.next,p.pending=b.next=q)}}function PE(A,p){var b=p.action,C=p.payload,U=A.state;if(p.isTransition){var q=V.T,de={};V.T=de;try{var ye=b(U,C),Pe=V.S;Pe!==null&&Pe(de,ye),RE(A,p,ye)}catch(lt){i0(A,p,lt)}finally{V.T=q}}else try{q=b(U,C),RE(A,p,q)}catch(lt){i0(A,p,lt)}}function RE(A,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){bb(A,p,C)},function(C){return i0(A,p,C)}):bb(A,p,b)}function bb(A,p,b){p.status="fulfilled",p.value=b,yb(p),A.state=b,p=A.pending,p!==null&&(b=p.next,b===p?A.pending=null:(b=b.next,p.next=b,PE(A,b)))}function i0(A,p,b){var C=A.pending;if(A.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=b,yb(p),p=p.next;while(p!==C)}A.action=null}function yb(A){A=A.listeners;for(var p=0;p<A.length;p++)(0,A[p])()}function wb(A,p){return p}function dp(A,p){if(Un){var b=Ta.formState;if(b!==null){e:{var C=jr;if(Un){if(qa){t:{for(var U=qa,q=mu;U.nodeType!==8;){if(!q){U=null;break t}if(U=yd(U.nextSibling),U===null){U=null;break t}}q=U.data,U=q==="F!"||q==="F"?U:null}if(U){qa=yd(U.nextSibling),C=U.data==="F!";break e}}Bf(C)}C=!1}C&&(p=b[0])}}return b=co(),b.memoizedState=b.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wb,lastRenderedState:p},b.queue=C,b=eU.bind(null,jr,C),C.dispatch=b,C=up(!1),q=Nj.bind(null,jr,!1,C.queue),C=co(),U={state:p,dispatch:null,action:A,pending:null},C.queue=U,b=Cj.bind(null,jr,U,q,b),U.dispatch=b,C.memoizedState=A,[p,b,!1]}function ux(A){var p=La();return o0(p,Ur,A)}function o0(A,p,b){if(p=a0(A,p,wb)[0],A=op(Do)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var C=EA(p)}catch(de){throw de===pe?ve:de}else C=p;p=La();var U=p.queue,q=U.dispatch;return b!==p.memoizedState&&(jr.flags|=2048,gd(9,Ap(),LE.bind(null,U,b),null)),[C,q,A]}function LE(A,p){A.action=p}function ME(A){var p=La(),b=Ur;if(b!==null)return o0(p,b,A);La(),p=p.memoizedState,b=La();var C=b.queue.dispatch;return b.memoizedState=A,[p,C,!1]}function gd(A,p,b,C){return A={tag:A,create:b,deps:C,inst:p,next:null},p=jr.updateQueue,p===null&&(p=Ff(),jr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=A.next=A:(C=b.next,b.next=A,A.next=C,p.lastEffect=A),A}function Ap(){return{destroy:void 0,resource:void 0}}function dx(){return La().memoizedState}function Ec(A,p,b,C){var U=co();C=C===void 0?null:C,jr.flags|=A,U.memoizedState=gd(1|p,Ap(),b,C)}function l0(A,p,b,C){var U=La();C=C===void 0?null:C;var q=U.memoizedState.inst;Ur!==null&&C!==null&&vs(C,Ur.memoizedState.deps)?U.memoizedState=gd(p,q,b,C):(jr.flags|=A,U.memoizedState=gd(1|p,q,b,C))}function Eb(A,p){Ec(8390656,8,A,p)}function UE(A,p){l0(2048,8,A,p)}function Cb(A,p){return l0(4,2,A,p)}function Of(A,p){return l0(4,4,A,p)}function QE(A,p){if(typeof p=="function"){A=A();var b=p(A);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return A=A(),p.current=A,function(){p.current=null}}function Nb(A,p,b){b=b!=null?b.concat([A]):null,l0(4,4,QE.bind(null,p,A),b)}function _b(){}function Sb(A,p){var b=La();p=p===void 0?null:p;var C=b.memoizedState;return p!==null&&vs(p,C[1])?C[0]:(b.memoizedState=[A,p],A)}function HE(A,p){var b=La();p=p===void 0?null:p;var C=b.memoizedState;if(p!==null&&vs(p,C[1]))return C[0];if(C=A(),Qs){Mt(!0);try{A()}finally{Mt(!1)}}return b.memoizedState=[C,p],C}function Df(A,p,b){return b===void 0||(ua&1073741824)!==0?A.memoizedState=p:(A.memoizedState=b,A=XU(),jr.lanes|=A,m0|=A,b)}function Ax(A,p,b,C){return ai(b,p)?b:fn.current!==null?(A=Df(A,b,C),ai(A,p)||(Vi=!0),A):(ua&42)===0?(Vi=!0,A.memoizedState=b):(A=XU(),jr.lanes|=A,m0|=A,p)}function fp(A,p,b,C,U){var q=W.p;W.p=q!==0&&8>q?q:8;var de=V.T,ye={};V.T=ye,Nj(A,!1,p,b);try{var Pe=U(),lt=V.S;if(lt!==null&&lt(ye,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var St=FE(Pe,C);Tb(A,p,St,Sc(A))}else Tb(A,p,C,Sc(A))}catch(Ot){Tb(A,p,{then:function(){},status:"rejected",reason:Ot},Sc())}finally{W.p=q,V.T=de}}function xd(){}function vu(A,p,b,C){if(A.tag!==5)throw Error(n(476));var U=vd(A).queue;fp(A,U,p,G,b===null?xd:function(){return hp(A),b(C)})}function vd(A){var p=A.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:G},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:b},next:null},A.memoizedState=p,A=A.alternate,A!==null&&(A.memoizedState=p),p}function hp(A){var p=vd(A).next.queue;Tb(A,p,{},Sc())}function mp(){return Ms(Wb)}function kb(){return La().memoizedState}function VE(){return La().memoizedState}function jb(A){for(var p=A.return;p!==null;){switch(p.tag){case 24:case 3:var b=Sc();A=_t(b);var C=Tt(p,A,b);C!==null&&(kc(C,p,b),kt(C,p,b)),p={cache:xb()},A.payload=p;return}p=p.return}}function Bb(A,p,b){var C=Sc();b={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},zE(A)?tU(p,b):(b=pA(A,p,b,C),b!==null&&(kc(b,A,C),rU(b,p,C)))}function eU(A,p,b){var C=Sc();Tb(A,p,b,C)}function Tb(A,p,b,C){var U={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(zE(A))tU(p,U);else{var q=A.alternate;if(A.lanes===0&&(q===null||q.lanes===0)&&(q=p.lastRenderedReducer,q!==null))try{var de=p.lastRenderedState,ye=q(de,b);if(U.hasEagerState=!0,U.eagerState=ye,ai(ye,de))return mA(A,p,U,0),Ta===null&&Ml(),!1}catch{}finally{}if(b=pA(A,p,U,C),b!==null)return kc(b,A,C),rU(b,p,C),!0}return!1}function Nj(A,p,b,C){if(C={lane:2,revertLane:n3(),action:C,hasEagerState:!1,eagerState:null,next:null},zE(A)){if(p)throw Error(n(479))}else p=pA(A,b,C,2),p!==null&&kc(p,A,2)}function zE(A){var p=A.alternate;return A===jr||p!==null&&p===jr}function tU(A,p){oi=Rn=!0;var b=A.pending;b===null?p.next=p:(p.next=b.next,b.next=p),A.pending=p}function rU(A,p,b){if((b&4194048)!==0){var C=p.lanes;C&=A.pendingLanes,b|=C,p.lanes=b,Ze(A,b)}}var $E={readContext:Ms,use:Oo,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn},nU={readContext:Ms,use:Oo,useCallback:function(A,p){return co().memoizedState=[A,p===void 0?null:p],A},useContext:Ms,useEffect:Eb,useImperativeHandle:function(A,p,b){b=b!=null?b.concat([A]):null,Ec(4194308,4,QE.bind(null,p,A),b)},useLayoutEffect:function(A,p){return Ec(4194308,4,A,p)},useInsertionEffect:function(A,p){Ec(4,2,A,p)},useMemo:function(A,p){var b=co();p=p===void 0?null:p;var C=A();if(Qs){Mt(!0);try{A()}finally{Mt(!1)}}return b.memoizedState=[C,p],C},useReducer:function(A,p,b){var C=co();if(b!==void 0){var U=b(p);if(Qs){Mt(!0);try{b(p)}finally{Mt(!1)}}}else U=p;return C.memoizedState=C.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},C.queue=A,A=A.dispatch=Bb.bind(null,jr,A),[C.memoizedState,A]},useRef:function(A){var p=co();return A={current:A},p.memoizedState=A},useState:function(A){A=up(A);var p=A.queue,b=eU.bind(null,jr,p);return p.dispatch=b,[A.memoizedState,b]},useDebugValue:_b,useDeferredValue:function(A,p){var b=co();return Df(b,A,p)},useTransition:function(){var A=up(!1);return A=fp.bind(null,jr,A.queue,!0,!1),co().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,p,b){var C=jr,U=co();if(Un){if(b===void 0)throw Error(n(407));b=b()}else{if(b=p(),Ta===null)throw Error(n(349));(Ln&124)!==0||cx(C,p,b)}U.memoizedState=b;var q={value:b,getSnapshot:p};return U.queue=q,Eb(s0.bind(null,C,q,A),[A]),C.flags|=2048,gd(9,Ap(),cp.bind(null,C,q,b,p),null),b},useId:function(){var A=co(),p=Ta.identifierPrefix;if(Un){var b=Ad,C=dd;b=(C&~(1<<32-Pt(C)-1)).toString(32)+b,p="«"+p+"R"+b,b=rs++,0<b&&(p+="H"+b.toString(32)),p+="»"}else b=Hl++,p="«"+p+"r"+b.toString(32)+"»";return A.memoizedState=p},useHostTransitionStatus:mp,useFormState:dp,useActionState:dp,useOptimistic:function(A){var p=co();p.memoizedState=p.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Nj.bind(null,jr,!0,b),b.dispatch=p,[A,p]},useMemoCache:CA,useCacheRefresh:function(){return co().memoizedState=jb.bind(null,jr)}},aU={readContext:Ms,use:Oo,useCallback:Sb,useContext:Ms,useEffect:UE,useImperativeHandle:Nb,useInsertionEffect:Cb,useLayoutEffect:Of,useMemo:HE,useReducer:op,useRef:dx,useState:function(){return op(Do)},useDebugValue:_b,useDeferredValue:function(A,p){var b=La();return Ax(b,Ur.memoizedState,A,p)},useTransition:function(){var A=op(Do)[0],p=La().memoizedState;return[typeof A=="boolean"?A:EA(A),p]},useSyncExternalStore:lp,useId:kb,useHostTransitionStatus:mp,useFormState:ux,useActionState:ux,useOptimistic:function(A,p){var b=La();return pd(b,Ur,A,p)},useMemoCache:CA,useCacheRefresh:VE},efe={readContext:Ms,use:Oo,useCallback:Sb,useContext:Ms,useEffect:UE,useImperativeHandle:Nb,useInsertionEffect:Cb,useLayoutEffect:Of,useMemo:HE,useReducer:lx,useRef:dx,useState:function(){return lx(Do)},useDebugValue:_b,useDeferredValue:function(A,p){var b=La();return Ur===null?Df(b,A,p):Ax(b,Ur.memoizedState,A,p)},useTransition:function(){var A=lx(Do)[0],p=La().memoizedState;return[typeof A=="boolean"?A:EA(A),p]},useSyncExternalStore:lp,useId:kb,useHostTransitionStatus:mp,useFormState:ME,useActionState:ME,useOptimistic:function(A,p){var b=La();return Ur!==null?pd(b,Ur,A,p):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:CA,useCacheRefresh:VE},fx=null,Ib=0;function GE(A){var p=Ib;return Ib+=1,fx===null&&(fx=[]),st(fx,A,p)}function Fb(A,p){p=p.props.ref,A.ref=p!==void 0?p:null}function KE(A,p){throw p.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(p),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":A)))}function sU(A){var p=A._init;return p(A._payload)}function iU(A){function p(Xe,He){if(A){var nt=Xe.deletions;nt===null?(Xe.deletions=[He],Xe.flags|=16):nt.push(He)}}function b(Xe,He){if(!A)return null;for(;He!==null;)p(Xe,He),He=He.sibling;return null}function C(Xe){for(var He=new Map;Xe!==null;)Xe.key!==null?He.set(Xe.key,Xe):He.set(Xe.index,Xe),Xe=Xe.sibling;return He}function U(Xe,He){return Xe=hu(Xe,He),Xe.index=0,Xe.sibling=null,Xe}function q(Xe,He,nt){return Xe.index=nt,A?(nt=Xe.alternate,nt!==null?(nt=nt.index,nt<He?(Xe.flags|=67108866,He):nt):(Xe.flags|=67108866,He)):(Xe.flags|=1048576,He)}function de(Xe){return A&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function ye(Xe,He,nt,jt){return He===null||He.tag!==6?(He=tx(nt,Xe.mode,jt),He.return=Xe,He):(He=U(He,nt),He.return=Xe,He)}function Pe(Xe,He,nt,jt){var mr=nt.type;return mr===g?St(Xe,He,nt.props.children,jt,nt.key):He!==null&&(He.elementType===mr||typeof mr=="object"&&mr!==null&&mr.$$typeof===S&&sU(mr)===He.type)?(He=U(He,nt.props),Fb(He,nt),He.return=Xe,He):(He=Sf(nt.type,nt.key,nt.props,null,Xe.mode,jt),Fb(He,nt),He.return=Xe,He)}function lt(Xe,He,nt,jt){return He===null||He.tag!==4||He.stateNode.containerInfo!==nt.containerInfo||He.stateNode.implementation!==nt.implementation?(He=tp(nt,Xe.mode,jt),He.return=Xe,He):(He=U(He,nt.children||[]),He.return=Xe,He)}function St(Xe,He,nt,jt,mr){return He===null||He.tag!==7?(He=cd(nt,Xe.mode,jt,mr),He.return=Xe,He):(He=U(He,nt),He.return=Xe,He)}function Ot(Xe,He,nt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=tx(""+He,Xe.mode,nt),He.return=Xe,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return nt=Sf(He.type,He.key,He.props,null,Xe.mode,nt),Fb(nt,He),nt.return=Xe,nt;case m:return He=tp(He,Xe.mode,nt),He.return=Xe,He;case S:var jt=He._init;return He=jt(He._payload),Ot(Xe,He,nt)}if(Z(He)||j(He))return He=cd(He,Xe.mode,nt,null),He.return=Xe,He;if(typeof He.then=="function")return Ot(Xe,GE(He),nt);if(He.$$typeof===N)return Ot(Xe,bA(Xe,He),nt);KE(Xe,He)}return null}function At(Xe,He,nt,jt){var mr=He!==null?He.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return mr!==null?null:ye(Xe,He,""+nt,jt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:return nt.key===mr?Pe(Xe,He,nt,jt):null;case m:return nt.key===mr?lt(Xe,He,nt,jt):null;case S:return mr=nt._init,nt=mr(nt._payload),At(Xe,He,nt,jt)}if(Z(nt)||j(nt))return mr!==null?null:St(Xe,He,nt,jt,null);if(typeof nt.then=="function")return At(Xe,He,GE(nt),jt);if(nt.$$typeof===N)return At(Xe,He,bA(Xe,nt),jt);KE(Xe,nt)}return null}function ht(Xe,He,nt,jt,mr){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return Xe=Xe.get(nt)||null,ye(He,Xe,""+jt,mr);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case h:return Xe=Xe.get(jt.key===null?nt:jt.key)||null,Pe(He,Xe,jt,mr);case m:return Xe=Xe.get(jt.key===null?nt:jt.key)||null,lt(He,Xe,jt,mr);case S:var wn=jt._init;return jt=wn(jt._payload),ht(Xe,He,nt,jt,mr)}if(Z(jt)||j(jt))return Xe=Xe.get(nt)||null,St(He,Xe,jt,mr,null);if(typeof jt.then=="function")return ht(Xe,He,nt,GE(jt),mr);if(jt.$$typeof===N)return ht(Xe,He,nt,bA(He,jt),mr);KE(He,jt)}return null}function Gr(Xe,He,nt,jt){for(var mr=null,wn=null,Er=He,Rr=He=0,$i=null;Er!==null&&Rr<nt.length;Rr++){Er.index>Rr?($i=Er,Er=null):$i=Er.sibling;var qn=At(Xe,Er,nt[Rr],jt);if(qn===null){Er===null&&(Er=$i);break}A&&Er&&qn.alternate===null&&p(Xe,Er),He=q(qn,He,Rr),wn===null?mr=qn:wn.sibling=qn,wn=qn,Er=$i}if(Rr===nt.length)return b(Xe,Er),Un&&jf(Xe,Rr),mr;if(Er===null){for(;Rr<nt.length;Rr++)Er=Ot(Xe,nt[Rr],jt),Er!==null&&(He=q(Er,He,Rr),wn===null?mr=Er:wn.sibling=Er,wn=Er);return Un&&jf(Xe,Rr),mr}for(Er=C(Er);Rr<nt.length;Rr++)$i=ht(Er,Xe,Rr,nt[Rr],jt),$i!==null&&(A&&$i.alternate!==null&&Er.delete($i.key===null?Rr:$i.key),He=q($i,He,Rr),wn===null?mr=$i:wn.sibling=$i,wn=$i);return A&&Er.forEach(function(C0){return p(Xe,C0)}),Un&&jf(Xe,Rr),mr}function Dr(Xe,He,nt,jt){if(nt==null)throw Error(n(151));for(var mr=null,wn=null,Er=He,Rr=He=0,$i=null,qn=nt.next();Er!==null&&!qn.done;Rr++,qn=nt.next()){Er.index>Rr?($i=Er,Er=null):$i=Er.sibling;var C0=At(Xe,Er,qn.value,jt);if(C0===null){Er===null&&(Er=$i);break}A&&Er&&C0.alternate===null&&p(Xe,Er),He=q(C0,He,Rr),wn===null?mr=C0:wn.sibling=C0,wn=C0,Er=$i}if(qn.done)return b(Xe,Er),Un&&jf(Xe,Rr),mr;if(Er===null){for(;!qn.done;Rr++,qn=nt.next())qn=Ot(Xe,qn.value,jt),qn!==null&&(He=q(qn,He,Rr),wn===null?mr=qn:wn.sibling=qn,wn=qn);return Un&&jf(Xe,Rr),mr}for(Er=C(Er);!qn.done;Rr++,qn=nt.next())qn=ht(Er,Xe,Rr,qn.value,jt),qn!==null&&(A&&qn.alternate!==null&&Er.delete(qn.key===null?Rr:qn.key),He=q(qn,He,Rr),wn===null?mr=qn:wn.sibling=qn,wn=qn);return A&&Er.forEach(function(the){return p(Xe,the)}),Un&&jf(Xe,Rr),mr}function ya(Xe,He,nt,jt){if(typeof nt=="object"&&nt!==null&&nt.type===g&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:e:{for(var mr=nt.key;He!==null;){if(He.key===mr){if(mr=nt.type,mr===g){if(He.tag===7){b(Xe,He.sibling),jt=U(He,nt.props.children),jt.return=Xe,Xe=jt;break e}}else if(He.elementType===mr||typeof mr=="object"&&mr!==null&&mr.$$typeof===S&&sU(mr)===He.type){b(Xe,He.sibling),jt=U(He,nt.props),Fb(jt,nt),jt.return=Xe,Xe=jt;break e}b(Xe,He);break}else p(Xe,He);He=He.sibling}nt.type===g?(jt=cd(nt.props.children,Xe.mode,jt,nt.key),jt.return=Xe,Xe=jt):(jt=Sf(nt.type,nt.key,nt.props,null,Xe.mode,jt),Fb(jt,nt),jt.return=Xe,Xe=jt)}return de(Xe);case m:e:{for(mr=nt.key;He!==null;){if(He.key===mr)if(He.tag===4&&He.stateNode.containerInfo===nt.containerInfo&&He.stateNode.implementation===nt.implementation){b(Xe,He.sibling),jt=U(He,nt.children||[]),jt.return=Xe,Xe=jt;break e}else{b(Xe,He);break}else p(Xe,He);He=He.sibling}jt=tp(nt,Xe.mode,jt),jt.return=Xe,Xe=jt}return de(Xe);case S:return mr=nt._init,nt=mr(nt._payload),ya(Xe,He,nt,jt)}if(Z(nt))return Gr(Xe,He,nt,jt);if(j(nt)){if(mr=j(nt),typeof mr!="function")throw Error(n(150));return nt=mr.call(nt),Dr(Xe,He,nt,jt)}if(typeof nt.then=="function")return ya(Xe,He,GE(nt),jt);if(nt.$$typeof===N)return ya(Xe,He,bA(Xe,nt),jt);KE(Xe,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,He!==null&&He.tag===6?(b(Xe,He.sibling),jt=U(He,nt),jt.return=Xe,Xe=jt):(b(Xe,He),jt=tx(nt,Xe.mode,jt),jt.return=Xe,Xe=jt),de(Xe)):b(Xe,He)}return function(Xe,He,nt,jt){try{Ib=0;var mr=ya(Xe,He,nt,jt);return fx=null,mr}catch(Er){if(Er===pe||Er===ve)throw Er;var wn=Hi(29,Er,null,Xe.mode);return wn.lanes=jt,wn.return=Xe,wn}finally{}}}var hx=iU(!0),oU=iU(!1),bu=X(null),NA=null;function c0(A){var p=A.alternate;Q(_i,_i.current&1),Q(bu,A),NA===null&&(p===null||fn.current!==null||p.memoizedState!==null)&&(NA=A)}function lU(A){if(A.tag===22){if(Q(_i,_i.current),Q(bu,A),NA===null){var p=A.alternate;p!==null&&p.memoizedState!==null&&(NA=A)}}else u0()}function u0(){Q(_i,_i.current),Q(bu,bu.current)}function Pf(A){D(bu),NA===A&&(NA=null),D(_i)}var _i=X(0);function qE(A){for(var p=A;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||m3(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function _j(A,p,b,C){p=A.memoizedState,b=b(C,p),b=b==null?p:d({},p,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var Sj={enqueueSetState:function(A,p,b){A=A._reactInternals;var C=Sc(),U=_t(C);U.payload=p,b!=null&&(U.callback=b),p=Tt(A,U,C),p!==null&&(kc(p,A,C),kt(p,A,C))},enqueueReplaceState:function(A,p,b){A=A._reactInternals;var C=Sc(),U=_t(C);U.tag=1,U.payload=p,b!=null&&(U.callback=b),p=Tt(A,U,C),p!==null&&(kc(p,A,C),kt(p,A,C))},enqueueForceUpdate:function(A,p){A=A._reactInternals;var b=Sc(),C=_t(b);C.tag=2,p!=null&&(C.callback=p),p=Tt(A,C,b),p!==null&&(kc(p,A,b),kt(p,A,b))}};function cU(A,p,b,C,U,q,de){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(C,q,de):p.prototype&&p.prototype.isPureReactComponent?!lA(b,C)||!lA(U,q):!0}function uU(A,p,b,C){A=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==A&&Sj.enqueueReplaceState(p,p.state,null)}function pp(A,p){var b=p;if("ref"in p){b={};for(var C in p)C!=="ref"&&(b[C]=p[C])}if(A=A.defaultProps){b===p&&(b=d({},b));for(var U in A)b[U]===void 0&&(b[U]=A[U])}return b}var WE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function dU(A){WE(A)}function AU(A){console.error(A)}function fU(A){WE(A)}function XE(A,p){try{var b=A.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function hU(A,p,b){try{var C=A.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function kj(A,p,b){return b=_t(b),b.tag=3,b.payload={element:null},b.callback=function(){XE(A,p)},b}function mU(A){return A=_t(A),A.tag=3,A}function pU(A,p,b,C){var U=b.type.getDerivedStateFromError;if(typeof U=="function"){var q=C.value;A.payload=function(){return U(q)},A.callback=function(){hU(p,b,C)}}var de=b.stateNode;de!==null&&typeof de.componentDidCatch=="function"&&(A.callback=function(){hU(p,b,C),typeof U!="function"&&(p0===null?p0=new Set([this]):p0.add(this));var ye=C.stack;this.componentDidCatch(C.value,{componentStack:ye!==null?ye:""})})}function tfe(A,p,b,C,U){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=b.alternate,p!==null&&n0(p,b,U,!0),b=bu.current,b!==null){switch(b.tag){case 13:return NA===null?Jj():b.alternate===null&&bs===0&&(bs=3),b.flags&=-257,b.flags|=65536,b.lanes=U,C===Ee?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([C]):p.add(C),e3(A,C,U)),!1;case 22:return b.flags|=65536,C===Ee?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([C]):b.add(C)),e3(A,C,U)),!1}throw Error(n(435,b.tag))}return e3(A,C,U),Jj(),!1}if(Un)return p=bu.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=U,C!==gb&&(A=Error(n(422),{cause:C}),r0(pn(A,b)))):(C!==gb&&(p=Error(n(423),{cause:C}),r0(pn(p,b))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,C=pn(C,b),U=kj(A.stateNode,C,U),rr(A,U),bs!==4&&(bs=2)),!1;var q=Error(n(520),{cause:C});if(q=pn(q,b),Ub===null?Ub=[q]:Ub.push(q),bs!==4&&(bs=2),p===null)return!0;C=pn(C,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,A=U&-U,b.lanes|=A,A=kj(b.stateNode,C,A),rr(b,A),!1;case 1:if(p=b.type,q=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(p0===null||!p0.has(q))))return b.flags|=65536,U&=-U,b.lanes|=U,U=mU(U),pU(U,A,b,C),rr(b,U),!1}b=b.return}while(b!==null);return!1}var gU=Error(n(461)),Vi=!1;function uo(A,p,b,C){p.child=A===null?oU(p,null,b,C):hx(p,A.child,b,C)}function xU(A,p,b,C,U){b=b.render;var q=p.ref;if("ref"in C){var de={};for(var ye in C)ye!=="ref"&&(de[ye]=C[ye])}else de=C;return xu(p),C=wc(A,p,b,de,q,U),ye=Ba(),A!==null&&!Vi?(ip(A,p,U),Rf(A,p,U)):(Un&&ye&&rp(p),p.flags|=1,uo(A,p,C,U),p.child)}function vU(A,p,b,C,U){if(A===null){var q=b.type;return typeof q=="function"&&!e0(q)&&q.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=q,bU(A,p,q,C,U)):(A=Sf(b.type,null,C,p,p.mode,U),A.ref=p.ref,A.return=p,p.child=A)}if(q=A.child,!Pj(A,U)){var de=q.memoizedProps;if(b=b.compare,b=b!==null?b:lA,b(de,C)&&A.ref===p.ref)return Rf(A,p,U)}return p.flags|=1,A=hu(q,C),A.ref=p.ref,A.return=p,p.child=A}function bU(A,p,b,C,U){if(A!==null){var q=A.memoizedProps;if(lA(q,C)&&A.ref===p.ref)if(Vi=!1,p.pendingProps=C=q,Pj(A,U))(A.flags&131072)!==0&&(Vi=!0);else return p.lanes=A.lanes,Rf(A,p,U)}return jj(A,p,b,C,U)}function yU(A,p,b){var C=p.pendingProps,U=C.children,q=A!==null?A.memoizedState:null;if(C.mode==="hidden"){if((p.flags&128)!==0){if(C=q!==null?q.baseLanes|b:b,A!==null){for(U=p.child=A.child,q=0;U!==null;)q=q|U.lanes|U.childLanes,U=U.sibling;p.childLanes=q&~C}else p.childLanes=0,p.child=null;return wU(A,p,C,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},A!==null&&oe(p,q!==null?q.cachePool:null),q!==null?ra(p,q):Gn(),lU(p);else return p.lanes=p.childLanes=536870912,wU(A,p,q!==null?q.baseLanes|b:b,b)}else q!==null?(oe(p,q.cachePool),ra(p,q),u0(),p.memoizedState=null):(A!==null&&oe(p,null),Gn(),u0());return uo(A,p,U,b),p.child}function wU(A,p,b,C){var U=re();return U=U===null?null:{parent:Us._currentValue,pool:U},p.memoizedState={baseLanes:b,cachePool:U},A!==null&&oe(p,null),Gn(),lU(p),A!==null&&n0(A,p,C,!0),null}function YE(A,p){var b=p.ref;if(b===null)A!==null&&A.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(n(284));(A===null||A.ref!==b)&&(p.flags|=4194816)}}function jj(A,p,b,C,U){return xu(p),b=wc(A,p,b,C,void 0,U),C=Ba(),A!==null&&!Vi?(ip(A,p,U),Rf(A,p,U)):(Un&&C&&rp(p),p.flags|=1,uo(A,p,b,U),p.child)}function EU(A,p,b,C,U,q){return xu(p),p.updateQueue=null,b=If(p,C,b,U),yA(A),C=Ba(),A!==null&&!Vi?(ip(A,p,q),Rf(A,p,q)):(Un&&C&&rp(p),p.flags|=1,uo(A,p,b,q),p.child)}function CU(A,p,b,C,U){if(xu(p),p.stateNode===null){var q=si,de=b.contextType;typeof de=="object"&&de!==null&&(q=Ms(de)),q=new b(C,q),p.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=Sj,p.stateNode=q,q._reactInternals=p,q=p.stateNode,q.props=C,q.state=p.memoizedState,q.refs={},Qe(p),de=b.contextType,q.context=typeof de=="object"&&de!==null?Ms(de):si,q.state=p.memoizedState,de=b.getDerivedStateFromProps,typeof de=="function"&&(_j(p,b,de,C),q.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(de=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),de!==q.state&&Sj.enqueueReplaceState(q,q.state,null),er(p,C,q,U),br(),q.state=p.memoizedState),typeof q.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(A===null){q=p.stateNode;var ye=p.memoizedProps,Pe=pp(b,ye);q.props=Pe;var lt=q.context,St=b.contextType;de=si,typeof St=="object"&&St!==null&&(de=Ms(St));var Ot=b.getDerivedStateFromProps;St=typeof Ot=="function"||typeof q.getSnapshotBeforeUpdate=="function",ye=p.pendingProps!==ye,St||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ye||lt!==de)&&uU(p,q,C,de),pt=!1;var At=p.memoizedState;q.state=At,er(p,C,q,U),br(),lt=p.memoizedState,ye||At!==lt||pt?(typeof Ot=="function"&&(_j(p,b,Ot,C),lt=p.memoizedState),(Pe=pt||cU(p,b,Pe,C,At,lt,de))?(St||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(p.flags|=4194308)):(typeof q.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=lt),q.props=C,q.state=lt,q.context=de,C=Pe):(typeof q.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{q=p.stateNode,Ve(A,p),de=p.memoizedProps,St=pp(b,de),q.props=St,Ot=p.pendingProps,At=q.context,lt=b.contextType,Pe=si,typeof lt=="object"&&lt!==null&&(Pe=Ms(lt)),ye=b.getDerivedStateFromProps,(lt=typeof ye=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(de!==Ot||At!==Pe)&&uU(p,q,C,Pe),pt=!1,At=p.memoizedState,q.state=At,er(p,C,q,U),br();var ht=p.memoizedState;de!==Ot||At!==ht||pt||A!==null&&A.dependencies!==null&&sx(A.dependencies)?(typeof ye=="function"&&(_j(p,b,ye,C),ht=p.memoizedState),(St=pt||cU(p,b,St,C,At,ht,Pe)||A!==null&&A.dependencies!==null&&sx(A.dependencies))?(lt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(C,ht,Pe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(C,ht,Pe)),typeof q.componentDidUpdate=="function"&&(p.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof q.componentDidUpdate!="function"||de===A.memoizedProps&&At===A.memoizedState||(p.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||de===A.memoizedProps&&At===A.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=ht),q.props=C,q.state=ht,q.context=Pe,C=St):(typeof q.componentDidUpdate!="function"||de===A.memoizedProps&&At===A.memoizedState||(p.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||de===A.memoizedProps&&At===A.memoizedState||(p.flags|=1024),C=!1)}return q=C,YE(A,p),C=(p.flags&128)!==0,q||C?(q=p.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:q.render(),p.flags|=1,A!==null&&C?(p.child=hx(p,A.child,null,U),p.child=hx(p,null,b,U)):uo(A,p,b,U),p.memoizedState=q.state,A=p.child):A=Rf(A,p,U),A}function NU(A,p,b,C){return Al(),p.flags|=256,uo(A,p,b,C),p.child}var Bj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tj(A){return{baseLanes:A,cachePool:Ae()}}function Ij(A,p,b){return A=A!==null?A.childLanes&~b:0,p&&(A|=yu),A}function _U(A,p,b){var C=p.pendingProps,U=!1,q=(p.flags&128)!==0,de;if((de=q)||(de=A!==null&&A.memoizedState===null?!1:(_i.current&2)!==0),de&&(U=!0,p.flags&=-129),de=(p.flags&32)!==0,p.flags&=-33,A===null){if(Un){if(U?c0(p):u0(),Un){var ye=qa,Pe;if(Pe=ye){e:{for(Pe=ye,ye=mu;Pe.nodeType!==8;){if(!ye){ye=null;break e}if(Pe=yd(Pe.nextSibling),Pe===null){ye=null;break e}}ye=Pe}ye!==null?(p.memoizedState={dehydrated:ye,treeContext:kf!==null?{id:dd,overflow:Ad}:null,retryLane:536870912,hydrationErrors:null},Pe=Hi(18,null,null,0),Pe.stateNode=ye,Pe.return=p,p.child=Pe,Ls=p,qa=null,Pe=!0):Pe=!1}Pe||Bf(p)}if(ye=p.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return m3(ye)?p.lanes=32:p.lanes=536870912,null;Pf(p)}return ye=C.children,C=C.fallback,U?(u0(),U=p.mode,ye=JE({mode:"hidden",children:ye},U),C=cd(C,U,b,null),ye.return=p,C.return=p,ye.sibling=C,p.child=ye,U=p.child,U.memoizedState=Tj(b),U.childLanes=Ij(A,de,b),p.memoizedState=Bj,C):(c0(p),Fj(p,ye))}if(Pe=A.memoizedState,Pe!==null&&(ye=Pe.dehydrated,ye!==null)){if(q)p.flags&256?(c0(p),p.flags&=-257,p=Oj(A,p,b)):p.memoizedState!==null?(u0(),p.child=A.child,p.flags|=128,p=null):(u0(),U=C.fallback,ye=p.mode,C=JE({mode:"visible",children:C.children},ye),U=cd(U,ye,b,null),U.flags|=2,C.return=p,U.return=p,C.sibling=U,p.child=C,hx(p,A.child,null,b),C=p.child,C.memoizedState=Tj(b),C.childLanes=Ij(A,de,b),p.memoizedState=Bj,p=U);else if(c0(p),m3(ye)){if(de=ye.nextSibling&&ye.nextSibling.dataset,de)var lt=de.dgst;de=lt,C=Error(n(419)),C.stack="",C.digest=de,r0({value:C,source:null,stack:null}),p=Oj(A,p,b)}else if(Vi||n0(A,p,b,!1),de=(b&A.childLanes)!==0,Vi||de){if(de=Ta,de!==null&&(C=b&-b,C=(C&42)!==0?1:mt(C),C=(C&(de.suspendedLanes|b))!==0?0:C,C!==0&&C!==Pe.retryLane))throw Pe.retryLane=C,ld(A,C),kc(de,A,C),gU;ye.data==="$?"||Jj(),p=Oj(A,p,b)}else ye.data==="$?"?(p.flags|=192,p.child=A.child,p=null):(A=Pe.treeContext,qa=yd(ye.nextSibling),Ls=p,Un=!0,xA=null,mu=!1,A!==null&&(Ql[dl++]=dd,Ql[dl++]=Ad,Ql[dl++]=kf,dd=A.id,Ad=A.overflow,kf=p),p=Fj(p,C.children),p.flags|=4096);return p}return U?(u0(),U=C.fallback,ye=p.mode,Pe=A.child,lt=Pe.sibling,C=hu(Pe,{mode:"hidden",children:C.children}),C.subtreeFlags=Pe.subtreeFlags&65011712,lt!==null?U=hu(lt,U):(U=cd(U,ye,b,null),U.flags|=2),U.return=p,C.return=p,C.sibling=U,p.child=C,C=U,U=p.child,ye=A.child.memoizedState,ye===null?ye=Tj(b):(Pe=ye.cachePool,Pe!==null?(lt=Us._currentValue,Pe=Pe.parent!==lt?{parent:lt,pool:lt}:Pe):Pe=Ae(),ye={baseLanes:ye.baseLanes|b,cachePool:Pe}),U.memoizedState=ye,U.childLanes=Ij(A,de,b),p.memoizedState=Bj,C):(c0(p),b=A.child,A=b.sibling,b=hu(b,{mode:"visible",children:C.children}),b.return=p,b.sibling=null,A!==null&&(de=p.deletions,de===null?(p.deletions=[A],p.flags|=16):de.push(A)),p.child=b,p.memoizedState=null,b)}function Fj(A,p){return p=JE({mode:"visible",children:p},A.mode),p.return=A,A.child=p}function JE(A,p){return A=Hi(22,A,null,p),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Oj(A,p,b){return hx(p,A.child,null,b),A=Fj(p,p.pendingProps.children),A.flags|=2,p.memoizedState=null,A}function SU(A,p,b){A.lanes|=p;var C=A.alternate;C!==null&&(C.lanes|=p),nx(A.return,p,b)}function Dj(A,p,b,C,U){var q=A.memoizedState;q===null?A.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:U}:(q.isBackwards=p,q.rendering=null,q.renderingStartTime=0,q.last=C,q.tail=b,q.tailMode=U)}function kU(A,p,b){var C=p.pendingProps,U=C.revealOrder,q=C.tail;if(uo(A,p,C.children,b),C=_i.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=p.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&SU(A,b,p);else if(A.tag===19)SU(A,b,p);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break e;for(;A.sibling===null;){if(A.return===null||A.return===p)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}C&=1}switch(Q(_i,C),U){case"forwards":for(b=p.child,U=null;b!==null;)A=b.alternate,A!==null&&qE(A)===null&&(U=b),b=b.sibling;b=U,b===null?(U=p.child,p.child=null):(U=b.sibling,b.sibling=null),Dj(p,!1,U,b,q);break;case"backwards":for(b=null,U=p.child,p.child=null;U!==null;){if(A=U.alternate,A!==null&&qE(A)===null){p.child=U;break}A=U.sibling,U.sibling=b,b=U,U=A}Dj(p,!0,b,null,q);break;case"together":Dj(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Rf(A,p,b){if(A!==null&&(p.dependencies=A.dependencies),m0|=p.lanes,(b&p.childLanes)===0)if(A!==null){if(n0(A,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(A!==null&&p.child!==A.child)throw Error(n(153));if(p.child!==null){for(A=p.child,b=hu(A,A.pendingProps),p.child=b,b.return=p;A.sibling!==null;)A=A.sibling,b=b.sibling=hu(A,A.pendingProps),b.return=p;b.sibling=null}return p.child}function Pj(A,p){return(A.lanes&p)!==0?!0:(A=A.dependencies,!!(A!==null&&sx(A)))}function rfe(A,p,b){switch(p.tag){case 3:ie(p,p.stateNode.containerInfo),vA(p,Us,A.memoizedState.cache),Al();break;case 27:case 5:ue(p);break;case 4:ie(p,p.stateNode.containerInfo);break;case 10:vA(p,p.type,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(c0(p),p.flags|=128,null):(b&p.child.childLanes)!==0?_U(A,p,b):(c0(p),A=Rf(A,p,b),A!==null?A.sibling:null);c0(p);break;case 19:var U=(A.flags&128)!==0;if(C=(b&p.childLanes)!==0,C||(n0(A,p,b,!1),C=(b&p.childLanes)!==0),U){if(C)return kU(A,p,b);p.flags|=128}if(U=p.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Q(_i,_i.current),C)break;return null;case 22:case 23:return p.lanes=0,yU(A,p,b);case 24:vA(p,Us,A.memoizedState.cache)}return Rf(A,p,b)}function jU(A,p,b){if(A!==null)if(A.memoizedProps!==p.pendingProps)Vi=!0;else{if(!Pj(A,b)&&(p.flags&128)===0)return Vi=!1,rfe(A,p,b);Vi=(A.flags&131072)!==0}else Vi=!1,Un&&(p.flags&1048576)!==0&&kE(p,rx,p.index);switch(p.lanes=0,p.tag){case 16:e:{A=p.pendingProps;var C=p.elementType,U=C._init;if(C=U(C._payload),p.type=C,typeof C=="function")e0(C)?(A=pp(C,A),p.tag=1,p=CU(null,p,C,A,b)):(p.tag=0,p=jj(null,p,C,A,b));else{if(C!=null){if(U=C.$$typeof,U===B){p.tag=11,p=xU(null,p,C,A,b);break e}else if(U===E){p.tag=14,p=vU(null,p,C,A,b);break e}}throw p=M(C)||C,Error(n(306,p,""))}}return p;case 0:return jj(A,p,p.type,p.pendingProps,b);case 1:return C=p.type,U=pp(C,p.pendingProps),CU(A,p,C,U,b);case 3:e:{if(ie(p,p.stateNode.containerInfo),A===null)throw Error(n(387));C=p.pendingProps;var q=p.memoizedState;U=q.element,Ve(A,p),er(p,C,null,b);var de=p.memoizedState;if(C=de.cache,vA(p,Us,C),C!==q.cache&&ax(p,[Us],b,!0),br(),C=de.element,q.isDehydrated)if(q={element:C,isDehydrated:!1,cache:de.cache},p.updateQueue.baseState=q,p.memoizedState=q,p.flags&256){p=NU(A,p,C,b);break e}else if(C!==U){U=pn(Error(n(424)),p),r0(U),p=NU(A,p,C,b);break e}else{switch(A=p.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(qa=yd(A.firstChild),Ls=p,Un=!0,xA=null,mu=!0,b=oU(p,null,C,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Al(),C===U){p=Rf(A,p,b);break e}uo(A,p,C,b)}p=p.child}return p;case 26:return YE(A,p),A===null?(b=F7(p.type,null,p.pendingProps,null))?p.memoizedState=b:Un||(b=p.type,A=p.pendingProps,C=AC(te.current).createElement(b),C[nr]=p,C[xr]=A,fo(C,b,A),Ge(C),p.stateNode=C):p.memoizedState=F7(p.type,A.memoizedProps,p.pendingProps,A.memoizedState),null;case 27:return ue(p),A===null&&Un&&(C=p.stateNode=B7(p.type,p.pendingProps,te.current),Ls=p,mu=!0,U=qa,v0(p.type)?(p3=U,qa=yd(C.firstChild)):qa=U),uo(A,p,p.pendingProps.children,b),YE(A,p),A===null&&(p.flags|=4194304),p.child;case 5:return A===null&&Un&&((U=C=qa)&&(C=Bfe(C,p.type,p.pendingProps,mu),C!==null?(p.stateNode=C,Ls=p,qa=yd(C.firstChild),mu=!1,U=!0):U=!1),U||Bf(p)),ue(p),U=p.type,q=p.pendingProps,de=A!==null?A.memoizedProps:null,C=q.children,A3(U,q)?C=null:de!==null&&A3(U,de)&&(p.flags|=32),p.memoizedState!==null&&(U=wc(A,p,wA,null,null,b),Wb._currentValue=U),YE(A,p),uo(A,p,C,b),p.child;case 6:return A===null&&Un&&((A=b=qa)&&(b=Tfe(b,p.pendingProps,mu),b!==null?(p.stateNode=b,Ls=p,qa=null,A=!0):A=!1),A||Bf(p)),null;case 13:return _U(A,p,b);case 4:return ie(p,p.stateNode.containerInfo),C=p.pendingProps,A===null?p.child=hx(p,null,C,b):uo(A,p,C,b),p.child;case 11:return xU(A,p,p.type,p.pendingProps,b);case 7:return uo(A,p,p.pendingProps,b),p.child;case 8:return uo(A,p,p.pendingProps.children,b),p.child;case 12:return uo(A,p,p.pendingProps.children,b),p.child;case 10:return C=p.pendingProps,vA(p,p.type,C.value),uo(A,p,C.children,b),p.child;case 9:return U=p.type._context,C=p.pendingProps.children,xu(p),U=Ms(U),C=C(U),p.flags|=1,uo(A,p,C,b),p.child;case 14:return vU(A,p,p.type,p.pendingProps,b);case 15:return bU(A,p,p.type,p.pendingProps,b);case 19:return kU(A,p,b);case 31:return C=p.pendingProps,b=p.mode,C={mode:C.mode,children:C.children},A===null?(b=JE(C,b),b.ref=p.ref,p.child=b,b.return=p,p=b):(b=hu(A.child,C),b.ref=p.ref,p.child=b,b.return=p,p=b),p;case 22:return yU(A,p,b);case 24:return xu(p),C=Ms(Us),A===null?(U=re(),U===null&&(U=Ta,q=xb(),U.pooledCache=q,q.refCount++,q!==null&&(U.pooledCacheLanes|=b),U=q),p.memoizedState={parent:C,cache:U},Qe(p),vA(p,Us,U)):((A.lanes&b)!==0&&(Ve(A,p),er(p,null,null,b),br()),U=A.memoizedState,q=p.memoizedState,U.parent!==C?(U={parent:C,cache:C},p.memoizedState=U,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=U),vA(p,Us,C)):(C=q.cache,vA(p,Us,C),C!==U.cache&&ax(p,[Us],b,!0))),uo(A,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function Lf(A){A.flags|=4}function BU(A,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!L7(p)){if(p=bu.current,p!==null&&((Ln&4194048)===Ln?NA!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||p!==NA))throw tt=Ee,ge;A.flags|=8192}}function ZE(A,p){p!==null&&(A.flags|=4),A.flags&16384&&(p=A.tag!==22?mn():536870912,A.lanes|=p,xx|=p)}function Ob(A,p){if(!Un)switch(A.tailMode){case"hidden":p=A.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||A.tail===null?A.tail=null:A.tail.sibling=null:C.sibling=null}}function as(A){var p=A.alternate!==null&&A.alternate.child===A.child,b=0,C=0;if(p)for(var U=A.child;U!==null;)b|=U.lanes|U.childLanes,C|=U.subtreeFlags&65011712,C|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)b|=U.lanes|U.childLanes,C|=U.subtreeFlags,C|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=C,A.childLanes=b,p}function nfe(A,p,b){var C=p.pendingProps;switch(np(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(p),null;case 1:return as(p),null;case 3:return b=p.stateNode,C=null,A!==null&&(C=A.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),gu(Us),le(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(lo(p)?Lf(p):A===null||A.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,BE())),as(p),null;case 26:return b=p.memoizedState,A===null?(Lf(p),b!==null?(as(p),BU(p,b)):(as(p),p.flags&=-16777217)):b?b!==A.memoizedState?(Lf(p),as(p),BU(p,b)):(as(p),p.flags&=-16777217):(A.memoizedProps!==C&&Lf(p),as(p),p.flags&=-16777217),null;case 27:je(p),b=te.current;var U=p.type;if(A!==null&&p.stateNode!=null)A.memoizedProps!==C&&Lf(p);else{if(!C){if(p.stateNode===null)throw Error(n(166));return as(p),null}A=z.current,lo(p)?jE(p):(A=B7(U,C,b),p.stateNode=A,Lf(p))}return as(p),null;case 5:if(je(p),b=p.type,A!==null&&p.stateNode!=null)A.memoizedProps!==C&&Lf(p);else{if(!C){if(p.stateNode===null)throw Error(n(166));return as(p),null}if(A=z.current,lo(p))jE(p);else{switch(U=AC(te.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof C.is=="string"?U.createElement("select",{is:C.is}):U.createElement("select"),C.multiple?A.multiple=!0:C.size&&(A.size=C.size);break;default:A=typeof C.is=="string"?U.createElement(b,{is:C.is}):U.createElement(b)}}A[nr]=p,A[xr]=C;e:for(U=p.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===p)break e;for(;U.sibling===null;){if(U.return===null||U.return===p)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}p.stateNode=A;e:switch(fo(A,b,C),b){case"button":case"input":case"select":case"textarea":A=!!C.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Lf(p)}}return as(p),p.flags&=-16777217,null;case 6:if(A&&p.stateNode!=null)A.memoizedProps!==C&&Lf(p);else{if(typeof C!="string"&&p.stateNode===null)throw Error(n(166));if(A=te.current,lo(p)){if(A=p.stateNode,b=p.memoizedProps,C=null,U=Ls,U!==null)switch(U.tag){case 27:case 5:C=U.memoizedProps}A[nr]=p,A=!!(A.nodeValue===b||C!==null&&C.suppressHydrationWarning===!0||E7(A.nodeValue,b)),A||Bf(p)}else A=AC(A).createTextNode(C),A[nr]=p,p.stateNode=A}return as(p),null;case 13:if(C=p.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=lo(p),C!==null&&C.dehydrated!==null){if(A===null){if(!U)throw Error(n(318));if(U=p.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[nr]=p}else Al(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;as(p),U=!1}else U=BE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return p.flags&256?(Pf(p),p):(Pf(p),null)}if(Pf(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=C!==null,A=A!==null&&A.memoizedState!==null,b){C=p.child,U=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(U=C.alternate.memoizedState.cachePool.pool);var q=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(q=C.memoizedState.cachePool.pool),q!==U&&(C.flags|=2048)}return b!==A&&b&&(p.child.flags|=8192),ZE(p,p.updateQueue),as(p),null;case 4:return le(),A===null&&o3(p.stateNode.containerInfo),as(p),null;case 10:return gu(p.type),as(p),null;case 19:if(D(_i),U=p.memoizedState,U===null)return as(p),null;if(C=(p.flags&128)!==0,q=U.rendering,q===null)if(C)Ob(U,!1);else{if(bs!==0||A!==null&&(A.flags&128)!==0)for(A=p.child;A!==null;){if(q=qE(A),q!==null){for(p.flags|=128,Ob(U,!1),A=q.updateQueue,p.updateQueue=A,ZE(p,A),p.subtreeFlags=0,A=b,b=p.child;b!==null;)ep(b,A),b=b.sibling;return Q(_i,_i.current&1|2),p.child}A=A.sibling}U.tail!==null&&Be()>rC&&(p.flags|=128,C=!0,Ob(U,!1),p.lanes=4194304)}else{if(!C)if(A=qE(q),A!==null){if(p.flags|=128,C=!0,A=A.updateQueue,p.updateQueue=A,ZE(p,A),Ob(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Un)return as(p),null}else 2*Be()-U.renderingStartTime>rC&&b!==536870912&&(p.flags|=128,C=!0,Ob(U,!1),p.lanes=4194304);U.isBackwards?(q.sibling=p.child,p.child=q):(A=U.last,A!==null?A.sibling=q:p.child=q,U.last=q)}return U.tail!==null?(p=U.tail,U.rendering=p,U.tail=p.sibling,U.renderingStartTime=Be(),p.sibling=null,A=_i.current,Q(_i,C?A&1|2:A&1),p):(as(p),null);case 22:case 23:return Pf(p),Yr(),C=p.memoizedState!==null,A!==null?A.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(b&536870912)!==0&&(p.flags&128)===0&&(as(p),p.subtreeFlags&6&&(p.flags|=8192)):as(p),b=p.updateQueue,b!==null&&ZE(p,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==b&&(p.flags|=2048),A!==null&&D(H),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),gu(Us),as(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function afe(A,p){switch(np(p),p.tag){case 1:return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 3:return gu(Us),le(),A=p.flags,(A&65536)!==0&&(A&128)===0?(p.flags=A&-65537|128,p):null;case 26:case 27:case 5:return je(p),null;case 13:if(Pf(p),A=p.memoizedState,A!==null&&A.dehydrated!==null){if(p.alternate===null)throw Error(n(340));Al()}return A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 19:return D(_i),null;case 4:return le(),null;case 10:return gu(p.type),null;case 22:case 23:return Pf(p),Yr(),A!==null&&D(H),A=p.flags,A&65536?(p.flags=A&-65537|128,p):null;case 24:return gu(Us),null;case 25:return null;default:return null}}function TU(A,p){switch(np(p),p.tag){case 3:gu(Us),le();break;case 26:case 27:case 5:je(p);break;case 4:le();break;case 13:Pf(p);break;case 19:D(_i);break;case 10:gu(p.type);break;case 22:case 23:Pf(p),Yr(),A!==null&&D(H);break;case 24:gu(Us)}}function Db(A,p){try{var b=p.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var U=C.next;b=U;do{if((b.tag&A)===A){C=void 0;var q=b.create,de=b.inst;C=q(),de.destroy=C}b=b.next}while(b!==U)}}catch(ye){Ca(p,p.return,ye)}}function d0(A,p,b){try{var C=p.updateQueue,U=C!==null?C.lastEffect:null;if(U!==null){var q=U.next;C=q;do{if((C.tag&A)===A){var de=C.inst,ye=de.destroy;if(ye!==void 0){de.destroy=void 0,U=p;var Pe=b,lt=ye;try{lt()}catch(St){Ca(U,Pe,St)}}}C=C.next}while(C!==q)}}catch(St){Ca(p,p.return,St)}}function IU(A){var p=A.updateQueue;if(p!==null){var b=A.stateNode;try{$n(p,b)}catch(C){Ca(A,A.return,C)}}}function FU(A,p,b){b.props=pp(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(C){Ca(A,p,C)}}function Pb(A,p){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var C=A.stateNode;break;case 30:C=A.stateNode;break;default:C=A.stateNode}typeof b=="function"?A.refCleanup=b(C):b.current=C}}catch(U){Ca(A,p,U)}}function _A(A,p){var b=A.ref,C=A.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(U){Ca(A,p,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(U){Ca(A,p,U)}else b.current=null}function OU(A){var p=A.type,b=A.memoizedProps,C=A.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&C.focus();break e;case"img":b.src?C.src=b.src:b.srcSet&&(C.srcset=b.srcSet)}}catch(U){Ca(A,A.return,U)}}function Rj(A,p,b){try{var C=A.stateNode;Nfe(C,A.type,b,p),C[xr]=p}catch(U){Ca(A,A.return,U)}}function DU(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&v0(A.type)||A.tag===4}function Lj(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||DU(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&v0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Mj(A,p,b){var C=A.tag;if(C===5||C===6)A=A.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(A),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=dC));else if(C!==4&&(C===27&&v0(A.type)&&(b=A.stateNode,p=null),A=A.child,A!==null))for(Mj(A,p,b),A=A.sibling;A!==null;)Mj(A,p,b),A=A.sibling}function eC(A,p,b){var C=A.tag;if(C===5||C===6)A=A.stateNode,p?b.insertBefore(A,p):b.appendChild(A);else if(C!==4&&(C===27&&v0(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(eC(A,p,b),A=A.sibling;A!==null;)eC(A,p,b),A=A.sibling}function PU(A){var p=A.stateNode,b=A.memoizedProps;try{for(var C=A.type,U=p.attributes;U.length;)p.removeAttributeNode(U[0]);fo(p,C,b),p[nr]=A,p[xr]=b}catch(q){Ca(A,A.return,q)}}var Mf=!1,Hs=!1,Uj=!1,RU=typeof WeakSet=="function"?WeakSet:Set,zi=null;function sfe(A,p){if(A=A.containerInfo,u3=xC,A=oo(A),Ni(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var U=C.anchorOffset,q=C.focusNode;C=C.focusOffset;try{b.nodeType,q.nodeType}catch{b=null;break e}var de=0,ye=-1,Pe=-1,lt=0,St=0,Ot=A,At=null;t:for(;;){for(var ht;Ot!==b||U!==0&&Ot.nodeType!==3||(ye=de+U),Ot!==q||C!==0&&Ot.nodeType!==3||(Pe=de+C),Ot.nodeType===3&&(de+=Ot.nodeValue.length),(ht=Ot.firstChild)!==null;)At=Ot,Ot=ht;for(;;){if(Ot===A)break t;if(At===b&&++lt===U&&(ye=de),At===q&&++St===C&&(Pe=de),(ht=Ot.nextSibling)!==null)break;Ot=At,At=Ot.parentNode}Ot=ht}b=ye===-1||Pe===-1?null:{start:ye,end:Pe}}else b=null}b=b||{start:0,end:0}}else b=null;for(d3={focusedElem:A,selectionRange:b},xC=!1,zi=p;zi!==null;)if(p=zi,A=p.child,(p.subtreeFlags&1024)!==0&&A!==null)A.return=p,zi=A;else for(;zi!==null;){switch(p=zi,q=p.alternate,A=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&q!==null){A=void 0,b=p,U=q.memoizedProps,q=q.memoizedState,C=b.stateNode;try{var Gr=pp(b.type,U,b.elementType===b.type);A=C.getSnapshotBeforeUpdate(Gr,q),C.__reactInternalSnapshotBeforeUpdate=A}catch(Dr){Ca(b,b.return,Dr)}}break;case 3:if((A&1024)!==0){if(A=p.stateNode.containerInfo,b=A.nodeType,b===9)h3(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":h3(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=p.sibling,A!==null){A.return=p.return,zi=A;break}zi=p.return}}function LU(A,p,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:A0(A,b),C&4&&Db(5,b);break;case 1:if(A0(A,b),C&4)if(A=b.stateNode,p===null)try{A.componentDidMount()}catch(de){Ca(b,b.return,de)}else{var U=pp(b.type,p.memoizedProps);p=p.memoizedState;try{A.componentDidUpdate(U,p,A.__reactInternalSnapshotBeforeUpdate)}catch(de){Ca(b,b.return,de)}}C&64&&IU(b),C&512&&Pb(b,b.return);break;case 3:if(A0(A,b),C&64&&(A=b.updateQueue,A!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{$n(A,p)}catch(de){Ca(b,b.return,de)}}break;case 27:p===null&&C&4&&PU(b);case 26:case 5:A0(A,b),p===null&&C&4&&OU(b),C&512&&Pb(b,b.return);break;case 12:A0(A,b);break;case 13:A0(A,b),C&4&&QU(A,b),C&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=hfe.bind(null,b),Ife(A,b))));break;case 22:if(C=b.memoizedState!==null||Mf,!C){p=p!==null&&p.memoizedState!==null||Hs,U=Mf;var q=Hs;Mf=C,(Hs=p)&&!q?f0(A,b,(b.subtreeFlags&8772)!==0):A0(A,b),Mf=U,Hs=q}break;case 30:break;default:A0(A,b)}}function MU(A){var p=A.alternate;p!==null&&(A.alternate=null,MU(p)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(p=A.stateNode,p!==null&&we(p)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Wa=null,Vl=!1;function Uf(A,p,b){for(b=b.child;b!==null;)UU(A,p,b),b=b.sibling}function UU(A,p,b){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(gt,b)}catch{}switch(b.tag){case 26:Hs||_A(b,p),Uf(A,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:Hs||_A(b,p);var C=Wa,U=Vl;v0(b.type)&&(Wa=b.stateNode,Vl=!1),Uf(A,p,b),$b(b.stateNode),Wa=C,Vl=U;break;case 5:Hs||_A(b,p);case 6:if(C=Wa,U=Vl,Wa=null,Uf(A,p,b),Wa=C,Vl=U,Wa!==null)if(Vl)try{(Wa.nodeType===9?Wa.body:Wa.nodeName==="HTML"?Wa.ownerDocument.body:Wa).removeChild(b.stateNode)}catch(q){Ca(b,p,q)}else try{Wa.removeChild(b.stateNode)}catch(q){Ca(b,p,q)}break;case 18:Wa!==null&&(Vl?(A=Wa,k7(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),Zb(A)):k7(Wa,b.stateNode));break;case 4:C=Wa,U=Vl,Wa=b.stateNode.containerInfo,Vl=!0,Uf(A,p,b),Wa=C,Vl=U;break;case 0:case 11:case 14:case 15:Hs||d0(2,b,p),Hs||d0(4,b,p),Uf(A,p,b);break;case 1:Hs||(_A(b,p),C=b.stateNode,typeof C.componentWillUnmount=="function"&&FU(b,p,C)),Uf(A,p,b);break;case 21:Uf(A,p,b);break;case 22:Hs=(C=Hs)||b.memoizedState!==null,Uf(A,p,b),Hs=C;break;default:Uf(A,p,b)}}function QU(A,p){if(p.memoizedState===null&&(A=p.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Zb(A)}catch(b){Ca(p,p.return,b)}}function ife(A){switch(A.tag){case 13:case 19:var p=A.stateNode;return p===null&&(p=A.stateNode=new RU),p;case 22:return A=A.stateNode,p=A._retryCache,p===null&&(p=A._retryCache=new RU),p;default:throw Error(n(435,A.tag))}}function Qj(A,p){var b=ife(A);p.forEach(function(C){var U=mfe.bind(null,A,C);b.has(C)||(b.add(C),C.then(U,U))})}function Cc(A,p){var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var U=b[C],q=A,de=p,ye=de;e:for(;ye!==null;){switch(ye.tag){case 27:if(v0(ye.type)){Wa=ye.stateNode,Vl=!1;break e}break;case 5:Wa=ye.stateNode,Vl=!1;break e;case 3:case 4:Wa=ye.stateNode.containerInfo,Vl=!0;break e}ye=ye.return}if(Wa===null)throw Error(n(160));UU(q,de,U),Wa=null,Vl=!1,q=U.alternate,q!==null&&(q.return=null),U.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)HU(p,A),p=p.sibling}var bd=null;function HU(A,p){var b=A.alternate,C=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Cc(p,A),Nc(A),C&4&&(d0(3,A,A.return),Db(3,A),d0(5,A,A.return));break;case 1:Cc(p,A),Nc(A),C&512&&(Hs||b===null||_A(b,b.return)),C&64&&Mf&&(A=A.updateQueue,A!==null&&(C=A.callbacks,C!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:var U=bd;if(Cc(p,A),Nc(A),C&512&&(Hs||b===null||_A(b,b.return)),C&4){var q=b!==null?b.memoizedState:null;if(C=A.memoizedState,b===null)if(C===null)if(A.stateNode===null){e:{C=A.type,b=A.memoizedProps,U=U.ownerDocument||U;t:switch(C){case"title":q=U.getElementsByTagName("title")[0],(!q||q[Ce]||q[nr]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=U.createElement(C),U.head.insertBefore(q,U.querySelector("head > title"))),fo(q,C,b),q[nr]=A,Ge(q),C=q;break e;case"link":var de=P7("link","href",U).get(C+(b.href||""));if(de){for(var ye=0;ye<de.length;ye++)if(q=de[ye],q.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&q.getAttribute("rel")===(b.rel==null?null:b.rel)&&q.getAttribute("title")===(b.title==null?null:b.title)&&q.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){de.splice(ye,1);break t}}q=U.createElement(C),fo(q,C,b),U.head.appendChild(q);break;case"meta":if(de=P7("meta","content",U).get(C+(b.content||""))){for(ye=0;ye<de.length;ye++)if(q=de[ye],q.getAttribute("content")===(b.content==null?null:""+b.content)&&q.getAttribute("name")===(b.name==null?null:b.name)&&q.getAttribute("property")===(b.property==null?null:b.property)&&q.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&q.getAttribute("charset")===(b.charSet==null?null:b.charSet)){de.splice(ye,1);break t}}q=U.createElement(C),fo(q,C,b),U.head.appendChild(q);break;default:throw Error(n(468,C))}q[nr]=A,Ge(q),C=q}A.stateNode=C}else R7(U,A.type,A.stateNode);else A.stateNode=D7(U,C,A.memoizedProps);else q!==C?(q===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):q.count--,C===null?R7(U,A.type,A.stateNode):D7(U,C,A.memoizedProps)):C===null&&A.stateNode!==null&&Rj(A,A.memoizedProps,b.memoizedProps)}break;case 27:Cc(p,A),Nc(A),C&512&&(Hs||b===null||_A(b,b.return)),b!==null&&C&4&&Rj(A,A.memoizedProps,b.memoizedProps);break;case 5:if(Cc(p,A),Nc(A),C&512&&(Hs||b===null||_A(b,b.return)),A.flags&32){U=A.stateNode;try{_o(U,"")}catch(ht){Ca(A,A.return,ht)}}C&4&&A.stateNode!=null&&(U=A.memoizedProps,Rj(A,U,b!==null?b.memoizedProps:U)),C&1024&&(Uj=!0);break;case 6:if(Cc(p,A),Nc(A),C&4){if(A.stateNode===null)throw Error(n(162));C=A.memoizedProps,b=A.stateNode;try{b.nodeValue=C}catch(ht){Ca(A,A.return,ht)}}break;case 3:if(mC=null,U=bd,bd=fC(p.containerInfo),Cc(p,A),bd=U,Nc(A),C&4&&b!==null&&b.memoizedState.isDehydrated)try{Zb(p.containerInfo)}catch(ht){Ca(A,A.return,ht)}Uj&&(Uj=!1,VU(A));break;case 4:C=bd,bd=fC(A.stateNode.containerInfo),Cc(p,A),Nc(A),bd=C;break;case 12:Cc(p,A),Nc(A);break;case 13:Cc(p,A),Nc(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Kj=Be()),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,Qj(A,C)));break;case 22:U=A.memoizedState!==null;var Pe=b!==null&&b.memoizedState!==null,lt=Mf,St=Hs;if(Mf=lt||U,Hs=St||Pe,Cc(p,A),Hs=St,Mf=lt,Nc(A),C&8192)e:for(p=A.stateNode,p._visibility=U?p._visibility&-2:p._visibility|1,U&&(b===null||Pe||Mf||Hs||gp(A)),b=null,p=A;;){if(p.tag===5||p.tag===26){if(b===null){Pe=b=p;try{if(q=Pe.stateNode,U)de=q.style,typeof de.setProperty=="function"?de.setProperty("display","none","important"):de.display="none";else{ye=Pe.stateNode;var Ot=Pe.memoizedProps.style,At=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;ye.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ht){Ca(Pe,Pe.return,ht)}}}else if(p.tag===6){if(b===null){Pe=p;try{Pe.stateNode.nodeValue=U?"":Pe.memoizedProps}catch(ht){Ca(Pe,Pe.return,ht)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===A)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===A)break e;for(;p.sibling===null;){if(p.return===null||p.return===A)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}C&4&&(C=A.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,Qj(A,b))));break;case 19:Cc(p,A),Nc(A),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,Qj(A,C)));break;case 30:break;case 21:break;default:Cc(p,A),Nc(A)}}function Nc(A){var p=A.flags;if(p&2){try{for(var b,C=A.return;C!==null;){if(DU(C)){b=C;break}C=C.return}if(b==null)throw Error(n(160));switch(b.tag){case 27:var U=b.stateNode,q=Lj(A);eC(A,q,U);break;case 5:var de=b.stateNode;b.flags&32&&(_o(de,""),b.flags&=-33);var ye=Lj(A);eC(A,ye,de);break;case 3:case 4:var Pe=b.stateNode.containerInfo,lt=Lj(A);Mj(A,lt,Pe);break;default:throw Error(n(161))}}catch(St){Ca(A,A.return,St)}A.flags&=-3}p&4096&&(A.flags&=-4097)}function VU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var p=A;VU(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),A=A.sibling}}function A0(A,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)LU(A,p.alternate,p),p=p.sibling}function gp(A){for(A=A.child;A!==null;){var p=A;switch(p.tag){case 0:case 11:case 14:case 15:d0(4,p,p.return),gp(p);break;case 1:_A(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&FU(p,p.return,b),gp(p);break;case 27:$b(p.stateNode);case 26:case 5:_A(p,p.return),gp(p);break;case 22:p.memoizedState===null&&gp(p);break;case 30:gp(p);break;default:gp(p)}A=A.sibling}}function f0(A,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,U=A,q=p,de=q.flags;switch(q.tag){case 0:case 11:case 15:f0(U,q,b),Db(4,q);break;case 1:if(f0(U,q,b),C=q,U=C.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(lt){Ca(C,C.return,lt)}if(C=q,U=C.updateQueue,U!==null){var ye=C.stateNode;try{var Pe=U.shared.hiddenCallbacks;if(Pe!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Pe.length;U++)Pn(Pe[U],ye)}catch(lt){Ca(C,C.return,lt)}}b&&de&64&&IU(q),Pb(q,q.return);break;case 27:PU(q);case 26:case 5:f0(U,q,b),b&&C===null&&de&4&&OU(q),Pb(q,q.return);break;case 12:f0(U,q,b);break;case 13:f0(U,q,b),b&&de&4&&QU(U,q);break;case 22:q.memoizedState===null&&f0(U,q,b),Pb(q,q.return);break;case 30:break;default:f0(U,q,b)}p=p.sibling}}function Hj(A,p){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&ap(b))}function Vj(A,p){A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&ap(A))}function SA(A,p,b,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)zU(A,p,b,C),p=p.sibling}function zU(A,p,b,C){var U=p.flags;switch(p.tag){case 0:case 11:case 15:SA(A,p,b,C),U&2048&&Db(9,p);break;case 1:SA(A,p,b,C);break;case 3:SA(A,p,b,C),U&2048&&(A=null,p.alternate!==null&&(A=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==A&&(p.refCount++,A!=null&&ap(A)));break;case 12:if(U&2048){SA(A,p,b,C),A=p.stateNode;try{var q=p.memoizedProps,de=q.id,ye=q.onPostCommit;typeof ye=="function"&&ye(de,p.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Pe){Ca(p,p.return,Pe)}}else SA(A,p,b,C);break;case 13:SA(A,p,b,C);break;case 23:break;case 22:q=p.stateNode,de=p.alternate,p.memoizedState!==null?q._visibility&2?SA(A,p,b,C):Rb(A,p):q._visibility&2?SA(A,p,b,C):(q._visibility|=2,mx(A,p,b,C,(p.subtreeFlags&10256)!==0)),U&2048&&Hj(de,p);break;case 24:SA(A,p,b,C),U&2048&&Vj(p.alternate,p);break;default:SA(A,p,b,C)}}function mx(A,p,b,C,U){for(U=U&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var q=A,de=p,ye=b,Pe=C,lt=de.flags;switch(de.tag){case 0:case 11:case 15:mx(q,de,ye,Pe,U),Db(8,de);break;case 23:break;case 22:var St=de.stateNode;de.memoizedState!==null?St._visibility&2?mx(q,de,ye,Pe,U):Rb(q,de):(St._visibility|=2,mx(q,de,ye,Pe,U)),U&&lt&2048&&Hj(de.alternate,de);break;case 24:mx(q,de,ye,Pe,U),U&&lt&2048&&Vj(de.alternate,de);break;default:mx(q,de,ye,Pe,U)}p=p.sibling}}function Rb(A,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=A,C=p,U=C.flags;switch(C.tag){case 22:Rb(b,C),U&2048&&Hj(C.alternate,C);break;case 24:Rb(b,C),U&2048&&Vj(C.alternate,C);break;default:Rb(b,C)}p=p.sibling}}var Lb=8192;function px(A){if(A.subtreeFlags&Lb)for(A=A.child;A!==null;)$U(A),A=A.sibling}function $U(A){switch(A.tag){case 26:px(A),A.flags&Lb&&A.memoizedState!==null&&$fe(bd,A.memoizedState,A.memoizedProps);break;case 5:px(A);break;case 3:case 4:var p=bd;bd=fC(A.stateNode.containerInfo),px(A),bd=p;break;case 22:A.memoizedState===null&&(p=A.alternate,p!==null&&p.memoizedState!==null?(p=Lb,Lb=16777216,px(A),Lb=p):px(A));break;default:px(A)}}function GU(A){var p=A.alternate;if(p!==null&&(A=p.child,A!==null)){p.child=null;do p=A.sibling,A.sibling=null,A=p;while(A!==null)}}function Mb(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];zi=C,qU(C,A)}GU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)KU(A),A=A.sibling}function KU(A){switch(A.tag){case 0:case 11:case 15:Mb(A),A.flags&2048&&d0(9,A,A.return);break;case 3:Mb(A);break;case 12:Mb(A);break;case 22:var p=A.stateNode;A.memoizedState!==null&&p._visibility&2&&(A.return===null||A.return.tag!==13)?(p._visibility&=-3,tC(A)):Mb(A);break;default:Mb(A)}}function tC(A){var p=A.deletions;if((A.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];zi=C,qU(C,A)}GU(A)}for(A=A.child;A!==null;){switch(p=A,p.tag){case 0:case 11:case 15:d0(8,p,p.return),tC(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,tC(p));break;default:tC(p)}A=A.sibling}}function qU(A,p){for(;zi!==null;){var b=zi;switch(b.tag){case 0:case 11:case 15:d0(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:ap(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,zi=C;else e:for(b=A;zi!==null;){C=zi;var U=C.sibling,q=C.return;if(MU(C),C===b){zi=null;break e}if(U!==null){U.return=q,zi=U;break e}zi=q}}}var ofe={getCacheForType:function(A){var p=Ms(Us),b=p.data.get(A);return b===void 0&&(b=A(),p.data.set(A,b)),b}},lfe=typeof WeakMap=="function"?WeakMap:Map,da=0,Ta=null,Nn=null,Ln=0,Aa=0,_c=null,h0=!1,gx=!1,zj=!1,Qf=0,bs=0,m0=0,xp=0,$j=0,yu=0,xx=0,Ub=null,zl=null,Gj=!1,Kj=0,rC=1/0,nC=null,p0=null,Ao=0,g0=null,vx=null,bx=0,qj=0,Wj=null,WU=null,Qb=0,Xj=null;function Sc(){if((da&2)!==0&&Ln!==0)return Ln&-Ln;if(V.T!==null){var A=Tf;return A!==0?A:n3()}return xt()}function XU(){yu===0&&(yu=(Ln&536870912)===0||Un?As():536870912);var A=bu.current;return A!==null&&(A.flags|=32),yu}function kc(A,p,b){(A===Ta&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)&&(yx(A,0),x0(A,Ln,yu,!1)),ja(A,b),((da&2)===0||A!==Ta)&&(A===Ta&&((da&2)===0&&(xp|=b),bs===4&&x0(A,Ln,yu,!1)),kA(A))}function YU(A,p,b){if((da&6)!==0)throw Error(n(327));var C=!b&&(p&124)===0&&(p&A.expiredLanes)===0||Fn(A,p),U=C?dfe(A,p):Zj(A,p,!0),q=C;do{if(U===0){gx&&!C&&x0(A,p,0,!1);break}else{if(b=A.current.alternate,q&&!cfe(b)){U=Zj(A,p,!1),q=!1;continue}if(U===2){if(q=p,A.errorRecoveryDisabledLanes&q)var de=0;else de=A.pendingLanes&-536870913,de=de!==0?de:de&536870912?536870912:0;if(de!==0){p=de;e:{var ye=A;U=Ub;var Pe=ye.current.memoizedState.isDehydrated;if(Pe&&(yx(ye,de).flags|=256),de=Zj(ye,de,!1),de!==2){if(zj&&!Pe){ye.errorRecoveryDisabledLanes|=q,xp|=q,U=4;break e}q=zl,zl=U,q!==null&&(zl===null?zl=q:zl.push.apply(zl,q))}U=de}if(q=!1,U!==2)continue}}if(U===1){yx(A,0),x0(A,p,0,!0);break}e:{switch(C=A,q=U,q){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:x0(C,p,yu,!h0);break e;case 2:zl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(U=Kj+300-Be(),10<U)){if(x0(C,p,yu,!h0),$r(C,0,!0)!==0)break e;C.timeoutHandle=_7(JU.bind(null,C,b,zl,nC,Gj,p,yu,xp,xx,h0,q,2,-0,0),U);break e}JU(C,b,zl,nC,Gj,p,yu,xp,xx,h0,q,0,-0,0)}}break}while(!0);kA(A)}function JU(A,p,b,C,U,q,de,ye,Pe,lt,St,Ot,At,ht){if(A.timeoutHandle=-1,Ot=p.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(qb={stylesheets:null,count:0,unsuspend:zfe},$U(p),Ot=Gfe(),Ot!==null)){A.cancelPendingCommit=Ot(s7.bind(null,A,p,q,b,C,U,de,ye,Pe,St,1,At,ht)),x0(A,q,de,!lt);return}s7(A,p,q,b,C,U,de,ye,Pe)}function cfe(A){for(var p=A;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var U=b[C],q=U.getSnapshot;U=U.value;try{if(!ai(q(),U))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===A)break;for(;p.sibling===null;){if(p.return===null||p.return===A)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function x0(A,p,b,C){p&=~$j,p&=~xp,A.suspendedLanes|=p,A.pingedLanes&=~p,C&&(A.warmLanes|=p),C=A.expirationTimes;for(var U=p;0<U;){var q=31-Pt(U),de=1<<q;C[q]=-1,U&=~de}b!==0&&gr(A,b,p)}function aC(){return(da&6)===0?(Hb(0),!1):!0}function Yj(){if(Nn!==null){if(Aa===0)var A=Nn.return;else A=Nn,hd=ii=null,ox(A),fx=null,Ib=0,A=Nn;for(;A!==null;)TU(A.alternate,A),A=A.return;Nn=null}}function yx(A,p){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,Sfe(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),Yj(),Ta=A,Nn=b=hu(A.current,null),Ln=p,Aa=0,_c=null,h0=!1,gx=Fn(A,p),zj=!1,xx=yu=$j=xp=m0=bs=0,zl=Ub=null,Gj=!1,(p&8)!==0&&(p|=p&32);var C=A.entangledLanes;if(C!==0)for(A=A.entanglements,C&=p;0<C;){var U=31-Pt(C),q=1<<U;p|=A[U],C&=~q}return Qf=p,Ml(),b}function ZU(A,p){jr=null,V.H=$E,p===pe||p===ve?(p=qe(),Aa=3):p===ge?(p=qe(),Aa=4):Aa=p===gU?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,_c=p,Nn===null&&(bs=1,XE(A,pn(p,A.current)))}function e7(){var A=V.H;return V.H=$E,A===null?$E:A}function t7(){var A=V.A;return V.A=ofe,A}function Jj(){bs=4,h0||(Ln&4194048)!==Ln&&bu.current!==null||(gx=!0),(m0&134217727)===0&&(xp&134217727)===0||Ta===null||x0(Ta,Ln,yu,!1)}function Zj(A,p,b){var C=da;da|=2;var U=e7(),q=t7();(Ta!==A||Ln!==p)&&(nC=null,yx(A,p)),p=!1;var de=bs;e:do try{if(Aa!==0&&Nn!==null){var ye=Nn,Pe=_c;switch(Aa){case 8:Yj(),de=6;break e;case 3:case 2:case 9:case 6:bu.current===null&&(p=!0);var lt=Aa;if(Aa=0,_c=null,wx(A,ye,Pe,lt),b&&gx){de=0;break e}break;default:lt=Aa,Aa=0,_c=null,wx(A,ye,Pe,lt)}}ufe(),de=bs;break}catch(St){ZU(A,St)}while(!0);return p&&A.shellSuspendCounter++,hd=ii=null,da=C,V.H=U,V.A=q,Nn===null&&(Ta=null,Ln=0,Ml()),de}function ufe(){for(;Nn!==null;)r7(Nn)}function dfe(A,p){var b=da;da|=2;var C=e7(),U=t7();Ta!==A||Ln!==p?(nC=null,rC=Be()+500,yx(A,p)):gx=Fn(A,p);e:do try{if(Aa!==0&&Nn!==null){p=Nn;var q=_c;t:switch(Aa){case 1:Aa=0,_c=null,wx(A,p,q,1);break;case 2:case 9:if(Te(q)){Aa=0,_c=null,n7(p);break}p=function(){Aa!==2&&Aa!==9||Ta!==A||(Aa=7),kA(A)},q.then(p,p);break e;case 3:Aa=7;break e;case 4:Aa=5;break e;case 7:Te(q)?(Aa=0,_c=null,n7(p)):(Aa=0,_c=null,wx(A,p,q,7));break;case 5:var de=null;switch(Nn.tag){case 26:de=Nn.memoizedState;case 5:case 27:var ye=Nn;if(!de||L7(de)){Aa=0,_c=null;var Pe=ye.sibling;if(Pe!==null)Nn=Pe;else{var lt=ye.return;lt!==null?(Nn=lt,sC(lt)):Nn=null}break t}}Aa=0,_c=null,wx(A,p,q,5);break;case 6:Aa=0,_c=null,wx(A,p,q,6);break;case 8:Yj(),bs=6;break e;default:throw Error(n(462))}}Afe();break}catch(St){ZU(A,St)}while(!0);return hd=ii=null,V.H=C,V.A=U,da=b,Nn!==null?0:(Ta=null,Ln=0,Ml(),bs)}function Afe(){for(;Nn!==null&&!_e();)r7(Nn)}function r7(A){var p=jU(A.alternate,A,Qf);A.memoizedProps=A.pendingProps,p===null?sC(A):Nn=p}function n7(A){var p=A,b=p.alternate;switch(p.tag){case 15:case 0:p=EU(b,p,p.pendingProps,p.type,void 0,Ln);break;case 11:p=EU(b,p,p.pendingProps,p.type.render,p.ref,Ln);break;case 5:ox(p);default:TU(b,p),p=Nn=ep(p,Qf),p=jU(b,p,Qf)}A.memoizedProps=A.pendingProps,p===null?sC(A):Nn=p}function wx(A,p,b,C){hd=ii=null,ox(p),fx=null,Ib=0;var U=p.return;try{if(tfe(A,U,p,b,Ln)){bs=1,XE(A,pn(b,A.current)),Nn=null;return}}catch(q){if(U!==null)throw Nn=U,q;bs=1,XE(A,pn(b,A.current)),Nn=null;return}p.flags&32768?(Un||C===1?A=!0:gx||(Ln&536870912)!==0?A=!1:(h0=A=!0,(C===2||C===9||C===3||C===6)&&(C=bu.current,C!==null&&C.tag===13&&(C.flags|=16384))),a7(p,A)):sC(p)}function sC(A){var p=A;do{if((p.flags&32768)!==0){a7(p,h0);return}A=p.return;var b=nfe(p.alternate,p,Qf);if(b!==null){Nn=b;return}if(p=p.sibling,p!==null){Nn=p;return}Nn=p=A}while(p!==null);bs===0&&(bs=5)}function a7(A,p){do{var b=afe(A.alternate,A);if(b!==null){b.flags&=32767,Nn=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(A=A.sibling,A!==null)){Nn=A;return}Nn=A=b}while(A!==null);bs=6,Nn=null}function s7(A,p,b,C,U,q,de,ye,Pe){A.cancelPendingCommit=null;do iC();while(Ao!==0);if((da&6)!==0)throw Error(n(327));if(p!==null){if(p===A.current)throw Error(n(177));if(q=p.lanes|p.childLanes,q|=ts,rn(A,b,q,de,ye,Pe),A===Ta&&(Nn=Ta=null,Ln=0),vx=p,g0=A,bx=b,qj=q,Wj=U,WU=C,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,pfe(Oe,function(){return u7(),null})):(A.callbackNode=null,A.callbackPriority=0),C=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||C){C=V.T,V.T=null,U=W.p,W.p=2,de=da,da|=4;try{sfe(A,p,b)}finally{da=de,W.p=U,V.T=C}}Ao=1,i7(),o7(),l7()}}function i7(){if(Ao===1){Ao=0;var A=g0,p=vx,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=V.T,V.T=null;var C=W.p;W.p=2;var U=da;da|=4;try{HU(p,A);var q=d3,de=oo(A.containerInfo),ye=q.focusedElem,Pe=q.selectionRange;if(de!==ye&&ye&&ye.ownerDocument&&cA(ye.ownerDocument.documentElement,ye)){if(Pe!==null&&Ni(ye)){var lt=Pe.start,St=Pe.end;if(St===void 0&&(St=lt),"selectionStart"in ye)ye.selectionStart=lt,ye.selectionEnd=Math.min(St,ye.value.length);else{var Ot=ye.ownerDocument||document,At=Ot&&Ot.defaultView||window;if(At.getSelection){var ht=At.getSelection(),Gr=ye.textContent.length,Dr=Math.min(Pe.start,Gr),ya=Pe.end===void 0?Dr:Math.min(Pe.end,Gr);!ht.extend&&Dr>ya&&(de=ya,ya=Dr,Dr=de);var Xe=id(ye,Dr),He=id(ye,ya);if(Xe&&He&&(ht.rangeCount!==1||ht.anchorNode!==Xe.node||ht.anchorOffset!==Xe.offset||ht.focusNode!==He.node||ht.focusOffset!==He.offset)){var nt=Ot.createRange();nt.setStart(Xe.node,Xe.offset),ht.removeAllRanges(),Dr>ya?(ht.addRange(nt),ht.extend(He.node,He.offset)):(nt.setEnd(He.node,He.offset),ht.addRange(nt))}}}}for(Ot=[],ht=ye;ht=ht.parentNode;)ht.nodeType===1&&Ot.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof ye.focus=="function"&&ye.focus(),ye=0;ye<Ot.length;ye++){var jt=Ot[ye];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}xC=!!u3,d3=u3=null}finally{da=U,W.p=C,V.T=b}}A.current=p,Ao=2}}function o7(){if(Ao===2){Ao=0;var A=g0,p=vx,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=V.T,V.T=null;var C=W.p;W.p=2;var U=da;da|=4;try{LU(A,p.alternate,p)}finally{da=U,W.p=C,V.T=b}}Ao=3}}function l7(){if(Ao===4||Ao===3){Ao=0,he();var A=g0,p=vx,b=bx,C=WU;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ao=5:(Ao=0,vx=g0=null,c7(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(p0=null),Je(b),p=p.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(gt,p,void 0,(p.current.flags&128)===128)}catch{}if(C!==null){p=V.T,U=W.p,W.p=2,V.T=null;try{for(var q=A.onRecoverableError,de=0;de<C.length;de++){var ye=C[de];q(ye.value,{componentStack:ye.stack})}}finally{V.T=p,W.p=U}}(bx&3)!==0&&iC(),kA(A),U=A.pendingLanes,(b&4194090)!==0&&(U&42)!==0?A===Xj?Qb++:(Qb=0,Xj=A):Qb=0,Hb(0)}}function c7(A,p){(A.pooledCacheLanes&=p)===0&&(p=A.pooledCache,p!=null&&(A.pooledCache=null,ap(p)))}function iC(A){return i7(),o7(),l7(),u7()}function u7(){if(Ao!==5)return!1;var A=g0,p=qj;qj=0;var b=Je(bx),C=V.T,U=W.p;try{W.p=32>b?32:b,V.T=null,b=Wj,Wj=null;var q=g0,de=bx;if(Ao=0,vx=g0=null,bx=0,(da&6)!==0)throw Error(n(331));var ye=da;if(da|=4,KU(q.current),zU(q,q.current,de,b),da=ye,Hb(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(gt,q)}catch{}return!0}finally{W.p=U,V.T=C,c7(A,p)}}function d7(A,p,b){p=pn(b,p),p=kj(A.stateNode,p,2),A=Tt(A,p,2),A!==null&&(ja(A,2),kA(A))}function Ca(A,p,b){if(A.tag===3)d7(A,A,b);else for(;p!==null;){if(p.tag===3){d7(p,A,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(p0===null||!p0.has(C))){A=pn(b,A),b=mU(2),C=Tt(p,b,2),C!==null&&(pU(b,C,p,A),ja(C,2),kA(C));break}}p=p.return}}function e3(A,p,b){var C=A.pingCache;if(C===null){C=A.pingCache=new lfe;var U=new Set;C.set(p,U)}else U=C.get(p),U===void 0&&(U=new Set,C.set(p,U));U.has(b)||(zj=!0,U.add(b),A=ffe.bind(null,A,p,b),p.then(A,A))}function ffe(A,p,b){var C=A.pingCache;C!==null&&C.delete(p),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Ta===A&&(Ln&b)===b&&(bs===4||bs===3&&(Ln&62914560)===Ln&&300>Be()-Kj?(da&2)===0&&yx(A,0):$j|=b,xx===Ln&&(xx=0)),kA(A)}function A7(A,p){p===0&&(p=mn()),A=ld(A,p),A!==null&&(ja(A,p),kA(A))}function hfe(A){var p=A.memoizedState,b=0;p!==null&&(b=p.retryLane),A7(A,b)}function mfe(A,p){var b=0;switch(A.tag){case 13:var C=A.stateNode,U=A.memoizedState;U!==null&&(b=U.retryLane);break;case 19:C=A.stateNode;break;case 22:C=A.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(p),A7(A,b)}function pfe(A,p){return Ne(A,p)}var oC=null,Ex=null,t3=!1,lC=!1,r3=!1,vp=0;function kA(A){A!==Ex&&A.next===null&&(Ex===null?oC=Ex=A:Ex=Ex.next=A),lC=!0,t3||(t3=!0,xfe())}function Hb(A,p){if(!r3&&lC){r3=!0;do for(var b=!1,C=oC;C!==null;){if(A!==0){var U=C.pendingLanes;if(U===0)var q=0;else{var de=C.suspendedLanes,ye=C.pingedLanes;q=(1<<31-Pt(42|A)+1)-1,q&=U&~(de&~ye),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(b=!0,p7(C,q))}else q=Ln,q=$r(C,C===Ta?q:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(q&3)===0||Fn(C,q)||(b=!0,p7(C,q));C=C.next}while(b);r3=!1}}function gfe(){f7()}function f7(){lC=t3=!1;var A=0;vp!==0&&(_fe()&&(A=vp),vp=0);for(var p=Be(),b=null,C=oC;C!==null;){var U=C.next,q=h7(C,p);q===0?(C.next=null,b===null?oC=U:b.next=U,U===null&&(Ex=b)):(b=C,(A!==0||(q&3)!==0)&&(lC=!0)),C=U}Hb(A)}function h7(A,p){for(var b=A.suspendedLanes,C=A.pingedLanes,U=A.expirationTimes,q=A.pendingLanes&-62914561;0<q;){var de=31-Pt(q),ye=1<<de,Pe=U[de];Pe===-1?((ye&b)===0||(ye&C)!==0)&&(U[de]=Pr(ye,p)):Pe<=p&&(A.expiredLanes|=ye),q&=~ye}if(p=Ta,b=Ln,b=$r(A,A===p?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C=A.callbackNode,b===0||A===p&&(Aa===2||Aa===9)||A.cancelPendingCommit!==null)return C!==null&&C!==null&&ke(C),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||Fn(A,b)){if(p=b&-b,p===A.callbackPriority)return p;switch(C!==null&&ke(C),Je(b)){case 2:case 8:b=xe;break;case 32:b=Oe;break;case 268435456:b=$e;break;default:b=Oe}return C=m7.bind(null,A),b=Ne(b,C),A.callbackPriority=p,A.callbackNode=b,p}return C!==null&&C!==null&&ke(C),A.callbackPriority=2,A.callbackNode=null,2}function m7(A,p){if(Ao!==0&&Ao!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(iC()&&A.callbackNode!==b)return null;var C=Ln;return C=$r(A,A===Ta?C:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C===0?null:(YU(A,C,p),h7(A,Be()),A.callbackNode!=null&&A.callbackNode===b?m7.bind(null,A):null)}function p7(A,p){if(iC())return null;YU(A,p,!0)}function xfe(){kfe(function(){(da&6)!==0?Ne(We,gfe):f7()})}function n3(){return vp===0&&(vp=As()),vp}function g7(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:hc(""+A)}function x7(A,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,A.id&&b.setAttribute("form",A.id),p.parentNode.insertBefore(b,p),A=new FormData(A),b.parentNode.removeChild(b),A}function vfe(A,p,b,C,U){if(p==="submit"&&b&&b.stateNode===U){var q=g7((U[xr]||null).action),de=C.submitter;de&&(p=(p=de[xr]||null)?g7(p.formAction):de.getAttribute("formAction"),p!==null&&(q=p,de=null));var ye=new su("action","action",null,C,U);A.push({event:ye,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(vp!==0){var Pe=de?x7(U,de):new FormData(U);vu(b,{pending:!0,data:Pe,method:U.method,action:q},null,Pe)}}else typeof q=="function"&&(ye.preventDefault(),Pe=de?x7(U,de):new FormData(U),vu(b,{pending:!0,data:Pe,method:U.method,action:q},q,Pe))},currentTarget:U}]})}}for(var a3=0;a3<Nf.length;a3++){var s3=Nf[a3],bfe=s3.toLowerCase(),yfe=s3[0].toUpperCase()+s3.slice(1);Ka(bfe,"on"+yfe)}Ka(Jh,"onAnimationEnd"),Ka(dA,"onAnimationIteration"),Ka(AA,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(fA,"onTransitionRun"),Ka(Cf,"onTransitionStart"),Ka(Zh,"onTransitionCancel"),Ka(hA,"onTransitionEnd"),$t("onMouseEnter",["mouseout","mouseover"]),$t("onMouseLeave",["mouseout","mouseover"]),$t("onPointerEnter",["pointerout","pointerover"]),$t("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wfe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vb));function v7(A,p){p=(p&4)!==0;for(var b=0;b<A.length;b++){var C=A[b],U=C.event;C=C.listeners;e:{var q=void 0;if(p)for(var de=C.length-1;0<=de;de--){var ye=C[de],Pe=ye.instance,lt=ye.currentTarget;if(ye=ye.listener,Pe!==q&&U.isPropagationStopped())break e;q=ye,U.currentTarget=lt;try{q(U)}catch(St){WE(St)}U.currentTarget=null,q=Pe}else for(de=0;de<C.length;de++){if(ye=C[de],Pe=ye.instance,lt=ye.currentTarget,ye=ye.listener,Pe!==q&&U.isPropagationStopped())break e;q=ye,U.currentTarget=lt;try{q(U)}catch(St){WE(St)}U.currentTarget=null,q=Pe}}}}function _n(A,p){var b=p[Zr];b===void 0&&(b=p[Zr]=new Set);var C=A+"__bubble";b.has(C)||(b7(p,A,2,!1),b.add(C))}function i3(A,p,b){var C=0;p&&(C|=4),b7(b,A,C,p)}var cC="_reactListening"+Math.random().toString(36).slice(2);function o3(A){if(!A[cC]){A[cC]=!0,rt.forEach(function(b){b!=="selectionchange"&&(wfe.has(b)||i3(b,!1,A),i3(b,!0,A))});var p=A.nodeType===9?A:A.ownerDocument;p===null||p[cC]||(p[cC]=!0,i3("selectionchange",!1,p))}}function b7(A,p,b,C){switch(z7(p)){case 2:var U=Wfe;break;case 8:U=Xfe;break;default:U=y3}b=U.bind(null,p,b,A),U=void 0,!io||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(U=!0),C?U!==void 0?A.addEventListener(p,b,{capture:!0,passive:U}):A.addEventListener(p,b,!0):U!==void 0?A.addEventListener(p,b,{passive:U}):A.addEventListener(p,b,!1)}function l3(A,p,b,C,U){var q=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var de=C.tag;if(de===3||de===4){var ye=C.stateNode.containerInfo;if(ye===U)break;if(de===4)for(de=C.return;de!==null;){var Pe=de.tag;if((Pe===3||Pe===4)&&de.stateNode.containerInfo===U)return;de=de.return}for(;ye!==null;){if(de=Se(ye),de===null)return;if(Pe=de.tag,Pe===5||Pe===6||Pe===26||Pe===27){C=q=de;continue e}ye=ye.parentNode}}C=C.return}Kh(function(){var lt=q,St=ca(b),Ot=[];e:{var At=od.get(A);if(At!==void 0){var ht=su,Gr=A;switch(A){case"keypress":if(jo(b)===0)break e;case"keydown":case"keyup":ht=xc;break;case"focusin":Gr="focus",ht=ou;break;case"focusout":Gr="blur",ht=ou;break;case"beforeblur":case"afterblur":ht=ou;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=sA;break;case Jh:case dA:case AA:ht=rA;break;case hA:ht=fe;break;case"scroll":case"scrollend":ht=xf;break;case"wheel":ht=Me;break;case"copy":case"cut":case"paste":ht=nA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=sd;break;case"toggle":case"beforetoggle":ht=yt}var Dr=(p&4)!==0,ya=!Dr&&(A==="scroll"||A==="scrollend"),Xe=Dr?At!==null?At+"Capture":null:At;Dr=[];for(var He=lt,nt;He!==null;){var jt=He;if(nt=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||nt===null||Xe===null||(jt=Li(He,Xe),jt!=null&&Dr.push(zb(He,jt,nt))),ya)break;He=He.return}0<Dr.length&&(At=new ht(At,Gr,null,b,St),Ot.push({event:At,listeners:Dr}))}}if((p&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ht=A==="mouseout"||A==="pointerout",At&&b!==Tl&&(Gr=b.relatedTarget||b.fromElement)&&(Se(Gr)||Gr[Wr]))break e;if((ht||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,ht?(Gr=b.relatedTarget||b.toElement,ht=lt,Gr=Gr?Se(Gr):null,Gr!==null&&(ya=s(Gr),Dr=Gr.tag,Gr!==ya||Dr!==5&&Dr!==27&&Dr!==6)&&(Gr=null)):(ht=null,Gr=lt),ht!==Gr)){if(Dr=ps,jt="onMouseLeave",Xe="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Dr=sd,jt="onPointerLeave",Xe="onPointerEnter",He="pointer"),ya=ht==null?At:Ye(ht),nt=Gr==null?At:Ye(Gr),At=new Dr(jt,He+"leave",ht,b,St),At.target=ya,At.relatedTarget=nt,jt=null,Se(St)===lt&&(Dr=new Dr(Xe,He+"enter",Gr,b,St),Dr.target=nt,Dr.relatedTarget=ya,jt=Dr),ya=jt,ht&&Gr)t:{for(Dr=ht,Xe=Gr,He=0,nt=Dr;nt;nt=Cx(nt))He++;for(nt=0,jt=Xe;jt;jt=Cx(jt))nt++;for(;0<He-nt;)Dr=Cx(Dr),He--;for(;0<nt-He;)Xe=Cx(Xe),nt--;for(;He--;){if(Dr===Xe||Xe!==null&&Dr===Xe.alternate)break t;Dr=Cx(Dr),Xe=Cx(Xe)}Dr=null}else Dr=null;ht!==null&&y7(Ot,At,ht,Dr,!1),Gr!==null&&ya!==null&&y7(Ot,ya,Gr,Dr,!0)}}e:{if(At=lt?Ye(lt):window,ht=At.nodeName&&At.nodeName.toLowerCase(),ht==="select"||ht==="input"&&At.type==="file")var mr=Xh;else if(ta(At))if(bf)mr=Zg;else{mr=pb;var wn=To}else ht=At.nodeName,!ht||ht.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?lt&&pf(lt.elementType)&&(mr=Xh):mr=Jm;if(mr&&(mr=mr(A,lt))){Rl(Ot,mr,b,St);break e}wn&&wn(A,At,lt),A==="focusout"&&lt&&At.type==="number"&&lt.memoizedProps.value!=null&&ru(At,"number",At.value)}switch(wn=lt?Ye(lt):window,A){case"focusin":(ta(wn)||wn.contentEditable==="true")&&(Io=wn,vc=lt,Au=null);break;case"focusout":Au=vc=Io=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Ga(Ot,b,St);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":Ga(Ot,b,St)}var Er;if(Zt)e:{switch(A){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else Or?ot(A,b)&&(Rr="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Rr="onCompositionStart");Rr&&(ce&&b.locale!=="ko"&&(Or||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&Or&&(Er=gf()):(ko=St,au="value"in ko?ko.value:ko.textContent,Or=!0)),wn=uC(lt,Rr),0<wn.length&&(Rr=new rd(Rr,A,null,b,St),Ot.push({event:Rr,listeners:wn}),Er?Rr.data=Er:(Er=Ut(b),Er!==null&&(Rr.data=Er)))),(Er=ne?yn(A,b):Xr(A,b))&&(Rr=uC(lt,"onBeforeInput"),0<Rr.length&&(wn=new rd("onBeforeInput","beforeinput",null,b,St),Ot.push({event:wn,listeners:Rr}),wn.data=Er)),vfe(Ot,A,lt,b,St)}v7(Ot,p)})}function zb(A,p,b){return{instance:A,listener:p,currentTarget:b}}function uC(A,p){for(var b=p+"Capture",C=[];A!==null;){var U=A,q=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||q===null||(U=Li(A,b),U!=null&&C.unshift(zb(A,U,q)),U=Li(A,p),U!=null&&C.push(zb(A,U,q))),A.tag===3)return C;A=A.return}return[]}function Cx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function y7(A,p,b,C,U){for(var q=p._reactName,de=[];b!==null&&b!==C;){var ye=b,Pe=ye.alternate,lt=ye.stateNode;if(ye=ye.tag,Pe!==null&&Pe===C)break;ye!==5&&ye!==26&&ye!==27||lt===null||(Pe=lt,U?(lt=Li(b,q),lt!=null&&de.unshift(zb(b,lt,Pe))):U||(lt=Li(b,q),lt!=null&&de.push(zb(b,lt,Pe)))),b=b.return}de.length!==0&&A.push({event:p,listeners:de})}var Efe=/\r\n?/g,Cfe=/\u0000|\uFFFD/g;function w7(A){return(typeof A=="string"?A:""+A).replace(Efe,`
`).replace(Cfe,"")}function E7(A,p){return p=w7(p),w7(A)===p}function dC(){}function ba(A,p,b,C,U,q){switch(b){case"children":typeof C=="string"?p==="body"||p==="textarea"&&C===""||_o(A,C):(typeof C=="number"||typeof C=="bigint")&&p!=="body"&&_o(A,""+C);break;case"className":on(A,"class",C);break;case"tabIndex":on(A,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":on(A,b,C);break;case"style":mf(A,C,q);break;case"data":if(p!=="object"){on(A,"data",C);break}case"src":case"href":if(C===""&&(p!=="a"||b!=="href")){A.removeAttribute(b);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(b);break}C=hc(""+C),A.setAttribute(b,C);break;case"action":case"formAction":if(typeof C=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(b==="formAction"?(p!=="input"&&ba(A,p,"name",U.name,U,null),ba(A,p,"formEncType",U.formEncType,U,null),ba(A,p,"formMethod",U.formMethod,U,null),ba(A,p,"formTarget",U.formTarget,U,null)):(ba(A,p,"encType",U.encType,U,null),ba(A,p,"method",U.method,U,null),ba(A,p,"target",U.target,U,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(b);break}C=hc(""+C),A.setAttribute(b,C);break;case"onClick":C!=null&&(A.onclick=dC);break;case"onScroll":C!=null&&_n("scroll",A);break;case"onScrollEnd":C!=null&&_n("scrollend",A);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(b=C.__html,b!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"multiple":A.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":A.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){A.removeAttribute("xlink:href");break}b=hc(""+C),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(b,""+C):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":C===!0?A.setAttribute(b,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(b,C):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?A.setAttribute(b,C):A.removeAttribute(b);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?A.removeAttribute(b):A.setAttribute(b,C);break;case"popover":_n("beforetoggle",A),_n("toggle",A),sn(A,"popover",C);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":sn(A,"is",C);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=fc.get(b)||b,sn(A,b,C))}}function c3(A,p,b,C,U,q){switch(b){case"style":mf(A,C,q);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(b=C.__html,b!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=b}}break;case"children":typeof C=="string"?_o(A,C):(typeof C=="number"||typeof C=="bigint")&&_o(A,""+C);break;case"onScroll":C!=null&&_n("scroll",A);break;case"onScrollEnd":C!=null&&_n("scrollend",A);break;case"onClick":C!=null&&(A.onclick=dC);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(U=b.endsWith("Capture"),p=b.slice(2,U?b.length-7:void 0),q=A[xr]||null,q=q!=null?q[b]:null,typeof q=="function"&&A.removeEventListener(p,q,U),typeof C=="function")){typeof q!="function"&&q!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(p,C,U);break e}b in A?A[b]=C:C===!0?A.setAttribute(b,""):sn(A,b,C)}}}function fo(A,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",A),_n("load",A);var C=!1,U=!1,q;for(q in b)if(b.hasOwnProperty(q)){var de=b[q];if(de!=null)switch(q){case"src":C=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(A,p,q,de,b,null)}}U&&ba(A,p,"srcSet",b.srcSet,b,null),C&&ba(A,p,"src",b.src,b,null);return;case"input":_n("invalid",A);var ye=q=de=U=null,Pe=null,lt=null;for(C in b)if(b.hasOwnProperty(C)){var St=b[C];if(St!=null)switch(C){case"name":U=St;break;case"type":de=St;break;case"checked":Pe=St;break;case"defaultChecked":lt=St;break;case"value":q=St;break;case"defaultValue":ye=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,p));break;default:ba(A,p,C,St,b,null)}}tu(A,q,ye,Pe,lt,de,U,!1),eu(A);return;case"select":_n("invalid",A),C=de=q=null;for(U in b)if(b.hasOwnProperty(U)&&(ye=b[U],ye!=null))switch(U){case"value":q=ye;break;case"defaultValue":de=ye;break;case"multiple":C=ye;default:ba(A,p,U,ye,b,null)}p=q,b=de,A.multiple=!!C,p!=null?Bl(A,!!C,p,!1):b!=null&&Bl(A,!!C,b,!0);return;case"textarea":_n("invalid",A),q=U=C=null;for(de in b)if(b.hasOwnProperty(de)&&(ye=b[de],ye!=null))switch(de){case"value":C=ye;break;case"defaultValue":U=ye;break;case"children":q=ye;break;case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(91));break;default:ba(A,p,de,ye,b,null)}nu(A,C,U,q),eu(A);return;case"option":for(Pe in b)if(b.hasOwnProperty(Pe)&&(C=b[Pe],C!=null))switch(Pe){case"selected":A.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ba(A,p,Pe,C,b,null)}return;case"dialog":_n("beforetoggle",A),_n("toggle",A),_n("cancel",A),_n("close",A);break;case"iframe":case"object":_n("load",A);break;case"video":case"audio":for(C=0;C<Vb.length;C++)_n(Vb[C],A);break;case"image":_n("error",A),_n("load",A);break;case"details":_n("toggle",A);break;case"embed":case"source":case"link":_n("error",A),_n("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in b)if(b.hasOwnProperty(lt)&&(C=b[lt],C!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:ba(A,p,lt,C,b,null)}return;default:if(pf(p)){for(St in b)b.hasOwnProperty(St)&&(C=b[St],C!==void 0&&c3(A,p,St,C,b,void 0));return}}for(ye in b)b.hasOwnProperty(ye)&&(C=b[ye],C!=null&&ba(A,p,ye,C,b,null))}function Nfe(A,p,b,C){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,q=null,de=null,ye=null,Pe=null,lt=null,St=null;for(ht in b){var Ot=b[ht];if(b.hasOwnProperty(ht)&&Ot!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":Pe=Ot;default:C.hasOwnProperty(ht)||ba(A,p,ht,null,C,Ot)}}for(var At in C){var ht=C[At];if(Ot=b[At],C.hasOwnProperty(At)&&(ht!=null||Ot!=null))switch(At){case"type":q=ht;break;case"name":U=ht;break;case"checked":lt=ht;break;case"defaultChecked":St=ht;break;case"value":de=ht;break;case"defaultValue":ye=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,p));break;default:ht!==Ot&&ba(A,p,At,ht,C,Ot)}}Ei(A,de,ye,Pe,lt,St,q,U);return;case"select":ht=de=ye=At=null;for(q in b)if(Pe=b[q],b.hasOwnProperty(q)&&Pe!=null)switch(q){case"value":break;case"multiple":ht=Pe;default:C.hasOwnProperty(q)||ba(A,p,q,null,C,Pe)}for(U in C)if(q=C[U],Pe=b[U],C.hasOwnProperty(U)&&(q!=null||Pe!=null))switch(U){case"value":At=q;break;case"defaultValue":ye=q;break;case"multiple":de=q;default:q!==Pe&&ba(A,p,U,q,C,Pe)}p=ye,b=de,C=ht,At!=null?Bl(A,!!b,At,!1):!!C!=!!b&&(p!=null?Bl(A,!!b,p,!0):Bl(A,!!b,b?[]:"",!1));return;case"textarea":ht=At=null;for(ye in b)if(U=b[ye],b.hasOwnProperty(ye)&&U!=null&&!C.hasOwnProperty(ye))switch(ye){case"value":break;case"children":break;default:ba(A,p,ye,null,C,U)}for(de in C)if(U=C[de],q=b[de],C.hasOwnProperty(de)&&(U!=null||q!=null))switch(de){case"value":At=U;break;case"defaultValue":ht=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==q&&ba(A,p,de,U,C,q)}Vn(A,At,ht);return;case"option":for(var Gr in b)if(At=b[Gr],b.hasOwnProperty(Gr)&&At!=null&&!C.hasOwnProperty(Gr))switch(Gr){case"selected":A.selected=!1;break;default:ba(A,p,Gr,null,C,At)}for(Pe in C)if(At=C[Pe],ht=b[Pe],C.hasOwnProperty(Pe)&&At!==ht&&(At!=null||ht!=null))switch(Pe){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(A,p,Pe,At,C,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dr in b)At=b[Dr],b.hasOwnProperty(Dr)&&At!=null&&!C.hasOwnProperty(Dr)&&ba(A,p,Dr,null,C,At);for(lt in C)if(At=C[lt],ht=b[lt],C.hasOwnProperty(lt)&&At!==ht&&(At!=null||ht!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,p));break;default:ba(A,p,lt,At,C,ht)}return;default:if(pf(p)){for(var ya in b)At=b[ya],b.hasOwnProperty(ya)&&At!==void 0&&!C.hasOwnProperty(ya)&&c3(A,p,ya,void 0,C,At);for(St in C)At=C[St],ht=b[St],!C.hasOwnProperty(St)||At===ht||At===void 0&&ht===void 0||c3(A,p,St,At,C,ht);return}}for(var Xe in b)At=b[Xe],b.hasOwnProperty(Xe)&&At!=null&&!C.hasOwnProperty(Xe)&&ba(A,p,Xe,null,C,At);for(Ot in C)At=C[Ot],ht=b[Ot],!C.hasOwnProperty(Ot)||At===ht||At==null&&ht==null||ba(A,p,Ot,At,C,ht)}var u3=null,d3=null;function AC(A){return A.nodeType===9?A:A.ownerDocument}function C7(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N7(A,p){if(A===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&p==="foreignObject"?0:A}function A3(A,p){return A==="textarea"||A==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var f3=null;function _fe(){var A=window.event;return A&&A.type==="popstate"?A===f3?!1:(f3=A,!0):(f3=null,!1)}var _7=typeof setTimeout=="function"?setTimeout:void 0,Sfe=typeof clearTimeout=="function"?clearTimeout:void 0,S7=typeof Promise=="function"?Promise:void 0,kfe=typeof queueMicrotask=="function"?queueMicrotask:typeof S7<"u"?function(A){return S7.resolve(null).then(A).catch(jfe)}:_7;function jfe(A){setTimeout(function(){throw A})}function v0(A){return A==="head"}function k7(A,p){var b=p,C=0,U=0;do{var q=b.nextSibling;if(A.removeChild(b),q&&q.nodeType===8)if(b=q.data,b==="/$"){if(0<C&&8>C){b=C;var de=A.ownerDocument;if(b&1&&$b(de.documentElement),b&2&&$b(de.body),b&4)for(b=de.head,$b(b),de=b.firstChild;de;){var ye=de.nextSibling,Pe=de.nodeName;de[Ce]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&de.rel.toLowerCase()==="stylesheet"||b.removeChild(de),de=ye}}if(U===0){A.removeChild(q),Zb(p);return}U--}else b==="$"||b==="$?"||b==="$!"?U++:C=b.charCodeAt(0)-48;else C=0;b=q}while(b);Zb(p)}function h3(A){var p=A.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":h3(b),we(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function Bfe(A,p,b,C){for(;A.nodeType===1;){var U=b;if(A.nodeName.toLowerCase()!==p.toLowerCase()){if(!C&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(C){if(!A[Ce])switch(p){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(q=A.getAttribute("rel"),q==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(q!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(q=A.getAttribute("src"),(q!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&q&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(p==="input"&&A.type==="hidden"){var q=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===q)return A}else return A;if(A=yd(A.nextSibling),A===null)break}return null}function Tfe(A,p,b){if(p==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=yd(A.nextSibling),A===null))return null;return A}function m3(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Ife(A,p){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")p();else{var C=function(){p(),b.removeEventListener("DOMContentLoaded",C)};b.addEventListener("DOMContentLoaded",C),A._reactRetry=C}}function yd(A){for(;A!=null;A=A.nextSibling){var p=A.nodeType;if(p===1||p===3)break;if(p===8){if(p=A.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return A}var p3=null;function j7(A){A=A.previousSibling;for(var p=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return A;p--}else b==="/$"&&p++}A=A.previousSibling}return null}function B7(A,p,b){switch(p=AC(b),A){case"html":if(A=p.documentElement,!A)throw Error(n(452));return A;case"head":if(A=p.head,!A)throw Error(n(453));return A;case"body":if(A=p.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function $b(A){for(var p=A.attributes;p.length;)A.removeAttributeNode(p[0]);we(A)}var wu=new Map,T7=new Set;function fC(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Hf=W.d;W.d={f:Ffe,r:Ofe,D:Dfe,C:Pfe,L:Rfe,m:Lfe,X:Ufe,S:Mfe,M:Qfe};function Ffe(){var A=Hf.f(),p=aC();return A||p}function Ofe(A){var p=Fe(A);p!==null&&p.tag===5&&p.type==="form"?hp(p):Hf.r(A)}var Nx=typeof document>"u"?null:document;function I7(A,p,b){var C=Nx;if(C&&typeof p=="string"&&p){var U=On(p);U='link[rel="'+A+'"][href="'+U+'"]',typeof b=="string"&&(U+='[crossorigin="'+b+'"]'),T7.has(U)||(T7.add(U),A={rel:A,crossOrigin:b,href:p},C.querySelector(U)===null&&(p=C.createElement("link"),fo(p,"link",A),Ge(p),C.head.appendChild(p)))}}function Dfe(A){Hf.D(A),I7("dns-prefetch",A,null)}function Pfe(A,p){Hf.C(A,p),I7("preconnect",A,p)}function Rfe(A,p,b){Hf.L(A,p,b);var C=Nx;if(C&&A&&p){var U='link[rel="preload"][as="'+On(p)+'"]';p==="image"&&b&&b.imageSrcSet?(U+='[imagesrcset="'+On(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(U+='[imagesizes="'+On(b.imageSizes)+'"]')):U+='[href="'+On(A)+'"]';var q=U;switch(p){case"style":q=_x(A);break;case"script":q=Sx(A)}wu.has(q)||(A=d({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:A,as:p},b),wu.set(q,A),C.querySelector(U)!==null||p==="style"&&C.querySelector(Gb(q))||p==="script"&&C.querySelector(Kb(q))||(p=C.createElement("link"),fo(p,"link",A),Ge(p),C.head.appendChild(p)))}}function Lfe(A,p){Hf.m(A,p);var b=Nx;if(b&&A){var C=p&&typeof p.as=="string"?p.as:"script",U='link[rel="modulepreload"][as="'+On(C)+'"][href="'+On(A)+'"]',q=U;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=Sx(A)}if(!wu.has(q)&&(A=d({rel:"modulepreload",href:A},p),wu.set(q,A),b.querySelector(U)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Kb(q)))return}C=b.createElement("link"),fo(C,"link",A),Ge(C),b.head.appendChild(C)}}}function Mfe(A,p,b){Hf.S(A,p,b);var C=Nx;if(C&&A){var U=dt(C).hoistableStyles,q=_x(A);p=p||"default";var de=U.get(q);if(!de){var ye={loading:0,preload:null};if(de=C.querySelector(Gb(q)))ye.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":p},b),(b=wu.get(q))&&g3(A,b);var Pe=de=C.createElement("link");Ge(Pe),fo(Pe,"link",A),Pe._p=new Promise(function(lt,St){Pe.onload=lt,Pe.onerror=St}),Pe.addEventListener("load",function(){ye.loading|=1}),Pe.addEventListener("error",function(){ye.loading|=2}),ye.loading|=4,hC(de,p,C)}de={type:"stylesheet",instance:de,count:1,state:ye},U.set(q,de)}}}function Ufe(A,p){Hf.X(A,p);var b=Nx;if(b&&A){var C=dt(b).hoistableScripts,U=Sx(A),q=C.get(U);q||(q=b.querySelector(Kb(U)),q||(A=d({src:A,async:!0},p),(p=wu.get(U))&&x3(A,p),q=b.createElement("script"),Ge(q),fo(q,"link",A),b.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function Qfe(A,p){Hf.M(A,p);var b=Nx;if(b&&A){var C=dt(b).hoistableScripts,U=Sx(A),q=C.get(U);q||(q=b.querySelector(Kb(U)),q||(A=d({src:A,async:!0,type:"module"},p),(p=wu.get(U))&&x3(A,p),q=b.createElement("script"),Ge(q),fo(q,"link",A),b.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function F7(A,p,b,C){var U=(U=te.current)?fC(U):null;if(!U)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=_x(b.href),b=dt(U).hoistableStyles,C=b.get(p),C||(C={type:"style",instance:null,count:0,state:null},b.set(p,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=_x(b.href);var q=dt(U).hoistableStyles,de=q.get(A);if(de||(U=U.ownerDocument||U,de={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(A,de),(q=U.querySelector(Gb(A)))&&!q._p&&(de.instance=q,de.state.loading=5),wu.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},wu.set(A,b),q||Hfe(U,A,b,de.state))),p&&C===null)throw Error(n(528,""));return de}if(p&&C!==null)throw Error(n(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Sx(b),b=dt(U).hoistableScripts,C=b.get(p),C||(C={type:"script",instance:null,count:0,state:null},b.set(p,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function _x(A){return'href="'+On(A)+'"'}function Gb(A){return'link[rel="stylesheet"]['+A+"]"}function O7(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function Hfe(A,p,b,C){A.querySelector('link[rel="preload"][as="style"]['+p+"]")?C.loading=1:(p=A.createElement("link"),C.preload=p,p.addEventListener("load",function(){return C.loading|=1}),p.addEventListener("error",function(){return C.loading|=2}),fo(p,"link",b),Ge(p),A.head.appendChild(p))}function Sx(A){return'[src="'+On(A)+'"]'}function Kb(A){return"script[async]"+A}function D7(A,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var C=A.querySelector('style[data-href~="'+On(b.href)+'"]');if(C)return p.instance=C,Ge(C),C;var U=d({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return C=(A.ownerDocument||A).createElement("style"),Ge(C),fo(C,"style",U),hC(C,b.precedence,A),p.instance=C;case"stylesheet":U=_x(b.href);var q=A.querySelector(Gb(U));if(q)return p.state.loading|=4,p.instance=q,Ge(q),q;C=O7(b),(U=wu.get(U))&&g3(C,U),q=(A.ownerDocument||A).createElement("link"),Ge(q);var de=q;return de._p=new Promise(function(ye,Pe){de.onload=ye,de.onerror=Pe}),fo(q,"link",C),p.state.loading|=4,hC(q,b.precedence,A),p.instance=q;case"script":return q=Sx(b.src),(U=A.querySelector(Kb(q)))?(p.instance=U,Ge(U),U):(C=b,(U=wu.get(q))&&(C=d({},b),x3(C,U)),A=A.ownerDocument||A,U=A.createElement("script"),Ge(U),fo(U,"link",C),A.head.appendChild(U),p.instance=U);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(C=p.instance,p.state.loading|=4,hC(C,b.precedence,A));return p.instance}function hC(A,p,b){for(var C=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=C.length?C[C.length-1]:null,q=U,de=0;de<C.length;de++){var ye=C[de];if(ye.dataset.precedence===p)q=ye;else if(q!==U)break}q?q.parentNode.insertBefore(A,q.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(A,p.firstChild))}function g3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.title==null&&(A.title=p.title)}function x3(A,p){A.crossOrigin==null&&(A.crossOrigin=p.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=p.referrerPolicy),A.integrity==null&&(A.integrity=p.integrity)}var mC=null;function P7(A,p,b){if(mC===null){var C=new Map,U=mC=new Map;U.set(b,C)}else U=mC,C=U.get(b),C||(C=new Map,U.set(b,C));if(C.has(A))return C;for(C.set(A,null),b=b.getElementsByTagName(A),U=0;U<b.length;U++){var q=b[U];if(!(q[Ce]||q[nr]||A==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var de=q.getAttribute(p)||"";de=A+de;var ye=C.get(de);ye?ye.push(q):C.set(de,[q])}}return C}function R7(A,p,b){A=A.ownerDocument||A,A.head.insertBefore(b,p==="title"?A.querySelector("head > title"):null)}function Vfe(A,p,b){if(b===1||p.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return A=p.disabled,typeof p.precedence=="string"&&A==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function L7(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var qb=null;function zfe(){}function $fe(A,p,b){if(qb===null)throw Error(n(475));var C=qb;if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var U=_x(b.href),q=A.querySelector(Gb(U));if(q){A=q._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(C.count++,C=pC.bind(C),A.then(C,C)),p.state.loading|=4,p.instance=q,Ge(q);return}q=A.ownerDocument||A,b=O7(b),(U=wu.get(U))&&g3(b,U),q=q.createElement("link"),Ge(q);var de=q;de._p=new Promise(function(ye,Pe){de.onload=ye,de.onerror=Pe}),fo(q,"link",b),p.instance=q}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(p,A),(A=p.state.preload)&&(p.state.loading&3)===0&&(C.count++,p=pC.bind(C),A.addEventListener("load",p),A.addEventListener("error",p))}}function Gfe(){if(qb===null)throw Error(n(475));var A=qb;return A.stylesheets&&A.count===0&&v3(A,A.stylesheets),0<A.count?function(p){var b=setTimeout(function(){if(A.stylesheets&&v3(A,A.stylesheets),A.unsuspend){var C=A.unsuspend;A.unsuspend=null,C()}},6e4);return A.unsuspend=p,function(){A.unsuspend=null,clearTimeout(b)}}:null}function pC(){if(this.count--,this.count===0){if(this.stylesheets)v3(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var gC=null;function v3(A,p){A.stylesheets=null,A.unsuspend!==null&&(A.count++,gC=new Map,p.forEach(Kfe,A),gC=null,pC.call(A))}function Kfe(A,p){if(!(p.state.loading&4)){var b=gC.get(A);if(b)var C=b.get(null);else{b=new Map,gC.set(A,b);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<U.length;q++){var de=U[q];(de.nodeName==="LINK"||de.getAttribute("media")!=="not all")&&(b.set(de.dataset.precedence,de),C=de)}C&&b.set(null,C)}U=p.instance,de=U.getAttribute("data-precedence"),q=b.get(de)||C,q===C&&b.set(null,U),b.set(de,U),this.count++,C=pC.bind(this),U.addEventListener("load",C),U.addEventListener("error",C),q?q.parentNode.insertBefore(U,q.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),p.state.loading|=4}}var Wb={$$typeof:N,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function qfe(A,p,b,C,U,q,de,ye){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=C,this.onUncaughtError=U,this.onCaughtError=q,this.onRecoverableError=de,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function M7(A,p,b,C,U,q,de,ye,Pe,lt,St,Ot){return A=new qfe(A,p,b,de,ye,Pe,lt,Ot),p=1,q===!0&&(p|=24),q=Hi(3,null,null,p),A.current=q,q.stateNode=A,p=xb(),p.refCount++,A.pooledCache=p,p.refCount++,q.memoizedState={element:C,isDehydrated:b,cache:p},Qe(q),A}function U7(A){return A?(A=si,A):si}function Q7(A,p,b,C,U,q){U=U7(U),C.context===null?C.context=U:C.pendingContext=U,C=_t(p),C.payload={element:b},q=q===void 0?null:q,q!==null&&(C.callback=q),b=Tt(A,C,p),b!==null&&(kc(b,A,p),kt(b,A,p))}function H7(A,p){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<p?b:p}}function b3(A,p){H7(A,p),(A=A.alternate)&&H7(A,p)}function V7(A){if(A.tag===13){var p=ld(A,67108864);p!==null&&kc(p,A,67108864),b3(A,67108864)}}var xC=!0;function Wfe(A,p,b,C){var U=V.T;V.T=null;var q=W.p;try{W.p=2,y3(A,p,b,C)}finally{W.p=q,V.T=U}}function Xfe(A,p,b,C){var U=V.T;V.T=null;var q=W.p;try{W.p=8,y3(A,p,b,C)}finally{W.p=q,V.T=U}}function y3(A,p,b,C){if(xC){var U=w3(C);if(U===null)l3(A,p,C,vC,b),$7(A,C);else if(Jfe(U,A,p,b,C))C.stopPropagation();else if($7(A,C),p&4&&-1<Yfe.indexOf(A)){for(;U!==null;){var q=Fe(U);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var de=Sr(q.pendingLanes);if(de!==0){var ye=q;for(ye.pendingLanes|=2,ye.entangledLanes|=2;de;){var Pe=1<<31-Pt(de);ye.entanglements[1]|=Pe,de&=~Pe}kA(q),(da&6)===0&&(rC=Be()+500,Hb(0))}}break;case 13:ye=ld(q,2),ye!==null&&kc(ye,q,2),aC(),b3(q,2)}if(q=w3(C),q===null&&l3(A,p,C,vC,b),q===U)break;U=q}U!==null&&C.stopPropagation()}else l3(A,p,C,null,b)}}function w3(A){return A=ca(A),E3(A)}var vC=null;function E3(A){if(vC=null,A=Se(A),A!==null){var p=s(A);if(p===null)A=null;else{var b=p.tag;if(b===13){if(A=i(p),A!==null)return A;A=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;A=null}else p!==A&&(A=null)}}return vC=A,null}function z7(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case We:return 2;case xe:return 8;case Oe:case Re:return 32;case $e:return 268435456;default:return 32}default:return 32}}var C3=!1,b0=null,y0=null,w0=null,Xb=new Map,Yb=new Map,E0=[],Yfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $7(A,p){switch(A){case"focusin":case"focusout":b0=null;break;case"dragenter":case"dragleave":y0=null;break;case"mouseover":case"mouseout":w0=null;break;case"pointerover":case"pointerout":Xb.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yb.delete(p.pointerId)}}function Jb(A,p,b,C,U,q){return A===null||A.nativeEvent!==q?(A={blockedOn:p,domEventName:b,eventSystemFlags:C,nativeEvent:q,targetContainers:[U]},p!==null&&(p=Fe(p),p!==null&&V7(p)),A):(A.eventSystemFlags|=C,p=A.targetContainers,U!==null&&p.indexOf(U)===-1&&p.push(U),A)}function Jfe(A,p,b,C,U){switch(p){case"focusin":return b0=Jb(b0,A,p,b,C,U),!0;case"dragenter":return y0=Jb(y0,A,p,b,C,U),!0;case"mouseover":return w0=Jb(w0,A,p,b,C,U),!0;case"pointerover":var q=U.pointerId;return Xb.set(q,Jb(Xb.get(q)||null,A,p,b,C,U)),!0;case"gotpointercapture":return q=U.pointerId,Yb.set(q,Jb(Yb.get(q)||null,A,p,b,C,U)),!0}return!1}function G7(A){var p=Se(A.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=i(b),p!==null){A.blockedOn=p,Et(A.priority,function(){if(b.tag===13){var C=Sc();C=mt(C);var U=ld(b,C);U!==null&&kc(U,b,C),b3(b,C)}});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function bC(A){if(A.blockedOn!==null)return!1;for(var p=A.targetContainers;0<p.length;){var b=w3(A.nativeEvent);if(b===null){b=A.nativeEvent;var C=new b.constructor(b.type,b);Tl=C,b.target.dispatchEvent(C),Tl=null}else return p=Fe(b),p!==null&&V7(p),A.blockedOn=b,!1;p.shift()}return!0}function K7(A,p,b){bC(A)&&b.delete(p)}function Zfe(){C3=!1,b0!==null&&bC(b0)&&(b0=null),y0!==null&&bC(y0)&&(y0=null),w0!==null&&bC(w0)&&(w0=null),Xb.forEach(K7),Yb.forEach(K7)}function yC(A,p){A.blockedOn===p&&(A.blockedOn=null,C3||(C3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zfe)))}var wC=null;function q7(A){wC!==A&&(wC=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wC===A&&(wC=null);for(var p=0;p<A.length;p+=3){var b=A[p],C=A[p+1],U=A[p+2];if(typeof C!="function"){if(E3(C||b)===null)continue;break}var q=Fe(b);q!==null&&(A.splice(p,3),p-=3,vu(q,{pending:!0,data:U,method:b.method,action:C},C,U))}}))}function Zb(A){function p(Pe){return yC(Pe,A)}b0!==null&&yC(b0,A),y0!==null&&yC(y0,A),w0!==null&&yC(w0,A),Xb.forEach(p),Yb.forEach(p);for(var b=0;b<E0.length;b++){var C=E0[b];C.blockedOn===A&&(C.blockedOn=null)}for(;0<E0.length&&(b=E0[0],b.blockedOn===null);)G7(b),b.blockedOn===null&&E0.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(C=0;C<b.length;C+=3){var U=b[C],q=b[C+1],de=U[xr]||null;if(typeof q=="function")de||q7(b);else if(de){var ye=null;if(q&&q.hasAttribute("formAction")){if(U=q,de=q[xr]||null)ye=de.formAction;else if(E3(U)!==null)continue}else ye=de.action;typeof ye=="function"?b[C+1]=ye:(b.splice(C,3),C-=3),q7(b)}}}function N3(A){this._internalRoot=A}EC.prototype.render=N3.prototype.render=function(A){var p=this._internalRoot;if(p===null)throw Error(n(409));var b=p.current,C=Sc();Q7(b,C,A,p,null,null)},EC.prototype.unmount=N3.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var p=A.containerInfo;Q7(A.current,2,null,A,null,null),aC(),p[Wr]=null}};function EC(A){this._internalRoot=A}EC.prototype.unstable_scheduleHydration=function(A){if(A){var p=xt();A={blockedOn:null,target:A,priority:p};for(var b=0;b<E0.length&&p!==0&&p<E0[b].priority;b++);E0.splice(b,0,A),b===0&&G7(A)}};var W7=t.version;if(W7!=="19.1.1")throw Error(n(527,W7,"19.1.1"));W.findDOMNode=function(A){var p=A._reactInternals;if(p===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(p),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var ehe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CC.isDisabled&&CC.supportsFiber)try{gt=CC.inject(ehe),It=CC}catch{}}return ty.createRoot=function(A,p){if(!a(A))throw Error(n(299));var b=!1,C="",U=dU,q=AU,de=fU,ye=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(U=p.onUncaughtError),p.onCaughtError!==void 0&&(q=p.onCaughtError),p.onRecoverableError!==void 0&&(de=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ye=p.unstable_transitionCallbacks)),p=M7(A,1,!1,null,null,b,C,U,q,de,ye,null),A[Wr]=p.current,o3(A),new N3(p)},ty.hydrateRoot=function(A,p,b){if(!a(A))throw Error(n(299));var C=!1,U="",q=dU,de=AU,ye=fU,Pe=null,lt=null;return b!=null&&(b.unstable_strictMode===!0&&(C=!0),b.identifierPrefix!==void 0&&(U=b.identifierPrefix),b.onUncaughtError!==void 0&&(q=b.onUncaughtError),b.onCaughtError!==void 0&&(de=b.onCaughtError),b.onRecoverableError!==void 0&&(ye=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(Pe=b.unstable_transitionCallbacks),b.formState!==void 0&&(lt=b.formState)),p=M7(A,1,!0,p,b??null,C,U,q,de,ye,Pe,lt),p.context=U7(null),b=p.current,C=Sc(),C=mt(C),U=_t(C),U.callback=null,Tt(b,U,C),b=C,p.current.lanes=b,ja(p,b),kA(p),A[Wr]=p.current,o3(A),new EC(p)},ty.version="19.1.1",ty}var s9;function hhe(){if(s9)return j3.exports;s9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),j3.exports=fhe(),j3.exports}var mhe=hhe();const phe=kl(mhe),ghe=()=>{};var i9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Y=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},xhe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},GY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,l=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,i||(h=64)),n.push(r[d],r[f],r[h],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($Y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xhe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new vhe;const h=s<<2|l>>4;if(n.push(h),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class vhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bhe=function(e){const t=$Y(e);return GY.encodeByteArray(t,!0)},G5=function(e){return bhe(e).replace(/\./g,"")},KY=function(e){try{return GY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yhe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const whe=()=>yhe().__FIREBASE_DEFAULTS__,Ehe=()=>{if(typeof process>"u"||typeof i9>"u")return;const e=i9.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Che=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&KY(e[1]);return t&&JSON.parse(t)},r4=()=>{try{return ghe()||whe()||Ehe()||Che()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},qY=e=>{var t,r;return(r=(t=r4())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},LD=e=>{const t=qY(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},WY=()=>{var e;return(e=r4())==null?void 0:e.config},XY=e=>{var t;return(t=r4())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function n4(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[G5(JSON.stringify(r)),G5(JSON.stringify(i)),""].join(".")}const tw={};function _he(){const e={prod:[],emulator:[]};for(const t of Object.keys(tw))tw[t]?e.emulator.push(t):e.prod.push(t);return e}function She(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let o9=!1;function a4(e,t){if(typeof window>"u"||typeof document>"u"||!Dh(window.location.host)||tw[e]===t||tw[e]||o9)return;tw[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=_he().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{o9=!0,i()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=She(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),v=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const N=h.element;l(N),d(v,x);const B=u();c(w,y),N.append(w,g,v,B),document.body.appendChild(N)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function khe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(al())}function jhe(){var t;const e=(t=r4())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bhe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function The(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ihe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fhe(){const e=al();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ohe(){return!jhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dhe(){try{return typeof indexedDB=="object"}catch{return!1}}function Phe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe="FirebaseError";class Gd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Rhe,Object.setPrototypeOf(this,Gd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T2.prototype.create)}}class T2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?Lhe(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new Gd(a,l,n)}}function Lhe(e,t){return e.replace(Mhe,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const Mhe=/\{\$([^}]+)}/g;function Uhe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pm(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(l9(s)&&l9(i)){if(!pm(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function l9(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Iy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function Fy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function Qhe(e,t){const r=new Hhe(e,t);return r.subscribe.bind(r)}class Hhe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Vhe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=F3),a.error===void 0&&(a.error=F3),a.complete===void 0&&(a.complete=F3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vhe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function F3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e){return e&&e._delegate?e._delegate:e}class xh{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zhe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Nhe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ghe(t))try{this.getOrInitializeService({instanceIdentifier:Np})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Np){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Np){return this.instances.has(t)}getOptions(t=Np){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:$he(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Np){return this.component?this.component.multipleInstances?t:Np:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function $he(e){return e===Np?void 0:e}function Ghe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Khe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new zhe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kn||(kn={}));const qhe={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},Whe=kn.INFO,Xhe={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},Yhe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Xhe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let MD=class{constructor(t){this.name=t,this._logLevel=Whe,this._logHandler=Yhe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qhe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...t),this._logHandler(this,kn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...t),this._logHandler(this,kn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kn.INFO,...t),this._logHandler(this,kn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kn.WARN,...t),this._logHandler(this,kn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...t),this._logHandler(this,kn.ERROR,...t)}};const Jhe=(e,t)=>t.some(r=>e instanceof r);let c9,u9;function Zhe(){return c9||(c9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e0e(){return u9||(u9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JY=new WeakMap,k6=new WeakMap,ZY=new WeakMap,O3=new WeakMap,UD=new WeakMap;function t0e(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(rm(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&JY.set(r,e)}).catch(()=>{}),UD.set(t,e),t}function r0e(e){if(k6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});k6.set(e,t)}let j6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return k6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ZY.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return rm(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function n0e(e){j6=e(j6)}function a0e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(D3(this),t,...r);return ZY.set(n,t.sort?t.sort():[t]),rm(n)}:e0e().includes(e)?function(...t){return e.apply(D3(this),t),rm(JY.get(this))}:function(...t){return rm(e.apply(D3(this),t))}}function s0e(e){return typeof e=="function"?a0e(e):(e instanceof IDBTransaction&&r0e(e),Jhe(e,Zhe())?new Proxy(e,j6):e)}function rm(e){if(e instanceof IDBRequest)return t0e(e);if(O3.has(e))return O3.get(e);const t=s0e(e);return t!==e&&(O3.set(e,t),UD.set(t,e)),t}const D3=e=>UD.get(e);function i0e(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),l=rm(i);return n&&i.addEventListener("upgradeneeded",c=>{n(rm(i.result),c.oldVersion,c.newVersion,rm(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const o0e=["get","getKey","getAll","getAllKeys","count"],l0e=["put","add","delete","clear"],P3=new Map;function d9(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(P3.get(t))return P3.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=l0e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||o0e.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return P3.set(t,s),s}n0e(e=>({...e,get:(t,r,n)=>d9(t,r)||e.get(t,r,n),has:(t,r)=>!!d9(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(u0e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function u0e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const B6="@firebase/app",A9="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new MD("@firebase/app"),d0e="@firebase/app-compat",A0e="@firebase/analytics-compat",f0e="@firebase/analytics",h0e="@firebase/app-check-compat",m0e="@firebase/app-check",p0e="@firebase/auth",g0e="@firebase/auth-compat",x0e="@firebase/database",v0e="@firebase/data-connect",b0e="@firebase/database-compat",y0e="@firebase/functions",w0e="@firebase/functions-compat",E0e="@firebase/installations",C0e="@firebase/installations-compat",N0e="@firebase/messaging",_0e="@firebase/messaging-compat",S0e="@firebase/performance",k0e="@firebase/performance-compat",j0e="@firebase/remote-config",B0e="@firebase/remote-config-compat",T0e="@firebase/storage",I0e="@firebase/storage-compat",F0e="@firebase/firestore",O0e="@firebase/ai",D0e="@firebase/firestore-compat",P0e="firebase",R0e="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6="[DEFAULT]",L0e={[B6]:"fire-core",[d0e]:"fire-core-compat",[f0e]:"fire-analytics",[A0e]:"fire-analytics-compat",[m0e]:"fire-app-check",[h0e]:"fire-app-check-compat",[p0e]:"fire-auth",[g0e]:"fire-auth-compat",[x0e]:"fire-rtdb",[v0e]:"fire-data-connect",[b0e]:"fire-rtdb-compat",[y0e]:"fire-fn",[w0e]:"fire-fn-compat",[E0e]:"fire-iid",[C0e]:"fire-iid-compat",[N0e]:"fire-fcm",[_0e]:"fire-fcm-compat",[S0e]:"fire-perf",[k0e]:"fire-perf-compat",[j0e]:"fire-rc",[B0e]:"fire-rc-compat",[T0e]:"fire-gcs",[I0e]:"fire-gcs-compat",[F0e]:"fire-fst",[D0e]:"fire-fst-compat",[O0e]:"fire-vertex","fire-js":"fire-js",[P0e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map,M0e=new Map,I6=new Map;function f9(e,t){try{e.container.addComponent(t)}catch(r){vh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function gm(e){const t=e.name;if(I6.has(t))return vh.debug(`There were multiple attempts to register component ${t}.`),!1;I6.set(t,e);for(const r of Iw.values())f9(r,e);for(const r of M0e.values())f9(r,e);return!0}function F2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Rc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nm=new T2("app","Firebase",U0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0e{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw nm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=R0e;function QD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:T6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw nm.create("bad-app-name",{appName:String(a)});if(r||(r=WY()),!r)throw nm.create("no-options");const s=Iw.get(a);if(s){if(pm(r,s.options)&&pm(n,s.config))return s;throw nm.create("duplicate-app",{appName:a})}const i=new Khe(a);for(const c of I6.values())i.addComponent(c);const l=new Q0e(r,n,i);return Iw.set(a,l),l}function s4(e=T6){const t=Iw.get(e);if(!t&&e===T6&&WY())return QD();if(!t)throw nm.create("no-app",{appName:e});return t}function h9(){return Array.from(Iw.values())}function zu(e,t,r){let n=L0e[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vh.warn(i.join(" "));return}gm(new xh(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0e="firebase-heartbeat-database",V0e=1,Fw="firebase-heartbeat-store";let R3=null;function eJ(){return R3||(R3=i0e(H0e,V0e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Fw)}catch(r){console.warn(r)}}}}).catch(e=>{throw nm.create("idb-open",{originalErrorMessage:e.message})})),R3}async function z0e(e){try{const r=(await eJ()).transaction(Fw),n=await r.objectStore(Fw).get(tJ(e));return await r.done,n}catch(t){if(t instanceof Gd)vh.warn(t.message);else{const r=nm.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vh.warn(r.message)}}}async function m9(e,t){try{const n=(await eJ()).transaction(Fw,"readwrite");await n.objectStore(Fw).put(t,tJ(e)),await n.done}catch(r){if(r instanceof Gd)vh.warn(r.message);else{const n=nm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});vh.warn(n.message)}}}function tJ(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0e=1024,G0e=30;class K0e{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new W0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p9();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>G0e){const i=X0e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){vh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=p9(),{heartbeatsToSend:n,unsentEntries:a}=q0e(this._heartbeatsCache.heartbeats),s=G5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return vh.warn(r),""}}}function p9(){return new Date().toISOString().substring(0,10)}function q0e(e,t=$0e){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),g9(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),g9(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class W0e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dhe()?Phe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await z0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return m9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return m9(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function g9(e){return G5(JSON.stringify({version:2,heartbeats:e})).length}function X0e(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0e(e){gm(new xh("platform-logger",t=>new c0e(t),"PRIVATE")),gm(new xh("heartbeat",t=>new K0e(t),"PRIVATE")),zu(B6,A9,e),zu(B6,A9,"esm2020"),zu("fire-js","")}Y0e("");function rJ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J0e=rJ,nJ=new T2("auth","Firebase",rJ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=new MD("@firebase/auth");function Z0e(e,...t){K5.logLevel<=kn.WARN&&K5.warn(`Auth (${Ig}): ${e}`,...t)}function n5(e,...t){K5.logLevel<=kn.ERROR&&K5.error(`Auth (${Ig}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(e,...t){throw HD(e,...t)}function XA(e,...t){return HD(e,...t)}function aJ(e,t,r){const n={...J0e(),[t]:r};return new T2("auth","Firebase",n).create(t,{appName:e.name})}function am(e){return aJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HD(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return nJ.create(e,...t)}function Vr(e,t,...r){if(!e)throw HD(t,...r)}function Zf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw n5(t),new Error(t)}function bh(e,t){e||Zf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function eme(){return x9()==="http:"||x9()==="https:"}function x9(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eme()||The()||"connection"in navigator)?navigator.onLine:!0}function rme(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t,r){this.shortDelay=t,this.longDelay=r,bh(r>t,"Short delay should be less than long delay!"),this.isMobile=khe()||Ihe()}get(){return tme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(e,t){bh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ame=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sme=new O2(3e4,6e4);function Lm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Ph(e,t,r,n,a={}){return iJ(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const l=I2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Bhe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Dh(e.emulatorConfig.host)&&(u.credentials="include"),sJ.fetch()(await oJ(e,e.config.apiHost,r,l),u)})}async function iJ(e,t,r){e._canInitEmulator=!1;const n={...nme,...t};try{const a=new ome(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw NC(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw NC(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw NC(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw NC(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw aJ(e,d,u);Hd(e,d)}}catch(a){if(a instanceof Gd)throw a;Hd(e,"network-request-failed",{message:String(a)})}}async function i4(e,t,r,n,a={}){const s=await Ph(e,t,r,n,a);return"mfaPendingCredential"in s&&Hd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function oJ(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?VD(e.config,a):`${e.config.apiScheme}://${a}`;return ame.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function ime(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ome{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(XA(this.auth,"network-request-failed")),sme.get())})}}function NC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=XA(e,t,n);return a.customData._tokenResponse=r,a}function v9(e){return e!==void 0&&e.enterprise!==void 0}class lme{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return ime(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cme(e,t){return Ph(e,"GET","/v2/recaptchaConfig",Lm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ume(e,t){return Ph(e,"POST","/v1/accounts:delete",t)}async function q5(e,t){return Ph(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dme(e,t=!1){const r=Yn(e),n=await r.getIdToken(t),a=zD(n);Vr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:rw(L3(a.auth_time)),issuedAtTime:rw(L3(a.iat)),expirationTime:rw(L3(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function L3(e){return Number(e)*1e3}function zD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return n5("JWT malformed, contained fewer than 3 sections"),null;try{const a=KY(r);return a?JSON.parse(a):(n5("Failed to decode base64 JWT payload"),null)}catch(a){return n5("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function b9(e){const t=zD(e);return Vr(t,"internal-error"),Vr(typeof t.exp<"u","internal-error"),Vr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Gd&&Ame(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Ame({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fme{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=rw(this.lastLoginAt),this.creationTime=rw(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Ow(e,q5(t,{idToken:r}));Vr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?lJ(a.providerUserInfo):[],i=mme(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new O6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function hme(e){const t=Yn(e);await W5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mme(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function lJ(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pme(e,t){const r=await iJ(e,{},async()=>{const n=I2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await oJ(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return e.emulatorConfig&&Dh(e.emulatorConfig.host)&&(c.credentials="include"),sJ.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function gme(e,t){return Ph(e,"POST","/v2/accounts:revokeToken",Lm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Vr(t.idToken,"internal-error"),Vr(typeof t.idToken<"u","internal-error"),Vr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):b9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Vr(t.length!==0,"internal-error");const r=b9(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Vr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await pme(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Nv;return n&&(Vr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Vr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Vr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Nv,this.toJSON())}_performRefresh(){return Zf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(e,t){Vr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Td{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new fme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new O6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Ow(this,this.stsTokenManager.getToken(this.auth,t));return Vr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return dme(this,t)}reload(){return hme(this)}_assign(t){this!==t&&(Vr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Td({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await W5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rc(this.auth.app))return Promise.reject(am(this.auth));const t=await this.getIdToken();return await Ow(this,ume(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:m,providerData:g,stsTokenManager:x}=r;Vr(f&&x,t,"internal-error");const v=Nv.fromJSON(this.name,x);Vr(typeof f=="string",t,"internal-error"),N0(n,t.name),N0(a,t.name),Vr(typeof h=="boolean",t,"internal-error"),Vr(typeof m=="boolean",t,"internal-error"),N0(s,t.name),N0(i,t.name),N0(l,t.name),N0(c,t.name),N0(u,t.name),N0(d,t.name);const y=new Td({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:m,photoURL:i,phoneNumber:s,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new Nv;a.updateFromServerResponse(r);const s=new Td({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await W5(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Vr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?lJ(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Nv;l.updateFromIdToken(n);const c=new Td({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new O6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=new Map;function eh(e){bh(e instanceof Function,"Expected a class definition");let t=y9.get(e);return t?(bh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,y9.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}cJ.type="NONE";const w9=cJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(e,t,r){return`firebase:${e}:${t}:${r}`}class _v{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=a5(this.userKey,a.apiKey,s),this.fullPersistenceKey=a5("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await q5(this.auth,{idToken:t}).catch(()=>{});return r?Td._fromGetAccountInfoResponse(this.auth,r,t):null}return Td._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new _v(eh(w9),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||eh(w9);const i=a5(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await q5(t,{idToken:d}).catch(()=>{});if(!h)break;f=await Td._fromGetAccountInfoResponse(t,h,d)}else f=Td._fromJSON(t,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new _v(s,t,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new _v(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fJ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uJ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mJ(t))return"Blackberry";if(pJ(t))return"Webos";if(dJ(t))return"Safari";if((t.includes("chrome/")||AJ(t))&&!t.includes("edge/"))return"Chrome";if(hJ(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function uJ(e=al()){return/firefox\//i.test(e)}function dJ(e=al()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function AJ(e=al()){return/crios\//i.test(e)}function fJ(e=al()){return/iemobile/i.test(e)}function hJ(e=al()){return/android/i.test(e)}function mJ(e=al()){return/blackberry/i.test(e)}function pJ(e=al()){return/webos/i.test(e)}function $D(e=al()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function xme(e=al()){var t;return $D(e)&&!!((t=window.navigator)!=null&&t.standalone)}function vme(){return Fhe()&&document.documentMode===10}function gJ(e=al()){return $D(e)||hJ(e)||pJ(e)||mJ(e)||/windows phone/i.test(e)||fJ(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xJ(e,t=[]){let r;switch(e){case"Browser":r=E9(al());break;case"Worker":r=`${E9(al())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ig}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bme{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,l)=>{try{const c=t(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yme(e,t={}){return Ph(e,"GET","/v2/passwordPolicy",Lm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wme=6;class Eme{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??wme,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cme{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C9(this),this.idTokenSubscription=new C9(this),this.beforeStateQueue=new bme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nJ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=eh(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await _v.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await q5(this,{idToken:t}),n=await Td._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Rc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await W5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=rme()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Rc(this.app))return Promise.reject(am(this));const r=t?Yn(t):null;return r&&Vr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Vr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Rc(this.app)?Promise.reject(am(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Rc(this.app)?Promise.reject(am(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await yme(this),r=new Eme(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new T2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await gme(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&eh(t)||this._popupRedirectResolver;Vr(r,this,"argument-error"),this.redirectPersistenceManager=await _v.create(this,[eh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vr(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xJ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Rc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&Z0e(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Fg(e){return Yn(e)}class C9{constructor(t){this.auth=t,this.observer=null,this.addObserver=Qhe(r=>this.observer=r)}get next(){return Vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nme(e){o4=e}function vJ(e){return o4.loadJS(e)}function _me(){return o4.recaptchaEnterpriseScript}function Sme(){return o4.gapiScript}function kme(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class jme{constructor(){this.enterprise=new Bme}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class Bme{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Tme="recaptcha-enterprise",bJ="NO_RECAPTCHA";class Ime{constructor(t){this.type=Tme,this.auth=Fg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{cme(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new lme(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;v9(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(bJ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jme().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&v9(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=_me();c.length!==0&&(c+=l),vJ(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function N9(e,t,r,n=!1,a=!1){const s=new Ime(e);let i;if(a)i=bJ;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const l={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:i}):Object.assign(l,{captchaResponse:i}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function D6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await N9(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await N9(e,t,r,r==="getOobCode");return n(e,l)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fme(e,t){const r=F2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(pm(s,t??{}))return a;Hd(a,"already-initialized")}return r.initialize({options:t})}function Ome(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(eh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Dme(e,t,r){const n=Fg(e);Vr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=yJ(t),{host:i,port:l}=Pme(t),c=l===null?"":`:${l}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Vr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Vr(pm(u,n.config.emulator)&&pm(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Dh(i)?(n4(`${s}//${i}${c}`),a4("Auth",!0)):Rme()}function yJ(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pme(e){const t=yJ(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:_9(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:_9(i)}}}function _9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Rme(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Zf("not implemented")}_getIdTokenResponse(t){return Zf("not implemented")}_linkToIdToken(t,r){return Zf("not implemented")}_getReauthenticationResolver(t){return Zf("not implemented")}}async function Lme(e,t){return Ph(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mme(e,t){return i4(e,"POST","/v1/accounts:signInWithPassword",Lm(e,t))}async function Ume(e,t){return Ph(e,"POST","/v1/accounts:sendOobCode",Lm(e,t))}async function Qme(e,t){return Ume(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hme(e,t){return i4(e,"POST","/v1/accounts:signInWithEmailLink",Lm(e,t))}async function Vme(e,t){return i4(e,"POST","/v1/accounts:signInWithEmailLink",Lm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends GD{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Dw(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Dw(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return D6(t,r,"signInWithPassword",Mme);case"emailLink":return Hme(t,{email:this._email,oobCode:this._password});default:Hd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return D6(t,n,"signUpPassword",Lme);case"emailLink":return Vme(t,{idToken:r,email:this._email,oobCode:this._password});default:Hd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(e,t){return i4(e,"POST","/v1/accounts:signInWithIdp",Lm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme="http://localhost";class ug extends GD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new ug(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Hd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new ug(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Sv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Sv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Sv(t,r)}buildRequest(){const t={requestUri:zme,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=I2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $me(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gme(e){const t=Iy(Fy(e)).link,r=t?Iy(Fy(t)).deep_link_id:null,n=Iy(Fy(e)).deep_link_id;return(n?Iy(Fy(n)).link:null)||n||r||t||e}class KD{constructor(t){const r=Iy(Fy(t)),n=r.apiKey??null,a=r.oobCode??null,s=$me(r.mode??null);Vr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=Gme(t);try{return new KD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.providerId=D1.PROVIDER_ID}static credential(t,r){return Dw._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=KD.parseLink(r);return Vr(n,"argument-error"),Dw._fromEmailAndCode(t,n.code,n.tenantId)}}D1.PROVIDER_ID="password";D1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";D1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2 extends wJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0 extends D2{constructor(){super("facebook.com")}static credential(t){return ug._fromParams({providerId:H0.PROVIDER_ID,signInMethod:H0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return H0.credentialFromTaggedObject(t)}static credentialFromError(t){return H0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return H0.credential(t.oauthAccessToken)}catch{return null}}}H0.FACEBOOK_SIGN_IN_METHOD="facebook.com";H0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0 extends D2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return ug._fromParams({providerId:V0.PROVIDER_ID,signInMethod:V0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return V0.credentialFromTaggedObject(t)}static credentialFromError(t){return V0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return V0.credential(r,n)}catch{return null}}}V0.GOOGLE_SIGN_IN_METHOD="google.com";V0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends D2{constructor(){super("github.com")}static credential(t){return ug._fromParams({providerId:z0.PROVIDER_ID,signInMethod:z0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return z0.credentialFromTaggedObject(t)}static credentialFromError(t){return z0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return z0.credential(t.oauthAccessToken)}catch{return null}}}z0.GITHUB_SIGN_IN_METHOD="github.com";z0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends D2{constructor(){super("twitter.com")}static credential(t,r){return ug._fromParams({providerId:$0.PROVIDER_ID,signInMethod:$0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return $0.credentialFromTaggedObject(t)}static credentialFromError(t){return $0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return $0.credential(r,n)}catch{return null}}}$0.TWITTER_SIGN_IN_METHOD="twitter.com";$0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Td._fromIdTokenResponse(t,n,a),i=S9(n);return new Wv({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=S9(n);return new Wv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function S9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5 extends Gd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,X5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new X5(t,r,n,a)}}function EJ(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?X5._fromErrorAndOperation(e,s,t,n):s})}async function Kme(e,t,r=!1){const n=await Ow(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Wv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qme(e,t,r=!1){const{auth:n}=e;if(Rc(n.app))return Promise.reject(am(n));const a="reauthenticate";try{const s=await Ow(e,EJ(n,a,t,e),r);Vr(s.idToken,n,"internal-error");const i=zD(s.idToken);Vr(i,n,"internal-error");const{sub:l}=i;return Vr(e.uid===l,n,"user-mismatch"),Wv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CJ(e,t,r=!1){if(Rc(e.app))return Promise.reject(am(e));const n="signIn",a=await EJ(e,n,t),s=await Wv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function Wme(e,t){return CJ(Fg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xme(e){const t=Fg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Yme(e,t,r){const n=Fg(e);await D6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Qme)}function Jme(e,t,r){return Rc(e.app)?Promise.reject(am(e)):Wme(Yn(e),D1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Xme(e),n})}function Zme(e,t,r,n){return Yn(e).onIdTokenChanged(t,r,n)}function epe(e,t,r){return Yn(e).beforeAuthStateChanged(t,r)}function NJ(e,t,r,n){return Yn(e).onAuthStateChanged(t,r,n)}function tpe(e){return Yn(e).signOut()}const Y5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Y5,"1"),this.storage.removeItem(Y5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=1e3,npe=10;class SJ extends _J{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gJ(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);vme()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,npe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},rpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}SJ.type="LOCAL";const ape=SJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ extends _J{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}kJ.type="SESSION";const jJ=kJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function spe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new l4(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await spe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}l4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ipe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=qD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return window}function ope(e){YA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(){return typeof YA().WorkerGlobalScope<"u"&&typeof YA().importScripts=="function"}async function lpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cpe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function upe(){return BJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TJ="firebaseLocalStorageDb",dpe=1,J5="firebaseLocalStorage",IJ="fbase_key";class P2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function c4(e,t){return e.transaction([J5],t?"readwrite":"readonly").objectStore(J5)}function Ape(){const e=indexedDB.deleteDatabase(TJ);return new P2(e).toPromise()}function P6(){const e=indexedDB.open(TJ,dpe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(J5,{keyPath:IJ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(J5)?t(n):(n.close(),await Ape(),t(await P6()))})})}async function k9(e,t,r){const n=c4(e,!0).put({[IJ]:t,value:r});return new P2(n).toPromise()}async function fpe(e,t){const r=c4(e,!1).get(t),n=await new P2(r).toPromise();return n===void 0?null:n.value}function j9(e,t){const r=c4(e,!0).delete(t);return new P2(r).toPromise()}const hpe=800,mpe=3;class FJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await P6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>mpe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=l4._getInstance(upe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await lpe(),!this.activeServiceWorker)return;this.sender=new ipe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||cpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await P6();return await k9(t,Y5,"1"),await j9(t,Y5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>k9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>fpe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>j9(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=c4(a,!1).getAll();return new P2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FJ.type="LOCAL";const ppe=FJ;new O2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gpe(e,t){return t?eh(t):(Vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD extends GD{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Sv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Sv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Sv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function xpe(e){return CJ(e.auth,new WD(e),e.bypassAuthState)}function vpe(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),qme(r,new WD(e),e.bypassAuthState)}async function bpe(e){const{auth:t,user:r}=e;return Vr(r,t,"internal-error"),Kme(r,new WD(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return xpe;case"linkViaPopup":case"linkViaRedirect":return bpe;case"reauthViaPopup":case"reauthViaRedirect":return vpe;default:Hd(this.auth,"internal-error")}}resolve(t){bh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ype=new O2(2e3,1e4);class dv extends OJ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,dv.currentPopupAction&&dv.currentPopupAction.cancel(),dv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Vr(t,this.auth,"internal-error"),t}async onExecution(){bh(this.filter.length===1,"Popup operations only handle one event");const t=qD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(XA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(XA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(XA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ype.get())};t()}}dv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wpe="pendingRedirect",s5=new Map;class Epe extends OJ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=s5.get(this.auth._key());if(!t){try{const n=await Cpe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}s5.set(this.auth._key(),t)}return this.bypassAuthState||s5.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cpe(e,t){const r=Spe(t),n=_pe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Npe(e,t){s5.set(e._key(),t)}function _pe(e){return eh(e._redirectPersistence)}function Spe(e){return a5(wpe,e.config.apiKey,e.name)}async function kpe(e,t,r=!1){if(Rc(e.app))return Promise.reject(am(e));const n=Fg(e),a=gpe(n,t),i=await new Epe(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jpe=600*1e3;class Bpe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Tpe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!DJ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(XA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=jpe&&this.cachedEventUids.clear(),this.cachedEventUids.has(B9(t))}saveEventToCache(t){this.cachedEventUids.add(B9(t)),this.lastProcessedEventTime=Date.now()}}function B9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function DJ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Tpe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DJ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ipe(e,t={}){return Ph(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ope=/^https?/;async function Dpe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ipe(e);for(const r of t)try{if(Ppe(r))return}catch{}Hd(e,"unauthorized-domain")}function Ppe(e){const t=F6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Ope.test(r))return!1;if(Fpe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rpe=new O2(3e4,6e4);function T9(){const e=YA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Lpe(e){return new Promise((t,r)=>{var a,s,i;function n(){T9(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{T9(),r(XA(e,"network-request-failed"))},timeout:Rpe.get()})}if((s=(a=YA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=YA().gapi)!=null&&i.load)n();else{const l=kme("iframefcb");return YA()[l]=()=>{gapi.load?n():r(XA(e,"network-request-failed"))},vJ(`${Sme()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw i5=null,t})}let i5=null;function Mpe(e){return i5=i5||Lpe(e),i5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Upe=new O2(5e3,15e3),Qpe="__/auth/iframe",Hpe="emulator/auth/iframe",Vpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $pe(e){const t=e.config;Vr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?VD(t,Hpe):`https://${e.config.authDomain}/${Qpe}`,n={apiKey:t.apiKey,appName:e.name,v:Ig},a=zpe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${I2(n).slice(1)}`}async function Gpe(e){const t=await Mpe(e),r=YA().gapi;return Vr(r,e,"internal-error"),t.open({where:document.body,url:$pe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vpe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=XA(e,"network-request-failed"),l=YA().setTimeout(()=>{s(i)},Upe.get());function c(){YA().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qpe=500,Wpe=600,Xpe="_blank",Ype="http://localhost";class I9{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jpe(e,t,r,n=qpe,a=Wpe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...Kpe,width:n.toString(),height:a.toString(),top:s,left:i},u=al().toLowerCase();r&&(l=AJ(u)?Xpe:r),uJ(u)&&(t=t||Ype,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(xme(u)&&l!=="_self")return Zpe(t||"",l),new I9(null);const f=window.open(t||"",l,d);Vr(f,e,"popup-blocked");try{f.focus()}catch{}return new I9(f)}function Zpe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ege="__/auth/handler",tge="emulator/auth/handler",rge=encodeURIComponent("fac");async function F9(e,t,r,n,a,s){Vr(e.config.authDomain,e,"auth-domain-config-required"),Vr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Ig,eventId:a};if(t instanceof wJ){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",Uhe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof D2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${rge}=${encodeURIComponent(c)}`:"";return`${nge(e)}?${I2(l).slice(1)}${u}`}function nge({config:e}){return e.emulator?VD(e,tge):`https://${e.authDomain}/${ege}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="webStorageSupport";class age{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jJ,this._completeRedirectFn=kpe,this._overrideRedirectResult=Npe}async _openPopup(t,r,n,a){var i;bh((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await F9(t,r,n,F6(),a);return Jpe(t,s,qD())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await F9(t,r,n,F6(),a);return ope(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(bh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Gpe(t),n=new Bpe(t);return r.register("authEvent",a=>(Vr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(M3,{type:M3},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[M3];s!==void 0&&r(!!s),Hd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Dpe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return gJ()||dJ()||$D()}}const sge=age;var O9="@firebase/auth",D9="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ige{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oge(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lge(e){gm(new xh("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;Vr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xJ(e)},u=new Cme(n,a,s,c);return Ome(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),gm(new xh("auth-internal",t=>{const r=Fg(t.getProvider("auth").getImmediate());return(n=>new ige(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zu(O9,D9,oge(e)),zu(O9,D9,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cge=300,uge=XY("authIdTokenMaxAge")||cge;let P9=null;const dge=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>uge)return;const a=r==null?void 0:r.token;P9!==a&&(P9=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function PJ(e=s4()){const t=F2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Fme(e,{popupRedirectResolver:sge,persistence:[ppe,ape,jJ]}),n=XY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=dge(s.toString());epe(r,i,()=>i(r.currentUser)),Zme(r,l=>i(l))}}const a=qY("auth");return a&&Dme(r,`http://${a}`),r}function Age(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Nme({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=XA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Age().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lge("Browser");var fge="firebase",hge="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zu(fge,hge,"app");var R9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sm,RJ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,S){function T(){}T.prototype=S.prototype,E.D=S.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(L,R,j){for(var P=Array(arguments.length-2),M=2;M<arguments.length;M++)P[M-2]=arguments[M];return S.prototype[R].apply(L,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,S,T){T||(T=0);var L=Array(16);if(typeof S=="string")for(var R=0;16>R;++R)L[R]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(R=0;16>R;++R)L[R]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=E.g[0],T=E.g[1],R=E.g[2];var j=E.g[3],P=S+(j^T&(R^j))+L[0]+3614090360&4294967295;S=T+(P<<7&4294967295|P>>>25),P=j+(R^S&(T^R))+L[1]+3905402710&4294967295,j=S+(P<<12&4294967295|P>>>20),P=R+(T^j&(S^T))+L[2]+606105819&4294967295,R=j+(P<<17&4294967295|P>>>15),P=T+(S^R&(j^S))+L[3]+3250441966&4294967295,T=R+(P<<22&4294967295|P>>>10),P=S+(j^T&(R^j))+L[4]+4118548399&4294967295,S=T+(P<<7&4294967295|P>>>25),P=j+(R^S&(T^R))+L[5]+1200080426&4294967295,j=S+(P<<12&4294967295|P>>>20),P=R+(T^j&(S^T))+L[6]+2821735955&4294967295,R=j+(P<<17&4294967295|P>>>15),P=T+(S^R&(j^S))+L[7]+4249261313&4294967295,T=R+(P<<22&4294967295|P>>>10),P=S+(j^T&(R^j))+L[8]+1770035416&4294967295,S=T+(P<<7&4294967295|P>>>25),P=j+(R^S&(T^R))+L[9]+2336552879&4294967295,j=S+(P<<12&4294967295|P>>>20),P=R+(T^j&(S^T))+L[10]+4294925233&4294967295,R=j+(P<<17&4294967295|P>>>15),P=T+(S^R&(j^S))+L[11]+2304563134&4294967295,T=R+(P<<22&4294967295|P>>>10),P=S+(j^T&(R^j))+L[12]+1804603682&4294967295,S=T+(P<<7&4294967295|P>>>25),P=j+(R^S&(T^R))+L[13]+4254626195&4294967295,j=S+(P<<12&4294967295|P>>>20),P=R+(T^j&(S^T))+L[14]+2792965006&4294967295,R=j+(P<<17&4294967295|P>>>15),P=T+(S^R&(j^S))+L[15]+1236535329&4294967295,T=R+(P<<22&4294967295|P>>>10),P=S+(R^j&(T^R))+L[1]+4129170786&4294967295,S=T+(P<<5&4294967295|P>>>27),P=j+(T^R&(S^T))+L[6]+3225465664&4294967295,j=S+(P<<9&4294967295|P>>>23),P=R+(S^T&(j^S))+L[11]+643717713&4294967295,R=j+(P<<14&4294967295|P>>>18),P=T+(j^S&(R^j))+L[0]+3921069994&4294967295,T=R+(P<<20&4294967295|P>>>12),P=S+(R^j&(T^R))+L[5]+3593408605&4294967295,S=T+(P<<5&4294967295|P>>>27),P=j+(T^R&(S^T))+L[10]+38016083&4294967295,j=S+(P<<9&4294967295|P>>>23),P=R+(S^T&(j^S))+L[15]+3634488961&4294967295,R=j+(P<<14&4294967295|P>>>18),P=T+(j^S&(R^j))+L[4]+3889429448&4294967295,T=R+(P<<20&4294967295|P>>>12),P=S+(R^j&(T^R))+L[9]+568446438&4294967295,S=T+(P<<5&4294967295|P>>>27),P=j+(T^R&(S^T))+L[14]+3275163606&4294967295,j=S+(P<<9&4294967295|P>>>23),P=R+(S^T&(j^S))+L[3]+4107603335&4294967295,R=j+(P<<14&4294967295|P>>>18),P=T+(j^S&(R^j))+L[8]+1163531501&4294967295,T=R+(P<<20&4294967295|P>>>12),P=S+(R^j&(T^R))+L[13]+2850285829&4294967295,S=T+(P<<5&4294967295|P>>>27),P=j+(T^R&(S^T))+L[2]+4243563512&4294967295,j=S+(P<<9&4294967295|P>>>23),P=R+(S^T&(j^S))+L[7]+1735328473&4294967295,R=j+(P<<14&4294967295|P>>>18),P=T+(j^S&(R^j))+L[12]+2368359562&4294967295,T=R+(P<<20&4294967295|P>>>12),P=S+(T^R^j)+L[5]+4294588738&4294967295,S=T+(P<<4&4294967295|P>>>28),P=j+(S^T^R)+L[8]+2272392833&4294967295,j=S+(P<<11&4294967295|P>>>21),P=R+(j^S^T)+L[11]+1839030562&4294967295,R=j+(P<<16&4294967295|P>>>16),P=T+(R^j^S)+L[14]+4259657740&4294967295,T=R+(P<<23&4294967295|P>>>9),P=S+(T^R^j)+L[1]+2763975236&4294967295,S=T+(P<<4&4294967295|P>>>28),P=j+(S^T^R)+L[4]+1272893353&4294967295,j=S+(P<<11&4294967295|P>>>21),P=R+(j^S^T)+L[7]+4139469664&4294967295,R=j+(P<<16&4294967295|P>>>16),P=T+(R^j^S)+L[10]+3200236656&4294967295,T=R+(P<<23&4294967295|P>>>9),P=S+(T^R^j)+L[13]+681279174&4294967295,S=T+(P<<4&4294967295|P>>>28),P=j+(S^T^R)+L[0]+3936430074&4294967295,j=S+(P<<11&4294967295|P>>>21),P=R+(j^S^T)+L[3]+3572445317&4294967295,R=j+(P<<16&4294967295|P>>>16),P=T+(R^j^S)+L[6]+76029189&4294967295,T=R+(P<<23&4294967295|P>>>9),P=S+(T^R^j)+L[9]+3654602809&4294967295,S=T+(P<<4&4294967295|P>>>28),P=j+(S^T^R)+L[12]+3873151461&4294967295,j=S+(P<<11&4294967295|P>>>21),P=R+(j^S^T)+L[15]+530742520&4294967295,R=j+(P<<16&4294967295|P>>>16),P=T+(R^j^S)+L[2]+3299628645&4294967295,T=R+(P<<23&4294967295|P>>>9),P=S+(R^(T|~j))+L[0]+4096336452&4294967295,S=T+(P<<6&4294967295|P>>>26),P=j+(T^(S|~R))+L[7]+1126891415&4294967295,j=S+(P<<10&4294967295|P>>>22),P=R+(S^(j|~T))+L[14]+2878612391&4294967295,R=j+(P<<15&4294967295|P>>>17),P=T+(j^(R|~S))+L[5]+4237533241&4294967295,T=R+(P<<21&4294967295|P>>>11),P=S+(R^(T|~j))+L[12]+1700485571&4294967295,S=T+(P<<6&4294967295|P>>>26),P=j+(T^(S|~R))+L[3]+2399980690&4294967295,j=S+(P<<10&4294967295|P>>>22),P=R+(S^(j|~T))+L[10]+4293915773&4294967295,R=j+(P<<15&4294967295|P>>>17),P=T+(j^(R|~S))+L[1]+2240044497&4294967295,T=R+(P<<21&4294967295|P>>>11),P=S+(R^(T|~j))+L[8]+1873313359&4294967295,S=T+(P<<6&4294967295|P>>>26),P=j+(T^(S|~R))+L[15]+4264355552&4294967295,j=S+(P<<10&4294967295|P>>>22),P=R+(S^(j|~T))+L[6]+2734768916&4294967295,R=j+(P<<15&4294967295|P>>>17),P=T+(j^(R|~S))+L[13]+1309151649&4294967295,T=R+(P<<21&4294967295|P>>>11),P=S+(R^(T|~j))+L[4]+4149444226&4294967295,S=T+(P<<6&4294967295|P>>>26),P=j+(T^(S|~R))+L[11]+3174756917&4294967295,j=S+(P<<10&4294967295|P>>>22),P=R+(S^(j|~T))+L[2]+718787259&4294967295,R=j+(P<<15&4294967295|P>>>17),P=T+(j^(R|~S))+L[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+j&4294967295}n.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var T=S-this.blockSize,L=this.B,R=this.h,j=0;j<S;){if(R==0)for(;j<=T;)a(this,E,j),j+=this.blockSize;if(typeof E=="string"){for(;j<S;)if(L[R++]=E.charCodeAt(j++),R==this.blockSize){a(this,L),R=0;break}}else for(;j<S;)if(L[R++]=E[j++],R==this.blockSize){a(this,L),R=0;break}}this.h=R,this.o+=S},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var T=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=T&255,T/=256;for(this.u(E),E=Array(16),S=T=0;4>S;++S)for(var L=0;32>L;L+=8)E[T++]=this.g[S]>>>L&255;return E};function s(E,S){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=S(E)}function i(E,S){this.h=S;for(var T=[],L=!0,R=E.length-1;0<=R;R--){var j=E[R]|0;L&&j==S||(T[R]=j,L=!1)}this.g=T}var l={};function c(E){return-128<=E&&128>E?s(E,function(S){return new i([S|0],0>S?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return v(u(-E));for(var S=[],T=1,L=0;E>=T;L++)S[L]=E/T|0,T*=4294967296;return new i(S,0)}function d(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return v(d(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(S,8)),L=f,R=0;R<E.length;R+=8){var j=Math.min(8,E.length-R),P=parseInt(E.substring(R,R+j),S);8>j?(j=u(Math.pow(S,j)),L=L.j(j).add(u(P))):(L=L.j(T),L=L.add(u(P)))}return L}var f=c(0),h=c(1),m=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-v(this).m();for(var E=0,S=1,T=0;T<this.g.length;T++){var L=this.i(T);E+=(0<=L?L:4294967296+L)*S,S*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+v(this).toString(E);for(var S=u(Math.pow(E,6)),T=this,L="";;){var R=B(T,S).g;T=y(T,R.j(S));var j=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=R,g(T))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function v(E){for(var S=E.g.length,T=[],L=0;L<S;L++)T[L]=~E.g[L];return new i(T,~E.h).add(h)}e.abs=function(){return x(this)?v(this):this},e.add=function(E){for(var S=Math.max(this.g.length,E.g.length),T=[],L=0,R=0;R<=S;R++){var j=L+(this.i(R)&65535)+(E.i(R)&65535),P=(j>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);L=P>>>16,j&=65535,P&=65535,T[R]=P<<16|j}return new i(T,T[T.length-1]&-2147483648?-1:0)};function y(E,S){return E.add(v(S))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?v(this).j(v(E)):v(v(this).j(E));if(x(E))return v(this.j(v(E)));if(0>this.l(m)&&0>E.l(m))return u(this.m()*E.m());for(var S=this.g.length+E.g.length,T=[],L=0;L<2*S;L++)T[L]=0;for(L=0;L<this.g.length;L++)for(var R=0;R<E.g.length;R++){var j=this.i(L)>>>16,P=this.i(L)&65535,M=E.i(R)>>>16,Z=E.i(R)&65535;T[2*L+2*R]+=P*Z,w(T,2*L+2*R),T[2*L+2*R+1]+=j*Z,w(T,2*L+2*R+1),T[2*L+2*R+1]+=P*M,w(T,2*L+2*R+1),T[2*L+2*R+2]+=j*M,w(T,2*L+2*R+2)}for(L=0;L<S;L++)T[L]=T[2*L+1]<<16|T[2*L];for(L=S;L<2*S;L++)T[L]=0;return new i(T,0)};function w(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function N(E,S){this.g=E,this.h=S}function B(E,S){if(g(S))throw Error("division by zero");if(g(E))return new N(f,f);if(x(E))return S=B(v(E),S),new N(v(S.g),v(S.h));if(x(S))return S=B(E,v(S)),new N(v(S.g),S.h);if(30<E.g.length){if(x(E)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var T=h,L=S;0>=L.l(E);)T=k(T),L=k(L);var R=F(T,1),j=F(L,1);for(L=F(L,2),T=F(T,2);!g(L);){var P=j.add(L);0>=P.l(E)&&(R=R.add(T),j=P),L=F(L,1),T=F(T,1)}return S=y(E,R.j(S)),new N(R,S)}for(R=f;0<=E.l(S);){for(T=Math.max(1,Math.floor(E.m()/S.m())),L=Math.ceil(Math.log(T)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=u(T),P=j.j(S);x(P)||0<P.l(E);)T-=L,j=u(T),P=j.j(S);g(j)&&(j=h),R=R.add(j),E=y(E,P)}return new N(R,E)}e.A=function(E){return B(this,E).h},e.and=function(E){for(var S=Math.max(this.g.length,E.g.length),T=[],L=0;L<S;L++)T[L]=this.i(L)&E.i(L);return new i(T,this.h&E.h)},e.or=function(E){for(var S=Math.max(this.g.length,E.g.length),T=[],L=0;L<S;L++)T[L]=this.i(L)|E.i(L);return new i(T,this.h|E.h)},e.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),T=[],L=0;L<S;L++)T[L]=this.i(L)^E.i(L);return new i(T,this.h^E.h)};function k(E){for(var S=E.g.length+1,T=[],L=0;L<S;L++)T[L]=E.i(L)<<1|E.i(L-1)>>>31;return new i(T,E.h)}function F(E,S){var T=S>>5;S%=32;for(var L=E.g.length-T,R=[],j=0;j<L;j++)R[j]=0<S?E.i(j+T)>>>S|E.i(j+T+1)<<32-S:E.i(j+T);return new i(R,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,RJ=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,sm=i}).apply(typeof R9<"u"?R9:typeof self<"u"?self:typeof window<"u"?window:{});var _C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LJ,Oy,MJ,o5,R6,UJ,QJ,HJ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ne,ce){return O==Array.prototype||O==Object.prototype||(O[ne]=ce.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof _C=="object"&&_C];for(var ne=0;ne<O.length;++ne){var ce=O[ne];if(ce&&ce.Math==Math)return ce}throw Error("Cannot find global object")}var n=r(this);function a(O,ne){if(ne)e:{var ce=n;O=O.split(".");for(var be=0;be<O.length-1;be++){var ze=O[be];if(!(ze in ce))break e;ce=ce[ze]}O=O[O.length-1],be=ce[O],ne=ne(be),ne!=be&&ne!=null&&t(ce,O,{configurable:!0,writable:!0,value:ne})}}function s(O,ne){O instanceof String&&(O+="");var ce=0,be=!1,ze={next:function(){if(!be&&ce<O.length){var ot=ce++;return{value:ne(ot,O[ot]),done:!1}}return be=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ne,ce){return ce})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(O){var ne=typeof O;return ne=ne!="object"?ne:O?Array.isArray(O)?"array":ne:"null",ne=="array"||ne=="object"&&typeof O.length=="number"}function u(O){var ne=typeof O;return ne=="object"&&O!=null||ne=="function"}function d(O,ne,ce){return O.call.apply(O.bind,arguments)}function f(O,ne,ce){if(!O)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,be),O.apply(ne,ze)}}return function(){return O.apply(ne,arguments)}}function h(O,ne,ce){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(O,ne){var ce=Array.prototype.slice.call(arguments,1);return function(){var be=ce.slice();return be.push.apply(be,arguments),O.apply(this,be)}}function g(O,ne){function ce(){}ce.prototype=ne.prototype,O.aa=ne.prototype,O.prototype=new ce,O.prototype.constructor=O,O.Qb=function(be,ze,ot){for(var Ut=Array(arguments.length-2),Or=2;Or<arguments.length;Or++)Ut[Or-2]=arguments[Or];return ne.prototype[ze].apply(be,Ut)}}function x(O){const ne=O.length;if(0<ne){const ce=Array(ne);for(let be=0;be<ne;be++)ce[be]=O[be];return ce}return[]}function v(O,ne){for(let ce=1;ce<arguments.length;ce++){const be=arguments[ce];if(c(be)){const ze=O.length||0,ot=be.length||0;O.length=ze+ot;for(let Ut=0;Ut<ot;Ut++)O[ze+Ut]=be[Ut]}else O.push(be)}}class y{constructor(ne,ce){this.i=ne,this.j=ce,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function w(O){return/^[\s\xa0]*$/.test(O)}function N(){var O=l.navigator;return O&&(O=O.userAgent)?O:""}function B(O){return B[" "](O),O}B[" "]=function(){};var k=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function F(O,ne,ce){for(const be in O)ne.call(ce,O[be],be,O)}function E(O,ne){for(const ce in O)ne.call(void 0,O[ce],ce,O)}function S(O){const ne={};for(const ce in O)ne[ce]=O[ce];return ne}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(O,ne){let ce,be;for(let ze=1;ze<arguments.length;ze++){be=arguments[ze];for(ce in be)O[ce]=be[ce];for(let ot=0;ot<T.length;ot++)ce=T[ot],Object.prototype.hasOwnProperty.call(be,ce)&&(O[ce]=be[ce])}}function R(O){var ne=1;O=O.split(":");const ce=[];for(;0<ne&&O.length;)ce.push(O.shift()),ne--;return O.length&&ce.push(O.join(":")),ce}function j(O){l.setTimeout(()=>{throw O},0)}function P(){var O=K;let ne=null;return O.g&&(ne=O.g,O.g=O.g.next,O.g||(O.h=null),ne.next=null),ne}class M{constructor(){this.h=this.g=null}add(ne,ce){const be=Z.get();be.set(ne,ce),this.h?this.h.next=be:this.g=be,this.h=be}}var Z=new y(()=>new V,O=>O.reset());class V{constructor(){this.next=this.g=this.h=null}set(ne,ce){this.h=ne,this.g=ce,this.next=null}reset(){this.next=this.g=this.h=null}}let W,G=!1,K=new M,ee=()=>{const O=l.Promise.resolve(void 0);W=()=>{O.then(X)}};var X=()=>{for(var O;O=P();){try{O.h.call(O.g)}catch(ce){j(ce)}var ne=Z;ne.j(O),100>ne.h&&(ne.h++,O.next=ne.g,ne.g=O)}G=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(O,ne){this.type=O,this.g=this.target=ne,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var O=!1,ne=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const ce=()=>{};l.addEventListener("test",ce,ne),l.removeEventListener("test",ce,ne)}catch{}return O}();function J(O,ne){if(Q.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var ce=this.type=O.type,be=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ne,ne=O.relatedTarget){if(k){e:{try{B(ne.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ne=null)}}else ce=="mouseover"?ne=O.fromElement:ce=="mouseout"&&(ne=O.toElement);this.relatedTarget=ne,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:te[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&J.aa.h.call(this)}}g(J,Q);var te={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ie=0;function le(O,ne,ce,be,ze){this.listener=O,this.proxy=null,this.src=ne,this.type=ce,this.capture=!!be,this.ha=ze,this.key=++ie,this.da=this.fa=!1}function ue(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function je(O){this.src=O,this.g={},this.h=0}je.prototype.add=function(O,ne,ce,be,ze){var ot=O.toString();O=this.g[ot],O||(O=this.g[ot]=[],this.h++);var Ut=Ne(O,ne,be,ze);return-1<Ut?(ne=O[Ut],ce||(ne.fa=!1)):(ne=new le(ne,this.src,ot,!!be,ze),ne.fa=ce,O.push(ne)),ne};function ae(O,ne){var ce=ne.type;if(ce in O.g){var be=O.g[ce],ze=Array.prototype.indexOf.call(be,ne,void 0),ot;(ot=0<=ze)&&Array.prototype.splice.call(be,ze,1),ot&&(ue(ne),O.g[ce].length==0&&(delete O.g[ce],O.h--))}}function Ne(O,ne,ce,be){for(var ze=0;ze<O.length;++ze){var ot=O[ze];if(!ot.da&&ot.listener==ne&&ot.capture==!!ce&&ot.ha==be)return ze}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),_e={};function he(O,ne,ce,be,ze){if(Array.isArray(ne)){for(var ot=0;ot<ne.length;ot++)he(O,ne[ot],ce,be,ze);return null}return ce=ct(ce),O&&O[se]?O.K(ne,ce,u(be)?!!be.capture:!1,ze):Be(O,ne,ce,!1,be,ze)}function Be(O,ne,ce,be,ze,ot){if(!ne)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,Or=$e(O);if(Or||(O[ke]=Or=new je(O)),ce=Or.add(ne,ce,be,Ut,ot),ce.proxy)return ce;if(be=Le(),ce.proxy=be,be.src=O,be.listener=ce,O.addEventListener)z||(ze=Ut),ze===void 0&&(ze=!1),O.addEventListener(ne.toString(),be,ze);else if(O.attachEvent)O.attachEvent(Oe(ne.toString()),be);else if(O.addListener&&O.removeListener)O.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return ce}function Le(){function O(ce){return ne.call(O.src,O.listener,ce)}const ne=Re;return O}function We(O,ne,ce,be,ze){if(Array.isArray(ne))for(var ot=0;ot<ne.length;ot++)We(O,ne[ot],ce,be,ze);else be=u(be)?!!be.capture:!!be,ce=ct(ce),O&&O[se]?(O=O.i,ne=String(ne).toString(),ne in O.g&&(ot=O.g[ne],ce=Ne(ot,ce,be,ze),-1<ce&&(ue(ot[ce]),Array.prototype.splice.call(ot,ce,1),ot.length==0&&(delete O.g[ne],O.h--)))):O&&(O=$e(O))&&(ne=O.g[ne.toString()],O=-1,ne&&(O=Ne(ne,ce,be,ze)),(ce=-1<O?ne[O]:null)&&xe(ce))}function xe(O){if(typeof O!="number"&&O&&!O.da){var ne=O.src;if(ne&&ne[se])ae(ne.i,O);else{var ce=O.type,be=O.proxy;ne.removeEventListener?ne.removeEventListener(ce,be,O.capture):ne.detachEvent?ne.detachEvent(Oe(ce),be):ne.addListener&&ne.removeListener&&ne.removeListener(be),(ce=$e(ne))?(ae(ce,O),ce.h==0&&(ce.src=null,ne[ke]=null)):ue(O)}}}function Oe(O){return O in _e?_e[O]:_e[O]="on"+O}function Re(O,ne){if(O.da)O=!0;else{ne=new J(ne,this);var ce=O.listener,be=O.ha||O.src;O.fa&&xe(O),O=ce.call(be,ne)}return O}function $e(O){return O=O[ke],O instanceof je?O:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(O){return typeof O=="function"?O:(O[et]||(O[et]=function(ne){return O.handleEvent(ne)}),O[et])}function gt(){D.call(this),this.i=new je(this),this.M=this,this.F=null}g(gt,D),gt.prototype[se]=!0,gt.prototype.removeEventListener=function(O,ne,ce,be){We(this,O,ne,ce,be)};function It(O,ne){var ce,be=O.F;if(be)for(ce=[];be;be=be.F)ce.push(be);if(O=O.M,be=ne.type||ne,typeof ne=="string")ne=new Q(ne,O);else if(ne instanceof Q)ne.target=ne.target||O;else{var ze=ne;ne=new Q(be,O),L(ne,ze)}if(ze=!0,ce)for(var ot=ce.length-1;0<=ot;ot--){var Ut=ne.g=ce[ot];ze=Mt(Ut,be,!0,ne)&&ze}if(Ut=ne.g=O,ze=Mt(Ut,be,!0,ne)&&ze,ze=Mt(Ut,be,!1,ne)&&ze,ce)for(ot=0;ot<ce.length;ot++)Ut=ne.g=ce[ot],ze=Mt(Ut,be,!1,ne)&&ze}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var O=this.i,ne;for(ne in O.g){for(var ce=O.g[ne],be=0;be<ce.length;be++)ue(ce[be]);delete O.g[ne],O.h--}}this.F=null},gt.prototype.K=function(O,ne,ce,be){return this.i.add(String(O),ne,!1,ce,be)},gt.prototype.L=function(O,ne,ce,be){return this.i.add(String(O),ne,!0,ce,be)};function Mt(O,ne,ce,be){if(ne=O.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var ze=!0,ot=0;ot<ne.length;++ot){var Ut=ne[ot];if(Ut&&!Ut.da&&Ut.capture==ce){var Or=Ut.listener,yn=Ut.ha||Ut.src;Ut.fa&&ae(O.i,Ut),ze=Or.call(yn,be)!==!1&&ze}}return ze&&!be.defaultPrevented}function Pt(O,ne,ce){if(typeof O=="function")ce&&(O=h(O,ce));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:l.setTimeout(O,ne||0)}function Qt(O){O.g=Pt(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const ne=O.h;O.h=null,O.m.apply(null,ne)}class wt extends D{constructor(ne,ce){super(),this.m=ne,this.l=ce,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(O){D.call(this),this.h=O,this.g={}}g(Tr,D);var tr=[];function an(O){F(O.g,function(ne,ce){this.g.hasOwnProperty(ce)&&xe(ne)},O),O.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),an(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=l.JSON.stringify,$r=l.JSON.parse,Fn=class{stringify(O){return l.JSON.stringify(O,void 0)}parse(O){return l.JSON.parse(O,void 0)}};function Pr(){}Pr.prototype.h=null;function As(O){return O.h||(O.h=O.i())}function mn(){}var la={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ja(){Q.call(this,"d")}g(ja,Q);function rn(){Q.call(this,"c")}g(rn,Q);var gr={},Ze=null;function mt(){return Ze=Ze||new gt}gr.La="serverreachability";function Je(O){Q.call(this,gr.La,O)}g(Je,Q);function xt(O){const ne=mt();It(ne,new Je(ne))}gr.STAT_EVENT="statevent";function Et(O,ne){Q.call(this,gr.STAT_EVENT,O),this.stat=ne}g(Et,Q);function bt(O){const ne=mt();It(ne,new Et(ne,O))}gr.Ma="timingevent";function nr(O,ne){Q.call(this,gr.Ma,O),this.size=ne}g(nr,Q);function xr(O,ne){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){O()},ne)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Zr(O,ne,ce,be,ze,ot){O.info(function(){if(O.g)if(ot)for(var Ut="",Or=ot.split("&"),yn=0;yn<Or.length;yn++){var Xr=Or[yn].split("=");if(1<Xr.length){var zn=Xr[0];Xr=Xr[1];var ta=zn.split("_");Ut=2<=ta.length&&ta[1]=="type"?Ut+(zn+"="+Xr+"&"):Ut+(zn+"=redacted&")}}else Ut=null;else Ut=ot;return"XMLHTTP REQ ("+be+") [attempt "+ze+"]: "+ne+`
`+ce+`
`+Ut})}function qr(O,ne,ce,be,ze,ot,Ut){O.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+ze+"]: "+ne+`
`+ce+`
`+ot+" "+Ut})}function me(O,ne,ce,be){O.info(function(){return"XMLHTTP TEXT ("+ne+"): "+Ce(O,ce)+(be?" "+be:"")})}function Ie(O,ne){O.info(function(){return"TIMEOUT: "+ne})}Wr.prototype.info=function(){};function Ce(O,ne){if(!O.g)return ne;if(!ne)return null;try{var ce=JSON.parse(ne);if(ce){for(O=0;O<ce.length;O++)if(Array.isArray(ce[O])){var be=ce[O];if(!(2>be.length)){var ze=be[1];if(Array.isArray(ze)&&!(1>ze.length)){var ot=ze[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Sr(ce)}catch{return ne}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fe;function Ye(){}g(Ye,Pr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Fe=new Ye;function dt(O,ne,ce,be){this.j=O,this.i=ne,this.l=ce,this.R=be||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}var rt={},it={};function Ft(O,ne,ce){O.L=1,O.v=nu(Ei(ne)),O.m=ce,O.P=!0,$t(O,null)}function $t(O,ne){O.F=Date.now(),Gt(O),O.A=Ei(O.v);var ce=O.A,be=O.R;Array.isArray(be)||(be=[String(be)]),Fr(ce.i,"t",be),O.C=0,ce=O.j.J,O.h=new Ge,O.g=fe(O.j,ce?ne:null,!O.m),0<O.O&&(O.M=new wt(h(O.Y,O,O.g),O.O)),ne=O.U,ce=O.g,be=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(tr[0]=ze.toString()),ze=tr);for(var ot=0;ot<ze.length;ot++){var Ut=he(ce,ze[ot],be||ne.handleEvent,!1,ne.h||ne);if(!Ut)break;ne.g[Ut.key]=Ut}ne=O.H?S(O.H):{},O.m?(O.u||(O.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ne)):(O.u="GET",O.g.ea(O.A,O.u,null,ne)),xt(),Zr(O.i,O.u,O.A,O.l,O.R,O.m)}dt.prototype.ca=function(O){O=O.target;const ne=this.M;ne&&ps(O)==3?ne.j():this.Y(O)},dt.prototype.Y=function(O){try{if(O==this.g)e:{const ta=ps(this.g);var ne=this.g.Ba();const Rl=this.g.Z();if(!(3>ta)&&(ta!=3||this.g&&(this.h.h||this.g.oa()||qh(this.g)))){this.J||ta!=4||ne==7||(ne==8||0>=Rl?xt(3):xt(2)),sn(this);var ce=this.g.Z();this.X=ce;t:if(Jt(this)){var be=qh(this.g);O="";var ze=be.length,ot=ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Ut="";break t}this.h.i=new l.TextDecoder}for(ne=0;ne<ze;ne++)this.h.h=!0,O+=this.h.i.decode(be[ne],{stream:!(ot&&ne==ze-1)});be.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=ce==200,qr(this.i,this.u,this.A,this.l,this.R,ta,ce),this.o){if(this.T&&!this.K){t:{if(this.g){var Or,yn=this.g;if((Or=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Or)){var Xr=Or;break t}}Xr=null}if(ce=Xr)me(this.i,this.l,ce,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fs(this,ce);else{this.o=!1,this.s=3,bt(12),An(this),on(this);break e}}if(this.P){ce=!0;let es;for(;!this.J&&this.C<Ut.length;)if(es=Ht(this,Ut),es==it){ta==4&&(this.s=4,bt(14),ce=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(es==rt){this.s=4,bt(15),me(this.i,this.l,Ut,"[Invalid Chunk]"),ce=!1;break}else me(this.i,this.l,es,null),fs(this,es);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ta!=4||Ut.length!=0||this.h.h||(this.s=1,bt(16),ce=!1),this.o=this.o&&ce,!ce)me(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Ut.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),cu(zn),zn.M=!0,bt(11))}}else me(this.i,this.l,Ut,null),fs(this,Ut);ta==4&&An(this),this.o&&!this.J&&(ta==4?uu(this.j,this):(this.o=!1,Gt(this)))}else iu(this.g),ce==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),An(this),on(this)}}}catch{}finally{}};function Jt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,ne){var ce=O.C,be=ne.indexOf(`
`,ce);return be==-1?it:(ce=Number(ne.substring(ce,be)),isNaN(ce)?rt:(be+=1,be+ce>ne.length?it:(ne=ne.slice(be,be+ce),O.C=be+ce,ne)))}dt.prototype.cancel=function(){this.J=!0,An(this)};function Gt(O){O.S=Date.now()+O.I,kr(O,O.I)}function kr(O,ne){if(O.B!=null)throw Error("WatchDog timer not null");O.B=xr(h(O.ba,O),ne)}function sn(O){O.B&&(l.clearTimeout(O.B),O.B=null)}dt.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Ie(this.i,this.A),this.L!=2&&(xt(),bt(17)),An(this),this.s=2,on(this)):kr(this,this.S-O)};function on(O){O.j.G==0||O.J||uu(O.j,O)}function An(O){sn(O);var ne=O.M;ne&&typeof ne.ma=="function"&&ne.ma(),O.M=null,an(O.U),O.g&&(ne=O.g,O.g=null,ne.abort(),ne.ma())}function fs(O,ne){try{var ce=O.j;if(ce.G!=0&&(ce.g==O||yi(ce.h,O))){if(!O.K&&yi(ce.h,O)&&ce.G==3){try{var be=ce.Da.g.parse(ne)}catch{be=null}if(Array.isArray(be)&&be.length==3){var ze=be;if(ze[0]==0){e:if(!ce.u){if(ce.g)if(ce.g.F+3e3<O.F)xc(ce),rA(ce);else break e;ad(ce),bt(18)}}else ce.za=ze[1],0<ce.za-ce.T&&37500>ze[2]&&ce.F&&ce.v==0&&!ce.C&&(ce.C=xr(h(ce.Za,ce),6e3));if(1>=Ps(ce.h)&&ce.ca){try{ce.ca()}catch{}ce.ca=void 0}}else Qi(ce,11)}else if((O.K||ce.g==O)&&xc(ce),!w(ne))for(ze=ce.Da.g.parse(ne),ne=0;ne<ze.length;ne++){let Xr=ze[ne];if(ce.T=Xr[0],Xr=Xr[1],ce.G==2)if(Xr[0]=="c"){ce.K=Xr[1],ce.ia=Xr[2];const zn=Xr[3];zn!=null&&(ce.la=zn,ce.j.info("VER="+ce.la));const ta=Xr[4];ta!=null&&(ce.Aa=ta,ce.j.info("SVER="+ce.Aa));const Rl=Xr[5];Rl!=null&&typeof Rl=="number"&&0<Rl&&(be=1.5*Rl,ce.L=be,ce.j.info("backChannelRequestTimeoutMs_="+be)),be=ce;const es=O.g;if(es){const Bo=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var ot=be.h;ot.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(xa(ot,ot.h),ot.h=null))}if(be.D){const du=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;du&&(be.ya=du,Vn(be.I,be.D,du))}}ce.G=3,ce.l&&ce.l.ua(),ce.ba&&(ce.R=Date.now()-O.F,ce.j.info("Handshake RTT: "+ce.R+"ms")),be=ce;var Ut=O;if(be.qa=Y(be,be.J?be.ia:null,be.W),Ut.K){ni(be.h,Ut);var Or=Ut,yn=be.L;yn&&(Or.I=yn),Or.B&&(sn(Or),Gt(Or)),be.g=Ut}else aA(be);0<ce.i.length&&nA(ce)}else Xr[0]!="stop"&&Xr[0]!="close"||Qi(ce,7);else ce.G==3&&(Xr[0]=="stop"||Xr[0]=="close"?Xr[0]=="stop"?Qi(ce,7):gc(ce):Xr[0]!="noop"&&ce.l&&ce.l.ta(Xr),ce.v=0)}}xt(4)}catch{}}var No=class{constructor(O,ne){this.g=O,this.map=ne}};function hs(O){this.l=O||10,l.PerformanceNavigationTiming?(O=l.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ri(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Ps(O){return O.h?1:O.g?O.g.size:0}function yi(O,ne){return O.h?O.h==ne:O.g?O.g.has(ne):!1}function xa(O,ne){O.g?O.g.add(ne):O.h=ne}function ni(O,ne){O.h&&O.h==ne?O.h=null:O.g&&O.g.has(ne)&&O.g.delete(ne)}hs.prototype.cancel=function(){if(this.i=Zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Zd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ne=O.i;for(const ce of O.g.values())ne=ne.concat(ce.D);return ne}return x(O.i)}function $h(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var ne=[],ce=O.length,be=0;be<ce;be++)ne.push(O[be]);return ne}ne=[],ce=0;for(be in O)ne[ce++]=O[be];return ne}function eu(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var ne=[];O=O.length;for(var ce=0;ce<O;ce++)ne.push(ce);return ne}ne=[],ce=0;for(const be in O)ne[ce++]=be;return ne}}}function hf(O,ne){if(O.forEach&&typeof O.forEach=="function")O.forEach(ne,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,ne,void 0);else for(var ce=eu(O),be=$h(O),ze=be.length,ot=0;ot<ze;ot++)ne.call(void 0,be[ot],ce&&ce[ot],O)}var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eA(O,ne){if(O){O=O.split("&");for(var ce=0;ce<O.length;ce++){var be=O[ce].indexOf("="),ze=null;if(0<=be){var ot=O[ce].substring(0,be);ze=O[ce].substring(be+1)}else ot=O[ce];ne(ot,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function On(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof On){this.h=O.h,tu(this,O.j),this.o=O.o,this.g=O.g,ru(this,O.s),this.l=O.l;var ne=O.i,ce=new Tl;ce.i=ne.i,ne.g&&(ce.g=new Map(ne.g),ce.h=ne.h),Bl(this,ce),this.m=O.m}else O&&(ne=String(O).match(wi))?(this.h=!1,tu(this,ne[1]||"",!0),this.o=_o(ne[2]||""),this.g=_o(ne[3]||"",!0),ru(this,ne[4]),this.l=_o(ne[5]||"",!0),Bl(this,ne[6]||"",!0),this.m=_o(ne[7]||"")):(this.h=!1,this.i=new Tl(null,this.h))}On.prototype.toString=function(){var O=[],ne=this.j;ne&&O.push(Ac(ne,mf,!0),":");var ce=this.g;return(ce||ne=="file")&&(O.push("//"),(ne=this.o)&&O.push(Ac(ne,mf,!0),"@"),O.push(encodeURIComponent(String(ce)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ce=this.s,ce!=null&&O.push(":",String(ce))),(ce=this.l)&&(this.g&&ce.charAt(0)!="/"&&O.push("/"),O.push(Ac(ce,ce.charAt(0)=="/"?fc:pf,!0))),(ce=this.i.toString())&&O.push("?",ce),(ce=this.m)&&O.push("#",Ac(ce,hc)),O.join("")};function Ei(O){return new On(O)}function tu(O,ne,ce){O.j=ce?_o(ne,!0):ne,O.j&&(O.j=O.j.replace(/:$/,""))}function ru(O,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);O.s=ne}else O.s=null}function Bl(O,ne,ce){ne instanceof Tl?(O.i=ne,Kh(O.i,O.h)):(ce||(ne=Ac(ne,tA)),O.i=new Tl(ne,O.h))}function Vn(O,ne,ce){O.i.set(ne,ce)}function nu(O){return Vn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function _o(O,ne){return O?ne?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function Ac(O,ne,ce){return typeof O=="string"?(O=encodeURI(O).replace(ne,Gh),ce&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Gh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var mf=/[#\/\?@]/g,pf=/[#\?:]/g,fc=/[#\?]/g,tA=/[#\?@]/g,hc=/#/g;function Tl(O,ne){this.h=this.g=null,this.i=O||null,this.j=!!ne}function ca(O){O.g||(O.g=new Map,O.h=0,O.i&&eA(O.i,function(ne,ce){O.add(decodeURIComponent(ne.replace(/\+/g," ")),ce)}))}e=Tl.prototype,e.add=function(O,ne){ca(this),this.i=null,O=Fl(this,O);var ce=this.g.get(O);return ce||this.g.set(O,ce=[]),ce.push(ne),this.h+=1,this};function mc(O,ne){ca(O),ne=Fl(O,ne),O.g.has(ne)&&(O.i=null,O.h-=O.g.get(ne).length,O.g.delete(ne))}function Il(O,ne){return ca(O),ne=Fl(O,ne),O.g.has(ne)}e.forEach=function(O,ne){ca(this),this.g.forEach(function(ce,be){ce.forEach(function(ze){O.call(ne,ze,be,this)},this)},this)},e.na=function(){ca(this);const O=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ce=[];for(let be=0;be<ne.length;be++){const ze=O[be];for(let ot=0;ot<ze.length;ot++)ce.push(ne[be])}return ce},e.V=function(O){ca(this);let ne=[];if(typeof O=="string")Il(this,O)&&(ne=ne.concat(this.g.get(Fl(this,O))));else{O=Array.from(this.g.values());for(let ce=0;ce<O.length;ce++)ne=ne.concat(O[ce])}return ne},e.set=function(O,ne){return ca(this),this.i=null,O=Fl(this,O),Il(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ne]),this.h+=1,this},e.get=function(O,ne){return O?(O=this.V(O),0<O.length?String(O[0]):ne):ne};function Fr(O,ne,ce){mc(O,ne),0<ce.length&&(O.i=null,O.g.set(Fl(O,ne),x(ce)),O.h+=ce.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ne=Array.from(this.g.keys());for(var ce=0;ce<ne.length;ce++){var be=ne[ce];const ot=encodeURIComponent(String(be)),Ut=this.V(be);for(be=0;be<Ut.length;be++){var ze=ot;Ut[be]!==""&&(ze+="="+encodeURIComponent(String(Ut[be]))),O.push(ze)}}return this.i=O.join("&")};function Fl(O,ne){return ne=String(ne),O.j&&(ne=ne.toLowerCase()),ne}function Kh(O,ne){ne&&!O.j&&(ca(O),O.i=null,O.g.forEach(function(ce,be){var ze=be.toLowerCase();be!=ze&&(mc(this,be),Fr(this,ze,ce))},O)),O.j=ne}function Li(O,ne){const ce=new Wr;if(l.Image){const be=new Image;be.onload=m(io,ce,"TestLoadImage: loaded",!0,ne,be),be.onerror=m(io,ce,"TestLoadImage: error",!1,ne,be),be.onabort=m(io,ce,"TestLoadImage: abort",!1,ne,be),be.ontimeout=m(io,ce,"TestLoadImage: timeout",!1,ne,be),l.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=O}else ne(!1)}function So(O,ne){const ce=new Wr,be=new AbortController,ze=setTimeout(()=>{be.abort(),io(ce,"TestPingServer: timeout",!1,ne)},1e4);fetch(O,{signal:be.signal}).then(ot=>{clearTimeout(ze),ot.ok?io(ce,"TestPingServer: ok",!0,ne):io(ce,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(ze),io(ce,"TestPingServer: error",!1,ne)})}function io(O,ne,ce,be,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),be(ce)}catch{}}function Ol(){this.g=new Fn}function ko(O,ne,ce){const be=ce||"";try{hf(O,function(ze,ot){let Ut=ze;u(ze)&&(Ut=Sr(ze)),ne.push(be+ot+"="+encodeURIComponent(Ut))})}catch(ze){throw ne.push(be+"type="+encodeURIComponent("_badmap")),ze}}function au(O){this.l=O.Ub||null,this.j=O.eb||!1}g(au,Pr),au.prototype.g=function(){return new pc(this.l,this.j)},au.prototype.i=function(O){return function(){return O}}({});function pc(O,ne){gt.call(this),this.D=O,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(pc,gt),e=pc.prototype,e.open=function(O,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ne,this.readyState=1,Mi(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ne.body=O),(this.D||l).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Mi(this)),this.g&&(this.readyState=3,Mi(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gf(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function gf(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ne=O.value?O.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!O.done}))&&(this.response=this.responseText+=ne)}O.done?jo(this):Mi(this),this.readyState==3&&gf(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,jo(this))},e.Qa=function(O){this.g&&(this.response=O,jo(this))},e.ga=function(){this.g&&jo(this)};function jo(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Mi(O)}e.setRequestHeader=function(O,ne){this.u.append(O,ne)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ne=this.h.entries();for(var ce=ne.next();!ce.done;)ce=ce.value,O.push(ce[0]+": "+ce[1]),ce=ne.next();return O.join(`\r
`)};function Mi(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function Dl(O){let ne="";return F(O,function(ce,be){ne+=be,ne+=":",ne+=ce,ne+=`\r
`}),ne}function ms(O,ne,ce){e:{for(be in ce){var be=!1;break e}be=!0}be||(ce=Dl(ce),typeof O=="string"?ce!=null&&encodeURIComponent(String(ce)):Vn(O,ne,ce))}function bn(O){gt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(bn,gt);var su=/^https?$/i,Pl=["POST","PUT"];e=bn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ne,ce,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ne=ne?ne.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fe.g(),this.v=this.o?As(this.o):As(Fe),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ne,String(O),!0),this.B=!1}catch(ot){xf(this,ot);return}if(O=ce||"",ce=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var ze in be)ce.set(ze,be[ze]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const ot of be.keys())ce.set(ot,be.get(ot));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(ce.keys()).find(ot=>ot.toLowerCase()=="content-type"),ze=l.FormData&&O instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Pl,ne,void 0))||be||ze||ce.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Ut]of ce)this.g.setRequestHeader(ot,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(O),this.u=!1}catch(ot){xf(this,ot)}};function xf(O,ne){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ne,O.m=5,Zu(O),cl(O)}function Zu(O){O.A||(O.A=!0,It(O,"complete"),It(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,It(this,"complete"),It(this,"abort"),cl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cl(this,!0)),bn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ed(this):this.bb())},e.bb=function(){ed(this)};function ed(O){if(O.h&&typeof i<"u"&&(!O.v[1]||ps(O)!=4||O.Z()!=2)){if(O.u&&ps(O)==4)Pt(O.Ea,0,O);else if(It(O,"readystatechange"),ps(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ce;if(!(ce=ne)){var be;if(be=Ut===0){var ze=String(O.D).match(wi)[1]||null;!ze&&l.self&&l.self.location&&(ze=l.self.location.protocol.slice(0,-1)),be=!su.test(ze?ze.toLowerCase():"")}ce=be}if(ce)It(O,"complete"),It(O,"success");else{O.m=6;try{var ot=2<ps(O)?O.g.statusText:""}catch{ot=""}O.l=ot+" ["+O.Z()+"]",Zu(O)}}finally{cl(O)}}}}function cl(O,ne){if(O.g){Ui(O);const ce=O.g,be=O.v[0]?()=>{}:null;O.g=null,O.v=null,ne||It(O,"ready");try{ce.onreadystatechange=be}catch{}}}function Ui(O){O.I&&(l.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function ps(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<ps(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ne=this.g.responseText;return O&&ne.indexOf(O)==0&&(ne=ne.substring(O.length)),$r(ne)}};function qh(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function iu(O){const ne={};O=(O.g&&2<=ps(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<O.length;be++){if(w(O[be]))continue;var ce=R(O[be]);const ze=ce[0];if(ce=ce[1],typeof ce!="string")continue;ce=ce.trim();const ot=ne[ze]||[];ne[ze]=ot,ot.push(ce)}E(ne,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(O,ne,ce){return ce&&ce.internalChannelParams&&ce.internalChannelParams[O]||ne}function ou(O){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,O),this.cb=Ci("retryDelaySeedMs",1e4,O),this.Wa=Ci("forwardChannelMaxRetries",2,O),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new hs(O&&O.concurrentRequestLimit),this.Da=new Ol,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ou.prototype,e.la=8,e.G=1,e.connect=function(O,ne,ce,be){bt(0),this.W=O,this.H=ne||{},ce&&be!==void 0&&(this.H.OSID=ce,this.H.OAID=be),this.F=this.X,this.I=Y(this,null,this.W),nA(this)};function gc(O){if(td(O),O.G==3){var ne=O.U++,ce=Ei(O.I);if(Vn(ce,"SID",O.K),Vn(ce,"RID",ne),Vn(ce,"TYPE","terminate"),lu(O,ce),ne=new dt(O,O.j,ne),ne.L=2,ne.v=nu(Ei(ce)),ce=!1,l.navigator&&l.navigator.sendBeacon)try{ce=l.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ce&&l.Image&&(new Image().src=ne.v,ce=!0),ce||(ne.g=fe(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),Gt(ne)}sA(O)}function rA(O){O.g&&(cu(O),O.g.cancel(),O.g=null)}function td(O){rA(O),O.u&&(l.clearTimeout(O.u),O.u=null),xc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&l.clearTimeout(O.s),O.s=null)}function nA(O){if(!ri(O.h)&&!O.s){O.s=!0;var ne=O.Ga;W||ee(),G||(W(),G=!0),K.add(ne,O),O.B=0}}function vf(O,ne){return Ps(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ne.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=xr(h(O.Ga,O,ne),sd(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new dt(this,this.j,O);let ot=this.o;if(this.S&&(ot?(ot=S(ot),L(ot,this.S)):ot=this.S),this.m!==null||this.O||(ze.H=ot,ot=null),this.P)e:{for(var ne=0,ce=0;ce<this.i.length;ce++){t:{var be=this.i[ce];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(ne+=be,4096<ne){ne=ce;break e}if(ne===4096||ce===this.i.length-1){ne=ce+1;break e}}ne=1e3}else ne=1e3;ne=nd(this,ze,ne),ce=Ei(this.I),Vn(ce,"RID",O),Vn(ce,"CVER",22),this.D&&Vn(ce,"X-HTTP-Session-Id",this.D),lu(this,ce),ot&&(this.O?ne="headers="+encodeURIComponent(String(Dl(ot)))+"&"+ne:this.m&&ms(ce,this.m,ot)),xa(this.h,ze),this.Ua&&Vn(ce,"TYPE","init"),this.P?(Vn(ce,"$req",ne),Vn(ce,"SID","null"),ze.T=!0,Ft(ze,ce,null)):Ft(ze,ce,ne),this.G=2}}else this.G==3&&(O?rd(this,O):this.i.length==0||ri(this.h)||rd(this))};function rd(O,ne){var ce;ne?ce=ne.l:ce=O.U++;const be=Ei(O.I);Vn(be,"SID",O.K),Vn(be,"RID",ce),Vn(be,"AID",O.T),lu(O,be),O.m&&O.o&&ms(be,O.m,O.o),ce=new dt(O,O.j,ce,O.B+1),O.m===null&&(ce.H=O.o),ne&&(O.i=ne.D.concat(O.i)),ne=nd(O,ce,1e3),ce.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,ce),Ft(ce,be,ne)}function lu(O,ne){O.H&&F(O.H,function(ce,be){Vn(ne,be,ce)}),O.l&&hf({},function(ce,be){Vn(ne,be,ce)})}function nd(O,ne,ce){ce=Math.min(O.i.length,ce);var be=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let ot=-1;for(;;){const Ut=["count="+ce];ot==-1?0<ce?(ot=ze[0].g,Ut.push("ofs="+ot)):ot=0:Ut.push("ofs="+ot);let Or=!0;for(let yn=0;yn<ce;yn++){let Xr=ze[yn].g;const zn=ze[yn].map;if(Xr-=ot,0>Xr)ot=Math.max(0,ze[yn].g-100),Or=!1;else try{ko(zn,Ut,"req"+Xr+"_")}catch{be&&be(zn)}}if(Or){be=Ut.join("&");break e}}}return O=O.i.splice(0,ce),ne.D=O,be}function aA(O){if(!O.g&&!O.u){O.Y=1;var ne=O.Fa;W||ee(),G||(W(),G=!0),K.add(ne,O),O.v=0}}function ad(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=xr(h(O.Fa,O),sd(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,Wh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=xr(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),rA(this),Wh(this))};function cu(O){O.A!=null&&(l.clearTimeout(O.A),O.A=null)}function Wh(O){O.g=new dt(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ne=Ei(O.qa);Vn(ne,"RID","rpc"),Vn(ne,"SID",O.K),Vn(ne,"AID",O.T),Vn(ne,"CI",O.F?"0":"1"),!O.F&&O.ja&&Vn(ne,"TO",O.ja),Vn(ne,"TYPE","xmlhttp"),lu(O,ne),O.m&&O.o&&ms(ne,O.m,O.o),O.L&&(O.g.I=O.L);var ce=O.g;O=O.ia,ce.L=1,ce.v=nu(Ei(ne)),ce.m=null,ce.P=!0,$t(ce,O)}e.Za=function(){this.C!=null&&(this.C=null,rA(this),ad(this),bt(19))};function xc(O){O.C!=null&&(l.clearTimeout(O.C),O.C=null)}function uu(O,ne){var ce=null;if(O.g==ne){xc(O),cu(O),O.g=null;var be=2}else if(yi(O.h,ne))ce=ne.D,ni(O.h,ne),be=1;else return;if(O.G!=0){if(ne.o)if(be==1){ce=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var ze=O.B;be=mt(),It(be,new nr(be,ce)),nA(O)}else aA(O);else if(ze=ne.s,ze==3||ze==0&&0<ne.X||!(be==1&&vf(O,ne)||be==2&&ad(O)))switch(ce&&0<ce.length&&(ne=O.h,ne.i=ne.i.concat(ce)),ze){case 1:Qi(O,5);break;case 4:Qi(O,10);break;case 3:Qi(O,6);break;default:Qi(O,2)}}}function sd(O,ne){let ce=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(ce*=2),ce*ne}function Qi(O,ne){if(O.j.info("Error code "+ne),ne==2){var ce=h(O.fb,O),be=O.Xa;const ze=!be;be=new On(be||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tu(be,"https"),nu(be),ze?Li(be.toString(),ce):So(be.toString(),ce)}else bt(2);O.G=0,O.l&&O.l.sa(ne),sA(O),td(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function sA(O){if(O.G=0,O.ka=[],O.l){const ne=Zd(O.h);(ne.length!=0||O.i.length!=0)&&(v(O.ka,ne),v(O.ka,O.i),O.h.i.length=0,x(O.i),O.i.length=0),O.l.ra()}}function Y(O,ne,ce){var be=ce instanceof On?Ei(ce):new On(ce);if(be.g!="")ne&&(be.g=ne+"."+be.g),ru(be,be.s);else{var ze=l.location;be=ze.protocol,ne=ne?ne+"."+ze.hostname:ze.hostname,ze=+ze.port;var ot=new On(null);be&&tu(ot,be),ne&&(ot.g=ne),ze&&ru(ot,ze),ce&&(ot.l=ce),be=ot}return ce=O.D,ne=O.ya,ce&&ne&&Vn(be,ce,ne),Vn(be,"VER",O.la),lu(O,be),be}function fe(O,ne,ce){if(ne&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=O.Ca&&!O.pa?new bn(new au({eb:ce})):new bn(O.pa),ne.Ha(O.J),ne}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function De(){}e=De.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Me(){}Me.prototype.g=function(O,ne){return new Ke(O,ne)};function Ke(O,ne){gt.call(this),this.g=new ou(ne),this.l=O,this.h=ne&&ne.messageUrlParams||null,O=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ne.messageContentType:O={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(O?O["X-WebChannel-Client-Profile"]=ne.va:O={"X-WebChannel-Client-Profile":ne.va}),this.g.S=O,(O=ne&&ne.Sb)&&!w(O)&&(this.g.m=O),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!w(ne)&&(this.g.D=ne,O=this.h,O!==null&&ne in O&&(O=this.h,ne in O&&delete O[ne])),this.j=new Zt(this)}g(Ke,gt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){gc(this.g)},Ke.prototype.o=function(O){var ne=this.g;if(typeof O=="string"){var ce={};ce.__data__=O,O=ce}else this.u&&(ce={},ce.__data__=Sr(O),O=ce);ne.i.push(new No(ne.Ya++,O)),ne.G==3&&nA(ne)},Ke.prototype.N=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Ke.aa.N.call(this)};function yt(O){ja.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ne=O.__sm__;if(ne){e:{for(const ce in ne){O=ce;break e}O=void 0}(this.i=O)&&(O=this.i,ne=ne!==null&&O in ne?ne[O]:void 0),this.data=ne}else this.data=O}g(yt,ja);function Lt(){rn.call(this),this.status=1}g(Lt,rn);function Zt(O){this.g=O}g(Zt,De),Zt.prototype.ua=function(){It(this.g,"a")},Zt.prototype.ta=function(O){It(this.g,new yt(O))},Zt.prototype.sa=function(O){It(this.g,new Lt)},Zt.prototype.ra=function(){It(this.g,"b")},Me.prototype.createWebChannel=Me.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,HJ=function(){return new Me},QJ=function(){return mt()},UJ=gr,R6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,o5=we,Se.COMPLETE="complete",MJ=Se,mn.EventType=la,la.OPEN="a",la.CLOSE="b",la.ERROR="c",la.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Oy=mn,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,LJ=bn}).apply(typeof _C<"u"?_C:typeof self<"u"?self:typeof window<"u"?window:{});const L9="@firebase/firestore",M9="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};$o.UNAUTHENTICATED=new $o(null),$o.GOOGLE_CREDENTIALS=new $o("google-credentials-uid"),$o.FIRST_PARTY=new $o("first-party-uid"),$o.MOCK_USER=new $o("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=new MD("@firebase/firestore");function tv(){return dg.logLevel}function ur(e,...t){if(dg.logLevel<=kn.DEBUG){const r=t.map(XD);dg.debug(`Firestore (${P1}): ${e}`,...r)}}function yh(e,...t){if(dg.logLevel<=kn.ERROR){const r=t.map(XD);dg.error(`Firestore (${P1}): ${e}`,...r)}}function Ag(e,...t){if(dg.logLevel<=kn.WARN){const r=t.map(XD);dg.warn(`Firestore (${P1}): ${e}`,...r)}}function XD(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,VJ(e,n,r)}function VJ(e,t,r){let n=`FIRESTORE (${P1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw yh(n),new Error(n)}function ia(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||VJ(t,a,n)}function tn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Gd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class $J{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r($o.UNAUTHENTICATED))}shutdown(){}}class mge{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class pge{constructor(t){this.t=t,this.currentUser=$o.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ia(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new ch;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ch,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{ur("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ur("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ch)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(ur("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ia(typeof n.accessToken=="string",31837,{l:n}),new zJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ia(t===null||typeof t=="string",2055,{h:t}),new $o(t)}}class gge{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=$o.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xge{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new gge(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r($o.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U9{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vge{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){ia(this.o===void 0,3512);const n=s=>{s.error!=null&&ur("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,ur("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{ur("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):ur("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U9(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ia(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new U9(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bge(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=bge(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function jn(e,t){return e<t?-1:e>t?1:0}function L6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return U3(a)===U3(s)?jn(a,s):U3(a)?1:-1}return jn(e.length,t.length)}const yge=55296,wge=57343;function U3(e){const t=e.charCodeAt(0);return t>=yge&&t<=wge}function Xv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="__name__";class PA{constructor(t,r,n){r===void 0?r=0:r>t.length&&zr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&zr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return PA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof PA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=PA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return jn(t.length,r.length)}static compareSegments(t,r){const n=PA.isNumericId(t),a=PA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?PA.extractNumericId(t).compare(PA.extractNumericId(r)):L6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return sm.fromString(t.substring(4,t.length-2))}}class _a extends PA{construct(t,r,n){return new _a(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new _a(r)}static emptyPath(){return new _a([])}}const Ege=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends PA{construct(t,r,n){return new Ji(t,r,n)}static isValidIdentifier(t){return Ege.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Q9}static keyField(){return new Ji([Q9])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new Wt(Nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Wt(Nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new Wt(Nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ji(r)}static emptyPath(){return new Ji([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.path=t}static fromPath(t){return new yr(_a.fromString(t))}static fromName(t){return new yr(_a.fromString(t).popFirst(5))}static empty(){return new yr(_a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_a.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return _a.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yr(new _a(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(e,t,r){if(!r)throw new Wt(Nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KJ(e,t,r,n){if(t===!0&&n===!0)throw new Wt(Nt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function H9(e){if(!yr.isDocumentKey(e))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function V9(e){if(yr.isDocumentKey(e))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qJ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function d4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":zr(12329,{type:typeof e})}function rl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(Nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=d4(e);throw new Wt(Nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Cge(e,t){if(t<=0)throw new Wt(Nt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(e,t){const r={typeString:e};return t&&(r.value=t),r}function R2(e,t){if(!qJ(e))throw new Wt(Nt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(Nt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=-62135596800,$9=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(t){return ir.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*$9);return new ir(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<z9)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(Nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$9}_compareTo(t){return this.seconds===t.seconds?jn(this.nanoseconds,t.nanoseconds):jn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(R2(t,ir._jsonSchema))return new ir(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-z9;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:gi("string",ir._jsonSchemaVersion),seconds:gi("number"),nanoseconds:gi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{static fromTimestamp(t){return new Jr(t)}static min(){return new Jr(new ir(0,0))}static max(){return new Jr(new ir(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=-1;function Nge(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Jr.fromTimestamp(n===1e9?new ir(r+1,0):new ir(r,n));return new xm(a,yr.empty(),t)}function _ge(e){return new xm(e.readTime,e.key,Pw)}class xm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new xm(Jr.min(),yr.empty(),Pw)}static max(){return new xm(Jr.max(),yr.empty(),Pw)}}function Sge(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=yr.comparator(e.documentKey,t.documentKey),r!==0?r:jn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kge="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jge{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(e){if(e.code!==Nt.FAILED_PRECONDITION||e.message!==kge)throw e;ur("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&zr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.reject(r)}static resolve(t){return new Dt((r,n)=>{r(t)})}static reject(t){return new Dt((r,n)=>{n(t)})}static waitFor(t){return new Dt((r,n)=>{let a=0,s=0,i=!1;t.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Dt.resolve(!1);for(const n of t)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Dt((n,a)=>{const s=t.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Dt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Bge(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function L1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}A4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=-1;function f4(e){return e==null}function Z5(e){return e===0&&1/e==-1/0}function Tge(e){return typeof e=="number"&&Number.isInteger(e)&&!Z5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WJ="";function Ige(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=G9(t)),t=Fge(e.get(r),t);return G9(t)}function Fge(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case WJ:r+="";break;default:r+=s}}return r}function G9(e){return e+WJ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Mm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function XJ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,r){this.comparator=t,this.root=r||vo.EMPTY}insert(t,r){return new ls(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(t){return new ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new SC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new SC(this.root,t,this.comparator,!1)}getReverseIterator(){return new SC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new SC(this.root,t,this.comparator,!0)}}class SC{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class vo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??vo.RED,this.left=a??vo.EMPTY,this.right=s??vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new vo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return vo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return vo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zr(27949);return t+(this.isRed()?0:1)}}vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1;vo.EMPTY=new class{constructor(){this.size=0}get key(){throw zr(57766)}get value(){throw zr(16141)}get color(){throw zr(16727)}get left(){throw zr(29726)}get right(){throw zr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new vo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.comparator=t,this.data=new ls(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new q9(this.data.getIterator())}getIteratorFrom(t){return new q9(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ii)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ii(this.comparator);return r.data=t,r}}class q9{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t){this.fields=t,t.sort(Ji.comparator)}static empty(){return new Hc([])}unionWith(t){let r=new Ii(Ji.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Hc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Xv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new YJ("Invalid base64 string: "+s):s}}(t);return new ro(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new ro(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ro.EMPTY_BYTE_STRING=new ro("");const Oge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vm(e){if(ia(!!e,39018),typeof e=="string"){let t=0;const r=Oge.exec(e);if(ia(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ks(e.seconds),nanos:Ks(e.nanos)}}function Ks(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function bm(e){return typeof e=="string"?ro.fromBase64String(e):ro.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ="server_timestamp",ZJ="__type__",eZ="__previous_value__",tZ="__local_write_time__";function h4(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[ZJ])==null?void 0:n.stringValue)===JJ}function m4(e){const t=e.mapValue.fields[eZ];return h4(t)?m4(t):t}function Rw(e){const t=vm(e.mapValue.fields[tZ].timestampValue);return new ir(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(t,r,n,a,s,i,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const e_="(default)";class Yv{constructor(t,r){this.projectId=t,this.database=r||e_}static empty(){return new Yv("","")}get isDefaultDatabase(){return this.database===e_}isEqual(t){return t instanceof Yv&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rZ="__type__",Pge="__max__",kC={mapValue:{}},nZ="__vector__",t_="value";function ym(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?h4(e)?4:Lge(e)?9007199254740991:Rge(e)?10:11:zr(28295,{value:e})}function af(e,t){if(e===t)return!0;const r=ym(e);if(r!==ym(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rw(e).isEqual(Rw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=vm(a.timestampValue),l=vm(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return bm(a.bytesValue).isEqual(bm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Ks(a.geoPointValue.latitude)===Ks(s.geoPointValue.latitude)&&Ks(a.geoPointValue.longitude)===Ks(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ks(a.integerValue)===Ks(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Ks(a.doubleValue),l=Ks(s.doubleValue);return i===l?Z5(i)===Z5(l):isNaN(i)&&isNaN(l)}return!1}(e,t);case 9:return Xv(e.arrayValue.values||[],t.arrayValue.values||[],af);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(K9(i)!==K9(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!af(i[c],l[c])))return!1;return!0}(e,t);default:return zr(52216,{left:e})}}function Lw(e,t){return(e.values||[]).find(r=>af(r,t))!==void 0}function Jv(e,t){if(e===t)return 0;const r=ym(e),n=ym(t);if(r!==n)return jn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return jn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const l=Ks(s.integerValue||s.doubleValue),c=Ks(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return W9(e.timestampValue,t.timestampValue);case 4:return W9(Rw(e),Rw(t));case 5:return L6(e.stringValue,t.stringValue);case 6:return function(s,i){const l=bm(s),c=bm(i);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=jn(l[u],c[u]);if(d!==0)return d}return jn(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const l=jn(Ks(s.latitude),Ks(i.latitude));return l!==0?l:jn(Ks(s.longitude),Ks(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return X9(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,m,g,x;const l=s.fields||{},c=i.fields||{},u=(h=l[t_])==null?void 0:h.arrayValue,d=(m=c[t_])==null?void 0:m.arrayValue,f=jn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:X9(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===kC.mapValue&&i===kC.mapValue)return 0;if(s===kC.mapValue)return 1;if(i===kC.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=L6(c[f],d[f]);if(h!==0)return h;const m=Jv(l[c[f]],u[d[f]]);if(m!==0)return m}return jn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw zr(23264,{he:r})}}function W9(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return jn(e,t);const r=vm(e),n=vm(t),a=jn(r.seconds,n.seconds);return a!==0?a:jn(r.nanos,n.nanos)}function X9(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Jv(r[a],n[a]);if(s)return s}return jn(r.length,n.length)}function Zv(e){return M6(e)}function M6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=vm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return bm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return yr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=M6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${M6(r.fields[i])}`;return a+"}"}(e.mapValue):zr(61005,{value:e})}function l5(e){switch(ym(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=m4(e);return t?16+l5(t):16;case 5:return 2*e.stringValue.length;case 6:return bm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+l5(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Mm(n.fields,(s,i)=>{a+=s.length+l5(i)}),a}(e.mapValue);default:throw zr(13486,{value:e})}}function r_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function U6(e){return!!e&&"integerValue"in e}function JD(e){return!!e&&"arrayValue"in e}function Y9(e){return!!e&&"nullValue"in e}function J9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function c5(e){return!!e&&"mapValue"in e}function Rge(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[rZ])==null?void 0:n.stringValue)===nZ}function nw(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Mm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=nw(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=nw(e.arrayValue.values[r]);return t}return{...e}}function Lge(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Pge}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t){this.value=t}static empty(){return new Zl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!c5(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=nw(r)}setAll(t){let r=Ji.emptyPath(),n={},a=[];t.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=nw(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());c5(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return af(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];c5(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Mm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Zl(nw(this.value))}}function aZ(e){const t=[];return Mm(e.fields,(r,n)=>{const a=new Ji([r]);if(c5(n)){const s=aZ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Hc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,r,n,a,s,i,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(t){return new Wo(t,0,Jr.min(),Jr.min(),Jr.min(),Zl.empty(),0)}static newFoundDocument(t,r,n,a){return new Wo(t,1,r,Jr.min(),n,a,0)}static newNoDocument(t,r){return new Wo(t,2,r,Jr.min(),Jr.min(),Zl.empty(),0)}static newUnknownDocument(t,r){return new Wo(t,3,r,Jr.min(),Jr.min(),Zl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Jr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Zl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Wo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Wo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t,r){this.position=t,this.inclusive=r}}function Z9(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=yr.comparator(yr.fromName(i.referenceValue),r.key):n=Jv(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function eQ(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!af(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(t,r="asc"){this.field=t,this.dir=r}}function Mge(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{}class mi extends sZ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new Qge(t,r,n):r==="array-contains"?new zge(t,n):r==="in"?new $ge(t,n):r==="not-in"?new Gge(t,n):r==="array-contains-any"?new Kge(t,n):new mi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new Hge(t,n):new Vge(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Jv(r,this.value)):r!==null&&ym(this.value)===ym(r)&&this.matchesComparison(Jv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vd extends sZ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Vd(t,r)}matches(t){return iZ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iZ(e){return e.op==="and"}function oZ(e){return Uge(e)&&iZ(e)}function Uge(e){for(const t of e.filters)if(t instanceof Vd)return!1;return!0}function Q6(e){if(e instanceof mi)return e.field.canonicalString()+e.op.toString()+Zv(e.value);if(oZ(e))return e.filters.map(t=>Q6(t)).join(",");{const t=e.filters.map(r=>Q6(r)).join(",");return`${e.op}(${t})`}}function lZ(e,t){return e instanceof mi?function(n,a){return a instanceof mi&&n.op===a.op&&n.field.isEqual(a.field)&&af(n.value,a.value)}(e,t):e instanceof Vd?function(n,a){return a instanceof Vd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&lZ(i,a.filters[l]),!0):!1}(e,t):void zr(19439)}function cZ(e){return e instanceof mi?function(r){return`${r.field.canonicalString()} ${r.op} ${Zv(r.value)}`}(e):e instanceof Vd?function(r){return r.op.toString()+" {"+r.getFilters().map(cZ).join(" ,")+"}"}(e):"Filter"}class Qge extends mi{constructor(t,r,n){super(t,r,n),this.key=yr.fromName(n.referenceValue)}matches(t){const r=yr.comparator(t.key,this.key);return this.matchesComparison(r)}}class Hge extends mi{constructor(t,r){super(t,"in",r),this.keys=uZ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Vge extends mi{constructor(t,r){super(t,"not-in",r),this.keys=uZ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function uZ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>yr.fromName(n.referenceValue))}class zge extends mi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return JD(r)&&Lw(r.arrayValue,this.value)}}class $ge extends mi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Lw(this.value.arrayValue,r)}}class Gge extends mi{constructor(t,r){super(t,"not-in",r)}matches(t){if(Lw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Lw(this.value.arrayValue,r)}}class Kge extends mi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!JD(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Lw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{constructor(t,r=null,n=[],a=[],s=null,i=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.Te=null}}function tQ(e,t=null,r=[],n=[],a=null,s=null,i=null){return new qge(e,t,r,n,a,s,i)}function ZD(e){const t=tn(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>Q6(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),f4(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>Zv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>Zv(n)).join(",")),t.Te=r}return t.Te}function eP(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Mge(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!lZ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!eQ(e.startAt,t.startAt)&&eQ(e.endAt,t.endAt)}function H6(e){return yr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(t,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Wge(e,t,r,n,a,s,i,l){return new Og(e,t,r,n,a,s,i,l)}function p4(e){return new Og(e)}function rQ(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function tP(e){return e.collectionGroup!==null}function kv(e){const t=tn(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ii(Ji.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Mw(s,n))}),r.has(Ji.keyField().canonicalString())||t.Ie.push(new Mw(Ji.keyField(),n))}return t.Ie}function JA(e){const t=tn(e);return t.Ee||(t.Ee=Xge(t,kv(e))),t.Ee}function Xge(e,t){if(e.limitType==="F")return tQ(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Mw(a.field,s)});const r=e.endAt?new e1(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new e1(e.startAt.position,e.startAt.inclusive):null;return tQ(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function V6(e,t){const r=e.filters.concat([t]);return new Og(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function n_(e,t,r){return new Og(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function g4(e,t){return eP(JA(e),JA(t))&&e.limitType===t.limitType}function dZ(e){return`${ZD(JA(e))}|lt:${e.limitType}`}function rv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>cZ(a)).join(", ")}]`),f4(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Zv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Zv(a)).join(",")),`Target(${n})`}(JA(e))}; limitType=${e.limitType})`}function x4(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):yr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of kv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=Z9(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,kv(n),a)||n.endAt&&!function(i,l,c){const u=Z9(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,kv(n),a))}(e,t)}function Yge(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function AZ(e){return(t,r)=>{let n=!1;for(const a of kv(e)){const s=Jge(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Jge(e,t,r){const n=e.field.isKeyField()?yr.comparator(t.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?Jv(c,u):zr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return zr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Mm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return XJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zge=new ls(yr.comparator);function wh(){return Zge}const fZ=new ls(yr.comparator);function Dy(...e){let t=fZ;for(const r of e)t=t.insert(r.key,r);return t}function hZ(e){let t=fZ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Rp(){return aw()}function mZ(){return aw()}function aw(){return new Dg(e=>e.toString(),(e,t)=>e.isEqual(t))}const exe=new ls(yr.comparator),txe=new Ii(yr.comparator);function Bn(...e){let t=txe;for(const r of e)t=t.add(r);return t}const rxe=new Ii(jn);function nxe(){return rxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Z5(t)?"-0":t}}function pZ(e){return{integerValue:""+e}}function axe(e,t){return Tge(t)?pZ(t):rP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this._=void 0}}function sxe(e,t,r){return e instanceof Uw?function(a,s){const i={fields:{[ZJ]:{stringValue:JJ},[tZ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&h4(s)&&(s=m4(s)),s&&(i.fields[eZ]=s),{mapValue:i}}(r,t):e instanceof t1?xZ(e,t):e instanceof Qw?vZ(e,t):function(a,s){const i=gZ(a,s),l=nQ(i)+nQ(a.Ae);return U6(i)&&U6(a.Ae)?pZ(l):rP(a.serializer,l)}(e,t)}function ixe(e,t,r){return e instanceof t1?xZ(e,t):e instanceof Qw?vZ(e,t):r}function gZ(e,t){return e instanceof a_?function(n){return U6(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Uw extends v4{}class t1 extends v4{constructor(t){super(),this.elements=t}}function xZ(e,t){const r=bZ(t);for(const n of e.elements)r.some(a=>af(a,n))||r.push(n);return{arrayValue:{values:r}}}class Qw extends v4{constructor(t){super(),this.elements=t}}function vZ(e,t){let r=bZ(t);for(const n of e.elements)r=r.filter(a=>!af(a,n));return{arrayValue:{values:r}}}class a_ extends v4{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function nQ(e){return Ks(e.integerValue||e.doubleValue)}function bZ(e){return JD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(t,r){this.field=t,this.transform=r}}function oxe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof t1&&a instanceof t1||n instanceof Qw&&a instanceof Qw?Xv(n.elements,a.elements,af):n instanceof a_&&a instanceof a_?af(n.Ae,a.Ae):n instanceof Uw&&a instanceof Uw}(e.transform,t.transform)}class lxe{constructor(t,r){this.version=t,this.transformResults=r}}class El{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new El}static exists(t){return new El(void 0,t)}static updateTime(t){return new El(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function u5(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class b4{}function wZ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new y4(e.key,El.none()):new L2(e.key,e.data,El.none());{const r=e.data,n=Zl.empty();let a=new Ii(Ji.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Um(e.key,n,new Hc(a.toArray()),El.none())}}function cxe(e,t,r){e instanceof L2?function(a,s,i){const l=a.value.clone(),c=sQ(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):e instanceof Um?function(a,s,i){if(!u5(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=sQ(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(EZ(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function sw(e,t,r,n){return e instanceof L2?function(s,i,l,c){if(!u5(s.precondition,i))return l;const u=s.value.clone(),d=iQ(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Um?function(s,i,l,c){if(!u5(s.precondition,i))return l;const u=iQ(s.fieldTransforms,c,i),d=i.data;return d.setAll(EZ(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,l){return u5(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(e,t,r)}function uxe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=gZ(n.transform,a||null);s!=null&&(r===null&&(r=Zl.empty()),r.set(n.field,s))}return r||null}function aQ(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Xv(n,a,(s,i)=>oxe(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class L2 extends b4{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Um extends b4{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EZ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function sQ(e,t,r){const n=new Map;ia(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,l=t.data.field(s.field);n.set(s.field,ixe(i,l,r[a]))}return n}function iQ(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,sxe(s,i,t))}return n}class y4 extends b4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dxe extends b4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&cxe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=sw(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=sw(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=mZ();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=wZ(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Jr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Bn())}isEqual(t){return this.batchId===t.batchId&&Xv(this.mutations,t.mutations,(r,n)=>aQ(r,n))&&Xv(this.baseMutations,t.baseMutations,(r,n)=>aQ(r,n))}}class nP{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){ia(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return exe}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new nP(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fxe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci,Mn;function mxe(e){switch(e){case Nt.OK:return zr(64938);case Nt.CANCELLED:case Nt.UNKNOWN:case Nt.DEADLINE_EXCEEDED:case Nt.RESOURCE_EXHAUSTED:case Nt.INTERNAL:case Nt.UNAVAILABLE:case Nt.UNAUTHENTICATED:return!1;case Nt.INVALID_ARGUMENT:case Nt.NOT_FOUND:case Nt.ALREADY_EXISTS:case Nt.PERMISSION_DENIED:case Nt.FAILED_PRECONDITION:case Nt.ABORTED:case Nt.OUT_OF_RANGE:case Nt.UNIMPLEMENTED:case Nt.DATA_LOSS:return!0;default:return zr(15467,{code:e})}}function CZ(e){if(e===void 0)return yh("GRPC error has no .code"),Nt.UNKNOWN;switch(e){case ci.OK:return Nt.OK;case ci.CANCELLED:return Nt.CANCELLED;case ci.UNKNOWN:return Nt.UNKNOWN;case ci.DEADLINE_EXCEEDED:return Nt.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return Nt.RESOURCE_EXHAUSTED;case ci.INTERNAL:return Nt.INTERNAL;case ci.UNAVAILABLE:return Nt.UNAVAILABLE;case ci.UNAUTHENTICATED:return Nt.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return Nt.INVALID_ARGUMENT;case ci.NOT_FOUND:return Nt.NOT_FOUND;case ci.ALREADY_EXISTS:return Nt.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return Nt.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return Nt.FAILED_PRECONDITION;case ci.ABORTED:return Nt.ABORTED;case ci.OUT_OF_RANGE:return Nt.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return Nt.UNIMPLEMENTED;case ci.DATA_LOSS:return Nt.DATA_LOSS;default:return zr(39323,{code:e})}}(Mn=ci||(ci={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pxe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gxe=new sm([4294967295,4294967295],0);function oQ(e){const t=pxe().encode(e),r=new RJ;return r.update(t),new Uint8Array(r.digest())}function lQ(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new sm([r,n],0),new sm([a,s],0)]}class aP{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Py(`Invalid padding: ${r}`);if(n<0)throw new Py(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Py(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Py(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=sm.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(sm.fromNumber(n)));return a.compare(gxe)===1&&(a=new sm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=oQ(t),[n,a]=lQ(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new aP(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(t){if(this.ge===0)return;const r=oQ(t),[n,a]=lQ(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Py extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,M2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new w4(Jr.min(),a,new ls(jn),wh(),Bn())}}class M2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new M2(n,r,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class NZ{constructor(t,r){this.targetId=t,this.Ce=r}}class _Z{constructor(t,r,n=ro.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class cQ{constructor(){this.ve=0,this.Fe=uQ(),this.Me=ro.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bn(),r=Bn(),n=Bn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:zr(38017,{changeType:s})}}),new M2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=uQ()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ia(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xxe{constructor(t){this.Ge=t,this.ze=new Map,this.je=wh(),this.Je=jC(),this.He=jC(),this.Ye=new ls(jn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:zr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(H6(s))if(n===0){const i=new yr(s.path);this.et(r,i,Wo.newNoDocument(i,Jr.min()))}else ia(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const l=this.ut(t),c=l?this.ct(l,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=bm(n).toUint8Array()}catch(c){if(c instanceof YJ)return Ag("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new aP(i,a,s)}catch(c){return Ag(c instanceof Py?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const l=this.ot(i);if(l){if(s.current&&H6(l.target)){const c=new yr(l.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,Wo.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Bn();this.He.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new w4(t,r,this.Ye,this.je,n);return this.je=wh(),this.Je=jC(),this.He=jC(),this.Ye=new ls(jn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new cQ,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Ii(jn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Ii(jn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||ur("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new cQ),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function jC(){return new ls(yr.comparator)}function uQ(){return new ls(yr.comparator)}const vxe={asc:"ASCENDING",desc:"DESCENDING"},bxe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yxe={and:"AND",or:"OR"};class wxe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function z6(e,t){return e.useProto3Json||f4(t)?t:{value:t}}function s_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SZ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Exe(e,t){return s_(e,t.toTimestamp())}function ZA(e){return ia(!!e,49232),Jr.fromTimestamp(function(r){const n=vm(r);return new ir(n.seconds,n.nanos)}(e))}function sP(e,t){return $6(e,t).canonicalString()}function $6(e,t){const r=function(a){return new _a(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function kZ(e){const t=_a.fromString(e);return ia(FZ(t),10190,{key:t.toString()}),t}function G6(e,t){return sP(e.databaseId,t.path)}function Q3(e,t){const r=kZ(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(Nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new yr(BZ(r))}function jZ(e,t){return sP(e.databaseId,t)}function Cxe(e){const t=kZ(e);return t.length===4?_a.emptyPath():BZ(t)}function K6(e){return new _a(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function BZ(e){return ia(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function dQ(e,t,r){return{name:G6(e,t),fields:r.value.mapValue.fields}}function Nxe(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:zr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ia(d===void 0||typeof d=="string",58123),ro.fromBase64String(d||"")):(ia(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ro.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Nt.UNKNOWN:CZ(u.code);return new Wt(d,u.message||"")}(i);r=new _Z(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=Q3(e,n.document.name),s=ZA(n.document.updateTime),i=n.document.createTime?ZA(n.document.createTime):Jr.min(),l=new Zl({mapValue:{fields:n.document.fields}}),c=Wo.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new d5(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=Q3(e,n.document),s=n.readTime?ZA(n.readTime):Jr.min(),i=Wo.newNoDocument(a,s),l=n.removedTargetIds||[];r=new d5([],l,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=Q3(e,n.document),s=n.removedTargetIds||[];r=new d5([],s,a,null)}else{if(!("filter"in t))return zr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new hxe(a,s),l=n.targetId;r=new NZ(l,i)}}return r}function _xe(e,t){let r;if(t instanceof L2)r={update:dQ(e,t.key,t.value)};else if(t instanceof y4)r={delete:G6(e,t.key)};else if(t instanceof Um)r={update:dQ(e,t.key,t.data),updateMask:Dxe(t.fieldMask)};else{if(!(t instanceof dxe))return zr(16599,{Vt:t.type});r={verify:G6(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof Uw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof t1)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qw)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof a_)return{fieldPath:i.field.canonicalString(),increment:l.Ae};throw zr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Exe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:zr(27497)}(e,t.precondition)),r}function Sxe(e,t){return e&&e.length>0?(ia(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?ZA(a.updateTime):ZA(s);return i.isEqual(Jr.min())&&(i=ZA(s)),new lxe(i,a.transformResults||[])}(r,t))):[]}function kxe(e,t){return{documents:[jZ(e,t.path)]}}function jxe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=jZ(e,a);const s=function(u){if(u.length!==0)return IZ(Vd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:nv(h.field),direction:Ixe(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const l=z6(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Bxe(e){let t=Cxe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){ia(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=TZ(f);return h instanceof Vd&&oZ(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new Mw(av(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,f4(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new e1(m,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new e1(m,h)}(r.endAt)),Wge(t,a,i,s,l,"F",c,u)}function Txe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function TZ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=av(r.unaryFilter.field);return mi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=av(r.unaryFilter.field);return mi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=av(r.unaryFilter.field);return mi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=av(r.unaryFilter.field);return mi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zr(61313);default:return zr(60726)}}(e):e.fieldFilter!==void 0?function(r){return mi.create(av(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zr(58110);default:return zr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Vd.create(r.compositeFilter.filters.map(n=>TZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return zr(1026)}}(r.compositeFilter.op))}(e):zr(30097,{filter:e})}function Ixe(e){return vxe[e]}function Fxe(e){return bxe[e]}function Oxe(e){return yxe[e]}function nv(e){return{fieldPath:e.canonicalString()}}function av(e){return Ji.fromServerFormat(e.fieldPath)}function IZ(e){return e instanceof mi?function(r){if(r.op==="=="){if(J9(r.value))return{unaryFilter:{field:nv(r.field),op:"IS_NAN"}};if(Y9(r.value))return{unaryFilter:{field:nv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(J9(r.value))return{unaryFilter:{field:nv(r.field),op:"IS_NOT_NAN"}};if(Y9(r.value))return{unaryFilter:{field:nv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nv(r.field),op:Fxe(r.op),value:r.value}}}(e):e instanceof Vd?function(r){const n=r.getFilters().map(a=>IZ(a));return n.length===1?n[0]:{compositeFilter:{op:Oxe(r.op),filters:n}}}(e):zr(54877,{filter:e})}function Dxe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function FZ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t,r,n,a,s=Jr.min(),i=Jr.min(),l=ro.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new W0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new W0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new W0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new W0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pxe{constructor(t){this.yt=t}}function Rxe(e){const t=Bxe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?n_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lxe{constructor(){this.Cn=new Mxe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Dt.resolve()}getCollectionParents(t,r){return Dt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Dt.resolve()}deleteFieldIndex(t,r){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,r){return Dt.resolve()}getDocumentsMatchingTarget(t,r){return Dt.resolve(null)}getIndexType(t,r){return Dt.resolve(0)}getFieldIndexes(t,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,r){return Dt.resolve(xm.min())}getMinOffsetFromCollectionGroup(t,r){return Dt.resolve(xm.min())}updateCollectionGroup(t,r,n){return Dt.resolve()}updateIndexEntries(t,r){return Dt.resolve()}}class Mxe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Ii(_a.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Ii(_a.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OZ=41943040;class ql{static withCacheSize(t){return new ql(t,ql.DEFAULT_COLLECTION_PERCENTILE,ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ql.DEFAULT_COLLECTION_PERCENTILE=10,ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ql.DEFAULT=new ql(OZ,ql.DEFAULT_COLLECTION_PERCENTILE,ql.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ql.DISABLED=new ql(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new r1(0)}static cr(){return new r1(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ="LruGarbageCollector",Uxe=1048576;function hQ([e,t],[r,n]){const a=jn(e,r);return a===0?jn(t,n):a}class Qxe{constructor(t){this.Ir=t,this.buffer=new Ii(hQ),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();hQ(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Hxe{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ur(fQ,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){L1(r)?ur(fQ,"Ignoring IndexedDB error during garbage collection: ",r):await R1(r)}await this.Vr(3e5)})}}class Vxe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Dt.resolve(A4.ce);const n=new Qxe(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(ur("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(AQ)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(ur("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AQ):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ur("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),tv()<=kn.DEBUG&&ur("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function zxe(e,t){return new Vxe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $xe{constructor(){this.changes=new Dg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Wo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gxe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&sw(n.mutation,a,Hc.empty(),ir.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Bn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Bn()){const a=Rp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Dy();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Rp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Bn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(t,r,n,a){let s=wh();const i=aw(),l=function(){return aw()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Um)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),sw(d.mutation,u,d.mutation.getFieldMask(),ir.now())):i.set(u.key,Hc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>l.set(u,new Gxe(d,i.get(u)??null))),l))}recalculateAndSaveOverlays(t,r){const n=aw();let a=new ls((i,l)=>i-l),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Hc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Bn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=mZ();d.forEach(h=>{if(!s.has(h)){const m=wZ(r.get(h),n.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Dt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return yr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):tP(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Dt.resolve(Rp());let l=Pw,c=s;return i.next(u=>Dt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Bn())).next(d=>({batchId:l,changes:hZ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new yr(r)).next(n=>{let a=Dy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Dy();return this.indexManager.getCollectionParents(t,s).next(l=>Dt.forEach(l,c=>{const u=function(f,h){return new Og(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Wo.newInvalidDocument(d)))});let l=Dy();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&sw(d.mutation,u,Hc.empty(),ir.now()),x4(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qxe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Dt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:ZA(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(t,r){return Dt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Rxe(a.bundledQuery),readTime:ZA(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wxe{constructor(){this.overlays=new ls(yr.comparator),this.qr=new Map}getOverlay(t,r){return Dt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Rp();return Dt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Dt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Dt.resolve()}getOverlaysForCollection(t,r,n){const a=Rp(),s=r.length+1,i=new yr(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ls((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Rp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Rp(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Dt.resolve(l)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new fxe(r,n));let s=this.qr.get(r);s===void 0&&(s=Bn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xxe{constructor(){this.sessionToken=ro.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Qr=new Ii(qi.$r),this.Ur=new Ii(qi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new qi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new qi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new yr(new _a([])),n=new qi(r,t),a=new qi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new yr(new _a([])),n=new qi(r,t),a=new qi(r,t+1);let s=Bn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new qi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class qi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return yr.comparator(t.key,r.key)||jn(t.Yr,r.Yr)}static Kr(t,r){return jn(t.Yr,r.Yr)||yr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yxe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ii(qi.$r)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Axe(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.Zr=this.Zr.add(new qi(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Dt.resolve(i)}lookupMutationBatch(t,r){return Dt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?YD:this.tr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new qi(r,0),a=new qi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const l=this.Xr(i.Yr);s.push(l)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ii(jn);return r.forEach(a=>{const s=new qi(a,0),i=new qi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],l=>{n=n.add(l.Yr)})}),Dt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;yr.isDocumentKey(s)||(s=s.child(""));const i=new qi(new yr(s),0);let l=new Ii(jn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},i),Dt.resolve(this.ti(l))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){ia(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Dt.forEach(r.mutations,a=>{const s=new qi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new qi(r,0),a=this.Zr.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(t){this.ri=t,this.docs=function(){return new ls(yr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():Wo.newInvalidDocument(r))}getEntries(t,r){let n=wh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Wo.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=wh();const i=r.path,l=new yr(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Sge(_ge(d),n)<=0||(a.has(d.key)||x4(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){zr(9500)}ii(t,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Zxe(this)}getSize(t){return Dt.resolve(this.size)}}class Zxe extends $xe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(t){this.persistence=t,this.si=new Dg(r=>ZD(r),eP),this.lastRemoteSnapshotVersion=Jr.min(),this.highestTargetId=0,this.oi=0,this._i=new iP,this.targetCount=0,this.ai=r1.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Dt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new r1(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Dt.resolve()}updateTargetData(t,r){return this.Pr(r),Dt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Dt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Dt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Dt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Dt.resolve(n)}containsKey(t,r){return Dt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(t,r){this.ui={},this.overlays={},this.ci=new A4(0),this.li=!1,this.li=!0,this.hi=new Xxe,this.referenceDelegate=t(this),this.Pi=new eve(this),this.indexManager=new Lxe,this.remoteDocumentCache=function(a){return new Jxe(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Pxe(r),this.Ii=new qxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Wxe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new Yxe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){ur("MemoryPersistence","Starting transaction:",t);const a=new tve(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Dt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class tve extends jge{constructor(t){super(),this.currentSequenceNumber=t}}class oP{constructor(t){this.persistence=t,this.Ri=new iP,this.Vi=null}static mi(t){return new oP(t)}get fi(){if(this.Vi)return this.Vi;throw zr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Dt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Dt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.fi,n=>{const a=yr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Jr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Dt.or([()=>Dt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class i_{constructor(t,r){this.persistence=t,this.pi=new Dg(n=>Ige(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=zxe(this,r)}static mi(t,r){return new i_(t,r)}Ei(){}di(t){return Dt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Dt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Dt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(l=>{l||(n++,s.removeEntry(i,Jr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=l5(t.data.value)),r}br(t,r,n){return Dt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Dt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Bn(),a=Bn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new lP(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nve{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Ohe()?8:Bge(al())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new rve;return this.Ss(t,r,i).next(l=>{if(s.result=l,this.Vs)return this.bs(t,r,i,l.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(tv()<=kn.DEBUG&&ur("QueryEngine","SDK will not create cache indexes for query:",rv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dt.resolve()):(tv()<=kn.DEBUG&&ur("QueryEngine","Query:",rv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(tv()<=kn.DEBUG&&ur("QueryEngine","The SDK decides to create cache indexes for query:",rv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,JA(r))):Dt.resolve())}ys(t,r){if(rQ(r))return Dt.resolve(null);let n=JA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=n_(r,null,"F"),n=JA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Bn(...s);return this.ps.getDocuments(t,i).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,i,c.readTime)?this.ys(t,n_(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return rQ(r)||a.isEqual(Jr.min())?Dt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Dt.resolve(null):(tv()<=kn.DEBUG&&ur("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rv(r)),this.vs(t,i,r,Nge(a,Pw)).next(l=>l))})}Ds(t,r){let n=new Ii(AZ(t));return r.forEach((a,s)=>{x4(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return tv()<=kn.DEBUG&&ur("QueryEngine","Using full collection scan to execute query:",rv(r)),this.ps.getDocumentsMatchingQuery(t,r,xm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="LocalStore",ave=3e8;class sve{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ls(jn),this.xs=new Dg(s=>ZD(s),eP),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Kxe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function ive(e,t,r,n){return new sve(e,t,r,n)}async function PZ(e,t){const r=tn(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=Bn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:l}))})})}function ove(e,t){const r=tn(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=Dt.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(c,g)).next(x=>{const v=u.docVersions.get(g);ia(v!==null,48541),x.version.compareTo(v)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Bn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function RZ(e){const t=tn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function lve(e,t){const r=tn(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?m=m.withResumeToken(ro.EMPTY_BYTE_STRING,Jr.min()).withLastLimboFreeSnapshotVersion(Jr.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,v,y){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=ave?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,m,d)&&l.push(r.Pi.updateTargetData(s,m))});let c=wh(),u=Bn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(cve(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Jr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Dt.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function cve(e,t,r){let n=Bn(),a=Bn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=wh();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Jr.min())?(t.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(l,c)):ur(cP,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function uve(e,t){const r=tn(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=YD),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function dve(e,t){const r=tn(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Dt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new W0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function q6(e,t,r){const n=tn(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!L1(i))throw i;ur(cP,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function mQ(e,t,r){const n=tn(e);let a=Jr.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=tn(c),h=f.xs.get(d);return h!==void 0?Dt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,JA(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Jr.min(),r?s:Bn())).next(l=>(Ave(n,Yge(t),l),{documents:l,Qs:s})))}function Ave(e,t,r){let n=e.Os.get(t)||Jr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class pQ{constructor(){this.activeTargetIds=nxe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fve{constructor(){this.Mo=new pQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new pQ,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ="ConnectivityMonitor";class xQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ur(gQ,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ur(gQ,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BC=null;function W6(){return BC===null?BC=function(){return 268435456+Math.round(2147483648*Math.random())}():BC++,"0x"+BC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="RestConnection",mve={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pve{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===e_?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=W6(),l=this.zo(t,r.toUriEncodedString());ur(H3,`Sending RPC '${t}' ${i}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Dh(u);return this.Jo(t,l,c,n,d).then(f=>(ur(H3,`Received RPC '${t}' ${i}: `,f),f),f=>{throw Ag(H3,`RPC '${t}' ${i} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+P1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=mve[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gve{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="WebChannelConnection";class xve extends pve{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=W6();return new Promise((l,c)=>{const u=new LJ;u.setWithCredentials(!0),u.listenOnce(MJ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case o5.NO_ERROR:const f=u.getResponseJson();ur(Ro,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),l(f);break;case o5.TIMEOUT:ur(Ro,`RPC '${t}' ${i} timed out`),c(new Wt(Nt.DEADLINE_EXCEEDED,"Request time out"));break;case o5.HTTP_ERROR:const h=u.getStatus();if(ur(Ro,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Nt).indexOf(w)>=0?w:Nt.UNKNOWN}(g.status);c(new Wt(x,g.message))}else c(new Wt(Nt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Wt(Nt.UNAVAILABLE,"Connection failed."));break;default:zr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ur(Ro,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);ur(Ro,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=W6(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=HJ(),l=QJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");ur(Ro,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,m=!1;const g=new gve({Yo:v=>{m?ur(Ro,`Not sending because RPC '${t}' stream ${a} is closed:`,v):(h||(ur(Ro,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),ur(Ro,`RPC '${t}' stream ${a} sending:`,v),f.send(v))},Zo:()=>f.close()}),x=(v,y,w)=>{v.listen(y,N=>{try{w(N)}catch(B){setTimeout(()=>{throw B},0)}})};return x(f,Oy.EventType.OPEN,()=>{m||(ur(Ro,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,Oy.EventType.CLOSE,()=>{m||(m=!0,ur(Ro,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,Oy.EventType.ERROR,v=>{m||(m=!0,Ag(Ro,`RPC '${t}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new Wt(Nt.UNAVAILABLE,"The operation could not be completed")))}),x(f,Oy.EventType.MESSAGE,v=>{var y;if(!m){const w=v.data[0];ia(!!w,16349);const N=w,B=(N==null?void 0:N.error)||((y=N[0])==null?void 0:y.error);if(B){ur(Ro,`RPC '${t}' stream ${a} received error:`,B);const k=B.status;let F=function(T){const L=ci[T];if(L!==void 0)return CZ(L)}(k),E=B.message;F===void 0&&(F=Nt.INTERNAL,E="Unknown error status: "+k+" with message "+B.message),m=!0,g.a_(new Wt(F,E)),f.close()}else ur(Ro,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(l,UJ.STAT_EVENT,v=>{v.stat===R6.PROXY?ur(Ro,`RPC '${t}' stream ${a} detected buffering proxy`):v.stat===R6.NOPROXY&&ur(Ro,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function V3(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(e){return new wxe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&ur("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ="PersistentStream";class MZ{constructor(t,r,n,a,s,i,l,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LZ(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Nt.RESOURCE_EXHAUSTED?(yh(r.toString()),yh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(Nt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ur(vQ,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(ur(vQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vve extends MZ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Nxe(this.serializer,t),n=function(s){if(!("targetChange"in s))return Jr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Jr.min():i.readTime?ZA(i.readTime):Jr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=K6(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=H6(c)?{documents:kxe(s,c)}:{query:jxe(s,c).ft},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=SZ(s,i.resumeToken);const u=z6(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo(Jr.min())>0){l.readTime=s_(s,i.snapshotVersion.toTimestamp());const u=z6(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=Txe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=K6(this.serializer),r.removeTarget=t,this.q_(r)}}class bve extends MZ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return ia(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ia(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ia(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Sxe(t.writeResults,t.commitTime),n=ZA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=K6(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>_xe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{}class wve extends yve{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(Nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,$6(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(Nt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Ho(t,$6(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(Nt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Eve{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yh(r),this.aa=!1):ur("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="RemoteStore";class Cve{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Pg(this)&&(ur(fg,"Restarting streams for network reachability change."),await async function(c){const u=tn(c);u.Ea.add(4),await U2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await C4(u)}(this))})}),this.Ra=new Eve(n,a)}}async function C4(e){if(Pg(e))for(const t of e.da)await t(!0)}async function U2(e){for(const t of e.da)await t(!1)}function UZ(e,t){const r=tn(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),fP(r)?AP(r):M1(r).O_()&&dP(r,t))}function uP(e,t){const r=tn(e),n=M1(r);r.Ia.delete(t),n.O_()&&QZ(r,t),r.Ia.size===0&&(n.O_()?n.L_():Pg(r)&&r.Ra.set("Unknown"))}function dP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}M1(e).Y_(t)}function QZ(e,t){e.Va.Ue(t),M1(e).Z_(t)}function AP(e){e.Va=new xxe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),M1(e).start(),e.Ra.ua()}function fP(e){return Pg(e)&&!M1(e).x_()&&e.Ia.size>0}function Pg(e){return tn(e).Ea.size===0}function HZ(e){e.Va=void 0}async function Nve(e){e.Ra.set("Online")}async function _ve(e){e.Ia.forEach((t,r)=>{dP(e,t)})}async function Sve(e,t){HZ(e),fP(e)?(e.Ra.ha(t),AP(e)):e.Ra.set("Unknown")}async function kve(e,t,r){if(e.Ra.set("Online"),t instanceof _Z&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.Ia.delete(l),a.Va.removeTarget(l))}(e,t)}catch(n){ur(fg,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await o_(e,n)}else if(t instanceof d5?e.Va.Ze(t):t instanceof NZ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Jr.min()))try{const n=await RZ(e.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Va.Tt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(ro.EMPTY_BYTE_STRING,d.snapshotVersion)),QZ(s,c);const f=new W0(d.target,c,u,d.sequenceNumber);dP(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){ur(fg,"Failed to raise snapshot:",n),await o_(e,n)}}async function o_(e,t,r){if(!L1(t))throw t;e.Ea.add(1),await U2(e),e.Ra.set("Offline"),r||(r=()=>RZ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ur(fg,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await C4(e)})}function VZ(e,t){return t().catch(r=>o_(e,r,t))}async function N4(e){const t=tn(e),r=wm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:YD;for(;jve(t);)try{const a=await uve(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Bve(t,a)}catch(a){await o_(t,a)}zZ(t)&&$Z(t)}function jve(e){return Pg(e)&&e.Ta.length<10}function Bve(e,t){e.Ta.push(t);const r=wm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function zZ(e){return Pg(e)&&!wm(e).x_()&&e.Ta.length>0}function $Z(e){wm(e).start()}async function Tve(e){wm(e).ra()}async function Ive(e){const t=wm(e);for(const r of e.Ta)t.ea(r.mutations)}async function Fve(e,t,r){const n=e.Ta.shift(),a=nP.from(n,t,r);await VZ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await N4(e)}async function Ove(e,t){t&&wm(e).X_&&await async function(n,a){if(function(i){return mxe(i)&&i!==Nt.ABORTED}(a.code)){const s=n.Ta.shift();wm(n).B_(),await VZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await N4(n)}}(e,t),zZ(e)&&$Z(e)}async function bQ(e,t){const r=tn(e);r.asyncQueue.verifyOperationInProgress(),ur(fg,"RemoteStore received new credentials");const n=Pg(r);r.Ea.add(3),await U2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await C4(r)}async function Dve(e,t){const r=tn(e);t?(r.Ea.delete(2),await C4(r)):t||(r.Ea.add(2),await U2(r),r.Ra.set("Unknown"))}function M1(e){return e.ma||(e.ma=function(r,n,a){const s=tn(r);return s.sa(),new vve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Nve.bind(null,e),t_:_ve.bind(null,e),r_:Sve.bind(null,e),H_:kve.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),fP(e)?AP(e):e.Ra.set("Unknown")):(await e.ma.stop(),HZ(e))})),e.ma}function wm(e){return e.fa||(e.fa=function(r,n,a){const s=tn(r);return s.sa(),new bve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Tve.bind(null,e),r_:Ove.bind(null,e),ta:Ive.bind(null,e),na:Fve.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await N4(e)):(await e.fa.stop(),e.Ta.length>0&&(ur(fg,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new ch,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,l=new hP(t,r,i,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(Nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mP(e,t){if(yh("AsyncQueue",`${t}: ${e}`),L1(e))return new Wt(Nt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{static emptySet(t){return new jv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||yr.comparator(r.key,n.key):(r,n)=>yr.comparator(r.key,n.key),this.keyedMap=Dy(),this.sortedSet=new ls(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof jv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new jv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(){this.ga=new ls(yr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):zr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class n1{constructor(t,r,n,a,s,i,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new n1(t,r,jv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&g4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Rve{constructor(){this.queries=wQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=tn(r),s=a.queries;a.queries=wQ(),s.forEach((i,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Wt(Nt.ABORTED,"Firestore shutting down"))}}function wQ(){return new Dg(e=>dZ(e),g4)}async function pP(e,t){const r=tn(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Pve,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=mP(i,`Initialization of query '${rv(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&xP(r)}async function gP(e,t){const r=tn(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Lve(e,t){const r=tn(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.Sa)l.Fa(a)&&(n=!0);i.wa=a}}n&&xP(r)}function Mve(e,t,r){const n=tn(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function xP(e){e.Ca.forEach(t=>{t.next()})}var X6,EQ;(EQ=X6||(X6={})).Ma="default",EQ.Cache="cache";class vP{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new n1(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=n1.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==X6.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ{constructor(t){this.key=t}}class KZ{constructor(t){this.key=t}}class Uve{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bn(),this.mutatedKeys=Bn(),this.eu=AZ(t),this.tu=new jv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new yQ,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),m=x4(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?g!==x&&(n.track({type:3,doc:m}),v=!0):this.su(h,m)||(n.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(i=i.add(m),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:l,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(m,g){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr(20277,{Rt:v})}};return x(m)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new n1(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new KZ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new GZ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Bn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return n1.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bP="SyncEngine";class Qve{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Hve{constructor(t){this.key=t,this.hu=!1}}class Vve{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Dg(l=>dZ(l),g4),this.Iu=new Map,this.Eu=new Set,this.du=new ls(yr.comparator),this.Au=new Map,this.Ru=new iP,this.Vu={},this.mu=new Map,this.fu=r1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zve(e,t,r=!0){const n=ZZ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await qZ(n,t,r,!0),a}async function $ve(e,t){const r=ZZ(e);await qZ(r,t,!0,!1)}async function qZ(e,t,r,n){const a=await dve(e.localStore,JA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await Gve(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&UZ(e.remoteStore,a),l}async function Gve(e,t,r,n,a){e.pu=(f,h,m)=>async function(x,v,y,w){let N=v.view.ru(y);N.Cs&&(N=await mQ(x.localStore,v.query,!1).then(({documents:E})=>v.view.ru(E,N)));const B=w&&w.targetChanges.get(v.targetId),k=w&&w.targetMismatches.get(v.targetId)!=null,F=v.view.applyChanges(N,x.isPrimaryClient,B,k);return NQ(x,v.targetId,F.au),F.snapshot}(e,f,h,m);const s=await mQ(e.localStore,t,!0),i=new Uve(t,s.Qs),l=i.ru(s.documents),c=M2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(l,e.isPrimaryClient,c);NQ(e,r,u.au);const d=new Qve(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function Kve(e,t,r){const n=tn(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!g4(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await q6(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&uP(n.remoteStore,a.targetId),Y6(n,a.targetId)}).catch(R1)):(Y6(n,a.targetId),await q6(n.localStore,a.targetId,!0))}async function qve(e,t){const r=tn(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),uP(r.remoteStore,n.targetId))}async function Wve(e,t,r){const n=r1e(e);try{const a=await function(i,l){const c=tn(i),u=ir.now(),d=l.reduce((m,g)=>m.add(g.key),Bn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=wh(),x=Bn();return c.Ns.getEntries(m,d).next(v=>{g=v,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(v=>{f=v;const y=[];for(const w of l){const N=uxe(w,f.get(w.key).overlayedDocument);N!=null&&y.push(new Um(w.key,N,aZ(N.value.mapValue),El.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:hZ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new ls(jn)),u=u.insert(l,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Q2(n,a.changes),await N4(n.remoteStore)}catch(a){const s=mP(a,"Failed to persist write");r.reject(s)}}async function WZ(e,t){const r=tn(e);try{const n=await lve(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(ia(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?ia(i.hu,14607):a.removedDocuments.size>0&&(ia(i.hu,42227),i.hu=!1))}),await Q2(r,n,t)}catch(n){await R1(n)}}function CQ(e,t,r){const n=tn(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const l=i.view.va(t);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=tn(i);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(l)&&(u=!0)}),u&&xP(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Xve(e,t,r){const n=tn(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ls(yr.comparator);i=i.insert(s,Wo.newNoDocument(s,Jr.min()));const l=Bn().add(s),c=new w4(Jr.min(),new Map,new ls(jn),i,l);await WZ(n,c),n.du=n.du.remove(s),n.Au.delete(t),yP(n)}else await q6(n.localStore,t,!1).then(()=>Y6(n,t,r)).catch(R1)}async function Yve(e,t){const r=tn(e),n=t.batch.batchId;try{const a=await ove(r.localStore,t);YZ(r,n,null),XZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Q2(r,a)}catch(a){await R1(a)}}async function Jve(e,t,r){const n=tn(e);try{const a=await function(i,l){const c=tn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ia(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);YZ(n,t,r),XZ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Q2(n,a)}catch(a){await R1(a)}}function XZ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function YZ(e,t,r){const n=tn(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function Y6(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||JZ(e,n)})}function JZ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(uP(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),yP(e))}function NQ(e,t,r){for(const n of r)n instanceof GZ?(e.Ru.addReference(n.key,t),Zve(e,n)):n instanceof KZ?(ur(bP,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||JZ(e,n.key)):zr(19791,{wu:n})}function Zve(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(ur(bP,"New document in limbo: "+r),e.Eu.add(n),yP(e))}function yP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new yr(_a.fromString(t)),n=e.fu.next();e.Au.set(n,new Hve(r)),e.du=e.du.insert(r,n),UZ(e.remoteStore,new W0(JA(p4(r.path)),n,"TargetPurposeLimboResolution",A4.ce))}}async function Q2(e,t,r){const n=tn(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=lP.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=tn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Dt.forEach(u,h=>Dt.forEach(h.Es,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Dt.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!L1(f))throw f;ur(cP,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Ms.get(h),g=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function e1e(e,t){const r=tn(e);if(!r.currentUser.isEqual(t)){ur(bP,"User change. New user:",t.toKey());const n=await PZ(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Wt(Nt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Q2(r,n.Ls)}}function t1e(e,t){const r=tn(e),n=r.Au.get(t);if(n&&n.hu)return Bn().add(n.key);{let a=Bn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const l=r.Tu.get(i);a=a.unionWith(l.view.nu)}return a}}function ZZ(e){const t=tn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=WZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=t1e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xve.bind(null,t),t.Pu.H_=Lve.bind(null,t.eventManager),t.Pu.yu=Mve.bind(null,t.eventManager),t}function r1e(e){const t=tn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yve.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jve.bind(null,t),t}class l_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=E4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return ive(this.persistence,new nve,t.initialUser,this.serializer)}Cu(t){return new DZ(oP.mi,this.serializer)}Du(t){return new fve}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}l_.provider={build:()=>new l_};class n1e extends l_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){ia(this.persistence.referenceDelegate instanceof i_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Hxe(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?ql.withCacheSize(this.cacheSizeBytes):ql.DEFAULT;return new DZ(n=>i_.mi(n,r),this.serializer)}}class J6{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>CQ(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=e1e.bind(null,this.syncEngine),await Dve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Rve}()}createDatastore(t){const r=E4(t.databaseInfo.databaseId),n=function(s){return new xve(s)}(t.databaseInfo);return function(s,i,l,c){return new wve(s,i,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,l){return new Cve(n,a,s,i,l)}(this.localStore,this.datastore,t.asyncQueue,r=>CQ(this.syncEngine,r,0),function(){return xQ.v()?new xQ:new hve}())}createSyncEngine(t,r){return function(a,s,i,l,c,u,d){const f=new Vve(a,s,i,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=tn(a);ur(fg,"RemoteStore shutting down."),s.Ea.add(5),await U2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}J6.provider={build:()=>new J6};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):yh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="FirestoreClient";class a1e{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=$o.UNAUTHENTICATED,this.clientId=u4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{ur(Em,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ur(Em,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ch;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=mP(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function z3(e,t){e.asyncQueue.verifyOperationInProgress(),ur(Em,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await PZ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function _Q(e,t){e.asyncQueue.verifyOperationInProgress();const r=await s1e(e);ur(Em,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>bQ(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>bQ(t.remoteStore,a)),e._onlineComponents=t}async function s1e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ur(Em,"Using user provided OfflineComponentProvider");try{await z3(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Nt.FAILED_PRECONDITION||a.code===Nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Ag("Error using user provided cache. Falling back to memory cache: "+r),await z3(e,new l_)}}else ur(Em,"Using default OfflineComponentProvider"),await z3(e,new n1e(void 0));return e._offlineComponents}async function eee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ur(Em,"Using user provided OnlineComponentProvider"),await _Q(e,e._uninitializedComponentsProvider._online)):(ur(Em,"Using default OnlineComponentProvider"),await _Q(e,new J6))),e._onlineComponents}function i1e(e){return eee(e).then(t=>t.syncEngine)}async function c_(e){const t=await eee(e),r=t.eventManager;return r.onListen=zve.bind(null,t.syncEngine),r.onUnlisten=Kve.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=$ve.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=qve.bind(null,t.syncEngine),r}function o1e(e,t,r={}){const n=new ch;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new wP({next:h=>{d.Nu(),i.enqueueAndForget(()=>gP(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new Wt(Nt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new Wt(Nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new vP(p4(l.path),d,{includeMetadataChanges:!0,qa:!0});return pP(s,f)}(await c_(e),e.asyncQueue,t,r,n)),n.promise}function l1e(e,t,r={}){const n=new ch;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new wP({next:h=>{d.Nu(),i.enqueueAndForget(()=>gP(s,f)),h.fromCache&&c.source==="server"?u.reject(new Wt(Nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new vP(l,d,{includeMetadataChanges:!0,qa:!0});return pP(s,f)}(await c_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tee(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ree="firestore.googleapis.com",kQ=!0;class jQ{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(Nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ree,this.ssl=kQ}else this.host=t.host,this.ssl=t.ssl??kQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=OZ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Uxe)throw new Wt(Nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tee(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(Nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(Nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(Nt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _4{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(Nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(Nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jQ(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new $J;switch(n.type){case"firstParty":return new xge(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(Nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=SQ.get(r);n&&(ur("ComponentProvider","Removing Datastore"),SQ.delete(r),n.terminate())}(this),Promise.resolve()}}function nee(e,t,r,n={}){var u;e=rl(e,_4);const a=Dh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${r}`;a&&(n4(`https://${l}`),a4("Firestore",!0)),s.host!==ree&&s.host!==l&&Ag("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!pm(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=$o.MOCK_USER;else{d=YY(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Wt(Nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new $o(h)}e._authCredentials=new mge(new zJ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Kd(this.firestore,t,this._query)}}class ss{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ss(this.firestore,t,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(R2(r,ss._jsonSchema))return new ss(t,n||null,new yr(_a.fromString(r.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:gi("string",ss._jsonSchemaVersion),referencePath:gi("string")};class uh extends Kd{constructor(t,r,n){super(t,r,p4(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ss(this.firestore,null,new yr(t))}withConverter(t){return new uh(this.firestore,t,this._path)}}function vt(e,t,...r){if(e=Yn(e),GJ("collection","path",t),e instanceof _4){const n=_a.fromString(t,...r);return V9(n),new uh(e,null,n)}{if(!(e instanceof ss||e instanceof uh))throw new Wt(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return V9(n),new uh(e.firestore,null,n)}}function sr(e,t,...r){if(e=Yn(e),arguments.length===1&&(t=u4.newId()),GJ("doc","path",t),e instanceof _4){const n=_a.fromString(t,...r);return H9(n),new ss(e,null,new yr(n))}{if(!(e instanceof ss||e instanceof uh))throw new Wt(Nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(_a.fromString(t,...r));return H9(n),new ss(e.firestore,e instanceof uh?e.converter:null,new yr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQ="AsyncQueue";class TQ{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LZ(this,"async_queue_retry"),this._c=()=>{const n=V3();n&&ur(BQ,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=V3();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=V3();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new ch;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!L1(t))throw t;ur(BQ,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,yh("INTERNAL UNHANDLED ERROR: ",IQ(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=hP.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&zr(47125,{Pc:IQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function IQ(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FQ(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class zd extends _4{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new TQ,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new TQ(t),this._firestoreClient=void 0,await t}}}function EP(e,t){const r=typeof e=="object"?e:s4(),n=typeof e=="string"?e:e_,a=F2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=LD("firestore");s&&nee(a,...s)}return a}function U1(e){if(e._terminated)throw new Wt(Nt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||c1e(e),e._firestoreClient}function c1e(e){var n,a,s;const t=e._freezeSettings(),r=function(l,c,u,d){return new Dge(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tee(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new a1e(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lc(ro.fromBase64String(t))}catch(r){throw new Wt(Nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Lc(ro.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Lc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(R2(t,Lc._jsonSchema))return Lc.fromBase64String(t.bytes)}}Lc._jsonSchemaVersion="firestore/bytes/1.0",Lc._jsonSchema={type:gi("string",Lc._jsonSchemaVersion),bytes:gi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(Nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(Nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(Nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return jn(this._lat,t._lat)||jn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dd._jsonSchemaVersion}}static fromJSON(t){if(R2(t,Dd._jsonSchema))return new Dd(t.latitude,t.longitude)}}Dd._jsonSchemaVersion="firestore/geoPoint/1.0",Dd._jsonSchema={type:gi("string",Dd._jsonSchemaVersion),latitude:gi("number"),longitude:gi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Pd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(R2(t,Pd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Pd(t.vectorValues);throw new Wt(Nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pd._jsonSchemaVersion="firestore/vectorValue/1.0",Pd._jsonSchema={type:gi("string",Pd._jsonSchemaVersion),vectorValues:gi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1e=/^__.*__$/;class d1e{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Um(t,this.data,this.fieldMask,r,this.fieldTransforms):new L2(t,this.data,r,this.fieldTransforms)}}class aee{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Um(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function see(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr(40011,{Ac:e})}}class S4{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new S4({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return u_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(see(this.Ac)&&u1e.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class A1e{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||E4(t)}Cc(t,r,n,a=!1){return new S4({Ac:t,methodName:r,Dc:n,path:Ji.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V1(e){const t=e._freezeSettings(),r=E4(e._databaseId);return new A1e(e._databaseId,!!t.ignoreUndefinedProperties,r)}function CP(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);SP("Data must be an object, but it was:",i,n);const l=cee(n,i);let c,u;if(s.merge)c=new Hc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=Z6(t,f,r);if(!i.contains(h))throw new Wt(Nt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);dee(d,h)||d.push(h)}c=new Hc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new d1e(new Zl(l),c,u)}class k4 extends H1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof k4}}function f1e(e,t,r){return new S4({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class NP extends H1{_toFieldTransform(t){return new yZ(t.path,new Uw)}isEqual(t){return t instanceof NP}}class _P extends H1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=f1e(this,t,!0),n=this.vc.map(s=>z1(s,r)),a=new t1(n);return new yZ(t.path,a)}isEqual(t){return t instanceof _P&&pm(this.vc,t.vc)}}function iee(e,t,r,n){const a=e.Cc(1,t,r);SP("Data must be an object, but it was:",a,n);const s=[],i=Zl.empty();Mm(n,(c,u)=>{const d=kP(t,c,r);u=Yn(u);const f=a.yc(d);if(u instanceof k4)s.push(d);else{const h=z1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const l=new Hc(s);return new aee(i,l,a.fieldTransforms)}function oee(e,t,r,n,a,s){const i=e.Cc(1,t,r),l=[Z6(t,n,r)],c=[a];if(s.length%2!=0)throw new Wt(Nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(Z6(t,s[h])),c.push(s[h+1]);const u=[],d=Zl.empty();for(let h=l.length-1;h>=0;--h)if(!dee(u,l[h])){const m=l[h];let g=c[h];g=Yn(g);const x=i.yc(m);if(g instanceof k4)u.push(m);else{const v=z1(g,x);v!=null&&(u.push(m),d.set(m,v))}}const f=new Hc(u);return new aee(d,f,i.fieldTransforms)}function lee(e,t,r,n=!1){return z1(r,e.Cc(n?4:3,t))}function z1(e,t){if(uee(e=Yn(e)))return SP("Unsupported field value:",t,e),cee(e,t);if(e instanceof H1)return function(n,a){if(!see(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=z1(l,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Yn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return axe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ir.fromDate(n);return{timestampValue:s_(a.serializer,s)}}if(n instanceof ir){const s=new ir(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:s_(a.serializer,s)}}if(n instanceof Dd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Lc)return{bytesValue:SZ(a.serializer,n._byteString)};if(n instanceof ss){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sP(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Pd)return function(i,l){return{mapValue:{fields:{[rZ]:{stringValue:nZ},[t_]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return rP(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${d4(n)}`)}(e,t)}function cee(e,t){const r={};return XJ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mm(e,(n,a)=>{const s=z1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function uee(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ir||e instanceof Dd||e instanceof Lc||e instanceof ss||e instanceof H1||e instanceof Pd)}function SP(e,t,r){if(!uee(r)||!qJ(r)){const n=d4(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function Z6(e,t,r){if((t=Yn(t))instanceof Q1)return t._internalPath;if(typeof t=="string")return kP(e,t);throw u_("Field path arguments must be of type string or ",e,!1,void 0,r)}const h1e=new RegExp("[~\\*/\\[\\]]");function kP(e,t,r){if(t.search(h1e)>=0)throw u_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Q1(...t.split("."))._internalPath}catch{throw u_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function u_(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Wt(Nt.INVALID_ARGUMENT,l+e+c)}function dee(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new m1e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(j4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class m1e extends jP{data(){return super.data()}}function j4(e,t){return typeof t=="string"?kP(e,t):t instanceof Q1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aee(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(Nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BP{}class H2 extends BP{}function zt(e,t,...r){let n=[];t instanceof BP&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof B4).length,l=s.filter(c=>c instanceof V2).length;if(i>1||i>0&&l>0)throw new Wt(Nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class V2 extends H2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new V2(t,r,n)}_apply(t){const r=this._parse(t);return hee(t._query,r),new Kd(t.firestore,t.converter,V6(t._query,r))}_parse(t){const r=V1(t.firestore);return function(s,i,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(Nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DQ(f,d);const g=[];for(const x of f)g.push(OQ(c,s,x));h={arrayValue:{values:g}}}else h=OQ(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DQ(f,d),h=lee(l,i,f,d==="in"||d==="not-in");return mi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Br(e,t,r){const n=t,a=j4("where",e);return V2._create(a,n,r)}class B4 extends BP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new B4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Vd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)hee(i,c),i=V6(i,c)}(t._query,r),new Kd(t.firestore,t.converter,V6(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class T4 extends H2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new T4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(Nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(Nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mw(s,i)}(t._query,this._field,this._direction);return new Kd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Og(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function hr(e,t="asc"){const r=t,n=j4("orderBy",e);return T4._create(n,r)}class I4 extends H2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new I4(t,r,n)}_apply(t){return new Kd(t.firestore,t.converter,n_(t._query,this._limit,this._limitType))}}function Rd(e){return Cge("limit",e),I4._create("limit",e,"F")}class F4 extends H2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new F4(t,r,n)}_apply(t){const r=p1e(t,this.type,this._docOrFields,this._inclusive);return new Kd(t.firestore,t.converter,function(a,s){return new Og(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function fee(...e){return F4._create("startAfter",e,!1)}function p1e(e,t,r,n){if(r[0]=Yn(r[0]),r[0]instanceof jP)return function(s,i,l,c,u){if(!c)throw new Wt(Nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of kv(s))if(f.field.isKeyField())d.push(r_(i,c.key));else{const h=c.data.field(f.field);if(h4(h))throw new Wt(Nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const m=f.field.canonicalString();throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new e1(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=V1(e.firestore);return function(i,l,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Wt(Nt.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!tP(i)&&x.indexOf("/")!==-1)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const v=i.path.child(_a.fromString(x));if(!yr.isDocumentKey(v))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new yr(v);m.push(r_(l,y))}else{const v=lee(c,u,x);m.push(v)}}return new e1(m,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function OQ(e,t,r){if(typeof(r=Yn(r))=="string"){if(r==="")throw new Wt(Nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tP(t)&&r.indexOf("/")!==-1)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(_a.fromString(r));if(!yr.isDocumentKey(n))throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return r_(e,new yr(n))}if(r instanceof ss)return r_(e,r._key);throw new Wt(Nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${d4(r)}.`)}function DQ(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(Nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hee(e,t){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(Nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(Nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class mee{convertValue(t,r="none"){switch(ym(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ks(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(bm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw zr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Mm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[t_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Ks(i.doubleValue));return new Pd(r)}convertGeoPoint(t){return new Dd(Ks(t.latitude),Ks(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=m4(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Rw(t));default:return null}}convertTimestamp(t){const r=vm(t);return new ir(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=_a.fromString(t);ia(FZ(n),9688,{name:t});const a=new Yv(n.get(1),n.get(3)),s=new yr(n.popFirst(5));return a.isEqual(r)||yh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class Av{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class im extends jP{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new iw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(j4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=im._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}im._jsonSchemaVersion="firestore/documentSnapshot/1.0",im._jsonSchema={type:gi("string",im._jsonSchemaVersion),bundleSource:gi("string","DocumentSnapshot"),bundleName:gi("string"),bundle:gi("string")};class iw extends im{data(t={}){return super.data(t)}}class om{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new Av(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new iw(this._firestore,this._userDataWriter,n.key,n,new Av(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(Nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new iw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Av(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new iw(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Av(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:g1e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=om._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=u4.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function g1e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(e){e=rl(e,ss);const t=rl(e.firestore,zd);return o1e(U1(t),e._key).then(r=>pee(t,e,r))}om._jsonSchemaVersion="firestore/querySnapshot/1.0",om._jsonSchema={type:gi("string",om._jsonSchemaVersion),bundleSource:gi("string","QuerySnapshot"),bundleName:gi("string"),bundle:gi("string")};class IP extends mee{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function Tn(e){e=rl(e,Kd);const t=rl(e.firestore,zd),r=U1(t),n=new IP(t);return Aee(e._query),l1e(r,e._query).then(a=>new om(t,n,e,a))}function bi(e,t,r){e=rl(e,ss);const n=rl(e.firestore,zd),a=TP(e.converter,t,r);return $1(n,[CP(V1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,El.none())])}function cc(e,t,r,...n){e=rl(e,ss);const a=rl(e.firestore,zd),s=V1(a);let i;return i=typeof(t=Yn(t))=="string"||t instanceof Q1?oee(s,"updateDoc",e._key,t,r,n):iee(s,"updateDoc",e._key,t),$1(a,[i.toMutation(e._key,El.exists(!0))])}function Ra(e){return $1(rl(e.firestore,zd),[new y4(e._key,El.none())])}function hn(e,t){const r=rl(e.firestore,zd),n=sr(e),a=TP(e.converter,t);return $1(r,[CP(V1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,El.exists(!1))]).then(()=>n)}function fr(e,...t){var c,u,d;e=Yn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||FQ(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(FQ(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,l;if(e instanceof ss)i=rl(e.firestore,zd),l=p4(e._key.path),s={next:f=>{t[n]&&t[n](pee(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=rl(e,Kd);i=rl(f.firestore,zd),l=f._query;const h=new IP(i);s={next:m=>{t[n]&&t[n](new om(i,h,f,m))},error:t[n+1],complete:t[n+2]},Aee(e._query)}return function(h,m,g,x){const v=new wP(x),y=new vP(m,v,g);return h.asyncQueue.enqueueAndForget(async()=>pP(await c_(h),y)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>gP(await c_(h),y))}}(U1(i),l,a,s)}function $1(e,t){return function(n,a){const s=new ch;return n.asyncQueue.enqueueAndForget(async()=>Wve(await i1e(n),a,s)),s.promise}(U1(e),t)}function pee(e,t,r){const n=r.docs.get(t._key),a=new IP(e);return new im(e,a,t._key,n,new Av(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gee{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=V1(t)}set(t,r,n){this._verifyNotCommitted();const a=$3(t,this._firestore),s=TP(a.converter,r,n),i=CP(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,El.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=$3(t,this._firestore);let i;return i=typeof(r=Yn(r))=="string"||r instanceof Q1?oee(this._dataReader,"WriteBatch.update",s._key,r,n,a):iee(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,El.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=$3(t,this._firestore);return this._mutations=this._mutations.concat(new y4(r._key,El.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(Nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $3(e,t){if((e=Yn(e)).firestore!==t)throw new Wt(Nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Is(){return new NP("serverTimestamp")}function xee(...e){return new _P("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(e){return U1(e=rl(e,zd)),new gee(e,t=>$1(e,t))}(function(t,r=!0){(function(a){P1=a})(Ig),gm(new xh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new zd(new pge(n.getProvider("auth-internal")),new vge(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Wt(Nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yv(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),zu(L9,M9,t),zu(L9,M9,"esm2020")})();const d_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:mee,Bytes:Lc,CollectionReference:uh,DocumentReference:ss,DocumentSnapshot:im,FieldPath:Q1,FieldValue:H1,Firestore:zd,FirestoreError:Wt,GeoPoint:Dd,Query:Kd,QueryCompositeFilterConstraint:B4,QueryConstraint:H2,QueryDocumentSnapshot:iw,QueryFieldFilterConstraint:V2,QueryLimitConstraint:I4,QueryOrderByConstraint:T4,QuerySnapshot:om,QueryStartAtConstraint:F4,SnapshotMetadata:Av,Timestamp:ir,VectorValue:Pd,WriteBatch:gee,_AutoId:u4,_ByteString:ro,_DatabaseId:Yv,_DocumentKey:yr,_EmptyAuthCredentialsProvider:$J,_FieldPath:Ji,_cast:rl,_logWarn:Ag,_validateIsNotUsedTogether:KJ,addDoc:hn,arrayUnion:xee,collection:vt,connectFirestoreEmulator:nee,deleteDoc:Ra,doc:sr,ensureFirestoreConfigured:U1,executeWrite:$1,getDoc:Rg,getDocs:Tn,getFirestore:EP,limit:Rd,onSnapshot:fr,orderBy:hr,query:zt,serverTimestamp:Is,setDoc:bi,startAfter:fee,updateDoc:cc,where:Br,writeBatch:Lg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee="firebasestorage.googleapis.com",bee="storageBucket",x1e=120*1e3,v1e=600*1e3,b1e=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Gd{constructor(t,r,n=0){super(G3(t),`Firebase Storage: ${r} (${G3(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ds.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return G3(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var za;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(za||(za={}));function G3(e){return"storage/"+e}function FP(){const e="An unknown error occurred, please check the error payload for server response.";return new ds(za.UNKNOWN,e)}function y1e(e){return new ds(za.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function w1e(e){return new ds(za.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function E1e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ds(za.UNAUTHENTICATED,e)}function C1e(){return new ds(za.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N1e(e){return new ds(za.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function yee(){return new ds(za.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wee(){return new ds(za.CANCELED,"User canceled the upload/download.")}function _1e(e){return new ds(za.INVALID_URL,"Invalid URL '"+e+"'.")}function S1e(e){return new ds(za.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function k1e(){return new ds(za.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bee+"' property when initializing the app?")}function Eee(){return new ds(za.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function j1e(){return new ds(za.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function B1e(){return new ds(za.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function T1e(e){return new ds(za.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eF(e){return new ds(za.INVALID_ARGUMENT,e)}function Cee(){return new ds(za.APP_DELETED,"The Firebase app was deleted.")}function I1e(e){return new ds(za.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ow(e,t){return new ds(za.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ry(e){throw new ds(za.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=bl.makeFromUrl(t,r)}catch{return new bl(t,"")}if(n.path==="")return n;throw S1e(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const i="(/(.*))?$",l=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(B){B.path_=decodeURIComponent(B.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===vee?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${v}`,"i"),N=[{regex:l,indices:c,postModify:s},{regex:m,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let B=0;B<N.length;B++){const k=N[B],F=k.regex.exec(t);if(F){const E=F[k.indices.bucket];let S=F[k.indices.path];S||(S=""),n=new bl(E,S),k.postModify(n);break}}if(n==null)throw _1e(t);return n}}class F1e{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1e(e,t,r){let n=1,a=null,s=null,i=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,t.apply(null,v))}function f(v){a=setTimeout(()=>{a=null,e(m,c())},v)}function h(){s&&clearTimeout(s)}function m(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(c()||i){h(),d.call(null,v,...y);return}n<64&&(n*=2);let N;l===1?(l=2,N=0):N=(n+Math.random())*1e3,f(N)}let g=!1;function x(v){g||(g=!0,h(),!u&&(a!==null?(v||(l=2),clearTimeout(a),f(0)):v||(l=1)))}return f(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function D1e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1e(e){return e!==void 0}function R1e(e){return typeof e=="function"}function L1e(e){return typeof e=="object"&&!Array.isArray(e)}function O4(e){return typeof e=="string"||e instanceof String}function PQ(e){return OP()&&e instanceof Blob}function OP(){return typeof Blob<"u"}function tF(e,t,r,n){if(n<t)throw eF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw eF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function Nee(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Kp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Kp||(Kp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ee(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1e{constructor(t,r,n,a,s,i,l,c,u,d,f,h=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new TC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const l=s.getErrorCode()===Kp.NO_ERROR,c=s.getStatus();if(!l||_ee(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Kp.ABORT;n(!1,new TC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new TC(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());P1e(c)?s(c):s()}catch(c){i(c)}else if(l!==null){const c=FP();c.serverResponse=l.getErrorText(),this.errorCallback_?i(this.errorCallback_(l,c)):i(c)}else if(a.canceled){const c=this.appDelete_?Cee():wee();i(c)}else{const c=yee();i(c)}};this.canceled_?r(!1,new TC(!1,null,!0)):this.backoffId_=O1e(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&D1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class TC{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function U1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Q1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function H1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function V1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function z1e(e,t,r,n,a,s,i=!0,l=!1){const c=Nee(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return H1e(d,t),U1e(d,r),Q1e(d,s),V1e(d,n),new M1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function G1e(...e){const t=$1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(OP())return new Blob(e);throw new ds(za.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function K1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1e(e){if(typeof atob>"u")throw T1e("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class K3{constructor(t,r){this.data=t,this.contentType=r||null}}function W1e(e,t){switch(e){case zA.RAW:return new K3(See(t));case zA.BASE64:case zA.BASE64URL:return new K3(kee(e,t));case zA.DATA_URL:return new K3(Y1e(t),J1e(t))}throw FP()}function See(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function X1e(e){let t;try{t=decodeURIComponent(e)}catch{throw ow(zA.DATA_URL,"Malformed data URL.")}return See(t)}function kee(e,t){switch(e){case zA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw ow(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw ow(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=q1e(t)}catch(a){throw a.message.includes("polyfill")?a:ow(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class jee{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw ow(zA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Z1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function Y1e(e){const t=new jee(e);return t.base64?kee(zA.BASE64,t.rest):X1e(t.rest)}function J1e(e){return new jee(e).contentType}function Z1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,r){let n=0,a="";PQ(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(PQ(this.data_)){const n=this.data_,a=K1e(n,t,r);return a===null?null:new Wf(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Wf(n,!0)}}static getBlob(...t){if(OP()){const r=t.map(n=>n instanceof Wf?n.data_:n);return new Wf(G1e.apply(null,r))}else{const r=t.map(i=>O4(i)?W1e(zA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let l=0;l<i.length;l++)a[s++]=i[l]}),new Wf(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e){let t;try{t=JSON.parse(e)}catch{return null}return L1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ebe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function tbe(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function Bee(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rbe(e,t){return t}class fl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||rbe}}let IC=null;function nbe(e){return!O4(e)||e.length<2?e:Bee(e)}function PP(){if(IC)return IC;const e=[];e.push(new fl("bucket")),e.push(new fl("generation")),e.push(new fl("metageneration")),e.push(new fl("name","fullPath",!0));function t(s,i){return nbe(i)}const r=new fl("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new fl("size");return a.xform=n,e.push(a),e.push(new fl("timeCreated")),e.push(new fl("updated")),e.push(new fl("md5Hash",null,!0)),e.push(new fl("cacheControl",null,!0)),e.push(new fl("contentDisposition",null,!0)),e.push(new fl("contentEncoding",null,!0)),e.push(new fl("contentLanguage",null,!0)),e.push(new fl("contentType",null,!0)),e.push(new fl("metadata","customMetadata",!0)),IC=e,IC}function abe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new bl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function sbe(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return abe(n,e),n}function Tee(e,t,r){const n=DP(t);return n===null?null:sbe(e,n,r)}function ibe(e,t,r,n){const a=DP(t);if(a===null||!O4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),m=Mg(h,r,n),g=Nee({alt:"media",token:u});return m+g})[0]}function Iee(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ="prefixes",LQ="items";function obe(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[RQ])for(const a of r[RQ]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new bl(t,s));n.prefixes.push(i)}if(r[LQ])for(const a of r[LQ]){const s=e._makeStorageReference(new bl(t,a.name));n.items.push(s)}return n}function lbe(e,t,r){const n=DP(r);return n===null?null:obe(e,t,n)}class Qm{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(e){if(!e)throw FP()}function RP(e,t){function r(n,a){const s=Tee(e,a,t);return ef(s!==null),s}return r}function cbe(e,t){function r(n,a){const s=lbe(e,t,a);return ef(s!==null),s}return r}function ube(e,t){function r(n,a){const s=Tee(e,a,t);return ef(s!==null),ibe(s,a,e.host,e._protocol)}return r}function G1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=C1e():a=E1e():r.getStatus()===402?a=w1e(e.bucket):r.getStatus()===403?a=N1e(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function LP(e){const t=G1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=y1e(e.path)),s.serverResponse=a.serverResponse,s}return r}function dbe(e,t,r){const n=t.fullServerUrl(),a=Mg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,l=new Qm(a,s,RP(e,r),i);return l.errorHandler=LP(t),l}function Abe(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),l=Mg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Qm(l,c,cbe(e,t.bucket),u);return d.urlParams=s,d.errorHandler=G1(t),d}function fbe(e,t,r){const n=t.fullServerUrl(),a=Mg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,l=new Qm(a,s,ube(e,r),i);return l.errorHandler=LP(t),l}function hbe(e,t){const r=t.fullServerUrl(),n=Mg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const l=new Qm(n,a,i,s);return l.successCodes=[200,204],l.errorHandler=LP(t),l}function mbe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Fee(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=mbe(null,t)),n}function Oee(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let B=0;B<2;B++)N=N+Math.random().toString().slice(2);return N}const c=l();i["Content-Type"]="multipart/related; boundary="+c;const u=Fee(t,n,a),d=Iee(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=Wf.getBlob(f,n,h);if(m===null)throw Eee();const g={name:u.fullPath},x=Mg(s,e.host,e._protocol),v="POST",y=e.maxUploadRetryTime,w=new Qm(x,v,RP(e,r),y);return w.urlParams=g,w.headers=i,w.body=m.uploadData(),w.errorHandler=G1(t),w}class A_{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function MP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{ef(!1)}return ef(!!r&&(t||["active"]).indexOf(r)!==-1),r}function pbe(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=Fee(t,n,a),l={name:i.fullPath},c=Mg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=Iee(i,r),h=e.maxUploadRetryTime;function m(x){MP(x);let v;try{v=x.getResponseHeader("X-Goog-Upload-URL")}catch{ef(!1)}return ef(O4(v)),v}const g=new Qm(c,u,m,h);return g.urlParams=l,g.headers=d,g.body=f,g.errorHandler=G1(t),g}function gbe(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=MP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ef(!1)}f||ef(!1);const h=Number(f);return ef(!isNaN(h)),new A_(h,n.size(),d==="final")}const i="POST",l=e.maxUploadRetryTime,c=new Qm(r,i,s,l);return c.headers=a,c.errorHandler=G1(t),c}const MQ=256*1024;function xbe(e,t,r,n,a,s,i,l){const c=new A_(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw j1e();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw Eee();function v(B,k){const F=MP(B,["active","final"]),E=c.current+d,S=n.size();let T;return F==="final"?T=RP(t,s)(B,k):T=null,new A_(E,S,F==="final",T)}const y="POST",w=t.maxUploadRetryTime,N=new Qm(r,y,v,w);return N.headers=g,N.body=x.uploadData(),N.progressCallback=l||null,N.errorHandler=G1(e),N}const Wl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function q3(e){switch(e){case"running":case"pausing":case"canceling":return Wl.RUNNING;case"paused":return Wl.PAUSED;case"success":return Wl.SUCCESS;case"canceled":return Wl.CANCELED;case"error":return Wl.ERROR;default:return Wl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vbe{constructor(t,r,n){if(R1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class bbe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw ry("cannot .send() more than once");if(Dh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ry("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ry("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ry("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ry("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ybe extends bbe{initXhr(){this.xhr_.responseType="text"}}function Xf(){return new ybe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wbe{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=PP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(za.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(_ee(a.status,[]))if(s)a=yee();else{this.sleepTime=Math.max(this.sleepTime*2,b1e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(za.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=pbe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Xf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=gbe(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Xf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=MQ*this._chunkMultiplier,r=new A_(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=xbe(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(i,Xf,a,s,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){MQ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=dbe(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Xf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=Oee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Xf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=wee(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=q3(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new vbe(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(q3(this._state)){case Wl.SUCCESS:kx(this._resolve.bind(null,this.snapshot))();break;case Wl.CANCELED:case Wl.ERROR:const r=this._reject;kx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(q3(this._state)){case Wl.RUNNING:case Wl.PAUSED:t.next&&kx(t.next.bind(t,this.snapshot))();break;case Wl.SUCCESS:t.complete&&kx(t.complete.bind(t))();break;case Wl.CANCELED:case Wl.ERROR:t.error&&kx(t.error.bind(t,this._error))();break;default:t.error&&kx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t,r){this._service=t,r instanceof bl?this._location=r:this._location=bl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new hg(t,r)}get root(){const t=new bl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bee(this._location.path)}get storage(){return this._service}get parent(){const t=ebe(this._location.path);if(t===null)return null;const r=new bl(this._location.bucket,t);return new hg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw I1e(t)}}function Ebe(e,t,r){e._throwIfRoot("uploadBytes");const n=Oee(e.storage,e._location,PP(),new Wf(t,!0),r);return e.storage.makeRequestWithTokens(n,Xf).then(a=>({metadata:a,ref:e}))}function Cbe(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new wbe(e,new Wf(t),r)}function Nbe(e){const t={prefixes:[],items:[]};return Dee(e,t).then(()=>t)}async function Dee(e,t,r){const a=await _be(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await Dee(e,t,a.nextPageToken)}function _be(e,t){t!=null&&typeof t.maxResults=="number"&&tF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=Abe(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Xf)}function Sbe(e){e._throwIfRoot("getDownloadURL");const t=fbe(e.storage,e._location,PP());return e.storage.makeRequestWithTokens(t,Xf).then(r=>{if(r===null)throw B1e();return r})}function kbe(e){e._throwIfRoot("deleteObject");const t=hbe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Xf)}function jbe(e,t){const r=tbe(e._location.path,t),n=new bl(e._location.bucket,r);return new hg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bbe(e){return/^[A-Za-z]+:\/\//.test(e)}function Tbe(e,t){return new hg(e,t)}function Pee(e,t){if(e instanceof UP){const r=e;if(r._bucket==null)throw k1e();const n=new hg(r,r._bucket);return t!=null?Pee(n,t):n}else return t!==void 0?jbe(e,t):e}function Ibe(e,t){if(t&&Bbe(t)){if(e instanceof UP)return Tbe(e,t);throw eF("To use ref(service, url), the first argument must be a Storage instance.")}else return Pee(e,t)}function UQ(e,t){const r=t==null?void 0:t[bee];return r==null?null:bl.makeFromBucketSpec(r,e)}function Fbe(e,t,r,n={}){e.host=`${t}:${r}`;const a=Dh(t);a&&(n4(`https://${e.host}/b`),a4("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:YY(s,e.app.options.projectId))}class UP{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=vee,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x1e,this._maxUploadRetryTime=v1e,this._requests=new Set,a!=null?this._bucket=bl.makeFromBucketSpec(a,this._host):this._bucket=UQ(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=bl.makeFromBucketSpec(this._url,t):this._bucket=UQ(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){tF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){tF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Rc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new hg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new F1e(Cee());{const i=z1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const QQ="@firebase/storage",HQ="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ree="storage";function QP(e,t,r){return e=Yn(e),Ebe(e,t,r)}function Obe(e,t,r){return e=Yn(e),Cbe(e,t,r)}function Dbe(e){return e=Yn(e),Nbe(e)}function D4(e){return e=Yn(e),Sbe(e)}function Pbe(e){return e=Yn(e),kbe(e)}function z2(e,t){return e=Yn(e),Ibe(e,t)}function HP(e=s4(),t){e=Yn(e);const n=F2(e,Ree).getImmediate({identifier:t}),a=LD("storage");return a&&Rbe(n,...a),n}function Rbe(e,t,r,n={}){Fbe(e,t,r,n)}function Lbe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new UP(r,n,a,t,Ig)}function Mbe(){gm(new xh(Ree,Lbe,"PUBLIC").setMultipleInstances(!0)),zu(QQ,HQ,""),zu(QQ,HQ,"esm2020")}Mbe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ube="type.googleapis.com/google.protobuf.Int64Value",Qbe="type.googleapis.com/google.protobuf.UInt64Value";function Lee(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function f_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>f_(t));if(typeof e=="function"||typeof e=="object")return Lee(e,t=>f_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function a1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case Ube:case Qbe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>a1(t)):typeof e=="function"||typeof e=="object"?Lee(e,t=>a1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ec extends Gd{constructor(t,r,n){super(`${VP}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,ec.prototype)}}function Hbe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function h_(e,t){let r=Hbe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!VQ[i])return new ec("internal","internal");r=VQ[i],n=i}const l=s.message;typeof l=="string"&&(n=l),a=s.details,a!==void 0&&(a=a1(a))}}catch{}return r==="ok"?null:new ec(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vbe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Rc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="us-central1",zbe=/^data: (.*?)(?:\n|$)/;function $be(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new ec("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Gbe{constructor(t,r,n,a,s=rF,i=(...l)=>fetch(...l)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Vbe(t,r,n,a),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=rF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Kbe(e,t,r){const n=Dh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(n4(e.emulatorOrigin),a4("Functions",!0))}function qbe(e,t,r){const n=a=>Xbe(e,t,a,{});return n.stream=(a,s)=>Jbe(e,t,a,s),n}async function Wbe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function Mee(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Xbe(e,t,r,n){const a=e._url(t);return Ybe(e,a,r,n)}async function Ybe(e,t,r,n){r=f_(r);const a={data:r},s=await Mee(e,n),i=n.timeout||7e4,l=$be(i),c=await Promise.race([Wbe(t,a,s,e.fetchImpl),l.promise,e.cancelAllRequests]);if(l.cancel(),!c)throw new ec("cancelled","Firebase Functions instance was deleted.");const u=h_(c.status,c.json);if(u)throw u;if(!c.json)throw new ec("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ec("internal","Response is missing data field.");return{data:a1(d)}}function Jbe(e,t,r,n){const a=e._url(t);return Zbe(e,a,r,n||{})}async function Zbe(e,t,r,n){var h;r=f_(r);const a={data:r},s=await Mee(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const x=new ec("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=h_(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let l,c;const u=new Promise((m,g)=>{l=m,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const m=new ec("cancelled","Request was cancelled.");c(m)});const d=i.body.getReader(),f=eye(d,l,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:g,done:x}=await m.read();return{value:g,done:x}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function eye(e,t,r,n){const a=(i,l)=>{const c=i.match(zbe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(a1(d.result));return}if("message"in d){l.enqueue(a1(d.message));return}if("error"in d){const f=h_(0,d);l.error(f),r(f);return}}catch(d){if(d instanceof ec){l.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let l="";return c();async function c(){if(n!=null&&n.aborted){const u=new ec("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){l.trim()&&a(l.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new ec("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}l+=s.decode(u,{stream:!0});const f=l.split(`
`);l=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof ec?u:h_(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const zQ="@firebase/functions",$Q="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tye="auth-internal",rye="app-check-internal",nye="messaging-internal";function aye(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(tye),i=r.getProvider(nye),l=r.getProvider(rye);return new Gbe(a,s,i,l,n)};gm(new xh(VP,t,"PUBLIC").setMultipleInstances(!0)),zu(zQ,$Q,e),zu(zQ,$Q,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(e=s4(),t=rF){const n=F2(Yn(e),VP).getImmediate({identifier:t}),a=LD("functions");return a&&sye(n,...a),n}function sye(e,t,r){Kbe(Yn(e),t,r)}function R0(e,t,r){return qbe(Yn(e),t)}aye();const iye={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},P4=QD(iye),Ug=PJ(P4),wr=EP(P4),zP=HP(P4),$P=sv(P4,"us-central1"),Uee=Object.freeze(Object.defineProperty({__proto__:null,auth:Ug,db:wr,functions:$P,storage:zP},Symbol.toStringTag,{value:"Module"})),oye=async(e,t)=>{try{return(await Jme(Ug,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},W3=async()=>{try{await tpe(Ug)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},lye=async e=>{try{await Yme(Ug,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},Qee=async e=>{try{const t=sr(wr,"usuarios",e),r=await Rg(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Yt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Yt||{}),dn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(dn||{}),Tp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Tp||{});const cye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),uye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 003.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0120.25 6v1.5m0 9V18A2.25 2.25 0 0118 20.25h-1.5m-9 0H6A2.25 2.25 0 013.75 18v-1.5M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),Ds="w-6 h-6",R4="w-24 h-24",GP=()=>o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),dye=()=>o.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M9 18h6"}),o.jsx("path",{d:"M10 22h4"}),o.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),Aye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),fye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Ry=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Ly=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Hee=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),hye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:R4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),mye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:R4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),pye=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:R4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),gye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:R4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),xye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),GQ=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),FC=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),X3=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),OC=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Y3=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),KQ=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),vye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),bye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),yye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),wye=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),DC=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),Eye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),J3=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),Cye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ds,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Nye=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ds,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),qQ=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ds,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),PC=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ds,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),_ye=[{id:Yt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:o.jsx(hye,{})},{id:Yt.PROFESORADO,label:"Profesorado",icon:o.jsx(mye,{})},{id:Yt.COORDINACION_TP,label:"Coordinación TP",icon:o.jsx(pye,{})},{id:Yt.ESTUDIANTE,label:"Estudiantes",icon:o.jsx(gye,{})}],Sye={[Yt.SUBDIRECCION]:[{name:"Dashboard",icon:o.jsx(xye,{})},{name:"Administración",icon:o.jsx(wye,{})},{name:"Seguimiento Curricular",icon:o.jsx(Nye,{})},{name:"Acompañamiento docente",icon:o.jsx(yye,{})},{name:"Análisis Taxonómico",icon:o.jsx(qQ,{})},{name:"SIMCE",icon:o.jsx(PC,{})},{name:"Interdisciplinario",icon:o.jsx(J3,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:o.jsx(GQ,{})},{name:"Crear horarios",icon:o.jsx(X3,{})},{name:"Seguimiento de acciones pedagógicas",icon:o.jsx(OC,{})},{name:"Inclusión",icon:o.jsx(DC,{})},{name:"Calendario Académico",icon:o.jsx(FC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ry,{})},{name:"Mensajería Interna",icon:o.jsx(Ly,{})},{name:"Generador de Actas",icon:o.jsx(Y3,{})}],[Yt.PROFESORADO]:[{name:"Planificación",icon:o.jsx(KQ,{})},{name:"Mis Acompañamientos",icon:o.jsx(Eye,{})},{name:"Recursos de Aprendizaje",icon:o.jsx(vye,{})},{name:"Análisis Taxonómico",icon:o.jsx(qQ,{})},{name:"SIMCE",icon:o.jsx(PC,{})},{name:"Interdisciplinario",icon:o.jsx(J3,{})},{name:"Inclusión",icon:o.jsx(DC,{})},{name:"Actividades Remotas",icon:o.jsx(bye,{})},{name:"Evaluación de Aprendizajes",icon:o.jsx(Y3,{})},{name:"Evaluaciones Formativas",icon:o.jsx(OC,{})},{name:"Desarrollo Profesional",icon:o.jsx(DC,{})},{name:"Evaluación de Competencias",icon:o.jsx(uye,{})},{name:"Calendario Académico",icon:o.jsx(FC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ry,{})},{name:"Mensajería Interna",icon:o.jsx(Ly,{})},{name:"Generador de Actas",icon:o.jsx(GQ,{})}],[Yt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:o.jsx(OC,{})},{name:"Asistencia Dual",icon:o.jsx(X3,{})},{name:"Pañol",icon:o.jsx(Cye,{})},{name:"SIMCE",icon:o.jsx(PC,{})},{name:"Gestión de Empresas",icon:o.jsx(cye,{})},{name:"Calendario Académico",icon:o.jsx(FC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ry,{})},{name:"Mensajería Interna",icon:o.jsx(Ly,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Desarrollo Profesional",icon:o.jsx(DC,{})},{name:"Generador de Actas",icon:o.jsx(Y3,{})}],[Yt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:o.jsx(KQ,{})},{name:"Evaluación Formativa",icon:o.jsx(OC,{})},{name:"SIMCE",icon:o.jsx(PC,{})},{name:"Tareas Interdisciplinarias",icon:o.jsx(J3,{})},{name:"Asistencia a Empresa",icon:o.jsx(X3,{})},{name:"Calendario Académico",icon:o.jsx(FC,{})},{name:"Muro de Anuncios",icon:o.jsx(Ry,{})},{name:"Mensajería Interna",icon:o.jsx(Ly,{})}]},WQ=["1º Medio","2º Medio","3º Medio","4º Medio"],ks=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ns=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],nF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Bv={[dn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},kye=Object.values(Tp),Z3=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],eB=["Vinculado","Desvinculado","En proceso","Empresa"],qp=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],jye=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],m_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],lw=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],Vee=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],RC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],Bye=["Mecánica Industrial","Mecánica Automotriz"],Tye=["INACAP","UNAB","DUOC","Universidad de Las Américas"],Iye={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},Fye=["Pasantía","Visita","Certificación","Formación en empresa"],Oye={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},Dye={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},Yf={"Liderazgo Curricular":["Planificación y organización del currículo","Asegurar la cobertura y secuenciación de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prácticas Pedagógicas en el Aula":["Estrategias de enseñanza y metodologías activas","Evaluación de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologías para apoyar la enseñanza"],"Acompañamiento y Desarrollo Profesional Docente":["Observación de clases y retroalimentación","Planes de formación continua y actualización pedagógica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluación de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedagógicas","Evaluaciones internas y externas","Ajuste de estrategias según resultados y metas de aprendizaje"]},XQ=["Pendiente","En Proceso","Cumplida"],YQ=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],Pye=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=_.useState(""),[s,i]=_.useState(""),[l,c]=_.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>l==="forgot"?o.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),o.jsx("div",{className:"text-sm text-center",children:o.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):l==="forgot_sent"?o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),o.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",o.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),o.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),o.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&o.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:o.jsx("p",{children:r})}),o.jsx("div",{className:"text-sm text-center",children:o.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),o.jsx("div",{children:o.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"mb-4 flex justify-center items-center",children:o.jsx(GP,{})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:l==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),o.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),o.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},LC=({trigger:e,children:t,onOpen:r})=>{const[n,a]=_.useState(!1),s=_.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},l=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return _.useEffect(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),o.jsxs("div",{className:"relative",ref:s,children:[o.jsx("div",{onClick:i,children:e}),n&&o.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},JQ="usuariosLiceo",Rye=({user:e,onClose:t,onSave:r})=>{const[n,a]=_.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=l=>{a({...n,[l.target.name]:l.target.value})},i=l=>{l.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(JQ);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(JQ,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:l=>l.stopPropagation(),children:o.jsxs("form",{onSubmit:i,children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),o.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),o.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),o.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},ZQ="usuariosLiceo",Lye=({user:e,onClose:t,onSave:r})=>{const[n,a]=_.useState(""),[s,i]=_.useState(""),[l,c]=_.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(ZQ);let m=h?JSON.parse(h):[];const g=m.findIndex(x=>x.id===e.id);g>-1?m[g]=f:m.push(f),localStorage.setItem(ZQ,JSON.stringify(m)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:o.jsxs("form",{onSubmit:u,children:[o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),o.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l&&o.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:o.jsx("p",{children:l})})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mye=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uye=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),eH=e=>{const t=Uye(e);return t.charAt(0).toUpperCase()+t.slice(1)},zee=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Qye=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...l},c)=>_.createElement("svg",{ref:c,...Hye,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:zee("lucide",a),...!s&&!Qye(l)&&{"aria-hidden":"true"},...l},[...i.map(([u,d])=>_.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=(e,t)=>{const r=_.forwardRef(({className:n,...a},s)=>_.createElement(Vye,{ref:s,iconNode:t,className:zee(`lucide-${Mye(eH(e))}`,`lucide-${e}`,n),...a}));return r.displayName=eH(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zye=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],$ye=Vt("activity",zye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gye=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],MC=Vt("arrow-left",Gye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],qye=Vt("bell-ring",Kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wye=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Xye=Vt("book-marked",Wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yye=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Jye=Vt("book-open-check",Yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zye=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Gc=Vt("book-open",Zye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],tH=Vt("book",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],rwe=Vt("brain-circuit",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Hw=Vt("brain",nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const awe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],p_=Vt("briefcase",awe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const swe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],g_=Vt("building-2",swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iwe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],owe=Vt("building",iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],cwe=Vt("calendar-check",lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uwe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ac=Vt("calendar",uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Mu=Vt("chart-column",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Awe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],fwe=Vt("chart-line",Awe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],mwe=Vt("chart-no-axes-column",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],cw=Vt("chart-pie",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gwe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xwe=Vt("check",gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vwe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Vw=Vt("chevron-left",vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bwe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],KP=Vt("chevron-right",bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$u=Vt("circle-alert",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wwe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qP=Vt("circle-check-big",wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ewe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bi=Vt("circle-check",Ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],UC=Vt("circle-plus",Cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_we=Vt("circle-question-mark",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rH=Vt("circle-x",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],jwe=Vt("clipboard-check",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],mg=Vt("clipboard-list",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Twe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],th=Vt("clock",Twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iwe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cm=Vt("download",Iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],tB=Vt("external-link",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dwe=Vt("eye",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pwe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Rwe=Vt("factory",Pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lwe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Mwe=Vt("file-check",Lwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],Qwe=Vt("file-pen",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]],Vwe=Vt("file-play",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zwe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],$ee=Vt("file-spreadsheet",zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $we=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ld=Vt("file-text",$we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],rB=Vt("files",Gwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kwe=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],qwe=Vt("folder-closed",Kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wwe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],nH=Vt("folder-open",Wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xwe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],L4=Vt("funnel",Xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ywe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],x_=Vt("gauge",Ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jwe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],pg=Vt("graduation-cap",Jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zwe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],e2e=Vt("hash",Zwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2e=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],Gee=Vt("hourglass",t2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],n2e=Vt("image",r2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],s2e=Vt("info",a2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2e=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Kee=Vt("layout-dashboard",i2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],WP=Vt("layers",o2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],c2e=Vt("layout-grid",l2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],d2e=Vt("layout-list",u2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2e=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],aH=Vt("link-2",A2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],h2e=Vt("link",f2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],uw=Vt("list-checks",m2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vl=Vt("loader-circle",p2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],x2e=Vt("mail",g2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],v_=Vt("map-pin",v2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2e=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],y2e=Vt("megaphone",b2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],E2e=Vt("menu",w2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],qee=Vt("message-square",C2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2e=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],sH=Vt("notebook-pen",N2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],S2e=Vt("palette",_2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],aF=Vt("pen-line",k2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],XP=Vt("pencil",j2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],T2e=Vt("percent",B2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cl=Vt("plus",I2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2e=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],sF=Vt("presentation",F2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2e=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],D2e=Vt("puzzle",O2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],iF=Vt("refresh-ccw",P2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],L2e=Vt("route",R2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],U2e=Vt("ruler",M2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$d=Vt("save",Q2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2e=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Tv=Vt("school",H2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2e=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],iH=Vt("scroll-text",V2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$2=Vt("search",z2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],G2e=Vt("settings",$2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],q2e=Vt("shield-check",K2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2e=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Wp=Vt("sparkles",W2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Wee=Vt("square-pen",X2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],oF=Vt("square-plus",Y2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Z2e=Vt("star",J2e);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eEe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],s1=Vt("target",eEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tEe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xi=Vt("trash-2",tEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rEe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],b_=Vt("trending-up",rEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nEe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oH=Vt("triangle-alert",nEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aEe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 16h.01",key:"plv8zi"}],["path",{d:"M22 7a1 1 0 0 0-1-1h-2a2 2 0 0 1-1.143-.359L13.143 2.36a2 2 0 0 0-2.286-.001L6.143 5.64A2 2 0 0 1 5 6H3a1 1 0 0 0-1 1v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2z",key:"1ogmi3"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["path",{d:"M6 16h.01",key:"1pmjb7"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}]],sEe=Vt("university",aEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iEe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],K1=Vt("upload",iEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oEe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lH=Vt("user-cog",oEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cEe=Vt("user-minus",lEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],lF=Vt("user-plus",uEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dEe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zw=Vt("user",dEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AEe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],ny=Vt("users-round",AEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fEe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nl=Vt("users",fEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hEe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Ip=Vt("video",hEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mEe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],pEe=Vt("wand-sparkles",mEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gEe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],A5=Vt("wrench",gEe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xEe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Nm=Vt("x",xEe);async function vEe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Is()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await hn(vt(wr,"notificaciones"),t)).id}function bEe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const l=Array.from(i.values()).sort((c,u)=>{var h,m;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((m=u.createdAt)!=null&&m.toDate?u.createdAt.toDate().getTime():0)-d});t(l)};if(e.email){const i=zt(vt(wr,"notificaciones"),Br("docenteEmailLower","==",e.email.toLowerCase()),hr("createdAt","desc"));r.push(fr(i,l=>{n=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=zt(vt(wr,"notificaciones"),Br("docenteNombre","==",e.nombreCompleto),hr("createdAt","desc"));r.push(fr(i,l=>{a=l.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function yEe(e){const t=sr(wr,"notificaciones",e);await cc(t,{leida:!0})}async function wEe(e){const t=sr(wr,"notificaciones",e);await Ra(t)}const cH="anunciosMuro",uH="mensajesInternos",dH="lir-read-status",EEe=({user:e})=>{if(e.fotoUrl)return o.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return o.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},CEe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:l,refreshUnreadCount:c})=>{const[u,d]=_.useState([]),[f,h]=_.useState([]),[m,g]=_.useState(!1),[x,v]=_.useState(!1),[y,w]=_.useState([]),N=_.useCallback(()=>{try{const T=localStorage.getItem(`${dH}-${e.id}`);return T?JSON.parse(T):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),B=_.useCallback(T=>{try{localStorage.setItem(`${dH}-${e.id}`,JSON.stringify(T))}catch(L){console.error("Failed to set read status:",L)}},[e.id]);_.useEffect(()=>{const T=JSON.parse(localStorage.getItem(cH)||"[]"),L=N();d(T.filter(j=>!L.announcements.includes(j.id)));const R=JSON.parse(localStorage.getItem(uH)||"[]");h(R.filter(j=>j.para===e.email).sort((j,P)=>new Date(P.fecha).getTime()-new Date(j.fecha).getTime()).slice(0,5))},[e.id,N,l]),_.useEffect(()=>{if(!(e!=null&&e.email))return;const T=bEe({email:e.email,nombreCompleto:e.nombreCompleto},L=>{const R=L.filter(j=>j.tipo&&(j.tipo.toLowerCase()==="pie"||j.tipo==="nueva_intervencion"));w(R)});return()=>T()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const k=()=>{const T=N(),L=JSON.parse(localStorage.getItem(cH)||"[]").map(R=>R.id);T.announcements=L,B(T),d([])},F=()=>{const T=N(),R=JSON.parse(localStorage.getItem(uH)||"[]").filter(j=>j.para===e.email).map(j=>j.id);T.messages=[...new Set([...T.messages,...R])],B(T),c()},E=y.filter(T=>!T.leida).length,S=T=>{var L;try{const R=(L=T.createdAt)!=null&&L.toDate?T.createdAt.toDate():new Date(T.createdAt);return R?R.toLocaleString("es-CL"):""}catch{return""}};return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:o.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:o.jsx(Aye,{})}),o.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),o.jsx("div",{className:"flex-1 flex justify-center",children:o.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:o.jsx(fye,{})})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(LC,{onOpen:k,trigger:o.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[o.jsx(Ry,{}),u.length>0&&o.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:o.jsxs("div",{className:"p-2",children:[o.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),o.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(T=>o.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[o.jsx("p",{className:"font-bold dark:text-slate-200",children:T.titulo}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:T.mensaje})]},T.id)),u.length===0&&o.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),o.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),o.jsx(LC,{trigger:o.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[o.jsx(D2e,{className:"w-5 h-5"}),E>0&&o.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:o.jsxs("div",{className:"p-2 w-80",children:[o.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),o.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&o.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(T=>o.jsx("li",{className:"p-2 text-sm",children:o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:T.titulo}),o.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:T.mensaje}),T.estudianteNombre&&o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",o.jsx("b",{children:T.estudianteNombre})]}),o.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:S(T)})]}),o.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!T.leida&&o.jsx("button",{onClick:()=>T.id&&yEe(T.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),o.jsx("button",{onClick:()=>T.id&&wEe(T.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},T.id))]})]})}),o.jsx(LC,{onOpen:F,trigger:o.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[o.jsx(Ly,{}),l>0&&o.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l})]}),children:o.jsxs("div",{className:"p-2",children:[o.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),o.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(T=>o.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[o.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",T.de]}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:T.asunto})]},T.id)),f.length===0&&o.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),o.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),o.jsx(LC,{trigger:o.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:o.jsx(EEe,{user:e})}),children:o.jsxs("div",{className:"p-2",children:[o.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),o.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>v(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&o.jsx("li",{children:o.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),o.jsx("li",{children:o.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&o.jsx(Rye,{user:e,onClose:()=>g(!1),onSave:n}),x&&o.jsx(Lye,{user:e,onClose:()=>v(!1),onSave:n})]})},NEe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},YP=h9().length?h9()[0]:QD(NEe),ft=EP(YP),y_=PJ(YP),Xee=HP(YP),Yee=Object.freeze(Object.defineProperty({__proto__:null,auth:y_,db:ft,storage:Xee},Symbol.toStringTag,{value:"Module"})),G2="reemplazos_docentes",_Ee="usuarios",JP=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},SEe=e=>{const t=e.data();return{id:e.id,...t}},kEe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await hn(vt(ft,G2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},jEe=async(e,t)=>{try{const r=sr(ft,G2,e),n=await Rg(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await Ra(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},BEe=(e,t,r=50)=>{try{const n=zt(vt(ft,G2),Br("userId","==",e),hr("diaAusencia","desc"),Rd(r));return fr(n,a=>{const s=a.docs.map(JP);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},TEe=e=>{try{const t=zt(vt(ft,_Ee),Br("profile","==",Yt.PROFESORADO));return fr(t,n=>{const a=n.docs.map(SEe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},IEe=async e=>{try{const t=zt(vt(ft,G2),Br("userId","==",e)),n=(await Tn(t)).docs.map(JP),a=n.length,s=n.filter(l=>l.resultado==="Hora realizada").length,i=n.filter(l=>l.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},FEe=async(e,t)=>{try{if(!t.trim())return[];const r=zt(vt(ft,G2),Br("userId","==",e),hr("diaAusencia","desc"),Rd(100)),a=(await Tn(r)).docs.map(JP),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},OEe=Array.from({length:12},(e,t)=>t+1),AH={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},DEe=e=>{const[t,r]=_.useState([]),[n,a]=_.useState(!0),[s,i]=_.useState(null);_.useEffect(()=>e?BEe(e,f=>{r(f),a(!1)}):void 0,[e]);const l=_.useCallback(async d=>{try{return i(null),await kEe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=_.useCallback(async d=>{try{i(null),await jEe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=_.useCallback(async d=>{try{return i(null),d.trim()?await FEe(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:l,remove:c,search:u}},PEe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0);_.useEffect(()=>TEe(i=>{t(i),n(!1)}),[]);const a=_.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},jx=({label:e,icon:t,children:r})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),o.jsxs("div",{className:"relative",children:[t&&o.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),REe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",LEe="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",MEe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",_0=({title:e,value:t,icon:r})=>o.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),o.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),UEe=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return o.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),o.jsx("div",{className:"grid gap-3",children:e.map(r=>o.jsxs("div",{children:[o.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[o.jsx("span",{children:r.label}),o.jsx("span",{children:r.value})]}),o.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:o.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},QEe=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[o.jsx(Mu,{className:"h-5 w-5 text-slate-400"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):o.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[o.jsx("span",{className:"font-medium",children:n.label}),o.jsx("span",{children:n.value})]}),o.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:o.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},HEe=({userId:e,reemplazos:t})=>{const[r,n]=_.useState(null),[a,s]=_.useState(!1),i=_.useCallback(async()=>{try{s(!0);const v=await IEe(e);n(v)}finally{s(!1)}},[e]);_.useEffect(()=>{e&&i()},[e,i]);const l=new Date,c=l.getMonth(),u=l.getFullYear(),d=_.useMemo(()=>(t||[]).filter(v=>{const y=new Date(v.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(v=>v.docenteAusente).filter(Boolean)),h=new Set(d.map(v=>v.docenteReemplazante).filter(Boolean)),m=new Set(d.map(v=>v.curso).filter(Boolean)),g=new Set(d.map(v=>v.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:m.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?o.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[o.jsx(vl,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx(_0,{title:"Total",value:r.totalReemplazos,icon:o.jsx(qye,{className:"h-6 w-6"})}),o.jsx(_0,{title:"Realizadas",value:r.horasRealizadas,icon:o.jsx(Bi,{className:"h-6 w-6"})}),o.jsx(_0,{title:"Cubiertas",value:r.horasCubiertas,icon:o.jsx(jwe,{className:"h-6 w-6"})}),o.jsx(_0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:o.jsx(T2e,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx(_0,{title:"Profesores ausentes",value:f.size,icon:o.jsx(cEe,{className:"h-6 w-6"})}),o.jsx(_0,{title:"Profesores que reemplazan",value:h.size,icon:o.jsx(lF,{className:"h-6 w-6"})}),o.jsx(_0,{title:"Cursos (únicos)",value:m.size,icon:o.jsx(Nl,{className:"h-6 w-6"})}),o.jsx(_0,{title:"Asignaturas ausentes",value:g.size,icon:o.jsx(Gc,{className:"h-6 w-6"})})]}),o.jsx(UEe,{data:x})]})},VEe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:l}=DEe(t),{profesorNames:c,loading:u}=PEe(),[d,f]=_.useState(AH),[h,m]=_.useState(""),[g,x]=_.useState([]),[v,y]=_.useState(null),[w,N]=_.useState(!1),[B,k]=_.useState(!1);_.useEffect(()=>{(async()=>{if(!h.trim())return x(r);k(!0);try{const G=await s(h);x(G)}finally{k(!1)}})()},[r,h,s]);const F=_.useCallback(W=>{const{name:G,value:K}=W.target;f(ee=>({...ee,[G]:K}))},[]),E=_.useCallback(W=>{f(G=>{const ee=G.bloquesAfectados.includes(W)?G.bloquesAfectados.filter(X=>X!==W):[...G.bloquesAfectados,W].sort((X,D)=>X-D);return{...G,bloquesAfectados:ee}})},[]),S=_.useCallback(async W=>{W.preventDefault(),y(null),N(!0);const{docenteAusente:G,asignaturaAusente:K,curso:ee,diaAusencia:X,bloquesAfectados:D,docenteReemplazante:Q,asignaturaReemplazante:z}=d;if(!G||!K||!ee||!X||!Q||!z||D.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),N(!1);return}if(G===Q){y("El docente ausente y el reemplazante no pueden ser la misma persona."),N(!1);return}try{const J=K.trim().toLowerCase()===z.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",te={...d,resultado:J};await n(te),f(AH);const se=document.createElement("div");se.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",se.textContent=J==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(se),setTimeout(()=>{document.body.contains(se)&&document.body.removeChild(se)},2500)}catch(J){console.error(J),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{N(!1)}},[d,n]),T=_.useCallback(async W=>{if(window.confirm("¿Eliminar este registro?"))try{await a(W)}catch(G){console.error(G),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),L="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return o.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const R=new Date,j=R.getMonth(),P=R.getFullYear(),M=_.useMemo(()=>(r||[]).filter(W=>{if(!W.diaAusencia)return!1;const G=new Date(W.diaAusencia+"T00:00:00");return G.getMonth()===j&&G.getFullYear()===P}),[r,j,P]),Z=_.useMemo(()=>{const W={};for(const G of M){const K=G.curso||"Sin curso";W[K]=(W[K]||0)+1}return W},[M]),V=_.useMemo(()=>Object.entries(Z).sort(([W],[G])=>W.localeCompare(G,"es")).map(([W,G])=>({label:W,value:G})),[Z]);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),o.jsx(HEe,{userId:t,reemplazos:r})]}),o.jsx(QEe,{data:V}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?o.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[o.jsx(vl,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):o.jsxs("form",{onSubmit:S,className:"space-y-8",children:[o.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nl,{className:"h-5 w-5 text-slate-400"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),o.jsx(jx,{label:"Nombre",icon:o.jsx(pg,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:F,className:L,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(W=>o.jsx("option",{value:W,children:W},W))]})}),o.jsx(jx,{label:"Asignatura",icon:o.jsx(Gc,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:F,className:L,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),ks.map(W=>o.jsx("option",{value:W,children:W},W))]})}),o.jsx(jx,{label:"Curso",icon:o.jsx(Nl,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"curso",value:d.curso,onChange:F,className:L,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(W=>o.jsx("option",{value:W,children:W},W))]})}),o.jsx(jx,{label:"Día de ausencia",icon:o.jsx(ac,{className:"h-5 w-5"}),children:o.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:F,className:L,required:!0,disabled:w})}),o.jsxs("div",{children:[o.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[o.jsx(th,{className:"h-5 w-5 text-slate-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:OEe.map(W=>{const G=d.bloquesAfectados.includes(W);return o.jsx("button",{type:"button",onClick:()=>E(W),disabled:w,className:`${REe} ${G?LEe:MEe}`,"aria-pressed":G,children:W},W)})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nl,{className:"h-5 w-5 text-slate-400"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),o.jsx(jx,{label:"Nombre",icon:o.jsx(pg,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:F,className:L,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(W=>o.jsx("option",{value:W,children:W},W))]})}),o.jsx(jx,{label:"Asignatura",icon:o.jsx(Gc,{className:"h-5 w-5"}),children:o.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:F,className:L,required:!0,disabled:w,children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),ks.map(W=>o.jsx("option",{value:W,children:W},W))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&o.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[o.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),o.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[o.jsx(Bi,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),o.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(v||l)&&o.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:v||l}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?o.jsxs(o.Fragment,{children:[o.jsx(vl,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):o.jsxs(o.Fragment,{children:[o.jsx($d,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),o.jsxs("div",{className:"relative w-full max-w-md",children:[o.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:B?o.jsx(vl,{className:"h-5 w-5 animate-spin"}):o.jsx($2,{className:"h-5 w-5"})}),o.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:W=>m(W.target.value),className:L,disabled:B})]})]}),i?o.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[o.jsx(vl,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:o.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(W=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:W},W))})}),o.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(W=>o.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(W.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:W.curso}),o.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[W.docenteAusente,o.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:W.asignaturaAusente})]}),o.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[W.docenteReemplazante,o.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:W.asignaturaReemplazante})]}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:W.bloquesAfectados.join(", ")}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:o.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${W.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[o.jsx(Bi,{className:"h-4 w-4"}),W.resultado]})}),o.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:o.jsx("button",{onClick:()=>T(W.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:o.jsx(xi,{className:"h-4 w-4"})})})]},W.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&o.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},zEe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=vt(wr,"reemplazos"),r=zt(t,hr("fecha","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},$Ee=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=vt(wr,"acompanamientos"),r=zt(t,hr("fecha","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},GEe=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=vt(wr,"calendar_events"),r=zt(t,hr("date","asc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},jA=({title:e,value:t,description:r,isLoading:n=!1})=>o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?o.jsxs("div",{className:"flex items-center mt-2",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),bp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=_.useMemo(()=>t.map(l=>typeof l.value=="number"?l.value:parseFloat(String(l.value))||0),[t]),i=_.useMemo(()=>Math.max(...s,1),[s]);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?o.jsxs("div",{className:"flex justify-center items-center py-8",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):o.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((l,c)=>(typeof c.value=="number"?c.value:0)-(typeof l.value=="number"?l.value:0)).map((l,c)=>{const u=typeof l.value=="number"?l.value:parseFloat(String(l.value))||0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:l.label}),o.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(l.value)})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:o.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},l.label+c)}):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},KEe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(l(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const m=zEe(v=>{t(v),h()}),g=$Ee(v=>{n(v),h()}),x=GEe(v=>{s(v),h()});return()=>{m(),g(),x()}}catch(m){console.error("❌ Error al configurar suscripciones del dashboard:",m),u(m instanceof Error?m.message:"Error al cargar datos del dashboard"),l(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},qEe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=KEe(),[i,l]=_.useState(lw);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),_.useEffect(()=>{try{const m=localStorage.getItem("acompanamientoDocenteCustomRubrica");l(m?JSON.parse(m):lw)}catch(m){console.error("Error al leer rúbrica personalizada",m),l(lw)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),o.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[o.jsx("p",{children:o.jsx("strong",{children:"Debug Info:"})}),o.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),o.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),o.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),o.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=_.useMemo(()=>{const m=t.length;if(m===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(k=>k.resultado==="Hora realizada").length,x=m-g,v=`${(g/m*100).toFixed(1)}%`,y=(k,F)=>k.reduce((E,S)=>{const T=S[F];return typeof T=="string"&&(E[T]=(E[T]||0)+1),E},{}),w=y(t,"docenteAusente"),N=y(t,"docenteReemplazante"),B=y(t,"curso");return{totalInasistencias:m,horasRealizadas:g,horasCubiertas:x,tasaCobertura:v,inasistenciasPorDocente:Object.entries(w).map(([k,F])=>({label:k,value:F})),reemplazosPorDocente:Object.entries(N).map(([k,F])=>({label:k,value:F})),inasistenciasPorCurso:Object.entries(B).map(([k,F])=>({label:k,value:F})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=_.useMemo(()=>{const m=r.length;if(m===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(F=>{F.criteria.forEach(E=>{g.set(E.name,F.domain)})});let x=0,v=0;const y={},w={};r.forEach(F=>{y[F.docente]||(y[F.docente]={total:0,count:0}),Object.entries(F.rubricaResultados).forEach(([E,S])=>{x+=S,v++,y[F.docente].total+=S,y[F.docente].count++;const T=g.get(E);T&&(w[T]||(w[T]={total:0,count:0}),w[T].total+=S,w[T].count++)})});const N=v>0?(x/v).toFixed(2):"N/A",B=Object.entries(y).map(([F,E])=>({label:F,value:E.count>0?(E.total/E.count).toFixed(2):0})),k=Object.entries(w).map(([F,E])=>({label:F,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:m,promedioGeneral:N,desempenoPorDocente:B,desempenoPorDominio:k}},[r,i]),d=_.useMemo(()=>{const m={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const x of n)m.hasOwnProperty(x.type)&&m[x.type]++;const g=Object.entries(m).map(([x,v])=>({label:Bv[x].label,value:v}));return{totalEvaluaciones:m[dn.EVALUACION],totalActos:m[dn.ACTO],totalActividadesFocalizadas:m[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:m[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[o.jsx("span",{className:"text-6xl mb-4",children:"📊"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),o.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[o.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),o.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),o.jsx("p",{children:"• Calendario Académico"})]})]}):o.jsxs("div",{className:"space-y-12 animate-fade-in",children:[o.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),o.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),o.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),o.jsx(jA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),o.jsx(jA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),o.jsx(jA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(bp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),o.jsx(bp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),o.jsx(bp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),o.jsx(bp,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),o.jsx(jA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(bp,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a}),o.jsx(bp,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:m=>Number(m).toFixed(2),isLoading:a})]})]}),n.length>0&&o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(jA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),o.jsx(jA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),o.jsx(jA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),o.jsx(jA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(bp,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?o.jsxs("div",{className:"flex justify-center items-center py-8",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(m=>new Date(m.date)>=new Date).slice(0,5).map((m,g)=>{var x,v;return o.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:m.responsables||"Evento sin título"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(m.date).toLocaleDateString("es-CL")}),m.ubicacion&&o.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",m.ubicacion]})]}),o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Bv[m.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((v=Bv[m.type])==null?void 0:v.label)||m.type})]})},m.id||g)}),n.filter(m=>new Date(m.date)>=new Date).length===0&&o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(m=>m.docenteAusente),...r.map(m=>m.docente)]).size}),o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(m=>m.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),o.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[o.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),o.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var w_={};w_.version="0.18.5";var Jee=1252,WEe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ZP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},eR=function(e){WEe.indexOf(e)!=-1&&(Jee=ZP[0]=e)};function XEe(){eR(1252)}var Id=function(e){eR(e)};function tR(){Id(1200),XEe()}function fH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function YEe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Zee(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var My=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?YEe(e.slice(2)):t==254&&r==255?Zee(e.slice(2)):t==65279?e.slice(1):e},QC=function(t){return String.fromCharCode(t)},hH=function(t){return String.fromCharCode(t)},$w,X0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Gw(e){for(var t="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=X0.charAt(s)+X0.charAt(i)+X0.charAt(l)+X0.charAt(c);return t}function Kc(e){var t="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=X0.indexOf(e.charAt(u++)),i=X0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),l=X0.indexOf(e.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=X0.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var xn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Rh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function _m(e){return xn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function mH(e){return xn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Mc=function(t){return xn?Rh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function M4(e){if(typeof ArrayBuffer>"u")return Mc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Hm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function JEe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function rR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return rR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Zi=xn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Rh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function ZEe(e){for(var t=[],r=0,n=e.length+250,a=_m(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=_m(65535),n=65530)}return t.push(a.slice(0,r)),Zi(t)}var _l=/\u0000/g,Uy=/[\u0001-\u0006]/g;function Iv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Fd(e,t){var r=""+e;return r.length>=t?r:_s("0",t-r.length)+r}function nR(e,t){var r=""+e;return r.length>=t?r:_s(" ",t-r.length)+r}function E_(e,t){var r=""+e;return r.length>=t?r:r+_s(" ",t-r.length)}function eCe(e,t){var r=""+Math.round(e);return r.length>=t?r:_s("0",t-r.length)+r}function tCe(e,t){var r=""+e;return r.length>=t?r:_s("0",t-r.length)+r}var pH=Math.pow(2,32);function Bx(e,t){if(e>pH||e<-pH)return eCe(e,t);var r=Math.round(e);return tCe(r,t)}function C_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var gH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],nB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rCe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Mr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},xH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nCe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function N_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Lp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=cCe(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var ete=new Date(1899,11,31,0,0,0),aCe=ete.getTime(),sCe=new Date(1900,2,1,0,0,0);function tte(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=sCe&&(r+=1440*60*1e3),(r-(aCe+(e.getTimezoneOffset()-ete.getTimezoneOffset())*6e4))/(1440*60*1e3)}function aR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function iCe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function oCe(e){var t=e<0?12:11,r=aR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function lCe(e){var t=aR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Kw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=oCe(e):t===10?r=e.toFixed(10).substr(0,12):r=lCe(e),aR(iCe(r.toUpperCase()))}function gg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Kw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ku(14,tte(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function cCe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function uCe(e,t,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return nB[r.m-1][1];case 5:return nB[r.m-1][0];default:return nB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return gH[r.q][0];default:return gH[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Fd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Fd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Fd(c,u):"";return d}function Y0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var rte=/%/g;function dCe(e,t,r){var n=t.replace(rte,""),a=t.length-n.length;return dh(e,n,r*Math.pow(10,2*a))+_s("%",a)}function ACe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return dh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function nte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+nte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var ate=/# (\?+)( ?)\/( ?)(\d+)/;function fCe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?_s(" ",e[1].length+1+e[4].length):nR(i,e[1].length)+e[2]+"/"+e[3]+Fd(l,e[4].length))}function hCe(e,t,r){return r+(t===0?"":""+t)+_s(" ",e[1].length+2+e[4].length)}var ste=/^#*0*\.([0#]+)/,ite=/\).*[0#]/,ote=/\(###\) ###\\?-####/;function pl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function vH(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function bH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function mCe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function pCe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ku(e,t,r){if(e.charCodeAt(0)===40&&!t.match(ite)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ku("n",n,r):"("+ku("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ACe(e,t,r);if(t.indexOf("%")!==-1)return dCe(e,t,r);if(t.indexOf("E")!==-1)return nte(t,r);if(t.charCodeAt(0)===36)return"$"+ku(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Bx(c,t.length);if(t.match(/^[#?]+$/))return a=Bx(r,0),a==="0"&&(a=""),a.length>t.length?a:pl(t.substr(0,t.length-a.length))+a;if(s=t.match(ate))return fCe(s,c,u);if(t.match(/^#+0+$/))return u+Bx(c,t.length-t.indexOf("0"));if(s=t.match(ste))return a=vH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+pl(s[1])).replace(/\.$/,"."+pl(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+_s("0",pl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+vH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Y0(Bx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ku(e,t,-r):Y0(""+(Math.floor(r)+mCe(r,s[1].length)))+"."+Fd(bH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return ku(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Iv(ku(e,t.replace(/[\\-]/g,""),r)),i=0,Iv(Iv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(ote))return a=ku(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=N_(c,Math.pow(10,i)-1,!1),a=""+u,d=dh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=E_(l[2],i),d.length<s[4].length&&(d=pl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=N_(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?nR(l[1],i)+s[2]+"/"+s[3]+E_(l[2],i):_s(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Bx(r,0),t.length<=a.length?a:pl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return pl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=bH(r,s[1].length),r<0?"-"+ku(e,t,-r):Y0(pCe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Fd(0,3-g.length):"")+g})+"."+Fd(i,s[1].length);switch(t){case"###,##0.00":return ku(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Y0(Bx(c,0));return m!=="0"?u+m:"";case"###,###.00":return ku(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ku(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function gCe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return dh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function xCe(e,t,r){var n=t.replace(rte,""),a=t.length-n.length;return dh(e,n,r*Math.pow(10,2*a))+_s("%",a)}function lte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+lte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function FA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(ite)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?FA("n",n,r):"("+FA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return gCe(e,t,r);if(t.indexOf("%")!==-1)return xCe(e,t,r);if(t.indexOf("E")!==-1)return lte(t,r);if(t.charCodeAt(0)===36)return"$"+FA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Fd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:pl(t.substr(0,t.length-a.length))+a;if(s=t.match(ate))return hCe(s,c,u);if(t.match(/^#+0+$/))return u+Fd(c,t.length-t.indexOf("0"));if(s=t.match(ste))return a=(""+r).replace(/^([^\.]+)$/,"$1."+pl(s[1])).replace(/\.$/,"."+pl(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+_s("0",pl(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Y0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+FA(e,t,-r):Y0(""+r)+"."+_s("0",s[1].length);if(s=t.match(/^#,#*,#0/))return FA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Iv(FA(e,t.replace(/[\\-]/g,""),r)),i=0,Iv(Iv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(ote))return a=FA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=N_(c,Math.pow(10,i)-1,!1),a=""+u,d=dh("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=E_(l[2],i),d.length<s[4].length&&(d=pl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=N_(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?nR(l[1],i)+s[2]+"/"+s[3]+E_(l[2],i):_s(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:pl(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return pl(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+FA(e,t,-r):Y0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Fd(0,3-g.length):"")+g})+"."+Fd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Y0(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return FA(e,t.slice(0,t.lastIndexOf(".")),r)+pl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function dh(e,t,r){return(r|0)===r?FA(e,t,r):ku(e,t,r)}function vCe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var cte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function q1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":C_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(cte))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function bCe(e,t,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,f,h="H";i<e.length;)switch(l=e.charAt(i)){case"G":if(!C_(e,i))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var m=e.charAt(++i),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Lp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Lp(t,r),u==null))return"";for(s=l;++i<e.length&&e.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"上":var x={t:l,v:l};if(u==null&&(u=Lp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(x.v=u.H>=12?"下午":"上午"),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=l;break;case"[":for(s=l;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(cte)){if(u==null&&(u=Lp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",q1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<e.length&&(l=e.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++i;break}var v=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",v<1&&(v=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[i].v.match(/[Hh]/)&&(v=1),v<2&&a[i].v.match(/[Mm]/)&&(v=2),v<3&&a[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var N="",B;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=uCe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(B=i+1;a[B]!=null&&((l=a[B].t)==="?"||l==="D"||(l===" "||l==="t")&&a[B+1]!=null&&(a[B+1].t==="?"||a[B+1].t==="t"&&a[B+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[B].v==="/"||a[B].v===" "&&a[B+1]!=null&&a[B+1].t=="?"));)a[i].v+=a[B].v,a[B]={v:"",t:";"},++B;N+=a[i].v,i=B-1;break;case"G":a[i].t="t",a[i].v=gg(t,r);break}var k="",F,E;if(N.length>0){N.charCodeAt(0)==40?(F=t<0&&N.charCodeAt(0)===45?-t:t,E=dh("n",N,F)):(F=t<0&&n>1?-t:t,E=dh("n",N,F),F<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),B=E.length-1;var S=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){S=i;break}var T=a.length;if(S===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(B>=a[i].v.length-1?(B-=a[i].v.length,a[i].v=E.substr(B+1,a[i].v.length)):B<0?a[i].v="":(a[i].v=E.substr(0,B+1),B=-1),a[i].t="t",T=i);B>=0&&T<a.length&&(a[T].v=E.substr(0,B+1)+a[T].v)}else if(S!==a.length&&E.indexOf("E")===-1){for(B=E.indexOf(".")-1,i=S;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")-1:a[i].v.length-1,k=a[i].v.substr(d+1);d>=0;--d)B>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(k=E.charAt(B--)+k);a[i].v=k,a[i].t="t",T=i}for(B>=0&&T<a.length&&(a[T].v=E.substr(0,B+1)+a[T].v),B=E.indexOf(".")+1,i=S;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==S)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")+1:0,k=a[i].v.substr(0,d);d<a[i].v.length;++d)B<E.length&&(k+=E.charAt(B++));a[i].v=k,a[i].t="t",T=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(F=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=dh(a[i].t,a[i].v,F),a[i].t="t");var L="";for(i=0;i!==a.length;++i)a[i]!=null&&(L+=a[i].v);return L}var yH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function wH(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function yCe(e,t){var r=vCe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(yH),l=r[1].match(yH);return wH(t,i)?[n,r[0]]:wH(t,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function Ku(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Mr)[e],n==null&&(n=r.table&&r.table[xH[e]]||Mr[xH[e]]),n==null&&(n=nCe[e]||"General");break}if(C_(n,0))return gg(t,r);t instanceof Date&&(t=tte(t,r.date1904));var a=yCe(n,t);if(C_(a[1]))return gg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return bCe(a[1],t,r,a[0])}function Ah(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Mr[r]==null){t<0&&(t=r);continue}if(Mr[r]==e){t=r;break}}t<0&&(t=391)}return Mr[t]=e,t}function U4(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Ah(e[t],t)}function W1(){Mr=rCe()}var wCe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ute=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ECe(e){var t=typeof e=="number"?Mr[e]:e;return t=t.replace(ute,"(\\d+)"),new RegExp("^"+t+"$")}function CCe(e,t,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(t.match(ute)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":i=m;break;case"s":c=m;break;case"m":i>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var NCe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,S=new Array(256),T=0;T!=256;++T)E=T,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,S[T]=E;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function n(E){var S=0,T=0,L=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)R[L]=E[L];for(L=0;L!=256;++L)for(T=E[L],S=256+L;S<4096;S+=256)T=R[S]=T>>>8^E[T&255];var j=[];for(L=1;L!=16;++L)j[L-1]=typeof Int32Array<"u"?R.subarray(L*256,L*256+256):R.slice(L*256,L*256+256);return j}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],g=a[9],x=a[10],v=a[11],y=a[12],w=a[13],N=a[14];function B(E,S){for(var T=S^-1,L=0,R=E.length;L<R;)T=T>>>8^r[(T^E.charCodeAt(L++))&255];return~T}function k(E,S){for(var T=S^-1,L=E.length-15,R=0;R<L;)T=N[E[R++]^T&255]^w[E[R++]^T>>8&255]^y[E[R++]^T>>16&255]^v[E[R++]^T>>>24]^x[E[R++]]^g[E[R++]]^m[E[R++]]^h[E[R++]]^f[E[R++]]^d[E[R++]]^u[E[R++]]^c[E[R++]]^l[E[R++]]^i[E[R++]]^s[E[R++]]^r[E[R++]];for(L+=15;R<L;)T=T>>>8^r[(T^E[R++])&255];return~T}function F(E,S){for(var T=S^-1,L=0,R=E.length,j=0,P=0;L<R;)j=E.charCodeAt(L++),j<128?T=T>>>8^r[(T^j)&255]:j<2048?(T=T>>>8^r[(T^(192|j>>6&31))&255],T=T>>>8^r[(T^(128|j&63))&255]):j>=55296&&j<57344?(j=(j&1023)+64,P=E.charCodeAt(L++)&1023,T=T>>>8^r[(T^(240|j>>8&7))&255],T=T>>>8^r[(T^(128|j>>2&63))&255],T=T>>>8^r[(T^(128|P>>6&15|(j&3)<<4))&255],T=T>>>8^r[(T^(128|P&63))&255]):(T=T>>>8^r[(T^(224|j>>12&15))&255],T=T>>>8^r[(T^(128|j>>6&63))&255],T=T>>>8^r[(T^(128|j&63))&255]);return~T}return e.table=r,e.bstr=B,e.buf=k,e.str=F,e}(),_r=function(){var t={};t.version="1.2.1";function r(me,Ie){for(var Ce=me.split("/"),we=Ie.split("/"),Se=0,Fe=0,Ye=Math.min(Ce.length,we.length);Se<Ye;++Se){if(Fe=Ce[Se].length-we[Se].length)return Fe;if(Ce[Se]!=we[Se])return Ce[Se]<we[Se]?-1:1}return Ce.length-we.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var Ie=me.lastIndexOf("/");return Ie===-1?me:me.slice(0,Ie+1)}function a(me){if(me.charAt(me.length-1)=="/")return a(me.slice(0,-1));var Ie=me.lastIndexOf("/");return Ie===-1?me:me.slice(Ie+1)}function s(me,Ie){typeof Ie=="string"&&(Ie=new Date(Ie));var Ce=Ie.getHours();Ce=Ce<<6|Ie.getMinutes(),Ce=Ce<<5|Ie.getSeconds()>>>1,me.write_shift(2,Ce);var we=Ie.getFullYear()-1980;we=we<<4|Ie.getMonth()+1,we=we<<5|Ie.getDate(),me.write_shift(2,we)}function i(me){var Ie=me.read_shift(2)&65535,Ce=me.read_shift(2)&65535,we=new Date,Se=Ce&31;Ce>>>=5;var Fe=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(Fe-1),we.setDate(Se);var Ye=Ie&31;Ie>>>=5;var dt=Ie&63;return Ie>>>=6,we.setHours(Ie),we.setMinutes(dt),we.setSeconds(Ye<<1),we}function l(me){yo(me,0);for(var Ie={},Ce=0;me.l<=me.length-4;){var we=me.read_shift(2),Se=me.read_shift(2),Fe=me.l+Se,Ye={};switch(we){case 21589:Ce=me.read_shift(1),Ce&1&&(Ye.mtime=me.read_shift(4)),Se>5&&(Ce&2&&(Ye.atime=me.read_shift(4)),Ce&4&&(Ye.ctime=me.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}me.l=Fe,Ie[we]=Ye}return Ie}var c;function u(){return c||(c={})}function d(me,Ie){if(me[0]==80&&me[1]==75)return mn(me,Ie);if((me[0]|32)==109&&(me[1]|32)==105)return Et(me,Ie);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var Ce=3,we=512,Se=0,Fe=0,Ye=0,dt=0,Ge=0,rt=[],it=me.slice(0,512);yo(it,0);var Ft=f(it);switch(Ce=Ft[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Ft[1]==0)return mn(me,Ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(it=me.slice(0,we),yo(it,28));var $t=me.slice(0,we);h(it,Ce);var Jt=it.read_shift(4,"i");if(Ce===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);it.l+=4,Ye=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),dt=it.read_shift(4,"i"),Se=it.read_shift(4,"i"),Ge=it.read_shift(4,"i"),Fe=it.read_shift(4,"i");for(var Ht=-1,Gt=0;Gt<109&&(Ht=it.read_shift(4,"i"),!(Ht<0));++Gt)rt[Gt]=Ht;var kr=m(me,we);v(Ge,Fe,kr,we,rt);var sn=w(kr,Ye,rt,we);sn[Ye].name="!Directory",Se>0&&dt!==P&&(sn[dt].name="!MiniFAT"),sn[rt[0]].name="!FAT",sn.fat_addrs=rt,sn.ssz=we;var on={},An=[],fs=[],No=[];N(Ye,sn,kr,An,Se,on,fs,dt),g(fs,No,An),An.shift();var hs={FileIndex:fs,FullPaths:No};return Ie&&Ie.raw&&(hs.raw={header:$t,sectors:kr}),hs}function f(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(M,"Header Signature: "),me.l+=16;var Ie=me.read_shift(2,"u");return[me.read_shift(2,"u"),Ie]}function h(me,Ie){var Ce=9;switch(me.l+=2,Ce=me.read_shift(2)){case 9:if(Ie!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Ie!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function m(me,Ie){for(var Ce=Math.ceil(me.length/Ie)-1,we=[],Se=1;Se<Ce;++Se)we[Se-1]=me.slice(Se*Ie,(Se+1)*Ie);return we[Ce-1]=me.slice(Ce*Ie),we}function g(me,Ie,Ce){for(var we=0,Se=0,Fe=0,Ye=0,dt=0,Ge=Ce.length,rt=[],it=[];we<Ge;++we)rt[we]=it[we]=we,Ie[we]=Ce[we];for(;dt<it.length;++dt)we=it[dt],Se=me[we].L,Fe=me[we].R,Ye=me[we].C,rt[we]===we&&(Se!==-1&&rt[Se]!==Se&&(rt[we]=rt[Se]),Fe!==-1&&rt[Fe]!==Fe&&(rt[we]=rt[Fe])),Ye!==-1&&(rt[Ye]=we),Se!==-1&&we!=rt[we]&&(rt[Se]=rt[we],it.lastIndexOf(Se)<dt&&it.push(Se)),Fe!==-1&&we!=rt[we]&&(rt[Fe]=rt[we],it.lastIndexOf(Fe)<dt&&it.push(Fe));for(we=1;we<Ge;++we)rt[we]===we&&(Fe!==-1&&rt[Fe]!==Fe?rt[we]=rt[Fe]:Se!==-1&&rt[Se]!==Se&&(rt[we]=rt[Se]));for(we=1;we<Ge;++we)if(me[we].type!==0){if(dt=we,dt!=rt[dt])do dt=rt[dt],Ie[we]=Ie[dt]+"/"+Ie[we];while(dt!==0&&rt[dt]!==-1&&dt!=rt[dt]);rt[we]=-1}for(Ie[0]+="/",we=1;we<Ge;++we)me[we].type!==2&&(Ie[we]+="/")}function x(me,Ie,Ce){for(var we=me.start,Se=me.size,Fe=[],Ye=we;Ce&&Se>0&&Ye>=0;)Fe.push(Ie.slice(Ye*j,Ye*j+j)),Se-=j,Ye=Fp(Ce,Ye*4);return Fe.length===0?Ct(0):Zi(Fe).slice(0,me.size)}function v(me,Ie,Ce,we,Se){var Fe=P;if(me===P){if(Ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var Ye=Ce[me],dt=(we>>>2)-1;if(!Ye)return;for(var Ge=0;Ge<dt&&(Fe=Fp(Ye,Ge*4))!==P;++Ge)Se.push(Fe);v(Fp(Ye,we-4),Ie-1,Ce,we,Se)}}function y(me,Ie,Ce,we,Se){var Fe=[],Ye=[];Se||(Se=[]);var dt=we-1,Ge=0,rt=0;for(Ge=Ie;Ge>=0;){Se[Ge]=!0,Fe[Fe.length]=Ge,Ye.push(me[Ge]);var it=Ce[Math.floor(Ge*4/we)];if(rt=Ge*4&dt,we<4+rt)throw new Error("FAT boundary crossed: "+Ge+" 4 "+we);if(!me[it])break;Ge=Fp(me[it],rt)}return{nodes:Fe,data:OH([Ye])}}function w(me,Ie,Ce,we){var Se=me.length,Fe=[],Ye=[],dt=[],Ge=[],rt=we-1,it=0,Ft=0,$t=0,Jt=0;for(it=0;it<Se;++it)if(dt=[],$t=it+Ie,$t>=Se&&($t-=Se),!Ye[$t]){Ge=[];var Ht=[];for(Ft=$t;Ft>=0;){Ht[Ft]=!0,Ye[Ft]=!0,dt[dt.length]=Ft,Ge.push(me[Ft]);var Gt=Ce[Math.floor(Ft*4/we)];if(Jt=Ft*4&rt,we<4+Jt)throw new Error("FAT boundary crossed: "+Ft+" 4 "+we);if(!me[Gt]||(Ft=Fp(me[Gt],Jt),Ht[Ft]))break}Fe[$t]={nodes:dt,data:OH([Ge])}}return Fe}function N(me,Ie,Ce,we,Se,Fe,Ye,dt){for(var Ge=0,rt=we.length?2:0,it=Ie[me].data,Ft=0,$t=0,Jt;Ft<it.length;Ft+=128){var Ht=it.slice(Ft,Ft+128);yo(Ht,64),$t=Ht.read_shift(2),Jt=dR(Ht,0,$t-rt),we.push(Jt);var Gt={name:Jt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},kr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);kr!==0&&(Gt.ct=B(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(Gt.mt=B(Ht,Ht.l-8)),Gt.start=Ht.read_shift(4,"i"),Gt.size=Ht.read_shift(4,"i"),Gt.size<0&&Gt.start<0&&(Gt.size=Gt.type=0,Gt.start=P,Gt.name=""),Gt.type===5?(Ge=Gt.start,Se>0&&Ge!==P&&(Ie[Ge].name="!StreamData")):Gt.size>=4096?(Gt.storage="fat",Ie[Gt.start]===void 0&&(Ie[Gt.start]=y(Ce,Gt.start,Ie.fat_addrs,Ie.ssz)),Ie[Gt.start].name=Gt.name,Gt.content=Ie[Gt.start].data.slice(0,Gt.size)):(Gt.storage="minifat",Gt.size<0?Gt.size=0:Ge!==P&&Gt.start!==P&&Ie[Ge]&&(Gt.content=x(Gt,Ie[Ge].data,(Ie[dt]||{}).data))),Gt.content&&yo(Gt.content,0),Fe[Jt]=Gt,Ye.push(Gt)}}function B(me,Ie){return new Date((Pc(me,Ie+4)/1e7*Math.pow(2,32)+Pc(me,Ie)/1e7-11644473600)*1e3)}function k(me,Ie){return u(),d(c.readFileSync(me),Ie)}function F(me,Ie){var Ce=Ie&&Ie.type;switch(Ce||xn&&Buffer.isBuffer(me)&&(Ce="buffer"),Ce||"base64"){case"file":return k(me,Ie);case"base64":return d(Mc(Kc(me)),Ie);case"binary":return d(Mc(me),Ie)}return d(me,Ie)}function E(me,Ie){var Ce=Ie||{},we=Ce.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=we+"/",me.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(me.FileIndex[0].clsid=Ce.CLSID),S(me)}function S(me){var Ie="Sh33tJ5";if(!_r.find(me,"/"+Ie)){var Ce=Ct(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,me.FileIndex.push({name:Ie,type:2,content:Ce,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+Ie),T(me)}}function T(me,Ie){E(me);for(var Ce=!1,we=!1,Se=me.FullPaths.length-1;Se>=0;--Se){var Fe=me.FileIndex[Se];switch(Fe.type){case 0:we?Ce=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Fe.R*Fe.L*Fe.C)&&(Ce=!0),Fe.R>-1&&Fe.L>-1&&Fe.R==Fe.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Ie)){var Ye=new Date(1987,1,19),dt=0,Ge=Object.create?Object.create(null):{},rt=[];for(Se=0;Se<me.FullPaths.length;++Se)Ge[me.FullPaths[Se]]=!0,me.FileIndex[Se].type!==0&&rt.push([me.FullPaths[Se],me.FileIndex[Se]]);for(Se=0;Se<rt.length;++Se){var it=n(rt[Se][0]);we=Ge[it],we||(rt.push([it,{name:a(it).replace("/",""),type:1,clsid:V,ct:Ye,mt:Ye,content:null}]),Ge[it]=!0)}for(rt.sort(function(Jt,Ht){return r(Jt[0],Ht[0])}),me.FullPaths=[],me.FileIndex=[],Se=0;Se<rt.length;++Se)me.FullPaths[Se]=rt[Se][0],me.FileIndex[Se]=rt[Se][1];for(Se=0;Se<rt.length;++Se){var Ft=me.FileIndex[Se],$t=me.FullPaths[Se];if(Ft.name=a($t).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||V,Se===0)Ft.C=rt.length>1?1:-1,Ft.size=0,Ft.type=5;else if($t.slice(-1)=="/"){for(dt=Se+1;dt<rt.length&&n(me.FullPaths[dt])!=$t;++dt);for(Ft.C=dt>=rt.length?-1:dt,dt=Se+1;dt<rt.length&&n(me.FullPaths[dt])!=n($t);++dt);Ft.R=dt>=rt.length?-1:dt,Ft.type=1}else n(me.FullPaths[Se+1]||"")==n($t)&&(Ft.R=Se+1),Ft.type=2}}}function L(me,Ie){var Ce=Ie||{};if(Ce.fileType=="mad")return bt(me,Ce);switch(T(me),Ce.fileType){case"zip":return ja(me,Ce)}var we=function(Jt){for(var Ht=0,Gt=0,kr=0;kr<Jt.FileIndex.length;++kr){var sn=Jt.FileIndex[kr];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:Gt+=on+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,fs=Ht+7>>3,No=Ht+127>>7,hs=fs+Gt+An+No,ri=hs+127>>7,Ps=ri<=109?0:Math.ceil((ri-109)/127);hs+ri+Ps+127>>7>ri;)Ps=++ri<=109?0:Math.ceil((ri-109)/127);var yi=[1,Ps,ri,No,An,Gt,Ht,0];return Jt.FileIndex[0].size=Ht<<6,yi[7]=(Jt.FileIndex[0].start=yi[0]+yi[1]+yi[2]+yi[3]+yi[4]+yi[5])+(yi[6]+7>>3),yi}(me),Se=Ct(we[7]<<9),Fe=0,Ye=0;{for(Fe=0;Fe<8;++Fe)Se.write_shift(1,Z[Fe]);for(Fe=0;Fe<8;++Fe)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),Fe=0;Fe<3;++Fe)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,we[2]),Se.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:P),Se.write_shift(4,we[3]),Se.write_shift(-4,we[1]?we[0]-1:P),Se.write_shift(4,we[1]),Fe=0;Fe<109;++Fe)Se.write_shift(-4,Fe<we[2]?we[1]+Fe:-1)}if(we[1])for(Ye=0;Ye<we[1];++Ye){for(;Fe<236+Ye*127;++Fe)Se.write_shift(-4,Fe<we[2]?we[1]+Fe:-1);Se.write_shift(-4,Ye===we[1]-1?P:Ye+1)}var dt=function(Jt){for(Ye+=Jt;Fe<Ye-1;++Fe)Se.write_shift(-4,Fe+1);Jt&&(++Fe,Se.write_shift(-4,P))};for(Ye=Fe=0,Ye+=we[1];Fe<Ye;++Fe)Se.write_shift(-4,W.DIFSECT);for(Ye+=we[2];Fe<Ye;++Fe)Se.write_shift(-4,W.FATSECT);dt(we[3]),dt(we[4]);for(var Ge=0,rt=0,it=me.FileIndex[0];Ge<me.FileIndex.length;++Ge)it=me.FileIndex[Ge],it.content&&(rt=it.content.length,!(rt<4096)&&(it.start=Ye,dt(rt+511>>9)));for(dt(we[6]+7>>3);Se.l&511;)Se.write_shift(-4,W.ENDOFCHAIN);for(Ye=Fe=0,Ge=0;Ge<me.FileIndex.length;++Ge)it=me.FileIndex[Ge],it.content&&(rt=it.content.length,!(!rt||rt>=4096)&&(it.start=Ye,dt(rt+63>>6)));for(;Se.l&511;)Se.write_shift(-4,W.ENDOFCHAIN);for(Fe=0;Fe<we[4]<<2;++Fe){var Ft=me.FullPaths[Fe];if(!Ft||Ft.length===0){for(Ge=0;Ge<17;++Ge)Se.write_shift(4,0);for(Ge=0;Ge<3;++Ge)Se.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)Se.write_shift(4,0);continue}it=me.FileIndex[Fe],Fe===0&&(it.start=it.size?it.start-1:P);var $t=Fe===0&&Ce.root||it.name;if(rt=2*($t.length+1),Se.write_shift(64,$t,"utf16le"),Se.write_shift(2,rt),Se.write_shift(1,it.type),Se.write_shift(1,it.color),Se.write_shift(-4,it.L),Se.write_shift(-4,it.R),Se.write_shift(-4,it.C),it.clsid)Se.write_shift(16,it.clsid,"hex");else for(Ge=0;Ge<4;++Ge)Se.write_shift(4,0);Se.write_shift(4,it.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,it.start),Se.write_shift(4,it.size),Se.write_shift(4,0)}for(Fe=1;Fe<me.FileIndex.length;++Fe)if(it=me.FileIndex[Fe],it.size>=4096)if(Se.l=it.start+1<<9,xn&&Buffer.isBuffer(it.content))it.content.copy(Se,Se.l,0,it.size),Se.l+=it.size+511&-512;else{for(Ge=0;Ge<it.size;++Ge)Se.write_shift(1,it.content[Ge]);for(;Ge&511;++Ge)Se.write_shift(1,0)}for(Fe=1;Fe<me.FileIndex.length;++Fe)if(it=me.FileIndex[Fe],it.size>0&&it.size<4096)if(xn&&Buffer.isBuffer(it.content))it.content.copy(Se,Se.l,0,it.size),Se.l+=it.size+63&-64;else{for(Ge=0;Ge<it.size;++Ge)Se.write_shift(1,it.content[Ge]);for(;Ge&63;++Ge)Se.write_shift(1,0)}if(xn)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function R(me,Ie){var Ce=me.FullPaths.map(function(Ge){return Ge.toUpperCase()}),we=Ce.map(function(Ge){var rt=Ge.split("/");return rt[rt.length-(Ge.slice(-1)=="/"?2:1)]}),Se=!1;Ie.charCodeAt(0)===47?(Se=!0,Ie=Ce[0].slice(0,-1)+Ie):Se=Ie.indexOf("/")!==-1;var Fe=Ie.toUpperCase(),Ye=Se===!0?Ce.indexOf(Fe):we.indexOf(Fe);if(Ye!==-1)return me.FileIndex[Ye];var dt=!Fe.match(Uy);for(Fe=Fe.replace(_l,""),dt&&(Fe=Fe.replace(Uy,"!")),Ye=0;Ye<Ce.length;++Ye)if((dt?Ce[Ye].replace(Uy,"!"):Ce[Ye]).replace(_l,"")==Fe||(dt?we[Ye].replace(Uy,"!"):we[Ye]).replace(_l,"")==Fe)return me.FileIndex[Ye];return null}var j=64,P=-2,M="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",W={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:P,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(me,Ie,Ce){u();var we=L(me,Ce);c.writeFileSync(Ie,we)}function K(me){for(var Ie=new Array(me.length),Ce=0;Ce<me.length;++Ce)Ie[Ce]=String.fromCharCode(me[Ce]);return Ie.join("")}function ee(me,Ie){var Ce=L(me,Ie);switch(Ie&&Ie.type||"buffer"){case"file":return u(),c.writeFileSync(Ie.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:K(Ce);case"base64":return Gw(typeof Ce=="string"?Ce:K(Ce));case"buffer":if(xn)return Buffer.isBuffer(Ce)?Ce:Rh(Ce);case"array":return typeof Ce=="string"?Mc(Ce):Ce}return Ce}var X;function D(me){try{var Ie=me.InflateRaw,Ce=new Ie;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)X=me;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function Q(me,Ie){if(!X)return Pr(me,Ie);var Ce=X.InflateRaw,we=new Ce,Se=we._processChunk(me.slice(me.l),we._finishFlushFlag);return me.l+=we.bytesRead,Se}function z(me){return X?X.deflateRawSync(me):Qt(me)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(me){var Ie=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(Ie>>16|Ie>>8|Ie)&255}for(var le=typeof Uint8Array<"u",ue=le?new Uint8Array(256):[],je=0;je<256;++je)ue[je]=ie(je);function ae(me,Ie){var Ce=ue[me&255];return Ie<=8?Ce>>>8-Ie:(Ce=Ce<<8|ue[me>>8&255],Ie<=16?Ce>>>16-Ie:(Ce=Ce<<8|ue[me>>16&255],Ce>>>24-Ie))}function Ne(me,Ie){var Ce=Ie&7,we=Ie>>>3;return(me[we]|(Ce<=6?0:me[we+1]<<8))>>>Ce&3}function ke(me,Ie){var Ce=Ie&7,we=Ie>>>3;return(me[we]|(Ce<=5?0:me[we+1]<<8))>>>Ce&7}function _e(me,Ie){var Ce=Ie&7,we=Ie>>>3;return(me[we]|(Ce<=4?0:me[we+1]<<8))>>>Ce&15}function he(me,Ie){var Ce=Ie&7,we=Ie>>>3;return(me[we]|(Ce<=3?0:me[we+1]<<8))>>>Ce&31}function Be(me,Ie){var Ce=Ie&7,we=Ie>>>3;return(me[we]|(Ce<=1?0:me[we+1]<<8))>>>Ce&127}function Le(me,Ie,Ce){var we=Ie&7,Se=Ie>>>3,Fe=(1<<Ce)-1,Ye=me[Se]>>>we;return Ce<8-we||(Ye|=me[Se+1]<<8-we,Ce<16-we)||(Ye|=me[Se+2]<<16-we,Ce<24-we)||(Ye|=me[Se+3]<<24-we),Ye&Fe}function We(me,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return we<=5?me[Se]|=(Ce&7)<<we:(me[Se]|=Ce<<we&255,me[Se+1]=(Ce&7)>>8-we),Ie+3}function xe(me,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return Ce=(Ce&1)<<we,me[Se]|=Ce,Ie+1}function Oe(me,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return Ce<<=we,me[Se]|=Ce&255,Ce>>>=8,me[Se+1]=Ce,Ie+8}function Re(me,Ie,Ce){var we=Ie&7,Se=Ie>>>3;return Ce<<=we,me[Se]|=Ce&255,Ce>>>=8,me[Se+1]=Ce&255,me[Se+2]=Ce>>>8,Ie+16}function $e(me,Ie){var Ce=me.length,we=2*Ce>Ie?2*Ce:Ie+5,Se=0;if(Ce>=Ie)return me;if(xn){var Fe=mH(we);if(me.copy)me.copy(Fe);else for(;Se<me.length;++Se)Fe[Se]=me[Se];return Fe}else if(le){var Ye=new Uint8Array(we);if(Ye.set)Ye.set(me);else for(;Se<Ce;++Se)Ye[Se]=me[Se];return Ye}return me.length=we,me}function et(me){for(var Ie=new Array(me),Ce=0;Ce<me;++Ce)Ie[Ce]=0;return Ie}function ct(me,Ie,Ce){var we=1,Se=0,Fe=0,Ye=0,dt=0,Ge=me.length,rt=le?new Uint16Array(32):et(32);for(Fe=0;Fe<32;++Fe)rt[Fe]=0;for(Fe=Ge;Fe<Ce;++Fe)me[Fe]=0;Ge=me.length;var it=le?new Uint16Array(Ge):et(Ge);for(Fe=0;Fe<Ge;++Fe)rt[Se=me[Fe]]++,we<Se&&(we=Se),it[Fe]=0;for(rt[0]=0,Fe=1;Fe<=we;++Fe)rt[Fe+16]=dt=dt+rt[Fe-1]<<1;for(Fe=0;Fe<Ge;++Fe)dt=me[Fe],dt!=0&&(it[Fe]=rt[dt+16]++);var Ft=0;for(Fe=0;Fe<Ge;++Fe)if(Ft=me[Fe],Ft!=0)for(dt=ae(it[Fe],we)>>we-Ft,Ye=(1<<we+4-Ft)-1;Ye>=0;--Ye)Ie[dt|Ye<<Ft]=Ft&15|Fe<<4;return we}var gt=le?new Uint16Array(512):et(512),It=le?new Uint16Array(32):et(32);if(!le){for(var Mt=0;Mt<512;++Mt)gt[Mt]=0;for(Mt=0;Mt<32;++Mt)It[Mt]=0}(function(){for(var me=[],Ie=0;Ie<32;Ie++)me.push(5);ct(me,It,32);var Ce=[];for(Ie=0;Ie<=143;Ie++)Ce.push(8);for(;Ie<=255;Ie++)Ce.push(9);for(;Ie<=279;Ie++)Ce.push(7);for(;Ie<=287;Ie++)Ce.push(8);ct(Ce,gt,288)})();var Pt=function(){for(var Ie=le?new Uint8Array(32768):[],Ce=0,we=0;Ce<se.length-1;++Ce)for(;we<se[Ce+1];++we)Ie[we]=Ce;for(;we<32768;++we)Ie[we]=29;var Se=le?new Uint8Array(259):[];for(Ce=0,we=0;Ce<te.length-1;++Ce)for(;we<te[Ce+1];++we)Se[we]=Ce;function Fe(dt,Ge){for(var rt=0;rt<dt.length;){var it=Math.min(65535,dt.length-rt),Ft=rt+it==dt.length;for(Ge.write_shift(1,+Ft),Ge.write_shift(2,it),Ge.write_shift(2,~it&65535);it-- >0;)Ge[Ge.l++]=dt[rt++]}return Ge.l}function Ye(dt,Ge){for(var rt=0,it=0,Ft=le?new Uint16Array(32768):[];it<dt.length;){var $t=Math.min(65535,dt.length-it);if($t<10){for(rt=We(Ge,rt,+(it+$t==dt.length)),rt&7&&(rt+=8-(rt&7)),Ge.l=rt/8|0,Ge.write_shift(2,$t),Ge.write_shift(2,~$t&65535);$t-- >0;)Ge[Ge.l++]=dt[it++];rt=Ge.l*8;continue}rt=We(Ge,rt,+(it+$t==dt.length)+2);for(var Jt=0;$t-- >0;){var Ht=dt[it];Jt=(Jt<<5^Ht)&32767;var Gt=-1,kr=0;if((Gt=Ft[Jt])&&(Gt|=it&-32768,Gt>it&&(Gt-=32768),Gt<it))for(;dt[Gt+kr]==dt[it+kr]&&kr<250;)++kr;if(kr>2){Ht=Se[kr],Ht<=22?rt=Oe(Ge,rt,ue[Ht+1]>>1)-1:(Oe(Ge,rt,3),rt+=5,Oe(Ge,rt,ue[Ht-23]>>5),rt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Re(Ge,rt,kr-te[Ht]),rt+=sn),Ht=Ie[it-Gt],rt=Oe(Ge,rt,ue[Ht]>>3),rt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Re(Ge,rt,it-Gt-se[Ht]),rt+=on);for(var An=0;An<kr;++An)Ft[Jt]=it&32767,Jt=(Jt<<5^dt[it])&32767,++it;$t-=kr-1}else Ht<=143?Ht=Ht+48:rt=xe(Ge,rt,1),rt=Oe(Ge,rt,ue[Ht]),Ft[Jt]=it&32767,++it}rt=Oe(Ge,rt,0)-1}return Ge.l=(rt+7)/8|0,Ge.l}return function(Ge,rt){return Ge.length<8?Fe(Ge,rt):Ye(Ge,rt)}}();function Qt(me){var Ie=Ct(50+Math.floor(me.length*1.1)),Ce=Pt(me,Ie);return Ie.slice(0,Ce)}var wt=le?new Uint16Array(32768):et(32768),Tr=le?new Uint16Array(32768):et(32768),tr=le?new Uint16Array(128):et(128),an=1,Sr=1;function $r(me,Ie){var Ce=he(me,Ie)+257;Ie+=5;var we=he(me,Ie)+1;Ie+=5;var Se=_e(me,Ie)+4;Ie+=4;for(var Fe=0,Ye=le?new Uint8Array(19):et(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,rt=le?new Uint8Array(8):et(8),it=le?new Uint8Array(8):et(8),Ft=Ye.length,$t=0;$t<Se;++$t)Ye[J[$t]]=Fe=ke(me,Ie),Ge<Fe&&(Ge=Fe),rt[Fe]++,Ie+=3;var Jt=0;for(rt[0]=0,$t=1;$t<=Ge;++$t)it[$t]=Jt=Jt+rt[$t-1]<<1;for($t=0;$t<Ft;++$t)(Jt=Ye[$t])!=0&&(dt[$t]=it[Jt]++);var Ht=0;for($t=0;$t<Ft;++$t)if(Ht=Ye[$t],Ht!=0){Jt=ue[dt[$t]]>>8-Ht;for(var Gt=(1<<7-Ht)-1;Gt>=0;--Gt)tr[Jt|Gt<<Ht]=Ht&7|$t<<3}var kr=[];for(Ge=1;kr.length<Ce+we;)switch(Jt=tr[Be(me,Ie)],Ie+=Jt&7,Jt>>>=3){case 16:for(Fe=3+Ne(me,Ie),Ie+=2,Jt=kr[kr.length-1];Fe-- >0;)kr.push(Jt);break;case 17:for(Fe=3+ke(me,Ie),Ie+=3;Fe-- >0;)kr.push(0);break;case 18:for(Fe=11+Be(me,Ie),Ie+=7;Fe-- >0;)kr.push(0);break;default:kr.push(Jt),Ge<Jt&&(Ge=Jt);break}var sn=kr.slice(0,Ce),on=kr.slice(Ce);for($t=Ce;$t<286;++$t)sn[$t]=0;for($t=we;$t<30;++$t)on[$t]=0;return an=ct(sn,wt,286),Sr=ct(on,Tr,30),Ie}function Fn(me,Ie){if(me[0]==3&&!(me[1]&3))return[_m(Ie),2];for(var Ce=0,we=0,Se=mH(Ie||1<<18),Fe=0,Ye=Se.length>>>0,dt=0,Ge=0;(we&1)==0;){if(we=ke(me,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,Ge=5):(Ce=$r(me,Ce),dt=an,Ge=Sr);else{Ce&7&&(Ce+=8-(Ce&7));var rt=me[Ce>>>3]|me[(Ce>>>3)+1]<<8;if(Ce+=32,rt>0)for(!Ie&&Ye<Fe+rt&&(Se=$e(Se,Fe+rt),Ye=Se.length);rt-- >0;)Se[Fe++]=me[Ce>>>3],Ce+=8;continue}for(;;){!Ie&&Ye<Fe+32767&&(Se=$e(Se,Fe+32767),Ye=Se.length);var it=Le(me,Ce,dt),Ft=we>>>1==1?gt[it]:wt[it];if(Ce+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)Se[Fe++]=Ft;else{if(Ft==256)break;Ft-=257;var $t=Ft<8?0:Ft-4>>2;$t>5&&($t=0);var Jt=Fe+te[Ft];$t>0&&(Jt+=Le(me,Ce,$t),Ce+=$t),it=Le(me,Ce,Ge),Ft=we>>>1==1?It[it]:Tr[it],Ce+=Ft&15,Ft>>>=4;var Ht=Ft<4?0:Ft-2>>1,Gt=se[Ft];for(Ht>0&&(Gt+=Le(me,Ce,Ht),Ce+=Ht),!Ie&&Ye<Jt&&(Se=$e(Se,Jt+100),Ye=Se.length);Fe<Jt;)Se[Fe]=Se[Fe-Gt],++Fe}}}return Ie?[Se,Ce+7>>>3]:[Se.slice(0,Fe),Ce+7>>>3]}function Pr(me,Ie){var Ce=me.slice(me.l||0),we=Fn(Ce,Ie);return me.l+=we[1],we[0]}function As(me,Ie){if(me)typeof console<"u"&&console.error(Ie);else throw new Error(Ie)}function mn(me,Ie){var Ce=me;yo(Ce,0);var we=[],Se=[],Fe={FileIndex:we,FullPaths:Se};E(Fe,{root:Ie.root});for(var Ye=Ce.length-4;(Ce[Ye]!=80||Ce[Ye+1]!=75||Ce[Ye+2]!=5||Ce[Ye+3]!=6)&&Ye>=0;)--Ye;Ce.l=Ye+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var Ge=Ce.read_shift(4);for(Ce.l=Ge,Ye=0;Ye<dt;++Ye){Ce.l+=20;var rt=Ce.read_shift(4),it=Ce.read_shift(4),Ft=Ce.read_shift(2),$t=Ce.read_shift(2),Jt=Ce.read_shift(2);Ce.l+=8;var Ht=Ce.read_shift(4),Gt=l(Ce.slice(Ce.l+Ft,Ce.l+Ft+$t));Ce.l+=Ft+$t+Jt;var kr=Ce.l;Ce.l=Ht+4,la(Ce,rt,it,Fe,Gt),Ce.l=kr}return Fe}function la(me,Ie,Ce,we,Se){me.l+=2;var Fe=me.read_shift(2),Ye=me.read_shift(2),dt=i(me);if(Fe&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=me.read_shift(4),rt=me.read_shift(4),it=me.read_shift(4),Ft=me.read_shift(2),$t=me.read_shift(2),Jt="",Ht=0;Ht<Ft;++Ht)Jt+=String.fromCharCode(me[me.l++]);if($t){var Gt=l(me.slice(me.l,me.l+$t));(Gt[21589]||{}).mt&&(dt=Gt[21589].mt),((Se||{})[21589]||{}).mt&&(dt=Se[21589].mt)}me.l+=$t;var kr=me.slice(me.l,me.l+rt);switch(Ye){case 8:kr=Q(me,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var sn=!1;Fe&8&&(Ge=me.read_shift(4),Ge==134695760&&(Ge=me.read_shift(4),sn=!0),rt=me.read_shift(4),it=me.read_shift(4)),rt!=Ie&&As(sn,"Bad compressed size: "+Ie+" != "+rt),it!=Ce&&As(sn,"Bad uncompressed size: "+Ce+" != "+it),xr(we,Jt,kr,{unsafe:!0,mt:dt})}function ja(me,Ie){var Ce=Ie||{},we=[],Se=[],Fe=Ct(1),Ye=Ce.compression?8:0,dt=0,Ge=0,rt=0,it=0,Ft=0,$t=me.FullPaths[0],Jt=$t,Ht=me.FileIndex[0],Gt=[],kr=0;for(Ge=1;Ge<me.FullPaths.length;++Ge)if(Jt=me.FullPaths[Ge].slice($t.length),Ht=me.FileIndex[Ge],!(!Ht.size||!Ht.content||Jt=="Sh33tJ5")){var sn=it,on=Ct(Jt.length);for(rt=0;rt<Jt.length;++rt)on.write_shift(1,Jt.charCodeAt(rt)&127);on=on.slice(0,on.l),Gt[Ft]=NCe.buf(Ht.content,0);var An=Ht.content;Ye==8&&(An=z(An)),Fe=Ct(30),Fe.write_shift(4,67324752),Fe.write_shift(2,20),Fe.write_shift(2,dt),Fe.write_shift(2,Ye),Ht.mt?s(Fe,Ht.mt):Fe.write_shift(4,0),Fe.write_shift(-4,Gt[Ft]),Fe.write_shift(4,An.length),Fe.write_shift(4,Ht.content.length),Fe.write_shift(2,on.length),Fe.write_shift(2,0),it+=Fe.length,we.push(Fe),it+=on.length,we.push(on),it+=An.length,we.push(An),Fe=Ct(46),Fe.write_shift(4,33639248),Fe.write_shift(2,0),Fe.write_shift(2,20),Fe.write_shift(2,dt),Fe.write_shift(2,Ye),Fe.write_shift(4,0),Fe.write_shift(-4,Gt[Ft]),Fe.write_shift(4,An.length),Fe.write_shift(4,Ht.content.length),Fe.write_shift(2,on.length),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(4,0),Fe.write_shift(4,sn),kr+=Fe.l,Se.push(Fe),kr+=on.length,Se.push(on),++Ft}return Fe=Ct(22),Fe.write_shift(4,101010256),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,Ft),Fe.write_shift(2,Ft),Fe.write_shift(4,kr),Fe.write_shift(4,it),Fe.write_shift(2,0),Zi([Zi(we),Zi(Se),Fe])}var rn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gr(me,Ie){if(me.ctype)return me.ctype;var Ce=me.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&rn[we[1]]||Ie&&(we=(Ce=Ie).match(/[\.\\]([^\.\\])+$/),we&&rn[we[1]])?rn[we[1]]:"application/octet-stream"}function Ze(me){for(var Ie=Gw(me),Ce=[],we=0;we<Ie.length;we+=76)Ce.push(Ie.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function mt(me){var Ie=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(rt){var it=rt.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});Ie=Ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ie.charAt(0)==`
`&&(Ie="=0D"+Ie.slice(1)),Ie=Ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=Ie.split(`\r
`),Se=0;Se<we.length;++Se){var Fe=we[Se];if(Fe.length==0){Ce.push("");continue}for(var Ye=0;Ye<Fe.length;){var dt=76,Ge=Fe.slice(Ye,Ye+dt);Ge.charAt(dt-1)=="="?dt--:Ge.charAt(dt-2)=="="?dt-=2:Ge.charAt(dt-3)=="="&&(dt-=3),Ge=Fe.slice(Ye,Ye+dt),Ye+=dt,Ye<Fe.length&&(Ge+="="),Ce.push(Ge)}}return Ce.join(`\r
`)}function Je(me){for(var Ie=[],Ce=0;Ce<me.length;++Ce){for(var we=me[Ce];Ce<=me.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+me[++Ce];Ie.push(we)}for(var Se=0;Se<Ie.length;++Se)Ie[Se]=Ie[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(Fe){return String.fromCharCode(parseInt(Fe.slice(1),16))});return Mc(Ie.join(`\r
`))}function xt(me,Ie,Ce){for(var we="",Se="",Fe="",Ye,dt=0;dt<10;++dt){var Ge=Ie[dt];if(!Ge||Ge.match(/^\s*$/))break;var rt=Ge.match(/^(.*?):\s*([^\s].*)$/);if(rt)switch(rt[1].toLowerCase()){case"content-location":we=rt[2].trim();break;case"content-type":Fe=rt[2].trim();break;case"content-transfer-encoding":Se=rt[2].trim();break}}switch(++dt,Se.toLowerCase()){case"base64":Ye=Mc(Kc(Ie.slice(dt).join("")));break;case"quoted-printable":Ye=Je(Ie.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var it=xr(me,we.slice(Ce.length),Ye,{unsafe:!0});Fe&&(it.ctype=Fe)}function Et(me,Ie){if(K(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Ie&&Ie.root||"",we=(xn&&Buffer.isBuffer(me)?me.toString("binary"):K(me)).split(`\r
`),Se=0,Fe="";for(Se=0;Se<we.length;++Se)if(Fe=we[Se],!!/^Content-Location:/i.test(Fe)&&(Fe=Fe.slice(Fe.indexOf("file")),Ce||(Ce=Fe.slice(0,Fe.lastIndexOf("/")+1)),Fe.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),Fe.slice(0,Ce.length)!=Ce););var Ye=(we[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var dt="--"+(Ye[1]||""),Ge=[],rt=[],it={FileIndex:Ge,FullPaths:rt};E(it);var Ft,$t=0;for(Se=0;Se<we.length;++Se){var Jt=we[Se];Jt!==dt&&Jt!==dt+"--"||($t++&&xt(it,we.slice(Ft,Se),Ce),Ft=Se)}return it}function bt(me,Ie){var Ce=Ie||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Fe=me.FullPaths[0],Ye=Fe,dt=me.FileIndex[0],Ge=1;Ge<me.FullPaths.length;++Ge)if(Ye=me.FullPaths[Ge].slice(Fe.length),dt=me.FileIndex[Ge],!(!dt.size||!dt.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(kr){return"_x"+kr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(kr){return"_u"+kr.charCodeAt(0).toString(16)+"_"});for(var rt=dt.content,it=xn&&Buffer.isBuffer(rt)?rt.toString("binary"):K(rt),Ft=0,$t=Math.min(1024,it.length),Jt=0,Ht=0;Ht<=$t;++Ht)(Jt=it.charCodeAt(Ht))>=32&&Jt<128&&++Ft;var Gt=Ft>=$t*4/5;Se.push(we),Se.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Ye),Se.push("Content-Transfer-Encoding: "+(Gt?"quoted-printable":"base64")),Se.push("Content-Type: "+gr(dt,Ye)),Se.push(""),Se.push(Gt?mt(it):Ze(it))}return Se.push(we+`--\r
`),Se.join(`\r
`)}function nr(me){var Ie={};return E(Ie,me),Ie}function xr(me,Ie,Ce,we){var Se=we&&we.unsafe;Se||E(me);var Fe=!Se&&_r.find(me,Ie);if(!Fe){var Ye=me.FullPaths[0];Ie.slice(0,Ye.length)==Ye?Ye=Ie:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Ie).replace("//","/")),Fe={name:a(Ie),type:2},me.FileIndex.push(Fe),me.FullPaths.push(Ye),Se||_r.utils.cfb_gc(me)}return Fe.content=Ce,Fe.size=Ce?Ce.length:0,we&&(we.CLSID&&(Fe.clsid=we.CLSID),we.mt&&(Fe.mt=we.mt),we.ct&&(Fe.ct=we.ct)),Fe}function Wr(me,Ie){E(me);var Ce=_r.find(me,Ie);if(Ce){for(var we=0;we<me.FileIndex.length;++we)if(me.FileIndex[we]==Ce)return me.FileIndex.splice(we,1),me.FullPaths.splice(we,1),!0}return!1}function Zr(me,Ie,Ce){E(me);var we=_r.find(me,Ie);if(we){for(var Se=0;Se<me.FileIndex.length;++Se)if(me.FileIndex[Se]==we)return me.FileIndex[Se].name=a(Ce),me.FullPaths[Se]=Ce,!0}return!1}function qr(me){T(me,!0)}return t.find=R,t.read=F,t.parse=d,t.write=ee,t.writeFile=G,t.utils={cfb_new:nr,cfb_add:xr,cfb_del:Wr,cfb_mov:Zr,cfb_gc:qr,ReadShift:dw,CheckField:Ite,prep_blob:yo,bconcat:Zi,use_zlib:D,_deflateRaw:Qt,_inflateRaw:Pr,consts:W},t}();function _Ce(e){return typeof e=="string"?M4(e):Array.isArray(e)?JEe(e):e}function K2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=M4(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?$A(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([_Ce(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Hm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function SCe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Fs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function EH(e,t){for(var r=[],n=Fs(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function Q4(e){for(var t=[],r=Fs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function H4(e){for(var t=[],r=Fs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function kCe(e){for(var t=[],r=Fs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var __=new Date(1899,11,30,0,0,0);function Fi(e,t){var r=e.getTime(),n=__.getTime()+(e.getTimezoneOffset()-__.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var dte=new Date,jCe=__.getTime()+(dte.getTimezoneOffset()-__.getTimezoneOffset())*6e4,CH=dte.getTimezoneOffset();function V4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+jCe),t.getTimezoneOffset()!==CH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-CH)*6e4),t}function BCe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var NH=new Date("2017-02-19T19:06:09.000Z"),Ate=isNaN(NH.getFullYear())?new Date("2/19/17"):NH,TCe=Ate.getFullYear()==2017;function Ha(e,t){var r=new Date(e);if(TCe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(Ate.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function xg(e,t){if(xn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return $A(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return $A(Zee(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return $A(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return $A(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Va(e[r]));return t}function _s(e,t){for(var r="";r.length<t;)r+=e;return r}function Md(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var ICe=["january","february","march","april","may","june","july","august","september","october","november","december"];function i1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&ICe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var FCe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function fte(e){return e?e.content&&e.type?xg(e.content,!0):e.data?My(e.data):e.asNodeBuffer&&xn?My(e.asNodeBuffer().toString("binary")):e.asBinary?My(e.asBinary()):e._data&&e._data.getContent?My(xg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function hte(e){if(!e)return null;if(e.data)return fH(e.data);if(e.asNodeBuffer&&xn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?fH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function OCe(e){return e&&e.name.slice(-4)===".bin"?hte(e):fte(e)}function Iu(e,t){for(var r=e.FullPaths||Fs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function sR(e,t){var r=Iu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function di(e,t,r){if(!r)return OCe(sR(e,t));if(!t)return null;try{return di(e,t)}catch{return null}}function Uc(e,t,r){if(!r)return fte(sR(e,t));if(!t)return null;try{return Uc(e,t)}catch{return null}}function DCe(e,t,r){return hte(sR(e,t))}function _H(e){for(var t=e.FullPaths||Fs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return xn?n=Rh(r):n=ZEe(r),_r.utils.cfb_add(e,t,n)}_r.utils.cfb_add(e,t,r)}else e.file(t,r)}function iR(){return _r.utils.cfb_new()}function mte(e,t){switch(t.type){case"base64":return _r.read(e,{type:"base64"});case"binary":return _r.read(e,{type:"binary"});case"buffer":case"array":return _r.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Qy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ei=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,PCe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,SH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,RCe=/<[^>]*>/g,ol=ei.match(SH)?SH:RCe,LCe=/<\w*:/,MCe=/<(\/?)\w+:/;function Kr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(PCe),l=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[m]&&d.slice(l-3,l)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function lf(e){return e.replace(MCe,"<$1")}var pte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},oR=Q4(pte),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return pte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),lR=/[&<>'"]/g,UCe=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(lR,function(r){return oR[r]}).replace(UCe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function kH(e){return pa(e).replace(/ /g,"_x0020_")}var gte=/[\u0000-\u001f]/g;function cR(e){var t=e+"";return t.replace(lR,function(r){return oR[r]}).replace(/\n/g,"<br/>").replace(gte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function QCe(e){var t=e+"";return t.replace(lR,function(r){return oR[r]}).replace(gte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var jH=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function HCe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ua(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function aB(e){for(var t="",r=0,n=0,a=0,s=0,i=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function BH(e){var t=_m(2*e.length),r,n,a=1,s=0,i=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function TH(e){return Rh(e,"binary").toString("utf8")}var HC="foo bar bazâð£",Ea=xn&&(TH(HC)==aB(HC)&&TH||BH(HC)==aB(HC)&&BH)||aB,$A=xn?function(e){return Rh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},qw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),xte=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),VCe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),zCe=/<\/?(?:vt:)?variant>/g,$Ce=/<(?:vt:)([^>]*)>([\s\S]*)</;function IH(e,t){var r=Kr(e),n=e.match(VCe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(zCe,"").match($Ce);i&&a.push({v:Ea(i[2]),t:i[1]})}),a}var vte=/(^\s|\s$|\n)/;function wo(e,t){return"<"+e+(t.match(vte)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Ww(e){return Fs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?Ww(r):"")+(t!=null?(t.match(vte)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function cF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function GCe(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",cF(e));throw new Error("Unable to serialize "+e)}function uR(e){if(xn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(Hm(rR(e)));throw new Error("Bad input format: expected Buffer or string")}var Xw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ji={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Qg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Dc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function KCe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function qCe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var FH=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},OH=xn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Rh(t)})):FH(e)}:FH,DH=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(rh(e,a)));return n.join("").replace(_l,"")},dR=xn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(_l,""):DH(e,t,r)}:DH,PH=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},bte=xn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):PH(e,t,r)}:PH,RH=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(iv(e,a)));return n.join("")},q2=xn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):RH(t,r,n)}:RH,yte=function(e,t){var r=Pc(e,t);return r>0?q2(e,t+4,t+4+r-1):""},wte=yte,Ete=function(e,t){var r=Pc(e,t);return r>0?q2(e,t+4,t+4+r-1):""},Cte=Ete,Nte=function(e,t){var r=2*Pc(e,t);return r>0?q2(e,t+4,t+4+r-1):""},_te=Nte,Ste=function(t,r){var n=Pc(t,r);return n>0?dR(t,r+4,r+4+n):""},kte=Ste,jte=function(e,t){var r=Pc(e,t);return r>0?q2(e,t+4,t+4+r):""},Bte=jte,Tte=function(e,t){return KCe(e,t)},S_=Tte,AR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};xn&&(wte=function(t,r){if(!Buffer.isBuffer(t))return yte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Cte=function(t,r){if(!Buffer.isBuffer(t))return Ete(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},_te=function(t,r){if(!Buffer.isBuffer(t))return Nte(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},kte=function(t,r){if(!Buffer.isBuffer(t))return Ste(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Bte=function(t,r){if(!Buffer.isBuffer(t))return jte(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},S_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Tte(t,r)},AR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var iv=function(e,t){return e[t]},rh=function(e,t){return e[t+1]*256+e[t]},WCe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Pc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Fp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},XCe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function dw(e,t){var r="",n,a,s=[],i,l,c,u;switch(t){case"dbcs":if(u=this.l,xn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(rh(this,u)),u+=2;e*=2;break;case"utf8":r=q2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=dR(this,this.l,this.l+e);break;case"wstr":return dw.call(this,e,"dbcs");case"lpstr-ansi":r=wte(this,this.l),e=4+Pc(this,this.l);break;case"lpstr-cp":r=Cte(this,this.l),e=4+Pc(this,this.l);break;case"lpwstr":r=_te(this,this.l),e=4+2*Pc(this,this.l);break;case"lpp4":e=4+Pc(this,this.l),r=kte(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Pc(this,this.l),r=Bte(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=iv(this,this.l+e++))!==0;)s.push(QC(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=rh(this,this.l+e))!==0;)s.push(QC(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=iv(this,u),this.l=u+1,l=dw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(QC(rh(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=iv(this,u),this.l=u+1,l=dw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(QC(iv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=iv(this,this.l),this.l++,n;case 2:return n=(t==="i"?WCe:rh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Fp:XCe)(this,this.l),this.l+=4,n):(a=Pc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=S_(this,this.l):a=S_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=bte(this,this.l,e);break}}return this.l+=e,r}var YCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},JCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ZCe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function eNe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ZCe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,YCe(this,t,this.l);break;case 8:if(n=8,r==="f"){qCe(this,t,this.l);break}case 16:break;case-4:n=4,JCe(this,t,this.l);break}return this.l+=n,this}function Ite(e,t){var r=bte(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function yo(e,t){e.l=t,e.read_shift=dw,e.chk=Ite,e.write_shift=eNe}function sl(e,t){e.l+=t}function Ct(e){var t=_m(e);return yo(t,0),t}function Lh(e,t,r){if(e){var n,a,s;yo(e,e.l||0);for(var i=e.length,l=0,c=0;e.l<i;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=r2[l]||r2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function sc(){var e=[],t=xn?256:2048,r=function(u){var d=Ct(u);return yo(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Zi(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=r2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&AR(r)&&e.push(r)}}function Aw(e,t,r){var n=Va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function LH(e,t,r){var n=Va(e);return n.s=Aw(n.s,t.s,r),n.e=Aw(n.e,t.s,r),n}function fw(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Hr(e);return!e.cRel&&e.cRel!=null&&(r=nNe(r)),!e.rRel&&e.rRel!=null&&(r=tNe(r)),r}function sB(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+is(e.s.c)+":"+(e.e.cRel?"":"$")+is(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Js(e.s.r)+":"+(e.e.rRel?"":"$")+Js(e.e.r):fw(e.s,t.biff)+":"+fw(e.e,t.biff)}function fR(e){return parseInt(rNe(e),10)-1}function Js(e){return""+(e+1)}function tNe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function rNe(e){return e.replace(/\$(\d+)$/,"$1")}function hR(e){for(var t=aNe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function is(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function nNe(e){return e.replace(/^([A-Z])/,"$$$1")}function aNe(e){return e.replace(/^\$([A-Z])/,"$1")}function sNe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function os(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function oc(e){var t=e.indexOf(":");return t==-1?{s:os(e),e:os(e)}:{s:os(e.slice(0,t)),e:os(e.slice(t+1))}}function nn(e,t){return typeof t>"u"||typeof t=="number"?nn(e.s,e.e):(typeof e!="string"&&(e=Hr(e)),typeof t!="string"&&(t=Hr(t)),e==t?e:e+":"+t)}function Hn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function MH(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ku(e.z,r?Fi(t):t)}catch{}try{return e.w=Ku((e.XF||{}).numFmtId||(r?14:0),r?Fi(t):t)}catch{return""+t}}function Eh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Mh[e.v]||e.v:t==null?MH(e,e.v):MH(e,t))}function Vm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Fte(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Hn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=i+f,x=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Mr[14],n.cellDates?(m.t="d",m.w=Ku(m.z,Fi(m.v))):(m.t="n",m.v=Fi(m.v),m.w=Ku(m.z,m.v))):m.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(m.z=s[g][x].z),s[g][x]=m;else{var v=Hr({c:x,r:g});s[v]&&s[v].z&&(m.z=s[v].z),s[v]=m}}}return u.s.c<1e7&&(s["!ref"]=nn(u)),s}function X1(e,t){return Fte(null,e,t)}function iNe(e){return e.read_shift(4,"i")}function Ud(e,t){return t||(t=Ct(4)),t.write_shift(4,e),t}function nl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function eo(e,t){var r=!1;return t==null&&(r=!0,t=Ct(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function oNe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function lNe(e,t){return t||(t=Ct(4)),t.write_shift(2,0),t.write_shift(2,0),t}function mR(e,t){var r=e.l,n=e.read_shift(1),a=nl(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(oNe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function cNe(e,t){var r=!1;return t==null&&(r=!0,t=Ct(15+4*e.t.length)),t.write_shift(1,0),eo(e.t,t),r?t.slice(0,t.l):t}var uNe=mR;function dNe(e,t){var r=!1;return t==null&&(r=!0,t=Ct(23+4*e.t.length)),t.write_shift(1,1),eo(e.t,t),t.write_shift(4,1),lNe({},t),r?t.slice(0,t.l):t}function Xu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Hg(e,t){return t==null&&(t=Ct(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Vg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function zg(e,t){return t==null&&(t=Ct(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var ANe=nl,Ote=eo;function pR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function k_(e,t){var r=!1;return t==null&&(r=!0,t=Ct(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var fNe=nl,uF=pR,gR=k_;function xR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?S_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Fp(t,0)>>2;return r?a/100:a}function Dte(e,t){t==null&&(t=Ct(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Pte(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function hNe(e,t){return t||(t=Ct(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var $g=Pte,Y1=hNe;function Zo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function vg(e,t){return(t||Ct(8)).write_shift(8,e,"f")}function mNe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Xp[a];u&&(t.rgb=Jw(u));break;case 2:t.rgb=Jw([i,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function j_(e,t){if(t||(t=Ct(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function pNe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function gNe(e,t){t||(t=Ct(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Rte(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function xNe(e){return Rte(e,1)}function vNe(e){return Rte(e,2)}var vR=2,Gl=3,VC=11,UH=12,B_=19,zC=64,bNe=65,yNe=71,wNe=4108,ENe=4126,Wi=80,Lte=81,CNe=[Wi,Lte],dF={1:{n:"CodePage",t:vR},2:{n:"Category",t:Wi},3:{n:"PresentationFormat",t:Wi},4:{n:"ByteCount",t:Gl},5:{n:"LineCount",t:Gl},6:{n:"ParagraphCount",t:Gl},7:{n:"SlideCount",t:Gl},8:{n:"NoteCount",t:Gl},9:{n:"HiddenCount",t:Gl},10:{n:"MultimediaClipCount",t:Gl},11:{n:"ScaleCrop",t:VC},12:{n:"HeadingPairs",t:wNe},13:{n:"TitlesOfParts",t:ENe},14:{n:"Manager",t:Wi},15:{n:"Company",t:Wi},16:{n:"LinksUpToDate",t:VC},17:{n:"CharacterCount",t:Gl},19:{n:"SharedDoc",t:VC},22:{n:"HyperlinksChanged",t:VC},23:{n:"AppVersion",t:Gl,p:"version"},24:{n:"DigSig",t:bNe},26:{n:"ContentType",t:Wi},27:{n:"ContentStatus",t:Wi},28:{n:"Language",t:Wi},29:{n:"Version",t:Wi},255:{},2147483648:{n:"Locale",t:B_},2147483651:{n:"Behavior",t:B_},1919054434:{}},AF={1:{n:"CodePage",t:vR},2:{n:"Title",t:Wi},3:{n:"Subject",t:Wi},4:{n:"Author",t:Wi},5:{n:"Keywords",t:Wi},6:{n:"Comments",t:Wi},7:{n:"Template",t:Wi},8:{n:"LastAuthor",t:Wi},9:{n:"RevNumber",t:Wi},10:{n:"EditTime",t:zC},11:{n:"LastPrinted",t:zC},12:{n:"CreatedDate",t:zC},13:{n:"ModifiedDate",t:zC},14:{n:"PageCount",t:Gl},15:{n:"WordCount",t:Gl},16:{n:"CharCount",t:Gl},17:{n:"Thumbnail",t:yNe},18:{n:"Application",t:Wi},19:{n:"DocSecurity",t:Gl},255:{},2147483648:{n:"Locale",t:B_},2147483651:{n:"Behavior",t:B_},1919054434:{}},QH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},NNe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function _Ne(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var SNe=_Ne([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Xp=Va(SNe),Mh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Mte={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},fF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},$C={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function bR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function kNe(e){var t=bR();if(!e||!e.match)return t;var r={};if((e.match(ol)||[]).forEach(function(n){var a=Kr(n);switch(a[0].replace(LCe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[fF[a.ContentType]]!==void 0&&t[fF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==ji.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Ute(e,t){var r=kCe(fF),n=[],a;n[n.length]=ei,n[n.length]=Kt("Types",null,{xmlns:ji.CT,"xmlns:xsd":ji.xsd,"xmlns:xsi":ji.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:$C[c][t.bookType]||$C[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:$C[c][t.bookType]||$C[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Yw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function hw(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ol)||[]).forEach(function(a){var s=Kr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Qy(s.Target,t);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function Fv(e){var t=[ei,Kt("Relationships",null,{xmlns:ji.RELS})];return Fs(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ha(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var jNe="application/vnd.oasis.opendocument.spreadsheet";function BNe(e,t){for(var r=uR(e),n,a;n=Xw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Kr(n[0],!1),a.path=="/"&&a.type!==jNe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function TNe(e){var t=[ei];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function HH(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function INe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function FNe(e){var t=[ei];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(HH(e[r][0],e[r][1])),t.push(INe("",e[r][0]));return t.push(HH("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Qte(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+w_.version+"</meta:generator></office:meta></office:document-meta>"}var Gu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ONe=function(){for(var e=new Array(Gu.length),t=0;t<Gu.length;++t){var r=Gu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Hte(e){var t={};e=Ea(e);for(var r=0;r<Gu.length;++r){var n=Gu[r],a=e.match(ONe[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ha(t[n[1]]))}return t}function iB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?Kt(e,t,r):wo(e,t))}function Vte(e,t){var r=t||{},n=[ei,Kt("cp:coreProperties",null,{"xmlns:cp":ji.CORE_PROPS,"xmlns:dc":ji.dc,"xmlns:dcterms":ji.dcterms,"xmlns:dcmitype":ji.dcmitype,"xmlns:xsi":ji.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&iB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:cF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&iB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:cF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Gu.length;++s){var i=Gu[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&iB(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Yp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],zte=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function $te(e,t,r,n){var a=[];if(typeof e=="string")a=IH(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?IH(t,n).map(function(d){return d.v}):t,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function DNe(e,t,r){var n={};return t||(t={}),e=Ea(e),Yp.forEach(function(a){var s=(e.match(qw(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Qn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&$te(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Gte(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=ei,t[t.length]=Kt("Properties",null,{xmlns:ji.EXT_PROPS,"xmlns:vt":ji.vt}),Yp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var PNe=/<[^>]+>[^<]*/g;function RNe(e,t){var r={},n="",a=e.match(PNe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=Kr(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=Ua(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ha(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Kte(e){var t=[ei,Kt("Properties",null,{xmlns:ji.CUST_PROPS,"xmlns:vt":ji.vt})];if(!e)return t.join("");var r=1;return Fs(e).forEach(function(a){++r,t[t.length]=Kt("property",GCe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var hF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},oB;function LNe(e,t,r){oB||(oB=Q4(hF)),t=oB[t]||t,e[t]=r}function MNe(e,t){var r=[];return Fs(hF).map(function(n){for(var a=0;a<Gu.length;++a)if(Gu[a][1]==n)return Gu[a];for(a=0;a<Yp.length;++a)if(Yp[a][1]==n)return Yp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(wo(hF[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:Dc.o})}function UNe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Fs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Gu.length;++i)if(s==Gu[i][1])return;for(i=0;i<Yp.length;++i)if(s==Yp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Kt(kH(s),l,{"dt:dt":c}))}}),t&&Fs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Kt(kH(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Dc.o+'">'+a.join("")+"</"+n+">"}function yR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function QNe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Ct(8);return i.write_shift(4,n),i.write_shift(4,a),i}function qte(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Wte(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Xte(e,t,r){return t===31?Wte(e):qte(e,t,r)}function mF(e,t,r){return Xte(e,t,r===!1?0:4)}function HNe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Xte(e,t,0)}function VNe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(_l,""),e.l-a&2&&(e.l+=2)}return r}function zNe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(_l,"");return r}function $Ne(e){var t=e.l,r=T_(e,Lte);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=T_(e,Gl);return[r,n]}function GNe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push($Ne(e));return r}function VH(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(_l,"").replace(Uy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Yte(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function KNe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function T_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==UH&&n!==t&&CNe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===UH?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return qte(e,n,4).replace(_l,"");case 31:return Wte(e);case 64:return yR(e);case 65:return Yte(e);case 71:return KNe(e);case 80:return mF(e,n,!s.raw).replace(_l,"");case 81:return HNe(e,n).replace(_l,"");case 4108:return GNe(e);case 4126:case 4127:return n==4127?VNe(e):zNe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function zH(e,t){var r=Ct(4),n=Ct(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ct(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=QNe(t);break;case 31:case 80:for(n=Ct(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Zi([r,n])}function $H(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(w,N){return w[1]-N[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var m=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,m=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],m=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],m=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(m=!1,e.l=s[i][1]),m)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=T_(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Id(l=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(l=h.CodePage=T_(e,vR),Id(l),c!==-1){var x=e.l;e.l=s[c][1],u=VH(e,l),e.l=x}}else if(s[i][0]===0){if(l===0){c=i,e.l=s[i+1][1];continue}u=VH(e,l)}else{var v=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Yte(e);break;case 30:e.l+=4,y=mF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=mF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=zs(e,4);break;case 64:e.l+=4,y=Ha(yR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=y}}return e.l=r+n,h}var Jte=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function qNe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function GH(e,t,r){var n=Ct(8),a=[],s=[],i=8,l=0,c=Ct(8),u=Ct(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Ct(8),u.write_shift(4,0),a.unshift(u);var d=[Ct(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Ct(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Zi(d),s.unshift(c),i+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(Jte.indexOf(e[l][0])>-1||zte.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=zH(g.t,h)}else{var v=qNe(h);v==-1&&(v=31,h=String(h)),c=zH(v,h)}s.push(c),u=Ct(8),u.write_shift(4,t?m:2+l),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),Zi([n].concat(a).concat(s))}function KH(e,t,r){var n=e.content;if(!n)return{};yo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==_r.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=$H(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=$H(n,null)}catch{}for(m in g)h[m]=g[m];return h.FMTID=[s,i],h}function qH(e,t,r,n,a,s){var i=Ct(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,_r.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=GH(e,r,n);if(l.push(c),a){var u=GH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return Zi(l)}function S0(e,t){return e.read_shift(t),null}function WNe(e,t){t||(t=Ct(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function XNe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function zs(e,t){return e.read_shift(t)===1}function gl(e,t){return t||(t=Ct(2)),t.write_shift(2,+!!e),t}function Ai(e){return e.read_shift(2,"u")}function Ou(e,t){return t||(t=Ct(2)),t.write_shift(2,e),t}function Zte(e,t){return XNe(e,t,Ai)}function YNe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function ere(e,t,r){return r||(r=Ct(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function W2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function JNe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function ZNe(e){var t=e.t||"",r=Ct(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ct(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Zi(a)}function bg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function X2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):bg(e,n,r)}function Gg(e,t,r){if(r.biff>5)return X2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function tre(e,t,r){return r||(r=Ct(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function e5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function t5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(_l,"");return n&&(e.l+=24),a}function r5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(_l,"");return r+i}function n5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return t5e(e);case"0303000000000000c000000000000046":return r5e(e);default:throw new Error("Unsupported Moniker "+r)}}function GC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(_l,""):"";return r}function WH(e,t){t||(t=Ct(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function a5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,l,c,u="",d,f;a&16&&(s=GC(e,r-e.l)),a&128&&(i=GC(e,r-e.l)),(a&257)===257&&(l=GC(e,r-e.l)),(a&257)===1&&(c=n5e(e,r-e.l)),a&8&&(u=GC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=yR(e)),e.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),s&&(m.Tooltip=s),m}function s5e(e){var t=Ct(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),WH(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&WH(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function rre(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function nre(e,t){var r=rre(e);return r[3]=0,r}function cf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function yg(e,t,r,n){return n||(n=Ct(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function i5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function o5e(e,t,r){return t===0?"":Gg(e,t,r)}function l5e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function are(e){var t=e.read_shift(2),r=xR(e);return[t,r]}function c5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=W2(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function z4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function sre(e,t){return t||(t=Ct(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function ire(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var u5e=ire;function ore(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function d5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function A5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Lo(e){e.l+=2,e.l+=e.read_shift(2)}var f5e={0:Lo,4:Lo,5:Lo,6:Lo,7:A5e,8:Lo,9:Lo,10:Lo,11:Lo,12:Lo,13:d5e,14:Lo,15:Lo,16:Lo,17:Lo,18:Lo,19:Lo,20:Lo,21:ore};function h5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(f5e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function KC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function wR(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ct(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function m5e(e,t){return t===0||e.read_shift(2),1200}function p5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Gg(e,0,r);return e.read_shift(t+n-e.l),a}function g5e(e,t){var r=!t||t.biff==8,n=Ct(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function x5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function v5e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=W2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function b5e(e,t){var r=!t||t.biff>=8?2:1,n=Ct(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function y5e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(JNe(e));return s.Count=n,s.Unique=a,s}function w5e(e,t){var r=Ct(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=ZNe(e[a]);var s=Zi([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function E5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function C5e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function N5e(e){var t=i5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function _5e(e){return e.read_shift(2),e.read_shift(4)}function XH(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function S5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function k5e(){var e=Ct(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function j5e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function B5e(e){var t=Ct(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function T5e(){}function I5e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=W2(e,0,r),n}function F5e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Ct(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function O5e(e){var t=cf(e);return t.isst=e.read_shift(4),t}function D5e(e,t,r,n){var a=Ct(10);return yg(e,t,n,a),a.write_shift(4,r),a}function P5e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=cf(e);r.biff==2&&e.l++;var s=X2(e,n-e.l,r);return a.val=s,a}function R5e(e,t,r,n,a){var s=!a||a.biff==8,i=Ct(8+ +s+(1+s)*r.length);return yg(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function L5e(e,t,r){var n=e.read_shift(2),a=Gg(e,0,r);return[n,a]}function M5e(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var U5e=Gg;function YH(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:i,c}}}function Q5e(e,t){var r=t.biff==8||!t.biff?4:2,n=Ct(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function H5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=are(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function V5e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(are(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function z5e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function $5e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=NNe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function G5e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=$5e(e,t,n.fStyle,r),n}function JH(e,t,r,n){var a=r&&r.biff==5;n||(n=Ct(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function K5e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function q5e(e){var t=Ct(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function ZH(e,t,r){var n=cf(e);(r.biff==2||t==9)&&++e.l;var a=YNe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function W5e(e,t,r,n,a,s){var i=Ct(8);return yg(e,t,n,i),ere(r,s,i),i}function X5e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=cf(e),a=Zo(e);return n.val=a,n}function Y5e(e,t,r,n){var a=Ct(14);return yg(e,t,n,a),vg(r,a),a}var eV=o5e;function J5e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=bg(e,s),l=[];n>e.l;)l.push(X2(e));return[s,a,i,l]}function tV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=c5e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var Z5e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function rV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=bg(e,i,r);a&32&&(u=Z5e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:hje(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function lre(e,t,r){if(r.biff<8)return e_e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(l5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function e_e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=W2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function t_e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=bg(e,n,r),i=bg(e,a,r);return[s,i]}function r_e(e,t,r){var n=ire(e);e.l++;var a=e.read_shift(1);return t-=8,[mje(e,t,r),a,n]}function nV(e,t,r){var n=u5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Aje(e,t,r)]}function n_e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function a_e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),l=Gg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,i,s]}}function s_e(e,t,r){return a_e(e,t,r)}function i_e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(z4(e));return r}function o_e(e){var t=Ct(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)sre(e[r],t);return t}function l_e(e,t,r){if(r&&r.biff<8)return u_e(e,t,r);var n=ore(e),a=h5e(e,t-22,n[1]);return{cmo:n,ft:a}}var c_e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function u_e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((c_e[n]||sl)(e,t,r)),{cmo:[a,n,s],ft:i}}function d_e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=e5e(e,6,r);var l=e.read_shift(2);e.read_shift(2),Ai(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=bg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function A_e(e,t){var r=z4(e);e.l+=16;var n=a5e(e,t-24);return[r,n]}function f_e(e){var t=Ct(24),r=os(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Zi([t,s5e(e[1])])}function h_e(e,t){e.read_shift(2);var r=z4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(_l,""),[r,n]}function m_e(e){var t=e[1].Tooltip,r=Ct(10+2*(t.length+1));r.write_shift(2,2048);var n=os(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function p_e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=QH[r]||r,r=e.read_shift(2),t[1]=QH[r]||r,t}function g_e(e){return e||(e=Ct(4)),e.write_shift(2,1),e.write_shift(2,1),e}function x_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nre(e));return r}function v_e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nre(e));return r}function b_e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function cre(e,t,r){if(!r.cellStyles)return sl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function y_e(e,t){var r=Ct(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function w_e(e,t){var r={};return t<32||(e.l+=16,r.header=Zo(e),r.footer=Zo(e),e.l+=2),r}function E_e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function C_e(e){for(var t=Ct(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var N_e=cf,__e=Zte,S_e=X2;function k_e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function j_e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=cf(e);++e.l;var a=Gg(e,t-7,r);return n.t="str",n.val=a,n}function B_e(e){var t=cf(e);++e.l;var r=Zo(e);return t.t="n",t.val=r,t}function T_e(e,t,r){var n=Ct(15);return eE(n,e,t),n.write_shift(8,r,"f"),n}function I_e(e){var t=cf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function F_e(e,t,r){var n=Ct(9);return eE(n,e,t),n.write_shift(2,r),n}function O_e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function D_e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function P_e(e,t,r){var n=e.l+t,a=cf(e),s=e.read_shift(2),i=bg(e,s,r);return e.l=n,a.t="str",a.val=i,a}var R_e=[2,3,48,49,131,139,140,245],pF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Q4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=_m(1);switch(c.type){case"base64":d=Mc(Kc(l));break;case"binary":d=Mc(l);break;case"buffer":case"array":d=l;break}yo(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,v=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(v=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var N=[],B={},k=Math.min(d.length,f==2?521:v-10-(m?264:0)),F=g?32:11;d.l<k&&d[d.l]!=13;)switch(B={},B.name=$w.utils.decode(w,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,B.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(B.offset=d.read_shift(4)),B.len=d.read_shift(1),f==2&&(B.offset=d.read_shift(2)),B.dec=d.read_shift(1),B.name.length&&N.push(B),f!=2&&(d.l+=g?13:14),B.type){case"B":(!m||B.len!=8)&&c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var E=0,S=0;for(u[0]=[],S=0;S!=N.length;++S)u[0][S]=N[S].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],S=0,S=0;S!=N.length;++S){var T=d.slice(d.l,d.l+N[S].len);d.l+=N[S].len,yo(T,0);var L=$w.utils.decode(w,T);switch(N[S].type){case"C":L.trim().length&&(u[E][S]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[E][S]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[E][S]=L;break;case"F":u[E][S]=parseFloat(L.trim());break;case"+":case"I":u[E][S]=g?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[E][S]=!0;break;case"N":case"F":u[E][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][S]="##MEMO##"+(g?parseInt(L.trim(),10):T.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[E][S]=+L||0);break;case"@":u[E][S]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[E][S]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[E][S]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][S]=-T.read_shift(-8,"f");break;case"B":if(m&&N[S].len==8){u[E][S]=T.read_shift(8,"f");break}case"G":case"P":T.l+=N[S].len;break;case"0":if(N[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=N,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=X1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Vm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&Id(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=sc(),f=O_(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],x=0,v=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var N=Hn(l["!ref"]),B=[],k=[],F=[];for(x=0;x<=N.e.c-N.s.c;++x){var E="",S="",T=0,L=[];for(v=0;v<m.length;++v)m[v][x]!=null&&L.push(m[v][x]);if(L.length==0||h[x]==null){B[x]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=L[v]instanceof Date?"D":"C";break;default:S="C"}T=Math.max(T,String(L[v]).length),E=E&&E!=S?"C":S}T>250&&(T=250),S=((g[x]||{}).DBF||{}).type,S=="C"&&g[x].DBF.len>T&&(T=g[x].DBF.len),E=="B"&&S=="N"&&(E="N",F[x]=g[x].DBF.dec,T=g[x].DBF.len),k[x]=E=="C"||S=="N"?T:s[E]||0,w+=k[x],B[x]=E}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,m.length),R.write_shift(2,296+32*y),R.write_shift(2,w),x=0;x<4;++x)R.write_shift(4,0);for(R.write_shift(4,0|(+t[Jee]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var j=d.next(32),P=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,P,"sbcs"),j.write_shift(1,B[x]=="?"?"C":B[x],"sbcs"),j.write_shift(4,v),j.write_shift(1,k[x]||s[B[x]]||0),j.write_shift(1,F[x]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),v+=k[x]||s[B[x]]||0}var M=d.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<m.length;++x){var Z=d.next(w);for(Z.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(B[v]){case"L":Z.write_shift(1,m[x][v]==null?63:m[x][v]?84:70);break;case"B":Z.write_shift(8,m[x][v]||0,"f");break;case"N":var V="0";for(typeof m[x][v]=="number"&&(V=m[x][v].toFixed(F[v]||0)),y=0;y<k[v]-V.length;++y)Z.write_shift(1,32);Z.write_shift(1,V,"sbcs");break;case"D":m[x][v]?(Z.write_shift(4,("0000"+m[x][v].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(m[x][v].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+m[x][v].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var W=String(m[x][v]!=null?m[x][v]:"").slice(0,k[v]);for(Z.write_shift(1,W,"sbcs"),y=0;y<k[v]-W.length;++y)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),ure=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Fs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?hH(g):g},n=function(h,m,g){var x=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:hH(x)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return s(Kc(h),m);case"binary":return s(h,m);case"buffer":return s(xn&&Buffer.isBuffer(h)?h.toString("binary"):Hm(h),m);case"array":return s(xg(h),m)}throw new Error("Unrecognized type "+m.type)}function s(h,m){var g=h.split(/[\n\r]+/),x=-1,v=-1,y=0,w=0,N=[],B=[],k=null,F={},E=[],S=[],T=[],L=0,R;for(+m.codepage>=0&&Id(+m.codepage);y!==g.length;++y){L=0;var j=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),P=j.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),M=P[0],Z;if(j.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":P[1].charAt(0)=="P"&&B.push(j.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,W=!1,G=!1,K=!1,ee=-1,X=-1;for(w=1;w<P.length;++w)switch(P[w].charAt(0)){case"A":break;case"X":v=parseInt(P[w].slice(1))-1,W=!0;break;case"Y":for(x=parseInt(P[w].slice(1))-1,W||(v=0),R=N.length;R<=x;++R)N[R]=[];break;case"K":Z=P[w].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(Md(Z))?isNaN(i1(Z).getDate())||(Z=Ha(Z)):(Z=Md(Z),k!==null&&q1(k)&&(Z=V4(Z))),V=!0;break;case"E":K=!0;var D=Ov(P[w].slice(1),{r:x,c:v});N[x][v]=[N[x][v],D];break;case"S":G=!0,N[x][v]=[N[x][v],"S5S"];break;case"G":break;case"R":ee=parseInt(P[w].slice(1))-1;break;case"C":X=parseInt(P[w].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+j)}if(V&&(N[x][v]&&N[x][v].length==2?N[x][v][0]=Z:N[x][v]=Z,k=null),G){if(K)throw new Error("SYLK shared formula cannot have own formula");var Q=ee>-1&&N[ee][X];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");N[x][v][1]=kre(Q[1],{r:x-ee,c:v-X})}break;case"F":var z=0;for(w=1;w<P.length;++w)switch(P[w].charAt(0)){case"X":v=parseInt(P[w].slice(1))-1,++z;break;case"Y":for(x=parseInt(P[w].slice(1))-1,R=N.length;R<=x;++R)N[R]=[];break;case"M":L=parseInt(P[w].slice(1))/20;break;case"F":break;case"G":break;case"P":k=B[parseInt(P[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=P[w].slice(1).split(" "),R=parseInt(T[0],10);R<=parseInt(T[1],10);++R)L=parseInt(T[2],10),S[R-1]=L===0?{hidden:!0}:{wch:L},Sm(S[R-1]);break;case"C":v=parseInt(P[w].slice(1))-1,S[v]||(S[v]={});break;case"R":x=parseInt(P[w].slice(1))-1,E[x]||(E[x]={}),L>0?(E[x].hpt=L,E[x].hpx=l1(L)):L===0&&(E[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+j)}z<1&&(k=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+j)}}return E.length>0&&(F["!rows"]=E),S.length>0&&(F["!cols"]=S),m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),[N,F]}function i(h,m){var g=a(h,m),x=g[0],v=g[1],y=X1(x,m);return Fs(v).forEach(function(w){y[w]=v[w]}),y}function l(h,m){return Vm(i(h,m),m)}function c(h,m,g,x){var v="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+kR(h.f,{r:g,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,m){m.forEach(function(g,x){var v="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?v+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Zw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=e2(g.wpx)),typeof g.wch=="number"&&(v+=Math.round(g.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,m){m.forEach(function(g,x){var v="F;";g.hidden?v+="M0;":g.hpt?v+="M"+20*g.hpt+";":g.hpx&&(v+="M"+20*t2(g.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function f(h,m){var g=["ID;PWXL;N;E"],x=[],v=Hn(h["!ref"]),y,w=Array.isArray(h),N=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var B=v.s.r;B<=v.e.r;++B)for(var k=v.s.c;k<=v.e.c;++k){var F=Hr({r:B,c:k});y=w?(h[B]||[])[k]:h[F],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,B,k))}return g.join(N)+N+x.join(N)+N+"E"+N}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),dre=function(){function e(s,i){switch(i.type){case"base64":return t(Kc(s),i);case"binary":return t(s,i);case"buffer":return t(xn&&Buffer.isBuffer(s)?s.toString("binary"):Hm(s),i);case"array":return t(xg(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Md(g))?isNaN(i1(g).getDate())?f[c][u]=g:f[c][u]=Ha(g):f[c][u]=Md(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return X1(e(s,i),i)}function n(s,i){return Vm(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Hn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Hr({r:m,c:g});if(f=h?(c[m]||[])[g]:c[x],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Ku(f.z||Mr[14],Fi(Ha(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Are=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,x=-1,v=0,y=[];v!==m.length;++v){var w=m[v].trim().split(":");if(w[0]==="cell"){var N=os(w[1]);if(y.length<=N.r)for(g=y.length;g<=N.r;++g)y[g]||(y[g]=[]);switch(g=N.r,x=N.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var B=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],B])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return X1(r(f,h),h)}function a(f,h){return Vm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,x="",v=oc(f["!ref"]),y=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var N=v.s.c;N<=v.e.c;++N)if(x=Hr({r:w,c:N}),g=y?(f[w]||[])[N]:f[x],!(!g||g.v==null||g.t==="z")){switch(m=["cell",x,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var B=Fi(Ha(g.v));m[2]="vtc",m[3]="nd",m[4]=""+B,m[5]=g.w||Ku(g.z||Mr[14],B);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,l,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),o1=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(Md(d))?isNaN(i1(d).getDate())?f[h][m]=d:f[h][m]=Ha(d):f[h][m]=Md(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var v=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,v=Math.max(v,y);for(w=0;w<=x;++w){m[w]=[];var N=0;for(e(g[w].slice(0,v).trim(),m,w,N,h),N=1;N<=(g[w].length-v)/10+1;++N)e(g[w].slice(v+(N-1)*10,v+N*10).trim(),m,w,N,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(x,v){return x[0]-v[0]||n[x[1]]-n[v[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},m="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var v=0,y=0,w=0,N=0,B=0,k=m.charCodeAt(0),F=!1,E=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=h.dateNF!=null?ECe(h.dateNF):null;function L(){var R=d.slice(N,B),j={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)j.t="z";else if(h.raw)j.t="s",j.v=R;else if(R.trim().length===0)j.t="s",j.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(j.t="s",j.v=R.slice(2,-1).replace(/""/g,'"')):J4e(R)?(j.t="n",j.f=R.slice(1)):(j.t="s",j.v=R);else if(R=="TRUE")j.t="b",j.v=!0;else if(R=="FALSE")j.t="b",j.v=!1;else if(!isNaN(w=Md(R)))j.t="n",h.cellText!==!1&&(j.w=R),j.v=w;else if(!isNaN(i1(R).getDate())||T&&R.match(T)){j.z=h.dateNF||Mr[14];var P=0;T&&R.match(T)&&(R=CCe(R,h.dateNF,R.match(T)||[]),P=1),h.cellDates?(j.t="d",j.v=Ha(R,P)):(j.t="n",j.v=Fi(Ha(R,P))),h.cellText!==!1&&(j.w=Ku(j.z,j.v instanceof Date?Fi(j.v):j.v)),h.cellNF||delete j.z}else j.t="s",j.v=R;if(j.t=="z"||(h.dense?(g[v]||(g[v]=[]),g[v][y]=j):g[Hr({c:y,r:v})]=j),N=B+1,S=d.charCodeAt(N),x.e.c<y&&(x.e.c=y),x.e.r<v&&(x.e.r=v),E==k)++y;else if(y=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;B<d.length;++B)switch(E=d.charCodeAt(B)){case 34:S===34&&(F=!F);break;case k:case 10:case 13:if(!F&&L())break e;break}return B-N>0&&L(),g["!ref"]=nn(x),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):X1(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:PR(d,f);switch(f.type){case"base64":h=Kc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof $w<"u"||(h=xn&&Buffer.isBuffer(d)?d.toString("binary"):Hm(d));break;case"array":h=xg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof $w<"u",h.slice(0,19)=="socialcalc:version:"?Are.to_sheet(f.type=="string"?h:Ea(h),f):i(h,f)}function c(d,f){return Vm(l(d,f),f)}function u(d){for(var f=[],h=Hn(d["!ref"]),m,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var v=[],y=h.s.c;y<=h.e.c;++y){var w=Hr({r:x,c:y});if(m=g?(d[x]||[])[y]:d[w],!m||m.v==null){v.push("          ");continue}for(var N=(m.w||(Eh(m),m.w)||"").slice(0,10);N.length<10;)N+=" ";v.push(N+(y===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function L_e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=ure.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return o1.to_workbook(e,t)}}var Jp=function(){function e(D,Q,z){if(D){yo(D,D.l||0);for(var J=z.Enum||ee;D.l<D.length;){var te=D.read_shift(2),se=J[te]||J[65535],ie=D.read_shift(2),le=D.l+ie,ue=se.f&&se.f(D,ie,z);if(D.l=le,Q(ue,se,te))return}}}function t(D,Q){switch(Q.type){case"base64":return r(Mc(Kc(D)),Q);case"binary":return r(Mc(D),Q);case"buffer":case"array":return r(D,Q)}throw"Unsupported type "+Q.type}function r(D,Q){if(!D)return D;var z=Q||{},J=z.dense?[]:{},te="Sheet1",se="",ie=0,le={},ue=[],je=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Ne=z.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)z.Enum=ee,e(D,function(Be,Le,We){switch(We){case 0:z.vers=Be,Be>=4096&&(z.qpro=!0);break;case 6:ae=Be;break;case 204:Be&&(se=Be);break;case 222:se=Be;break;case 15:case 51:z.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:We==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=z.dateNF||Mr[14],z.cellDates&&(Be[1].t="d",Be[1].v=V4(Be[1].v))),z.qpro&&Be[3]>ie&&(J["!ref"]=nn(ae),le[te]=J,ue.push(te),J=z.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ie=Be[3],te=se||"Sheet"+(ie+1),se="");var xe=z.dense?(J[Be[0].r]||[])[Be[0].c]:J[Hr(Be[0])];if(xe){xe.t=Be[1].t,xe.v=Be[1].v,Be[1].z!=null&&(xe.z=Be[1].z),Be[1].f!=null&&(xe.f=Be[1].f);break}z.dense?(J[Be[0].r]||(J[Be[0].r]=[]),J[Be[0].r][Be[0].c]=Be[1]):J[Hr(Be[0])]=Be[1];break}},z);else if(D[2]==26||D[2]==14)z.Enum=X,D[2]==14&&(z.qpro=!0,D.l=0),e(D,function(Be,Le,We){switch(We){case 204:te=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>ie&&(J["!ref"]=nn(ae),le[te]=J,ue.push(te),J=z.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ie=Be[3],te="Sheet"+(ie+1)),Ne>0&&Be[0].r>=Ne)break;z.dense?(J[Be[0].r]||(J[Be[0].r]=[]),J[Be[0].r][Be[0].c]=Be[1]):J[Hr(Be[0])]=Be[1],ae.e.c<Be[0].c&&(ae.e.c=Be[0].c),ae.e.r<Be[0].r&&(ae.e.r=Be[0].r);break;case 27:Be[14e3]&&(je[Be[14e3][0]]=Be[14e3][1]);break;case 1537:je[Be[0]]=Be[1],Be[0]==ie&&(te=Be[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(J["!ref"]=nn(ae),le[se||te]=J,ue.push(se||te),!je.length)return{SheetNames:ue,Sheets:le};for(var ke={},_e=[],he=0;he<je.length;++he)le[ue[he]]?(_e.push(je[he]||ue[he]),ke[je[he]]=le[je[he]]||le[ue[he]]):(_e.push(je[he]),ke[je[he]]={"!ref":"A1"});return{SheetNames:_e,Sheets:ke}}function n(D,Q){var z=Q||{};if(+z.codepage>=0&&Id(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var J=sc(),te=Hn(D["!ref"]),se=Array.isArray(D),ie=[];qt(J,0,s(1030)),qt(J,6,c(te));for(var le=Math.min(te.e.r,8191),ue=te.s.r;ue<=le;++ue)for(var je=Js(ue),ae=te.s.c;ae<=te.e.c;++ae){ue===te.s.r&&(ie[ae]=is(ae));var Ne=ie[ae]+je,ke=se?(D[ue]||[])[ae]:D[Ne];if(!(!ke||ke.t=="z"))if(ke.t=="n")(ke.v|0)==ke.v&&ke.v>=-32768&&ke.v<=32767?qt(J,13,m(ue,ae,ke.v)):qt(J,14,x(ue,ae,ke.v));else{var _e=Eh(ke);qt(J,15,f(ue,ae,_e.slice(0,239)))}}return qt(J,1),J.end()}function a(D,Q){var z=Q||{};if(+z.codepage>=0&&Id(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var J=sc();qt(J,0,i(D));for(var te=0,se=0;te<D.SheetNames.length;++te)(D.Sheets[D.SheetNames[te]]||{})["!ref"]&&qt(J,27,K(D.SheetNames[te],se++));var ie=0;for(te=0;te<D.SheetNames.length;++te){var le=D.Sheets[D.SheetNames[te]];if(!(!le||!le["!ref"])){for(var ue=Hn(le["!ref"]),je=Array.isArray(le),ae=[],Ne=Math.min(ue.e.r,8191),ke=ue.s.r;ke<=Ne;++ke)for(var _e=Js(ke),he=ue.s.c;he<=ue.e.c;++he){ke===ue.s.r&&(ae[he]=is(he));var Be=ae[he]+_e,Le=je?(le[ke]||[])[he]:le[Be];if(!(!Le||Le.t=="z"))if(Le.t=="n")qt(J,23,L(ke,he,ie,Le.v));else{var We=Eh(Le);qt(J,22,E(ke,he,ie,We.slice(0,239)))}}++ie}}return qt(J,1),J.end()}function s(D){var Q=Ct(2);return Q.write_shift(2,D),Q}function i(D){var Q=Ct(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var z=0,J=0,te=0,se=0;se<D.SheetNames.length;++se){var ie=D.SheetNames[se],le=D.Sheets[ie];if(!(!le||!le["!ref"])){++te;var ue=oc(le["!ref"]);z<ue.e.r&&(z=ue.e.r),J<ue.e.c&&(J=ue.e.c)}}return z>8191&&(z=8191),Q.write_shift(2,z),Q.write_shift(1,te),Q.write_shift(1,J),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function l(D,Q,z){var J={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&z.qpro?(J.s.c=D.read_shift(1),D.l++,J.s.r=D.read_shift(2),J.e.c=D.read_shift(1),D.l++,J.e.r=D.read_shift(2),J):(J.s.c=D.read_shift(2),J.s.r=D.read_shift(2),Q==12&&z.qpro&&(D.l+=2),J.e.c=D.read_shift(2),J.e.r=D.read_shift(2),Q==12&&z.qpro&&(D.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function c(D){var Q=Ct(8);return Q.write_shift(2,D.s.c),Q.write_shift(2,D.s.r),Q.write_shift(2,D.e.c),Q.write_shift(2,D.e.r),Q}function u(D,Q,z){var J=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(J[0].c=D.read_shift(1),J[3]=D.read_shift(1),J[0].r=D.read_shift(2),D.l+=2):(J[2]=D.read_shift(1),J[0].c=D.read_shift(2),J[0].r=D.read_shift(2)),J}function d(D,Q,z){var J=D.l+Q,te=u(D,Q,z);if(te[1].t="s",z.vers==20768){D.l++;var se=D.read_shift(1);return te[1].v=D.read_shift(se,"utf8"),te}return z.qpro&&D.l++,te[1].v=D.read_shift(J-D.l,"cstr"),te}function f(D,Q,z){var J=Ct(7+z.length);J.write_shift(1,255),J.write_shift(2,Q),J.write_shift(2,D),J.write_shift(1,39);for(var te=0;te<J.length;++te){var se=z.charCodeAt(te);J.write_shift(1,se>=128?95:se)}return J.write_shift(1,0),J}function h(D,Q,z){var J=u(D,Q,z);return J[1].v=D.read_shift(2,"i"),J}function m(D,Q,z){var J=Ct(7);return J.write_shift(1,255),J.write_shift(2,Q),J.write_shift(2,D),J.write_shift(2,z,"i"),J}function g(D,Q,z){var J=u(D,Q,z);return J[1].v=D.read_shift(8,"f"),J}function x(D,Q,z){var J=Ct(13);return J.write_shift(1,255),J.write_shift(2,Q),J.write_shift(2,D),J.write_shift(8,z,"f"),J}function v(D,Q,z){var J=D.l+Q,te=u(D,Q,z);if(te[1].v=D.read_shift(8,"f"),z.qpro)D.l=J;else{var se=D.read_shift(2);B(D.slice(D.l,D.l+se),te),D.l+=se}return te}function y(D,Q,z){var J=Q&32768;return Q&=-32769,Q=(J?D:0)+(Q>=8192?Q-16384:Q),(J?"":"$")+(z?is(Q):Js(Q))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(D,Q){yo(D,0);for(var z=[],J=0,te="",se="",ie="",le="";D.l<D.length;){var ue=D[D.l++];switch(ue){case 0:z.push(D.read_shift(8,"f"));break;case 1:se=y(Q[0].c,D.read_shift(2),!0),te=y(Q[0].r,D.read_shift(2),!1),z.push(se+te);break;case 2:{var je=y(Q[0].c,D.read_shift(2),!0),ae=y(Q[0].r,D.read_shift(2),!1);se=y(Q[0].c,D.read_shift(2),!0),te=y(Q[0].r,D.read_shift(2),!1),z.push(je+ae+":"+se+te)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(D.read_shift(2));break;case 6:{for(var Ne="";ue=D[D.l++];)Ne+=String.fromCharCode(ue);z.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:le=z.pop(),ie=z.pop(),z.push(["AND","OR"][ue-20]+"("+ie+","+le+")");break;default:if(ue<32&&N[ue])le=z.pop(),ie=z.pop(),z.push(ie+N[ue]+le);else if(w[ue]){if(J=w[ue][1],J==69&&(J=D[D.l++]),J>z.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+z.join("|")+"|");return}var ke=z.slice(-J);z.length-=J,z.push(w[ue][0]+"("+ke.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}z.length==1?Q[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function k(D){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=D.read_shift(2),Q[3]=D[D.l++],Q[0].c=D[D.l++],Q}function F(D,Q){var z=k(D);return z[1].t="s",z[1].v=D.read_shift(Q-4,"cstr"),z}function E(D,Q,z,J){var te=Ct(6+J.length);te.write_shift(2,D),te.write_shift(1,z),te.write_shift(1,Q),te.write_shift(1,39);for(var se=0;se<J.length;++se){var ie=J.charCodeAt(se);te.write_shift(1,ie>=128?95:ie)}return te.write_shift(1,0),te}function S(D,Q){var z=k(D);z[1].v=D.read_shift(2);var J=z[1].v>>1;if(z[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return z[1].v=J,z}function T(D,Q){var z=k(D),J=D.read_shift(4),te=D.read_shift(4),se=D.read_shift(2);if(se==65535)return J===0&&te===3221225472?(z[1].t="e",z[1].v=15):J===0&&te===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var ie=se&32768;return se=(se&32767)-16446,z[1].v=(1-ie*2)*(te*Math.pow(2,se+32)+J*Math.pow(2,se)),z}function L(D,Q,z,J){var te=Ct(14);if(te.write_shift(2,D),te.write_shift(1,z),te.write_shift(1,Q),J==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var se=0,ie=0,le=0,ue=0;return J<0&&(se=1,J=-J),ie=Math.log2(J)|0,J/=Math.pow(2,ie-31),ue=J>>>0,(ue&2147483648)==0&&(J/=2,++ie,ue=J>>>0),J-=ue,ue|=2147483648,ue>>>=0,J*=Math.pow(2,32),le=J>>>0,te.write_shift(4,le),te.write_shift(4,ue),ie+=16383+(se?32768:0),te.write_shift(2,ie),te}function R(D,Q){var z=T(D);return D.l+=Q-14,z}function j(D,Q){var z=k(D),J=D.read_shift(4);return z[1].v=J>>6,z}function P(D,Q){var z=k(D),J=D.read_shift(8,"f");return z[1].v=J,z}function M(D,Q){var z=P(D);return D.l+=Q-10,z}function Z(D,Q){return D[D.l+Q-1]==0?D.read_shift(Q,"cstr"):""}function V(D,Q){var z=D[D.l++];z>Q-1&&(z=Q-1);for(var J="";J.length<z;)J+=String.fromCharCode(D[D.l++]);return J}function W(D,Q,z){if(!(!z.qpro||Q<21)){var J=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var te=D.read_shift(Q-21,"cstr");return[J,te]}}function G(D,Q){for(var z={},J=D.l+Q;D.l<J;){var te=D.read_shift(2);if(te==14e3){for(z[te]=[0,""],z[te][0]=D.read_shift(2);D[D.l];)z[te][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return z}function K(D,Q){var z=Ct(5+D.length);z.write_shift(2,14e3),z.write_shift(2,Q);for(var J=0;J<D.length;++J){var te=D.charCodeAt(J);z[z.l++]=te>127?95:te}return z[z.l++]=0,z}var ee={0:{n:"BOF",f:Ai},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},X={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:j},38:{n:"??"},39:{n:"NUMBER27",f:P},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:W},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function M_e(e){var t={},r=e.match(ol),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Kr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=ZP[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var U_e=function(){var e=qw("t"),t=qw("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var l={t:"s",v:Qn(i[1])},c=s.match(t);return c&&(l.s=M_e(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),Q_e=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),H_e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,V_e=/<(?:\w+:)?r>/,z_e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function ER(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=cR(n.t))):e.match(V_e)&&(n.r=Ea(e),n.t=Qn(Ea((e.replace(z_e,"").match(H_e)||[]).join("").replace(ol,""))),r&&(n.h=Q_e(U_e(n.r)))),n):{t:""}}var $_e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,G_e=/<(?:\w+:)?(?:si|sstItem)>/g,K_e=/<\/(?:\w+:)?(?:si|sstItem)>/;function q_e(e,t){var r=[],n="";if(!e)return r;var a=e.match($_e);if(a){n=a[2].replace(G_e,"").split(K_e);for(var s=0;s!=n.length;++s){var i=ER(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Kr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var W_e=/^\s|\s$|[\t\n\r]/;function fre(e,t){if(!t.bookSST)return"";var r=[ei];r[r.length]=Kt("sst",null,{xmlns:Qg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(W_e)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function X_e(e){return[e.read_shift(4),e.read_shift(4)]}function Y_e(e,t){var r=[],n=!1;return Lh(e,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function J_e(e,t){return t||(t=Ct(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Z_e=cNe;function eSe(e){var t=sc();Rt(t,159,J_e(e));for(var r=0;r<e.length;++r)Rt(t,19,Z_e(e[r]));return Rt(t,160),t.end()}function hre(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function fh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function tSe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=fh(e,4),t.U=fh(e,4),t.W=fh(e,4),t}function rSe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function nSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(rSe(e));return t}function aSe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function sSe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=fh(e,4),t.U=fh(e,4),t.W=fh(e,4),t}function iSe(e){var t=sSe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function mre(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function pre(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function oSe(e){var t=fh(e);switch(t.Minor){case 2:return[t.Minor,lSe(e)];case 3:return[t.Minor,cSe()];case 4:return[t.Minor,uSe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function lSe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=mre(e,r),a=pre(e,e.length-e.l);return{t:"Std",h:n,v:a}}function cSe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function uSe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ol,function(s){var i=Kr(s);switch(lf(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function dSe(e,t){var r={},n=r.EncryptionVersionInfo=fh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=mre(e,a),t-=a,r.EncryptionVerifier=pre(e,t),r}function ASe(e){var t={},r=t.EncryptionVersionInfo=fh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function CR(e){var t=0,r,n=hre(e),a=n.length+1,s,i,l,c,u;for(r=_m(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^i;return t^52811}var gre=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=hre(i),c=s(l),u=l.length,d=_m(16),f=0;f!=16;++f)d[f]=0;var h,m,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=l[l.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,g=15-l.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(l[u],h),--u,--g;return d}}(),fSe=function(e,t,r,n,a){a||(a=t),n||(n=gre(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},hSe=function(e){var t=0,r=gre(e);return function(n){var a=fSe("",n,t,r);return t=a[1],a[0]}};function mSe(e,t,r,n){var a={key:Ai(e),verificationBytes:Ai(e)};return r.password&&(a.verifier=CR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=hSe(r.password)),a}function pSe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=ASe(e):n.Data=dSe(e,t),n}function gSe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?pSe(e,t-2,n):mSe(e,r.biff>=8?t:t-2,r,n),n}var xre=function(){function e(a,s){switch(s.type){case"base64":return t(Kc(a),s);case"binary":return t(a,s);case"buffer":return t(xn&&Buffer.isBuffer(a)?a.toString("binary"):Hm(a),s);case"array":return t(xg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var v=d.slice(m,h.lastIndex-g[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var y={v,t:"s"};Array.isArray(l)?l[f][x]=y:l[Hr({r:f,c:x})]=y}break}m=h.lastIndex}x>u.e.c&&(u.e.c=x)}),l["!ref"]=nn(u),l}function r(a,s){return Vm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Hn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Hr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Eh(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function xSe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Jw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function vSe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:l=((r-n)/i+6)%6;break;case r:l=(n-t)/i+2;break;case n:l=(t-r)/i+4;break}return[l/6,c,u/2]}function bSe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function I_(e,t){if(t===0)return e;var r=vSe(xSe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Jw(bSe(r))}var vre=6,ySe=15,wSe=1,Xo=vre;function Zw(e){return Math.floor((e+Math.round(128/Xo)/256)*Xo)}function e2(e){return Math.floor((e-5)/Xo*100+.5)/100}function F_(e){return Math.round((e*Xo+5)/Xo*256)/256}function lB(e){return F_(e2(Zw(e)))}function NR(e){var t=Math.abs(e-lB(e)),r=Xo;if(t>.005)for(Xo=wSe;Xo<ySe;++Xo)Math.abs(e-lB(e))<=t&&(t=Math.abs(e-lB(e)),r=Xo);Xo=r}function Sm(e){e.width?(e.wpx=Zw(e.width),e.wch=e2(e.wpx),e.MDW=Xo):e.wpx?(e.wch=e2(e.wpx),e.width=F_(e.wch),e.MDW=Xo):typeof e.wch=="number"&&(e.width=F_(e.wch),e.wpx=Zw(e.width),e.MDW=Xo),e.customWidth&&delete e.customWidth}var ESe=96,bre=ESe;function t2(e){return e*96/bre}function l1(e){return e*bre/96}var CSe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function NSe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var l=Kr(i);switch(lf(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Ua(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Ua(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function _Se(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var l=Kr(i);switch(lf(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function SSe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var l=Kr(i);switch(lf(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ea(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Ua(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Ua(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Ua(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Ua(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Ua(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Ua(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Ua(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=ZP[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Ua(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Xp[a.color.index];a.color.index==81&&(c=Xp[1]),c||(c=Xp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=I_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function kSe(e,t,r){t.NumberFmt=[];for(var n=Fs(Mr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Mr[n[a]];var s=e[0].match(ol);if(s)for(a=0;a<s.length;++a){var i=Kr(s[a]);switch(lf(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Qn(Ea(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Ah(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function jSe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var qC=["numFmtId","fillId","fontId","borderId","xfId"],WC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function BSe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ol)||[]).forEach(function(s){var i=Kr(s),l=0;switch(lf(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<qC.length;++l)n[qC[l]]&&(n[qC[l]]=parseInt(n[qC[l]],10));for(l=0;l<WC.length;++l)n[WC[l]]&&(n[WC[l]]=Ua(n[WC[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ua(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function TSe(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var ISe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&kSe(f,d,u),(f=l.match(a))&&SSe(f,d,c,u),(f=l.match(n))&&_Se(f,d,c,u),(f=l.match(s))&&NSe(f,d,c,u),(f=l.match(r))&&BSe(f,d,u),d}}();function yre(e,t){var r=[ei,Kt("styleSheet",null,{xmlns:Qg[0],"xmlns:vt":ji.vt})],n;return e.SSF&&(n=jSe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=TSe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function FSe(e,t){var r=e.read_shift(2),n=nl(e);return[r,n]}function OSe(e,t,r){r||(r=Ct(6+4*t.length)),r.write_shift(2,e),eo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function DSe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=pNe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=mNe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=nl(e),n}function PSe(e,t){t||(t=Ct(153)),t.write_shift(2,e.sz*20),gNe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),j_(e.color,t);var n=0;return n=2,t.write_shift(1,n),eo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var RSe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],cB,LSe=sl;function aV(e,t){t||(t=Ct(84)),cB||(cB=Q4(RSe));var r=cB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(j_({auto:1},t),j_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function MSe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function wre(e,t,r){r||(r=Ct(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ay(e,t){return t||(t=Ct(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var USe=sl;function QSe(e,t){return t||(t=Ct(51)),t.write_shift(1,0),ay(null,t),ay(null,t),ay(null,t),ay(null,t),ay(null,t),t.length>t.l?t.slice(0,t.l):t}function HSe(e,t){return t||(t=Ct(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),k_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function VSe(e,t,r){var n=Ct(2052);return n.write_shift(4,e),k_(t,n),k_(r,n),n.length>n.l?n.slice(0,n.l):n}function zSe(e,t,r){var n={};n.NumberFmt=[];for(var a in Mr)n.NumberFmt[a]=Mr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Lh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],Ah(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=I_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function $Se(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Ud(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,OSe(a,t[a]))}),Rt(e,616))}}function GSe(e){var t=1;Rt(e,611,Ud(t)),Rt(e,43,PSe({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function KSe(e){var t=2;Rt(e,603,Ud(t)),Rt(e,45,aV({patternType:"none"})),Rt(e,45,aV({patternType:"gray125"})),Rt(e,604)}function qSe(e){var t=1;Rt(e,613,Ud(t)),Rt(e,46,QSe()),Rt(e,614)}function WSe(e){var t=1;Rt(e,626,Ud(t)),Rt(e,47,wre({numFmtId:0},65535)),Rt(e,627)}function XSe(e,t){Rt(e,617,Ud(t.length)),t.forEach(function(r){Rt(e,47,wre(r,0))}),Rt(e,618)}function YSe(e){var t=1;Rt(e,619,Ud(t)),Rt(e,48,HSe({xfId:0,name:"Normal"})),Rt(e,620)}function JSe(e){var t=0;Rt(e,505,Ud(t)),Rt(e,506)}function ZSe(e){var t=0;Rt(e,508,VSe(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function e4e(e,t){var r=sc();return Rt(r,278),$Se(r,e.SSF),GSe(r),KSe(r),qSe(r),WSe(r),XSe(r,t.cellXfs),YSe(r),JSe(r),ZSe(r),Rt(r,279),r.end()}var t4e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function r4e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ol)||[]).forEach(function(a){var s=Kr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[t4e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function n4e(){}function a4e(){}var s4e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,i4e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,o4e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function l4e(e,t,r){t.themeElements={};var n;[["clrScheme",s4e,r4e],["fontScheme",i4e,n4e],["fmtScheme",o4e,a4e]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var c4e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Ere(e,t){(!e||e.length===0)&&(e=_R());var r,n={};if(!(r=e.match(c4e)))throw new Error("themeElements not found in theme");return l4e(r[0],n,t),n.raw=e,n}function _R(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ei];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function u4e(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=mte(s,{type:"array"})}catch{return}var l=Uc(i,"theme/theme/theme1.xml",!0);if(l)return Ere(l,r)}}function d4e(e){return e.read_shift(4)}function A4e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=f4e(e,4);break;case 2:t.xclrValue=rre(e);break;case 3:t.xclrValue=d4e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function f4e(e,t){return sl(e,t)}function h4e(e,t){return sl(e,t)}function m4e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=A4e(e);break;case 6:n[1]=h4e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function p4e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(m4e(e,r-e.l));return{ixfe:n,ext:s}}function g4e(e,t){t.forEach(function(r){r[0]})}function x4e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:nl(e)}}function v4e(e){var t=Ct(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),eo(e.name,t),t.slice(0,t.l)}function b4e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function y4e(e){var t=Ct(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function w4e(e,t){var r=Ct(8+2*t.length);return r.write_shift(4,e),eo(t,r),r.slice(0,r.l)}function E4e(e){return e.l+=4,e.read_shift(4)!=0}function C4e(e,t){var r=Ct(8);return r.write_shift(4,e),r.write_shift(4,1),r}function N4e(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return Lh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function _4e(){var e=sc();return Rt(e,332),Rt(e,334,Ud(1)),Rt(e,335,v4e({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,w4e(1,"XLDAPR")),Rt(e,52),Rt(e,35,Ud(514)),Rt(e,4096,Ud(0)),Rt(e,4097,Ou(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,C4e(1)),Rt(e,51,y4e([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function S4e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(ol,function(l){var c=Kr(l);switch(lf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Cre(){var e=[ei];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function k4e(e){var t=[];if(!e)return t;var r=1;return(e.match(ol)||[]).forEach(function(n){var a=Kr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function j4e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function B4e(e,t,r){var n=[];return Lh(e,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function T4e(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Lh(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function I4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var fv=1024;function Nre(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":Dc.v,"xmlns:o":Dc.o,"xmlns:x":Dc.x,"xmlns:mv":Dc.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];fv<e*1e3;)fv+=1e3;return t.forEach(function(s){var i=os(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",c,l),d={on:"t",obscured:"t"};++fv,a=a.concat(["<v:shape"+Ww({id:"_x0000_s"+fv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",wo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),wo("x:AutoFill","False"),wo("x:Row",String(i.r)),wo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function sV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var l=os(i.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[i.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[i.ref]=s;var c=Hn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=nn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function F4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Kr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=os(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&ER(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function _re(e){var t=[ei,Kt("comments",null,{xmlns:Qg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(wo("t",pa(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;t.push(wo("t",pa(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function O4e(e,t){var r=[],n=!1,a={},s=0;return e.replace(ol,function(l,c){var u=Kr(l);switch(lf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function D4e(e,t,r){var n=[ei,Kt("ThreadedComments",null,{xmlns:ji.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Kt("threadedComment",wo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function P4e(e,t){var r=[],n=!1;return e.replace(ol,function(s){var i=Kr(s);switch(lf(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function R4e(e){var t=[ei,Kt("personList",null,{xmlns:ji.TCMNT,"xmlns:x":Qg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function L4e(e){var t={};t.iauthor=e.read_shift(4);var r=$g(e);return t.rfx=r.s,t.ref=Hr(r.s),e.l+=16,t}function M4e(e,t){return t==null&&(t=Ct(36)),t.write_shift(4,e[1].iauthor),Y1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var U4e=nl;function Q4e(e){return eo(e.slice(0,54))}function H4e(e,t){var r=[],n=[],a={},s=!1;return Lh(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function V4e(e){var t=sc(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,Q4e(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:os(n[0]),e:os(n[0])};Rt(t,635,M4e([s,a])),a.t&&a.t.length>0&&Rt(t,637,dNe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var z4e="application/vnd.ms-office.vbaProject";function $4e(e){var t=_r.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");_r.utils.cfb_add(t,a,e.FileIndex[n].content)}}),_r.write(t)}function G4e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&_r.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Sre=["xlsb","xlsm","xlam","biff8","xla"];function K4e(){return{"!type":"dialog"}}function q4e(){return{"!type":"dialog"}}function W4e(){return{"!type":"macro"}}function X4e(){return{"!type":"macro"}}var Ov=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+is(d)+(c?"":"$")+Js(u)}return function(a,s){return t=s,a.replace(e,r)}}(),SR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,kR=function(){return function(t,r){return t.replace(SR,function(n,a,s,i,l,c){var u=hR(i)-(s?0:r.c),d=fR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function kre(e,t){return e.replace(SR,function(r,n,a,s,i,l){return n+(a=="$"?a+s:is(hR(s)+t.c))+(i=="$"?i+l:Js(fR(l)+t.r))})}function Y4e(e,t,r){var n=oc(t),a=n.s,s=os(r),i={r:s.r-a.r,c:s.c-a.c};return kre(e,i)}function J4e(e){return e.length!=1}function iV(e){return e.replace(/_xlfn\./g,"")}function li(e){e.l+=1}function km(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function jre(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Bre(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=km(e),l=km(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Bre(e){var t=km(e),r=km(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Z4e(e,t,r){if(r.biff<8)return Bre(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=km(e),i=km(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Tre(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return eke(e);var n=e.read_shift(r&&r.biff==12?4:2),a=km(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function eke(e){var t=km(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function tke(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function rke(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return nke(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function nke(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function ake(e,t,r){var n=(e[e.l++]&96)>>5,a=jre(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function ske(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=jre(e,s,r);return[n,a,i]}function ike(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function oke(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function lke(e,t,r){var n=(e[e.l++]&96)>>5,a=Z4e(e,t-1,r);return[n,a]}function cke(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function oV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function uke(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function dke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Ake(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function fke(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function hke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Ire(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function mke(e){return e.read_shift(2),Ire(e)}function pke(e){return e.read_shift(2),Ire(e)}function gke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Tre(e,0,r);return[n,a]}function xke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=rke(e,0,r);return[n,a]}function vke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Tre(e,0,r);return[n,a,s]}function bke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Eje[a],Dre[a],n]}function yke(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:wke(e);return[a,(s[0]===0?Dre:wje)[s[1]]]}function wke(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Eke(e,t,r){e.l+=r&&r.biff==2?3:4}function Cke(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Nke(e){return e.l++,Mh[e.read_shift(1)]}function _ke(e){return e.l++,e.read_shift(2)}function Ske(e){return e.l++,e.read_shift(1)!==0}function kke(e){return e.l++,Zo(e)}function jke(e,t,r){return e.l++,W2(e,t-1,r)}function Bke(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Mh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Zo(e);break;case 2:r[1]=Gg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Tke(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?$g:z4)(e));return a}function Ike(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=Bke(e,r.biff);return i}function Fke(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function Oke(e,t,r){if(r.biff==5)return Dke(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function Dke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Pke(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Rke(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Lke(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Mke(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var Uke=sl,Qke=sl,Hke=sl;function Y2(e,t,r){return e.l+=2,[tke(e)]}function jR(e){return e.l+=6,[]}var Vke=Y2,zke=jR,$ke=jR,Gke=Y2;function Fre(e){return e.l+=2,[Ai(e),e.read_shift(2)&1]}var Kke=Y2,qke=Fre,Wke=jR,Xke=Y2,Yke=Y2,Jke=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Zke(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=Jke[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function eje(e){return e.l+=2,[e.read_shift(4)]}function tje(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function rje(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function nje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function aje(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function sje(e){return e.l+=4,[0,0]}var lV={1:{n:"PtgExp",f:Cke},2:{n:"PtgTbl",f:Hke},3:{n:"PtgAdd",f:li},4:{n:"PtgSub",f:li},5:{n:"PtgMul",f:li},6:{n:"PtgDiv",f:li},7:{n:"PtgPower",f:li},8:{n:"PtgConcat",f:li},9:{n:"PtgLt",f:li},10:{n:"PtgLe",f:li},11:{n:"PtgEq",f:li},12:{n:"PtgGe",f:li},13:{n:"PtgGt",f:li},14:{n:"PtgNe",f:li},15:{n:"PtgIsect",f:li},16:{n:"PtgUnion",f:li},17:{n:"PtgRange",f:li},18:{n:"PtgUplus",f:li},19:{n:"PtgUminus",f:li},20:{n:"PtgPercent",f:li},21:{n:"PtgParen",f:li},22:{n:"PtgMissArg",f:li},23:{n:"PtgStr",f:jke},26:{n:"PtgSheet",f:tje},27:{n:"PtgEndSheet",f:rje},28:{n:"PtgErr",f:Nke},29:{n:"PtgBool",f:Ske},30:{n:"PtgInt",f:_ke},31:{n:"PtgNum",f:kke},32:{n:"PtgArray",f:cke},33:{n:"PtgFunc",f:bke},34:{n:"PtgFuncVar",f:yke},35:{n:"PtgName",f:Fke},36:{n:"PtgRef",f:gke},37:{n:"PtgArea",f:ake},38:{n:"PtgMemArea",f:Pke},39:{n:"PtgMemErr",f:Uke},40:{n:"PtgMemNoMem",f:Qke},41:{n:"PtgMemFunc",f:Rke},42:{n:"PtgRefErr",f:Lke},43:{n:"PtgAreaErr",f:ike},44:{n:"PtgRefN",f:xke},45:{n:"PtgAreaN",f:lke},46:{n:"PtgMemAreaN",f:nje},47:{n:"PtgMemNoMemN",f:aje},57:{n:"PtgNameX",f:Oke},58:{n:"PtgRef3d",f:vke},59:{n:"PtgArea3d",f:ske},60:{n:"PtgRefErr3d",f:Mke},61:{n:"PtgAreaErr3d",f:oke},255:{}},ije={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},oje={1:{n:"PtgElfLel",f:Fre},2:{n:"PtgElfRw",f:Xke},3:{n:"PtgElfCol",f:Vke},6:{n:"PtgElfRwV",f:Yke},7:{n:"PtgElfColV",f:Gke},10:{n:"PtgElfRadical",f:Kke},11:{n:"PtgElfRadicalS",f:Wke},13:{n:"PtgElfColS",f:zke},15:{n:"PtgElfColSV",f:$ke},16:{n:"PtgElfRadicalLel",f:qke},25:{n:"PtgList",f:Zke},29:{n:"PtgSxName",f:eje},255:{}},lje={0:{n:"PtgAttrNoop",f:sje},1:{n:"PtgAttrSemi",f:hke},2:{n:"PtgAttrIf",f:Ake},4:{n:"PtgAttrChoose",f:uke},8:{n:"PtgAttrGoto",f:dke},16:{n:"PtgAttrSum",f:Eke},32:{n:"PtgAttrBaxcel",f:oV},33:{n:"PtgAttrBaxcel",f:oV},64:{n:"PtgAttrSpace",f:mke},65:{n:"PtgAttrSpaceSemi",f:pke},128:{n:"PtgAttrIfError",f:fke},255:{}};function J2(e,t,r,n){if(n.biff<8)return sl(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Ike(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Tke(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(sl(e,t)),s}function Z2(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=lV[s]||lV[ije[s]],(s===24||s===25)&&(a=(s===24?oje:lje)[e[e.l+1]]),!a||!a.f?sl(e,t):i.push([a.n,a.f(e,t,r)]);return i}function cje(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var uje={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dje(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Ore(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function cV(e,t,r){var n=Ore(e,t,r);return n=="#REF"?n:dje(n,r)}function Ko(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,v="",y=0,w=e[0].length;y<w;++y){var N=e[0][y];switch(N[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),x>=0){switch(e[0][x][1][0]){case 0:v=_s(" ",e[0][x][1][1]);break;case 1:v=_s("\r",e[0][x][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+v,x=-1}l.push(u+uje[N[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Aw(N[1][1],i,a),l.push(fw(d,s));break;case"PtgRefN":d=r?Aw(N[1][1],r,a):N[1][1],l.push(fw(d,s));break;case"PtgRef3d":f=N[1][1],d=Aw(N[1][2],i,a),g=cV(n,f,a),l.push(g+"!"+fw(d,s));break;case"PtgFunc":case"PtgFuncVar":var B=N[1][0],k=N[1][1];B||(B=0),B&=127;var F=B==0?[]:l.slice(-B);l.length-=B,k==="User"&&(k=F.shift()),l.push(k+"("+F.join(",")+")");break;case"PtgBool":l.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(N[1]);break;case"PtgNum":l.push(String(N[1]));break;case"PtgStr":l.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(N[1]);break;case"PtgAreaN":m=LH(N[1][1],r?{s:r}:i,a),l.push(sB(m,a));break;case"PtgArea":m=LH(N[1][1],i,a),l.push(sB(m,a));break;case"PtgArea3d":f=N[1][1],m=N[1][2],g=cV(n,f,a),l.push(g+"!"+sB(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=N[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],S=E?E.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var T=N[1][1];h=N[1][2];var L;if(a.biff<=5)T<0&&(T=-T),n[T]&&(L=n[T][h]);else{var R="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][h]&&n[T][h].itab>0&&(R=n.SheetNames[n[T][h].itab-1]+"!"):R=n.SheetNames[h-1]+"!"),n[T]&&n[T][h])R+=n[T][h].Name;else if(n[0]&&n[0][h])R+=n[0][h].Name;else{var j=(Ore(n,T,a)||"").split(";;");j[h-1]?R=j[h-1]:R+="SH33TJSERRX"}l.push(R);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var P="(",M=")";if(x>=0){switch(v="",e[0][x][1][0]){case 2:P=_s(" ",e[0][x][1][1])+P;break;case 3:P=_s("\r",e[0][x][1][1])+P;break;case 4:M=_s(" ",e[0][x][1][1])+M;break;case 5:M=_s("\r",e[0][x][1][1])+M;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}l.push(P+l.pop()+M);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:N[1][1],r:N[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[Hr(d)]){var V=n.sharedf[Hr(d)];l.push(Ko(V,i,Z,n,a))}else{var W=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Ko(u[1],i,Z,n,a)),W=!0;break}W||l.push(N[1])}break;case"PtgArray":l.push("{"+cje(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&G.indexOf(e[0][y][0])==-1){N=e[0][x];var K=!0;switch(N[1][0]){case 4:K=!1;case 0:v=_s(" ",N[1][1]);break;case 5:K=!1;case 1:v=_s("\r",N[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}l.push((K?v:"")+l.pop()+(K?"":v)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Aje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],sl(e,t-2)];var l=Z2(e,i,r);return t!==i+a&&(s=J2(e,t-i-a,l,r)),e.l=n,[l,s]}function fje(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],sl(e,t-2)];var l=Z2(e,i,r);return t!==i+a&&(s=J2(e,t-i-a,l,r)),e.l=n,[l,s]}function hje(e,t,r,n){var a=e.l+t,s=Z2(e,n,r),i;return a!==e.l&&(i=J2(e,a-e.l,s,r)),[s,i]}function mje(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=Z2(e,s,r);return s==65535?[[],sl(e,t-2)]:(t!==s+2&&(a=J2(e,n-s-2,i,r)),[i,a])}function pje(e){var t;if(rh(e,e.l+6)!==65535)return[Zo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function gje(e){if(e==null){var t=Ct(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return vg(e);return vg(0)}function uB(e,t,r){var n=e.l+t,a=cf(e);r.biff==2&&++e.l;var s=pje(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=fje(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function xje(e,t,r,n,a){var s=yg(t,r,a),i=gje(e.v),l=Ct(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Ct(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Zi([s,i,l,u]);return f}function $4(e,t,r){var n=e.read_shift(4),a=Z2(e,n,r),s=e.read_shift(4),i=s>0?J2(e,s,a,r):null;return[a,i]}var vje=$4,G4=$4,bje=$4,yje=$4,wje={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Dre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Eje={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function uV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Cje(e){var t="of:="+e.replace(SR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function dB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Nje(e){return e.replace(/\./,"!")}var mw={},Dv={},pw=typeof Map<"u";function BR(e,t,r){var n=0,a=e.length;if(r){if(pw?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=pw?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(pw?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function K4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Xo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=e2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=F_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Zp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function zm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Ah(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Pre(e,t,r,n,a,s){try{n.cellNF&&(e.z=Mr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ha(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Mr[t]==null&&Ah(wCe[t]||"General",t),e.t==="e")e.w=e.w||Mh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Kw(e.v);else if(e.t==="d"){var i=Fi(e.v);(i|0)===i?e.w=i.toString(10):e.w=Kw(i)}else{if(e.v===void 0)return"";e.w=gg(e.v,Dv)}else e.t==="d"?e.w=Ku(t,Fi(e.v),Dv):e.w=Ku(t,e.v,Dv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=I_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=I_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function _je(e,t,r){if(e&&e["!ref"]){var n=Hn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Sje(e,t){var r=Hn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=nn(r))}var kje=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,jje=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Bje=/<(?:\w:)?hyperlink [^>]*>/mg,Tje=/"(\w*:\w*)"/,Ije=/<(?:\w:)?col\b[^>]*[\/]?>/g,Fje=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Oje=/<(?:\w:)?pageMargins[^>]*\/>/g,Rre=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Dje=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Pje=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Rje(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(jje);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Rre);h?TR(h[0],l,a,r):(h=u.match(Dje))&&Mje(h[0],h[1]||"",l,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var g=u.slice(m,m+50).match(Tje);g&&Sje(l,g[1])}var x=u.match(Pje);x&&x[1]&&Jje(x[1],a);var v=[];if(t.cellStyles){var y=u.match(Ije);y&&Kje(v,y)}f&&t3e(f[1],l,t,c,s,i);var w=d.match(Fje);w&&(l["!autofilter"]=Wje(w[0]));var N=[],B=d.match(kje);if(B)for(m=0;m!=B.length;++m)N[m]=Hn(B[m].slice(B[m].indexOf('"')+1));var k=d.match(Bje);k&&zje(l,k,n);var F=d.match(Oje);if(F&&(l["!margins"]=$je(Kr(F[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=nn(c)),t.sheetRows>0&&l["!ref"]){var E=Hn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=nn(E))}return v.length>0&&(l["!cols"]=v),N.length>0&&(l["!merges"]=N),l}function Lje(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nn(e[r])+'"/>';return t+"</mergeCells>"}function TR(e,t,r,n){var a=Kr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Ea(a.codeName)))}function Mje(e,t,r,n,a){TR(e.slice(0,e.indexOf(">")),r,n,a)}function Uje(e,t,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=$A(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Kt("outlinePr",null,u)}!s&&!l||(a[a.length]=Kt("sheetPr",l,i))}var Qje=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Hje=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Vje(e){var t={sheet:1};return Qje.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Hje.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=CR(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function zje(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Kr(Ea(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Qn(s.location))):(s.Target="#"+Qn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Hn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Hr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function $je(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Gje(e){return Zp(e),Kt("pageMargins",null,e)}function Kje(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Kr(t[n],!0);a.hidden&&(a.hidden=Ua(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,NR(a.width)),Sm(a);s<=i;)e[s++]=Va(a)}}function qje(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,K4(a,n)));return r[r.length]="</cols>",r.join("")}function Wje(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Xje(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=oc(a);i.s.r==i.e.r&&(i.e.r=oc(t["!ref"]).e.r,a=nn(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var Yje=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Jje(e,t){t.Views||(t.Views=[{}]),(e.match(Yje)||[]).forEach(function(r,n){var a=Kr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ua(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function Zje(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function e3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Mh[e.v];break;case"d":n&&n.cellDates?a=Ha(e.v,-1).toISOString():(e=Va(e),e.t="n",a=""+(e.v=Fi(Ha(e.v)))),typeof e.z>"u"&&(e.z=Mr[14]);break;default:a=e.v;break}var l=wo("v",pa(a)),c={r:t},u=zm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=wo("v",""+BR(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Kt("f",pa(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Kt("c",l,c)}var t3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=qw("v"),i=qw("f");return function(c,u,d,f,h,m){for(var g=0,x="",v=[],y=[],w=0,N=0,B=0,k="",F,E,S=0,T=0,L,R,j=0,P=0,M=Array.isArray(m.CellXf),Z,V=[],W=[],G=Array.isArray(u),K=[],ee={},X=!1,D=!!d.sheetStubs,Q=c.split(t),z=0,J=Q.length;z!=J;++z){x=Q[z].trim();var te=x.length;if(te!==0){var se=0;e:for(g=0;g<te;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=Kr(x.slice(se,g),!0),S=E.r!=null?parseInt(E.r,10):S+1,T=-1,d.sheetRows&&d.sheetRows<S)continue;ee={},X=!1,E.ht&&(X=!0,ee.hpt=parseFloat(E.ht),ee.hpx=l1(ee.hpt)),E.hidden=="1"&&(X=!0,ee.hidden=!0),E.outlineLevel!=null&&(X=!0,ee.level=+E.outlineLevel),X&&(K[S-1]=ee)}break;case"<":se=g;break}if(se>=g)break;if(E=Kr(x.slice(se,g),!0),S=E.r!=null?parseInt(E.r,10):S+1,T=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(ee={},X=!1,E.ht&&(X=!0,ee.hpt=parseFloat(E.ht),ee.hpx=l1(ee.hpt)),E.hidden=="1"&&(X=!0,ee.hidden=!0),E.outlineLevel!=null&&(X=!0,ee.level=+E.outlineLevel),X&&(K[S-1]=ee)),v=x.slice(g).split(e);for(var ie=0;ie!=v.length&&v[ie].trim().charAt(0)=="<";++ie);for(v=v.slice(ie),g=0;g!=v.length;++g)if(x=v[g].trim(),x.length!==0){if(y=x.match(r),w=g,N=0,B=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,k=y[1],N=0;N!=k.length&&!((B=k.charCodeAt(N)-64)<1||B>26);++N)w=26*w+B;--w,T=w}else++T;for(N=0;N!=x.length&&x.charCodeAt(N)!==62;++N);if(++N,E=Kr(x.slice(0,N),!0),E.r||(E.r=Hr({r:S-1,c:T})),k=x.slice(N),F={t:""},(y=k.match(s))!=null&&y[1]!==""&&(F.v=Qn(y[1])),d.cellFormula){if((y=k.match(i))!=null&&y[1]!==""){if(F.f=Qn(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(F.f=iV(F.f)),y[0].indexOf('t="array"')>-1)F.F=(k.match(a)||[])[1],F.F.indexOf(":")>-1&&V.push([Hn(F.F),F.F]);else if(y[0].indexOf('t="shared"')>-1){R=Kr(y[0]);var le=Qn(Ea(y[1]));d.xlfn||(le=iV(le)),W[parseInt(R.si,10)]=[R,le,E.r]}}else(y=k.match(/<f[^>]*\/>/))&&(R=Kr(y[0]),W[R.si]&&(F.f=Y4e(W[R.si][1],W[R.si][2],E.r)));var ue=os(E.r);for(N=0;N<V.length;++N)ue.r>=V[N][0].s.r&&ue.r<=V[N][0].e.r&&ue.c>=V[N][0].s.c&&ue.c<=V[N][0].e.c&&(F.F=V[N][1])}if(E.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(D)F.t="z";else continue;else F.t=E.t||"n";switch(f.s.c>T&&(f.s.c=T),f.e.c<T&&(f.e.c=T),F.t){case"n":if(F.v==""||F.v==null){if(!D)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!D)continue;F.t="z"}else L=mw[parseInt(F.v,10)],F.v=L.t,F.r=L.r,d.cellHTML&&(F.h=L.h);break;case"str":F.t="s",F.v=F.v!=null?Ea(F.v):"",d.cellHTML&&(F.h=cR(F.v));break;case"inlineStr":y=k.match(n),F.t="s",y!=null&&(L=ER(y[1]))?(F.v=L.t,d.cellHTML&&(F.h=L.h)):F.v="";break;case"b":F.v=Ua(F.v);break;case"d":d.cellDates?F.v=Ha(F.v,1):(F.v=Fi(Ha(F.v,1)),F.t="n");break;case"e":(!d||d.cellText!==!1)&&(F.w=F.v),F.v=Mte[F.v];break}if(j=P=0,Z=null,M&&E.s!==void 0&&(Z=m.CellXf[E.s],Z!=null&&(Z.numFmtId!=null&&(j=Z.numFmtId),d.cellStyles&&Z.fillId!=null&&(P=Z.fillId))),Pre(F,j,P,d,h,m),d.cellDates&&M&&F.t=="n"&&q1(Mr[j])&&(F.t="d",F.v=V4(F.v)),E.cm&&d.xlmeta){var je=(d.xlmeta.Cell||[])[+E.cm-1];je&&je.type=="XLDAPR"&&(F.D=!0)}if(G){var ae=os(E.r);u[ae.r]||(u[ae.r]=[]),u[ae.r][ae.c]=F}else u[E.r]=F}}}}K.length>0&&(u["!rows"]=K)}}();function r3e(e,t,r,n){var a=[],s=[],i=Hn(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),x={r:u},v,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=is(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=Js(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(l=e3e(w,c,e,t))!=null&&s.push(l)}(s.length>0||m&&m[f])&&(x={r:u},m&&m[f]&&(v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=t2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),a[a.length]=Kt("row",s.join(""),x))}if(m)for(;f<m.length;++f)m&&m[f]&&(x={r:f+1},v=m[f],v.hidden&&(x.hidden=1),y=-1,v.hpx?y=t2(v.hpx):v.hpt&&(y=v.hpt),y>-1&&(x.ht=y,x.customHeight=1),v.level&&(x.outlineLevel=v.level),a[a.length]=Kt("row","",x));return a.join("")}function Lre(e,t,r,n){var a=[ei,Kt("worksheet",null,{xmlns:Qg[0],"xmlns:r":ji.r})],s=r.SheetNames[e],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Hn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nn(d)}n||(n={}),c["!comments"]=[];var f=[];Uje(c,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=Zje(c,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=qje(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=r3e(c,t),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=Vje(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=Xje(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=Lje(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=ha(n,-1,pa(x[1].Target).replace(/#.*$/,""),Cn.HLINK),m["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(m.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(m.tooltip=pa(x[1].Tooltip)),a[a.length]=Kt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=Gje(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=wo("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ha(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=ha(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function n3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function a3e(e,t,r){var n=Ct(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=t2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Hr(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function s3e(e,t,r,n){var a=a3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var i3e=$g,o3e=Y1;function l3e(){}function c3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=ANe(e),r}function u3e(e,t,r){r==null&&(r=Ct(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return j_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Ote(e,r),r.slice(0,r.l)}function d3e(e){var t=Xu(e);return[t]}function A3e(e,t,r){return r==null&&(r=Ct(8)),Hg(t,r)}function f3e(e){var t=Vg(e);return[t]}function h3e(e,t,r){return r==null&&(r=Ct(4)),zg(t,r)}function m3e(e){var t=Xu(e),r=e.read_shift(1);return[t,r,"b"]}function p3e(e,t,r){return r==null&&(r=Ct(9)),Hg(t,r),r.write_shift(1,e.v?1:0),r}function g3e(e){var t=Vg(e),r=e.read_shift(1);return[t,r,"b"]}function x3e(e,t,r){return r==null&&(r=Ct(5)),zg(t,r),r.write_shift(1,e.v?1:0),r}function v3e(e){var t=Xu(e),r=e.read_shift(1);return[t,r,"e"]}function b3e(e,t,r){return r==null&&(r=Ct(9)),Hg(t,r),r.write_shift(1,e.v),r}function y3e(e){var t=Vg(e),r=e.read_shift(1);return[t,r,"e"]}function w3e(e,t,r){return r==null&&(r=Ct(8)),zg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function E3e(e){var t=Xu(e),r=e.read_shift(4);return[t,r,"s"]}function C3e(e,t,r){return r==null&&(r=Ct(12)),Hg(t,r),r.write_shift(4,t.v),r}function N3e(e){var t=Vg(e),r=e.read_shift(4);return[t,r,"s"]}function _3e(e,t,r){return r==null&&(r=Ct(8)),zg(t,r),r.write_shift(4,t.v),r}function S3e(e){var t=Xu(e),r=Zo(e);return[t,r,"n"]}function k3e(e,t,r){return r==null&&(r=Ct(16)),Hg(t,r),vg(e.v,r),r}function Mre(e){var t=Vg(e),r=Zo(e);return[t,r,"n"]}function j3e(e,t,r){return r==null&&(r=Ct(12)),zg(t,r),vg(e.v,r),r}function B3e(e){var t=Xu(e),r=xR(e);return[t,r,"n"]}function T3e(e,t,r){return r==null&&(r=Ct(12)),Hg(t,r),Dte(e.v,r),r}function I3e(e){var t=Vg(e),r=xR(e);return[t,r,"n"]}function F3e(e,t,r){return r==null&&(r=Ct(8)),zg(t,r),Dte(e.v,r),r}function O3e(e){var t=Xu(e),r=mR(e);return[t,r,"is"]}function D3e(e){var t=Xu(e),r=nl(e);return[t,r,"str"]}function P3e(e,t,r){return r==null&&(r=Ct(12+4*e.v.length)),Hg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function R3e(e){var t=Vg(e),r=nl(e);return[t,r,"str"]}function L3e(e,t,r){return r==null&&(r=Ct(8+4*e.v.length)),zg(t,r),eo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function M3e(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=G4(e,n-e.l,r);i[3]=Ko(l,null,a,r.supbooks,r)}else e.l=n;return i}function U3e(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=G4(e,n-e.l,r);i[3]=Ko(l,null,a,r.supbooks,r)}else e.l=n;return i}function Q3e(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=Zo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=G4(e,n-e.l,r);i[3]=Ko(l,null,a,r.supbooks,r)}else e.l=n;return i}function H3e(e,t,r){var n=e.l+t,a=Xu(e);a.r=r["!row"];var s=nl(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=G4(e,n-e.l,r);i[3]=Ko(l,null,a,r.supbooks,r)}else e.l=n;return i}var V3e=$g,z3e=Y1;function $3e(e,t){return t==null&&(t=Ct(4)),t.write_shift(4,e),t}function G3e(e,t){var r=e.l+t,n=$g(e),a=pR(e),s=nl(e),i=nl(e),l=nl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function K3e(e,t){var r=Ct(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Y1({s:os(e[0]),e:os(e[0])},r),gR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return eo(a||"",r),eo(e[1].Tooltip||"",r),eo("",r),r.slice(0,r.l)}function q3e(){}function W3e(e,t,r){var n=e.l+t,a=Pte(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=vje(e,n-e.l,r);i[1]=l}else e.l=n;return i}function X3e(e,t,r){var n=e.l+t,a=$g(e),s=[a];if(r.cellFormula){var i=yje(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function Y3e(e,t,r){r==null&&(r=Ct(18));var n=K4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Ure=["left","right","top","bottom","header","footer"];function J3e(e){var t={};return Ure.forEach(function(r){t[r]=Zo(e)}),t}function Z3e(e,t){return t==null&&(t=Ct(48)),Zp(e),Ure.forEach(function(r){vg(e[r],t)}),t}function eBe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function tBe(e,t,r){r==null&&(r=Ct(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function rBe(e){var t=Ct(24);return t.write_shift(4,4),t.write_shift(4,1),Y1(e,t),t}function nBe(e,t){return t==null&&(t=Ct(66)),t.write_shift(2,e.password?CR(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function aBe(){}function sBe(){}function iBe(e,t,r,n,a,s,i){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,g,x,v,y,w,N,B,k,F=[];l.biff=12,l["!row"]=0;var E=0,S=!1,T=[],L={},R=l.supbooks||a.supbooks||[[]];if(R.sharedf=L,R.arrayf=T,R.SheetNames=a.SheetNames||a.Sheets.map(function(G){return G.name}),!l.supbooks&&(l.supbooks=R,a.Names))for(var j=0;j<a.Names.length;++j)R[0][j+1]=a.Names[j];var P=[],M=[],Z=!1;r2[16]={n:"BrtShortReal",f:Mre};var V;if(Lh(e,function(K,ee,X){if(!h)switch(X){case 148:u=K;break;case 0:m=K,l.sheetRows&&l.sheetRows<=m.r&&(h=!0),B=Js(v=m.r),l["!row"]=m.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=l1(K.hpt)),M[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:K[2]},K[2]){case"n":g.v=K[1];break;case"s":N=mw[K[1]],g.v=N.t,g.r=N.r;break;case"b":g.v=!!K[1];break;case"e":g.v=K[1],l.cellText!==!1&&(g.w=Mh[g.v]);break;case"str":g.t="s",g.v=K[1];break;case"is":g.t="s",g.v=K[1].t;break}if((x=i.CellXf[K[0].iStyleRef])&&Pre(g,x.numFmtId,null,l,s,i),y=K[0].c==-1?y+1:K[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[is(y)+B]=g,l.cellFormula){for(S=!1,E=0;E<T.length;++E){var D=T[E];m.r>=D[0].s.r&&m.r<=D[0].e.r&&y>=D[0].s.c&&y<=D[0].e.c&&(g.F=nn(D[0]),S=!0)}!S&&K.length>3&&(g.f=K[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),l.cellDates&&x&&g.t=="n"&&q1(Mr[x.numFmtId])){var Q=Lp(g.v);Q&&(g.t="d",g.v=new Date(Q.y,Q.m-1,Q.d,Q.H,Q.M,Q.S,Q.u))}V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;g={t:"z",v:void 0},y=K[0].c==-1?y+1:K[0].c,l.dense?(c[v]||(c[v]=[]),c[v][y]=g):c[is(y)+B]=g,d.s.r>m.r&&(d.s.r=m.r),d.s.c>y&&(d.s.c=y),d.e.r<m.r&&(d.e.r=m.r),d.e.c<y&&(d.e.c=y),V&&(V.type=="XLDAPR"&&(g.D=!0),V=void 0);break;case 176:F.push(K);break;case 49:V=((l.xlmeta||{}).Cell||[])[K-1];break;case 494:var z=n["!id"][K.relId];for(z?(K.Target=z.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=z):K.relId==""&&(K.Target="#"+K.loc),v=K.rfx.s.r;v<=K.rfx.e.r;++v)for(y=K.rfx.s.c;y<=K.rfx.e.c;++y)l.dense?(c[v]||(c[v]=[]),c[v][y]||(c[v][y]={t:"z",v:void 0}),c[v][y].l=K):(w=Hr({c:y,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=K);break;case 426:if(!l.cellFormula)break;T.push(K),k=l.dense?c[v][y]:c[is(y)+B],k.f=Ko(K[1],d,{r:m.r,c:y},R,l),k.F=nn(K[0]);break;case 427:if(!l.cellFormula)break;L[Hr(K[0].s)]=K[1],k=l.dense?c[v][y]:c[is(y)+B],k.f=Ko(K[1],d,{r:m.r,c:y},R,l);break;case 60:if(!l.cellStyles)break;for(;K.e>=K.s;)P[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},Z||(Z=!0,NR(K.w/256)),Sm(P[K.e+1]);break;case 161:c["!autofilter"]={ref:nn(K)};break;case 476:c["!margins"]=K;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),K.name&&(a.Sheets[r].CodeName=K.name),(K.above||K.left)&&(c["!outline"]={above:K.above,left:K.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),K.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+X.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=nn(u||d)),l.sheetRows&&c["!ref"]){var W=Hn(c["!ref"]);l.sheetRows<=+W.e.r&&(W.e.r=l.sheetRows-1,W.e.r>d.e.r&&(W.e.r=d.e.r),W.e.r<W.s.r&&(W.s.r=W.e.r),W.e.c>d.e.c&&(W.e.c=d.e.c),W.e.c<W.s.c&&(W.s.c=W.e.c),c["!fullref"]=c["!ref"],c["!ref"]=nn(W))}return F.length>0&&(c["!merges"]=F),P.length>0&&(c["!cols"]=P),M.length>0&&(c["!rows"]=M),c}function oBe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||Mr[14],t.v=Fi(Ha(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=zm(a.cellXfs,t,a),t.l&&s["!links"].push([Hr(c),t.l]),t.c&&s["!comments"].push([Hr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=BR(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,i?Rt(e,18,_3e(t,c)):Rt(e,7,C3e(t,c))):(c.t="str",i?Rt(e,17,L3e(t,c)):Rt(e,6,P3e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,F3e(t,c)):Rt(e,2,T3e(t,c)):i?Rt(e,16,j3e(t,c)):Rt(e,5,k3e(t,c)),!0;case"b":return c.t="b",i?Rt(e,15,x3e(t,c)):Rt(e,4,p3e(t,c)),!0;case"e":return c.t="e",i?Rt(e,14,w3e(t,c)):Rt(e,3,b3e(t,c)),!0}return i?Rt(e,12,h3e(t,c)):Rt(e,1,A3e(t,c)),!0}function lBe(e,t,r,n){var a=Hn(t["!ref"]||"A1"),s,i="",l=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Js(d),s3e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=is(h)),s=l[h]+i;var m=c?(t[d]||[])[h]:t[s];if(!m){f=!1;continue}f=oBe(e,m,d,h,n,t,f)}}Rt(e,146)}function cBe(e,t){!t||!t["!merges"]||(Rt(e,177,$3e(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,z3e(r))}),Rt(e,178))}function uBe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,Y3e(n,r))}),Rt(e,391))}function dBe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,rBe(Hn(t["!ref"]))),Rt(e,650))}function ABe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ha(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Rt(e,494,K3e(n,a))}}),delete t["!links"]}function fBe(e,t,r,n){if(t["!comments"].length>0){var a=ha(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Rt(e,551,gR("rId"+a)),t["!legacy"]=a}}function hBe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:nn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=oc(s);l.s.r==l.e.r&&(l.e.r=oc(t["!ref"]).e.r,s=nn(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,Y1(Hn(s))),Rt(e,162)}}function mBe(e,t,r){Rt(e,133),Rt(e,137,tBe(t,r)),Rt(e,138),Rt(e,134)}function pBe(e,t){t["!protect"]&&Rt(e,535,nBe(t["!protect"]))}function gBe(e,t,r,n){var a=sc(),s=r.SheetNames[e],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Hn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,u3e(l,i["!outline"])),Rt(a,148,o3e(c)),mBe(a,i,r.Workbook),uBe(a,i),lBe(a,i,e,t),pBe(a,i),hBe(a,i,r,e),cBe(a,i),ABe(a,i,n),i["!margins"]&&Rt(a,476,Z3e(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&dBe(a,i),fBe(a,i,e,n),Rt(a,130),a.end()}function xBe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function vBe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=xBe(f);d.s.r=d.s.c=0,d.e.c=l,u=is(l),h[0].forEach(function(m,g){i[u+Js(g)]={t:"n",v:m,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=nn(d)),i}function bBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=e.match(Rre);return l&&TR(l[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function yBe(e,t){e.l+=10;var r=nl(e);return{name:r}}function wBe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Lh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var IR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],EBe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],CBe=[],NBe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function dV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ua(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function AV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ua(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Qre(e){AV(e.WBProps,IR),AV(e.CalcPr,NBe),dV(e.WBView,EBe),dV(e.Sheets,CBe),Dv.date1904=Ua(e.WBProps.date1904)}function _Be(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ua(e.Workbook.WBProps.date1904)?"true":"false"}var SBe="][*?/\\".split("");function Hre(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return SBe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function kBe(e,t,r){e.forEach(function(n,a){Hre(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function jBe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];kBe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)_je(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var BBe=/<\w+:workbook/;function TBe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(ol,function(c,u){var d=Kr(c);switch(lf(d[0])){case"<?xml":break;case"<workbook":c.match(BBe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":IR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ua(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ua(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Qn(Ea(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Qg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Qre(r),r}function Vre(e){var t=[ei];t[t.length]=Kt("workbook",null,{xmlns:Qg[0],"xmlns:r":ji.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(IR.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:pa(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Kt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Kt("definedName",pa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function IBe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=uF(e),r.name=nl(e),r}function FBe(e,t){return t||(t=Ct(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),gR(e.strRelID,t),eo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function OBe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?nl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function DBe(e,t){t||(t=Ct(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Ote(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function PBe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function RBe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=fNe(e),i=bje(e,0,r),l=pR(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function LBe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],r2[16]={n:"BrtFRTArchID$",f:PBe},Lh(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ko(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Qre(r),r.Names=s,r.supbooks=i,r}function MBe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,FBe(a))}Rt(e,144)}function UBe(e,t){t||(t=Ct(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return eo("SheetJS",t),eo(w_.version,t),eo(w_.version,t),eo("7262",t),t.length>t.l?t.slice(0,t.l):t}function QBe(e,t){t||(t=Ct(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function HBe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,QBe(a)),Rt(e,136))}}function VBe(e,t){var r=sc();return Rt(r,131),Rt(r,128,UBe()),Rt(r,153,DBe(e.Workbook&&e.Workbook.WBProps||null)),HBe(r,e),MBe(r,e),Rt(r,132),r.end()}function zBe(e,t,r){return t.slice(-4)===".bin"?LBe(e,r):TBe(e,r)}function $Be(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?iBe(e,n,r,a,s,i,l):Rje(e,n,r,a,s,i,l)}function GBe(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?wBe(e,n,r,a,s):bBe(e,n,r,a,s)}function KBe(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?W4e():X4e()}function qBe(e,t,r,n,a,s,i,l){return t.slice(-4)===".bin"?K4e():q4e()}function WBe(e,t,r,n){return t.slice(-4)===".bin"?zSe(e,r,n):ISe(e,r,n)}function XBe(e,t,r){return Ere(e,r)}function YBe(e,t,r){return t.slice(-4)===".bin"?Y_e(e,r):q_e(e,r)}function JBe(e,t,r){return t.slice(-4)===".bin"?H4e(e,r):F4e(e,r)}function ZBe(e,t,r){return t.slice(-4)===".bin"?B4e(e):k4e(e)}function eTe(e,t,r,n){return r.slice(-4)===".bin"?T4e(e,t,r,n):void 0}function tTe(e,t,r){return t.slice(-4)===".bin"?N4e(e,t,r):S4e(e,t,r)}function rTe(e,t,r){return(t.slice(-4)===".bin"?VBe:Vre)(e)}function nTe(e,t,r,n,a){return(t.slice(-4)===".bin"?gBe:Lre)(e,r,n,a)}function aTe(e,t,r){return(t.slice(-4)===".bin"?e4e:yre)(e,r)}function sTe(e,t,r){return(t.slice(-4)===".bin"?eSe:fre)(e,r)}function iTe(e,t,r){return(t.slice(-4)===".bin"?V4e:_re)(e)}function oTe(e){return(e.slice(-4)===".bin"?_4e:Cre)()}var zre=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,$re=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function wd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(zre),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match($re),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function lTe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(zre),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match($re),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var gw;function cTe(e,t){var r=gw[e]||Qn(e);return r==="General"?gg(t):Ku(r,t)}function uTe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ua(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function dTe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Mh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Kw(e.v):e.w=gg(e.v):e.w=cTe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=gw[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&q1(n)){var a=Lp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function ATe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=CSe[n.Pattern]||n.Pattern)}e[t.ID]=t}function fTe(e,t,r,n,a,s,i,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],g=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&m.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ua(e);break;case"String":n.t="s",n.r=jH(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ha(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Mte[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=jH(t||e));break}if(dTe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Qn(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Ov(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Ov("RC:RC",a):n.ArrayRange&&(n.F=Ov(n.ArrayRange,a),c.push([Hn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(m.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function hTe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function AB(e,t){var r=t||{};W1();var n=My(uR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Va(r);return i.type="string",o1.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){a.indexOf("<"+Le)>=0&&(s=!0)}),s)return ZTe(n,r);gw={"General Number":"General","General Date":Mr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Mr[15],"Short Date":Mr[14],"Long Time":Mr[19],"Medium Time":Mr[18],"Short Time":Mr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Mr[2],Standard:Mr[4],Percent:Mr[10],Scientific:Mr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},m="",g={},x={},v=wd('<Data ss:Type="String">'),y=0,w=0,N=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},F={},E="",S=0,T=[],L={},R={},j=0,P=[],M=[],Z={},V=[],W,G=!1,K=[],ee=[],X={},D=0,Q=0,z={Sheets:[],WBProps:{date1904:!1}},J={};Xw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";l=Xw.exec(n);)switch(l[3]=(te=l[3]).toLowerCase()){case"data":if(te=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?fTe(n.slice(y,l.index),E,v,c[c.length-1][0]=="comment"?Z:g,{c:w,r:N},k,V[w],x,K,r):(E="",v=wd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>N)&&g.v!==void 0&&(r.dense?(h[N]||(h[N]=[]),h[N][w]=g):h[is(w)+Js(N)]=g),g.HRef&&(g.l={Target:Qn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(D=w+(parseInt(g.MergeAcross,10)|0),Q=N+(parseInt(g.MergeDown,10)|0),T.push({s:{c:w,r:N},e:{c:D,r:Q}})),!r.sheetStubs)g.MergeAcross?w=D+1:++w;else if(g.MergeAcross||g.MergeDown){for(var se=w;se<=D;++se)for(var ie=N;ie<=Q;++ie)(se>w||ie>N)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][se]={t:"z"}):h[is(se)+Js(ie)]={t:"z"});w=D+1}else++w;else g=lTe(l[0]),g.Index&&(w=+g.Index-1),w<B.s.c&&(B.s.c=w),w>B.e.c&&(B.e.c=w),l[0].slice(-2)==="/>"&&++w,M=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(N<B.s.r&&(B.s.r=N),N>B.e.r&&(B.e.r=N),l[0].slice(-2)==="/>"&&(x=wd(l[0]),x.Index&&(N=+x.Index-1)),w=0,++N):(x=wd(l[0]),x.Index&&(N=+x.Index-1),X={},(x.AutoFitHeight=="0"||x.Height)&&(X.hpx=parseInt(x.Height,10),X.hpt=t2(X.hpx),ee[N]=X),x.Hidden=="1"&&(X.hidden=!0,ee[N]=X));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(m),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(h["!ref"]=nn(B),r.sheetRows&&r.sheetRows<=B.e.r&&(h["!fullref"]=h["!ref"],B.e.r=r.sheetRows-1,h["!ref"]=nn(B))),T.length&&(h["!merges"]=T),V.length>0&&(h["!cols"]=V),ee.length>0&&(h["!rows"]=ee),d[m]=h}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=w=0,c.push([l[3],!1]),u=wd(l[0]),m=Qn(u.Name),h=r.dense?[]:{},T=[],K=[],ee=[],J={name:m,Hidden:0},z.Sheets.push(J);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),V=[],G=!1}break;case"style":l[1]==="/"?ATe(k,F,r):F=wd(l[0]);break;case"numberformat":F.nf=Qn(wd(l[0]).Format||"General"),gw[F.nf]&&(F.nf=gw[F.nf]);for(var le=0;le!=392&&Mr[le]!=F.nf;++le);if(le==392){for(le=57;le!=392;++le)if(Mr[le]==null){Ah(F.nf,le);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(W=wd(l[0]),W.Hidden&&(W.hidden=!0,delete W.Hidden),W.Width&&(W.wpx=parseInt(W.Width,10)),!G&&W.wpx>10){G=!0,Xo=vre;for(var ue=0;ue<V.length;++ue)V[ue]&&Sm(V[ue])}G&&Sm(W),V[W.Index-1||V.length]=W;for(var je=0;je<+W.Span;++je)V[V.length]=Va(W);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var ae=Kr(l[0]),Ne={Name:ae.Name,Ref:Ov(ae.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(Ne.Sheet=z.Sheets.length-1),z.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=wd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?LNe(L,te,n.slice(j,l.index)):j=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));hTe(Z),M.push(Z)}else c.push([l[3],!1]),u=wd(l[0]),Z={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ke=wd(l[0]);h["!autofilter"]={ref:Ov(ke.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return gV(n,r);var _e=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(j,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else j=l.index+l[0].length;break;case"header":h["!margins"]||Zp(h["!margins"]={},"xlml"),isNaN(+Kr(l[0]).Margin)||(h["!margins"].header=+Kr(l[0]).Margin);break;case"footer":h["!margins"]||Zp(h["!margins"]={},"xlml"),isNaN(+Kr(l[0]).Margin)||(h["!margins"].footer=+Kr(l[0]).Margin);break;case"pagemargins":var he=Kr(l[0]);h["!margins"]||Zp(h["!margins"]={},"xlml"),isNaN(+he.Top)||(h["!margins"].top=+he.Top),isNaN(+he.Left)||(h["!margins"].left=+he.Left),isNaN(+he.Right)||(h["!margins"].right=+he.Right),isNaN(+he.Bottom)||(h["!margins"].bottom=+he.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?uTe(R,te,P,n.slice(j,l.index)):(P=l,j=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Be={};return!r.bookSheets&&!r.bookProps&&(Be.Sheets=d),Be.SheetNames=f,Be.Workbook=z,Be.SSF=Va(Mr),Be.Props=L,Be.Custprops=R,Be}function gF(e,t){switch(OR(t=t||{}),t.type||"base64"){case"base64":return AB(Kc(e),t);case"binary":case"buffer":case"file":return AB(e,t);case"array":return AB(Hm(e),t)}}function mTe(e,t){var r=[];return e.Props&&r.push(MNe(e.Props,t)),e.Custprops&&r.push(UNe(e.Props,e.Custprops)),r.join("")}function pTe(){return""}function gTe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":pa(Mr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),i))}),Kt("Styles",r.join(""))}function Gre(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+kR(e.Ref,{r:0,c:0})})}function xTe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Gre(a)))}return Kt("Names",r.join(""))}function vTe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(Gre(l)))}return s.join("")}function bTe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(wo("ProtectContents","True")),e["!protect"].objects&&a.push(wo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(wo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(wo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(wo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:Dc.x})}function yTe(e){return e.map(function(t){var r=HCe(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function wTe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+pa(kR(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=os(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Mh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Mr[14]);break;case"s":f="String",h=QCe(e.v||"");break}var m=zm(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=yTe(e.c)),Kt("Cell",x,l)}function ETe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=l1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function CTe(e,t,r,n){if(!e["!ref"])return"";var a=Hn(e["!ref"]),s=e["!merges"]||[],i=0,l=[];e["!cols"]&&e["!cols"].forEach(function(v,y){Sm(v);var w=!!v.width,N=K4(y,v),B={"ss:Index":y+1};w&&(B["ss:Width"]=Zw(N.width)),v.hidden&&(B["ss:Hidden"]="1"),l.push(Kt("Column",null,B))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[ETe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=Hr(m),x=c?(e[u]||[])[f]:e[g];d.push(wTe(x,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function NTe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?vTe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?CTe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(bTe(s,t,e,r)),n.join("")}function _Te(e,t){t||(t={}),e.SSF||(e.SSF=Va(Mr)),e.SSF&&(W1(),U4(e.SSF),t.revssf=H4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(mTe(e,t)),r.push(pTe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",NTe(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=gTe(e,t),r[3]=xTe(e),ei+Kt("Workbook",r.join(""),{xmlns:Dc.ss,"xmlns:o":Dc.o,"xmlns:x":Dc.x,"xmlns:ss":Dc.ss,"xmlns:dt":Dc.dt,"xmlns:html":Dc.html})}function STe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=xNe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=vNe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var kTe=[60,1084,2066,2165,2175];function jTe(e,t,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=rh(r,r.l),u=xF[c],d=0;u!=null&&kTe.indexOf(c)>-1;)s=rh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=xF[c=rh(r,r.l)];var f=Zi(i);yo(f,0);var h=0;f.lens=[];for(var m=0;m<i.length;++m)f.lens.push(h),h+=i[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function BA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Mr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Mh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Kw(e.v):e.w=gg(e.v):e.w=Ku(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&q1(Mr[n]||String(n))){var a=Lp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function XC(e,t,r){return{v:e,ixfe:t,t:r}}function BTe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},l=null,c=[],u="",d={},f,h="",m,g,x,v,y={},w=[],N,B,k=[],F=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},T=function(Qt){return Qt<8?Xp[Qt]:Qt<64&&F[Qt-8]||Xp[Qt]},L=function(Qt,wt,Tr){var tr=wt.XF.data;if(!(!tr||!tr.patternType||!Tr||!Tr.cellStyles)){wt.s={},wt.s.patternType=tr.patternType;var an;(an=Jw(T(tr.icvFore)))&&(wt.s.fgColor={rgb:an}),(an=Jw(T(tr.icvBack)))&&(wt.s.bgColor={rgb:an})}},R=function(Qt,wt,Tr){if(!(X>1)&&!(Tr.sheetRows&&Qt.r>=Tr.sheetRows)){if(Tr.cellStyles&&wt.XF&&wt.XF.data&&L(Qt,wt,Tr),delete wt.ixfe,delete wt.XF,f=Qt,h=Hr(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Tr.cellFormula&&wt.f){for(var tr=0;tr<w.length;++tr)if(!(w[tr][0].s.c>Qt.c||w[tr][0].s.r>Qt.r)&&!(w[tr][0].e.c<Qt.c||w[tr][0].e.r<Qt.r)){wt.F=nn(w[tr][0]),(w[tr][0].s.c!=Qt.c||w[tr][0].s.r!=Qt.r)&&delete wt.f,wt.f&&(wt.f=""+Ko(w[tr][1],i,Qt,K,j));break}}Tr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=wt):a[h]=wt}},j={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(j.password=t.password);var P,M=[],Z=[],V=[],W=[],G=!1,K=[];K.SheetNames=j.snames,K.sharedf=j.sharedf,K.arrayf=j.arrayf,K.names=[],K.XTI=[];var ee=0,X=0,D=0,Q=[],z=[],J;j.codepage=1200,Id(1200);for(var te=!1;e.l<e.length-1;){var se=e.l,ie=e.read_shift(2);if(ie===0&&ee===10)break;var le=e.l===e.length?0:e.read_shift(2),ue=xF[ie];if(ue&&ue.f){if(t.bookSheets&&ee===133&&ie!==133)break;if(ee=ie,ue.r===2||ue.r==12){var je=e.read_shift(2);if(le-=2,!j.enc&&je!==ie&&((je&255)<<8|je>>8)!==ie)throw new Error("rt mismatch: "+je+"!="+ie);ue.r==12&&(e.l+=10,le-=10)}var ae={};if(ie===10?ae=ue.f(e,le,j):ae=jTe(ie,ue,e,le,j),X==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(ie){case 34:r.opts.Date1904=E.WBProps.date1904=ae;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(j.enc||(e.l=0),j.enc=ae,!t.password)throw new Error("File is password-protected");if(ae.valid==null)throw new Error("Encryption scheme unsupported");if(!ae.valid)throw new Error("Password is incorrect");break;case 92:j.lastuser=ae;break;case 66:var Ne=Number(ae);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}Id(j.codepage=Ne),te=!0;break;case 317:j.rrtabid=ae;break;case 25:j.winlocked=ae;break;case 439:r.opts.RefreshAll=ae;break;case 12:r.opts.CalcCount=ae;break;case 16:r.opts.CalcDelta=ae;break;case 17:r.opts.CalcIter=ae;break;case 13:r.opts.CalcMode=ae;break;case 14:r.opts.CalcPrecision=ae;break;case 95:r.opts.CalcSaveRecalc=ae;break;case 15:j.CalcRefMode=ae;break;case 2211:r.opts.FullCalc=ae;break;case 129:ae.fDialog&&(a["!type"]="dialog"),ae.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ae.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:k.push(ae);break;case 430:K.push([ae]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(ae);break;case 24:case 536:J={Name:ae.Name,Ref:Ko(ae.rgce,i,null,K,j)},ae.itab>0&&(J.Sheet=ae.itab-1),K.names.push(J),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(ae),ae.Name=="_xlnm._FilterDatabase"&&ae.itab>0&&ae.rgce&&ae.rgce[0]&&ae.rgce[0][0]&&ae.rgce[0][0][0]=="PtgArea3d"&&(z[ae.itab-1]={ref:nn(ae.rgce[0][0][1][2])});break;case 22:j.ExternCount=ae;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(ae),K.XTI=K.XTI.concat(ae);break;case 2196:if(j.biff<8)break;J!=null&&(J.Comment=ae[1]);break;case 18:a["!protect"]=ae;break;case 19:ae!==0&&j.WTF&&console.error("Password verifier: "+ae);break;case 133:s[ae.pos]=ae,j.snames.push(ae.name);break;case 10:{if(--X)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=nn(i),t.sheetRows&&t.sheetRows<=i.e.r){var ke=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=nn(i),i.e.r=ke}i.e.r++,i.e.c++}M.length>0&&(a["!merges"]=M),Z.length>0&&(a["!objects"]=Z),V.length>0&&(a["!cols"]=V),W.length>0&&(a["!rows"]=W),E.Sheets.push(S)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(j.biff===8&&(j.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ae.BIFFVer]||8),j.biffguess=ae.BIFFVer==0,ae.BIFFVer==0&&ae.dt==4096&&(j.biff=5,te=!0,Id(j.codepage=28591)),j.biff==8&&ae.BIFFVer==0&&ae.dt==16&&(j.biff=2),X++)break;if(a=t.dense?[]:{},j.biff<8&&!te&&(te=!0,Id(j.codepage=t.codepage||1252)),j.biff<5||ae.BIFFVer==0&&ae.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-le,name:u};s[_e.pos]=_e,j.snames.push(u)}else u=(s[se]||{name:""}).name;ae.dt==32&&(a["!type"]="chart"),ae.dt==64&&(a["!type"]="macro"),M=[],Z=[],j.arrayf=w=[],V=[],W=[],G=!1,S={Hidden:(s[se]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ae.r]||[])[ae.c]:a[Hr({c:ae.c,r:ae.r})])&&++ae.c,N={ixfe:ae.ixfe,XF:k[ae.ixfe]||{},v:ae.val,t:"n"},D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:ae.c,r:ae.r},N,t);break;case 5:case 517:N={ixfe:ae.ixfe,XF:k[ae.ixfe],v:ae.val,t:ae.t},D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:ae.c,r:ae.r},N,t);break;case 638:N={ixfe:ae.ixfe,XF:k[ae.ixfe],v:ae.rknum,t:"n"},D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:ae.c,r:ae.r},N,t);break;case 189:for(var he=ae.c;he<=ae.C;++he){var Be=ae.rkrec[he-ae.c][0];N={ixfe:Be,XF:k[Be],v:ae.rkrec[he-ae.c][1],t:"n"},D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:he,r:ae.r},N,t)}break;case 6:case 518:case 1030:{if(ae.val=="String"){l=ae;break}if(N=XC(ae.val,ae.cell.ixfe,ae.tt),N.XF=k[N.ixfe],t.cellFormula){var Le=ae.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var We=Le[0][0][1][0],xe=Le[0][0][1][1],Oe=Hr({r:We,c:xe});y[Oe]?N.f=""+Ko(ae.formula,i,ae.cell,K,j):N.F=((t.dense?(a[We]||[])[xe]:a[Oe])||{}).F}else N.f=""+Ko(ae.formula,i,ae.cell,K,j)}D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R(ae.cell,N,t),l=ae}break;case 7:case 519:if(l)l.val=ae,N=XC(ae,l.cell.ixfe,"s"),N.XF=k[N.ixfe],t.cellFormula&&(N.f=""+Ko(l.formula,i,l.cell,K,j)),D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R(l.cell,N,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ae);var Re=Hr(ae[0].s);if(m=t.dense?(a[ae[0].s.r]||[])[ae[0].s.c]:a[Re],t.cellFormula&&m){if(!l||!Re||!m)break;m.f=""+Ko(ae[1],i,ae[0],K,j),m.F=nn(ae[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;y[Hr(l.cell)]=ae[0],m=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Hr(l.cell)],(m||{}).f=""+Ko(ae[0],i,f,K,j)}}break;case 253:N=XC(c[ae.isst].t,ae.ixfe,"s"),c[ae.isst].h&&(N.h=c[ae.isst].h),N.XF=k[N.ixfe],D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:ae.c,r:ae.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:ae.ixfe,XF:k[ae.ixfe],t:"z"},D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:ae.c,r:ae.r},N,t));break;case 190:if(t.sheetStubs)for(var $e=ae.c;$e<=ae.C;++$e){var et=ae.ixfe[$e-ae.c];N={ixfe:et,XF:k[et],t:"z"},D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:$e,r:ae.r},N,t)}break;case 214:case 516:case 4:N=XC(ae.val,ae.ixfe,"s"),N.XF=k[N.ixfe],D>0&&(N.z=Q[N.ixfe>>8&63]),BA(N,t,r.opts.Date1904),R({c:ae.c,r:ae.r},N,t);break;case 0:case 512:X===1&&(i=ae);break;case 252:c=ae;break;case 1054:if(j.biff==4){Q[D++]=ae[1];for(var ct=0;ct<D+163&&Mr[ct]!=ae[1];++ct);ct>=163&&Ah(ae[1],D+163)}else Ah(ae[1],ae[0]);break;case 30:{Q[D++]=ae;for(var gt=0;gt<D+163&&Mr[gt]!=ae;++gt);gt>=163&&Ah(ae,D+163)}break;case 229:M=M.concat(ae);break;case 93:Z[ae.cmo[0]]=j.lastobj=ae;break;case 438:j.lastobj.TxO=ae;break;case 127:j.lastobj.ImData=ae;break;case 440:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Hr({c:x,r:v})],m&&(m.l=ae[1]);break;case 2048:for(v=ae[0].s.r;v<=ae[0].e.r;++v)for(x=ae[0].s.c;x<=ae[0].e.c;++x)m=t.dense?(a[v]||[])[x]:a[Hr({c:x,r:v})],m&&m.l&&(m.l.Tooltip=ae[1]);break;case 28:{if(j.biff<=5&&j.biff>=2)break;m=t.dense?(a[ae[0].r]||[])[ae[0].c]:a[Hr(ae[0])];var It=Z[ae[2]];m||(t.dense?(a[ae[0].r]||(a[ae[0].r]=[]),m=a[ae[0].r][ae[0].c]={t:"z"}):m=a[Hr(ae[0])]={t:"z"},i.e.r=Math.max(i.e.r,ae[0].r),i.s.r=Math.min(i.s.r,ae[0].r),i.e.c=Math.max(i.e.c,ae[0].c),i.s.c=Math.min(i.s.c,ae[0].c)),m.c||(m.c=[]),g={a:ae[1],t:It.TxO.t},m.c.push(g)}break;case 2173:g4e(k[ae.ixfe],ae.ext);break;case 125:{if(!j.cellStyles)break;for(;ae.e>=ae.s;)V[ae.e--]={width:ae.w/256,level:ae.level||0,hidden:!!(ae.flags&1)},G||(G=!0,NR(ae.w/256)),Sm(V[ae.e+1])}break;case 520:{var Mt={};ae.level!=null&&(W[ae.r]=Mt,Mt.level=ae.level),ae.hidden&&(W[ae.r]=Mt,Mt.hidden=!0),ae.hpt&&(W[ae.r]=Mt,Mt.hpt=ae.hpt,Mt.hpx=l1(ae.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Zp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=ae;break;case 161:a["!margins"]||Zp(a["!margins"]={}),a["!margins"].header=ae.header,a["!margins"].footer=ae.footer;break;case 574:ae.RTL&&(E.Views[0].RTL=!0);break;case 146:F=ae;break;case 2198:P=ae;break;case 140:B=ae;break;case 442:u?S.CodeName=ae||S.name:E.WBProps.CodeName=ae||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=le}return r.SheetNames=Fs(s).sort(function(Pt,Qt){return Number(Pt)-Number(Qt)}).map(function(Pt){return s[Pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(Pt,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Pt}),r.Strings=c,r.SSF=Va(Mr),j.enc&&(r.Encryption=j.enc),P&&(r.Themes=P),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),K.names.length>0&&(E.Names=K.names),r.Workbook=E,r}var xw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function TTe(e,t,r){var n=_r.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=KH(n,dF,xw.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=_r.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var l=KH(i,AF,xw.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&($te(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function ITe(e,t){var r=[],n=[],a=[],s=0,i,l=EH(dF,"n"),c=EH(AF,"n");if(e.Props)for(i=Fs(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Fs(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Jte.indexOf(a[s][0])>-1||zte.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&_r.utils.cfb_add(t,"/SummaryInformation",qH(n,xw.SI,c,AF)),(r.length||u.length)&&_r.utils.cfb_add(t,"/DocumentSummaryInformation",qH(r,xw.DSI,l,dF,u.length?u:null,xw.UDI))}function Kre(e,t){t||(t={}),OR(t),tR(),t.codepage&&eR(t.codepage);var r,n;if(e.FullPaths){if(_r.find(e,"/encryption"))throw new Error("File is password-protected");r=_r.find(e,"!CompObj"),n=_r.find(e,"/Workbook")||_r.find(e,"/Book")}else{switch(t.type){case"base64":e=Mc(Kc(e));break;case"binary":e=Mc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}yo(e,0),n={content:e}}var a,s;if(r&&STe(r),t.bookProps&&!t.bookSheets)a={};else{var i=xn?"buffer":"array";if(n&&n.content)a=BTe(n.content,t);else if((s=_r.find(e,"PerfectOffice_MAIN"))&&s.content)a=Jp.to_workbook(s.content,(t.type=i,t));else if((s=_r.find(e,"NativeContent_MAIN"))&&s.content)a=Jp.to_workbook(s.content,(t.type=i,t));else throw(s=_r.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&_r.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=$4e(e))}var l={};return e.FullPaths&&TTe(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function FTe(e,t){var r=t||{},n=_r.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _r.utils.cfb_add(n,a,qre(e,r)),r.biff==8&&(e.Props||e.Custprops)&&ITe(e,n),r.biff==8&&e.vbaraw&&G4e(n,_r.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var r2={0:{f:n3e},1:{f:d3e},2:{f:B3e},3:{f:v3e},4:{f:m3e},5:{f:S3e},6:{f:D3e},7:{f:E3e},8:{f:H3e},9:{f:Q3e},10:{f:M3e},11:{f:U3e},12:{f:f3e},13:{f:I3e},14:{f:y3e},15:{f:g3e},16:{f:Mre},17:{f:R3e},18:{f:N3e},19:{f:mR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:RBe},40:{},42:{},43:{f:DSe},44:{f:FSe},45:{f:LSe},46:{f:USe},47:{f:MSe},48:{},49:{f:iNe},50:{},51:{f:b4e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:cre},62:{f:O3e},63:{f:j4e},64:{f:aBe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:sl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:eBe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:c3e},148:{f:i3e,p:16},151:{f:q3e},152:{},153:{f:OBe},154:{},155:{},156:{f:IBe},157:{},158:{},159:{T:1,f:X_e},160:{T:-1},161:{T:1,f:$g},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:V3e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:x4e},336:{T:-1},337:{f:E4e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:uF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:lre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:W3e},427:{f:X3e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:J3e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:l3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:G3e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:uF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:U4e},633:{T:1},634:{T:-1},635:{T:1,f:L4e},636:{T:-1},637:{f:uNe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:yBe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:sBe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},xF={6:{f:uB},10:{f:S0},12:{f:Ai},13:{f:Ai},14:{f:zs},15:{f:zs},16:{f:Zo},17:{f:zs},18:{f:zs},19:{f:Ai},20:{f:eV},21:{f:eV},23:{f:lre},24:{f:rV},25:{f:zs},26:{},27:{},28:{f:s_e},29:{},34:{f:zs},35:{f:tV},38:{f:Zo},39:{f:Zo},40:{f:Zo},41:{f:Zo},42:{f:zs},43:{f:zs},47:{f:gSe},49:{f:I5e},51:{f:Ai},60:{},61:{f:S5e},64:{f:zs},65:{f:T5e},66:{f:Ai},77:{},80:{},81:{},82:{},85:{f:Ai},89:{},90:{},91:{},92:{f:p5e},93:{f:l_e},94:{},95:{f:zs},96:{},97:{},99:{f:zs},125:{f:cre},128:{f:K5e},129:{f:x5e},130:{f:Ai},131:{f:zs},132:{f:zs},133:{f:v5e},134:{},140:{f:p_e},141:{f:Ai},144:{},146:{f:v_e},151:{},152:{},153:{},154:{},155:{},156:{f:Ai},157:{},158:{},160:{f:__e},161:{f:w_e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:V5e},190:{f:z5e},193:{f:S0},197:{},198:{},199:{},200:{},201:{},202:{f:zs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ai},220:{},221:{f:zs},222:{},224:{f:G5e},225:{f:m5e},226:{f:S0},227:{},229:{f:i_e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:y5e},253:{f:O5e},255:{f:E5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Zte},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zs},353:{f:S0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:J5e},431:{f:zs},432:{},433:{},434:{},437:{},438:{f:d_e},439:{f:zs},440:{f:A_e},441:{},442:{f:X2},443:{},444:{f:Ai},445:{},446:{},448:{f:S0},449:{f:_5e,r:2},450:{f:S0},512:{f:YH},513:{f:N_e},515:{f:X5e},516:{f:P5e},517:{f:ZH},519:{f:S_e},520:{f:C5e},523:{},545:{f:nV},549:{f:XH},566:{},574:{f:j5e},638:{f:H5e},659:{},1048:{},1054:{f:L5e},1084:{},1212:{f:r_e},2048:{f:h_e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:KC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:S0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:b_e,r:12},2173:{f:p4e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:t_e,r:12},2197:{},2198:{f:u4e,r:12},2199:{},2200:{},2201:{},2202:{f:n_e,r:12},2203:{f:S0},2204:{},2205:{},2206:{},2207:{},2211:{f:N5e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ai},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:E_e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:x_e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:YH},1:{},2:{f:I_e},3:{f:B_e},4:{f:j_e},5:{f:ZH},7:{f:O_e},8:{},9:{f:KC},11:{},22:{f:Ai},30:{f:U5e},31:{},32:{},33:{f:nV},36:{},37:{f:XH},50:{f:D_e},62:{},52:{},67:{},68:{f:Ai},69:{},86:{},126:{},127:{f:k_e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:P_e},223:{},234:{},354:{},421:{},518:{f:uB},521:{f:KC},536:{f:rV},547:{f:tV},561:{},579:{},1030:{f:uB},1033:{f:KC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&AR(r)&&e.push(r)}}function OTe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function eE(e,t,r){return e||(e=Ct(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function DTe(e,t,r,n){var a=Ct(9);return eE(a,e,t),ere(r,n||"b",a),a}function PTe(e,t,r){var n=Ct(8+2*r.length);return eE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function RTe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Fi(Ha(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,F_e(r,n,a)):qt(e,3,T_e(r,n,a));return;case"b":case"e":qt(e,5,DTe(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,PTe(r,n,(t.v||"").slice(0,255)));return}qt(e,1,eE(null,r,n))}function LTe(e,t,r,n){var a=Array.isArray(t),s=Hn(t["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=nn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Js(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=is(d)),i=c[d]+l;var f=a?(t[u]||[])[d]:t[i];f&&RTe(e,f,u,d)}}}function MTe(e,t){for(var r=t||{},n=sc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,wR(e,16,r)),LTe(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function UTe(e,t,r){qt(e,49,F5e({sz:12,name:"Arial"},r))}function QTe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,M5e(a,t[a],r))})}function HTe(e,t){var r=Ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=Ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),sre(Hn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function VTe(e,t){for(var r=0;r<16;++r)qt(e,224,JH({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,JH(n,0,t))})}function zTe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,f_e(n)),n[1].Tooltip&&qt(e,2048,m_e(n))}delete t["!links"]}function $Te(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,y_e(K4(a,n),a))})}}function GTe(e,t,r,n,a){var s=16+zm(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,yg(r,n,s));return}if(t.bf)qt(e,6,xje(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Fi(Ha(t.v)):t.v;qt(e,515,Y5e(r,n,i,s));break;case"b":case"e":qt(e,517,W5e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=BR(a.Strings,t.v,a.revStrings);qt(e,253,D5e(r,n,l,s))}else qt(e,516,R5e(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,yg(r,n,s))}}function KTe(e,t,r){var n=sc(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],m=Hn(s["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}qt(n,2057,wR(r,16,t)),qt(n,13,Ou(1)),qt(n,12,Ou(100)),qt(n,15,gl(!0)),qt(n,17,gl(!1)),qt(n,16,vg(.001)),qt(n,95,gl(!0)),qt(n,42,gl(!1)),qt(n,43,gl(!1)),qt(n,130,Ou(1)),qt(n,128,q5e()),qt(n,131,gl(!1)),qt(n,132,gl(!1)),u&&$Te(n,s["!cols"]),qt(n,512,Q5e(m,t)),u&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){f=Js(x);for(var v=m.s.c;v<=m.e.c;++v){x===m.s.r&&(h[v]=is(v)),d=h[v]+f;var y=c?(s[x]||[])[v]:s[d];y&&(GTe(n,y,x,v,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=l.CodeName||l.name||a;return u&&qt(n,574,B5e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,o_e(s["!merges"])),u&&zTe(n,s),qt(n,442,tre(w)),u&&HTe(n,s),qt(n,10),n.end()}function qTe(e,t,r){var n=sc(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(qt(n,2057,wR(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,l?Ou(1200):null),qt(n,193,WNe(2)),c&&qt(n,191),c&&qt(n,192),qt(n,226),qt(n,92,g5e("SheetJS",r)),qt(n,66,Ou(l?1200:1252)),l&&qt(n,353,Ou(0)),l&&qt(n,448),qt(n,317,C_e(e.SheetNames.length)),l&&e.vbaraw&&qt(n,211),l&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,tre(u))}qt(n,156,Ou(17)),qt(n,25,gl(!1)),qt(n,18,gl(!1)),qt(n,19,Ou(0)),l&&qt(n,431,gl(!1)),l&&qt(n,444,Ou(0)),qt(n,61,k5e()),qt(n,64,gl(!1)),qt(n,141,Ou(0)),qt(n,34,gl(_Be(e)=="true")),qt(n,14,gl(!0)),l&&qt(n,439,gl(!1)),qt(n,218,Ou(0)),UTe(n,e,r),QTe(n,e.SSF,r),VTe(n,r),l&&qt(n,352,gl(!1));var d=n.end(),f=sc();l&&qt(f,140,g_e()),l&&r.Strings&&OTe(f,252,w5e(r.Strings)),qt(f,10);var h=f.end(),m=sc(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(l?12:11)+(l?2:1)*e.SheetNames[x].length;var v=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};qt(m,133,b5e({pos:v,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),v+=t[x].length}var w=m.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var N=[];return d.length&&N.push(d),w.length&&N.push(w),h.length&&N.push(h),Zi(N)}function WTe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(W1(),U4(e.SSF),r.revssf=H4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,DR(r),r.cellXfs=[],zm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=KTe(a,r,e);return n.unshift(qTe(e,n,r)),Zi(n)}function qre(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=oc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return WTe(e,t);case 4:case 3:case 2:return MTe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function fV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,l=s&&s.index||e.length,c=FCe(e.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),v=x.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var y=x.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var w=y[l].trim();if(w.match(/<t[dh]/i)){for(var N=w,B=0;N.charAt(0)=="<"&&(B=N.indexOf(">"))>-1;)N=N.slice(B+1);for(var k=0;k<g.length;++k){var F=g[k];F.s.c==d&&F.s.r<u&&u<=F.e.r&&(d=F.e.c+1,k=-1)}var E=Kr(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var S=E.t||E["data-t"]||"";if(!N.length){d+=h;continue}if(N=xte(N),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!N.length){d+=h;continue}var T={t:"s",v:N};r.raw||!N.trim().length||S=="s"||(N==="TRUE"?T={t:"b",v:!0}:N==="FALSE"?T={t:"b",v:!1}:isNaN(Md(N))?isNaN(i1(N).getDate())||(T={t:"d",v:Ha(N)},r.cellDates||(T={t:"n",v:Fi(T.v)}),T.z=r.dateNF||Mr[14]):T={t:"n",v:Md(N)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=T):n[Hr({r:u,c:d})]=T,d+=h}}}}return n["!ref"]=nn(m),g.length&&(n["!merges"]=g),n}function XTe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Hr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||cR(f.w||(Eh(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,m))}}var g="<tr>";return g+s.join("")+"</tr>"}var YTe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',JTe="</body></html>";function ZTe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Vm(fV(r[0],t),t);var n=LR();return r.forEach(function(a,s){MR(n,fV(a,t),"Sheet"+(s+1))}),n}function eIe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Wre(e,t){var r=t||{},n=r.header!=null?r.header:YTe,a=r.footer!=null?r.footer:JTe,s=[n],i=oc(e["!ref"]);r.dense=Array.isArray(e),s.push(eIe(e,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(XTe(e,i,l,r));return s.push("</table>"+a),s.join("")}function Xre(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?os(n.origin):n.origin;a=i.r,s=i.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=oc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,x=0,v=0,y=0,w=0,N=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&x<c;++g){var B=l[g];if(hV(B)){if(n.display)continue;m[x]={hidden:!0}}var k=B.children;for(v=y=0;v<k.length;++v){var F=k[v];if(!(n.display&&hV(F))){var E=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):xte(F.innerHTML),S=F.getAttribute("data-z")||F.getAttribute("z");for(h=0;h<f.length;++h){var T=f[h];T.s.c==y+s&&T.s.r<x+a&&x+a<=T.e.r&&(y=T.e.c+1-s,h=-1)}N=+F.getAttribute("colspan")||1,((w=+F.getAttribute("rowspan")||1)>1||N>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(N||1)-1}});var L={t:"s",v:E},R=F.getAttribute("data-t")||F.getAttribute("t")||"";E!=null&&(E.length==0?L.t=R||"z":n.raw||E.trim().length==0||R=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(Md(E))?isNaN(i1(E).getDate())||(L={t:"d",v:Ha(E)},n.cellDates||(L={t:"n",v:Fi(L.v)}),L.z=n.dateNF||Mr[14]):L={t:"n",v:Md(E)})),L.z===void 0&&S!=null&&(L.z=S);var j="",P=F.getElementsByTagName("A");if(P&&P.length)for(var M=0;M<P.length&&!(P[M].hasAttribute("href")&&(j=P[M].getAttribute("href"),j.charAt(0)!="#"));++M);j&&j.charAt(0)!="#"&&(L.l={Target:j}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=L):e[Hr({c:y+s,r:x+a})]=L,u.e.c<y+s&&(u.e.c=y+s),y+=N}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=nn(u),x>=c&&(e["!fullref"]=nn((u.e.r=l.length-g+x-1+a,u))),e}function Yre(e,t){var r=t||{},n=r.dense?[]:{};return Xre(n,e,t)}function tIe(e,t){return Vm(Yre(e,t),t)}function hV(e){var t="",r=rIe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function rIe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function nIe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var mV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Jre(e,t){var r=t||{},n=uR(e),a=[],s,i,l={name:""},c="",u=0,d,f,h={},m=[],g=r.dense?[]:{},x,v,y={value:""},w="",N=0,B=[],k=-1,F=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,T={},L=[],R={},j=0,P=0,M=[],Z=1,V=1,W=[],G={Names:[]},K={},ee=["",""],X=[],D={},Q="",z=0,J=!1,te=!1,se=0;for(Xw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=Xw.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"工作表":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=nn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=nn(E)),L.length&&(g["!merges"]=L),M.length&&(g["!rows"]=M),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=g,te=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=Kr(x[0],!1),k=F=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},L=[],M=[],te=!0);break;case"table-row-group":x[1]==="/"?--S:++S;break;case"table-row":case"行":if(x[1]==="/"){k+=Z,Z=1;break}if(f=Kr(x[0],!1),f.行号?k=f.行号-1:k==-1&&(k=0),Z=+f["number-rows-repeated"]||1,Z<10)for(se=0;se<Z;++se)S>0&&(M[k+se]={level:S});F=-1;break;case"covered-table-cell":x[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(g[k]||(g[k]=[]),g[k][F]={t:"z"}):g[Hr({r:k,c:F})]={t:"z"}),w="",B=[];break;case"table-cell":case"数据":if(x[0].charAt(x[0].length-2)==="/")++F,y=Kr(x[0],!1),V=parseInt(y["number-columns-repeated"]||"1",10),v={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(v.f=uV(Qn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(v.t="s",v.v=Qn(y["string-value"]||""),r.dense?(g[k]||(g[k]=[]),g[k][F]=v):g[Hr({r:k,c:F})]=v),F+=V-1;else if(x[1]!=="/"){++F,w="",N=0,B=[],V=1;var ie=Z?k+Z-1:k;if(F>E.e.c&&(E.e.c=F),F<E.s.c&&(E.s.c=F),k<E.s.r&&(E.s.r=k),ie>E.e.r&&(E.e.r=ie),y=Kr(x[0],!1),X=[],D={},v={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Qn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(j=parseInt(y["number-matrix-rows-spanned"],10)||0,P=parseInt(y["number-matrix-columns-spanned"],10)||0,R={s:{r:k,c:F},e:{r:k+j-1,c:F+P-1}},v.F=nn(R),W.push([R,v.F])),y.formula)v.f=uV(y.formula);else for(se=0;se<W.length;++se)k>=W[se][0].s.r&&k<=W[se][0].e.r&&F>=W[se][0].s.c&&F<=W[se][0].e.c&&(v.F=W[se][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(j=parseInt(y["number-rows-spanned"],10)||0,P=parseInt(y["number-columns-spanned"],10)||0,R={s:{r:k,c:F},e:{r:k+j-1,c:F+P-1}},L.push(R)),y["number-columns-repeated"]&&(V=parseInt(y["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ua(y["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(y.value);break;case"percentage":v.t="n",v.v=parseFloat(y.value);break;case"currency":v.t="n",v.v=parseFloat(y.value);break;case"date":v.t="d",v.v=Ha(y["date-value"]),r.cellDates||(v.t="n",v.v=Fi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=BCe(y["time-value"])/86400,r.cellDates&&(v.t="d",v.v=V4(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(y.数据数值);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",y["string-value"]!=null&&(w=Qn(y["string-value"]),B=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=w||"",B.length&&(v.R=B),J=N==0),K.Target&&(v.l=K),X.length>0&&(v.c=X,X=[]),w&&r.cellText!==!1&&(v.w=w),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var le=0;le<Z;++le){if(V=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[k+le]||(g[k+le]=[]),g[k+le][F]=le==0?v:Va(v);--V>0;)g[k+le][F+V]=Va(v);else for(g[Hr({r:k+le,c:F})]=v;--V>0;)g[Hr({r:k+le,c:F+V})]=Va(v);E.e.c<=F&&(E.e.c=F)}V=parseInt(y["number-columns-repeated"]||"1",10),F+=V-1,V=0,v={},w="",B=[]}K={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;D.t=w,B.length&&(D.R=B),D.a=Q,X.push(D)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);Q="",z=0,w="",N=0,B=[];break;case"creator":x[1]==="/"?Q=n.slice(z,x.index):z=x.index+x[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",N=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(T[l.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",l=Kr(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Kr(x[0],!1),c+=mV[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Kr(x[0],!1),c+=mV[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=Kr(x[0],!1),ee=dB(i["cell-range-address"]);var ue={Name:i.name,Ref:ee[0]+"!"+ee[1]};te&&(ue.Sheet=m.length),G.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var je=nIe(n.slice(N,x.index));w=(w.length>0?w+`
`:"")+je[0]}else Kr(x[0],!1),N=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{ee=dB(Kr(x[0])["target-range-address"]),h[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(K=Kr(x[0],!1),!K.href)break;K.Target=Qn(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(ee=dB(K.Target.slice(1)),K.Target="#"+ee[0]+"!"+ee[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(x)}}var ae={Sheets:h,SheetNames:m,Workbook:G};return r.bookSheets&&delete ae.Sheets,ae}function pV(e,t){t=t||{},Iu(e,"META-INF/manifest.xml")&&BNe(di(e,"META-INF/manifest.xml"),t);var r=Uc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Jre(Ea(r),t);return Iu(e,"meta.xml")&&(n.Props=Hte(di(e,"meta.xml"))),n}function gV(e,t){return Jre(e,t)}var aIe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Ww({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ei+t}}(),xV=function(){var e=function(s){return pa(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+pa(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=oc(s["!ref"]||"A1"),h=s["!merges"]||[],m=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},N="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,w["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(y){c.push(r);continue}var B=Hr({r:u,c:d}),k=g?(s[u]||[])[d]:s[B];if(k&&k.f&&(w["table:formula"]=pa(Cje(k.f)),k.F&&k.F.slice(0,B.length)==B)){var F=oc(k.F);w["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,w["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!k){c.push(t);continue}switch(k.t){case"b":N=k.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=k.v?"true":"false";break;case"n":N=k.w||String(k.v||0),w["office:value-type"]="float",w["office:value"]=k.v||0;break;case"s":case"str":N=k.v==null?"":k.v,w["office:value-type"]="string";break;case"d":N=k.w||Ha(k.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Ha(k.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(N);if(k.l&&k.l.Target){var S=k.l.Target;S=S.charAt(0)=="#"?"#"+Nje(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),E=Kt("text:a",E,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Kt("table:table-cell",Kt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Sm(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[ei],u=Ww({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Ww({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Qte().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Zre(e,t){if(t.bookType=="fods")return xV(e,t);var r=iR(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,xV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,aIe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,ei+Qte()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,FNe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,TNe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function wg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function vF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(Hm(e))}function sIe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Mc($A(e))}function iIe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function jm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function vV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function oIe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function lIe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function n2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function fa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Bs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=n2(e,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:i=4,l=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=n2(e,r),l=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function mo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(fa(n*8+a.type)),a.type==2&&t.push(fa(a.data.length)),t.push(a.data))})}),jm(t)}function FR(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function ju(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=n2(e,n),s=Wn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Bs(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Wn(l.data),u=Bs(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Bs(s[3][0].data)>>>0>0),r.push(i)}return r}function Tx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:fa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:fa(i.data.length)}],n[2].push({data:mo(i.meta),type:2})});var s=mo(n);t.push(fa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),jm(t)}function cIe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=n2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=t[r[0]],l>1&&(i|=t[r[0]+1]<<8),l>2&&(i|=t[r[0]+2]<<16),l>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[jm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=jm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Bu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(cIe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return jm(t)}function Ix(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=fa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return jm(t)}function uIe(e,t,r,n){var a=wg(e),s=a.getUint32(4,!0),i=(n>1?12:8)+vV(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=vV(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function dIe(e,t,r){var n=wg(e),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=oIe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function fB(e,t){var r=new Uint8Array(32),n=wg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,lIe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function hB(e,t){var r=new Uint8Array(32),n=wg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function AIe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return uIe(e,t,r,e[0]);case 5:return dIe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Go(e){var t=Wn(e);return n2(t[1][0].data)}function bV(e,t){var r=Wn(t.data),n=Bs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Wn(i.data),c=Bs(l[1][0].data)>>>0;switch(n){case 1:s[c]=vF(l[3][0].data);break;case 8:{var u=e[Go(l[9][0].data)][0],d=Wn(u.data),f=e[Go(d[1][0].data)][0],h=Bs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Wn(f.data);s[c]=m[3].map(function(g){return vF(g.data)}).join("")}break}}),s}function fIe(e,t){var r,n,a,s,i,l,c,u,d,f,h,m,g,x,v=Wn(e),y=Bs(v[1][0].data)>>>0,w=Bs(v[2][0].data)>>>0,N=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Bs(v[8][0].data)>0||!1,B,k;if((s=(a=v[7])==null?void 0:a[0])!=null&&s.data&&t!=0)B=(l=(i=v[7])==null?void 0:i[0])==null?void 0:l.data,k=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)B=(m=(h=v[4])==null?void 0:h[0])==null?void 0:m.data,k=(x=(g=v[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var F=N?4:1,E=wg(B),S=[],T=0;T<B.length/2;++T){var L=E.getUint16(T*2,!0);L<65535&&S.push([T,L])}if(S.length!=w)throw"Expected ".concat(w," cells, found ").concat(S.length);var R=[];for(T=0;T<S.length-1;++T)R[S[T][0]]=k.subarray(S[T][1]*F,S[T+1][1]*F);return S.length>=1&&(R[S[S.length-1][0]]=k.subarray(S[S.length-1][1]*F)),{R:y,cells:R}}function hIe(e,t){var r,n=Wn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Bs(n[7][0].data)>>>0>0?1:0:-1,s=FR(n[5],function(i){return fIe(i,a)});return{nrows:Bs(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function mIe(e,t,r){var n,a=Wn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Bs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Bs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=nn(s);var i=Wn(a[4][0].data),l=bV(e,e[Go(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?bV(e,e[Go(i[17][0].data)][0]):[],u=Wn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Wn(f.data),m=e[Go(h[2][0].data)][0],g=Bs(m.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=hIe(e,m);x.data.forEach(function(v,y){v.forEach(function(w,N){var B=Hr({r:d+y,c:N}),k=AIe(w,l,c);k&&(r[B]=k)})}),d+=x.nrows})}function pIe(e,t){var r=Wn(t.data),n={"!ref":"A1"},a=e[Go(r[2][0].data)],s=Bs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return mIe(e,a[0],n),n}function gIe(e,t){var r,n=Wn(t.data),a={name:(r=n[1])!=null&&r[0]?vF(n[1][0].data):"",sheets:[]},s=FR(n[2],Go);return s.forEach(function(i){e[i].forEach(function(l){var c=Bs(l.meta[1][0].data);c==6e3&&a.sheets.push(pIe(e,l))})}),a}function xIe(e,t){var r=LR(),n=Wn(t.data),a=FR(n[1],Go);if(a.forEach(function(s){e[s].forEach(function(i){var l=Bs(i.meta[1][0].data);if(l==2){var c=gIe(e,i);c.sheets.forEach(function(u,d){MR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function mB(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Bu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=ju(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Bs(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=Bs(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return xIe(s,l)}function vIe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Bs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=wg(e[7][0].data),d=0,f=[],h=wg(e[4][0].data),m=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,m,!0);var v,y;switch(typeof t[x]){case"string":v=fB({t:"s",v:t[x]},r),y=hB({t:"s",v:t[x]},r);break;case"number":v=fB({t:"n",v:t[x]},r),y=hB({t:"n",v:t[x]},r);break;case"boolean":v=fB({t:"b",v:t[x]},r),y=hB({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(v),d+=v.length,g.push(y),m+=y.length,++c}for(e[2][0].data=fa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=jm(f),e[3][0].data=jm(g),c}function bIe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=oc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var s=O_(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(Q){return Q.forEach(function(z){typeof z=="string"&&i.push(z)})});var l={},c=[],u=_r.read(t.numbers,{type:"base64"});u.FileIndex.map(function(Q,z){return[Q,u.FullPaths[z]]}).forEach(function(Q){var z=Q[0],J=Q[1];if(z.type==2&&z.name.match(/\.iwa/)){var te=z.content,se=Bu(te),ie=ju(se);ie.forEach(function(le){c.push(le.id),l[le.id]={deps:[],location:J,type:Bs(le.messages[0].meta[1][0].data)}})}}),c.sort(function(Q,z){return Q-z});var d=c.filter(function(Q){return Q>1}).map(function(Q){return[Q,fa(Q)]});u.FileIndex.map(function(Q,z){return[Q,u.FullPaths[z]]}).forEach(function(Q){var z=Q[0];if(Q[1],!!z.name.match(/\.iwa/)){var J=ju(Bu(z.content));J.forEach(function(te){te.messages.forEach(function(se){d.forEach(function(ie){te.messages.some(function(le){return Bs(le.meta[1][0].data)!=11006&&iIe(le.data,ie[1])})&&l[ie[0]].deps.push(te.id)})})})}});for(var f=_r.find(u,l[1].location),h=ju(Bu(f.content)),m,g=0;g<h.length;++g){var x=h[g];x.id==1&&(m=x)}var v=Go(Wn(m.messages[0].data)[1][0].data);for(f=_r.find(u,l[v].location),h=ju(Bu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Go(Wn(m.messages[0].data)[2][0].data),f=_r.find(u,l[v].location),h=ju(Bu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);for(v=Go(Wn(m.messages[0].data)[2][0].data),f=_r.find(u,l[v].location),h=ju(Bu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==v&&(m=x);var y=Wn(m.messages[0].data);{y[6][0].data=fa(n.e.r+1),y[7][0].data=fa(n.e.c+1);var w=Go(y[46][0].data),N=_r.find(u,l[w].location),B=ju(Bu(N.content));{for(var k=0;k<B.length&&B[k].id!=w;++k);if(B[k].id!=w)throw"Bad ColumnRowUIDMapArchive";var F=Wn(B[k].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var E=0;E<=n.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:fa(E+420690)}],F[1].push({type:2,data:mo(S)}),F[2].push({type:0,data:fa(E)}),F[3].push({type:0,data:fa(E)})}F[4]=[],F[5]=[],F[6]=[];for(var T=0;T<=n.e.r;++T)S=[],S[1]=S[2]=[{type:0,data:fa(T+726270)}],F[4].push({type:2,data:mo(S)}),F[5].push({type:0,data:fa(T)}),F[6].push({type:0,data:fa(T)});B[k].messages[0].data=mo(F)}N.content=Ix(Tx(B)),N.size=N.content.length,delete y[46];var L=Wn(y[4][0].data);{L[7][0].data=fa(n.e.r+1);var R=Wn(L[1][0].data),j=Go(R[2][0].data);N=_r.find(u,l[j].location),B=ju(Bu(N.content));{if(B[0].id!=j)throw"Bad HeaderStorageBucket";var P=Wn(B[0].messages[0].data);for(T=0;T<s.length;++T){var M=Wn(P[2][0].data);M[1][0].data=fa(T),M[4][0].data=fa(s[T].length),P[2][T]={type:P[2][0].type,data:mo(M)}}B[0].messages[0].data=mo(P)}N.content=Ix(Tx(B)),N.size=N.content.length;var Z=Go(L[2][0].data);N=_r.find(u,l[Z].location),B=ju(Bu(N.content));{if(B[0].id!=Z)throw"Bad HeaderStorageBucket";for(P=Wn(B[0].messages[0].data),E=0;E<=n.e.c;++E)M=Wn(P[2][0].data),M[1][0].data=fa(E),M[4][0].data=fa(n.e.r+1),P[2][E]={type:P[2][0].type,data:mo(M)};B[0].messages[0].data=mo(P)}N.content=Ix(Tx(B)),N.size=N.content.length;var V=Go(L[4][0].data);(function(){for(var Q=_r.find(u,l[V].location),z=ju(Bu(Q.content)),J,te=0;te<z.length;++te){var se=z[te];se.id==V&&(J=se)}var ie=Wn(J.messages[0].data);{ie[3]=[];var le=[];i.forEach(function(ae,Ne){le[1]=[{type:0,data:fa(Ne)}],le[2]=[{type:0,data:fa(1)}],le[3]=[{type:2,data:sIe(ae)}],ie[3].push({type:2,data:mo(le)})})}J.messages[0].data=mo(ie);var ue=Tx(z),je=Ix(ue);Q.content=je,Q.size=Q.content.length})();var W=Wn(L[3][0].data);{var G=W[1][0];delete W[2];var K=Wn(G.data);{var ee=Go(K[2][0].data);(function(){for(var Q=_r.find(u,l[ee].location),z=ju(Bu(Q.content)),J,te=0;te<z.length;++te){var se=z[te];se.id==ee&&(J=se)}var ie=Wn(J.messages[0].data);{delete ie[6],delete W[7];var le=new Uint8Array(ie[5][0].data);ie[5]=[];for(var ue=0,je=0;je<=n.e.r;++je){var ae=Wn(le);ue+=vIe(ae,s[je],i),ae[1][0].data=fa(je),ie[5].push({data:mo(ae),type:2})}ie[1]=[{type:0,data:fa(n.e.c+1)}],ie[2]=[{type:0,data:fa(n.e.r+1)}],ie[3]=[{type:0,data:fa(ue)}],ie[4]=[{type:0,data:fa(n.e.r+1)}]}J.messages[0].data=mo(ie);var Ne=Tx(z),ke=Ix(Ne);Q.content=ke,Q.size=Q.content.length})()}G.data=mo(K)}L[3][0].data=mo(W)}y[4][0].data=mo(L)}m.messages[0].data=mo(y);var X=Tx(h),D=Ix(X);return f.content=D,f.size=f.content.length,u}function ene(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function OR(e){ene([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function DR(e){ene([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function yIe(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function wIe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,yIe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function EIe(e,t,r,n,a,s,i,l,c,u,d,f){try{s[n]=hw(Uc(e,r,!0),t);var h=di(e,t),m;switch(l){case"sheet":m=$Be(h,t,a,c,s[n],u,d,f);break;case"chart":if(m=GBe(h,t,a,c,s[n],u,d,f),!m||!m["!drawel"])break;var g=Qy(m["!drawel"].Target,t),x=Yw(g),v=I4e(Uc(e,g,!0),hw(Uc(e,x,!0),g)),y=Qy(v,g),w=Yw(y);m=vBe(Uc(e,y,!0),y,c,hw(Uc(e,w,!0),y),u,m);break;case"macro":m=KBe(h,t,a,c,s[n],u,d,f);break;case"dialog":m=qBe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=m;var N=[];s&&s[n]&&Fs(s[n]).forEach(function(B){var k="";if(s[n][B].Type==Cn.CMNT){k=Qy(s[n][B].Target,t);var F=JBe(di(e,k,!0),k,c);if(!F||!F.length)return;sV(m,F,!1)}s[n][B].Type==Cn.TCMNT&&(k=Qy(s[n][B].Target,t),N=N.concat(O4e(di(e,k,!0),c)))}),N&&N.length&&sV(m,N,!0,c.people||[])}catch(B){if(c.WTF)throw B}}function Eu(e){return e.charAt(0)=="/"?e.slice(1):e}function CIe(e,t){if(W1(),t=t||{},OR(t),Iu(e,"META-INF/manifest.xml")||Iu(e,"objectdata.xml"))return pV(e,t);if(Iu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof mB<"u"){if(e.FileIndex)return mB(e);var r=_r.utils.cfb_new();return _H(e).forEach(function(M){un(r,M,DCe(e,M))}),mB(r)}throw new Error("Unsupported NUMBERS file")}if(!Iu(e,"[Content_Types].xml"))throw Iu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Iu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=_H(e),a=kNe(Uc(e,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",di(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!di(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(mw=[],a.sst)try{mw=YBe(di(e,Eu(a.sst)),a.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&a.themes.length&&(c=XBe(Uc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=WBe(di(e,Eu(a.style)),a.style,c,t))}a.links.map(function(M){try{var Z=hw(Uc(e,Yw(Eu(M))),M);return eTe(di(e,Eu(M)),Z,M,t)}catch{}});var d=zBe(di(e,Eu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=di(e,Eu(a.coreprops[0]),!0),h&&(f=Hte(h)),a.extprops.length!==0&&(h=di(e,Eu(a.extprops[0]),!0),h&&DNe(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Uc(e,Eu(a.custprops[0]),!0),h&&(m=RNe(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Z){return Z.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=m),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=ZBe(di(e,Eu(a.calcchain)),a.calcchain));var v=0,y={},w,N;{var B=d.Sheets;f.Worksheets=B.length,f.SheetNames=[];for(var k=0;k!=B.length;++k)f.SheetNames[k]=B[k].name}var F=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Iu(e,S)||(S="xl/_rels/workbook."+F+".rels");var T=hw(Uc(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=tTe(di(e,Eu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=P4e(di(e,Eu(a.people[0])),t)),T&&(T=wIe(T,d.Sheets));var L=di(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var R="sheet";if(T&&T[v]?(w="xl/"+T[v][1].replace(/[\/]?xl\//,""),Iu(e,w)||(w=T[v][1]),Iu(e,w)||(w=S.replace(/_rels\/.*$/,"")+T[v][1]),R=T[v][2]):(w="xl/worksheets/sheet"+(v+1-L)+"."+F,w=w.replace(/sheet0\./,"sheet.")),N=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var j=!1,P=0;P!=t.sheets.length;++P)typeof t.sheets[P]=="number"&&t.sheets[P]==v&&(j=1),typeof t.sheets[P]=="string"&&t.sheets[P].toLowerCase()==f.SheetNames[v].toLowerCase()&&(j=1);if(!j)continue e}}EIe(e,w,N,f.SheetNames[v],v,y,i,R,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:x,Sheets:i,SheetNames:f.SheetNames,Strings:mw,Styles:u,Themes:c,SSF:Va(Mr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(M,Z){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=e.FileIndex[Z]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=di(e,Eu(a.vba[0]),!0):a.defaults&&a.defaults.bin===z4e&&(g.vbaraw=di(e,"xl/vbaProject.bin",!0))),g}function NIe(e,t){var r=t||{},n="Workbook",a=_r.find(e,n);try{if(n="/!DataSpaces/Version",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(tSe(a.content),n="/!DataSpaces/DataSpaceMap",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=nSe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=aSe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);iSe(a.content)}catch{}if(n="/EncryptionInfo",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=oSe(a.content);if(n="/EncryptedPackage",a=_r.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function _Ie(e,t){return t.bookType=="ods"?Zre(e,t):t.bookType=="numbers"?bIe(e,t):t.bookType=="xlsb"?SIe(e,t):kIe(e,t)}function SIe(e,t){fv=1024,e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(W1(),U4(e.SSF),t.revssf=H4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,pw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Sre.indexOf(t.bookType)>-1,a=bR();DR(t=t||{});var s=iR(),i="",l=0;if(t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Vte(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Gte(e.Props)),a.extprops.push(i),ha(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Fs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Kte(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,Cn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,un(s,i,nTe(l-1,i,t,e,d)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(f){var m=f["!comments"],g=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+r,un(s,x,iTe(m,x)),a.comments.push(x),ha(d,-1,"../comments"+l+"."+r,Cn.CMNT),g=!0),f["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+l+".vml",Nre(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&un(s,Yw(i),Fv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,sTe(t.Strings,i,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,rTe(e,i)),a.workbooks.push(i),ha(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,_R(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,aTe(e,i,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,oTe(i)),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),un(s,"[Content_Types].xml",Ute(a,t)),un(s,"_rels/.rels",Fv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",Fv(t.wbrels)),delete t.revssf,delete t.ssf,s}function kIe(e,t){fv=1024,e&&!e.SSF&&(e.SSF=Va(Mr)),e&&e.SSF&&(W1(),U4(e.SSF),t.revssf=H4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,pw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Sre.indexOf(t.bookType)>-1,a=bR();DR(t=t||{});var s=iR(),i="",l=0;if(t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Vte(e.Props,t)),a.coreprops.push(i),ha(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Gte(e.Props)),a.extprops.push(i),ha(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&Fs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Kte(e.Custprops)),a.custprops.push(i),ha(t.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,un(s,i,Lre(l-1,t,e,f)),a.sheets.push(i),ha(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Cn.WS[0])}if(h){var g=h["!comments"],x=!1,v="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(N){N.T==!0&&(y=!0)})}),y&&(v="xl/threadedComments/threadedComment"+l+"."+r,un(s,v,D4e(g,d,t)),a.threadedcomments.push(v),ha(f,-1,"../threadedComments/threadedComment"+l+"."+r,Cn.TCMNT)),v="xl/comments"+l+"."+r,un(s,v,_re(g)),a.comments.push(v),ha(f,-1,"../comments"+l+"."+r,Cn.CMNT),x=!0}h["!legacy"]&&x&&un(s,"xl/drawings/vmlDrawing"+l+".vml",Nre(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&un(s,Yw(i),Fv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,fre(t.Strings,t)),a.strs.push(i),ha(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,un(s,i,Vre(e)),a.workbooks.push(i),ha(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",un(s,i,_R(e.Themes,t)),a.themes.push(i),ha(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,un(s,i,yre(e,t)),a.styles.push(i),ha(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ha(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,un(s,i,Cre()),a.metadata.push(i),ha(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,R4e(d)),a.people.push(i),ha(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),un(s,"[Content_Types].xml",Ute(a,t)),un(s,"_rels/.rels",Fv(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",Fv(t.wbrels)),delete t.revssf,delete t.ssf,s}function PR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Kc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function jIe(e,t){return _r.find(e,"EncryptedPackage")?NIe(e,t):Kre(e,t)}function BIe(e,t){var r,n=e,a=t||{};return a.type||(a.type=xn&&Buffer.isBuffer(e)?"buffer":"base64"),r=mte(n,a),CIe(r,a)}function tne(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return gF(e.slice(r),t);default:break e}return o1.to_workbook(e,t)}function TIe(e,t){var r="",n=PR(e,t);switch(t.type){case"base64":r=Kc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=xg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",tne(r,t)}function IIe(e,t){var r=e;return t.type=="base64"&&(r=Kc(r)),r=$w.utils.decode(1200,r.slice(2),"str"),t.type="binary",tne(r,t)}function FIe(e){return e.match(/[^\x00-\x7F]/)?$A(e):e}function pB(e,t,r,n){return n?(r.type="string",o1.to_workbook(e,r)):o1.to_workbook(t,r)}function c1(e,t){tR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return c1(new Uint8Array(e),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Dv={},r.dateNF&&(Dv.dateNF=r.dateNF),r.type||(r.type=xn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=xn?"buffer":"binary",n=SCe(e),typeof Uint8Array<"u"&&!xn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=FIe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=Va(r),r.type="array",c1(rR(n),r)}switch((a=PR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return jIe(_r.read(n,r),r);break;case 9:if(a[1]<=8)return Kre(n,r);break;case 60:return gF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return L_e(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return dre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?BIe(n,r):pB(e,n,r,s);case 239:return a[3]===60?gF(n,r):pB(e,n,r,s);case 255:if(a[1]===254)return IIe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Jp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Jp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return pF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return xre.to_workbook(n,r);break;case 10:case 13:case 32:return TIe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return R_e.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?pF.to_workbook(n,r):pB(e,n,r,s)}function rne(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return K2(t.file,_r.write(e,{type:xn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return _r.write(e,t)}function OIe(e,t){var r=Va(t||{}),n=_Ie(e,r);return DIe(n,r)}function DIe(e,t){var r={},n=xn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?_r.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(M4(a))}return t.password&&typeof encrypt_agile<"u"?rne(encrypt_agile(a,t.password),t):t.type==="file"?K2(t.file,a):t.type=="string"?Ea(a):a}function PIe(e,t){var r=t||{},n=FTe(e,r);return rne(n,r)}function OA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Gw($A(n));case"binary":return $A(n);case"string":return e;case"file":return K2(t.file,n,"utf8");case"buffer":return xn?Rh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):OA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function RIe(e,t){switch(t.type){case"base64":return Gw(e);case"binary":return e;case"string":return e;case"file":return K2(t.file,e,"binary");case"buffer":return xn?Rh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function YC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Gw(r):t.type=="string"?Ea(r):r;case"file":return K2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function nne(e,t){tR(),jBe(e);var r=Va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=nne(e,r);return r.type="array",M4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return OA(_Te(e,r),r);case"slk":case"sylk":return OA(ure.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return OA(Wre(e.Sheets[e.SheetNames[a]],r),r);case"txt":return RIe(ane(e.Sheets[e.SheetNames[a]],r),r);case"csv":return OA(RR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return OA(dre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return YC(pF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return OA(o1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return OA(xre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return OA(Are.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return OA(Zre(e,r),r);case"wk1":return YC(Jp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return YC(Jp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),YC(qre(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),PIe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return OIe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function LIe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function tE(e,t,r){var n={};return n.type="file",n.file=t,LIe(n),nne(e,n)}function MIe(e,t,r,n,a,s,i,l){var c=Js(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=i?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[m]!=null&&(h[s[m]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[m]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[m]]=null;else if(u!==void 0)h[s[m]]=u;else if(d&&x===null)h[s[m]]=null;else continue;else h[s[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?x:Eh(g,x,l);x!=null&&(f=!1)}}return{row:h,isempty:f}}function O_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Hn(d);break;case"number":c=Hn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Js(c.s.r),h=[],m=[],g=0,x=0,v=Array.isArray(e),y=c.s.r,w=0,N={};v&&!e[y]&&(e[y]=[]);var B=u.skipHidden&&e["!cols"]||[],k=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(B[w]||{}).hidden)switch(h[w]=is(w),r=v?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=Eh(r,null,u),x=N[i]||0,!x)N[i]=1;else{do l=i+"_"+x++;while(N[l]);N[i]=x,N[l]=1}s[w]=l}for(y=c.s.r+a;y<=c.e.r;++y)if(!(k[y]||{}).hidden){var F=MIe(e,c,y,h,n,s,v,u);(F.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=F.row)}return m.length=g,m}var yV=/"/g;function UIe(e,t,r,n,a,s,i,l){for(var c=!0,u=[],d="",f=Js(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=l.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Eh(m,null,l));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(yV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(yV,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function RR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Hn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=is(g));for(var x=0,v=a.s.r;v<=a.e.r;++v)(m[v]||{}).hidden||(d=UIe(e,a,v,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?l:"")+d)));return delete n.dense,r.join("")}function ane(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=RR(e,t);return r}function QIe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Hn(e["!ref"]),s="",i=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)i[l]=is(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Js(d),l=a.s.c;l<=a.e.c;++l)if(t=i[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function sne(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+t.length-1+a}};if(s["!ref"]){var f=Hn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(x,v){Fs(x).forEach(function(y){(m=h.indexOf(y))==-1&&(h[m=h.length]=y);var w=x[y],N="z",B="",k=Hr({c:l+m,r:i+v+a});u=a2(s,k),w&&typeof w=="object"&&!(w instanceof Date)?s[k]=w:(typeof w=="number"?N="n":typeof w=="boolean"?N="b":typeof w=="string"?N="s":w instanceof Date?(N="d",n.cellDates||(N="n",w=Fi(w)),B=n.dateNF||Mr[14]):w===null&&n.nullError&&(N="e",w=0),u?(u.t=N,u.v=w,delete u.w,delete u.R,B&&(u.z=B)):s[k]=u={t:N,v:w},B&&(u.z=B))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=Js(i);if(a)for(m=0;m<h.length;++m)s[is(m+l)+g]={t:"s",v:h[m]};return s["!ref"]=nn(d),s}function HIe(e,t){return sne(null,e,t)}function a2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=os(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?a2(e,Hr(t)):a2(e,Hr({r:t,c:r||0}))}function VIe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function LR(){return{SheetNames:[],Sheets:{}}}function MR(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Hre(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function zIe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=VIe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function $Ie(e,t){return e.z=t,e}function ine(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function GIe(e,t,r){return ine(e,"#"+t,r)}function KIe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function qIe(e,t,r,n){for(var a=typeof t!="string"?t:Hn(t),s=typeof t=="string"?t:nn(t),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=a2(e,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Ti={encode_col:is,encode_row:Js,encode_cell:Hr,encode_range:nn,decode_col:hR,decode_row:fR,split_cell:sNe,decode_cell:os,decode_range:oc,format_cell:Eh,sheet_add_aoa:Fte,sheet_add_json:sne,sheet_add_dom:Xre,aoa_to_sheet:X1,json_to_sheet:HIe,table_to_sheet:Yre,table_to_book:tIe,sheet_to_csv:RR,sheet_to_txt:ane,sheet_to_json:O_,sheet_to_html:Wre,sheet_to_formulae:QIe,sheet_to_row_object_array:O_,sheet_get_cell:a2,book_new:LR,book_append_sheet:MR,book_set_sheet_visibility:zIe,cell_set_number_format:$Ie,cell_set_hyperlink:ine,cell_set_internal_link:GIe,cell_add_comment:KIe,sheet_set_array_formula:qIe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const bF="carga_horaria_asignaciones",one="usuarios",WIe=e=>{const t=e.data();return{id:e.id,...t}},XIe=e=>{const t=zt(vt(ft,one),Br("profile","in",["PROFESORADO","SUBDIRECCION","COORDINACION_TP"]),hr("nombreCompleto","asc"));return fr(t,n=>{const a=n.docs.map(s=>{const i=s.data();return{id:s.id,nombre:i.nombreCompleto||i.nombre||i.email||"Sin nombre",departamento:i.departamento||"General",horasContrato:i.horasContrato||44,perfil:i.profile||"PROFESORADO",email:i.email}});e(a)},n=>{console.error("Error al suscribirse a los docentes:",n),e([])})},YIe=async e=>{try{return(await hn(vt(ft,one),{nombreCompleto:e.nombre,email:e.email,departamento:e.departamento||"General",horasContrato:e.horasContrato,profile:e.perfil,createdAt:Is()})).id}catch(t){throw console.error("Error al crear nuevo docente:",t),new Error("No se pudo crear el docente.")}},JIe=e=>{const t=zt(vt(ft,bF),hr("docenteNombre","asc"));return fr(t,n=>{const a=n.docs.map(s=>WIe(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},ZIe=async(e,t=!1)=>{try{if(t){const a=(await Tn(vt(ft,bF))).docs.map(s=>Ra(s.ref));await Promise.all(a),console.log(`Se eliminaron ${a.length} asignaciones existentes`)}const r=e.map(n=>hn(vt(ft,bF),{...n,createdAt:Is(),updatedAt:Is()}));await Promise.all(r),console.log(`Se guardaron ${r.length} asignaciones`)}catch(r){throw console.error("Error al guardar asignaciones en batch:",r),new Error("No se pudieron guardar todas las asignaciones.")}},D_=e=>{const t={44:38,43:37,42:36,41:35,40:35,39:34,38:33,37:32,36:31,35:30,34:29,33:29,32:28,31:27,30:26,29:25,28:24,27:23,26:22,25:22,24:21,23:20,22:19,21:18,20:17,19:16,18:16,17:15,16:14,15:13,14:12,13:11,12:10,11:10,10:9,9:8,8:7,7:6,6:5,5:4,4:3,3:2,2:1,1:1};return t[e]!==void 0?t[e]:Math.round(e*.65)},Hy=e=>{const t=D_(e);return e-t},f5=e=>Object.values(e).reduce((t,r)=>t+(r||0),0),lne=(e,t)=>{const r=D_(e.horasContrato),n=Hy(e.horasContrato),a=t.filter(m=>m.docenteId===e.id),s=a.reduce((m,g)=>m+f5(g.horasPorCurso),0),i=a.reduce((m,g)=>{if(g.funcionesLectivas&&g.funcionesLectivas.length>0)return m+g.funcionesLectivas.reduce((x,v)=>x+v.horas,0);if(g.funcionesNoLectivas&&g.funcionesNoLectivas.length>0)return m+g.funcionesNoLectivas.reduce((x,v)=>x+v.horas,0);{const x=g.otraFuncion&&parseInt(g.otraFuncion)||0;return m+x}},0),l=s+i,c=0,u=r-l,d=n-c,f=[],h=[];return l>r&&f.push(`Excede horas lectivas: ${l}/${r}`),c>n&&f.push(`Excede horas no lectivas: ${c}/${n}`),l<r&&l>0&&h.push(`Faltan ${u} horas lectivas`),{HA:r,HB:n,sumCursos:s,sumFunciones:c,sumFuncionesLectivas:i,totalHorasLectivas:l,restantesHA:u,restantesHB:d,horasContrato:e.horasContrato,valido:f.length===0,warnings:h,errors:f}},e6e=(e,t)=>{const r=lne(e,t),n=[];return r.errors.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"error",mensaje:`${e.nombre}: ${a}`})}),r.warnings.forEach(a=>{n.push({asignacionId:"",docenteId:e.id,tipo:"warning",mensaje:`${e.nombre}: ${a}`})}),n},t6e=e=>{const t=e.match(/^(\d+)([A-E])$/i);return t?`${t[1]}º${t[2].toUpperCase()}`:e},r6e=`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes slideInFromBottom {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-scaleIn {
    animation: scaleIn 0.3s ease-out forwards;
  }

  .animate-slideIn {
    animation: slideInFromBottom 0.3s ease-out forwards;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0,0,0,0.25);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.05);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.25);
  }
`,n6e=()=>{_.useEffect(()=>{const X=document.createElement("style");return X.innerHTML=r6e,document.head.appendChild(X),()=>{document.head.removeChild(X)}},[]);const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState({busqueda:"",curso:"",asignatura:"",departamento:""}),[i,l]=_.useState(!1),[c,u]=_.useState("docentes"),[d,f]=_.useState([]),[h,m]=_.useState(!1),[g,x]=_.useState(!1),[v,y]=_.useState({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),[w,N]=_.useState("");_.useEffect(()=>XIe(D=>t(D)),[]),_.useEffect(()=>JIe(D=>{const Q=D.map(z=>{let J=z.funcionesLectivas||[];!J.length&&z.funcionesNoLectivas&&z.funcionesNoLectivas.length?J=z.funcionesNoLectivas:!J.length&&z.otraFuncion&&(J=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:z.otraFuncion,horas:parseInt(z.otraFuncion)||0}]);const{funcionesNoLectivas:te,otraFuncion:se,...ie}=z;return{...ie,funcionesLectivas:J}});n(Q)}),[]);const B=_.useMemo(()=>{const X={};return e.forEach(D=>{const Q=r.filter(z=>z.docenteId===D.id);X[D.id]=lne(D,Q)}),X},[e,r]);_.useEffect(()=>{const X=[];e.forEach(D=>X.push(...e6e(D,r))),f(X)},[e,r]);const k=_.useMemo(()=>w?e.filter(X=>{var D;return X.nombre.toLowerCase().includes(w.toLowerCase())||((D=X.email)==null?void 0:D.toLowerCase().includes(w.toLowerCase()))}):e,[e,w]),F=_.useMemo(()=>r.filter(D=>{const Q=e.find(z=>z.id===D.docenteId);return!(!Q||a.busqueda&&!Q.nombre.toLowerCase().includes(a.busqueda.toLowerCase())||a.asignatura&&D.asignaturaOModulo!==a.asignatura||a.departamento&&Q.departamento!==a.departamento||a.curso&&!Object.keys(D.horasPorCurso).includes(a.curso))}).sort((D,Q)=>D.docenteId!==Q.docenteId?D.docenteId.localeCompare(Q.docenteId):(D.asignaturaOModulo||"").localeCompare(Q.asignaturaOModulo||"")),[r,e,a]),E=async()=>{try{if(m(!0),!v.nombre||!v.email){alert("El nombre y email son obligatorios"),m(!1);return}await YIe(v),x(!1),y({nombre:"",email:"",departamento:"General",horasContrato:44,perfil:"PROFESORADO"}),alert("Docente creado exitosamente")}catch(X){console.error(X),alert("Error al crear docente")}finally{m(!1)}},S=_.useCallback(()=>{if(e.length===0)return;const X={id:`asig_${Date.now()}`,docenteId:e[0].id,docenteNombre:e[0].nombre,asignaturaOModulo:ks[0],funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(D=>[...D,X])},[e]),T=_.useCallback((X,D)=>{const Q=r.filter(te=>te.docenteId===X).map(te=>te.asignaturaOModulo);let z=ks[0];for(const te of ks)if(!Q.includes(te)){z=te;break}const J={id:`asig_${Date.now()}`,docenteId:X,docenteNombre:D,asignaturaOModulo:z,funcionesLectivas:[],horasPorCurso:{},horasXAsig:0};n(te=>[...te,J])},[r]),L=_.useCallback(X=>n(D=>D.filter(Q=>Q.id!==X)),[]),R=_.useCallback(X=>{n(D=>D.map(Q=>{if(Q.id!==X)return Q;const z={id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:"",horas:0};return{...Q,funcionesLectivas:[...Q.funcionesLectivas||[],z]}}))},[]),j=_.useCallback((X,D,Q,z)=>{n(J=>J.map(te=>{if(te.id!==X)return te;const se=(te.funcionesLectivas||[]).map(ie=>ie.id===D?{...ie,[Q]:z}:ie);return{...te,funcionesLectivas:se}}))},[]),P=_.useCallback((X,D)=>{n(Q=>Q.map(z=>{if(z.id!==X)return z;const J=(z.funcionesLectivas||[]).filter(te=>te.id!==D);return{...z,funcionesLectivas:J}}))},[]),M=_.useCallback((X,D,Q)=>{n(z=>z.map(J=>{if(J.id!==X)return J;const te={...J,[D]:Q};if(D==="docenteId"){const se=e.find(ie=>ie.id===Q);se&&(te.docenteNombre=se.nombre)}return D==="horasPorCurso"&&(te.horasXAsig=f5(Q)),te}))},[e]),Z=_.useCallback((X,D,Q)=>{n(z=>z.map(J=>{if(J.id!==X)return J;const te={...J.horasPorCurso};return Q===0?delete te[D]:te[D]=Q,{...J,horasPorCurso:te,horasXAsig:f5(te)}}))},[]),V=_.useCallback(X=>{m(!0);const D=new FileReader;D.onload=Q=>{var z;try{const J=new Uint8Array((z=Q.target)==null?void 0:z.result),te=c1(J,{type:"array"}),se=te.Sheets["Docentes 2025"]||te.Sheets[te.SheetNames[0]],ie=Ti.sheet_to_json(se,{header:1});let le=-1;for(let ae=0;ae<ie.length;ae++){const Ne=ie[ae];if(Ne&&Ne.some(ke=>typeof ke=="string"&&(ke.includes("Docente")||ke.includes("ASIGNATURA")||Ns.some(_e=>ke.includes(_e.replace("º","")))))){le=ae;break}}if(le===-1){alert("No se encontró la fila de encabezado en el archivo");return}const ue=ie[le],je=[];for(let ae=le+1;ae<ie.length;ae++){const Ne=ie[ae];if(!Ne||Ne.length===0)continue;const ke=Ne[ue.indexOf("Docente")]||"";if(!ke)continue;const _e=e.find(xe=>xe.nombre.toLowerCase().includes(ke.toLowerCase()));if(!_e)continue;const he={};ue.forEach((xe,Oe)=>{if(typeof xe=="string"){const Re=t6e(xe.trim());if(Ns.includes(Re)){const $e=parseInt(Ne[Oe])||0;$e>0&&(he[Re]=$e)}}});let Be=[];const Le=Ne[ue.indexOf("FUNCIONES LECTIVAS")]||Ne[ue.indexOf("FUNCIONES NO LECTIVAS")]||Ne[ue.indexOf("OTRA FUNCIÓN")]||"";typeof Le=="string"&&Le.includes(":")?Be=Le.split(",").map(xe=>{const[Oe,Re]=xe.split(":").map($e=>$e.trim());return{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Oe,horas:parseInt(Re)||0}}):Le&&(Be=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:Le,horas:0}]);const We={id:`import_${Date.now()}_${ae}`,docenteId:_e.id,docenteNombre:_e.nombre,asignaturaOModulo:Ne[ue.indexOf("ASIGNATURA O MÓDULO")]||"",funcionesLectivas:Be,horasPorCurso:he,horasXAsig:f5(he)};je.push(We)}n(je),alert(`Se importaron ${je.length} asignaciones exitosamente`)}catch(J){console.error("Error al importar:",J),alert("Error al procesar el archivo. Verifique el formato.")}finally{m(!1)}},D.readAsArrayBuffer(X)},[e]),W=_.useCallback(()=>{const X=r.map(z=>{const J=e.find(le=>le.id===z.docenteId),te=B[z.docenteId];let se="";z.funcionesLectivas&&z.funcionesLectivas.length>0?se=z.funcionesLectivas.map(le=>`${le.nombre}: ${le.horas}h`).join(", "):z.funcionesNoLectivas&&z.funcionesNoLectivas.length>0?se=z.funcionesNoLectivas.map(le=>`${le.nombre}: ${le.horas}h`).join(", "):z.otraFuncion&&(se=z.otraFuncion);const ie={Docente:z.docenteNombre,"ASIGNATURA O MÓDULO":z.asignaturaOModulo||"","FUNCIONES LECTIVAS":se,"HORAS X ASIG.":z.horasXAsig||0};return Ns.forEach(le=>ie[le]=z.horasPorCurso[le]||0),te&&(ie["HORAS LECTIVAS (HA)"]=te.HA,ie["HORAS NO LECTIVAS (HB)"]=te.HB,ie["HORAS CONTRATO"]=(J==null?void 0:J.horasContrato)||0),ie}),D=Ti.json_to_sheet(X),Q=Ti.book_new();Ti.book_append_sheet(Q,D,"Horarios"),tE(Q,`horarios_${new Date().toISOString().split("T")[0]}.xlsx`)},[r,e,B]),G=_.useCallback(async()=>{if(d.filter(D=>D.tipo==="error").length>0){alert("No se puede guardar. Hay errores que deben corregirse primero.");return}try{m(!0);const D=[],Q=[];r.forEach(J=>{let te=J.funcionesLectivas||[];J.funcionesNoLectivas&&J.funcionesNoLectivas.length>0&&te.length===0?te=J.funcionesNoLectivas.map(je=>({id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:je.nombre,horas:je.horas})):J.otraFuncion&&te.length===0&&(te=[{id:`func_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,nombre:J.otraFuncion,horas:parseInt(J.otraFuncion)||0}]);const{funcionesNoLectivas:se,otraFuncion:ie,...le}=J,ue={...le,funcionesLectivas:te};if(J.id.startsWith("asig_")||J.id.startsWith("import_")){const{id:je,...ae}=ue;Q.push(ae)}else D.push(ue)});const z=[...D.map(({id:J,...te})=>te),...Q];await ZIe(z,!0),alert("Horarios guardados exitosamente")}catch(D){console.error("Error al guardar horarios:",D),alert("Error al guardar los horarios")}finally{m(!1)}},[d,r]),K=X=>{const D=B[X];return D?D.errors.length>0?"red":D.warnings.length>0?"yellow":"green":"gray"},ee=()=>g?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-full overflow-hidden animate-scaleIn",children:[o.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[o.jsx(lF,{className:"w-5 h-5"}),"Añadir Nuevo Docente"]}),o.jsx("button",{onClick:()=>x(!1),className:"text-white/80 hover:text-white p-1 rounded-full hover:bg-white/20 transition-all duration-200",disabled:h,children:o.jsx(Nm,{className:"w-5 h-5"})})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Nombre Completo"]}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"text",value:v.nombre,onChange:X=>y({...v,nombre:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Nombre Apellido",required:!0})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1.5",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),"Email"]}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"email",value:v.email,onChange:X=>y({...v,email:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"correo@ejemplo.com",required:!0})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Departamento"}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"text",value:v.departamento,onChange:X=>y({...v,departamento:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",placeholder:"Ej: Matemáticas, Lenguaje, etc."})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Horas Contrato"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",value:v.horasContrato,onChange:X=>y({...v,horasContrato:parseInt(X.target.value)||0}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",min:1,max:44}),o.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"horas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Perfil"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:v.perfil,onChange:X=>y({...v,perfil:X.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 appearance-none",children:[o.jsx("option",{value:"PROFESORADO",children:"Profesorado"}),o.jsx("option",{value:"SUBDIRECCION",children:"Subdirección"}),o.jsx("option",{value:"COORDINACION_TP",children:"Coordinación TP"})]}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:o.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),o.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",disabled:h,children:"Cancelar"}),o.jsx("button",{onClick:E,className:"px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-sm disabled:opacity-50 transition-all duration-200 flex items-center gap-2",disabled:h||!v.nombre||!v.email,children:h?o.jsxs(o.Fragment,{children:[o.jsx(vl,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Guardando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(xwe,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar"})]})})]})]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_we,{className:"w-3.5 h-3.5"}),o.jsxs("span",{children:["Los campos marcados con ",o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 inline-block"})," son obligatorios"]})]})})]})}):null;return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-600 to-indigo-700 dark:from-blue-800 dark:to-indigo-900 rounded-xl p-6 shadow-lg relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-gray-900 opacity-5",children:[o.jsx("div",{className:"w-96 h-96 rounded-full bg-white dark:bg-blue-600 absolute -top-20 -right-20 opacity-20"}),o.jsx("div",{className:"w-64 h-64 rounded-full bg-white dark:bg-indigo-600 absolute -bottom-10 -left-10 opacity-20"})]}),o.jsx("div",{className:"relative z-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:[o.jsx(ac,{className:"mr-3 h-8 w-8"}),"Crear Horarios"]}),o.jsx("p",{className:"text-blue-100 dark:text-blue-200 max-w-2xl",children:"Sistema de gestión de carga horaria docente con validación 65%/35% y visualización en tiempo real"})]}),o.jsxs("div",{className:"mt-4 md:mt-0 flex gap-3",children:[o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-sm rounded-lg transition-all duration-200 border border-white border-opacity-30",children:[o.jsx(cw,{className:"w-4 h-4"}),o.jsx("span",{children:"Ver estadísticas"})]}),o.jsxs("button",{onClick:G,disabled:d.some(X=>X.tipo==="error")||h,className:"flex items-center justify-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:[o.jsx($d,{className:"w-4 h-4"}),o.jsx("span",{children:h?"Guardando...":"Guardar cambios"})]})]})]})})]}),o.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[o.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center",children:[o.jsx(L4,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),o.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Filtros y acciones"})]}),o.jsxs("div",{className:"p-5",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[o.jsx("div",{className:"flex-1 md:max-w-xs",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx($2,{className:"text-gray-400 w-4 h-4"})}),o.jsx("input",{type:"text",placeholder:"Buscar docente...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",value:w,onChange:X=>N(X.target.value)})]})}),o.jsxs("div",{className:"flex gap-3 flex-wrap",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Tv,{className:"text-gray-400 w-4 h-4"})}),o.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[150px]",value:a.curso,onChange:X=>s(D=>({...D,curso:X.target.value})),children:[o.jsx("option",{value:"",children:"Todos los cursos"}),Ns.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Gc,{className:"text-gray-400 w-4 h-4"})}),o.jsxs("select",{className:"pl-10 pr-8 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 min-w-[180px]",value:a.asignatura,onChange:X=>s(D=>({...D,asignatura:X.target.value})),children:[o.jsx("option",{value:"",children:"Todas las asignaturas"}),ks.map(X=>o.jsx("option",{value:X,children:X},X))]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[o.jsxs("button",{onClick:()=>x(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(lF,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Nuevo Docente"})]}),o.jsxs("button",{onClick:S,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(Cl,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Agregar Asignatura"})]}),o.jsxs("label",{className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white rounded-lg transition-all duration-200 shadow-sm cursor-pointer group",children:[o.jsx(K1,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Importar Excel"}),o.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:X=>{var D;return((D=X.target.files)==null?void 0:D[0])&&V(X.target.files[0])}})]}),o.jsxs("button",{onClick:W,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx($ee,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Exportar Excel"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 shadow-sm group",children:[o.jsx(Mu,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:"Abrir Resumen"})]}),o.jsxs("button",{onClick:G,disabled:d.some(X=>X.tipo==="error")||h,className:"flex flex-col items-center justify-center gap-1 px-3 py-4 bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-lg transition-all duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-amber-500 disabled:hover:to-orange-600 group",children:[h?o.jsx(vl,{className:"w-5 h-5 animate-spin"}):o.jsx($d,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"text-xs font-medium mt-1",children:h?"Guardando...":"Guardar"})]})]})]})]}),d.length>0&&o.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",children:[o.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-100 dark:border-red-800/30 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($u,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),o.jsxs("h3",{className:"font-medium text-red-700 dark:text-red-300",children:["Validaciones y Alertas (",d.length,")"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-800/30 text-red-700 dark:text-red-300 text-xs rounded-md flex items-center gap-1",children:[o.jsx(rH,{className:"w-3 h-3"})," ",d.filter(X=>X.tipo==="error").length," Errores"]}),o.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-800/30 text-yellow-700 dark:text-yellow-300 text-xs rounded-md flex items-center gap-1",children:[o.jsx(oH,{className:"w-3 h-3"})," ",d.filter(X=>X.tipo==="warning").length," Advertencias"]})]})]}),o.jsx("div",{className:"p-5",children:o.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:d.map((X,D)=>o.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm ${X.tipo==="error"?"bg-red-50 dark:bg-red-900/10 text-red-700 dark:text-red-300 border-l-4 border-red-500 dark:border-red-600":"bg-yellow-50 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-300 border-l-4 border-yellow-500 dark:border-yellow-600"}`,children:[X.tipo==="error"?o.jsx(rH,{className:"w-5 h-5 shrink-0"}):o.jsx(oH,{className:"w-5 h-5 shrink-0"}),o.jsx("span",{className:"text-sm",children:X.mensaje})]},D))})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(p_,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mr-2"}),o.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asignaciones de Carga Horaria"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Correcto"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advertencia"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Error"})]})]})]}),o.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:o.jsxs("table",{className:"w-full min-w-[1000px]",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 dark:bg-blue-500"}),o.jsx("span",{children:"Estado"})]})}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky left-14 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Nl,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Docente"})]})}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Gc,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Asignatura"})]})}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(lH,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Func. Lectivas"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx(th,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Hrs"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",colSpan:Ns.length,children:o.jsxs("div",{className:"flex justify-center items-center gap-1.5",children:[o.jsx(Tv,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"Cursos"}),o.jsx("span",{className:"ml-1 text-xs text-gray-400 font-normal",children:"(horas por curso)"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx(cw,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:"HA/HB"})]})}),o.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider sticky right-0 z-20 bg-gray-50 dark:bg-gray-700 shadow-sm",children:o.jsx("div",{className:"flex items-center justify-center gap-1.5",children:o.jsx("span",{children:"Acciones"})})})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:F.map((X,D)=>{const Q=B[X.docenteId],z=K(X.docenteId),J=D===0||F[D-1].docenteId!==X.docenteId,te=D===F.length-1||F[D+1].docenteId!==X.docenteId,se=F.filter(ue=>ue.docenteId===X.docenteId),ie=se.length>1;let le="hover:bg-gray-50 dark:hover:bg-gray-750 ";return ie&&(J?le+="border-t-2 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 ":le+="bg-blue-50 dark:bg-blue-900/10 ",te&&(le+="border-b-2 border-blue-200 dark:border-blue-800 mb-1 ")),o.jsxs("tr",{className:le,children:[o.jsx("td",{className:"px-1 py-2 sticky left-0 z-10 bg-inherit",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${z==="green"?"bg-green-500":z==="yellow"?"bg-yellow-500":z==="red"?"bg-red-500":"bg-gray-500"}`}),ie&&J&&o.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium mt-1",children:se.length})]})}),o.jsx("td",{className:"px-1 py-2 sticky left-10 z-10 bg-inherit",children:!ie||J?o.jsxs("div",{children:[o.jsx("select",{value:X.docenteId,onChange:ue=>M(X.id,"docenteId",ue.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${ie?"font-medium":""}`,children:(k.length>0?k:e).map(ue=>o.jsx("option",{value:ue.id,children:ue.nombre},ue.id))}),ie&&o.jsxs("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:[se.length," asig."]})]}):o.jsx("div",{className:"pl-1 italic text-gray-500 dark:text-gray-400 text-xs whitespace-nowrap",children:"↳ Mismo"})}),o.jsxs("td",{className:"px-1 py-2",children:[o.jsxs("select",{value:X.asignaturaOModulo||"",onChange:ue=>M(X.id,"asignaturaOModulo",ue.target.value),className:`w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs ${ie?"border-blue-300 dark:border-blue-700":""}`,children:[o.jsx("option",{value:"",children:"Seleccionar..."}),ks.map(ue=>o.jsx("option",{value:ue,children:ue},ue))]}),ie&&!J&&o.jsx("div",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Adicional"})]}),o.jsx("td",{className:"px-1 py-2",children:o.jsxs("div",{className:"space-y-1 w-full min-w-[200px]",children:[(X.funcionesLectivas||[]).map(ue=>o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx("input",{type:"text",value:ue.nombre,onChange:je=>j(X.id,ue.id,"nombre",je.target.value),placeholder:"Nombre",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-l bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"}),o.jsx("input",{type:"number",value:ue.horas,onChange:je=>j(X.id,ue.id,"horas",parseInt(je.target.value)||0),min:0,max:44,className:"w-10 px-1 py-1 border-y border-r border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"}),o.jsx("button",{onClick:()=>P(X.id,ue.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-r",title:"Eliminar función",children:o.jsx(xi,{className:"w-3 h-3"})})]},ue.id)),!X.funcionesLectivas&&o.jsx("div",{className:"flex gap-1 items-center",children:o.jsx("input",{type:"text",value:X.otraFuncion||"",onChange:ue=>M(X.id,"otraFuncion",ue.target.value),placeholder:"Ej: Coordinador",className:"flex-grow px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs"})}),o.jsxs("button",{onClick:()=>R(X.id),className:"flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:[o.jsx(Cl,{className:"w-3 h-3"})," ",o.jsx("span",{className:"text-xs",children:"Agregar"})]})]})}),o.jsx("td",{className:"px-1 py-2 text-center",children:o.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:X.horasXAsig||0})}),o.jsx("td",{className:"px-1 py-2",children:o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1",children:Ns.map(ue=>o.jsxs("div",{className:"flex flex-col items-center bg-gray-50 dark:bg-gray-750 p-1 rounded",children:[o.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:ue}),o.jsx("input",{type:"number",min:0,value:X.horasPorCurso[ue]||"",onChange:je=>Z(X.id,ue,parseInt(je.target.value)||0),className:"w-10 h-7 px-1 py-0 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-xs text-center"})]},ue))})}),o.jsx("td",{className:"px-1 py-2 text-center whitespace-nowrap",children:Q&&o.jsxs("div",{className:"space-y-0",children:[o.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:["HA: ",Q.HA," (",Q.restantesHA>=0?"+":"",Q.restantesHA,")"]}),o.jsxs("div",{className:"text-green-600 dark:text-green-400 text-xs",children:["HB: ",Q.HB," (",Q.restantesHB>=0?"+":"",Q.restantesHB,")"]})]})}),o.jsx("td",{className:"px-1 py-2 text-center sticky right-0 z-10 bg-inherit",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx("button",{onClick:()=>T(X.docenteId,X.docenteNombre),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Agregar otra asignatura a este docente",children:o.jsx(Cl,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>L(X.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Eliminar esta asignación",children:o.jsx(xi,{className:"w-3.5 h-3.5"})})]})})]},X.id)})})]})})]}),i&&o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Panel de Resumen"}),o.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(Nm,{})})]}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsxs("nav",{className:"flex -mb-px px-6",children:[o.jsx("button",{onClick:()=>u("docentes"),className:`px-6 py-3 font-medium text-sm ${c==="docentes"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Docente"}),o.jsx("button",{onClick:()=>u("cursos"),className:`px-6 py-3 font-medium text-sm ${c==="cursos"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Curso"}),o.jsx("button",{onClick:()=>u("funciones"),className:`px-6 py-3 font-medium text-sm ${c==="funciones"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Por Función"}),o.jsx("button",{onClick:()=>u("totales"),className:`px-6 py-3 font-medium text-sm ${c==="totales"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Totales Generales"})]})}),o.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[c==="docentes"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Docente"}),o.jsx("div",{className:"grid gap-4",children:e.map(X=>{const D=B[X.id],Q=r.filter(z=>z.docenteId===X.id);return o.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:X.nombre}),o.jsx("div",{className:`w-3 h-3 rounded-full ${K(X.id)==="green"?"bg-green-500":K(X.id)==="yellow"?"bg-yellow-500":K(X.id)==="red"?"bg-red-500":"bg-gray-500"}`})]}),D&&o.jsxs("div",{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contrato:"}),o.jsxs("span",{className:"ml-1 font-medium",children:[X.horasContrato,"h"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HA:"}),o.jsxs("span",{className:"ml-1 font-medium text-blue-600 dark:text-blue-400",children:[D.sumCursos,"/",D.HA]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"HB:"}),o.jsxs("span",{className:"ml-1 font-medium text-green-600 dark:text-green-400",children:[D.sumFunciones,"/",D.HB]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Asignaciones:"}),o.jsx("span",{className:"ml-1 font-medium",children:Q.length})]})]}),Q.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[o.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Asignaturas asignadas:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:Q.map(z=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:z.asignaturaOModulo||"Sin asignatura"}),o.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[z.horasXAsig||0,"h"]})]},z.id))})]}),o.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-2",children:[o.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Distribución por curso:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:Ns.filter(z=>Q.some(J=>J.horasPorCurso[z])).map(z=>{const J=Q.reduce((te,se)=>te+(se.horasPorCurso[z]||0),0);return o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:z}),o.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[J,"h"]})]},z)})})]})]}),Q.some(z=>(z.funcionesLectivas||[]).length>0)&&o.jsxs("div",{className:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2",children:[o.jsx("h5",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Funciones lectivas:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:Q.flatMap(z=>(z.funcionesLectivas||[]).map(J=>({id:`${z.id}_${J.id}`,nombre:J.nombre,horas:J.horas}))).map(z=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:z.nombre||"Sin nombre"}),o.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[z.horas,"h"]})]},z.id))})]})]})]},X.id)})})]}),c==="cursos"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Curso"}),o.jsx("div",{className:"grid gap-4",children:Ns.filter(X=>r.some(D=>D.horasPorCurso[X])).map(X=>{const D=r.filter(J=>J.horasPorCurso[X]),Q=[];D.forEach(J=>{const te=Q.findIndex(se=>se.id===J.docenteId);te===-1?Q.push({id:J.docenteId,nombre:J.docenteNombre,asignaciones:[J]}):Q[te].asignaciones.push(J)});const z=D.reduce((J,te)=>J+(te.horasPorCurso[X]||0),0);return o.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:X}),o.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-md",children:["Total: ",z,"h"]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),o.jsx("div",{className:"grid gap-2",children:Q.map(J=>o.jsxs("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium",children:J.nombre}),o.jsxs("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:[J.asignaciones.reduce((te,se)=>te+(se.horasPorCurso[X]||0),0),"h"]})]}),o.jsx("ul",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400 space-y-1 ml-2",children:J.asignaciones.filter(te=>te.horasPorCurso[X]).map(te=>o.jsxs("li",{className:"flex justify-between",children:[o.jsx("span",{children:te.asignaturaOModulo||"Sin asignatura"}),o.jsxs("span",{children:[te.horasPorCurso[X],"h"]})]},te.id))})]},J.id))})]})]},X)})})]}),c==="funciones"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Resumen por Funciones Lectivas"}),(()=>{const X=[];return r.forEach(D=>{(D.funcionesLectivas||[]).forEach(Q=>{if(!Q.nombre)return;const z=X.find(J=>J.nombre===Q.nombre);if(!z)X.push({nombre:Q.nombre,docentes:[{id:D.docenteId,nombre:D.docenteNombre,horas:Q.horas}],totalHoras:Q.horas});else{const J=z.docentes.find(te=>te.id===D.docenteId);J?J.horas+=Q.horas:z.docentes.push({id:D.docenteId,nombre:D.docenteNombre,horas:Q.horas}),z.totalHoras+=Q.horas}})}),X.sort((D,Q)=>Q.totalHoras-D.totalHoras),X.length===0?o.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-750",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No hay funciones lectivas asignadas."})}):o.jsx("div",{className:"grid gap-4",children:X.map((D,Q)=>o.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:D.nombre}),o.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-md",children:["Total: ",D.totalHoras,"h"]})]}),o.jsx("h5",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Docentes asignados:"}),o.jsx("ul",{className:"text-xs text-gray-800 dark:text-gray-200 space-y-1 ml-2",children:D.docentes.sort((z,J)=>J.horas-z.horas).map(z=>o.jsxs("li",{className:"flex justify-between py-1 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[o.jsx("span",{children:z.nombre}),o.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[z.horas,"h"]})]},z.id))})]},Q))})})()]}),c==="totales"&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Resumen de Totales Generales"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 shadow-md",children:[o.jsx("h4",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Total de Horas Lectivas"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:(()=>{let X=0;return r.forEach(D=>{D.horasPorCurso&&Object.values(D.horasPorCurso).forEach(Q=>typeof Q=="number"&&(X+=Q)),(D.funcionesLectivas||[]).forEach(Q=>typeof Q.horas=="number"&&(X+=Q.horas))}),X})()}),o.jsx("span",{className:"text-sm text-blue-500 dark:text-blue-300",children:"horas"})]}),o.jsx("p",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400",children:"Total de horas lectivas asignadas (HA)"})]}),o.jsxs("div",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 shadow-md",children:[o.jsx("h4",{className:"text-lg font-bold text-green-800 dark:text-green-300 mb-2",children:"Total de Horas No Lectivas"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsx("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:(()=>{let X=0;return e.forEach(D=>{const Q=typeof D.horasContrato=="number"?D.horasContrato:0;X+=Hy(Q)}),X})()}),o.jsx("span",{className:"text-sm text-green-500 dark:text-green-300",children:"horas"})]}),o.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:"Total de horas no lectivas (HB)"})]}),o.jsxs("div",{className:"p-6 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 shadow-md",children:[o.jsx("h4",{className:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-2",children:"Total de Horas Contrato"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:e.reduce((D,Q)=>{const z=typeof Q.horasContrato=="number"?Q.horasContrato:0;return D+z},0)}),o.jsx("span",{className:"text-sm text-amber-500 dark:text-amber-300",children:"horas"})]}),o.jsx("p",{className:"mt-3 text-sm text-amber-600 dark:text-amber-400",children:"Total de horas contratadas (Lectivas + No lectivas)"})]})]}),o.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-md",children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Distribución de Horas"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Distribución Porcentual"}),(()=>{let X=0,D=0;r.forEach(te=>{te.horasPorCurso&&Object.values(te.horasPorCurso).forEach(se=>typeof se=="number"&&(X+=se)),(te.funcionesLectivas||[]).forEach(se=>typeof se.horas=="number"&&(X+=se.horas))}),e.forEach(te=>{const se=typeof te.horasContrato=="number"?te.horasContrato:0;D+=Hy(se)});const Q=X+D,z=Q>0?Math.round(X/Q*100):0,J=Q>0?Math.round(D/Q*100):0;return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Horas Lectivas (HA)"}),o.jsxs("span",{className:"font-bold",children:[z,"%"]})]}),o.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 rounded-full",style:{width:`${z}%`}})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Horas No Lectivas (HB)"}),o.jsxs("span",{className:"font-bold",children:[J,"%"]})]}),o.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500 dark:bg-green-600 rounded-full",style:{width:`${J}%`}})})]}),o.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-750 rounded-lg text-xs text-gray-700 dark:text-gray-300",children:[o.jsx("p",{children:o.jsx("strong",{children:"Distribución Objetivo:"})}),o.jsx("p",{children:"• Horas Lectivas (HA): 65% del contrato"}),o.jsx("p",{children:"• Horas No Lectivas (HB): 35% del contrato"}),o.jsx("p",{children:"• Horas Contrato Total = Horas Lectivas + Horas No Lectivas"}),o.jsx("div",{className:"mt-2",children:Math.abs(z-65)<=5?o.jsx("p",{className:"text-green-600 dark:text-green-400 font-medium",children:"✓ La distribución está dentro de los parámetros recomendados"}):o.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"⚠️ La distribución difiere de los parámetros recomendados"})})]})]})})()]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estadísticas Generales"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de docentes:"}),o.jsx("span",{className:"font-semibold",children:e.length})]}),o.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de asignaciones:"}),o.jsx("span",{className:"font-semibold",children:r.length})]}),o.jsxs("li",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 pb-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Promedio horas contrato:"}),o.jsxs("span",{className:"font-semibold",children:[e.length>0?(e.reduce((X,D)=>X+(typeof D.horasContrato=="number"?D.horasContrato:0),0)/e.length).toFixed(1):"0"," horas"]})]})]})]}),d.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("h5",{className:"text-md font-medium text-red-700 dark:text-red-300 mb-2",children:["Advertencias (",d.length,")"]}),o.jsx("div",{className:"max-h-32 overflow-y-auto p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsxs("ul",{className:"text-xs space-y-1 text-red-600 dark:text-red-400",children:[d.slice(0,5).map((X,D)=>o.jsxs("li",{className:"flex items-center gap-1",children:[X.tipo==="error"?"❌":"⚠️",o.jsx("span",{children:X.mensaje})]},D)),d.length>5&&o.jsxs("li",{className:"italic",children:["Y ",d.length-5," más..."]})]})})]})]})]})]})]})]})]})}),o.jsxs("div",{className:"mt-8 p-0 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 dark:from-blue-900/10 dark:to-indigo-900/10 rounded-xl overflow-hidden border border-blue-200 dark:border-blue-800 shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cw,{className:"w-5 h-5"}),o.jsx("h4",{className:"font-medium",children:"Información sobre Distribución de Horas"})]})}),o.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-700 dark:text-blue-300 shrink-0",children:o.jsx(Tv,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Horas Lectivas (HA)"}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Según tabla oficial (ej: 44h → ",D_(44),"h, 30h → ",D_(30),"h)"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-700 dark:text-green-300 shrink-0",children:o.jsx(p_,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Funciones Lectivas"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Las horas de las funciones se suman a las horas lectivas (HA)"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-700 dark:text-amber-300 shrink-0",children:o.jsx(lH,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Horas No Lectivas (HB)"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["El resto del contrato (ej: 44h → ",Hy(44),"h, 30h → ",Hy(30),"h)"]})]})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 mb-4",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Fórmulas de cálculo"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-mono",children:"HA"}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Lectivas = 65% del Contrato"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded text-xs font-mono",children:"HB"}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas No Lectivas = 35% del Contrato"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-mono",children:"HC"}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Horas Contrato = HA + HB"})]})]})]}),o.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Guía de semáforos"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Completo"})]}),o.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-500 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Faltan horas"})]}),o.jsxs("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-gray-750 rounded",children:[o.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Excede límites"})]})]})]})]})]})]}),o.jsx(ee,{}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col items-center animate-pulse",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 border-solid rounded-full"}),o.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 dark:border-blue-400 border-t-transparent animate-spin rounded-full absolute top-0 left-0"})]}),o.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700 dark:text-gray-300",children:"Procesando solicitud..."}),o.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Por favor, espere un momento"})]})})]})},q4="acciones_pedagogicas",a6e=(e,t)=>{var a,s,i,l;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((l=(i=r.creadoTs)==null?void 0:i.toMillis)==null?void 0:l.call(i))??Date.now()}};async function s6e(){const e=[];try{const t=zt(vt(ft,q4),hr("creadoTs","desc"));(await Tn(t)).docs.forEach(n=>e.push(a6e(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function i6e(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:ir.now()};await hn(vt(ft,q4),t)}async function o6e(e,t){const r=sr(vt(ft,q4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await cc(r,n)}async function l6e(e){const t=sr(vt(ft,q4),e);await Ra(t)}function cne(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=cne(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function vn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=cne(e))&&(n&&(n+=" "),n+=t);return n}var gB={},xB={},wV;function c6e(){return wV||(wV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(xB)),xB}var vB={},EV;function une(){return EV||(EV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(vB)),vB}var bB={},CV;function dne(){return CV||(CV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(bB)),bB}var yB={},NV;function UR(){return NV||(NV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];l?u==="\\"&&s+1<a?(s++,i+=r[s]):u===l?l="":i+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(yB)),yB}var _V;function QR(){return _V||(_V=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c6e(),r=une(),n=dne(),a=UR();function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(gB)),gB}var wB,SV;function u6e(){return SV||(SV=1,wB=QR().get),wB}var d6e=u6e();const Bm=kl(d6e);var EB={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kV;function A6e(){if(kV)return na;kV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function N(k){if(typeof k=="object"&&k!==null){var F=k.$$typeof;switch(F){case t:switch(k=k.type,k){case c:case u:case n:case s:case a:case f:return k;default:switch(k=k&&k.$$typeof,k){case l:case d:case g:case m:case i:return k;default:return F}}case r:return F}}}function B(k){return N(k)===u}return na.AsyncMode=c,na.ConcurrentMode=u,na.ContextConsumer=l,na.ContextProvider=i,na.Element=t,na.ForwardRef=d,na.Fragment=n,na.Lazy=g,na.Memo=m,na.Portal=r,na.Profiler=s,na.StrictMode=a,na.Suspense=f,na.isAsyncMode=function(k){return B(k)||N(k)===c},na.isConcurrentMode=B,na.isContextConsumer=function(k){return N(k)===l},na.isContextProvider=function(k){return N(k)===i},na.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},na.isForwardRef=function(k){return N(k)===d},na.isFragment=function(k){return N(k)===n},na.isLazy=function(k){return N(k)===g},na.isMemo=function(k){return N(k)===m},na.isPortal=function(k){return N(k)===r},na.isProfiler=function(k){return N(k)===s},na.isStrictMode=function(k){return N(k)===a},na.isSuspense=function(k){return N(k)===f},na.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===u||k===s||k===a||k===f||k===h||typeof k=="object"&&k!==null&&(k.$$typeof===g||k.$$typeof===m||k.$$typeof===i||k.$$typeof===l||k.$$typeof===d||k.$$typeof===v||k.$$typeof===y||k.$$typeof===w||k.$$typeof===x)},na.typeOf=N,na}var jV;function f6e(){return jV||(jV=1,EB.exports=A6e()),EB.exports}var h6e=f6e(),to=e=>e===0?0:e>0?1:-1,qc=e=>typeof e=="number"&&e!=+e,Mp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,dr=e=>(typeof e=="number"||e instanceof Number)&&!qc(e),sf=e=>dr(e)||typeof e=="string",m6e=0,s2=e=>{var t=++m6e;return"".concat(e||"").concat(t)},Sl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dr(t)&&typeof t!="string")return n;var s;if(Mp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return qc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Ane=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},hv=(e,t)=>dr(e)&&dr(t)?r=>e+r*(t-e):()=>t;function Fx(e,t,r){return dr(e)&&dr(t)?e+r*(t-e):t}function p6e(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Bm(n,t))===r)}var Ts=e=>e===null||typeof e>"u",rE=e=>Ts(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),g6e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function HR(e){if(typeof e!="string")return!1;var t=g6e;return t.includes(e)}var x6e=["viewBox","children"],BV=["points","pathLength"],CB={svg:x6e,polygon:BV,polyline:BV},VR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{HR(a)&&(n[a]=s=>r[a](r,s))}),n},v6e=(e,t,r)=>n=>(e(t,r,n),null),Kg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];HR(a)&&typeof s=="function"&&(n||(n={}),n[a]=v6e(s,t,r))}),n},b6e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function fne(e){if(typeof e!="string")return!1;var t=b6e;return t.includes(e)}function ll(e){var t=Object.entries(e).filter(r=>{var[n]=r;return fne(n)});return Object.fromEntries(t)}var TV=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",IV=null,NB=null,hne=e=>{if(e===IV&&Array.isArray(NB))return NB;var t=[];return _.Children.forEach(e,r=>{Ts(r)||(h6e.isFragment(r)?t=t.concat(hne(r.props.children)):t.push(r))}),NB=t,IV=e,t};function nE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>TV(a)):n=[TV(t)],hne(e).forEach(a=>{var s=Bm(a,"type.displayName")||Bm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var y6e=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(CB==null?void 0:CB[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&s.includes(t)||fne(t)),c=!!r&&HR(t);return i||l||c},Xn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;y6e((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},w6e=["children","width","height","viewBox","className","style","title","desc"];function yF(){return yF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yF.apply(null,arguments)}function E6e(e,t){if(e==null)return{};var r,n,a=C6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function C6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zR=_.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=e,d=E6e(e,w6e),f=s||{width:n,height:a,x:0,y:0},h=vn("recharts-surface",i);return _.createElement("svg",yF({},Xn(d,!0,"svg"),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),_.createElement("title",null,c),_.createElement("desc",null,u),r)}),N6e=["children","className"];function wF(){return wF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wF.apply(null,arguments)}function _6e(e,t){if(e==null)return{};var r,n,a=S6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function S6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cs=_.forwardRef((e,t)=>{var{children:r,className:n}=e,a=_6e(e,N6e),s=vn("recharts-layer",n);return _.createElement("g",wF({className:s},Xn(a,!0),{ref:t}),r)}),$R=zY(),mne=_.createContext(null),k6e=()=>_.useContext(mne);function Oa(e){return function(){return e}}const pne=Math.cos,P_=Math.sin,qd=Math.sqrt,R_=Math.PI,W4=2*R_,EF=Math.PI,CF=2*EF,_p=1e-6,j6e=CF-_p;function gne(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function B6e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return gne;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class T6e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?gne:B6e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-t,u=a-r,d=i-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>_p)if(!(Math.abs(f*c-u*d)>_p)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-i,g=a-l,x=c*c+u*u,v=m*m+g*g,y=Math.sqrt(x),w=Math.sqrt(h),N=s*Math.tan((EF-Math.acos((x+h-v)/(2*y*w)))/2),B=N/w,k=N/y;Math.abs(B-1)>_p&&this._append`L${t+B*d},${r+B*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+k*c},${this._y1=r+k*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>_p||Math.abs(this._y1-d)>_p)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%CF+CF),h>j6e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>_p&&this._append`A${n},${n},0,${+(h>=EF)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function GR(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new T6e(t)}function KR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xne(e){this._context=e}xne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function X4(e){return new xne(e)}function vne(e){return e[0]}function bne(e){return e[1]}function yne(e,t){var r=Oa(!0),n=null,a=X4,s=null,i=GR(l);e=typeof e=="function"?e:e===void 0?vne:Oa(e),t=typeof t=="function"?t:t===void 0?bne:Oa(t);function l(c){var u,d=(c=KR(c)).length,f,h=!1,m;for(n==null&&(s=a(m=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function JC(e,t,r){var n=null,a=Oa(!0),s=null,i=X4,l=null,c=GR(u);e=typeof e=="function"?e:e===void 0?vne:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?bne:Oa(+r);function u(f){var h,m,g,x=(f=KR(f)).length,v,y=!1,w,N=new Array(x),B=new Array(x);for(s==null&&(l=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(v=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(N[g],B[g]);l.lineEnd(),l.areaEnd()}y&&(N[h]=+e(v,h,f),B[h]=+t(v,h,f),l.point(n?+n(v,h,f):N[h],r?+r(v,h,f):B[h]))}if(w)return l=null,w+""||null}function d(){return yne().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(l=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=l=null:l=i(s=f),u):s},u}class wne{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function I6e(e){return new wne(e,!0)}function F6e(e){return new wne(e,!1)}const qR={draw(e,t){const r=qd(t/R_);e.moveTo(r,0),e.arc(0,0,r,0,W4)}},O6e={draw(e,t){const r=qd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Ene=qd(1/3),D6e=Ene*2,P6e={draw(e,t){const r=qd(t/D6e),n=r*Ene;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},R6e={draw(e,t){const r=qd(t),n=-r/2;e.rect(n,n,r,r)}},L6e=.8908130915292852,Cne=P_(R_/10)/P_(7*R_/10),M6e=P_(W4/10)*Cne,U6e=-pne(W4/10)*Cne,Q6e={draw(e,t){const r=qd(t*L6e),n=M6e*r,a=U6e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=W4*s/5,l=pne(i),c=P_(i);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},_B=qd(3),H6e={draw(e,t){const r=-qd(t/(_B*3));e.moveTo(0,r*2),e.lineTo(-_B*r,-r),e.lineTo(_B*r,-r),e.closePath()}},Cu=-.5,Nu=qd(3)/2,NF=1/qd(12),V6e=(NF/2+1)*3,z6e={draw(e,t){const r=qd(t/V6e),n=r/2,a=r*NF,s=n,i=r*NF+r,l=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(l,c),e.lineTo(Cu*n-Nu*a,Nu*n+Cu*a),e.lineTo(Cu*s-Nu*i,Nu*s+Cu*i),e.lineTo(Cu*l-Nu*c,Nu*l+Cu*c),e.lineTo(Cu*n+Nu*a,Cu*a-Nu*n),e.lineTo(Cu*s+Nu*i,Cu*i-Nu*s),e.lineTo(Cu*l+Nu*c,Cu*c-Nu*l),e.closePath()}};function $6e(e,t){let r=null,n=GR(a);e=typeof e=="function"?e:Oa(e||qR),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function L_(){}function M_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Nne(e){this._context=e}Nne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:M_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G6e(e){return new Nne(e)}function _ne(e){this._context=e}_ne.prototype={areaStart:L_,areaEnd:L_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:M_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K6e(e){return new _ne(e)}function Sne(e){this._context=e}Sne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:M_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q6e(e){return new Sne(e)}function kne(e){this._context=e}kne.prototype={areaStart:L_,areaEnd:L_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function W6e(e){return new kne(e)}function FV(e){return e<0?-1:1}function OV(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(FV(s)+FV(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function DV(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function SB(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,i-l*r,s,i)}function U_(e){this._context=e}U_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:SB(this,this._t0,DV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,SB(this,DV(this,r=OV(this,e,t)),r);break;default:SB(this,this._t0,r=OV(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function jne(e){this._context=new Bne(e)}(jne.prototype=Object.create(U_.prototype)).point=function(e,t){U_.prototype.point.call(this,t,e)};function Bne(e){this._context=e}Bne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function X6e(e){return new U_(e)}function Y6e(e){return new jne(e)}function Tne(e){this._context=e}Tne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=PV(e),a=PV(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function PV(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function J6e(e){return new Tne(e)}function Y4(e,t){this._context=e,this._t=t}Y4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Z6e(e){return new Y4(e,.5)}function eFe(e){return new Y4(e,0)}function tFe(e){return new Y4(e,1)}function u1(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,l=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function _F(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function rFe(e,t){return e[t]}function nFe(e){const t=[];return t.key=e,t}function aFe(){var e=Oa([]),t=_F,r=u1,n=rFe;function a(s){var i=Array.from(e.apply(this,arguments),nFe),l,c=i.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(f,i[l].key,u,s)]).data=f;for(l=0,d=KR(t(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?_F:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??u1,a):r},a}function sFe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}u1(e,t)}}function iFe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=e[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}u1(e,t)}}function oFe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],v=x[n][1]||0,y=x[n-1][1]||0;m+=v-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,u1(e,t)}}var lFe=["type","size","sizeType"];function SF(){return SF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SF.apply(null,arguments)}function RV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RV(Object(r),!0).forEach(function(n){cFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cFe(e,t,r){return(t=uFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uFe(e){var t=dFe(e,"string");return typeof t=="symbol"?t:t+""}function dFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AFe(e,t){if(e==null)return{};var r,n,a=fFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ine={symbolCircle:qR,symbolCross:O6e,symbolDiamond:P6e,symbolSquare:R6e,symbolStar:Q6e,symbolTriangle:H6e,symbolWye:z6e},hFe=Math.PI/180,mFe=e=>{var t="symbol".concat(rE(e));return Ine[t]||qR},pFe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*hFe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gFe=(e,t)=>{Ine["symbol".concat(rE(e))]=t},WR=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=AFe(e,lFe),s=LV(LV({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=mFe(t),h=$6e().type(f).size(pFe(r,n,t));return h()},{className:l,cx:c,cy:u}=s,d=Xn(s,!0);return c===+c&&u===+u&&r===+r?_.createElement("path",SF({},d,{className:vn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};WR.registerSymbol=gFe;function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kF.apply(null,arguments)}function MV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xFe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MV(Object(r),!0).forEach(function(n){XR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XR(e,t,r){return(t=vFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vFe(e){var t=bFe(e,"string");return typeof t=="symbol"?t:t+""}function bFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _u=32;class YR extends _.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=_u/2,s=_u/6,i=_u/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:_u,y2:a,className:"recharts-legend-icon"});if(c==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(_u,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return _.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_u/8,"h").concat(_u,"v").concat(_u*3/4,"h").concat(-_u,"z"),className:"recharts-legend-icon"});if(_.isValidElement(t.legendIcon)){var u=xFe({},t);return delete u.legendIcon,_.cloneElement(t.legendIcon,u)}return _.createElement(WR,{fill:l,cx:a,cy:a,size:_u,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,l={x:0,y:0,width:_u,height:_u},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,m=vn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return _.createElement("li",kF({className:m,style:c,key:"legend-item-".concat(f)},Kg(this.props,d,f)),_.createElement(zR,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}XR(YR,"displayName","Legend");XR(YR,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var kB={},jB={},UV;function yFe(){return UV||(UV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}e.uniqBy=t}(jB)),jB}var BB={},QV;function J4(){return QV||(QV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(BB)),BB}var TB={},IB={},FB={},HV;function wFe(){return HV||(HV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(FB)),FB}var VV;function JR(){return VV||(VV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wFe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(IB)),IB}var OB={},zV;function EFe(){return zV||(zV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(OB)),OB}var $V;function CFe(){return $V||($V=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JR(),r=EFe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(TB)),TB}var DB={},PB={},GV;function NFe(){return GV||(GV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QR();function r(n){return function(a){return t.get(a,n)}}e.property=r}(PB)),PB}var RB={},LB={},MB={},UB={},KV;function Fne(){return KV||(KV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(UB)),UB}var QB={},qV;function One(){return qV||(qV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(QB)),QB}var HB={},WV;function ZR(){return WV||(WV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(HB)),HB}var XV;function _Fe(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e8(),r=Fne(),n=One(),a=ZR();function s(f,h,m){return typeof m!="function"?t.isMatch(f,h):i(f,h,function g(x,v,y,w,N,B){const k=m(x,v,y,w,N,B);return k!==void 0?!!k:i(x,v,g,B)},new Map)}function i(f,h,m,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,g);case"function":return Object.keys(h).length>0?i(f,{...h},m,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,m,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,g);if(h instanceof Map)return c(f,h,m,g);if(h instanceof Set)return d(f,h,m,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let v=0;v<x.length;v++){const y=x[v];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!m(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,m,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,v]of h.entries()){const y=f.get(x);if(m(y,v,x,f,h,g)===!1)return!1}return!0}function u(f,h,m,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let v=0;v<h.length;v++){const y=h[v];let w=!1;for(let N=0;N<f.length;N++){if(x.has(N))continue;const B=f[N];let k=!1;if(m(B,y,v,f,h,g)&&(k=!0),k){x.add(N),w=!0;break}}if(!w)return!1}return!0}function d(f,h,m,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,g):!1}e.isMatchWith=s,e.isSetMatch=d}(MB)),MB}var YV;function e8(){return YV||(YV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Fe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(LB)),LB}var VB={},zB={},$B={},JV;function Dne(){return JV||(JV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}($B)),$B}var GB={},ZV;function t8(){return ZV||(ZV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(GB)),GB}var KB={},ez;function r8(){return ez||(ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",g="[object Error]",x="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",N="[object Uint32Array]",B="[object BigUint64Array]",k="[object Int8Array]",F="[object Int16Array]",E="[object Int32Array]",S="[object BigInt64Array]",T="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=B,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=T,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=F,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=N,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y}(KB)),KB}var qB={},tz;function SFe(){return tz||(tz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(qB)),qB}var rz;function Pne(){return rz||(rz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dne(),r=t8(),n=r8(),a=One(),s=SFe();function i(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,m);if(x!=null)return x;if(a.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[y,w]of d)v.set(y,l(w,y,h,m,g));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const y of d)v.add(l(y,void 0,h,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let y=0;y<d.length;y++)v[y]=l(d[y],y,h,m,g);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),c(v,d,h,m,g),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),c(v,d,h,m,g),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,m,g),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),c(v,d,h,m,g),v}return d}function c(d,f,h=d,m,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<x.length;v++){const y=x[v],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=l(f[y],y,h,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=l,e.copyProperties=c}(zB)),zB}var nz;function kFe(){return nz||(nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pne();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(VB)),VB}var az;function jFe(){return az||(az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e8(),r=kFe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(RB)),RB}var WB={},XB={},YB={},sz;function BFe(){return sz||(sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pne(),r=r8();function n(a,s){return t.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(YB)),YB}var iz;function TFe(){return iz||(iz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BFe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(XB)),XB}var JB={},ZB={},oz;function Rne(){return oz||(oz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(ZB)),ZB}var eT={},lz;function IFe(){return lz||(lz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t8();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(eT)),eT}var cz;function FFe(){return cz||(cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=une(),r=Rne(),n=IFe(),a=UR();function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(JB)),JB}var uz;function OFe(){return uz||(uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e8(),r=dne(),n=TFe(),a=QR(),s=FFe();function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(WB)),WB}var dz;function n8(){return dz||(dz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J4(),r=NFe(),n=jFe(),a=OFe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(DB)),DB}var Az;function DFe(){return Az||(Az=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yFe(),r=J4(),n=CFe(),a=n8();function s(i,l=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(l)):[]}e.uniqBy=s}(kB)),kB}var tT,fz;function PFe(){return fz||(fz=1,tT=DFe().uniqBy),tT}var RFe=PFe();const hz=kl(RFe);function Lne(e,t,r){return t===!0?hz(e,r):typeof t=="function"?hz(e,t):e}var rT={exports:{}},nT={},aT={exports:{}},sT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mz;function LFe(){if(mz)return sT;mz=1;var e=O1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function l(f,h){var m=h(),g=n({inst:{value:m,getSnapshot:h}}),x=g[0].inst,v=g[1];return s(function(){x.value=m,x.getSnapshot=h,c(x)&&v({inst:x})},[f,m,h]),a(function(){return c(x)&&v({inst:x}),f(function(){c(x)&&v({inst:x})})},[f]),i(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return sT.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,sT}var pz;function MFe(){return pz||(pz=1,aT.exports=LFe()),aT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gz;function UFe(){if(gz)return nT;gz=1;var e=O1(),t=MFe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,c=e.useDebugValue;return nT.useSyncExternalStoreWithSelector=function(u,d,f,h,m){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(F){if(!w){if(w=!0,N=F,F=h(F),m!==void 0&&x.hasValue){var E=x.value;if(m(E,F))return B=E}return B=F}if(E=B,n(N,F))return E;var S=h(F);return m!==void 0&&m(E,S)?(N=F,E):(N=F,B=S)}var w=!1,N,B,k=f===void 0?null:f;return[function(){return y(d())},k===null?void 0:function(){return y(k())}]},[d,f,h,m]);var v=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=v},[v]),c(v),v},nT}var xz;function QFe(){return xz||(xz=1,rT.exports=UFe()),rT.exports}var Mne=QFe();const HFe=kl(Mne);var a8=_.createContext(null),VFe=e=>e,$a=()=>{var e=_.useContext(a8);return e?e.store.dispatch:VFe},h5=()=>{},zFe=()=>h5,$Fe=(e,t)=>e===t;function or(e){var t=_.useContext(a8);return Mne.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:zFe,t?t.store.getState:h5,t?t.store.getState:h5,t?e:h5,$Fe)}function GFe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function KFe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function qFe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var vz=e=>Array.isArray(e)?e:[e];function WFe(e){const t=Array.isArray(e[0])?e[0]:e;return qFe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function XFe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var YFe=class{constructor(e){this.value=e}deref(){return this.value}},JFe=typeof WeakRef<"u"?WeakRef:YFe,ZFe=0,bz=1;function ZC(){return{s:ZFe,v:void 0,o:null,p:null}}function Une(e,t={}){let r=ZC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const v=x.get(g);v===void 0?(l=ZC(),x.set(g,l)):l=v}else{let x=l.p;x===null&&(l.p=x=new Map);const v=x.get(g);v===void 0?(l=ZC(),x.set(g,l)):l=v}}const u=l;let d;if(l.s===bz)d=l.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new JFe(d):d}return u.s=bz,u.v=d,d}return i.clearCache=()=>{r=ZC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function eOe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),GFe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=Une,argsMemoizeOptions:g=[]}=d,x=vz(h),v=vz(g),y=WFe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),N=m(function(){i++;const k=XFe(y,arguments);return l=w.apply(null,k),l},...v);return Object.assign(N,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ut=eOe(Une),tOe=Object.assign((e,t=ut)=>{KFe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>tOe}),iT={},oT={},lT={},yz;function rOe(){return yz||(yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),l=t(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};e.compareValues=r}(lT)),lT}var cT={},uT={},wz;function Qne(){return wz||(wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(uT)),uT}var Ez;function nOe(){return Ez||(Ez=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qne(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(cT)),cT}var Cz;function aOe(){return Cz||(Cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rOe(),r=nOe(),n=UR();function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let x=m;for(let v=0;v<g.length&&x!=null;++v)x=x[g[v]];return x},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,f=i.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return s.map(m=>({original:m,criteria:f.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let x=0;x<f.length;x++){const v=t.compareValues(m.criteria[x],g.criteria[x],l[x]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=a}(oT)),oT}var dT={},Nz;function sOe(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(dT)),dT}var AT={},_z;function Hne(){return _z||(_z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rne(),r=JR(),n=Fne(),a=ZR();function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}e.isIterateeCall=s}(AT)),AT}var Sz;function iOe(){return Sz||(Sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aOe(),r=sOe(),n=Hne();function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(iT)),iT}var fT,kz;function oOe(){return kz||(kz=1,fT=iOe().sortBy),fT}var lOe=oOe();const Z4=kl(lOe);var Vne=e=>e.legend.settings,cOe=e=>e.legend.size,uOe=e=>e.legend.payload,dOe=ut([uOe,Vne],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Z4(n,r):n});function AOe(){return or(dOe)}var eN=1;function zne(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>eN||Math.abs(i.left-t.left)>eN||Math.abs(i.top-t.top)>eN||Math.abs(i.width-t.width)>eN)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function po(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fOe=typeof Symbol=="function"&&Symbol.observable||"@@observable",jz=fOe,hT=()=>Math.random().toString(36).substring(7).split("").join("."),hOe={INIT:`@@redux/INIT${hT()}`,REPLACE:`@@redux/REPLACE${hT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hT()}`},Q_=hOe;function s8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function $ne(e,t,r){if(typeof e!="function")throw new Error(po(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(po(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(po(1));return r($ne)(e,t)}let n=e,a=t,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((v,y)=>{i.set(y,v)}))}function d(){if(c)throw new Error(po(3));return a}function f(v){if(typeof v!="function")throw new Error(po(4));if(c)throw new Error(po(5));let y=!0;u();const w=l++;return i.set(w,v),function(){if(y){if(c)throw new Error(po(6));y=!1,u(),i.delete(w),s=null}}}function h(v){if(!s8(v))throw new Error(po(7));if(typeof v.type>"u")throw new Error(po(8));if(typeof v.type!="string")throw new Error(po(17));if(c)throw new Error(po(9));try{c=!0,a=n(a,v)}finally{c=!1}return(s=i).forEach(w=>{w()}),v}function m(v){if(typeof v!="function")throw new Error(po(10));n=v,h({type:Q_.REPLACE})}function g(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(po(11));function w(){const B=y;B.next&&B.next(d())}return w(),{unsubscribe:v(w)}},[jz](){return this}}}return h({type:Q_.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[jz]:g}}function mOe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Q_.INIT})>"u")throw new Error(po(12));if(typeof r(void 0,{type:Q_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(po(13))})}function Gne(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{mOe(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=i[f],g=h(m,l);if(typeof g>"u")throw l&&l.type,new Error(po(14));u[f]=g,c=c||g!==m}return c=c||n.length!==Object.keys(i).length,c?u:i}}function H_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function pOe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(po(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(i));return s=H_(...l)(a.dispatch),{...a,dispatch:s}}}function Kne(e){return s8(e)&&"type"in e&&typeof e.type=="string"}var qne=Symbol.for("immer-nothing"),Bz=Symbol.for("immer-draftable"),Wc=Symbol.for("immer-state");function kd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var d1=Object.getPrototypeOf;function Eg(e){return!!e&&!!e[Wc]}function Ch(e){var t;return e?Wne(e)||Array.isArray(e)||!!e[Bz]||!!((t=e.constructor)!=null&&t[Bz])||tk(e)||rk(e):!1}var gOe=Object.prototype.constructor.toString();function Wne(e){if(!e||typeof e!="object")return!1;const t=d1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===gOe}function V_(e,t){ek(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function ek(e){const t=e[Wc];return t?t.type_:Array.isArray(e)?1:tk(e)?2:rk(e)?3:0}function jF(e,t){return ek(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Xne(e,t,r){const n=ek(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function xOe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function tk(e){return e instanceof Map}function rk(e){return e instanceof Set}function Sp(e){return e.copy_||e.base_}function BF(e,t){if(tk(e))return new Map(e);if(rk(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Wne(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Wc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(d1(e),n)}else{const n=d1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function i8(e,t=!1){return nk(e)||Eg(e)||!Ch(e)||(ek(e)>1&&(e.set=e.add=e.clear=e.delete=vOe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>i8(n,!0))),e}function vOe(){kd(2)}function nk(e){return Object.isFrozen(e)}var bOe={};function Cg(e){const t=bOe[e];return t||kd(0,e),t}var i2;function Yne(){return i2}function yOe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Tz(e,t){t&&(Cg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function TF(e){IF(e),e.drafts_.forEach(wOe),e.drafts_=null}function IF(e){e===i2&&(i2=e.parent_)}function Iz(e){return i2=yOe(i2,e)}function wOe(e){const t=e[Wc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Wc].modified_&&(TF(t),kd(4)),Ch(e)&&(e=z_(t,e),t.parent_||$_(t,e)),t.patches_&&Cg("Patches").generateReplacementPatches_(r[Wc].base_,e,t.patches_,t.inversePatches_)):e=z_(t,r,[]),TF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qne?e:void 0}function z_(e,t,r){if(nk(t))return t;const n=t[Wc];if(!n)return V_(t,(a,s)=>Oz(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return $_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),V_(s,(l,c)=>Oz(e,n,a,l,c,r,i)),$_(e,a,!1),r&&e.patches_&&Cg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Oz(e,t,r,n,a,s,i){if(Eg(a)){const l=s&&t&&t.type_!==3&&!jF(t.assigned_,n)?s.concat(n):void 0,c=z_(e,a,l);if(Xne(r,n,c),Eg(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Ch(a)&&!nk(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;z_(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&$_(e,a)}}function $_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&i8(t,r)}function EOe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Yne(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=o8;r&&(a=[n],s=o2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var o8={get(e,t){if(t===Wc)return e;const r=Sp(e);if(!jF(r,t))return COe(e,r,t);const n=r[t];return e.finalized_||!Ch(n)?n:n===mT(e.base_,t)?(pT(e),e.copy_[t]=OF(n,e)):n},has(e,t){return t in Sp(e)},ownKeys(e){return Reflect.ownKeys(Sp(e))},set(e,t,r){const n=Jne(Sp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=mT(Sp(e),t),s=a==null?void 0:a[Wc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(xOe(r,a)&&(r!==void 0||jF(e.base_,t)))return!0;pT(e),FF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return mT(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pT(e),FF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Sp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){kd(11)},getPrototypeOf(e){return d1(e.base_)},setPrototypeOf(){kd(12)}},o2={};V_(o8,(e,t)=>{o2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});o2.deleteProperty=function(e,t){return o2.set.call(this,e,t,void 0)};o2.set=function(e,t,r){return o8.set.call(this,e[0],t,r,e[0])};function mT(e,t){const r=e[Wc];return(r?Sp(r):e)[t]}function COe(e,t,r){var a;const n=Jne(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Jne(e,t){if(!(t in e))return;let r=d1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=d1(r)}}function FF(e){e.modified_||(e.modified_=!0,e.parent_&&FF(e.parent_))}function pT(e){e.copy_||(e.copy_=BF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var NOe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&kd(6),n!==void 0&&typeof n!="function"&&kd(7);let a;if(Ch(t)){const s=Iz(this),i=OF(t,void 0);let l=!0;try{a=r(i),l=!1}finally{l?TF(s):IF(s)}return Tz(s,n),Fz(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===qne&&(a=void 0),this.autoFreeze_&&i8(a,!0),n){const s=[],i=[];Cg("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else kd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...l)=>this.produceWithPatches(i,c=>t(c,...l));let n,a;return[this.produce(t,r,(i,l)=>{n=i,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ch(e)||kd(8),Eg(e)&&(e=hh(e));const t=Iz(this),r=OF(e,void 0);return r[Wc].isManual_=!0,IF(t),r}finishDraft(e,t){const r=e&&e[Wc];(!r||!r.isManual_)&&kd(9);const{scope_:n}=r;return Tz(n,t),Fz(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Cg("Patches").applyPatches_;return Eg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function OF(e,t){const r=tk(e)?Cg("MapSet").proxyMap_(e,t):rk(e)?Cg("MapSet").proxySet_(e,t):EOe(e,t);return(t?t.scope_:Yne()).drafts_.push(r),r}function hh(e){return Eg(e)||kd(10,e),Zne(e)}function Zne(e){if(!Ch(e)||nk(e))return e;const t=e[Wc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=BF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=BF(e,!0);return V_(r,(n,a)=>{Xne(r,n,Zne(a))}),t&&(t.finalized_=!1),r}var Xc=new NOe,eae=Xc.produce;Xc.produceWithPatches.bind(Xc);Xc.setAutoFreeze.bind(Xc);Xc.setUseStrictShallowCopy.bind(Xc);Xc.applyPatches.bind(Xc);Xc.createDraft.bind(Xc);Xc.finishDraft.bind(Xc);function tae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var _Oe=tae(),SOe=tae,kOe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?H_:H_.apply(null,arguments)};function qu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(zc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Kne(n)&&n.type===e,r}var rae=class Vy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Vy.prototype)}static get[Symbol.species](){return Vy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Vy(...t[0].concat(this)):new Vy(...t.concat(this))}};function Dz(e){return Ch(e)?eae(e,()=>{}):e}function tN(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function jOe(e){return typeof e=="boolean"}var BOe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new rae;return r&&(jOe(r)?i.push(_Oe):i.push(SOe(r.extraArgument))),i},TOe="RTK_autoBatch",Pz=e=>t=>{setTimeout(t,e)},IOe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Pz(10):e.type==="callback"?e.queueNotification:Pz(e.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[TOe]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},FOe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new rae(e);return n&&a.push(IOe(typeof n=="object"?n:void 0)),a};function OOe(e){const t=BOe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(s8(r))l=Gne(r);else throw new Error(zc(1));let c;typeof n=="function"?c=n(t):c=t();let u=H_;a&&(u=kOe({trace:!1,...typeof a=="object"&&a}));const d=pOe(...c),f=FOe(d);let h=typeof i=="function"?i(f):f();const m=u(...h);return $ne(l,s,m)}function nae(e){const t={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(zc(28));if(l in t)throw new Error(zc(29));return t[l]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function DOe(e){return typeof e=="function"}function POe(e,t){let[r,n,a]=nae(t),s;if(DOe(e))s=()=>Dz(e());else{const l=Dz(e);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(Eg(d)){const m=f(d,c);return m===void 0?d:m}else{if(Ch(d))return eae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var ROe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LOe=(e=21)=>{let t="",r=e;for(;r--;)t+=ROe[Math.random()*64|0];return t},MOe=Symbol.for("rtk-slice-createasyncthunk");function UOe(e,t){return`${e}/${t}`}function QOe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[MOe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(zc(11));const l=(typeof a.reducers=="function"?a.reducers(VOe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(B,k){const F=typeof B=="string"?B:B.type;if(!F)throw new Error(zc(12));if(F in u.sliceCaseReducersByType)throw new Error(zc(13));return u.sliceCaseReducersByType[F]=k,d},addMatcher(B,k){return u.sliceMatchers.push({matcher:B,reducer:k}),d},exposeAction(B,k){return u.actionCreators[B]=k,d},exposeCaseReducer(B,k){return u.sliceCaseReducersByName[B]=k,d}};c.forEach(B=>{const k=l[B],F={reducerName:B,type:UOe(s,B),createNotation:typeof a.reducers=="function"};$Oe(k)?KOe(F,k,d,t):zOe(F,k,d)});function f(){const[B={},k=[],F=void 0]=typeof a.extraReducers=="function"?nae(a.extraReducers):[a.extraReducers],E={...B,...u.sliceCaseReducersByType};return POe(a.initialState,S=>{for(let T in E)S.addCase(T,E[T]);for(let T of u.sliceMatchers)S.addMatcher(T.matcher,T.reducer);for(let T of k)S.addMatcher(T.matcher,T.reducer);F&&S.addDefaultCase(F)})}const h=B=>B,m=new Map,g=new WeakMap;let x;function v(B,k){return x||(x=f()),x(B,k)}function y(){return x||(x=f()),x.getInitialState()}function w(B,k=!1){function F(S){let T=S[B];return typeof T>"u"&&k&&(T=tN(g,F,y)),T}function E(S=h){const T=tN(m,k,()=>new WeakMap);return tN(T,S,()=>{const L={};for(const[R,j]of Object.entries(a.selectors??{}))L[R]=HOe(j,S,()=>tN(g,S,y),k);return L})}return{reducerPath:B,getSelectors:E,get selectors(){return E(F)},selectSlice:F}}const N={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(B,{reducerPath:k,...F}={}){const E=k??i;return B.inject({reducerPath:E,reducer:v},F),{...N,...w(E,!0)}}};return N}}function HOe(e,t,r,n){function a(s,...i){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...i)}return a.unwrapped=e,a}var Zc=QOe();function VOe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function zOe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!GOe(n))throw new Error(zc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?qu(e,i):qu(e))}function $Oe(e){return e._reducerDefinitionType==="asyncThunk"}function GOe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function KOe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(zc(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||rN,pending:l||rN,rejected:c||rN,settled:u||rN})}function rN(){}var qOe="task",aae="listener",sae="completed",l8="cancelled",WOe=`task-${l8}`,XOe=`task-${sae}`,DF=`${aae}-${l8}`,YOe=`${aae}-${sae}`,ak=class{constructor(e){_3(this,"name","TaskAbortError");_3(this,"message");this.code=e,this.message=`${qOe} ${l8} (reason: ${e})`}},c8=(e,t)=>{if(typeof e!="function")throw new TypeError(zc(32))},G_=()=>{},iae=(e,t=G_)=>(e.catch(t),e),oae=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),eg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},tg=e=>{if(e.aborted){const{reason:t}=e;throw new ak(t)}};function lae(e,t){let r=G_;return new Promise((n,a)=>{const s=()=>a(new ak(e.reason));if(e.aborted){s();return}r=oae(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=G_})}var JOe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ak?"cancelled":"rejected",error:r}}finally{t==null||t()}},K_=e=>t=>iae(lae(e,t).then(r=>(tg(e),r))),cae=e=>{const t=K_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Pv}=Object,Rz={},sk="listenerMiddleware",ZOe=(e,t)=>{const r=n=>oae(e,()=>eg(n,e.reason));return(n,a)=>{c8(n);const s=new AbortController;r(s);const i=JOe(async()=>{tg(e),tg(s.signal);const l=await n({pause:K_(s.signal),delay:cae(s.signal),signal:s.signal});return tg(s.signal),l},()=>eg(s,XOe));return a!=null&&a.autoJoin&&t.push(i.catch(G_)),{result:K_(e)(i),cancel(){eg(s,WOe)}}}},eDe=(e,t)=>{const r=async(n,a)=>{tg(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await lae(t,Promise.race(l));return tg(t),c}finally{s()}};return(n,a)=>iae(r(n,a))},uae=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=qu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(zc(21));return c8(s),{predicate:a,type:t,effect:s}},dae=Pv(e=>{const{type:t,predicate:r,effect:n}=uae(e);return{id:LOe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(zc(22))}}},{withTypes:()=>dae}),Lz=(e,t)=>{const{type:r,effect:n,predicate:a}=uae(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},PF=e=>{e.pending.forEach(t=>{eg(t,DF)})},tDe=e=>()=>{e.forEach(PF),e.clear()},Mz=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Aae=Pv(qu(`${sk}/add`),{withTypes:()=>Aae}),rDe=qu(`${sk}/removeAll`),fae=Pv(qu(`${sk}/remove`),{withTypes:()=>fae}),nDe=(...e)=>{console.error(`${sk}/error`,...e)},aE=(e={})=>{const t=new Map,{extra:r,onError:n=nDe}=e;c8(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&PF(d)}),s=d=>{const f=Lz(t,d)??dae(d);return a(f)};Pv(s,{withTypes:()=>s});const i=d=>{const f=Lz(t,d);return f&&(f.unsubscribe(),d.cancelActive&&PF(f)),!!f};Pv(i,{withTypes:()=>i});const l=async(d,f,h,m)=>{const g=new AbortController,x=eDe(s,g.signal),v=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Pv({},h,{getOriginalState:m,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:cae(g.signal),pause:K_(g.signal),extra:r,signal:g.signal,fork:ZOe(g.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,N)=>{y!==g&&(eg(y,DF),N.delete(y))})},cancel:()=>{eg(g,DF),d.pending.delete(g)},throwIfCancelled:()=>{tg(g.signal)}})))}catch(y){y instanceof ak||Mz(n,y,{raisedBy:"effect"})}finally{await Promise.all(v),eg(g,YOe),d.pending.delete(g)}},c=tDe(t);return{middleware:d=>f=>h=>{if(!Kne(h))return f(h);if(Aae.match(h))return s(h.payload);if(rDe.match(h)){c();return}if(fae.match(h))return i(h.payload);let m=d.getState();const g=()=>{if(m===Rz)throw new Error(zc(23));return m};let x;try{if(x=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const w of y){let N=!1;try{N=w.predicate(h,v,m)}catch(B){N=!1,Mz(n,B,{raisedBy:"predicate"})}N&&l(w,h,d,g)}}}finally{m=Rz}return x},startListening:s,stopListening:i,clearListeners:c}};function zc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var aDe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},hae=Zc({name:"chartLayout",initialState:aDe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:sDe,setLayout:iDe,setChartSize:oDe,setScale:lDe}=hae.actions,cDe=hae.reducer;function Uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(r),!0).forEach(function(n){uDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uDe(e,t,r){return(t=dDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dDe(e){var t=ADe(e,"string");return typeof t=="symbol"?t:t+""}function ADe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q_=Math.PI/180,fDe=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-q_*n)*r,y:t+Math.sin(-q_*n)*r}),mae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},hDe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},mDe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=hDe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:fDe(c),angleInRadian:c}},pDe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},gDe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},xDe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=mDe({x:r,y:n},t),{innerRadius:i,outerRadius:l}=t;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=pDe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?Qz(Qz({},t),{},{radius:a,angle:gDe(d,t)}):null},pae=e=>!_.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function gae(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Hz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Du(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hz(Object(r),!0).forEach(function(n){vDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vDe(e,t,r){return(t=bDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bDe(e){var t=yDe(e,"string");return typeof t=="symbol"?t:t+""}function yDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return Ts(e)||Ts(t)?r:sf(t)?Bm(e,t,r):typeof t=="function"?t(e):r}var wDe=(e,t,r,n,a)=>{var s,i=-1,l=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(to(d-u)!==to(f-d)){var m=[];if(to(f-d)===to(a[1]-a[0])){h=f;var g=d+a[1]-a[0];m[0]=Math.min(g,(g+u)/2),m[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var N=0;N<l;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:i}=t[N]);break}}return i},EDe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=t;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&dr(e[s]))return Du(Du({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&dr(e[i]))return Du(Du({},e),{},{[i]:e[i]+(a||0)})}return e},$m=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",xae=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,s,i=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||i.push(t),s||i.push(r),i},vae=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!i)return null;var g=l==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=m==="angleAxis"&&s&&s.length>=2?to(s[0]-s[1])*2*x:x,f||h){var v=(f||h||[]).map((y,w)=>{var N=n?n.indexOf(y):y;return{coordinate:i(N)+x,value:y,offset:x,index:w}});return v.filter(y=>!qc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},Vz=1e-4,CDe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Vz,s=Math.max(n[0],n[1])+Vz,i=e(t[0]),l=e(t[r-1]);(i<a||i>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},NDe=(e,t)=>{if(!t||t.length!==2||!dr(t[0])||!dr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!dr(e[0])||e[0]<r)&&(a[0]=r),(!dr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},_De=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var l=qc(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=a,e[i][r][1]=a+l,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1])}},SDe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=qc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},kDe={sign:_De,expand:sFe,none:u1,silhouette:iFe,wiggle:oFe,positive:SDe},jDe=(e,t,r)=>{var n=kDe[r],a=aFe().keys(t).value((s,i)=>+Pa(s,i,0)).order(_F).offset(n);return a(e)};function BDe(e){return e==null?void 0:String(e)}var zz=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var l=Pa(s,t.dataKey,t.scale.domain()[i]);return Ts(l)?null:t.scale(l)-a/2+n},TDe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},IDe=e=>{var t=e.flat(2).filter(dr);return[Math.min(...t),Math.max(...t)]},FDe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],ODe=(e,t,r)=>{if(e!=null)return FDe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,l=i.reduce((c,u)=>{var d=gae(u,t,r),f=IDe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},$z=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,l2=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Z4(t,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function Kz(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return Du(Du({},t),{},{dataKey:r,payload:n,value:a,name:s})}function J1(e,t){if(e)return String(e);if(typeof t=="string")return t}function DDe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?xDe({x:e,y:t},n):null}var PDe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return Du(Du(Du({},n),ea(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return Du(Du(Du({},n),ea(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},RDe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Uh=e=>e.layout.width,Qh=e=>e.layout.height,LDe=e=>e.layout.scale,bae=e=>e.layout.margin,u8=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),d8=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),yae="data-recharts-item-index",wae="data-recharts-item-data-key",ik=60;function qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(r),!0).forEach(function(n){MDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MDe(e,t,r){return(t=UDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UDe(e){var t=QDe(e,"string");return typeof t=="symbol"?t:t+""}function QDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HDe=e=>e.brush.height,Oi=ut([Uh,Qh,bae,HDe,u8,d8,Vne,cOe],(e,t,r,n,a,s,i,l)=>{var c=s.reduce((g,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:ik;return k0(k0({},g),{},{[v]:g[v]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?k0(k0({},g),{},{[v]:Bm(g,"".concat(v))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=k0(k0({},u),c),f=d.bottom;d.bottom+=n,d=EDe(d,i,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return k0(k0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),VDe=ut(Oi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Eae=ut(Uh,Qh,(e,t)=>({x:0,y:0,width:e,height:t})),zDe=_.createContext(null),uc=()=>_.useContext(zDe)!=null,ok=e=>e.brush,lk=ut([ok,Oi,bae],(e,t,r)=>({height:e.height,x:dr(e.x)?e.x:t.left,y:dr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:dr(e.width)?e.width:t.width})),A8=()=>{var e,t=uc(),r=or(VDe),n=or(lk),a=(e=or(ok))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},$De={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Cae=()=>{var e;return(e=or(Oi))!==null&&e!==void 0?e:$De},f8=()=>or(Uh),h8=()=>or(Qh),GDe={top:0,right:0,bottom:0,left:0},KDe=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:GDe},In=e=>e.layout.layoutType,m8=()=>or(In),qDe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Nae=Zc({name:"legend",initialState:qDe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=hh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Wz,setLegendSettings:WDe,addLegendPayload:_ae,removeLegendPayload:Sae}=Nae.actions,XDe=Nae.reducer,YDe=["contextPayload"];function RF(){return RF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RF.apply(null,arguments)}function Xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(r),!0).forEach(function(n){p8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p8(e,t,r){return(t=JDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JDe(e){var t=ZDe(e,"string");return typeof t=="symbol"?t:t+""}function ZDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ePe(e,t){if(e==null)return{};var r,n,a=tPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rPe(e){return e.value}function nPe(e){var{contextPayload:t}=e,r=ePe(e,YDe),n=Lne(t,e.payloadUniqBy,rPe),a=A1(A1({},r),{},{payload:n});return _.isValidElement(e.content)?_.cloneElement(e.content,a):typeof e.content=="function"?_.createElement(e.content,a):_.createElement(YR,a)}function aPe(e,t,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),A1(A1({},u),d)}function sPe(e){var t=$a();return _.useEffect(()=>{t(WDe(e))},[t,e]),null}function iPe(e){var t=$a();return _.useEffect(()=>(t(Wz(e)),()=>{t(Wz({width:0,height:0}))}),[t,e]),null}function oPe(e){var t=AOe(),r=k6e(),n=KDe(),{width:a,height:s,wrapperStyle:i,portal:l}=e,[c,u]=zne([t]),d=f8(),f=h8(),h=d-(n.left||0)-(n.right||0),m=Z1.getWidthOrHeight(e.layout,s,a,h),g=l?i:A1(A1({position:"absolute",width:(m==null?void 0:m.width)||a||"auto",height:(m==null?void 0:m.height)||s||"auto"},aPe(i,e,n,d,f,c)),i),x=l??r;if(x==null)return null;var v=_.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},_.createElement(sPe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(iPe,{width:c.width,height:c.height}),_.createElement(nPe,RF({},e,m,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return $R.createPortal(v,x)}class Z1 extends _.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&dr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return _.createElement(oPe,this.props)}}p8(Z1,"displayName","Legend");p8(Z1,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function LF(){return LF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LF.apply(null,arguments)}function Yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(r),!0).forEach(function(n){lPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lPe(e,t,r){return(t=cPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cPe(e){var t=uPe(e,"string");return typeof t=="symbol"?t:t+""}function uPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dPe(e){return Array.isArray(e)&&sf(e[0])&&sf(e[1])?e.join(" ~ "):e}var APe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(s&&s.length){var k={padding:0,margin:0},F=(l?Z4(s,l):s).map((E,S)=>{if(E.type==="none")return null;var T=E.formatter||i||dPe,{value:L,name:R}=E,j=L,P=R;if(T){var M=T(L,R,E,S,s);if(Array.isArray(M))[j,P]=M;else if(M!=null)j=M;else return null}var Z=gT({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:Z},sf(P)?_.createElement("span",{className:"recharts-tooltip-item-name"},P):null,sf(P)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},j),_.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:k},F)}return null},g=gT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=gT({margin:0},a),v=!Ts(d),y=v?d:"",w=vn("recharts-default-tooltip",c),N=vn("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var B=h?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",LF({className:w,style:g},B),_.createElement("p",{className:N,style:x},_.isValidElement(y)?y:"".concat(y)),m())},sy="recharts-tooltip-wrapper",fPe={visibility:"hidden"};function hPe(e){var{coordinate:t,translateX:r,translateY:n}=e;return vn(sy,{["".concat(sy,"-right")]:dr(r)&&t&&dr(t.x)&&r>=t.x,["".concat(sy,"-left")]:dr(r)&&t&&dr(t.x)&&r<t.x,["".concat(sy,"-bottom")]:dr(n)&&t&&dr(t.y)&&n>=t.y,["".concat(sy,"-top")]:dr(n)&&t&&dr(t.y)&&n<t.y})}function Jz(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&dr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var m=d,g=h;return m<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,v=h+u;return x>v?Math.max(d,h):Math.max(f,h)}function mPe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function pPe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=Jz({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=Jz({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=mPe({translateX:d,translateY:f,useTranslate3d:l})):u=fPe,{cssProperties:u,cssClasses:hPe({translateX:d,translateY:f,coordinate:r})}}function Zz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zz(Object(r),!0).forEach(function(n){MF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MF(e,t,r){return(t=gPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gPe(e){var t=xPe(e,"string");return typeof t=="symbol"?t:t+""}function xPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vPe extends _.PureComponent{constructor(){super(...arguments),MF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),MF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:g,lastBoundingBox:x,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:N}=pPe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),B=y?{}:nN(nN({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=nN(nN({},B),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:v},s)}}var bPe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),qg={isSsr:bPe()},kae=()=>or(e=>e.rootProps.accessibilityLayer);function Yc(e){return Number.isFinite(e)}function f1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UF.apply(null,arguments)}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){yPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yPe(e,t,r){return(t=wPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wPe(e){var t=EPe(e,"string");return typeof t=="symbol"?t:t+""}function EPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r$={curveBasisClosed:K6e,curveBasisOpen:q6e,curveBasis:G6e,curveBumpX:I6e,curveBumpY:F6e,curveLinearClosed:W6e,curveLinear:X4,curveMonotoneX:X6e,curveMonotoneY:Y6e,curveNatural:J6e,curveStep:Z6e,curveStepAfter:tFe,curveStepBefore:eFe},aN=e=>Yc(e.x)&&Yc(e.y),iy=e=>e.x,oy=e=>e.y,CPe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(rE(e));return(r==="curveMonotone"||r==="curveBump")&&t?r$["".concat(r).concat(t==="vertical"?"Y":"X")]:r$[r]||X4},NPe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=CPe(t,a),l=s?r.filter(aN):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>aN(f)):n,d=l.map((f,h)=>t$(t$({},f),{},{base:u[h]}));return a==="vertical"?c=JC().y(oy).x1(iy).x0(f=>f.base.x):c=JC().x(iy).y1(oy).y0(f=>f.base.y),c.defined(aN).curve(i),c(d)}return a==="vertical"&&dr(n)?c=JC().y(oy).x1(iy).x0(n):dr(n)?c=JC().x(iy).y1(oy).y0(n):c=yne().x(iy).y(oy),c.defined(aN).curve(i),c(l)},jae=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?NPe(e):n;return _.createElement("path",UF({},ll(e),VR(e),{className:vn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},_Pe=["x","y","top","left","width","height","className"];function QF(){return QF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QF.apply(null,arguments)}function n$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SPe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n$(Object(r),!0).forEach(function(n){kPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kPe(e,t,r){return(t=jPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jPe(e){var t=BPe(e,"string");return typeof t=="symbol"?t:t+""}function BPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TPe(e,t){if(e==null)return{};var r,n,a=IPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function IPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var FPe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),OPe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=e,c=TPe(e,_Pe),u=SPe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!dr(t)||!dr(r)||!dr(s)||!dr(i)||!dr(n)||!dr(a)?null:_.createElement("path",QF({},Xn(u,!0),{className:vn("recharts-cross",l),d:FPe(t,r,s,i,n,a)}))};function DPe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function a$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PPe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a$(Object(r),!0).forEach(function(n){RPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RPe(e,t,r){return(t=LPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LPe(e){var t=MPe(e,"string");return typeof t=="symbol"?t:t+""}function MPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yu(e,t){var r=PPe({},e),n=t,a=Object.keys(t),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}var xT={},vT={},bT={},s$;function UPe(){return s$||(s$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(bT)),bT}var i$;function QPe(){return i$||(i$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UPe(),r=Dne(),n=t8(),a=r8(),s=ZR();function i(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,g,x){const v=x(u,d,f,h,m,g);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),g=n.getTag(d);if(m===a.argumentsTag&&(m=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),m!==g)return!1;switch(m){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),v=f.get(d);if(x!=null&&v!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!l(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let N=0;N<y.length;N++){const B=y[N],k=w.findIndex(F=>l(B,F,void 0,u,d,f,h));if(k===-1)return!1;w.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],N=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==N.length)return!1;for(let B=0;B<w.length;B++){const k=w[B],F=u[k];if(!Object.hasOwn(d,k))return!1;const E=d[k];if(!l(F,E,k,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(vT)),vT}var yT={},o$;function HPe(){return o$||(o$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(yT)),yT}var l$;function VPe(){return l$||(l$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QPe(),r=HPe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(xT)),xT}var wT,c$;function zPe(){return c$||(c$=1,wT=VPe().isEqual),wT}var $Pe=zPe();const GPe=kl($Pe);var W_=1e-4,Bae=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Tae=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),u$=(e,t)=>r=>{var n=Bae(e,t);return Tae(n,r)},KPe=(e,t)=>r=>{var n=Bae(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Tae(a,r)},d$=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=u$(t,r),d=u$(n,a),f=KPe(t,r),h=g=>g>1?1:g<0?0:g,m=g=>{for(var x=g>1?1:g,v=x,y=0;y<8;++y){var w=u(v)-x,N=f(v);if(Math.abs(w-x)<W_||N<W_)return d(v);v=h(v-w/N)}return d(v)};return m.isStepper=!1,m},qPe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<W_&&Math.abs(f)<W_?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Iae=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d$(e);case"spring":return qPe();default:if(e.split("(")[0]==="cubic-bezier")return d$(e)}return typeof e=="function"?e:null};function A$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A$(Object(r),!0).forEach(function(n){WPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WPe(e,t,r){return(t=XPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XPe(e){var t=YPe(e,"string");return typeof t=="symbol"?t:t+""}function YPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JPe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),ZPe=(e,t,r)=>e.map(n=>"".concat(JPe(n)," ").concat(t,"ms ").concat(r)).join(","),eRe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),c2=(e,t)=>Object.keys(t).reduce((r,n)=>f$(f$({},r),{},{[n]:e(n,t[n])}),{});function h$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h$(Object(r),!0).forEach(function(n){tRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tRe(e,t,r){return(t=rRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rRe(e){var t=nRe(e,"string");return typeof t=="symbol"?t:t+""}function nRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X_=(e,t,r)=>e+(t-e)*r,HF=e=>{var{from:t,to:r}=e;return t!==r},Fae=(e,t,r)=>{var n=c2((a,s)=>{if(HF(s)){var[i,l]=e(s.from,s.to,s.velocity);return bo(bo({},s),{},{from:i,velocity:l})}return s},t);return r<1?c2((a,s)=>HF(s)?bo(bo({},s),{},{velocity:X_(s.velocity,n[a].velocity,r),from:X_(s.from,n[a].from,r)}):s,t):Fae(e,n,r-1)};function aRe(e,t,r,n,a,s){var i,l=n.reduce((h,m)=>bo(bo({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>c2((h,m)=>m.from,l),u=()=>!Object.values(l).filter(HF).length,d=null,f=h=>{i||(i=h);var m=h-i,g=m/r.dt;l=Fae(r,l,g),a(bo(bo(bo({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function sRe(e,t,r,n,a,s,i){var l=null,c=a.reduce((f,h)=>bo(bo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=c2((x,v)=>X_(...v,r(h)),c);if(s(bo(bo(bo({},e),t),m)),h<1)l=i.setTimeout(d);else{var g=c2((x,v)=>X_(...v,r(1)),c);s(bo(bo(bo({},e),t),g))}};return()=>(l=i.setTimeout(d),()=>{l()})}const Oae=(e,t,r,n,a,s)=>{var i=eRe(e,t);return r.isStepper===!0?aRe(e,t,r,i,a,s):sRe(e,t,r,n,i,a,s)};function iRe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class oRe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function lRe(){return iRe(new oRe)}var cRe=_.createContext(lRe);function Dae(e,t){var r=_.useContext(cRe);return _.useMemo(()=>t??r(e),[e,t,r])}var uRe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function VF(){return VF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VF.apply(null,arguments)}function dRe(e,t){if(e==null)return{};var r,n,a=ARe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ARe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function m$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m$(Object(r),!0).forEach(function(n){Up(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Up(e,t,r){return(t=fRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fRe(e){var t=hRe(e,"string");return typeof t=="symbol"?t:t+""}function hRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class g8 extends _.PureComponent{constructor(t,r){super(t,r),Up(this,"mounted",!1),Up(this,"manager",void 0),Up(this,"stopJSAnimation",null),Up(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:i});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(GPe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?l:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(j0(j0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c}=t,u=Oae(r,n,Iae(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,l])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=ZPe(Object.keys(d),n,i);this.manager.start([l,r,j0(j0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:g}=t,x=dRe(t,uRe),v=_.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||v===0||a<=0)return r;var w=N=>{var{style:B={},className:k}=N.props,F=_.cloneElement(N,j0(j0({},x),{},{style:j0(j0({},B),y),className:k}));return F};return v===1?w(_.Children.only(r)):_.createElement("div",null,_.Children.map(r,N=>w(N)))}}Up(g8,"displayName","Animate");Up(g8,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Y_(e){var t,r=Dae((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return _.createElement(g8,VF({},e,{animationManager:r}))}function J_(){return J_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J_.apply(null,arguments)}var p$=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(e,",").concat(t+i*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*m,`
            L `).concat(e+r,",").concat(t+n-i*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},mRe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pae=e=>{var t=Yu(e,mRe),r=_.useRef(null),[n,a]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var v=vn("recharts-rectangle",d);return x?_.createElement(Y_,{canBegin:n>0,from:{width:l,height:c,x:s,y:i},to:{width:l,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:N,x:B,y:k}=y;return _.createElement(Y_,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:g,easing:f},_.createElement("path",J_({},Xn(t,!0),{className:v,d:p$(B,k,w,N,u),ref:r})))}):_.createElement("path",J_({},Xn(t,!0),{className:v,d:p$(s,i,l,c,u)}))};function Rae(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=ea(t,r,n,a),l=ea(t,r,n,s);return{points:[i,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function zF(){return zF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zF.apply(null,arguments)}var pRe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},sN=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=e,u=l*(i?1:-1)+n,d=Math.asin(l/u)/q_,f=c?a:a+s*d,h=ea(t,r,u,f),m=ea(t,r,n,f),g=c?a-s*d:a,x=ea(t,r,u*Math.cos(d*q_),g);return{center:h,circleTangency:m,lineTangency:x,theta:d}},Lae=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,l=pRe(s,i),c=s+l,u=ea(t,r,a,s),d=ea(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ea(t,r,n,s),m=ea(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},gRe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=to(u-c),{circleTangency:f,lineTangency:h,theta:m}=sN({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:v}=sN({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),y=l?Math.abs(c-u):Math.abs(c-u)-m-v;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Lae({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:B,theta:k}=sN({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:F,lineTangency:E,theta:S}=sN({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),T=l?Math.abs(c-u):Math.abs(c-u)-k-S;if(T<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},xRe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Mae=e=>{var t=Yu(e,xRe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=vn("recharts-sector",f),m=s-a,g=Sl(i,m,0,!0),x;return g>0&&Math.abs(u-d)<360?x=gRe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=Lae({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),_.createElement("path",zF({},Xn(t,!0),{className:h,d:x}))};function vRe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=ea(l,c,u,f),m=ea(l,c,d,f);n=h.x,a=h.y,s=m.x,i=m.y}else return Rae(t);return[{x:n,y:a},{x:s,y:i}]}var ET={},CT={},NT={},g$;function bRe(){return g$||(g$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qne();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(NT)),NT}var x$;function yRe(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bRe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(CT)),CT}var v$;function wRe(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hne(),r=yRe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}e.range=n}(ET)),ET}var _T,b$;function ERe(){return b$||(b$=1,_T=wRe().range),_T}var CRe=ERe();const Uae=kl(CRe);function lm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function NRe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x8(e){let t,r,n;e.length!==2?(t=lm,r=(l,c)=>lm(e(l),c),n=(l,c)=>e(l)-c):(t=e===lm||e===NRe?e:_Re,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:i,right:s}}function _Re(){return 0}function Qae(e){return e===null?NaN:+e}function*SRe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const kRe=x8(lm),sE=kRe.right;x8(Qae).center;class y$ extends Map{constructor(t,r=TRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(w$(this,t))}has(t){return super.has(w$(this,t))}set(t,r){return super.set(jRe(this,t),r)}delete(t){return super.delete(BRe(this,t))}}function w$({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function jRe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function BRe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function TRe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function IRe(e=lm){if(e===lm)return Hae;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Hae(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const FRe=Math.sqrt(50),ORe=Math.sqrt(10),DRe=Math.sqrt(2);function Z_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=FRe?10:s>=ORe?5:s>=DRe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Z_(e,t,r*2):[l,c,u]}function $F(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?Z_(t,e,r):Z_(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function GF(e,t,r){return t=+t,e=+e,r=+r,Z_(e,t,r)[2]}function KF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?GF(t,e,r):GF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function E$(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function C$(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Vae(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Hae:IRe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));Vae(e,t,m,g,a)}const s=e[t];let i=r,l=n;for(ly(e,r,t),a(e[n],s)>0&&ly(e,r,n);i<l;){for(ly(e,i,l),++i,--l;a(e[i],s)<0;)++i;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?ly(e,r,l):(++l,ly(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function ly(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function PRe(e,t,r){if(e=Float64Array.from(SRe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return C$(e);if(t>=1)return E$(e);var n,a=(n-1)*t,s=Math.floor(a),i=E$(Vae(e,s).subarray(0,s+1)),l=C$(e.subarray(s+1));return i+(l-i)*(a-s)}}function RRe(e,t,r=Qae){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return i+(l-i)*(a-s)}}function LRe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Ju(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const qF=Symbol("implicit");function ck(){var e=new y$,t=[],r=[],n=qF;function a(s){let i=e.get(s);if(i===void 0){if(n!==qF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new y$;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return ck(t,r).unknown(n)},Ju.apply(a,arguments),a}function v8(){var e=ck().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,x=m?n:a;s=(x-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),l&&(g=Math.round(g),i=Math.round(i));var v=LRe(h).map(function(y){return g+s*y});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return v8(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ju.apply(f(),arguments)}function zae(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zae(t())},e}function MRe(){return zae(v8.apply(null,arguments).paddingInner(1))}function b8(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function $ae(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function iE(){}var u2=.7,eS=1/u2,Rv="\\s*([+-]?\\d+)\\s*",d2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",URe=/^#([0-9a-f]{3,8})$/,QRe=new RegExp(`^rgb\\(${Rv},${Rv},${Rv}\\)$`),HRe=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),VRe=new RegExp(`^rgba\\(${Rv},${Rv},${Rv},${d2}\\)$`),zRe=new RegExp(`^rgba\\(${tf},${tf},${tf},${d2}\\)$`),$Re=new RegExp(`^hsl\\(${d2},${tf},${tf}\\)$`),GRe=new RegExp(`^hsla\\(${d2},${tf},${tf},${d2}\\)$`),N$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};b8(iE,Ng,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_$,formatHex:_$,formatHex8:KRe,formatHsl:qRe,formatRgb:S$,toString:S$});function _$(){return this.rgb().formatHex()}function KRe(){return this.rgb().formatHex8()}function qRe(){return Gae(this).formatHsl()}function S$(){return this.rgb().formatRgb()}function Ng(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=URe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?k$(t):r===3?new tc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?iN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?iN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=QRe.exec(e))?new tc(t[1],t[2],t[3],1):(t=HRe.exec(e))?new tc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=VRe.exec(e))?iN(t[1],t[2],t[3],t[4]):(t=zRe.exec(e))?iN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$Re.exec(e))?T$(t[1],t[2]/100,t[3]/100,1):(t=GRe.exec(e))?T$(t[1],t[2]/100,t[3]/100,t[4]):N$.hasOwnProperty(e)?k$(N$[e]):e==="transparent"?new tc(NaN,NaN,NaN,0):null}function k$(e){return new tc(e>>16&255,e>>8&255,e&255,1)}function iN(e,t,r,n){return n<=0&&(e=t=r=NaN),new tc(e,t,r,n)}function WRe(e){return e instanceof iE||(e=Ng(e)),e?(e=e.rgb(),new tc(e.r,e.g,e.b,e.opacity)):new tc}function WF(e,t,r,n){return arguments.length===1?WRe(e):new tc(e,t,r,n??1)}function tc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}b8(tc,WF,$ae(iE,{brighter(e){return e=e==null?eS:Math.pow(eS,e),new tc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?u2:Math.pow(u2,e),new tc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tc(rg(this.r),rg(this.g),rg(this.b),tS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j$,formatHex:j$,formatHex8:XRe,formatRgb:B$,toString:B$}));function j$(){return`#${Qp(this.r)}${Qp(this.g)}${Qp(this.b)}`}function XRe(){return`#${Qp(this.r)}${Qp(this.g)}${Qp(this.b)}${Qp((isNaN(this.opacity)?1:this.opacity)*255)}`}function B$(){const e=tS(this.opacity);return`${e===1?"rgb(":"rgba("}${rg(this.r)}, ${rg(this.g)}, ${rg(this.b)}${e===1?")":`, ${e})`}`}function tS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qp(e){return e=rg(e),(e<16?"0":"")+e.toString(16)}function T$(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new jd(e,t,r,n)}function Gae(e){if(e instanceof jd)return new jd(e.h,e.s,e.l,e.opacity);if(e instanceof iE||(e=Ng(e)),!e)return new jd;if(e instanceof jd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(t===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-t)/l+2:i=(t-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new jd(i,l,c,e.opacity)}function YRe(e,t,r,n){return arguments.length===1?Gae(e):new jd(e,t,r,n??1)}function jd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}b8(jd,YRe,$ae(iE,{brighter(e){return e=e==null?eS:Math.pow(eS,e),new jd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?u2:Math.pow(u2,e),new jd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new tc(ST(e>=240?e-240:e+120,a,n),ST(e,a,n),ST(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new jd(I$(this.h),oN(this.s),oN(this.l),tS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tS(this.opacity);return`${e===1?"hsl(":"hsla("}${I$(this.h)}, ${oN(this.s)*100}%, ${oN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function I$(e){return e=(e||0)%360,e<0?e+360:e}function oN(e){return Math.max(0,Math.min(1,e||0))}function ST(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const y8=e=>()=>e;function JRe(e,t){return function(r){return e+r*t}}function ZRe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function e8e(e){return(e=+e)==1?Kae:function(t,r){return r-t?ZRe(t,r,e):y8(isNaN(t)?r:t)}}function Kae(e,t){var r=t-e;return r?JRe(e,r):y8(isNaN(e)?t:e)}const rS=function e(t){var r=e8e(t);function n(a,s){var i=r((a=WF(a)).r,(s=WF(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Kae(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function t8e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function r8e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function n8e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=eb(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function a8e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Sd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function s8e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=eb(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var XF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kT=new RegExp(XF.source,"g");function i8e(e){return function(){return e}}function o8e(e){return function(t){return e(t)+""}}function qae(e,t){var r=XF.lastIndex=kT.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(e=e+"",t=t+"";(n=XF.exec(e))&&(a=kT.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:Sd(n,a)})),r=kT.lastIndex;return r<t.length&&(s=t.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?o8e(c[0].x):i8e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function eb(e,t){var r=typeof t,n;return t==null||r==="boolean"?y8(t):(r==="number"?Sd:r==="string"?(n=Ng(t))?(t=n,rS):qae:t instanceof Ng?rS:t instanceof Date?a8e:r8e(t)?t8e:Array.isArray(t)?n8e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?s8e:Sd)(e,t)}function w8(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var F$=180/Math.PI,YF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wae(e,t,r,n,a,s){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,c/=l),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*F$,skewX:Math.atan(c)*F$,scaleX:i,scaleY:l}}var lN;function l8e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?YF:Wae(t.a,t.b,t.c,t.d,t.e,t.f)}function c8e(e){return e==null||(lN||(lN=document.createElementNS("http://www.w3.org/2000/svg","g")),lN.setAttribute("transform",e),!(e=lN.transform.baseVal.consolidate()))?YF:(e=e.matrix,Wae(e.a,e.b,e.c,e.d,e.e,e.f))}function Xae(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push("translate(",null,t,null,r);g.push({i:x-4,x:Sd(u,f)},{i:x-2,x:Sd(d,h)})}else(f||h)&&m.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Sd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function l(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Sd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,m,g){if(u!==f||d!==h){var x=m.push(a(m)+"scale(",null,",",null,")");g.push({i:x-4,x:Sd(u,f)},{i:x-2,x:Sd(d,h)})}else(f!==1||h!==1)&&m.push(a(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var g=-1,x=h.length,v;++g<x;)f[(v=h[g]).i]=v.x(m);return f.join("")}}}var u8e=Xae(l8e,"px, ","px)","deg)"),d8e=Xae(c8e,", ",")",")"),A8e=1e-12;function O$(e){return((e=Math.exp(e))+1/e)/2}function f8e(e){return((e=Math.exp(e))-1/e)/2}function h8e(e){return((e=Math.exp(2*e))-1)/(e+1)}const m8e=function e(t,r,n){function a(s,i){var l=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],m=d-l,g=f-c,x=m*m+g*g,v,y;if(x<A8e)y=Math.log(h/u)/t,v=function(E){return[l+E*m,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),N=(h*h-u*u+n*x)/(2*u*r*w),B=(h*h-u*u-n*x)/(2*h*r*w),k=Math.log(Math.sqrt(N*N+1)-N),F=Math.log(Math.sqrt(B*B+1)-B);y=(F-k)/t,v=function(E){var S=E*y,T=O$(k),L=u/(r*w)*(T*h8e(t*S+k)-f8e(k));return[l+L*m,c+L*g,u*T/O$(t*S+k)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return a.rho=function(s){var i=Math.max(.001,+s),l=i*i,c=l*l;return e(i,l,c)},a}(Math.SQRT2,2,4);function p8e(e,t){t===void 0&&(t=e,e=eb);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function g8e(e){return function(){return e}}function nS(e){return+e}var D$=[0,1];function yl(e){return e}function JF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:g8e(isNaN(t)?NaN:.5)}function x8e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function v8e(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=JF(a,n),s=r(i,s)):(n=JF(n,a),s=r(s,i)),function(l){return s(n(l))}}function b8e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=JF(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(l){var c=sE(e,l,1,n)-1;return s[c](a[c](l))}}function oE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uk(){var e=D$,t=D$,r=eb,n,a,s,i=yl,l,c,u;function d(){var h=Math.min(e.length,t.length);return i!==yl&&(i=x8e(e[0],e[h-1])),l=h>2?b8e:v8e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=l(t,e.map(n),Sd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,nS),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=w8,d()},f.clamp=function(h){return arguments.length?(i=h?!0:yl,d()):i!==yl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return n=h,a=m,d()}}function E8(){return uk()(yl,yl)}function y8e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function aS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function h1(e){return e=aS(Math.abs(e)),e?e[1]:NaN}function w8e(e,t){return function(r,n){for(var a=r.length,s=[],i=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[i=(i+1)%e.length];return s.reverse().join(t)}}function E8e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var C8e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A2(e){if(!(t=C8e.exec(e)))throw new Error("invalid format: "+e);var t;return new C8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}A2.prototype=C8.prototype;function C8(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}C8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function N8e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Yae;function _8e(e,t){var r=aS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(Yae=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+aS(e,Math.max(0,t+s-1))[0]}function P$(e,t){var r=aS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const R$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:y8e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>P$(e*100,t),r:P$,s:_8e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function L$(e){return e}var M$=Array.prototype.map,U$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function S8e(e){var t=e.grouping===void 0||e.thousands===void 0?L$:w8e(M$.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?L$:E8e(M$.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=A2(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,v=f.zero,y=f.width,w=f.comma,N=f.precision,B=f.trim,k=f.type;k==="n"?(w=!0,k="g"):R$[k]||(N===void 0&&(N=12),B=!0,k="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var F=x==="$"?r:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=x==="$"?n:/[%p]/.test(k)?i:"",S=R$[k],T=/[defgprs%]/.test(k);N=N===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function L(R){var j=F,P=E,M,Z,V;if(k==="c")P=S(R)+P,R="";else{R=+R;var W=R<0||1/R<0;if(R=isNaN(R)?c:S(Math.abs(R),N),B&&(R=N8e(R)),W&&+R==0&&g!=="+"&&(W=!1),j=(W?g==="("?g:l:g==="-"||g==="("?"":g)+j,P=(k==="s"?U$[8+Yae/3]:"")+P+(W&&g==="("?")":""),T){for(M=-1,Z=R.length;++M<Z;)if(V=R.charCodeAt(M),48>V||V>57){P=(V===46?a+R.slice(M+1):R.slice(M))+P,R=R.slice(0,M);break}}}w&&!v&&(R=t(R,1/0));var G=j.length+R.length+P.length,K=G<y?new Array(y-G+1).join(h):"";switch(w&&v&&(R=t(K+R,K.length?y-P.length:1/0),K=""),m){case"<":R=j+R+P+K;break;case"=":R=j+K+R+P;break;case"^":R=K.slice(0,G=K.length>>1)+j+R+P+K.slice(G);break;default:R=K+j+R+P;break}return s(R)}return L.toString=function(){return f+""},L}function d(f,h){var m=u((f=A2(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(h1(h)/3)))*3,x=Math.pow(10,-g),v=U$[8+g/3];return function(y){return m(x*y)+v}}return{format:u,formatPrefix:d}}var cN,N8,Jae;k8e({thousands:",",grouping:[3],currency:["$",""]});function k8e(e){return cN=S8e(e),N8=cN.format,Jae=cN.formatPrefix,cN}function j8e(e){return Math.max(0,-h1(Math.abs(e)))}function B8e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(h1(t)/3)))*3-h1(Math.abs(e)))}function T8e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,h1(t)-h1(e))+1}function Zae(e,t,r,n){var a=KF(e,t,r),s;switch(n=A2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=B8e(a,i))&&(n.precision=s),Jae(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=T8e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=j8e(a))&&(n.precision=s-(n.type==="%")*2);break}}return N8(n)}function Gm(e){var t=e.domain;return e.ticks=function(r){var n=t();return $F(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Zae(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=GF(i,l,r),u===c)return n[a]=i,n[s]=l,t(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function ese(){var e=E8();return e.copy=function(){return oE(e,ese())},Ju.apply(e,arguments),Gm(e)}function tse(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,nS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return tse(e).unknown(t)},e=arguments.length?Array.from(e,nS):[0,1],Gm(r)}function rse(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function Q$(e){return Math.log(e)}function H$(e){return Math.exp(e)}function I8e(e){return-Math.log(-e)}function F8e(e){return-Math.exp(-e)}function O8e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function D8e(e){return e===10?O8e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function P8e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function V$(e){return(t,r)=>-e(-t,r)}function _8(e){const t=e(Q$,H$),r=t.domain;let n=10,a,s;function i(){return a=P8e(n),s=D8e(n),r()[0]<0?(a=V$(a),s=V$(s),e(I8e,F8e)):e(Q$,H$),t}return t.base=function(l){return arguments.length?(n=+l,i()):n},t.domain=function(l){return arguments.length?(r(l),i()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,x;const v=l==null?10:+l;let y=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<v&&(y=$F(u,d,v))}else y=$F(h,m,Math.min(m-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=A2(c)).precision==null&&(c.trim=!0),c=N8(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(rse(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function nse(){const e=_8(uk()).domain([1,10]);return e.copy=()=>oE(e,nse()).base(e.base()),Ju.apply(e,arguments),e}function z$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function S8(e){var t=1,r=e(z$(t),$$(t));return r.constant=function(n){return arguments.length?e(z$(t=+n),$$(t)):t},Gm(r)}function ase(){var e=S8(uk());return e.copy=function(){return oE(e,ase()).constant(e.constant())},Ju.apply(e,arguments)}function G$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function R8e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function L8e(e){return e<0?-e*e:e*e}function k8(e){var t=e(yl,yl),r=1;function n(){return r===1?e(yl,yl):r===.5?e(R8e,L8e):e(G$(r),G$(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Gm(t)}function j8(){var e=k8(uk());return e.copy=function(){return oE(e,j8()).exponent(e.exponent())},Ju.apply(e,arguments),e}function M8e(){return j8.apply(null,arguments).exponent(.5)}function K$(e){return Math.sign(e)*e*e}function U8e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function sse(){var e=E8(),t=[0,1],r=!1,n;function a(s){var i=U8e(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(K$(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,nS)).map(K$)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return sse(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ju.apply(a,arguments),Gm(a)}function ise(){var e=[],t=[],r=[],n;function a(){var i=0,l=Math.max(1,t.length);for(r=new Array(l-1);++i<l;)r[i-1]=RRe(e,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:t[sE(r,i)]}return s.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(lm),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return ise().domain(e).range(t).unknown(n)},Ju.apply(s,arguments)}function ose(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[sE(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return ose().domain([e,t]).range(a).unknown(s)},Ju.apply(Gm(i),arguments)}function lse(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[sE(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return lse().domain(e).range(t).unknown(r)},Ju.apply(a,arguments)}const jT=new Date,BT=new Date;function Di(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<i);return c},a.filter=s=>Di(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!s(i););else for(;--l>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(jT.setTime(+s),BT.setTime(+i),e(jT),e(BT),Math.floor(r(jT,BT))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const sS=Di(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);sS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Di(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):sS);sS.range;const nh=1e3,Uu=nh*60,ah=Uu*60,Nh=ah*24,B8=Nh*7,q$=Nh*30,TT=Nh*365,Hp=Di(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*nh)},(e,t)=>(t-e)/nh,e=>e.getUTCSeconds());Hp.range;const T8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nh)},(e,t)=>{e.setTime(+e+t*Uu)},(e,t)=>(t-e)/Uu,e=>e.getMinutes());T8.range;const I8=Di(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Uu)},(e,t)=>(t-e)/Uu,e=>e.getUTCMinutes());I8.range;const F8=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nh-e.getMinutes()*Uu)},(e,t)=>{e.setTime(+e+t*ah)},(e,t)=>(t-e)/ah,e=>e.getHours());F8.range;const O8=Di(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ah)},(e,t)=>(t-e)/ah,e=>e.getUTCHours());O8.range;const lE=Di(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Uu)/Nh,e=>e.getDate()-1);lE.range;const dk=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nh,e=>e.getUTCDate()-1);dk.range;const cse=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nh,e=>Math.floor(e/Nh));cse.range;function Wg(e){return Di(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Uu)/B8)}const Ak=Wg(0),iS=Wg(1),Q8e=Wg(2),H8e=Wg(3),m1=Wg(4),V8e=Wg(5),z8e=Wg(6);Ak.range;iS.range;Q8e.range;H8e.range;m1.range;V8e.range;z8e.range;function Xg(e){return Di(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/B8)}const fk=Xg(0),oS=Xg(1),$8e=Xg(2),G8e=Xg(3),p1=Xg(4),K8e=Xg(5),q8e=Xg(6);fk.range;oS.range;$8e.range;G8e.range;p1.range;K8e.range;q8e.range;const D8=Di(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());D8.range;const P8=Di(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());P8.range;const _h=Di(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_h.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});_h.range;const Sh=Di(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Sh.range;function use(e,t,r,n,a,s){const i=[[Hp,1,nh],[Hp,5,5*nh],[Hp,15,15*nh],[Hp,30,30*nh],[s,1,Uu],[s,5,5*Uu],[s,15,15*Uu],[s,30,30*Uu],[a,1,ah],[a,3,3*ah],[a,6,6*ah],[a,12,12*ah],[n,1,Nh],[n,2,2*Nh],[r,1,B8],[t,1,q$],[t,3,3*q$],[e,1,TT]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=x8(([,,v])=>v).right(i,h);if(m===i.length)return e.every(KF(u/TT,d/TT,f));if(m===0)return sS.every(Math.max(KF(u,d,f),1));const[g,x]=i[h/i[m-1][2]<i[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[W8e,X8e]=use(Sh,P8,fk,cse,O8,I8),[Y8e,J8e]=use(_h,D8,Ak,lE,F8,T8);function IT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function FT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Z8e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,u=uy(a),d=dy(a),f=uy(s),h=dy(s),m=uy(i),g=dy(i),x=uy(l),v=dy(l),y=uy(c),w=dy(c),N={a:W,A:G,b:K,B:ee,c:null,d:eG,e:eG,f:wLe,g:ILe,G:OLe,H:vLe,I:bLe,j:yLe,L:dse,m:ELe,M:CLe,p:X,q:D,Q:nG,s:aG,S:NLe,u:_Le,U:SLe,V:kLe,w:jLe,W:BLe,x:null,X:null,y:TLe,Y:FLe,Z:DLe,"%":rG},B={a:Q,A:z,b:J,B:te,c:null,d:tG,e:tG,f:MLe,g:WLe,G:YLe,H:PLe,I:RLe,j:LLe,L:fse,m:ULe,M:QLe,p:se,q:ie,Q:nG,s:aG,S:HLe,u:VLe,U:zLe,V:$Le,w:GLe,W:KLe,x:null,X:null,y:qLe,Y:XLe,Z:JLe,"%":rG},k={a:L,A:R,b:j,B:P,c:M,d:J$,e:J$,f:mLe,g:Y$,G:X$,H:Z$,I:Z$,j:dLe,L:hLe,m:uLe,M:ALe,p:T,q:cLe,Q:gLe,s:xLe,S:fLe,u:aLe,U:sLe,V:iLe,w:nLe,W:oLe,x:Z,X:V,y:Y$,Y:X$,Z:lLe,"%":pLe};N.x=F(r,N),N.X=F(n,N),N.c=F(t,N),B.x=F(r,B),B.X=F(n,B),B.c=F(t,B);function F(le,ue){return function(je){var ae=[],Ne=-1,ke=0,_e=le.length,he,Be,Le;for(je instanceof Date||(je=new Date(+je));++Ne<_e;)le.charCodeAt(Ne)===37&&(ae.push(le.slice(ke,Ne)),(Be=W$[he=le.charAt(++Ne)])!=null?he=le.charAt(++Ne):Be=he==="e"?" ":"0",(Le=ue[he])&&(he=Le(je,Be)),ae.push(he),ke=Ne+1);return ae.push(le.slice(ke,Ne)),ae.join("")}}function E(le,ue){return function(je){var ae=cy(1900,void 0,1),Ne=S(ae,le,je+="",0),ke,_e;if(Ne!=je.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(ue&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(ke=FT(cy(ae.y,0,1)),_e=ke.getUTCDay(),ke=_e>4||_e===0?oS.ceil(ke):oS(ke),ke=dk.offset(ke,(ae.V-1)*7),ae.y=ke.getUTCFullYear(),ae.m=ke.getUTCMonth(),ae.d=ke.getUTCDate()+(ae.w+6)%7):(ke=IT(cy(ae.y,0,1)),_e=ke.getDay(),ke=_e>4||_e===0?iS.ceil(ke):iS(ke),ke=lE.offset(ke,(ae.V-1)*7),ae.y=ke.getFullYear(),ae.m=ke.getMonth(),ae.d=ke.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),_e="Z"in ae?FT(cy(ae.y,0,1)).getUTCDay():IT(cy(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(_e+5)%7:ae.w+ae.U*7-(_e+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,FT(ae)):IT(ae)}}function S(le,ue,je,ae){for(var Ne=0,ke=ue.length,_e=je.length,he,Be;Ne<ke;){if(ae>=_e)return-1;if(he=ue.charCodeAt(Ne++),he===37){if(he=ue.charAt(Ne++),Be=k[he in W$?ue.charAt(Ne++):he],!Be||(ae=Be(le,je,ae))<0)return-1}else if(he!=je.charCodeAt(ae++))return-1}return ae}function T(le,ue,je){var ae=u.exec(ue.slice(je));return ae?(le.p=d.get(ae[0].toLowerCase()),je+ae[0].length):-1}function L(le,ue,je){var ae=m.exec(ue.slice(je));return ae?(le.w=g.get(ae[0].toLowerCase()),je+ae[0].length):-1}function R(le,ue,je){var ae=f.exec(ue.slice(je));return ae?(le.w=h.get(ae[0].toLowerCase()),je+ae[0].length):-1}function j(le,ue,je){var ae=y.exec(ue.slice(je));return ae?(le.m=w.get(ae[0].toLowerCase()),je+ae[0].length):-1}function P(le,ue,je){var ae=x.exec(ue.slice(je));return ae?(le.m=v.get(ae[0].toLowerCase()),je+ae[0].length):-1}function M(le,ue,je){return S(le,t,ue,je)}function Z(le,ue,je){return S(le,r,ue,je)}function V(le,ue,je){return S(le,n,ue,je)}function W(le){return i[le.getDay()]}function G(le){return s[le.getDay()]}function K(le){return c[le.getMonth()]}function ee(le){return l[le.getMonth()]}function X(le){return a[+(le.getHours()>=12)]}function D(le){return 1+~~(le.getMonth()/3)}function Q(le){return i[le.getUTCDay()]}function z(le){return s[le.getUTCDay()]}function J(le){return c[le.getUTCMonth()]}function te(le){return l[le.getUTCMonth()]}function se(le){return a[+(le.getUTCHours()>=12)]}function ie(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var ue=F(le+="",N);return ue.toString=function(){return le},ue},parse:function(le){var ue=E(le+="",!1);return ue.toString=function(){return le},ue},utcFormat:function(le){var ue=F(le+="",B);return ue.toString=function(){return le},ue},utcParse:function(le){var ue=E(le+="",!0);return ue.toString=function(){return le},ue}}}var W$={"-":"",_:" ",0:"0"},no=/^\s*\d+/,eLe=/^%/,tLe=/[\\^$*+?|[\]().{}]/g;function Jn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function rLe(e){return e.replace(tLe,"\\$&")}function uy(e){return new RegExp("^(?:"+e.map(rLe).join("|")+")","i")}function dy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function nLe(e,t,r){var n=no.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aLe(e,t,r){var n=no.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function sLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function iLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function oLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function X$(e,t,r){var n=no.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Y$(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function lLe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function cLe(e,t,r){var n=no.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function uLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function J$(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function dLe(e,t,r){var n=no.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Z$(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ALe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function fLe(e,t,r){var n=no.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function hLe(e,t,r){var n=no.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function mLe(e,t,r){var n=no.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function pLe(e,t,r){var n=eLe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function gLe(e,t,r){var n=no.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function xLe(e,t,r){var n=no.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function eG(e,t){return Jn(e.getDate(),t,2)}function vLe(e,t){return Jn(e.getHours(),t,2)}function bLe(e,t){return Jn(e.getHours()%12||12,t,2)}function yLe(e,t){return Jn(1+lE.count(_h(e),e),t,3)}function dse(e,t){return Jn(e.getMilliseconds(),t,3)}function wLe(e,t){return dse(e,t)+"000"}function ELe(e,t){return Jn(e.getMonth()+1,t,2)}function CLe(e,t){return Jn(e.getMinutes(),t,2)}function NLe(e,t){return Jn(e.getSeconds(),t,2)}function _Le(e){var t=e.getDay();return t===0?7:t}function SLe(e,t){return Jn(Ak.count(_h(e)-1,e),t,2)}function Ase(e){var t=e.getDay();return t>=4||t===0?m1(e):m1.ceil(e)}function kLe(e,t){return e=Ase(e),Jn(m1.count(_h(e),e)+(_h(e).getDay()===4),t,2)}function jLe(e){return e.getDay()}function BLe(e,t){return Jn(iS.count(_h(e)-1,e),t,2)}function TLe(e,t){return Jn(e.getFullYear()%100,t,2)}function ILe(e,t){return e=Ase(e),Jn(e.getFullYear()%100,t,2)}function FLe(e,t){return Jn(e.getFullYear()%1e4,t,4)}function OLe(e,t){var r=e.getDay();return e=r>=4||r===0?m1(e):m1.ceil(e),Jn(e.getFullYear()%1e4,t,4)}function DLe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jn(t/60|0,"0",2)+Jn(t%60,"0",2)}function tG(e,t){return Jn(e.getUTCDate(),t,2)}function PLe(e,t){return Jn(e.getUTCHours(),t,2)}function RLe(e,t){return Jn(e.getUTCHours()%12||12,t,2)}function LLe(e,t){return Jn(1+dk.count(Sh(e),e),t,3)}function fse(e,t){return Jn(e.getUTCMilliseconds(),t,3)}function MLe(e,t){return fse(e,t)+"000"}function ULe(e,t){return Jn(e.getUTCMonth()+1,t,2)}function QLe(e,t){return Jn(e.getUTCMinutes(),t,2)}function HLe(e,t){return Jn(e.getUTCSeconds(),t,2)}function VLe(e){var t=e.getUTCDay();return t===0?7:t}function zLe(e,t){return Jn(fk.count(Sh(e)-1,e),t,2)}function hse(e){var t=e.getUTCDay();return t>=4||t===0?p1(e):p1.ceil(e)}function $Le(e,t){return e=hse(e),Jn(p1.count(Sh(e),e)+(Sh(e).getUTCDay()===4),t,2)}function GLe(e){return e.getUTCDay()}function KLe(e,t){return Jn(oS.count(Sh(e)-1,e),t,2)}function qLe(e,t){return Jn(e.getUTCFullYear()%100,t,2)}function WLe(e,t){return e=hse(e),Jn(e.getUTCFullYear()%100,t,2)}function XLe(e,t){return Jn(e.getUTCFullYear()%1e4,t,4)}function YLe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?p1(e):p1.ceil(e),Jn(e.getUTCFullYear()%1e4,t,4)}function JLe(){return"+0000"}function rG(){return"%"}function nG(e){return+e}function aG(e){return Math.floor(+e/1e3)}var Ox,mse,pse;ZLe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZLe(e){return Ox=Z8e(e),mse=Ox.format,Ox.parse,pse=Ox.utcFormat,Ox.utcParse,Ox}function eMe(e){return new Date(e)}function tMe(e){return e instanceof Date?+e:+new Date(+e)}function R8(e,t,r,n,a,s,i,l,c,u){var d=E8(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),x=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),w=u("%b %d"),N=u("%B"),B=u("%Y");function k(F){return(c(F)<F?m:l(F)<F?g:i(F)<F?x:s(F)<F?v:n(F)<F?a(F)<F?y:w:r(F)<F?N:B)(F)}return d.invert=function(F){return new Date(f(F))},d.domain=function(F){return arguments.length?h(Array.from(F,tMe)):h().map(eMe)},d.ticks=function(F){var E=h();return e(E[0],E[E.length-1],F??10)},d.tickFormat=function(F,E){return E==null?k:u(E)},d.nice=function(F){var E=h();return(!F||typeof F.range!="function")&&(F=t(E[0],E[E.length-1],F??10)),F?h(rse(E,F)):d},d.copy=function(){return oE(d,R8(e,t,r,n,a,s,i,l,c,u))},d}function rMe(){return Ju.apply(R8(Y8e,J8e,_h,D8,Ak,lE,F8,T8,Hp,mse).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nMe(){return Ju.apply(R8(W8e,X8e,Sh,P8,fk,dk,O8,I8,Hp,pse).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hk(){var e=0,t=1,r,n,a,s,i=yl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,i=f(m,g),u):[i(0),i(1)]}}return u.range=d(eb),u.rangeRound=d(w8),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Km(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function gse(){var e=Gm(hk()(yl));return e.copy=function(){return Km(e,gse())},Hh.apply(e,arguments)}function xse(){var e=_8(hk()).domain([1,10]);return e.copy=function(){return Km(e,xse()).base(e.base())},Hh.apply(e,arguments)}function vse(){var e=S8(hk());return e.copy=function(){return Km(e,vse()).constant(e.constant())},Hh.apply(e,arguments)}function L8(){var e=k8(hk());return e.copy=function(){return Km(e,L8()).exponent(e.exponent())},Hh.apply(e,arguments)}function aMe(){return L8.apply(null,arguments).exponent(.5)}function bse(){var e=[],t=yl;function r(n){if(n!=null&&!isNaN(n=+n))return t((sE(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(lm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>PRe(e,s/n))},r.copy=function(){return bse(t).domain(e)},Hh.apply(r,arguments)}function mk(){var e=0,t=.5,r=1,n=1,a,s,i,l,c,u=yl,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function g(x){return function(v){var y,w,N;return arguments.length?([y,w,N]=v,u=p8e(x,[y,w,N]),m):[u(0),u(.5),u(1)]}}return m.range=g(eb),m.rangeRound=g(w8),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,m}}function yse(){var e=Gm(mk()(yl));return e.copy=function(){return Km(e,yse())},Hh.apply(e,arguments)}function wse(){var e=_8(mk()).domain([.1,1,10]);return e.copy=function(){return Km(e,wse()).base(e.base())},Hh.apply(e,arguments)}function Ese(){var e=S8(mk());return e.copy=function(){return Km(e,Ese()).constant(e.constant())},Hh.apply(e,arguments)}function M8(){var e=k8(mk());return e.copy=function(){return Km(e,M8()).exponent(e.exponent())},Hh.apply(e,arguments)}function sMe(){return M8.apply(null,arguments).exponent(.5)}const zy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:v8,scaleDiverging:yse,scaleDivergingLog:wse,scaleDivergingPow:M8,scaleDivergingSqrt:sMe,scaleDivergingSymlog:Ese,scaleIdentity:tse,scaleImplicit:qF,scaleLinear:ese,scaleLog:nse,scaleOrdinal:ck,scalePoint:MRe,scalePow:j8,scaleQuantile:ise,scaleQuantize:ose,scaleRadial:sse,scaleSequential:gse,scaleSequentialLog:xse,scaleSequentialPow:L8,scaleSequentialQuantile:bse,scaleSequentialSqrt:aMe,scaleSequentialSymlog:vse,scaleSqrt:M8e,scaleSymlog:ase,scaleThreshold:lse,scaleTime:rMe,scaleUtc:nMe,tickFormat:Zae},Symbol.toStringTag,{value:"Module"}));var qm=e=>e.chartData,pk=ut([qm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),U8=(e,t,r,n)=>n?pk(e):qm(e);function g1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Yc(t)&&Yc(r))return!0}return!1}function sG(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function iMe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Yc(r))a=r;else if(typeof r=="function")return;if(Yc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(g1(i))return i}}function oMe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(g1(n))return sG(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,l;if(a==="auto")t!=null&&(i=Math.min(...t));else if(dr(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&$z.test(a)){var c=$z.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(dr(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&Gz.test(s)){var d=Gz.exec(s);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[i,l];if(g1(h))return t==null?h:sG(h,t,r)}}}var tb=1e9,lMe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},H8,Za=!0,Wu="[DecimalError] ",ng=Wu+"Invalid argument: ",Q8=Wu+"Exponent out of range: ",rb=Math.floor,kp=Math.pow,cMe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qc,Xi=1e7,Ma=7,Cse=9007199254740991,lS=rb(Cse/Ma),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ma;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return mh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Sa(mh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return vi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Qc))throw Error(Wu+"NaN");if(r.s<1)throw Error(Wu+(r.s?"NaN":"-Infinity"));return r.eq(Qc)?new n(0):(Za=!1,t=mh(f2(r,s),f2(e,s),s),Za=!0,Sa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Sse(t,e):Nse(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Wu+"NaN");return r.s?(Za=!1,t=mh(r,e,0,1).times(e),Za=!0,r.minus(t)):Sa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return _se(this)};Ar.naturalLogarithm=Ar.ln=function(){return f2(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Nse(t,e):Sse(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ng+e);if(t=vi(a)+1,n=a.d.length-1,r=n*Ma+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wu+"NaN")}for(e=vi(l),Za=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=GA(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=rb((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(mh(l,s,i+2)).times(.5),GA(s.d).slice(0,i)===(t=GA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;i+=4}return Za=!0,Sa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+m[n]*h[a-n-1]+t,s[a--]=l%Xi|0,t=l/Xi|0;s[a]=(s[a]+t)%Xi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Za?Sa(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(of(e,0,tb),t===void 0?t=n.rounding:of(t,0,8),Sa(r,e+vi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=_g(n,!0):(of(e,0,tb),t===void 0?t=a.rounding:of(t,0,8),n=Sa(new a(n),e+1,t),r=_g(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?_g(a):(of(e,0,tb),t===void 0?t=s.rounding:of(t,0,8),n=Sa(new s(a),e+vi(a)+1,t),r=_g(n.abs(),!1,e+vi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),vi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Qc);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wu+"Infinity");return l}if(l.eq(Qc))return l;if(n=c.precision,e.eq(Qc))return Sa(l,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=l.s,i){if((r=d<0?-d:d)<=Cse){for(a=new c(Qc),t=Math.ceil(n/Ma+4),Za=!1;r%2&&(a=a.times(l),oG(a.d,t)),r=rb(r/2),r!==0;)l=l.times(l),oG(l.d,t);return Za=!0,e.s<0?new c(Qc).div(a):Sa(a,n)}}else if(s<0)throw Error(Wu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Za=!1,a=e.times(f2(l,n+u)),Za=!0,a=_se(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=vi(a),n=_g(a,r<=s.toExpNeg||r>=s.toExpPos)):(of(e,1,tb),t===void 0?t=s.rounding:of(t,0,8),a=Sa(new s(a),e,t),r=vi(a),n=_g(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(of(e,1,tb),t===void 0?t=n.rounding:of(t,0,8)),Sa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=vi(e),r=e.constructor;return _g(e,t<=r.toExpNeg||t>=r.toExpPos)};function Nse(e,t){var r,n,a,s,i,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Za?Sa(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(f/Ma),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Xi|0,c[s]%=Xi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Za?Sa(t,f):t}function of(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ng+e)}function GA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=Ma-n.length,r&&(s+=L0(r)),s+=n;i=e[t],n=i+"",r=Ma-n.length,r&&(s+=L0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var mh=function(){function e(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%Xi|0,i=s/Xi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Xi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,f,h,m,g,x,v,y,w,N,B,k,F,E,S,T=n.constructor,L=n.s==a.s?1:-1,R=n.d,j=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(Wu+"Division by zero");for(c=n.e-a.e,E=j.length,k=R.length,m=new T(L),g=m.d=[],u=0;j[u]==(R[u]||0);)++u;if(j[u]>(R[u]||0)&&--c,s==null?w=s=T.precision:i?w=s+(vi(n)-vi(a))+1:w=s,w<0)return new T(0);if(w=w/Ma+2|0,u=0,E==1)for(d=0,j=j[0],w++;(u<k||d)&&w--;u++)N=d*Xi+(R[u]||0),g[u]=N/j|0,d=N%j|0;else{for(d=Xi/(j[0]+1)|0,d>1&&(j=e(j,d),R=e(R,d),E=j.length,k=R.length),B=E,x=R.slice(0,E),v=x.length;v<E;)x[v++]=0;S=j.slice(),S.unshift(0),F=j[0],j[1]>=Xi/2&&++F;do d=0,l=t(j,x,E,v),l<0?(y=x[0],E!=v&&(y=y*Xi+(x[1]||0)),d=y/F|0,d>1?(d>=Xi&&(d=Xi-1),f=e(j,d),h=f.length,v=x.length,l=t(f,x,h,v),l==1&&(d--,r(f,E<h?S:j,h))):(d==0&&(l=d=1),f=j.slice()),h=f.length,h<v&&f.unshift(0),r(x,f,v),l==-1&&(v=x.length,l=t(j,x,E,v),l<1&&(d++,r(x,E<v?S:j,v))),v=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[v++]=R[B]||0:(x=[R[B]],v=1);while((B++<k||x[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Sa(m,i?s+vi(m)+1:s)}}();function _se(e,t){var r,n,a,s,i,l,c=0,u=0,d=e.constructor,f=d.precision;if(vi(e)>16)throw Error(Q8+vi(e));if(!e.s)return new d(Qc);for(Za=!1,l=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(kp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Qc),d.precision=l;;){if(a=Sa(a.times(e),l),r=r.times(++c),i=s.plus(mh(a,r,l)),GA(i.d).slice(0,l)===GA(s.d).slice(0,l)){for(;u--;)s=Sa(s.times(s),l);return d.precision=f,t==null?(Za=!0,Sa(s,f)):s}s=i}}function vi(e){for(var t=e.e*Ma,r=e.d[0];r>=10;r/=10)t++;return t}function OT(e,t,r){if(t>e.LN10.sd())throw Za=!0,r&&(e.precision=r),Error(Wu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function L0(e){for(var t="";e--;)t+="0";return t}function f2(e,t){var r,n,a,s,i,l,c,u,d,f=1,h=10,m=e,g=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(Wu+(m.s?"NaN":"-Infinity"));if(m.eq(Qc))return new x(0);if(t==null?(Za=!1,u=v):u=t,m.eq(10))return t==null&&(Za=!0),OT(x,u);if(u+=h,x.precision=u,r=GA(g),n=r.charAt(0),s=vi(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=GA(m.d),n=r.charAt(0),f++;s=vi(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=OT(x,u+2,v).times(s+""),m=f2(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=v,t==null?(Za=!0,Sa(m,v)):m;for(l=i=m=mh(m.minus(Qc),m.plus(Qc),u),d=Sa(m.times(m),u),a=3;;){if(i=Sa(i.times(d),u),c=l.plus(mh(i,new x(a),u)),GA(c.d).slice(0,u)===GA(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(OT(x,u+2,v).times(s+""))),l=mh(l,new x(f),u),x.precision=v,t==null?(Za=!0,Sa(l,v)):l;l=c,a+=2}}function iG(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=rb(r/Ma),e.d=[],n=(r+1)%Ma,r<0&&(n+=Ma),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ma;n<a;)e.d.push(+t.slice(n,n+=Ma));t=t.slice(n),n=Ma-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Za&&(e.e>lS||e.e<-lS))throw Error(Q8+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,i,l,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=Ma,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ma),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=Ma,a=n-Ma+i}if(r!==void 0&&(s=kp(10,i-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/kp(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=vi(e),f.length=1,t=t-s-1,f[0]=kp(10,(Ma-t%Ma)%Ma),e.e=rb(-t/Ma)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=kp(10,Ma-n),f[d]=a>0?(u/kp(10,i-a)%kp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Xi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Xi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Za&&(e.e>lS||e.e<-lS))throw Error(Q8+vi(e));return e}function Sse(e,t){var r,n,a,s,i,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Za?Sa(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Ma),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Xi-1;--c[s],c[a]+=Xi}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Za?Sa(t,m):t):new h(0)}function _g(e,t,r){var n,a=vi(e),s=GA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+L0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+L0(-a-1)+s,r&&(n=r-i)>0&&(s+=L0(n))):a>=i?(s+=L0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+L0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=L0(n))),e.s<0?"-"+s:s}function oG(e,t){if(e.length>t)return e.length=t,!0}function kse(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ng+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return iG(i,s.toString())}else if(typeof s!="string")throw Error(ng+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,cMe.test(s))iG(i,s);else throw Error(ng+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=kse,a.config=a.set=uMe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function uMe(e){if(!e||typeof e!="object")throw Error(Wu+"Object expected");var t,r,n,a=["precision",1,tb,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(rb(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(ng+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ng+r+": "+n);return this}var H8=kse(lMe);Qc=new H8(1);const ma=H8;var dMe=e=>e,jse={},Bse=e=>e===jse,lG=e=>function t(){return arguments.length===0||arguments.length===1&&Bse(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Tse=(e,t)=>e===1?t:lG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==jse).length;return s>=e?t(...n):Tse(e-s,lG(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>Bse(d)?l.shift():d);return t(...u,...l)}))}),gk=e=>Tse(e.length,e),ZF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},AMe=gk((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),fMe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return dMe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}},eO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Ise=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,l)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[l])})||(t=a,r=e(...a)),r}};function Fse(e){var t;return e===0?t=1:t=Math.floor(new ma(e).abs().log(10).toNumber())+1,t}function Ose(e,t,r){for(var n=new ma(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}gk((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});gk((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});gk((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Dse=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Pse=(e,t,r)=>{if(e.lte(0))return new ma(0);var n=Fse(e.toNumber()),a=new ma(10).pow(n),s=e.div(a),i=n!==1?.05:.1,l=new ma(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return t?new ma(c.toNumber()):new ma(Math.ceil(c.toNumber()))},hMe=(e,t,r)=>{var n=new ma(1),a=new ma(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ma(10).pow(Fse(e)-1),a=new ma(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ma(Math.floor(e)))}else e===0?a=new ma(Math.floor((t-1)/2)):r||(a=new ma(Math.floor(e)));var i=Math.floor((t-1)/2),l=fMe(AMe(c=>a.add(new ma(c-i).mul(n)).toNumber()),ZF);return l(0,t)},Rse=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ma(0),tickMin:new ma(0),tickMax:new ma(0)};var i=Pse(new ma(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new ma(0):(l=new ma(t).add(r).div(2),l=l.sub(new ma(l).mod(i)));var c=Math.ceil(l.sub(t).div(i).toNumber()),u=Math.ceil(new ma(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Rse(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new ma(c).mul(i)),tickMax:l.add(new ma(u).mul(i))})};function mMe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,l]=Dse([t,r]);if(i===-1/0||l===1/0){var c=l===1/0?[i,...ZF(0,n-1).map(()=>1/0)]:[...ZF(0,n-1).map(()=>-1/0),l];return t>r?eO(c):c}if(i===l)return hMe(i,n,a);var{step:u,tickMin:d,tickMax:f}=Rse(i,l,s,a,0),h=Ose(d,f.add(new ma(.1).mul(u)),u);return t>r?eO(h):h}function pMe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Dse([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var l=Math.max(t,2),c=Pse(new ma(i).sub(s).div(l-1),a,0),u=[...Ose(new ma(s),new ma(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?eO(u):u}var gMe=Ise(mMe),xMe=Ise(pMe),Lse=e=>e.rootProps.maxBarSize,vMe=e=>e.rootProps.barGap,Mse=e=>e.rootProps.barCategoryGap,bMe=e=>e.rootProps.barSize,cE=e=>e.rootProps.stackOffset,V8=e=>e.options.chartName,z8=e=>e.rootProps.syncId,Use=e=>e.rootProps.syncMethod,$8=e=>e.options.eventEmitter,QA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Xl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},xk=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},yMe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:QA.angleAxisId,includeHidden:!1,name:void 0,reversed:QA.reversed,scale:QA.scale,tick:QA.tick,tickCount:void 0,ticks:void 0,type:QA.type,unit:void 0},wMe={allowDataOverflow:Xl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xl.scale,tick:Xl.tick,tickCount:Xl.tickCount,ticks:void 0,type:Xl.type,unit:void 0},EMe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:QA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:QA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:QA.scale,tick:QA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},CMe={allowDataOverflow:Xl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xl.scale,tick:Xl.tick,tickCount:Xl.tickCount,ticks:void 0,type:"category",unit:void 0},nb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?EMe:yMe,uE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?CMe:wMe,vk=e=>e.polarOptions,G8=ut([Uh,Qh,Oi],mae),Qse=ut([vk,G8],(e,t)=>{if(e!=null)return Sl(e.innerRadius,t,0)}),Hse=ut([vk,G8],(e,t)=>{if(e!=null)return Sl(e.outerRadius,t,t*.8)}),NMe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Vse=ut([vk],NMe),_Me=ut([nb,Vse],xk),zse=ut([G8,Qse,Hse],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),SMe=ut([uE,zse],xk),ab=ut([In,vk,Qse,Hse,Uh,Qh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=t;return{cx:Sl(i,a,a/2),cy:Sl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,dE=(e,t,r)=>r;function K8(e){return e==null?void 0:e.id}var Pi=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},sb=e=>e.tooltip.settings.axisId,Ri=e=>{var t=Pi(e),r=sb(e);return ib(e,t,r)};function $se(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var l,c=(l=i.data)!==null&&l!==void 0?l:n;if(!(c==null||c.length===0)){var u=K8(i);c.forEach((d,f)=>{var h=a==null?f:String(Pa(d,a,null)),m=Pa(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:m}),s.set(h,g)})}}),Array.from(s.values())}function bk(e){return e.stackId!=null&&e.dataKey!=null}function cG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cG(Object(r),!0).forEach(function(n){kMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kMe(e,t,r){return(t=jMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jMe(e){var t=BMe(e,"string");return typeof t=="symbol"?t:t+""}function BMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tO=[0,"auto"],Fc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Vh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Fc},Oc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:tO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ik},Wm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Oc},TMe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},q8=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??TMe},ti=(e,t,r)=>{switch(t){case"xAxis":return Vh(e,r);case"yAxis":return Wm(e,r);case"zAxis":return q8(e,r);case"angleAxis":return nb(e,r);case"radiusAxis":return uE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},IMe=(e,t,r)=>{switch(t){case"xAxis":return Vh(e,r);case"yAxis":return Wm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ib=(e,t,r)=>{switch(t){case"xAxis":return Vh(e,r);case"yAxis":return Wm(e,r);case"angleAxis":return nb(e,r);case"radiusAxis":return uE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Gse=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function W8(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var X8=e=>e.graphicalItems.cartesianItems,FMe=ut([ka,dE],W8),Y8=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),AE=ut([X8,ti,FMe],Y8),Kse=ut([AE],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(bk)),qse=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Wse=ut([AE],qse),J8=e=>e.map(t=>t.data).filter(Boolean).flat(1),OMe=ut([AE],J8),Z8=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},eL=ut([OMe,U8],Z8),tL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),yk=ut([eL,ti,AE],tL);function Xse(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Yg(e){return e.filter(t=>sf(t)||t instanceof Date).map(Number).filter(t=>qc(t)===!1)}function DMe(e,t,r){return!r||typeof t!="number"||qc(t)?[]:r.length?Yg(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Yc(s)||!Yc(i)))return[t-s,t+i]})):[]}var PMe=ut([Kse,U8,Ri],$se),Yse=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,l]=s,c=l.map(K8);return[i,{stackedData:jDe(e,c,r),graphicalItems:l}]}))},rO=ut([PMe,Kse,cE],Yse),Jse=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=ODe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},RMe=ut([rO,qm,ka],Jse),Zse=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var l,c,u=(l=n[i.id])===null||l===void 0?void 0:l.filter(f=>Xse(a,f)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:DMe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),wk=e=>e.errorBars,eie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Xse(r,n));ut([Wse,wk,ka],eie);var LMe=ut([eL,ti,Wse,wk,ka],Zse);function MMe(e){var{value:t}=e;if(sf(t)||t instanceof Date)return t}var uG=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Yg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},UMe=(e,t,r)=>{var n=e.map(MMe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Ane(n))?Uae(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},rL=e=>{var t;if(e==null||!("domain"in e))return tO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Yg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:tO},uS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},tie=e=>e.referenceElements.dots,ob=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),QMe=ut([tie,ka,dE],ob),rie=e=>e.referenceElements.areas,HMe=ut([rie,ka,dE],ob),nie=e=>e.referenceElements.lines,VMe=ut([nie,ka,dE],ob),aie=(e,t)=>{var r=Yg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},zMe=ut(QMe,ka,aie),sie=(e,t)=>{var r=Yg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},$Me=ut([HMe,ka],sie),iie=(e,t)=>{var r=Yg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},GMe=ut(VMe,ka,iie),KMe=ut(zMe,GMe,$Me,(e,t,r)=>uS(e,r,t)),oie=ut([ti],rL),nL=(e,t,r,n,a,s,i)=>{var l=iMe(t,e.allowDataOverflow);if(l!=null)return l;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?uS(r,a,uG(n)):uS(a,uG(n));return oMe(t,u,e.allowDataOverflow)},qMe=ut([ti,oie,RMe,LMe,KMe,In,ka],nL),WMe=[0,1],aL=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=e,u=$m(t,s);return u&&l==null?Uae(0,r.length):c==="category"?UMe(n,e,u):a==="expand"?WMe:i}},sL=ut([ti,In,eL,yk,cE,ka,qMe],aL),lie=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(rE(s));return l in zy?l:"point"}}},Xm=ut([ti,In,Gse,V8,ka],lie);function XMe(e){if(e!=null){if(e in zy)return zy[e]();var t="scale".concat(rE(e));if(t in zy)return zy[t]()}}function Ek(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=XMe(t);if(a!=null){var s=a.domain(r).range(n);return CDe(s),s}}}var iL=(e,t,r)=>{var n=rL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&g1(e))return gMe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&g1(e))return xMe(e,t.tickCount,t.allowDecimals)}},oL=ut([sL,ib,Xm],iL),lL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&g1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return t},YMe=ut([ti,sL,oL,ka],lL),JMe=ut(yk,ti,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Yg(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),cie=ut(JMe,In,Mse,Oi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Yc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=Sl(r,e*s),l=e*s/2;return l-i-(l-i)/s*i}return 0}),ZMe=(e,t)=>{var r=Vh(e,t);return r==null||typeof r.padding!="string"?0:cie(e,"xAxis",t,r.padding)},eUe=(e,t)=>{var r=Wm(e,t);return r==null||typeof r.padding!="string"?0:cie(e,"yAxis",t,r.padding)},tUe=ut(Vh,ZMe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),rUe=ut(Wm,eUe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),nUe=ut([Oi,tUe,lk,ok,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),aUe=ut([Oi,In,rUe,lk,ok,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),fE=(e,t,r,n)=>{var a;switch(t){case"xAxis":return nUe(e,r,n);case"yAxis":return aUe(e,r,n);case"zAxis":return(a=q8(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Vse(e);case"radiusAxis":return zse(e,r);default:return}},uie=ut([ti,fE],xk),lb=ut([ti,Xm,YMe,uie],Ek);ut([AE,wk,ka],eie);function die(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ck=(e,t)=>t,Nk=(e,t,r)=>r,sUe=ut(u8,Ck,Nk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(die)),iUe=ut(d8,Ck,Nk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(die)),Aie=(e,t)=>({width:e.width,height:t.height}),oUe=(e,t)=>{var r=typeof t.width=="number"?t.width:ik;return{width:r,height:e.height}},fie=ut(Oi,Vh,Aie),lUe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},cUe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},uUe=ut(Qh,Oi,sUe,Ck,Nk,(e,t,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=Aie(t,l);i==null&&(i=lUe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),dUe=ut(Uh,Oi,iUe,Ck,Nk,(e,t,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=oUe(t,l);i==null&&(i=cUe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),AUe=(e,t)=>{var r=Oi(e),n=Vh(e,t);if(n!=null){var a=uUe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},fUe=(e,t)=>{var r=Oi(e),n=Wm(e,t);if(n!=null){var a=dUe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},hie=ut(Oi,Wm,(e,t)=>{var r=typeof t.width=="number"?t.width:ik;return{width:r,height:e.height}}),dG=(e,t,r)=>{switch(t){case"xAxis":return fie(e,r).width;case"yAxis":return hie(e,r).height;default:return}},mie=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=$m(e,n),c=t.map(u=>u.value);if(i&&l&&s==="category"&&a&&Ane(c))return c}},hE=ut([In,yk,ti,ka],mie),cL=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=$m(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},uL=ut([In,yk,ib,ka],cL),AG=ut([In,IMe,Xm,lb,hE,uL,fE,oL,ka],(e,t,r,n,a,s,i,l,c)=>{if(t==null)return null;var u=$m(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}),pie=(e,t,r,n,a,s,i,l,c)=>{if(!(t==null||n==null)){var u=$m(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&s!=null&&s.length>=2?to(s[0]-s[1])*2*g:g;var x=f||a;if(x){var v=x.map((y,w)=>{var N=i?i.indexOf(y):y;return{index:w,coordinate:n(N)+g,value:y,offset:g}});return v.filter(y=>!qc(y.coordinate))}return u&&l?l.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},gie=ut([In,ib,Xm,lb,oL,fE,hE,uL,ka],pie),xie=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=$m(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?to(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},x1=ut([In,ib,lb,fE,hE,uL,ka],xie),v1=ut(ti,lb,(e,t)=>{if(!(e==null||t==null))return cS(cS({},e),{},{scale:t})}),hUe=ut([ti,Xm,sL,uie],Ek);ut((e,t,r)=>q8(e,r),hUe,(e,t)=>{if(!(e==null||t==null))return cS(cS({},e),{},{scale:t})});var mUe=ut([In,u8,d8],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),vie=e=>e.options.defaultTooltipEventType,bie=e=>e.options.validateTooltipEventTypes;function yie(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function dL(e,t){var r=vie(e),n=bie(e);return yie(t,r,n)}function pUe(e){return or(t=>dL(t,e))}var wie=(e,t)=>{var r,n=Number(t);if(!(qc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},gUe=e=>e.tooltip.settings,G0={active:!1,index:null,dataKey:void 0,coordinate:void 0},xUe={itemInteraction:{click:G0,hover:G0},axisInteraction:{click:G0,hover:G0},keyboardInteraction:G0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Eie=Zc({name:"tooltip",initialState:xUe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=hh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:vUe,removeTooltipEntrySettings:bUe,setTooltipSettingsState:yUe,setActiveMouseOverItemIndex:Cie,mouseLeaveItem:wUe,mouseLeaveChart:Nie,setActiveClickItemIndex:EUe,setMouseOverAxisIndex:_ie,setMouseClickAxisIndex:CUe,setSyncInteraction:nO,setKeyboardInteraction:aO}=Eie.actions,NUe=Eie.reducer;function fG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fG(Object(r),!0).forEach(function(n){_Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ue(e,t,r){return(t=SUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SUe(e){var t=kUe(e,"string");return typeof t=="symbol"?t:t+""}function kUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jUe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function BUe(e){return e.index!=null}var Sie=(e,t,r,n)=>{if(t==null)return G0;var a=jUe(e,t,r);if(a==null)return G0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(BUe(a)){if(s)return uN(uN({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return uN(uN({},G0),{},{coordinate:a.coordinate})},AL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Yc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},kie=(e,t,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},jie=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},mE=e=>e.options.tooltipPayloadSearcher,cb=e=>e.tooltip;function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){TUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TUe(e,t,r){return(t=IUe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IUe(e){var t=FUe(e,"string");return typeof t=="symbol"?t:t+""}function FUe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OUe(e,t){return e??t}var Bie=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var g,{dataDefinedOnItem:x,settings:v}=m,y=OUe(x,l),w=Array.isArray(y)?gae(y,u,d):y,N=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,B=v==null?void 0:v.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?k=p6e(w,n.dataKey,a):k=s(w,t,c,B),Array.isArray(k))k.forEach(E=>{var S=mG(mG({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(Kz({tooltipEntrySettings:S,dataKey:E.dataKey,payload:E.payload,value:Pa(E.payload,E.dataKey),name:E.name}))});else{var F;h.push(Kz({tooltipEntrySettings:v,dataKey:N,payload:k,value:Pa(k,N),name:(F=Pa(k,B))!==null&&F!==void 0?F:v==null?void 0:v.name}))}return h},f)}},fL=ut([Ri,In,Gse,V8,Pi],lie),DUe=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),PUe=ut([Pi,sb],W8),pE=ut([DUe,Ri,PUe],Y8),RUe=ut([pE],e=>e.filter(bk)),LUe=ut([pE],J8),ub=ut([LUe,qm],Z8),MUe=ut([RUe,qm,Ri],$se),hL=ut([ub,Ri,pE],tL),UUe=ut([Ri],rL),QUe=ut([pE],e=>e.filter(bk)),HUe=ut([MUe,QUe,cE],Yse),VUe=ut([HUe,qm,Pi],Jse),zUe=ut([pE],qse),$Ue=ut([ub,Ri,zUe,wk,Pi],Zse),GUe=ut([tie,Pi,sb],ob),KUe=ut([GUe,Pi],aie),qUe=ut([rie,Pi,sb],ob),WUe=ut([qUe,Pi],sie),XUe=ut([nie,Pi,sb],ob),YUe=ut([XUe,Pi],iie),JUe=ut([KUe,YUe,WUe],uS),ZUe=ut([Ri,UUe,VUe,$Ue,JUe,In,Pi],nL),Tie=ut([Ri,In,ub,hL,cE,Pi,ZUe],aL),e7e=ut([Tie,Ri,fL],iL),t7e=ut([Ri,Tie,e7e,Pi],lL),Iie=e=>{var t=Pi(e),r=sb(e),n=!1;return fE(e,t,r,n)},Fie=ut([Ri,Iie],xk),Oie=ut([Ri,fL,t7e,Fie],Ek),r7e=ut([In,hL,Ri,Pi],mie),n7e=ut([In,hL,Ri,Pi],cL),a7e=(e,t,r,n,a,s,i,l)=>{if(t){var{type:c}=t,u=$m(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?to(a[0]-a[1])*2*f:f,u&&i?i.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:s?s[h]:h,index:m,offset:f}))}}},zh=ut([In,Ri,fL,Oie,Iie,r7e,n7e,Pi],a7e),mL=ut([vie,bie,gUe],(e,t,r)=>yie(r.shared,e,t)),Die=e=>e.tooltip.settings.trigger,pL=e=>e.tooltip.settings.defaultIndex,_k=ut([cb,mL,Die,pL],Sie),Tm=ut([_k,ub],AL),Pie=ut([zh,Tm],wie),Rie=ut([_k],e=>{if(e)return e.dataKey}),Lie=ut([cb,mL,Die,pL],jie),s7e=ut([Uh,Qh,In,Oi,zh,pL,Lie,mE],kie),i7e=ut([_k,s7e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),o7e=ut([_k],e=>e.active),l7e=ut([Lie,Tm,qm,Ri,Pie,mE,mL],Bie),c7e=ut([l7e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function pG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pG(Object(r),!0).forEach(function(n){u7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u7e(e,t,r){return(t=d7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d7e(e){var t=A7e(e,"string");return typeof t=="symbol"?t:t+""}function A7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f7e=()=>or(Ri),h7e=()=>{var e=f7e(),t=or(zh),r=or(Oie);return l2(gG(gG({},e),{},{scale:r}),t)},m7e=()=>or(V8),gL=(e,t)=>t,Mie=(e,t,r)=>r,xL=(e,t,r,n)=>n,p7e=ut(zh,e=>Z4(e,t=>t.coordinate)),vL=ut([cb,gL,Mie,xL],Sie),Uie=ut([vL,ub],AL),g7e=(e,t,r)=>{if(t!=null){var n=cb(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Qie=ut([cb,gL,Mie,xL],jie),dS=ut([Uh,Qh,In,Oi,zh,xL,Qie,mE],kie),x7e=ut([vL,dS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Hie=ut(zh,Uie,wie),v7e=ut([Qie,Uie,qm,Ri,Hie,mE,gL],Bie),b7e=ut([vL],e=>({isActive:e.active,activeIndex:e.index})),y7e=(e,t,r,n,a,s,i,l)=>{if(!(!e||!t||!n||!a||!s)){var c=DDe(e.chartX,e.chartY,t,r,l);if(c){var u=RDe(c,t),d=wDe(u,i,s,n,a),f=PDe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function sO(){return sO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sO.apply(null,arguments)}function xG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xG(Object(r),!0).forEach(function(n){w7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w7e(e,t,r){return(t=E7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E7e(e){var t=C7e(e,"string");return typeof t=="symbol"?t:t+""}function C7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N7e(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,g;if(u==="ScatterChart")m=d,g=OPe;else if(u==="BarChart")m=DPe(i,d,a,s),g=Pae;else if(i==="radial"){var{cx:x,cy:v,radius:y,startAngle:w,endAngle:N}=Rae(d);m={cx:x,cy:v,startAngle:w,endAngle:N,innerRadius:y,outerRadius:y},g=Mae}else m={points:vRe(i,d,a)},g=jae;var B=typeof l=="object"&&"className"in l?l.className:void 0,k=dN(dN(dN(dN({stroke:"#ccc",pointerEvents:"none"},a),m),Xn(l,!1)),{},{payload:f,payloadIndex:h,className:vn("recharts-tooltip-cursor",B)});return _.isValidElement(l)?_.cloneElement(l,k):_.createElement(g,k)}function _7e(e){var t=h7e(),r=Cae(),n=m8(),a=m7e();return _.createElement(N7e,sO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var Vie=_.createContext(null),S7e=()=>_.useContext(Vie),DT={exports:{}},vG;function k7e(){return vG||(vG=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var x=r?r+u:u;if(!this._events[x])return!1;var v=this._events[x],y=arguments.length,w,N;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(N=1,w=new Array(y-1);N<y;N++)w[N-1]=arguments[N];v.fn.apply(v.context,w)}else{var B=v.length,k;for(N=0;N<B;N++)switch(v[N].once&&this.removeListener(u,v[N].fn,void 0,!0),y){case 1:v[N].fn.call(v[N].context);break;case 2:v[N].fn.call(v[N].context,d);break;case 3:v[N].fn.call(v[N].context,d,f);break;case 4:v[N].fn.call(v[N].context,d,f,h);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];v[N].fn.apply(v[N].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return i(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,m);else{for(var x=0,v=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:i(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(DT)),DT.exports}var j7e=k7e();const B7e=kl(j7e);var h2=new B7e,iO="recharts.syncEvent.tooltip",bG="recharts.syncEvent.brush";function bL(e,t){if(t){var r=Number.parseInt(t,10);if(!qc(r))return e==null?void 0:e[r]}}var T7e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},zie=Zc({name:"options",initialState:T7e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),I7e=zie.reducer,{createEventEmitter:F7e}=zie.actions;function O7e(e){return e.tooltip.syncInteraction}var D7e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},$ie=Zc({name:"chartData",initialState:D7e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:yG,setDataStartEndIndexes:P7e,setComputedData:cmt}=$ie.actions,R7e=$ie.reducer,Gie=()=>{};function L7e(){var e=or(z8),t=or($8),r=$a(),n=or(Use),a=or(zh),s=m8(),i=A8(),l=or(c=>c.rootProps.className);_.useEffect(()=>{if(e==null)return Gie;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,m);h=a[g]}else n==="value"&&(h=a.find(F=>String(F.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(nO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=x,w=Math.min(v,i.x+i.width),N=Math.min(y,i.y+i.height),B={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?N:h.coordinate},k=nO({active:d.payload.active,coordinate:B,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(k)}}};return h2.on(iO,c),()=>{h2.off(iO,c)}},[l,r,t,e,n,a,s,i])}function M7e(){var e=or(z8),t=or($8),r=$a();_.useEffect(()=>{if(e==null)return Gie;var n=(a,s,i)=>{t!==i&&e===a&&r(P7e(s))};return h2.on(bG,n),()=>{h2.off(bG,n)}},[r,t,e])}function U7e(){var e=$a();_.useEffect(()=>{e(F7e())},[e]),L7e(),M7e()}function Q7e(e,t,r,n,a,s){var i=or(h=>g7e(h,e,t)),l=or($8),c=or(z8),u=or(Use),d=or(O7e),f=d==null?void 0:d.active;_.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=nO({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});h2.emit(iO,c,h,l)}},[f,r,i,a,n,l,c,u,s])}function wG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wG(Object(r),!0).forEach(function(n){H7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H7e(e,t,r){return(t=V7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V7e(e){var t=z7e(e,"string");return typeof t=="symbol"?t:t+""}function z7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $7e(e){return e.dataKey}function G7e(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(APe,t)}var CG=[],K7e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!qg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sh(e){var t=Yu(e,K7e),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:g,cursor:x,shared:v,trigger:y,defaultIndex:w,portal:N,axisId:B}=t,k=$a(),F=typeof w=="number"?String(w):w;_.useEffect(()=>{k(yUe({shared:v,trigger:y,axisId:B,active:r,defaultIndex:F}))},[k,v,y,B,r,F]);var E=A8(),S=kae(),T=pUe(v),{activeIndex:L,isActive:R}=or(J=>b7e(J,T,y,F)),j=or(J=>v7e(J,T,y,F)),P=or(J=>Hie(J,T,y,F)),M=or(J=>x7e(J,T,y,F)),Z=j,V=S7e(),W=r??R,[G,K]=zne([Z,W]),ee=T==="axis"?P:void 0;Q7e(T,y,M,ee,L,W);var X=N??V;if(X==null)return null;var D=Z??CG;W||(D=CG),l&&D.length&&(D=Lne(Z.filter(J=>J.value!=null&&(J.hide!==!0||t.includeHidden)),d,$7e));var Q=D.length>0,z=_.createElement(vPe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:W,coordinate:M,hasPayload:Q,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:E,wrapperStyle:g,lastBoundingBox:G,innerRef:K,hasPortalFromProps:!!N},G7e(i,EG(EG({},t),{},{payload:D,label:ee,active:W,coordinate:M,accessibilityLayer:S})));return _.createElement(_.Fragment,null,$R.createPortal(z,X),W&&_.createElement(_7e,{cursor:x,tooltipEventType:T,coordinate:M,payload:Z,index:L}))}var PT={},RT={},LT={},NG;function q7e(){return NG||(NG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,l=null},v=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,l=w;const N=h==null;m(),c&&N&&d()};return y.schedule=m,y.cancel=x,y.flush=v,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(LT)),LT}var _G;function W7e(){return _G||(_G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q7e();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=g,m}e.debounce=r}(RT)),RT}var SG;function X7e(){return SG||(SG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W7e();function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:l})}e.throttle=r}(PT)),PT}var MT,kG;function Y7e(){return kG||(kG=1,MT=X7e().throttle),MT}var J7e=Y7e();const Z7e=kl(J7e);var vw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(n){e9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e9e(e,t,r){return(t=t9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t9e(e){var t=r9e(e,"string");return typeof t=="symbol"?t:t+""}function r9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ih=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:g={}}=e,x=_.useRef(null),v=_.useRef();v.current=m,_.useImperativeHandle(t,()=>x.current);var[y,w]=_.useState({containerWidth:n.width,containerHeight:n.height}),N=_.useCallback((k,F)=>{w(E=>{var S=Math.round(k),T=Math.round(F);return E.containerWidth===S&&E.containerHeight===T?E:{containerWidth:S,containerHeight:T}})},[]);_.useEffect(()=>{var k=T=>{var L,{width:R,height:j}=T[0].contentRect;N(R,j),(L=v.current)===null||L===void 0||L.call(v,R,j)};d>0&&(k=Z7e(k,d,{trailing:!0,leading:!1}));var F=new ResizeObserver(k),{width:E,height:S}=x.current.getBoundingClientRect();return N(E,S),F.observe(x.current),()=>{F.disconnect()}},[N,d]);var B=_.useMemo(()=>{var{containerWidth:k,containerHeight:F}=y;if(k<0||F<0)return null;vw(Mp(a)||Mp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),vw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Mp(a)?k:a,S=Mp(s)?F:s;return r&&r>0&&(E?S=E/r:S&&(E=S*r),c&&S>c&&(S=c)),vw(E>0||S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,S,a,s,i,l,r),_.Children.map(u,T=>_.cloneElement(T,{width:E,height:S,style:UT({width:E,height:S},T.props.style)}))},[r,u,s,c,l,i,y,a]);return _.createElement("div",{id:f?"".concat(f):void 0,className:vn("recharts-responsive-container",h),style:UT(UT({},g),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:x},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},B))}),Im=e=>null;Im.displayName="Cell";function n9e(e,t,r){return(t=a9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a9e(e){var t=s9e(e,"string");return typeof t=="symbol"?t:t+""}function s9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class i9e{constructor(t){n9e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function BG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BG(Object(r),!0).forEach(function(n){l9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l9e(e,t,r){return(t=c9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c9e(e){var t=u9e(e,"string");return typeof t=="symbol"?t:t+""}function u9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d9e={cacheSize:2e3,enableCache:!0},Kie=o9e({},d9e),TG=new i9e(Kie.cacheSize),A9e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IG="recharts_measurement_span";function f9e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var FG=(e,t)=>{try{var r=document.getElementById(IG);r||(r=document.createElement("span"),r.setAttribute("id",IG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,A9e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||qg.isSsr)return{width:0,height:0};if(!Kie.enableCache)return FG(t,r);var n=f9e(t,r),a=TG.get(n);if(a)return a;var s=FG(t,r);return TG.set(n,s),s},OG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,h9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,m9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},p9e=Object.keys(qie),mv="NaN";function g9e(e,t){return e*qie[t]}class Kl{static parse(t){var r,[,n,a]=(r=m9e.exec(t))!==null&&r!==void 0?r:[];return new Kl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,qc(t)&&(this.unit=""),r!==""&&!h9e.test(r)&&(this.num=NaN,this.unit=""),p9e.includes(r)&&(this.num=g9e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Kl(NaN,""):new Kl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Kl(NaN,""):new Kl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Kl(NaN,""):new Kl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Kl(NaN,""):new Kl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qc(this.num)}}function Wie(e){if(e.includes(mv))return mv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=OG.exec(t))!==null&&r!==void 0?r:[],i=Kl.parse(n??""),l=Kl.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return mv;t=t.replace(OG,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=DG.exec(t))!==null&&u!==void 0?u:[],m=Kl.parse(d??""),g=Kl.parse(h??""),x=f==="+"?m.add(g):m.subtract(g);if(x.isNaN())return mv;t=t.replace(DG,x.toString())}return t}var PG=/\(([^()]*)\)/;function x9e(e){for(var t=e,r;(r=PG.exec(t))!=null;){var[,n]=r;t=t.replace(PG,Wie(n))}return t}function v9e(e){var t=e.replace(/\s+/g,"");return t=x9e(t),t=Wie(t),t}function b9e(e){try{return v9e(e)}catch{return mv}}function QT(e){var t=b9e(e.slice(5,-1));return t===mv?"":t}var y9e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],w9e=["dx","dy","angle","className","breakAll"];function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oO.apply(null,arguments)}function RG(e,t){if(e==null)return{};var r,n,a=E9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function E9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xie=/[ \f\n\r\t\v\u2028\u2029]+/,Yie=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Ts(t)||(r?a=t.toString().split(""):a=t.toString().split(Xie));var s=a.map(l=>({word:l,width:bw(l,n).width})),i=r?0:bw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},C9e=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=e,u=dr(s),d=i,f=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((j,P)=>{var{word:M,width:Z}=P,V=j[j.length-1];if(V&&(n==null||a||V.width+Z+r<Number(n)))V.words.push(M),V.width+=Z+r;else{var W={words:[M],width:Z};j.push(W)}return j},[])},h=f(t),m=L=>L.reduce((R,j)=>R.width>j.width?R:j);if(!u||a)return h;var g=h.length>s||m(h).width>Number(n);if(!g)return h;for(var x="…",v=L=>{var R=d.slice(0,L),j=Yie({breakAll:c,style:l,children:R+x}).wordsWithComputedWidth,P=f(j),M=P.length>s||m(P).width>Number(n);return[M,P]},y=0,w=d.length-1,N=0,B;y<=w&&N<=d.length-1;){var k=Math.floor((y+w)/2),F=k-1,[E,S]=v(F),[T]=v(k);if(!E&&!T&&(y=k+1),E&&T&&(w=k-1),!E&&T){B=S;break}N++}return B||h},LG=e=>{var t=Ts(e)?[]:e.toString().split(Xie);return[{words:t}]},N9e=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!qg.isSsr){var l,c,u=Yie({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return LG(n);return C9e({breakAll:s,children:n,maxLines:i,style:a},l,c,t,r)}return LG(n)},MG="#808080",db=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=MG}=e,d=RG(e,y9e),f=_.useMemo(()=>N9e({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:m,angle:g,className:x,breakAll:v}=d,y=RG(d,w9e);if(!sf(r)||!sf(n))return null;var w=r+(dr(h)?h:0),N=n+(dr(m)?m:0),B;switch(c){case"start":B=QT("calc(".concat(s,")"));break;case"middle":B=QT("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:B=QT("calc(".concat(f.length-1," * -").concat(a,")"));break}var k=[];if(i){var F=f[0].width,{width:E}=d;k.push("scale(".concat(dr(E)?E/F:1,")"))}return g&&k.push("rotate(".concat(g,", ").concat(w,", ").concat(N,")")),k.length&&(y.transform=k.join(" ")),_.createElement("text",oO({},Xn(y,!0),{ref:t,x:w,y:N,className:vn("recharts-text",x),textAnchor:l,fill:u.includes("url")?MG:u}),f.map((S,T)=>{var L=S.words.join(v?"":" ");return _.createElement("tspan",{x:w,dy:T===0?B:a,key:"".concat(L,"-").concat(T)},L)}))});db.displayName="Text";var _9e=["offset"],S9e=["labelRef"];function UG(e,t){if(e==null)return{};var r,n,a=k9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function k9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QG(Object(r),!0).forEach(function(n){j9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j9e(e,t,r){return(t=B9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B9e(e){var t=T9e(e,"string");return typeof t=="symbol"?t:t+""}function T9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jf.apply(null,arguments)}var I9e=e=>{var{value:t,formatter:r}=e,n=Ts(e.children)?t:e.children;return typeof r=="function"?r(n):n},yL=e=>e!=null&&typeof e=="function",F9e=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},O9e=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=n,g=(u+d)/2,x=F9e(f,h),v=x>=0?1:-1,y,w;a==="insideStart"?(y=f+v*s,w=m):a==="insideEnd"?(y=h-v*s,w=!m):a==="end"&&(y=h+v*s,w=m),w=x<=0?w:!w;var N=ea(l,c,g,y),B=ea(l,c,g,y+(w?1:-1)*359),k="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(B.x,",").concat(B.y),F=Ts(e.id)?s2("recharts-radial-line-"):e.id;return _.createElement("text",Jf({},r,{dominantBaseline:"central",className:vn("recharts-radial-bar-label",i)}),_.createElement("defs",null,_.createElement("path",{id:F,d:k})),_.createElement("textPath",{xlinkHref:"#".concat(F)},t))},D9e=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=ea(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:m,y:g}=ea(n,a,h,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},P9e=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,g=m*n,x=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var y={x:s+l/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return ys(ys({},y),r?{height:Math.max(i-r.y,0),width:l}:{})}if(a==="bottom"){var w={x:s+l/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return ys(ys({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:l}:{})}if(a==="left"){var N={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return ys(ys({},N),r?{width:Math.max(N.x-r.x,0),height:c}:{})}if(a==="right"){var B={x:s+l+g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"};return ys(ys({},B),r?{width:Math.max(r.x+r.width-B.x,0),height:c}:{})}var k=r?{width:l,height:c}:{};return a==="insideLeft"?ys({x:s+g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"},k):a==="insideRight"?ys({x:s+l-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},k):a==="insideTop"?ys({x:s+l/2,y:i+d,textAnchor:"middle",verticalAnchor:h},k):a==="insideBottom"?ys({x:s+l/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},k):a==="insideTopLeft"?ys({x:s+g,y:i+d,textAnchor:v,verticalAnchor:h},k):a==="insideTopRight"?ys({x:s+l-g,y:i+d,textAnchor:x,verticalAnchor:h},k):a==="insideBottomLeft"?ys({x:s+g,y:i+c-d,textAnchor:v,verticalAnchor:f},k):a==="insideBottomRight"?ys({x:s+l-g,y:i+c-d,textAnchor:x,verticalAnchor:f},k):a&&typeof a=="object"&&(dr(a.x)||Mp(a.x))&&(dr(a.y)||Mp(a.y))?ys({x:s+Sl(a.x,l),y:i+Sl(a.y,c),textAnchor:"end",verticalAnchor:"end"},k):ys({x:s+l/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},R9e=e=>"cx"in e&&dr(e.cx);function Jl(e){var{offset:t=5}=e,r=UG(e,_9e),n=ys({offset:t},r),{viewBox:a,position:s,value:i,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=or(ab),m=A8(),g=s==="center"?m:h??m,x=a||g;if(!x||Ts(i)&&Ts(l)&&!_.isValidElement(c)&&typeof c!="function")return null;var v=ys(ys({},n),{},{viewBox:x});if(_.isValidElement(c)){var{labelRef:y}=v,w=UG(v,S9e);return _.cloneElement(c,w)}var N;if(typeof c=="function"){if(N=_.createElement(c,v),_.isValidElement(N))return N}else N=I9e(n);var B=R9e(x),k=Xn(n,!0);if(B&&(s==="insideStart"||s==="insideEnd"||s==="end"))return O9e(n,N,k,x);var F=B?D9e(x,n.offset,n.position):P9e(n,x);return _.createElement(db,Jf({ref:f,className:vn("recharts-label",u)},k,F,{breakAll:d}),N)}Jl.displayName="Label";var Jie=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:g,height:x,clockWise:v,labelViewBox:y}=e;if(y)return y;if(dr(g)&&dr(x)){if(dr(d)&&dr(f))return{x:d,y:f,width:g,height:x};if(dr(h)&&dr(m))return{x:h,y:m,width:g,height:x}}if(dr(d)&&dr(f))return{x:d,y:f,width:0,height:0};if(dr(t)&&dr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||l||i||0,clockWise:v};if(e.viewBox)return e.viewBox},L9e=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(Jl,Jf({key:"label-implicit"},n)):sf(e)?_.createElement(Jl,Jf({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===Jl?_.cloneElement(e,ys({key:"label-implicit"},n)):_.createElement(Jl,Jf({key:"label-implicit",content:e},n)):yL(e)?_.createElement(Jl,Jf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(Jl,Jf({},e,{key:"label-implicit"},n)):null},M9e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=Jie(t),l=nE(a,Jl).map((u,d)=>_.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return l;var c=L9e(t.label,r||i,s);return[c,...l]};Jl.parseViewBox=Jie;Jl.renderCallByParent=M9e;var HT={},VT={},HG;function U9e(){return HG||(HG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(VT)),VT}var zT={},VG;function Q9e(){return VG||(VG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(zT)),zT}var zG;function H9e(){return zG||(zG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9e(),r=Q9e(),n=JR();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(HT)),HT}var $T,$G;function V9e(){return $G||($G=1,$T=H9e().last),$T}var z9e=V9e();const Zie=kl(z9e);var $9e=["valueAccessor"],G9e=["data","dataKey","clockWise","id","textBreakAll"];function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AS.apply(null,arguments)}function GG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GG(Object(r),!0).forEach(function(n){K9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K9e(e,t,r){return(t=q9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q9e(e){var t=W9e(e,"string");return typeof t=="symbol"?t:t+""}function W9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qG(e,t){if(e==null)return{};var r,n,a=X9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function X9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Y9e=e=>Array.isArray(e.value)?Zie(e.value):e.value;function cm(e){var{valueAccessor:t=Y9e}=e,r=qG(e,$9e),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:l}=r,c=qG(r,G9e);return!n||!n.length?null:_.createElement(cs,{className:"recharts-label-list"},n.map((u,d)=>{var f=Ts(a)?t(u,d):Pa(u&&u.payload,a),h=Ts(i)?{}:{id:"".concat(i,"-").concat(d)};return _.createElement(Jl,AS({},Xn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Jl.parseViewBox(Ts(s)?u:KG(KG({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}cm.displayName="LabelList";function J9e(e,t){return e?e===!0?_.createElement(cm,{key:"labelList-implicit",data:t}):_.isValidElement(e)||yL(e)?_.createElement(cm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?_.createElement(cm,AS({data:t},e,{key:"labelList-implicit"})):null:null}function Z9e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=nE(n,cm).map((i,l)=>_.cloneElement(i,{data:t,key:"labelList-".concat(l)}));if(!r)return a;var s=J9e(e.label,t);return[s,...a]}cm.renderCallByParent=Z9e;var eQe=["points","className","baseLinePoints","connectNulls"];function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pv.apply(null,arguments)}function tQe(e,t){if(e==null)return{};var r,n,a=rQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WG=e=>e&&e.x===+e.x&&e.y===+e.y,nQe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{WG(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),WG(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},yw=(e,t)=>{var r=nQe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,l)=>"".concat(s).concat(l===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},aQe=(e,t,r)=>{var n=yw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(yw(t.reverse(),r).slice(1))},eoe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=tQe(e,eQe);if(!t||!t.length)return null;var i=vn("recharts-polygon",r);if(n&&n.length){var l=s.stroke&&s.stroke!=="none",c=aQe(t,n,a);return _.createElement("g",{className:i},_.createElement("path",pv({},Xn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?_.createElement("path",pv({},Xn(s,!0),{fill:"none",d:yw(t,a)})):null,l?_.createElement("path",pv({},Xn(s,!0),{fill:"none",d:yw(n,a)})):null)}var u=yw(t,a);return _.createElement("path",pv({},Xn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function lO(){return lO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lO.apply(null,arguments)}var wL=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=vn("recharts-dot",a);return t===+t&&r===+r&&n===+n?_.createElement("circle",lO({},ll(e),VR(e),{className:s,cx:t,cy:r,r:n})):null},EL=e=>e.graphicalItems.polarItems,sQe=ut([ka,dE],W8),CL=ut([EL,ti,sQe],Y8),iQe=ut([CL],J8),NL=ut([iQe,pk],Z8),toe=ut([NL,ti,CL],tL),oQe=ut([NL,ti,CL],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),XG=()=>{},lQe=ut([ti,oie,XG,oQe,XG,In,ka],nL),roe=ut([ti,In,NL,toe,cE,ka,lQe],aL),noe=ut([roe,ti,Xm],iL),cQe=ut([ti,roe,noe,ka],lL),_L=(e,t,r)=>{switch(t){case"angleAxis":return nb(e,r);case"radiusAxis":return uE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},SL=(e,t,r)=>{switch(t){case"angleAxis":return _Me(e,r);case"radiusAxis":return SMe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ab=ut([_L,Xm,cQe,SL],Ek),aoe=ut([In,toe,ib,ka],cL),fb=ut([In,_L,Xm,Ab,noe,SL,hE,aoe,ka],pie);ut([In,_L,Ab,SL,hE,aoe,ka],xie);var uQe=(e,t)=>fb(e,"angleAxis",t,!1),dQe=ut([uQe],e=>{if(e)return e.map(t=>t.coordinate)}),AQe=(e,t)=>fb(e,"radiusAxis",t,!1),fQe=ut([AQe],e=>{if(e)return e.map(t=>t.coordinate)}),hQe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function mQe(e,t){if(e==null)return{};var r,n,a=pQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kh.apply(null,arguments)}function YG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YG(Object(r),!0).forEach(function(n){gQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gQe(e,t,r){return(t=xQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQe(e){var t=vQe(e,"string");return typeof t=="symbol"?t:t+""}function vQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bQe=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var l=ea(t,r,e,s);i?a+="L ".concat(l.x,",").concat(l.y):a+="M ".concat(l.x,",").concat(l.y)}),a+="Z",a},yQe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var l=b1({stroke:"#ccc"},ll(e));return _.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=ea(t,r,n,c),d=ea(t,r,a,c);return _.createElement("line",kh({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},wQe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=b1(b1({stroke:"#ccc"},ll(e)),{},{fill:"none"});return _.createElement("circle",kh({},s,{className:vn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},EQe=e=>{var{radius:t,index:r}=e,n=b1(b1({stroke:"#ccc"},ll(e)),{},{fill:"none"});return _.createElement("path",kh({},n,{className:vn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:bQe(t,e.cx,e.cy,e.polarAngles)}))},CQe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:_.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?_.createElement(wQe,kh({key:s},e,{radius:n,index:a})):_.createElement(EQe,kh({key:s},e,{radius:n,index:a}))}))},soe=e=>{var t,r,n,a,s,i,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:m,cy:g,innerRadius:x,outerRadius:v}=e,y=mQe(e,hQe),w=or(ab),N=b1({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:m)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(l=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:v)!==null&&l!==void 0?l:0},y),{polarAngles:B,polarRadius:k,cx:F,cy:E,innerRadius:S,outerRadius:T}=N,L=or(M=>dQe(M,f)),R=or(M=>fQe(M,h)),j=Array.isArray(B)?B:L,P=Array.isArray(k)?k:R;return T<=0||j==null||P==null?null:_.createElement("g",{className:"recharts-polar-grid"},_.createElement(yQe,kh({cx:F,cy:E,innerRadius:S,outerRadius:T,gridType:u,radialLines:d},N,{polarAngles:j,polarRadius:P})),_.createElement(CQe,kh({cx:F,cy:E,innerRadius:S,outerRadius:T,gridType:u,radialLines:d},N,{polarAngles:j,polarRadius:P})))};soe.displayName="PolarGrid";var GT={},KT={},JG;function NQe(){return JG||(JG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const l=r[i],c=n(l);c>s&&(s=c,a=l)}return a}e.maxBy=t}(KT)),KT}var ZG;function _Qe(){return ZG||(ZG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NQe(),r=J4(),n=n8();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(GT)),GT}var qT,eK;function SQe(){return eK||(eK=1,qT=_Qe().maxBy),qT}var kQe=SQe();const jQe=kl(kQe);var WT={},XT={},tK;function BQe(){return tK||(tK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const l=r[i],c=n(l);c<s&&(s=c,a=l)}return a}e.minBy=t}(XT)),XT}var rK;function TQe(){return rK||(rK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BQe(),r=J4(),n=n8();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(WT)),WT}var YT,nK;function IQe(){return nK||(nK=1,YT=TQe().minBy),YT}var FQe=IQe();const OQe=kl(FQe);var DQe={radiusAxis:{},angleAxis:{}},ioe=Zc({name:"polarAxis",initialState:DQe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:PQe,removeRadiusAxis:RQe,addAngleAxis:LQe,removeAngleAxis:MQe}=ioe.actions,UQe=ioe.reducer,QQe=["cx","cy","angle","axisLine"],HQe=["angle","tickFormatter","stroke","tick"];function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m2.apply(null,arguments)}function aK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aK(Object(r),!0).forEach(function(n){Sk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sk(e,t,r){return(t=VQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VQe(e){var t=zQe(e,"string");return typeof t=="symbol"?t:t+""}function zQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ooe(e,t){if(e==null)return{};var r,n,a=$Qe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $Qe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var loe="radiusAxis";function GQe(e){var t=$a();return _.useEffect(()=>(t(PQe(e)),()=>{t(RQe(e))})),null}var KQe=(e,t,r,n)=>{var{coordinate:a}=e;return ea(r,n,a,t)},qQe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},WQe=(e,t,r,n)=>{var a=jQe(n,i=>i.coordinate||0),s=OQe(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},XQe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=ooe(e,QQe),l=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=ea(r,n,l[0],a),u=ea(r,n,l[1],a),d=KA(KA(KA({},ll(i)),{},{fill:"none"},Xn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return _.createElement("line",m2({className:"recharts-polar-radius-axis-line"},d))},YQe=(e,t,r)=>{var n;return _.isValidElement(e)?n=_.cloneElement(e,t):typeof e=="function"?n=e(t):n=_.createElement(db,m2({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},JQe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=ooe(e,HQe),l=qQe(e.orientation),c=ll(i),u=Xn(s,!1),d=t.map((f,h)=>{var m=KQe(f,e.angle,e.cx,e.cy),g=KA(KA(KA(KA({textAnchor:l,transform:"rotate(".concat(90-r,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},m),{},{payload:f});return _.createElement(cs,m2({className:vn("recharts-polar-radius-axis-tick",pae(s)),key:"tick-".concat(f.coordinate)},Kg(e,f,h)),YQe(s,g,n?n(f.value,h):f.value))});return _.createElement(cs,{className:"recharts-polar-radius-axis-ticks"},d)},ZQe=e=>{var{radiusAxisId:t}=e,r=or(ab),n=or(c=>Ab(c,"radiusAxis",t)),a=or(c=>fb(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=KA(KA(KA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:l}=s;return _.createElement(cs,{className:vn("recharts-polar-radius-axis",loe,s.className)},l&&XQe(s,a),i&&JQe(s,a),Jl.renderCallByParent(s,WQe(s.angle,s.cx,s.cy,a)))};class kk extends _.PureComponent{render(){return _.createElement(_.Fragment,null,_.createElement(GQe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),_.createElement(ZQe,this.props))}}Sk(kk,"displayName","PolarRadiusAxis");Sk(kk,"axisType",loe);Sk(kk,"defaultProps",Xl);var eHe=["children"];function jh(){return jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jh.apply(null,arguments)}function sK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sK(Object(r),!0).forEach(function(n){jk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jk(e,t,r){return(t=tHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tHe(e){var t=rHe(e,"string");return typeof t=="symbol"?t:t+""}function rHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nHe(e,t){if(e==null)return{};var r,n,a=aHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sHe=Math.PI/180,iK=1e-5,coe="angleAxis";function iHe(e){var t=$a(),r=_.useMemo(()=>{var{children:s}=e,i=nHe(e,eHe);return i},[e]),n=or(s=>nb(s,r.id)),a=r===n;return _.useEffect(()=>(t(LQe(r)),()=>{t(MQe(r))}),[t,r]),a?e.children:null}var oHe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,l=i||8,c=ea(r,n,a,e.coordinate),u=ea(r,n,a+(s==="inner"?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},lHe=(e,t)=>{var r=Math.cos(-e.coordinate*sHe);return r>iK?t==="outer"?"start":"end":r<-iK?t==="outer"?"end":"start":"middle"},cHe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var l=HA(HA({},ll(e)),{},{fill:"none"},Xn(s,!1));if(a==="circle")return _.createElement(wL,jh({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:r,r:n}));var c=i.map(u=>ea(t,r,n,u.coordinate));return _.createElement(eoe,jh({className:"recharts-polar-angle-axis-line"},l,{points:c}))},uHe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?_.isValidElement(t)?_.cloneElement(t,r):typeof t=="function"?t(r):_.createElement(db,jh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},dHe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=ll(e),l=Xn(t,!1),c=HA(HA({},i),{},{fill:"none"},Xn(r,!1)),u=s.map((d,f)=>{var h=oHe(d,e),m=lHe(d,e.orientation),g=HA(HA(HA({},i),{},{textAnchor:m,stroke:"none",fill:a},l),{},{index:f,payload:d,x:h.x2,y:h.y2});return _.createElement(cs,jh({className:vn("recharts-polar-angle-axis-tick",pae(t)),key:"tick-".concat(d.coordinate)},Kg(e,d,f)),r&&_.createElement("line",jh({className:"recharts-polar-angle-axis-tick-line"},c,h)),_.createElement(uHe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return _.createElement(cs,{className:"recharts-polar-angle-axis-ticks"},u)},AHe=e=>{var{angleAxisId:t}=e,r=or(ab),n=or(l=>Ab(l,"angleAxis",t)),a=uc(),s=or(l=>fb(l,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=HA(HA(HA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return _.createElement(cs,{className:vn("recharts-polar-angle-axis",coe,i.className)},_.createElement(cHe,jh({},i,{ticks:s})),_.createElement(dHe,jh({},i,{ticks:s})))};class Bk extends _.PureComponent{render(){return this.props.radius<=0?null:_.createElement(iHe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},_.createElement(AHe,this.props))}}jk(Bk,"displayName","PolarAngleAxis");jk(Bk,"axisType",coe);jk(Bk,"defaultProps",QA);function oK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oK(Object(r),!0).forEach(function(n){fHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fHe(e,t,r){return(t=hHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hHe(e){var t=mHe(e,"string");return typeof t=="symbol"?t:t+""}function mHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pHe=(e,t)=>t,kL=ut([EL,pHe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),gHe=[],jL=(e,t,r)=>(r==null?void 0:r.length)===0?gHe:r,uoe=ut([pk,kL,jL],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>lK(lK({},t.presentationProps),s.props))),a!=null)return a}}),xHe=ut([uoe,kL,jL],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Pa(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:J1(i,t.dataKey),color:l,payload:n,type:t.legendType}})}),vHe=ut([uoe,kL,jL,Oi],(e,t,r,n)=>{if(!(t==null||e==null))return AVe({offset:n,pieSettings:t,displayedData:e,cells:r})}),JT={},cK;function bHe(){return cK||(cK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(JT)),JT}var ZT,uK;function yHe(){return uK||(uK=1,ZT=bHe().isPlainObject),ZT}var wHe=yHe();const EHe=kl(wHe);function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fS.apply(null,arguments)}var dK=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},CHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NHe=e=>{var t=Yu(e,CHe),r=_.useRef(),[n,a]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&a(v)}catch{}},[]);var{x:s,y:i,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=vn("recharts-trapezoid",d);return g?_.createElement(Y_,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},v=>{var{upperWidth:y,lowerWidth:w,height:N,x:B,y:k}=v;return _.createElement(Y_,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},_.createElement("path",fS({},Xn(t,!0),{className:x,d:dK(B,k,y,w,N),ref:r})))}):_.createElement("g",null,_.createElement("path",fS({},Xn(t,!0),{className:x,d:dK(s,i,l,c,u)})))},_He=["option","shapeType","propTransformer","activeClassName","isActive"];function SHe(e,t){if(e==null)return{};var r,n,a=kHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AK(Object(r),!0).forEach(function(n){jHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jHe(e,t,r){return(t=BHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BHe(e){var t=THe(e,"string");return typeof t=="symbol"?t:t+""}function THe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IHe(e,t){return hS(hS({},t),e)}function FHe(e,t){return e==="symbols"}function fK(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return _.createElement(Pae,r);case"trapezoid":return _.createElement(NHe,r);case"sector":return _.createElement(Mae,r);case"symbols":if(FHe(t))return _.createElement(WR,r);break;default:return null}}function OHe(e){return _.isValidElement(e)?e.props:e}function doe(e){var{option:t,shapeType:r,propTransformer:n=IHe,activeClassName:a="recharts-active-shape",isActive:s}=e,i=SHe(e,_He),l;if(_.isValidElement(t))l=_.cloneElement(t,hS(hS({},i),OHe(t)));else if(typeof t=="function")l=t(i);else if(EHe(t)&&typeof t!="boolean"){var c=n(t,i);l=_.createElement(fK,{shapeType:r,elementProps:c})}else{var u=i;l=_.createElement(fK,{shapeType:r,elementProps:u})}return s?_.createElement(cs,{className:a},l):l}var BL=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(Cie({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},TL=e=>{var t=$a();return(r,n)=>a=>{e==null||e(r,n,a),t(wUe())}},IL=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(EUe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function FL(e){var{fn:t,args:r}=e,n=$a(),a=uc();return _.useEffect(()=>{if(!a){var s=t(r);return n(vUe(s)),()=>{n(bUe(s))}}},[t,r,n,a]),null}var Aoe=()=>{};function DHe(e){var{legendPayload:t}=e,r=$a(),n=uc();return _.useEffect(()=>n?Aoe:(r(_ae(t)),()=>{r(Sae(t))}),[r,n,t]),null}function foe(e){var{legendPayload:t}=e,r=$a(),n=or(In);return _.useEffect(()=>n!=="centric"&&n!=="radial"?Aoe:(r(_ae(t)),()=>{r(Sae(t))}),[r,n,t]),null}function OL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(s2(t)),n=_.useRef(e);return n.current!==e&&(r.current=s2(t),n.current=e),r.current}var eI,PHe=()=>{var[e]=_.useState(()=>s2("uid-"));return e},RHe=(eI=che.useId)!==null&&eI!==void 0?eI:PHe;function LHe(e,t){var r=RHe();return t||(e?"".concat(e,"-").concat(r):r)}var MHe=_.createContext(void 0),DL=e=>{var{id:t,type:r,children:n}=e,a=LHe("recharts-".concat(r),t);return _.createElement(MHe.Provider,{value:a},n(a))},UHe={cartesianItems:[],polarItems:[]},hoe=Zc({name:"graphicalItems",initialState:UHe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=hh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=hh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=hh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:QHe,replaceCartesianGraphicalItem:HHe,removeCartesianGraphicalItem:VHe,addPolarGraphicalItem:zHe,removePolarGraphicalItem:$He}=hoe.actions,GHe=hoe.reducer;function KHe(e){var t=$a(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(QHe(e)):r.current!==e&&t(HHe({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(VHe(r.current)),r.current=null)},[t]),null}function moe(e){var t=$a();return _.useEffect(()=>(t(zHe(e)),()=>{t($He(e))}),[t,e]),null}function qHe(){}var WHe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},hK={t:0},tI={t:1};function PL(e){var t=Yu(e,WHe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=Dae("JavascriptAnimate",t.animationManager),[f,h]=_.useState(r?hK:tI),m=_.useRef(null);return _.useEffect(()=>{r||h(tI)},[r]),_.useEffect(()=>{if(!r||!n)return qHe;var g=Oae(hK,tI,Iae(s),a,h,d.getTimeoutController()),x=()=>{m.current=g()};return d.start([c,i,x,a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,a,s,i,c,l,d]),u(f.t)}var XHe=["onMouseEnter","onClick","onMouseLeave"],YHe=["id"],JHe=["id"];function RL(e,t){if(e==null)return{};var r,n,a=ZHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mK(Object(r),!0).forEach(function(n){eVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eVe(e,t,r){return(t=tVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tVe(e){var t=rVe(e,"string");return typeof t=="symbol"?t:t+""}function rVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bh.apply(null,arguments)}function nVe(e){var t=_.useMemo(()=>nE(e.children,Im),[e.children]),r=or(n=>xHe(n,e.id,t));return r==null?null:_.createElement(foe,{legendPayload:r})}function aVe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:J1(l,t),hide:c,type:u,color:i,unit:""}}}var sVe=(e,t)=>e>t?"start":e<t?"end":"middle",iVe=(e,t,r)=>typeof t=="function"?t(e):Sl(t,r,r*.8),oVe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,l=mae(s,i),c=a+Sl(e.cx,s,s/2),u=n+Sl(e.cy,i,i/2),d=Sl(e.innerRadius,l,0),f=iVe(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},lVe=(e,t)=>{var r=to(t-e),n=Math.min(Math.abs(t-e),360);return r*n},cVe=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var r=vn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(jae,Bh({},t,{type:"linear",className:r}))},uVe=(e,t,r)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),_.isValidElement(n)))return n;var a=vn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return _.createElement(db,Bh({},t,{alignmentBaseline:"middle",className:a}),n)};function dVe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var l=ll(r),c=Xn(a,!1),u=Xn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,m)=>{var g=(h.startAngle+h.endAngle)/2,x=ea(h.cx,h.cy,h.outerRadius+d,g),v=Ss(Ss(Ss(Ss({},l),h),{},{stroke:"none"},c),{},{index:m,textAnchor:sVe(x.x,h.cx)},x),y=Ss(Ss(Ss(Ss({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:m,points:[ea(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return _.createElement(cs,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(m)},s&&cVe(s,y),uVe(a,v,Pa(h,i)))});return _.createElement(cs,{className:"recharts-pie-labels"},f)}function poe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=or(Tm),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=RL(a,XHe),f=BL(l,a.dataKey),h=TL(u),m=IL(c,a.dataKey);return t==null?null:_.createElement(_.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var v=r&&String(x)===i,y=i?n:null,w=v?r:y,N=Ss(Ss({},g),{},{stroke:g.stroke,tabIndex:-1,[yae]:x,[wae]:a.dataKey});return _.createElement(cs,Bh({tabIndex:-1,className:"recharts-pie-sector"},Kg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:m(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),_.createElement(doe,Bh({option:w,isActive:v,shapeType:"sector"},N)))}),_.createElement(dVe,{sectors:t,props:a,showLabels:s}))}function AVe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),m=lVe(l,c),g=Math.abs(m),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,v=n.filter(F=>Pa(F,u,0)!==0).length,y=(g>=360?v:v-1)*x,w=g-v*h-y,N=n.reduce((F,E)=>{var S=Pa(E,u,0);return F+(dr(S)?S:0)},0),B;if(N>0){var k;B=n.map((F,E)=>{var S=Pa(F,u,0),T=Pa(F,d,E),L=oVe(r,s,F),R=(dr(S)?S:0)/N,j,P=Ss(Ss({},F),a&&a[E]&&a[E].props);E?j=k.endAngle+to(m)*x*(S!==0?1:0):j=l;var M=j+to(m)*((S!==0?h:0)+R*w),Z=(j+M)/2,V=(L.innerRadius+L.outerRadius)/2,W=[{name:T,value:S,payload:P,dataKey:u,type:f}],G=ea(L.cx,L.cy,V,Z);return k=Ss(Ss(Ss(Ss({},r.presentationProps),{},{percent:R,cornerRadius:i,name:T,tooltipPayload:W,midAngle:Z,middleRadius:V,tooltipPosition:G},P),L),{},{value:Pa(F,u),startAngle:j,endAngle:M,payload:P,paddingAngle:to(m)*x}),k})}return B}function fVe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=OL(t,"recharts-pie-"),m=r.current,[g,x]=_.useState(!0),v=_.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=_.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return _.createElement(PL,{begin:s,duration:i,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:h},w=>{var N=[],B=n&&n[0],k=B.startAngle;return n.forEach((F,E)=>{var S=m&&m[E],T=E>0?Bm(F,"paddingAngle",0):0;if(S){var L=hv(S.endAngle-S.startAngle,F.endAngle-F.startAngle),R=Ss(Ss({},F),{},{startAngle:k+T,endAngle:k+L(w)+T});N.push(R),k=R.endAngle}else{var{endAngle:j,startAngle:P}=F,M=hv(0,j-P),Z=M(w),V=Ss(Ss({},F),{},{startAngle:k+T,endAngle:k+Z+T});N.push(V),k=V.endAngle}}),r.current=N,_.createElement(cs,null,_.createElement(poe,{sectors:N,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function hVe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=_.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?_.createElement(fVe,{props:e,previousSectorsRef:s}):_.createElement(poe,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function mVe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=vn("recharts-pie",r);return t?null:_.createElement(cs,{tabIndex:n,className:a},_.createElement(hVe,e))}var pVe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!qg.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function gVe(e){var{id:t}=e,r=RL(e,YHe),n=_.useMemo(()=>nE(e.children,Im),[e.children]),a=or(s=>vHe(s,t,n));return _.createElement(_.Fragment,null,_.createElement(FL,{fn:aVe,args:Ss(Ss({},e),{},{sectors:a})}),_.createElement(mVe,Bh({},r,{sectors:a})))}function Tk(e){var t=Yu(e,pVe),{id:r}=t,n=RL(t,JHe),a=ll(n);return _.createElement(DL,{id:r,type:"pie"},s=>_.createElement(_.Fragment,null,_.createElement(moe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),_.createElement(nVe,Bh({},n,{id:s})),_.createElement(gVe,Bh({},n,{id:s})),n.children))}Tk.displayName="Pie";var xVe=ut([Oi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),vVe=ut([xVe,Uh,Qh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),goe=()=>or(vVe),bVe=()=>or(c7e);function pK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pK(Object(r),!0).forEach(function(n){yVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yVe(e,t,r){return(t=wVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wVe(e){var t=EVe(e,"string");return typeof t=="symbol"?t:t+""}function EVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CVe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=gK(gK({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Xn(a,!1)),VR(a)),l;return _.isValidElement(a)?l=_.cloneElement(a,i):typeof a=="function"?l=a(i):l=_.createElement(wL,i),_.createElement(cs,{className:"recharts-active-dot"},l)};function NVe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=or(Tm),i=bVe();if(t==null||i==null)return null;var l=t.find(c=>i.includes(c.payload));return Ts(l)?null:CVe({point:l,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function xK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xK(Object(r),!0).forEach(function(n){_Ve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ve(e,t,r){return(t=SVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SVe(e){var t=kVe(e,"string");return typeof t=="symbol"?t:t+""}function kVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xoe=(e,t)=>Ab(e,"radiusAxis",t),jVe=ut([xoe],e=>{if(e!=null)return{scale:e}}),BVe=ut([uE,xoe],(e,t)=>{if(!(e==null||t==null))return mS(mS({},e),{},{scale:t})}),TVe=(e,t,r,n)=>fb(e,"radiusAxis",t,n),voe=(e,t,r)=>nb(e,r),boe=(e,t,r)=>Ab(e,"angleAxis",r),IVe=ut([voe,boe],(e,t)=>{if(!(e==null||t==null))return mS(mS({},e),{},{scale:t})}),FVe=(e,t,r,n)=>fb(e,"angleAxis",r,n),OVe=ut([voe,boe,ab],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),DVe=(e,t,r,n,a)=>a,PVe=ut([In,BVe,TVe,IVe,FVe],(e,t,r,n,a)=>$m(e,"radiusAxis")?l2(t,r,!1):l2(n,a,!1)),RVe=ut([EL,DVe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),LVe=ut([jVe,OVe,pk,RVe,PVe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:l}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,l+1);return KVe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),MVe=["id"];function UVe(e,t){if(e==null)return{};var r,n,a=QVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vK(Object(r),!0).forEach(function(n){LL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LL(e,t,r){return(t=HVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HVe(e){var t=VVe(e,"string");return typeof t=="symbol"?t:t+""}function VVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y1(){return y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y1.apply(null,arguments)}function ML(e,t){return e&&e!=="none"?e:t}var zVe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:ML(n,a),value:J1(r,t),payload:e}]};function $Ve(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:J1(s,t),hide:i,type:l,color:ML(r,a),unit:""}}}function GVe(e,t){var r;return _.isValidElement(e)?r=_.cloneElement(e,t):typeof e=="function"?r=e(t):r=_.createElement(wL,y1({},t,{className:vn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function KVe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:l}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,m)=>{var g=Pa(h,r.dataKey,m),x=Pa(h,a),v=r.scale(g)+d,y=Array.isArray(x)?Zie(x):x,w=Ts(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(wl(wl({},ea(i,l,w,v)),{},{name:g,value:x,cx:i,cy:l,radius:w,angle:v,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var m=h.value[0],g=Ts(m)?void 0:t.scale(m);f.push(wl(wl({},h),{},{radius:g},ea(i,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function qVe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=UVe(r,MVe),l=ll(i),c=Xn(n,!0),u=t.map((d,f)=>{var h=wl(wl(wl({key:"dot-".concat(f),r:3},l),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return GVe(n,h)});return _.createElement(cs,{className:"recharts-radar-dots"},u)}function yoe(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:l}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return _.isValidElement(a)?d=_.cloneElement(a,wl(wl({},r),{},{points:t})):typeof a=="function"?d=a(wl(wl({},r),{},{points:t})):d=_.createElement(eoe,y1({},Xn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:l})),_.createElement(cs,{className:"recharts-radar-polygon"},d,_.createElement(qVe,{props:r,points:t}),n&&cm.renderCallByParent(r,t))}function WVe(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=OL(t,"recharts-radar-"),[h,m]=_.useState(!0),g=_.useCallback(()=>{typeof c=="function"&&c(),m(!1)},[c]),x=_.useCallback(()=>{typeof u=="function"&&u(),m(!0)},[u]);return _.createElement(PL,{begin:s,duration:i,isActive:a,easing:l,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},v=>{var y=d&&d.length/n.length,w=v===1?n:n.map((N,B)=>{var k=d&&d[Math.floor(B*y)];if(k){var F=hv(k.x,N.x),E=hv(k.y,N.y);return wl(wl({},N),{},{x:F(v),y:E(v)})}var S=hv(N.cx,N.x),T=hv(N.cy,N.y);return wl(wl({},N),{},{x:S(v),y:T(v)})});return v>0&&(r.current=w),_.createElement(yoe,{points:w,props:t,showLabels:!h})})}function XVe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=_.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?_.createElement(WVe,{props:e,previousPointsRef:a}):_.createElement(yoe,{points:t,props:e,showLabels:!0})}var YVe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!qg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class JVe extends _.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=vn("recharts-radar",r);return _.createElement(_.Fragment,null,_.createElement(cs,{className:a},_.createElement(XVe,this.props)),_.createElement(NVe,{points:n,mainColor:ML(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function ZVe(e){var t=uc(),r=or(n=>LVe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return _.createElement(JVe,y1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class UL extends _.PureComponent{render(){return _.createElement(DL,{id:this.props.id,type:"radar"},t=>_.createElement(_.Fragment,null,_.createElement(moe,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),_.createElement(foe,{legendPayload:zVe(this.props)}),_.createElement(FL,{fn:$Ve,args:this.props}),_.createElement(ZVe,y1({},this.props,{id:t}))))}}LL(UL,"displayName","Radar");LL(UL,"defaultProps",YVe);var eze="Invariant failed";function tze(e,t){throw new Error(eze)}var rze=["x","y"];function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cO.apply(null,arguments)}function bK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bK(Object(r),!0).forEach(function(n){nze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nze(e,t,r){return(t=aze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aze(e){var t=sze(e,"string");return typeof t=="symbol"?t:t+""}function sze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ize(e,t){if(e==null)return{};var r,n,a=oze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lze(e,t){var{x:r,y:n}=e,a=ize(e,rze),s="".concat(r),i=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Ay(Ay(Ay(Ay(Ay({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function woe(e){return _.createElement(doe,cO({shapeType:"rectangle",propTransformer:lze,activeClassName:"recharts-active-bar"},e))}var cze=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(dr(t))return t;var s=dr(n)||Ts(n);return s?t(n,a):(s||tze(),r)}},uze={},Eoe=Zc({name:"errorBars",initialState:uze,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:umt,removeErrorBar:dmt}=Eoe.actions,dze=Eoe.reducer,Aze=["children"];function fze(e,t){if(e==null)return{};var r,n,a=hze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mze={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pze=_.createContext(mze);function gze(e){var{children:t}=e,r=fze(e,Aze);return _.createElement(pze.Provider,{value:r},t)}function Coe(e,t){var r,n,a=or(u=>Vh(u,e)),s=or(u=>Wm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Fc.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Oc.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function xze(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=goe(),{needClipX:s,needClipY:i,needClip:l}=Coe(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=a;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var vze=["onMouseEnter","onMouseLeave","onClick"],bze=["value","background","tooltipPosition"],yze=["id"],wze=["onMouseEnter","onClick","onMouseLeave"];function w1(){return w1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w1.apply(null,arguments)}function yK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yK(Object(r),!0).forEach(function(n){Eze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eze(e,t,r){return(t=Cze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cze(e){var t=Nze(e,"string");return typeof t=="symbol"?t:t+""}function Nze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pS(e,t){if(e==null)return{};var r,n,a=_ze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _ze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sze=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:J1(r,t),payload:e}]};function kze(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:J1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:l}}}function jze(e){var t=or(Tm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=pS(s,vze),d=BL(i,n),f=TL(l),h=IL(c,n);if(!a||r==null)return null;var m=Xn(a,!1);return _.createElement(_.Fragment,null,r.map((g,x)=>{var{value:v,background:y,tooltipPosition:w}=g,N=pS(g,bze);if(!y)return null;var B=d(g,x),k=f(g,x),F=h(g,x),E=Yo(Yo(Yo(Yo(Yo({option:a,isActive:String(x)===t},N),{},{fill:"#eee"},y),m),Kg(u,g,x)),{},{onMouseEnter:B,onMouseLeave:k,onClick:F,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return _.createElement(woe,w1({key:"background-bar-".concat(x)},E))}))}function Noe(e){var{data:t,props:r,showLabels:n}=e,a=ll(r),{id:s}=a,i=pS(a,yze),{shape:l,dataKey:c,activeBar:u}=r,d=or(Tm),f=or(Rie),{onMouseEnter:h,onClick:m,onMouseLeave:g}=r,x=pS(r,wze),v=BL(h,c),y=TL(g),w=IL(m,c);return t?_.createElement(_.Fragment,null,t.map((N,B)=>{var k=u&&String(B)===d&&(f==null||c===f),F=k?u:l,E=Yo(Yo(Yo({},i),N),{},{isActive:k,option:F,index:B,dataKey:c});return _.createElement(cs,w1({className:"recharts-bar-rectangle"},Kg(x,N,B),{onMouseEnter:v(N,B),onMouseLeave:y(N,B),onClick:w(N,B),key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(B)}),_.createElement(woe,E))}),n&&cm.renderCallByParent(r,t)):null}function Bze(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=OL(t,"recharts-bar-"),[m,g]=_.useState(!1),x=_.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=_.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return _.createElement(PL,{begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((N,B)=>{var k=f&&f[B];if(k)return Yo(Yo({},N),{},{x:Fx(k.x,N.x,y),y:Fx(k.y,N.y,y),width:Fx(k.width,N.width,y),height:Fx(k.height,N.height,y)});if(a==="horizontal"){var F=Fx(0,N.height,y);return Yo(Yo({},N),{},{y:N.y+N.height-F,height:F})}var E=Fx(0,N.width,y);return Yo(Yo({},N),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:_.createElement(cs,null,_.createElement(Noe,{props:t,data:w,showLabels:!m}))})}function Tze(e){var{data:t,isAnimationActive:r}=e,n=_.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?_.createElement(Bze,{previousRectanglesRef:n,props:e}):_.createElement(Noe,{props:e,data:t,showLabels:!0})}var _oe=0,Ize=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class Fze extends _.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=vn("recharts-bar",a),f=u;return _.createElement(cs,{className:d,id:u},l&&_.createElement("defs",null,_.createElement(xze,{clipPathId:f,xAxisId:s,yAxisId:i})),_.createElement(cs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},_.createElement(jze,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),_.createElement(Tze,this.props)),this.props.children)}}var Oze={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!qg.isSsr,legendType:"rect",minPointSize:_oe,xAxisId:0,yAxisId:0};function Dze(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Coe(t,r),h=m8(),m=uc(),g=nE(e.children,Im),x=or(w=>l$e(w,t,r,m,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,_.createElement(gze,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:Ize,errorBarOffset:v},_.createElement(Fze,w1({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Pze(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,g=t==="horizontal"?l:i,x=d?g.scale.domain():null,v=TDe({numericAxis:g});return f.map((y,w)=>{var N,B,k,F,E,S;d?N=NDe(d[w],x):(N=Pa(y,r),Array.isArray(N)||(N=[v,N]));var T=cze(n,_oe)(N[1],w);if(t==="horizontal"){var L,[R,j]=[l.scale(N[0]),l.scale(N[1])];B=zz({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),k=(L=j??R)!==null&&L!==void 0?L:void 0,F=a.size;var P=R-j;if(E=qc(P)?0:P,S={x:B,y:h.top,width:F,height:h.height},Math.abs(T)>0&&Math.abs(E)<Math.abs(T)){var M=to(E||T)*(Math.abs(T)-Math.abs(E));k-=M,E+=M}}else{var[Z,V]=[i.scale(N[0]),i.scale(N[1])];if(B=Z,k=zz({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),F=V-Z,E=a.size,S={x:h.left,y:k,width:h.width,height:E},Math.abs(T)>0&&Math.abs(F)<Math.abs(T)){var W=to(F||T)*(Math.abs(T)-Math.abs(F));F+=W}}if(B==null||k==null||F==null||E==null)return null;var G=Yo(Yo({},y),{},{x:B,y:k,width:F,height:E,value:d?N:N[1],payload:y,background:S,tooltipPosition:{x:B+F/2,y:k+E/2}},m&&m[w]&&m[w].props);return G}).filter(Boolean)}function E1(e){var t=Yu(e,Oze),r=uc();return _.createElement(DL,{id:t.id,type:"bar"},n=>_.createElement(_.Fragment,null,_.createElement(DHe,{legendPayload:Sze(t)}),_.createElement(FL,{fn:kze,args:t}),_.createElement(KHe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:BDe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),_.createElement(Dze,w1({},t,{id:n}))))}E1.displayName="Bar";function wK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wK(Object(r),!0).forEach(function(n){Rze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rze(e,t,r){return(t=Lze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lze(e){var t=Mze(e,"string");return typeof t=="symbol"?t:t+""}function Mze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uze=(e,t)=>t,Qze=(e,t,r)=>r,Hze=(e,t,r,n)=>n,Vze=(e,t,r,n,a)=>a,gE=ut([X8,Vze],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),zze=ut([gE],e=>e==null?void 0:e.maxBarSize),$ze=(e,t,r,n,a,s)=>s,EK=(e,t,r)=>{var n=r??e;if(!Ts(n))return Sl(n,t,0)},Gze=ut([In,X8,Uze,Qze,Hze],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Kze=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?rO(e,"yAxis",r,n):rO(e,"xAxis",t,n)},qze=(e,t,r)=>{var n=In(e);return n==="horizontal"?dG(e,"xAxis",t):dG(e,"yAxis",r)},Wze=(e,t,r)=>{var n={},a=e.filter(bk),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),m=EK(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=EK(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},Xze=ut([Gze,bMe,qze],Wze),Yze=(e,t,r,n,a)=>{var s,i,l=gE(e,t,r,n,a);if(l!=null){var c=In(e),u=Lse(e),{maxBarSize:d}=l,f=Ts(d)?u:d,h,m;return c==="horizontal"?(h=v1(e,"xAxis",t,n),m=x1(e,"xAxis",t,n)):(h=v1(e,"yAxis",r,n),m=x1(e,"yAxis",r,n)),(s=(i=l2(h,m,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},Soe=(e,t,r,n)=>{var a=In(e),s,i;return a==="horizontal"?(s=v1(e,"xAxis",t,n),i=x1(e,"xAxis",t,n)):(s=v1(e,"yAxis",r,n),i=x1(e,"yAxis",r,n)),l2(s,i)};function Jze(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=Sl(e,r,0,!0),l,c=[];if(Yc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,m={offset:h-i,size:0};l=n.reduce((y,w)=>{var N,B={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+i,size:u?d:(N=w.barSize)!==null&&N!==void 0?N:0}},k=[...y,B];return m=k[k.length-1].position,k},c)}else{var g=Sl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var v=Yc(a)?Math.min(x,a):x;l=n.reduce((y,w,N)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*N+(x-v)/2,size:v}}],c)}return l}}var Zze=(e,t,r,n,a,s,i)=>{var l=Ts(i)?t:i,c=Jze(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>AN(AN({},u),{},{position:AN(AN({},u.position),{},{offset:u.position.offset-a/2})}))),c},e$e=ut([Xze,Lse,vMe,Mse,Yze,Soe,zze],Zze),t$e=(e,t,r,n)=>v1(e,"xAxis",t,n),r$e=(e,t,r,n)=>v1(e,"yAxis",r,n),n$e=(e,t,r,n)=>x1(e,"xAxis",t,n),a$e=(e,t,r,n)=>x1(e,"yAxis",r,n),s$e=ut([e$e,gE],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),i$e=(e,t)=>{var r=K8(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},o$e=ut([Kze,gE],i$e),l$e=ut([Oi,t$e,r$e,n$e,a$e,s$e,In,U8,Soe,o$e,gE,$ze],(e,t,r,n,a,s,i,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=l;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,g+1),v!=null)return Pze({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:v,offset:e,cells:f})}}),koe=e=>{var{chartData:t}=e,r=$a(),n=uc();return _.useEffect(()=>n?()=>{}:(r(yG(t)),()=>{r(yG(void 0))}),[t,r,n]),null},CK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},joe=Zc({name:"brush",initialState:CK,reducers:{setBrushSettings(e,t){return t.payload==null?CK:t.payload}}}),{setBrushSettings:Amt}=joe.actions,c$e=joe.reducer;function u$e(e,t,r){return(t=d$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d$e(e){var t=A$e(e,"string");return typeof t=="symbol"?t:t+""}function A$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class QL{static create(t){return new QL(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}u$e(QL,"EPS",1e-4);function f$e(e){return(e%180+180)%180}var h$e=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=f$e(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},m$e={dots:[],areas:[],lines:[]},Boe=Zc({name:"referenceElements",initialState:m$e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=hh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=hh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=hh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:fmt,removeDot:hmt,addArea:mmt,removeArea:pmt,addLine:gmt,removeLine:xmt}=Boe.actions,p$e=Boe.reducer,g$e=_.createContext(void 0),x$e=e=>{var{children:t}=e,[r]=_.useState("".concat(s2("recharts"),"-clip")),n=goe();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return _.createElement(g$e.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:a,y:s,height:l,width:i}))),t)};function rI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Toe(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function v$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return h$e(n,r)}function b$e(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:l}=e;return t===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function gS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function y$e(e,t){return Toe(e,t+1)}function w$e(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Toe(n,u)};var x=c,v,y=()=>(v===void 0&&(v=r(g,x)),v),w=g.coordinate,N=c===0||gS(e,w,y,d,l);N||(c=0,d=i,u+=1),N&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function NK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NK(Object(r),!0).forEach(function(n){E$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E$e(e,t,r){return(t=C$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C$e(e){var t=N$e(e,"string");return typeof t=="symbol"?t:t+""}function N$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _$e(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=t,{end:c}=t,u=function(h){var m=s[h],g,x=()=>(g===void 0&&(g=r(m,h)),g);if(h===i-1){var v=e*(m.coordinate+e*x()/2-c);s[h]=m=zo(zo({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else s[h]=m=zo(zo({},m),{},{tickCoord:m.coordinate});var y=gS(e,m.tickCoord,x,l,c);y&&(c=m.tickCoord-e*(x()/2+a),s[h]=zo(zo({},m),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function S$e(e,t,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=t;if(s){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);i[l-1]=d=zo(zo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=gS(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+a),i[l-1]=zo(zo({},d),{},{isShow:!0}))}for(var g=s?l-1:l,x=function(w){var N=i[w],B,k=()=>(B===void 0&&(B=r(N,w)),B);if(w===0){var F=e*(N.coordinate-e*k()/2-c);i[w]=N=zo(zo({},N),{},{tickCoord:F<0?N.coordinate-F*e:N.coordinate})}else i[w]=N=zo(zo({},N),{},{tickCoord:N.coordinate});var E=gS(e,N.tickCoord,k,c,u);E&&(c=N.tickCoord+e*(k()/2+a),i[w]=zo(zo({},N),{},{isShow:!0}))},v=0;v<g;v++)x(v);return i}function HL(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(dr(c)||qg.isSsr){var h;return(h=y$e(a,dr(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?bw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(N,B)=>{var k=typeof u=="function"?u(N.value,B):N.value;return g==="width"?v$e(bw(k,{fontSize:t,letterSpacing:r}),x,f):bw(k,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?to(a[1].coordinate-a[0].coordinate):1,w=b$e(s,y,g);return c==="equidistantPreserveStart"?w$e(y,w,v,a,i):(c==="preserveStart"||c==="preserveStartEnd"?m=S$e(y,w,v,a,i,c==="preserveStartEnd"):m=_$e(y,w,v,a,i),m.filter(N=>N.isShow))}var k$e=["viewBox"],j$e=["viewBox"];function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gv.apply(null,arguments)}function _K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_K(Object(r),!0).forEach(function(n){VL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_K(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SK(e,t){if(e==null)return{};var r,n,a=B$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function B$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VL(e,t,r){return(t=T$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T$e(e){var t=I$e(e,"string");return typeof t=="symbol"?t:t+""}function I$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ym extends _.Component{constructor(t){super(t),this.tickRefs=_.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=SK(t,k$e),s=this.props,{viewBox:i}=s,l=SK(s,j$e);return!rI(n,i)||!rI(a,l)||!rI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,g,x,v=c?-1:1,y=t.tickSize||l,w=dr(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,m=n+ +!c*s,h=m-v*y,x=h-v*u,g=w;break;case"left":h=m=t.coordinate,f=r+ +!c*a,d=f-v*y,g=d-v*u,x=w;break;case"right":h=m=t.coordinate,f=r+ +c*a,d=f+v*y,g=d+v*u,x=w;break;default:d=f=t.coordinate,m=n+ +c*s,h=m+v*y,x=h+v*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l}=this.props,c=Si(Si(Si({},Xn(this.props,!1)),Xn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=Si(Si({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=Si(Si({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return _.createElement("line",gv({},c,{className:vn("recharts-cartesian-axis-line",Bm(l,"className"))}))}static renderTickItem(t,r,n){var a,s=vn(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))a=_.cloneElement(t,Si(Si({},r),{},{className:s}));else if(typeof t=="function")a=t(Si(Si({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=vn(i,t.className)),a=_.createElement(db,gv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:l,unit:c,padding:u}=this.props,d=HL(Si(Si({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=ll(this.props),g=Xn(i,!1),x=Si(Si({},m),{},{fill:"none"},Xn(a,!1)),v=d.map((y,w)=>{var{line:N,tick:B}=this.getTickLineCoord(y),k=Si(Si(Si(Si({textAnchor:f,verticalAnchor:h},m),{},{stroke:"none",fill:s},g),B),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:l,padding:u});return _.createElement(cs,gv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Kg(this.props,y,w)),a&&_.createElement("line",gv({},x,N,{className:vn("recharts-cartesian-axis-tick-line",Bm(a,"className"))})),i&&Ym.renderTickItem(i,k,"".concat(typeof l=="function"?l(y.value,w):y.value).concat(c||"")))});return v.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:_.createElement(cs,{className:vn("recharts-cartesian-axis",a),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Jl.renderCallByParent(this.props))}}VL(Ym,"displayName","CartesianAxis");VL(Ym,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var F$e=["x1","y1","x2","y2","key"],O$e=["offset"],D$e=["xAxisId","yAxisId"],P$e=["xAxisId","yAxisId"];function kK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kK(Object(r),!0).forEach(function(n){R$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R$e(e,t,r){return(t=L$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L$e(e){var t=M$e(e,"string");return typeof t=="symbol"?t:t+""}function M$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vp.apply(null,arguments)}function xS(e,t){if(e==null)return{};var r,n,a=U$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Q$e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:l}=e;return _.createElement("rect",{x:n,y:a,ry:l,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Ioe(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:l}=t,c=xS(t,F$e),u=ll(c),{offset:d}=u,f=xS(u,O$e);r=_.createElement("line",Vp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:l}))}return r}function H$e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,l=xS(e,D$e),c=a.map((u,d)=>{var f=Jo(Jo({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Ioe(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function V$e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,l=xS(e,P$e),c=a.map((u,d)=>{var f=Jo(Jo({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Ioe(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function z$e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return _.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function $$e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],g=m?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return _.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var G$e=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return xae(HL(Jo(Jo(Jo({},Ym.defaultProps),r),{},{ticks:vae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},K$e=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return xae(HL(Jo(Jo(Jo({},Ym.defaultProps),r),{},{ticks:vae(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},q$e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function p2(e){var t=f8(),r=h8(),n=Cae(),a=Jo(Jo({},Yu(e,q$e)),{},{x:dr(e.x)?e.x:n.left,y:dr(e.y)?e.y:n.top,width:dr(e.width)?e.width:n.width,height:dr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=a,g=uc(),x=or(T=>AG(T,"xAxis",s,g)),v=or(T=>AG(T,"yAxis",i,g));if(!dr(u)||u<=0||!dr(d)||d<=0||!dr(l)||l!==+l||!dr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||G$e,w=a.horizontalCoordinatesGenerator||K$e,{horizontalPoints:N,verticalPoints:B}=a;if((!N||!N.length)&&typeof w=="function"){var k=h&&h.length,F=w({yAxis:v?Jo(Jo({},v),{},{ticks:k?h:v.ticks}):void 0,width:t,height:r,offset:n},k?!0:f);vw(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(N=F)}if((!B||!B.length)&&typeof y=="function"){var E=m&&m.length,S=y({xAxis:x?Jo(Jo({},x),{},{ticks:E?m:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);vw(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(B=S)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(Q$e,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),_.createElement(z$e,Vp({},a,{horizontalPoints:N})),_.createElement($$e,Vp({},a,{verticalPoints:B})),_.createElement(H$e,Vp({},a,{offset:n,horizontalPoints:N,xAxis:x,yAxis:v})),_.createElement(V$e,Vp({},a,{offset:n,verticalPoints:B,xAxis:x,yAxis:v})))}p2.displayName="CartesianGrid";function jK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jK(Object(r),!0).forEach(function(n){W$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W$e(e,t,r){return(t=X$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X$e(e){var t=Y$e(e,"string");return typeof t=="symbol"?t:t+""}function Y$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J$e={xAxis:{},yAxis:{},zAxis:{}},Foe=Zc({name:"cartesianAxis",initialState:J$e,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=BK(BK({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Z$e,removeXAxis:eGe,addYAxis:tGe,removeYAxis:rGe,addZAxis:vmt,removeZAxis:bmt,updateYAxisWidth:nGe}=Foe.actions,aGe=Foe.reducer,sGe=["children"],iGe=["dangerouslySetInnerHTML","ticks"];function Ooe(e,t,r){return(t=oGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oGe(e){var t=lGe(e,"string");return typeof t=="symbol"?t:t+""}function lGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uO.apply(null,arguments)}function Doe(e,t){if(e==null)return{};var r,n,a=cGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uGe(e){var t=$a(),r=_.useMemo(()=>{var{children:s}=e,i=Doe(e,sGe);return i},[e]),n=or(s=>Vh(s,r.id)),a=r===n;return _.useEffect(()=>(t(Z$e(r)),()=>{t(eGe(r))}),[r,t]),a?e.children:null}var dGe=e=>{var{xAxisId:t,className:r}=e,n=or(Eae),a=uc(),s="xAxis",i=or(m=>lb(m,s,t,a)),l=or(m=>gie(m,s,t,a)),c=or(m=>fie(m,t)),u=or(m=>AUe(m,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Doe(e,iGe);return _.createElement(Ym,uO({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:vn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l}))},AGe=e=>{var t,r,n,a,s;return _.createElement(uGe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},_.createElement(dGe,e))};class Sg extends _.Component{render(){return _.createElement(AGe,this.props)}}Ooe(Sg,"displayName","XAxis");Ooe(Sg,"defaultProps",{allowDataOverflow:Fc.allowDataOverflow,allowDecimals:Fc.allowDecimals,allowDuplicatedCategory:Fc.allowDuplicatedCategory,height:Fc.height,hide:!1,mirror:Fc.mirror,orientation:Fc.orientation,padding:Fc.padding,reversed:Fc.reversed,scale:Fc.scale,tickCount:Fc.tickCount,type:Fc.type,xAxisId:0});var fGe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},hGe=["dangerouslySetInnerHTML","ticks"];function Poe(e,t,r){return(t=mGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mGe(e){var t=pGe(e,"string");return typeof t=="symbol"?t:t+""}function pGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dO(){return dO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dO.apply(null,arguments)}function gGe(e,t){if(e==null)return{};var r,n,a=xGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vGe(e){var t=$a();return _.useEffect(()=>(t(tGe(e)),()=>{t(rGe(e))}),[e,t]),null}var bGe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=_.useRef(null),l=_.useRef(null),c=or(Eae),u=uc(),d=$a(),f="yAxis",h=or(N=>lb(N,f,r,u)),m=or(N=>hie(N,r)),g=or(N=>fUe(N,r)),x=or(N=>gie(N,f,r,u));if(_.useLayoutEffect(()=>{var N;if(!(a!=="auto"||!m||yL(s)||_.isValidElement(s))){var B=i.current,k=B==null||(N=B.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:F,tickMargin:E}=B.props,S=fGe({ticks:k,label:l.current,labelGapWithTick:5,tickSize:F,tickMargin:E});Math.round(m.width)!==Math.round(S)&&d(nGe({id:r,width:S}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,s,r,a]),m==null||g==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,w=gGe(e,hGe);return _.createElement(Ym,dO({},w,{ref:i,labelRef:l,scale:h,x:g.x,y:g.y,width:m.width,height:m.height,className:vn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},yGe=e=>{var t,r,n,a,s;return _.createElement(_.Fragment,null,_.createElement(vGe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),_.createElement(bGe,e))},wGe={allowDataOverflow:Oc.allowDataOverflow,allowDecimals:Oc.allowDecimals,allowDuplicatedCategory:Oc.allowDuplicatedCategory,hide:!1,mirror:Oc.mirror,orientation:Oc.orientation,padding:Oc.padding,reversed:Oc.reversed,scale:Oc.scale,tickCount:Oc.tickCount,type:Oc.type,width:Oc.width,yAxisId:0};class kg extends _.Component{render(){return _.createElement(yGe,this.props)}}Poe(kg,"displayName","YAxis");Poe(kg,"defaultProps",wGe);var nI={exports:{}},aI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TK;function EGe(){if(TK)return aI;TK=1;var e=O1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,l=e.useDebugValue;return aI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=a(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=i(function(){function v(k){if(!y){if(y=!0,w=k,k=f(k),h!==void 0&&g.hasValue){var F=g.value;if(h(F,k))return N=F}return N=k}if(F=N,r(w,k))return F;var E=f(k);return h!==void 0&&h(F,E)?(w=k,F):(w=k,N=E)}var y=!1,w,N,B=d===void 0?null:d;return[function(){return v(u())},B===null?void 0:function(){return v(B())}]},[u,d,f,h]);var x=n(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),l(x),x},aI}var IK;function CGe(){return IK||(IK=1,nI.exports=EGe()),nI.exports}CGe();function NGe(e){e()}function _Ge(){let e=null,t=null;return{clear(){e=null,t=null},notify(){NGe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var FK={notify(){},get:()=>[]};function SGe(e,t){let r,n=FK,a=0,s=!1;function i(x){d();const v=n.subscribe(x);let y=!1;return()=>{y||(y=!0,v(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=_Ge())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=FK)}function h(){s||(s=!0,d())}function m(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return g}var kGe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jGe=kGe(),BGe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TGe=BGe(),IGe=()=>jGe||TGe?_.useLayoutEffect:_.useEffect,FGe=IGe(),sI=Symbol.for("react-redux-context"),iI=typeof globalThis<"u"?globalThis:{};function OGe(){if(!_.createContext)return{};const e=iI[sI]??(iI[sI]=new Map);let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var DGe=OGe();function PGe(e){const{children:t,context:r,serverState:n,store:a}=e,s=_.useMemo(()=>{const c=SGe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=_.useMemo(()=>a.getState(),[a]);FGe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||DGe;return _.createElement(l.Provider,{value:s},t)}var RGe=PGe,LGe=(e,t)=>t,zL=ut([LGe,In,ab,Pi,Fie,zh,p7e,Oi],y7e),$L=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Roe=qu("mouseClick"),Loe=aE();Loe.startListening({actionCreator:Roe,effect:(e,t)=>{var r=e.payload,n=zL(t.getState(),$L(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(CUe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var AO=qu("mouseMove"),Moe=aE();Moe.startListening({actionCreator:AO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=dL(n,n.tooltip.settings.shared),s=zL(n,$L(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(_ie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Nie()))}});function MGe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var OK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Uoe=Zc({name:"rootProps",initialState:OK,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:OK.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),UGe=Uoe.reducer,{updateOptions:QGe}=Uoe.actions,Qoe=Zc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:HGe}=Qoe.actions,VGe=Qoe.reducer,Hoe=qu("keyDown"),Voe=qu("focus"),GL=aE();GL.startListening({actionCreator:Hoe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(AL(a,ub(r))),l=zh(r);if(s==="Enter"){var c=dS(r,"axis","hover",String(a.index));t.dispatch(aO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=mUe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(l==null||h>=l.length||h<0)){var m=dS(r,"axis","hover",String(h));t.dispatch(aO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});GL.startListening({actionCreator:Voe,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=dS(r,"axis","hover",String(s));t.dispatch(aO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var Tu=qu("externalEvent"),zoe=aE();zoe.startListening({actionCreator:Tu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:i7e(r),activeDataKey:Rie(r),activeIndex:Tm(r),activeLabel:Pie(r),activeTooltipIndex:Tm(r),isTooltipActive:o7e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var zGe=ut([cb],e=>e.tooltipItemPayloads),$Ge=ut([zGe,mE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),$oe=qu("touchMove"),Goe=aE();Goe.startListening({actionCreator:$oe,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=dL(n,n.tooltip.settings.shared);if(a==="axis"){var s=zL(n,$L({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(_ie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(yae),d=(i=c.getAttribute(wae))!==null&&i!==void 0?i:void 0,f=$Ge(t.getState(),u,d);t.dispatch(Cie({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var GGe=Gne({brush:c$e,cartesianAxis:aGe,chartData:R7e,errorBars:dze,graphicalItems:GHe,layout:cDe,legend:XDe,options:I7e,polarAxis:UQe,polarOptions:VGe,referenceElements:p$e,rootProps:UGe,tooltip:NUe}),KGe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return OOe({reducer:GGe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Loe.middleware,Moe.middleware,GL.middleware,zoe.middleware,Goe.middleware]),devTools:{serialize:{replacer:MGe},name:"recharts-".concat(r)}})};function Koe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=uc(),s=_.useRef(null);if(a)return r;s.current==null&&(s.current=KGe(t,n));var i=a8;return _.createElement(RGe,{context:i,store:s.current},r)}function qoe(e){var{layout:t,width:r,height:n,margin:a}=e,s=$a(),i=uc();return _.useEffect(()=>{i||(s(iDe(t)),s(oDe({width:r,height:n})),s(sDe(a)))},[s,i,t,r,n,a]),null}function Woe(e){var t=$a();return _.useEffect(()=>{t(QGe(e))},[t,e]),null}var qGe=["children"];function WGe(e,t){if(e==null)return{};var r,n,a=XGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vS.apply(null,arguments)}var YGe={width:"100%",height:"100%"},JGe=_.forwardRef((e,t)=>{var r=f8(),n=h8(),a=kae();if(!f1(r)||!f1(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,_.createElement(zR,vS({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:YGe,ref:t}),s)}),ZGe=e=>{var{children:t}=e,r=or(lk);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return _.createElement(zR,{width:n,height:a,x:i,y:s},t)},DK=_.forwardRef((e,t)=>{var{children:r}=e,n=WGe(e,qGe),a=uc();return a?_.createElement(ZGe,null,r):_.createElement(JGe,vS({ref:t},n),r)});function eKe(){var e=$a(),[t,r]=_.useState(null),n=or(LDe);return _.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Yc(s)&&s!==n&&e(lDe(s))}},[t,e,n]),r}function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tKe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(n){rKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rKe(e,t,r){return(t=nKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nKe(e){var t=aKe(e,"string");return typeof t=="symbol"?t:t+""}function aKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sKe=_.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:g,onTouchStart:x,style:v,width:y}=e,w=$a(),[N,B]=_.useState(null),[k,F]=_.useState(null);U7e();var E=eKe(),S=_.useCallback(D=>{E(D),typeof t=="function"&&t(D),B(D),F(D)},[E,t,B,F]),T=_.useCallback(D=>{w(Roe(D)),w(Tu({handler:s,reactEvent:D}))},[w,s]),L=_.useCallback(D=>{w(AO(D)),w(Tu({handler:u,reactEvent:D}))},[w,u]),R=_.useCallback(D=>{w(Nie()),w(Tu({handler:d,reactEvent:D}))},[w,d]),j=_.useCallback(D=>{w(AO(D)),w(Tu({handler:f,reactEvent:D}))},[w,f]),P=_.useCallback(()=>{w(Voe())},[w]),M=_.useCallback(D=>{w(Hoe(D.key))},[w]),Z=_.useCallback(D=>{w(Tu({handler:i,reactEvent:D}))},[w,i]),V=_.useCallback(D=>{w(Tu({handler:l,reactEvent:D}))},[w,l]),W=_.useCallback(D=>{w(Tu({handler:c,reactEvent:D}))},[w,c]),G=_.useCallback(D=>{w(Tu({handler:h,reactEvent:D}))},[w,h]),K=_.useCallback(D=>{w(Tu({handler:x,reactEvent:D}))},[w,x]),ee=_.useCallback(D=>{w($oe(D)),w(Tu({handler:g,reactEvent:D}))},[w,g]),X=_.useCallback(D=>{w(Tu({handler:m,reactEvent:D}))},[w,m]);return _.createElement(Vie.Provider,{value:N},_.createElement(mne.Provider,{value:k},_.createElement("div",{className:vn("recharts-wrapper",n),style:tKe({position:"relative",cursor:"default",width:y,height:a},v),onClick:T,onContextMenu:Z,onDoubleClick:V,onFocus:P,onKeyDown:M,onMouseDown:W,onMouseEnter:L,onMouseLeave:R,onMouseMove:j,onMouseUp:G,onTouchEnd:X,onTouchMove:ee,onTouchStart:K,ref:S},r)))}),iKe=["children","className","width","height","style","compact","title","desc"];function oKe(e,t){if(e==null)return{};var r,n,a=lKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xoe=_.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:l,title:c,desc:u}=e,d=oKe(e,iKe),f=ll(d);return l?_.createElement(DK,{otherAttributes:f,title:c,desc:u},r):_.createElement(sKe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(DK,{otherAttributes:f,title:c,desc:u,ref:t},_.createElement(x$e,null,r)))}),cKe=["width","height"];function fO(){return fO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fO.apply(null,arguments)}function uKe(e,t){if(e==null)return{};var r,n,a=dKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AKe={top:5,right:5,bottom:5,left:5},fKe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:AKe,reverseStackOrder:!1,syncMethod:"index"},hKe=_.forwardRef(function(t,r){var n,a=Yu(t.categoricalChartProps,fKe),{width:s,height:i}=a,l=uKe(a,cKe);if(!f1(s)||!f1(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(Koe,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},_.createElement(koe,{chartData:h.data}),_.createElement(qoe,{width:s,height:i,layout:a.layout,margin:a.margin}),_.createElement(Woe,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),_.createElement(Xoe,fO({},l,{width:s,height:i,ref:r})))}),mKe=["axis","item"],g2=_.forwardRef((e,t)=>_.createElement(hKe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mKe,tooltipPayloadSearcher:bL,categoricalChartProps:e,ref:t}));function pKe(e){var t=$a();return _.useEffect(()=>{t(HGe(e))},[t,e]),null}var gKe=["width","height","layout"];function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hO.apply(null,arguments)}function xKe(e,t){if(e==null)return{};var r,n,a=vKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bKe={top:5,right:5,bottom:5,left:5},yKe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Yoe=_.forwardRef(function(t,r){var n,a=Yu(t.categoricalChartProps,yKe),{width:s,height:i,layout:l}=a,c=xKe(a,gKe);if(!f1(s)||!f1(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return _.createElement(Koe,{preloadedState:{options:m},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},_.createElement(koe,{chartData:a.data}),_.createElement(qoe,{width:s,height:i,layout:l,margin:a.margin}),_.createElement(Woe,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),_.createElement(pKe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),_.createElement(Xoe,hO({width:s,height:i},c,{ref:r})))}),wKe=["item"],EKe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},KL=_.forwardRef((e,t)=>{var r=Yu(e,EKe);return _.createElement(Yoe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:wKe,tooltipPayloadSearcher:bL,categoricalChartProps:r,ref:t})}),CKe=["axis"],NKe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_Ke=_.forwardRef((e,t)=>{var r=Yu(e,NKe);return _.createElement(Yoe,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:CKe,tooltipPayloadSearcher:bL,categoricalChartProps:r,ref:t})});const B0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],RK={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},fy="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",ho="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",jc="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",oI="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",lI="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",cI="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",fN="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",SKe="from-sky-500 to-indigo-500",kKe="from-emerald-500 to-lime-500",jKe="from-amber-500 to-rose-500",BKe="from-fuchsia-500 to-purple-600",uI={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:$u,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:Gee,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:Bi,dot:"bg-emerald-500"}},TKe=e=>{const t=uI[e].icon;return o.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${uI[e].badge}`,children:[o.jsx("span",{className:`h-2 w-2 rounded-full ${uI[e].dot}`}),o.jsx(t,{className:"h-4 w-4"})," ",e]})},IKe=()=>{var K,ee;const[e,t]=_.useState("registro"),[r,n]=_.useState([]),[a,s]=_.useState(RK),[i,l]=_.useState(null),[c,u]=_.useState(null),[d,f]=_.useState(!1),[h,m]=_.useState(""),[g,x]=_.useState(""),[v,y]=_.useState(""),[w,N]=_.useState(""),B=_.useMemo(()=>Yf[a.dimension]??[],[a.dimension]),k=_.useCallback(async()=>{f(!0);try{const X=await s6e();n(X)}catch(X){console.error(X),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);_.useEffect(()=>{k()},[k]);const F=X=>{const{name:D,value:Q}=X.target;s(z=>({...z,[D]:Q}))},E=X=>{const D=X.split(",").map(Q=>Q.trim()).filter(Boolean);s(Q=>({...Q,indicadores:D}))},S=X=>{const D=X.split(",").map(Q=>Q.trim()).filter(Boolean);s(Q=>({...Q,enlaces:D}))},T=()=>{s(RK),l(null),u(null)},L=async X=>{if(X.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensión, subdimensión, descripción y fecha de cumplimiento son obligatorios.");return}try{i?await o6e(i,a):await i6e(a),await k(),T(),t("seguimiento")}catch(D){console.error(D),u("Error al guardar la acción.")}},R=X=>{l(X.id),s({...X,enlaces:X.enlaces??[],indicadores:X.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},j=async X=>{confirm("¿Eliminar esta acción?")&&(await l6e(X),await k())},P=_.useMemo(()=>r.filter(X=>{const D=!h||X.responsable.toLowerCase().includes(h.toLowerCase())||X.descripcion.toLowerCase().includes(h.toLowerCase())||X.subdimension.toLowerCase().includes(h.toLowerCase()),Q=!g||X.dimension===g,z=!v||X.subdimension===v,J=!w||X.estado===w;return D&&Q&&z&&J}),[r,h,g,v,w]),M=_.useMemo(()=>{const X=new Map;return r.forEach(D=>X.set(D.dimension,(X.get(D.dimension)??0)+1)),Array.from(X.entries()).map(([D,Q])=>({name:D,value:Q}))},[r]),Z=_.useMemo(()=>{const X=new Map;return r.forEach(D=>X.set(D.estado,(X.get(D.estado)??0)+1)),Array.from(X.entries()).map(([D,Q])=>({name:D,value:Q}))},[r]),V=_.useMemo(()=>{const X=r.map(D=>D.avance??0);return X.length?Math.round(X.reduce((D,Q)=>D+Q,0)/X.length):0},[r]),W=_.useMemo(()=>{const X=new Map;return r.forEach(D=>X.set(D.subdimension,(X.get(D.subdimension)??0)+1)),Array.from(X.entries()).map(([D,Q])=>({name:D,value:Q})).sort((D,Q)=>Q.value-D.value).slice(0,6)},[r]),G=()=>{const X=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],D=r.map(se=>[se.id,se.fechaRegistro,se.responsable,se.dimension,se.subdimension,se.descripcion.replace(/\n/g," "),se.objetivos??"",(se.indicadores??[]).join("|"),se.cobertura??"",se.fechaInicio??"",se.fechaCumplimiento,se.estado,se.avance??0,(se.enlaces??[]).join("|")]),Q=[X.join(","),...D.map(se=>se.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),z=new Blob([Q],{type:"text/csv;charset=utf-8"}),J=URL.createObjectURL(z),te=document.createElement("a");te.href=J,te.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,te.click(),URL.revokeObjectURL(J)};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),o.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[o.jsx(Wp,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),o.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx(S2e,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensión/Subdimensión."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[o.jsx(iF,{className:"h-4 w-4"})," Refrescar"]}),o.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[o.jsx(Cm,{className:"h-4 w-4"})," CSV"]})]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("button",{onClick:()=>t("registro"),className:`${oI} ${e==="registro"?lI:cI}`,children:[o.jsx(mg,{className:"h-4 w-4"})," Registro"]}),o.jsxs("button",{onClick:()=>t("seguimiento"),className:`${oI} ${e==="seguimiento"?lI:cI}`,children:[o.jsx(uw,{className:"h-4 w-4"})," Seguimiento"]}),o.jsxs("button",{onClick:()=>t("dashboard"),className:`${oI} ${e==="dashboard"?lI:cI}`,children:[o.jsx(fwe,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&o.jsx("div",{className:fy,children:o.jsxs("form",{onSubmit:L,className:"p-6 md:p-8 space-y-6",children:[c&&o.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[o.jsx($u,{className:"h-5 w-5"}),o.jsx("span",{children:c})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Fecha de Registro"}),o.jsxs("div",{className:"relative",children:[o.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),o.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:F,className:ho+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Responsable"}),o.jsxs("div",{className:"relative",children:[o.jsx(zw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),o.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:F,className:ho+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Cobertura (niveles/cursos)"}),o.jsxs("div",{className:"relative",children:[o.jsx(s1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),o.jsx("input",{type:"text",name:"cobertura",placeholder:"2°A, 2°B, 3°Mecánica...",value:a.cobertura??"",onChange:F,className:ho+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Dimensión PME"}),o.jsxs("div",{className:"relative",children:[o.jsx(c2e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),o.jsxs("select",{name:"dimension",value:a.dimension,onChange:F,className:ho+" pl-10",children:[o.jsx("option",{value:"",children:"Selecciona una dimensión"}),Object.keys(Yf).map(X=>o.jsx("option",{value:X,children:X},X))]})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:jc,children:"Subdimensión"}),o.jsxs("div",{className:"relative",children:[o.jsx(L4,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),o.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:F,className:ho+" pl-10",disabled:!a.dimension,children:[o.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensión":"Primero elige una dimensión"}),B.map(X=>o.jsx("option",{value:X,children:X},X))]})]})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx("label",{className:jc,children:"Descripción de la Acción"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ld,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),o.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:F,rows:3,placeholder:"¿Qué se hará? ¿Dónde y con quién?",className:ho+" pl-10"})]})]}),o.jsxs("div",{className:"md:col-span-3",children:[o.jsx("label",{className:jc,children:"Objetivos (opcional)"}),o.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:F,rows:2,placeholder:"Propósitos pedagógicos",className:ho})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Indicadores (separados por coma)"}),o.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:X=>E(X.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:ho})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Fecha de Inicio"}),o.jsxs("div",{className:"relative",children:[o.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),o.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:F,className:ho+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Fecha de Cumplimiento"}),o.jsxs("div",{className:"relative",children:[o.jsx(ac,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),o.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:F,className:ho+" pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Estado"}),o.jsx("select",{name:"estado",value:a.estado,onChange:F,className:ho,children:XQ.map(X=>o.jsx("option",{value:X,children:X},X))})]}),o.jsxs("div",{children:[o.jsx("label",{className:jc,children:"Avance (%)"}),o.jsxs("div",{className:"relative",children:[o.jsx(x_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),o.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:F,className:ho+" pl-10"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:jc,children:"Enlaces de evidencia (separados por coma)"}),o.jsxs("div",{className:"relative",children:[o.jsx(aH,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),o.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:X=>S(X.target.value),placeholder:"https://..., https://...",className:ho+" pl-10"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i&&o.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[i?o.jsx($d,{className:"h-4 w-4"}):o.jsx(Cl,{className:"h-4 w-4"}),i?"Guardar cambios":"Registrar acción"]})]})]})}),e==="seguimiento"&&o.jsx("div",{className:fy,children:o.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"relative md:col-span-2",children:[o.jsx($2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),o.jsx("input",{className:ho+" pl-10",placeholder:"Buscar por responsable, descripción o subdimensión...",value:h,onChange:X=>m(X.target.value)})]}),o.jsxs("select",{value:g,onChange:X=>{x(X.target.value),y("")},className:ho,children:[o.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(Yf).map(X=>o.jsx("option",{value:X,children:X},X))]}),o.jsxs("select",{value:v,onChange:X=>y(X.target.value),className:ho,children:[o.jsx("option",{value:"",children:"Todas las subdimensiones"}),(Yf[g]??Object.values(Yf).flat()).map(X=>o.jsx("option",{value:X,children:X},X))]}),o.jsxs("select",{value:w,onChange:X=>N(X.target.value),className:ho,children:[o.jsx("option",{value:"",children:"Todos los estados"}),XQ.map(X=>o.jsx("option",{value:X,children:X},X))]})]}),o.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[o.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensión / Subdimensión"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripción"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),o.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[P.map(X=>{var D,Q;return o.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[o.jsx("td",{className:"px-4 py-4 align-top text-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((Q=(D=X.responsable)==null?void 0:D.slice(0,1))==null?void 0:Q.toUpperCase())||"?"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:X.responsable}),o.jsx("div",{className:"text-xs text-slate-500",children:X.cobertura})]})]})}),o.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[o.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:X.dimension}),o.jsx("div",{className:"text-xs text-slate-500",children:X.subdimension})]}),o.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[o.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:X.descripcion}),X.enlaces&&X.enlaces.length>0&&o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:X.enlaces.map((z,J)=>o.jsxs("a",{href:z,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[o.jsx(aH,{className:"h-3.5 w-3.5"})," Evidencia ",J+1]},J))})]}),o.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[o.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",X.fechaRegistro||"-"]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",X.fechaInicio||"-"]}),o.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",X.fechaCumplimiento]})]}),o.jsx("td",{className:"px-4 py-4 align-top text-center",children:TKe(X.estado)}),o.jsxs("td",{className:"px-4 py-4 align-top",children:[o.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(X.avance??0,0),100)}%`}})}),o.jsxs("div",{className:"text-xs text-center mt-1",children:[X.avance??0,"%"]})]}),o.jsx("td",{className:"px-4 py-4 align-top text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[o.jsx("button",{onClick:()=>R(X),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:o.jsx(XP,{className:"h-5 w-5 text-amber-600"})}),o.jsx("button",{onClick:()=>j(X.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:o.jsx(xi,{className:"h-5 w-5 text-rose-600"})})]})})]},X.id)}),P.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:`${fN} ${SKe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Mu,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),o.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),o.jsx("div",{className:`${fN} ${kKe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Bi,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),o.jsx("div",{className:"text-2xl font-black",children:((K=Z.find(X=>X.name==="Cumplida"))==null?void 0:K.value)??0})]})]})}),o.jsx("div",{className:`${fN} ${jKe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Gee,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),o.jsx("div",{className:"text-2xl font-black",children:((ee=Z.find(X=>X.name==="En Proceso"))==null?void 0:ee.value)??0})]})]})}),o.jsx("div",{className:`${fN} ${BKe}`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(x_,{className:"h-10 w-10 opacity-90"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),o.jsxs("div",{className:"text-2xl font-black",children:[V,"%"]})]})]})})]}),o.jsxs("div",{className:fy+" p-5",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensión"})}),o.jsx("div",{className:"h-64",children:o.jsx(ih,{width:"100%",height:"100%",children:o.jsxs(g2,{data:M,children:[o.jsx(p2,{strokeDasharray:"3 3"}),o.jsx(Sg,{dataKey:"name",hide:!0}),o.jsx(kg,{allowDecimals:!1}),o.jsx(sh,{}),o.jsx(E1,{dataKey:"value",children:M.map((X,D)=>o.jsx(Im,{fill:B0[D%B0.length]},D))})]})})}),o.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:M.map((X,D)=>o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:B0[D%B0.length]}}),o.jsx("span",{className:"flex-1",children:X.name}),o.jsx("span",{className:"font-semibold",children:X.value})]},D))})]}),o.jsxs("div",{className:fy+" p-5",children:[o.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribución por estado"}),o.jsx("div",{className:"h-64",children:o.jsx(ih,{width:"100%",height:"100%",children:o.jsxs(KL,{children:[o.jsx(Tk,{data:Z,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:Z.map((X,D)=>o.jsx(Im,{fill:B0[D%B0.length]},D))}),o.jsx(Z1,{}),o.jsx(sh,{})]})})})]}),o.jsxs("div",{className:fy+" p-5",children:[o.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones más trabajadas"}),o.jsxs("ul",{className:"space-y-2",children:[W.map((X,D)=>o.jsxs("li",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:B0[D%B0.length]}}),X.name]}),o.jsx("span",{className:"font-semibold",children:X.value})]},D)),W.length===0&&o.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},FKe="modulepreload",OKe=function(e){return"/"+e},LK={},rc=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=i(r.map(u=>{if(u=OKe(u),u in LK)return;LK[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":FKe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};var MK;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(MK||(MK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UK;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(UK||(UK={}));var QK;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(QK||(QK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=["user","model","function","system"];var VK;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(VK||(VK={}));var zK;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zK||(zK={}));var $K;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})($K||($K={}));var GK;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(GK||(GK={}));var ww;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ww||(ww={}));var KK;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(KK||(KK={}));var qK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(qK||(qK={}));var WK;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(WK||(WK={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Dx extends el{constructor(t,r){super(t),this.response=r}}class Joe extends el{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class um extends el{}class Zoe extends el{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DKe="https://generativelanguage.googleapis.com",PKe="v1beta",RKe="0.24.1",LKe="genai-js";var jg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(jg||(jg={}));class MKe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||PKe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||DKe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function UKe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${LKe}/${RKe}`),t.join(" ")}async function QKe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",UKe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new um(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new um(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new um(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function HKe(e,t,r,n,a,s){const i=new MKe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},GKe(s)),{method:"POST",headers:await QKe(i),body:a})}}async function xE(e,t,r,n,a,s={},i=fetch){const{url:l,fetchOptions:c}=await HKe(e,t,r,n,a,s);return VKe(l,c,i)}async function VKe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){zKe(a,e)}return n.ok||await $Ke(n,e),n}function zKe(e,t){let r=e;throw r.name==="AbortError"?(r=new Zoe(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Joe||e instanceof um||(r=new el(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function $Ke(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new Joe(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function GKe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),m5(e.candidates[0]))throw new Dx(`${M0(e)}`,e);return KKe(e)}else if(e.promptFeedback)throw new Dx(`Text not available. ${M0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),m5(e.candidates[0]))throw new Dx(`${M0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),XK(e)[0]}else if(e.promptFeedback)throw new Dx(`Function call not available. ${M0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),m5(e.candidates[0]))throw new Dx(`${M0(e)}`,e);return XK(e)}else if(e.promptFeedback)throw new Dx(`Function call not available. ${M0(e)}`,e)},e}function KKe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function XK(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const qKe=[ww.RECITATION,ww.SAFETY,ww.LANGUAGE];function m5(e){return!!e.finishReason&&qKe.includes(e.finishReason)}function M0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];m5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function x2(e){return this instanceof x2?(this.v=e,this):new x2(e)}function WKe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(m){return new Promise(function(g,x){s.push([h,m,g,x])>1||l(h,m)})})}function l(h,m){try{c(n[h](m))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof x2?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function XKe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=ZKe(t),[n,a]=r.tee();return{stream:JKe(n),response:YKe(a)}}async function YKe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return qL(eqe(t));t.push(a)}}function JKe(e){return WKe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield x2(r.read());if(a)break;yield yield x2(qL(n))}})}function ZKe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:l})=>{if(l){if(a.trim()){n.error(new el("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(YK),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new el(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(YK)}return s()}).catch(i=>{let l=i;throw l.stack=i.stack,l.name==="AbortError"?l=new Zoe("Request aborted when reading from the stream"):l=new el("Error reading from the stream"),l})}}})}function eqe(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const l of s.content.parts)l.text&&(i.text=l.text),l.functionCall&&(i.functionCall=l.functionCall),l.executableCode&&(i.executableCode=l.executableCode),l.codeExecutionResult&&(i.codeExecutionResult=l.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ele(e,t,r,n){const a=await xE(t,jg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return XKe(a)}async function tle(e,t,r,n){const s=await(await xE(t,jg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:qL(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rle(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function v2(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return tqe(t)}function tqe(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new el("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new el("No content is provided for sending chat message.");return n?t:r}function rqe(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new um("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=v2(e);n.contents=[s]}return{generateContentRequest:n}}function JK(e){let t;return e.contents?t=e:t={contents:[v2(e)]},e.systemInstruction&&(t.systemInstruction=rle(e.systemInstruction)),t}function nqe(e){return typeof e=="string"||Array.isArray(e)?{content:v2(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],aqe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function sqe(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new el(`First content should be with role 'user', got ${n}`);if(!HK.includes(n))throw new el(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(HK)}`);if(!Array.isArray(a))throw new el("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new el("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of ZK)c in l&&(s[c]+=1);const i=aqe[n];for(const l of ZK)if(!i.includes(l)&&s[l]>0)throw new el(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function eq(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq="SILENT_ERROR";class iqe{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(sqe(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,l,c;await this._sendPromise;const u=v2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>tle(this._apiKey,this.model,d,f)).then(m=>{var g;if(eq(m.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=M0(m.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,l,c;await this._sendPromise;const u=v2(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=ele(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(m=>{throw new Error(tq)}).then(m=>m.response).then(m=>{if(eq(m)){this._history.push(u);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=M0(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==tq&&console.error(m)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oqe(e,t,r,n){return(await xE(t,jg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lqe(e,t,r,n){return(await xE(t,jg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function cqe(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await xE(t,jg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=rle(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=JK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return tle(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=JK(t),s=Object.assign(Object.assign({},this._requestOptions),r);return ele(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new iqe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=rqe(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return oqe(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=nqe(t),a=Object.assign(Object.assign({},this._requestOptions),r);return lqe(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return cqe(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new el("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new rq(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new um("Cached content must contain a `name` field.");if(!t.model)throw new um("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new um(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new rq(this.apiKey,s,n)}}const Ik="presentacionesDidacticas",uqe=async(e,t)=>{const r=sr(vt(wr,Ik)),n={...e,id:r.id,userId:t,fechaCreacion:new Date().toISOString(),estado:"generando"};return await bi(r,n),r.id},nq=async(e,t)=>{const r=sr(wr,Ik,e);await cc(r,t)},dqe=async e=>{await Ra(sr(wr,Ik,e))},Aqe=(e,t)=>{const r=zt(vt(wr,Ik),Br("userId","==",e),hr("fechaCreacion","desc"));return fr(r,n=>{const a=n.docs.map(s=>s.data());t(a)})},fqe=async e=>{let t=null;try{const r=Ug.currentUser;if(!r)throw new Error("Usuario no autenticado. Debe iniciar sesión para generar presentaciones.");console.log("Estado de autenticación:",{isLoggedIn:!!r,uid:r.uid,email:r.email});const n=await r.getIdToken(!0);console.log("Token actualizado correctamente, longitud:",n.length);const a=R0($P,"generateSlides"),s={tema:e.tema,asignatura:e.asignatura,objetivosAprendizaje:e.objetivosAprendizaje,curso:e.curso,numDiapositivas:e.numDiapositivas,estilo:e.estilo,incluirImagenes:e.incluirImagenes,contenidoFuente:e.contenidoFuente||"",enlaces:e.enlaces||[],planificacionId:e.planificacionId,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,userId:r.uid};t=await uqe({...e,userId:r.uid,fechaCreacion:new Date().toISOString(),estado:"generando",urlPresentacion:""},r.uid),console.log("Presentación guardada con ID:",t),console.log("Enviando solicitud a generateSlides con usuario:",r.uid),console.log("Datos enviados:",s);const i=await a(s);console.log("Respuesta de función:",i);const l=i.data;if(l.presentacionId&&l.url)try{const c={estado:"completada",urlPresentacion:l.url};l.demoMode&&(c.mensajeError="NOTA: Esta es una versión de demostración. La presentación no existe realmente."),await nq(t,c)}catch(c){console.warn("Error al actualizar la presentación en Firestore:",c)}return l}catch(r){if(console.error("Error al generar presentación:",r),console.error("Código:",r==null?void 0:r.code,"Mensaje:",r==null?void 0:r.message,"Detalles:",r==null?void 0:r.details),t)try{await nq(t,{estado:"error",mensajeError:(r==null?void 0:r.message)||"Error desconocido al generar la presentación"}),console.warn(`Presentación ${t} marcada como fallida`)}catch(n){console.error("Error al actualizar el estado de la presentación:",n)}throw r}},dI=async()=>{var t,r,n,a;const e=Ug.currentUser;if(!e)throw new Error("Usuario no autenticado. Debe iniciar sesión para verificar la autorización.");try{const s=await e.getIdToken(),i=await fetch("https://us-central1-planificador-145df.cloudfunctions.net/checkGoogleSlidesAuth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({})});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const l=await i.json();return{isAuthorized:l.isAuthorized||!1,message:l.message||"Estado de autorización desconocido"}}catch(s){if(console.error("Error al verificar autorización de Google Slides:",s),(t=s.message)!=null&&t.includes("cors")||(r=s.message)!=null&&r.includes("blocked")||(n=s.message)!=null&&n.includes("CORS")||(a=s.message)!=null&&a.includes("fetch")){console.warn("Error de red detectado, usando método alternativo para verificar autorización");try{const i=zt(vt(wr,"userTokens"),Br("userId","==",e.uid)),l=await Tn(i);return{isAuthorized:!l.empty,message:l.empty?"Usuario no ha autorizado Google Slides (verificación directa)":"Usuario autorizado para Google Slides (verificación directa)"}}catch(i){return console.error("Error en verificación alternativa:",i),{isAuthorized:!1,message:"Error al verificar autorización"}}}return{isAuthorized:!1,message:`Error al verificar autorización: ${s.message||"Error desconocido"}`}}},hqe=()=>{const[e,t]=_.useState(!1),[r,n]=_.useState(null),a=async()=>{t(!0);try{const i=await R0($P,"testGemini")();n(i.data)}catch(s){console.error("Error calling testGemini:",s),n({success:!1,error:s.message||"Error desconocido",type:"client_error"})}t(!1)};return o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🧪 Prueba de Gemini AI"}),o.jsx("button",{onClick:a,disabled:e,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50 mb-4",children:e?"Probando...":"Probar Gemini 1.5 Pro"}),r&&o.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Resultado:"}),o.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(r,null,2)}),r.success?o.jsx("div",{className:"mt-2 text-green-600",children:"✅ Gemini AI está funcionando correctamente"}):o.jsxs("div",{className:"mt-2 text-red-600",children:["❌ Problema detectado: ",r.error]})]})]})},mqe=({estilo:e,tema:t="Ejemplo de Presentación"})=>{const n=(()=>{switch(e){case"sobrio":return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]};case"visual":return{colores:{fondo:"bg-blue-50",fondoDiapo:"bg-white",titulo:"text-blue-800",texto:"text-slate-600",acento:"bg-blue-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🎨",descripcion:"Dinámico y colorido, con énfasis en elementos gráficos e infografías",ejemplo:["Mayor uso de elementos visuales","Diagramas y representaciones gráficas","Paleta de colores vibrantes"]};case"academico":return{colores:{fondo:"bg-amber-50",fondoDiapo:"bg-white",titulo:"text-amber-800",texto:"text-slate-700",acento:"bg-amber-100"},fuentes:{titulo:"font-serif",texto:"font-serif"},iconos:"📚",descripcion:"Formal y riguroso, con énfasis en conceptos teóricos",ejemplo:["Estructura académica formal","Referencias y citas bibliográficas","Énfasis en conceptos teóricos"]};case"interactivo":return{colores:{fondo:"bg-green-50",fondoDiapo:"bg-white",titulo:"text-green-800",texto:"text-slate-600",acento:"bg-green-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"🤝",descripcion:"Participativo y colaborativo, con múltiples actividades",ejemplo:["Preguntas y actividades prácticas","Espacios para participación","Dinámicas grupales sugeridas"]};case"profesional":return{colores:{fondo:"bg-indigo-50",fondoDiapo:"bg-white",titulo:"text-indigo-800",texto:"text-slate-600",acento:"bg-indigo-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💼",descripcion:"Corporativo y práctico, enfocado en aplicaciones reales",ejemplo:["Diseño corporativo y estructurado","Casos de estudio prácticos","Aplicaciones en contexto laboral"]};case"creativo":return{colores:{fondo:"bg-purple-50",fondoDiapo:"bg-white",titulo:"text-purple-800",texto:"text-slate-600",acento:"bg-purple-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"💡",descripcion:"Innovador y atractivo, estimula la imaginación",ejemplo:["Diseño creativo no convencional","Elementos visuales llamativos","Enfoque innovador del contenido"]};case"minimalista":return{colores:{fondo:"bg-gray-50",fondoDiapo:"bg-white",titulo:"text-gray-800",texto:"text-gray-600",acento:"bg-gray-100"},fuentes:{titulo:"font-sans",texto:"font-sans"},iconos:"⚪",descripcion:"Simple y esencial, centrado en lo más importante",ejemplo:["Diseño muy simplificado","Amplio espacio en blanco","Solo información esencial"]};default:return{colores:{fondo:"bg-slate-100",fondoDiapo:"bg-white",titulo:"text-slate-800",texto:"text-slate-600",acento:"bg-slate-200"},fuentes:{titulo:"font-serif",texto:"font-sans"},iconos:"🎭",descripcion:"Elegante y minimalista, balanceando profesionalismo con claridad pedagógica",ejemplo:["Título principal en fuente serif","Contenido organizado y claro","Paleta de colores neutros"]}}})();return o.jsxs("div",{className:`p-4 rounded-lg ${n.colores.fondo} transition-all`,children:[o.jsxs("h3",{className:"text-lg font-medium mb-2",children:["Vista previa: Estilo ",e]}),o.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n.descripcion}),o.jsxs("div",{className:"shadow-md rounded-lg overflow-hidden",children:[o.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo} border-b border-gray-200`,children:[o.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-lg font-bold mb-2`,children:t}),o.jsxs("div",{className:`${n.fuentes.texto} ${n.colores.texto} text-sm space-y-2`,children:[o.jsx("p",{children:"Diapositiva de título con subtítulo"}),o.jsx("div",{className:`w-2/3 h-2 ${n.colores.acento} rounded mt-2`})]})]}),o.jsxs("div",{className:`p-4 ${n.colores.fondoDiapo}`,children:[o.jsx("h4",{className:`${n.fuentes.titulo} ${n.colores.titulo} text-md font-bold mb-2`,children:"Características principales"}),o.jsx("ul",{className:`${n.fuentes.texto} ${n.colores.texto} text-xs space-y-1 list-disc pl-4`,children:n.ejemplo.map((a,s)=>o.jsx("li",{children:a},s))}),o.jsx("div",{className:"flex justify-end mt-2",children:o.jsx("span",{className:"text-lg",children:n.iconos})})]})]})]})},pqe=({userId:e,planificaciones:t})=>{const[r,n]=_.useState("presentaciones"),[a,s]=_.useState(null),[i,l]=_.useState({tema:"",objetivosAprendizaje:[],numDiapositivas:8,estilo:"sobrio",incluirImagenes:!0,incluirActividades:!0,incluirEvaluacion:!0,formatoPedagogico:!0,contenidoFuente:"",enlaces:""}),[c,u]=_.useState(!1),[d,f]=_.useState([]),[h,m]=_.useState(!1),[g,x]=_.useState(!1),[v,y]=_.useState(null),[w,N]=_.useState({isAuthorized:!1,message:"Verificando autorización...",checking:!0});_.useEffect(()=>e?Aqe(e,P=>{f(P)}):void 0,[e]),_.useEffect(()=>{const j=async()=>{if(e)try{N(W=>({...W,checking:!0}));const V=await dI();N({isAuthorized:V.isAuthorized,message:V.message,checking:!1})}catch(V){N({isAuthorized:!1,message:`Error: ${V.message||"No se pudo verificar la autorización"}`,checking:!1})}};j();const P=setTimeout(()=>{N(V=>V.checking?{isAuthorized:!1,message:"Timeout al verificar autorización",checking:!1}:V)},1e4);if(new URLSearchParams(window.location.search).get("auth")==="success"){const V=setTimeout(()=>{j()},2e3);return()=>{clearTimeout(V),clearTimeout(P)}}return()=>clearTimeout(P)},[e]),_.useEffect(()=>{const j=async()=>{if(new URLSearchParams(window.location.search).get("auth")==="success"&&!w.isAuthorized)try{N(V=>({...V,checking:!0}));const Z=await dI();N({isAuthorized:Z.isAuthorized,message:Z.message,checking:!1})}catch(Z){N({isAuthorized:!1,message:`Error: ${Z.message||"No se pudo verificar la autorización"}`,checking:!1})}};return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)},[w.isAuthorized]),_.useEffect(()=>{a&&("nombreUnidad"in a?l(j=>({...j,tema:a.nombreUnidad})):"nombreClase"in a&&l(j=>({...j,tema:a.nombreClase})))},[a]);const B=()=>{var j;if(!a)return[];if("lecciones"in a){const P=[];return(j=a.lecciones)==null||j.forEach(M=>{M.objetivosAprendizaje&&!P.includes(M.objetivosAprendizaje)&&P.push(M.objetivosAprendizaje)}),P}else if(a.detalleLeccionOrigen)return[a.detalleLeccionOrigen.objetivosAprendizaje];return[]},k=j=>{const{name:P,value:M,type:Z}=j.target;if(Z==="checkbox"){const V=j.target.checked;l(W=>({...W,[P]:V}))}else l(V=>({...V,[P]:M}))},F=j=>{const P=Array.from(j.target.selectedOptions,M=>M.value);l(M=>({...M,objetivosAprendizaje:P}))},E=async j=>{if(j.preventDefault(),!a){y("Debes seleccionar una planificación");return}if(i.objetivosAprendizaje.length===0){y("Debes seleccionar al menos un objetivo de aprendizaje");return}y(null),x(!0);try{const P={planificacionId:a.id,tema:i.tema,curso:a.nivel,asignatura:a.asignatura,objetivosAprendizaje:i.objetivosAprendizaje,numDiapositivas:i.numDiapositivas,estilo:i.estilo,incluirImagenes:i.incluirImagenes,contenidoFuente:i.contenidoFuente,enlaces:i.enlaces?i.enlaces.split(/[\s,]+/).filter(Boolean):[]};console.log("Datos para presentación:",P);const M=await fqe({...P,userId:e});console.log("Resultado de la función:",M),M&&M.url&&console.log("Presentación generada:",M.url)}catch(P){console.error("Error al generar presentación:",P);const M=(P==null?void 0:P.message)||"Error desconocido",Z=(P==null?void 0:P.code)||"unknown";y(`Error (${Z}): ${M}`)}finally{x(!1)}},S=async j=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta presentación?"))try{m(!0),await dqe(j)}catch(P){console.error("Error al eliminar presentación:",P),y("Error al eliminar la presentación")}finally{m(!1)}},T=()=>o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Generar Presentación con IA"}),o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Seleccionar Planificación"}),o.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",value:(a==null?void 0:a.id)||"",onChange:j=>{const P=t.find(M=>M.id===j.target.value);s(P||null)},required:!0,children:[o.jsx("option",{value:"",children:"Seleccione una planificación"}),o.jsx("optgroup",{label:"Unidades",children:t.filter(j=>j.tipo==="Unidad").map(j=>o.jsxs("option",{value:j.id,children:[j.tipo==="Unidad"?j.nombreUnidad:""," - ",j.asignatura," (",j.nivel,")"]},j.id))}),o.jsx("optgroup",{label:"Clases",children:t.filter(j=>j.tipo==="Clase").map(j=>o.jsxs("option",{value:j.id,children:[j.tipo==="Clase"?j.nombreClase:""," - ",j.asignatura," (",j.nivel,")"]},j.id))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tema"}),o.jsx("input",{type:"text",name:"tema",value:i.tema,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Objetivos de Aprendizaje (selecciona al menos uno)"}),o.jsx("select",{multiple:!0,name:"objetivosAprendizaje",value:i.objetivosAprendizaje,onChange:F,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",size:3,required:!0,children:B().map((j,P)=>o.jsx("option",{value:j,children:j},P))}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mantén presionado Ctrl (o Cmd) para seleccionar múltiples opciones"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nº de diapositivas"}),o.jsx("input",{type:"number",name:"numDiapositivas",value:i.numDiapositivas,onChange:k,min:4,max:20,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estilo de Presentación"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:[o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="sobrio"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"sobrio"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"🎭"})}),o.jsx("span",{className:"font-medium",children:"Sobrio"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Elegante y minimalista"})]})}),o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="visual"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"visual"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"🎨"})}),o.jsx("span",{className:"font-medium",children:"Visual"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Colorido y gráfico"})]})}),o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="academico"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"academico"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"📚"})}),o.jsx("span",{className:"font-medium",children:"Académico"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formal y riguroso"})]})}),o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="interactivo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"interactivo"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"🤝"})}),o.jsx("span",{className:"font-medium",children:"Interactivo"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Participativo y dinámico"})]})}),o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="profesional"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"profesional"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"💼"})}),o.jsx("span",{className:"font-medium",children:"Profesional"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Corporativo y práctico"})]})}),o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="creativo"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"creativo"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"💡"})}),o.jsx("span",{className:"font-medium",children:"Creativo"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Innovador y atractivo"})]})}),o.jsx("div",{className:`cursor-pointer border rounded-lg p-3 transition-all ${i.estilo==="minimalista"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700/70"}`,onClick:()=>l(j=>({...j,estilo:"minimalista"})),children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-2xl",children:"⚪"})}),o.jsx("span",{className:"font-medium",children:"Minimalista"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Simple y esencial"})]})})]}),o.jsxs("button",{type:"button",onClick:()=>u(!0),className:"mt-3 w-full flex items-center justify-center gap-2 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-800/40 transition-colors",children:[o.jsx(Dwe,{className:"w-4 h-4"}),o.jsx("span",{children:"Ver ejemplo del estilo seleccionado"})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto",children:[o.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[o.jsxs("h3",{className:"text-lg font-medium",children:["Vista previa de estilo: ",i.estilo]}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(Nm,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-5",children:[o.jsx(mqe,{estilo:i.estilo,tema:i.tema||"Tema de la presentación"}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h4",{className:"font-medium mb-2",children:["Características del estilo ",i.estilo]}),o.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.estilo==="sobrio"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño elegante y profesional"}),o.jsx("li",{children:"Colores neutros y tipografía clásica"}),o.jsx("li",{children:"Énfasis en la claridad y simplicidad"}),o.jsx("li",{children:"Ideal para presentaciones formales"})]}),i.estilo==="visual"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño colorido y dinámico"}),o.jsx("li",{children:"Mayor uso de gráficos e imágenes"}),o.jsx("li",{children:"Énfasis en elementos visuales e infografías"}),o.jsx("li",{children:"Ideal para mantener la atención visual"})]}),i.estilo==="academico"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño formal y riguroso"}),o.jsx("li",{children:"Espacio para citas y referencias"}),o.jsx("li",{children:"Énfasis en conceptos teóricos"}),o.jsx("li",{children:"Ideal para contenido académico complejo"})]}),i.estilo==="interactivo"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño participativo"}),o.jsx("li",{children:"Incluye actividades y preguntas"}),o.jsx("li",{children:"Énfasis en la participación activa"}),o.jsx("li",{children:"Ideal para clases dinámicas"})]}),i.estilo==="profesional"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño corporativo"}),o.jsx("li",{children:"Elementos de casos prácticos"}),o.jsx("li",{children:"Énfasis en aplicaciones reales"}),o.jsx("li",{children:"Ideal para formación profesional"})]}),i.estilo==="creativo"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño no convencional y llamativo"}),o.jsx("li",{children:"Elementos visuales originales"}),o.jsx("li",{children:"Énfasis en despertar la imaginación"}),o.jsx("li",{children:"Ideal para temas creativos o artísticos"})]}),i.estilo==="minimalista"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Diseño extremadamente simplificado"}),o.jsx("li",{children:"Amplio espacio en blanco"}),o.jsx("li",{children:"Énfasis en lo esencial"}),o.jsx("li",{children:"Ideal para conceptos claros y concisos"})]})]})]})]}),o.jsx("div",{className:"p-4 bg-gray-100 dark:bg-slate-700 flex justify-end",children:o.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Cerrar vista previa"})})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"incluirImagenes",name:"incluirImagenes",checked:i.incluirImagenes,onChange:j=>l(P=>({...P,incluirImagenes:j.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"incluirImagenes",className:"text-sm text-gray-700 dark:text-gray-300",children:"🖼️ Incluir sugerencias para imágenes educativas"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"incluirActividades",name:"incluirActividades",checked:i.incluirActividades||!1,onChange:j=>l(P=>({...P,incluirActividades:j.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"incluirActividades",className:"text-sm text-gray-700 dark:text-gray-300",children:"✏️ Incluir actividades y ejercicios prácticos"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"incluirEvaluacion",name:"incluirEvaluacion",checked:i.incluirEvaluacion||!1,onChange:j=>l(P=>({...P,incluirEvaluacion:j.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"incluirEvaluacion",className:"text-sm text-gray-700 dark:text-gray-300",children:"📝 Incluir diapositiva de evaluación/reflexión"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"formatoPedagogico",name:"formatoPedagogico",checked:i.formatoPedagogico||!0,onChange:j=>l(P=>({...P,formatoPedagogico:j.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"formatoPedagogico",className:"text-sm text-gray-700 dark:text-gray-300",children:"📚 Aplicar estructura pedagógica avanzada"})]})]}),o.jsxs("div",{className:"hidden",children:[o.jsx("input",{type:"checkbox",id:"incluirImagenesOld",name:"incluirImagenesOld",checked:i.incluirImagenes,onChange:j=>l(P=>({...P,incluirImagenes:j.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"incluirImagenesOld",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Incluir imágenes libres de derechos"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Texto/recursos fuente (opcional)"}),o.jsx("textarea",{name:"contenidoFuente",value:i.contenidoFuente,onChange:k,rows:3,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"Pega aquí cualquier contenido de referencia para la presentación..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Enlaces (opcional)"}),o.jsx("input",{type:"text",name:"enlaces",value:i.enlaces,onChange:k,className:"w-full p-2 border border-gray-300 rounded-md bg-white dark:bg-slate-700 dark:border-slate-600",placeholder:"URLs separadas por comas o espacios"})]}),v&&o.jsx("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:v}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:g||!a,className:"w-full flex items-center justify-center gap-2 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?o.jsxs(o.Fragment,{children:[o.jsx(vl,{className:"w-4 h-4 animate-spin"}),"Generando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(sF,{className:"w-4 h-4"}),"Generar Presentación"]})})})]})]})}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[o.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Mis Presentaciones"}),o.jsx("div",{className:"space-y-4",children:h?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(vl,{className:"w-8 h-8 animate-spin text-indigo-500"})}):d.length===0?o.jsxs("div",{className:"text-center py-8 space-y-4",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No has generado presentaciones todavía"}),o.jsx("div",{className:"text-sm",children:w.checking?o.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[o.jsx(vl,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Verificando autorización..."})]}):o.jsxs("div",{className:`flex items-center justify-center gap-2 ${w.isAuthorized?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:[o.jsx("span",{children:w.isAuthorized?"✅":"⚠️"}),o.jsx("span",{children:w.message})]})}),!w.checking&&!w.isAuthorized&&o.jsx("div",{className:"flex justify-center",children:o.jsxs("button",{onClick:()=>{const j=`https://us-central1-planificador-145df.cloudfunctions.net/slidesAuthorize?userId=${e}`;window.location.href=j},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(tB,{className:"w-4 h-4"}),o.jsx("span",{children:"Autorizar Google Slides"})]})}),o.jsx("div",{className:"flex justify-center",children:o.jsxs("button",{onClick:async()=>{try{N(P=>({...P,checking:!0}));const j=await dI();N({isAuthorized:j.isAuthorized,message:j.message,checking:!1})}catch(j){N({isAuthorized:!1,message:`Error: ${j.message||"No se pudo verificar la autorización"}`,checking:!1})}},disabled:w.checking,className:`flex items-center gap-2 px-3 py-1 text-sm rounded-lg transition-colors ${w.isAuthorized?"text-green-600 hover:text-green-800 border border-green-300 hover:bg-green-50":"text-gray-600 hover:text-gray-800 border border-gray-300 hover:bg-gray-50"}`,children:[w.checking?o.jsx(vl,{className:"w-3 h-3 animate-spin"}):o.jsx("span",{children:"🔄"}),o.jsx("span",{children:"Verificar estado"})]})})]}):d.map(j=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.tema}),j.estado==="generando"?o.jsxs("span",{className:"flex items-center text-amber-500 text-xs gap-1",children:[o.jsx(vl,{className:"w-3 h-3 animate-spin"}),"Generando"]}):j.estado==="error"?o.jsxs("span",{className:"flex items-center text-red-500 text-xs gap-1",children:[o.jsx(Nm,{className:"w-3 h-3"}),"Error"]}):o.jsxs("span",{className:"flex items-center text-green-500 text-xs gap-1",children:[o.jsx(Bi,{className:"w-3 h-3"}),"Lista"]})]}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[j.asignatura," - ",j.curso]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4 mt-2 flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ac,{className:"w-3 h-3"}),new Date(j.fechaCreacion).toLocaleDateString()]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(rB,{className:"w-3 h-3"}),j.numDiapositivas," diapositivas"]}),o.jsxs("span",{className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full ${j.estilo==="sobrio"?"bg-slate-100 text-slate-700":j.estilo==="visual"?"bg-blue-100 text-blue-700":j.estilo==="academico"?"bg-amber-100 text-amber-700":j.estilo==="interactivo"?"bg-green-100 text-green-700":j.estilo==="profesional"?"bg-indigo-100 text-indigo-700":j.estilo==="creativo"?"bg-purple-100 text-purple-700":(j.estilo==="minimalista","bg-gray-100 text-gray-700")}`,children:[j.estilo==="sobrio"&&"🎭",j.estilo==="visual"&&"🎨",j.estilo==="academico"&&"📚",j.estilo==="interactivo"&&"🤝",j.estilo==="profesional"&&"💼",j.estilo==="creativo"&&"💡",j.estilo==="minimalista"&&"⚪",j.estilo]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Objetivos de Aprendizaje:"}),o.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 dark:text-gray-400",children:j.objetivosAprendizaje.map((P,M)=>o.jsx("li",{className:"truncate",children:P.length>60?P.substring(0,57)+"...":P},M))})]}),j.mensajeError&&o.jsx("div",{className:"mt-2 text-xs italic text-amber-600 dark:text-amber-400",children:j.mensajeError}),o.jsxs("div",{className:"mt-3 flex justify-between",children:[j.estado==="completada"?o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:j.esDemoMode||j.urlPresentacion.includes("example.com")?"#":j.urlPresentacion,onClick:P=>{(j.esDemoMode||j.urlPresentacion.includes("example.com"))&&(P.preventDefault(),alert("Esta es una versión de demostración. En la versión final, aquí verás una presentación real de Google Slides."))},target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-sm ${j.esDemoMode||j.urlPresentacion.includes("example.com")?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,children:[o.jsx(tB,{className:"w-3 h-3"}),j.esDemoMode||j.urlPresentacion.includes("example.com")?"Ver Demo":"Abrir en Google Slides"]}),j.esDemoMode&&j.urlAutorizacion&&o.jsxs("a",{href:j.urlAutorizacion,target:"_blank",rel:"noopener noreferrer",className:"ml-4 inline-flex items-center gap-1 text-sm text-green-600 hover:text-green-800",children:[o.jsx(tB,{className:"w-3 h-3"}),"Autorizar Google Slides"]})]}):o.jsx("span",{className:"text-gray-400 text-sm italic",children:"En progreso..."}),o.jsx("button",{onClick:()=>S(j.id),className:"text-red-500 hover:text-red-700",children:o.jsx(xi,{className:"w-4 h-4"})})]})]},j.id))})]})})]}),L=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[o.jsx(tH,{className:"w-16 h-16 mx-auto text-gray-400"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Sección de Guías Didácticas"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]}),R=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-xl shadow-md text-center",children:[o.jsx(rB,{className:"w-16 h-16 mx-auto text-gray-400"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mt-4",children:"Repositorio de Recursos"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Esta función estará disponible próximamente."})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-1",children:o.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[o.jsxs("button",{onClick:()=>n("presentaciones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="presentaciones"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(sF,{className:"w-4 h-4"}),o.jsx("span",{children:"Presentaciones"})]}),o.jsxs("button",{onClick:()=>n("guias"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="guias"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(tH,{className:"w-4 h-4"}),o.jsx("span",{children:"Guías"})]}),o.jsxs("button",{onClick:()=>n("recursos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${r==="recursos"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(rB,{className:"w-4 h-4"}),o.jsx("span",{children:"Recursos"})]})]})}),o.jsx("div",{className:"mb-6",children:o.jsx(hqe,{})}),o.jsxs("div",{children:[r==="presentaciones"&&T(),r==="guias"&&L(),r==="recursos"&&R()]})]})},vE="planificaciones",nle="actividades_calendario",WL=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion,...t.detallesLeccion?{detallesLeccion:Array.isArray(t.detallesLeccion)?t.detallesLeccion:[]}:{}}},ale=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await hn(vt(ft,vE),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},sle=async(e,t,r)=>{try{const n=sr(ft,vE,e),a=await Rg(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await cc(n,{...t,fechaActualizacion:ir.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},ile=async(e,t)=>{try{const r=sr(ft,vE,e),n=await Rg(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await Ra(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},gqe=async e=>{try{const t=zt(vt(ft,vE),Br("userId","==",e),hr("fechaCreacion","desc"));return(await Tn(t)).docs.map(WL)}catch(t){return console.error("Error al obtener planificaciones:",t),[]}},ole=(e,t)=>{const r=zt(vt(ft,vE),Br("userId","==",e),hr("fechaCreacion","desc"));return fr(r,n=>{try{const a=n.docs.map(WL);console.log(`Recibiendo ${a.length} planificaciones del usuario ${e}`);const s=a.map(i=>i.tipo==="Unidad"&&!Array.isArray(i.detallesLeccion)?(console.warn(`Planificación ${i.id} tiene detallesLeccion inválidos, corrigiendo.`),{...i,detallesLeccion:[]}):i);t(s)}catch(a){console.error("Error procesando datos de planificaciones:",a),t([])}},n=>{console.error("Error en suscripción a planificaciones:",n)})},lle=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:ir.fromDate(new Date),fechaActualizacion:ir.fromDate(new Date)};return(await hn(vt(ft,nle),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},cle=(e,t)=>{const r=zt(vt(ft,nle),Br("userId","==",e),hr("fecha","desc"));return fr(r,n=>{const a=n.docs.map(WL);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},mO=Object.freeze(Object.defineProperty({__proto__:null,deletePlanificacion:ile,getPlanificacionesByUser:gqe,saveActividad:lle,savePlanificacion:ale,subscribeToActividades:cle,subscribeToPlanificaciones:ole,updatePlanificacion:sle},Symbol.toStringTag,{value:"Module"})),xqe=(e,t)=>{const[r,n]=_.useState([]),[a,s]=_.useState(!0),[i,l]=_.useState(null),c=_.useCallback(async()=>{if(!e){console.warn("🛠️ cargarPlanificacionesDirectamente: userId nulo, no se pueden cargar planificaciones"),s(!1),l("No se pudo determinar la identidad del usuario"),n([]);return}try{console.log(`🛠️ Cargando planificaciones directamente para ${e}`);const{getPlanificacionesByUser:m}=await rc(async()=>{const{getPlanificacionesByUser:v}=await Promise.resolve().then(()=>mO);return{getPlanificacionesByUser:v}},void 0),g=await m(e);console.log(`🛠️ Obtenidas ${g.length} planificaciones directamente de Firestore`);const x=g.map(v=>v.tipo==="Unidad"&&!Array.isArray(v.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${v.id}`),{...v,detallesLeccion:[]}):v);n(x),s(!1)}catch(m){console.error("🛠️ Error cargando planificaciones directamente:",m),l(m instanceof Error?m.message:"Error al cargar planificaciones directamente"),s(!1)}},[e]);_.useEffect(()=>{if(!e){console.log("🛠️ usePlanificaciones: userId nulo o vacío, no se cargarán planificaciones"),s(!1),l("ID de usuario no disponible"),n([]);return}console.log(`🛠️ usePlanificaciones: Cargando planificaciones para usuario ${e}`),s(!0),l(null);let m=null;try{m=ole(e,x=>{if(console.log(`🛠️ usePlanificaciones: Recibidos ${x.length} documentos por suscripción`),x.length===0){c();return}const v=x.map(y=>y.tipo==="Unidad"&&!Array.isArray(y.detallesLeccion)?(console.log(`🛠️ Corrigiendo datos de planificación ${y.id}`),{...y,detallesLeccion:[]}):y);n(v),s(!1)})}catch(x){console.error("🛠️ Error en hook usePlanificaciones:",x),l(x instanceof Error?x.message:"Error al cargar planificaciones"),c()}const g=setTimeout(()=>{a&&r.length===0&&(console.log("🛠️ Timeout: cargando planificaciones directamente como respaldo"),c())},5e3);return()=>{m&&m(),clearTimeout(g)}},[e,c]);const u=async m=>{try{return l(null),await ale(m,e)}catch(g){throw l(g.message||"Error al guardar planificación"),g}},d=async(m,g)=>{try{l(null),await sle(m,g,e)}catch(x){throw l(x.message||"Error al actualizar planificación"),x}},f=async m=>{try{l(null),await ile(m,e)}catch(g){throw l(g.message||"Error al eliminar planificación"),g}},h=_.useCallback(async()=>{try{if(!e)return{status:"error",message:"No hay usuario identificado. Datos del usuario no disponibles."};console.log("📊 Diagnóstico - ID de usuario:",e);const{getPlanificacionesByUser:m}=await rc(async()=>{const{getPlanificacionesByUser:y}=await Promise.resolve().then(()=>mO);return{getPlanificacionesByUser:y}},void 0),g=await m(e),x=g.filter(y=>y.tipo==="Unidad"),v=x.filter(y=>!Array.isArray(y.detallesLeccion)||y.detallesLeccion===void 0);if(console.log(`📊 Diagnóstico - Total planificaciones: ${g.length}, Unidades: ${x.length}, Inválidas: ${v.length}`),v.length>0){const{updateDoc:y,doc:w}=await rc(async()=>{const{updateDoc:B,doc:k}=await Promise.resolve().then(()=>d_);return{updateDoc:B,doc:k}},void 0),{db:N}=await rc(async()=>{const{db:B}=await Promise.resolve().then(()=>Yee);return{db:B}},void 0);for(const B of v)await y(w(N,"planificaciones",B.id),{detallesLeccion:[]});return{status:"repaired",message:`Se repararon ${v.length} planificaciones de ${x.length} totales.`}}else if(x.length===0)return{status:"empty",message:`No se encontraron planificaciones de unidad para el usuario ${e}. Cree una nueva planificación.`};return{status:"ok",message:`Todo correcto. ${x.length} planificaciones de unidad encontradas.`}}catch(m){return console.error("📊 Error en diagnóstico:",m),{status:"error",message:`Error: ${m instanceof Error?m.message:"Desconocido"}`}}},[e]);return{planificaciones:r,loading:a,error:i,save:u,update:d,remove:f,diagnosticarYReparar:h}},pO=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},vqe=e=>{const[t,r]=_.useState([]),[n,a]=_.useState(!0),[s,i]=_.useState(null);_.useEffect(()=>{if(!e){a(!1);return}a(!0);try{return cle(e,u=>{r(u),a(!1)})}catch(c){i(c instanceof Error?c.message:"Error al cargar actividades"),a(!1)}},[e]);const l=_.useCallback(async c=>{try{return i(null),await lle(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:l}},bqe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=_.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},l=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),o.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),o.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[o.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),o.jsxs("button",{onClick:l,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},yqe=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=_.useState(e.progreso??0),[l,c]=_.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:l||n}),o.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),l&&o.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),o.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[o.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),o.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-md",children:o.jsxs("p",{className:"font-medium",children:[o.jsx("strong",{children:"Actividades sugeridas:"})," ",d.actividades]})}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),o.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},wqe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=_.useState(e),[l,c]=_.useState(!1);_.useEffect(()=>{console.log("Plan inicial:",e.momentosClase);const h=v=>{if(typeof v=="object"&&v!==null)return JSON.stringify(v);if(typeof v=="string")try{if(v.trim().startsWith("{")){const y=JSON.parse(v);return JSON.stringify(y)}}catch(y){console.log("No es JSON válido:",y)}return String(v)},m=h(e.momentosClase.inicio),g=h(e.momentosClase.desarrollo),x=h(e.momentosClase.cierre);console.log("Contenido procesado - inicio:",m),i(v=>({...v,momentosClase:{inicio:m,desarrollo:g,cierre:x}}))},[e]);const u=h=>{const{name:m,value:g}=h.target,[x,v]=m.split(".");i(x==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[v]:g}}):y=>({...y,[m]:g}))},d=async()=>{c(!0);try{await r((()=>{const m={...s};return Object.keys(m.momentosClase).forEach(g=>{const x=m.momentosClase[g];if(typeof x=="string"&&(x.includes("TIEMPO:")||x.includes("OBJETIVO:")||x.includes("ACTIVIDADES:")))try{const v=x.match(/TIEMPO:\s*(.*?)(?:\n\n|\n$)/s),y=x.match(/OBJETIVO:\s*(.*?)(?:\n\nACTIVIDADES:|\n$)/s);(v||y)&&console.log("Manteniendo formato para visualización")}catch(v){console.error("Error al procesar plan para guardar:",v)}}),m})())}catch(h){console.error("Error al guardar plan de clase:",h)}finally{c(!1)}},f=h=>{if(console.log("Formateando contenido:",typeof h,h!=null&&h.substring?h.substring(0,50):h),typeof h=="string")try{h.trim().startsWith("{")&&(h=JSON.parse(h),console.log("Contenido parseado a objeto:",h))}catch(m){console.log("Error al parsear JSON:",m)}if(typeof h=="object"&&h!==null)try{let m="";if(h.actividades&&Array.isArray(h.actividades)){m=`${h.tiempo?"TIEMPO: "+h.tiempo+`

`:""}`,m+=`${h.objetivo?`OBJETIVO:
`+h.objetivo+`

`:""}`,m+=`ACTIVIDADES:

`,h.actividades.forEach((x,v)=>{m+=`ACTIVIDAD ${v+1}: ${x.nombre||"Sin nombre"}
`,m+=`${x.descripcion||"Sin descripción"}

`;let y="";x.tipo&&(y+=`• Tipo: ${x.tipo}
`),x.recursos&&(y+=`• Recursos: ${x.recursos}
`),x.evaluacion&&(y+=`• Evaluación: ${x.evaluacion}
`),y&&(m+=`${y}
`)});let g="";return Object.keys(h).forEach(x=>{x!=="tiempo"&&x!=="objetivo"&&x!=="actividades"&&(g+=`• ${x.charAt(0).toUpperCase()+x.slice(1)}: ${typeof h[x]=="object"?JSON.stringify(h[x]):h[x]}
`)}),g&&(m+=`
INFORMACIÓN ADICIONAL:
${g}`),m}else{if(typeof h=="string")try{const y=JSON.parse(h);if(y.actividades||y.tiempo||y.objetivo)return f(y)}catch{}const x=JSON.stringify(h,null,2).replace(/[{}"]/g,"").replace(/,$/gm,"").replace(/^\s*\n/gm,"").split(`
`);let v="";return x.forEach(y=>{if(y.trim().startsWith("["))v+=`
`+y.trim()+`
`;else if(y.trim().startsWith("-"))v+="• "+y.trim().substring(1)+`
`;else if(y.includes(":")){const w=y.split(":");if(w.length>=2){const N=w[0].trim(),B=w.slice(1).join(":").trim();["tiempo","duración","objetivo","actividad","tipo","recursos","evaluación"].includes(N.toLowerCase())?v+=`${N.toUpperCase()}: ${B}
`:v+=`${N}: ${B}
`}else v+=y+`
`}else v+=y+`
`}),v}}catch(m){return console.error("Error al formatear contenido:",m),String(h)}return String(h)};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),o.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||l,children:"← Volver"})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-blue-400 dark:border-blue-600",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 p-1.5 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),o.jsx("label",{className:"font-bold text-lg text-blue-700 dark:text-blue-300",children:"Inicio de la Clase"})]}),o.jsx("textarea",{name:"momentosClase.inicio",value:f(s.momentosClase.inicio),onChange:u,rows:5,placeholder:"Describe las actividades iniciales, activación de conocimientos previos, motivación y presentación del objetivo de la clase...",className:"w-full p-3 border border-blue-200 dark:border-blue-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-700 focus:border-blue-300 focus:outline-none transition-all",disabled:a||l})]}),o.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-transparent dark:from-green-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-green-400 dark:border-green-600",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-1.5 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("label",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:"Desarrollo de la Clase"})]}),o.jsx("textarea",{name:"momentosClase.desarrollo",value:f(s.momentosClase.desarrollo),onChange:u,rows:8,placeholder:"Describe las actividades principales de aprendizaje, secuencia didáctica, estrategias de enseñanza, actividades prácticas...",className:"w-full p-3 border border-green-200 dark:border-green-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-green-300 dark:focus:ring-green-700 focus:border-green-300 focus:outline-none transition-all",disabled:a||l})]}),o.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-transparent dark:from-amber-900/30 dark:to-transparent p-4 rounded-lg border-l-4 border-amber-400 dark:border-amber-600",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"bg-amber-100 dark:bg-amber-800 p-1.5 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("label",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:"Cierre de la Clase"})]}),o.jsx("textarea",{name:"momentosClase.cierre",value:f(s.momentosClase.cierre),onChange:u,rows:5,placeholder:"Describe las actividades de cierre, síntesis, metacognición, evaluación formativa y retroalimentación...",className:"w-full p-3 border border-amber-200 dark:border-amber-700 rounded-md bg-white dark:bg-slate-800 focus:ring-2 focus:ring-amber-300 dark:focus:ring-amber-700 focus:border-amber-300 focus:outline-none transition-all",disabled:a||l})]})]}),o.jsx("div",{className:"text-right mt-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:"🗑️ Eliminar Plan"}),o.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||l,children:[l&&o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},Eqe=({userId:e})=>{const{actividades:t,save:r}=vqe(e),[n,a]=_.useState("list"),[s,i]=_.useState(null),[l,c]=_.useState(!1),[u,d]=_.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,m]=_.useState(f);_.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(F){console.error("Error al verificar evento en calendario:",F)}},x=F=>{const{name:E,value:S}=F.target;m(T=>({...T,[E]:S}))},v=(F,E,S)=>{m(T=>({...T,tareas:T.tareas.map(L=>L.id===F?{...L,[E]:S}:L)}))},y=()=>{m(F=>({...F,tareas:[...F.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=F=>{m(E=>({...E,tareas:E.tareas.filter(S=>S.id!==F)}))},N=async F=>{F.preventDefault(),c(!0);const E=`Eres un especialista en objetivos educacionales según el currículum nacional chileno. Basado en la siguiente información de una actividad pedagógica, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(S=>S.descripcion).join(", ")}
    
    El objetivo debe:
    - Ser breve y conciso (máximo 120 caracteres)
    - Empezar con un verbo en infinitivo (como establece el MINEDUC)
    - Enfocarse en el propósito principal de la actividad
    - Estar alineado con los aprendizajes esperados del currículum nacional
    - Ser medible y observable`;try{pO("Planificación - Actividad Calendario");const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new Os(S).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:1024}}).generateContent(E)).response).text(),M={...h,objetivo:P.replace(/(\*\*|\*)/g,"")},Z=await r(M),V={...M,id:Z};i(V),a("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const T={...h,objetivo:"No generado"},L=await r(T),R={...T,id:L};i(R),a("summary")}catch(T){console.error("Error al guardar actividad:",T),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},B=async F=>{if(F)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},k=`
  w-full px-4 py-2.5 rounded-lg border border-slate-200 
  bg-white dark:bg-slate-800 
  text-slate-900 dark:text-slate-100 
  placeholder:text-slate-400 dark:placeholder:text-slate-500
  focus:border-indigo-500 dark:focus:border-indigo-600 
  focus:ring-2 focus:ring-indigo-500/20 dark:focus:ring-indigo-600/20
  focus:outline-none
  transition-colors
  disabled:opacity-50 disabled:cursor-not-allowed
`;return n==="form"?o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:o.jsxs("form",{onSubmit:N,className:"space-y-8",children:[o.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:k,required:!0,disabled:l}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:k,required:!0,disabled:l}),o.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:k,required:!0,disabled:l})]}),o.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:k,required:!0,disabled:l}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicación",className:k,required:!0,disabled:l}),o.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:k,required:!0,disabled:l})]}),o.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:k,disabled:l})]})]}),o.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),o.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:l,children:"+ Agregar Tarea"})]}),o.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((F,E)=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[o.jsx("button",{type:"button",onClick:()=>w(F.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:l,children:"×"}),o.jsx("textarea",{value:F.descripcion,onChange:S=>v(F.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:k,required:!0,disabled:l}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[o.jsx("input",{value:F.responsable,onChange:S=>v(F.id,"responsable",S.target.value),placeholder:"Responsable",className:k,required:!0,disabled:l}),o.jsx("input",{value:F.recursos,onChange:S=>v(F.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:k,disabled:l})]})]},F.id))})]}),o.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[o.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),o.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:l,children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:l,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:l?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[o.jsx("span",{className:"text-2xl",children:"✓"}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),o.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),o.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),o.jsxs("div",{className:"space-y-4 text-sm",children:[o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),o.jsx("span",{children:s.nombre})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),o.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),o.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),o.jsx("p",{children:s.descripcion})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),o.jsx("span",{children:s.ubicacion})]}),o.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[o.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),o.jsx("span",{children:s.participantes})]}),o.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),o.jsx("p",{children:s.recursosGenerales})]}),o.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[o.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),o.jsx("p",{children:s.objetivo})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[o.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),o.jsx("button",{onClick:()=>B(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),o.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),o.jsx("button",{onClick:()=>{a("form"),m(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),o.jsx("div",{className:"space-y-3",children:t.length>0?t.map(F=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:F.nombre}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(F.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",F.ubicacion]})]},F.id)):o.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Cqe=({currentUser:e})=>{const t=(e==null?void 0:e.uid)||(e==null?void 0:e.id)||(e==null?void 0:e.email)||"";console.log("🔑 PlanificacionDocente - Usuario actual:",{uid:e==null?void 0:e.uid,id:e==null?void 0:e.id,email:e==null?void 0:e.email,nombreCompleto:e==null?void 0:e.nombreCompleto,usuarioSeleccionado:t});const r=t&&t.length>0;console.log("🔑 ID de usuario válido:",r);const{planificaciones:n,save:a,update:s,remove:i,loading:l,diagnosticarYReparar:c}=xqe(r?t:null),u={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[d,f]=_.useState(u),[h,m]=_.useState(null),[g,x]=_.useState(!1),[v,y]=_.useState(null),[w,N]=_.useState("unidad"),[B,k]=_.useState(null),[F,E]=_.useState(null),S=_.useMemo(()=>e.asignaturas||[],[e.asignaturas]),T=_.useMemo(()=>{const te=e.cursos||[],se=new Set;return te.forEach(ie=>{ie.startsWith("1º")?se.add("1º Medio"):ie.startsWith("2º")?se.add("2º Medio"):ie.startsWith("3º")?se.add("3º Medio"):ie.startsWith("4º")&&se.add("4º Medio")}),Array.from(se)},[e.cursos]);_.useEffect(()=>{f(te=>({...te,asignatura:S[0]||"",nivel:T[0]||""}))},[S,T]);const L=te=>{const{name:se,value:ie}=te.target;f(le=>({...le,[se]:se==="cantidadClases"?parseInt(ie,10):ie}))},R=()=>{const{asignatura:te,nivel:se,nombreUnidad:ie,contenidos:le,cantidadClases:ue,observaciones:je,ideasParaUnidad:ae}=d;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica siguiendo fielmente las bases curriculares y los objetivos de aprendizaje del Currículum Nacional Chileno (MINEDUC) para ${te} en ${se}. La planificación debe presentarse en formato JSON estructurado.

    **Información Base:**
    - Asignatura: ${te}
    - Nivel: ${se}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${le}"
    - Cantidad de clases para la unidad: ${ue}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${je||"Ninguna"}"
    
    **Orientaciones Curriculares Nacionales:**
    - Asegúrate que los objetivos estén alineados con las Bases Curriculares del MINEDUC para ${te} en ${se}.
    - Contempla los Objetivos de Aprendizaje (OA) oficiales del currículum en línea chileno.
    - Incorpora los Objetivos de Aprendizaje Transversales (OAT) cuando sea apropiado.
    - Para niveles técnico-profesionales, considera los perfiles de egreso de cada especialidad.

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${ue} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},j=async te=>{if(te.preventDefault(),x(!0),y(null),!d.contenidos||!d.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),x(!1);return}try{pO("Planificación - Unidad");const se="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",le=new Os(se).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:8192}}),ue=R(),je={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]};let ke=(await(await le.generateContent([{text:ue}])).response).text();ke.includes("```")&&(console.log("La respuesta contiene delimitadores de código Markdown, limpiando..."),ke=ke.replace(/```json\s*|\s*```/g,"")),console.log("Primeros 50 caracteres del texto limpio:",ke.substring(0,50));const _e=JSON.parse(ke),he={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:d.asignatura,nivel:d.nivel,nombreUnidad:d.nombreUnidad,contenidos:d.contenidos,cantidadClases:d.cantidadClases,observaciones:d.observaciones,ideasParaUnidad:d.ideasParaUnidad,objetivosAprendizaje:_e.objetivosAprendizaje,indicadoresEvaluacion:_e.indicadoresEvaluacion,detallesLeccion:_e.detallesLeccion};if(h)await s(h.id,he),m({...he,id:h.id});else{const Be=await a(he);m({...he,id:Be})}}catch(se){console.error("Error al generar planificación con IA",se),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},P=async(te,se)=>{x(!0),y(null);const ie=`Eres un experto pedagogo chileno especialista en diseño de planes de clase alineados con el currículum nacional. A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${se.asignatura}
    - Nivel: ${se.nivel}
    - Objetivo de la clase: ${te.objetivosAprendizaje}
    - Contenidos: ${te.contenidosConceptuales}
    - Actividades sugeridas: ${te.actividades}
    
    **Orientaciones didácticas**:
    - El plan debe seguir el modelo de diseño instruccional del Ministerio de Educación de Chile.
    - Incluir estrategias de aprendizaje activo y centrado en el estudiante.
    - Incorporar metodologías que desarrollen habilidades del siglo XXI según el currículum chileno.
    - Considerar momentos para activación de conocimientos previos, desarrollo de aprendizajes y metacognición/evaluación.
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{pO("Planificación - Utilizar Clase");const le="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let ke=(await(await new Os(le).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.4,topP:.95,maxOutputTokens:4096}}).generateContent([{text:ie}])).response).text();ke.includes("```")&&(console.log("La respuesta contiene delimitadores de código Markdown, limpiando..."),ke=ke.replace(/```json\s*|\s*```/g,"")),console.log("Primeros 50 caracteres del texto limpio:",ke.substring(0,50));const _e=JSON.parse(ke),he={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:se.asignatura,nivel:se.nivel,contenidos:te.contenidosConceptuales,observaciones:"",nombreClase:te.actividades,duracionClase:80,momentosClase:_e,detalleLeccionOrigen:te};await a(he),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),N("clase")}catch(le){console.error("Error al generar plan de clase con IA",le),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},M=te=>{te.tipo==="Unidad"&&(f({asignatura:te.asignatura,nivel:te.nivel,nombreUnidad:te.nombreUnidad,contenidos:te.contenidos,cantidadClases:te.cantidadClases,observaciones:te.observaciones,ideasParaUnidad:te.ideasParaUnidad||""}),m(te),window.scrollTo({top:0,behavior:"smooth"}))},Z=async te=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await i(te),(h==null?void 0:h.id)===te&&(m(null),f(u))}catch(se){console.error("Error al eliminar planificación:",se),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},V=async te=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await i(te),(B==null?void 0:B.id)===te&&k(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(se){console.error("Error al eliminar plan de clase:",se),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},W=(te,se)=>{h&&E({planId:h.id,lessonIndex:te,lessonData:se})},G=async te=>{if(F)try{const{planId:se,lessonIndex:ie}=F,le=n.find(ae=>ae.id===se&&ae.tipo==="Unidad");if(!le)return;const ue=[...le.detallesLeccion];ue[ie]=te;const je={...le,detallesLeccion:ue};await s(se,je),m(je),E(null)}catch(se){console.error("Error al actualizar lección:",se),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=async()=>{try{console.log("🔄 Recargando planificaciones manualmente...");const{getPlanificacionesByUser:te}=await rc(async()=>{const{getPlanificacionesByUser:ie}=await Promise.resolve().then(()=>mO);return{getPlanificacionesByUser:ie}},void 0);if(!t){console.warn("🔄 No hay userId para recargar planificaciones");return}const se=await te(t);console.log(`🔄 Obtenidas ${se.length} planificaciones frescas`),alert(`Se han encontrado ${se.length} planificaciones en la base de datos. Recargue la página para ver los cambios.`),window.location.reload()}catch(te){console.error("🔄 Error recargando planificaciones:",te),alert("Hubo un error al recargar las planificaciones. Intente recargar la página manualmente.")}},[X,D]=_.useState({visible:!1,ejecutando:!1,resultado:null}),Q=async()=>{D(se=>({...se,ejecutando:!0,resultado:null}));const te=await c();D(se=>({...se,ejecutando:!1,resultado:te}))},z=()=>{var te;return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>D(se=>({...se,visible:!se.visible})),className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-md text-sm",children:"Diagnóstico"}),o.jsxs("button",{onClick:ee,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm flex items-center gap-1",children:[o.jsx(iF,{className:"w-4 h-4"}),o.jsx("span",{children:"Recargar"})]})]})]}),X.visible&&o.jsxs("div",{className:"mb-6 p-4 border border-slate-300 dark:border-slate-600 rounded-lg",children:[o.jsx("h3",{className:"font-bold text-lg mb-2",children:"Herramienta de Diagnóstico"}),o.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Esta herramienta intentará resolver problemas con las planificaciones que no aparecen en el historial."}),X.resultado&&o.jsx("div",{className:`p-3 mb-3 rounded-md ${X.resultado.status==="ok"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":X.resultado.status==="repaired"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:X.resultado.message}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:Q,disabled:X.ejecutando,className:"bg-slate-700 hover:bg-slate-800 text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:X.ejecutando?o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsx("span",{children:"Ejecutar diagnóstico"})}),((te=X.resultado)==null?void 0:te.status)==="repaired"&&o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:"Recargar página"})]})]}),l?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("form",{onSubmit:j,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsx("select",{name:"asignatura",value:d.asignatura,onChange:L,className:K,disabled:g,children:S.length>0?S.map(se=>o.jsx("option",{value:se,children:se},se)):o.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),o.jsx("select",{name:"nivel",value:d.nivel,onChange:L,className:K,disabled:g,children:T.length>0?T.map(se=>o.jsx("option",{value:se,children:se},se)):o.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",name:"nombreUnidad",value:d.nombreUnidad,onChange:L,className:K,placeholder:"Ej: La Célula y sus procesos",disabled:g})]}),o.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[o.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{name:"contenidos",value:d.contenidos,onChange:L,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:K,disabled:g})]}),o.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[o.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),o.jsx("textarea",{name:"ideasParaUnidad",value:d.ideasParaUnidad,onChange:L,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:K,disabled:g})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),o.jsx("input",{type:"number",name:"cantidadClases",value:d.cantidadClases,onChange:L,className:K,min:"1",max:"20",disabled:g})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),o.jsx("textarea",{name:"observaciones",value:d.observaciones,onChange:L,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:K,disabled:g})]})]}),o.jsx("div",{className:"pt-4 text-right",children:o.jsx("button",{type:"submit",disabled:g||l,className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[180px] shadow-md hover:shadow-lg transition-all",children:g?o.jsx(iF,{className:"w-5 h-5 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(Wp,{className:"w-5 h-5"}),o.jsx("span",{children:h?"Regenerar Plan":"Generar con IA"})]})})}),v&&o.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:v})]})]}),h&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),o.jsx(yqe,{plan:h,onEditLesson:W,onUseLesson:P,onUpdatePlan:s,isLoading:g})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),l?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"space-y-4",children:[console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de planificaciones:",n.length),console.log("💾 RENDERIZANDO HISTORIAL - Cantidad de unidades:",n.filter(se=>se.tipo==="Unidad").length),n.length>0?n.filter(se=>se.tipo==="Unidad").map(se=>o.jsx("div",{className:`p-5 border rounded-xl transition-all ${(h==null?void 0:h.id)===se.id?"bg-indigo-50/50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-500/30 shadow-lg shadow-indigo-100/20 dark:shadow-indigo-900/10":"bg-white hover:bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700/50"}`,children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:se.nombreUnidad}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(se.fechaCreacion).toLocaleString("es-CL")]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",se.contenidos]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>M(se),className:"inline-flex items-center gap-1 px-3 py-1.5 text-indigo-700 bg-indigo-50 hover:bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[o.jsx(Qwe,{className:"w-4 h-4"}),o.jsx("span",{children:"Editar"})]}),o.jsxs("button",{onClick:()=>Z(se.id),title:"Eliminar",className:"inline-flex items-center gap-1 px-3 py-1.5 text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-300 dark:bg-red-900/30 dark:hover:bg-red-900/50 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",disabled:g,children:[o.jsx(xi,{className:"w-4 h-4"}),o.jsx("span",{children:"Eliminar"})]})]})]})},se.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})]})]})]})},J=()=>{const te=n.filter(se=>se.tipo==="Clase").sort((se,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(se.fechaCreacion).getTime());return B?o.jsx(wqe,{plan:B,onBack:()=>k(null),onDelete:V,onSave:async se=>{try{await s(se.id,se),k(se)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:g}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-lg border border-slate-100 dark:border-slate-700/50",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Xye,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Planes de Clase"})]}),l?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsx("div",{className:"space-y-4",children:te.length>0?te.map(se=>o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:se.nombreClase}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(se.fechaCreacion).toLocaleString("es-CL")]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",se.contenidos]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>k(se),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},se.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return _.useEffect(()=>{if((async()=>{try{if(console.log("📊 Diagnóstico de planificaciones - Inicio"),console.log(`userId: ${t}`),!t){console.warn("📊 Sin userId, no se pueden obtener planificaciones");return}const{collection:se,query:ie,where:le,getDocs:ue}=await rc(async()=>{const{collection:ke,query:_e,where:he,getDocs:Be}=await Promise.resolve().then(()=>d_);return{collection:ke,query:_e,where:he,getDocs:Be}},void 0),{db:je}=await rc(async()=>{const{db:ke}=await Promise.resolve().then(()=>Yee);return{db:ke}},void 0),ae=ie(se(je,"planificaciones"),le("userId","==",t)),Ne=await ue(ae);if(console.log(`📊 Documentos en Firestore: ${Ne.docs.length}`),Ne.docs.length>0){console.log("📊 Primer documento:",Ne.docs[0].data());const ke=Ne.docs.filter(he=>he.data().tipo==="Unidad");console.log(`📊 Documentos de tipo Unidad: ${ke.length}`);const _e=ke.filter(he=>Array.isArray(he.data().detallesLeccion)&&he.data().detallesLeccion!==void 0);if(console.log(`📊 Unidades con detallesLeccion válidos: ${_e.length}`),ke.length>_e.length){console.log(`📊 Intentando corregir ${ke.length-_e.length} unidades inválidas...`);for(const he of ke){const Be=he.data();if(!Array.isArray(Be.detallesLeccion)||Be.detallesLeccion===void 0)try{console.log(`📊 Corrigiendo documento ${he.id}...`);const{doc:Le,updateDoc:We}=await rc(async()=>{const{doc:xe,updateDoc:Oe}=await Promise.resolve().then(()=>d_);return{doc:xe,updateDoc:Oe}},void 0);await We(Le(je,"planificaciones",he.id),{detallesLeccion:[]}),console.log(`📊 Documento ${he.id} corregido con éxito`)}catch(Le){console.error(`📊 Error al corregir documento ${he.id}:`,Le)}}}}console.log("📊 Diagnóstico de planificaciones - Finalizado")}catch(se){console.error("📊 Error en diagnóstico de planificaciones:",se)}})(),!l){console.log(`🔍 Verificando ${n.length} planificaciones recibidas...`),console.log("🔍 Tipos de planificaciones:",n.map(ie=>ie.tipo));const se=n.filter(ie=>ie.tipo==="Unidad"&&(!Array.isArray(ie.detallesLeccion)||ie.detallesLeccion===void 0));se.length>0&&(console.warn(`🔍 Encontradas ${se.length} unidades con formato inválido`),se.forEach(async ie=>{try{await s(ie.id,{...ie,detallesLeccion:[]}),console.log(`🔍 Reparada planificación ${ie.id}`)}catch(le){console.error(`🔍 Error al reparar planificación ${ie.id}:`,le)}}))}},[t,n,l,s]),e?r?o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx(Kee,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación Docente"})]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-2",children:o.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[o.jsxs("button",{onClick:()=>N("unidad"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="unidad"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(Gc,{className:"w-4 h-4"}),o.jsx("span",{children:"Unidad"})]}),o.jsxs("button",{onClick:()=>N("clase"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="clase"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(sEe,{className:"w-4 h-4"}),o.jsx("span",{children:"Clase"})]}),o.jsxs("button",{onClick:()=>N("calendario"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="calendario"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(ac,{className:"w-4 h-4"}),o.jsx("span",{children:"Actividades Calendario"})]}),o.jsxs("button",{onClick:()=>N("materiales"),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium text-sm transition-all ${w==="materiales"?"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[o.jsx(sF,{className:"w-4 h-4"}),o.jsx("span",{children:"Mis Materiales"})]})]})}),w==="unidad"&&z(),w==="clase"&&J(),w==="calendario"&&o.jsx(Eqe,{userId:t}),w==="materiales"&&o.jsx(pqe,{userId:t,planificaciones:n}),F&&o.jsx(bqe,{lesson:F.lessonData,onClose:()=>E(null),onSave:G,isLoading:g})]}):o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg p-8 max-w-2xl mx-auto my-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-amber-800 dark:text-amber-300 mb-4",children:"Error de identificación de usuario"}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-md p-4 mb-4 overflow-auto max-h-40",children:o.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:JSON.stringify(e,null,2)})}),o.jsx("p",{className:"text-amber-700 dark:text-amber-400 mb-4",children:"No se pudo determinar su identificador de usuario para cargar las planificaciones. Este problema puede deberse a:"}),o.jsxs("ul",{className:"list-disc pl-5 text-amber-700 dark:text-amber-400 mb-6 space-y-2",children:[o.jsx("li",{children:"La sesión no se ha inicializado correctamente"}),o.jsx("li",{children:"Su cuenta no tiene asignado un ID válido"}),o.jsx("li",{children:"Hay un problema en la sincronización con la base de datos"})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-600 hover:bg-amber-700 text-white py-2 px-6 rounded-md transition-colors",children:"Recargar aplicación"})})]}):o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No se recibieron datos de usuario"})]})})},Fk="events",Nqe=async()=>{try{const e=zt(vt(wr,Fk),hr("date","asc"));return(await Tn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},_qe=async e=>{try{return{id:(await hn(vt(wr,Fk),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Sqe=async(e,t)=>{try{const r=sr(wr,Fk,e);await cc(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},kqe=async e=>{try{const t=sr(wr,Fk,e);await Ra(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},jqe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],aq={[dn.EVALUACION]:o.jsx(Gc,{className:"h-4 w-4"}),[dn.ACTO]:o.jsx(y2e,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:o.jsx(s1,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:o.jsx(L2e,{className:"h-4 w-4"})},Bqe=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},Tqe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[l,c]=_.useState({});_.useEffect(()=>{c(a||{type:dn.EVALUACION,subtype:Tp.PRUEBA_PARCIAL,asignatura:ks[0],curso:Ns[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:v,value:y}=x.target;c(w=>({...w,[v]:y}))},f=x=>{c(v=>{if(v.type===dn.SALIDA_PEDAGOGICA){const y=v.cursos||[],w=y.includes(x)?y.filter(N=>N!==x):[...y,x];return{...v,cursos:w.sort()}}return v})},h=x=>{var y;x.preventDefault();let v;switch(l.type){case dn.EVALUACION:{const w={date:s,type:dn.EVALUACION,subtype:l.subtype,asignatura:l.asignatura,curso:l.curso,contenidos:l.contenidos};(l.subtype===Tp.RUBRICA||l.subtype===Tp.PAUTA_COTEJO)&&((y=l.enlace)!=null&&y.trim())&&(w.enlace=l.enlace.trim()),v=w;break}case dn.ACTO:v={date:s,type:dn.ACTO,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case dn.ACTIVIDAD_FOCALIZADA:v={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:l.responsables,ubicacion:l.ubicacion,horario:l.horario};break;case dn.SALIDA_PEDAGOGICA:v={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:l.responsable,ubicacion:l.ubicacion,cursos:l.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(v)};if(!e)return null;const m=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(l.type){case dn.EVALUACION:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),o.jsx("select",{id:"subtype",name:"subtype",value:l.subtype,onChange:d,required:!0,className:u,children:kye.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsx("select",{id:"asignatura",name:"asignatura",value:l.asignatura,onChange:d,required:!0,className:u,children:ks.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),o.jsx("select",{id:"curso",name:"curso",value:l.curso,onChange:d,required:!0,className:u,children:Ns.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),o.jsx("textarea",{id:"contenidos",name:"contenidos",value:l.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(l.subtype===Tp.RUBRICA||l.subtype===Tp.PAUTA_COTEJO)&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),o.jsx("input",{id:"enlace",name:"enlace",type:"url",value:l.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),o.jsx("input",{id:"responsables",name:"responsables",type:"text",value:l.responsables||"",onChange:d,required:!0,className:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),o.jsxs("div",{className:"relative",children:[o.jsx(v_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),o.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),o.jsxs("div",{className:"relative",children:[o.jsx(th,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),o.jsx("input",{id:"horario",name:"horario",type:"text",value:l.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),o.jsx("input",{id:"responsable",name:"responsable",type:"text",value:l.responsable||"",onChange:d,required:!0,className:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),o.jsxs("div",{className:"relative",children:[o.jsx(v_,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),o.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:l.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),o.jsxs("fieldset",{children:[o.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),o.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ns.map(x=>o.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:(l.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),o.jsx("span",{children:x})]},x))})]})]});default:return null}};return o.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:o.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:o.jsxs("form",{onSubmit:h,children:[o.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:m})]}),o.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:o.jsx(Nm,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),o.jsx("select",{id:"type",name:"type",value:l.type,onChange:d,className:u,children:Object.values(dn).map(x=>o.jsx("option",{value:x,children:x},x))})]}),g()]})]}),o.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[o.jsx("div",{children:a&&n&&o.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[o.jsx(xi,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[o.jsx(Nm,{className:"h-4 w-4"}),"Cancelar"]}),o.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[o.jsx($d,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},Iqe=({profile:e})=>{const[t,r]=_.useState(new Date),[n,a]=_.useState([]),[s,i]=_.useState(!1),[l,c]=_.useState(null),[u,d]=_.useState(!1),[f,h]=_.useState(Object.values(dn)),[m,g]=_.useState(!1),[x,v]=_.useState(null),[y,w]=_.useState(null),N=_.useCallback(async()=>{i(!0);try{const R=await Nqe();a(R),c(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);_.useEffect(()=>{N()},[N]);const B=_.useMemo(()=>{const R=t.getFullYear(),j=t.getMonth(),P=new Date(R,j,1).getDay(),M=new Date(R,j+1,0).getDate(),Z=[];let V=1;for(let W=0;W<6;W++){const G=[];for(let K=0;K<7;K++)W===0&&K<P||V>M?G.push(null):(G.push(new Date(R,j,V)),V++);if(Z.push(G),V>M)break}return Z},[t]),k=R=>{h(j=>j.includes(R)?j.filter(P=>P!==R):[...j,R])},F=()=>{f.length===Object.values(dn).length?h([]):h(Object.values(dn))},E=R=>{e!==Yt.ESTUDIANTE&&(v(R.toISOString().split("T")[0]),w(null),g(!0))},S=(R,j)=>{j.stopPropagation(),e!==Yt.ESTUDIANTE&&(v(R.date),w(R),g(!0))},T=async R=>{d(!0);try{y?await Sqe(y.id,R):await _qe(R),await N(),g(!1)}catch(j){console.error("Error al guardar evento:",j);const P=j instanceof Error?j.message:"Error desconocido";c(`Error al guardar el evento: ${P}`)}finally{d(!1)}},L=async()=>{if(y){d(!0);try{await kqe(y.id),await N(),g(!1)}catch(R){console.error("Error al eliminar evento:",R);const j=R instanceof Error?R.message:"Error desconocido";c(`No se pudo eliminar el evento: ${j}`)}finally{d(!1)}}};return o.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),o.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),o.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&o.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),l&&o.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:l}),!s&&n.length===0&&o.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[o.jsx(s2e,{className:"h-5 w-5 mt-0.5"}),o.jsx("p",{children:"No hay eventos registrados en la nube."})]}),o.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[o.jsx(L4,{className:"h-4 w-4"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsx("button",{onClick:F,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(R=>o.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(R)?`shadow-sm ${Bv[R].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[o.jsx("input",{type:"checkbox",checked:f.includes(R),onChange:()=>k(R),className:"hidden"}),o.jsx("span",{className:"shrink-0",children:aq[R]}),o.jsx("span",{children:Bv[R].label})]},R))]})]}),o.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[o.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:o.jsx(Vw,{className:"h-5 w-5"})}),o.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:o.jsx(KP,{className:"h-5 w-5"})})]}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),o.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),o.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:jqe.map(R=>o.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:R},R))}),o.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:B.flat().map((R,j)=>{const P=R&&R.toDateString()===new Date().toDateString(),M=R==null?void 0:R.toISOString().split("T")[0],Z=M?n.filter(V=>V.date===M&&f.includes(V.type)):[];return o.jsx("div",{onClick:()=>R&&E(R),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${R?e!==Yt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:R&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:`self-end text-sm font-semibold ${P?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:R.getDate()}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:Z.map(V=>o.jsxs("div",{onClick:W=>S(V,W),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Bv[V.type].color}`,children:[o.jsx("span",{className:"shrink-0",children:aq[V.type]}),o.jsx("span",{className:"truncate",children:Bqe(V)})]},V.id))}),e!==Yt.ESTUDIANTE&&o.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:o.jsx(Cl,{className:"h-4 w-4"})})]})},j)})})]}),m&&o.jsx(Tqe,{isOpen:m,onClose:()=>g(!1),onSave:T,onDelete:L,event:y,date:x,isLoading:u})]})},Ok="anuncios",Fqe=async()=>{try{const e=zt(vt(wr,Ok),hr("fechaPublicacion","desc"));return(await Tn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},Oqe=async e=>{try{return{id:(await hn(vt(wr,Ok),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},Dqe=async(e,t)=>{try{const r=sr(wr,Ok,e);await cc(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},Pqe=async e=>{try{const t=sr(wr,Ok,e);await Ra(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},sq=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Rqe=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),[s,i]=_.useState(null),[l,c]=_.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=_.useState({tipo:"Todos",cursos:[]}),f=_.useCallback(async()=>{a(!0);try{const E=await Fqe();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);_.useEffect(()=>{f()},[f]);const h=E=>{const{name:S,value:T}=E.target;c(L=>({...L,[S]:T}))},m=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(S=>{var L;if(S.tipo!=="Cursos")return S;const T=(L=S.cursos)!=null&&L.includes(E)?S.cursos.filter(R=>R!==E):[...S.cursos||[],E];return{...S,cursos:T}})},x=async E=>{if(E.preventDefault(),!l.titulo||!l.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...l};await Oqe(S),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),i("Error al publicar el anuncio en la nube.")}},v=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Pqe(E),await f()}catch(S){console.error("Error al eliminar anuncio:",S),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const S=t.find(T=>T.id===E);S&&(await Dqe(E,{destacado:!S.destacado}),await f())}catch(S){console.error("Error al actualizar anuncio:",S),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=_.useMemo(()=>[...t].sort((E,S)=>E.destacado&&!S.destacado?-1:!E.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),N=_.useMemo(()=>{const E=e.profile,S=e.curso;return w.filter(T=>{if(E===Yt.SUBDIRECCION)return!0;if(!T.destinatarios)return E!==Yt.ESTUDIANTE;const{tipo:L,cursos:R}=T.destinatarios;return L==="Todos"||L==="Profesores"&&E===Yt.PROFESORADO||L==="Coordinación TP"&&E===Yt.COORDINACION_TP?!0:L==="Cursos"?E===Yt.ESTUDIANTE?R==null?void 0:R.includes(S||""):!0:!1})},[w,e]),B=E=>e.profile===Yt.ESTUDIANTE?!1:e.profile===Yt.SUBDIRECCION||e.profile===E.profileCreador,k=()=>e.profile===Yt.SUBDIRECCION||e.profile===Yt.PROFESORADO,F="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&o.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Yt.ESTUDIANTE?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),o.jsx("input",{type:"text",name:"titulo",value:l.titulo,onChange:h,required:!0,className:F})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),o.jsx("textarea",{name:"mensaje",value:l.mensaje,onChange:h,required:!0,rows:4,className:F})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),o.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>m(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),o.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&o.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ns.map(E=>{var S;return o.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),o.jsx("input",{type:"url",name:"adjunto",value:l.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:F})]}),o.jsx("div",{className:"pt-2 text-right",children:o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&N.length===0&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&N.length>0&&N.map((E,S)=>{const T=sq[S%sq.length];return o.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${T.bg} ${T.rotate}`,children:[E.destacado&&o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:o.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),o.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),o.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&o.jsx("div",{className:"font-sans text-sm mb-4",children:o.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),o.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:E.autor}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),o.jsxs("div",{className:"flex items-center",children:[k()&&o.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:o.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),B(E)&&o.jsx("button",{onClick:()=>v(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},ule="api_logs",Lqe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:ir.fromDate(new Date)};await hn(vt(ft,ule),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},Mqe=e=>{const t=zt(vt(ft,ule),hr("timestamp","desc"));return fr(t,n=>{const a=n.docs.map(s=>{var l,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(l=i.timestamp)==null?void 0:l.toDate)==null?void 0:c.call(l).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},C1=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}Lqe(e,t)},XL="actas_de_reunion",Uqe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},Qqe=e=>{const t=zt(vt(ft,XL),hr("fechaCreacion","desc"));return fr(t,n=>{const a=n.docs.map(s=>Uqe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},Hqe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date(e.fechaCreacion))};return(await hn(vt(ft,XL),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},Vqe=async e=>{try{const t=sr(ft,XL,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},dle=window.SpeechRecognition||window.webkitSpeechRecognition,iq=!!dle,zqe=({isListening:e})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),$qe=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(null),[s,i]=_.useState({tipoReunion:Z3[0],asistentes:"",textoReunion:""}),[l,c]=_.useState(!1),[u,d]=_.useState(!1),[f,h]=_.useState(!0),[m,g]=_.useState(null),x=_.useRef(null);_.useEffect(()=>{h(!0);const E=Qqe(S=>{r(S),!n&&S.length>0&&a(S[0]),h(!1)});return()=>E()},[n]);const v=E=>{const{name:S,value:T}=E.target;i(L=>({...L,[S]:T}))},y=_.useCallback(()=>{var E;if(!iq){g("El reconocimiento de voz no es compatible con este navegador.");return}l?(E=x.current)==null||E.stop():(x.current=new dle,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=S=>{let T="";for(let L=S.resultIndex;L<S.results.length;++L)S.results[L].isFinal&&(T+=S.results[L][0].transcript+". ");i(L=>({...L,textoReunion:L.textoReunion+T}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=S=>{console.error("Speech recognition error",S.error),g(`Error de reconocimiento: ${S.error}`),c(!1)},x.current.start())},[l]),w=async E=>{E.preventDefault();const{tipoReunion:S,asistentes:T,textoReunion:L}=s;if(!S||!T.trim()||!L.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{C1("Generador de Actas");const R="",P=new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro"}),M=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${L}"
                
                Asistentes a la reunión para referencia de nombres: ${T}
            `,G=(await(await P.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(G),ee={fechaCreacion:new Date().toISOString(),...s,...K},X=await Hqe(ee,e);i({tipoReunion:Z3[0],asistentes:"",textoReunion:""})}catch(R){console.error("Error al analizar acta con IA:",R),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},N=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await Vqe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},B=E=>{a(E)},k=E=>E.temas||E.acuerdos||E.plazos||E.responsables?o.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((T,L)=>o.jsx("li",{children:T},L))})]}),E.acuerdos&&E.acuerdos.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((T,L)=>o.jsx("li",{children:T},L))})]}),E.plazos&&E.plazos.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((T,L)=>o.jsx("li",{children:T},L))})]}),E.responsables&&E.responsables.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),o.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((T,L)=>o.jsx("li",{children:T},L))})]})]}):null,F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?o.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[o.jsxs("div",{className:"md:col-span-1 space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),o.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),o.jsx("div",{className:"ml-3",children:o.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",o.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),o.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:v,required:!0,className:F,children:Z3.map(E=>o.jsx("option",{value:E,children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),o.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:v,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:F})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),o.jsxs("div",{className:"relative",children:[o.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:v,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:F}),iq&&o.jsx("button",{type:"button",onClick:y,title:l?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${l?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:o.jsx(zqe,{isListening:l})})]})]}),m&&o.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:m}),o.jsx("div",{className:"pt-2 text-right",children:o.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),o.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>o.jsxs("button",{onClick:()=>B(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),o.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?o.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),o.jsx("button",{onClick:()=>N(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[o.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),o.jsx("h2",{children:"Asistentes"}),o.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,S)=>E.trim()&&o.jsx("li",{children:E.trim()},S))}),k(n),o.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:o.jsx("p",{children:n.textoReunion})})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[o.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})};function ga(e){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}var tl=Uint8Array,Vc=Uint16Array,YL=Int32Array,Dk=new tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pk=new tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gO=new tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ale=function(e,t){for(var r=new Vc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new YL(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},fle=Ale(Dk,2),hle=fle.b,xO=fle.r;hle[28]=258,xO[258]=28;var mle=Ale(Pk,0),Gqe=mle.b,oq=mle.r,vO=new Vc(32768);for(var Qa=0;Qa<32768;++Qa){var T0=(Qa&43690)>>1|(Qa&21845)<<1;T0=(T0&52428)>>2|(T0&13107)<<2,T0=(T0&61680)>>4|(T0&3855)<<4,vO[Qa]=((T0&65280)>>8|(T0&255)<<8)>>1}var rf=function(e,t,r){for(var n=e.length,a=0,s=new Vc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Vc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new Vc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[vO[f]>>c]=u}else for(l=new Vc(n),a=0;a<n;++a)e[a]&&(l[a]=vO[i[e[a]-1]++]>>15-e[a]);return l},Fm=new tl(288);for(var Qa=0;Qa<144;++Qa)Fm[Qa]=8;for(var Qa=144;Qa<256;++Qa)Fm[Qa]=9;for(var Qa=256;Qa<280;++Qa)Fm[Qa]=7;for(var Qa=280;Qa<288;++Qa)Fm[Qa]=8;var b2=new tl(32);for(var Qa=0;Qa<32;++Qa)b2[Qa]=5;var Kqe=rf(Fm,9,0),qqe=rf(Fm,9,1),Wqe=rf(b2,5,0),Xqe=rf(b2,5,1),AI=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ed=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},fI=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},JL=function(e){return(e+7)/8|0},ple=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new tl(e.subarray(t,r))},Yqe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_d=function(e,t,r){var n=new Error(t||Yqe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,_d),!r)throw n;return n},Jqe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new tl(0);var i=!r,l=i||t.i!=2,c=t.i;i&&(r=new tl(a*3));var u=function(je){var ae=r.length;if(je>ae){var Ne=new tl(Math.max(ae*2,je));Ne.set(r),r=Ne}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,g=t.d,x=t.m,v=t.n,y=a*8;do{if(!m){d=Ed(e,f,1);var w=Ed(e,f+1,3);if(f+=3,w)if(w==1)m=qqe,g=Xqe,x=9,v=5;else if(w==2){var F=Ed(e,f,31)+257,E=Ed(e,f+10,15)+4,S=F+Ed(e,f+5,31)+1;f+=14;for(var T=new tl(S),L=new tl(19),R=0;R<E;++R)L[gO[R]]=Ed(e,f+R*3,7);f+=E*3;for(var j=AI(L),P=(1<<j)-1,M=rf(L,j,1),R=0;R<S;){var Z=M[Ed(e,f,P)];f+=Z&15;var N=Z>>4;if(N<16)T[R++]=N;else{var V=0,W=0;for(N==16?(W=3+Ed(e,f,3),f+=2,V=T[R-1]):N==17?(W=3+Ed(e,f,7),f+=3):N==18&&(W=11+Ed(e,f,127),f+=7);W--;)T[R++]=V}}var G=T.subarray(0,F),K=T.subarray(F);x=AI(G),v=AI(K),m=rf(G,x,1),g=rf(K,v,1)}else _d(1);else{var N=JL(f)+4,B=e[N-4]|e[N-3]<<8,k=N+B;if(k>a){c&&_d(0);break}l&&u(h+B),r.set(e.subarray(N,k),h),t.b=h+=B,t.p=f=k*8,t.f=d;continue}if(f>y){c&&_d(0);break}}l&&u(h+131072);for(var ee=(1<<x)-1,X=(1<<v)-1,D=f;;D=f){var V=m[fI(e,f)&ee],Q=V>>4;if(f+=V&15,f>y){c&&_d(0);break}if(V||_d(2),Q<256)r[h++]=Q;else if(Q==256){D=f,m=null;break}else{var z=Q-254;if(Q>264){var R=Q-257,J=Dk[R];z=Ed(e,f,(1<<J)-1)+hle[R],f+=J}var te=g[fI(e,f)&X],se=te>>4;te||_d(3),f+=te&15;var K=Gqe[se];if(se>3){var J=Pk[se];K+=fI(e,f)&(1<<J)-1,f+=J}if(f>y){c&&_d(0);break}l&&u(h+131072);var ie=h+z;if(h<K){var le=s-K,ue=Math.min(K,ie);for(le+h<0&&_d(3);h<ue;++h)r[h]=n[le+h]}for(;h<ie;++h)r[h]=r[h-K]}}t.l=m,t.p=D,t.b=h,t.f=d,m&&(d=1,t.m=x,t.d=g,t.n=v)}while(!d);return h!=r.length&&i?ple(r,0,h):r.subarray(0,h)},Vf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},hy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},hI=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:xle,l:0};if(a==1){var i=new tl(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(k,F){return k.f-F.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var m=new Vc(h+1),g=bO(r[d-1],m,0);if(g>t){var n=0,x=0,v=g-t,y=1<<v;for(s.sort(function(F,E){return m[E.s]-m[F.s]||F.f-E.f});n<a;++n){var w=s[n].s;if(m[w]>t)x+=y-(1<<g-m[w]),m[w]=t;else break}for(x>>=v;x>0;){var N=s[n].s;m[N]<t?x-=1<<t-m[N]++-1:++n}for(;n>=0&&x;--n){var B=s[n].s;m[B]==t&&(--m[B],++x)}g=t}return{t:new tl(m),l:g}},bO=function(e,t,r){return e.s==-1?Math.max(bO(e.l,t,r+1),bO(e.r,t,r+1)):t[e.s]=r},lq=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Vc(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},my=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},gle=function(e,t,r){var n=r.length,a=JL(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},cq=function(e,t,r,n,a,s,i,l,c,u,d){Vf(t,d++,r),++a[256];for(var f=hI(a,15),h=f.t,m=f.l,g=hI(s,15),x=g.t,v=g.l,y=lq(h),w=y.c,N=y.n,B=lq(x),k=B.c,F=B.n,E=new Vc(19),S=0;S<w.length;++S)++E[w[S]&31];for(var S=0;S<k.length;++S)++E[k[S]&31];for(var T=hI(E,7),L=T.t,R=T.l,j=19;j>4&&!L[gO[j-1]];--j);var P=u+5<<3,M=my(a,Fm)+my(s,b2)+i,Z=my(a,h)+my(s,x)+i+14+3*j+my(E,L)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&P<=M&&P<=Z)return gle(t,d,e.subarray(c,c+u));var V,W,G,K;if(Vf(t,d,1+(Z<M)),d+=2,Z<M){V=rf(h,m,0),W=h,G=rf(x,v,0),K=x;var ee=rf(L,R,0);Vf(t,d,N-257),Vf(t,d+5,F-1),Vf(t,d+10,j-4),d+=14;for(var S=0;S<j;++S)Vf(t,d+3*S,L[gO[S]]);d+=3*j;for(var X=[w,k],D=0;D<2;++D)for(var Q=X[D],S=0;S<Q.length;++S){var z=Q[S]&31;Vf(t,d,ee[z]),d+=L[z],z>15&&(Vf(t,d,Q[S]>>5&127),d+=Q[S]>>12)}}else V=Kqe,W=Fm,G=Wqe,K=b2;for(var S=0;S<l;++S){var J=n[S];if(J>255){var z=J>>18&31;hy(t,d,V[z+257]),d+=W[z+257],z>7&&(Vf(t,d,J>>23&31),d+=Dk[z]);var te=J&31;hy(t,d,G[te]),d+=K[te],te>3&&(hy(t,d,J>>5&8191),d+=Pk[te])}else hy(t,d,V[J]),d+=W[J]}return hy(t,d,V[256]),d+W[256]},Zqe=new YL([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xle=new tl(0),eWe=function(e,t,r,n,a,s){var i=s.z||e.length,l=new tl(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=Zqe[t-1],h=f>>13,m=f&8191,g=(1<<r)-1,x=s.p||new Vc(32768),v=s.h||new Vc(g+1),y=Math.ceil(r/3),w=2*y,N=function(ke){return(e[ke]^e[ke+1]<<y^e[ke+2]<<w)&g},B=new YL(25e3),k=new Vc(288),F=new Vc(32),E=0,S=0,T=s.i||0,L=0,R=s.w||0,j=0;T+2<i;++T){var P=N(T),M=T&32767,Z=v[P];if(x[M]=Z,v[P]=M,R<=T){var V=i-T;if((E>7e3||L>24576)&&(V>423||!u)){d=cq(e,c,0,B,k,F,S,L,j,T-j,d),L=E=S=0,j=T;for(var W=0;W<286;++W)k[W]=0;for(var W=0;W<30;++W)F[W]=0}var G=2,K=0,ee=m,X=M-Z&32767;if(V>2&&P==N(T-X))for(var D=Math.min(h,V)-1,Q=Math.min(32767,T),z=Math.min(258,V);X<=Q&&--ee&&M!=Z;){if(e[T+G]==e[T+G-X]){for(var J=0;J<z&&e[T+J]==e[T+J-X];++J);if(J>G){if(G=J,K=X,J>D)break;for(var te=Math.min(X,J-2),se=0,W=0;W<te;++W){var ie=T-X+W&32767,le=x[ie],ue=ie-le&32767;ue>se&&(se=ue,Z=ie)}}}M=Z,Z=x[M],X+=M-Z&32767}if(K){B[L++]=268435456|xO[G]<<18|oq[K];var je=xO[G]&31,ae=oq[K]&31;S+=Dk[je]+Pk[ae],++k[257+je],++F[ae],R=T+G,++E}else B[L++]=e[T],++k[e[T]]}}for(T=Math.max(T,R);T<i;++T)B[L++]=e[T],++k[e[T]];d=cq(e,c,u,B,k,F,S,L,j,T-j,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=x,s.i=T,s.w=R)}else{for(var T=s.w||0;T<i+u;T+=65535){var Ne=T+65535;Ne>=i&&(c[d/8|0]=u,Ne=i),d=gle(c,d+1,e.subarray(T,Ne))}s.i=i}return ple(l,0,n+JL(d)+a)},vle=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},tWe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new tl(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return eWe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},ble=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},rWe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=vle();a.p(t.dictionary),ble(e,2,a.d())}},nWe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&_d(6,"invalid zlib data"),(e[1]>>5&1)==1&&_d(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function yO(e,t){t||(t={});var r=vle();r.p(e);var n=tWe(e,t,t.dictionary?6:2,4);return rWe(n,t),ble(n,n.length-4,r.d()),n}function aWe(e,t){return Jqe(e.subarray(nWe(e),-4),{i:2},t,t)}var sWe=typeof TextDecoder<"u"&&new TextDecoder,iWe=0;try{sWe.decode(xle,{stream:!0}),iWe=1}catch{}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mI(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var Na={log:mI,warn:function(e){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):mI.call(null,arguments))},error:function(e){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):mI(e))}};function pI(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){jp(n.response,t,r)},n.onerror=function(){Na.error("could not download file")},n.send()}function uq(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function hN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ew,wO,jp=Qr.saveAs||((typeof window>"u"?"undefined":ga(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Qr.URL||Qr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?uq(a.href)?pI(e,t,r):hN(a,a.target="_blank"):hN(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){hN(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(uq(e))pI(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){hN(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ga(s)!=="object"&&(Na.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return pI(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ga(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Qr.URL||Qr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function yle(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gI(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Mo(r,n,a,s,t[0],7,-680876936),s=Mo(s,r,n,a,t[1],12,-389564586),a=Mo(a,s,r,n,t[2],17,606105819),n=Mo(n,a,s,r,t[3],22,-1044525330),r=Mo(r,n,a,s,t[4],7,-176418897),s=Mo(s,r,n,a,t[5],12,1200080426),a=Mo(a,s,r,n,t[6],17,-1473231341),n=Mo(n,a,s,r,t[7],22,-45705983),r=Mo(r,n,a,s,t[8],7,1770035416),s=Mo(s,r,n,a,t[9],12,-1958414417),a=Mo(a,s,r,n,t[10],17,-42063),n=Mo(n,a,s,r,t[11],22,-1990404162),r=Mo(r,n,a,s,t[12],7,1804603682),s=Mo(s,r,n,a,t[13],12,-40341101),a=Mo(a,s,r,n,t[14],17,-1502002290),r=Uo(r,n=Mo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Uo(s,r,n,a,t[6],9,-1069501632),a=Uo(a,s,r,n,t[11],14,643717713),n=Uo(n,a,s,r,t[0],20,-373897302),r=Uo(r,n,a,s,t[5],5,-701558691),s=Uo(s,r,n,a,t[10],9,38016083),a=Uo(a,s,r,n,t[15],14,-660478335),n=Uo(n,a,s,r,t[4],20,-405537848),r=Uo(r,n,a,s,t[9],5,568446438),s=Uo(s,r,n,a,t[14],9,-1019803690),a=Uo(a,s,r,n,t[3],14,-187363961),n=Uo(n,a,s,r,t[8],20,1163531501),r=Uo(r,n,a,s,t[13],5,-1444681467),s=Uo(s,r,n,a,t[2],9,-51403784),a=Uo(a,s,r,n,t[7],14,1735328473),r=Qo(r,n=Uo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Qo(s,r,n,a,t[8],11,-2022574463),a=Qo(a,s,r,n,t[11],16,1839030562),n=Qo(n,a,s,r,t[14],23,-35309556),r=Qo(r,n,a,s,t[1],4,-1530992060),s=Qo(s,r,n,a,t[4],11,1272893353),a=Qo(a,s,r,n,t[7],16,-155497632),n=Qo(n,a,s,r,t[10],23,-1094730640),r=Qo(r,n,a,s,t[13],4,681279174),s=Qo(s,r,n,a,t[0],11,-358537222),a=Qo(a,s,r,n,t[3],16,-722521979),n=Qo(n,a,s,r,t[6],23,76029189),r=Qo(r,n,a,s,t[9],4,-640364487),s=Qo(s,r,n,a,t[12],11,-421815835),a=Qo(a,s,r,n,t[15],16,530742520),r=Ho(r,n=Qo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Ho(s,r,n,a,t[7],10,1126891415),a=Ho(a,s,r,n,t[14],15,-1416354905),n=Ho(n,a,s,r,t[5],21,-57434055),r=Ho(r,n,a,s,t[12],6,1700485571),s=Ho(s,r,n,a,t[3],10,-1894986606),a=Ho(a,s,r,n,t[10],15,-1051523),n=Ho(n,a,s,r,t[1],21,-2054922799),r=Ho(r,n,a,s,t[8],6,1873313359),s=Ho(s,r,n,a,t[15],10,-30611744),a=Ho(a,s,r,n,t[6],15,-1560198380),n=Ho(n,a,s,r,t[13],21,1309151649),r=Ho(r,n,a,s,t[4],6,-145523070),s=Ho(s,r,n,a,t[11],10,-1120210379),a=Ho(a,s,r,n,t[2],15,718787259),n=Ho(n,a,s,r,t[9],21,-343485551),e[0]=J0(r,e[0]),e[1]=J0(n,e[1]),e[2]=J0(a,e[2]),e[3]=J0(s,e[3])}function Rk(e,t,r,n,a,s){return t=J0(J0(t,e),J0(n,s)),J0(t<<a|t>>>32-a,r)}function Mo(e,t,r,n,a,s,i){return Rk(t&r|~t&n,e,t,a,s,i)}function Uo(e,t,r,n,a,s,i){return Rk(t&n|r&~n,e,t,a,s,i)}function Qo(e,t,r,n,a,s,i){return Rk(t^r^n,e,t,a,s,i)}function Ho(e,t,r,n,a,s,i){return Rk(r^(t|~n),e,t,a,s,i)}function wle(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)gI(n,oWe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(gI(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,gI(n,a),n}function oWe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Ew=Qr.atob.bind(Qr),wO=Qr.btoa.bind(Qr);var dq="0123456789abcdef".split("");function lWe(e){for(var t="",r=0;r<4;r++)t+=dq[e>>8*r+4&15]+dq[e>>8*r&15];return t}function cWe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function EO(e){return wle(e).map(cWe).join("")}var uWe=function(e){for(var t=0;t<e.length;t++)e[t]=lWe(e[t]);return e.join("")}(wle("hello"))!="5d41402abc4b2a76b9719d911017c592";function J0(e,t){if(uWe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function CO(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var f=t.length,h=0,m=0,g="";for(c=0;c<f;c++)m=(m+(d=l[h=(h+1)%256]))%256,l[h]=l[m],l[m]=d,i=l[(l[h]+l[m])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Aq={print:4,modify:8,copy:16,"annot-forms":32};function ov(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(Aq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=Aq[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=EO(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=CO(this.encryptionKey,this.padding)}function lv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function fq(e){if(ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(l){Qr.console&&Na.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function bS(e){if(!(this instanceof bS))return new bS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Ele(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Op(e,t,r,n,a){if(!(this instanceof Op))return new Op(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Ele.call(this,n,a)}function xv(e,t,r,n,a){if(!(this instanceof xv))return new xv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Ele.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=fq;var g="1.3",x=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(Y){g=Y};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var y=m.__private__.getPageFormat=function(Y){return v[Y]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},N=w.COMPAT;function B(){this.saveGraphicsState(),he(new bt(wt,0,0,-wt,0,Qi()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",N=w.ADVANCED}function k(){this.restoreGraphicsState(),u="S",N=w.COMPAT}var F=m.__private__.combineFontStyleAndFontWeight=function(Y,fe){if(Y=="bold"&&fe=="normal"||Y=="bold"&&fe==400||Y=="normal"&&fe=="italic"||Y=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(Y=fe==400||fe==="normal"?Y==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||Y!=="normal"?(fe==700?"bold":fe)+""+Y:"bold"),Y};m.advancedAPI=function(Y){var fe=N===w.COMPAT;return fe&&B.call(this),typeof Y!="function"||(Y(this),fe&&k.call(this)),this},m.compatAPI=function(Y){var fe=N===w.ADVANCED;return fe&&k.call(this),typeof Y!="function"||(Y(this),fe&&B.call(this)),this},m.isAdvancedAPI=function(){return N===w.ADVANCED};var E,S=function(Y){if(N!==w.ADVANCED)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=m.roundToPrecision=m.__private__.roundToPrecision=function(Y,fe){var De=t||fe;if(isNaN(Y)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(De).replace(/0+$/,"")};E=m.hpf=m.__private__.hpf=typeof c=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return T(Y,c)}:c==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return T(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return T(Y,16)};var L=m.f2=m.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return T(Y,2)},R=m.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return T(Y,3)},j=m.scale=m.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return N===w.COMPAT?Y*wt:N===w.ADVANCED?Y:void 0},P=function(Y){return N===w.COMPAT?Qi()-Y:N===w.ADVANCED?Y:void 0},M=function(Y){return j(P(Y))};m.__private__.setPrecision=m.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(t=parseInt(Y,10))};var Z,V="00000000000000000000000000000000",W=m.__private__.getFileId=function(){return V},G=m.__private__.setFileId=function(Y){return V=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ca=new ov(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(Y){return G(Y),this},m.getFileId=function(){return W()};var K=m.__private__.convertDateToPDFDate=function(Y){var fe=Y.getTimezoneOffset(),De=fe<0?"+":"-",Me=Math.floor(Math.abs(fe/60)),Ke=Math.abs(fe%60),yt=[De,z(Me),"'",z(Ke),"'"].join("");return["D:",Y.getFullYear(),z(Y.getMonth()+1),z(Y.getDate()),z(Y.getHours()),z(Y.getMinutes()),z(Y.getSeconds()),yt].join("")},ee=m.__private__.convertPDFDateToDate=function(Y){var fe=parseInt(Y.substr(2,4),10),De=parseInt(Y.substr(6,2),10)-1,Me=parseInt(Y.substr(8,2),10),Ke=parseInt(Y.substr(10,2),10),yt=parseInt(Y.substr(12,2),10),Lt=parseInt(Y.substr(14,2),10);return new Date(fe,De,Me,Ke,yt,Lt,0)},X=m.__private__.setCreationDate=function(Y){var fe;if(Y===void 0&&(Y=new Date),Y instanceof Date)fe=K(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=Y}return Z=fe},D=m.__private__.getCreationDate=function(Y){var fe=Z;return Y==="jsDate"&&(fe=ee(Z)),fe};m.setCreationDate=function(Y){return X(Y),this},m.getCreationDate=function(Y){return D(Y)};var Q,z=m.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},J=m.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},te=0,se=[],ie=[],le=0,ue=[],je=[],ae=!1,Ne=ie,ke=function(){te=0,le=0,ie=[],se=[],ue=[],Ce=qr(),we=qr()};m.__private__.setCustomOutputDestination=function(Y){ae=!0,Ne=Y};var _e=function(Y){ae||(Ne=Y)};m.__private__.resetCustomOutputDestination=function(){ae=!1,Ne=ie};var he=m.__private__.out=function(Y){return Y=Y.toString(),le+=Y.length+1,Ne.push(Y),Ne},Be=m.__private__.write=function(Y){return he(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},Le=m.__private__.getArrayBuffer=function(Y){for(var fe=Y.length,De=new ArrayBuffer(fe),Me=new Uint8Array(De);fe--;)Me[fe]=Y.charCodeAt(fe);return De},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return We};var xe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(Y){return xe=N===w.ADVANCED?Y/wt:Y,this};var Oe,Re=m.__private__.getFontSize=m.getFontSize=function(){return N===w.COMPAT?xe:xe*wt},$e=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(Y){return $e=Y,this},m.__private__.getR2L=m.getR2L=function(){return $e};var et,ct=m.__private__.setZoomMode=function(Y){var fe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Oe=Y;else if(isNaN(Y)){if(fe.indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Oe=Y}else Oe=parseInt(Y,10)};m.__private__.getZoomMode=function(){return Oe};var gt,It=m.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');et=Y};m.__private__.getPageMode=function(){return et};var Mt=m.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');gt=Y};m.__private__.getLayoutMode=function(){return gt},m.__private__.setDisplayMode=m.setDisplayMode=function(Y,fe,De){return ct(Y),Mt(fe),It(De),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(Y){if(Object.keys(Pt).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[Y]},m.__private__.getDocumentProperties=function(){return Pt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(Y){for(var fe in Pt)Pt.hasOwnProperty(fe)&&Y[fe]&&(Pt[fe]=Y[fe]);return this},m.__private__.setDocumentProperty=function(Y,fe){if(Object.keys(Pt).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[Y]=fe};var Qt,wt,Tr,tr,an,Sr={},$r={},Fn=[],Pr={},As={},mn={},la={},ja=null,rn=0,gr=[],Ze=new fq(m),mt=e.hotfixes||[],Je={},xt={},Et=[],bt=function Y(fe,De,Me,Ke,yt,Lt){if(!(this instanceof Y))return new Y(fe,De,Me,Ke,yt,Lt);isNaN(fe)&&(fe=1),isNaN(De)&&(De=0),isNaN(Me)&&(Me=0),isNaN(Ke)&&(Ke=1),isNaN(yt)&&(yt=0),isNaN(Lt)&&(Lt=0),this._matrix=[fe,De,Me,Ke,yt,Lt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(Y)},bt.prototype.multiply=function(Y){var fe=Y.sx*this.sx+Y.shy*this.shx,De=Y.sx*this.shy+Y.shy*this.sy,Me=Y.shx*this.sx+Y.sy*this.shx,Ke=Y.shx*this.shy+Y.sy*this.sy,yt=Y.tx*this.sx+Y.ty*this.shx+this.tx,Lt=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new bt(fe,De,Me,Ke,yt,Lt)},bt.prototype.decompose=function(){var Y=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty,Lt=Math.sqrt(Y*Y+fe*fe),Zt=(Y/=Lt)*De+(fe/=Lt)*Me;De-=Y*Zt,Me-=fe*Zt;var O=Math.sqrt(De*De+Me*Me);return Zt/=O,Y*(Me/=O)<fe*(De/=O)&&(Y=-Y,fe=-fe,Zt=-Zt,Lt=-Lt),{scale:new bt(Lt,0,0,O,0,0),translate:new bt(1,0,0,1,Ke,yt),rotate:new bt(Y,fe,-fe,Y,0,0),skew:new bt(1,0,Zt,1,0,0)}},bt.prototype.toString=function(Y){return this.join(" ")},bt.prototype.inversed=function(){var Y=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty,Lt=1/(Y*Me-fe*De),Zt=Me*Lt,O=-fe*Lt,ne=-De*Lt,ce=Y*Lt;return new bt(Zt,O,ne,ce,-Zt*Ke-ne*yt,-O*Ke-ce*yt)},bt.prototype.applyToPoint=function(Y){var fe=Y.x*this.sx+Y.y*this.shx+this.tx,De=Y.x*this.shy+Y.y*this.sy+this.ty;return new nd(fe,De)},bt.prototype.applyToRectangle=function(Y){var fe=this.applyToPoint(Y),De=this.applyToPoint(new nd(Y.x+Y.w,Y.y+Y.h));return new aA(fe.x,fe.y,De.x-fe.x,De.y-fe.y)},bt.prototype.clone=function(){var Y=this.sx,fe=this.shy,De=this.shx,Me=this.sy,Ke=this.tx,yt=this.ty;return new bt(Y,fe,De,Me,Ke,yt)},m.Matrix=bt;var nr=m.matrixMult=function(Y,fe){return fe.multiply(Y)},xr=new bt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=xr;var Wr=function(Y,fe){if(!As[Y]){var De=(fe instanceof Op?"Sh":"P")+(Object.keys(Pr).length+1).toString(10);fe.id=De,As[Y]=De,Pr[De]=fe,Ze.publish("addPattern",fe)}};m.ShadingPattern=Op,m.TilingPattern=xv,m.addShadingPattern=function(Y,fe){return S("addShadingPattern()"),Wr(Y,fe),this},m.beginTilingPattern=function(Y){S("beginTilingPattern()"),cu(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},m.endTilingPattern=function(Y,fe){S("endTilingPattern()"),fe.stream=je[Q].join(`
`),Wr(Y,fe),Ze.publish("endTilingPattern",fe),Et.pop().restore()};var Zr=m.__private__.newObject=function(){var Y=qr();return me(Y,!0),Y},qr=m.__private__.newObjectDeferred=function(){return te++,se[te]=function(){return le},te},me=function(Y,fe){return fe=typeof fe=="boolean"&&fe,se[Y]=le,fe&&he(Y+" 0 obj"),Y},Ie=m.__private__.newAdditionalObject=function(){var Y={objId:qr(),content:""};return ue.push(Y),Y},Ce=qr(),we=qr(),Se=m.__private__.decodeColorString=function(Y){var fe=Y.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length===5&&(fe[4]==="k"||fe[4]==="K")&&(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var De=parseFloat(fe[0]);fe=[De,De,De,"r"]}for(var Me="#",Ke=0;Ke<3;Ke++)Me+=("0"+Math.floor(255*parseFloat(fe[Ke])).toString(16)).slice(-2);return Me},Fe=m.__private__.encodeColorString=function(Y){var fe;typeof Y=="string"&&(Y={ch1:Y});var De=Y.ch1,Me=Y.ch2,Ke=Y.ch3,yt=Y.ch4,Lt=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var Zt=new yle(De);if(Zt.ok)De=Zt.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var O=parseInt(De.substr(1),16);De=O>>16&255,Me=O>>8&255,Ke=255&O}if(Me===void 0||yt===void 0&&De===Me&&Me===Ke)if(typeof De=="string")fe=De+" "+Lt[0];else switch(Y.precision){case 2:fe=L(De/255)+" "+Lt[0];break;case 3:default:fe=R(De/255)+" "+Lt[0]}else if(yt===void 0||ga(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return fe=["1.","1.","1.",Lt[1]].join(" ");if(typeof De=="string")fe=[De,Me,Ke,Lt[1]].join(" ");else switch(Y.precision){case 2:fe=[L(De/255),L(Me/255),L(Ke/255),Lt[1]].join(" ");break;default:case 3:fe=[R(De/255),R(Me/255),R(Ke/255),Lt[1]].join(" ")}}else if(typeof De=="string")fe=[De,Me,Ke,yt,Lt[2]].join(" ");else switch(Y.precision){case 2:fe=[L(De),L(Me),L(Ke),L(yt),Lt[2]].join(" ");break;case 3:default:fe=[R(De),R(Me),R(Ke),R(yt),Lt[2]].join(" ")}return fe},Ye=m.__private__.getFilters=function(){return i},dt=m.__private__.putStream=function(Y){var fe=(Y=Y||{}).data||"",De=Y.filters||Ye(),Me=Y.alreadyAppliedFilters||[],Ke=Y.addLength1||!1,yt=fe.length,Lt=Y.objectId,Zt=function(Or){return Or};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=ca.encryptor(Lt,0));var O={};De===!0&&(De=["FlateEncode"]);var ne=Y.additionalKeyValues||[],ce=(O=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(fe,De):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(O.data.length!==0&&(ne.push({key:"Length",value:O.data.length}),Ke===!0&&ne.push({key:"Length1",value:yt})),ce.length!=0)if(ce.split("/").length-1==1)ne.push({key:"Filter",value:ce});else{ne.push({key:"Filter",value:"["+ce+"]"});for(var be=0;be<ne.length;be+=1)if(ne[be].key==="DecodeParms"){for(var ze=[],ot=0;ot<O.reverseChain.split("/").length-1;ot+=1)ze.push("null");ze.push(ne[be].value),ne[be].value="["+ze.join(" ")+"]"}}he("<<");for(var Ut=0;Ut<ne.length;Ut++)he("/"+ne[Ut].key+" "+ne[Ut].value);he(">>"),O.data.length!==0&&(he("stream"),he(Zt(O.data)),he("endstream"))},Ge=m.__private__.putPage=function(Y){var fe=Y.number,De=Y.data,Me=Y.objId,Ke=Y.contentsObjId;me(Me,!0),he("<</Type /Page"),he("/Parent "+Y.rootDictionaryObjId+" 0 R"),he("/Resources "+Y.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(E(Y.mediaBox.bottomLeftX))+" "+parseFloat(E(Y.mediaBox.bottomLeftY))+" "+E(Y.mediaBox.topRightX)+" "+E(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&he("/CropBox ["+E(Y.cropBox.bottomLeftX)+" "+E(Y.cropBox.bottomLeftY)+" "+E(Y.cropBox.topRightX)+" "+E(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&he("/BleedBox ["+E(Y.bleedBox.bottomLeftX)+" "+E(Y.bleedBox.bottomLeftY)+" "+E(Y.bleedBox.topRightX)+" "+E(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&he("/TrimBox ["+E(Y.trimBox.bottomLeftX)+" "+E(Y.trimBox.bottomLeftY)+" "+E(Y.trimBox.topRightX)+" "+E(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&he("/ArtBox ["+E(Y.artBox.bottomLeftX)+" "+E(Y.artBox.bottomLeftY)+" "+E(Y.artBox.topRightX)+" "+E(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&he("/UserUnit "+Y.userUnit),Ze.publish("putPage",{objId:Me,pageContext:gr[fe],pageNumber:fe,page:De}),he("/Contents "+Ke+" 0 R"),he(">>"),he("endobj");var yt=De.join(`
`);return N===w.ADVANCED&&(yt+=`
Q`),me(Ke,!0),dt({data:yt,filters:Ye(),objectId:Ke}),he("endobj"),Me},rt=m.__private__.putPages=function(){var Y,fe,De=[];for(Y=1;Y<=rn;Y++)gr[Y].objId=qr(),gr[Y].contentsObjId=qr();for(Y=1;Y<=rn;Y++)De.push(Ge({number:Y,data:je[Y],objId:gr[Y].objId,contentsObjId:gr[Y].contentsObjId,mediaBox:gr[Y].mediaBox,cropBox:gr[Y].cropBox,bleedBox:gr[Y].bleedBox,trimBox:gr[Y].trimBox,artBox:gr[Y].artBox,userUnit:gr[Y].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));me(Ce,!0),he("<</Type /Pages");var Me="/Kids [";for(fe=0;fe<rn;fe++)Me+=De[fe]+" 0 R ";he(Me+"]"),he("/Count "+rn),he(">>"),he("endobj"),Ze.publish("postPutPages")},it=function(Y){Ze.publish("putFont",{font:Y,out:he,newObject:Zr,putStream:dt}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=Zr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+lv(Y.postScriptName)),he("/Subtype /Type1"),typeof Y.encoding=="string"&&he("/Encoding /"+Y.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Ft=function(){for(var Y in Sr)Sr.hasOwnProperty(Y)&&(f===!1||f===!0&&h.hasOwnProperty(Y))&&it(Sr[Y])},$t=function(Y){Y.objectNumber=Zr();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[E(Y.x),E(Y.y),E(Y.x+Y.width),E(Y.y+Y.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var De=Y.pages[1].join(`
`);dt({data:De,additionalKeyValues:fe,objectId:Y.objectNumber}),he("endobj")},Jt=function(){for(var Y in Je)Je.hasOwnProperty(Y)&&$t(Je[Y])},Ht=function(Y,fe){var De,Me=[],Ke=1/(fe-1);for(De=0;De<1;De+=Ke)Me.push(De);if(Me.push(1),Y[0].offset!=0){var yt={offset:0,color:Y[0].color};Y.unshift(yt)}if(Y[Y.length-1].offset!=1){var Lt={offset:1,color:Y[Y.length-1].color};Y.push(Lt)}for(var Zt="",O=0,ne=0;ne<Me.length;ne++){for(De=Me[ne];De>Y[O+1].offset;)O++;var ce=Y[O].offset,be=(De-ce)/(Y[O+1].offset-ce),ze=Y[O].color,ot=Y[O+1].color;Zt+=J(Math.round((1-be)*ze[0]+be*ot[0]).toString(16))+J(Math.round((1-be)*ze[1]+be*ot[1]).toString(16))+J(Math.round((1-be)*ze[2]+be*ot[2]).toString(16))}return Zt.trim()},Gt=function(Y,fe){fe||(fe=21);var De=Zr(),Me=Ht(Y.colors,fe),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+fe+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Me,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),he("endobj"),Y.objectNumber=Zr(),he("<< /ShadingType "+Y.type),he("/ColorSpace /DeviceRGB");var yt="/Coords ["+E(parseFloat(Y.coords[0]))+" "+E(parseFloat(Y.coords[1]))+" ";Y.type===2?yt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3])):yt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3]))+" "+E(parseFloat(Y.coords[4]))+" "+E(parseFloat(Y.coords[5])),he(yt+="]"),Y.matrix&&he("/Matrix ["+Y.matrix.toString()+"]"),he("/Function "+De+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},kr=function(Y,fe){var De=qr(),Me=Zr();fe.push({resourcesOid:De,objectOid:Me}),Y.objectNumber=Me;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+Y.boundingBox.map(E).join(" ")+"]"}),Ke.push({key:"XStep",value:E(Y.xStep)}),Ke.push({key:"YStep",value:E(Y.yStep)}),Ke.push({key:"Resources",value:De+" 0 R"}),Y.matrix&&Ke.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),dt({data:Y.stream,additionalKeyValues:Ke,objectId:Y.objectNumber}),he("endobj")},sn=function(Y){var fe;for(fe in Pr)Pr.hasOwnProperty(fe)&&(Pr[fe]instanceof Op?Gt(Pr[fe]):Pr[fe]instanceof xv&&kr(Pr[fe],Y))},on=function(Y){for(var fe in Y.objectNumber=Zr(),he("<<"),Y)switch(fe){case"opacity":he("/ca "+L(Y[fe]));break;case"stroke-opacity":he("/CA "+L(Y[fe]))}he(">>"),he("endobj")},An=function(){var Y;for(Y in mn)mn.hasOwnProperty(Y)&&on(mn[Y])},fs=function(){for(var Y in he("/XObject <<"),Je)Je.hasOwnProperty(Y)&&Je[Y].objectNumber>=0&&he("/"+Y+" "+Je[Y].objectNumber+" 0 R");Ze.publish("putXobjectDict"),he(">>")},No=function(){ca.oid=Zr(),he("<<"),he("/Filter /Standard"),he("/V "+ca.v),he("/R "+ca.r),he("/U <"+ca.toHexString(ca.U)+">"),he("/O <"+ca.toHexString(ca.O)+">"),he("/P "+ca.P),he(">>"),he("endobj")},hs=function(){for(var Y in he("/Font <<"),Sr)Sr.hasOwnProperty(Y)&&(f===!1||f===!0&&h.hasOwnProperty(Y))&&he("/"+Y+" "+Sr[Y].objectNumber+" 0 R");he(">>")},ri=function(){if(Object.keys(Pr).length>0){for(var Y in he("/Shading <<"),Pr)Pr.hasOwnProperty(Y)&&Pr[Y]instanceof Op&&Pr[Y].objectNumber>=0&&he("/"+Y+" "+Pr[Y].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),he(">>")}},Ps=function(Y){if(Object.keys(Pr).length>0){for(var fe in he("/Pattern <<"),Pr)Pr.hasOwnProperty(fe)&&Pr[fe]instanceof m.TilingPattern&&Pr[fe].objectNumber>=0&&Pr[fe].objectNumber<Y&&he("/"+fe+" "+Pr[fe].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),he(">>")}},yi=function(){if(Object.keys(mn).length>0){var Y;for(Y in he("/ExtGState <<"),mn)mn.hasOwnProperty(Y)&&mn[Y].objectNumber>=0&&he("/"+Y+" "+mn[Y].objectNumber+" 0 R");Ze.publish("putGStateDict"),he(">>")}},xa=function(Y){me(Y.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),hs(),ri(),Ps(Y.objectOid),yi(),fs(),he(">>"),he("endobj")},ni=function(){var Y=[];Ft(),An(),Jt(),sn(Y),Ze.publish("putResources"),Y.forEach(xa),xa({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources")},Zd=function(){Ze.publish("putAdditionalObjects");for(var Y=0;Y<ue.length;Y++){var fe=ue[Y];me(fe.objId,!0),he(fe.content),he("endobj")}Ze.publish("postPutAdditionalObjects")},$h=function(Y){$r[Y.fontName]=$r[Y.fontName]||{},$r[Y.fontName][Y.fontStyle]=Y.id},eu=function(Y,fe,De,Me,Ke){var yt={id:"F"+(Object.keys(Sr).length+1).toString(10),postScriptName:Y,fontName:fe,fontStyle:De,encoding:Me,isStandardFont:Ke||!1,metadata:{}};return Ze.publish("addFont",{font:yt,instance:this}),Sr[yt.id]=yt,$h(yt),yt.id},hf=function(Y){for(var fe=0,De=We.length;fe<De;fe++){var Me=eu.call(this,Y[fe][0],Y[fe][1],Y[fe][2],We[fe][3],!0);f===!1&&(h[Me]=!0);var Ke=Y[fe][0].split("-");$h({id:Me,fontName:Ke[0],fontStyle:Ke[1]||""})}Ze.publish("addFonts",{fonts:Sr,dictionary:$r})},wi=function(Y){return Y.foo=function(){try{return Y.apply(this,arguments)}catch(Me){var fe=Me.stack||"";~fe.indexOf(" at ")&&(fe=fe.split(" at ")[1]);var De="Error in function "+fe.split(`
`)[0].split("<")[0]+": "+Me.message;if(!Qr.console)throw new Error(De);Qr.console.error(De,Me),Qr.alert&&alert(De)}},Y.foo.bar=Y,Y.foo},eA=function(Y,fe){var De,Me,Ke,yt,Lt,Zt,O,ne,ce;if(Ke=(fe=fe||{}).sourceEncoding||"Unicode",Lt=fe.outputEncoding,(fe.autoencode||Lt)&&Sr[Qt].metadata&&Sr[Qt].metadata[Ke]&&Sr[Qt].metadata[Ke].encoding&&(yt=Sr[Qt].metadata[Ke].encoding,!Lt&&Sr[Qt].encoding&&(Lt=Sr[Qt].encoding),!Lt&&yt.codePages&&(Lt=yt.codePages[0]),typeof Lt=="string"&&(Lt=yt[Lt]),Lt)){for(O=!1,Zt=[],De=0,Me=Y.length;De<Me;De++)(ne=Lt[Y.charCodeAt(De)])?Zt.push(String.fromCharCode(ne)):Zt.push(Y[De]),Zt[De].charCodeAt(0)>>8&&(O=!0);Y=Zt.join("")}for(De=Y.length;O===void 0&&De!==0;)Y.charCodeAt(De-1)>>8&&(O=!0),De--;if(!O)return Y;for(Zt=fe.noBOM?[]:[254,255],De=0,Me=Y.length;De<Me;De++){if((ce=(ne=Y.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(ce),Zt.push(ne-(ce<<8))}return String.fromCharCode.apply(void 0,Zt)},On=m.__private__.pdfEscape=m.pdfEscape=function(Y,fe){return eA(Y,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ei=m.__private__.beginPage=function(Y){je[++rn]=[],gr[rn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Bl(rn),_e(je[Q])},tu=function(Y,fe){var De,Me,Ke;switch(r=fe||r,typeof Y=="string"&&(De=y(Y.toLowerCase()),Array.isArray(De)&&(Me=De[0],Ke=De[1])),Array.isArray(Y)&&(Me=Y[0]*wt,Ke=Y[1]*wt),isNaN(Me)&&(Me=a[0],Ke=a[1]),(Me>14400||Ke>14400)&&(Na.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),Ke=Math.min(14400,Ke)),a=[Me,Ke],r.substr(0,1)){case"l":Ke>Me&&(a=[Ke,Me]);break;case"p":Me>Ke&&(a=[Ke,Me])}Ei(a),xf(su),he(Ci),vf!==0&&he(vf+" J"),rd!==0&&he(rd+" j"),Ze.publish("addPage",{pageNumber:rn})},ru=function(Y){Y>0&&Y<=rn&&(je.splice(Y,1),gr.splice(Y,1),rn--,Q>rn&&(Q=rn),this.setPage(Q))},Bl=function(Y){Y>0&&Y<=rn&&(Q=Y)},Vn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return je.length-1},nu=function(Y,fe,De){var Me,Ke=void 0;return De=De||{},Y=Y!==void 0?Y:Sr[Qt].fontName,fe=fe!==void 0?fe:Sr[Qt].fontStyle,Me=Y.toLowerCase(),$r[Me]!==void 0&&$r[Me][fe]!==void 0?Ke=$r[Me][fe]:$r[Y]!==void 0&&$r[Y][fe]!==void 0?Ke=$r[Y][fe]:De.disableWarning===!1&&Na.warn("Unable to look up font label for font '"+Y+"', '"+fe+"'. Refer to getFontList() for available fonts."),Ke||De.noFallback||(Ke=$r.times[fe])==null&&(Ke=$r.times.normal),Ke},_o=m.__private__.putInfo=function(){var Y=Zr(),fe=function(Me){return Me};for(var De in d!==null&&(fe=ca.encryptor(Y,0)),he("<<"),he("/Producer ("+On(fe("jsPDF "+vr.version))+")"),Pt)Pt.hasOwnProperty(De)&&Pt[De]&&he("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+On(fe(Pt[De]))+")");he("/CreationDate ("+On(fe(Z))+")"),he(">>"),he("endobj")},Ac=m.__private__.putCatalog=function(Y){var fe=(Y=Y||{}).rootDictionaryObjId||Ce;switch(Zr(),he("<<"),he("/Type /Catalog"),he("/Pages "+fe+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+Oe;De.substr(De.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&he("/OpenAction [3 0 R /XYZ null null "+L(Oe)+"]")}switch(gt||(gt="continuous"),gt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}et&&he("/PageMode /"+et),Ze.publish("putCatalog"),he(">>"),he("endobj")},Gh=m.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(te+1)),he("/Root "+te+" 0 R"),he("/Info "+(te-1)+" 0 R"),d!==null&&he("/Encrypt "+ca.oid+" 0 R"),he("/ID [ <"+V+"> <"+V+"> ]"),he(">>")},mf=m.__private__.putHeader=function(){he("%PDF-"+g),he("%ºß¬à")},pf=m.__private__.putXRef=function(){var Y="0000000000";he("xref"),he("0 "+(te+1)),he("0000000000 65535 f ");for(var fe=1;fe<=te;fe++)typeof se[fe]=="function"?he((Y+se[fe]()).slice(-10)+" 00000 n "):se[fe]!==void 0?he((Y+se[fe]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},fc=m.__private__.buildDocument=function(){ke(),_e(ie),Ze.publish("buildDocument"),mf(),rt(),Zd(),ni(),d!==null&&No(),_o(),Ac();var Y=le;return pf(),Gh(),he("startxref"),he(""+Y),he("%%EOF"),_e(je[Q]),ie.join(`
`)},tA=m.__private__.getBlob=function(Y){return new Blob([Le(Y)],{type:"application/pdf"})},hc=m.output=m.__private__.output=wi(function(Y,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",Y){case void 0:return fc();case"save":m.save(fe.filename);break;case"arraybuffer":return Le(fc());case"blob":return tA(fc());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL(tA(fc()))||void 0;Na.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",Me=fc();try{De=wO(Me)}catch{De=wO(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+fe.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(Ke=fe.pdfObjectUrl,yt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",Zt=Qr.open();return Zt!==null&&Zt.document.write(Lt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',ne=Qr.open();if(ne!==null){ne.document.write(O);var ce=this;ne.document.documentElement.querySelector("#pdfViewer").onload=function(){ne.document.title=fe.filename,ne.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ce.output("bloburl"))}}return ne}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',ze=Qr.open();if(ze!==null&&(ze.document.write(be),ze.document.title=fe.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",fe);default:return null}}),Tl=function(Y){return Array.isArray(mt)===!0&&mt.indexOf(Y)>-1};switch(n){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=Tl("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wt=n}var ca=null;X(),G();var mc=function(Y){return d!==null?ca.encryptor(Y,0):function(fe){return fe}},Il=m.__private__.getPageInfo=m.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[Y].objId,pageNumber:Y,pageContext:gr[Y]}},Fr=m.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in gr)if(gr[fe].objId===Y)break;return Il(fe)},Fl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:gr[Q].objId,pageNumber:Q,pageContext:gr[Q]}};m.addPage=function(){return tu.apply(this,arguments),this},m.setPage=function(){return Bl.apply(this,arguments),_e.call(this,je[Q]),this},m.insertPage=function(Y){return this.addPage(),this.movePage(Q,Y),this},m.movePage=function(Y,fe){var De,Me;if(Y>fe){De=je[Y],Me=gr[Y];for(var Ke=Y;Ke>fe;Ke--)je[Ke]=je[Ke-1],gr[Ke]=gr[Ke-1];je[fe]=De,gr[fe]=Me,this.setPage(fe)}else if(Y<fe){De=je[Y],Me=gr[Y];for(var yt=Y;yt<fe;yt++)je[yt]=je[yt+1],gr[yt]=gr[yt+1];je[fe]=De,gr[fe]=Me,this.setPage(fe)}return this},m.deletePage=function(){return ru.apply(this,arguments),this},m.__private__.text=m.text=function(Y,fe,De,Me,Ke){var yt,Lt,Zt,O,ne,ce,be,ze,ot,Ut=(Me=Me||{}).scope||this;if(typeof Y=="number"&&typeof fe=="number"&&(typeof De=="string"||Array.isArray(De))){var Or=De;De=fe,fe=Y,Y=Or}if(arguments[3]instanceof bt?(S("The transform parameter of text() with a Matrix value"),ot=Ke):(Zt=arguments[4],O=arguments[5],ga(be=arguments[3])==="object"&&be!==null||(typeof Zt=="string"&&(O=Zt,Zt=null),typeof be=="string"&&(O=be,be=null),typeof be=="number"&&(Zt=be,be=null),Me={flags:be,angle:Zt,align:O})),isNaN(fe)||isNaN(De)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Ut;var yn="",Xr=!1,zn=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:bn,ta=Ut.internal.scaleFactor;function Rl(pn){return pn=pn.split("	").join(Array(Me.TabLen||9).join(" ")),On(pn,be)}function es(pn){for(var gn,va=pn.concat(),ts=[],Ml=va.length;Ml--;)typeof(gn=va.shift())=="string"?ts.push(gn):Array.isArray(pn)&&(gn.length===1||gn[1]===void 0&&gn[2]===void 0)?ts.push(gn[0]):ts.push([gn[0],gn[1],gn[2]]);return ts}function Bo(pn,gn){var va;if(typeof pn=="string")va=gn(pn)[0];else if(Array.isArray(pn)){for(var ts,Ml,mA=pn.concat(),pA=[],ld=mA.length;ld--;)typeof(ts=mA.shift())=="string"?pA.push(gn(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(Ml=gn(ts[0],ts[1],ts[2]),pA.push([Ml[0],Ml[1],Ml[2]]));va=pA}return va}var du=!1,iA=!0;if(typeof Y=="string")du=!0;else if(Array.isArray(Y)){var Xh=Y.concat();Lt=[];for(var bf,Rs=Xh.length;Rs--;)(typeof(bf=Xh.shift())!="string"||Array.isArray(bf)&&typeof bf[0]!="string")&&(iA=!1);du=iA}if(du===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var oA=xe/Ut.internal.scaleFactor,yf=oA*(zn-1);switch(Me.baseline){case"bottom":De-=yf;break;case"top":De+=oA-yf;break;case"hanging":De+=oA-2*yf;break;case"middle":De+=oA/2-yf}if((ce=Me.maxWidth||0)>0&&(typeof Y=="string"?Y=Ut.splitTextToSize(Y,ce):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(pn,gn){return pn.concat(Ut.splitTextToSize(gn,ce))},[]))),yt={text:Y,x:fe,y:De,options:Me,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:Sr,activeFontSize:xe}},Ze.publish("preProcessText",yt),Y=yt.text,Zt=(Me=yt.options).angle,!(ot instanceof bt)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Me.rotationDirection===0&&(Zt=-Zt),N===w.ADVANCED&&(Zt=-Zt);var wf=Math.cos(Zt),Yh=Math.sin(Zt);ot=new bt(wf,Yh,-Yh,wf,0,0)}else Zt&&Zt instanceof bt&&(ot=Zt);N!==w.ADVANCED||ot||(ot=xr),(ne=Me.charSpace||td)!==void 0&&(yn+=E(j(ne))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Me.horizontalScale)!==void 0&&(yn+=E(100*ze)+` Tz
`),Me.lang;var To=-1,pb=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,Jm=Ut.internal.getCurrentPageInfo().pageContext;switch(pb){case 0:case!1:case"fill":To=0;break;case 1:case!0:case"stroke":To=1;break;case 2:case"fillThenStroke":To=2;break;case 3:case"invisible":To=3;break;case 4:case"fillAndAddForClipping":To=4;break;case 5:case"strokeAndAddPathForClipping":To=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":To=6;break;case 7:case"addToPathForClipping":To=7}var Zg=Jm.usedRenderingMode!==void 0?Jm.usedRenderingMode:-1;To!==-1?yn+=To+` Tr
`:Zg!==-1&&(yn+=`0 Tr
`),To!==-1&&(Jm.usedRenderingMode=To),O=Me.align||"left";var Ll,ai=xe*zn,lA=Ut.internal.pageSize.getWidth(),Zm=Sr[Qt];ne=Me.charSpace||td,ce=Me.maxWidth||0,be=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var id=[],cA=function(pn){return Ut.getStringUnitWidth(pn,{font:Zm,charSpace:ne,fontSize:xe,doKerning:!1})*xe/ta};if(Object.prototype.toString.call(Y)==="[object Array]"){var oo;Lt=es(Y),O!=="left"&&(Ll=Lt.map(cA));var Ni,uA=0;if(O==="right"){fe-=Ll[0],Y=[],Rs=Lt.length;for(var Io=0;Io<Rs;Io++)Io===0?(Ni=Ui(fe),oo=ps(De)):(Ni=j(uA-Ll[Io]),oo=-ai),Y.push([Lt[Io],Ni,oo]),uA=Ll[Io]}else if(O==="center"){fe-=Ll[0]/2,Y=[],Rs=Lt.length;for(var vc=0;vc<Rs;vc++)vc===0?(Ni=Ui(fe),oo=ps(De)):(Ni=j((uA-Ll[vc])/2),oo=-ai),Y.push([Lt[vc],Ni,oo]),uA=Ll[vc]}else if(O==="left"){Y=[],Rs=Lt.length;for(var Au=0;Au<Rs;Au++)Y.push(Lt[Au])}else if(O==="justify"&&Zm.encoding==="Identity-H"){Y=[],Rs=Lt.length,ce=ce!==0?ce:lA;for(var bc=0,Ga=0;Ga<Rs;Ga++)if(oo=Ga===0?ps(De):-ai,Ni=Ga===0?Ui(fe):bc,Ga<Rs-1){var yc=j((ce-Ll[Ga])/(Lt[Ga].split(" ").length-1)),gs=Lt[Ga].split(" ");Y.push([gs[0]+" ",Ni,oo]),bc=0;for(var Fo=1;Fo<gs.length;Fo++){var Ef=(cA(gs[Fo-1]+" "+gs[Fo])-cA(gs[Fo]))*ta+yc;Fo==gs.length-1?Y.push([gs[Fo],Ef,0]):Y.push([gs[Fo]+" ",Ef,0]),bc-=Ef}}else Y.push([Lt[Ga],Ni,oo]);Y.push(["",bc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],Rs=Lt.length,ce=ce!==0?ce:lA,Ga=0;Ga<Rs;Ga++)oo=Ga===0?ps(De):-ai,Ni=Ga===0?Ui(fe):0,Ga<Rs-1?id.push(E(j((ce-Ll[Ga])/(Lt[Ga].split(" ").length-1)))):id.push(0),Y.push([Lt[Ga],Ni,oo])}}var fu=typeof Me.R2L=="boolean"?Me.R2L:$e;fu===!0&&(Y=Bo(Y,function(pn,gn,va){return[pn.split("").reverse().join(""),gn,va]})),yt={text:Y,x:fe,y:De,options:Me,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:Sr,activeFontSize:xe}},Ze.publish("postProcessText",yt),Y=yt.text,Xr=yt.mutex.isHex||!1;var Jh=Sr[Qt].encoding;Jh!=="WinAnsiEncoding"&&Jh!=="StandardEncoding"||(Y=Bo(Y,function(pn,gn,va){return[Rl(pn),gn,va]})),Lt=es(Y),Y=[];for(var dA,AA,fA,Cf=0,Zh=1,hA=Array.isArray(Lt[0])?Zh:Cf,od="",Nf=function(pn,gn,va){var ts="";return va instanceof bt?(va=typeof Me.angle=="number"?nr(va,new bt(1,0,0,1,pn,gn)):nr(new bt(1,0,0,1,pn,gn),va),N===w.ADVANCED&&(va=nr(new bt(1,0,0,-1,0,0),va)),ts=va.join(" ")+` Tm
`):ts=E(pn)+" "+E(gn)+` Td
`,ts},Ka=0;Ka<Lt.length;Ka++){switch(od="",hA){case Zh:fA=(Xr?"<":"(")+Lt[Ka][0]+(Xr?">":")"),dA=parseFloat(Lt[Ka][1]),AA=parseFloat(Lt[Ka][2]);break;case Cf:fA=(Xr?"<":"(")+Lt[Ka]+(Xr?">":")"),dA=Ui(fe),AA=ps(De)}id!==void 0&&id[Ka]!==void 0&&(od=id[Ka]+` Tw
`),Ka===0?Y.push(od+Nf(dA,AA,ot)+fA):hA===Cf?Y.push(od+fA):hA===Zh&&Y.push(od+Nf(dA,AA,ot)+fA)}Y=hA===Cf?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var ul=`BT
/`;return ul+=Qt+" "+xe+` Tf
`,ul+=E(xe*zn)+` TL
`,ul+=gc+`
`,ul+=yn,ul+=Y,he(ul+="ET"),h[Qt]=!0,Ut};var Kh=m.__private__.clip=m.clip=function(Y){return he(Y==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Kh("evenodd")},m.__private__.discardPath=m.discardPath=function(){return he("n"),this};var Li=m.__private__.isValidStyle=function(Y){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(fe=!0),fe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(Y){return Li(Y)&&(u=Y),this};var So=m.__private__.getStyle=m.getStyle=function(Y){var fe=u;switch(Y){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=Y}return fe},io=m.close=function(){return he("h"),this};m.stroke=function(){return he("S"),this},m.fill=function(Y){return Ol("f",Y),this},m.fillEvenOdd=function(Y){return Ol("f*",Y),this},m.fillStroke=function(Y){return Ol("B",Y),this},m.fillStrokeEvenOdd=function(Y){return Ol("B*",Y),this};var Ol=function(Y,fe){ga(fe)==="object"?pc(fe,Y):he(Y)},ko=function(Y){Y===null||N===w.ADVANCED&&Y===void 0||(Y=So(Y),he(Y))};function au(Y,fe,De,Me,Ke){var yt=new xv(fe||this.boundingBox,De||this.xStep,Me||this.yStep,this.gState,Ke||this.matrix);yt.stream=this.stream;var Lt=Y+"$$"+this.cloneIndex+++"$$";return Wr(Lt,yt),yt}var pc=function(Y,fe){var De=As[Y.key],Me=Pr[De];if(Me instanceof Op)he("q"),he(gf(fe)),Me.gState&&m.setGState(Me.gState),he(Y.matrix.toString()+" cm"),he("/"+De+" sh"),he("Q");else if(Me instanceof xv){var Ke=new bt(1,0,0,-1,0,Qi());Y.matrix&&(Ke=Ke.multiply(Y.matrix||xr),De=au.call(Me,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Ke).id),he("q"),he("/Pattern cs"),he("/"+De+" scn"),Me.gState&&m.setGState(Me.gState),he(fe),he("Q")}},gf=function(Y){switch(Y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},jo=m.moveTo=function(Y,fe){return he(E(j(Y))+" "+E(M(fe))+" m"),this},Mi=m.lineTo=function(Y,fe){return he(E(j(Y))+" "+E(M(fe))+" l"),this},Dl=m.curveTo=function(Y,fe,De,Me,Ke,yt){return he([E(j(Y)),E(M(fe)),E(j(De)),E(M(Me)),E(j(Ke)),E(M(yt)),"c"].join(" ")),this};m.__private__.line=m.line=function(Y,fe,De,Me,Ke){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return N===w.COMPAT?this.lines([[De-Y,Me-fe]],Y,fe,[1,1],Ke||"S"):this.lines([[De-Y,Me-fe]],Y,fe,[1,1]).stroke()},m.__private__.lines=m.lines=function(Y,fe,De,Me,Ke,yt){var Lt,Zt,O,ne,ce,be,ze,ot,Ut,Or,yn,Xr;if(typeof Y=="number"&&(Xr=De,De=fe,fe=Y,Y=Xr),Me=Me||[1,1],yt=yt||!1,isNaN(fe)||isNaN(De)||!Array.isArray(Y)||!Array.isArray(Me)||!Li(Ke)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(jo(fe,De),Lt=Me[0],Zt=Me[1],ne=Y.length,Or=fe,yn=De,O=0;O<ne;O++)(ce=Y[O]).length===2?(Or=ce[0]*Lt+Or,yn=ce[1]*Zt+yn,Mi(Or,yn)):(be=ce[0]*Lt+Or,ze=ce[1]*Zt+yn,ot=ce[2]*Lt+Or,Ut=ce[3]*Zt+yn,Or=ce[4]*Lt+Or,yn=ce[5]*Zt+yn,Dl(be,ze,ot,Ut,Or,yn));return yt&&io(),ko(Ke),this},m.path=function(Y){for(var fe=0;fe<Y.length;fe++){var De=Y[fe],Me=De.c;switch(De.op){case"m":jo(Me[0],Me[1]);break;case"l":Mi(Me[0],Me[1]);break;case"c":Dl.apply(this,Me);break;case"h":io()}}return this},m.__private__.rect=m.rect=function(Y,fe,De,Me,Ke){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w.COMPAT&&(Me=-Me),he([E(j(Y)),E(M(fe)),E(j(De)),E(j(Me)),"re"].join(" ")),ko(Ke),this},m.__private__.triangle=m.triangle=function(Y,fe,De,Me,Ke,yt,Lt){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||isNaN(Ke)||isNaN(yt)||!Li(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-Y,Me-fe],[Ke-De,yt-Me],[Y-Ke,fe-yt]],Y,fe,[1,1],Lt,!0),this},m.__private__.roundedRect=m.roundedRect=function(Y,fe,De,Me,Ke,yt,Lt){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||isNaN(Ke)||isNaN(yt)||!Li(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*De),yt=Math.min(yt,.5*Me),this.lines([[De-2*Ke,0],[Ke*Zt,0,Ke,yt-yt*Zt,Ke,yt],[0,Me-2*yt],[0,yt*Zt,-Ke*Zt,yt,-Ke,yt],[2*Ke-De,0],[-Ke*Zt,0,-Ke,-yt*Zt,-Ke,-yt],[0,2*yt-Me],[0,-yt*Zt,Ke*Zt,-yt,Ke,-yt]],Y+Ke,fe,[1,1],Lt,!0),this},m.__private__.ellipse=m.ellipse=function(Y,fe,De,Me,Ke){if(isNaN(Y)||isNaN(fe)||isNaN(De)||isNaN(Me)||!Li(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*De,Lt=4/3*(Math.SQRT2-1)*Me;return jo(Y+De,fe),Dl(Y+De,fe-Lt,Y+yt,fe-Me,Y,fe-Me),Dl(Y-yt,fe-Me,Y-De,fe-Lt,Y-De,fe),Dl(Y-De,fe+Lt,Y-yt,fe+Me,Y,fe+Me),Dl(Y+yt,fe+Me,Y+De,fe+Lt,Y+De,fe),ko(Ke),this},m.__private__.circle=m.circle=function(Y,fe,De,Me){if(isNaN(Y)||isNaN(fe)||isNaN(De)||!Li(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,fe,De,De,Me)},m.setFont=function(Y,fe,De){return De&&(fe=F(fe,De)),Qt=nu(Y,fe,{disableWarning:!1}),this};var ms=m.__private__.getFont=m.getFont=function(){return Sr[nu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var Y,fe,De={};for(Y in $r)if($r.hasOwnProperty(Y))for(fe in De[Y]=[],$r[Y])$r[Y].hasOwnProperty(fe)&&De[Y].push(fe);return De},m.addFont=function(Y,fe,De,Me,Ke){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(De=F(De,Me)),Ke=Ke||"Identity-H",eu.call(this,Y,fe,De,Ke)};var bn,su=e.lineWidth||.200025,Pl=m.__private__.getLineWidth=m.getLineWidth=function(){return su},xf=m.__private__.setLineWidth=m.setLineWidth=function(Y){return su=Y,he(E(j(Y))+" w"),this};m.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(Y,fe){if(Y=Y||[],fe=fe||0,isNaN(fe)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(De){return E(j(De))}).join(" "),fe=E(j(fe)),he("["+Y+"] "+fe+" d"),this};var Zu=m.__private__.getLineHeight=m.getLineHeight=function(){return xe*bn};m.__private__.getLineHeight=m.getLineHeight=function(){return xe*bn};var ed=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(bn=Y),this},cl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return bn};ed(e.lineHeight);var Ui=m.__private__.getHorizontalCoordinate=function(Y){return j(Y)},ps=m.__private__.getVerticalCoordinate=function(Y){return N===w.ADVANCED?Y:gr[Q].mediaBox.topRightY-gr[Q].mediaBox.bottomLeftY-j(Y)},qh=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(Y){return E(Ui(Y))},iu=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(Y){return E(ps(Y))},Ci=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Se(Ci)},m.__private__.setStrokeColor=m.setDrawColor=function(Y,fe,De,Me){return Ci=Fe({ch1:Y,ch2:fe,ch3:De,ch4:Me,pdfColorType:"draw",precision:2}),he(Ci),this};var ou=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Se(ou)},m.__private__.setFillColor=m.setFillColor=function(Y,fe,De,Me){return ou=Fe({ch1:Y,ch2:fe,ch3:De,ch4:Me,pdfColorType:"fill",precision:2}),he(ou),this};var gc=e.textColor||"0 g",rA=m.__private__.getTextColor=m.getTextColor=function(){return Se(gc)};m.__private__.setTextColor=m.setTextColor=function(Y,fe,De,Me){return gc=Fe({ch1:Y,ch2:fe,ch3:De,ch4:Me,pdfColorType:"text",precision:3}),this};var td=e.charSpace,nA=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(td||0)};m.__private__.setCharSpace=m.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return td=Y,this};var vf=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(Y){var fe=m.CapJoinStyles[Y];if(fe===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vf=fe,he(fe+" J"),this};var rd=0;m.__private__.setLineJoin=m.setLineJoin=function(Y){var fe=m.CapJoinStyles[Y];if(fe===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rd=fe,he(fe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(E(j(Y))+" M"),this},m.GState=bS,m.setGState=function(Y){(Y=typeof Y=="string"?mn[la[Y]]:lu(null,Y)).equals(ja)||(he("/"+Y.id+" gs"),ja=Y)};var lu=function(Y,fe){if(!Y||!la[Y]){var De=!1;for(var Me in mn)if(mn.hasOwnProperty(Me)&&mn[Me].equals(fe)){De=!0;break}if(De)fe=mn[Me];else{var Ke="GS"+(Object.keys(mn).length+1).toString(10);mn[Ke]=fe,fe.id=Ke}return Y&&(la[Y]=fe.id),Ze.publish("addGState",fe),fe}};m.addGState=function(Y,fe){return lu(Y,fe),this},m.saveGraphicsState=function(){return he("q"),Fn.push({key:Qt,size:xe,color:gc}),this},m.restoreGraphicsState=function(){he("Q");var Y=Fn.pop();return Qt=Y.key,xe=Y.size,gc=Y.color,ja=null,this},m.setCurrentTransformationMatrix=function(Y){return he(Y.toString()+" cm"),this},m.comment=function(Y){return he("#"+Y),this};var nd=function(Y,fe){var De=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var Me=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(yt){isNaN(yt)||(Me=parseFloat(yt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(yt){Ke=yt.toString()}}),this},aA=function(Y,fe,De,Me){nd.call(this,Y,fe),this.type="rect";var Ke=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(Lt){isNaN(Lt)||(Ke=parseFloat(Lt))}});var yt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Lt){isNaN(Lt)||(yt=parseFloat(Lt))}}),this},ad=function(){this.page=rn,this.currentPage=Q,this.pages=je.slice(0),this.pagesContext=gr.slice(0),this.x=Tr,this.y=tr,this.matrix=an,this.width=uu(Q),this.height=Qi(Q),this.outputDestination=Ne,this.id="",this.objectNumber=-1};ad.prototype.restore=function(){rn=this.page,Q=this.currentPage,gr=this.pagesContext,je=this.pages,Tr=this.x,tr=this.y,an=this.matrix,sd(Q,this.width),sA(Q,this.height),Ne=this.outputDestination};var cu=function(Y,fe,De,Me,Ke){Et.push(new ad),rn=Q=0,je=[],Tr=Y,tr=fe,an=Ke,Ei([De,Me])},Wh=function(Y){if(xt[Y])Et.pop().restore();else{var fe=new ad,De="Xo"+(Object.keys(Je).length+1).toString(10);fe.id=De,xt[Y]=De,Je[De]=fe,Ze.publish("addFormObject",fe),Et.pop().restore()}};for(var xc in m.beginFormObject=function(Y,fe,De,Me,Ke){return cu(Y,fe,De,Me,Ke),this},m.endFormObject=function(Y){return Wh(Y),this},m.doFormObject=function(Y,fe){var De=Je[xt[Y]];return he("q"),he(fe.toString()+" cm"),he("/"+De.id+" Do"),he("Q"),this},m.getFormObject=function(Y){var fe=Je[xt[Y]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},m.save=function(Y,fe){return Y=Y||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(jp(tA(fc()),Y),typeof jp.unload=="function"&&Qr.setTimeout&&setTimeout(jp.unload,911),this):new Promise(function(De,Me){try{var Ke=jp(tA(fc()),Y);typeof jp.unload=="function"&&Qr.setTimeout&&setTimeout(jp.unload,911),De(Ke)}catch(yt){Me(yt.message)}})},vr.API)vr.API.hasOwnProperty(xc)&&(xc==="events"&&vr.API.events.length?function(Y,fe){var De,Me,Ke;for(Ke=fe.length-1;Ke!==-1;Ke--)De=fe[Ke][0],Me=fe[Ke][1],Y.subscribe.apply(Y,[De].concat(typeof Me=="function"?[Me]:Me))}(Ze,vr.API.events):m[xc]=vr.API[xc]);var uu=m.getPageWidth=function(Y){return(gr[Y=Y||Q].mediaBox.topRightX-gr[Y].mediaBox.bottomLeftX)/wt},sd=m.setPageWidth=function(Y,fe){gr[Y].mediaBox.topRightX=fe*wt+gr[Y].mediaBox.bottomLeftX},Qi=m.getPageHeight=function(Y){return(gr[Y=Y||Q].mediaBox.topRightY-gr[Y].mediaBox.bottomLeftY)/wt},sA=m.setPageHeight=function(Y,fe){gr[Y].mediaBox.topRightY=fe*wt+gr[Y].mediaBox.bottomLeftY};return m.internal={pdfEscape:On,getStyle:So,getFont:ms,getFontSize:Re,getCharSpace:nA,getTextColor:rA,getLineHeight:Zu,getLineHeightFactor:cl,getLineWidth:Pl,write:Be,getHorizontalCoordinate:Ui,getVerticalCoordinate:ps,getCoordinateString:qh,getVerticalCoordinateString:iu,collections:{},newObject:Zr,newAdditionalObject:Ie,newObjectDeferred:qr,newObjectDeferredBegin:me,getFilters:Ye,putStream:dt,events:Ze,scaleFactor:wt,pageSize:{getWidth:function(){return uu(Q)},setWidth:function(Y){sd(Q,Y)},getHeight:function(){return Qi(Q)},setHeight:function(Y){sA(Q,Y)}},encryptionOptions:d,encryption:ca,getEncryptor:mc,output:hc,getNumberOfPages:Vn,pages:je,out:he,f2:L,f3:R,getPageInfo:Il,getPageInfoByObjId:Fr,getCurrentPageInfo:Fl,getPDFVersion:x,Point:nd,Rectangle:aA,Matrix:bt,hasHotfix:Tl},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return uu(Q)},set:function(Y){sd(Q,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Qi(Q)},set:function(Y){sA(Q,Y)},enumerable:!0,configurable:!0}),hf.call(m,We),Qt="F1",tu(a,r),Ze.publish("initialized"),m}ov.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},ov.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ov.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},ov.prototype.processOwnerPassword=function(e,t){return CO(EO(t).substr(0,5),e)},ov.prototype.encryptor=function(e,t){var r=EO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return CO(r,n)}},bS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ga(e)!==ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var Es=vr.API,ZL=1,Jg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Px=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(e){return e.toFixed(2)},I0=function(e){return e.toFixed(5)};Es.__acroform__={};var dc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},hq=function(e){return e*ZL},DA=function(e){var t=new Nle,r=pr.internal.getHeight(e)||0,n=pr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(en(n)),Number(en(r))],t},dWe=Es.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},AWe=Es.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},fWe=Es.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ws=Es.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return fWe(e,t-1)},Xs=Es.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return dWe(e,t-1)},Ys=Es.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AWe(e,t-1)},hWe=Es.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},mWe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=NO(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+en(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=DA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},NO=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(R){return R.split(`
`)}):a.map(function(R){return[R]});var s=r,i=pr.internal.getHeight(e)||0;i=i<0?-i:i;var l=pr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(R,j,P){if(R+1<a.length){var M=j+" "+a[R+1][0];return mN(M,e,P).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=mN("3",e,s).height,h=e.multiline?i-s:(i-f)/2,m=h+=2,g=0,x=0,v=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+mN(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",w=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var B=!1;if(a[N].length!==1&&v!==a[N].length-1){if((f+2)*(w+2)+2>i)continue e;y+=a[N][v],B=!0,x=N,N--}else{y=(y+=a[N][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var k=parseInt(N),F=c(k,y,s),E=N>=a.length-1;if(F&&!E){y+=" ",v=0;continue}if(F||E){if(E)x=k;else if(e.multiline&&(f+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>i)continue e;x=k}}for(var S="",T=g;T<=x;T++){var L=a[T];if(e.multiline){if(T===x){S+=L[v]+" ",v=(v+1)%L.length;continue}if(T===g){S+=L[L.length-1]+" ";continue}}S+=L[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=mN(S,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=en(u)+" "+en(m)+` Td
`,t+="("+Jg(S)+`) Tj
`,t+=-en(u)+` 0 Td
`,m=-(s+2),d=0,g=B?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},mN=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},pWe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},gWe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},xWe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ga(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},vWe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Wd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(pWe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ZL=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new _le,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&gWe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=hWe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=pr.createDefaultAppearanceStream(l),ga(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=mWe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var m=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var g=m[i];typeof g=="function"&&(g=g.call(a,l)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(a,l)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&xWe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Cle=Es.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ga(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Jg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xI=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Jg(n(e))+")"},qA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qA.prototype.toString=function(){return this.objId+" 0 R"},qA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},qA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Cle(a,this.objId,this.scope)}):a instanceof qA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Nle=function(){qA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};dc(Nle,qA);var _le=function(){qA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Jg(r(e))+")"}},set:function(r){e=r}})};dc(_le,qA);var Wd=function e(){qA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ws(t,3)},set:function(y){y?this.F=Xs(t,3):this.F=Ys(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof yS)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Jg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/ZL:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof yS||this instanceof ag))return xI(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Yi?h:xI(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Yi?y:y.substr(0,1)==="("?Px(y.substr(1,y.length-2)):Px(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Px(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Yi?"/"+y:y}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yi?m:xI(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Yi?y:y.substr(0,1)==="("?Px(y.substr(1,y.length-2)):Px(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi?Px(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Yi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,1)},set:function(y){y?this.Ff=Xs(this.Ff,1):this.Ff=Ys(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,2)},set:function(y){y?this.Ff=Xs(this.Ff,2):this.Ff=Ys(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,3)},set:function(y){y?this.Ff=Xs(this.Ff,3):this.Ff=Ys(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};dc(Wd,qA);var Lv=function(){Wd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Cle(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,18)},set:function(r){r?this.Ff=Xs(this.Ff,18):this.Ff=Ys(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Xs(this.Ff,19):this.Ff=Ys(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,20)},set:function(r){r?(this.Ff=Xs(this.Ff,20),t.sort()):this.Ff=Ys(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,22)},set:function(r){r?this.Ff=Xs(this.Ff,22):this.Ff=Ys(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,23)},set:function(r){r?this.Ff=Xs(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,27)},set:function(r){r?this.Ff=Xs(this.Ff,27):this.Ff=Ys(this.Ff,27)}}),this.hasAppearanceStream=!1};dc(Lv,Wd);var Mv=function(){Lv.call(this),this.fontName="helvetica",this.combo=!1};dc(Mv,Lv);var Uv=function(){Mv.call(this),this.combo=!0};dc(Uv,Mv);var p5=function(){Uv.call(this),this.edit=!0};dc(p5,Uv);var Yi=function(){Wd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,15)},set:function(r){r?this.Ff=Xs(this.Ff,15):this.Ff=Ys(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,16)},set:function(r){r?this.Ff=Xs(this.Ff,16):this.Ff=Ys(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,17)},set:function(r){r?this.Ff=Xs(this.Ff,17):this.Ff=Ys(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,26)},set:function(r){r?this.Ff=Xs(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Jg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};dc(Yi,Wd);var g5=function(){Yi.call(this),this.pushButton=!0};dc(g5,Yi);var Qv=function(){Yi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};dc(Qv,Yi);var yS=function(){var e,t;Wd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Jg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};dc(yS,Wd),Qv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Qv.prototype.createOption=function(e){var t=new yS;return t.Parent=this,t.optionName=e,this.Kids.push(t),bWe.call(this.scope,t),t};var x5=function(){Yi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pr.CheckBox.createAppearanceStream()};dc(x5,Yi);var ag=function(){Wd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,13)},set:function(t){t?this.Ff=Xs(this.Ff,13):this.Ff=Ys(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,21)},set:function(t){t?this.Ff=Xs(this.Ff,21):this.Ff=Ys(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,23)},set:function(t){t?this.Ff=Xs(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,24)},set:function(t){t?this.Ff=Xs(this.Ff,24):this.Ff=Ys(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,25)},set:function(t){t?this.Ff=Xs(this.Ff,25):this.Ff=Ys(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,26)},set:function(t){t?this.Ff=Xs(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};dc(ag,Wd);var v5=function(){ag.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ws(this.Ff,14)},set:function(e){e?this.Ff=Xs(this.Ff,14):this.Ff=Ys(this.Ff,14)}}),this.password=!0};dc(v5,ag);var pr={CheckBox:{createAppearanceStream:function(){return{N:{On:pr.CheckBox.YesNormal},D:{On:pr.CheckBox.YesPushDown,Off:pr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=NO(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+en(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=DA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=pr.internal.getHeight(e),i=pr.internal.getWidth(e),l=NO(e,e.caption);return a.push("1 g"),a.push("0 0 "+en(i)+" "+en(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+en(i-1)+" "+en(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+en(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:pr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=pr.RadioButton.Circle.YesNormal,t.D[e]=pr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=pr.internal.getWidth(e)<=pr.internal.getHeight(e)?pr.internal.getWidth(e)/4:pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=pr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+I0(pr.internal.getWidth(e)/2)+" "+I0(pr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=pr.internal.getWidth(e)<=pr.internal.getHeight(e)?pr.internal.getWidth(e)/4:pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*pr.internal.Bezier_C).toFixed(5)),i=Number((n*pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+I0(pr.internal.getWidth(e)/2)+" "+I0(pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+I0(pr.internal.getWidth(e)/2)+" "+I0(pr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=pr.internal.getWidth(e)<=pr.internal.getHeight(e)?pr.internal.getWidth(e)/4:pr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+I0(pr.internal.getWidth(e)/2)+" "+I0(pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:pr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=pr.RadioButton.Cross.YesNormal,t.D[e]=pr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=DA(e);t.scope=e.scope;var r=[],n=pr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+en(pr.internal.getWidth(e)-2)+" "+en(pr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=pr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+en(pr.internal.getWidth(e)-2)+" "+en(pr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=DA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+en(pr.internal.getWidth(e))+" "+en(pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};pr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=pr.internal.getWidth(e),r=pr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},pr.internal.getWidth=function(e){var t=0;return ga(e)==="object"&&(t=hq(e.Rect[2])),t},pr.internal.getHeight=function(e){var t=0;return ga(e)==="object"&&(t=hq(e.Rect[3])),t};var bWe=Es.addField=function(e){if(vWe(this,e),!(e instanceof Wd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Es.AcroFormChoiceField=Lv,Es.AcroFormListBox=Mv,Es.AcroFormComboBox=Uv,Es.AcroFormEditBox=p5,Es.AcroFormButton=Yi,Es.AcroFormPushButton=g5,Es.AcroFormRadioButton=Qv,Es.AcroFormCheckBox=x5,Es.AcroFormTextField=ag,Es.AcroFormPasswordField=v5,Es.AcroFormAppearance=pr,Es.AcroForm={ChoiceField:Lv,ListBox:Mv,ComboBox:Uv,EditBox:p5,Button:Yi,PushButton:g5,RadioButton:Qv,CheckBox:x5,TextField:ag,PasswordField:v5,Appearance:pr},vr.AcroForm={ChoiceField:Lv,ListBox:Mv,ComboBox:Uv,EditBox:p5,Button:Yi,PushButton:g5,RadioButton:Qv,CheckBox:x5,TextField:ag,PasswordField:v5,Appearance:pr};vr.AcroForm;function Sle(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(R,j){var P,M,Z,V,W,G=t;if((j=j||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(F(R))for(W in r)for(Z=r[W],P=0;P<Z.length;P+=1){for(V=!0,M=0;M<Z[P].length;M+=1)if(Z[P][M]!==void 0&&Z[P][M]!==R[M]){V=!1;break}if(V===!0){G=W;break}}else for(W in r)for(Z=r[W],P=0;P<Z.length;P+=1){for(V=!0,M=0;M<Z[P].length;M+=1)if(Z[P][M]!==void 0&&Z[P][M]!==R.charCodeAt(M)){V=!1;break}if(V===!0){G=W;break}}return G===t&&j!==t&&(G=j),G},a=function R(j){for(var P=this.internal.write,M=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:j.width}),V.push({key:"Height",value:j.height}),j.colorSpace===v.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===v.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var W="",G=0,K=j.transparency.length;G<K;G++)W+=j.transparency[G]+" "+j.transparency[G]+" ";V.push({key:"Mask",value:"["+W+"]"})}j.sMask!==void 0&&V.push({key:"SMask",value:j.objectId+1+" 0 R"});var ee=j.filter!==void 0?["/"+j.filter]:void 0;if(M({data:j.data,additionalKeyValues:V,alreadyAppliedFilters:ee,objectId:j.objectId}),P("endobj"),"sMask"in j&&j.sMask!==void 0){var X="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,D={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:X,data:j.sMask};"filter"in j&&(D.filter=j.filter),R.call(this,D)}if(j.colorSpace===v.INDEXED){var Q=this.internal.newObject();M({data:S(new Uint8Array(j.palette)),objectId:Q}),P("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var j in R)a.call(this,R[j])},i=function(){var R,j=this.internal.collections.addImage_images,P=this.internal.write;for(var M in j)P("/I"+(R=j[M]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof e["process"+R.toUpperCase()]=="function"},f=function(R){return ga(R)==="object"&&R.nodeType===1},h=function(R,j){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var P=""+R.getAttribute("src");if(P.indexOf("data:image/")===0)return Ew(unescape(P).split("base64,").pop());var M=e.loadFile(P,!0);if(M!==void 0)return M}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var Z;switch(j){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Ew(R.toDataURL(Z,1).split("base64,").pop())}},m=function(R){var j=this.internal.collections.addImage_images;if(j){for(var P in j)if(R===j[P].alias)return j[P]}},g=function(R,j,P){return R||j||(R=-96,j=-96),R<0&&(R=-1*P.width*72/R/this.internal.scaleFactor),j<0&&(j=-1*P.height*72/j/this.internal.scaleFactor),R===0&&(R=j*P.width/P.height),j===0&&(j=R*P.height/P.width),[R,j]},x=function(R,j,P,M,Z,V){var W=g.call(this,P,M,Z),G=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,ee=c.call(this);if(P=W[0],M=W[1],ee[Z.index]=Z,V){V*=Math.PI/180;var X=Math.cos(V),D=Math.sin(V),Q=function(J){return J.toFixed(4)},z=[Q(X),Q(D),Q(-1*D),Q(X),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,G(R),K(j+M),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([G(P),"0","0",G(M),"0","0","cm"].join(" "))):this.internal.write([G(P),"0","0",G(M),G(R),K(j+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(R){var j,P,M=0;if(typeof R=="string")for(P=R.length,j=0;j<P;j++)M=(M<<5)-M+R.charCodeAt(j),M|=0;else if(F(R))for(P=R.byteLength/2,j=0;j<P;j++)M=(M<<5)-M+R[j],M|=0;return M},N=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var j=!0;return R.length===0&&(j=!1),R.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(j=!1),j},B=e.__addimage__.extractImageFromDataUrl=function(R){var j=(R=R||"").split("base64,"),P=null;if(j.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(M)&&(P={mimeType:M[1],charset:M[2],data:j[1]})}return P},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return k()&&R instanceof ArrayBuffer};var F=e.__addimage__.isArrayBufferView=function(R){return k()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(R){for(var j=R.length,P=new Uint8Array(j),M=0;M<j;M++)P[M]=R.charCodeAt(M);return P},S=e.__addimage__.arrayBufferToBinaryString=function(R){for(var j="",P=F(R)?R:new Uint8Array(R),M=0;M<P.length;M+=8192)j+=String.fromCharCode.apply(null,P.subarray(M,M+8192));return j};e.addImage=function(){var R,j,P,M,Z,V,W,G,K;if(typeof arguments[1]=="number"?(j=t,P=arguments[1],M=arguments[2],Z=arguments[3],V=arguments[4],W=arguments[5],G=arguments[6],K=arguments[7]):(j=arguments[1],P=arguments[2],M=arguments[3],Z=arguments[4],V=arguments[5],W=arguments[6],G=arguments[7],K=arguments[8]),ga(R=arguments[0])==="object"&&!f(R)&&"imageData"in R){var ee=R;R=ee.imageData,j=ee.format||j||t,P=ee.x||P||0,M=ee.y||M||0,Z=ee.w||ee.width||Z,V=ee.h||ee.height||V,W=ee.alias||W,G=ee.compression||G,K=ee.rotation||ee.angle||K}var X=this.internal.getFilters();if(G===void 0&&X.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(P)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var D=T.call(this,R,j,W,G);return x.call(this,P,M,Z,V,D,K),this};var T=function(R,j,P,M){var Z,V,W;if(typeof R=="string"&&n(R)===t){R=unescape(R);var G=L(R,!1);(G!==""||(G=e.loadFile(R,!0))!==void 0)&&(R=G)}if(f(R)&&(R=h(R,j)),j=n(R,j),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((W=P)==null||W.length===0)&&(P=function(K){return typeof K=="string"||F(K)?w(K):F(K.data)?w(K.data):null}(R)),(Z=m.call(this,P))||(k()&&(R instanceof Uint8Array||j==="RGBA"||(V=R,R=E(R))),Z=this["process"+j.toUpperCase()](R,u.call(this),P,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in e.image_compression?K:y.NONE}(M),V)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},L=e.__addimage__.convertBase64ToBinaryString=function(R,j){var P;j=typeof j!="boolean"||j;var M,Z="";if(typeof R=="string"){M=(P=B(R))!==null?P.data:R;try{Z=Ew(M)}catch(V){if(j)throw N(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};e.getImageProperties=function(R){var j,P,M="";if(f(R)&&(R=h(R)),typeof R=="string"&&n(R)===t&&((M=L(R,!1))===""&&(M=e.loadFile(R)||""),R=M),P=n(R),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!k()||R instanceof Uint8Array||(R=E(R)),!(j=this["process"+P.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=P,j}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(y(n.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(y(w))+") >>",x.content=s;var N=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var F=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+F+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var v=0,y=r,w="",N=0;for(v=0;v<x.length;v+=1)y[x.charCodeAt(v)]!==void 0?(N++,typeof(y=y[x.charCodeAt(v)])=="number"&&(w+=String.fromCharCode(y),y=r,N=0),v===x.length-1&&(y=r,w+=x.charAt(v-(N-1)),v-=N-1,N=0)):(y=r,w+=x.charAt(v-N),v-=N,N=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,v,y){return i(x)?s(x)===!1?-1:!u(x)||!i(v)&&!i(y)||!i(y)&&l(v)||l(x)&&!i(v)||l(x)&&c(v)||l(x)&&l(v)?0:d(x)&&i(v)&&!l(v)&&i(y)&&u(y)?3:l(x)||!i(y)?1:2:-1},m=function(x){var v=0,y=0,w=0,N="",B="",k="",F=(x=x||"").split("\\s+"),E=[];for(v=0;v<F.length;v+=1){for(E.push(""),y=0;y<F[v].length;y+=1)N=F[v][y],B=F[v][y-1],k=F[v][y+1],i(N)?(w=h(N,B,k),E[v]+=w!==-1?String.fromCharCode(t[N.charCodeAt(0)][w]):N):E[v]+=N;E[v]=f(E[v])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var w=0;for(y=[],w=0;w<v.length;w+=1)Array.isArray(v[w])?y.push([m(v[w][0]),v[w][1],v[w][2]]):y.push([m(v[w])]);x=y}else x=m(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,x=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,B){return N.concat(v.splitTextToSize(B,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)m<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(m=x);return m!==0&&(g=c.length),{w:m/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,x,v,y=[],w=[],N=[],B={},k={},F=[],E=[],S=(h=h||{}).autoSize||!1,T=h.printHeaders!==!1,L=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,R=h.margins||Object.assign({width:this.getPageWidth()},t),j=typeof h.padding=="number"?h.padding:3,P=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=M,this.setFontSize(L),f==null)w=y=Object.keys(d[0]),N=y.map(function(){return"left"});else if(Array.isArray(f)&&ga(f[0])==="object")for(y=f.map(function(ee){return ee.name}),w=f.map(function(ee){return ee.prompt||ee.name||""}),N=f.map(function(ee){return ee.align||"left"}),m=0;m<f.length;m+=1)k[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,N=y.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<y.length;m+=1){for(B[v=y[m]]=d.map(function(ee){return ee[v]}),this.setFont(void 0,"bold"),F.push(this.getTextDimensions(w[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=B[v],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)F.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[v]=Math.max.apply(null,F)+j+j,F=[]}if(T){var Z={};for(m=0;m<y.length;m+=1)Z[y[m]]={},Z[y[m]].text=w[m],Z[y[m]].align=N[m];var V=l.call(this,Z,k);E=y.map(function(ee){return new s(c,u,k[ee],V,Z[ee].text,void 0,Z[ee].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var W=f.reduce(function(ee,X){return ee[X.name]=X.align,ee},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var G=l.call(this,d[m],k);for(x=0;x<y.length;x+=1){var K=d[m][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:x,data:K},this),i.call(this,new s(c,u,k[y[x]],G,K,m+2,W[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var kle={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jle=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_O=Sle(jle),Ble=[100,200,300,400,500,600,700,800,900],yWe=Sle(Ble);function SO(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return kle[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof _O[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function mq(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var wWe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},pq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function gq(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function EWe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},wWe,r.genericFontFamilies||{}),s=null,i=null,l=0;l<t.length;++l)if(a[(s=SO(t[l])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+gq(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=_O[c],f=d<=_O.normal?-1:1,h=mq(u,jle,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=kle[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=yWe[c],f=mq(u,Ble,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+gq(s)+"'.");return i}function xq(e){return e.trimLeft()}function CWe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function NWe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var pN,vq,bq,vI=["times"];(function(e){var t,r,n,a,s,i,l,c,u,d=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new c,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new i,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new i,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=D;Object.defineProperty(this,"pdf",{get:function(){return Q}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(_e){z=!!_e}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(_e){J=!!_e}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(_e){isNaN(_e)||(te=_e)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(_e){isNaN(_e)||(se=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var he;typeof _e=="number"?he=[_e,_e,_e,_e]:((he=new Array(4))[0]=_e[0],he[1]=_e.length>=2?_e[1]:he[0],he[2]=_e.length>=3?_e[2]:he[0],he[3]=_e.length>=4?_e[3]:he[1]),u.margin=he}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(_e){ie=_e}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(_e){le=_e}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(_e){ue=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(_e){je=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var he;he=h(_e),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var he=h(_e);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var ae=null;function Ne(_e,he){if(ae===null){var Be=function(Le){var We=[];return Object.keys(Le).forEach(function(xe){Le[xe].forEach(function(Oe){var Re=null;switch(Oe){case"bold":Re={family:xe,weight:"bold"};break;case"italic":Re={family:xe,style:"italic"};break;case"bolditalic":Re={family:xe,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:xe}}Re!==null&&(Re.ref={name:xe,style:Oe},We.push(Re))})}),We}(_e.getFontList());ae=function(Le){for(var We={},xe=0;xe<Le.length;++xe){var Oe=SO(Le[xe]),Re=Oe.family,$e=Oe.stretch,et=Oe.style,ct=Oe.weight;We[Re]=We[Re]||{},We[Re][$e]=We[Re][$e]||{},We[Re][$e][et]=We[Re][$e][et]||{},We[Re][$e][et][ct]=Oe}return We}(Be.concat(he))}return ae}var ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(_e){ae=null,ke=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var he;if(this.ctx.font=_e,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var Be=he[1],Le=(he[2],he[3]),We=he[4],xe=(he[5],he[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(Oe==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var Re=function(Pt){var Qt,wt,Tr=[],tr=Pt.trim();if(tr==="")return vI;if(tr in pq)return[pq[tr]];for(;tr!=="";){switch(wt=null,Qt=(tr=xq(tr)).charAt(0)){case'"':case"'":wt=CWe(tr.substring(1),Qt);break;default:wt=NWe(tr)}if(wt===null||(Tr.push(wt[0]),(tr=xq(wt[1]))!==""&&tr.charAt(0)!==","))return vI;tr=tr.replace(/^,/,"")}return Tr}(xe);if(this.fontFaces){var $e=EWe(Ne(this.pdf,this.fontFaces),Re.map(function(Pt){return{family:Pt,stretch:"normal",weight:Le,style:Be}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var et="";(Le==="bold"||parseInt(Le,10)>=700||Be==="bold")&&(et="bold"),Be==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var ct="",gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<Re.length;It++){if(this.pdf.internal.getFont(Re[It],et,{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It];break}if(et==="bolditalic"&&this.pdf.internal.getFont(Re[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=Re[It],et="bold";else if(this.pdf.internal.getFont(Re[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It],et="normal";break}}if(ct===""){for(var Mt=0;Mt<Re.length;Mt++)if(gt[Re[Mt]]){ct=gt[Re[Mt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(D){this.lineDash=D},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){B.call(this,"fill",!1)},f.prototype.stroke=function(){B.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(D,Q){if(isNaN(D)||isNaN(Q))throw Na.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new i(D,Q));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new i(D,Q)},f.prototype.closePath=function(){var D=new i(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&ga(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){D=new i(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(D.x,D.y)},f.prototype.lineTo=function(D,Q){if(isNaN(D)||isNaN(Q))throw Na.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new i(D,Q));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new i(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},f.prototype.quadraticCurveTo=function(D,Q,z,J){if(isNaN(z)||isNaN(J)||isNaN(D)||isNaN(Q))throw Na.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new i(z,J)),se=this.ctx.transform.applyToPoint(new i(D,Q));this.path.push({type:"qct",x1:se.x,y1:se.y,x:te.x,y:te.y}),this.ctx.lastPoint=new i(te.x,te.y)},f.prototype.bezierCurveTo=function(D,Q,z,J,te,se){if(isNaN(te)||isNaN(se)||isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new i(te,se)),le=this.ctx.transform.applyToPoint(new i(D,Q)),ue=this.ctx.transform.applyToPoint(new i(z,J));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:ue.x,y2:ue.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.arc=function(D,Q,z,J,te,se){if(isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J)||isNaN(te))throw Na.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new i(D,Q));D=ie.x,Q=ie.y;var le=this.ctx.transform.applyToPoint(new i(0,z)),ue=this.ctx.transform.applyToPoint(new i(0,0));z=Math.sqrt(Math.pow(le.x-ue.x,2)+Math.pow(le.y-ue.y,2))}Math.abs(te-J)>=2*Math.PI&&(J=0,te=2*Math.PI),this.path.push({type:"arc",x:D,y:Q,radius:z,startAngle:J,endAngle:te,counterclockwise:se})},f.prototype.arcTo=function(D,Q,z,J,te){throw new Error("arcTo not implemented.")},f.prototype.rect=function(D,Q,z,J){if(isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,Q),this.lineTo(D+z,Q),this.lineTo(D+z,Q+J),this.lineTo(D,Q+J),this.lineTo(D,Q),this.lineTo(D+z,Q),this.lineTo(D,Q)},f.prototype.fillRect=function(D,Q,z,J){if(isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,Q,z,J),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},f.prototype.strokeRect=function(D,Q,z,J){if(isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(D,Q,z,J),this.stroke())},f.prototype.clearRect=function(D,Q,z,J){if(isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J))throw Na.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,Q,z,J))},f.prototype.save=function(D){D=typeof D!="boolean"||D;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},f.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(D){var Q,z,J,te;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))Q=0,z=0,J=0,te=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(se!==null)Q=parseInt(se[1]),z=parseInt(se[2]),J=parseInt(se[3]),te=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)Q=parseInt(se[1]),z=parseInt(se[2]),J=parseInt(se[3]),te=parseFloat(se[4]);else{if(te=1,typeof D=="string"&&D.charAt(0)!=="#"){var ie=new yle(D);D=ie.ok?ie.toHex():"#000000"}D.length===4?(Q=D.substring(1,2),Q+=Q,z=D.substring(2,3),z+=z,J=D.substring(3,4),J+=J):(Q=D.substring(1,3),z=D.substring(3,5),J=D.substring(5,7)),Q=parseInt(Q,16),z=parseInt(z,16),J=parseInt(J,16)}}return{r:Q,g:z,b:J,a:te,style:D}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(D,Q,z,J){if(isNaN(Q)||isNaN(z)||typeof D!="string")throw Na.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var te=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;j.call(this,{text:D,x:Q,y:z,scale:se,angle:te,align:this.textAlign,maxWidth:J})}},f.prototype.strokeText=function(D,Q,z,J){if(isNaN(Q)||isNaN(z)||typeof D!="string")throw Na.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){J=isNaN(J)?void 0:J;var te=G(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;j.call(this,{text:D,x:Q,y:z,scale:se,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:J})}},f.prototype.measureText=function(D){if(typeof D!="string")throw Na.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,z=this.pdf.internal.scaleFactor,J=Q.internal.getFontSize(),te=Q.getStringUnitWidth(D)*J/Q.internal.scaleFactor,se=function(ie){var le=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return le}}),this};return new se({width:te*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(D,Q){if(isNaN(D)||isNaN(Q))throw Na.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(D,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(D){if(isNaN(D))throw Na.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new c(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.translate=function(D,Q){if(isNaN(D)||isNaN(Q))throw Na.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,D,Q);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(D,Q,z,J,te,se){if(isNaN(D)||isNaN(Q)||isNaN(z)||isNaN(J)||isNaN(te)||isNaN(se))throw Na.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(D,Q,z,J,te,se);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(D,Q,z,J,te,se){D=isNaN(D)?1:D,Q=isNaN(Q)?0:Q,z=isNaN(z)?0:z,J=isNaN(J)?1:J,te=isNaN(te)?0:te,se=isNaN(se)?0:se,this.ctx.transform=new c(D,Q,z,J,te,se)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(D,Q,z,J,te,se,ie,le,ue){var je=this.pdf.getImageProperties(D),ae=1,Ne=1,ke=1,_e=1;J!==void 0&&le!==void 0&&(ke=le/J,_e=ue/te,ae=je.width/J*le/J,Ne=je.height/te*ue/te),se===void 0&&(se=Q,ie=z,Q=0,z=0),J!==void 0&&le===void 0&&(le=J,ue=te),J===void 0&&le===void 0&&(le=je.width,ue=je.height);for(var he,Be=this.ctx.transform.decompose(),Le=G(Be.rotate.shx),We=new c,xe=(We=(We=(We=We.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale)).applyToRectangle(new l(se-Q*ke,ie-z*_e,J*ae,te*Ne)),Oe=v.call(this,xe),Re=[],$e=0;$e<Oe.length;$e+=1)Re.indexOf(Oe[$e])===-1&&Re.push(Oe[$e]);if(N(Re),this.autoPaging)for(var et=Re[0],ct=Re[Re.length-1],gt=et;gt<ct+1;gt++){this.pdf.setPage(gt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=gt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=gt===1?0:Pt+(gt-2)*Qt;if(this.ctx.clip_path.length!==0){var Tr=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(he,this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Tr}var tr=JSON.parse(JSON.stringify(xe));tr=w([tr],this.posX+this.margin[3],-wt+Mt+this.ctx.prevPageLastElemOffset)[0];var an=(gt>et||gt<ct)&&x.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Qt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,Le),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,Le)};var v=function(D,Q,z){var J=[];Q=Q||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":J.push(Math.floor((D.y+te)/z)+1);break;case"arc":J.push(Math.floor((D.y+te-D.radius)/z)+1),J.push(Math.floor((D.y+te+D.radius)/z)+1);break;case"qct":var se=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);J.push(Math.floor((se.y+te)/z)+1),J.push(Math.floor((se.y+se.h+te)/z)+1);break;case"bct":var ie=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);J.push(Math.floor((ie.y+te)/z)+1),J.push(Math.floor((ie.y+ie.h+te)/z)+1);break;case"rect":J.push(Math.floor((D.y+te)/z)+1),J.push(Math.floor((D.y+D.h+te)/z)+1)}for(var le=0;le<J.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<J[le];)y.call(this);return J},y=function(){var D=this.fillStyle,Q=this.strokeStyle,z=this.font,J=this.lineCap,te=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=Q,this.font=z,this.lineCap=J,this.lineWidth=te,this.lineJoin=se},w=function(D,Q,z){for(var J=0;J<D.length;J++)switch(D[J].type){case"bct":D[J].x2+=Q,D[J].y2+=z;case"qct":D[J].x1+=Q,D[J].y1+=z;case"mt":case"lt":case"arc":default:D[J].x+=Q,D[J].y+=z}return D},N=function(D){return D.sort(function(Q,z){return Q-z})},B=function(D,Q){for(var z,J,te=this.fillStyle,se=this.strokeStyle,ie=this.lineCap,le=this.lineWidth,ue=Math.abs(le*this.ctx.transform.scaleX),je=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),ke=[],_e=0;_e<Ne.length;_e++)if(Ne[_e].x!==void 0)for(var he=v.call(this,Ne[_e]),Be=0;Be<he.length;Be+=1)ke.indexOf(he[Be])===-1&&ke.push(he[Be]);for(var Le=0;Le<ke.length;Le++)for(;this.pdf.internal.getNumberOfPages()<ke[Le];)y.call(this);if(N(ke),this.autoPaging)for(var We=ke[0],xe=ke[ke.length-1],Oe=We;Oe<xe+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=te,this.strokeStyle=se,this.lineCap=ie,this.lineWidth=ue,this.lineJoin=je;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Oe===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gt=Oe===1?0:et+(Oe-2)*ct;if(this.ctx.clip_path.length!==0){var It=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(z,this.posX+this.margin[3],-gt+$e+this.ctx.prevPageLastElemOffset),k.call(this,D,!0),this.path=It}if(J=JSON.parse(JSON.stringify(ae)),this.path=w(J,this.posX+this.margin[3],-gt+$e+this.ctx.prevPageLastElemOffset),Q===!1||Oe===0){var Mt=(Oe>We||Oe<xe)&&x.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ct,null).clip().discardPath()),k.call(this,D,Q),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=ue,k.call(this,D,Q),this.lineWidth=le;this.path=ae},k=function(D,Q){if((D!=="stroke"||Q||!g.call(this))&&(D==="stroke"||Q||!m.call(this))){for(var z,J,te=[],se=this.path,ie=0;ie<se.length;ie++){var le=se[ie];switch(le.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:le,deltas:[],abs:[]});break;case"lt":var ue=te.length;if(se[ie-1]&&!isNaN(se[ie-1].x)&&(z=[le.x-se[ie-1].x,le.y-se[ie-1].y],ue>0)){for(;ue>=0;ue--)if(te[ue-1].close!==!0&&te[ue-1].begin!==!0){te[ue-1].deltas.push(z),te[ue-1].abs.push(le);break}}break;case"bct":z=[le.x1-se[ie-1].x,le.y1-se[ie-1].y,le.x2-se[ie-1].x,le.y2-se[ie-1].y,le.x-se[ie-1].x,le.y-se[ie-1].y],te[te.length-1].deltas.push(z);break;case"qct":var je=se[ie-1].x+2/3*(le.x1-se[ie-1].x),ae=se[ie-1].y+2/3*(le.y1-se[ie-1].y),Ne=le.x+2/3*(le.x1-le.x),ke=le.y+2/3*(le.y1-le.y),_e=le.x,he=le.y;z=[je-se[ie-1].x,ae-se[ie-1].y,Ne-se[ie-1].x,ke-se[ie-1].y,_e-se[ie-1].x,he-se[ie-1].y],te[te.length-1].deltas.push(z);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(le)}}J=Q?null:D==="stroke"?"stroke":"fill";for(var Be=!1,Le=0;Le<te.length;Le++)if(te[Le].arc)for(var We=te[Le].abs,xe=0;xe<We.length;xe++){var Oe=We[xe];Oe.type==="arc"?S.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,Q,!Be):P.call(this,Oe.x,Oe.y),Be=!0}else if(te[Le].close===!0)this.pdf.internal.out("h"),Be=!1;else if(te[Le].begin!==!0){var Re=te[Le].start.x,$e=te[Le].start.y;M.call(this,te[Le].deltas,Re,$e),Be=!0}J&&T.call(this,J),Q&&L.call(this)}},F=function(D){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-z;case"top":return D+Q-z;case"hanging":return D+Q-2*z;case"middle":return D+Q/2-z;case"ideographic":return D;case"alphabetic":default:return D}},E=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(Q,z){this.colorStops.push([Q,z])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(D,Q,z,J,te,se,ie,le,ue){for(var je=V.call(this,z,J,te,se),ae=0;ae<je.length;ae++){var Ne=je[ae];ae===0&&(ue?R.call(this,Ne.x1+D,Ne.y1+Q):P.call(this,Ne.x1+D,Ne.y1+Q)),Z.call(this,D,Q,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}le?L.call(this):T.call(this,ie)},T=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(D,Q){this.pdf.internal.out(r(D)+" "+n(Q)+" m")},j=function(D){var Q;switch(D.align){case"right":case"end":Q="right";break;case"center":Q="center";break;case"left":case"start":default:Q="left"}var z=this.pdf.getTextDimensions(D.text),J=F.call(this,D.y),te=E.call(this,J)-z.h,se=this.ctx.transform.applyToPoint(new i(D.x,J)),ie=this.ctx.transform.decompose(),le=new c;le=(le=(le=le.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var ue,je,ae,Ne=this.ctx.transform.applyToRectangle(new l(D.x,J,z.w,z.h)),ke=le.applyToRectangle(new l(D.x,te,z.w,z.h)),_e=v.call(this,ke),he=[],Be=0;Be<_e.length;Be+=1)he.indexOf(_e[Be])===-1&&he.push(_e[Be]);if(N(he),this.autoPaging)for(var Le=he[0],We=he[he.length-1],xe=Le;xe<We+1;xe++){this.pdf.setPage(xe);var Oe=xe===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],et=$e-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],gt=ct-this.margin[3],It=xe===1?0:Re+(xe-2)*et;if(this.ctx.clip_path.length!==0){var Mt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ue,this.posX+this.margin[3],-1*It+Oe),k.call(this,"fill",!0),this.path=Mt}var Pt=w([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*D.scale),ae=this.lineWidth,this.lineWidth=ae*D.scale);var Qt=this.autoPaging!=="text";if(Qt||Pt.y+Pt.h<=$e){if(Qt||Pt.y>=Oe&&Pt.x<=ct){var wt=Qt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||ct-Pt.x)[0],Tr=w([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0],tr=Qt&&(xe>Le||xe<We)&&x.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,et,null).clip().discardPath()),this.pdf.text(wt,Tr.x,Tr.y,{angle:D.angle,align:Q,renderingMode:D.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else Pt.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-Pt.y);D.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=ae)}else D.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*D.scale),ae=this.lineWidth,this.lineWidth=ae*D.scale),this.pdf.text(D.text,se.x+this.posX,se.y+this.posY,{angle:D.angle,align:Q,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=ae)},P=function(D,Q,z,J){z=z||0,J=J||0,this.pdf.internal.out(r(D+z)+" "+n(Q+J)+" l")},M=function(D,Q,z){return this.pdf.lines(D,Q,z,null,null)},Z=function(D,Q,z,J,te,se,ie,le){this.pdf.internal.out([t(a(z+D)),t(s(J+Q)),t(a(te+D)),t(s(se+Q)),t(a(ie+D)),t(s(le+Q)),"c"].join(" "))},V=function(D,Q,z,J){for(var te=2*Math.PI,se=Math.PI/2;Q>z;)Q-=te;var ie=Math.abs(z-Q);ie<te&&J&&(ie=te-ie);for(var le=[],ue=J?-1:1,je=Q;ie>1e-5;){var ae=je+ue*Math.min(ie,se);le.push(W.call(this,D,je,ae)),ie-=Math.abs(ae-je),je=ae}return le},W=function(D,Q,z){var J=(z-Q)/2,te=D*Math.cos(J),se=D*Math.sin(J),ie=te,le=-se,ue=ie*ie+le*le,je=ue+ie*te+le*se,ae=4/3*(Math.sqrt(2*ue*je)-je)/(ie*se-le*te),Ne=ie-ae*le,ke=le+ae*ie,_e=Ne,he=-ke,Be=J+Q,Le=Math.cos(Be),We=Math.sin(Be);return{x1:D*Math.cos(Q),y1:D*Math.sin(Q),x2:Ne*Le-ke*We,y2:Ne*We+ke*Le,x3:_e*Le-he*We,y3:_e*We+he*Le,x4:D*Math.cos(z),y4:D*Math.sin(z)}},G=function(D){return 180*D/Math.PI},K=function(D,Q,z,J,te,se){var ie=D+.5*(z-D),le=Q+.5*(J-Q),ue=te+.5*(z-te),je=se+.5*(J-se),ae=Math.min(D,te,ie,ue),Ne=Math.max(D,te,ie,ue),ke=Math.min(Q,se,le,je),_e=Math.max(Q,se,le,je);return new l(ae,ke,Ne-ae,_e-ke)},ee=function(D,Q,z,J,te,se,ie,le){var ue,je,ae,Ne,ke,_e,he,Be,Le,We,xe,Oe,Re,$e,et=z-D,ct=J-Q,gt=te-z,It=se-J,Mt=ie-te,Pt=le-se;for(je=0;je<41;je++)Le=(he=(ae=D+(ue=je/40)*et)+ue*((ke=z+ue*gt)-ae))+ue*(ke+ue*(te+ue*Mt-ke)-he),We=(Be=(Ne=Q+ue*ct)+ue*((_e=J+ue*It)-Ne))+ue*(_e+ue*(se+ue*Pt-_e)-Be),je==0?(xe=Le,Oe=We,Re=Le,$e=We):(xe=Math.min(xe,Le),Oe=Math.min(Oe,We),Re=Math.max(Re,Le),$e=Math.max($e,We));return new l(Math.round(xe),Math.round(Oe),Math.round(Re-xe),Math.round($e-Oe))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,Q,z=(D=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:Q}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(vr.API),function(e){var t=function(s){var i,l,c,u,d,f,h,m,g,x;for(l=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,l.push(f+33,h+33,m+33,g+33,x+33)):l.push(122);return function(v,y){for(var w=y;w>0;w--)v.pop()}(l,i.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var i,l,c,u,d,f=String,h="length",m=255,g="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(y,w){for(var N=w;N>0;N--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var i=new Uint8Array(s.length),l=s.length;l--;)i[l]=s.charCodeAt(l);return s=(i=yO(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var l=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),l=0;l<i.length;l+=1)switch(i[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(g){var x=g.length,v=[],y=String.fromCharCode;for(h=0;h<x;h+=1)v.push(y(255&g.charCodeAt(h)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,s,i)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):rc(()=>Promise.resolve().then(()=>wht),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):rc(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var l=ga(i);return l==="undefined"?"undefined":l==="string"||i instanceof String?"string":l==="number"||i instanceof Number?"number":l==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(i,l){var c=document.createElement(i);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},s=function i(l){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,l){return i.__proto__=l||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,l):this.outputPdf(i,l)},s.prototype.outputPdf=function(i,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,l)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var l=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(i,l){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return l?l(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:l(i.inner.width,i.k),height:l(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,l,c,u){return i!=null&&(this.progress.val=i),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,l,c,u){return this.setProgress(i?this.progress.val+i:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,l){var c=this;return this.thenCore(i,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,l,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,l);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,l){return Promise.prototype.then.call(this,i,l)},s.prototype.thenList=function(i){var l=this;return i.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(i){i&&(i=i.bind(this));var l=Promise.prototype.catch.call(this,i);return s.convert(l,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(i,l,c){if(ga(i)==="object"){var u=i;i=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(m=x,x=g,g=m);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(m=x,x=g,g=m)}return{width:x,height:g,unit:l,k:d,orientation:i}},e.html=function(i,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(SO):null;var c=new s(l);return l.worker?c:c.from(i).doCallback()}}(vr.API),vr.API.addJS=function(e){return bq=e,this.internal.events.subscribe("postPutResources",function(){pN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),vq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+bq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){pN!==void 0&&vq!==void 0&&this.internal.out("/Names <</JavaScript "+pN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=m,t.indexOf(f.charCodeAt(v+1))!==-1){h=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),x={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:h,numcomponents:f.charCodeAt(v+9)};break}m=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var Rx,gN,yq,wq,Eq,_We=function(){var e,t,r;function n(s){var i,l,c,u,d,f,h,m,g,x,v,y,w,N;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var B,k;for(k=[],B=0;B<4;++B)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(v=this.read(i)).indexOf(0),m=String.fromCharCode.apply(String,v.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,l;for(l=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,m,g){var x,v,y,w,N,B,k,F,E,S,T,L,R,j,P,M,Z,V,W,G,K,ee=Math.ceil((u.width-f)/m),X=Math.ceil((u.height-h)/g),D=u.width==ee&&u.height==X;for(j=i*ee,L=D?l:new Uint8Array(j*X),B=s.length,R=0,v=0;R<X&&c<B;){switch(s[c++]){case 0:for(w=Z=0;Z<j;w=Z+=1)L[v++]=s[c++];break;case 1:for(w=V=0;V<j;w=V+=1)x=s[c++],N=w<i?0:L[v-i],L[v++]=(x+N)%256;break;case 2:for(w=W=0;W<j;w=W+=1)x=s[c++],y=(w-w%i)/i,P=R&&L[(R-1)*j+y*i+w%i],L[v++]=(P+x)%256;break;case 3:for(w=G=0;G<j;w=G+=1)x=s[c++],y=(w-w%i)/i,N=w<i?0:L[v-i],P=R&&L[(R-1)*j+y*i+w%i],L[v++]=(x+Math.floor((N+P)/2))%256;break;case 4:for(w=K=0;K<j;w=K+=1)x=s[c++],y=(w-w%i)/i,N=w<i?0:L[v-i],R===0?P=M=0:(P=L[(R-1)*j+y*i+w%i],M=y&&L[(R-1)*j+(y-1)*i+w%i]),k=N+P-M,F=Math.abs(k-N),S=Math.abs(k-P),T=Math.abs(k-M),E=F<=S&&F<=T?N:S<=T?P:M,L[v++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!D){var Q=((h+R*g)*u.width+f)*i,z=R*j;for(w=0;w<ee;w+=1){for(var J=0;J<i;J+=1)l[Q++]=L[z++];Q+=(m-1)*i}}R++}}return s=aWe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var s,i,l,c,u,d,f,h,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,s=0,i=f=0,h=l.length;f<h;i=f+=3)u[c++]=l[i],u[c++]=l[i+1],u[c++]=l[i+2],u[c++]=(m=d[s++])!=null?m:255;return u},n.prototype.copyToImageData=function(s,i){var l,c,u,d,f,h,m,g,x,v,y;if(c=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=s.data||s).length,f=x||i,d=h=0,c===1)for(;d<g;)m=x?4*i[d/4]:h,v=f[m++],u[d++]=v,u[d++]=v,u[d++]=v,u[d++]=l?f[m++]:255,h=m;else for(;d<g;)m=x?4*i[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=l?f[m++]:255,h=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Qr)==="[object Window]"){try{t=Qr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,l,c,u,d,f,h,m;if(this.animation){for(m=[],l=d=0,f=(h=this.animation.frames).length;d<f;l=++d)i=h[l],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,m.push(i.image=e(c));return m}},n.prototype.renderFrame=function(s,i){var l,c,u;return l=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(s){var i,l,c,u,d,f,h=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var m,g;if(m=l++%u,g=c[m],h.renderFrame(s,m),u>1&&l/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(l=i.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),i.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function SWe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,m=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),m=x>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,B=e[t++],k=B>>6&1,F=1<<(7&B)+1,E=l,S=c,T=!1;B>>7&&(T=!0,E=t,S=F,t+=3*F);var L=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}d.push({x:v,y,width:w,height:N,has_local_palette:T,palette_offset:E,palette_size:S,data_offset:L,data_length:t-L,transparent_index:h,interlaced:!!k,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(j){if(j<0||j>=d.length)throw new Error("Frame index out of range.");return d[j]},this.decodeAndBlitFrameBGRA=function(j,P){var M=this.frameInfo(j),Z=M.width*M.height,V=new Uint8Array(Z);Cq(e,M.data_offset,V,Z);var W=M.palette_offset,G=M.transparent_index;G===null&&(G=256);var K=M.width,ee=r-K,X=K,D=4*(M.y*r+M.x),Q=4*((M.y+M.height)*r+M.x),z=D,J=4*ee;M.interlaced===!0&&(J+=4*r*7);for(var te=8,se=0,ie=V.length;se<ie;++se){var le=V[se];if(X===0&&(X=K,(z+=J)>=Q&&(J=4*ee+4*r*(te-1),z=D+(K+ee)*(te<<1),te>>=1)),le===G)z+=4;else{var ue=e[W+3*le],je=e[W+3*le+1],ae=e[W+3*le+2];P[z++]=ae,P[z++]=je,P[z++]=ue,P[z++]=255}--X}},this.decodeAndBlitFrameRGBA=function(j,P){var M=this.frameInfo(j),Z=M.width*M.height,V=new Uint8Array(Z);Cq(e,M.data_offset,V,Z);var W=M.palette_offset,G=M.transparent_index;G===null&&(G=256);var K=M.width,ee=r-K,X=K,D=4*(M.y*r+M.x),Q=4*((M.y+M.height)*r+M.x),z=D,J=4*ee;M.interlaced===!0&&(J+=4*r*7);for(var te=8,se=0,ie=V.length;se<ie;++se){var le=V[se];if(X===0&&(X=K,(z+=J)>=Q&&(J=4*ee+4*r*(te-1),z=D+(K+ee)*(te<<1),te>>=1)),le===G)z+=4;else{var ue=e[W+3*le],je=e[W+3*le+1],ae=e[W+3*le+2];P[z++]=ue,P[z++]=je,P[z++]=ae,P[z++]=255}--X}}}function Cq(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===i)break;for(var y=v<l?v:x,w=0,N=y;N>s;)N=g[N]>>8,++w;var B=N;if(h+w+(y!==v?1:0)>n)return void Na.log("Warning, gif stream longer than expected.");r[h++]=B;var k=h+=w;for(y!==v&&(r[h++]=B),N=y;w--;)N=g[N],r[--k]=255&N,N>>=8;x!==null&&l<4096&&(g[l++]=x<<8|B,l>=u+1&&c<12&&(++c,u=u<<1|1)),x=v}else l=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&Na.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bI(e){var t,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),g=new Array(64),x=[],v=0,y=7,w=new Array(64),N=new Array(64),B=new Array(64),k=new Array(256),F=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(D,Q){for(var z=0,J=0,te=new Array,se=1;se<=16;se++){for(var ie=1;ie<=D[se];ie++)te[Q[J]]=[],te[Q[J]][0]=z,te[Q[J]][1]=se,J++,z++;z*=2}return te}function W(D){for(var Q=D[0],z=D[1]-1;z>=0;)Q&1<<z&&(v|=1<<y),z--,--y<0&&(v==255?(G(255),G(0)):G(v),y=7,v=0)}function G(D){x.push(D)}function K(D){G(D>>8&255),G(255&D)}function ee(D,Q,z,J,te){for(var se,ie=te[0],le=te[240],ue=function(We,xe){var Oe,Re,$e,et,ct,gt,It,Mt,Pt,Qt,wt=0;for(Pt=0;Pt<8;++Pt){Oe=We[wt],Re=We[wt+1],$e=We[wt+2],et=We[wt+3],ct=We[wt+4],gt=We[wt+5],It=We[wt+6];var Tr=Oe+(Mt=We[wt+7]),tr=Oe-Mt,an=Re+It,Sr=Re-It,$r=$e+gt,Fn=$e-gt,Pr=et+ct,As=et-ct,mn=Tr+Pr,la=Tr-Pr,ja=an+$r,rn=an-$r;We[wt]=mn+ja,We[wt+4]=mn-ja;var gr=.707106781*(rn+la);We[wt+2]=la+gr,We[wt+6]=la-gr;var Ze=.382683433*((mn=As+Fn)-(rn=Sr+tr)),mt=.5411961*mn+Ze,Je=1.306562965*rn+Ze,xt=.707106781*(ja=Fn+Sr),Et=tr+xt,bt=tr-xt;We[wt+5]=bt+mt,We[wt+3]=bt-mt,We[wt+1]=Et+Je,We[wt+7]=Et-Je,wt+=8}for(wt=0,Pt=0;Pt<8;++Pt){Oe=We[wt],Re=We[wt+8],$e=We[wt+16],et=We[wt+24],ct=We[wt+32],gt=We[wt+40],It=We[wt+48];var nr=Oe+(Mt=We[wt+56]),xr=Oe-Mt,Wr=Re+It,Zr=Re-It,qr=$e+gt,me=$e-gt,Ie=et+ct,Ce=et-ct,we=nr+Ie,Se=nr-Ie,Fe=Wr+qr,Ye=Wr-qr;We[wt]=we+Fe,We[wt+32]=we-Fe;var dt=.707106781*(Ye+Se);We[wt+16]=Se+dt,We[wt+48]=Se-dt;var Ge=.382683433*((we=Ce+me)-(Ye=Zr+xr)),rt=.5411961*we+Ge,it=1.306562965*Ye+Ge,Ft=.707106781*(Fe=me+Zr),$t=xr+Ft,Jt=xr-Ft;We[wt+40]=Jt+rt,We[wt+24]=Jt-rt,We[wt+8]=$t+it,We[wt+56]=$t-it,wt++}for(Pt=0;Pt<64;++Pt)Qt=We[Pt]*xe[Pt],m[Pt]=Qt>0?Qt+.5|0:Qt-.5|0;return m}(D,Q),je=0;je<64;++je)g[E[je]]=ue[je];var ae=g[0]-z;z=g[0],ae==0?W(J[0]):(W(J[h[se=32767+ae]]),W(f[se]));for(var Ne=63;Ne>0&&g[Ne]==0;)Ne--;if(Ne==0)return W(ie),z;for(var ke,_e=1;_e<=Ne;){for(var he=_e;g[_e]==0&&_e<=Ne;)++_e;var Be=_e-he;if(Be>=16){ke=Be>>4;for(var Le=1;Le<=ke;++Le)W(le);Be&=15}se=32767+g[_e],W(te[(Be<<4)+h[se]]),W(f[se]),_e++}return Ne!=63&&W(ie),z}function X(D){D=Math.min(Math.max(D,1),100),s!=D&&(function(Q){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var te=i((z[J]*Q+50)/100);te=Math.min(Math.max(te,1),255),l[E[J]]=te}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var le=i((se[ie]*Q+50)/100);le=Math.min(Math.max(le,1),255),c[E[ie]]=le}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,ae=0;ae<8;ae++)for(var Ne=0;Ne<8;Ne++)u[je]=1/(l[E[je]]*ue[ae]*ue[Ne]*8),d[je]=1/(c[E[je]]*ue[ae]*ue[Ne]*8),je++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),s=D)}this.encode=function(D,Q){Q&&X(Q),x=new Array,v=0,y=7,K(65496),K(65504),K(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),K(1),K(1),G(0),G(0),function(){K(65499),K(132),G(0);for(var Re=0;Re<64;Re++)G(l[Re]);G(1);for(var $e=0;$e<64;$e++)G(c[$e])}(),function(Re,$e){K(65472),K(17),G(8),K($e),K(Re),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(D.width,D.height),function(){K(65476),K(418),G(0);for(var Re=0;Re<16;Re++)G(S[Re+1]);for(var $e=0;$e<=11;$e++)G(T[$e]);G(16);for(var et=0;et<16;et++)G(L[et+1]);for(var ct=0;ct<=161;ct++)G(R[ct]);G(1);for(var gt=0;gt<16;gt++)G(j[gt+1]);for(var It=0;It<=11;It++)G(P[It]);G(17);for(var Mt=0;Mt<16;Mt++)G(M[Mt+1]);for(var Pt=0;Pt<=161;Pt++)G(Z[Pt])}(),K(65498),K(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var z=0,J=0,te=0;v=0,y=7,this.encode.displayName="_encode_";for(var se,ie,le,ue,je,ae,Ne,ke,_e,he=D.data,Be=D.width,Le=D.height,We=4*Be,xe=0;xe<Le;){for(se=0;se<We;){for(je=We*xe+se,Ne=-1,ke=0,_e=0;_e<64;_e++)ae=je+(ke=_e>>3)*We+(Ne=4*(7&_e)),xe+ke>=Le&&(ae-=We*(xe+1+ke-Le)),se+Ne>=We&&(ae-=se+Ne-We+4),ie=he[ae++],le=he[ae++],ue=he[ae++],w[_e]=(F[ie]+F[le+256>>0]+F[ue+512>>0]>>16)-128,N[_e]=(F[ie+768>>0]+F[le+1024>>0]+F[ue+1280>>0]>>16)-128,B[_e]=(F[ie+1280>>0]+F[le+1536>>0]+F[ue+1792>>0]>>16)-128;z=ee(w,u,z,t,n),J=ee(N,d,J,r,a),te=ee(B,d,te,r,a),se+=32}xe+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,W(Oe)}return K(65497),new Uint8Array(x)},e=e||50,function(){for(var D=String.fromCharCode,Q=0;Q<256;Q++)k[Q]=D(Q)}(),t=V(S,T),r=V(j,P),n=V(L,R),a=V(M,Z),function(){for(var D=1,Q=2,z=1;z<=15;z++){for(var J=D;J<Q;J++)h[32767+J]=z,f[32767+J]=[],f[32767+J][1]=z,f[32767+J][0]=J;for(var te=-(Q-1);te<=-D;te++)h[32767+te]=z,f[32767+te]=[],f[32767+te][1]=z,f[32767+te][0]=Q-1+te;D<<=1,Q<<=1}}(),function(){for(var D=0;D<256;D++)F[D]=19595*D,F[D+256>>0]=38470*D,F[D+512>>0]=7471*D+32768,F[D+768>>0]=-11059*D,F[D+1024>>0]=-21709*D,F[D+1280>>0]=32768*D+8421375,F[D+1536>>0]=-27439*D,F[D+1792>>0]=-5329*D}(),X(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Nq(e){function t(S){if(!S)throw Error("assert :P")}function r(S,T,L){for(var R=0;4>R;R++)if(S[T+R]!=L.charCodeAt(R))return!0;return!1}function n(S,T,L,R,j){for(var P=0;P<j;P++)S[T+P]=L[R+P]}function a(S,T,L,R){for(var j=0;j<R;j++)S[T+j]=L}function s(S){return new Int32Array(S)}function i(S,T){for(var L=[],R=0;R<S;R++)L.push(new T);return L}function l(S,T){var L=[];return function R(j,P,M){for(var Z=M[P],V=0;V<Z&&(j.push(M.length>P+1?[]:new T),!(M.length<P+1));V++)R(j[V],P+1,M)}(L,0,S),L}var c=function(){var S=this;function T(I,H){for(var re=1<<H-1>>>0;I&re;)re>>>=1;return re?(I&re-1)+re:I}function L(I,H,re,oe,Ae){t(!(oe%re));do I[H+(oe-=re)]=Ae;while(0<oe)}function R(I,H,re,oe,Ae){if(t(2328>=Ae),512>=Ae)var pe=s(512);else if((pe=s(Ae))==null)return 0;return function(ge,ve,Ee,Te,Ue,st){var tt,qe,Bt=ve,pt=1<<Ee,Qe=s(16),Ve=s(16);for(t(Ue!=0),t(Te!=null),t(ge!=null),t(0<Ee),qe=0;qe<Ue;++qe){if(15<Te[qe])return 0;++Qe[Te[qe]]}if(Qe[0]==Ue)return 0;for(Ve[1]=0,tt=1;15>tt;++tt){if(Qe[tt]>1<<tt)return 0;Ve[tt+1]=Ve[tt]+Qe[tt]}for(qe=0;qe<Ue;++qe)tt=Te[qe],0<Te[qe]&&(st[Ve[tt]++]=qe);if(Ve[15]==1)return(Te=new j).g=0,Te.value=st[0],L(ge,Bt,1,pt,Te),pt;var _t,Tt=-1,kt=pt-1,rr=0,Xt=1,br=1,er=1<<Ee;for(qe=0,tt=1,Ue=2;tt<=Ee;++tt,Ue<<=1){if(Xt+=br<<=1,0>(br-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt])(Te=new j).g=tt,Te.value=st[qe++],L(ge,Bt+rr,Ue,er,Te),rr=T(rr,tt)}for(tt=Ee+1,Ue=2;15>=tt;++tt,Ue<<=1){if(Xt+=br<<=1,0>(br-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt]){if(Te=new j,(rr&kt)!=Tt){for(Bt+=er,_t=1<<(Tt=tt)-Ee;15>Tt&&!(0>=(_t-=Qe[Tt]));)++Tt,_t<<=1;pt+=er=1<<(_t=Tt-Ee),ge[ve+(Tt=rr&kt)].g=_t+Ee,ge[ve+Tt].value=Bt-ve-Tt}Te.g=tt-Ee,Te.value=st[qe++],L(ge,Bt+(rr>>Ee),Ue,er,Te),rr=T(rr,tt)}}return Xt!=2*Ve[15]-1?0:pt}(I,H,re,oe,Ae,pe)}function j(){this.value=this.g=0}function P(){this.value=this.g=0}function M(){this.G=i(5,j),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Rs,P)}function Z(I,H,re,oe){t(I!=null),t(H!=null),t(2147483648>oe),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=H,I.pa=re,I.Jd=H,I.Yc=re+oe,I.Zc=4<=oe?re+oe-4+1:re,se(I)}function V(I,H){for(var re=0;0<H--;)re|=le(I,128)<<H;return re}function W(I,H){var re=V(I,H);return ie(I)?-re:re}function G(I,H,re,oe){var Ae,pe=0;for(t(I!=null),t(H!=null),t(4294967288>oe),I.Sb=oe,I.Ra=0,I.u=0,I.h=0,4<oe&&(oe=4),Ae=0;Ae<oe;++Ae)pe+=H[re+Ae]<<8*Ae;I.Ra=pe,I.bb=oe,I.oa=H,I.pa=re}function K(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<wf-8>>>0,++I.bb,I.u-=8;z(I)&&(I.h=1,I.u=0)}function ee(I,H){if(t(0<=H),!I.h&&H<=yf){var re=Q(I)&oA[H];return I.u+=H,K(I),re}return I.h=1,I.u=0}function X(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(I){return I.Ra>>>(I.u&wf-1)>>>0}function z(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>wf}function J(I,H){I.u=H,I.h=z(I)}function te(I){I.u>=Yh&&(t(I.u>=Yh),K(I))}function se(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ie(I){return V(I,1)}function le(I,H){var re=I.Ca;0>I.b&&se(I);var oe=I.b,Ae=re*H>>>8,pe=(I.I>>>oe>Ae)+0;for(pe?(re-=Ae,I.I-=Ae+1<<oe>>>0):re=Ae+1,oe=re,Ae=0;256<=oe;)Ae+=8,oe>>=8;return oe=7^Ae+To[oe],I.b-=oe,I.Ca=(re<<oe)-1,pe}function ue(I,H,re){I[H+0]=re>>24&255,I[H+1]=re>>16&255,I[H+2]=re>>8&255,I[H+3]=re>>0&255}function je(I,H){return I[H+0]<<0|I[H+1]<<8}function ae(I,H){return je(I,H)|I[H+2]<<16}function Ne(I,H){return je(I,H)|je(I,H+2)<<16}function ke(I,H){var re=1<<H;return t(I!=null),t(0<H),I.X=s(re),I.X==null?0:(I.Mb=32-H,I.Xa=H,1)}function _e(I,H){t(I!=null),t(H!=null),t(I.Xa==H.Xa),n(H.X,0,I.X,0,1<<H.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function Be(I,H,re,oe){t(re!=null),t(oe!=null);var Ae=re[0],pe=oe[0];return Ae==0&&(Ae=(I*pe+H/2)/H),pe==0&&(pe=(H*Ae+I/2)/I),0>=Ae||0>=pe?0:(re[0]=Ae,oe[0]=pe,1)}function Le(I,H){return I+(1<<H)-1>>>H}function We(I,H){return((4278255360&I)+(4278255360&H)>>>0&4278255360)+((16711935&I)+(16711935&H)>>>0&16711935)>>>0}function xe(I,H){S[H]=function(re,oe,Ae,pe,ge,ve,Ee){var Te;for(Te=0;Te<ge;++Te){var Ue=S[I](ve[Ee+Te-1],Ae,pe+Te);ve[Ee+Te]=We(re[oe+Te],Ue)}}}function Oe(){this.ud=this.hd=this.jd=0}function Re(I,H){return((4278124286&(I^H))>>>1)+(I&H)>>>0}function $e(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function et(I,H){return $e(I+(I-H+.5>>1))}function ct(I,H,re){return Math.abs(H-re)-Math.abs(I-re)}function gt(I,H,re,oe,Ae,pe,ge){for(oe=pe[ge-1],re=0;re<Ae;++re)pe[ge+re]=oe=We(I[H+re],oe)}function It(I,H,re,oe,Ae){var pe;for(pe=0;pe<re;++pe){var ge=I[H+pe],ve=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((ve<<16)+ve));oe[Ae+pe]=(4278255360&ge)+Ee>>>0}}function Mt(I,H){H.jd=I>>0&255,H.hd=I>>8&255,H.ud=I>>16&255}function Pt(I,H,re,oe,Ae,pe){var ge;for(ge=0;ge<oe;++ge){var ve=H[re+ge],Ee=ve>>>8,Te=ve,Ue=255&(Ue=(Ue=ve>>>16)+((I.jd<<24>>24)*(Ee<<24>>24)>>>5));Te=255&(Te=(Te=Te+((I.hd<<24>>24)*(Ee<<24>>24)>>>5))+((I.ud<<24>>24)*(Ue<<24>>24)>>>5)),Ae[pe+ge]=(4278255360&ve)+(Ue<<16)+Te}}function Qt(I,H,re,oe,Ae){S[H]=function(pe,ge,ve,Ee,Te,Ue,st,tt,qe){for(Ee=st;Ee<tt;++Ee)for(st=0;st<qe;++st)Te[Ue++]=Ae(ve[oe(pe[ge++])])},S[I]=function(pe,ge,ve,Ee,Te,Ue,st){var tt=8>>pe.b,qe=pe.Ea,Bt=pe.K[0],pt=pe.w;if(8>tt)for(pe=(1<<pe.b)-1,pt=(1<<tt)-1;ge<ve;++ge){var Qe,Ve=0;for(Qe=0;Qe<qe;++Qe)Qe&pe||(Ve=oe(Ee[Te++])),Ue[st++]=Ae(Bt[Ve&pt]),Ve>>=tt}else S["VP8LMapColor"+re](Ee,Te,Bt,pt,Ue,st,ge,ve,qe)}}function wt(I,H,re,oe,Ae){for(re=H+re;H<re;){var pe=I[H++];oe[Ae++]=pe>>16&255,oe[Ae++]=pe>>8&255,oe[Ae++]=pe>>0&255}}function Tr(I,H,re,oe,Ae){for(re=H+re;H<re;){var pe=I[H++];oe[Ae++]=pe>>16&255,oe[Ae++]=pe>>8&255,oe[Ae++]=pe>>0&255,oe[Ae++]=pe>>24&255}}function tr(I,H,re,oe,Ae){for(re=H+re;H<re;){var pe=(ge=I[H++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;oe[Ae++]=pe,oe[Ae++]=ge}}function an(I,H,re,oe,Ae){for(re=H+re;H<re;){var pe=(ge=I[H++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;oe[Ae++]=pe,oe[Ae++]=ge}}function Sr(I,H,re,oe,Ae){for(re=H+re;H<re;){var pe=I[H++];oe[Ae++]=pe>>0&255,oe[Ae++]=pe>>8&255,oe[Ae++]=pe>>16&255}}function $r(I,H,re,oe,Ae,pe){if(pe==0)for(re=H+re;H<re;)ue(oe,((pe=I[H++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),Ae+=32;else n(oe,Ae,I,H,re)}function Fn(I,H){S[H][0]=S[I+"0"],S[H][1]=S[I+"1"],S[H][2]=S[I+"2"],S[H][3]=S[I+"3"],S[H][4]=S[I+"4"],S[H][5]=S[I+"5"],S[H][6]=S[I+"6"],S[H][7]=S[I+"7"],S[H][8]=S[I+"8"],S[H][9]=S[I+"9"],S[H][10]=S[I+"10"],S[H][11]=S[I+"11"],S[H][12]=S[I+"12"],S[H][13]=S[I+"13"],S[H][14]=S[I+"0"],S[H][15]=S[I+"0"]}function Pr(I){return I==tp||I==gA||I==ud||I==t0}function As(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function la(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new As,this.f.kb=new mn,this.sd=null}function ja(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Ze(I,H){var re=I.T,oe=H.ba.f.RGBA,Ae=oe.eb,pe=oe.fb+I.ka*oe.A,ge=ii[H.ba.S],ve=I.y,Ee=I.O,Te=I.f,Ue=I.N,st=I.ea,tt=I.W,qe=H.cc,Bt=H.dc,pt=H.Mc,Qe=H.Nc,Ve=I.ka,_t=I.ka+I.T,Tt=I.U,kt=Tt+1>>1;for(Ve==0?ge(ve,Ee,null,null,Te,Ue,st,tt,Te,Ue,st,tt,Ae,pe,null,null,Tt):(ge(H.ec,H.fc,ve,Ee,qe,Bt,pt,Qe,Te,Ue,st,tt,Ae,pe-oe.A,Ae,pe,Tt),++re);Ve+2<_t;Ve+=2)qe=Te,Bt=Ue,pt=st,Qe=tt,Ue+=I.Rc,tt+=I.Rc,pe+=2*oe.A,ge(ve,(Ee+=2*I.fa)-I.fa,ve,Ee,qe,Bt,pt,Qe,Te,Ue,st,tt,Ae,pe-oe.A,Ae,pe,Tt);return Ee+=I.fa,I.j+_t<I.o?(n(H.ec,H.fc,ve,Ee,Tt),n(H.cc,H.dc,Te,Ue,kt),n(H.Mc,H.Nc,st,tt,kt),re--):1&_t||ge(ve,Ee,null,null,Te,Ue,st,tt,Te,Ue,st,tt,Ae,pe+oe.A,null,null,Tt),re}function mt(I,H,re){var oe=I.F,Ae=[I.J];if(oe!=null){var pe=I.U,ge=H.ba.S,ve=ge==Sf||ge==ud;H=H.ba.f.RGBA;var Ee=[0],Te=I.ka;Ee[0]=I.T,I.Kb&&(Te==0?--Ee[0]:(--Te,Ae[0]-=I.width),I.j+I.ka+I.T==I.o&&(Ee[0]=I.o-I.j-Te));var Ue=H.eb;Te=H.fb+Te*H.A,I=gn(oe,Ae[0],I.width,pe,Ee,Ue,Te+(ve?0:3),H.A),t(re==Ee),I&&Pr(ge)&&ul(Ue,Te,ve,pe,Ee,H.A)}return 0}function Je(I){var H=I.ma,re=H.ba.S,oe=11>re,Ae=re==e0||re==ep||re==Sf||re==cd||re==12||Pr(re);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!iA(H.Oa,I,Ae?11:12))return 0;if(Ae&&Pr(re)&&Lt(),I.da)alert("todo:use_scaling");else{if(oe){if(H.Ib=gr,I.Kb){if(re=I.U+1>>1,H.memory=s(I.U+2*re),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+I.U,H.Mc=H.cc,H.Nc=H.dc+re,H.Ib=Ze,Lt()}}else alert("todo:EmitYUV");Ae&&(H.Jb=mt,oe&&Ke())}if(oe&&!TE){for(I=0;256>I;++I)wj[I]=89858*(I-128)+Ms>>xu,ap[I]=-22014*(I-128)+Ms,xb[I]=-45773*(I-128),Us[I]=113618*(I-128)+Ms>>xu;for(I=bA;I<ix;++I)H=76283*(I-16)+Ms>>xu,sp[I-bA]=zn(H,255),vb[I-bA]=zn(H+8>>4,15);TE=1}return 1}function xt(I){var H=I.ma,re=I.U,oe=I.T;return t(!(1&I.ka)),0>=re||0>=oe?0:(re=H.Ib(I,H),H.Jb!=null&&H.Jb(I,H,re),H.Dc+=re,1)}function Et(I){I.ma.memory=null}function bt(I,H,re,oe){return ee(I,8)!=47?0:(H[0]=ee(I,14)+1,re[0]=ee(I,14)+1,oe[0]=ee(I,1),ee(I,3)!=0?0:!I.h)}function nr(I,H){if(4>I)return I+1;var re=I-2>>1;return(2+(1&I)<<re)+ee(H,re)+1}function xr(I,H){return 120<H?H-120:1<=(re=((re=Ad[H-1])>>4)*I+(8-(15&re)))?re:1;var re}function Wr(I,H,re){var oe=Q(re),Ae=I[H+=255&oe].g-8;return 0<Ae&&(J(re,re.u+8),oe=Q(re),H+=I[H].value,H+=oe&(1<<Ae)-1),J(re,re.u+I[H].g),I[H].value}function Zr(I,H,re){return re.g+=I.g,re.value+=I.value<<H>>>0,t(8>=re.g),I.g}function qr(I,H,re){var oe=I.xc;return t((H=oe==0?0:I.vc[I.md*(re>>oe)+(H>>oe)])<I.Wb),I.Ya[H]}function me(I,H,re,oe){var Ae=I.ab,pe=I.c*H,ge=I.C;H=ge+H;var ve=re,Ee=oe;for(oe=I.Ta,re=I.Ua;0<Ae--;){var Te=I.gc[Ae],Ue=ge,st=H,tt=ve,qe=Ee,Bt=(Ee=oe,ve=re,Te.Ea);switch(t(Ue<st),t(st<=Te.nc),Te.hc){case 2:Zg(tt,qe,(st-Ue)*Bt,Ee,ve);break;case 0:var pt=Ue,Qe=st,Ve=Ee,_t=ve,Tt=(er=Te).Ea;pt==0&&(pb(tt,qe,null,null,1,Ve,_t),gt(tt,qe+1,0,0,Tt-1,Ve,_t+1),qe+=Tt,_t+=Tt,++pt);for(var kt=1<<er.b,rr=kt-1,Xt=Le(Tt,er.b),br=er.K,er=er.w+(pt>>er.b)*Xt;pt<Qe;){var Pn=br,$n=er,fn=1;for(Jm(tt,qe,Ve,_t-Tt,1,Ve,_t);fn<Tt;){var ln=(fn&~rr)+kt;ln>Tt&&(ln=Tt),(0,id[Pn[$n++]>>8&15])(tt,qe+ +fn,Ve,_t+fn-Tt,ln-fn,Ve,_t+fn),fn=ln}qe+=Tt,_t+=Tt,++pt&rr||(er+=Xt)}st!=Te.nc&&n(Ee,ve-Bt,Ee,ve+(st-Ue-1)*Bt,Bt);break;case 1:for(Bt=tt,Qe=qe,Tt=(tt=Te.Ea)-(_t=tt&~(Ve=(qe=1<<Te.b)-1)),pt=Le(tt,Te.b),kt=Te.K,Te=Te.w+(Ue>>Te.b)*pt;Ue<st;){for(rr=kt,Xt=Te,br=new Oe,er=Qe+_t,Pn=Qe+tt;Qe<er;)Mt(rr[Xt++],br),cA(br,Bt,Qe,qe,Ee,ve),Qe+=qe,ve+=qe;Qe<Pn&&(Mt(rr[Xt++],br),cA(br,Bt,Qe,Tt,Ee,ve),Qe+=Tt,ve+=Tt),++Ue&Ve||(Te+=pt)}break;case 3:if(tt==Ee&&qe==ve&&0<Te.b){for(Qe=Ee,tt=Bt=ve+(st-Ue)*Bt-(_t=(st-Ue)*Le(Te.Ea,Te.b)),qe=Ee,Ve=ve,pt=[],_t=(Tt=_t)-1;0<=_t;--_t)pt[_t]=qe[Ve+_t];for(_t=Tt-1;0<=_t;--_t)Qe[tt+_t]=pt[_t];Ll(Te,Ue,st,Ee,Bt,Ee,ve)}else Ll(Te,Ue,st,tt,qe,Ee,ve)}ve=oe,Ee=re}Ee!=re&&n(oe,re,ve,Ee,pe)}function Ie(I,H){var re=I.V,oe=I.Ba+I.c*I.C,Ae=H-I.C;if(t(H<=I.l.o),t(16>=Ae),0<Ae){var pe=I.l,ge=I.Ta,ve=I.Ua,Ee=pe.width;if(me(I,Ae,re,oe),Ae=ve=[ve],t((re=I.C)<(oe=H)),t(pe.v<pe.va),oe>pe.o&&(oe=pe.o),re<pe.j){var Te=pe.j-re;re=pe.j,Ae[0]+=Te*Ee}if(re>=oe?re=0:(Ae[0]+=4*pe.v,pe.ka=re-pe.j,pe.U=pe.va-pe.v,pe.T=oe-re,re=1),re){if(ve=ve[0],11>(re=I.ca).S){var Ue=re.f.RGBA,st=(oe=re.S,Ae=pe.U,pe=pe.T,Te=Ue.eb,Ue.A),tt=pe;for(Ue=Ue.fb+I.Ma*Ue.A;0<tt--;){var qe=ge,Bt=ve,pt=Ae,Qe=Te,Ve=Ue;switch(oe){case Hi:oo(qe,Bt,pt,Qe,Ve);break;case e0:Ni(qe,Bt,pt,Qe,Ve);break;case tp:Ni(qe,Bt,pt,Qe,Ve),ul(Qe,Ve,0,pt,1,0);break;case hu:vc(qe,Bt,pt,Qe,Ve);break;case ep:$r(qe,Bt,pt,Qe,Ve,1);break;case gA:$r(qe,Bt,pt,Qe,Ve,1),ul(Qe,Ve,0,pt,1,0);break;case Sf:$r(qe,Bt,pt,Qe,Ve,0);break;case ud:$r(qe,Bt,pt,Qe,Ve,0),ul(Qe,Ve,1,pt,1,0);break;case cd:uA(qe,Bt,pt,Qe,Ve);break;case t0:uA(qe,Bt,pt,Qe,Ve),pn(Qe,Ve,pt,1,0);break;case tx:Io(qe,Bt,pt,Qe,Ve);break;default:t(0)}ve+=Ee,Ue+=st}I.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=re.height)}}I.C=H,t(I.C<=I.i)}function Ce(I){var H;if(0<I.ua)return 0;for(H=0;H<I.Wb;++H){var re=I.Ya[H].G,oe=I.Ya[H].H;if(0<re[1][oe[1]+0].g||0<re[2][oe[2]+0].g||0<re[3][oe[3]+0].g)return 0}return 1}function we(I,H,re,oe,Ae,pe){if(I.Z!=0){var ge=I.qd,ve=I.rd;for(t(pu[I.Z]!=null);H<re;++H)pu[I.Z](ge,ve,oe,Ae,oe,Ae,pe),ge=oe,ve=Ae,Ae+=pe;I.qd=ge,I.rd=ve}}function Se(I,H){var re=I.l.ma,oe=re.Z==0||re.Z==1?I.l.j:I.C;if(oe=I.C<oe?oe:I.C,t(H<=I.l.o),H>oe){var Ae=I.l.width,pe=re.ca,ge=re.tb+Ae*oe,ve=I.V,Ee=I.Ba+I.c*oe,Te=I.gc;t(I.ab==1),t(Te[0].hc==3),lA(Te[0],oe,H,ve,Ee,pe,ge),we(re,oe,H,pe,ge,Ae)}I.C=I.Ma=H}function Fe(I,H,re,oe,Ae,pe,ge){var ve=I.$/oe,Ee=I.$%oe,Te=I.m,Ue=I.s,st=re+I.$,tt=st;Ae=re+oe*Ae;var qe=re+oe*pe,Bt=280+Ue.ua,pt=I.Pb?ve:16777216,Qe=0<Ue.ua?Ue.Wa:null,Ve=Ue.wc,_t=st<qe?qr(Ue,Ee,ve):null;t(I.C<pe),t(qe<=Ae);var Tt=!1;e:for(;;){for(;Tt||st<qe;){var kt=0;if(ve>=pt){var rr=st-re;t((pt=I).Pb),pt.wd=pt.m,pt.xd=rr,0<pt.s.ua&&_e(pt.s.Wa,pt.s.vb),pt=ve+kE}if(Ee&Ve||(_t=qr(Ue,Ee,ve)),t(_t!=null),_t.Qb&&(H[st]=_t.qb,Tt=!0),!Tt)if(te(Te),_t.jc){kt=Te,rr=H;var Xt=st,br=_t.pd[Q(kt)&Rs-1];t(_t.jc),256>br.g?(J(kt,kt.u+br.g),rr[Xt]=br.value,kt=0):(J(kt,kt.u+br.g-256),t(256<=br.value),kt=br.value),kt==0&&(Tt=!0)}else kt=Wr(_t.G[0],_t.H[0],Te);if(Te.h)break;if(Tt||256>kt){if(!Tt)if(_t.nd)H[st]=(_t.qb|kt<<8)>>>0;else{if(te(Te),Tt=Wr(_t.G[1],_t.H[1],Te),te(Te),rr=Wr(_t.G[2],_t.H[2],Te),Xt=Wr(_t.G[3],_t.H[3],Te),Te.h)break;H[st]=(Xt<<24|Tt<<16|kt<<8|rr)>>>0}if(Tt=!1,++st,++Ee>=oe&&(Ee=0,++ve,ge!=null&&ve<=pe&&!(ve%16)&&ge(I,ve),Qe!=null))for(;tt<st;)kt=H[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else if(280>kt){if(kt=nr(kt-256,Te),rr=Wr(_t.G[4],_t.H[4],Te),te(Te),rr=xr(oe,rr=nr(rr,Te)),Te.h)break;if(st-re<rr||Ae-st<kt)break e;for(Xt=0;Xt<kt;++Xt)H[st+Xt]=H[st+Xt-rr];for(st+=kt,Ee+=kt;Ee>=oe;)Ee-=oe,++ve,ge!=null&&ve<=pe&&!(ve%16)&&ge(I,ve);if(t(st<=Ae),Ee&Ve&&(_t=qr(Ue,Ee,ve)),Qe!=null)for(;tt<st;)kt=H[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else{if(!(kt<Bt))break e;for(Tt=kt-280,t(Qe!=null);tt<st;)kt=H[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt;kt=st,t(!(Tt>>>(rr=Qe).Xa)),H[kt]=rr.X[Tt],Tt=!0}Tt||t(Te.h==z(Te))}if(I.Pb&&Te.h&&st<Ae)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&_e(I.s.vb,I.s.Wa);else{if(Te.h)break e;ge!=null&&ge(I,ve>pe?pe:ve),I.a=0,I.$=st-re}return 1}return I.a=3,0}function Ye(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var H=I.Wa;H!=null&&(H.X=null),I.vb=null,t(I!=null)}function dt(){var I=new Wh;return I==null?null:(I.a=0,I.xb=r0,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),Zg=It,cA=Pt,oo=wt,Ni=Tr,uA=tr,Io=an,vc=Sr,S.VP8LMapColor32b=ai,S.VP8LMapColor8b=Zm,I)}function Ge(I,H,re,oe,Ae){var pe=1,ge=[I],ve=[H],Ee=oe.m,Te=oe.s,Ue=null,st=0;e:for(;;){if(re)for(;pe&&ee(Ee,1);){var tt=ge,qe=ve,Bt=oe,pt=1,Qe=Bt.m,Ve=Bt.gc[Bt.ab],_t=ee(Qe,2);if(Bt.Oc&1<<_t)pe=0;else{switch(Bt.Oc|=1<<_t,Ve.hc=_t,Ve.Ea=tt[0],Ve.nc=qe[0],Ve.K=[null],++Bt.ab,t(4>=Bt.ab),_t){case 0:case 1:Ve.b=ee(Qe,3)+2,pt=Ge(Le(Ve.Ea,Ve.b),Le(Ve.nc,Ve.b),0,Bt,Ve.K),Ve.K=Ve.K[0];break;case 3:var Tt,kt=ee(Qe,8)+1,rr=16<kt?0:4<kt?1:2<kt?2:3;if(tt[0]=Le(Ve.Ea,rr),Ve.b=rr,Tt=pt=Ge(kt,1,0,Bt,Ve.K)){var Xt,br=kt,er=Ve,Pn=1<<(8>>er.b),$n=s(Pn);if($n==null)Tt=0;else{var fn=er.K[0],ln=er.w;for($n[0]=er.K[0][0],Xt=1;Xt<1*br;++Xt)$n[Xt]=We(fn[ln+Xt],$n[Xt-1]);for(;Xt<4*Pn;++Xt)$n[Xt]=0;er.K[0]=null,er.K[0]=$n,Tt=1}}pt=Tt;break;case 2:break;default:t(0)}pe=pt}}if(ge=ge[0],ve=ve[0],pe&&ee(Ee,1)&&!(pe=1<=(st=ee(Ee,4))&&11>=st)){oe.a=3;break e}var ra;if(ra=pe)t:{var Gn,Yr,ua,jr=oe,Ur=ge,Dn=ve,Rn=st,oi=re,Qs=jr.m,rs=jr.s,ns=[null],xs=1,Hl=0,Kn=jf[Rn];r:for(;;){if(oi&&ee(Qs,1)){var vs=ee(Qs,3)+2,wc=Le(Ur,vs),yA=Le(Dn,vs),If=wc*yA;if(!Ge(wc,yA,0,jr,ns))break r;for(ns=ns[0],rs.xc=vs,Gn=0;Gn<If;++Gn){var wA=ns[Gn]>>8&65535;ns[Gn]=wA,wA>=xs&&(xs=wA+1)}}if(Qs.h)break r;for(Yr=0;5>Yr;++Yr){var Ba=dl[Yr];!Yr&&0<Rn&&(Ba+=1<<Rn),Hl<Ba&&(Hl=Ba)}var ip=i(xs*Kn,j),ox=xs,co=i(ox,M);if(co==null)var La=null;else t(65536>=ox),La=co;var Ff=s(Hl);if(La==null||Ff==null||ip==null){jr.a=1;break r}var EA=ip;for(Gn=ua=0;Gn<xs;++Gn){var Oo=La[Gn],CA=Oo.G,Do=Oo.H,op=0,a0=1,lx=0;for(Yr=0;5>Yr;++Yr){Ba=dl[Yr],CA[Yr]=EA,Do[Yr]=ua,!Yr&&0<Rn&&(Ba+=1<<Rn);a:{var lp,cx=Ba,cp=jr,s0=Ff,OE=EA,DE=ua,up=0,pd=cp.m,Cj=ee(pd,1);if(a(s0,0,0,cx),Cj){var PE=ee(pd,1)+1,RE=ee(pd,1),bb=ee(pd,RE==0?1:8);s0[bb]=1,PE==2&&(s0[bb=ee(pd,8)]=1);var i0=1}else{var yb=s(19),wb=ee(pd,4)+4;if(19<wb){cp.a=3;var dp=0;break a}for(lp=0;lp<wb;++lp)yb[dd[lp]]=ee(pd,3);var ux=void 0,o0=void 0,LE=cp,ME=yb,gd=cx,Ap=s0,dx=0,Ec=LE.m,l0=8,Eb=i(128,j);n:for(;R(Eb,0,7,ME,19);){if(ee(Ec,1)){var UE=2+2*ee(Ec,3);if((ux=2+ee(Ec,UE))>gd)break n}else ux=gd;for(o0=0;o0<gd&&ux--;){te(Ec);var Cb=Eb[0+(127&Q(Ec))];J(Ec,Ec.u+Cb.g);var Of=Cb.value;if(16>Of)Ap[o0++]=Of,Of!=0&&(l0=Of);else{var QE=Of==16,Nb=Of-16,_b=Ql[Nb],Sb=ee(Ec,rx[Nb])+_b;if(o0+Sb>gd)break n;for(var HE=QE?l0:0;0<Sb--;)Ap[o0++]=HE}}dx=1;break n}dx||(LE.a=3),i0=dx}(i0=i0&&!pd.h)&&(up=R(OE,DE,8,s0,cx)),i0&&up!=0?dp=up:(cp.a=3,dp=0)}if(dp==0)break r;if(a0&&kf[Yr]==1&&(a0=EA[ua].g==0),op+=EA[ua].g,ua+=dp,3>=Yr){var Df,Ax=Ff[0];for(Df=1;Df<Ba;++Df)Ff[Df]>Ax&&(Ax=Ff[Df]);lx+=Ax}}if(Oo.nd=a0,Oo.Qb=0,a0&&(Oo.qb=(CA[3][Do[3]+0].value<<24|CA[1][Do[1]+0].value<<16|CA[2][Do[2]+0].value)>>>0,op==0&&256>CA[0][Do[0]+0].value&&(Oo.Qb=1,Oo.qb+=CA[0][Do[0]+0].value<<8)),Oo.jc=!Oo.Qb&&6>lx,Oo.jc){var fp,xd=Oo;for(fp=0;fp<Rs;++fp){var vu=fp,vd=xd.pd[vu],hp=xd.G[0][xd.H[0]+vu];256<=hp.value?(vd.g=hp.g+256,vd.value=hp.value):(vd.g=0,vd.value=0,vu>>=Zr(hp,8,vd),vu>>=Zr(xd.G[1][xd.H[1]+vu],16,vd),vu>>=Zr(xd.G[2][xd.H[2]+vu],0,vd),Zr(xd.G[3][xd.H[3]+vu],24,vd))}}}rs.vc=ns,rs.Wb=xs,rs.Ya=La,rs.yc=ip,ra=1;break t}ra=0}if(!(pe=ra)){oe.a=3;break e}if(0<st){if(Te.ua=1<<st,!ke(Te.Wa,st)){oe.a=1,pe=0;break e}}else Te.ua=0;var mp=oe,kb=ge,VE=ve,jb=mp.s,Bb=jb.xc;if(mp.c=kb,mp.i=VE,jb.md=Le(kb,Bb),jb.wc=Bb==0?-1:(1<<Bb)-1,re){oe.xb=BE;break e}if((Ue=s(ge*ve))==null){oe.a=1,pe=0;break e}pe=(pe=Fe(oe,Ue,0,ge,ve,ve,null))&&!Ee.h;break e}return pe?(Ae!=null?Ae[0]=Ue:(t(Ue==null),t(re)),oe.$=0,re||Ye(Te)):Ye(Te),pe}function rt(I,H){var re=I.c*I.i,oe=re+H+16*H;return t(I.c<=H),I.V=s(oe),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+re+H,1)}function it(I,H){var re=I.C,oe=H-re,Ae=I.V,pe=I.Ba+I.c*re;for(t(H<=I.l.o);0<oe;){var ge=16<oe?16:oe,ve=I.l.ma,Ee=I.l.width,Te=Ee*ge,Ue=ve.ca,st=ve.tb+Ee*re,tt=I.Ta,qe=I.Ua;me(I,ge,Ae,pe),va(tt,qe,Ue,st,Te),we(ve,re,re+ge,Ue,st,Ee),oe-=ge,Ae+=ge*I.c,re+=ge}t(re==H),I.C=I.Ma=H}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function $t(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var I=[];return function H(re,oe,Ae){for(var pe=Ae[oe],ge=0;ge<pe&&(re.push(Ae.length>oe+1?[]:0),!(Ae.length<oe+1));ge++)H(re[ge],oe+1,Ae)}(I,0,[3,11]),I}()}function Gt(){this.jb=s(3),this.Wc=l([4,8],Ht),this.Xc=l([4,17],Ht)}function kr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function No(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new fs),this.aa=0,this.l=new Ps}function hs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ri(){this.cb=this.a=0,this.sc="",this.m=new X,this.Od=new Ft,this.Kc=new $t,this.ed=new kr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new No,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,X),this.ia=0,this.pb=i(4,An),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hs),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fs),this.L=this.aa=0,this.gd=l([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ps(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function yi(){var I=new ri;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,Ls||(Ls=$h)),I}function xa(I,H,re){return I.a==0&&(I.a=H,I.sc=re,I.cb=0),0}function ni(I,H,re){return 3<=re&&I[H+0]==157&&I[H+1]==1&&I[H+2]==42}function Zd(I,H){if(I==null)return 0;if(I.a=0,I.sc="OK",H==null)return xa(I,2,"null VP8Io passed to VP8GetHeaders()");var re=H.data,oe=H.w,Ae=H.ha;if(4>Ae)return xa(I,7,"Truncated header.");var pe=re[oe+0]|re[oe+1]<<8|re[oe+2]<<16,ge=I.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return xa(I,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(I,4,"Frame not displayable.");oe+=3,Ae-=3;var ve=I.Kc;if(ge.Rb){if(7>Ae)return xa(I,7,"cannot parse picture header");if(!ni(re,oe,Ae))return xa(I,3,"Bad code word");ve.c=16383&(re[oe+4]<<8|re[oe+3]),ve.Td=re[oe+4]>>6,ve.i=16383&(re[oe+6]<<8|re[oe+5]),ve.Ud=re[oe+6]>>6,oe+=7,Ae-=7,I.za=ve.c+15>>4,I.Ub=ve.i+15>>4,H.width=ve.c,H.height=ve.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,a((pe=I.Pa).jb,0,255,pe.jb.length),t((pe=I.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,a(pe.Zb,0,0,pe.Zb.length),a(pe.Lb,0,0,pe.Lb)}if(ge.ub>Ae)return xa(I,7,"bad partition length");Z(pe=I.m,re,oe,ge.ub),oe+=ge.ub,Ae-=ge.ub,ge.Rb&&(ve.Ld=ie(pe),ve.Kd=ie(pe)),ve=I.Qa;var Ee,Te=I.Pa;if(t(pe!=null),t(ve!=null),ve.Cb=ie(pe),ve.Cb){if(ve.Bb=ie(pe),ie(pe)){for(ve.Fb=ie(pe),Ee=0;4>Ee;++Ee)ve.Zb[Ee]=ie(pe)?W(pe,7):0;for(Ee=0;4>Ee;++Ee)ve.Lb[Ee]=ie(pe)?W(pe,6):0}if(ve.Bb)for(Ee=0;3>Ee;++Ee)Te.jb[Ee]=ie(pe)?V(pe,8):255}else ve.Bb=0;if(pe.Ka)return xa(I,3,"cannot parse segment header");if((ve=I.ed).zd=ie(pe),ve.Tb=V(pe,6),ve.wb=V(pe,3),ve.Pc=ie(pe),ve.Pc&&ie(pe)){for(Te=0;4>Te;++Te)ie(pe)&&(ve.vd[Te]=W(pe,6));for(Te=0;4>Te;++Te)ie(pe)&&(ve.od[Te]=W(pe,6))}if(I.L=ve.Tb==0?0:ve.zd?1:2,pe.Ka)return xa(I,3,"cannot parse filter header");var Ue=Ae;if(Ae=Ee=oe,oe=Ee+Ue,ve=Ue,I.Xb=(1<<V(I.m,2))-1,Ue<3*(Te=I.Xb))re=7;else{for(Ee+=3*Te,ve-=3*Te,Ue=0;Ue<Te;++Ue){var st=re[Ae+0]|re[Ae+1]<<8|re[Ae+2]<<16;st>ve&&(st=ve),Z(I.Jc[+Ue],re,Ee,st),Ee+=st,ve-=st,Ae+=3}Z(I.Jc[+Te],re,Ee,ve),re=Ee<oe?0:5}if(re!=0)return xa(I,re,"cannot parse partitions");for(re=V(Ee=I.m,7),Ae=ie(Ee)?W(Ee,4):0,oe=ie(Ee)?W(Ee,4):0,ve=ie(Ee)?W(Ee,4):0,Te=ie(Ee)?W(Ee,4):0,Ee=ie(Ee)?W(Ee,4):0,Ue=I.Qa,st=0;4>st;++st){if(Ue.Cb){var tt=Ue.Zb[st];Ue.Fb||(tt+=re)}else{if(0<st){I.pb[st]=I.pb[0];continue}tt=re}var qe=I.pb[st];qe.Sc[0]=rp[zn(tt+Ae,127)],qe.Sc[1]=np[zn(tt+0,127)],qe.Eb[0]=2*rp[zn(tt+oe,127)],qe.Eb[1]=101581*np[zn(tt+ve,127)]>>16,8>qe.Eb[1]&&(qe.Eb[1]=8),qe.Qc[0]=rp[zn(tt+Te,117)],qe.Qc[1]=np[zn(tt+Ee,127)],qe.lc=tt+Ee}if(!ge.Rb)return xa(I,4,"Not a key frame.");for(ie(pe),ge=I.Pa,re=0;4>re;++re){for(Ae=0;8>Ae;++Ae)for(oe=0;3>oe;++oe)for(ve=0;11>ve;++ve)Te=le(pe,Bf[re][Ae][oe][ve])?V(pe,8):mu[re][Ae][oe][ve],ge.Wc[re][Ae].Yb[oe][ve]=Te;for(Ae=0;17>Ae;++Ae)ge.Xc[re][Ae]=ge.Wc[re][jE[Ae]]}return I.kc=ie(pe),I.kc&&(I.Bd=V(pe,8)),I.cb=1}function $h(I,H,re,oe,Ae,pe,ge){var ve=H[Ae].Yb[re];for(re=0;16>Ae;++Ae){if(!le(I,ve[re+0]))return Ae;for(;!le(I,ve[re+1]);)if(ve=H[++Ae].Yb[0],re=0,Ae==16)return 16;var Ee=H[Ae+1].Yb;if(le(I,ve[re+2])){var Te=I,Ue=0;if(le(Te,(tt=ve)[(st=re)+3]))if(le(Te,tt[st+6])){for(ve=0,st=2*(Ue=le(Te,tt[st+8]))+(tt=le(Te,tt[st+9+Ue])),Ue=0,tt=qa[st];tt[ve];++ve)Ue+=Ue+le(Te,tt[ve]);Ue+=3+(8<<st)}else le(Te,tt[st+7])?(Ue=7+2*le(Te,165),Ue+=le(Te,145)):Ue=5+le(Te,159);else Ue=le(Te,tt[st+4])?3+le(Te,tt[st+5]):2;ve=Ee[2]}else Ue=1,ve=Ee[1];Ee=ge+Un[Ae],0>(Te=I).b&&se(Te);var st,tt=Te.b,qe=(st=Te.Ca>>1)-(Te.I>>tt)>>31;--Te.b,Te.Ca+=qe,Te.Ca|=1,Te.I-=(st+1&qe)<<tt,pe[Ee]=((Ue^qe)-qe)*oe[(0<Ae)+0]}return 16}function eu(I){var H=I.rb[I.sb-1];H.la=0,H.Na=0,a(I.zc,0,0,I.zc.length),I.ja=0}function hf(I,H){if(I==null)return 0;if(H==null)return xa(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!Zd(I,H))return 0;if(t(I.cb),H.ac==null||H.ac(H)){H.ob&&(I.L=0);var re=md[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=H.v-re>>4,I.zb=H.j-re>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=H.o+15+re>>4,I.Hb=H.va+15+re>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var oe=I.ed;for(re=0;4>re;++re){var Ae;if(I.Qa.Cb){var pe=I.Qa.Lb[re];I.Qa.Fb||(pe+=oe.Tb)}else pe=oe.Tb;for(Ae=0;1>=Ae;++Ae){var ge=I.gd[re][Ae],ve=pe;if(oe.Pc&&(ve+=oe.vd[0],Ae&&(ve+=oe.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var Ee=ve;0<oe.wb&&(Ee=4<oe.wb?Ee>>2:Ee>>1)>9-oe.wb&&(Ee=9-oe.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*ve+Ee,ge.ld=40<=ve?2:15<=ve?1:0}else ge.tc=0;ge.La=Ae}}}re=0}else xa(I,6,"Frame setup failed"),re=I.a;if(re=re==0){if(re){I.$c=0,0<I.Aa||(I.Ic=IE);e:{re=I.Ic,oe=4*(Ee=I.za);var Te=32*Ee,Ue=Ee+1,st=0<I.L?Ee*(0<I.Aa?2:1):0,tt=(I.Aa==2?2:1)*Ee;if((ge=oe+832+(Ae=3*(16*re+md[I.L])/2*Te)+(pe=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=ge)re=0;else{if(ge>I.Vb){if(I.Vb=0,I.Ec=s(ge),I.Fc=0,I.Ec==null){re=xa(I,1,"no memory during frame initialization.");break e}I.Vb=ge}ge=I.Ec,ve=I.Fc,I.Ac=ge,I.Bc=ve,ve+=oe,I.Gd=i(Te,hs),I.Hd=0,I.rb=i(Ue+1,on),I.sb=1,I.wa=st?i(st,sn):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Ee),t(!0),I.oc=ge,I.pc=ve,ve+=832,I.ya=i(tt,fs),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Ee),I.R=16*Ee,I.B=8*Ee,Ee=(Te=md[I.L])*I.R,Te=Te/2*I.B,I.sa=ge,I.ta=ve+Ee,I.qa=I.sa,I.ra=I.ta+16*re*I.R+Te,I.Ha=I.qa,I.Ia=I.ra+8*re*I.B+Te,I.$c=0,ve+=Ae,I.mb=pe?ge:null,I.nb=pe?ve:null,t(ve+pe<=I.Fc+I.Vb),eu(I),a(I.Ac,I.Bc,0,oe),re=1}}if(re){if(H.ka=0,H.y=I.sa,H.O=I.ta,H.f=I.qa,H.N=I.ra,H.ea=I.Ha,H.Vd=I.Ia,H.fa=I.R,H.Rc=I.B,H.F=null,H.J=0,!ld){for(re=-255;255>=re;++re)ts[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)Ml[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)mA[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)pA[255+re]=0>re?0:255<re?255:re;ld=1}Au=_o,bc=ru,yc=Bl,gs=Vn,Fo=nu,Ga=tu,Ef=ou,fu=gc,Jh=nA,dA=vf,AA=rA,fA=td,Cf=rd,Zh=lu,hA=cl,od=Ui,Nf=ps,Ka=qh,lo[0]=Li,lo[1]=Gh,lo[2]=Fl,lo[3]=Kh,lo[4]=So,lo[5]=Ol,lo[6]=io,lo[7]=ko,lo[8]=pc,lo[9]=au,fd[0]=Tl,fd[1]=pf,fd[2]=fc,fd[3]=tA,fd[4]=ca,fd[5]=mc,fd[6]=Il,Al[0]=Dl,Al[1]=mf,Al[2]=gf,Al[3]=jo,Al[4]=bn,Al[5]=ms,Al[6]=su,re=1}else re=0}re&&(re=function(qe,Bt){for(qe.M=0;qe.M<qe.Va;++qe.M){var pt,Qe=qe.Jc[qe.M&qe.Xb],Ve=qe.m,_t=qe;for(pt=0;pt<_t.za;++pt){var Tt=Ve,kt=_t,rr=kt.Ac,Xt=kt.Bc+4*pt,br=kt.zc,er=kt.ya[kt.aa+pt];if(kt.Qa.Bb?er.$b=le(Tt,kt.Pa.jb[0])?2+le(Tt,kt.Pa.jb[2]):le(Tt,kt.Pa.jb[1]):er.$b=0,kt.kc&&(er.Ad=le(Tt,kt.Bd)),er.Za=!le(Tt,145)+0,er.Za){var Pn=er.Ob,$n=0;for(kt=0;4>kt;++kt){var fn,ln=br[0+kt];for(fn=0;4>fn;++fn){ln=gb[rr[Xt+fn]][ln];for(var ra=xA[le(Tt,ln[0])];0<ra;)ra=xA[2*ra+le(Tt,ln[ra])];ln=-ra,rr[Xt+fn]=ln}n(Pn,$n,rr,Xt,4),$n+=4,br[0+kt]=ln}}else ln=le(Tt,156)?le(Tt,128)?1:3:le(Tt,163)?2:0,er.Ob[0]=ln,a(rr,Xt,ln,4),a(br,0,ln,4);er.Dd=le(Tt,142)?le(Tt,114)?le(Tt,183)?1:3:2:0}if(_t.m.Ka)return xa(qe,7,"Premature end-of-partition0 encountered.");for(;qe.ja<qe.za;++qe.ja){if(_t=Qe,Tt=(Ve=qe).rb[Ve.sb-1],rr=Ve.rb[Ve.sb+Ve.ja],pt=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?pt.Ad:0)Tt.la=rr.la=0,pt.Za||(Tt.Na=rr.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var Gn,Yr;if(Tt=rr,rr=_t,Xt=Ve.Pa.Xc,br=Ve.ya[Ve.aa+Ve.ja],er=Ve.pb[br.$b],kt=br.ad,Pn=0,$n=Ve.rb[Ve.sb-1],ln=fn=0,a(kt,Pn,0,384),br.Za)var ua=0,jr=Xt[3];else{ra=s(16);var Ur=Tt.Na+$n.Na;if(Ur=Ls(rr,Xt[1],Ur,er.Eb,0,ra,0),Tt.Na=$n.Na=(0<Ur)+0,1<Ur)Au(ra,0,kt,Pn);else{var Dn=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)kt[Pn+ra]=Dn}ua=1,jr=Xt[0]}var Rn=15&Tt.la,oi=15&$n.la;for(ra=0;4>ra;++ra){var Qs=1&oi;for(Dn=Yr=0;4>Dn;++Dn)Rn=Rn>>1|(Qs=(Ur=Ls(rr,jr,Ur=Qs+(1&Rn),er.Sc,ua,kt,Pn))>ua)<<7,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Pn+0]!=0),Pn+=16;Rn>>=4,oi=oi>>1|Qs<<7,fn=(fn<<8|Yr)>>>0}for(jr=Rn,ua=oi>>4,Gn=0;4>Gn;Gn+=2){for(Yr=0,Rn=Tt.la>>4+Gn,oi=$n.la>>4+Gn,ra=0;2>ra;++ra){for(Qs=1&oi,Dn=0;2>Dn;++Dn)Ur=Qs+(1&Rn),Rn=Rn>>1|(Qs=0<(Ur=Ls(rr,Xt[2],Ur,er.Qc,0,kt,Pn)))<<3,Yr=Yr<<2|(3<Ur?3:1<Ur?2:kt[Pn+0]!=0),Pn+=16;Rn>>=2,oi=oi>>1|Qs<<5}ln|=Yr<<4*Gn,jr|=Rn<<4<<Gn,ua|=(240&oi)<<Gn}Tt.la=jr,$n.la=ua,br.Hc=fn,br.Gc=ln,br.ia=43690&ln?0:er.ia,Xt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[pt.$b][pt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),_t.Ka)return xa(qe,7,"Premature end-of-file encountered.")}if(eu(qe),Ve=Bt,_t=1,pt=(Qe=qe).D,Tt=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(pt.M=Qe.M,pt.uc=Tt,Bo(Qe,pt),_t=1,pt=(Yr=Qe.D).Nb,Tt=(ln=md[Qe.L])*Qe.R,rr=ln/2*Qe.B,ra=16*pt*Qe.R,Dn=8*pt*Qe.B,Xt=Qe.sa,br=Qe.ta-Tt+ra,er=Qe.qa,kt=Qe.ra-rr+Dn,Pn=Qe.Ha,$n=Qe.Ia-rr+Dn,oi=(Rn=Yr.M)==0,fn=Rn>=Qe.Va-1,Qe.Aa==2&&Bo(Qe,Yr),Yr.uc)for(Qs=(Ur=Qe).D.M,t(Ur.D.uc),Yr=Ur.yb;Yr<Ur.Hb;++Yr){ua=Yr,jr=Qs;var rs=(ns=(Ba=Ur).D).Nb;Gn=Ba.R;var ns=ns.wa[ns.Y+ua],xs=Ba.sa,Hl=Ba.ta+16*rs*Gn+16*ua,Kn=ns.dd,vs=ns.tc;if(vs!=0)if(t(3<=vs),Ba.L==1)0<ua&&od(xs,Hl,Gn,vs+4),ns.La&&Ka(xs,Hl,Gn,vs),0<jr&&hA(xs,Hl,Gn,vs+4),ns.La&&Nf(xs,Hl,Gn,vs);else{var wc=Ba.B,yA=Ba.qa,If=Ba.ra+8*rs*wc+8*ua,wA=Ba.Ha,Ba=Ba.Ia+8*rs*wc+8*ua;rs=ns.ld,0<ua&&(fu(xs,Hl,Gn,vs+4,Kn,rs),dA(yA,If,wA,Ba,wc,vs+4,Kn,rs)),ns.La&&(fA(xs,Hl,Gn,vs,Kn,rs),Zh(yA,If,wA,Ba,wc,vs,Kn,rs)),0<jr&&(Ef(xs,Hl,Gn,vs+4,Kn,rs),Jh(yA,If,wA,Ba,wc,vs+4,Kn,rs)),ns.La&&(AA(xs,Hl,Gn,vs,Kn,rs),Cf(yA,If,wA,Ba,wc,vs,Kn,rs))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Yr=16*Rn,Rn=16*(Rn+1),oi?(Ve.y=Qe.sa,Ve.O=Qe.ta+ra,Ve.f=Qe.qa,Ve.N=Qe.ra+Dn,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+Dn):(Yr-=ln,Ve.y=Xt,Ve.O=br,Ve.f=er,Ve.N=kt,Ve.ea=Pn,Ve.W=$n),fn||(Rn-=ln),Rn>Ve.o&&(Rn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Yr<Rn&&(Ve.J=sA(Qe,Ve,Yr,Rn-Yr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){_t=xa(Qe,3,"Could not decode alpha data.");break e}Yr<Ve.j&&(ln=Ve.j-Yr,Yr=Ve.j,t(!(1&ln)),Ve.O+=Qe.R*ln,Ve.N+=Qe.B*(ln>>1),Ve.W+=Qe.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),Yr<Rn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Yr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Rn-Yr,_t=Ve.put(Ve))}pt+1!=Qe.Ic||fn||(n(Qe.sa,Qe.ta-Tt,Xt,br+16*Qe.R,Tt),n(Qe.qa,Qe.ra-rr,er,kt+8*Qe.B,rr),n(Qe.Ha,Qe.Ia-rr,Pn,$n+8*Qe.B,rr))}if(!_t)return xa(qe,6,"Output aborted.")}return 1}(I,H)),H.bc!=null&&H.bc(H),re&=1}return re?(I.cb=0,re):0}function wi(I,H,re,oe,Ae){Ae=I[H+re+32*oe]+(Ae>>3),I[H+re+32*oe]=-256&Ae?0>Ae?0:255:Ae}function eA(I,H,re,oe,Ae,pe){wi(I,H,0,re,oe+Ae),wi(I,H,1,re,oe+pe),wi(I,H,2,re,oe-pe),wi(I,H,3,re,oe-Ae)}function On(I){return(20091*I>>16)+I}function Ei(I,H,re,oe){var Ae,pe=0,ge=s(16);for(Ae=0;4>Ae;++Ae){var ve=I[H+0]+I[H+8],Ee=I[H+0]-I[H+8],Te=(35468*I[H+4]>>16)-On(I[H+12]),Ue=On(I[H+4])+(35468*I[H+12]>>16);ge[pe+0]=ve+Ue,ge[pe+1]=Ee+Te,ge[pe+2]=Ee-Te,ge[pe+3]=ve-Ue,pe+=4,H++}for(Ae=pe=0;4>Ae;++Ae)ve=(I=ge[pe+0]+4)+ge[pe+8],Ee=I-ge[pe+8],Te=(35468*ge[pe+4]>>16)-On(ge[pe+12]),wi(re,oe,0,0,ve+(Ue=On(ge[pe+4])+(35468*ge[pe+12]>>16))),wi(re,oe,1,0,Ee+Te),wi(re,oe,2,0,Ee-Te),wi(re,oe,3,0,ve-Ue),pe++,oe+=32}function tu(I,H,re,oe){var Ae=I[H+0]+4,pe=35468*I[H+4]>>16,ge=On(I[H+4]),ve=35468*I[H+1]>>16;eA(re,oe,0,Ae+ge,I=On(I[H+1]),ve),eA(re,oe,1,Ae+pe,I,ve),eA(re,oe,2,Ae-pe,I,ve),eA(re,oe,3,Ae-ge,I,ve)}function ru(I,H,re,oe,Ae){Ei(I,H,re,oe),Ae&&Ei(I,H+16,re,oe+4)}function Bl(I,H,re,oe){bc(I,H+0,re,oe,1),bc(I,H+32,re,oe+128,1)}function Vn(I,H,re,oe){var Ae;for(I=I[H+0]+4,Ae=0;4>Ae;++Ae)for(H=0;4>H;++H)wi(re,oe,H,Ae,I)}function nu(I,H,re,oe){I[H+0]&&gs(I,H+0,re,oe),I[H+16]&&gs(I,H+16,re,oe+4),I[H+32]&&gs(I,H+32,re,oe+128),I[H+48]&&gs(I,H+48,re,oe+128+4)}function _o(I,H,re,oe){var Ae,pe=s(16);for(Ae=0;4>Ae;++Ae){var ge=I[H+0+Ae]+I[H+12+Ae],ve=I[H+4+Ae]+I[H+8+Ae],Ee=I[H+4+Ae]-I[H+8+Ae],Te=I[H+0+Ae]-I[H+12+Ae];pe[0+Ae]=ge+ve,pe[8+Ae]=ge-ve,pe[4+Ae]=Te+Ee,pe[12+Ae]=Te-Ee}for(Ae=0;4>Ae;++Ae)ge=(I=pe[0+4*Ae]+3)+pe[3+4*Ae],ve=pe[1+4*Ae]+pe[2+4*Ae],Ee=pe[1+4*Ae]-pe[2+4*Ae],Te=I-pe[3+4*Ae],re[oe+0]=ge+ve>>3,re[oe+16]=Te+Ee>>3,re[oe+32]=ge-ve>>3,re[oe+48]=Te-Ee>>3,oe+=64}function Ac(I,H,re){var oe,Ae=H-32,pe=si,ge=255-I[Ae-1];for(oe=0;oe<re;++oe){var ve,Ee=pe,Te=ge+I[H-1];for(ve=0;ve<re;++ve)I[H+ve]=Ee[Te+I[Ae+ve]];H+=32}}function Gh(I,H){Ac(I,H,4)}function mf(I,H){Ac(I,H,8)}function pf(I,H){Ac(I,H,16)}function fc(I,H){var re;for(re=0;16>re;++re)n(I,H+32*re,I,H-32,16)}function tA(I,H){var re;for(re=16;0<re;--re)a(I,H,I[H-1],16),H+=32}function hc(I,H,re){var oe;for(oe=0;16>oe;++oe)a(H,re+32*oe,I,16)}function Tl(I,H){var re,oe=16;for(re=0;16>re;++re)oe+=I[H-1+32*re]+I[H+re-32];hc(oe>>5,I,H)}function ca(I,H){var re,oe=8;for(re=0;16>re;++re)oe+=I[H-1+32*re];hc(oe>>4,I,H)}function mc(I,H){var re,oe=8;for(re=0;16>re;++re)oe+=I[H+re-32];hc(oe>>4,I,H)}function Il(I,H){hc(128,I,H)}function Fr(I,H,re){return I+2*H+re+2>>2}function Fl(I,H){var re,oe=H-32;for(oe=new Uint8Array([Fr(I[oe-1],I[oe+0],I[oe+1]),Fr(I[oe+0],I[oe+1],I[oe+2]),Fr(I[oe+1],I[oe+2],I[oe+3]),Fr(I[oe+2],I[oe+3],I[oe+4])]),re=0;4>re;++re)n(I,H+32*re,oe,0,oe.length)}function Kh(I,H){var re=I[H-1],oe=I[H-1+32],Ae=I[H-1+64],pe=I[H-1+96];ue(I,H+0,16843009*Fr(I[H-1-32],re,oe)),ue(I,H+32,16843009*Fr(re,oe,Ae)),ue(I,H+64,16843009*Fr(oe,Ae,pe)),ue(I,H+96,16843009*Fr(Ae,pe,pe))}function Li(I,H){var re,oe=4;for(re=0;4>re;++re)oe+=I[H+re-32]+I[H-1+32*re];for(oe>>=3,re=0;4>re;++re)a(I,H+32*re,oe,4)}function So(I,H){var re=I[H-1+0],oe=I[H-1+32],Ae=I[H-1+64],pe=I[H-1-32],ge=I[H+0-32],ve=I[H+1-32],Ee=I[H+2-32],Te=I[H+3-32];I[H+0+96]=Fr(oe,Ae,I[H-1+96]),I[H+1+96]=I[H+0+64]=Fr(re,oe,Ae),I[H+2+96]=I[H+1+64]=I[H+0+32]=Fr(pe,re,oe),I[H+3+96]=I[H+2+64]=I[H+1+32]=I[H+0+0]=Fr(ge,pe,re),I[H+3+64]=I[H+2+32]=I[H+1+0]=Fr(ve,ge,pe),I[H+3+32]=I[H+2+0]=Fr(Ee,ve,ge),I[H+3+0]=Fr(Te,Ee,ve)}function io(I,H){var re=I[H+1-32],oe=I[H+2-32],Ae=I[H+3-32],pe=I[H+4-32],ge=I[H+5-32],ve=I[H+6-32],Ee=I[H+7-32];I[H+0+0]=Fr(I[H+0-32],re,oe),I[H+1+0]=I[H+0+32]=Fr(re,oe,Ae),I[H+2+0]=I[H+1+32]=I[H+0+64]=Fr(oe,Ae,pe),I[H+3+0]=I[H+2+32]=I[H+1+64]=I[H+0+96]=Fr(Ae,pe,ge),I[H+3+32]=I[H+2+64]=I[H+1+96]=Fr(pe,ge,ve),I[H+3+64]=I[H+2+96]=Fr(ge,ve,Ee),I[H+3+96]=Fr(ve,Ee,Ee)}function Ol(I,H){var re=I[H-1+0],oe=I[H-1+32],Ae=I[H-1+64],pe=I[H-1-32],ge=I[H+0-32],ve=I[H+1-32],Ee=I[H+2-32],Te=I[H+3-32];I[H+0+0]=I[H+1+64]=pe+ge+1>>1,I[H+1+0]=I[H+2+64]=ge+ve+1>>1,I[H+2+0]=I[H+3+64]=ve+Ee+1>>1,I[H+3+0]=Ee+Te+1>>1,I[H+0+96]=Fr(Ae,oe,re),I[H+0+64]=Fr(oe,re,pe),I[H+0+32]=I[H+1+96]=Fr(re,pe,ge),I[H+1+32]=I[H+2+96]=Fr(pe,ge,ve),I[H+2+32]=I[H+3+96]=Fr(ge,ve,Ee),I[H+3+32]=Fr(ve,Ee,Te)}function ko(I,H){var re=I[H+0-32],oe=I[H+1-32],Ae=I[H+2-32],pe=I[H+3-32],ge=I[H+4-32],ve=I[H+5-32],Ee=I[H+6-32],Te=I[H+7-32];I[H+0+0]=re+oe+1>>1,I[H+1+0]=I[H+0+64]=oe+Ae+1>>1,I[H+2+0]=I[H+1+64]=Ae+pe+1>>1,I[H+3+0]=I[H+2+64]=pe+ge+1>>1,I[H+0+32]=Fr(re,oe,Ae),I[H+1+32]=I[H+0+96]=Fr(oe,Ae,pe),I[H+2+32]=I[H+1+96]=Fr(Ae,pe,ge),I[H+3+32]=I[H+2+96]=Fr(pe,ge,ve),I[H+3+64]=Fr(ge,ve,Ee),I[H+3+96]=Fr(ve,Ee,Te)}function au(I,H){var re=I[H-1+0],oe=I[H-1+32],Ae=I[H-1+64],pe=I[H-1+96];I[H+0+0]=re+oe+1>>1,I[H+2+0]=I[H+0+32]=oe+Ae+1>>1,I[H+2+32]=I[H+0+64]=Ae+pe+1>>1,I[H+1+0]=Fr(re,oe,Ae),I[H+3+0]=I[H+1+32]=Fr(oe,Ae,pe),I[H+3+32]=I[H+1+64]=Fr(Ae,pe,pe),I[H+3+64]=I[H+2+64]=I[H+0+96]=I[H+1+96]=I[H+2+96]=I[H+3+96]=pe}function pc(I,H){var re=I[H-1+0],oe=I[H-1+32],Ae=I[H-1+64],pe=I[H-1+96],ge=I[H-1-32],ve=I[H+0-32],Ee=I[H+1-32],Te=I[H+2-32];I[H+0+0]=I[H+2+32]=re+ge+1>>1,I[H+0+32]=I[H+2+64]=oe+re+1>>1,I[H+0+64]=I[H+2+96]=Ae+oe+1>>1,I[H+0+96]=pe+Ae+1>>1,I[H+3+0]=Fr(ve,Ee,Te),I[H+2+0]=Fr(ge,ve,Ee),I[H+1+0]=I[H+3+32]=Fr(re,ge,ve),I[H+1+32]=I[H+3+64]=Fr(oe,re,ge),I[H+1+64]=I[H+3+96]=Fr(Ae,oe,re),I[H+1+96]=Fr(pe,Ae,oe)}function gf(I,H){var re;for(re=0;8>re;++re)n(I,H+32*re,I,H-32,8)}function jo(I,H){var re;for(re=0;8>re;++re)a(I,H,I[H-1],8),H+=32}function Mi(I,H,re){var oe;for(oe=0;8>oe;++oe)a(H,re+32*oe,I,8)}function Dl(I,H){var re,oe=8;for(re=0;8>re;++re)oe+=I[H+re-32]+I[H-1+32*re];Mi(oe>>4,I,H)}function ms(I,H){var re,oe=4;for(re=0;8>re;++re)oe+=I[H+re-32];Mi(oe>>3,I,H)}function bn(I,H){var re,oe=4;for(re=0;8>re;++re)oe+=I[H-1+32*re];Mi(oe>>3,I,H)}function su(I,H){Mi(128,I,H)}function Pl(I,H,re){var oe=I[H-re],Ae=I[H+0],pe=3*(Ae-oe)+ex[1020+I[H-2*re]-I[H+re]],ge=_f[112+(pe+4>>3)];I[H-re]=si[255+oe+_f[112+(pe+3>>3)]],I[H+0]=si[255+Ae-ge]}function xf(I,H,re,oe){var Ae=I[H+0],pe=I[H+re];return Ul[255+I[H-2*re]-I[H-re]]>oe||Ul[255+pe-Ae]>oe}function Zu(I,H,re,oe){return 4*Ul[255+I[H-re]-I[H+0]]+Ul[255+I[H-2*re]-I[H+re]]<=oe}function ed(I,H,re,oe,Ae){var pe=I[H-3*re],ge=I[H-2*re],ve=I[H-re],Ee=I[H+0],Te=I[H+re],Ue=I[H+2*re],st=I[H+3*re];return 4*Ul[255+ve-Ee]+Ul[255+ge-Te]>oe?0:Ul[255+I[H-4*re]-pe]<=Ae&&Ul[255+pe-ge]<=Ae&&Ul[255+ge-ve]<=Ae&&Ul[255+st-Ue]<=Ae&&Ul[255+Ue-Te]<=Ae&&Ul[255+Te-Ee]<=Ae}function cl(I,H,re,oe){var Ae=2*oe+1;for(oe=0;16>oe;++oe)Zu(I,H+oe,re,Ae)&&Pl(I,H+oe,re)}function Ui(I,H,re,oe){var Ae=2*oe+1;for(oe=0;16>oe;++oe)Zu(I,H+oe*re,1,Ae)&&Pl(I,H+oe*re,1)}function ps(I,H,re,oe){var Ae;for(Ae=3;0<Ae;--Ae)cl(I,H+=4*re,re,oe)}function qh(I,H,re,oe){var Ae;for(Ae=3;0<Ae;--Ae)Ui(I,H+=4,re,oe)}function iu(I,H,re,oe,Ae,pe,ge,ve){for(pe=2*pe+1;0<Ae--;){if(ed(I,H,re,pe,ge))if(xf(I,H,re,ve))Pl(I,H,re);else{var Ee=I,Te=H,Ue=re,st=Ee[Te-2*Ue],tt=Ee[Te-Ue],qe=Ee[Te+0],Bt=Ee[Te+Ue],pt=Ee[Te+2*Ue],Qe=27*(_t=ex[1020+3*(qe-tt)+ex[1020+st-Bt]])+63>>7,Ve=18*_t+63>>7,_t=9*_t+63>>7;Ee[Te-3*Ue]=si[255+Ee[Te-3*Ue]+_t],Ee[Te-2*Ue]=si[255+st+Ve],Ee[Te-Ue]=si[255+tt+Qe],Ee[Te+0]=si[255+qe-Qe],Ee[Te+Ue]=si[255+Bt-Ve],Ee[Te+2*Ue]=si[255+pt-_t]}H+=oe}}function Ci(I,H,re,oe,Ae,pe,ge,ve){for(pe=2*pe+1;0<Ae--;){if(ed(I,H,re,pe,ge))if(xf(I,H,re,ve))Pl(I,H,re);else{var Ee=I,Te=H,Ue=re,st=Ee[Te-Ue],tt=Ee[Te+0],qe=Ee[Te+Ue],Bt=_f[112+((pt=3*(tt-st))+4>>3)],pt=_f[112+(pt+3>>3)],Qe=Bt+1>>1;Ee[Te-2*Ue]=si[255+Ee[Te-2*Ue]+Qe],Ee[Te-Ue]=si[255+st+pt],Ee[Te+0]=si[255+tt-Bt],Ee[Te+Ue]=si[255+qe-Qe]}H+=oe}}function ou(I,H,re,oe,Ae,pe){iu(I,H,re,1,16,oe,Ae,pe)}function gc(I,H,re,oe,Ae,pe){iu(I,H,1,re,16,oe,Ae,pe)}function rA(I,H,re,oe,Ae,pe){var ge;for(ge=3;0<ge;--ge)Ci(I,H+=4*re,re,1,16,oe,Ae,pe)}function td(I,H,re,oe,Ae,pe){var ge;for(ge=3;0<ge;--ge)Ci(I,H+=4,1,re,16,oe,Ae,pe)}function nA(I,H,re,oe,Ae,pe,ge,ve){iu(I,H,Ae,1,8,pe,ge,ve),iu(re,oe,Ae,1,8,pe,ge,ve)}function vf(I,H,re,oe,Ae,pe,ge,ve){iu(I,H,1,Ae,8,pe,ge,ve),iu(re,oe,1,Ae,8,pe,ge,ve)}function rd(I,H,re,oe,Ae,pe,ge,ve){Ci(I,H+4*Ae,Ae,1,8,pe,ge,ve),Ci(re,oe+4*Ae,Ae,1,8,pe,ge,ve)}function lu(I,H,re,oe,Ae,pe,ge,ve){Ci(I,H+4,1,Ae,8,pe,ge,ve),Ci(re,oe+4,1,Ae,8,pe,ge,ve)}function nd(){this.ba=new la,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function aA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ad(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function cu(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new j}function Wh(){this.xb=this.a=0,this.l=new Ps,this.ca=new la,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new cu,this.ab=0,this.gc=i(4,ad),this.Oc=0}function xc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ps,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function uu(I,H,re,oe,Ae,pe,ge){for(I=I==null?0:I[H+0],H=0;H<ge;++H)Ae[pe+H]=I+re[oe+H]&255,I=Ae[pe+H]}function sd(I,H,re,oe,Ae,pe,ge){var ve;if(I==null)uu(null,null,re,oe,Ae,pe,ge);else for(ve=0;ve<ge;++ve)Ae[pe+ve]=I[H+ve]+re[oe+ve]&255}function Qi(I,H,re,oe,Ae,pe,ge){if(I==null)uu(null,null,re,oe,Ae,pe,ge);else{var ve,Ee=I[H+0],Te=Ee,Ue=Ee;for(ve=0;ve<ge;++ve)Te=Ue+(Ee=I[H+ve])-Te,Ue=re[oe+ve]+(-256&Te?0>Te?0:255:Te)&255,Te=Ee,Ae[pe+ve]=Ue}}function sA(I,H,re,oe){var Ae=H.width,pe=H.o;if(t(I!=null&&H!=null),0>re||0>=oe||re+oe>pe)return null;if(!I.Cc){if(I.ga==null){var ge;if(I.ga=new xc,(ge=I.ga==null)||(ge=H.width*H.o,t(I.Gb.length==0),I.Gb=s(ge),I.Uc=0,I.Gb==null?ge=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,ge=1),ge=!ge),!ge){ge=I.ga;var ve=I.Fa,Ee=I.P,Te=I.qc,Ue=I.mb,st=I.nb,tt=Ee+1,qe=Te-1,Bt=ge.l;if(t(ve!=null&&Ue!=null&&H!=null),pu[0]=null,pu[1]=uu,pu[2]=sd,pu[3]=Qi,ge.ca=Ue,ge.tb=st,ge.c=H.width,ge.i=H.height,t(0<ge.c&&0<ge.i),1>=Te)H=0;else if(ge.$a=ve[Ee+0]>>0&3,ge.Z=ve[Ee+0]>>2&3,ge.Lc=ve[Ee+0]>>4&3,Ee=ve[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)H=0;else if(Bt.put=xt,Bt.ac=Je,Bt.bc=Et,Bt.ma=ge,Bt.width=H.width,Bt.height=H.height,Bt.Da=H.Da,Bt.v=H.v,Bt.va=H.va,Bt.j=H.j,Bt.o=H.o,ge.$a)e:{t(ge.$a==1),H=dt();t:for(;;){if(H==null){H=0;break e}if(t(ge!=null),ge.mc=H,H.c=ge.c,H.i=ge.i,H.l=ge.l,H.l.ma=ge,H.l.width=ge.c,H.l.height=ge.i,H.a=0,G(H.m,ve,tt,qe),!Ge(ge.c,ge.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&Ce(H.s)?(ge.ic=1,ve=H.c*H.i,H.Ta=null,H.Ua=0,H.V=s(ve),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(ge.ic=0,H=rt(H,ge.c)),!H))break t;H=1;break e}ge.mc=null,H=0}else H=qe>=ge.c*ge.i;ge=!H}if(ge)return null;I.ga.Lc!=1?I.Ga=0:oe=pe-re}t(I.ga!=null),t(re+oe<=pe);e:{if(H=(ve=I.ga).c,pe=ve.l.o,ve.$a==0){if(tt=I.rc,qe=I.Vc,Bt=I.Fa,Ee=I.P+1+re*H,Te=I.mb,Ue=I.nb+re*H,t(Ee<=I.P+I.qc),ve.Z!=0)for(t(pu[ve.Z]!=null),ge=0;ge<oe;++ge)pu[ve.Z](tt,qe,Bt,Ee,Te,Ue,H),tt=Te,qe=Ue,Ue+=H,Ee+=H;else for(ge=0;ge<oe;++ge)n(Te,Ue,Bt,Ee,H),tt=Te,qe=Ue,Ue+=H,Ee+=H;I.rc=tt,I.Vc=qe}else{if(t(ve.mc!=null),H=re+oe,t((ge=ve.mc)!=null),t(H<=ge.i),ge.C>=H)H=1;else if(ve.ic||Ke(),ve.ic){ve=ge.V,tt=ge.Ba,qe=ge.c;var pt=ge.i,Qe=(Bt=1,Ee=ge.$/qe,Te=ge.$%qe,Ue=ge.m,st=ge.s,ge.$),Ve=qe*pt,_t=qe*H,Tt=st.wc,kt=Qe<_t?qr(st,Te,Ee):null;t(Qe<=Ve),t(H<=pt),t(Ce(st));t:for(;;){for(;!Ue.h&&Qe<_t;){if(Te&Tt||(kt=qr(st,Te,Ee)),t(kt!=null),te(Ue),256>(pt=Wr(kt.G[0],kt.H[0],Ue)))ve[tt+Qe]=pt,++Qe,++Te>=qe&&(Te=0,++Ee<=H&&!(Ee%16)&&Se(ge,Ee));else{if(!(280>pt)){Bt=0;break t}pt=nr(pt-256,Ue);var rr,Xt=Wr(kt.G[4],kt.H[4],Ue);if(te(Ue),!(Qe>=(Xt=xr(qe,Xt=nr(Xt,Ue)))&&Ve-Qe>=pt)){Bt=0;break t}for(rr=0;rr<pt;++rr)ve[tt+Qe+rr]=ve[tt+Qe+rr-Xt];for(Qe+=pt,Te+=pt;Te>=qe;)Te-=qe,++Ee<=H&&!(Ee%16)&&Se(ge,Ee);Qe<_t&&Te&Tt&&(kt=qr(st,Te,Ee))}t(Ue.h==z(Ue))}Se(ge,Ee>H?H:Ee);break t}!Bt||Ue.h&&Qe<Ve?(Bt=0,ge.a=Ue.h?5:3):ge.$=Qe,H=Bt}else H=Fe(ge,ge.V,ge.Ba,ge.c,ge.i,H,it);if(!H){oe=0;break e}}re+oe>=pe&&(I.Cc=1),oe=1}if(!oe)return null;if(I.Cc&&((oe=I.ga)!=null&&(oe.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+re*Ae}function Y(I,H,re,oe,Ae,pe){for(;0<Ae--;){var ge,ve=I,Ee=H+(re?1:0),Te=I,Ue=H+(re?0:3);for(ge=0;ge<oe;++ge){var st=Te[Ue+4*ge];st!=255&&(st*=32897,ve[Ee+4*ge+0]=ve[Ee+4*ge+0]*st>>23,ve[Ee+4*ge+1]=ve[Ee+4*ge+1]*st>>23,ve[Ee+4*ge+2]=ve[Ee+4*ge+2]*st>>23)}H+=pe}}function fe(I,H,re,oe,Ae){for(;0<oe--;){var pe;for(pe=0;pe<re;++pe){var ge=I[H+2*pe+0],ve=15&(Te=I[H+2*pe+1]),Ee=4369*ve,Te=(240&Te|Te>>4)*Ee>>16;I[H+2*pe+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,I[H+2*pe+1]=240&Te|ve}H+=Ae}}function De(I,H,re,oe,Ae,pe,ge,ve){var Ee,Te,Ue=255;for(Te=0;Te<Ae;++Te){for(Ee=0;Ee<oe;++Ee){var st=I[H+Ee];pe[ge+4*Ee]=st,Ue&=st}H+=re,ge+=ve}return Ue!=255}function Me(I,H,re,oe,Ae){var pe;for(pe=0;pe<Ae;++pe)re[oe+pe]=I[H+pe]>>8}function Ke(){ul=Y,pn=fe,gn=De,va=Me}function yt(I,H,re){S[I]=function(oe,Ae,pe,ge,ve,Ee,Te,Ue,st,tt,qe,Bt,pt,Qe,Ve,_t,Tt){var kt,rr=Tt-1>>1,Xt=ve[Ee+0]|Te[Ue+0]<<16,br=st[tt+0]|qe[Bt+0]<<16;t(oe!=null);var er=3*Xt+br+131074>>2;for(H(oe[Ae+0],255&er,er>>16,pt,Qe),pe!=null&&(er=3*br+Xt+131074>>2,H(pe[ge+0],255&er,er>>16,Ve,_t)),kt=1;kt<=rr;++kt){var Pn=ve[Ee+kt]|Te[Ue+kt]<<16,$n=st[tt+kt]|qe[Bt+kt]<<16,fn=Xt+Pn+br+$n+524296,ln=fn+2*(Pn+br)>>3;er=ln+Xt>>1,Xt=(fn=fn+2*(Xt+$n)>>3)+Pn>>1,H(oe[Ae+2*kt-1],255&er,er>>16,pt,Qe+(2*kt-1)*re),H(oe[Ae+2*kt-0],255&Xt,Xt>>16,pt,Qe+(2*kt-0)*re),pe!=null&&(er=fn+br>>1,Xt=ln+$n>>1,H(pe[ge+2*kt-1],255&er,er>>16,Ve,_t+(2*kt-1)*re),H(pe[ge+2*kt+0],255&Xt,Xt>>16,Ve,_t+(2*kt+0)*re)),Xt=Pn,br=$n}1&Tt||(er=3*Xt+br+131074>>2,H(oe[Ae+Tt-1],255&er,er>>16,pt,Qe+(Tt-1)*re),pe!=null&&(er=3*br+Xt+131074>>2,H(pe[ge+Tt-1],255&er,er>>16,Ve,_t+(Tt-1)*re)))}}function Lt(){ii[Hi]=hd,ii[e0]=gu,ii[hu]=vA,ii[ep]=nx,ii[Sf]=ax,ii[cd]=n0,ii[tx]=sx,ii[tp]=gu,ii[gA]=nx,ii[ud]=ax,ii[t0]=n0}function Zt(I){return I&-16384?0>I?0:255:I>>yj}function O(I,H){return Zt((19077*I>>8)+(26149*H>>8)-14234)}function ne(I,H,re){return Zt((19077*I>>8)-(6419*H>>8)-(13320*re>>8)+8708)}function ce(I,H){return Zt((19077*I>>8)+(33050*H>>8)-17685)}function be(I,H,re,oe,Ae){oe[Ae+0]=O(I,re),oe[Ae+1]=ne(I,H,re),oe[Ae+2]=ce(I,H)}function ze(I,H,re,oe,Ae){oe[Ae+0]=ce(I,H),oe[Ae+1]=ne(I,H,re),oe[Ae+2]=O(I,re)}function ot(I,H,re,oe,Ae){var pe=ne(I,H,re);H=pe<<3&224|ce(I,H)>>3,oe[Ae+0]=248&O(I,re)|pe>>5,oe[Ae+1]=H}function Ut(I,H,re,oe,Ae){var pe=240&ce(I,H)|15;oe[Ae+0]=240&O(I,re)|ne(I,H,re)>>4,oe[Ae+1]=pe}function Or(I,H,re,oe,Ae){oe[Ae+0]=255,be(I,H,re,oe,Ae+1)}function yn(I,H,re,oe,Ae){ze(I,H,re,oe,Ae),oe[Ae+3]=255}function Xr(I,H,re,oe,Ae){be(I,H,re,oe,Ae),oe[Ae+3]=255}function zn(I,H){return 0>I?0:I>H?H:I}function ta(I,H,re){S[I]=function(oe,Ae,pe,ge,ve,Ee,Te,Ue,st){for(var tt=Ue+(-2&st)*re;Ue!=tt;)H(oe[Ae+0],pe[ge+0],ve[Ee+0],Te,Ue),H(oe[Ae+1],pe[ge+0],ve[Ee+0],Te,Ue+re),Ae+=2,++ge,++Ee,Ue+=2*re;1&st&&H(oe[Ae+0],pe[ge+0],ve[Ee+0],Te,Ue)}}function Rl(I,H,re){return re==0?I==0?H==0?6:5:H==0?4:0:re}function es(I,H,re,oe,Ae){switch(I>>>30){case 3:bc(H,re,oe,Ae,0);break;case 2:Ga(H,re,oe,Ae);break;case 1:gs(H,re,oe,Ae)}}function Bo(I,H){var re,oe,Ae=H.M,pe=H.Nb,ge=I.oc,ve=I.pc+40,Ee=I.oc,Te=I.pc+584,Ue=I.oc,st=I.pc+600;for(re=0;16>re;++re)ge[ve+32*re-1]=129;for(re=0;8>re;++re)Ee[Te+32*re-1]=129,Ue[st+32*re-1]=129;for(0<Ae?ge[ve-1-32]=Ee[Te-1-32]=Ue[st-1-32]=129:(a(ge,ve-32-1,127,21),a(Ee,Te-32-1,127,9),a(Ue,st-32-1,127,9)),oe=0;oe<I.za;++oe){var tt=H.ya[H.aa+oe];if(0<oe){for(re=-1;16>re;++re)n(ge,ve+32*re-4,ge,ve+32*re+12,4);for(re=-1;8>re;++re)n(Ee,Te+32*re-4,Ee,Te+32*re+4,4),n(Ue,st+32*re-4,Ue,st+32*re+4,4)}var qe=I.Gd,Bt=I.Hd+oe,pt=tt.ad,Qe=tt.Hc;if(0<Ae&&(n(ge,ve-32,qe[Bt].y,0,16),n(Ee,Te-32,qe[Bt].f,0,8),n(Ue,st-32,qe[Bt].ea,0,8)),tt.Za){var Ve=ge,_t=ve-32+16;for(0<Ae&&(oe>=I.za-1?a(Ve,_t,qe[Bt].y[15],4):n(Ve,_t,qe[Bt+1].y,0,4)),re=0;4>re;re++)Ve[_t+128+re]=Ve[_t+256+re]=Ve[_t+384+re]=Ve[_t+0+re];for(re=0;16>re;++re,Qe<<=2)Ve=ge,_t=ve+Tf[re],lo[tt.Ob[re]](Ve,_t),es(Qe,pt,16*+re,Ve,_t)}else if(Ve=Rl(oe,Ae,tt.Ob[0]),fd[Ve](ge,ve),Qe!=0)for(re=0;16>re;++re,Qe<<=2)es(Qe,pt,16*+re,ge,ve+Tf[re]);for(re=tt.Gc,Ve=Rl(oe,Ae,tt.Dd),Al[Ve](Ee,Te),Al[Ve](Ue,st),Qe=pt,Ve=Ee,_t=Te,255&(tt=re>>0)&&(170&tt?yc(Qe,256,Ve,_t):Fo(Qe,256,Ve,_t)),tt=Ue,Qe=st,255&(re>>=8)&&(170&re?yc(pt,320,tt,Qe):Fo(pt,320,tt,Qe)),Ae<I.Ub-1&&(n(qe[Bt].y,0,ge,ve+480,16),n(qe[Bt].f,0,Ee,Te+224,8),n(qe[Bt].ea,0,Ue,st+224,8)),re=8*pe*I.B,qe=I.sa,Bt=I.ta+16*oe+16*pe*I.R,pt=I.qa,tt=I.ra+8*oe+re,Qe=I.Ha,Ve=I.Ia+8*oe+re,re=0;16>re;++re)n(qe,Bt+re*I.R,ge,ve+32*re,16);for(re=0;8>re;++re)n(pt,tt+re*I.B,Ee,Te+32*re,8),n(Qe,Ve+re*I.B,Ue,st+32*re,8)}}function du(I,H,re,oe,Ae,pe,ge,ve,Ee){var Te=[0],Ue=[0],st=0,tt=Ee!=null?Ee.kd:0,qe=Ee??new aA;if(I==null||12>re)return 7;qe.data=I,qe.w=H,qe.ha=re,H=[H],re=[re],qe.gb=[qe.gb];e:{var Bt=H,pt=re,Qe=qe.gb;if(t(I!=null),t(pt!=null),t(Qe!=null),Qe[0]=0,12<=pt[0]&&!r(I,Bt[0],"RIFF")){if(r(I,Bt[0]+8,"WEBP")){Qe=3;break e}var Ve=Ne(I,Bt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(tt&&Ve>pt[0]-8){Qe=7;break e}Qe[0]=Ve,Bt[0]+=12,pt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<qe.gb[0],re=re[0];;){e:{var _t=I;pt=H,Qe=re;var Tt=Te,kt=Ue,rr=Bt=[0];if((er=st=[st])[0]=0,8>Qe[0])Qe=7;else{if(!r(_t,pt[0],"VP8X")){if(Ne(_t,pt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Xt=Ne(_t,pt[0]+8),br=1+ae(_t,pt[0]+12);if(2147483648<=br*(_t=1+ae(_t,pt[0]+15))){Qe=3;break e}rr!=null&&(rr[0]=Xt),Tt!=null&&(Tt[0]=br),kt!=null&&(kt[0]=_t),pt[0]+=18,Qe[0]-=18,er[0]=1}Qe=0}}if(st=st[0],Bt=Bt[0],Qe!=0)return Qe;if(pt=!!(2&Bt),!Ve&&st)return 3;if(pe!=null&&(pe[0]=!!(16&Bt)),ge!=null&&(ge[0]=pt),ve!=null&&(ve[0]=0),ge=Te[0],Bt=Ue[0],st&&pt&&Ee==null){Qe=0;break}if(4>re){Qe=7;break}if(Ve&&st||!Ve&&!st&&!r(I,H[0],"ALPH")){re=[re],qe.na=[qe.na],qe.P=[qe.P],qe.Sa=[qe.Sa];e:{Xt=I,Qe=H,Ve=re;var er=qe.gb;Tt=qe.na,kt=qe.P,rr=qe.Sa,br=22,t(Xt!=null),t(Ve!=null),_t=Qe[0];var Pn=Ve[0];for(t(Tt!=null),t(rr!=null),Tt[0]=null,kt[0]=null,rr[0]=0;;){if(Qe[0]=_t,Ve[0]=Pn,8>Pn){Qe=7;break e}var $n=Ne(Xt,_t+4);if(4294967286<$n){Qe=3;break e}var fn=8+$n+1&-2;if(br+=fn,0<er&&br>er){Qe=3;break e}if(!r(Xt,_t,"VP8 ")||!r(Xt,_t,"VP8L")){Qe=0;break e}if(Pn[0]<fn){Qe=7;break e}r(Xt,_t,"ALPH")||(Tt[0]=Xt,kt[0]=_t+8,rr[0]=$n),_t+=fn,Pn-=fn}}if(re=re[0],qe.na=qe.na[0],qe.P=qe.P[0],qe.Sa=qe.Sa[0],Qe!=0)break}re=[re],qe.Ja=[qe.Ja],qe.xa=[qe.xa];e:if(er=I,Qe=H,Ve=re,Tt=qe.gb[0],kt=qe.Ja,rr=qe.xa,Xt=Qe[0],_t=!r(er,Xt,"VP8 "),br=!r(er,Xt,"VP8L"),t(er!=null),t(Ve!=null),t(kt!=null),t(rr!=null),8>Ve[0])Qe=7;else{if(_t||br){if(er=Ne(er,Xt+4),12<=Tt&&er>Tt-12){Qe=3;break e}if(tt&&er>Ve[0]-8){Qe=7;break e}kt[0]=er,Qe[0]+=8,Ve[0]-=8,rr[0]=br}else rr[0]=5<=Ve[0]&&er[Xt+0]==47&&!(er[Xt+4]>>5),kt[0]=Ve[0];Qe=0}if(re=re[0],qe.Ja=qe.Ja[0],qe.xa=qe.xa[0],H=H[0],Qe!=0)break;if(4294967286<qe.Ja)return 3;if(ve==null||pt||(ve[0]=qe.xa?2:1),ge=[ge],Bt=[Bt],qe.xa){if(5>re){Qe=7;break}ve=ge,tt=Bt,pt=pe,I==null||5>re?I=0:5<=re&&I[H+0]==47&&!(I[H+4]>>5)?(Ve=[0],er=[0],Tt=[0],G(kt=new D,I,H,re),bt(kt,Ve,er,Tt)?(ve!=null&&(ve[0]=Ve[0]),tt!=null&&(tt[0]=er[0]),pt!=null&&(pt[0]=Tt[0]),I=1):I=0):I=0}else{if(10>re){Qe=7;break}ve=Bt,I==null||10>re||!ni(I,H+3,re-3)?I=0:(tt=I[H+0]|I[H+1]<<8|I[H+2]<<16,pt=16383&(I[H+7]<<8|I[H+6]),I=16383&(I[H+9]<<8|I[H+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=qe.Ja||!pt||!I?I=0:(ge&&(ge[0]=pt),ve&&(ve[0]=I),I=1))}if(!I||(ge=ge[0],Bt=Bt[0],st&&(Te[0]!=ge||Ue[0]!=Bt)))return 3;Ee!=null&&(Ee[0]=qe,Ee.offset=H-Ee.w,t(4294967286>H-Ee.w),t(Ee.offset==Ee.ha-re));break}return Qe==0||Qe==7&&st&&Ee==null?(pe!=null&&(pe[0]|=qe.na!=null&&0<qe.na.length),oe!=null&&(oe[0]=ge),Ae!=null&&(Ae[0]=Bt),0):Qe}function iA(I,H,re){var oe=H.width,Ae=H.height,pe=0,ge=0,ve=oe,Ee=Ae;if(H.Da=I!=null&&0<I.Da,H.Da&&(ve=I.cd,Ee=I.bd,pe=I.v,ge=I.j,11>re||(pe&=-2,ge&=-2),0>pe||0>ge||0>=ve||0>=Ee||pe+ve>oe||ge+Ee>Ae))return 0;if(H.v=pe,H.j=ge,H.va=pe+ve,H.o=ge+Ee,H.U=ve,H.T=Ee,H.da=I!=null&&0<I.da,H.da){if(!Be(ve,Ee,re=[I.ib],pe=[I.hb]))return 0;H.ib=re[0],H.hb=pe[0]}return H.ob=I!=null&&I.ob,H.Kb=I==null||!I.Sd,H.da&&(H.ob=H.ib<3*oe/4&&H.hb<3*Ae/4,H.Kb=0),1}function Xh(I){if(I==null)return 2;if(11>I.S){var H=I.f.RGBA;H.fb+=(I.height-1)*H.A,H.A=-H.A}else H=I.f.kb,I=I.height,H.O+=(I-1)*H.fa,H.fa=-H.fa,H.N+=(I-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(I-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(I-1)*H.lb,H.lb=-H.lb);return 0}function bf(I,H,re,oe){if(oe==null||0>=I||0>=H)return 2;if(re!=null){if(re.Da){var Ae=re.cd,pe=re.bd,ge=-2&re.v,ve=-2&re.j;if(0>ge||0>ve||0>=Ae||0>=pe||ge+Ae>I||ve+pe>H)return 2;I=Ae,H=pe}if(re.da){if(!Be(I,H,Ae=[re.ib],pe=[re.hb]))return 2;I=Ae[0],H=pe[0]}}oe.width=I,oe.height=H;e:{var Ee=oe.width,Te=oe.height;if(I=oe.S,0>=Ee||0>=Te||!(I>=Hi&&13>I))I=2;else{if(0>=oe.Rd&&oe.sd==null){ge=pe=Ae=H=0;var Ue=(ve=Ee*FE[I])*Te;if(11>I||(pe=(Te+1)/2*(H=(Ee+1)/2),I==12&&(ge=(Ae=Ee)*Te)),(Te=s(Ue+2*pe+ge))==null){I=1;break e}oe.sd=Te,11>I?((Ee=oe.f.RGBA).eb=Te,Ee.fb=0,Ee.A=ve,Ee.size=Ue):((Ee=oe.f.kb).y=Te,Ee.O=0,Ee.fa=ve,Ee.Fd=Ue,Ee.f=Te,Ee.N=0+Ue,Ee.Ab=H,Ee.Cd=pe,Ee.ea=Te,Ee.W=0+Ue+pe,Ee.Db=H,Ee.Ed=pe,I==12&&(Ee.F=Te,Ee.J=0+Ue+2*pe),Ee.Tc=ge,Ee.lb=Ae)}if(H=1,Ae=oe.S,pe=oe.width,ge=oe.height,Ae>=Hi&&13>Ae)if(11>Ae)I=oe.f.RGBA,H&=(ve=Math.abs(I.A))*(ge-1)+pe<=I.size,H&=ve>=pe*FE[Ae],H&=I.eb!=null;else{I=oe.f.kb,ve=(pe+1)/2,Ue=(ge+1)/2,Ee=Math.abs(I.fa),Te=Math.abs(I.Ab);var st=Math.abs(I.Db),tt=Math.abs(I.lb),qe=tt*(ge-1)+pe;H&=Ee*(ge-1)+pe<=I.Fd,H&=Te*(Ue-1)+ve<=I.Cd,H=(H&=st*(Ue-1)+ve<=I.Ed)&Ee>=pe&Te>=ve&st>=ve,H&=I.y!=null,H&=I.f!=null,H&=I.ea!=null,Ae==12&&(H&=tt>=pe,H&=qe<=I.Tc,H&=I.F!=null)}else H=0;I=H?0:2}}return I!=0||re!=null&&re.fd&&(I=Xh(oe)),I}var Rs=64,oA=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yf=24,wf=32,Yh=8,To=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(I){return I},S.Predictor2=function(I,H,re){return H[re+0]},S.Predictor3=function(I,H,re){return H[re+1]},S.Predictor4=function(I,H,re){return H[re-1]},S.Predictor5=function(I,H,re){return Re(Re(I,H[re+1]),H[re+0])},S.Predictor6=function(I,H,re){return Re(I,H[re-1])},S.Predictor7=function(I,H,re){return Re(I,H[re+0])},S.Predictor8=function(I,H,re){return Re(H[re-1],H[re+0])},S.Predictor9=function(I,H,re){return Re(H[re+0],H[re+1])},S.Predictor10=function(I,H,re){return Re(Re(I,H[re-1]),Re(H[re+0],H[re+1]))},S.Predictor11=function(I,H,re){var oe=H[re+0];return 0>=ct(oe>>24&255,I>>24&255,(H=H[re-1])>>24&255)+ct(oe>>16&255,I>>16&255,H>>16&255)+ct(oe>>8&255,I>>8&255,H>>8&255)+ct(255&oe,255&I,255&H)?oe:I},S.Predictor12=function(I,H,re){var oe=H[re+0];return($e((I>>24&255)+(oe>>24&255)-((H=H[re-1])>>24&255))<<24|$e((I>>16&255)+(oe>>16&255)-(H>>16&255))<<16|$e((I>>8&255)+(oe>>8&255)-(H>>8&255))<<8|$e((255&I)+(255&oe)-(255&H)))>>>0},S.Predictor13=function(I,H,re){var oe=H[re-1];return(et((I=Re(I,H[re+0]))>>24&255,oe>>24&255)<<24|et(I>>16&255,oe>>16&255)<<16|et(I>>8&255,oe>>8&255)<<8|et(I>>0&255,oe>>0&255))>>>0};var pb=S.PredictorAdd0;S.PredictorAdd1=gt,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var Jm=S.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var Zg,Ll=S.ColorIndexInverseTransform,ai=S.MapARGB,lA=S.VP8LColorIndexInverseTransformAlpha,Zm=S.MapAlpha,id=S.VP8LPredictorsAdd=[];id.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var cA,oo,Ni,uA,Io,vc,Au,bc,Ga,yc,gs,Fo,Ef,fu,Jh,dA,AA,fA,Cf,Zh,hA,od,Nf,Ka,ul,pn,gn,va,ts=s(511),Ml=s(2041),mA=s(225),pA=s(767),ld=0,ex=Ml,_f=mA,si=pA,Ul=ts,Hi=0,e0=1,hu=2,ep=3,Sf=4,cd=5,tx=6,tp=7,gA=8,ud=9,t0=10,rx=[2,3,7],Ql=[3,3,11],dl=[280,256,256,256,40],kf=[0,1,1,1,0],dd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ad=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],kE=8,rp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],np=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ls=null,qa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Un=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gb=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fd=[],lo=[],Al=[],BE=1,r0=2,pu=[],ii=[];yt("UpsampleRgbLinePair",be,3),yt("UpsampleBgrLinePair",ze,3),yt("UpsampleRgbaLinePair",Xr,4),yt("UpsampleBgraLinePair",yn,4),yt("UpsampleArgbLinePair",Or,4),yt("UpsampleRgba4444LinePair",Ut,2),yt("UpsampleRgb565LinePair",ot,2);var hd=S.UpsampleRgbLinePair,vA=S.UpsampleBgrLinePair,gu=S.UpsampleRgbaLinePair,nx=S.UpsampleBgraLinePair,ax=S.UpsampleArgbLinePair,n0=S.UpsampleRgba4444LinePair,sx=S.UpsampleRgb565LinePair,xu=16,Ms=1<<xu-1,bA=-227,ix=482,yj=6,TE=0,wj=s(256),Us=s(256),xb=s(256),ap=s(256),sp=s(ix-bA),vb=s(ix-bA);ta("YuvToRgbRow",be,3),ta("YuvToBgrRow",ze,3),ta("YuvToRgbaRow",Xr,4),ta("YuvToBgraRow",yn,4),ta("YuvToArgbRow",Or,4),ta("YuvToRgba4444Row",Ut,2),ta("YuvToRgb565Row",ot,2);var Tf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],md=[0,2,8],Ej=[8,7,6,4,4,2,2,2,1,1,1,1],IE=1;this.WebPDecodeRGBA=function(I,H,re,oe,Ae){var pe=e0,ge=new nd,ve=new la;ge.ba=ve,ve.S=pe,ve.width=[ve.width],ve.height=[ve.height];var Ee=ve.width,Te=ve.height,Ue=new ja;if(Ue==null||I==null)var st=2;else t(Ue!=null),st=du(I,H,re,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(st!=0?Ee=0:(Ee!=null&&(Ee[0]=Ue.width[0]),Te!=null&&(Te[0]=Ue.height[0]),Ee=1),Ee){ve.width=ve.width[0],ve.height=ve.height[0],oe!=null&&(oe[0]=ve.width),Ae!=null&&(Ae[0]=ve.height);e:{if(oe=new Ps,(Ae=new aA).data=I,Ae.w=H,Ae.ha=re,Ae.kd=1,H=[0],t(Ae!=null),((I=du(Ae.data,Ae.w,Ae.ha,null,null,null,H,null,Ae))==0||I==7)&&H[0]&&(I=4),(H=I)==0){if(t(ge!=null),oe.data=Ae.data,oe.w=Ae.w+Ae.offset,oe.ha=Ae.ha-Ae.offset,oe.put=xt,oe.ac=Je,oe.bc=Et,oe.ma=ge,Ae.xa){if((I=dt())==null){ge=1;break e}if(function(tt,qe){var Bt=[0],pt=[0],Qe=[0];t:for(;;){if(tt==null)return 0;if(qe==null)return tt.a=2,0;if(tt.l=qe,tt.a=0,G(tt.m,qe.data,qe.w,qe.ha),!bt(tt.m,Bt,pt,Qe)){tt.a=3;break t}if(tt.xb=r0,qe.width=Bt[0],qe.height=pt[0],!Ge(Bt[0],pt[0],1,tt,null))break t;return 1}return t(tt.a!=0),0}(I,oe)){if(oe=(H=bf(oe.width,oe.height,ge.Oa,ge.ba))==0){t:{oe=I;r:for(;;){if(oe==null){oe=0;break t}if(t(oe.s.yc!=null),t(oe.s.Ya!=null),t(0<oe.s.Wb),t((re=oe.l)!=null),t((Ae=re.ma)!=null),oe.xb!=0){if(oe.ca=Ae.ba,oe.tb=Ae.tb,t(oe.ca!=null),!iA(Ae.Oa,re,ep)){oe.a=2;break r}if(!rt(oe,re.width)||re.da)break r;if((re.da||Pr(oe.ca.S))&&Ke(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&Ke()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!ke(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!Fe(oe,oe.V,oe.Ba,oe.c,oe.i,re.o,Ie))break r;Ae.Dc=oe.Ma,oe=1;break t}t(oe.a!=0),oe=0}oe=!oe}oe&&(H=I.a)}else H=I.a}else{if((I=new yi)==null){ge=1;break e}if(I.Fa=Ae.na,I.P=Ae.P,I.qc=Ae.Sa,Zd(I,oe)){if((H=bf(oe.width,oe.height,ge.Oa,ge.ba))==0){if(I.Aa=0,re=ge.Oa,t((Ae=I)!=null),re!=null){if(0<(Ee=0>(Ee=re.Md)?0:100<Ee?255:255*Ee/100)){for(Te=Ue=0;4>Te;++Te)12>(st=Ae.pb[Te]).lc&&(st.ia=Ee*Ej[0>st.lc?0:st.lc]>>3),Ue|=st.ia;Ue&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=re.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}hf(I,oe)||(H=I.a)}}else H=I.a}H==0&&ge.Oa!=null&&ge.Oa.fd&&(H=Xh(ge.ba))}ge=H}pe=ge!=0?null:11>pe?ve.f.RGBA.eb:ve.f.kb.y}else pe=null;return pe};var FE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,T){for(var L="",R=0;R<4;R++)L+=String.fromCharCode(S[T++]);return L}function d(S,T){return(S[T+0]<<0|S[T+1]<<8|S[T+2]<<16)>>>0}function f(S,T){return(S[T+0]<<0|S[T+1]<<8|S[T+2]<<16|S[T+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],x=new c,v=e,y=function(S,T){var L={},R=0,j=!1,P=0,M=0;if(L.frames=[],!function(Q,z,J,te){for(var se=0;se<te;se++)if(Q[z+se]!=J.charCodeAt(se))return!0;return!1}(S,T,"RIFF",4)){var Z,V;for(f(S,T+=4),T+=8;T<S.length;){var W=u(S,T),G=f(S,T+=4);T+=4;var K=G+(1&G);switch(W){case"VP8 ":case"VP8L":L.frames[R]===void 0&&(L.frames[R]={}),(D=L.frames[R]).src_off=j?M:T-8,D.src_size=P+G+8,R++,j&&(j=!1,P=0,M=0);break;case"VP8X":(D=L.header={}).feature_flags=S[T];var ee=T+4;D.canvas_width=1+d(S,ee),ee+=3,D.canvas_height=1+d(S,ee),ee+=3;break;case"ALPH":j=!0,P=K+8,M=T-8;break;case"ANIM":(D=L.header).bgcolor=f(S,T),ee=T+4,D.loop_count=(Z=S)[(V=ee)+0]<<0|Z[V+1]<<8,ee+=2;break;case"ANMF":var X,D;(D=L.frames[R]={}).offset_x=2*d(S,T),T+=3,D.offset_y=2*d(S,T),T+=3,D.width=1+d(S,T),T+=3,D.height=1+d(S,T),T+=3,D.duration=d(S,T),T+=3,X=S[T++],D.dispose=1&X,D.blend=X>>1&1}W!="ANMF"&&(T+=K)}return L}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,N=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],m=[w.canvas_width];for(var B=0;B<N.length&&N[B].blend!=0;B++);}var k=N[0],F=x.WebPDecodeRGBA(v,k.src_off,k.src_size,m,h);k.rgba=F,k.imgwidth=m[0],k.imgheight=h[0];for(var E=0;E<m[0]*h[0]*4;E++)g[E]=F[E];return this.width=m,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof yO=="function"},r=function(h,m,g,x){var v=4,y=i;switch(x){case e.image_compression.FAST:v=1,y=s;break;case e.image_compression.MEDIUM:v=6,y=l;break;case e.image_compression.SLOW:v=9,y=c}h=n(h,m,g,y);var w=yO(h,{level:v});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,m,g,x){for(var v,y,w,N=h.length/m,B=new Uint8Array(h.length+N),k=d(),F=0;F<N;F+=1){if(w=F*m,v=h.subarray(w,w+m),x)B.set(x(v,g,y),w+F);else{for(var E,S=k.length,T=[];E<S;E+=1)T[E]=k[E](v,g,y);var L=f(T.concat());B.set(T[L],w+F)}y=v}return B},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},s=function(h,m){var g,x=[],v=h.length;x[0]=1;for(var y=0;y<v;y+=1)g=h[y-m]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,m,g){var x,v=[],y=h.length;v[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,v[w+1]=h[w]-x+256&255;return v},l=function(h,m,g){var x,v,y=[],w=h.length;y[0]=3;for(var N=0;N<w;N+=1)x=h[N-m]||0,v=g&&g[N]||0,y[N+1]=h[N]+256-(x+v>>>1)&255;return y},c=function(h,m,g){var x,v,y,w,N=[],B=h.length;N[0]=4;for(var k=0;k<B;k+=1)x=h[k-m]||0,v=g&&g[k]||0,y=g&&g[k-m]||0,w=u(x,v,y),N[k+1]=h[k]-w+256&255;return N},u=function(h,m,g){if(h===m&&m===g)return h;var x=Math.abs(m-g),v=Math.abs(h-g),y=Math.abs(h+m-g-g);return x<=v&&x<=y?h:v<=y?m:g},d=function(){return[a,s,i,l,c]},f=function(h){var m=h.map(function(g){return g.reduce(function(x,v){return x+Math.abs(v)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,g,x){var v,y,w,N,B,k,F,E,S,T,L,R,j,P,M,Z=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new _We(h)).imgData,y=w.bits,v=w.colorSpace,B=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){S=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,L=new Uint8Array(S*w.colors),T=new Uint8Array(S);var W,G=w.pixelBitlength-w.bits;for(P=0,M=0;P<S;P++){for(j=E[P],W=0;W<G;)L[M++]=j>>>W&255,W+=w.bits;T[P]=j>>>W&255}}if(w.bits===16){S=(E=new Uint32Array(w.decodePixels().buffer)).length,L=new Uint8Array(S*(32/w.pixelBitlength)*w.colors),T=new Uint8Array(S*(32/w.pixelBitlength)),R=w.colors>1,P=0,M=0;for(var K=0;P<S;)j=E[P++],L[M++]=j>>>0&255,R&&(L[M++]=j>>>16&255,j=E[P++],L[M++]=j>>>0&255),T[K++]=j>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(L,w.width*w.colors,w.colors,x),F=r(T,w.width,1,x)):(h=L,F=T,Z=void 0)}if(w.colorType===3&&(v=this.color_spaces.INDEXED,k=w.palette,w.transparency.indexed)){var ee=w.transparency.indexed,X=0;for(P=0,S=ee.length;P<S;++P)X+=ee[P];if((X/=255)===S-1&&ee.indexOf(0)!==-1)N=[ee.indexOf(0)];else if(X!==S){for(E=w.decodePixels(),T=new Uint8Array(E.length),P=0,S=E.length;P<S;P++)T[P]=ee[E[P]];F=r(T,w.width,1)}}var D=function(Q){var z;switch(Q){case e.image_compression.FAST:z=11;break;case e.image_compression.MEDIUM:z=13;break;case e.image_compression.SLOW:z=14;break;default:z=12}return z}(x);return Z===this.decode.FLATE_DECODE&&(V="/Predictor "+D+" "),V+="/Colors "+B+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(F&&this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),{alias:g,data:h,index:m,filter:Z,decodeParameters:V,transparency:N,palette:k,sMask:F,predictor:D,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:v}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new SWe(t),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new bI(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),Cd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Na.log("bit decode error:"+r)}},Cd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Cd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},Cd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Cd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},Cd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Cd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Cd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},Cd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Cd(t,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new bI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),Nq.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new Nq(t),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new bI(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,i[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Rx=vr.API,gN=Rx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,g=0,x=l[0]||c,v=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ga(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,v.push((l[n]||x)/c+h)),g=n;return v},yq=Rx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Rx.processArabic&&(e=Rx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:gN.apply(this,arguments).reduce(function(s,i){return s+i},0)},wq=function(e,t,r,n){for(var a=[],s=0,i=e.length,l=0;s!==i&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==i;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},Eq=function(e,t,r){r||(r={});var n,a,s,i,l,c,u,d=[],f=[d],h=r.textIndent||0,m=0,g=0,x=e.split(" "),v=gN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(B){(B=B.split(/\s*\n/)).length>1?w=w.concat(B.map(function(k,F){return(F&&k.length?`
`:"")+k})):w.push(B[0])}),x=w,c=yq.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var N=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),N=1),h+m+(g=(a=gN.apply(this,[n,r])).reduce(function(B,k){return B+k},0))>t||N){if(g>t){for(l=wq.apply(this,[n,a,t-(h+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(B,k){return B+k},0)}else d=[n];f.push(d),h=g+c,m=v}else d.push(n),h+=m+g,m=v}return u=c?function(B,k){return(k?y:"")+B.join(" ")}:function(B){return B.join(" ")},f.map(u)},Rx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Eq.apply(this,[n[l],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,m,g,x,v=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=s(y).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ga(h)!=="object")throw new Error("Don't know what to do with value type "+ga(h)+".");g=i(h)}v.push(m+g)}return v.push("}"),v.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,x,v={},y=1,w=v,N=[],B="",k="",F=f.length-1,E=1;E<F;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(N.push([w,g]),w={},g=void 0):x=="}"?((m=N.pop())[0][m[1]]=w,g=void 0,w=m[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(B+=r[x],g=parseInt(B,16)*y,y=1,B=""):B+=x:r.hasOwnProperty(x)?(k+=r[x],w[g]=parseInt(k,16)*y,y=1,g=void 0,k=""):k+=x;return v},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Ew(l)),i.metadata=e.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Qr.canvg?Promise.resolve(Qr.canvg):rc(()=>import("./index.es-BqfxDNjo.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,i,l,c,u){if(isNaN(n)||isNaN(a))throw Na.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Na.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,x){var v,y=!1;for(v=0;v<g.length;v+=1)g[v]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ga(e)==="object"){for(a in e)if(s=e[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(m,g){return m-g})).length;f<h;f++)i=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var x=u();d({data:m,addLength1:!0,objectId:x}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+lv(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+lv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+lv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+lv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+lv(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,m=f.activeFontKey,g=f.fonts,x=m,v="",y=0,w="",N=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(w=l,x=m,Array.isArray(l)&&(w=l[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?v+=w[y]:v+="";var B="";return parseInt(x.slice(1))<14||N==="WinAnsiEncoding"?B=h(v,x).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(B=r(v,g[x])),f.isHex=!0,{text:B,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var B=function(R){var j=R.charCodeAt(),P=j>>8,M=x[P];return M!==void 0?f[256*M+(255&j)]:P===252||P===253?"AL":y.test(P)?"L":P===8?"R":"N"},k=function(R){for(var j,P=0;P<R.length;P++){if((j=B(R.charAt(P)))==="L")return!1;if(j==="R")return!0}return!1},F=function(R,j,P,M){var Z,V,W,G,K=j[M];switch(K){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(K="AN");break;case"AL":w=!0,K="R";break;case"WS":K="N";break;case"CS":M<1||M+1>=j.length||(Z=P[M-1])!=="EN"&&Z!=="AN"||(V=j[M+1])!=="EN"&&V!=="AN"?K="N":w&&(V="AN"),K=V===Z?V:"N";break;case"ES":K=(Z=M>0?P[M-1]:"B")==="EN"&&M+1<j.length&&j[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&P[M-1]==="EN"){K="EN";break}if(w){K="N";break}for(W=M+1,G=j.length;W<G&&j[W]==="ET";)W++;K=W<G&&j[W]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(G=j.length,W=M+1;W<G&&j[W]==="NSM";)W++;if(W<G){var ee=R[M],X=ee>=1425&&ee<=2303||ee===64286;if(Z=j[W],X&&(Z==="R"||Z==="AL")){K="R";break}}}K=M<1||(Z=j[M-1])==="B"?"N":P[M-1];break;case"B":w=!1,a=!0,K=N;break;case"S":s=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":K="N"}return K},E=function(R,j,P){var M=R.split("");return P&&S(M,P,{hiLevel:N}),M.reverse(),j&&j.reverse(),M.join("")},S=function(R,j,P){var M,Z,V,W,G,K=-1,ee=R.length,X=0,D=[],Q=N?m:h,z=[];for(w=!1,a=!1,s=!1,Z=0;Z<ee;Z++)z[Z]=B(R[Z]);for(V=0;V<ee;V++){if(G=X,D[V]=F(R,z,D,V),M=240&(X=Q[G][g[D[V]]]),X&=15,j[V]=W=Q[X][5],M>0)if(M===16){for(Z=K;Z<V;Z++)j[Z]=1;K=-1}else K=-1;if(Q[X][6])K===-1&&(K=V);else if(K>-1){for(Z=K;Z<V;Z++)j[Z]=W;K=-1}z[V]==="B"&&(j[V]=0),P.hiLevel|=W}s&&function(J,te,se){for(var ie=0;ie<se;ie++)if(J[ie]==="S"){te[ie]=N;for(var le=ie-1;le>=0&&J[le]==="WS";le--)te[le]=N}}(z,j,ee)},T=function(R,j,P,M,Z){if(!(Z.hiLevel<R)){if(R===1&&N===1&&!a)return j.reverse(),void(P&&P.reverse());for(var V,W,G,K,ee=j.length,X=0;X<ee;){if(M[X]>=R){for(G=X+1;G<ee&&M[G]>=R;)G++;for(K=X,W=G-1;K<W;K++,W--)V=j[K],j[K]=j[W],j[W]=V,P&&(V=P[K],P[K]=P[W],P[W]=V);X=G}X++}}},L=function(R,j,P){var M=R.split(""),Z={hiLevel:N};return P||(P=[]),S(M,P,Z),function(V,W,G){if(G.hiLevel!==0&&d)for(var K,ee=0;ee<V.length;ee++)W[ee]===1&&(K=v.indexOf(V[ee]))>=0&&(V[ee]=v[K+1])}(M,P,Z),T(2,M,j,P,Z),T(1,M,j,P,Z),M.join("")};return this.__bidiEngine__.doBidiReorder=function(R,j,P){if(function(Z,V){if(V)for(var W=0;W<Z.length;W++)V[W]=W;l===void 0&&(l=k(Z)),u===void 0&&(u=k(Z))}(R,j),i||!c||u)if(i&&c&&l^u)N=l?1:0,R=E(R,j,P);else if(!i&&c&&u)N=l?1:0,R=L(R,j,P),R=E(R,j);else if(!i||l||c||u){if(i&&!c&&l^u)R=E(R,j),l?(N=0,R=L(R,j,P)):(N=1,R=L(R,j,P),R=E(R,j));else if(i&&l&&!c&&u)N=1,R=L(R,j,P),R=E(R,j);else if(!i&&!c&&l^u){var M=d;l?(N=1,R=L(R,j,P),N=0,d=!1,R=L(R,j,P),d=M):(N=0,R=L(R,j,P),R=E(R,j),N=1,d=!1,R=L(R,j,P),d=M,R=E(R,j))}}else N=0,R=L(R,j,P);else N=l?1:0,R=L(R,j,P);return R},this.__bidiEngine__.setOptions=function(R){R&&(i=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Om(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new HWe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new kWe(this.contents),this.head=new BWe(this),this.name=new DWe(this),this.cmap=new Tle(this),this.toUnicode={},this.hhea=new TWe(this),this.maxp=new PWe(this),this.hmtx=new RWe(this),this.post=new FWe(this),this.os2=new IWe(this),this.loca=new QWe(this),this.glyf=new LWe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,l;for(i=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Xd,Om=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),kWe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,l,c,u,d,f,h,m,g,x;for(x in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),i=Math.floor(f/c),d=16*m-f,(a=new Om).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*m,u=a.pos+s,l=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(l=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=Ile.call(r);r.length%4;)r.push(0);for(s=new Om(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),jWe={}.hasOwnProperty,uf=function(e,t){for(var r in t)jWe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Xd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var BWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Om).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),_q=function(){function e(t,r){var n,a,s,i,l,c,u,d,f,h,m,g,x,v,y,w,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,s=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),t.pos+=2,x=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),u=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),d=function(){var B,k;for(k=[],c=B=0;0<=h?B<h:B>h;c=0<=h?++B:--B)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,l=function(){var B,k;for(k=[],c=B=0;0<=a?B<a:B>a;c=0<=a?++B:--B)k.push(t.readUInt16());return k}(),c=y=0,N=s.length;y<N;c=++y)for(v=s[c],n=w=g=x[c];g<=v?w<=v:w>=v;n=g<=v?++w:--w)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,l,c,u,d,f,h,m,g,x,v,y,w,N,B,k,F,E,S,T,L,R,j,P,M,Z,V,W,G,K,ee,X,D,Q,z,J,te,se,ie,le,ue,je,ae;switch(M=new Om,i=Object.keys(t).sort(function(Ne,ke){return Ne-ke}),r){case"macroman":for(x=0,v=function(){var Ne=[];for(g=0;g<256;++g)Ne.push(0);return Ne}(),w={0:0},s={},Z=0,K=i.length;Z<K;Z++)w[le=t[a=i[Z]]]==null&&(w[le]=++x),s[a]={old:t[a],new:w[t[a]]},v[a]=w[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(v),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(j=[],f=[],N=0,w={},n={},y=u=null,V=0,ee=i.length;V<ee;V++)w[k=t[a=i[V]]]==null&&(w[k]=++N),n[a]={old:k,new:w[k]},l=w[k]-a,y!=null&&l===u||(y&&f.push(y),j.push(a),u=l),y=a;for(y&&f.push(y),f.push(65535),j.push(65535),L=2*(T=j.length),S=2*Math.pow(Math.log(T)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,E=2*T-S,c=[],F=[],m=[],g=W=0,X=j.length;W<X;g=++W){if(R=j[g],d=f[g],R===65535){c.push(0),F.push(0);break}if(R-(P=n[R].new)>=32768)for(c.push(0),F.push(2*(m.length+T-g)),a=G=R;R<=d?G<=d:G>=d;a=R<=d?++G:--G)m.push(n[a].new);else c.push(P-R),F.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*T+2*m.length),M.writeUInt16(0),M.writeUInt16(L),M.writeUInt16(S),M.writeUInt16(h),M.writeUInt16(E),se=0,D=f.length;se<D;se++)a=f[se],M.writeUInt16(a);for(M.writeUInt16(0),ie=0,Q=j.length;ie<Q;ie++)a=j[ie],M.writeUInt16(a);for(ue=0,z=c.length;ue<z;ue++)l=c[ue],M.writeUInt16(l);for(je=0,J=F.length;je<J;je++)B=F[je],M.writeUInt16(B);for(ae=0,te=m.length;ae<te;ae++)x=m[ae],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:N+1}}},e}(),Tle=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new _q(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=_q.encode(r,n),(s=new Om).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),TWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),IWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),FWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],i=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;i=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),OWe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},DWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,l,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),l=new OWe(d,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),PWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),RWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],m.push(i.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Ile=[].slice,LWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,l,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new Om(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new UWe(c,d,h,u,f):new MWe(c,l,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,l,c,u;for(l=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(l.length),s&&(l=l.concat(s.encode(a)));return i.push(l.length),{table:l,offsets:i}},t}(),MWe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),UWe=function(){function e(t,r,n,a,s){var i,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Om(Ile.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),QWe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uf(t,Xd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,l=0;l<a.length;++l)if(a[l]=s,i<n.length&&n[i]==l){++i,a[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),HWe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,l,c;for(a={},i=0,l=t.length;i<l;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,l,c,u,d,f,h,m,g,x,v,y;for(a in n=Tle.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),m={0:0},y=n.charMap)m[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in m||(m[g]=h++);return d=function(w){var N,B;for(N in B={},w)B[w[N]]=N;return B}(m),f=Object.keys(d).sort(function(w,N){return w-N}),x=function(){var w,N,B;for(B=[],w=0,N=f.length;w<N;w++)l=f[w],B.push(d[l]);return B}(),s=this.font.glyf.encode(i,x,m),u=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Fle(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,l=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var Sq={},Hv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:Sq=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),l=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return Sq||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),kO=function(e,t){return kO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},kO(e,t)};function Ole(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Dle=function(e){Ole(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function VWe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function zWe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function wS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function Ple(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=Rle(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function Rle(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Lk(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Lle(e,t){var r=Lk(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function $We(e,t,r,n,a){var s={},i=1.3333333333333333,l=yI(t,function(N){return a.getComputedStyle(N).backgroundColor});l!=null&&(s.fillColor=l);var c=yI(t,function(N){return a.getComputedStyle(N).color});c!=null&&(s.textColor=c);var u=KWe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(s.lineWidth=m)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=yI(t,function(N){return a.getComputedStyle(N)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var v=parseInt(n.fontSize||"");isNaN(v)||(s.fontSize=v/i);var y=GWe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function GWe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function yI(e,t){var r=Mle(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Mle(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Mle(e.parentElement,t):r}function KWe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(l){return parseInt(l||"0")/n}),i=Lk(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function Ule(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),v=qWe(c,u,r,g,n,a);v&&(x==="thead"?d.push(v):x==="tfoot"?h.push(v):f.push(v))}return{head:d,body:f,foot:h}}function qWe(e,t,r,n,a,s){for(var i=new Dle(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=$We(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:WWe(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function WWe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function XWe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function oh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var l=arguments[i];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Qle(e,t){var r=new Hv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();XWe(a,n,t);var s=oh({},a,n,t),i;typeof window<"u"&&(i=window);var l=YWe(a,n,t),c=JWe(a,n,t),u=ZWe(r,s),d=tXe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:l,settings:u}}function YWe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=oh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(g){return g[c]||{}});n[c]=oh({},m[0],m[1],m[2])}},s=0,i=Object.keys(n);s<i.length;s++){var l=i[s];a(l)}return n}function JWe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var l=i[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function ZWe(e,t){var r,n,a,s,i,l,c,u,d,f,h,m,g=Lk(t.margin,40/e.scaleFactor()),x=(r=eXe(e,t.startY))!==null&&r!==void 0?r:g.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,N=t.theme||(w?"plain":"striped"),B=!!t.horizontalPageBreak,k=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:w,theme:N,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:v,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:B,horizontalPageBreakRepeat:k,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function eXe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function tXe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var l=Ule(e,t.html,r,i,t.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||rXe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function rXe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(i=(l==null?void 0:l.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var jO=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),nXe=function(e){Ole(t,e);function t(r,n,a,s,i,l){var c=e.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(jO),aXe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new nXe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new jO(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new jO(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Hle=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Dle&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var l=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+l;return u>a?u:a},0)},e}(),Vle=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=i.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Lk(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),sXe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function iXe(e,t){oXe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=BO(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=BO(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),cXe(t),uXe(t,e),lXe(t)}function oXe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Lle(e,t);t.allRows().forEach(function(s){for(var i=0,l=t.columns;i<l.length;i++){var c=l[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=wS(u.text,u.styles,e)+f;var h=wS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,l=t.columns;i<l.length;i++){var c=l[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function BO(e,t,r){for(var n=t,a=e.reduce(function(m,g){return m+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],l=i.wrappedWidth/a,c=n*l,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=BO(h,t,r))}return t}function lXe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,l=e.columns;i<l.length;i++){var c=l[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function cXe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(i-=1,i>1&&e.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function uXe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,l=e.columns;i<l.length;i++){var c=l[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=kq(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=kq(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function kq(e,t,r,n,a){return e.map(function(s){return dXe(s,t,r,n,a)})}function dXe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=wS(e,r,n))return e;for(;t<wS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function zle(e,t){var r=new Hv(e),n=AXe(t,r.scaleFactor()),a=new aXe(t,n);return iXe(r,a),r.applyStyles(r.userStyles),a}function AXe(e,t){var r=e.content,n=hXe(r.columns);if(r.head.length===0){var a=jq(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=jq(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:wI("head",r.head,n,i,s,t),body:wI("body",r.body,n,i,s,t),foot:wI("foot",r.foot,n,i,s,t)}}function wI(e,t,r,n,a,s){var i={},l=t.map(function(c,u){for(var d=0,f={},h=0,m=0,g=0,x=r;g<x.length;g++){var v=x[g];if(i[v.index]==null||i[v.index].left===0)if(m===0){var y=void 0;Array.isArray(c)?y=c[v.index-h-d]:y=c[v.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var N=mXe(e,v,u,a,n,s,w),B=new Vle(y,N,e);f[v.dataKey]=B,f[v.index]=B,m=B.colSpan-1,i[v.index]={left:B.rowSpan-1,times:m}}else m--,h++;else i[v.index].left--,m=i[v.index].times,d++}return new Hle(c,u,e,f)});return l}function jq(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=fXe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function fXe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function hXe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new sXe(a,t,r)})}function mXe(e,t,r,n,a,s,i){var l=zWe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=oh({},l.table,l[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?oh({},l.alternateRow,a.alternateRowStyles):{},m=VWe(s),g=oh({},m,u,h,f);return oh(g,i)}function pXe(e,t,r){var n;r===void 0&&(r={});var a=Lle(e,t),s=new Map,i=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(g){return g.dataKey===h||g.index===h});m&&!s.has(m.index)&&(s.set(m.index,!0),i.push(m.index),l.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),l.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:l,lastIndex:d-1}}function gXe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=pXe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function $le(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);l+=u}var d=new Hv(e);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Kle(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=oh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?xXe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Th(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var g=m===t.body.length-1;ES(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Th(d,t,h,s,t.columns)})),Ple(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function xXe(e,t,r,n){var a=gXe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Cw(e,t,r,n,u.columns,!0):Bq(e,t,n,u.columns),vXe(e,t,r,n,u.columns),EI(e,t,n,u.columns)});else for(var i=-1,l=a[0],c=function(){var u=i;if(l){e.applyStyles(e.userStyles);var d=l.columns;i>=0?Cw(e,t,r,n,d,!0):Bq(e,t,n,d),u=Tq(e,t,i+1,n,d),EI(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Cw(e,t,r,n,h.columns,!0),Tq(e,t,i+1,n,h.columns,f),EI(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function Bq(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Th(e,t,s,r,n)})}function vXe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var l=i===t.body.length-1;ES(e,t,s,l,r,n,a)})}function Tq(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),l=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=Gle(e,t,d,n);c.canEntireRowFit(f,a)&&(Th(e,t,c,n,a),l=r+u)}),l}function EI(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Th(e,t,s,r,n)})}function bXe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function yXe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,l=r.columns;i<l.length;i++){var c=l[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Vle(u.raw,u.styles,u.section);d=oh(d,u),d.text=[];var f=bXe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Hle(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,v=r.columns;x<v.length;x++){var c=v[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function wXe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,l=a-i;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function ES(e,t,r,n,a,s,i){var l=Gle(e,t,n,s);if(r.canEntireRowFit(l,i))Th(e,t,r,s,i);else if(wXe(e,r,l,t)){var c=yXe(r,l,t,e);Th(e,t,r,s,i),Cw(e,t,a,s,i),ES(e,t,c,n,a,s,i)}else Cw(e,t,a,s,i),ES(e,t,r,n,a,s,i)}function Th(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var l=i[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}EXe(e,c,n);var d=c.getTextPos();Fle(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function EXe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Rle(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),CXe(e,t,r,n.lineWidth))}function CXe(e,t,r,n){var a,s,i,l;n.top&&(a=r.x,s=r.y,i=r.x+t.width,l=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,l)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,l=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,l)),n.left&&(a=r.x,s=r.y,i=r.x,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,i,l)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,l=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,i,l));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function Gle(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Cw(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(l){return Th(e,t,l,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;Ple(e,t,r,n),Kle(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Th(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function Kle(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function NXe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Qle(this,n),s=zle(this,a);return $le(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Fle(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Hv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Hv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Hv(this),s=Ule(a,t,window,r,!1),i=s.head,l=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var CI;function pi(e,t){var r=Qle(e,t),n=zle(e,r);$le(e,n)}try{if(typeof window<"u"&&window){var Iq=window,Fq=Iq.jsPDF||((CI=Iq.jspdf)===null||CI===void 0?void 0:CI.jsPDF);Fq&&NXe(Fq)}}catch(e){console.error("Could not apply autoTable plugin",e)}const eM="evaluaciones_pruebas",tM="evaluaciones_rubricas_estaticas",rM="evaluaciones_rubricas_interactivas",_Xe="usuarios",Mk=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},SXe=e=>{const t=zt(vt(ft,eM),hr("fechaCreacion","desc"));return fr(t,n=>{e(n.docs.map(a=>Mk(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},kXe=async e=>{try{const{id:t,...r}=e,n=sr(ft,eM,t);await bi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},jXe=async e=>{try{await Ra(sr(ft,eM,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},BXe=e=>{const t=zt(vt(ft,tM),hr("fechaCreacion","desc"));return fr(t,n=>{e(n.docs.map(a=>Mk(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},TXe=async e=>{try{const{id:t,...r}=e,n=sr(ft,tM,t);await bi(n,{...r,fechaCreacion:ir.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},IXe=async e=>{try{await Ra(sr(ft,tM,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},FXe=e=>{const t=zt(vt(ft,rM));return fr(t,n=>{e(n.docs.map(a=>Mk(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},OXe=async e=>{try{const{id:t,...r}=e,n=sr(ft,rM,t);await bi(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},DXe=async e=>{try{return(await hn(vt(ft,rM),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},PXe=e=>{const t=zt(vt(ft,_Xe));return fr(t,n=>{e(n.docs.map(a=>Mk(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},RXe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],Oq={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},b5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},LXe=({open:e})=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):o.jsxs(o.Fragment,{children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),MXe=({item:e,index:t,showAnswers:r})=>{const n=_.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&o.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&o.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return o.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[o.jsx("div",{className:"w-5 h-5 border rounded-full"}),o.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&o.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&o.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[o.jsx("span",{children:"V ___ F ___"}),r&&o.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),o.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>o.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),o.jsx("div",{className:"space-y-2",children:n.map((a,s)=>o.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&o.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[o.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),o.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>o.jsxs("li",{children:[o.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&o.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[o.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return o.jsxs("div",{className:"pt-2",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&o.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),o.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((l,c)=>{const u=r&&c===i.respuestaCorrecta;return o.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[o.jsx("div",{className:"w-5 h-5 border rounded-full"}),o.jsxs("span",{children:[String.fromCharCode(65+c),") ",l]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return o.jsxs("div",{className:"pt-2",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&o.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),o.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},UXe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(null),[a,s]=_.useState(!1),[i,l]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState(!1),h={nombre:"",asignatura:ks[0],nivel:WQ[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[m,g]=_.useState(h);_.useEffect(()=>{const E=SXe(t);return()=>E()},[]);const x=E=>{const{name:S,value:T}=E.target;g(L=>({...L,[S]:T}))},v=E=>{g(S=>{const T={...S.tiposActividad};return T[E]?delete T[E]:T[E]=Oq[E][0],{...S,tiposActividad:T}})},y=(E,S)=>{g(T=>({...T,tiposActividad:{...T.tiposActividad,[E]:S}}))},w=E=>{g(S=>{const T=S.selectedNee.includes(E)?S.selectedNee.filter(L=>L!==E):[...S.selectedNee,E];return{...S,selectedNee:T}})},N=async E=>{if(E.preventDefault(),!m.nombre.trim()||!m.contenido.trim()||Object.keys(m.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const S=Object.entries(m.tiposActividad).map(([R,j])=>`- ${j} ítem(s) de tipo '${R}'`).join(`
`),T=m.isNee&&m.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${m.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",L=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${m.nombre}
            - Asignatura: ${m.asignatura}
            - Nivel: ${m.nivel}
            - Contenido a evaluar: "${m.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${S}
            - Nivel de Dificultad General: ${m.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${T}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{C1("Evaluación - Pruebas");const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=(await(await new Os(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(W);let K=0;G.actividades.forEach(X=>{X.items.forEach(D=>{K+=D.puntaje||0,D.tipo==="Comprensión de lectura"&&D.preguntas&&D.preguntas.forEach(Q=>{K+=Q.puntaje||0})})});const ee={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:m.nombre,asignatura:m.asignatura,nivel:m.nivel,contenidoOriginal:m.contenido,tiposActividadOriginal:m.tiposActividad,objetivo:G.objetivo,instruccionesGenerales:G.instruccionesGenerales,puntajeIdeal:K,actividades:G.actividades,dificultad:m.dificultad,...m.isNee&&{adaptacionNEE:m.selectedNee}};n(ee),f(!1)}catch(R){console.error(R),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},B=async()=>{if(r)try{await kXe(r),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},k=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await jXe(E),(r==null?void 0:r.id)===E&&n(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},F=async E=>{l(!0);const S=new vr("p","mm","a4"),T=20,L=S.internal.pageSize.getHeight(),R=S.internal.pageSize.getWidth(),j=R-T*2;let P=T;const M=W=>{W.setFillColor(230,230,230),W.rect(0,0,R,25,"F"),W.setFontSize(9),W.setTextColor(0,0,0),W.text("LICEO INDUSTRIAL DE RECOLETA",T,15,{align:"left"}),W.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",R-T,15,{align:"right"})};M(S),P=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(E.nombre,R/2,P,{align:"center"}),P+=10,pi(S,{startY:P,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:W=>{M(S)}}),P=S.lastAutoTable.finalY+10;const Z=W=>{P+W>L-T&&(S.addPage(),M(S),P=T+15,S.setTextColor(0,0,0))},V=(W,G)=>{S.setFont("helvetica",G.isBold?"bold":"normal"),S.setFontSize(G.fontSize);const K=Array.isArray(W)?W.join(`
`):W;return S.getTextDimensions(K,{maxWidth:G.width}).h};for(const W of E.actividades){let G=V(W.titulo,{fontSize:12,width:j,isBold:!0})+V(W.instrucciones,{fontSize:10,width:j})+12;Z(G),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(W.titulo,T,P),P+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const K=S.splitTextToSize(W.instrucciones,j);S.text(K,T,P),P+=K.length*(10*.35*1.15)+4;for(const[ee,X]of W.items.entries()){let D=0;const Q=`${ee+1}. ${X.pregunta} (${X.puntaje} pts)`;switch(D+=V(Q,{fontSize:10,width:j,isBold:!0}),X.tipo){case"Selección múltiple":X.opciones.forEach(te=>{D+=V(te,{fontSize:10,width:j-5})+3}),D+=7;break;case"Verdadero o Falso":D+=10;break;case"Desarrollo":D+=30;break;case"Términos pareados":D+=X.pares.length*12+20;break;case"Comprensión de lectura":const J=X;D+=V(J.texto,{fontSize:10,width:j-10})+10,J.preguntas.forEach(te=>{const se=`${te.pregunta} (${te.puntaje} pts)`;D+=V(se,{fontSize:10,width:j-5,isBold:!0}),te.tipo==="Selección múltiple"?(te.opciones.forEach(ie=>{D+=V(ie,{fontSize:10,width:j-10})+3}),D+=7):te.tipo==="Desarrollo"&&(D+=30),D+=5}),D+=15;break}Z(D),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const z=S.splitTextToSize(Q,j);if(S.text(z,T,P),P+=z.length*5+4,S.setFont("helvetica","normal"),X.tipo==="Selección múltiple")X.opciones.forEach((J,te)=>{S.text(`${String.fromCharCode(65+te)}) ${J}`,T+5,P),P+=7});else if(X.tipo==="Verdadero o Falso")S.text("V ______    F ______",T+5,P),P+=10;else if(X.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(T,P,j,25,"FD"),P+=30;else if(X.tipo==="Términos pareados"){const J=[...X.pares.map(se=>se.definicion)].sort(()=>Math.random()-.5),te=X.pares.map((se,ie)=>[`${ie+1}. ${se.concepto}`,`(   ) ${J[ie]}`]);pi(S,{startY:P,head:[["Columna A: Concepto","Columna B: Definición"]],body:te,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:se=>M(S)}),P=S.lastAutoTable.finalY+10}else if(X.tipo==="Comprensión de lectura"){const J=X;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const te=S.splitTextToSize(J.texto,j-10),se=te.length*(10*.35*1.15)+8;S.rect(T,P,j,se,"FD"),P+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(te,T+5,P),P+=se;for(const[ie,le]of J.preguntas.entries()){const ue=`${ie+1}. ${le.pregunta} (${le.puntaje} pts)`;S.setFont("helvetica","bold");const je=S.splitTextToSize(ue,j-5);S.text(je,T+5,P),P+=je.length*5+4,S.setFont("helvetica","normal"),le.tipo==="Selección múltiple"?le.opciones.forEach((ae,Ne)=>{S.text(`${String.fromCharCode(65+Ne)}) ${ae}`,T+10,P),P+=7}):le.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(T+5,P,j-5,25,"FD"),P+=30)}}P+=5}}S.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),l(!1)};return r?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[o.jsx(LXe,{open:!d})," ",o.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),o.jsx("button",{onClick:B,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),o.jsxs("button",{onClick:()=>F(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":o.jsx(Hee,{})," PDF"]})]})]}),o.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[o.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),o.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),o.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),o.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),o.jsxs("p",{className:"text-right",children:[o.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[o.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&o.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>o.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[o.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),o.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),o.jsx("div",{className:"space-y-6",children:E.items.map((S,T)=>o.jsx(MXe,{item:S,index:T,showAnswers:d},S.id))})]},E.id))]})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),o.jsxs("form",{onSubmit:N,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",name:"nombre",value:m.nombre,onChange:x,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),o.jsx("div",{}),o.jsx("select",{name:"asignatura",value:m.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ks.map(E=>o.jsx("option",{children:E},E))}),o.jsx("select",{name:"nivel",value:m.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:WQ.map(E=>o.jsx("option",{children:E},E))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),o.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,S)=>o.jsx("button",{type:"button",onClick:()=>g(T=>({...T,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${m.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m.isNee,onChange:E=>g(S=>({...S,isNee:E.target.checked,selectedNee:E.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),m.isNee&&o.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:m_.map(E=>o.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),o.jsx("textarea",{name:"contenido",value:m.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("div",{className:"space-y-3",children:RXe.map(E=>o.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:!!m.tiposActividad[E],onChange:()=>v(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),m.tiposActividad[E]&&o.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),Oq[E].map(S=>o.jsx("button",{type:"button",onClick:()=>y(E,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${m.tiposActividad[E]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},E))}),c&&o.jsx("p",{className:"text-red-500 text-sm",children:c}),o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),o.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),o.jsx("button",{onClick:()=>k(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},QXe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=_.useState(null),[i,l]=_.useState("list"),[c,u]=_.useState(!1),[d,f]=_.useState(""),h=async(k,F)=>{if(!k.trim()||!F.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${k}" con el propósito de "${F}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{C1("Evaluación - Rúbricas");const T="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Os(T).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),Z=JSON.parse(M),V={id:crypto.randomUUID(),titulo:k,descripcion:F,fechaCreacion:new Date().toISOString(),dimensiones:Z.map(W=>({id:crypto.randomUUID(),nombre:W.dimension,niveles:{insuficiente:W.insuficiente,suficiente:W.suficiente,competente:W.competente,avanzado:W.avanzado}}))};s(V)}catch(T){console.error(T),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},m=async()=>{if(!d.trim()||!a)return;const k=crypto.randomUUID(),F={id:k,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(T=>T?{...T,dimensiones:[...T.dimensiones,F]}:null),f("");const E=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(T=>T.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{C1("Evaluación - Rúbricas (Añadir Dimensión)");const T="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new Os(T).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),Z=JSON.parse(M);s(V=>V?{...V,dimensiones:V.dimensiones.map(W=>W.id===k?{...W,niveles:Z,isLoading:!1}:W)}:null)}catch(T){console.error("Error generating dimension descriptors:",T),alert("No se pudieron generar los descriptores."),s(L=>L?{...L,dimensiones:L.dimensiones.filter(R=>R.id!==k)}:null)}},g=()=>{if(!a)return;e.some(F=>F.id===a.id)?t(a):n(a),l("list"),s(null)},x=k=>{s(k),l("form")},v=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),l("form")},y=(k,F,E)=>{a&&s(S=>S?{...S,dimensiones:S.dimensiones.map(T=>T.id!==k?T:F==="nombre"?{...T,nombre:E}:{...T,niveles:{...T.niveles,[F]:E}})}:null)},w=(k,F)=>{s(E=>E?{...E,[k]:F}:null)},N=k=>{a&&s(F=>F?{...F,dimensiones:F.dimensiones.filter(E=>E.id!==k)}:null)},B=()=>{if(!a)return null;const k="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",F=`${k} resize-none text-sm`;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),o.jsx("button",{onClick:()=>l("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),o.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${k} mt-1`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),o.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${k} mt-1`})]})]}),a.dimensiones.length===0&&o.jsx("div",{className:"text-center py-4",children:o.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:o.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>o.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 w-1/5",children:o.jsx("textarea",{value:E.nombre,onChange:S=>y(E.id,"nombre",S.target.value),rows:4,className:F})}),Object.keys(E.niveles).map(S=>o.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?o.jsx("div",{className:"flex justify-center items-center h-full",children:o.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):o.jsx("textarea",{value:E.niveles[S],onChange:T=>y(E.id,S,T.target.value),rows:4,className:F})},S)),o.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:o.jsx("button",{onClick:()=>N(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),o.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),o.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${k} mt-1`})]}),o.jsx("button",{onClick:m,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),o.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:o.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),o.jsx("button",{onClick:v,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(k=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.titulo}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:k.descripcion})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsx("button",{onClick:()=>x(k),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),o.jsx("button",{onClick:()=>r(k.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},k.id)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):B()},HXe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=_.useState([]),[a,s]=_.useState(null),[i,l]=_.useState(null),[c,u]=_.useState({rubricaEstaticaId:"",curso:""}),[d,f]=_.useState(null);_.useEffect(()=>{const w=FXe(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const N=t.find(k=>k.id===c.rubricaEstaticaId);if(!N||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const B={nombre:N.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:N.id,resultados:{}};try{await DXe(B),u({rubricaEstaticaId:"",curso:""})}catch(k){console.error(k),alert("No se pudo crear la evaluación con rúbrica.")}},m=w=>{s(w),l(JSON.parse(JSON.stringify(w)))},g=(w,N,B)=>{i&&l(k=>{if(!k)return null;const F=JSON.parse(JSON.stringify(k));return F.resultados[w]||(F.resultados[w]={puntajes:{},feedback:""}),F.resultados[w].puntajes[N]=B,F})},x=async()=>{if(i)try{await OXe(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},v=_.useCallback(w=>{const N=i,B=t.find(L=>L.id===(N==null?void 0:N.rubricaEstaticaId));if(!N||!B)return{score:0,maxScore:0,grade:"N/A"};const k=B.dimensiones.length*4,F=N.resultados[w];if(!F)return{score:0,maxScore:k,grade:"1.0"};const E=Object.values(F.puntajes).reduce((L,R)=>L+R,0),S=1+6*(E/k),T=k>0?S.toFixed(1):"1.0";return{score:E,maxScore:k,grade:T}},[i,t]),y=async w=>{if(!i)return;const N=t.find(E=>E.id===i.rubricaEstaticaId),B=i.resultados[w];if(!N||!B||Object.keys(B.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const F=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${N.dimensiones.map(E=>`${E.nombre}: ${B.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${N.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{C1("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=(await(await new Os(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text();l(P=>{if(!P)return null;const M=JSON.parse(JSON.stringify(P));return M.resultados[w].feedback=j.replace(/(\*\*|\*)/g,""),M})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const w=t.find(B=>B.id===a.rubricaEstaticaId),N=e.filter(B=>B.profile===Yt.ESTUDIANTE&&b5(B.curso||"")===a.curso).map(B=>B.nombreCompleto).sort();return w?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),o.jsx("p",{className:"text-slate-500",children:a.curso})]}),o.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-collapse",children:[o.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(B=>o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:B.nombre},B.id)),o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),o.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),o.jsx("tbody",{children:N.map(B=>{var S;const{score:k,maxScore:F,grade:E}=v(B);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:B}),w.dimensiones.map(T=>o.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:o.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(L=>{var R;return o.jsx("button",{onClick:()=>g(B,T.id,L),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((R=i.resultados[B])==null?void 0:R.puntajes[T.id])===L?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:L},L)})})},T.id)),o.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[k,"/",F]}),o.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),o.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:o.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[o.jsx("p",{className:"text-xs w-full",children:((S=i.resultados[B])==null?void 0:S.feedback)||"Sin generar"}),o.jsx("button",{onClick:()=>y(B),disabled:d===B,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===B?"...":"Generar IA"})]})})]},B)})})]})}),o.jsx("div",{className:"mt-6 flex justify-end",children:o.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):o.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",o.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),o.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[o.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(w=>o.jsx("option",{value:w.id,children:w.titulo},w.id))]}),o.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un Curso"}),Ns.map(w=>o.jsx("option",{value:w,children:w},w))]}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),o.jsx("div",{className:"space-y-2",children:r.map(w=>o.jsxs("button",{onClick:()=>m(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[o.jsx("p",{className:"font-semibold",children:w.nombre}),o.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},VXe=({allUsers:e})=>{const[t,r]=_.useState(""),n=_.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Yt.ESTUDIANTE&&s.curso).map(s=>b5(s.curso)))).sort(),[e]),a=_.useMemo(()=>{const s=e.filter(i=>i.profile===Yt.ESTUDIANTE);return t?s.filter(i=>b5(i.curso||"")===t).sort((i,l)=>i.nombreCompleto.localeCompare(l.nombreCompleto)):s.sort((i,l)=>i.nombreCompleto.localeCompare(l.nombreCompleto))},[e,t]);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",o.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),o.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>o.jsx("option",{value:s,children:s},s))]})]}),o.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:b5(s.curso||"")}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},zXe=()=>{const[e,t]=_.useState("pruebas"),[r,n]=_.useState([]),[a,s]=_.useState([]),[i,l]=_.useState(!0);_.useEffect(()=>{l(!0);const f=PXe(n),h=BXe(m=>{s(m),l(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await TXe(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await IXe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>o.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?o.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),o.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),o.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),o.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),o.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&o.jsx(UXe,{}),e==="rubricas"&&o.jsx(QXe,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&o.jsx(HXe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&o.jsx(VXe,{allUsers:r})]})]})},$Xe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=vt(wr,c),d=await Tn(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(m=>{const g=m.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=vt(wr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=zt(c,Br("timestamp",">=",u.toISOString()),hr("timestamp","desc")),f=await Tn(d),h={};f.docs.forEach(m=>{const g=m.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([m],[g])=>new Date(m).getTime()-new Date(g).getTime()).forEach(([m,g])=>{i.push({label:m,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const l=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:l,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},Dq=500,Lx=({title:e,value:t,description:r,alert:n})=>o.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),o.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),NI=({title:e,data:t,colorClass:r})=>{const n=_.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),o.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),o.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:o.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},GXe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),[a,s]=_.useState(null),[i,l]=_.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});_.useEffect(()=>{n(!0);const f=Mqe(g=>{t(g),n(!1)}),h=async()=>{try{const g=await $Xe();l(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const m=setInterval(h,300*1e3);return()=>{f(),clearInterval(m)}},[]);const{stats:c,userStats:u,moduleStats:d}=_.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),m=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},v={},y={};e.forEach(B=>{const k=new Date(B.timestamp).getTime();k>=h&&x.today++,k>=m&&x.week++,k>=g&&x.month++;const F=B.userEmail||"Desconocido";v[F]||(v[F]={email:F,today:0,month:0,total:0}),v[F].total++,k>=h&&v[F].today++,k>=g&&v[F].month++,y[B.module]=(y[B.module]||0)+1});const w=Object.values(v).sort((B,k)=>k.total-B.total),N=Object.entries(y).map(([B,k])=>({label:B,value:k})).sort((B,k)=>k.value-B.value);return{stats:x,userStats:w,moduleStats:N}},[e]);return o.jsxs("div",{className:"space-y-8",children:[a&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&o.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsx(Lx,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${Dq}`,alert:c.today>Dq}),o.jsx(Lx,{title:"Llamadas esta Semana",value:r?"--":c.week}),o.jsx(Lx,{title:"Llamadas este Mes",value:r?"--":c.month})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[o.jsx(NI,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),o.jsx("div",{className:"overflow-x-auto max-h-96",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),o.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),o.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),o.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Lx,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),o.jsx(Lx,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),o.jsx(Lx,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[o.jsx(NI,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),o.jsx(NI,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},Pq=vt(wr,"usuarios");async function qle(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",Pq);const e=await Tn(Pq);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const Rq=Object.values(Yt),_I=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",KXe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!1),[a,s]=_.useState("Usuarios"),[i,l]=_.useState({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=_.useState(null),[d,f]=_.useState(""),[h,m]=_.useState(""),[g,x]=_.useState(""),[v,y]=_.useState(null),[w,N]=_.useState(null),[B,k]=_.useState(null),F=_.useCallback(async()=>{n(!0);try{const G=await qle();t(G)}catch(G){console.error("Error al cargar usuarios",G),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);_.useEffect(()=>{F()},[F]);const E=_.useCallback(G=>{const{name:K,value:ee}=G.target;l(X=>({...X,[K]:ee,curso:K==="profile"&&ee!==Yt.ESTUDIANTE?"":X.curso,cursos:K==="profile"&&ee!==Yt.PROFESORADO?[]:X.cursos,asignaturas:K==="profile"&&ee!==Yt.PROFESORADO?[]:X.asignaturas}))},[]),S=_.useCallback((G,K)=>{l(ee=>{const X=ee[G]||[],D=X.includes(K)?X.filter(Q=>Q!==K):[...X,K];return{...ee,[G]:D}})},[]),T=_.useCallback(()=>{l({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),L=_.useCallback(async G=>{G.preventDefault(),y(null);const{nombreCompleto:K,email:ee,profile:X,curso:D,password:Q}=i;if(!K.trim()||!ee.trim()){y("Nombre Completo y Email son obligatorios.");return}if(X===Yt.ESTUDIANTE&&!D){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(Q!=null&&Q.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const z=sv();try{if(c){const J=R0(z,"updateUser"),te={...i,password:(Q==null?void 0:Q.trim())||void 0,curso:X===Yt.ESTUDIANTE?_I(D||""):void 0};await J(te)}else{const J=R0(z,"createUser"),te={...i,curso:X===Yt.ESTUDIANTE?_I(D||""):void 0};await J(te)}await F(),T()}catch(J){console.error("Error al guardar usuario:",J),y(J.message||"Error al guardar el usuario.")}},[i,c,F,T]),R=_.useCallback(G=>{u(G.email),l({nombreCompleto:G.nombreCompleto,email:G.email,rut:G.rut||"",profile:G.profile,password:"",curso:G.curso||"",cursos:G.cursos||[],asignaturas:G.asignaturas||[]}),setTimeout(()=>{const K=document.querySelector("form");K&&K.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),j=_.useCallback(async G=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${G}? Esta acción es irreversible.`))try{const K=sv();await R0(K,"deleteUser")({email:G}),await F()}catch(K){console.error("Error al eliminar usuario:",K),y(K.message||"No se pudo borrar el usuario.")}},[F]),P=async G=>{var Q;const K=(Q=G.target.files)==null?void 0:Q[0];if(!K)return;N({message:"Procesando archivo...",isError:!1});const ee=sv(),X=R0(ee,"createUser"),D=new FileReader;D.onload=async z=>{var J;try{const te=new Uint8Array((J=z.target)==null?void 0:J.result),se=c1(te,{type:"array"}),ie=se.Sheets[se.SheetNames[0]],le=Ti.sheet_to_json(ie);if(le.length===0){N({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=le.map(_e=>{const he=_e.Nombre||_e.nombre,Be=_e.Correo||_e.correo||_e.Email||_e.email,Le=_e.Curso||_e.curso,We=_e.RUT||_e.rut;return!he||!Be||!Le?Promise.resolve({email:Be||"Sin email",error:"Datos incompletos"}):X({nombreCompleto:String(he).trim(),email:String(Be).trim(),profile:Yt.ESTUDIANTE,curso:_I(String(Le).trim()),rut:We?String(We).trim():"",password:"recoleta"}).catch(xe=>({email:Be,error:xe.message}))}),je=await Promise.all(ue),ae=je.filter(_e=>!_e.error).length,Ne=je.filter(_e=>_e.error);let ke=`Carga completada. ${ae} estudiantes agregados.`;Ne.length>0&&(ke+=` ${Ne.length} fallaron.`,console.error("Errores en carga masiva:",Ne)),N({message:ke,isError:Ne.length>0}),await F()}catch(te){N({message:`Error: ${te.message}`,isError:!0})}},D.readAsArrayBuffer(K),G.target.value=""},M=async G=>{var Q;const K=(Q=G.target.files)==null?void 0:Q[0];if(!K)return;k({message:"Procesando archivo...",isError:!1});const ee=sv(),X=R0(ee,"createUser"),D=new FileReader;D.onload=async z=>{var J;try{const te=new Uint8Array((J=z.target)==null?void 0:J.result),se=c1(te,{type:"array"}),ie=se.Sheets[se.SheetNames[0]],le=Ti.sheet_to_json(ie);if(le.length===0){k({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ue=le.map(_e=>{const he=_e.Nombre||_e.nombre,Be=_e.Correo||_e.correo||_e.Email||_e.email,Le=_e.Perfil||_e.perfil||_e.Profile||_e.profile,We=_e.RUT||_e.rut;return!he||!Be||!Le?Promise.resolve({email:Be||"Sin email",error:"Datos incompletos"}):X({nombreCompleto:String(he).trim(),email:String(Be).trim(),profile:Le,rut:We?String(We).trim():"",password:"recoleta"}).catch(xe=>({email:Be,error:xe.message}))}),je=await Promise.all(ue),ae=je.filter(_e=>!_e.error).length,Ne=je.filter(_e=>_e.error);let ke=`Carga completada. ${ae} usuarios agregados.`;Ne.length>0&&(ke+=` ${Ne.length} fallaron.`,console.error("Errores en carga masiva:",Ne)),k({message:ke,isError:Ne.length>0}),await F()}catch(te){k({message:`Error: ${te.message}`,isError:!0})}},D.readAsArrayBuffer(K),G.target.value=""},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=_.useMemo(()=>Array.from(new Set(e.filter(G=>G.profile===Yt.ESTUDIANTE&&G.curso).map(G=>G.curso))).sort(),[e]),W=_.useMemo(()=>e.filter(G=>(d===""||G.nombreCompleto.toLowerCase().includes(d.toLowerCase())||G.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||G.profile===h)&&(g===""||G.curso===g)),[e,d,h,g]);return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),o.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),o.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&o.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),o.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),B&&o.jsx("p",{className:`text-sm mt-2 ${B.isError?"text-red-600":"text-green-600"}`,children:B.message})]})]})]}),o.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),o.jsxs("form",{onSubmit:L,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),o.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:Z,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),o.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:Z,required:!0,readOnly:!!c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),o.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:Z})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),o.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:Z})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),o.jsx("select",{name:"profile",value:i.profile,onChange:E,className:Z,required:!0,children:Rq.map(G=>o.jsx("option",{value:G,children:G},G))})]}),i.profile===Yt.ESTUDIANTE&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),o.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:Z,required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(G=>o.jsx("option",{value:G,children:G},G))]})]})]}),i.profile===Yt.PROFESORADO&&o.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[o.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[o.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ns.map(G=>{var K;return o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[o.jsx("input",{type:"checkbox",checked:((K=i.cursos)==null?void 0:K.includes(G))||!1,onChange:()=>S("cursos",G),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),i.profile===Yt.PROFESORADO&&o.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[o.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[o.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ks.map(G=>{var K;return o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[o.jsx("input",{type:"checkbox",checked:((K=i.asignaturas)==null?void 0:K.includes(G))||!1,onChange:()=>S("asignaturas",G),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),o.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),v&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:v}),o.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&o.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const G=sv(),ee=await R0(G,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",ee),y("✅ Custom claim agregado exitosamente")}catch(G){console.error("❌ Error al agregar custom claim:",G),y(`Error: ${G.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),o.jsx("button",{type:"button",onClick:async()=>{var G,K,ee,X,D;try{const{auth:Q}=await rc(async()=>{const{auth:te}=await Promise.resolve().then(()=>Uee);return{auth:te}},void 0);console.log("🔍 Usuario actual:",(G=Q.currentUser)==null?void 0:G.email);const z=await((K=Q.currentUser)==null?void 0:K.getIdToken(!0));console.log("🔑 Token refreshed:",!!z);const J=await((ee=Q.currentUser)==null?void 0:ee.getIdTokenResult());console.log("📋 Claims completos:",J==null?void 0:J.claims),console.log("👤 Profile claim:",(X=J==null?void 0:J.claims)==null?void 0:X.profile),((D=J==null?void 0:J.claims)==null?void 0:D.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(J==null?void 0:J.claims)}`)}catch(Q){console.error("❌ Error verificando token:",Q),y(`Error verificando token: ${Q.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:G=>f(G.target.value),className:Z})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:G=>m(G.target.value),className:Z,children:[o.jsx("option",{value:"",children:"Todos los perfiles"}),Rq.map(G=>o.jsx("option",{value:G,children:G},G))]})}),o.jsx("div",{children:o.jsxs("select",{value:g,onChange:G=>x(G.target.value),className:Z,children:[o.jsx("option",{value:"",children:"Todos los cursos"}),V.map(G=>o.jsx("option",{value:G,children:G},G))]})})]}),r?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(G=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:G.nombreCompleto}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:G.email}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.profile===Yt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":G.profile===Yt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:G.profile})}),o.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[G.profile===Yt.ESTUDIANTE&&o.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:G.curso||"Sin curso"}),G.profile===Yt.PROFESORADO&&o.jsxs("div",{className:"space-y-1",children:[G.cursos&&G.cursos.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.cursos.slice(0,3).map(K=>o.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:K},K)),G.cursos.length>3&&o.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.cursos.length-3]})]})]}),G.asignaturas&&G.asignaturas.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),o.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.asignaturas.slice(0,2).map(K=>o.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:K},K)),G.asignaturas.length>2&&o.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.asignaturas.length-2]})]})]}),(!G.cursos||G.cursos.length===0)&&(!G.asignaturas||G.asignaturas.length===0)&&o.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),G.profile!==Yt.ESTUDIANTE&&G.profile!==Yt.PROFESORADO&&o.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[o.jsx("button",{onClick:()=>R(G),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),o.jsx("button",{onClick:()=>j(G.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.email))})]}),W.length===0&&o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&o.jsx(GXe,{})]})},N1="seguimiento_dual_records",qXe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},WXe=e=>{const t=zt(vt(ft,N1),hr("nombreEstudiante","asc"));return fr(t,n=>{const a=n.docs.map(s=>qXe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},CS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=ir.fromDate(new Date(t[n]+"T00:00:00")))}),t},XXe=async e=>{try{const t=CS(e);return(await hn(vt(ft,N1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},Lq=async(e,t)=>{try{const r=sr(ft,N1,e),n=CS(t);await bi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},YXe=async e=>{try{const t=sr(ft,N1,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},JXe=async e=>{const t=Lg(ft),r=vt(ft,N1);let n=0,a=0;for(const s of e){const i=zt(r,Br("rutEstudiante","==",s.rutEstudiante)),l=await Tn(i);if(l.empty){const c=sr(r);t.set(c,CS(s)),a++}else{const c=l.docs[0].id,u=sr(ft,N1,c);t.set(u,CS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},ZXe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},eYe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},tYe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},rYe=({record:e,onSave:t,onClose:r})=>{const[n,a]=_.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(m=>({...m,[u]:f==="checkbox"?h:d}))},l=()=>{t(n)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),o.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),o.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),o.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]})]})]}),o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),o.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),o.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]})]})]}),o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),o.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),o.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[o.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),o.jsx("span",{children:"Realizada"})]})]})]}),o.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[o.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),o.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),o.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),o.jsx("button",{type:"button",onClick:l,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},nYe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState(!0),a=_.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:qp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:eB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=_.useState(a),[l,c]=_.useState(null),[u,d]=_.useState(""),[f,h]=_.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[m,g]=_.useState(null),[x,v]=_.useState(null),[y,w]=_.useState(!1),[N,B]=_.useState(null);_.useEffect(()=>{n(!0);const G=WXe(K=>{t(K),n(!1)});return()=>G()},[]);const k=_.useCallback(G=>{const{name:K,value:ee}=G.target;i(X=>({...X,[K]:ee}))},[]),F=_.useCallback(G=>{const{name:K,value:ee}=G.target;h(X=>({...X,[K]:ee}))},[]),E=_.useCallback(()=>{i(a),c(null),g(null)},[a]),S=async G=>{G.preventDefault(),g(null);const ee=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(X=>{var D;return!((D=s[X])!=null&&D.trim())});if(ee){g(`El campo '${ee}' es obligatorio.`);return}try{l?await Lq(l,s):await XXe(s),E()}catch(X){console.error(X),g("No se pudo guardar el registro.")}},T=_.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),c(G.id),i(G)},[]),L=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await YXe(G)}catch(K){console.error(K),g("No se pudo eliminar el registro.")}},R=G=>{B(G),w(!0)},j=()=>{B(null),w(!1)},P=async G=>{try{await Lq(G.id,G),j()}catch(K){console.error(K),alert("No se pudieron guardar los cambios de supervisión.")}},M=()=>{const G=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],K=Ti.aoa_to_sheet([G]),ee=Ti.book_new();Ti.book_append_sheet(ee,K,"Plantilla"),tE(ee,"Plantilla_Seguimiento_Dual.xlsx")},Z=G=>{var X;const K=(X=G.target.files)==null?void 0:X[0];if(!K)return;v({message:"Procesando archivo...",isError:!1});const ee=new FileReader;ee.onload=async D=>{var Q;try{const z=new Uint8Array((Q=D.target)==null?void 0:Q.result),J=c1(z,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),te=J.SheetNames[0],se=J.Sheets[te],ie=Ti.sheet_to_json(se,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo está vacío.");const le={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ue=Object.keys(ie[0]).map(ke=>ke.trim().toLowerCase()),ae=["nombre","rut","curso 2025","empresa","estado"].find(ke=>!ue.includes(ke));if(ae)throw new Error(`Falta la columna requerida: '${ae}'`);const Ne=ie.map((ke,_e)=>{try{const he={};for(const Be in ke){const Le=le[Be.trim().toLowerCase()];if(Le){let We=ke[Be];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Le)?(We=eYe(We),We&&(he[Le]=We)):Le.includes("realizada")?he[Le]=tYe(We):We!=null&&We!==""&&(he[Le]=String(We).trim())}}return!he.nombreEstudiante||!he.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):he}catch(he){return console.error(`Error procesando fila ${_e+2}:`,he),null}}).filter(ke=>ke!==null);if(console.log("Registros procesados:",Ne),Ne.length>0){const{updated:ke,created:_e}=await JXe(Ne);v({message:`Carga exitosa. ${_e} registros creados, ${ke} actualizados.`,isError:!1})}else v({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(z){console.error("Error completo:",z),v({message:`Error al procesar el archivo: ${z.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},ee.readAsArrayBuffer(K)},V="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=_.useMemo(()=>e.filter(G=>(u===""||G.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||G.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||G.rutEstudiante.includes(u))&&(f.curso===""||G.curso===f.curso)&&(f.empresa===""||G.nombreEmpresa===f.empresa)&&(f.estado===""||G.estado===f.estado)&&(f.comuna===""||G.comuna===f.comuna)&&(f.profesor===""||G.profesorTutorEmpresa===f.profesor)).sort((G,K)=>G.nombreEstudiante.localeCompare(K.nombreEstudiante)),[e,u,f]);return _.useMemo(()=>{const G=new Set,K=new Set;return e.forEach(ee=>{ee.nombreEmpresa&&G.add(ee.nombreEmpresa),ee.comuna&&K.add(ee.comuna)}),{empresas:Array.from(G).sort(),comunas:Array.from(K).sort()}},[e]),r?o.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:l?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),o.jsxs("form",{onSubmit:S,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),o.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:k,className:V,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),o.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:k,className:V,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),o.jsx("select",{name:"curso",value:s.curso,onChange:k,className:V,required:!0,children:qp.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),o.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:k,className:V,children:[o.jsx("option",{value:"",children:"Seleccione un profesor"}),nF.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),o.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:k,className:V,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),o.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:k,className:V})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),o.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:k,className:V})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),o.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:k,className:V})]}),o.jsxs("div",{className:"lg:col-span-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),o.jsx("select",{name:"estado",value:s.estado,onChange:k,className:V,children:eB.map(G=>o.jsx("option",{value:G,children:G},G))})]})]}),s.estado==="Desvinculado"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),o.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),o.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:k,className:`${V} border-red-300`})]})]}),m&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:m}),o.jsxs("div",{className:"flex justify-end items-center gap-4",children:[l&&o.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:l?"Actualizar":"Agregar"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[o.jsx("button",{onClick:M,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),o.jsx("input",{type:"file",onChange:Z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&o.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[o.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:G=>d(G.target.value),className:`${V} md:col-span-2 lg:col-span-1`}),o.jsxs("select",{name:"curso",value:f.curso,onChange:F,className:V,children:[o.jsx("option",{value:"",children:"Todos los Cursos"}),qp.map(G=>o.jsx("option",{children:G},G))]}),o.jsxs("select",{name:"estado",value:f.estado,onChange:F,className:V,children:[o.jsx("option",{value:"",children:"Todos los Estados"}),eB.map(G=>o.jsx("option",{children:G},G))]}),o.jsxs("select",{name:"profesor",value:f.profesor,onChange:F,className:V,children:[o.jsx("option",{value:"",children:"Todos los Profesores"}),nF.map(G=>o.jsx("option",{children:G},G))]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(G=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombreEstudiante}),o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:G.curso})]}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.nombreEmpresa}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.profesorTutorEmpresa}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ZXe[G.estado]}`,children:G.estado})}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[o.jsx("button",{onClick:()=>R(G),className:"text-blue-600 hover:underline",children:"Supervisión"}),o.jsx("button",{onClick:()=>T(G),className:"text-yellow-600 hover:underline",children:"Editar"}),o.jsx("button",{onClick:()=>L(G.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},G.id))})]})})]}),y&&N&&o.jsx(rYe,{record:N,onClose:j,onSave:P})]})},Wle="actividades_remotas",Xle="respuestas_actividades",Yle="pruebas_estandarizadas",aYe="usuarios",Jle=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},nM=e=>{const t=Jle(e);return t?t.toISOString():void 0},NS=e=>{const t=Jle(e);return t?t.toISOString().split("T")[0]:void 0},Zle=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:ir.fromDate(t)},ece=e=>ir.fromDate(new Date(e||new Date().toISOString())),sYe=e=>!!e&&/^data:/.test(e),y2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(y2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=y2(n))}),t},iYe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const l=typeof Buffer<"u"?Buffer:null;if(l)a=l.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let l=0;l<s;l++)i[l]=a.charCodeAt(l);return{bytes:i,contentType:r}},oYe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:nM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:NS(t.plazoEntrega)||NS(new Date)}},lYe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:nM(t.fechaCompletado)||new Date().toISOString()}},cYe=e=>{const t=e.data()||{};return{id:e.id,...t}},uYe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:nM(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:NS(t.plazoEntrega)||NS(new Date)}},dYe=e=>{const t=zt(vt(ft,Wle),hr("fechaCreacion","desc"));return fr(t,r=>e(r.docs.map(oYe)),r=>{console.error("subscribeToActividades error:",r),e([])})},AYe=(e,t)=>{const r=vt(ft,Xle),n=zt(r,hr("fechaCompletado","desc"));return fr(n,a=>e(a.docs.map(lYe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},fYe=e=>{const t=zt(vt(ft,aYe),hr("nombreCompleto","asc"));return fr(t,r=>e(r.docs.map(cYe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},hYe=e=>{const t=zt(vt(ft,Yle),hr("fechaCreacion","desc"));return fr(t,r=>e(r.docs.map(uYe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},mYe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=y2({...a,fechaCreacion:ece(r),plazoEntrega:Zle(n)});return(await hn(vt(ft,Wle),s)).id},pYe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=y2({...a,fechaCreacion:ece(r),plazoEntrega:Zle(n)});return(await hn(vt(ft,Yle),s)).id},gYe=async(e,t)=>{const r=y2(t);await cc(sr(ft,Xle,e),r)},xYe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},vYe=async(e,t,r)=>{const{bytes:n,contentType:a}=iYe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!=="—"?r:"general"}/${s}/${i}`,u=z2(Xee,c);await QP(u,n,{contentType:a});const d=await D4(u);return{nombre:t,url:d}},bYe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,l)=>{if(sYe(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${l}.bin`;return vYe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${l}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return mYe(a)},py=e=>e?new Date(e).toLocaleDateString("es-CL"):"",yYe=e=>e?new Date(e).toLocaleString("es-CL"):"",wYe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),tce=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},ui=(e,t)=>{if(t&&tce(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>ui(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},$l=(e,t,...r)=>{if(tce(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=ui(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ia=({content:e,context:t="unknown"})=>{try{const r=ui(e,`UltraSafeRenderer-${t}`);return o.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),o.jsx("span",{children:"[Error al mostrar contenido]"})}},SI={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},kI=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],EYe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState([]),[i,l]=_.useState([]),[c,u]=_.useState(null),[d,f]=_.useState(null),[h,m]=_.useState(!1),[g,x]=_.useState(!1),[v,y]=_.useState(!1),[w,N]=_.useState(!1),[B,k]=_.useState(!1),[F,E]=_.useState(!0),[S,T]=_.useState(null),[L,R]=_.useState(""),[j,P]=_.useState(null),[M,Z]=_.useState(null),[V,W]=_.useState([]),[G,K]=_.useState("carpetas"),[ee,X]=_.useState(null),[D,Q]=_.useState(null),[z,J]=_.useState([]),[te,se]=_.useState(""),ie={asignatura:ks[0],nivel:"—",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[le,ue]=_.useState(ie),je={asignatura:ks[0],nivel:"—",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ae,Ne]=_.useState(je);_.useEffect(()=>{E(!0);const Ze=dYe(t),mt=hYe(n),Je=AYe(s),xt=fYe(Et=>{l(Et),E(!1)});return()=>{Ze(),mt(),Je(),xt()}},[]);const ke=Ze=>{ue(mt=>({...mt,[Ze.target.name]:Ze.target.value}))},_e=Ze=>{Ne(mt=>({...mt,[Ze.target.name]:Ze.target.value}))},he=Ze=>{ue(mt=>({...mt,recursos:{...mt.recursos,[Ze.target.name]:Ze.target.value}}))},Be=Ze=>{Ze.target.files&&W(Array.from(Ze.target.files))},Le=Ze=>{ue(mt=>{const Je=mt.tipos.includes(Ze)?mt.tipos.filter(Et=>Et!==Ze):[...mt.tipos,Ze],xt={...mt.cantidadPreguntas};return Je.includes(Ze)?xt[Ze]||(xt[Ze]=SI[Ze][0]):delete xt[Ze],{...mt,tipos:Je,cantidadPreguntas:xt}})},We=(Ze,mt)=>{ue(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[Ze]:mt}}))},xe=(Ze,mt=!1)=>{(mt?Ne:ue)(xt=>{const Et=xt.estudiantesDestino||[],bt=Et.includes(Ze)?Et.filter(nr=>nr!==Ze):[...Et,Ze];return{...xt,estudiantesDestino:bt}})},Oe=()=>{const{tipos:Ze,contenido:mt,asignatura:Je,nivel:xt,cantidadPreguntas:Et}=le;let bt=`Eres un experto diseñador de actividades pedagógicas con énfasis en la Taxonomía de Bloom y metodologías activas de aprendizaje. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${mt}"
Asignatura: ${Je}
Nivel educativo: ${xt}

REQUISITOS PEDAGÓGICOS:
1. Asegura que las preguntas sean claras, concisas y libres de ambigüedades
2. Distribuye las preguntas según Taxonomía de Bloom: 20% conocimiento, 30% comprensión, 30% aplicación, 20% análisis/evaluación 
3. Evita preguntas demasiado simples o demasiado complejas para el nivel educativo
4. Incluye contextos reales y aplicaciones prácticas cuando sea posible
5. Para múltiple opción, todas las opciones deben ser plausibles (no incluir opciones obviamente incorrectas)
6. Las rúbricas de desarrollo deben incluir criterios específicos y niveles de desempeño claros
7. En comprensión lectora, genera textos originales y preguntas de distinta complejidad cognitiva

Genera los siguientes elementos:
- introduccion: breve y motivadora que contextualice el aprendizaje
- panelDidactico: Un objeto JSON con la siguiente estructura:
  {
    "titulo": "Título descriptivo del tema central",
    "subtitulos": [
      {
        "titulo": "Primer subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Segundo subtítulo",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      },
      {
        "titulo": "Tercer subtítulo (opcional)",
        "texto": "Explicación detallada (80-120 palabras) con ejemplos y definiciones"
      }
    ],
    "conceptosClave": [
      "Concepto 1: breve definición",
      "Concepto 2: breve definición",
      "Concepto 3: breve definición"
    ]
  }
  En total debe tener entre 300-500 palabras con contenido educativo detallado que explique los conceptos clave del tema, incluya ejemplos claros y conocimiento esencial que el estudiante necesita para responder las actividades.
- actividades: objeto con propiedades por tipo:
`;return Ze.forEach(nr=>{const xr=Et[nr]||SI[nr][0];switch(nr){case"Quiz":bt+=`- "Quiz": Array de ${xr} objetos { 
  pregunta: clara y contextualizada,
  opciones: array de 4 alternativas plausibles con opciones de distinta dificultad,
  respuestaCorrecta: la opción correcta (no ambigua),
  puntaje: 1 para cada pregunta
}
`;break;case"Comprensión de Lectura":bt+=`- "Comprensión de Lectura": Objeto { 
  texto: texto original de 200-300 palabras adaptado al nivel con información relevante,
  preguntas: Array de ${xr} objetos {
    pregunta: enfocadas en distintos niveles de comprensión (literal, inferencial y crítica),
    opciones: array de 4 alternativas plausibles sin pistas obvias,
    respuestaCorrecta: la opción correcta basada en el texto,
    puntaje: 1 para cada pregunta
  }
}
`;break;case"Términos Pareados":bt+=`- "Términos Pareados": Array de ${xr} objetos {
  concepto: término clave del contenido, claro y específico,
  definicion: explicación precisa y única que no sea ambigua
}
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${xr} objetos {
  pregunta: pregunta que fomente el pensamiento crítico y la aplicación de conocimientos,
  rubrica: criterios de evaluación detallados con niveles de desempeño específicos (sobresaliente, adecuado, en desarrollo, inicial)
}
`;break}}),bt+=`
EJEMPLOS DE ALTA CALIDAD POR TIPO:
`,Ze.includes("Quiz")&&(bt+=`
Quiz de ejemplo: {
  "pregunta": "En el contexto de la función fotosintética de las plantas, ¿qué ocurriría si una planta se expone a luz con longitudes de onda exclusivamente verdes?",
  "opciones": [
    "La planta aumentaría su tasa fotosintética debido a la mayor disponibilidad de luz",
    "La planta moriría inmediatamente por exceso de radiación",
    "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
    "No habría cambios en la fotosíntesis porque las plantas no dependen del espectro luminoso"
  ],
  "respuestaCorrecta": "La tasa fotosintética disminuiría significativamente ya que el pigmento clorofila refleja la luz verde",
  "puntaje": 1
}
`),Ze.includes("Comprensión de Lectura")&&(bt+=`
Comprensión de Lectura de ejemplo: {
  "texto": "La revolución industrial transformó profundamente las estructuras sociales y económicas de Europa durante el siglo XIX. El paso de una economía agraria y artesanal a una dominada por la industria y la manufactura mecanizada significó cambios sin precedentes en las condiciones laborales. Las jornadas extenuantes de 14-16 horas, el trabajo infantil y la falta de seguridad caracterizaron los primeros años de industrialización. No obstante, este periodo también representó un aumento en la producción de bienes, mejoras en el transporte y comunicaciones, y eventualmente, el surgimiento de una clase media con mayor acceso a productos manufacturados. Estos cambios sentaron las bases para movimientos obreros que, con el tiempo, lograron mejoras significativas en los derechos laborales que persisten hasta la actualidad.",
  "preguntas": [
    {
      "pregunta": "Según el texto, ¿cuál fue una consecuencia negativa inmediata de la revolución industrial?",
      "opciones": [
        "El desplome de los sistemas de transporte",
        "Las extenuantes jornadas laborales de 14-16 horas",
        "La disminución en la producción de bienes manufacturados",
        "La eliminación de la clase media europea"
      ],
      "respuestaCorrecta": "Las extenuantes jornadas laborales de 14-16 horas",
      "puntaje": 1
    }
  ]
}
`),bt},Re=()=>{const{contenido:Ze,objetivosAprendizaje:mt,asignatura:Je,nivel:xt}=ae;return`Eres un experto pedagogo especializado en evaluación educativa y diseño de pruebas estandarizadas tipo SIMCE.
Responde EXCLUSIVAMENTE con JSON válido según la estructura solicitada.

INFORMACIÓN CURRICULAR:
- Asignatura: ${Je}
- Nivel educativo: ${xt}
- Contenido principal: ${Ze}
- Objetivos de Aprendizaje: ${mt}

REQUISITOS PEDAGÓGICOS:
1. Genera preguntas equilibradas en dificultad: 25% básicas, 50% intermedias, 25% avanzadas
2. Usa contextos reales y significativos para los estudiantes
3. Distribuye las habilidades cognitivas de manera equilibrada según taxonomía SIMCE
4. Las preguntas deben evaluar aprendizajes significativos, no memorización de detalles irrelevantes
5. Los distractores (opciones incorrectas) deben ser plausibles y revelar concepciones erróneas comunes
6. Los textos deben ser originales, apropiados para el nivel, y con complejidad adecuada
7. Las preguntas deben evaluar distintos niveles de comprensión y aplicación

FORMATO REQUERIDO:
{
  "titulo": "Título descriptivo de la prueba",
  "instrucciones": "Instrucciones claras y detalladas para los estudiantes",
  "textos": [
    {
      "id": 1,
      "titulo": "Título representativo del texto",
      "contenido": "Texto original y apropiado de 250-350 palabras con complejidad adecuada al nivel",
      "tipo": "narrativo/informativo/argumentativo/poetico",
      "palabras": 300
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado claro que evalúe una habilidad específica",
      "opciones": ["Alternativa correcta", "Distractor plausible 1", "Distractor plausible 2", "Distractor plausible 3"],
      "respuestaCorrecta": "A",
      "habilidad": "Habilidad SIMCE específica que evalúa",
      "justificacion": "Explicación pedagógica de por qué es correcta y los errores conceptuales en los distractores",
      "textoId": 1
    }
  ]
}

REQUISITOS ESPECÍFICOS:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos (narrativo, informativo, argumentativo y/o poético) con temáticas complementarias":"2-3 textos informativos con contenido relevante para el objetivo de aprendizaje"}
- Exactamente 30 preguntas numeradas del 1 al 30
- 4 opciones por pregunta (A-D) con una única respuesta correcta
- Habilidades a evaluar según SIMCE: ${kI.join(", ")}
- Para preguntas basadas en textos: incluir el "textoId" correspondiente
- Sin comentarios, explicaciones ni marcas fuera de la estructura JSON

IMPORTANTE: Generar un instrumento de evaluación de ALTA CALIDAD que pueda ser usado directamente en un contexto escolar real.`};function $e(Ze,mt){if(Ze==="Desarrollo"&&Array.isArray(mt))return mt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return Et?{pregunta:$l(Et[1],`desarrollo-pregunta-${xt}`),rubrica:$l(Et[2],`desarrollo-rubrica-${xt}`)}:{pregunta:$l(Je,`desarrollo-pregunta-simple-${xt}`),rubrica:""}}if(Je&&typeof Je=="object"){const Et=$l(Je,`desarrollo-obj-pregunta-${xt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const nr=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;bt=ui(nr,`desarrollo-rubrica-${xt}`)}return{pregunta:Et,rubrica:bt}}return{pregunta:ui(Je,`desarrollo-fallback-${xt}`),rubrica:""}});if(Ze==="Términos Pareados"&&Array.isArray(mt))return mt.map((Je,xt)=>{if(typeof Je=="string"){const Et=Je.match(/^(.+?)[\s:-–]+(.+)$/);return Et?{id:xt,concepto:$l(Et[1],`pareados-concepto-${xt}`),definicion:$l(Et[2],`pareados-definicion-${xt}`)}:{id:xt,concepto:$l(Je,`pareados-concepto-simple-${xt}`),definicion:""}}return Je&&typeof Je=="object"?{id:xt,concepto:$l(Je,`pareados-obj-concepto-${xt}`,"concepto","termino"),definicion:$l(Je,`pareados-obj-definicion-${xt}`,"definicion","significado")}:{id:xt,concepto:ui(Je,`pareados-fallback-${xt}`),definicion:""}});if(Ze==="Comprensión de Lectura"){if(mt&&typeof mt=="object"&&!Array.isArray(mt)&&Array.isArray(mt.preguntas))return{texto:$l(mt,"comprension-texto","texto"),preguntas:mt.preguntas.map((Je,xt)=>({pregunta:$l(Je,`comprension-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>ui(Et,`comprension-opcion-${xt}`)):[],respuestaCorrecta:ui(Je.respuestaCorrecta,`comprension-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(mt)){const Je=mt.map((Et,bt)=>$l(Et,`comprension-bloque-${bt}`,"texto")).join(`

---

`),xt=mt.flatMap(Et=>Array.isArray(Et.preguntas)?Et.preguntas:[]);return{texto:Je,preguntas:xt.map((Et,bt)=>({pregunta:$l(Et,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(Et.opciones)?Et.opciones.map(nr=>ui(nr,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:ui(Et.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof Et.puntaje=="number"?Et.puntaje:1}))}}}return Ze==="Quiz"&&Array.isArray(mt)?mt.map((Je,xt)=>({pregunta:$l(Je,`quiz-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(Et=>ui(Et,`quiz-opcion-${xt}`)):[],respuestaCorrecta:ui(Je.respuestaCorrecta,`quiz-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):mt}const et=async Ze=>{var mt;if(Ze.preventDefault(),!le.contenido.trim()||le.tipos.length===0){T("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),T(null);try{const Je=await Promise.all(V.map(async Se=>({nombre:Se.name,url:await wYe(Se)}))),xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new Os(xt).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.7,topP:.9,topK:40,maxOutputTokens:8192}}),nr=Oe();let Zr=await(await(await bt.generateContent(nr)).response).text();Zr=Zr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const qr=Zr.match(/\{[\s\S]*\}/);if(!qr)throw new Error("La IA no devolvió JSON válido.");const me=JSON.parse(qr[0]),Ie={};for(const Se of le.tipos){const Fe=(mt=me.actividades)==null?void 0:mt[Se];Ie[Se]=$e(Se,Fe)}let Ce="";me.panelDidactico&&(Ce=typeof me.panelDidactico=="string"?me.panelDidactico:JSON.stringify(me.panelDidactico));const we={id:"",fechaCreacion:new Date().toISOString(),...le,recursos:{...le.recursos,archivos:Je},introduccion:ui(me.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",panelDidactico:Ce,generatedContent:Ie};P(we)}catch(Je){T(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},ct=async Ze=>{if(Ze.preventDefault(),!ae.contenido.trim()||!ae.objetivosAprendizaje.trim()){T("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),T(null);try{const mt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",xt=new Os(mt).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{temperature:.65,topP:.85,topK:30,maxOutputTokens:12288}}),Et=Re();let xr=await(await(await xt.generateContent(Et)).response).text();xr=xr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Wr=xr.match(/\{[\s\S]*\}/);if(!Wr)throw new Error("No se encontró JSON válido en la respuesta.");const Zr=Wr[0].replace(/,(\s*[}\]])/g,"$1"),qr=JSON.parse(Zr);if(!qr.preguntas||!Array.isArray(qr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const me=(qr.textos||[]).map((we,Se)=>({id:we.id||Se+1,titulo:ui(we.titulo,`texto-titulo-${Se}`)||`Texto ${Se+1}`,contenido:ui(we.contenido,`texto-contenido-${Se}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),Ie=qr.preguntas.slice(0,30).map((we,Se)=>({numero:we.numero||Se+1,pregunta:ui(we.pregunta,`pregunta-${Se}`)||`Pregunta ${Se+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((Fe,Ye)=>ui(Fe,`pregunta-opcion-${Se}-${Ye}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:kI.includes(we.habilidad)?we.habilidad:kI[0],justificacion:ui(we.justificacion,`justificacion-${Se}`)||"Justificación no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...ae,titulo:ui(qr.titulo,"prueba-titulo")||`Prueba ${ae.asignatura}`,instrucciones:ui(qr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:me,preguntas:Ie};Z(Ce)}catch(mt){T(`Error al generar la prueba: ${(mt==null?void 0:mt.message)||mt}`)}finally{y(!1)}},gt=async()=>{if(j)try{N(!0),await bYe(j),ue(ie),W([]),m(!1),P(null)}catch(Ze){console.error("Error al guardar la actividad con archivos:",Ze),T("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{N(!1)}},It=async()=>{if(M)try{N(!0);const Ze={...M,cursosDestino:M.cursosDestino||[],estudiantesDestino:M.estudiantesDestino||[],textos:M.textos||[],preguntas:M.preguntas.map(mt=>({...mt,textoId:mt.textoId||null}))};await pYe(Ze),Ne(je),x(!1),Z(null)}catch(Ze){console.error("Error al guardar la prueba:",Ze),T("No se pudo guardar la prueba.")}finally{N(!1)}},Mt=_.useMemo(()=>{var Je,xt,Et;const Ze=c||d;if(!Ze||!i.length)return[];const mt=new Map;return!((Je=Ze.cursosDestino)!=null&&Je.length)&&!((xt=Ze.estudiantesDestino)!=null&&xt.length)?[]:((Et=Ze.estudiantesDestino)!=null&&Et.length&&i.filter(bt=>bt.profile===Yt.ESTUDIANTE&&Ze.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>mt.set(bt.id,bt)),Array.from(mt.values()).sort((bt,nr)=>bt.nombreCompleto.localeCompare(nr.nombreCompleto)))},[c,d,i]),Pt=_.useMemo(()=>{const Ze=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(mt=>mt.actividadId===Ze)},[a,c,d]),Qt=_.useMemo(()=>i.filter(Ze=>Ze.profile===Yt.ESTUDIANTE).sort((Ze,mt)=>Ze.nombreCompleto.localeCompare(mt.nombreCompleto)),[i]),wt=_.useMemo(()=>L.trim()?Qt.filter(Ze=>Ze.nombreCompleto.toLowerCase().includes(L.toLowerCase())):Qt,[Qt,L]),Tr=_.useMemo(()=>{const Ze=new Set;return e.forEach(mt=>{(mt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Yt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&Ze.add(xt.id)})}),r.forEach(mt=>{(mt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(Et=>Et.profile===Yt.ESTUDIANTE&&Et.nombreCompleto===Je);xt&&Ze.add(xt.id)})}),a.forEach(mt=>Ze.add(mt.estudianteId)),i.filter(mt=>mt.profile===Yt.ESTUDIANTE&&Ze.has(mt.id)).sort((mt,Je)=>mt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,i]),tr=_.useMemo(()=>i.find(Ze=>Ze.id===ee)||null,[i,ee]),an=_.useMemo(()=>{if(!tr)return{asignadas:[],respuestas:[]};const Ze=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],mt=a.filter(Je=>Je.estudianteId===tr.id);return{asignadas:Ze,respuestas:mt}},[tr,e,r,a]),Sr=()=>o.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(Ze=>o.jsxs("button",{onClick:()=>{K(Ze),u(null),f(null),X(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${G===Ze?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[Ze==="carpetas"&&o.jsx(nH,{size:18}),Ze==="actividades"&&o.jsx(Ld,{size:18}),Ze==="pruebas"&&o.jsx(mwe,{size:18}),Ze==="carpetas"?"Carpetas de Estudiantes":Ze==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},Ze)),o.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx($2,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Ze=>R(Ze.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),G==="actividades"&&!j&&!c&&o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[o.jsx(UC,{size:18})," Nueva"]}),G==="pruebas"&&!M&&!d&&o.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[o.jsx(UC,{size:18})," Nueva"]})]})]}),$r=()=>{const Ze=L?wt:Tr;return Ze.length?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:Ze.map(mt=>{const Je=a.filter(bt=>bt.estudianteId===mt.id),xt=Je.length,Et=e.filter(bt=>(bt.estudiantesDestino||[]).includes(mt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(mt.nombreCompleto)).length;return o.jsxs("button",{onClick:()=>X(mt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[o.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:o.jsx(nH,{})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"font-semibold text-slate-800 truncate",children:mt.nombreCompleto}),o.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[o.jsx(zw,{size:14})," ",mt.curso||"—"]})]})]}),o.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:Et}),o.jsx("p",{className:"text-xs",children:"Asignadas"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:xt}),o.jsx("p",{className:"text-xs",children:"Entregas"})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(th,{size:16,className:"opacity-70"}),o.jsx("span",{className:"text-xs mt-1",children:Je.length?py(Je.sort((bt,nr)=>(bt.fechaCompletado||"").localeCompare(nr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):"—"})]})]})]},mt.id)})}):o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados aún."})},Fn=()=>{if(!tr)return null;const{asignadas:Ze,respuestas:mt}=an;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsxs("button",{onClick:()=>X(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[o.jsx(MC,{size:18})," Volver"]}),o.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial — ",tr.nombreCompleto]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Título / Asignatura"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ze.map(({tipo:Je,item:xt})=>{var xr;const Et=mt.find(Wr=>Wr.actividadId===xt.id),bt=Je==="Actividad"?`${xt.asignatura} — ${(xr=xt.tipos)==null?void 0:xr.join(", ")}`:xt.titulo,nr=xt.plazoEntrega?py(xt.plazoEntrega):"—";return o.jsxs("tr",{className:"hover:bg-slate-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:o.jsx(Ia,{content:bt,context:"hist-titulo"})}),o.jsx("td",{className:"px-4 py-3 text-sm",children:nr}),o.jsx("td",{className:"px-4 py-3 text-sm",children:Et?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[o.jsx(Bi,{size:14})," Completado"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[o.jsx(th,{size:14})," Pendiente"]})}),o.jsx("td",{className:"px-4 py-3 text-sm",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"—"}),o.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:Et?Et.nota:"—"})]},xt.id)})})]})})]})},Pr=()=>{var Ze,mt,Je;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Ia,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):o.jsx(Ia,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",py((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),o.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[o.jsx(MC,{size:18})," Volver al listado"]})]}),o.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((Ze=c==null?void 0:c.tipos)==null?void 0:Ze.includes("Desarrollo"))&&o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Mt.map(xt=>{var bt;const Et=Pt.find(nr=>nr.estudianteId===xt.id);return o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:xt.nombreCompleto}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?o.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):o.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?`${Et.puntaje}/${Et.puntajeMaximo}`:"-"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:Et?o.jsx("span",{className:parseFloat(Et.nota)>=4?"text-green-600":"text-red-600",children:Et.nota}):"-"}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Et?yYe(Et.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Et?o.jsx("button",{onClick:()=>{var xr,Wr,Zr;Q(Et);const nr=Array.from({length:((Wr=(xr=c.generatedContent)==null?void 0:xr.Desarrollo)==null?void 0:Wr.length)||0},(qr,me)=>({index:me,puntaje:0,observacion:""}));J(nr),se(((Zr=Et==null?void 0:Et.revisionDocente)==null?void 0:Zr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):o.jsx("span",{className:"text-slate-400",children:"-"})})]},xt.id)})})]})})]}),D&&((mt=c==null?void 0:c.tipos)==null?void 0:mt.includes("Desarrollo"))&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[o.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(D==null?void 0:D.estudianteNombre)||""]}),o.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((xt,Et)=>{var bt,nr;return o.jsxs("div",{className:"p-3 border rounded-lg",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`revision-pregunta-${Et}`})]}),xt.rubrica&&o.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[o.jsx("strong",{children:"Rúbrica:"})," ",o.jsx(Ia,{content:xt.rubrica,context:`revision-rubrica-${Et}`})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[o.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),o.jsx("input",{type:"number",min:0,step:.5,value:((bt=z[Et])==null?void 0:bt.puntaje)??0,onChange:xr=>{const Wr=Number(xr.target.value)||0;J(Zr=>{const qr=[...Zr];return qr[Et]={...qr[Et]||{index:Et,puntaje:0},puntaje:Wr},qr})},className:"w-24 border-slate-300 rounded-md"}),o.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((nr=z[Et])==null?void 0:nr.observacion)||"",onChange:xr=>{const Wr=xr.target.value;J(Zr=>{const qr=[...Zr];return qr[Et]={...qr[Et]||{index:Et,puntaje:0},observacion:Wr},qr})},className:"flex-1 border-slate-300 rounded-md"})]})]},Et)})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),o.jsx("textarea",{rows:3,value:te,onChange:xt=>se(xt.target.value),className:"w-full border-slate-300 rounded-md"})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>{Q(null),J([]),se("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),o.jsx("button",{onClick:async()=>{if(D)try{k(!0);const xt=Number(D.puntaje)||0,Et=Number(D.puntajeMaximo)||0,bt=(z||[]).reduce((Wr,Zr)=>Wr+(Number(Zr.puntaje)||0),0),nr=xt+bt,xr=xYe(nr,Et);await gYe(D.id,{puntaje:nr,puntajeMaximo:Et,nota:xr,revisionDocente:{completada:!0,observacionesGenerales:te||"",detalle:z||[],puntajeDocente:bt}}),Q(null),J([]),se("")}catch(xt){console.error("Error guardando revisión:",xt),T("No se pudo guardar la revisión del docente.")}finally{k(!1)}},disabled:B,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:B?"Guardando...":"Guardar Revisión"})]})]})})]})},As=()=>{var Ze,mt;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),o.jsxs("button",{onClick:()=>m(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[o.jsx(MC,{size:18})," Volver"]})]}),o.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),o.jsxs("form",{onSubmit:et,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),o.jsx("select",{name:"asignatura",value:le.asignatura,onChange:ke,className:"w-full border-slate-300 rounded-md shadow-sm",children:ks.map(Je=>o.jsx("option",{value:Je,children:Je},Je))})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),o.jsx("textarea",{name:"instrucciones",value:(Ze=le.recursos)==null?void 0:Ze.instrucciones,onChange:he,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),o.jsx("textarea",{name:"enlaces",value:(mt=le.recursos)==null?void 0:mt.enlaces,onChange:he,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),o.jsx("input",{type:"file",multiple:!0,onChange:Be,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Je=>R(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?wt:Qt).map(Je=>{var xt;return o.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:(xt=le.estudiantesDestino)==null?void 0:xt.includes(Je.nombreCompleto),onChange:()=>xe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{name:"contenido",value:le.contenido,onChange:ke,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),o.jsx("input",{type:"date",name:"plazoEntrega",value:le.plazoEntrega,onChange:ke,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),o.jsx("div",{className:"space-y-3",children:jye.map(Je=>o.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:le.tipos.includes(Je),onChange:()=>Le(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),le.tipos.includes(Je)&&o.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),SI[Je].map(xt=>o.jsx("button",{type:"button",onClick:()=>We(Je,xt),className:`px-3 py-1 rounded-full font-semibold text-xs ${le.cantidadPreguntas[Je]===xt?"bg-amber-500 text-white":"bg-slate-200"}`,children:xt},xt))]})]},Je))})]})]}),S&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:S}),o.jsx("div",{className:"pt-2 text-right",children:o.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[v?o.jsx(th,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]})},mn=()=>{var Ze;return o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),o.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),o.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[o.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ia,{content:j==null?void 0:j.introduccion,context:"preview-introduccion"})})]}),(j==null?void 0:j.panelDidactico)&&o.jsxs("div",{className:"p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[o.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Panel Didáctico - Material de Apoyo"]}),o.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof j.panelDidactico=="string"&&j.panelDidactico.trim().startsWith("{")){const mt=JSON.parse(j.panelDidactico);return o.jsxs("div",{className:"space-y-4",children:[mt.titulo&&o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:mt.titulo}),Array.isArray(mt.subtitulos)&&mt.subtitulos.map((Je,xt)=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:Je.titulo}),o.jsx("p",{className:"whitespace-pre-line",children:Je.texto})]},xt)),Array.isArray(mt.conceptosClave)&&mt.conceptosClave.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),o.jsx("ul",{className:"list-disc pl-5 space-y-1",children:mt.conceptosClave.map((Je,xt)=>o.jsx("li",{className:"text-emerald-800",children:Je},xt))})]}),!mt.subtitulos&&!mt.conceptosClave&&o.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(mt,null,2)})]})}return o.jsx("p",{className:"whitespace-pre-wrap",children:j.panelDidactico})}catch{return o.jsx("p",{className:"whitespace-pre-wrap",children:j.panelDidactico})}})()})]}),(j==null?void 0:j.recursos)&&(j.recursos.instrucciones||j.recursos.enlaces||((Ze=j.recursos.archivos)==null?void 0:Ze.length))&&o.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),o.jsxs("div",{className:"space-y-3",children:[j.recursos.instrucciones&&o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ia,{content:j.recursos.instrucciones,context:"preview-instrucciones"})}),j.recursos.enlaces&&o.jsx("div",{children:j.recursos.enlaces.split(`
`).map((mt,Je)=>mt.trim()&&o.jsx("a",{href:mt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:mt},Je))}),j.recursos.archivos&&j.recursos.archivos.length>0&&o.jsx("ul",{className:"list-disc list-inside",children:j.recursos.archivos.map(mt=>o.jsx("li",{className:"text-slate-700",children:mt.nombre},mt.nombre))})]})]}),j==null?void 0:j.tipos.map(mt=>{const Je=j.generatedContent[mt];return Je?o.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:mt}),o.jsxs("div",{className:"space-y-4 text-sm",children:[mt==="Quiz"&&Array.isArray(Je)&&Je.map((xt,Et)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`preview-quiz-pregunta-${Et}`})]}),o.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>o.jsxs("li",{children:[o.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",o.jsx(Ia,{content:bt,context:`preview-quiz-opcion-${Et}-${nr}`})]},nr))}),o.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",o.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-quiz-respuesta-${Et}`})]})]},Et)),mt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&o.jsxs("div",{children:[o.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:o.jsx(Ia,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((xt,Et)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`preview-lectura-pregunta-${Et}`})]}),o.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>o.jsxs("li",{children:[o.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",o.jsx(Ia,{content:bt,context:`preview-lectura-opcion-${Et}-${nr}`})]},nr))}),o.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",o.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-lectura-respuesta-${Et}`})]})]},Et))]}),mt==="Términos Pareados"&&Array.isArray(Je)&&o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border border-slate-200",children:[o.jsx("thead",{className:"bg-slate-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),o.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),o.jsx("tbody",{children:Je.map((xt,Et)=>o.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[o.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:o.jsx(Ia,{content:xt.concepto,context:`preview-pareado-concepto-${Et}`})}),o.jsx("td",{className:"p-2 align-top text-slate-700",children:o.jsx(Ia,{content:xt.definicion,context:`preview-pareado-definicion-${Et}`})})]},xt.id))})]})}),mt==="Desarrollo"&&Array.isArray(Je)&&Je.map((xt,Et)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Et+1,". ",o.jsx(Ia,{content:xt.pregunta,context:`preview-desarrollo-pregunta-${Et}`})]}),o.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[o.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",o.jsx(Ia,{content:xt.rubrica,context:`preview-desarrollo-rubrica-${Et}`})]})]},Et))]})]},mt):null})]}),o.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>P(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),o.jsx("button",{onClick:gt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},la=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify_between items-start",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),o.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[o.jsx(MC,{size:18})," Volver"]})]}),o.jsxs("form",{onSubmit:ct,className:"space-y-6 mt-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),o.jsx("select",{name:"asignatura",value:ae.asignatura,onChange:_e,className:"w-full border-slate-300 rounded-md shadow-sm",children:ks.map(Ze=>o.jsx("option",{value:Ze,children:Ze},Ze))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),o.jsx("textarea",{name:"objetivosAprendizaje",value:ae.objetivosAprendizaje,onChange:_e,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),o.jsx("textarea",{name:"contenido",value:ae.contenido,onChange:_e,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),o.jsx("input",{type:"date",name:"plazoEntrega",value:ae.plazoEntrega,onChange:_e,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Sólo estudiantes)"}),o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:L,onChange:Ze=>R(Ze.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(L?wt:Qt).map(Ze=>{var mt;return o.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:(mt=ae.estudiantesDestino)==null?void 0:mt.includes(Ze.nombreCompleto),onChange:()=>xe(Ze.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Ze.nombreCompleto,children:Ze.nombreCompleto})]},Ze.id)})})]})]})]}),S&&o.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:S}),o.jsx("div",{className:"text-right",children:o.jsxs("button",{type:"submit",disabled:v,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[v?o.jsx(th,{className:"animate-spin",size:18}):null,v?"Generando...":"Generar y Previsualizar"]})})]})]}),ja=()=>{var Ze,mt;return o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),o.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[o.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:o.jsx(Ia,{content:M==null?void 0:M.titulo,context:"preview-prueba-titulo"})}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Ia,{content:M==null?void 0:M.instrucciones,context:"preview-prueba-instrucciones"})})]}),(Ze=M==null?void 0:M.textos)!=null&&Ze.length?o.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[o.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),o.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:M.textos.map((Je,xt)=>o.jsxs("li",{children:[o.jsxs("p",{className:"font-semibold",children:[o.jsx(Ia,{content:Je.titulo,context:`preview-texto-titulo-${xt}`}),o.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),o.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:o.jsx(Ia,{content:Je.contenido,context:`preview-texto-contenido-${xt}`})})]},Je.id))})]}):null,(mt=M==null?void 0:M.preguntas)!=null&&mt.length?o.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),M.preguntas.slice(0,10).map((Je,xt)=>o.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[o.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",o.jsx(Ia,{content:Je.pregunta,context:`preview-pregunta-texto-${xt}`})]}),o.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((Et,bt)=>o.jsx("li",{children:o.jsx(Ia,{content:Et,context:`preview-pregunta-opcion-${xt}-${bt}`})},bt))}),o.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),o.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>Z(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),o.jsx("button",{onClick:It,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},rn=()=>o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[o.jsx(UC,{size:18})," Crear Nueva"]})]}),o.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Ze=>{var xt;const mt=[];(xt=Ze.estudiantesDestino)!=null&&xt.length&&mt.push(`Estudiantes: ${Ze.estudiantesDestino.length}`);const Je=mt.length?mt.join(" | "):"Estudiantes seleccionados";return o.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800",children:[o.jsx(Ia,{content:Ze.asignatura,context:`lista-asignatura-${Ze.id}`})," — ",Ze.tipos.join(", ")]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",py(Ze.fechaCreacion)]})]}),o.jsx("button",{onClick:()=>u(Ze),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ze.id)}):o.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),gr=()=>o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),o.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[o.jsx(UC,{size:18})," Crear Nueva"]})]}),o.jsx("div",{className:"space-y-4",children:r.length>0?r.map(Ze=>o.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800",children:o.jsx(Ia,{content:Ze.titulo,context:`lista-prueba-titulo-${Ze.id}`})}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",py(Ze.fechaCreacion)]})]}),o.jsx("button",{onClick:()=>f(Ze),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Ze.id)):o.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return F?o.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):o.jsxs("div",{className:"animate-fade-in",children:[Sr(),ee?Fn():M?ja():j?mn():c||d?Pr():G==="pruebas"?g?la():gr():G==="actividades"?h?As():rn():$r()]})},CYe="actividades_remotas",aM="respuestas_actividades",rce=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},Mq=e=>{const t=rce(e);return t?t.toISOString():void 0},NYe=e=>{const t=rce(e);return t?t.toISOString().split("T")[0]:void 0},sM=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:Mq(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:NYe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:Mq(t.fechaCompletado)||t.fechaCompletado}},_1=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},_Ye=e=>new Promise(t=>setTimeout(t,e)),SYe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await _Ye(s)}else throw a}throw new Error("Max retries exceeded")},kYe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=zt(vt(ft,CYe),hr("fechaCreacion","desc"));return fr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const l=s.docs.map(c=>sM(c)).filter(c=>{var u,d,f,h,m;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(m=c.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",l.length),t(l)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const l=_1(i,"procesamiento de actividades");r==null||r(l)}},error:s=>{const i=_1(s,"suscripción a actividades");r==null||r(i)}})},jYe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=zt(vt(ft,aM),Br("estudianteId","==",e),hr("fechaCompletado","desc"));return fr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(l=>{var u;const c=sM(l);return console.log(`📄 Respuesta ${l.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const l=_1(i,"procesamiento de respuestas");r==null||r(l)}},error:s=>{var l;const i=_1(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((l=s.message)!=null&&l.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),BYe(e,t,r);r==null||r(i)}})},BYe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=zt(vt(ft,aM),Br("estudianteId","==",e));return fr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(l=>sM(l)).sort((l,c)=>new Date(c.fechaCompletado).getTime()-new Date(l.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const l=_1(i,"procesamiento de respuestas alternativo");r==null||r(l)}},error:s=>{const i=_1(s,"suscripción alternativa a respuestas");r==null||r(i)}})},TYe=async e=>SYe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:ir.fromDate(new Date(e.fechaCompletado))},r=await hn(vt(ft,aM),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),IYe=.6,FYe=(e,t,r=IYe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},TO=({className:e="w-5 h-5"})=>o.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),OYe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new Os(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let l=1;l<=r;l++)try{console.log(`🤖 Intento ${l} de generar feedback con IA`);const c=PYe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const m=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${l}`),m}catch(m){throw console.warn(`⚠️ Error al parsear JSON en intento ${l}:`,m),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${l}:`,c.message),(i=c.message)!=null&&i.includes("503")&&l<r){const u=Math.pow(2,l)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(l===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},DYe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await TYe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await OYe(t,r);if(s){const{updateDoc:i,doc:l}=await rc(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>d_);return{updateDoc:u,doc:d}},void 0),{db:c}=await rc(async()=>{const{db:u}=await Promise.resolve().then(()=>Uee);return{db:u}},void 0);return await i(l(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},Eo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},qs=(e,t)=>{if(t&&Eo(e,t),t==="panelDidactico"||t!=null&&t.includes("panelDidactico")){if(typeof e=="string")return e;if(e==null)return"";try{return typeof e=="object"?typeof e.texto=="string"?e.texto:typeof e.contenido=="string"?e.contenido:JSON.stringify(e):String(e)}catch{return"[Error al procesar el panel didáctico]"}}if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>qs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Od=(e,t,...r)=>{if(Eo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=qs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=qs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},Cs=({content:e,context:t="unknown"})=>{try{const r=qs(e,`UltraSafeRenderer-${t}`);return o.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),o.jsx("span",{children:"[Error al mostrar contenido]"})}};function Uq(e){if(console.log("🔍 Normalizando lectura:",e),Eo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{Eo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>qs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:Od(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:qs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Od(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Od(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(Eo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function Qq(e){return console.log("🔍 Normalizando pareados:",e),Eo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(Eo(t,`pareado-${r}`),{izquierda:Od(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Od(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(Eo(t,`pareado-array-${r}`),{izquierda:Od(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Od(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function Hq(e){return console.log("🔍 Normalizando desarrollo:",e),Eo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(Eo(t,`desarrollo-pregunta-${r}`),{enunciado:Od(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(Eo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Od(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const PYe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${qs(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${qs(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${qs(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${qs(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${qs(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${qs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${qs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},RYe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=_.useState({}),[s,i]=_.useState(!1),l=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(m=>{const g=e.generatedContent[m],x=n[m];if(console.log(`🔍 Procesando tipo: ${m}`,g),Eo(g,`handleSubmit-${m}`),!!g){if((m==="Quiz"||m==="Comprensión de Lectura")&&(m==="Quiz"?Array.isArray(g)?g.map((y,w)=>(Eo(y,`quiz-question-${w}`),{pregunta:Od(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((N,B)=>qs(N,`quiz-opcion-${w}-${B}`)):[],respuestaCorrecta:qs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:Uq(g).preguntas).forEach((y,w)=>{const N=x==null?void 0:x[w],B=N===y.respuestaCorrecta,k=y.puntaje??1;B&&(u+=k),d+=k,f.items.push({pregunta:y.pregunta,respuestaUsuario:qs(N,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:B,puntajeObtenido:B?k:0,tipo:m})}),m==="Términos Pareados"){const v=Qq(g),y=x||{};v.forEach((w,N)=>{const B=y[N],k=B===w.derecha,F=w.puntaje??1;k&&(u+=F),d+=F,f.items.push({pregunta:`${w.izquierda} → ¿?`,respuestaUsuario:qs(B,`pareado-feedback-${N}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:k,puntajeObtenido:k?F:0,tipo:m})})}if(m==="Desarrollo"){const v=Hq(g),y=x||{};v.forEach((w,N)=>{const B=qs(y[N],`desarrollo-feedback-${N}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:B||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:m})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:FYe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[o.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:o.jsx(Cs,{content:e.asignatura,context:"actividad-asignatura"})}),o.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Cs,{content:e.introduccion,context:"actividad-introduccion"})}),e.panelDidactico&&o.jsxs("div",{className:"mt-5 p-5 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-lg shadow-md",children:[o.jsxs("h3",{className:"font-bold text-emerald-800 text-lg mb-3 flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Material de Estudio - Lee con Atención"]}),o.jsx("div",{className:"prose prose-emerald max-w-none text-slate-700",children:(()=>{try{if(typeof e.panelDidactico=="string"&&e.panelDidactico.trim().startsWith("{")){const u=JSON.parse(e.panelDidactico);return o.jsxs("div",{className:"space-y-4",children:[u.titulo&&o.jsx("h2",{className:"text-xl font-bold text-emerald-800",children:u.titulo}),Array.isArray(u.subtitulos)&&u.subtitulos.map((d,f)=>o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:d.titulo}),o.jsx("p",{className:"whitespace-pre-line",children:d.texto})]},f)),Array.isArray(u.conceptosClave)&&u.conceptosClave.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-emerald-700 mb-2",children:"Conceptos Clave"}),o.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.conceptosClave.map((d,f)=>o.jsx("li",{className:"text-emerald-800",children:d},f))})]}),!u.subtitulos&&!u.conceptosClave&&o.jsx("div",{className:"whitespace-pre-line",children:JSON.stringify(u,null,2)})]})}return o.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}catch{return o.jsx("p",{className:"whitespace-pre-wrap",children:e.panelDidactico})}})()})]}),e.recursos&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-200",children:[e.recursos.instrucciones&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Cs,{content:e.recursos.instrucciones,context:"actividad-instrucciones"})})]}),e.recursos.enlaces&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.enlaces.split(`
`).filter(Boolean).map((u,d)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),o.jsx("a",{href:u.startsWith("http")?u:`https://${u}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:u})]},d))})]}),e.recursos.archivos&&e.recursos.archivos.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:e.recursos.archivos.map((u,d)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),o.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:u.nombre||`Archivo ${d+1}`})]},d))})]})]})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),Eo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,m)=>(Eo(h,`render-quiz-question-${m}`),{pregunta:Od(h,`render-quiz-pregunta-${m}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>qs(g,`render-quiz-opcion-${m}-${x}`)):[],respuestaCorrecta:qs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${m}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),o.jsx("div",{className:"space-y-6",children:f.map((h,m)=>o.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[o.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",o.jsx(Cs,{content:h.pregunta,context:`quiz-pregunta-${m}`})]}),o.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return o.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[o.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),o.jsx("span",{children:o.jsx(Cs,{content:g,context:`quiz-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Comprensión de Lectura":{const f=Uq(d);return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),o.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:o.jsx(Cs,{content:f.texto,context:"lectura-texto"})}),o.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,m)=>o.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[o.jsxs("p",{className:"font-semibold text-slate-800",children:[m+1,". ",o.jsx(Cs,{content:h.pregunta,context:`lectura-pregunta-${m}`})]}),o.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var v;return o.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[o.jsx("input",{type:"radio",name:`q-${u}-${m}`,value:g,checked:((v=n[u])==null?void 0:v[m])===g,onChange:()=>l(u,{...n[u]||{},[m]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),o.jsx("span",{children:o.jsx(Cs,{content:g,context:`lectura-opcion-${m}-${x}`})})]},x)})})]},m))})]},u)}case"Términos Pareados":{const f=Qq(d),h=n[u]||{},m=[...new Set(f.map(g=>g.derecha))];for(let g=m.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[m[g],m[x]]=[m[x],m[g]]}return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),o.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>o.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[o.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",o.jsx(Cs,{content:g.izquierda,context:`pareado-izq-${x}`})]}),o.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:v=>l(u,{...h,[x]:v.target.value}),children:[o.jsx("option",{value:"",children:"— Selecciona la pareja —"}),m.map((v,y)=>o.jsx("option",{value:v,children:qs(v,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=Hq(d),h=n[u]||{};return o.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),o.jsx("div",{className:"space-y-6",children:f.map((m,g)=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",o.jsx(Cs,{content:m.enunciado,context:`desarrollo-enunciado-${g}`})]}),o.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:x=>l(u,{...h,[g]:x.target.value})})]},g))}),o.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),o.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:o.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?o.jsx(TO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},LYe=({currentUser:e})=>{var T,L,R;const[t,r]=_.useState(!0),[n,a]=_.useState("list"),[s,i]=_.useState(!1),[l,c]=_.useState([]),[u,d]=_.useState([]),[f,h]=_.useState(null),[m,g]=_.useState(null),[x,v]=_.useState(null),[y,w]=_.useState("connecting");_.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let j=!1,P=!1,M=!1,Z=!1;const V=()=>{(j||M)&&(P||Z)&&(M&&Z?(w("error"),v("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):w("connected"),r(!1),console.log("✅ Carga completada - Actividades:",j,"Respuestas:",P))},W=kYe(e,K=>{console.log("📋 Actividades recibidas:",K.length),K.forEach((ee,X)=>{console.log(`  ${X+1}. ${ee.asignatura} (ID: ${ee.id})`),Eo(ee,`actividad-${X}`)}),c(K),j=!0,V()},K=>{console.error("❌ Error en suscripción de actividades:",K),M=!0,V()}),G=jYe(e.id,K=>{console.log("📝 Respuestas del estudiante recibidas:",K.length),K.forEach((ee,X)=>{var D;console.log(`  ${X+1}. Actividad ${ee.actividadId} - Fecha: ${ee.fechaCompletado}`),ee.nota&&console.log(`    Nota: ${ee.nota}`),(D=ee.revisionDocente)!=null&&D.completada&&console.log("    ✅ Con revisión docente completada"),Eo(ee,`respuesta-${X}`)}),d(K),P=!0,V()},K=>{var ee;console.error("❌ Error en suscripción de respuestas:",K),(ee=K.message)!=null&&ee.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),v("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),Z=!0,V()});return()=>{console.log("🧹 Limpiando subscripciones"),W==null||W(),G==null||G()}},[e]),_.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:l.length,respuestas:u.length,vista:n,conexion:y})},[l.length,u.length,n,y,t]);const N=j=>{if(console.log("🔍 Iniciando actividad:",j.asignatura),F.has(j.id)){v("Esta actividad ya ha sido completada. No es posible realizarla nuevamente.");return}h(j),a("activity"),v(null)},B=j=>{console.log("🔍 Viendo resultado:",j.actividadId);const P=l.find(M=>M.id===j.actividadId);P?(h(P),g(j),a("result"),v(null)):v("No se pudieron cargar los detalles de esta actividad completada.")},k=_.useCallback(async(j,P)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:j.puntaje,nota:j.nota}),a("result"),i(!0),v(null);const M={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...j,retroalimentacionDetallada:P};console.log("💾 Guardando respuesta...");try{const Z=await DYe(M,f,P);console.log("✅ Respuesta completada con ID:",Z.id),g(Z),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(Z){console.error("❌ Error crítico al completar actividad:",Z),v("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...M,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),F=_.useMemo(()=>{if(u.length===0)return new Set;const j=new Set(u.map(P=>P.actividadId));return console.log("🎯 IDs completados calculados:",j.size),j},[u]),E=_.useMemo(()=>{if(l.length===0)return[];const j=l.filter(P=>!F.has(P.id));return console.log("⏳ Actividades pendientes:",j.length),j},[l,F]),S=_.useMemo(()=>{if(u.length===0)return[];const j=u.map(P=>{const M=l.find(Z=>Z.id===P.actividadId);return{...P,asignatura:(M==null?void 0:M.asignatura)||"Actividad no disponible",tipos:(M==null?void 0:M.tipos)||[]}}).sort((P,M)=>new Date(M.fechaCompletado).getTime()-new Date(P.fechaCompletado).getTime());return console.log("📖 Historial preparado:",j.length),j},[u,l]);return t?o.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[o.jsx(TO,{className:"w-8 h-8 text-slate-500"}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),o.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&l.length===0&&u.length===0?o.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[o.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),o.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),o.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?o.jsx(RYe,{actividad:f,onComplete:k,currentUser:e}):n==="result"&&m?(console.log("🔍 Renderizando resultado:",m),o.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),o.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[o.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",o.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[m.puntaje," / ",m.puntajeMaximo]})]}),o.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",o.jsx("span",{className:`font-bold text-2xl ${parseFloat(m.nota)>=4?"text-green-600":"text-red-600"}`,children:m.nota})]})]}),(f==null?void 0:f.recursos)&&o.jsxs("div",{className:"mb-6 p-4 bg-sky-50 border border-sky-200 rounded-lg",children:[o.jsx("h2",{className:"text-lg font-bold text-sky-800 mb-2",children:"Material complementario"}),f.recursos.instrucciones&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Instrucciones adicionales:"}),o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.jsx(Cs,{content:f.recursos.instrucciones,context:"resultado-instrucciones"})})]}),f.recursos.enlaces&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Enlaces complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:f.recursos.enlaces.split(`
`).filter(Boolean).map((j,P)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"🔗"}),o.jsx("a",{href:j.startsWith("http")?j:`https://${j}`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline break-all",children:j})]},P))})]}),f.recursos.archivos&&f.recursos.archivos.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sky-700",children:"Archivos complementarios:"}),o.jsx("div",{className:"space-y-1 mt-1",children:f.recursos.archivos.map((j,P)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-sky-500 mr-2",children:"📄"}),o.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-800 hover:underline",children:j.nombre||`Archivo ${P+1}`})]},P))})]})]}),x&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",x]})}),s&&o.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[o.jsx(TO,{className:"w-8 h-8 text-blue-500"}),o.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),o.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),m.retroalimentacionAI&&!s&&o.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[o.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),o.jsx("p",{className:"text-slate-700 mt-1",children:o.jsx(Cs,{content:m.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((T=m.retroalimentacionAI.desafios)==null?void 0:T.length)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),o.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.desafios.map((j,P)=>o.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[o.jsx("p",{className:"font-semibold text-slate-800",children:o.jsx(Cs,{content:j.pregunta,context:`feedback-desafio-pregunta-${P}`})}),o.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:o.jsx(Cs,{content:j.explicacionDelError,context:`feedback-desafio-explicacion-${P}`})})]},P))})]}),((R=(L=m.retroalimentacionAI)==null?void 0:L.comentariosDesarrollo)==null?void 0:R.length)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),o.jsx("div",{className:"space-y-3 mt-2",children:m.retroalimentacionAI.comentariosDesarrollo.map((j,P)=>o.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[o.jsx("p",{className:"font-semibold text-slate-800",children:o.jsx(Cs,{content:j.pregunta,context:`feedback-desarrollo-pregunta-${P}`})}),o.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:o.jsx(Cs,{content:j.retroalimentacionBreve,context:`feedback-desarrollo-retro-${P}`})})]},P))})]})]}),m.retroalimentacionDetallada&&o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),m.retroalimentacionDetallada.items.map((j,P)=>{const M=j.esCorrecta===null,Z=M?"border-slate-400 bg-slate-50":j.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",V=M?"🕓":j.esCorrecta?"✅":"❌";return o.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${Z}`,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[P+1,". ",o.jsx(Cs,{content:j.pregunta,context:`feedback-item-pregunta-${P}`})]}),o.jsx("span",{className:"font-bold text-lg",children:V})]}),o.jsxs("div",{className:"mt-2 text-sm pl-4",children:[o.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",o.jsx("span",{className:"font-medium",children:o.jsx(Cs,{content:j.respuestaUsuario,context:`feedback-item-respuesta-${P}`})})]}),!M&&!j.esCorrecta&&o.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",o.jsx("span",{className:"font-medium text-green-700",children:o.jsx(Cs,{content:j.respuestaCorrecta,context:`feedback-item-correcta-${P}`})})]}),M&&o.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},P)})]}),o.jsx("div",{className:"flex gap-4",children:o.jsx("button",{onClick:()=>{a("list"),h(null),g(null),v(null)},className:"w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"})})]})):o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&o.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:o.jsxs("p",{className:"text-amber-800",children:["⚠️ ",x]})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),o.jsx("p",{className:"text-slate-500 mb-2",children:"Completa las actividades asignadas por tus profesores."}),o.jsx("p",{className:"text-amber-600 text-sm font-medium mb-6",children:o.jsxs("span",{className:"bg-amber-100 p-1 rounded inline-flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Importante: Cada actividad solo puede ser respondida una vez."]})}),o.jsx("div",{className:"space-y-4",children:E.length>0?E.map(j=>o.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800",children:[o.jsx(Cs,{content:j.asignatura,context:`actividad-asignatura-${j.id}`})," - ",j.tipos.join(", ")]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",o.jsx(Cs,{content:typeof j.plazoEntrega=="string"?j.plazoEntrega:"",context:`actividad-plazo-${j.id}`})]})]}),o.jsx("button",{onClick:()=>N(j),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},j.id)):o.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),o.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),o.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),o.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),o.jsx("div",{className:"space-y-4",children:S.length>0?S.map(j=>o.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800",children:[o.jsx(Cs,{content:j.asignatura,context:`completada-asignatura-${j.id}`})," - ",j.tipos.join(", ")]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(j.fechaCompletado).toLocaleDateString("es-CL")]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",o.jsx("span",{className:`font-bold text-lg ${parseFloat(j.nota)>=4?"text-green-600":"text-red-600"}`,children:j.nota})]}),o.jsx("button",{onClick:()=>B(j),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},j.id)):o.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📚"}),o.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),o.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},Uk="estudiantes_inclusion",MYe="usuarios",nce=e=>{const t=e.data();return{id:e.id,...t}},UYe=e=>{const t=zt(vt(ft,Uk));return fr(t,n=>{const a=n.docs.map(s=>nce(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},QYe=e=>{const t=zt(vt(ft,MYe));return fr(t,n=>{const a=n.docs.map(s=>nce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},HYe=async e=>{try{return(await hn(vt(ft,Uk),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},VYe=async(e,t)=>{try{const{id:r,...n}=t,a=sr(ft,Uk,e);await bi(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},zYe=async e=>{try{const t=sr(ft,Uk,e);await Ra(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},$Ye=({estudiantes:e})=>{const t=_.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=_.useMemo(()=>{const l=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(l).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=_.useMemo(()=>{const l=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(l).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=_.useMemo(()=>{const l=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(l/e.length).toFixed(1):"0";return{total:l,promedio:c}},[e]),s=_.useMemo(()=>e.reduce((l,c)=>l+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(l=>l.cantidad),...r.map(l=>l.cantidad),...n.map(l=>l.cantidad));return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),o.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),o.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),o.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),o.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),o.jsx("div",{className:"space-y-2",children:t.map(({curso:l,cantidad:c})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:l}),o.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),o.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),o.jsx("div",{className:"space-y-2",children:r.map(({nivel:l,cantidad:c})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[l,"°"]}),o.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),o.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),o.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:l,cantidad:c})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:l,children:l}),o.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),o.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},l))})]})]})]})},Vq=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=_.useState(""),[a,s]=_.useState(""),[i,l]=_.useState(!1),c=_.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),m=a===""||f.curso===a;return h&&m}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=_.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),l(!1)};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),o.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),l(f.target.value.length>0||a!=="")},onFocus:()=>l(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),o.jsxs("select",{value:a,onChange:f=>{s(f.target.value),l(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>o.jsx("option",{value:f,children:f},f))]})]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[o.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),o.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),o.jsx("button",{onClick:()=>l(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&o.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?o.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):o.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>o.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),o.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),o.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},GYe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=_.useState(m_[0]),s=()=>r(e,n);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),o.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:m_.map(i=>o.jsx("option",{value:i,children:i},i))})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},KYe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=_.useState("intervenciones"),[l,c]=_.useState(e);_.useEffect(()=>c(e),[e]);const[u,d]=_.useState(null),f={responsable:"",accion:"",observaciones:""},[h,m]=_.useState(f),[g,x]=_.useState({trimestre:"T1",meta:""}),[v,y]=_.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,N]=_.useState(null),[B,k]=_.useState(!1),F={motivo:"",acuerdos:"",asistentes:""},[E,S]=_.useState(F),T=()=>{r(l),t()},L=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ae,Ne=!1;u?ae=(l.intervenciones||[]).map(he=>he.id===u.id?{...he,...h}:he):(Ne=!0,ae=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...l.intervenciones||[]]);const ke=ae.sort((he,Be)=>new Date(Be.fecha).getTime()-new Date(he.fecha).getTime());if(c(he=>({...he,intervenciones:ke})),Ne)try{await vEe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${l.nombre}. Acción: ${h.accion}`,estudianteNombre:l.nombre,estudianteId:l.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(he){console.error("Error al crear notificación:",he),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}m(f),d(null)},R=ae=>{d(ae),m({responsable:ae.responsable,accion:ae.accion,observaciones:ae.observaciones})},j=ae=>{window.confirm("¿Eliminar esta intervención?")&&c(Ne=>({...Ne,intervenciones:(Ne.intervenciones||[]).filter(ke=>ke.id!==ae)}))},P=ae=>{const{name:Ne,value:ke}=ae.target;c(_e=>({..._e,[Ne]:ke,fechaActualizacionApoyos:new Date().toISOString()}))},M=()=>{if(!g.meta.trim())return;const ae={...g,id:crypto.randomUUID(),cumplida:!1};c(Ne=>({...Ne,metasProgreso:[...Ne.metasProgreso||[],ae]})),x({trimestre:"T1",meta:""})},Z=ae=>{c(Ne=>({...Ne,metasProgreso:(Ne.metasProgreso||[]).map(ke=>ke.id===ae?{...ke,cumplida:!ke.cumplida}:ke)}))},V=ae=>{c(Ne=>({...Ne,metasProgreso:(Ne.metasProgreso||[]).filter(ke=>ke.id!==ae)}))},W=_.useMemo(()=>{const ae=l.metasProgreso||[];if(ae.length===0)return{percent:0,color:"bg-slate-300"};const Ne=ae.filter(he=>he.cumplida).length,ke=Math.round(Ne/ae.length*100),_e=ke<40?"bg-red-500":ke<75?"bg-yellow-500":"bg-green-500";return{percent:ke,color:_e}},[l.metasProgreso]),G=_.useMemo(()=>{if(!l.fechaActualizacionApoyos)return!0;const ae=new Date(l.fechaActualizacionApoyos),Ne=new Date;return Ne.setMonth(Ne.getMonth()-3),ae<Ne},[l.fechaActualizacionApoyos]),K=()=>{if(!v.titulo.trim()||!v.fecha)return;const ae={...v,id:crypto.randomUUID(),resuelta:!1};c(Ne=>({...Ne,alertas:[...Ne.alertas||[],ae].sort((ke,_e)=>new Date(ke.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},ee=ae=>{c(Ne=>({...Ne,alertas:(Ne.alertas||[]).map(ke=>ke.id===ae?{...ke,resuelta:!ke.resuelta}:ke)}))},X=ae=>{c(Ne=>({...Ne,alertas:(Ne.alertas||[]).filter(ke=>ke.id!==ae)}))},D=ae=>{ae.target.files&&ae.target.files[0]&&N(ae.target.files[0])},Q=()=>{if(!w)return;k(!0);const ae=new FileReader;ae.readAsDataURL(w),ae.onloadend=()=>{const Ne={id:crypto.randomUUID(),nombre:w.name,url:ae.result,fechaSubida:new Date().toISOString()};c(ke=>({...ke,archivos:[Ne,...ke.archivos||[]]})),N(null),k(!1)},ae.onerror=()=>{alert("Error al leer el archivo."),k(!1)}},z=ae=>{window.confirm("¿Eliminar este archivo?")&&c(Ne=>({...Ne,archivos:(Ne.archivos||[]).filter(ke=>ke.id!==ae)}))},J=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ae={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Ne=>({...Ne,reuniones:[ae,...Ne.reuniones||[]].sort((ke,_e)=>new Date(_e.fecha).getTime()-new Date(ke.fecha).getTime())})),S(F)},te=ae=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Ne=>({...Ne,reuniones:(Ne.reuniones||[]).filter(ke=>ke.id!==ae)}))},se=()=>{var xe,Oe,Re;const ae=new vr("p","mm","a4"),Ne=20,ke=ae.internal.pageSize.getWidth(),_e=ae.internal.pageSize.getHeight();let he=Ne;const Be=$e=>{$e.setFontSize(10),$e.setTextColor(100),$e.text("Ficha de Seguimiento - Módulo Inclusión",Ne,15)};Be(ae),ae.setFontSize(18),ae.setFont("helvetica","bold"),ae.setTextColor(40),ae.text(l.nombre,Ne,he+10),he+=15,ae.setFontSize(11),ae.setFont("helvetica","normal"),ae.setTextColor(80),ae.text(`Curso: ${l.curso}`,Ne,he),ae.text(`Dificultad: ${l.dificultad}`,Ne,he+6),he+=15;const Le=$e=>{he+$e>_e-Ne&&(ae.addPage(),Be(ae),he=Ne)},We=$e=>{Le(15),ae.setFontSize(14),ae.setFont("helvetica","bold"),ae.text($e,Ne,he),he+=10};if((xe=l.intervenciones)!=null&&xe.length&&(We("Historial de Intervenciones"),pi(ae,{startY:he,head:[["Fecha","Responsable","Acción","Observaciones"]],body:l.intervenciones.map($e=>[new Date($e.fecha).toLocaleDateString("es-CL"),$e.responsable,$e.accion,$e.observaciones||""]),theme:"grid",didDrawPage:()=>Be(ae)}),he=ae.lastAutoTable.finalY+10),l.adaptacionesCurriculares||l.apoyosRecibidos){Le(30),We("Seguimiento y Apoyos"),ae.setFontSize(11),ae.setFont("helvetica","normal");const $e=`Adaptaciones: ${l.adaptacionesCurriculares||"No registradas."}
Apoyos: ${l.apoyosRecibidos||"No registrados."}`,et=ae.splitTextToSize($e,ke-Ne*2);ae.text(et,Ne,he),he+=et.length*5+10}(Oe=l.metasProgreso)!=null&&Oe.length&&(Le(30),We("Metas de Progreso"),pi(ae,{startY:he,head:[["Trimestre","Meta","Estado"]],body:l.metasProgreso.map($e=>[$e.trimestre,$e.meta,$e.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Be(ae)}),he=ae.lastAutoTable.finalY+10),(Re=l.reuniones)!=null&&Re.length&&(We("Reuniones con Apoderados"),pi(ae,{startY:he,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:l.reuniones.map($e=>[new Date($e.fecha).toLocaleDateString("es-CL"),$e.motivo,$e.acuerdos||"",$e.asistentes]),theme:"grid",didDrawPage:()=>Be(ae)})),ae.save(`Ficha_Inclusion_${l.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),o.jsxs("select",{value:h.responsable,onChange:ae=>m(Ne=>({...Ne,responsable:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ae=>o.jsx("option",{value:ae,children:ae},ae))]}),h.responsable&&!u&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),o.jsx("textarea",{value:h.accion,onChange:ae=>m(Ne=>({...Ne,accion:ae.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("textarea",{value:h.observaciones,onChange:ae=>m(Ne=>({...Ne,observaciones:ae.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[u&&o.jsx("button",{onClick:()=>{d(null),m(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),o.jsx("button",{onClick:L,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.intervenciones||[]).map(ae=>o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.accion}),ae.observaciones&&o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ae.observaciones}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ae.fecha).toLocaleString("es-CL")," - ",ae.responsable]}),o.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),o.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[o.jsx("button",{onClick:()=>R(ae),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),o.jsx("button",{onClick:()=>j(ae.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ae.id)),(!l.intervenciones||l.intervenciones.length===0)&&o.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-4xl mb-2",children:"📋"}),o.jsx("p",{children:"No hay intervenciones registradas"}),o.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),le=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),G&&o.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),o.jsx("textarea",{name:"adaptacionesCurriculares",value:l.adaptacionesCurriculares||"",onChange:P,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),o.jsx("textarea",{name:"apoyosRecibidos",value:l.apoyosRecibidos||"",onChange:P,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",W.percent,"%"]}),o.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:o.jsx("div",{className:`${W.color} h-4 rounded-full transition-all duration-500`,style:{width:`${W.percent}%`}})})]}),o.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[o.jsxs("select",{value:g.trimestre,onChange:ae=>x(Ne=>({...Ne,trimestre:ae.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"T1",children:"T1"}),o.jsx("option",{value:"T2",children:"T2"}),o.jsx("option",{value:"T3",children:"T3"})]}),o.jsx("input",{value:g.meta,onChange:ae=>x(Ne=>({...Ne,meta:ae.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:M,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),o.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(l.metasProgreso||[]).map(ae=>o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[o.jsx("input",{type:"checkbox",checked:ae.cumplida,onChange:()=>Z(ae.id),className:"h-5 w-5 rounded text-amber-500"}),o.jsxs("span",{className:`flex-grow text-sm ${ae.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[o.jsxs("strong",{children:[ae.trimestre,":"]})," ",ae.meta]}),o.jsx("button",{onClick:()=>V(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ae.id)),(!l.metasProgreso||l.metasProgreso.length===0)&&o.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),o.jsx("p",{children:"No hay metas definidas"}),o.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),ue=()=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),o.jsx("input",{type:"text",value:v.titulo,onChange:ae=>y(Ne=>({...Ne,titulo:ae.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),o.jsx("input",{type:"date",value:new Date(v.fecha).toISOString().slice(0,10),onChange:ae=>y(Ne=>({...Ne,fecha:ae.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),o.jsx("button",{onClick:K,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!v.titulo.trim()||!v.fecha,children:"Agendar"})]}),o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.alertas||[]).map(ae=>o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[o.jsx("input",{type:"checkbox",checked:ae.resuelta,onChange:()=>ee(ae.id),className:"h-5 w-5 rounded text-amber-500"}),o.jsxs("span",{className:`flex-grow text-sm ${ae.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ae.titulo," (",new Date(ae.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),o.jsx("button",{onClick:()=>X(ae.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ae.id)),(!l.alertas||l.alertas.length===0)&&o.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),o.jsx("p",{children:"No hay alertas programadas"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),o.jsx("input",{type:"file",onChange:D,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),o.jsx("button",{onClick:Q,disabled:!w||B,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:B?"Subiendo...":"Subir"}),w&&o.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(l.archivos||[]).map(ae=>o.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[o.jsxs("a",{href:ae.url,download:ae.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ae.nombre,children:["📎 ",ae.nombre]}),o.jsx("button",{onClick:()=>z(ae.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ae.id)),(!l.archivos||l.archivos.length===0)&&o.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-3xl mb-2",children:"📁"}),o.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),je=()=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),o.jsx("input",{value:E.motivo,onChange:ae=>S(Ne=>({...Ne,motivo:ae.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("textarea",{value:E.acuerdos,onChange:ae=>S(Ne=>({...Ne,acuerdos:ae.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("input",{value:E.asistentes,onChange:ae=>S(Ne=>({...Ne,asistentes:ae.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("div",{className:"text-right",children:o.jsx("button",{onClick:J,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunión"})})]}),o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(l.reuniones||[]).map(ae=>o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ae.motivo}),ae.acuerdos&&o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[o.jsx("strong",{children:"Acuerdos:"})," ",ae.acuerdos]}),o.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ae.fecha).toLocaleString("es-CL")," - Asistentes: ",ae.asistentes]})]}),o.jsx("button",{onClick:()=>te(ae.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ae.id)),(!l.reuniones||l.reuniones.length===0)&&o.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-4xl mb-2",children:"👥"}),o.jsx("p",{children:"No hay reuniones registradas"}),o.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ae=>ae.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:se,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),o.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),o.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:o.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ae=>o.jsx("button",{onClick:()=>i(ae),className:`${s===ae?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ae==="alertas"?"Alertas y Archivos":ae==="seguimiento"?"Seguimiento y Metas":ae},ae))})}),o.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&le(),s==="reuniones"&&je(),s==="alertas"&&ue()]}),o.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[o.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),o.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},zq=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState([]),[s,i]=_.useState(!0),[l,c]=_.useState(null),[u,d]=_.useState(null),[f,h]=_.useState(""),[m,g]=_.useState(""),[x,v]=_.useState(""),[y,w]=_.useState("dashboard");_.useEffect(()=>{i(!0);const L=UYe(j=>{r(j),i(!1)}),R=QYe(j=>a(j));return()=>{L(),R()}},[]);const N=async(L,R)=>{if(t.some(P=>P.nombre===L.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const j={nombre:L.nombreCompleto,curso:L.curso||"",dificultad:R,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await HYe(j),alert(`✅ ${L.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(P){console.error("Error al agregar estudiante:",P),alert("Hubo un error al agregar al estudiante al programa.")}},B=async L=>{try{await VYe(L.id,L)}catch(R){console.error("Error al actualizar la ficha:",R),alert("Hubo un error al guardar los cambios en la ficha.")}},k=async L=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await zYe(L),(l==null?void 0:l.id)===L&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(R){console.error("Error al eliminar estudiante:",R),alert("Hubo un error al eliminar al estudiante.")}},F=L=>{const R=S;if(R.length===0){alert("No hay datos para exportar.");return}const j=R.map(P=>{var M;return{Nombre:P.nombre,Curso:P.curso,Dificultad:P.dificultad,"N° Intervenciones":((M=P.intervenciones)==null?void 0:M.length)||0,"Alertas Pendientes":(P.alertas||[]).filter(Z=>!Z.resuelta).length,"Metas Cumplidas":(P.metasProgreso||[]).filter(Z=>Z.cumplida).length,"Total Metas":(P.metasProgreso||[]).length,"Última Actualización":P.fechaActualizacionApoyos?new Date(P.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(L==="xlsx"){const P=Ti.json_to_sheet(j),M=Ti.book_new();Ti.book_append_sheet(M,P,"Estudiantes_Inclusion"),tE(M,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const P=new vr;P.text("Listado de Estudiantes - Programa de Inclusión",14,15),pi(P,{startY:20,head:[Object.keys(j[0])],body:j.map(Object.values)}),P.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},E=_.useMemo(()=>n.filter(L=>{var R;return L.profile===Yt.ESTUDIANTE&&(((R=e.cursos)==null?void 0:R.includes(L.curso||""))||e.profile===Yt.SUBDIRECCION)}).filter(L=>!t.some(R=>R.nombre===L.nombreCompleto)),[n,t,e]),S=_.useMemo(()=>t.filter(L=>L.nombre.toLowerCase().includes(f.toLowerCase())&&(m===""||L.curso===m)&&(x===""||L.dificultad===x)).sort((L,R)=>L.nombre.localeCompare(R.nombre)),[t,f,m,x]),T=_.useMemo(()=>n.filter(L=>L.profile===Yt.PROFESORADO).map(L=>L.nombreCompleto).sort(),[n]);return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),o.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?o.jsxs("div",{className:"text-center py-10",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),o.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):o.jsxs(o.Fragment,{children:[y==="dashboard"&&o.jsxs("div",{className:"space-y-8",children:[o.jsx($Ye,{estudiantes:t}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),o.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),o.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(L=>o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:L.nombre}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L.curso," - ",L.dificultad]})]}),o.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},L.id)),t.length===0&&o.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📚"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),o.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),o.jsx(Vq,{estudiantesDisponibles:E,onSelect:L=>d(L)})]})]}),y==="lista"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",S.length,")"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>F("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),o.jsx("button",{onClick:()=>F("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),o.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:L=>h(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),o.jsxs("select",{value:m,onChange:L=>g(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todos los Cursos"}),Ns.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),o.jsxs("select",{value:x,onChange:L=>v(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todas las Dificultades"}),m_.map(L=>o.jsx("option",{value:L,children:L},L))]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-blue-600",children:S.length}),o.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-green-600",children:t.length}),o.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((L,R)=>L+(R.alertas||[]).filter(j=>!j.resuelta).length,0)}),o.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[o.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(L=>L.curso)).size}),o.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),o.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[S.map(L=>{var R;return o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),(L.alertas||[]).filter(j=>!j.resuelta).length>0&&o.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(L.alertas||[]).filter(j=>!j.resuelta).length," alertas"]})]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[L.curso," - ",L.dificultad]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[o.jsxs("span",{children:[((R=L.intervenciones)==null?void 0:R.length)||0," intervenciones"]}),o.jsxs("span",{children:[(L.metasProgreso||[]).filter(j=>j.cumplida).length," metas cumplidas"]}),L.fechaActualizacionApoyos&&o.jsxs("span",{children:["Últ. actualización: ",new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsx("button",{onClick:()=>c(L),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),o.jsx("button",{onClick:()=>k(L.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},L.id)}),S.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),o.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||m||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||m||x)&&o.jsx("button",{onClick:()=>{h(""),g(""),v("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),o.jsx(Vq,{estudiantesDisponibles:E,onSelect:L=>d(L)})]})]}),u&&o.jsx(GYe,{student:u,onClose:()=>d(null),onConfirm:(L,R)=>{N(L,R),d(null)}}),l&&o.jsx(KYe,{student:l,onClose:()=>c(null),onSave:B,profesores:T})]})},ace="asistencia_dual",qYe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},WYe=(e,t)=>{const r=zt(vt(ft,ace),Br("emailEstudiante","==",e),hr("fechaHora","desc"));return fr(r,a=>{const s=a.docs.map(i=>qYe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},XYe=async e=>{try{const t={...e,fechaHora:ir.fromDate(new Date(e.fechaHora))};await hn(vt(ft,ace),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},YYe=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),JYe=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),ZYe=({currentUser:e})=>{const[t,r]=_.useState(e.curso||""),[n,a]=_.useState([]),[s,i]=_.useState(!1),[l,c]=_.useState(!0),[u,d]=_.useState(null);_.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=WYe(e.email,m=>{a(m),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async m=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:m.coords.latitude,longitud:m.coords.longitude}};try{await XYe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},m=>{console.error("Geolocation error:",m);let g="No se pudo obtener la ubicación.";switch(m.code){case m.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case m.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case m.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${m.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),o.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),o.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"-- Mi curso --"}),qp.map(h=>o.jsx("option",{value:h,children:h},h))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[o.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),o.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&o.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&o.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),o.jsx("div",{className:"overflow-x-auto max-h-96",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:o.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?o.jsx(YYe,{}):o.jsx(JYe,{}),h.tipo]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},eJe=async()=>{try{console.log("🔍 Debugging users collection...");const e=vt(wr,"users"),t=zt(e,Rd(10)),r=await Tn(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const l=s.data(),c={id:s.id,data:l,fields:Object.keys(l)};n.sampleDocs.push(c),Object.keys(l).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(l=>s in l.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},tJe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=ir.fromDate(r),s=ir.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],l={};for(const f of i)try{const h=vt(wr,f);try{const m=zt(h,Br("fechaHora",">=",a),Br("fechaHora","<=",s)),g=await Tn(m);l[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const v of g)try{const y=zt(h,Br(v,">=",a),Br(v,"<=",s)),w=await Tn(y);l[f]={exists:!0,hasDateField:v,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const v=zt(h,hr("__name__"),Rd(5)),y=await Tn(v);l[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){l[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",l),l},rJe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=ir.fromDate(a),l=ir.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((m,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const v=x.getDate();return m[v]=(m[v]||0)+1,m},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const m=vt(wr,h),g=zt(m,Br("fechaHora",">=",i),Br("fechaHora","<=",l),hr("fechaHora","desc")),x=fr(g,v=>{console.log(`📋 ${h}: ${v.size} documentos encontrados con filtro`),v.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),v.docs.forEach((w,N)=>{var B;if(N<5){const k=w.data();let F;(B=k.fechaHora)!=null&&B.toDate?F=k.fechaHora.toDate():typeof k.fechaHora=="string"?F=new Date(k.fechaHora):F=new Date,console.log(`   ${N+1}. ${k.emailEstudiante} - ${F.toLocaleString()} - ${k.tipo}`),console.log(`      📅 Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),v.forEach(w=>{var E;const N=w.data();let B;(E=N.fechaHora)!=null&&E.toDate?B=N.fechaHora.toDate():typeof N.fechaHora=="string"?B=new Date(N.fechaHora):N.fechaHora instanceof Date?B=N.fechaHora:N.fechaHora?B=new Date(N.fechaHora):B=new Date;const k={id:w.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:B,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},F=`${h}_${w.id}`;u.set(F,k)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},v=>{console.warn(`⚠️ Error con filtro en ${h}:`,v),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=zt(m,Rd(200)),w=fr(y,B=>{if(console.log(`📋 ${h} (sin filtro): ${B.size} documentos`),B.size>0){const F=B.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(F)),console.log("📄 Primer documento:",F)}const k=B.docs.filter(F=>{var T;const E=F.data();if(!E.fechaHora)return!1;let S;return(T=E.fechaHora)!=null&&T.toDate?S=E.fechaHora.toDate():typeof E.fechaHora=="string"?S=new Date(E.fechaHora):E.fechaHora instanceof Date?S=E.fechaHora:S=new Date(E.fechaHora),S>=a&&S<=s});console.log(`📅 ${h}: ${k.length} registros después de filtro manual`),k.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),k.forEach(E=>{var j;const S=E.data();let T;(j=S.fechaHora)!=null&&j.toDate?T=S.fechaHora.toDate():typeof S.fechaHora=="string"?T=new Date(S.fechaHora):S.fechaHora instanceof Date?T=S.fechaHora:T=new Date(S.fechaHora);const L={id:E.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:T,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},R=`${h}_${E.id}`;u.set(R,L)}),d())}),N=c.findIndex(B=>B===x);N>=0?c[N]=w:c.push(w)});c.push(x)}catch(m){console.warn(`❌ Error configurando ${h}:`,m)}}),()=>{c.forEach(h=>{try{h()}catch(m){console.warn("Error unsubscribing:",m)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},nJe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const l=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${l.length}`);const c=l.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=l.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(l)};let i=!1;return r.forEach(l=>{try{const c=vt(wr,l),u=zt(c),d=fr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${l}`),i=!0,Array.from(a.keys()).filter(m=>m.startsWith(`${l}_`)).forEach(m=>a.delete(m)),f.forEach(m=>{var g,x,v,y;try{const w=m.data(),N=w.email||w.userEmail||w.mail||w.correo||"",B=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",k=w.curso||w.course||w.class||w.grade||"";let F=w.profile||w.role||w.tipo||w.userType||Yt.ESTUDIANTE;if(typeof F=="string"){const T=F.toLowerCase();T.includes("estudiante")||T.includes("student")||T.includes("alumno")?F=Yt.ESTUDIANTE:T.includes("coordinador")||T.includes("coordinator")?F=Yt.COORDINADOR_TP:T.includes("profesor")||T.includes("teacher")||T.includes("docente")?F=Yt.PROFESOR:(T.includes("subdireccion")||T.includes("subdir"))&&(F=Yt.COORDINADOR_TP)}const E={id:m.id,email:N,nombreCompleto:B,curso:k,profile:F,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(v=w.ultimaActividad)==null?void 0:v.toDate)==null?void 0:y.call(v))||new Date(w.ultimaActividad)||new Date,...w},S=`${l}_${m.id}`;a.set(S,E)}catch(w){console.warn(`Error procesando documento ${m.id} en ${l}:`,w)}}),s()):console.log(`⚪ Colección ${l}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${l}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${l}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(l=>{try{l()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},aJe=(e,t)=>{try{console.log("Setting up users subscription...");const r=vt(wr,"users"),n=zt(r);return fr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,m,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const v=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let N=x.profile||x.role||x.tipo||Yt.ESTUDIANTE;if(typeof N=="string"){const k=N.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?N=Yt.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?N=Yt.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?N=Yt.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(N=Yt.COORDINADOR_TP)}const B={id:d.id,email:v,nombreCompleto:y,curso:w,profile:N,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(m=x.ultimaActividad)==null?void 0:m.toDate)==null?void 0:g.call(m))||new Date(x.ultimaActividad)||new Date,...x};i.push(B)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const l=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",l);const c=i.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},xN=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},sJe=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),iJe=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),oJe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(new Date),[d,f]=_.useState("todos"),[h,m]=_.useState("");_.useEffect(()=>{s(!0),l(null);const F=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",F,"Mes:",E);let S=!1,T=!1;const L=()=>{S&&T&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const j=vt(wr,"asistencia_dual"),P=zt(j,Rd(5)),M=await Tn(P);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${M.size}`),M.size>0)M.docs.forEach((Z,V)=>{const W=Z.data();console.log(`   ${V+1}. ${Z.id.slice(0,8)} - ${W.emailEstudiante} - ${W.tipo}`),console.log("      Fecha original:",W.fechaHora),console.log("      Todos los campos:",Object.keys(W))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const Z=["asistenciaEmpresa","asistencia_empresa"];for(const V of Z)try{const W=vt(wr,V),G=zt(W,Rd(3)),K=await Tn(G);if(console.log(`📋 ${V}: ${K.size} documentos`),K.size>0){const ee=K.docs[0].data();console.log("   Estructura:",Object.keys(ee)),console.log("   Email:",ee.emailEstudiante||ee.email),console.log("   Fecha:",ee.fechaHora||ee.fecha)}}catch(W){console.log(`❌ ${V}: ${W instanceof Error?W.message:"Error"}`)}}}catch(j){console.error("❌ Error en prueba directa:",j),j.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):j.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),tJe(F,E).then(j=>{console.log("🔍 Debug info for collections:",j),Object.entries(j).forEach(([P,M])=>{if(M.exists&&M.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${P.toUpperCase()}:`),console.log(`   📊 Total documentos: ${M.totalDocs}`),console.log(`   📅 Documentos del período: ${M.count}`),console.log(`   🔑 Campo de fecha: ${M.hasDateField}`),M.sampleDoc){console.log("   📄 Documento ejemplo:",M.sampleDoc);const Z=M.sampleDoc,V=Z.emailEstudiante||Z.email||Z.userEmail||Z.correo||"NO ENCONTRADO",W=Z.tipo||Z.type||Z.action||Z.tipoRegistro||"NO ENCONTRADO",G=Z.fechaHora||Z.fecha||Z.timestamp||Z.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${V}`),console.log(`   📝 Tipo registro: ${W}`),console.log(`   📅 Fecha: ${G}`),console.log("   🗂️ Todos los campos:",Object.keys(Z))}M.filteredDocs&&M.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",M.filteredDocs.length),M.filteredDocs.forEach((Z,V)=>{V<3&&console.log(`      ${V+1}. ID: ${Z.id}`,Z.data)}))}else M.exists?console.log(`⚪ Colección ${P}: vacía`):console.log(`❌ Colección ${P}: no existe`)})}).catch(j=>{console.error("Debug error:",j)}),eJe().then(j=>{console.log("🔍 Debug info for users:",j),(!j.exists||j.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async M=>{var Z;try{const V=vt(wr,M),W=zt(V,Rd(5)),G=await Tn(W);G.size>0?(console.log(`✅ Encontrada colección alternativa: ${M} con ${G.size} documentos`),console.log("Documento muestra:",(Z=G.docs[0])==null?void 0:Z.data())):console.log(`❌ Colección ${M}: vacía`)}catch{console.log(`❌ Colección ${M}: no existe`)}}))}).catch(j=>{console.error("Users debug error:",j)});try{console.log("Configurando suscripción a asistencia...");const j=rJe(F,E,M=>{if(console.log("✅ Received registros:",M.length),M.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",M[0]);const Z=[...new Set(M.map(X=>X.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",Z);const V=[...new Set(M.map(X=>X.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",V);const W=M.reduce((X,D)=>{const Q=new Date(D.fechaHora).getDate();return X[Q]||(X[Q]=[]),X[Q].push(D),X},{});console.log("📅 Registros por día del mes:",Object.keys(W).map(X=>({dia:parseInt(X),cantidad:W[parseInt(X)].length})));const G=r.map(X=>X.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",G);const K=Z.filter(X=>G.includes(X)),ee=Z.filter(X=>!G.includes(X));console.log("✅ Emails que coinciden:",K),console.log("❌ Emails que NO coinciden:",ee)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(M),S=!0,L()},M=>{console.error("❌ Error fetching asistencia:",M),l("Error al cargar datos de asistencia: "+M.message),S=!0,L()});console.log("Configurando suscripción a usuarios...");const P=nJe(M=>{if(console.log("✅ Received users (multi-collection):",M.length),M.length>0){console.log("Sample user:",M[0]);const Z=M.filter(V=>V.profile===Yt.ESTUDIANTE&&V.curso);console.log("Dual students found:",Z.length),Z.forEach(V=>{console.log(`- ${V.nombreCompleto} (${V.curso}) - ${V.email}`)})}n(M),T=!0,L()},M=>{console.error("❌ Error fetching users (multi-collection):",M),console.log("🔄 Intentando con función original de usuarios...");const Z=aJe(V=>{console.log("✅ Received users (fallback):",V.length),n(V),T=!0,L()},V=>{console.error("❌ Error en fallback también:",V),l("Error al cargar estudiantes: "+M.message),T=!0,L()})});return()=>{console.log("Limpiando suscripciones..."),j&&j(),P&&P()}}catch(j){console.error("❌ Error setting up subscriptions:",j),l("Error al inicializar conexiones: "+(j instanceof Error?j.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:v}=_.useMemo(()=>{const F=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(F,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:F}},[c]),y=_.useMemo(()=>{let F=r.filter(E=>E.profile===Yt.ESTUDIANTE&&E.curso&&qp.includes(xN(E.curso)));if(d!=="todos"&&(F=F.filter(E=>xN(E.curso||"")===d)),h&&(F=F.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(L=>L.emailEstudiante).filter(Boolean))],S=F.map(L=>L.email),T=E.filter(L=>!S.includes(L));if(T.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",T);const R=T.map(j=>{const P=e.find(M=>M.emailEstudiante===j);return{id:j,email:j,nombreCompleto:(P==null?void 0:P.nombreEstudiante)||j.split("@")[0],curso:(P==null?void 0:P.curso)||"3ºC",profile:Yt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(j=>{const P=d==="todos"||xN(j.curso)===d,M=!h||j.nombreCompleto.toLowerCase().includes(h.toLowerCase());return P&&M&&qp.includes(xN(j.curso))});F=[...F,...R]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${F.length}`),F.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),F.sort((E,S)=>E.nombreCompleto.localeCompare(S.nombreCompleto))},[r,d,h,e]),w=_.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const F=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),F):(e.forEach((E,S)=>{const T=E.emailEstudiante;if(!T)return;let L;if(E.fechaHora instanceof Date)L=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)L=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")L=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const R=L.getDate(),j=L.getMonth(),P=L.getFullYear();S<3&&console.log(`📅 Registro ${S+1}:`,{email:T,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:L.toLocaleString(),año:P,mes:j,día:R}),F.has(T)||F.set(T,new Map);const M=F.get(T);M.has(R)||M.set(R,{});const Z=M.get(R);E.tipo==="Entrada"?(!Z.entrada||L<new Date(Z.entrada.fechaHora))&&(Z.entrada=E):E.tipo==="Salida"&&(!Z.salida||L>new Date(Z.salida.fechaHora))&&(Z.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:F.size,estudiantes:Array.from(F.keys()),registrosPorEstudiante:Array.from(F.entries()).map(([E,S])=>({email:E,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((T,L)=>T+(L.entrada?1:0)+(L.salida?1:0),0)}))}),F)},[e]),N=F=>{u(E=>{const S=new Date(E);return S.setMonth(S.getMonth()+F),S})},B=F=>{F!=null&&F.latitud&&(F!=null&&F.longitud)&&window.open(`https://www.google.com/maps?q=${F.latitud},${F.longitud}`,"_blank")},k=["D","L","M","M","J","V","S"];return i?o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:o.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[o.jsx("button",{onClick:()=>N(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),o.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${v}`}),o.jsx("button",{onClick:()=>N(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),o.jsxs("select",{value:d,onChange:F=>f(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"todos",children:"Todos los Cursos"}),qp.map(F=>o.jsx("option",{value:F,children:F},F))]}),o.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:F=>m(F.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?o.jsxs("div",{className:"text-center text-amber-600 py-10",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),o.jsx("div",{children:"Cargando datos de asistencia..."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(F,E)=>{const T=new Date(v,c.getMonth(),E+1).getDay(),L=T===0||T===6;return o.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[o.jsx("div",{className:"font-semibold",children:k[T]}),o.jsx("div",{children:E+1})]},E)})]})}),o.jsx("tbody",{children:y.length>0?y.map(F=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[o.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:F.nombreCompleto}),Array.from({length:g},(E,S)=>{var P;const T=S+1,L=(P=w.get(F.email))==null?void 0:P.get(T),R=new Date(v,c.getMonth(),S+1),j=R.getDay()===0||R.getDay()===6;return F.email==="alexis.robles@industrialderecoleta.cl"&&T===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:F.email,day:T,hasDataForStudent:w.has(F.email),studentDayRecords:L,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(F.email)?Array.from(w.get(F.email).keys()):[]}),o.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${j?"bg-slate-100 dark:bg-slate-700/50":""}`,children:o.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(L==null?void 0:L.entrada)&&o.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return B((M=L.entrada)==null?void 0:M.ubicacion)},children:[o.jsx(sJe,{}),o.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(L==null?void 0:L.salida)&&o.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return B((M=L.salida)==null?void 0:M.ubicacion)},children:[o.jsx(iJe,{}),o.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(L.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},T)})]},F.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},Qk="evaluaciones_formativas",Hk="calificaciones_formativas",iM="trabajos_grupales_formativos",lJe="usuarios",oM=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},cJe=(e,t,r)=>{const n=zt(vt(ft,Qk),Br("curso","==",e),Br("asignatura","==",t),hr("fecha","asc"));return fr(n,a=>{r(a.docs.map(s=>oM(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},uJe=async(e,t)=>{const r=Lg(ft),n=sr(vt(ft,Qk));r.set(n,{...e,fecha:ir.fromDate(new Date(e.fecha+"T00:00:00"))});const a=sr(ft,Hk,n.id);return r.set(a,t),await r.commit(),n.id},dJe=async(e,t)=>{const r=sr(ft,Qk,e);await bi(r,t,{merge:!0})},AJe=async e=>{const t=Lg(ft);t.delete(sr(ft,Qk,e)),t.delete(sr(ft,Hk,e)),await t.commit()},fJe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=sr(ft,Hk,n);return fr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},hJe=async(e,t)=>{const r=sr(ft,Hk,e);await bi(r,t,{merge:!0})},mJe=(e,t,r)=>{const n=zt(vt(ft,iM),Br("curso","==",e),Br("asignatura","==",t),hr("fechaPresentacion","desc"));return fr(n,a=>{r(a.docs.map(s=>oM(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},pJe=async e=>{const t={...e,fechaPresentacion:ir.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await hn(vt(ft,iM),t)},gJe=async(e,t)=>{const r=sr(ft,iM,e);await bi(r,t,{merge:!0})},xJe=e=>{const t=zt(vt(ft,lJe));return fr(t,r=>{e(r.docs.map(n=>oM(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},sce=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},vv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},ice=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},vJe=({cursos:e,onSelect:t})=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=ice(r);return o.jsxs("div",{className:"space-y-2 text-center",children:[o.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[o.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),o.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[o.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),o.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),o.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):o.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[o.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),bJe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=ice(e);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),o.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>o.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[o.jsx("span",{className:"text-2xl",children:vv[s]||vv.Default}),o.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):o.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[o.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},yJe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=_.useState([]),[i,l]=_.useState({}),[c,u]=_.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=_.useState(null),[h,m]=_.useState(null),[g,x]=_.useState(!0),v=_.useMemo(()=>r.filter(S=>S.profile===Yt.ESTUDIANTE&&sce(S.curso||"")===e).map(S=>S.nombreCompleto).sort((S,T)=>S.localeCompare(T)),[r,e]);_.useEffect(()=>{x(!0);const S=cJe(e,t,T=>{s(T);const L=T.map(j=>j.id),R=fJe(L,j=>{l(P=>({...P,...j}))});return x(!1),()=>R()});return()=>S()},[e,t]);const y=S=>{const{name:T,value:L}=S.target;d?f(R=>R?{...R,[T]:L}:null):u(R=>({...R,[T]:L}))},w=async S=>{if(S.preventDefault(),m(null),!c.nombreActividad.trim()){m("El nombre de la actividad es obligatorio.");return}const T={asignatura:t,curso:e,...c},L=v.reduce((R,j)=>(R[j]="trabajado",R),{});try{await uJe(T,L),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(R){console.error(R),m("No se pudo crear la evaluación.")}},N=(S,T)=>{var P;const L=((P=i[S])==null?void 0:P[T])||"trabajado";let R;L==="trabajado"?R="no trabajado":L==="no trabajado"?R="ausente":R="trabajado";const j={...i,[S]:{...i[S]||{},[T]:R}};l(j),hJe(S,{[T]:R}).catch(M=>{console.error("Error updating grade:",M)})},B=S=>f(S),k=async()=>{if(d)try{await dJe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(S){console.error(S),m("No se pudo guardar la edición.")}},F=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await AJe(S)}catch(T){console.error(T),m("No se pudo eliminar la evaluación.")}},E=_.useCallback(S=>{if(a.length===0)return"-";let T=0,L=0;return a.forEach(R=>{var P;const j=(P=i[R.id])==null?void 0:P[S];j==="trabajado"?(T+=7,L++):j==="no trabajado"&&(T+=2,L++)}),L===0?"-":(T/L).toFixed(1)},[i,a]);return g?o.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),o.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),o.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),o.jsxs("div",{className:"w-full",children:[o.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),o.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{className:"w-full",children:[o.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),o.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx("div",{className:"w-full",children:o.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&o.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>o.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),o.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),o.jsx("button",{onClick:k,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"font-semibold",children:S.nombreActividad}),o.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),o.jsxs("div",{className:"flex gap-2 mt-1",children:[o.jsx("button",{onClick:()=>B(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),o.jsx("button",{onClick:()=>F(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),o.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:v.map(S=>o.jsxs("tr",{children:[o.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(T=>{var j;const L=(j=i[T.id])==null?void 0:j[S];let R;return L==="trabajado"?R=vv[t]||vv.Default:L==="no trabajado"?R="❌":L==="ausente"?R="A":R=vv[t]||vv.Default,o.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:o.jsx("button",{onClick:()=>N(T.id,S),className:`text-3xl transition-opacity duration-200 ${L==="trabajado"?"opacity-100":L==="no trabajado"?"opacity-40":L==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:R})},T.id)}),o.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(S)})]},S))})]})})]})},wJe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=_.useState([]),[i,l]=_.useState(null),[c,u]=_.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=_.useState({}),[h,m]=_.useState(2),g=_.useMemo(()=>r.filter(B=>B.profile===Yt.ESTUDIANTE&&sce(B.curso||"")===e).sort((B,k)=>B.nombreCompleto.localeCompare(k.nombreCompleto)),[r,e]);_.useEffect(()=>{const B=mJe(e,t,s);return()=>B()},[e,t]),_.useEffect(()=>{if(i){const B={};i.grupos.forEach(k=>{k.integrantes.forEach(F=>{B[F.nombre]={groupNumber:String(k.numero),role:F.rol||""}})}),f(B)}else f({})},[i]);const x=async B=>{if(B.preventDefault(),!c.nombre.trim())return;const k={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await pJe(k),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(F){console.error(F),alert("No se pudo crear la actividad grupal.")}},v=async()=>{if(!i)return;const B=new Map;for(const F of g){const E=d[F.nombreCompleto];if(E&&E.groupNumber){const S=parseInt(E.groupNumber,10);isNaN(S)||(B.has(S)||B.set(S,[]),B.get(S).push({nombre:F.nombreCompleto,rol:E.role||""}))}}const k=Array.from(B.entries()).map(([F,E])=>({numero:F,integrantes:E})).sort((F,E)=>F.numero-E.numero);try{await gJe(i.id,{grupos:k}),alert("Grupos guardados con éxito.")}catch(F){console.error(F),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const B=[...g].sort(()=>Math.random()-.5),k={};B.forEach((F,E)=>{var S;k[F.nombreCompleto]={groupNumber:String(E%h+1),role:((S=d[F.nombreCompleto])==null?void 0:S.role)||""}}),f(k)},w=(B,k,F)=>{f(E=>({...E,[B]:{...E[B]||{groupNumber:"",role:""},[k]:F}}))},N=_.useMemo(()=>{const B=new Map;return Object.entries(d).forEach(([k,F])=>{F.groupNumber&&(B.has(F.groupNumber)||B.set(F.groupNumber,[]),B.get(F.groupNumber).push({nombre:k,rol:F.role}))}),Array.from(B.entries()).sort((k,F)=>parseInt(k[0])-parseInt(F[0]))},[d]);return i?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),o.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),o.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-1 space-y-4",children:[o.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",value:h,onChange:B=>m(parseInt(B.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),o.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),o.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),o.jsx("table",{className:"w-full text-sm",children:o.jsx("tbody",{children:g.map(B=>{var k;return o.jsxs("tr",{children:[o.jsx("td",{className:"py-1 pr-2",children:B.nombreCompleto}),o.jsx("td",{className:"py-1",children:o.jsx("input",{type:"number",value:((k=d[B.nombreCompleto])==null?void 0:k.groupNumber)||"",onChange:F=>w(B.nombreCompleto,"groupNumber",F.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},B.id)})})})]})]}),o.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:N.map(([B,k])=>o.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[o.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",B]}),o.jsx("ul",{className:"space-y-2",children:k.map(F=>o.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"flex-1 truncate",children:F.nombre}),o.jsxs("select",{value:F.rol||"",onChange:E=>w(F.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[o.jsx("option",{value:"",children:"-- Asignar Rol --"}),Vee.map(E=>o.jsx("option",{value:E,children:E},E))]})]},F.nombre))})]},B))})]})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),o.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),o.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[o.jsx("input",{value:c.nombre,onChange:B=>u({...c,nombre:B.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),o.jsx("input",{type:"date",value:c.fecha,onChange:B=>u({...c,fecha:B.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(B=>o.jsxs("button",{onClick:()=>l(B),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[o.jsx("p",{className:"font-bold",children:B.nombreActividad}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",B.fechaPresentacion]})]},B.id))]})]})},EJe=({currentUser:e})=>{const[t,r]=_.useState("calificaciones"),[n,a]=_.useState(null),[s,i]=_.useState(null),[l,c]=_.useState([]),[u,d]=_.useState(!0);_.useEffect(()=>{d(!0);const x=xJe(v=>{c(v),d(!1)});return()=>x()},[]);const f=_.useMemo(()=>e.cursos||[],[e.cursos]),h=_.useMemo(()=>e.asignaturas||[],[e.asignaturas]),m=({tab:x,label:v})=>o.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:v}),g=()=>{if(u)return o.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return o.jsx(vJe,{cursos:f,onSelect:a});if(!s)return o.jsx(bJe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return o.jsx(yJe,{curso:n,asignatura:s,allUsers:l,onBack:()=>i(null)});if(t==="grupos")return o.jsx(wJe,{curso:n,asignatura:s,allUsers:l,onBack:()=>i(null)})};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx(m,{tab:"calificaciones",label:"Calificaciones"}),o.jsx(m,{tab:"grupos",label:"Trabajos Grupales"})]})}),o.jsx("div",{className:"mt-6",children:g()})]})};function CJe(e){return e.map(t=>{const[r,n]=t.minuto.split("-").map(Number),a=t.accionesEstudiantes.length>0?t.accionesEstudiantes.split(" ").length/(n-r):0;return{minuto:r,participacion:Math.min(100,a*10)}})}function NJe(e){const t=new Map,r={preguntas_abiertas:/(?:pregunt[aó]|cu[áa]l|qu[ée]|c[óo]mo|por qu[ée]|explica)/gi,interrogacion_sucesiva:/(?:entonces|y luego|qu[ée] m[áa]s|profundiza|explica mejor)/gi,ejemplos_contextualizados:/(?:ejemplo|caso|situaci[óo]n|contexto real|en la vida)/gi,feedback_inmediato:/(?:bien|correcto|exacto|muy bien|as[íi] es|mejorar[íi]a)/gi};for(const[n,a]of Object.entries(r)){const s=e.match(a);t.set(n,s?s.length:0)}return t}async function _Je(e,t){var i;const r={stats:{docenteId:e.docenteInfo||"",curso:e.cursoInfo||"",asignatura:e.asignaturaInfo||"",conteo_observaciones:1,uso_preguntas_abiertas_pct:0,uso_interrogacion_sucesiva_pct:0,uso_ejemplos_contextualizados_pct:0,feedback_inmediato_pct:0,min_interaccion:0,min_explicacion:0,participacion_promedio:0},charts:{participacion_por_minuto:[],estrategias_frecuencia:[],indicadores_cumplimiento:[],nube_palabras:[]},summary:{fortalezas:[],mejoras:[],recomendaciones:[]},alerts:[],traza:{modelo:"gemini-2.5-flash-lite",version_prompt:"v1"}};if(e.detallesObservacion){r.charts.participacion_por_minuto=CJe(e.detallesObservacion);let l=0,c=0;e.detallesObservacion.forEach(u=>{const[d,f]=u.minuto.split("-").map(Number),h=f-d;u.accionesEstudiantes.length>u.accionesDocente.length?l+=h:c+=h}),r.stats.min_interaccion=l,r.stats.min_explicacion=c}const n=new Map;let a=0;(i=e.detallesObservacion)==null||i.forEach(l=>{NJe(l.accionesDocente).forEach((u,d)=>{n.set(d,(n.get(d)||0)+u)}),a+=l.accionesDocente.length}),n.forEach((l,c)=>{const u=a>0?l/a*100:0;switch(r.charts.estrategias_frecuencia.push({estrategia:c,porcentaje:Math.round(u*100)/100,conteo:l}),c){case"preguntas_abiertas":r.stats.uso_preguntas_abiertas_pct=u;break;case"interrogacion_sucesiva":r.stats.uso_interrogacion_sucesiva_pct=u;break;case"ejemplos_contextualizados":r.stats.uso_ejemplos_contextualizados_pct=u;break;case"feedback_inmediato":r.stats.feedback_inmediato_pct=u;break}}),r.charts.participacion_por_minuto.length>0&&(r.stats.participacion_promedio=r.charts.participacion_por_minuto.reduce((l,c)=>l+c.participacion,0)/r.charts.participacion_por_minuto.length);const s=[...n.entries()].sort(([,l],[,c])=>c-l);return r.summary.fortalezas=s.slice(0,3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Uso efectivo de preguntas abiertas para promover el pensamiento crítico";case"interrogacion_sucesiva":return"Buena secuencia de preguntas para profundizar la comprensión";case"ejemplos_contextualizados":return"Excelente uso de ejemplos contextualizados";case"feedback_inmediato":return"Retroalimentación inmediata y efectiva";default:return`Buen uso de ${l.replace(/_/g," ")}`}}),r.summary.mejoras=s.slice(-3).map(([l])=>{switch(l){case"preguntas_abiertas":return"Aumentar el uso de preguntas abiertas";case"interrogacion_sucesiva":return"Desarrollar más secuencias de preguntas";case"ejemplos_contextualizados":return"Incorporar más ejemplos contextualizados";case"feedback_inmediato":return"Proporcionar más retroalimentación inmediata";default:return`Incrementar el uso de ${l.replace(/_/g," ")}`}}),r.summary.recomendaciones=r.summary.mejoras.map(l=>l.includes("preguntas abiertas")?"Preparar 2-3 preguntas desafiantes por segmento de clase":l.includes("secuencias de preguntas")?'Implementar la técnica de "¿Por qué?" en cascada':l.includes("ejemplos contextualizados")?"Vincular cada concepto con situaciones de la vida real":"Establecer puntos de verificación cada 10-15 minutos"),r.stats.participacion_promedio<30&&r.alerts.push("Baja participación estudiantil detectada"),r.stats.min_explicacion>r.stats.min_interaccion*2&&r.alerts.push("Alto tiempo de explicación vs. interacción"),r}const SJe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const[n,a]=_.useState(null),[s,i]=_.useState(null),[l,c]=_.useState(!1),u=e.length,d=Object.values(t).reduce((y,w)=>y+w.length,0)+r.length,f=[...Object.values(t).flat(),...r],h=new Set([...e.map(y=>y.docente),...f.map(y=>y.docenteInfo)]).size,m=f.reduce((y,w)=>{const N=new Date(w.fecha).toLocaleDateString("es-ES",{month:"long"});return y[N]=(y[N]||0)+1,y},{}),g=f.reduce((y,w)=>(w.asignaturaInfo&&(y[w.asignaturaInfo]=(y[w.asignaturaInfo]||0)+1),y),{}),x=Object.entries(g).sort(([,y],[,w])=>w-y).slice(0,5);f.reduce((y,w)=>{if(!w.horaInicio||!w.horaTermino)return y;const N=new Date("2000/01/01 "+w.horaInicio),k=(new Date("2000/01/01 "+w.horaTermino).getTime()-N.getTime())/(1e3*60);return y+k},0)/f.length;const v=f.filter(y=>{var w,N,B;return((w=y.retroalimentacion)==null?void 0:w.exito)&&((N=y.retroalimentacion)==null?void 0:N.modelo)&&((B=y.retroalimentacion)==null?void 0:B.foco)}).length;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:o.jsx(Ld,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompañamientos"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:u})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:o.jsx(Ip,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(Nl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:h})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:o.jsx(Bi,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentación Completa"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(ac,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),o.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([y,w])=>o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:y}),o.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),o.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${w/d*100}%`}})})]})},y))})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Hw,{className:"w-5 h-5 text-purple-600"}),"Análisis Inteligente"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Seleccionar Ciclo OPR para Análisis"}),o.jsxs("select",{className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",value:(s==null?void 0:s.id)||"",onChange:y=>{const w=f.find(N=>N.id===y.target.value);i(w||null)},children:[o.jsx("option",{value:"",children:"Seleccione un ciclo..."}),f.map(y=>o.jsxs("option",{value:y.id,children:[y.docenteInfo," - ",new Date(y.fecha).toLocaleDateString()]},y.id))]})]}),s&&!n&&o.jsx("button",{onClick:async()=>{c(!0);try{const y=f.filter(N=>N.docenteInfo===s.docenteInfo&&N.id!==s.id),w=await _Je(s,y);a(w)}catch(y){console.error("Error al analizar ciclo:",y)}finally{c(!1)}},className:"w-full py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",disabled:l,children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Analizando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Hw,{className:"w-4 h-4"}),"Analizar Ciclo"]})}),n&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Participación"}),o.jsxs("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[n.stats.participacion_promedio.toFixed(1),"%"]})]}),o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Interacción vs Explicación"}),o.jsxs("div",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:[n.stats.min_interaccion,"min / ",n.stats.min_explicacion,"min"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-green-700 dark:text-green-300 mb-2 flex items-center gap-1",children:[o.jsx(Bi,{className:"w-4 h-4"})," Fortalezas"]}),o.jsx("ul",{className:"space-y-2",children:n.summary.fortalezas.map((y,w)=>o.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),y]},w))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center gap-1",children:[o.jsx(s1,{className:"w-4 h-4"})," Áreas de Mejora"]}),o.jsx("ul",{className:"space-y-2",children:n.summary.mejoras.map((y,w)=>o.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),y]},w))})]})]}),n.alerts.length>0&&o.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[o.jsxs("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2 flex items-center gap-1",children:[o.jsx($u,{className:"w-4 h-4"})," Alertas"]}),o.jsx("ul",{className:"space-y-2",children:n.alerts.map((y,w)=>o.jsxs("li",{className:"text-sm text-red-600 dark:text-red-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),y]},w))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-1",children:[o.jsx(b_,{className:"w-4 h-4"})," Recomendaciones"]}),o.jsx("ul",{className:"space-y-2",children:n.summary.recomendaciones.map((y,w)=>o.jsxs("li",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),y]},w))})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Gc,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Más Observadas"]}),o.jsx("div",{className:"space-y-2",children:x.map(([y,w])=>o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y}),o.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:w})]}),o.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${w/Math.max(...Object.values(g))*100}%`}})})]})},y))})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(b_,{className:"w-5 h-5 text-blue-600"}),"Últimos Ciclos OPR"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),o.jsx("tbody",{children:f.sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime()).slice(0,5).map(y=>{var w;return o.jsxs("tr",{className:"border-t dark:border-slate-700",children:[o.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:y.docenteInfo}),o.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(y.fecha).toLocaleDateString()}),o.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:y.asignaturaInfo}),o.jsx("td",{className:"py-2 px-3",children:(w=y.retroalimentacion)!=null&&w.exito?o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[o.jsx(Bi,{className:"w-3 h-3"})," Completado"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[o.jsx(s1,{className:"w-3 h-3"})," En proceso"]})})]},y.id)})})]})})]})]})},oce=HP(),bE="acompanamientos",Dm="ciclos_opr",Pm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},lce=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},kJe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=lce(r);return`videos_opr/${n}/${a}/${s}`},jJe=async(e,t,r)=>{try{if(!y_.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=kJe(d,f,h)}else{const d=Date.now(),f=lce(e.name);s=`videos_opr/general/${d}_${f}`}const l=z2(oce,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:y_.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=Obe(l,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",m=>{const g=m.bytesTransferred/m.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},m=>{let g="Error desconocido durante la subida.";switch(m==null?void 0:m.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;default:m!=null&&m.message&&(g=m.message);break}f(new Error(g))},async()=>{try{const m=await D4(u.snapshot.ref);d(m)}catch{f(new Error("El archivo se subió, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},lM=async e=>{try{const t=z2(oce,e),{items:r,prefixes:n}=await Dbe(t);await Promise.all(r.map(a=>Pbe(a))),await Promise.all(n.map(a=>lM(a.fullPath)))}catch{}},BJe=async()=>{try{const e=zt(vt(ft,bE),hr("fecha","desc"));return(await Tn(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Pm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompañamientos")}},TJe=async e=>{try{const t={...e,fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()},r=await hn(vt(ft,bE),t);return{...e,id:r.id,fecha:Pm(e.fecha)}}catch{throw new Error("No se pudo crear el acompañamiento")}},IJe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:ir.fromDate(new Date(t.fecha))}:{},fechaModificacion:ir.now()};await cc(sr(ft,bE,e),r)}catch{throw new Error("No se pudo actualizar el acompañamiento")}},FJe=async e=>{try{const t=zt(vt(ft,Dm),Br("acompanamientoId","==",e)),r=await Tn(t),n=Lg(ft);r.forEach(a=>n.delete(sr(ft,Dm,a.id))),await n.commit(),await lM(`videos_opr/${e}`),await Ra(sr(ft,bE,e))}catch{throw new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},$q=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:ir.fromDate(new Date(e.fecha)),fechaCreacion:ir.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:ir.fromDate(new Date(e.seguimiento.fecha))});const n=await hn(vt(ft,Dm),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Pm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},OJe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=ir.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:ir.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=ir.now(),await cc(sr(ft,Dm,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},DJe=async e=>{try{const t=zt(vt(ft,Dm),Br("acompanamientoId","==",e),hr("fecha","desc"));return(await Tn(t)).docs.map(a=>{var l;const s=a.data(),i={id:a.id,...s,fecha:Pm(s==null?void 0:s.fecha)};return(l=s==null?void 0:s.seguimiento)!=null&&l.fecha&&(i.seguimiento={...s.seguimiento,fecha:Pm(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el índice compuesto (acompanamientoId + fecha).")}},PJe=async()=>{try{const e=zt(vt(ft,Dm),Br("acompanamientoId","==",""),hr("fecha","desc"));return(await Tn(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:Pm(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:Pm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},Gq=async e=>{try{const t=await Rg(sr(ft,Dm,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await lM(`videos_opr/${n}/${e}`),await Ra(sr(ft,Dm,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},RJe=async e=>{try{const t=zt(vt(ft,bE),Br("docente","==",e),hr("fecha","desc"));return(await Tn(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Pm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompañamientos del docente")}},LJe=async e=>{try{const t=zt(vt(ft,"rubricas_personalizadas"),Br("docente","==",e)),r=await Tn(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},MJe=async()=>await qle(),UJe=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:i="video/mp4,video/quicktime,video/avi,video/mov",error:l,progress:c=0,allowLink:u=!1})=>{const[d,f]=_.useState(!1),[h,m]=_.useState(!1),[g,x]=_.useState(""),v=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),f(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const S=E.dataTransfer.files[0];B(S)}},N=E=>{if(E.target.files&&E.target.files[0]&&!s){const S=E.target.files[0];B(S)}},B=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},k=()=>l?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",F=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL válida que comience con http:// o https://");return}r(g),m(!1),x("")}};return o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&o.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?o.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[o.jsx(Bi,{className:"w-5 h-5 text-green-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),o.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:o.jsx(xi,{className:"w-4 h-4"})})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":l?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(v))==null?void 0:E.click())},children:[o.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),o.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):l?o.jsxs("div",{className:"text-center",children:[o.jsx($u,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),o.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):o.jsxs("div",{className:"text-center",children:[o.jsx(K1,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),o.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),o.jsx("input",{id:v,type:"file",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:i,style:{display:"none"}})]}),s&&o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:`${k()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),l&&o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[o.jsx($u,{className:"w-4 h-4 text-red-500"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})]})]})},QJe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=_.useState(!1),[l,c]=_.useState({}),[u,d]=_.useState({}),[f,h]=_.useState({}),[m,g]=_.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=_.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:m.curso||"",profesor:m.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,m]),[v,y]=_.useState(t||x);_.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=P=>{const{name:M,value:Z}=P.target,V=M.split(".");V.length>1?y(W=>{const G=JSON.parse(JSON.stringify(W));let K=G;for(let ee=0;ee<V.length-1;ee++)K=K[V[ee]];return K[V[V.length-1]]=Z,G}):y(W=>({...W,[M]:Z}))},N=(P,M,Z)=>{y(V=>({...V,detallesObservacion:V.detallesObservacion.map(W=>W.id===P?{...W,[M]:Z}:W)}))},B=()=>{const P=v.detallesObservacion[v.detallesObservacion.length-1],M=P&&parseInt(P.minuto.split("-")[1],10)||0,Z=`${M+1}-${M+5}`;y(V=>({...V,detallesObservacion:[...V.detallesObservacion,{id:`row_${Date.now()}`,minuto:Z,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},k=P=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(Z=>Z.id!==P)}))},F=async(P,M)=>{h(Z=>({...Z,[P]:null})),c(Z=>({...Z,[P]:!0})),d(Z=>({...Z,[P]:0}));try{const Z=Date.now(),V=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),W=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",G=v.id?v.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",K=`videos_opr/${W}/${G}/${Z}_${V}`,ee=await jJe(M,K,X=>{d(D=>({...D,[P]:X}))});E(P,ee),d(X=>({...X,[P]:100}))}catch(Z){const V=(Z==null?void 0:Z.message)||"Error desconocido al subir el archivo";h(W=>({...W,[P]:V})),alert(`Error al subir el video: ${V}`)}finally{c(Z=>({...Z,[P]:!1})),setTimeout(()=>{d(Z=>({...Z,[P]:0}))},2e3)}},E=(P,M)=>{const Z=P.split(".");Z.length>1?y(V=>{const W=JSON.parse(JSON.stringify(V));let G=W;for(let K=0;K<Z.length-1;K++)G=G[Z[K]];return G[Z[Z.length-1]]=M,W}):y(V=>({...V,[P]:M}))},S=P=>{const M=P.split(".");M.length>1?y(Z=>{const V=JSON.parse(JSON.stringify(Z));let W=V;for(let G=0;G<M.length-1;G++)W=W[M[G]];return W[M[M.length-1]]="",V}):y(Z=>({...Z,[P]:""})),h(Z=>({...Z,[P]:null})),d(Z=>({...Z,[P]:0}))},T=async(P,M,Z)=>{if(!Z||!Z.trim())return Z;const V=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${M}):

"""${Z}"""`;try{return(await P.generateContent(V)).response.text()}catch(W){return console.error(`Error improving text for ${M}:`,W),Z}},L=async()=>{var P,M;i(!0);try{const Z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new Os(Z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=v.retroalimentacion,K=v.planificacion,ee=await Promise.all([T(W,"Éxito",G.exito),T(W,"Modelo",G.modelo),T(W,"Foco",G.foco),T(W,"Elementos a identificar",G.elementosIdentificar),T(W,"Brecha - Preguntas",((P=G.brecha)==null?void 0:P.preguntas)||""),T(W,"Brecha - Indicadores",((M=G.brecha)==null?void 0:M.indicadores)||""),T(W,"Planificación - Preparación",K.preparacion),T(W,"Planificación - Objetivo",K.objetivo),T(W,"Planificación - Actividad",K.actividad),T(W,"Planificación - Tiempo",K.tiempo)]);y(X=>({...X,retroalimentacion:{...X.retroalimentacion,exito:ee[0],modelo:ee[1],foco:ee[2],elementosIdentificar:ee[3],brecha:{...X.retroalimentacion.brecha,preguntas:ee[4],indicadores:ee[5]}},planificacion:{...X.planificacion,preparacion:ee[6],objetivo:ee[7],actividad:ee[8],tiempo:ee[9]}})),alert("Textos mejorados exitosamente con IA")}catch(Z){console.error(Z),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},R=()=>{const P=new vr,M=P.internal.pageSize.getWidth(),Z=P.internal.pageSize.getHeight(),V=15,W="https://res.cloudinary.com/dwncmu1wu/image/upload/v1753209432/LIR_fpq2lc.png",G=15,K=15;let ee=25;const X=()=>{const le="Liceo Industrial de Recoleta";P.setFontSize(8),P.setFont("helvetica","normal"),P.text(le,M/2,Z-10,{align:"center"}),P.setFontSize(10),P.setFont("helvetica","normal");const ue=Z-25;P.line(V,ue,V+70,ue),P.text("Firma Docente",V+15,ue+5),P.line(M-V-70,ue,M-V,ue),P.text("Firma Observador",M-V-55,ue+5)},D=()=>{try{P.addImage(W,"PNG",M-K-10,10,K,G)}catch(le){console.error("Error al cargar el logo:",le)}};D();const Q=P.addPage;P.addPage=function(){return Q.apply(this,arguments),D(),X(),this};const z=le=>{ee>240&&(P.addPage(),ee=25),P.setFontSize(14),P.setFont("helvetica","bold"),P.text(le,V,ee),ee+=12};P.setFontSize(18),P.setFont("helvetica","bold"),P.text("Informe de Ciclo OPR",M/2,ee,{align:"center"}),ee+=18,z("1. Datos Generales");const J=[["Docente:",m.docente],["Curso:",m.curso],["Asignatura:",m.asignatura],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Hora:",`${v.horaInicio} - ${v.horaTermino}`],["Ciclo:",v.nombreCiclo]];pi(P,{body:J,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:3,lineWidth:.1,lineColor:[220,220,220]},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),ee=P.lastAutoTable.finalY+15,z("2. Registro Detallado de Observación");const te=v.detallesObservacion.map(le=>[le.minuto,le.accionesDocente,le.accionesEstudiantes,le.actividades]);pi(P,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:te,startY:ee,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,cellPadding:4,halign:"center"},styles:{fontSize:9,cellPadding:4,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},margin:{left:V,right:V},didDrawPage:le=>{var ue;ee=((ue=le.cursor)==null?void 0:ue.y)||25}}),ee=P.lastAutoTable.finalY+15,z("3. Retroalimentación Docente");const se=[];if(v.retroalimentacion.exito&&se.push(["Éxito:",v.retroalimentacion.exito]),v.retroalimentacion.modelo&&se.push(["Modelo:",v.retroalimentacion.modelo]),v.retroalimentacion.foco&&se.push(["Foco:",v.retroalimentacion.foco]),v.retroalimentacion.elementosIdentificar&&se.push(["Elementos a Identificar:",v.retroalimentacion.elementosIdentificar]),se.length>0&&(pi(P,{body:se,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:40},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),ee=P.lastAutoTable.finalY+10),v.retroalimentacion.brecha){ee>240&&(P.addPage(),ee=40),P.setFontSize(12),P.setFont("helvetica","bold"),P.text("Análisis de Brecha",V,ee),ee+=8;const le=[],ue=v.retroalimentacion.brecha.minutoInicial,je=v.retroalimentacion.brecha.minutoFinal;ue&&je&&le.push(["Minutos:",`${ue} a ${je}`]),v.retroalimentacion.brecha.preguntas&&le.push(["Preguntas:",v.retroalimentacion.brecha.preguntas]),v.retroalimentacion.brecha.indicadores&&le.push(["Indicadores:",v.retroalimentacion.brecha.indicadores]),le.length>0&&(pi(P,{body:le,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V+5,right:V}}),ee=P.lastAutoTable.finalY+10)}z("4. Planificación de Práctica");const ie=[];v.planificacion.preparacion&&ie.push(["Preparación:",v.planificacion.preparacion]),v.planificacion.objetivo&&ie.push(["Objetivo:",v.planificacion.objetivo]),v.planificacion.actividad&&ie.push(["Actividad:",v.planificacion.actividad]),v.planificacion.tiempo&&ie.push(["Tiempo:",v.planificacion.tiempo]),ie.length>0&&(pi(P,{body:ie,startY:ee,theme:"plain",styles:{fontSize:10,cellPadding:4,overflow:"linebreak"},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:"auto"}},margin:{left:V,right:V}}),ee=P.lastAutoTable.finalY+10),X(),P.save(`Informe_OPR_${m.docente}_${v.fecha}.pdf`)},j=async P=>{if(P.preventDefault(),!m.docente||!m.curso||!m.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!v.nombreCiclo||!v.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...v,docenteInfo:m.docente,cursoInfo:m.curso,asignaturaInfo:m.asignatura,seguimiento:{...v.seguimiento,profesor:m.docente,curso:m.curso}};try{await r(M)}catch(Z){console.error("Error al guardar ciclo OPR:",Z),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&o.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[o.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),o.jsxs("select",{value:m.docente,onChange:P=>g(M=>({...M,docente:P.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(P=>o.jsx("option",{value:P,children:P},P))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),o.jsxs("select",{value:m.curso,onChange:P=>g(M=>({...M,curso:P.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(P=>o.jsx("option",{value:P,children:P},P))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsxs("select",{value:m.asignatura,onChange:P=>g(M=>({...M,asignatura:P.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),ks.map(P=>o.jsx("option",{value:P,children:P},P))]})]})]})]}),o.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[o.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("button",{type:"button",onClick:L,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[o.jsx(XP,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),o.jsxs("button",{type:"button",onClick:R,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[o.jsx(Cm,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),o.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),o.jsxs("form",{onSubmit:j,className:"space-y-8",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(Ip,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("input",{type:"text",name:"nombreCiclo",value:v.nombreCiclo,onChange:w,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),o.jsx("input",{type:"date",name:"fecha",value:v.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),o.jsx("input",{type:"number",name:"registroN",value:v.registroN,onChange:w,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),o.jsx("input",{type:"time",name:"horaInicio",value:v.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("input",{type:"time",name:"horaTermino",value:v.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx(UJe,{label:"Video de observación de clase",onFileChange:P=>F("videoObservacionUrl",P),onLinkChange:P=>E("videoObservacionUrl",P),uploadedUrl:v.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!l.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(mg,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b dark:border-slate-600",children:[o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),o.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),o.jsx("th",{className:"p-2"})]})}),o.jsx("tbody",{children:v.detallesObservacion.map(P=>o.jsxs("tr",{className:"border-b dark:border-slate-700",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:P.minuto,onChange:M=>N(P.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),o.jsx("td",{className:"p-2",children:o.jsx("textarea",{value:P.accionesDocente,onChange:M=>N(P.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),o.jsx("td",{className:"p-2",children:o.jsx("textarea",{value:P.accionesEstudiantes,onChange:M=>N(P.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),o.jsx("td",{className:"p-2",children:o.jsx("textarea",{value:P.actividades,onChange:M=>N(P.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),o.jsx("td",{className:"p-2",children:v.detallesObservacion.length>1&&o.jsx("button",{type:"button",onClick:()=>k(P.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:o.jsx(xi,{className:"w-4 h-4"})})})]},P.id))})]})}),o.jsxs("button",{type:"button",onClick:B,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[o.jsx(oF,{className:"w-4 h-4"})," Agregar Fila"]})]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(qee,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),o.jsx("textarea",{name:"retroalimentacion.exito",value:v.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),o.jsx("textarea",{name:"retroalimentacion.modelo",value:v.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),o.jsx("textarea",{name:"retroalimentacion.foco",value:v.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),o.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:v.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),o.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[o.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[o.jsx(cwe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),o.jsx("textarea",{name:"planificacion.preparacion",value:v.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),o.jsx("textarea",{name:"planificacion.objetivo",value:v.planificacion.objetivo,onChange:w,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),o.jsx("textarea",{name:"planificacion.actividad",value:v.planificacion.actividad,onChange:w,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),o.jsx("input",{type:"text",name:"planificacion.tiempo",value:v.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[o.jsx(Nl,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),o.jsx("input",{type:"date",name:"seguimiento.fecha",value:v.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),o.jsx("input",{type:"text",name:"seguimiento.firma",value:v.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[o.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(l).some(Boolean),children:[Object.values(l).some(Boolean)&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},HJe=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState(!0),[i,l]=_.useState(!0),[c,u]=_.useState(null),[d,f]=_.useState("list"),[h,m]=_.useState(null),[g,x]=_.useState(null),[v,y]=_.useState("general"),[w,N]=_.useState(!1),[B,k]=_.useState({}),[F,E]=_.useState([]),S=lw,T=_.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[L,R]=_.useState(T),j=_.useCallback(async()=>{s(!0),u(null);try{const te=await BJe();t(te)}catch(te){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",te)}finally{s(!1)}},[]),P=_.useCallback(async()=>{l(!0);try{const se=(await MJe()).filter(ie=>ie.profile==="PROFESORADO").map(ie=>ie.nombreCompleto).sort();n(se)}catch(te){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",te)}finally{l(!1)}},[]),M=_.useCallback(async()=>{try{const te={};for(const se of e)if(se.id)try{const ie=await DJe(se.id);ie.length>0&&(te[se.id]=ie)}catch(ie){console.error(`Error loading OPR cycles for ${se.id}:`,ie)}try{const se=await PJe();E(se)}catch(se){console.error("Error loading standalone OPR cycles:",se),E([])}k(te)}catch(te){console.error("Error fetching OPR cycles:",te)}},[e]);_.useEffect(()=>{j(),P()},[j,P]),_.useEffect(()=>{e.length>0&&M()},[e,M]);const Z=(te,se)=>{if(x(te),se)R(se),m(se.id);else{const ie={id:"temp-"+Date.now(),fecha:te.fecha,docente:te.docenteInfo||"",curso:te.cursoInfo||"",asignatura:te.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};R(ie),m(null)}f("form"),y("opr"),u(null)},V=async()=>{if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}N(!0),u(null);try{const te="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new Os(te).getGenerativeModel({model:"gemini-2.5-flash"}),le=Object.entries(L.rubricaResultados||{}).map(([Ne,ke])=>`- ${Ne}: Nivel ${ke}`).join(`
`),ue=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${L.docente}
- Asignatura: ${L.asignatura}
- Curso: ${L.curso}
- Resultados de la pauta de observación (rúbrica):
${le||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${L.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,ae=(await ie.generateContent(ue)).response.text();R(Ne=>({...Ne,retroalimentacionConsolidada:ae})),alert("Retroalimentación generada exitosamente con IA.")}catch(te){console.error("❌ Error al generar retroalimentación:",te);const se=te.message||"No se pudo generar la retroalimentación automática.";u(se),alert(`Error: ${se}`)}finally{N(!1)}},W=async te=>{if(te.preventDefault(),!("docente"in L)||!L.docente||!L.curso||!L.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await IJe(h,L),alert("¡Acompañamiento actualizado correctamente!");else{const se=await TJe(L);m(se.id),R(se),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await j()}catch(se){const ie=(se==null?void 0:se.message)??"Error al guardar el registro de acompañamiento.";u(ie),console.error("❌ Error al guardar:",se),alert(`Error: ${ie}`)}},G=()=>{R(T),m(null),x(null),f("form"),y("general"),u(null)},K=te=>{R(te),m(te.id),x(null),f("form"),y("general"),u(null)},ee=async te=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await FJe(te),await j(),alert("Registro eliminado exitosamente.")}catch(se){const ie="No se pudo eliminar el registro.";u(ie),console.error("❌ Error al eliminar:",se),alert(`Error: ${ie}`)}},X=(te,se)=>{R(ie=>({...ie,rubricaResultados:{...ie.rubricaResultados||{},[te]:se}}))},D=()=>{var te;if(!("docente"in L)||!L.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const se=new vr,ie=se.internal.pageSize.getWidth(),le=se.internal.pageSize.getHeight(),ue=20,je=ie-ue*2,ae=(Be,Le)=>Le+Be>le-ue,Ne=()=>{const Be=se.getNumberOfPages();for(let Le=1;Le<=Be;Le++)se.setPage(Le),se.setFontSize(9),se.setTextColor(128),se.text(`pág. ${Le} de ${Be}`,ie-ue,le-10,{align:"right"})};let ke=ue;se.setFontSize(16),se.setFont("helvetica","bold"),se.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",ie/2,ke,{align:"center"}),ke+=15;const _e=40;if(pi(se,{startY:ke,head:[],body:[["Docente:",L.docente],["Curso:",L.curso],["Asignatura:",L.asignatura],["Fecha:",new Date(L.fecha).toLocaleDateString("es-CL")],["Bloques:",L.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:4},columnStyles:{0:{fontStyle:"bold",cellWidth:30},1:{cellWidth:120}},margin:{left:ue,right:ue}}),ke=se.lastAutoTable.finalY+10,Object.keys(L.rubricaResultados||{}).length>0){se.setFontSize(14),se.setFont("helvetica","bold"),se.text("Evaluación por Indicadores",ue,ke),ke+=10;const Be=Object.entries(L.rubricaResultados).map(([Le,We])=>{let xe;switch(We){case 1:xe="Débil";break;case 2:xe="Incipiente";break;case 3:xe="Satisfactorio";break;case 4:xe="Avanzado";break;default:xe="No evaluado"}return[Le,xe,We]});pi(se,{startY:ke,head:[["Indicador","Nivel de Logro","Puntuación"]],body:Be,theme:"grid",styles:{fontSize:10,cellPadding:6,lineColor:[200,200,200],lineWidth:.1,valign:"middle"},headStyles:{fillColor:[41,128,185],textColor:255,fontSize:11,fontStyle:"bold",halign:"left"},columnStyles:{0:{cellWidth:100},1:{cellWidth:40},2:{cellWidth:30,halign:"center"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{left:ue,right:ue}})}se.addPage(),ke=ue,se.setFontSize(14),se.setFont("helvetica","bold"),se.text("Observaciones Generales y Sugerencias de Mejora",ue,ke),ke+=15,L.observacionesGenerales&&(se.setFontSize(12),se.setFont("helvetica","bold"),se.text("Fortalezas:",ue,ke),ke+=10,se.setFont("helvetica","normal"),se.setFontSize(11),se.splitTextToSize(L.observacionesGenerales,je).forEach(Le=>{ae(7,ke)&&(se.addPage(),ke=ue),se.text(Le,ue,ke,{align:"justify"}),ke+=7}),ke+=10),L.retroalimentacionConsolidada&&(ae(50,ke)&&(se.addPage(),ke=ue),se.setFontSize(12),se.setFont("helvetica","bold"),se.text("Sugerencias de mejora:",ue,ke),ke+=10,se.setFont("helvetica","normal"),se.setFontSize(11),se.splitTextToSize(L.retroalimentacionConsolidada,je).forEach(Le=>{ae(7,ke)&&(se.addPage(),ke=ue),se.text(Le,ue,ke,{align:"justify"}),ke+=7})),Ne();const he=`Informe_Acompanamiento_${(te=L.docente)==null?void 0:te.replace(/\s+/g,"_")}_${L.curso}_${new Date().toISOString().split("T")[0]}.pdf`;se.save(he)}catch(se){console.error("❌ Error al generar PDF:",se),alert("Error al generar el PDF. Intenta nuevamente.")}},Q=te=>{R(se=>({...se,[te.target.name]:te.target.value}))},z=()=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>{G(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[o.jsx(oF,{className:"w-5 h-5"})," Acompañamiento General"]}),o.jsxs("button",{onClick:()=>{R(T),m(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[o.jsx(oF,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($u,{className:"w-5 h-5 text-red-500"}),o.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[o.jsx(Mu,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Generales"]}),o.jsxs("div",{className:"space-y-3",children:[a&&o.jsxs("div",{className:"flex items-center justify-center p-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),o.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(te=>te.id).length>0?o.jsx("div",{className:"grid gap-3",children:e.filter(te=>te.id).map(te=>o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Nl,{className:"w-4 h-4 text-amber-500"}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.docente})]}),o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.curso," •"," ",o.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",te.asignatura]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL")]}),te.bloques&&o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Bloques:"})," ",te.bloques]}),te.retroalimentacionConsolidada&&o.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[o.jsx(Bi,{className:"w-3 h-3"}),"Con retroalimentación IA"]}),B[te.id]&&B[te.id].length>0&&o.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[o.jsx(Ip,{className:"w-3 h-3"}),B[te.id].length," Ciclo",B[te.id].length>1?"s":""," OPR"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx("button",{onClick:()=>{K(te),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),o.jsx("button",{onClick:()=>{K(te),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),o.jsx("button",{onClick:()=>ee(te.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:o.jsx(xi,{className:"w-4 h-4"})})]})]}),B[te.id]&&B[te.id].length>0&&o.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[o.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[o.jsx(Ip,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),o.jsx("div",{className:"space-y-2",children:B[te.id].map(se=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:se.nombreCiclo||`Registro N° ${se.registroN}`}),o.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(se.fecha).toLocaleDateString("es-CL"),se.horaInicio&&se.horaTermino&&o.jsxs("span",{children:[" • ",se.horaInicio," - ",se.horaTermino]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>{const ie=e.find(le=>le.id===te.id);Z(se,ie)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),o.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await Gq(se.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(ie){console.error("Error deleting OPR cycle:",ie),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:o.jsx(xi,{className:"w-3 h-3"})})]})]},se.id))})]})]},te.id))}):!a&&o.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[o.jsx(Ld,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos generales registrados"}),o.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]}),F.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[o.jsx(Ip,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),o.jsx("div",{className:"space-y-3",children:F.map(te=>o.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Ip,{className:"w-4 h-4 text-blue-500"}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:te.nombreCiclo||`Registro N° ${te.registroN}`})]}),o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Docente:"})," ",te.docenteInfo||"No especificado"," •"," ",o.jsx("span",{className:"font-medium",children:"Curso:"})," ",te.cursoInfo||"No especificado"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(te.fecha).toLocaleDateString("es-CL"),te.horaInicio&&te.horaTermino&&o.jsxs("span",{children:[" • ",te.horaInicio," - ",te.horaTermino]})]}),te.videoObservacionUrl&&o.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[o.jsx(Bi,{className:"w-3 h-3"}),"Con video de observación"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx("button",{onClick:()=>{Z(te)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),o.jsx("button",{onClick:async()=>{if(window.confirm("¿Seguro que desea eliminar este Ciclo OPR?"))try{await Gq(te.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(se){console.error("Error deleting standalone OPR cycle:",se),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:o.jsx(xi,{className:"w-4 h-4"})})]})]})},te.id))})]})]}),J=()=>{const te=h?e.find(ie=>ie.id===h):null,se={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in L&&L.docente||"",curso:"curso"in L&&L.curso||"",asignatura:"asignatura"in L&&L.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:v==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),o.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:o.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Ld,{className:"w-4 h-4"}),"Acompañamiento General"]})}),o.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Ip,{className:"w-4 h-4"}),"Ciclos OPR"]})}),o.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${v==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Mu,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&o.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($u,{className:"w-5 h-5 text-red-500"}),o.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),v==="dashboard"&&o.jsx("div",{className:"animate-fade-in",children:o.jsx(SJe,{acompanamientos:e,ciclosOPR:B,standaloneCiclos:F})}),v==="general"&&o.jsxs("form",{onSubmit:W,className:"space-y-8",children:[o.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[o.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[o.jsx(A5,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("button",{type:"button",onClick:V,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[o.jsx(XP,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentación con IA"]}),o.jsxs("button",{type:"button",onClick:D,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[o.jsx(Cm,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),o.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in L&&L.retroalimentacionConsolidada&&o.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[o.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[o.jsx(Bi,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:o.jsx("textarea",{readOnly:!0,rows:8,value:L.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),o.jsxs("select",{name:"docente",value:"docente"in L?L.docente:"",onChange:Q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[o.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(ie=>o.jsx("option",{value:ie,children:ie},ie))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),o.jsxs("select",{name:"curso",value:"curso"in L?L.curso:"",onChange:Q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione un curso"}),Ns.map(ie=>o.jsx("option",{value:ie,children:ie},ie))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),o.jsxs("select",{name:"asignatura",value:"asignatura"in L?L.asignatura:"",onChange:Q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione una asignatura"}),ks.map(ie=>o.jsx("option",{value:ie,children:ie},ie))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),o.jsx("input",{type:"text",name:"bloques",value:"bloques"in L?L.bloques:"",onChange:Q,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),o.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in L?L.observacionesGenerales:"",onChange:Q,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[o.jsx(Mu,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),o.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:S.map(ie=>o.jsx(at.Fragment,{children:ie.criteria.map((le,ue)=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[ue===0&&o.jsx("td",{rowSpan:ie.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:ie.domain}),o.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:le.name}),le.levels.map((je,ae)=>{const Ne=ae+1,ke="rubricaResultados"in L&&L.rubricaResultados[le.name]===Ne,_e=ke?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return o.jsx("td",{onClick:()=>X(le.name,Ne),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${_e} ${ke?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${Ne} para ${le.name}`,children:o.jsxs("div",{className:"text-xs leading-relaxed",children:[ke&&o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx(Bi,{className:"w-3 h-3 text-amber-600"}),o.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),je]})},Ne)})]},le.name))},ie.domain))})]})}),Object.keys(L.rubricaResultados||{}).length>0&&o.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[o.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[o.jsx(Mu,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(L.rubricaResultados).length," criterios evaluados)"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(L.rubricaResultados).map(([ie,le])=>o.jsxs("div",{className:"flex justify-between items-center py-1",children:[o.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[ie,":"]}),o.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${le===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":le===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":le===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",le]})]},ie))})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[o.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),o.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),v==="opr"&&o.jsx(QJe,{acompanamiento:te||se,cicloToEdit:g,profesores:r,onSave:async ie=>{try{const le=(te==null?void 0:te.id)||typeof ie.acompanamientoId=="string"&&ie.acompanamientoId||void 0;if(g&&g.id)await OJe(g.id,ie),alert("Ciclo OPR actualizado exitosamente");else{if(!le||String(le).startsWith("temp-")){const ue={...ie,acompanamientoId:""};await $q(ue)}else{const ue={...ie,acompanamientoId:String(le)};await $q(ue)}alert("Ciclo OPR guardado exitosamente")}x(null),await j(),await M(),f("list")}catch(le){console.error("❌ Error al guardar ciclo OPR:",le);const ue=le.message||"Error desconocido al guardar el ciclo OPR";u(ue),alert(`Error al guardar el ciclo OPR: ${ue}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||i?o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?z():J()})})},cM="mensajes_internos",VJe="usuarios",cce="mensajes_read_status",uce=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},zJe=(e,t)=>{const r=zt(vt(ft,cM),Br("participants","array-contains",e),hr("fecha","desc"));return fr(r,a=>{const s=a.docs.map(i=>uce(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},$Je=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:ir.fromDate(new Date)};await hn(vt(ft,cM),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},GJe=async e=>{try{const t=sr(ft,cM,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},KJe=(e,t)=>{const r=sr(ft,cce,e);return fr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},qJe=async(e,t)=>{try{const r=sr(ft,cce,e);await bi(r,{messages:xee(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},WJe=e=>{const t=zt(vt(ft,VJe),hr("nombreCompleto","asc"));return fr(t,n=>{const a=n.docs.map(s=>uce(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},XJe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=_.useState("inbox"),[a,s]=_.useState([]),[i,l]=_.useState([]),[c,u]=_.useState(null),[d,f]=_.useState({announcements:[],messages:[]}),[h,m]=_.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,v]=_.useState(g);_.useEffect(()=>{if(!e.id||!e.email){m(!1);return}m(!0);const E=zJe(e.email,L=>{s(L),m(!1)}),S=WJe(l),T=KJe(e.id,L=>{f(L),t()});return()=>{E(),S(),T()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&qJe(e.id,E.id).catch(S=>{console.error("Failed to mark message as read:",S)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await $Je(S),v(g),n("sent")}catch(T){console.error("Error sending message:",T),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},N=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await GJe(E),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},B=E=>{v({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},k=_.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),F=_.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?o.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[o.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[o.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:o.jsx("button",{onClick:()=>{n("compose"),u(null),v(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),o.jsxs("nav",{className:"p-2 space-y-1",children:[o.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),o.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&o.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?k:F).map(E=>{const S=r==="inbox"&&!d.messages.includes(E.id);return o.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),S&&o.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),o.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),o.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),o.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),o.jsxs("select",{id:"para",value:x.para,onChange:E=>v({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>o.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),o.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>v({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),o.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>v({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?o.jsxs("div",{children:[o.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[o.jsx("strong",{children:"De:"})," ",c.de," ",o.jsx("br",{}),o.jsx("strong",{children:"Para:"})," ",c.para," ",o.jsx("br",{}),o.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),o.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),o.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&o.jsx("button",{onClick:()=>B(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),o.jsx("button",{onClick:()=>N(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):o.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:o.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},Vk="proyectos_interdisciplinarios",uM="entregas_interdisciplinarias",YJe="usuarios",dM=e=>{const t=e.data();return{id:e.id,...t}},JJe=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),ZJe=e=>{const t=zt(vt(ft,Vk),hr("nombreProyecto","asc"));return fr(t,n=>{try{const a=n.docs.map(s=>JJe(dM(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},eZe=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:ir.now(),updatedAt:ir.now()};return(await hn(vt(ft,Vk),t)).id},Kq=async(e,t)=>{const{id:r,...n}=t,a=sr(ft,Vk,e);await bi(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:ir.now()},{merge:!0})},tZe=async e=>{const t=sr(ft,Vk,e),r=zt(vt(ft,uM),Br("planificacionId","==",e)),n=await Tn(r),a=Lg(ft);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},rZe=(e,t)=>{const r=zt(vt(ft,uM),Br("planificacionId","==",e));return fr(r,a=>{const s=a.docs.map(i=>dM(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},qq=async(e,t)=>{const r=sr(ft,uM,e);await bi(r,{feedbackProfesor:t,fechaFeedback:ir.fromDate(new Date)},{merge:!0})},dce=e=>{const t=zt(vt(ft,YJe));return fr(t,n=>{const a=n.docs.map(s=>dM(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},IO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},Nw=({href:e})=>{if(!e)return o.jsx("span",{className:"text-slate-400",children:"—"});const t=e.startsWith("http")?e:`https://${e}`;return o.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[o.jsx(h2e,{className:"w-4 h-4"}),o.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},yp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>o.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),nZe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=_.useState(null),a=_.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=_.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},l=({data:c,onClose:u,onSave:d})=>{const[f,h]=_.useState(c.activity),m=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(Wee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),o.jsx("input",{name:"nombre",value:f.nombre,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),o.jsx("input",{name:"responsables",value:f.responsables,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),o.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),o.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),o.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:m,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),o.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx($u,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):o.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"flex items-center justify-between mb-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:o.jsx(th,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return o.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[o.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),o.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),o.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),o.jsx("td",{className:"px-6 py-4",children:o.jsx(Nw,{href:d.recursoUrl})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&o.jsx(l,{data:r,onClose:()=>n(null),onSave:t})]})},aZe=({planificaciones:e,onBack:t})=>{const r=_.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var m;(m=h.habilidades)==null||m.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(IO).forEach(([x,v])=>{v.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=_.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=_.useMemo(()=>{const c=e.length,u=e.reduce((h,m)=>{var g;return h+(((g=m.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,m)=>{var g;return h+(((g=m.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((m,g)=>g[1]-m[1]).slice(0,20),h=Math.max(...f.map(([,m])=>m));return h?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),o.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([m,g])=>{const x=Math.max(.8,g/h*2),v=Math.max(.6,g/h);return o.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:v},title:`${m}: ${g} veces`,children:m},m)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:o.jsx(Hw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),o.jsx("div",{className:"space-y-4",children:Object.keys(IO).map(h=>{const m=c[h]||0,g=d>0?m/d*100:0,x=f[h]||"bg-slate-400";return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m," habilidades"]})]}),o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:o.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},l=({icon:c,title:u,value:d,description:f,color:h})=>o.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-bold",children:d}),o.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),o.jsx("p",{className:"text-white/90 text-sm",children:f})]});return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:o.jsx(b_,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),o.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[o.jsx(Vw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(l,{icon:o.jsx(pg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),o.jsx(l,{icon:o.jsx($ye,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),o.jsx(l,{icon:o.jsx(Ld,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),o.jsx(l,{icon:o.jsx(Gc,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsx(i,{data:r.categoriaCount}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(cw,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),o.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),o.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),o.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},sZe=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=_.useState([]),[s,i]=_.useState([]),[l,c]=_.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=_.useState(null);_.useEffect(()=>{const v=dce(a),y=rZe(e.id,i);return()=>{v(),y()}},[e.id]);const f=_.useMemo(()=>n.filter(v=>v.profile===Yt.ESTUDIANTE&&e.cursos.includes(v.curso||"")).sort((v,y)=>(v.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async v=>{d(v.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentación breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${l==null?void 0:l.instrucciones}"
Comentario del estudiante: "${v.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new Os(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await qq(v.id,E)}catch(N){console.error(N),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},m=v=>v.map(y=>{var w;return((w=r.find(N=>N.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return l?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",m(e.docentesResponsables)]})]}),o.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[o.jsx(Vw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),o.jsx("select",{value:l.id,onChange:v=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===v.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(v=>o.jsxs("option",{value:v.id,children:["Tarea ",v.numero,": ",v.instrucciones]},v.id))})]}),o.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(v=>{const y=s.find(w=>w.tareaId===l.id&&w.estudianteId===v.id);return o.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(v.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:v.nombreCompleto}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:v.curso})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[o.jsx(qP,{className:"w-4 h-4"})," Entregado"]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[o.jsx($u,{className:"w-4 h-4"})," Pendiente"]})})]}),y?o.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),o.jsx(Nw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),o.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[o.jsx(Cm,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:w=>qq(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),o.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):o.jsx(Wp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):o.jsxs("div",{className:"text-center py-6",children:[o.jsx($u,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},v.id)})})]}):o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"text-center",children:[o.jsx($u,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),o.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[o.jsx(Vw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},iZe=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[l,c]=_.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(m=>{var g;return((g=i.find(x=>x.id===m))==null?void 0:g.nombreCompleto)||m}).join(", "),f=async h=>{var m,g,x;if(!e.trim()){alert("Ingrese una descripción del proyecto.");return}c(h);try{const y=new Os(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,N=await y.generateContent(w);n(N.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripción: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,N=await y.generateContent(w);a(N.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,B=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),k=JSON.parse(B);s({actividades:(m=k.actividades)==null?void 0:m.map(F=>({...F,id:crypto.randomUUID()})),fechasClave:(g=k.fechasClave)==null?void 0:g.map(F=>({id:crypto.randomUUID(),nombre:F.nombre,fecha:F.fecha,recursoUrl:F.recursoUrl})),tareas:(x=k.tareas)==null?void 0:x.map((F,E)=>({...F,id:crypto.randomUUID(),numero:E+1}))})}}catch(v){console.error(v),alert("No se pudo completar la generación con IA.")}finally{c(null)}};return o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:l==="obj"?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):o.jsx(Wp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),o.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:l!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:l==="ind"?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):o.jsx(Wp,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),o.jsx("button",{type:"button",onClick:()=>f("est"),disabled:l!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:l==="est"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",o.jsx("span",{children:"Generando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Wp,{className:"w-4 h-4"})," ",o.jsx("span",{children:"Estructura IA"})]})})]})},oZe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=_.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,l]=_.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=_.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=_.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});_.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(N=>({...N,[w.target.name]:w.target.value})),m=(w,N,B)=>s(k=>({...k,contenidosPorAsignatura:k.contenidosPorAsignatura.map(F=>F.asignatura===w?{...F,[N]:B}:F)})),g=(w,N)=>s(B=>({...B,contenidosPorAsignatura:B.contenidosPorAsignatura.map(k=>k.asignatura===w?{...k,habilidades:k.habilidades.includes(N)?k.habilidades.filter(F=>F!==N):[...k.habilidades,N]}:k)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),l({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},v=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var N;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((N=a.tareas)==null?void 0:N.length)||0)+1,...d};s(B=>({...B,tareas:[...B.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return o.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:o.jsx(pg,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx(yp,{icon:o.jsx(Ld,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",aiButton:o.jsx(iZe,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(N=>({...N,objetivos:w})),onIndicadores:w=>s(N=>({...N,indicadoresLogro:w})),onEstructura:w=>s(N=>{var B,k,F;return{...N,actividades:(B=w.actividades)!=null&&B.length?w.actividades:N.actividades,fechasClave:(k=w.fechasClave)!=null&&k.length?w.fechasClave:N.fechasClave,tareas:(F=w.tareas)!=null&&F.length?w.tareas:N.tareas}})}),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),o.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),o.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),o.jsx(yp,{icon:o.jsx(Nl,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:o.jsx("div",{className:"space-y-3",children:o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>o.jsx("button",{type:"button",onClick:()=>{s(N=>({...N,docentesResponsables:N.docentesResponsables.includes(w.id)?N.docentesResponsables.filter(B=>B!==w.id):[...N.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:o.jsx(zw,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),o.jsx(yp,{icon:o.jsx(g_,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ns.map(w=>o.jsx("button",{type:"button",onClick:()=>{s(N=>({...N,cursos:N.cursos.includes(w)?N.cursos.filter(B=>B!==w):[...N.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(yp,{icon:o.jsx(Gc,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:ks.map(w=>o.jsx("button",{type:"button",onClick:()=>{s(N=>{const B=N.asignaturas,k=B.includes(w)?B.filter(E=>E!==w):[...B,w];let F=N.contenidosPorAsignatura;return k.includes(w)&&!B.includes(w)&&(F=[...F,{asignatura:w,contenidos:"",habilidades:[]}]),!k.includes(w)&&B.includes(w)&&(F=F.filter(E=>E.asignatura!==w)),{...N,asignaturas:k,contenidosPorAsignatura:F}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&o.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[o.jsx(Gc,{className:"w-4 h-4"})," ",w.asignatura]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),o.jsx("textarea",{value:w.contenidos,onChange:N=>m(w.asignatura,"contenidos",N.target.value),placeholder:`Detalle los contenidos específicos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),o.jsx("div",{className:"space-y-2",children:Object.entries(IO).map(([N,B])=>o.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[o.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[N,":"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:B.map(k=>o.jsx("button",{type:"button",onClick:()=>g(w.asignatura,k),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(k)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:k},k))})]},N))}),w.habilidades.length>0&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[o.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(N=>o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:N},N))})]})]})]})]},w.asignatura))]})]})}),o.jsx(yp,{icon:o.jsx(s1,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:o.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),o.jsx(yp,{icon:o.jsx(Mu,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",children:o.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),o.jsxs(yp,{icon:o.jsx(ac,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(th,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),o.jsx("input",{value:i.nombre,onChange:w=>l({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),o.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>l({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),o.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>l({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),o.jsx("input",{value:i.recursoUrl||"",onChange:w=>l({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[o.jsx(Cl,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),o.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>o.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:o.jsxs("div",{className:"flex justify-between items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),o.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),o.jsx(Nw,{href:w.recursoUrl})]})},w.id))})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(qP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),o.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),o.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"sm:col-span-1",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),o.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("button",{type:"button",onClick:v,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[o.jsx(Cl,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),o.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>o.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:o.jsxs("div",{className:"flex justify-between items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),o.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),o.jsx(Nw,{href:w.recursoUrl})]})},w.id))})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Hw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[o.jsxs("div",{className:"lg:col-span-5",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),o.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),o.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),o.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[o.jsx(Cl,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),o.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),o.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),o.jsxs("div",{className:"text-right space-y-1",children:[o.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?o.jsx(Nw,{href:w.recursoUrl}):o.jsx("span",{className:"text-slate-400 text-xs",children:"—"})]})]})},w.id))})]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[o.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),o.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},Wq=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState(!0),[i,l]=_.useState("list"),[c,u]=_.useState(null),[d,f]=_.useState(null),[h,m]=_.useState(null),[g,x]=_.useState("all"),v=_.useMemo(()=>g==="all"?e:e.filter(S=>S.id===g),[e,g]);_.useEffect(()=>{s(!0);const S=dce(L=>{const R=L.filter(j=>j.profile===Yt.PROFESORADO);n(R)}),T=ZJe(L=>{const R=L.map(j=>({...j,docentesResponsables:Array.isArray(j.docentesResponsables)?j.docentesResponsables:[j.docentesResponsables].filter(Boolean),contenidosPorAsignatura:j.contenidosPorAsignatura||[],actividades:j.actividades||[],fechasClave:j.fechasClave||[]}));t(R),s(!1)});return()=>{S(),T()}},[]);const y=_.useCallback(async(S,T)=>{const L=e.find(j=>j.id===S);if(!L)return;const R={...L,actividades:(L.actividades||[]).map(j=>j.id===T.id?T:j)};await Kq(S,R)},[e]),w=async S=>{try{const T=S.id&&String(S.id).length>0,L={...S};if(T){const{id:R,...j}=L;await Kq(S.id,j)}else delete L.id,await eZe(L);l("list"),u(null)}catch(T){console.error("Error al guardar la planificación:",T),alert("No se pudo guardar la planificación.")}},N=S=>{u(S),l("form")},B=async S=>{if(!S){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await tZe(S)}catch(T){console.error(T),alert("No se pudo eliminar la planificación.")}},k=()=>{u(null),l("form")},F=async S=>{f(S.id);const T=new vr("p","mm","a4"),L=15,j=T.internal.pageSize.getWidth()-L*2;let P=L+20;T.setFont("helvetica","bold"),T.setFontSize(22),T.setTextColor(0);const M=T.splitTextToSize(S.nombreProyecto,j);T.text(M,L,P),P+=M.length*8+10,pi(T,{startY:P,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(W=>W.map(G=>{var K;return((K=r.find(ee=>ee.id===G))==null?void 0:K.nombreCompleto)||G}).join(", "))(S.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),P=T.lastAutoTable.finalY+15;const V=(W,G)=>{if(!G||Array.isArray(G)&&!G.length||typeof G=="string"&&!G.trim())return;const K=Array.isArray(G)?G.join(", "):String(G),ee=T.splitTextToSize(K,j);T.setFont("helvetica","bold"),T.setFontSize(14),T.setTextColor(40),T.text(W,L,P),P+=8,T.setFont("helvetica","normal"),T.setFontSize(11),T.setTextColor(80),T.text(ee,L,P),P+=ee.length*5+10};if(V("Descripción del Proyecto",S.descripcionProyecto),V("Objetivos de Aprendizaje",S.objetivos),V("Indicadores de Logro",S.indicadoresLogro),S.contenidosPorAsignatura&&S.contenidosPorAsignatura.length>0&&(T.setFont("helvetica","bold"),T.setFontSize(14),T.text("Contenidos por Asignatura",L,P),P+=10,S.contenidosPorAsignatura.forEach(W=>{var G;if(T.setFont("helvetica","bold"),T.setFontSize(11),T.text(`${W.asignatura}:`,L,P),P+=6,T.setFont("helvetica","normal"),T.setFontSize(11),W.contenidos){const K=T.splitTextToSize(`Contenidos: ${W.contenidos}`,j-10);T.text(K,L+5,P),P+=K.length*5+3}if((G=W.habilidades)!=null&&G.length){const K=`Habilidades: ${W.habilidades.join(", ")}`,ee=T.splitTextToSize(K,j-10);T.text(ee,L+5,P),P+=ee.length*5+8}}),P+=10),S.actividades&&S.actividades.length>0&&(T.setFont("helvetica","bold"),T.setFontSize(14),T.text("Actividades",L,P),P+=10,pi(T,{startY:P,head:[["Actividad","Inicio","Fin","Recurso"]],body:S.actividades.map(W=>[W.nombre,W.fechaInicio,W.fechaFin,W.recursoUrl||"—"]),theme:"striped"}),P=T.lastAutoTable.finalY+10),S.fechasClave&&S.fechasClave.length>0&&(T.setFont("helvetica","bold"),T.setFontSize(14),T.text("Fechas Clave",L,P),P+=10,pi(T,{startY:P,head:[["Hito","Fecha","Recurso"]],body:S.fechasClave.map(W=>[W.nombre,W.fecha,W.recursoUrl||"—"]),theme:"striped"}),P=T.lastAutoTable.finalY+10),S.tareas&&S.tareas.length>0){const W=S.tareas.map(G=>[String(G.numero||""),G.instrucciones,G.fechaEntrega,G.recursoUrl||"—"]);T.setFont("helvetica","bold"),T.setFontSize(14),T.text("Tareas para Estudiantes",L,P),P+=10,pi(T,{startY:P,head:[["#","Instrucciones","Entrega","Recurso"]],body:W,theme:"striped",headStyles:{fillColor:[52,73,94]}})}T.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=S=>S.map(T=>{var L;return((L=r.find(R=>R.id===T))==null?void 0:L.nombreCompleto)||T}).join(", ");return a?o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?o.jsx(sZe,{plan:h,onBack:()=>m(null),availableTeachers:r}):i==="dashboard"?o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>l("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),o.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),o.jsx(aZe,{planificaciones:e,onBack:()=>l("list")})]}):i==="form"?o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{l("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),o.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),o.jsx(oZe,{initialPlan:c,onSave:w,onCancel:()=>{l("list"),u(null)},availableTeachers:r})]}):o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),o.jsx("button",{type:"button",onClick:()=>l("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:o.jsx(pg,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),o.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{type:"button",onClick:()=>l("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[o.jsx(b_,{className:"w-5 h-5"})," Ver Dashboard"]}),o.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[o.jsx(Cl,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:o.jsx(pg,{className:"w-12 h-12 text-slate-400"})}),o.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),o.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(Cl,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(S=>o.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:S.nombreProyecto}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsx(g_,{className:"w-4 h-4"}),o.jsxs("span",{children:["Cursos: ",S.cursos.join(", ")]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsx(Nl,{className:"w-4 h-4"}),o.jsxs("span",{children:["Profesores: ",E(S.docentesResponsables)]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsx(Gc,{className:"w-4 h-4"}),o.jsxs("span",{children:["Asignaturas: ",S.asignaturas.length]})]})]})]})}),!!S.descripcionProyecto&&o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:S.descripcionProyecto}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>m(S),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[o.jsx(qP,{className:"w-4 h-4"})," Entregas"]}),o.jsxs("button",{type:"button",onClick:()=>F(S),disabled:d===S.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===S.id?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):o.jsx(Cm,{className:"w-4 h-4"}),"PDF"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>N(S),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:o.jsx(Wee,{className:"w-4 h-4"})}),o.jsx("button",{type:"button",onClick:()=>B(S.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:o.jsx(xi,{className:"w-4 h-4"})})]})]})]},S.id))})]}),e.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(d2e,{className:"w-5 h-5 text-slate-600"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),o.jsxs("select",{value:g,onChange:S=>x(S.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[o.jsx("option",{value:"all",children:"Todos"}),e.map(S=>o.jsx("option",{value:S.id,children:S.nombreProyecto},S.id))]})]})]}),o.jsx("div",{id:"gantt-container-vertical",children:o.jsx(nZe,{planificaciones:v,onActivityUpdate:y})})]})]})},S1="panol_maquinas",yE="panol_registros",lZe=e=>{const t=zt(vt(ft,S1),hr("nombre","asc"));return fr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},cZe=e=>{const t=zt(vt(ft,yE),hr("fecha","desc"));return fr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},uZe=async e=>(await hn(vt(ft,S1),{...e,createdAt:Is(),updatedAt:Is()})).id,dZe=async(e,t)=>{await cc(sr(ft,S1,e),{...t,updatedAt:Is()})},AZe=async e=>{const t=zt(vt(ft,yE),Br("maquinaId","==",e));if(!(await Tn(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await Ra(sr(ft,S1,e))},fZe=async e=>(await hn(vt(ft,yE),{...e,createdAt:Is(),updatedAt:Is()})).id,hZe=async(e,t)=>{await cc(sr(ft,yE,e),{...t,updatedAt:Is()})},mZe=async e=>{await Ra(sr(ft,yE,e))},pZe=async()=>{if(!(await Tn(vt(ft,S1))).empty)return;const t=Lg(ft);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=sr(vt(ft,S1));t.set(a,{...n,createdAt:Is(),updatedAt:Is()})}),await t.commit()},gZe=()=>{var Z;const[e,t]=_.useState([]),[r,n]=_.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=_.useState(a),[l,c]=_.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=_.useState(u),[h,m]=_.useState(null),[g,x]=_.useState({maquinaId:"",curso:"",profesor:"",fecha:""});_.useEffect(()=>{pZe().catch(console.error);const V=lZe(t),W=cZe(n);return()=>{V&&V(),W&&W()}},[]);const v=async V=>{if(V.preventDefault(),!!d.nombre.trim())try{h?await dZe(h.id,{...d}):await uZe({...d}),f(u),m(null)}catch(W){alert(W.message||"Error al guardar máquina")}},y=_.useCallback(async V=>{try{await AZe(V)}catch(W){alert(W.message||"Error al eliminar máquina")}},[]),w=async V=>{V.preventDefault();const W=l||s;if(!W.curso||!W.profesorResponsable.trim()||!W.maquinaId||Number(W.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(l){const{id:G,...K}=l;await hZe(G,K)}else await fZe({...s});i(a),c(null)}catch(G){alert(G.message||"Error al guardar registro")}},N=_.useCallback(async V=>{try{await mZe(V)}catch(W){alert(W.message||"Error al eliminar registro")}},[]),B=_.useMemo(()=>r.filter(V=>(g.maquinaId===""||V.maquinaId===g.maquinaId)&&(g.curso===""||V.curso===g.curso)&&(g.profesor===""||V.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||V.fecha===g.fecha)).sort((V,W)=>new Date(W.fecha).getTime()-new Date(V.fecha).getTime()),[r,g]),k=_.useMemo(()=>new Map(e.map(V=>[V.id,V])),[e]),F=_.useMemo(()=>B.reduce((V,W)=>V+(Number(W.totalHoras)||0),0),[B]),E=_.useMemo(()=>{const V=new Map;B.forEach(G=>{var ee;const K=((ee=k.get(G.maquinaId))==null?void 0:ee.nombre)||"N/A";V.set(K,(V.get(K)||0)+(Number(G.totalHoras)||0))});const W=Array.from(V.entries()).map(([G,K])=>({maquina:G,horas:Number(K.toFixed(2))}));return W.sort((G,K)=>K.horas-G.horas),W},[B,k]),S=()=>{const V=B.map(K=>{var ee,X;return{Fecha:K.fecha,Curso:K.curso,Profesor:K.profesorResponsable,Máquina:((ee=k.get(K.maquinaId))==null?void 0:ee.nombre)||"N/A",Especialidad:((X=k.get(K.maquinaId))==null?void 0:X.especialidad)||"N/A","Total Horas":K.totalHoras,Observaciones:K.observaciones}}),W=Ti.json_to_sheet(V),G=Ti.book_new();Ti.book_append_sheet(G,W,"RegistrosPañol"),tE(G,"Registros_Pañol.xlsx")},T=()=>{const V=new vr;pi(V,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:B.map(W=>{var G,K;return[W.fecha,W.curso,W.profesorResponsable,((G=k.get(W.maquinaId))==null?void 0:G.nombre)||"N/A",((K=k.get(W.maquinaId))==null?void 0:K.especialidad)||"N/A",W.totalHoras,W.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:W=>{V.setFontSize(12),V.setFont("helvetica","bold"),V.text("LICEO INDUSTRIAL DE RECOLETA",W.settings.margin.left,14),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Informe de Registros de Pañol",W.settings.margin.left,20)}}),V.save("Registros_Pañol.pdf")},L="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",R=(V,W)=>o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W}`,children:V}),j=({icon:V,label:W,value:G,accent:K="from-indigo-500 to-sky-500"})=>o.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${K} opacity-10`}),o.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[o.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:V}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:W}),o.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:G})]})]})]}),P=({title:V,icon:W,children:G,right:K,accent:ee="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>o.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${ee}`}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[W," ",o.jsx("span",{children:V})]}),K]}),G]})]}),M=()=>{const V=l||s,W=l?c:i;return o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(ac,{size:16})," Fecha"]}),o.jsx("input",{name:"fecha",type:"date",value:V.fecha,onChange:G=>W({...V,fecha:G.target.value}),className:L,required:!0})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Nl,{size:16})," Curso"]}),o.jsxs("select",{name:"curso",value:V.curso,onChange:G=>W({...V,curso:G.target.value}),className:L,required:!0,children:[o.jsx("option",{value:"",children:"Curso"}),Ns.map(G=>o.jsx("option",{children:G},G))]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Gc,{size:16})," Profesor"]}),o.jsxs("select",{name:"profesorResponsable",value:V.profesorResponsable,onChange:G=>W({...V,profesorResponsable:G.target.value}),className:L,required:!0,children:[o.jsx("option",{value:"",children:"Profesor Responsable"}),nF.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(A5,{size:16})," Máquina"]}),o.jsxs("select",{name:"maquinaId",value:V.maquinaId,onChange:G=>W({...V,maquinaId:G.target.value}),className:L,required:!0,children:[o.jsx("option",{value:"",children:"Máquina"}),e.map(G=>o.jsx("option",{value:G.id,children:G.nombre},G.id))]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(x_,{size:16})," Total de Horas"]}),o.jsx("input",{name:"totalHoras",type:"number",value:V.totalHoras,onChange:G=>W({...V,totalHoras:Number(G.target.value)}),className:L,required:!0,min:.5,step:.5})]}),o.jsxs("div",{className:"lg:col-span-6",children:[o.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),o.jsx("textarea",{name:"observaciones",value:V.observaciones,onChange:G=>W({...V,observaciones:G.target.value}),placeholder:"Observaciones...",className:L+" min-h-[40px]",rows:2})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l&&o.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[o.jsx(Nm,{size:16})," Cancelar"]}),o.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[l?o.jsx($d,{size:16}):o.jsx(Cl,{size:16}),l?"Actualizar":"Registrar"]})]})]})};return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[o.jsx($ee,{size:18})," Excel"]}),o.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[o.jsx(Ld,{size:18})," PDF"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(j,{icon:o.jsx(A5,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),o.jsx(j,{icon:o.jsx(Ld,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:B.length,accent:"from-sky-500 to-cyan-500"}),o.jsx(j,{icon:o.jsx(x_,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:F.toFixed(1),accent:"from-emerald-500 to-lime-500"}),o.jsx(j,{icon:o.jsx(ac,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(Z=r[0])!=null&&Z.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[o.jsx("div",{className:"xl:col-span-3",children:o.jsx(P,{title:l?`Editando registro #${l.id.slice(0,4)}`:"Nuevo registro de uso",icon:o.jsx(Rwe,{size:18}),children:o.jsx(M,{})})}),o.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:o.jsx(P,{title:"Uso por máquina (horas)",icon:o.jsx(Mu,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:o.jsx("div",{className:"flex gap-2 items-center",children:R(`${E.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:o.jsx("div",{className:"h-[320px] w-full",children:o.jsx(ih,{width:"100%",height:"100%",children:o.jsxs(g2,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[o.jsx(p2,{strokeDasharray:"3 3"}),o.jsx(Sg,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),o.jsx(kg,{}),o.jsx(sh,{}),o.jsx(Z1,{}),o.jsx(E1,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),o.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:o.jsxs(P,{title:"Administrar máquinas",icon:o.jsx(A5,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[o.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[o.jsx("input",{value:d.nombre,onChange:V=>f({...d,nombre:V.target.value}),placeholder:"Nombre máquina",className:L+" md:col-span-2"}),o.jsxs("select",{value:d.especialidad,onChange:V=>f({...d,especialidad:V.target.value}),className:L+" md:col-span-2",children:[o.jsx("option",{value:"Industrial",children:"Industrial"}),o.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),o.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?o.jsx($d,{size:16}):o.jsx(Cl,{size:16}),h?"Guardar":"Agregar"]})]}),o.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(V=>o.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:V.nombre}),o.jsx("div",{className:"text-xs",children:V.especialidad==="Industrial"?R("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):R("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{m(V),f(V)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:o.jsx(aF,{size:16,className:"text-blue-600"})}),o.jsx("button",{onClick:()=>y(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:o.jsx(xi,{size:16,className:"text-red-600"})})]})]},V.id))})]})}),o.jsx("div",{className:"xl:col-span-2 order-3",children:o.jsxs(P,{title:"Historial de uso",icon:o.jsx(Ld,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(L4,{size:16,className:"text-slate-600"})}),children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[o.jsx("input",{type:"date",value:g.fecha,onChange:V=>x({...g,fecha:V.target.value}),className:L,placeholder:"Fecha"}),o.jsxs("select",{value:g.curso,onChange:V=>x({...g,curso:V.target.value}),className:L,children:[o.jsx("option",{value:"",children:"Todos los Cursos"}),Ns.map(V=>o.jsx("option",{children:V},V))]}),o.jsxs("select",{value:g.maquinaId,onChange:V=>x({...g,maquinaId:V.target.value}),className:L,children:[o.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(V=>o.jsx("option",{value:V.id,children:V.nombre},V.id))]}),o.jsxs("div",{className:"relative",children:[o.jsx($2,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),o.jsx("input",{value:g.profesor,onChange:V=>x({...g,profesor:V.target.value}),placeholder:"Buscar profesor...",className:L+" pl-9"})]})]}),o.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),o.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),o.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[B.map(V=>{var W;return o.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.fecha}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((W=k.get(V.maquinaId))==null?void 0:W.nombre)||"N/A"}),o.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[V.profesorResponsable," ",o.jsxs("span",{className:"text-slate-400",children:["(",V.curso,")"]})]}),o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:V.totalHoras}),o.jsxs("td",{className:"px-3 py-2 text-center",children:[o.jsx("button",{onClick:()=>c(V),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:o.jsx(aF,{size:16,className:"text-blue-600"})}),o.jsx("button",{onClick:()=>N(V.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:o.jsx(xi,{size:16,className:"text-red-600"})})]})]},V.id)}),B.length===0&&o.jsx("tr",{children:o.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function jl(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=jl(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const xZe={},Xq=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(xZe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},vZe=e=>e?Xq(e):Xq,{useDebugValue:bZe}=at,{useSyncExternalStoreWithSelector:yZe}=HFe,wZe=e=>e;function Ace(e,t=wZe,r){const n=yZe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return bZe(n),n}const Yq=(e,t)=>{const r=vZe(e),n=(a,s=t)=>Ace(r,a,s);return Object.assign(n,r),n},EZe=(e,t)=>e?Yq(e,t):Yq;function il(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var CZe={value:()=>{}};function zk(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new y5(r)}function y5(e){this._=e}function NZe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}y5.prototype=zk.prototype={constructor:y5,on:function(e,t){var r=this._,n=NZe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=_Ze(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=Jq(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Jq(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new y5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function _Ze(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Jq(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=CZe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var FO="http://www.w3.org/1999/xhtml";const Zq={svg:"http://www.w3.org/2000/svg",xhtml:FO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $k(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Zq.hasOwnProperty(t)?{space:Zq[t],local:e}:e}function SZe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===FO&&t.documentElement.namespaceURI===FO?t.createElement(e):t.createElementNS(r,e)}}function kZe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fce(e){var t=$k(e);return(t.local?kZe:SZe)(t)}function jZe(){}function AM(e){return e==null?jZe:function(){return this.querySelector(e)}}function BZe(e){typeof e!="function"&&(e=AM(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,l=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Jc(n,this._parents)}function TZe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function IZe(){return[]}function hce(e){return e==null?IZe:function(){return this.querySelectorAll(e)}}function FZe(e){return function(){return TZe(e.apply(this,arguments))}}function OZe(e){typeof e=="function"?e=FZe(e):e=hce(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],l=i.length,c,u=0;u<l;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new Jc(n,a)}function mce(e){return function(){return this.matches(e)}}function pce(e){return function(t){return t.matches(e)}}var DZe=Array.prototype.find;function PZe(e){return function(){return DZe.call(this.children,e)}}function RZe(){return this.firstElementChild}function LZe(e){return this.select(e==null?RZe:PZe(typeof e=="function"?e:pce(e)))}var MZe=Array.prototype.filter;function UZe(){return Array.from(this.children)}function QZe(e){return function(){return MZe.call(this.children,e)}}function HZe(e){return this.selectAll(e==null?UZe:QZe(typeof e=="function"?e:pce(e)))}function VZe(e){typeof e!="function"&&(e=mce(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,l=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Jc(n,this._parents)}function gce(e){return new Array(e.length)}function zZe(){return new Jc(this._enter||this._groups.map(gce),this._parents)}function _S(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_S.prototype={constructor:_S,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $Ze(e){return function(){return e}}function GZe(e,t,r,n,a,s){for(var i=0,l,c=t.length,u=s.length;i<u;++i)(l=t[i])?(l.__data__=s[i],n[i]=l):r[i]=new _S(e,s[i]);for(;i<c;++i)(l=t[i])&&(a[i]=l)}function KZe(e,t,r,n,a,s,i){var l,c,u=new Map,d=t.length,f=s.length,h=new Array(d),m;for(l=0;l<d;++l)(c=t[l])&&(h[l]=m=i.call(c,c.__data__,l,t)+"",u.has(m)?a[l]=c:u.set(m,c));for(l=0;l<f;++l)m=i.call(e,s[l],l,s)+"",(c=u.get(m))?(n[l]=c,c.__data__=s[l],u.delete(m)):r[l]=new _S(e,s[l]);for(l=0;l<d;++l)(c=t[l])&&u.get(h[l])===c&&(a[l]=c)}function qZe(e){return e.__data__}function WZe(e,t){if(!arguments.length)return Array.from(this,qZe);var r=t?KZe:GZe,n=this._parents,a=this._groups;typeof e!="function"&&(e=$Ze(e));for(var s=a.length,i=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,m=XZe(e.call(d,d&&d.__data__,u,n)),g=m.length,x=l[u]=new Array(g),v=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,v,y,m,t);for(var w=0,N=0,B,k;w<g;++w)if(B=x[w]){for(w>=N&&(N=w+1);!(k=v[N])&&++N<g;);B._next=k||null}}return i=new Jc(i,n),i._enter=l,i._exit=c,i}function XZe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YZe(){return new Jc(this._exit||this._groups.map(gce),this._parents)}function JZe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function ZZe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),l=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=l[c]=new Array(f),m,g=0;g<f;++g)(m=u[g]||d[g])&&(h[g]=m);for(;c<a;++c)l[c]=r[c];return new Jc(l,this._parents)}function eet(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function tet(e){e||(e=ret);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],l=i.length,c=a[s]=new Array(l),u,d=0;d<l;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Jc(a,this._parents).order()}function ret(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function net(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function aet(){return Array.from(this)}function set(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function iet(){let e=0;for(const t of this)++e;return e}function oet(){return!this.node()}function cet(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,l;s<i;++s)(l=a[s])&&e.call(l,l.__data__,s,a);return this}function uet(e){return function(){this.removeAttribute(e)}}function det(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Aet(e,t){return function(){this.setAttribute(e,t)}}function fet(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function het(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function met(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function pet(e,t){var r=$k(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?det:uet:typeof t=="function"?r.local?met:het:r.local?fet:Aet)(r,t))}function xce(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function get(e){return function(){this.style.removeProperty(e)}}function xet(e,t,r){return function(){this.style.setProperty(e,t,r)}}function vet(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function bet(e,t,r){return arguments.length>1?this.each((t==null?get:typeof t=="function"?vet:xet)(e,t,r??"")):k1(this.node(),e)}function k1(e,t){return e.style.getPropertyValue(t)||xce(e).getComputedStyle(e,null).getPropertyValue(t)}function yet(e){return function(){delete this[e]}}function wet(e,t){return function(){this[e]=t}}function Eet(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Cet(e,t){return arguments.length>1?this.each((t==null?yet:typeof t=="function"?Eet:wet)(e,t)):this.node()[e]}function vce(e){return e.trim().split(/^|\s+/)}function fM(e){return e.classList||new bce(e)}function bce(e){this._node=e,this._names=vce(e.getAttribute("class")||"")}bce.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yce(e,t){for(var r=fM(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function wce(e,t){for(var r=fM(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Net(e){return function(){yce(this,e)}}function _et(e){return function(){wce(this,e)}}function ket(e,t){return function(){(t.apply(this,arguments)?yce:wce)(this,e)}}function jet(e,t){var r=vce(e+"");if(arguments.length<2){for(var n=fM(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?ket:t?Net:_et)(r,t))}function Bet(){this.textContent=""}function Tet(e){return function(){this.textContent=e}}function Iet(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Fet(e){return arguments.length?this.each(e==null?Bet:(typeof e=="function"?Iet:Tet)(e)):this.node().textContent}function Oet(){this.innerHTML=""}function Det(e){return function(){this.innerHTML=e}}function Pet(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ret(e){return arguments.length?this.each(e==null?Oet:(typeof e=="function"?Pet:Det)(e)):this.node().innerHTML}function Let(){this.nextSibling&&this.parentNode.appendChild(this)}function Met(){return this.each(Let)}function Uet(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qet(){return this.each(Uet)}function Het(e){var t=typeof e=="function"?e:fce(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vet(){return null}function zet(e,t){var r=typeof e=="function"?e:fce(e),n=t==null?Vet:typeof t=="function"?t:AM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function $et(){var e=this.parentNode;e&&e.removeChild(this)}function Get(){return this.each($et)}function Ket(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qet(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wet(e){return this.select(e?qet:Ket)}function Xet(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Yet(e){return function(t){e.call(this,t,this.__data__)}}function Jet(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Zet(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function ett(e,t,r){return function(){var n=this.__on,a,s=Yet(t);if(n){for(var i=0,l=n.length;i<l;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function ttt(e,t,r){var n=Jet(e+""),a,s=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(l=t?ett:Zet,a=0;a<s;++a)this.each(l(n[a],t,r));return this}function Ece(e,t,r){var n=xce(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function rtt(e,t){return function(){return Ece(this,e,t)}}function ntt(e,t){return function(){return Ece(this,e,t.apply(this,arguments))}}function att(e,t){return this.each((typeof t=="function"?ntt:rtt)(e,t))}function*stt(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var Cce=[null];function Jc(e,t){this._groups=e,this._parents=t}function wE(){return new Jc([[document.documentElement]],Cce)}function itt(){return this}Jc.prototype=wE.prototype={constructor:Jc,select:BZe,selectAll:OZe,selectChild:LZe,selectChildren:HZe,filter:VZe,data:WZe,enter:zZe,exit:YZe,join:JZe,merge:ZZe,selection:itt,order:eet,sort:tet,call:net,nodes:aet,node:set,size:iet,empty:oet,each:cet,attr:pet,style:bet,property:Cet,classed:jet,text:Fet,html:Ret,raise:Met,lower:Qet,append:Het,insert:zet,remove:Get,clone:Wet,datum:Xet,on:ttt,dispatch:att,[Symbol.iterator]:stt};function Ru(e){return typeof e=="string"?new Jc([[document.querySelector(e)]],[document.documentElement]):new Jc([[e]],Cce)}function ott(e){let t;for(;t=e.sourceEvent;)e=t;return e}function RA(e,t){if(e=ott(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const ltt={passive:!1},w2={capture:!0,passive:!1};function jI(e){e.stopImmediatePropagation()}function Vv(e){e.preventDefault(),e.stopImmediatePropagation()}function Nce(e){var t=e.document.documentElement,r=Ru(e).on("dragstart.drag",Vv,w2);"onselectstart"in t?r.on("selectstart.drag",Vv,w2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _ce(e,t){var r=e.document.documentElement,n=Ru(e).on("dragstart.drag",null);t&&(n.on("click.drag",Vv,w2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const vN=e=>()=>e;function OO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}OO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ctt(e){return!e.ctrlKey&&!e.button}function utt(){return this.parentNode}function dtt(e,t){return t??{x:e.x,y:e.y}}function Att(){return navigator.maxTouchPoints||"ontouchstart"in this}function ftt(){var e=ctt,t=utt,r=dtt,n=Att,a={},s=zk("start","drag","end"),i=0,l,c,u,d,f=0;function h(B){B.on("mousedown.drag",m).filter(n).on("touchstart.drag",v).on("touchmove.drag",y,ltt).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(B,k){if(!(d||!e.call(this,B,k))){var F=N(this,t.call(this,B,k),B,k,"mouse");F&&(Ru(B.view).on("mousemove.drag",g,w2).on("mouseup.drag",x,w2),Nce(B.view),jI(B),u=!1,l=B.clientX,c=B.clientY,F("start",B))}}function g(B){if(Vv(B),!u){var k=B.clientX-l,F=B.clientY-c;u=k*k+F*F>f}a.mouse("drag",B)}function x(B){Ru(B.view).on("mousemove.drag mouseup.drag",null),_ce(B.view,u),Vv(B),a.mouse("end",B)}function v(B,k){if(e.call(this,B,k)){var F=B.changedTouches,E=t.call(this,B,k),S=F.length,T,L;for(T=0;T<S;++T)(L=N(this,E,B,k,F[T].identifier,F[T]))&&(jI(B),L("start",B,F[T]))}}function y(B){var k=B.changedTouches,F=k.length,E,S;for(E=0;E<F;++E)(S=a[k[E].identifier])&&(Vv(B),S("drag",B,k[E]))}function w(B){var k=B.changedTouches,F=k.length,E,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<F;++E)(S=a[k[E].identifier])&&(jI(B),S("end",B,k[E]))}function N(B,k,F,E,S,T){var L=s.copy(),R=RA(T||F,k),j,P,M;if((M=r.call(B,new OO("beforestart",{sourceEvent:F,target:h,identifier:S,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:L}),E))!=null)return j=M.x-R[0]||0,P=M.y-R[1]||0,function Z(V,W,G){var K=R,ee;switch(V){case"start":a[S]=Z,ee=i++;break;case"end":delete a[S],--i;case"drag":R=RA(G||W,k),ee=i;break}L.call(V,B,new OO(V,{sourceEvent:W,subject:M,target:h,identifier:S,active:ee,x:R[0]+j,y:R[1]+P,dx:R[0]-K[0],dy:R[1]-K[1],dispatch:L}),E)}}return h.filter=function(B){return arguments.length?(e=typeof B=="function"?B:vN(!!B),h):e},h.container=function(B){return arguments.length?(t=typeof B=="function"?B:vN(B),h):t},h.subject=function(B){return arguments.length?(r=typeof B=="function"?B:vN(B),h):r},h.touchable=function(B){return arguments.length?(n=typeof B=="function"?B:vN(!!B),h):n},h.on=function(){var B=s.on.apply(s,arguments);return B===s?h:B},h.clickDistance=function(B){return arguments.length?(f=(B=+B)*B,h):Math.sqrt(f)},h}var j1=0,$y=0,gy=0,Sce=1e3,SS,Gy,kS=0,Bg=0,Gk=0,E2=typeof performance=="object"&&performance.now?performance:Date,kce=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function hM(){return Bg||(kce(htt),Bg=E2.now()+Gk)}function htt(){Bg=0}function jS(){this._call=this._time=this._next=null}jS.prototype=jce.prototype={constructor:jS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?hM():+r)+(t==null?0:+t),!this._next&&Gy!==this&&(Gy?Gy._next=this:SS=this,Gy=this),this._call=e,this._time=r,DO()},stop:function(){this._call&&(this._call=null,this._time=1/0,DO())}};function jce(e,t,r){var n=new jS;return n.restart(e,t,r),n}function mtt(){hM(),++j1;for(var e=SS,t;e;)(t=Bg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--j1}function eW(){Bg=(kS=E2.now())+Gk,j1=$y=0;try{mtt()}finally{j1=0,gtt(),Bg=0}}function ptt(){var e=E2.now(),t=e-kS;t>Sce&&(Gk-=t,kS=e)}function gtt(){for(var e,t=SS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:SS=r);Gy=e,DO(n)}function DO(e){if(!j1){$y&&($y=clearTimeout($y));var t=e-Bg;t>24?(e<1/0&&($y=setTimeout(eW,e-E2.now()-Gk)),gy&&(gy=clearInterval(gy))):(gy||(kS=E2.now(),gy=setInterval(ptt,Sce)),j1=1,kce(eW))}}function tW(e,t,r){var n=new jS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var xtt=zk("start","end","cancel","interrupt"),vtt=[],Bce=0,rW=1,PO=2,w5=3,nW=4,RO=5,E5=6;function Kk(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;btt(e,r,{name:t,index:n,group:a,on:xtt,tween:vtt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Bce})}function mM(e,t){var r=Yd(e,t);if(r.state>Bce)throw new Error("too late; already scheduled");return r}function df(e,t){var r=Yd(e,t);if(r.state>w5)throw new Error("too late; already running");return r}function Yd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function btt(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=jce(s,0,r.time);function s(u){r.state=rW,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,m;if(r.state!==rW)return c();for(d in n)if(m=n[d],m.name===r.name){if(m.state===w5)return tW(i);m.state===nW?(m.state=E5,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[d]):+d<t&&(m.state=E5,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[d])}if(tW(function(){r.state===w5&&(r.state=nW,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=PO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===PO){for(r.state=w5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(m=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=m);a.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=RO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===RO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=E5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function C5(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>PO&&n.state<RO,n.state=E5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function ytt(e){return this.each(function(){C5(this,e)})}function wtt(e,t){var r,n;return function(){var a=df(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,l=n.length;i<l;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Ett(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=df(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var l={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=l;break}c===u&&a.push(l)}s.tween=a}}function Ctt(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Yd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?wtt:Ett)(r,e,t))}function pM(e,t,r){var n=e._id;return e.each(function(){var a=df(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Yd(a,n).value[t]}}function Tce(e,t){var r;return(typeof t=="number"?Sd:t instanceof Ng?rS:(r=Ng(t))?(t=r,rS):qae)(e,t)}function Ntt(e){return function(){this.removeAttribute(e)}}function _tt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Stt(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function ktt(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function jtt(e,t,r){var n,a,s;return function(){var i,l=r(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,l)))}}function Btt(e,t,r){var n,a,s;return function(){var i,l=r(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,l)))}}function Ttt(e,t){var r=$k(e),n=r==="transform"?d8e:Tce;return this.attrTween(e,typeof t=="function"?(r.local?Btt:jtt)(r,n,pM(this,"attr."+e,t)):t==null?(r.local?_tt:Ntt)(r):(r.local?ktt:Stt)(r,n,t))}function Itt(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Ftt(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Ott(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Ftt(e,s)),r}return a._value=t,a}function Dtt(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Itt(e,s)),r}return a._value=t,a}function Ptt(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=$k(e);return this.tween(r,(n.local?Ott:Dtt)(n,t))}function Rtt(e,t){return function(){mM(this,e).delay=+t.apply(this,arguments)}}function Ltt(e,t){return t=+t,function(){mM(this,e).delay=t}}function Mtt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rtt:Ltt)(t,e)):Yd(this.node(),t).delay}function Utt(e,t){return function(){df(this,e).duration=+t.apply(this,arguments)}}function Qtt(e,t){return t=+t,function(){df(this,e).duration=t}}function Htt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Utt:Qtt)(t,e)):Yd(this.node(),t).duration}function Vtt(e,t){if(typeof t!="function")throw new Error;return function(){df(this,e).ease=t}}function ztt(e){var t=this._id;return arguments.length?this.each(Vtt(t,e)):Yd(this.node(),t).ease}function $tt(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;df(this,e).ease=r}}function Gtt(e){if(typeof e!="function")throw new Error;return this.each($tt(this._id,e))}function Ktt(e){typeof e!="function"&&(e=mce(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,l=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&l.push(c);return new Ih(n,this._parents,this._name,this._id)}function qtt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),l=0;l<s;++l)for(var c=t[l],u=r[l],d=c.length,f=i[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<n;++l)i[l]=t[l];return new Ih(i,this._parents,this._name,this._id)}function Wtt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Xtt(e,t,r){var n,a,s=Wtt(t)?mM:df;return function(){var i=s(this,e),l=i.on;l!==n&&(a=(n=l).copy()).on(t,r),i.on=a}}function Ytt(e,t){var r=this._id;return arguments.length<2?Yd(this.node(),r).on.on(e):this.each(Xtt(r,e,t))}function Jtt(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Ztt(){return this.on("end.remove",Jtt(this._id))}function ert(e){var t=this._name,r=this._id;typeof e!="function"&&(e=AM(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var l=n[i],c=l.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=e.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Kk(u[h],t,r,h,u,Yd(d,r)));return new Ih(s,this._parents,t,r)}function trt(e){var t=this._name,r=this._id;typeof e!="function"&&(e=hce(e));for(var n=this._groups,a=n.length,s=[],i=[],l=0;l<a;++l)for(var c=n[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),m,g=Yd(d,r),x=0,v=h.length;x<v;++x)(m=h[x])&&Kk(m,t,r,x,h,g);s.push(h),i.push(d)}return new Ih(s,i,t,r)}var rrt=wE.prototype.constructor;function nrt(){return new rrt(this._groups,this._parents)}function art(e,t){var r,n,a;return function(){var s=k1(this,e),i=(this.style.removeProperty(e),k1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function Ice(e){return function(){this.style.removeProperty(e)}}function srt(e,t,r){var n,a=r+"",s;return function(){var i=k1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function irt(e,t,r){var n,a,s;return function(){var i=k1(this,e),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),k1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,l))}}function ort(e,t){var r,n,a,s="style."+t,i="end."+s,l;return function(){var c=df(this,e),u=c.on,d=c.value[s]==null?l||(l=Ice(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function lrt(e,t,r){var n=(e+="")=="transform"?u8e:Tce;return t==null?this.styleTween(e,art(e,n)).on("end.style."+e,Ice(e)):typeof t=="function"?this.styleTween(e,irt(e,n,pM(this,"style."+e,t))).each(ort(this._id,e)):this.styleTween(e,srt(e,n,t),r).on("end.style."+e,null)}function crt(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function urt(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&crt(e,i,r)),n}return s._value=t,s}function drt(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,urt(e,t,r??""))}function Art(e){return function(){this.textContent=e}}function frt(e){return function(){var t=e(this);this.textContent=t??""}}function hrt(e){return this.tween("text",typeof e=="function"?frt(pM(this,"text",e)):Art(e==null?"":e+""))}function mrt(e){return function(t){this.textContent=e.call(this,t)}}function prt(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&mrt(a)),t}return n._value=e,n}function grt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,prt(e))}function xrt(){for(var e=this._name,t=this._id,r=Fce(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],l=i.length,c,u=0;u<l;++u)if(c=i[u]){var d=Yd(c,t);Kk(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ih(n,this._parents,e,r)}function vrt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var l={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=df(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),u.on=t}),a===0&&s()})}var brt=0;function Ih(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Fce(){return++brt}var zf=wE.prototype;Ih.prototype={constructor:Ih,select:ert,selectAll:trt,selectChild:zf.selectChild,selectChildren:zf.selectChildren,filter:Ktt,merge:qtt,selection:nrt,transition:xrt,call:zf.call,nodes:zf.nodes,node:zf.node,size:zf.size,empty:zf.empty,each:zf.each,on:Ytt,attr:Ttt,attrTween:Ptt,style:lrt,styleTween:drt,text:hrt,textTween:grt,remove:Ztt,tween:Ctt,delay:Mtt,duration:Htt,ease:ztt,easeVarying:Gtt,end:vrt,[Symbol.iterator]:zf[Symbol.iterator]};function yrt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wrt={time:null,delay:0,duration:250,ease:yrt};function Ert(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Crt(e){var t,r;e instanceof Ih?(t=e._id,e=e._name):(t=Fce(),(r=wrt).time=hM(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],l=i.length,c,u=0;u<l;++u)(c=i[u])&&Kk(c,e,t,u,i,r||Ert(c,t));return new Ih(n,this._parents,e,t)}wE.prototype.interrupt=ytt;wE.prototype.transition=Crt;const bN=e=>()=>e;function Nrt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function lh(e,t,r){this.k=e,this.x=t,this.y=r}lh.prototype={constructor:lh,scale:function(e){return e===1?this:new lh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dm=new lh(1,0,0);lh.prototype;function BI(e){e.stopImmediatePropagation()}function xy(e){e.preventDefault(),e.stopImmediatePropagation()}function _rt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Srt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function aW(){return this.__zoom||dm}function krt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jrt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Brt(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Trt(){var e=_rt,t=Srt,r=Brt,n=krt,a=jrt,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=m8e,u=zk("start","zoom","end"),d,f,h,m=500,g=150,x=0,v=10;function y(M){M.property("__zoom",aW).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",L).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(M,Z,V,W){var G=M.selection?M.selection():M;G.property("__zoom",aW),M!==G?k(M,Z,V,W):G.interrupt().each(function(){F(this,arguments).event(W).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},y.scaleBy=function(M,Z,V,W){y.scaleTo(M,function(){var G=this.__zoom.k,K=typeof Z=="function"?Z.apply(this,arguments):Z;return G*K},V,W)},y.scaleTo=function(M,Z,V,W){y.transform(M,function(){var G=t.apply(this,arguments),K=this.__zoom,ee=V==null?B(G):typeof V=="function"?V.apply(this,arguments):V,X=K.invert(ee),D=typeof Z=="function"?Z.apply(this,arguments):Z;return r(N(w(K,D),ee,X),G,i)},V,W)},y.translateBy=function(M,Z,V,W){y.transform(M,function(){return r(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),i)},null,W)},y.translateTo=function(M,Z,V,W,G){y.transform(M,function(){var K=t.apply(this,arguments),ee=this.__zoom,X=W==null?B(K):typeof W=="function"?W.apply(this,arguments):W;return r(dm.translate(X[0],X[1]).scale(ee.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof V=="function"?-V.apply(this,arguments):-V),K,i)},W,G)};function w(M,Z){return Z=Math.max(s[0],Math.min(s[1],Z)),Z===M.k?M:new lh(Z,M.x,M.y)}function N(M,Z,V){var W=Z[0]-V[0]*M.k,G=Z[1]-V[1]*M.k;return W===M.x&&G===M.y?M:new lh(M.k,W,G)}function B(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function k(M,Z,V,W){M.on("start.zoom",function(){F(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(W).end()}).tween("zoom",function(){var G=this,K=arguments,ee=F(G,K).event(W),X=t.apply(G,K),D=V==null?B(X):typeof V=="function"?V.apply(G,K):V,Q=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),z=G.__zoom,J=typeof Z=="function"?Z.apply(G,K):Z,te=c(z.invert(D).concat(Q/z.k),J.invert(D).concat(Q/J.k));return function(se){if(se===1)se=J;else{var ie=te(se),le=Q/ie[2];se=new lh(le,D[0]-ie[0]*le,D[1]-ie[1]*le)}ee.zoom(null,se)}})}function F(M,Z,V){return!V&&M.__zooming||new E(M,Z)}function E(M,Z){this.that=M,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,Z),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,Z){return this.mouse&&M!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var Z=Ru(this.that).datum();u.call(M,this.that,new Nrt(M,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),Z)}};function S(M,...Z){if(!e.apply(this,arguments))return;var V=F(this,Z).event(M),W=this.__zoom,G=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,n.apply(this,arguments)))),K=RA(M);if(V.wheel)(V.mouse[0][0]!==K[0]||V.mouse[0][1]!==K[1])&&(V.mouse[1]=W.invert(V.mouse[0]=K)),clearTimeout(V.wheel);else{if(W.k===G)return;V.mouse=[K,W.invert(K)],C5(this),V.start()}xy(M),V.wheel=setTimeout(ee,g),V.zoom("mouse",r(N(w(W,G),V.mouse[0],V.mouse[1]),V.extent,i));function ee(){V.wheel=null,V.end()}}function T(M,...Z){if(h||!e.apply(this,arguments))return;var V=M.currentTarget,W=F(this,Z,!0).event(M),G=Ru(M.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",Q,!0),K=RA(M,V),ee=M.clientX,X=M.clientY;Nce(M.view),BI(M),W.mouse=[K,this.__zoom.invert(K)],C5(this),W.start();function D(z){if(xy(z),!W.moved){var J=z.clientX-ee,te=z.clientY-X;W.moved=J*J+te*te>x}W.event(z).zoom("mouse",r(N(W.that.__zoom,W.mouse[0]=RA(z,V),W.mouse[1]),W.extent,i))}function Q(z){G.on("mousemove.zoom mouseup.zoom",null),_ce(z.view,W.moved),xy(z),W.event(z).end()}}function L(M,...Z){if(e.apply(this,arguments)){var V=this.__zoom,W=RA(M.changedTouches?M.changedTouches[0]:M,this),G=V.invert(W),K=V.k*(M.shiftKey?.5:2),ee=r(N(w(V,K),W,G),t.apply(this,Z),i);xy(M),l>0?Ru(this).transition().duration(l).call(k,ee,W,M):Ru(this).call(y.transform,ee,W,M)}}function R(M,...Z){if(e.apply(this,arguments)){var V=M.touches,W=V.length,G=F(this,Z,M.changedTouches.length===W).event(M),K,ee,X,D;for(BI(M),ee=0;ee<W;++ee)X=V[ee],D=RA(X,this),D=[D,this.__zoom.invert(D),X.identifier],G.touch0?!G.touch1&&G.touch0[2]!==D[2]&&(G.touch1=D,G.taps=0):(G.touch0=D,K=!0,G.taps=1+!!d);d&&(d=clearTimeout(d)),K&&(G.taps<2&&(f=D[0],d=setTimeout(function(){d=null},m)),C5(this),G.start())}}function j(M,...Z){if(this.__zooming){var V=F(this,Z).event(M),W=M.changedTouches,G=W.length,K,ee,X,D;for(xy(M),K=0;K<G;++K)ee=W[K],X=RA(ee,this),V.touch0&&V.touch0[2]===ee.identifier?V.touch0[0]=X:V.touch1&&V.touch1[2]===ee.identifier&&(V.touch1[0]=X);if(ee=V.that.__zoom,V.touch1){var Q=V.touch0[0],z=V.touch0[1],J=V.touch1[0],te=V.touch1[1],se=(se=J[0]-Q[0])*se+(se=J[1]-Q[1])*se,ie=(ie=te[0]-z[0])*ie+(ie=te[1]-z[1])*ie;ee=w(ee,Math.sqrt(se/ie)),X=[(Q[0]+J[0])/2,(Q[1]+J[1])/2],D=[(z[0]+te[0])/2,(z[1]+te[1])/2]}else if(V.touch0)X=V.touch0[0],D=V.touch0[1];else return;V.zoom("touch",r(N(ee,X,D),V.extent,i))}}function P(M,...Z){if(this.__zooming){var V=F(this,Z).event(M),W=M.changedTouches,G=W.length,K,ee;for(BI(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),K=0;K<G;++K)ee=W[K],V.touch0&&V.touch0[2]===ee.identifier?delete V.touch0:V.touch1&&V.touch1[2]===ee.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(ee=RA(ee,this),Math.hypot(f[0]-ee[0],f[1]-ee[1])<v)){var X=Ru(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return y.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:bN(+M),y):n},y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:bN(!!M),y):e},y.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:bN(!!M),y):a},y.extent=function(M){return arguments.length?(t=typeof M=="function"?M:bN([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),y):t},y.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],y):[s[0],s[1]]},y.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(M){return arguments.length?(r=M,y):r},y.duration=function(M){return arguments.length?(l=+M,y):l},y.interpolate=function(M){return arguments.length?(c=M,y):c},y.on=function(){var M=u.on.apply(u,arguments);return M===u?y:M},y.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,y):Math.sqrt(x)},y.tapDistance=function(M){return arguments.length?(v=+M,y):v},y}const qk=_.createContext(null),Irt=qk.Provider,Fh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Oce=Fh.error001();function us(e,t){const r=_.useContext(qk);if(r===null)throw new Error(Oce);return Ace(r,e,t)}const ao=()=>{const e=_.useContext(qk);if(e===null)throw new Error(Oce);return _.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Frt=e=>e.userSelectionActive?"none":"all";function Dce({position:e,children:t,className:r,style:n,...a}){const s=us(Frt),i=`${e}`.split("-");return at.createElement("div",{className:jl(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Ort({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:at.createElement(Dce,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},at.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Drt=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:u,...d})=>{const f=_.useRef(null),[h,m]=_.useState({x:0,y:0,width:0,height:0}),g=jl(["react-flow__edge-textwrapper",u]);return _.useEffect(()=>{if(f.current){const x=f.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:at.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&at.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),at.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var Prt=_.memo(Drt);const gM=e=>({width:e.offsetWidth,height:e.offsetHeight}),B1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),xM=(e={x:0,y:0},t)=>({x:B1(e.x,t[0][0],t[1][0]),y:B1(e.y,t[0][1],t[1][1])}),sW=(e,t,r)=>e<t?B1(Math.abs(e-t),1,50)/50:e>r?-B1(Math.abs(e-r),1,50)/50:0,Pce=(e,t)=>{const r=sW(e.x,35,t.width-35)*20,n=sW(e.y,35,t.height-35)*20;return[r,n]},Rce=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Rrt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),vM=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),Lrt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),iW=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),LO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Mrt=e=>Qu(e.width)&&Qu(e.height)&&Qu(e.x)&&Qu(e.y),Qu=e=>!isNaN(e)&&isFinite(e),js=Symbol.for("internals"),Lce=["Enter"," ","Escape"],Urt=(e,t)=>{},Qrt=e=>"nativeEvent"in e;function MO(e){var a,s;const t=Qrt(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Mce=e=>"clientX"in e,Am=(e,t)=>{var s,i;const r=Mce(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},BS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},EE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m=20})=>at.createElement(at.Fragment,null,at.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),m&&at.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&Qu(r)&&Qu(n)?at.createElement(Prt,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null);EE.displayName="BaseEdge";function vy(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function Uce({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,l=n<t?n+i:n-i;return[s,l,a,i]}function Qce({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:l}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+l*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Tg;(function(e){e.Strict="strict",e.Loose="loose"})(Tg||(Tg={}));var zp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(zp||(zp={}));var C2;(function(e){e.Partial="partial",e.Full="full"})(C2||(C2={}));var K0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(K0||(K0={}));var TS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(TS||(TS={}));var Nr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Nr||(Nr={}));function oW({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Nr.Left||e===Nr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Hce({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:n,targetY:a,targetPosition:s=Nr.Top}){const[i,l]=oW({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=oW({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,m]=Qce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${l} ${c},${u} ${n},${a}`,d,f,h,m]}const bM=_.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Nr.Bottom,targetPosition:s=Nr.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})=>{const[v,y,w]=Hce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return at.createElement(EE,{path:v,labelX:y,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:x})});bM.displayName="SimpleBezierEdge";const lW={[Nr.Left]:{x:-1,y:0},[Nr.Right]:{x:1,y:0},[Nr.Top]:{x:0,y:-1},[Nr.Bottom]:{x:0,y:1}},Hrt=({source:e,sourcePosition:t=Nr.Bottom,target:r})=>t===Nr.Left||t===Nr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},cW=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Vrt({source:e,sourcePosition:t=Nr.Bottom,target:r,targetPosition:n=Nr.Top,center:a,offset:s}){const i=lW[t],l=lW[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=Hrt({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let m=[],g,x;const v={x:0,y:0},y={x:0,y:0},[w,N,B,k]=Uce({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*l[f]===-1){g=a.x??w,x=a.y??N;const E=[{x:g,y:c.y},{x:g,y:u.y}],S=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?m=f==="x"?E:S:m=f==="x"?S:E}else{const E=[{x:c.x,y:u.y}],S=[{x:u.x,y:c.y}];if(f==="x"?m=i.x===h?S:E:m=i.y===h?E:S,t===n){const P=Math.abs(e[f]-r[f]);if(P<=s){const M=Math.min(s-1,s-P);i[f]===h?v[f]=(c[f]>e[f]?-1:1)*M:y[f]=(u[f]>r[f]?-1:1)*M}}if(t!==n){const P=f==="x"?"y":"x",M=i[f]===l[P],Z=c[P]>u[P],V=c[P]<u[P];(i[f]===1&&(!M&&Z||M&&V)||i[f]!==1&&(!M&&V||M&&Z))&&(m=f==="x"?E:S)}const T={x:c.x+v.x,y:c.y+v.y},L={x:u.x+y.x,y:u.y+y.y},R=Math.max(Math.abs(T.x-m[0].x),Math.abs(L.x-m[0].x)),j=Math.max(Math.abs(T.y-m[0].y),Math.abs(L.y-m[0].y));R>=j?(g=(T.x+L.x)/2,x=m[0].y):(g=m[0].x,x=(T.y+L.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],g,x,B,k]}function zrt(e,t,r,n){const a=Math.min(cW(e,t)/2,cW(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const l=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*l},${i}`}function UO({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:n,targetY:a,targetPosition:s=Nr.Top,borderRadius:i=5,centerX:l,centerY:c,offset:u=20}){const[d,f,h,m,g]=Vrt({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:l,y:c},offset:u});return[d.reduce((v,y,w)=>{let N="";return w>0&&w<d.length-1?N=zrt(d[w-1],y,d[w+1],i):N=`${w===0?"M":"L"}${y.x} ${y.y}`,v+=N,v},""),f,h,m,g]}const Wk=_.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Nr.Bottom,targetPosition:h=Nr.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,N]=UO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return at.createElement(EE,{path:y,labelX:w,labelY:N,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:g,interactionWidth:v})});Wk.displayName="SmoothStepEdge";const yM=_.memo(e=>{var t;return at.createElement(Wk,{...e,pathOptions:_.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});yM.displayName="StepEdge";function $rt({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,l]=Uce({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,l]}const wM=_.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})=>{const[g,x,v]=$rt({sourceX:e,sourceY:t,targetX:r,targetY:n});return at.createElement(EE,{path:g,labelX:x,labelY:v,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:m})});wM.displayName="StraightEdge";function yN(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function uW({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Nr.Left:return[t-yN(t-n,s),r];case Nr.Right:return[t+yN(n-t,s),r];case Nr.Top:return[t,r-yN(r-a,s)];case Nr.Bottom:return[t,r+yN(a-r,s)]}}function Vce({sourceX:e,sourceY:t,sourcePosition:r=Nr.Bottom,targetX:n,targetY:a,targetPosition:s=Nr.Top,curvature:i=.25}){const[l,c]=uW({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=uW({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,m,g]=Qce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${l},${c} ${u},${d} ${n},${a}`,f,h,m,g]}const IS=_.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Nr.Bottom,targetPosition:s=Nr.Top,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:v})=>{const[y,w,N]=Vce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return at.createElement(EE,{path:y,labelX:w,labelY:N,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:m,markerStart:g,interactionWidth:v})});IS.displayName="BezierEdge";const EM=_.createContext(null),Grt=EM.Provider;EM.Consumer;const Krt=()=>_.useContext(EM),qrt=e=>"id"in e&&"source"in e&&"target"in e,Wrt=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,QO=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Xrt=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Yrt=(e,t)=>{if(!e.source||!e.target)return t;let r;return qrt(e)?r={...e}:r={...e,id:Wrt(e)},Xrt(r,t)?t:t.concat(r)},HO=({x:e,y:t},[r,n,a],s,[i,l])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:l*Math.round(c.y/l)}:c},zce=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),zv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},CM=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=zv(a,t).positionAbsolute;return Rrt(n,vM({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lrt(r)},$ce=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,l=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:m=!0,hidden:g=!1}=d;if(i&&!m||g)return!1;const{positionAbsolute:x}=zv(d,l),v={x:x.x,y:x.y,width:f||0,height:h||0},y=LO(c,v),w=typeof f>"u"||typeof h>"u"||f===null||h===null,N=s&&y>0,B=(f||0)*(h||0);(w||N||y>=B||d.dragging)&&u.push(d)}),u},Gce=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Kce=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),l=r/(e.height*(1+s)),c=Math.min(i,l),u=B1(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,m=r/2-f*u;return{x:h,y:m,zoom:u}},Bp=(e,t=0)=>e.transition().duration(t);function dW(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,l;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+s.y+s.height/2}),a},[])}function Jrt(e,t,r,n,a,s){const{x:i,y:l}=Am(e),u=t.elementsFromPoint(i,l).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=NM(void 0,u),v=u.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:x});if(y){const w=a.find(N=>N.nodeId===g&&N.type===x&&N.id===v);return{handle:{id:v,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const v=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:v}]:x===f&&d.push({handle:g,validHandleResult:v}),f=x)}}),!d.length)return{handle:null,validHandleResult:qce()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),m=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>m?g.type==="target":h?x.isValid:!0)||d[0]}const Zrt={source:null,target:null,sourceHandle:null,targetHandle:null},qce=()=>({handleDomNode:null,isValid:!1,connection:Zrt,endHandle:null});function Wce(e,t,r,n,a,s,i){const l=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...qce(),handleDomNode:c};if(c){const d=NM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:l?f:r,sourceHandle:l?h:n,target:l?r:f,targetHandle:l?n:h};u.connection=x,m&&g&&(t===Tg.Strict?l&&d==="source"||!l&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function ent({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[js]){const{handleBounds:i}=s[js];let l=[],c=[];i&&(l=dW(s,i,"source",`${t}-${r}-${n}`),c=dW(s,i,"target",`${t}-${r}-${n}`)),a.push(...l,...c)}return a},[])}function NM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function TI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function tnt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Xce({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}){const d=Rce(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:v,getNodes:y,cancelConnection:w}=s();let N=0,B;const{x:k,y:F}=Am(e),E=d==null?void 0:d.elementFromPoint(k,F),S=NM(c,E),T=h==null?void 0:h.getBoundingClientRect();if(!T||!S)return;let L,R=Am(e,T),j=!1,P=null,M=!1,Z=null;const V=ent({nodes:y(),nodeId:r,handleId:t,handleType:S}),W=()=>{if(!m)return;const[ee,X]=Pce(R,T);v({x:ee,y:X}),N=requestAnimationFrame(W)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:t,type:S},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:S});function G(ee){const{transform:X}=s();R=Am(ee,T);const{handle:D,validHandleResult:Q}=Jrt(ee,d,HO(R,X,!1,[1,1]),g,V,z=>Wce(z,f,r,t,a?"target":"source",l,d));if(B=D,j||(W(),j=!0),Z=Q.handleDomNode,P=Q.connection,M=Q.isValid,i({connectionPosition:B&&M?zce({x:B.x,y:B.y},X):R,connectionStatus:tnt(!!B,M),connectionEndHandle:Q.endHandle}),!B&&!M&&!Z)return TI(L);P.source!==P.target&&Z&&(TI(L),L=Z,Z.classList.add("connecting","react-flow__handle-connecting"),Z.classList.toggle("valid",M),Z.classList.toggle("react-flow__handle-valid",M))}function K(ee){var X,D;(B||Z)&&P&&M&&(n==null||n(P)),(D=(X=s()).onConnectEnd)==null||D.call(X,ee),c&&(u==null||u(ee)),TI(L),w(),cancelAnimationFrame(N),j=!1,M=!1,P=null,Z=null,d.removeEventListener("mousemove",G),d.removeEventListener("mouseup",K),d.removeEventListener("touchmove",G),d.removeEventListener("touchend",K)}d.addEventListener("mousemove",G),d.addEventListener("mouseup",K),d.addEventListener("touchmove",G),d.addEventListener("touchend",K)}const AW=()=>!0,rnt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),nnt=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Yce=_.forwardRef(({type:e="source",position:t=Nr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},m)=>{var T,L;const g=i||null,x=e==="target",v=ao(),y=Krt(),{connectOnClick:w,noPanClassName:N}=us(rnt,il),{connecting:B,clickConnecting:k}=us(nnt(y,g,e),il);y||(L=(T=v.getState()).onError)==null||L.call(T,"010",Fh.error010());const F=R=>{const{defaultEdgeOptions:j,onConnect:P,hasDefaultEdges:M}=v.getState(),Z={...j,...R};if(M){const{edges:V,setEdges:W}=v.getState();W(Yrt(Z,V))}P==null||P(Z),l==null||l(Z)},E=R=>{if(!y)return;const j=Mce(R);a&&(j&&R.button===0||!j)&&Xce({event:R,handleId:g,nodeId:y,onConnect:F,isTarget:x,getState:v.getState,setState:v.setState,isValidConnection:r||v.getState().isValidConnection||AW}),j?d==null||d(R):f==null||f(R)},S=R=>{const{onClickConnectStart:j,onClickConnectEnd:P,connectionClickStartHandle:M,connectionMode:Z,isValidConnection:V}=v.getState();if(!y||!M&&!a)return;if(!M){j==null||j(R,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const W=Rce(R.target),G=r||V||AW,{connection:K,isValid:ee}=Wce({nodeId:y,id:g,type:e},Z,M.nodeId,M.handleId||null,M.type,G,W);ee&&F(K),P==null||P(R),v.setState({connectionClickStartHandle:null})};return at.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:jl(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:k,connectionindicator:n&&(a&&!B||s&&B)}]),onMouseDown:E,onTouchStart:E,onClick:w?S:void 0,ref:m,...h},c)});Yce.displayName="Handle";var T1=_.memo(Yce);const Jce=({data:e,isConnectable:t,targetPosition:r=Nr.Top,sourcePosition:n=Nr.Bottom})=>at.createElement(at.Fragment,null,at.createElement(T1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,at.createElement(T1,{type:"source",position:n,isConnectable:t}));Jce.displayName="DefaultNode";var VO=_.memo(Jce);const Zce=({data:e,isConnectable:t,sourcePosition:r=Nr.Bottom})=>at.createElement(at.Fragment,null,e==null?void 0:e.label,at.createElement(T1,{type:"source",position:r,isConnectable:t}));Zce.displayName="InputNode";var eue=_.memo(Zce);const tue=({data:e,isConnectable:t,targetPosition:r=Nr.Top})=>at.createElement(at.Fragment,null,at.createElement(T1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);tue.displayName="OutputNode";var rue=_.memo(tue);const _M=()=>null;_M.displayName="GroupNode";const ant=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),wN=e=>e.id;function snt(e,t){return il(e.selectedNodes.map(wN),t.selectedNodes.map(wN))&&il(e.selectedEdges.map(wN),t.selectedEdges.map(wN))}const nue=_.memo(({onSelectionChange:e})=>{const t=ao(),{selectedNodes:r,selectedEdges:n}=us(ant,snt);return _.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});nue.displayName="SelectionListener";const int=e=>!!e.onSelectionChange;function ont({onSelectionChange:e}){const t=us(int);return e||t?at.createElement(nue,{onSelectionChange:e}):null}const lnt=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Mx(e,t){_.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function En(e,t,r){_.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const cnt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:x,maxZoom:v,nodeExtent:y,onNodesChange:w,onEdgesChange:N,elementsSelectable:B,connectionMode:k,snapGrid:F,snapToGrid:E,translateExtent:S,connectOnClick:T,defaultEdgeOptions:L,fitView:R,fitViewOptions:j,onNodesDelete:P,onEdgesDelete:M,onNodeDrag:Z,onNodeDragStart:V,onNodeDragStop:W,onSelectionDrag:G,onSelectionDragStart:K,onSelectionDragStop:ee,noPanClassName:X,nodeOrigin:D,rfId:Q,autoPanOnConnect:z,autoPanOnNodeDrag:J,onError:te,connectionRadius:se,isValidConnection:ie,nodeDragThreshold:le})=>{const{setNodes:ue,setEdges:je,setDefaultNodesAndEdges:ae,setMinZoom:Ne,setMaxZoom:ke,setTranslateExtent:_e,setNodeExtent:he,reset:Be}=us(lnt,il),Le=ao();return _.useEffect(()=>{const We=n==null?void 0:n.map(xe=>({...xe,...L}));return ae(r,We),()=>{Be()}},[]),En("defaultEdgeOptions",L,Le.setState),En("connectionMode",k,Le.setState),En("onConnect",a,Le.setState),En("onConnectStart",s,Le.setState),En("onConnectEnd",i,Le.setState),En("onClickConnectStart",l,Le.setState),En("onClickConnectEnd",c,Le.setState),En("nodesDraggable",u,Le.setState),En("nodesConnectable",d,Le.setState),En("nodesFocusable",f,Le.setState),En("edgesFocusable",h,Le.setState),En("edgesUpdatable",m,Le.setState),En("elementsSelectable",B,Le.setState),En("elevateNodesOnSelect",g,Le.setState),En("snapToGrid",E,Le.setState),En("snapGrid",F,Le.setState),En("onNodesChange",w,Le.setState),En("onEdgesChange",N,Le.setState),En("connectOnClick",T,Le.setState),En("fitViewOnInit",R,Le.setState),En("fitViewOnInitOptions",j,Le.setState),En("onNodesDelete",P,Le.setState),En("onEdgesDelete",M,Le.setState),En("onNodeDrag",Z,Le.setState),En("onNodeDragStart",V,Le.setState),En("onNodeDragStop",W,Le.setState),En("onSelectionDrag",G,Le.setState),En("onSelectionDragStart",K,Le.setState),En("onSelectionDragStop",ee,Le.setState),En("noPanClassName",X,Le.setState),En("nodeOrigin",D,Le.setState),En("rfId",Q,Le.setState),En("autoPanOnConnect",z,Le.setState),En("autoPanOnNodeDrag",J,Le.setState),En("onError",te,Le.setState),En("connectionRadius",se,Le.setState),En("isValidConnection",ie,Le.setState),En("nodeDragThreshold",le,Le.setState),Mx(e,ue),Mx(t,je),Mx(x,Ne),Mx(v,ke),Mx(S,_e),Mx(y,he),null},fW={display:"none"},unt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},aue="react-flow__node-desc",sue="react-flow__edge-desc",dnt="react-flow__aria-live",Ant=e=>e.ariaLiveMessage;function fnt({rfId:e}){const t=us(Ant);return at.createElement("div",{id:`${dnt}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:unt},t)}function hnt({rfId:e,disableKeyboardA11y:t}){return at.createElement(at.Fragment,null,at.createElement("div",{id:`${aue}-${e}`,style:fW},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),at.createElement("div",{id:`${sue}-${e}`,style:fW},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&at.createElement(fnt,{rfId:e}))}var N2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=_.useState(!1),a=_.useRef(!1),s=_.useRef(new Set([])),[i,l]=_.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return _.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(a.current=m.ctrlKey||m.metaKey||m.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&MO(m))return!1;const x=mW(m.code,l);s.current.add(m[x]),hW(i,s.current,!1)&&(m.preventDefault(),n(!0))},f=m=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&MO(m))return!1;const x=mW(m.code,l);hW(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(m[x]),m.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function hW(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function mW(e,t){return t.includes(e)?"code":"key"}function iue(e,t,r,n){var l,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=zv(s,n);return iue(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((l=s[js])==null?void 0:l.z)??0)>(r.z??0)?((c=s[js])==null?void 0:c.z)??0:r.z??0},n)}function oue(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:l,z:c}=iue(n,e,{...n.position,z:((s=n[js])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:l},n[js].z=c,r!=null&&r[n.id]&&(n[js].isParent=!0)}})}function II(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(l=>{var m;const c=(Qu(l.zIndex)?l.zIndex:0)+(l.selected?i:0),u=t.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},f=l.parentNode||l.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==l.type;Object.defineProperty(d,js,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[js])==null?void 0:m.handleBounds,z:c}}),a.set(l.id,d)}),oue(a,r,s),a}function lue(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:l,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(l&&c&&(h||!t.initial)){const g=r().filter(v=>{var w;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(N=>N.id===v.id):y}),x=g.every(v=>v.width&&v.height);if(g.length>0&&x){const v=CM(g,f),{x:y,y:w,zoom:N}=Kce(v,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),B=dm.translate(y,w).scale(N);return typeof t.duration=="number"&&t.duration>0?l.transform(Bp(c,t.duration),B):l.transform(c,B),!0}}return!1}function mnt(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[js]:n[js],selected:r.selected})}),new Map(t)}function pnt(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function EN({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:mnt(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:pnt(t,s)}),l==null||l(t))}const Ux=()=>{},gnt={zoomIn:Ux,zoomOut:Ux,zoomTo:Ux,getZoom:()=>1,setViewport:Ux,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ux,fitBounds:Ux,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},xnt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),vnt=()=>{const e=ao(),{d3Zoom:t,d3Selection:r}=us(xnt,il);return _.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Bp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Bp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Bp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,l,c]=e.getState().transform,u=dm.translate(a.x??i,a.y??l).scale(a.zoom??c);t.transform(Bp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>lue(e.getState,a),setCenter:(a,s,i)=>{const{width:l,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=l/2-a*d,h=c/2-s*d,m=dm.translate(f,h).scale(d);t.transform(Bp(r,i==null?void 0:i.duration),m)},fitBounds:(a,s)=>{const{width:i,height:l,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Kce(a,i,l,c,u,(s==null?void 0:s.padding)??.1),m=dm.translate(d,f).scale(h);t.transform(Bp(r,s==null?void 0:s.duration),m)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),HO(a,s,i,l)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:l,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return HO(f,s,i,l)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:l,y:c}=i.getBoundingClientRect(),u=zce(a,s);return{x:u.x+l,y:u.y+c}},viewportInitialized:!0}:gnt,[t,r])};function Xk(){const e=vnt(),t=ao(),r=_.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=_.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=_.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(v=>({...v}))},[]),s=_.useCallback(x=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===x)},[]),i=_.useCallback(x=>{const{getNodes:v,setNodes:y,hasDefaultNodes:w,onNodesChange:N}=t.getState(),B=v(),k=typeof x=="function"?x(B):x;if(w)y(k);else if(N){const F=k.length===0?B.map(E=>({type:"remove",id:E.id})):k.map(E=>({item:E,type:"reset"}));N(F)}},[]),l=_.useCallback(x=>{const{edges:v=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:N}=t.getState(),B=typeof x=="function"?x(v):x;if(w)y(B);else if(N){const k=B.length===0?v.map(F=>({type:"remove",id:F.id})):B.map(F=>({item:F,type:"reset"}));N(k)}},[]),c=_.useCallback(x=>{const v=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:N,onNodesChange:B}=t.getState();if(N){const F=[...y(),...v];w(F)}else if(B){const k=v.map(F=>({item:F,type:"add"}));B(k)}},[]),u=_.useCallback(x=>{const v=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:N,onEdgesChange:B}=t.getState();if(N)w([...y,...v]);else if(B){const k=v.map(F=>({item:F,type:"add"}));B(k)}},[]),d=_.useCallback(()=>{const{getNodes:x,edges:v=[],transform:y}=t.getState(),[w,N,B]=y;return{nodes:x().map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x:w,y:N,zoom:B}}},[]),f=_.useCallback(({nodes:x,edges:v})=>{const{nodeInternals:y,getNodes:w,edges:N,hasDefaultNodes:B,hasDefaultEdges:k,onNodesDelete:F,onEdgesDelete:E,onNodesChange:S,onEdgesChange:T}=t.getState(),L=(x||[]).map(Z=>Z.id),R=(v||[]).map(Z=>Z.id),j=w().reduce((Z,V)=>{const W=V.parentNode||V.parentId,G=!L.includes(V.id)&&W&&Z.find(ee=>ee.id===W);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(L.includes(V.id)||G)&&Z.push(V),Z},[]),P=N.filter(Z=>typeof Z.deletable=="boolean"?Z.deletable:!0),M=P.filter(Z=>R.includes(Z.id));if(j||M){const Z=Gce(j,P),V=[...M,...Z],W=V.reduce((G,K)=>(G.includes(K.id)||G.push(K.id),G),[]);if((k||B)&&(k&&t.setState({edges:N.filter(G=>!W.includes(G.id))}),B&&(j.forEach(G=>{y.delete(G.id)}),t.setState({nodeInternals:new Map(y)}))),W.length>0&&(E==null||E(V),T&&T(W.map(G=>({id:G,type:"remove"})))),j.length>0&&(F==null||F(j),S)){const G=j.map(K=>({id:K.id,type:"remove"}));S(G)}}},[]),h=_.useCallback(x=>{const v=Mrt(x),y=v?null:t.getState().nodeInternals.get(x.id);return!v&&!y?[null,null,v]:[v?x:iW(y),y,v]},[]),m=_.useCallback((x,v=!0,y)=>{const[w,N,B]=h(x);return w?(y||t.getState().getNodes()).filter(k=>{if(!B&&(k.id===N.id||!k.positionAbsolute))return!1;const F=iW(k),E=LO(F,w);return v&&E>0||E>=w.width*w.height}):[]},[]),g=_.useCallback((x,v,y=!0)=>{const[w]=h(x);if(!w)return!1;const N=LO(w,v);return y&&N>0||N>=w.width*w.height},[]);return _.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:g}),[e,r,n,a,s,i,l,c,u,d,f,m,g])}const bnt={actInsideInputWithModifier:!1};var ynt=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=ao(),{deleteElements:n}=Xk(),a=N2(e,bnt),s=N2(t);_.useEffect(()=>{if(a){const{edges:i,getNodes:l}=r.getState(),c=l().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),_.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function wnt(e){const t=ao();_.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=gM(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Fh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const SM={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ent=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,CN=e=>({x:e.x,y:e.y,zoom:e.k}),Qx=(e,t)=>e.target.closest(`.${t}`),pW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),gW=e=>{const t=e.ctrlKey&&BS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Cnt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Nnt=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=zp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:v,preventScrolling:y=!0,children:w,noWheelClassName:N,noPanClassName:B})=>{const k=_.useRef(),F=ao(),E=_.useRef(!1),S=_.useRef(!1),T=_.useRef(null),L=_.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:j,d3ZoomHandler:P,userSelectionActive:M}=us(Cnt,il),Z=N2(v),V=_.useRef(0),W=_.useRef(!1),G=_.useRef();return wnt(T),_.useEffect(()=>{if(T.current){const K=T.current.getBoundingClientRect(),ee=Trt().scaleExtent([g,x]).translateExtent(m),X=Ru(T.current).call(ee),D=dm.translate(h.x,h.y).scale(B1(h.zoom,g,x)),Q=[[0,0],[K.width,K.height]],z=ee.constrain()(D,Q,m);ee.transform(X,z),ee.wheelDelta(gW),F.setState({d3Zoom:ee,d3Selection:X,d3ZoomHandler:X.on("wheel.zoom"),transform:[z.x,z.y,z.k],domNode:T.current.closest(".react-flow")})}},[]),_.useEffect(()=>{j&&R&&(i&&!Z&&!M?j.on("wheel.zoom",K=>{if(Qx(K,N))return!1;K.preventDefault(),K.stopImmediatePropagation();const ee=j.property("__zoom").k||1;if(K.ctrlKey&&s){const ie=RA(K),le=gW(K),ue=ee*Math.pow(2,le);R.scaleTo(j,ue,ie,K);return}const X=K.deltaMode===1?20:1;let D=c===zp.Vertical?0:K.deltaX*X,Q=c===zp.Horizontal?0:K.deltaY*X;!BS()&&K.shiftKey&&c!==zp.Vertical&&(D=K.deltaY*X,Q=0),R.translateBy(j,-(D/ee)*l,-(Q/ee)*l,{internal:!0});const z=CN(j.property("__zoom")),{onViewportChangeStart:J,onViewportChange:te,onViewportChangeEnd:se}=F.getState();clearTimeout(G.current),W.current||(W.current=!0,t==null||t(K,z),J==null||J(z)),W.current&&(e==null||e(K,z),te==null||te(z),G.current=setTimeout(()=>{r==null||r(K,z),se==null||se(z),W.current=!1},150))},{passive:!1}):typeof P<"u"&&j.on("wheel.zoom",function(K,ee){if(!y&&K.type==="wheel"&&!K.ctrlKey||Qx(K,N))return null;K.preventDefault(),P.call(this,K,ee)},{passive:!1}))},[M,i,c,j,R,P,Z,s,y,N,t,e,r]),_.useEffect(()=>{R&&R.on("start",K=>{var D,Q;if(!K.sourceEvent||K.sourceEvent.internal)return null;V.current=(D=K.sourceEvent)==null?void 0:D.button;const{onViewportChangeStart:ee}=F.getState(),X=CN(K.transform);E.current=!0,L.current=X,((Q=K.sourceEvent)==null?void 0:Q.type)==="mousedown"&&F.setState({paneDragging:!0}),ee==null||ee(X),t==null||t(K.sourceEvent,X)})},[R,t]),_.useEffect(()=>{R&&(M&&!E.current?R.on("zoom",null):M||R.on("zoom",K=>{var X;const{onViewportChange:ee}=F.getState();if(F.setState({transform:[K.transform.x,K.transform.y,K.transform.k]}),S.current=!!(n&&pW(f,V.current??0)),(e||ee)&&!((X=K.sourceEvent)!=null&&X.internal)){const D=CN(K.transform);ee==null||ee(D),e==null||e(K.sourceEvent,D)}}))},[M,R,e,f,n]),_.useEffect(()=>{R&&R.on("end",K=>{if(!K.sourceEvent||K.sourceEvent.internal)return null;const{onViewportChangeEnd:ee}=F.getState();if(E.current=!1,F.setState({paneDragging:!1}),n&&pW(f,V.current??0)&&!S.current&&n(K.sourceEvent),S.current=!1,(r||ee)&&Ent(L.current,K.transform)){const X=CN(K.transform);L.current=X,clearTimeout(k.current),k.current=setTimeout(()=>{ee==null||ee(X),r==null||r(K.sourceEvent,X)},i?150:0)}})},[R,i,f,r,n]),_.useEffect(()=>{R&&R.filter(K=>{const ee=Z||a,X=s&&K.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&K.button===1&&K.type==="mousedown"&&(Qx(K,"react-flow__node")||Qx(K,"react-flow__edge")))return!0;if(!f&&!ee&&!i&&!u&&!s||M||!u&&K.type==="dblclick"||Qx(K,N)&&K.type==="wheel"||Qx(K,B)&&(K.type!=="wheel"||i&&K.type==="wheel"&&!Z)||!s&&K.ctrlKey&&K.type==="wheel"||!ee&&!i&&!X&&K.type==="wheel"||!f&&(K.type==="mousedown"||K.type==="touchstart")||Array.isArray(f)&&!f.includes(K.button)&&K.type==="mousedown")return!1;const D=Array.isArray(f)&&f.includes(K.button)||!K.button||K.button<=1;return(!K.ctrlKey||K.type==="wheel")&&D})},[M,R,a,s,i,u,f,d,Z]),at.createElement("div",{className:"react-flow__renderer",ref:T,style:SM},w)},_nt=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Snt(){const{userSelectionActive:e,userSelectionRect:t}=us(_nt,il);return e&&t?at.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function xW(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function cue(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(l=>l.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const l of s)if(l)switch(l.type){case"select":{i.selected=l.selected;break}case"position":{typeof l.position<"u"&&(i.position=l.position),typeof l.positionAbsolute<"u"&&(i.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&xW(n,i);break}case"dimensions":{typeof l.dimensions<"u"&&(i.width=l.dimensions.width,i.height=l.dimensions.height),typeof l.updateStyle<"u"&&(i.style={...i.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(i.resizing=l.resizing),i.expandParent&&xW(n,i);break}case"remove":return n}return n.push(i),n},r)}function uue(e,t){return cue(e,t)}function knt(e,t){return cue(e,t)}const U0=(e,t)=>({id:e,type:"select",selected:t});function bv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(U0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(U0(n.id,!1))),r},[])}const FI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},jnt=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),due=_.memo(({isSelecting:e,selectionMode:t=C2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=_.useRef(null),m=ao(),g=_.useRef(0),x=_.useRef(0),v=_.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:N}=us(jnt,il),B=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},k=P=>{s==null||s(P),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},F=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}i==null||i(P)},E=l?P=>l(P):void 0,S=P=>{const{resetSelectedElements:M,domNode:Z}=m.getState();if(v.current=Z==null?void 0:Z.getBoundingClientRect(),!w||!e||P.button!==0||P.target!==h.current||!v.current)return;const{x:V,y:W}=Am(P,v.current);M(),m.setState({userSelectionRect:{width:0,height:0,startX:V,startY:W,x:V,y:W}}),n==null||n(P)},T=P=>{const{userSelectionRect:M,nodeInternals:Z,edges:V,transform:W,onNodesChange:G,onEdgesChange:K,nodeOrigin:ee,getNodes:X}=m.getState();if(!e||!v.current||!M)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=Am(P,v.current),Q=M.startX??0,z=M.startY??0,J={...M,x:D.x<Q?D.x:Q,y:D.y<z?D.y:z,width:Math.abs(D.x-Q),height:Math.abs(D.y-z)},te=X(),se=$ce(Z,J,W,t===C2.Partial,!0,ee),ie=Gce(se,V).map(ue=>ue.id),le=se.map(ue=>ue.id);if(g.current!==le.length){g.current=le.length;const ue=bv(te,le);ue.length&&(G==null||G(ue))}if(x.current!==ie.length){x.current=ie.length;const ue=bv(V,ie);ue.length&&(K==null||K(ue))}m.setState({userSelectionRect:J})},L=P=>{if(P.button!==0)return;const{userSelectionRect:M}=m.getState();!y&&M&&P.target===h.current&&(k==null||k(P)),m.setState({nodesSelectionActive:g.current>0}),B(),a==null||a(P)},R=P=>{y&&(m.setState({nodesSelectionActive:g.current>0}),a==null||a(P)),B()},j=w&&(e||y);return at.createElement("div",{className:jl(["react-flow__pane",{dragging:N,selection:e}]),onClick:j?void 0:FI(k,h),onContextMenu:FI(F,h),onWheel:FI(E,h),onMouseEnter:j?void 0:c,onMouseDown:j?S:void 0,onMouseMove:j?T:u,onMouseUp:j?L:void 0,onMouseLeave:j?R:d,ref:h,style:SM},f,at.createElement(Snt,null))});due.displayName="Pane";function Aue(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:Aue(n,t):!1}function vW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Bnt(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!Aue(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Tnt(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function fue(e,t,r,n,a=[0,0],s){const i=Tnt(e,e.extent||n);let l=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:m}=zv(f,a).positionAbsolute;l=f&&Qu(h)&&Qu(m)&&Qu(f.width)&&Qu(f.height)?[[h+e.width*a[0],m+e.height*a[1]],[h+f.width-e.width+e.width*a[0],m+f.height-e.height+e.height*a[1]]]:l}else s==null||s("005",Fh.error005()),l=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:m}=zv(f,a).positionAbsolute;l=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=r.get(c);u=zv(f,a).positionAbsolute}const d=l&&l!=="parent"?xM(t,l):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function OI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const bW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),l={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-l.x)/r,y:(u.top-i.top-l.y)/r,...gM(c)}})};function by(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function zO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:l,onError:c}=t.getState(),u=l.get(e);if(!u){c==null||c("012",Fh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function Int(){const e=ao();return _.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(l-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function DI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function hue({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const l=ao(),[c,u]=_.useState(!1),d=_.useRef([]),f=_.useRef({x:null,y:null}),h=_.useRef(0),m=_.useRef(null),g=_.useRef({x:0,y:0}),x=_.useRef(null),v=_.useRef(!1),y=_.useRef(!1),w=_.useRef(!1),N=Int();return _.useEffect(()=>{if(e!=null&&e.current){const B=Ru(e.current),k=({x:S,y:T})=>{const{nodeInternals:L,onNodeDrag:R,onSelectionDrag:j,updateNodePositions:P,nodeExtent:M,snapGrid:Z,snapToGrid:V,nodeOrigin:W,onError:G}=l.getState();f.current={x:S,y:T};let K=!1,ee={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const D=CM(d.current,W);ee=vM(D)}if(d.current=d.current.map(D=>{const Q={x:S-D.distance.x,y:T-D.distance.y};V&&(Q.x=Z[0]*Math.round(Q.x/Z[0]),Q.y=Z[1]*Math.round(Q.y/Z[1]));const z=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!D.extent&&(z[0][0]=D.positionAbsolute.x-ee.x+M[0][0],z[1][0]=D.positionAbsolute.x+(D.width??0)-ee.x2+M[1][0],z[0][1]=D.positionAbsolute.y-ee.y+M[0][1],z[1][1]=D.positionAbsolute.y+(D.height??0)-ee.y2+M[1][1]);const J=fue(D,Q,L,z,W,G);return K=K||D.position.x!==J.position.x||D.position.y!==J.position.y,D.position=J.position,D.positionAbsolute=J.positionAbsolute,D}),!K)return;P(d.current,!0,!0),u(!0);const X=a?R:DI(j);if(X&&x.current){const[D,Q]=OI({nodeId:a,dragItems:d.current,nodeInternals:L});X(x.current,D,Q)}},F=()=>{if(!m.current)return;const[S,T]=Pce(g.current,m.current);if(S!==0||T!==0){const{transform:L,panBy:R}=l.getState();f.current.x=(f.current.x??0)-S/L[2],f.current.y=(f.current.y??0)-T/L[2],R({x:S,y:T})&&k(f.current)}h.current=requestAnimationFrame(F)},E=S=>{var W;const{nodeInternals:T,multiSelectionActive:L,nodesDraggable:R,unselectNodesAndEdges:j,onNodeDragStart:P,onSelectionDragStart:M}=l.getState();y.current=!0;const Z=a?P:DI(M);(!i||!s)&&!L&&a&&((W=T.get(a))!=null&&W.selected||j()),a&&s&&i&&zO({id:a,store:l,nodeRef:e});const V=N(S);if(f.current=V,d.current=Bnt(T,R,V,a),Z&&d.current){const[G,K]=OI({nodeId:a,dragItems:d.current,nodeInternals:T});Z(S.sourceEvent,G,K)}};if(t)B.on(".drag",null);else{const S=ftt().on("start",T=>{const{domNode:L,nodeDragThreshold:R}=l.getState();R===0&&E(T),w.current=!1;const j=N(T);f.current=j,m.current=(L==null?void 0:L.getBoundingClientRect())||null,g.current=Am(T.sourceEvent,m.current)}).on("drag",T=>{var P,M;const L=N(T),{autoPanOnNodeDrag:R,nodeDragThreshold:j}=l.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&y.current&&R&&(v.current=!0,F()),!y.current){const Z=L.xSnapped-(((P=f==null?void 0:f.current)==null?void 0:P.x)??0),V=L.ySnapped-(((M=f==null?void 0:f.current)==null?void 0:M.y)??0);Math.sqrt(Z*Z+V*V)>j&&E(T)}(f.current.x!==L.xSnapped||f.current.y!==L.ySnapped)&&d.current&&y.current&&(x.current=T.sourceEvent,g.current=Am(T.sourceEvent,m.current),k(L))}}).on("end",T=>{if(!(!y.current||w.current)&&(u(!1),v.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:L,nodeInternals:R,onNodeDragStop:j,onSelectionDragStop:P}=l.getState(),M=a?j:DI(P);if(L(d.current,!1,!1),M){const[Z,V]=OI({nodeId:a,dragItems:d.current,nodeInternals:R});M(T.sourceEvent,Z,V)}}}).filter(T=>{const L=T.target;return!T.button&&(!r||!vW(L,`.${r}`,e))&&(!n||vW(L,n,e))});return B.call(S),()=>{B.on(".drag",null)}}}},[e,t,r,n,s,l,a,i,N]),c}function mue(){const e=ao();return _.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:l,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=l?c[0]:5,m=l?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,v=r.y*m*g,y=f.map(w=>{if(w.positionAbsolute){const N={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+v};l&&(N.x=c[0]*Math.round(N.x/c[0]),N.y=c[1]*Math.round(N.y/c[1]));const{positionAbsolute:B,position:k}=fue(w,N,n,a,void 0,u);w.position=k,w.positionAbsolute=B}return w});s(y,!0,!1)},[])}const $v={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var yy=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:m,onContextMenu:g,onDoubleClick:x,style:v,className:y,isDraggable:w,isSelectable:N,isConnectable:B,isFocusable:k,selectNodesOnDrag:F,sourcePosition:E,targetPosition:S,hidden:T,resizeObserver:L,dragHandle:R,zIndex:j,isParent:P,noDragClassName:M,noPanClassName:Z,initialized:V,disableKeyboardA11y:W,ariaLabel:G,rfId:K,hasHandleBounds:ee})=>{const X=ao(),D=_.useRef(null),Q=_.useRef(null),z=_.useRef(E),J=_.useRef(S),te=_.useRef(n),se=N||w||d||f||h||m,ie=mue(),le=by(r,X.getState,f),ue=by(r,X.getState,h),je=by(r,X.getState,m),ae=by(r,X.getState,g),Ne=by(r,X.getState,x),ke=Be=>{const{nodeDragThreshold:Le}=X.getState();if(N&&(!F||!w||Le>0)&&zO({id:r,store:X,nodeRef:D}),d){const We=X.getState().nodeInternals.get(r);We&&d(Be,{...We})}},_e=Be=>{if(!MO(Be)&&!W)if(Lce.includes(Be.key)&&N){const Le=Be.key==="Escape";zO({id:r,store:X,unselect:Le,nodeRef:D})}else w&&u&&Object.prototype.hasOwnProperty.call($v,Be.key)&&(X.setState({ariaLiveMessage:`Moved selected node ${Be.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ie({x:$v[Be.key].x,y:$v[Be.key].y,isShiftPressed:Be.shiftKey}))};_.useEffect(()=>()=>{Q.current&&(L==null||L.unobserve(Q.current),Q.current=null)},[]),_.useEffect(()=>{if(D.current&&!T){const Be=D.current;(!V||!ee||Q.current!==Be)&&(Q.current&&(L==null||L.unobserve(Q.current)),L==null||L.observe(Be),Q.current=Be)}},[T,V,ee]),_.useEffect(()=>{const Be=te.current!==n,Le=z.current!==E,We=J.current!==S;D.current&&(Be||Le||We)&&(Be&&(te.current=n),Le&&(z.current=E),We&&(J.current=S),X.getState().updateNodeDimensions([{id:r,nodeElement:D.current,forceUpdate:!0}]))},[r,n,E,S]);const he=hue({nodeRef:D,disabled:T||!w,noDragClassName:M,handleSelector:R,nodeId:r,isSelectable:N,selectNodesOnDrag:F});return T?null:at.createElement("div",{className:jl(["react-flow__node",`react-flow__node-${n}`,{[Z]:w},y,{selected:u,selectable:N,parent:P,dragging:he}]),ref:D,style:{zIndex:j,transform:`translate(${l}px,${c}px)`,pointerEvents:se?"all":"none",visibility:V?"visible":"hidden",...v},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:le,onMouseMove:ue,onMouseLeave:je,onContextMenu:ae,onClick:ke,onDoubleClick:Ne,onKeyDown:k?_e:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":W?void 0:`${aue}-${K}`,"aria-label":G},at.createElement(Grt,{value:r},at.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:B,sourcePosition:E,targetPosition:S,dragging:he,dragHandle:R,zIndex:j})))};return t.displayName="NodeWrapper",_.memo(t)};const Fnt=e=>{const t=e.getNodes().filter(r=>r.selected);return{...CM(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Ont({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=ao(),{width:a,height:s,x:i,y:l,transformString:c,userSelectionActive:u}=us(Fnt,il),d=mue(),f=_.useRef(null);if(_.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),hue({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(v=>v.selected);e(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call($v,g.key)&&d({x:$v[g.key].x,y:$v[g.key].y,isShiftPressed:g.shiftKey})};return at.createElement("div",{className:jl(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},at.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:a,height:s,top:l,left:i}}))}var Dnt=_.memo(Ont);const Pnt=e=>e.nodesSelectionActive,pue=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:N,zoomOnScroll:B,zoomOnPinch:k,panOnScroll:F,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:T,panOnDrag:L,defaultViewport:R,translateExtent:j,minZoom:P,maxZoom:M,preventScrolling:Z,onSelectionContextMenu:V,noWheelClassName:W,noPanClassName:G,disableKeyboardA11y:K})=>{const ee=us(Pnt),X=N2(f),D=N2(y),Q=D||L,z=D||F,J=X||h&&Q!==!0;return ynt({deleteKeyCode:l,multiSelectionKeyCode:v}),at.createElement(Nnt,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:N,zoomOnScroll:B,zoomOnPinch:k,panOnScroll:z,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:T,panOnDrag:!X&&Q,defaultViewport:R,translateExtent:j,minZoom:P,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:Z,noWheelClassName:W,noPanClassName:G},at.createElement(due,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:Q,isSelecting:!!J,selectionMode:m},e,ee&&at.createElement(Dnt,{onSelectionContextMenu:V,noPanClassName:G,disableKeyboardA11y:K})))};pue.displayName="FlowRenderer";var Rnt=_.memo(pue);function Lnt(e){return us(_.useCallback(r=>e?$ce(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function Mnt(e){const t={input:yy(e.input||eue),default:yy(e.default||VO),output:yy(e.output||rue),group:yy(e.group||_M)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=yy(e[s]||VO),a),r);return{...t,...n}}const Unt=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},Qnt=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),gue=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=us(Qnt,il),l=Lnt(e.onlyRenderVisibleElements),c=_.useRef(),u=_.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return _.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),at.createElement("div",{className:"react-flow__nodes",style:SM},l.map(d=>{var k,F,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Fh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),v=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?xM(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,N=(y==null?void 0:y.y)??0,B=Unt({x:w,y:N,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return at.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Nr.Bottom,targetPosition:d.targetPosition||Nr.Top,hidden:d.hidden,xPos:w,yPos:N,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:g,isConnectable:x,isFocusable:v,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[js])==null?void 0:k.z)??0,isParent:!!((F=d[js])!=null&&F.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[js])!=null&&E.handleBounds)})}))};gue.displayName="NodeRenderer";var Hnt=_.memo(gue);const Vnt=(e,t,r)=>r===Nr.Left?e-t:r===Nr.Right?e+t:e,znt=(e,t,r)=>r===Nr.Top?e-t:r===Nr.Bottom?e+t:e,yW="react-flow__edgeupdater",wW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:l})=>at.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:jl([yW,`${yW}-${l}`]),cx:Vnt(t,n,e),cy:znt(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),$nt=()=>!0;var Hx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:v,source:y,target:w,sourceX:N,sourceY:B,targetX:k,targetY:F,sourcePosition:E,targetPosition:S,elementsSelectable:T,hidden:L,sourceHandleId:R,targetHandleId:j,onContextMenu:P,onMouseEnter:M,onMouseMove:Z,onMouseLeave:V,reconnectRadius:W,onReconnect:G,onReconnectStart:K,onReconnectEnd:ee,markerEnd:X,markerStart:D,rfId:Q,ariaLabel:z,isFocusable:J,isReconnectable:te,pathOptions:se,interactionWidth:ie,disableKeyboardA11y:le})=>{const ue=_.useRef(null),[je,ae]=_.useState(!1),[Ne,ke]=_.useState(!1),_e=ao(),he=_.useMemo(()=>`url('#${QO(D,Q)}')`,[D,Q]),Be=_.useMemo(()=>`url('#${QO(X,Q)}')`,[X,Q]);if(L)return null;const Le=wt=>{var Fn;const{edges:Tr,addSelectedEdges:tr,unselectNodesAndEdges:an,multiSelectionActive:Sr}=_e.getState(),$r=Tr.find(Pr=>Pr.id===r);$r&&(T&&(_e.setState({nodesSelectionActive:!1}),$r.selected&&Sr?(an({nodes:[],edges:[$r]}),(Fn=ue.current)==null||Fn.blur()):tr([r])),i&&i(wt,$r))},We=vy(r,_e.getState,l),xe=vy(r,_e.getState,P),Oe=vy(r,_e.getState,M),Re=vy(r,_e.getState,Z),$e=vy(r,_e.getState,V),et=(wt,Tr)=>{if(wt.button!==0)return;const{edges:tr,isValidConnection:an}=_e.getState(),Sr=Tr?w:y,$r=(Tr?j:R)||null,Fn=Tr?"target":"source",Pr=an||$nt,As=Tr,mn=tr.find(rn=>rn.id===r);ke(!0),K==null||K(wt,mn,Fn);const la=rn=>{ke(!1),ee==null||ee(rn,mn,Fn)};Xce({event:wt,handleId:$r,nodeId:Sr,onConnect:rn=>G==null?void 0:G(mn,rn),isTarget:As,getState:_e.getState,setState:_e.setState,isValidConnection:Pr,edgeUpdaterType:Fn,onReconnectEnd:la})},ct=wt=>et(wt,!0),gt=wt=>et(wt,!1),It=()=>ae(!0),Mt=()=>ae(!1),Pt=!T&&!i,Qt=wt=>{var Tr;if(!le&&Lce.includes(wt.key)&&T){const{unselectNodesAndEdges:tr,addSelectedEdges:an,edges:Sr}=_e.getState();wt.key==="Escape"?((Tr=ue.current)==null||Tr.blur(),tr({edges:[Sr.find(Fn=>Fn.id===r)]})):an([r])}};return at.createElement("g",{className:jl(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Pt,updating:je}]),onClick:Le,onDoubleClick:We,onContextMenu:xe,onMouseEnter:Oe,onMouseMove:Re,onMouseLeave:$e,onKeyDown:J?Qt:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":z===null?void 0:z||`Edge from ${y} to ${w}`,"aria-describedby":J?`${sue}-${Q}`:void 0,ref:ue},!Ne&&at.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:v,sourceX:N,sourceY:B,targetX:k,targetY:F,sourcePosition:E,targetPosition:S,sourceHandleId:R,targetHandleId:j,markerStart:he,markerEnd:Be,pathOptions:se,interactionWidth:ie}),te&&at.createElement(at.Fragment,null,(te==="source"||te===!0)&&at.createElement(wW,{position:E,centerX:N,centerY:B,radius:W,onMouseDown:ct,onMouseEnter:It,onMouseOut:Mt,type:"source"}),(te==="target"||te===!0)&&at.createElement(wW,{position:S,centerX:k,centerY:F,radius:W,onMouseDown:gt,onMouseEnter:It,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",_.memo(t)};function Gnt(e){const t={default:Hx(e.default||IS),straight:Hx(e.bezier||wM),step:Hx(e.step||yM),smoothstep:Hx(e.step||Wk),simplebezier:Hx(e.simplebezier||bM)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Hx(e[s]||IS),a),r);return{...t,...n}}function EW(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case Nr.Top:return{x:n+s/2,y:a};case Nr.Right:return{x:n+s,y:a+i/2};case Nr.Bottom:return{x:n+s/2,y:a+i};case Nr.Left:return{x:n,y:a+i/2}}}function CW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Knt=(e,t,r,n,a,s)=>{const i=EW(r,e,t),l=EW(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}};function qnt({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:l,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=vM({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:l/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function NW(e){var n,a,s,i,l;const t=((n=e==null?void 0:e[js])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const Wnt=[{level:0,isMaxLevel:!0,edges:[]}];function Xnt(e,t,r=!1){let n=-1;const a=e.reduce((i,l)=>{var d,f;const c=Qu(l.zIndex);let u=c?l.zIndex:0;if(r){const h=t.get(l.target),m=t.get(l.source),g=l.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),x=Math.max(((d=m==null?void 0:m[js])==null?void 0:d.z)||0,((f=h==null?void 0:h[js])==null?void 0:f.z)||0,1e3);u=(c?l.zIndex:0)+(g?x:0)}return i[u]?i[u].push(l):i[u]=[l],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,l])=>{const c=+i;return{edges:l,level:c,isMaxLevel:c===n}});return s.length===0?Wnt:s}function Ynt(e,t,r){const n=us(_.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),l=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&qnt({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:l.width,targetHeight:l.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return Xnt(n,t,r)}const Jnt=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Znt=({color:e="none",strokeWidth:t=1})=>at.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),_W={[TS.Arrow]:Jnt,[TS.ArrowClosed]:Znt};function eat(e){const t=ao();return _.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(_W,e)?_W[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Fh.error009(e)),null)},[e])}const tat=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=eat(t);return c?at.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},at.createElement(c,{color:r,strokeWidth:i})):null},rat=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const l=QO(i,t);n.includes(l)||(a.push({id:l,color:i.color||e,...i}),n.push(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},xue=({defaultColor:e,rfId:t})=>{const r=us(_.useCallback(rat({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return at.createElement("defs",null,r.map(n=>at.createElement(tat,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};xue.displayName="MarkerDefinitions";var nat=_.memo(xue);const aat=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),vue=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:N,elementsSelectable:B,width:k,height:F,connectionMode:E,nodeInternals:S,onError:T}=us(aat,il),L=Ynt(t,S,r);return k?at.createElement(at.Fragment,null,L.map(({level:R,edges:j,isMaxLevel:P})=>at.createElement("svg",{key:R,style:{zIndex:R},width:k,height:F,className:"react-flow__edges react-flow__container"},P&&at.createElement(nat,{defaultColor:e,rfId:n}),at.createElement("g",null,j.map(M=>{const[Z,V,W]=NW(S.get(M.source)),[G,K,ee]=NW(S.get(M.target));if(!W||!ee)return null;let X=M.type||"default";a[X]||(T==null||T("011",Fh.error011(X)),X="default");const D=a[X]||a.default,Q=E===Tg.Strict?K.target:(K.target??[]).concat(K.source??[]),z=CW(V.source,M.sourceHandle),J=CW(Q,M.targetHandle),te=(z==null?void 0:z.position)||Nr.Bottom,se=(J==null?void 0:J.position)||Nr.Top,ie=!!(M.focusable||w&&typeof M.focusable>"u"),le=M.reconnectable||M.updatable,ue=typeof h<"u"&&(le||N&&typeof le>"u");if(!z||!J)return T==null||T("008",Fh.error008(z,M)),null;const{sourceX:je,sourceY:ae,targetX:Ne,targetY:ke}=Knt(Z,z,te,G,J,se);return at.createElement(D,{key:M.id,id:M.id,className:jl([M.className,s]),type:X,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:je,sourceY:ae,targetX:Ne,targetY:ke,sourcePosition:te,targetPosition:se,elementsSelectable:B,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:M.ariaLabel,isFocusable:ie,isReconnectable:ue,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:y})})))),v):null};vue.displayName="EdgeRenderer";var sat=_.memo(vue);const iat=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oat({children:e}){const t=us(iat);return at.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function lat(e){const t=Xk(),r=_.useRef(!1);_.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const cat={[Nr.Left]:Nr.Right,[Nr.Right]:Nr.Left,[Nr.Top]:Nr.Bottom,[Nr.Bottom]:Nr.Top},bue=({nodeId:e,handleType:t,style:r,type:n=K0.Bezier,CustomComponent:a,connectionStatus:s})=>{var F,E,S;const{fromNode:i,handleId:l,toX:c,toY:u,connectionMode:d}=us(_.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),il),f=(F=i==null?void 0:i[js])==null?void 0:F.handleBounds;let h=f==null?void 0:f[t];if(d===Tg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const m=l?h.find(T=>T.id===l):h[0],g=m?m.x+m.width/2:(i.width??0)/2,x=m?m.y+m.height/2:i.height??0,v=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((S=i.positionAbsolute)==null?void 0:S.y)??0)+x,w=m==null?void 0:m.position,N=w?cat[w]:null;if(!w||!N)return null;if(a)return at.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:m,fromX:v,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:N,connectionStatus:s});let B="";const k={sourceX:v,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:N};return n===K0.Bezier?[B]=Vce(k):n===K0.Step?[B]=UO({...k,borderRadius:0}):n===K0.SmoothStep?[B]=UO(k):n===K0.SimpleBezier?[B]=Hce(k):B=`M${v},${y} ${c},${u}`,at.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:r})};bue.displayName="ConnectionLine";const uat=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function dat({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:l,height:c,connectionStatus:u}=us(uat,il);return!(a&&s&&l&&i)?null:at.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},at.createElement("g",{className:jl(["react-flow__connection",u])},at.createElement(bue,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function SW(e,t){return _.useRef(null),ao(),_.useMemo(()=>t(e),[e])}const yue=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:N,connectionLineContainerStyle:B,selectionKeyCode:k,selectionOnDrag:F,selectionMode:E,multiSelectionKeyCode:S,panActivationKeyCode:T,zoomActivationKeyCode:L,deleteKeyCode:R,onlyRenderVisibleElements:j,elementsSelectable:P,selectNodesOnDrag:M,defaultViewport:Z,translateExtent:V,minZoom:W,maxZoom:G,preventScrolling:K,defaultMarkerColor:ee,zoomOnScroll:X,zoomOnPinch:D,panOnScroll:Q,panOnScrollSpeed:z,panOnScrollMode:J,zoomOnDoubleClick:te,panOnDrag:se,onPaneClick:ie,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:je,onPaneScroll:ae,onPaneContextMenu:Ne,onEdgeContextMenu:ke,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:Be,onReconnect:Le,onReconnectStart:We,onReconnectEnd:xe,reconnectRadius:Oe,noDragClassName:Re,noWheelClassName:$e,noPanClassName:et,elevateEdgesOnSelect:ct,disableKeyboardA11y:gt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})=>{const Qt=SW(e,Mnt),wt=SW(t,Gnt);return lat(s),at.createElement(Rnt,{onPaneClick:ie,onPaneMouseEnter:le,onPaneMouseMove:ue,onPaneMouseLeave:je,onPaneContextMenu:Ne,onPaneScroll:ae,deleteKeyCode:R,selectionKeyCode:k,selectionOnDrag:F,selectionMode:E,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:T,zoomActivationKeyCode:L,elementsSelectable:P,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:X,zoomOnPinch:D,zoomOnDoubleClick:te,panOnScroll:Q,panOnScrollSpeed:z,panOnScrollMode:J,panOnDrag:se,defaultViewport:Z,translateExtent:V,minZoom:W,maxZoom:G,onSelectionContextMenu:g,preventScrolling:K,noDragClassName:Re,noWheelClassName:$e,noPanClassName:et,disableKeyboardA11y:gt},at.createElement(oat,null,at.createElement(sat,{edgeTypes:wt,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:j,onEdgeContextMenu:ke,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:Be,onReconnect:Le,onReconnectStart:We,onReconnectEnd:xe,reconnectRadius:Oe,defaultMarkerColor:ee,noPanClassName:et,elevateEdgesOnSelect:!!ct,disableKeyboardA11y:gt,rfId:Pt},at.createElement(dat,{style:w,type:y,component:N,containerStyle:B})),at.createElement("div",{className:"react-flow__edgelabel-renderer"}),at.createElement(Hnt,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:M,onlyRenderVisibleElements:j,noPanClassName:et,noDragClassName:Re,disableKeyboardA11y:gt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})))};yue.displayName="GraphView";var Aat=_.memo(yue);const $O=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],F0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:$O,nodeExtent:$O,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Tg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Urt,isValidConnection:void 0},fat=()=>EZe((e,t)=>({...F0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:II(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?II(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),m=r.reduce((x,v)=>{const y=a.get(v.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[js]:{...y[js],handleBounds:void 0}});else if(y){const w=gM(v.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||v.forceUpdate))&&(a.set(y.id,{...y,[js]:{...y[js],handleBounds:{source:bW(".source",v.nodeElement,h,u),target:bW(".target",v.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);oue(a,u);const g=i||s&&!i&&lue(t,{initial:!0,...l});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(m==null?void 0:m.length)>0&&(n==null||n(m))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(l=>{const c={id:l.id,type:"position",dragging:a};return n&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=uue(r,l()),d=II(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,l=null;n?i=r.map(c=>U0(c,!0)):(i=bv(s(),r),l=bv(a,[])),EN({changedNodes:i,changedEdges:l,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,l=null;n?i=r.map(c=>U0(c,!0)):(i=bv(a,r),l=bv(s(),[])),EN({changedNodes:l,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),l=n||a,c=i.map(d=>(d.selected=!1,U0(d.id,!1))),u=l.map(d=>U0(d.id,!1));EN({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(l=>l.selected).map(l=>U0(l.id,!1)),i=r.filter(l=>l.selected).map(l=>U0(l.id,!1));EN({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=xM(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:l,translateExtent:c}=t();if(!i||!l||!r.x&&!r.y)return!1;const u=dm.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(l,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:F0.connectionNodeId,connectionHandleId:F0.connectionHandleId,connectionHandleType:F0.connectionHandleType,connectionStatus:F0.connectionStatus,connectionStartHandle:F0.connectionStartHandle,connectionEndHandle:F0.connectionEndHandle}),reset:()=>e({...F0})}),Object.is),kM=({children:e})=>{const t=_.useRef(null);return t.current||(t.current=fat()),at.createElement(Irt,{value:t.current},e)};kM.displayName="ReactFlowProvider";const wue=({children:e})=>_.useContext(qk)?at.createElement(at.Fragment,null,e):at.createElement(kM,null,e);wue.displayName="ReactFlowWrapper";const hat={input:eue,default:VO,output:rue,group:_M},mat={default:IS,straight:wM,step:yM,smoothstep:Wk,simplebezier:bM},pat=[0,0],gat=[15,15],xat={x:0,y:0,zoom:1},vat={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Eue=_.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=hat,edgeTypes:i=mat,onNodeClick:l,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:N,onNodeMouseLeave:B,onNodeContextMenu:k,onNodeDoubleClick:F,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:T,onNodesDelete:L,onEdgesDelete:R,onSelectionChange:j,onSelectionDragStart:P,onSelectionDrag:M,onSelectionDragStop:Z,onSelectionContextMenu:V,onSelectionStart:W,onSelectionEnd:G,connectionMode:K=Tg.Strict,connectionLineType:ee=K0.Bezier,connectionLineStyle:X,connectionLineComponent:D,connectionLineContainerStyle:Q,deleteKeyCode:z="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:te=!1,selectionMode:se=C2.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:le=BS()?"Meta":"Control",zoomActivationKeyCode:ue=BS()?"Meta":"Control",snapToGrid:je=!1,snapGrid:ae=gat,onlyRenderVisibleElements:Ne=!1,selectNodesOnDrag:ke=!0,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:Be,nodeOrigin:Le=pat,edgesFocusable:We,edgesUpdatable:xe,elementsSelectable:Oe,defaultViewport:Re=xat,minZoom:$e=.5,maxZoom:et=2,translateExtent:ct=$O,preventScrolling:gt=!0,nodeExtent:It,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:Qt=!0,panOnScroll:wt=!1,panOnScrollSpeed:Tr=.5,panOnScrollMode:tr=zp.Free,zoomOnDoubleClick:an=!0,panOnDrag:Sr=!0,onPaneClick:$r,onPaneMouseEnter:Fn,onPaneMouseMove:Pr,onPaneMouseLeave:As,onPaneScroll:mn,onPaneContextMenu:la,children:ja,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:Ze,onEdgeMouseMove:mt,onEdgeMouseLeave:Je,onEdgeUpdate:xt,onEdgeUpdateStart:Et,onEdgeUpdateEnd:bt,onReconnect:nr,onReconnectStart:xr,onReconnectEnd:Wr,reconnectRadius:Zr=10,edgeUpdaterRadius:qr=10,onNodesChange:me,onEdgesChange:Ie,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Se="nopan",fitView:Fe=!1,fitViewOptions:Ye,connectOnClick:dt=!0,attributionPosition:Ge,proOptions:rt,defaultEdgeOptions:it,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:$t=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Gt=!0,connectionRadius:kr=20,isValidConnection:sn,onError:on,style:An,id:fs,nodeDragThreshold:No,...hs},ri)=>{const Ps=fs||"1";return at.createElement("div",{...hs,style:{...An,...vat},ref:ri,className:jl(["react-flow",a]),"data-testid":"rf__wrapper",id:fs},at.createElement(wue,null,at.createElement(Aat,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:N,onNodeMouseLeave:B,onNodeContextMenu:k,onNodeDoubleClick:F,nodeTypes:s,edgeTypes:i,connectionLineType:ee,connectionLineStyle:X,connectionLineComponent:D,connectionLineContainerStyle:Q,selectionKeyCode:J,selectionOnDrag:te,selectionMode:se,deleteKeyCode:z,multiSelectionKeyCode:le,panActivationKeyCode:ie,zoomActivationKeyCode:ue,onlyRenderVisibleElements:Ne,selectNodesOnDrag:ke,defaultViewport:Re,translateExtent:ct,minZoom:$e,maxZoom:et,preventScrolling:gt,zoomOnScroll:Pt,zoomOnPinch:Qt,zoomOnDoubleClick:an,panOnScroll:wt,panOnScrollSpeed:Tr,panOnScrollMode:tr,panOnDrag:Sr,onPaneClick:$r,onPaneMouseEnter:Fn,onPaneMouseMove:Pr,onPaneMouseLeave:As,onPaneScroll:mn,onPaneContextMenu:la,onSelectionContextMenu:V,onSelectionStart:W,onSelectionEnd:G,onEdgeContextMenu:rn,onEdgeDoubleClick:gr,onEdgeMouseEnter:Ze,onEdgeMouseMove:mt,onEdgeMouseLeave:Je,onReconnect:nr??xt,onReconnectStart:xr??Et,onReconnectEnd:Wr??bt,reconnectRadius:Zr??qr,defaultMarkerColor:Mt,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Se,elevateEdgesOnSelect:$t,rfId:Ps,disableKeyboardA11y:Jt,nodeOrigin:Le,nodeExtent:It}),at.createElement(cnt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:m,onConnectStart:g,onConnectEnd:x,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:Be,edgesFocusable:We,edgesUpdatable:xe,elementsSelectable:Oe,elevateNodesOnSelect:Ft,minZoom:$e,maxZoom:et,nodeExtent:It,onNodesChange:me,onEdgesChange:Ie,snapToGrid:je,snapGrid:ae,connectionMode:K,translateExtent:ct,connectOnClick:dt,defaultEdgeOptions:it,fitView:Fe,fitViewOptions:Ye,onNodesDelete:L,onEdgesDelete:R,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:T,onSelectionDrag:M,onSelectionDragStart:P,onSelectionDragStop:Z,noPanClassName:Se,nodeOrigin:Le,rfId:Ps,autoPanOnConnect:Ht,autoPanOnNodeDrag:Gt,onError:on,connectionRadius:kr,isValidConnection:sn,nodeDragThreshold:No}),at.createElement(ont,{onSelectionChange:j}),ja,at.createElement(Ort,{proOptions:rt,position:Ge}),at.createElement(hnt,{rfId:Ps,disableKeyboardA11y:Jt})))});Eue.displayName="ReactFlow";function Cue(e){return t=>{const[r,n]=_.useState(t),a=_.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const bat=Cue(uue),yat=Cue(knt);function wat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},at.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Eat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},at.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Cat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},at.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Nat(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function _at(){return at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},at.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ky=({children:e,className:t,...r})=>at.createElement("button",{type:"button",className:jl(["react-flow__controls-button",t]),...r},e);Ky.displayName="ControlButton";const Sat=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Nue=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=ao(),[m,g]=_.useState(!1),{isInteractive:x,minZoomReached:v,maxZoomReached:y}=us(Sat,il),{zoomIn:w,zoomOut:N,fitView:B}=Xk();if(_.useEffect(()=>{g(!0)},[]),!m)return null;const k=()=>{w(),s==null||s()},F=()=>{N(),i==null||i()},E=()=>{B(a),l==null||l()},S=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return at.createElement(Dce,{className:jl(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&at.createElement(at.Fragment,null,at.createElement(Ky,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},at.createElement(wat,null)),at.createElement(Ky,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},at.createElement(Eat,null))),r&&at.createElement(Ky,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},at.createElement(Cat,null)),n&&at.createElement(Ky,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},x?at.createElement(_at,null):at.createElement(Nat,null)),d)};Nue.displayName="Controls";var kat=_.memo(Nue),Qd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Qd||(Qd={}));function jat({color:e,dimensions:t,lineWidth:r}){return at.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Bat({color:e,radius:t}){return at.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Tat={[Qd.Dots]:"#91919a",[Qd.Lines]:"#eee",[Qd.Cross]:"#e2e2e2"},Iat={[Qd.Dots]:1,[Qd.Lines]:1,[Qd.Cross]:6},Fat=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function _ue({id:e,variant:t=Qd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:l,className:c}){const u=_.useRef(null),{transform:d,patternId:f}=us(Fat,il),h=i||Tat[t],m=n||Iat[t],g=t===Qd.Dots,x=t===Qd.Cross,v=Array.isArray(r)?r:[r,r],y=[v[0]*d[2]||1,v[1]*d[2]||1],w=m*d[2],N=x?[w,w]:y,B=g?[w/s,w/s]:[N[0]/s,N[1]/s];return at.createElement("svg",{className:jl(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},at.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`},g?at.createElement(Bat,{color:h,radius:w/s}):at.createElement(jat,{dimensions:N,color:h,lineWidth:a})),at.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}_ue.displayName="Background";var Oat=_.memo(_ue);function Dat(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Pat=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function fm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Vx=null;function Sue(e={}){return Vx||(e.includeStyleProperties?(Vx=e.includeStyleProperties,Vx):(Vx=fm(window.getComputedStyle(document.documentElement)),Vx))}function FS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Rat(e){const t=FS(e,"border-left-width"),r=FS(e,"border-right-width");return e.clientWidth+t+r}function Lat(e){const t=FS(e,"border-top-width"),r=FS(e,"border-bottom-width");return e.clientHeight+t+r}function kue(e,t={}){const r=t.width||Rat(e),n=t.height||Lat(e);return{width:r,height:n}}function Mat(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Bc=16384;function Uat(e){(e.width>Bc||e.height>Bc)&&(e.width>Bc&&e.height>Bc?e.width>e.height?(e.height*=Bc/e.width,e.width=Bc):(e.width*=Bc/e.height,e.height=Bc):e.width>Bc?(e.height*=Bc/e.width,e.width=Bc):(e.width*=Bc/e.height,e.height=Bc))}function OS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function Qat(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Hat(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),Qat(a)}const ic=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||ic(r,t)};function Vat(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function zat(e,t){return Sue(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function $at(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?Vat(r):zat(r,n);return document.createTextNode(`${a}{${s}}`)}function kW(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=Pat();try{t.className=`${t.className} ${i}`}catch{return}const l=document.createElement("style");l.appendChild($at(i,r,a,n)),t.appendChild(l)}function Gat(e,t,r){kW(e,t,":before",r),kW(e,t,":after",r)}const jW="application/font-woff",BW="image/jpeg",Kat={woff:jW,woff2:jW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:BW,jpeg:BW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function qat(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function jM(e){const t=qat(e).toLowerCase();return Kat[t]||""}function Wat(e){return e.split(/,/)[1]}function GO(e){return e.search(/^(data:)/)!==-1}function Xat(e,t){return`data:${t};base64,${e}`}async function jue(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const l=new FileReader;l.onerror=i,l.onloadend=()=>{try{s(r({res:n,result:l.result}))}catch(c){i(c)}},l.readAsDataURL(a)})}const PI={};function Yat(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function BM(e,t,r){const n=Yat(e,t,r.includeQueryParams);if(PI[n]!=null)return PI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await jue(e,r.fetchRequestInit,({res:i,result:l})=>(t||(t=i.headers.get("Content-Type")||""),Wat(l)));a=Xat(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return PI[n]=a,a}async function Jat(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):OS(t)}async function Zat(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return OS(l)}const r=e.poster,n=jM(r),a=await BM(r,n,t);return OS(a)}async function est(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await Yk(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function tst(e,t){return ic(e,HTMLCanvasElement)?Jat(e):ic(e,HTMLVideoElement)?Zat(e,t):ic(e,HTMLIFrameElement)?est(e,t):e.cloneNode(Bue(e))}const rst=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Bue=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function nst(e,t,r){var n,a;if(Bue(t))return t;let s=[];return rst(e)&&e.assignedNodes?s=fm(e.assignedNodes()):ic(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=fm(e.contentDocument.body.childNodes):s=fm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||ic(e,HTMLVideoElement)||await s.reduce((i,l)=>i.then(()=>Yk(l,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function ast(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Sue(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),ic(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function sst(e,t){ic(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),ic(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function ist(e,t){if(ic(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function ost(e,t,r){return ic(t,Element)&&(ast(e,t,r),Gat(e,t,r),sst(e,t),ist(e,t)),t}async function lst(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const l=r[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await Yk(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const l=document.createElementNS(s,"defs");i.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(i)}return e}async function Yk(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>tst(n,t)).then(n=>nst(e,n,t)).then(n=>ost(e,n,t)).then(n=>lst(n,t))}const Tue=/url\((['"]?)([^'"]+?)\1\)/g,cst=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ust=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function dst(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ast(e){const t=[];return e.replace(Tue,(r,n,a)=>(t.push(a),r)),t.filter(r=>!GO(r))}async function fst(e,t,r,n,a){try{const s=r?Dat(t,r):t,i=jM(t);let l;return a||(l=await BM(s,i,n)),e.replace(dst(t),`$1${l}$3`)}catch{}return e}function hst(e,{preferredFontFormat:t}){return t?e.replace(ust,r=>{for(;;){const[n,,a]=cst.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Iue(e){return e.search(Tue)!==-1}async function Fue(e,t,r){if(!Iue(e))return e;const n=hst(e,r);return Ast(n).reduce((s,i)=>s.then(l=>fst(l,i,t,r)),Promise.resolve(n))}async function zx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Fue(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function mst(e,t){await zx("background",e,t)||await zx("background-image",e,t),await zx("mask",e,t)||await zx("-webkit-mask",e,t)||await zx("mask-image",e,t)||await zx("-webkit-mask-image",e,t)}async function pst(e,t){const r=ic(e,HTMLImageElement);if(!(r&&!GO(e.src))&&!(ic(e,SVGImageElement)&&!GO(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await BM(n,jM(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function gst(e,t){const n=fm(e.childNodes).map(a=>Oue(a,t));await Promise.all(n).then(()=>e)}async function Oue(e,t){ic(e,Element)&&(await mst(e,t),await pst(e,t),await gst(e,t))}function xst(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const TW={};async function IW(e){let t=TW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},TW[e]=t,t}async function FW(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let l=i.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),jue(l,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function OW(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=l.exec(n),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function vst(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{fm(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let l=i+1;const c=s.href,u=IW(c).then(d=>FW(d,t)).then(d=>OW(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(IW(a.href).then(l=>FW(l,t)).then(l=>OW(l).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{fm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function bst(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Iue(t.style.getPropertyValue("src")))}async function yst(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=fm(e.ownerDocument.styleSheets),n=await vst(r,t);return bst(n)}function Due(e){return e.trim().replace(/["']/g,"")}function wst(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Due(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Est(e,t){const r=await yst(e,t),n=wst(e);return(await Promise.all(r.filter(s=>n.has(Due(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Fue(s.cssText,i,t)}))).join(`
`)}async function Cst(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Est(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Nst(e,t={}){const{width:r,height:n}=kue(e,t),a=await Yk(e,t,!0);return await Cst(a,t),await Oue(a,t),xst(a,t),await Hat(a,r,n)}async function _st(e,t={}){const{width:r,height:n}=kue(e,t),a=await Nst(e,t),s=await OS(a),i=document.createElement("canvas"),l=i.getContext("2d"),c=t.pixelRatio||Mat(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||Uat(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,i.width,i.height)),l.drawImage(s,0,0,i.width,i.height),i}async function Jk(e,t={}){return(await _st(e,t)).toDataURL()}const Pue="recursos_crucigramas",Zk="recursos_lineas_de_tiempo",ej="recursos_mapas_mentales",Rue="recursos_sopas_de_letras",tj=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Sst=e=>{const t=zt(vt(ft,Pue),hr("fechaCreacion","desc"));return fr(t,r=>{const n=r.docs.map(a=>tj(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},kst=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:ir.fromDate(new Date)};return(await hn(vt(ft,Pue),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},jst=e=>{const t=zt(vt(ft,Zk),hr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>tj(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Bst=async(e,t)=>{try{const{id:r,...n}=e,a=sr(ft,Zk,r);await bi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Tst=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await hn(vt(ft,Zk),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},Ist=async e=>{try{const t=sr(ft,Zk,e);await Ra(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Fst=e=>{const t=zt(vt(ft,ej),hr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>tj(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Ost=async(e,t)=>{try{const{id:r,...n}=e,a=sr(ft,ej,r);await bi(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Dst=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await hn(vt(ft,ej),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},Pst=async e=>{try{const t=sr(ft,ej,e);await Ra(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Rst=e=>{const t=zt(vt(ft,Rue),hr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>tj(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Lst=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:ir.fromDate(new Date)};return(await hn(vt(ft,Rue),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},Mst=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ust=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Qst=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),Hst=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return o.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[o.jsx(T1,{type:"target",position:Nr.Left,className:"w-2 h-2 !bg-slate-400"}),o.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&o.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),o.jsx(T1,{type:"source",position:Nr.Right,className:"w-2 h-2 !bg-slate-400"})]})},KO=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+KO(n,t),0),qO=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(l,c,u)=>{r.push({id:l.id,position:{x:c*280,y:u},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"});const d=KO(l,100);let f=u-d/2+100/2;(l.children||[]).forEach(h=>{const m=KO(h,100),g=f+m/2-100/2;n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=m})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,l=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const m=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:l*Math.cos(m),y:l*Math.sin(m)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Lue=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return o.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[o.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:e.label,onChange:l=>t(e.id,l.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),o.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&o.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(l=>o.jsx(Lue,{node:l,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},l.id))]})},Vst={custom:Hst},zst=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=_.useState(e.treeData),[s,i]=_.useState("tree"),[l,c]=_.useState(!1),[u,d,f]=bat([]),[h,m,g]=yat([]),{fitView:x}=Xk();_.useEffect(()=>{const{nodes:k,edges:F}=qO(n,s);d(k),m(F),setTimeout(()=>x({duration:300}),50)},[n,s,d,m,x]);const v=(k,F)=>{const E=JSON.parse(JSON.stringify(n)),S=T=>T.id===k?(T.label=F,!0):(T.children||[]).some(S);S(E),a(E)},y=k=>{const F=JSON.parse(JSON.stringify(n)),E=S=>S.id===k?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(E);E(F),a(F)},w=k=>{const F=JSON.parse(JSON.stringify(n)),E=S=>{const T=(S.children||[]).findIndex(L=>L.id===k);return T!==-1?(S.children.splice(T,1),!0):(S.children||[]).some(E)};E(F),a(F)},N=()=>{c(!0);const{nodes:k,edges:F}=qO(n,s);r({...e,treeData:n,nodes:k,edges:F}),setTimeout(()=>c(!1),1e3)},B=async k=>{const F=document.querySelector(".react-flow");F&&Jk(F,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const S=document.createElement("a");S.download=`${e.tema}.png`,S.href=E,S.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),o.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:o.jsxs(Eue,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Vst,children:[o.jsx(kat,{}),o.jsx(Oat,{})]})}),o.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),o.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[o.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[o.jsx(Ust,{})," Vista en árbol"]}),o.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[o.jsx(Qst,{})," Vista central"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:o.jsx(Lue,{node:n,onUpdate:v,onAddChild:y,onDelete:w})}),o.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>B(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),o.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:l?"Guardado!":"Guardar"})]})]})]})]})},$st=({onBack:e,currentUser:t})=>{const[r,n]=_.useState("list"),[a,s]=_.useState([]),[i,l]=_.useState(null),[c,u]=_.useState(!1),[d,f]=_.useState(!0),[h,m]=_.useState(""),[g,x]=_.useState(""),[v,y]=_.useState("");_.useEffect(()=>{f(!0);const E=Fst(S=>{s(S),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",T=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${v}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const Z=(await(await new Os(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(T)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(Z),W=Q=>({id:crypto.randomUUID(),label:Q.label||"Sin etiqueta",icon:Q.icon||"🧠",type:Q.type||"default",children:(Q.children||[]).map(W)}),G=W(V),{nodes:K,edges:ee}=qO(G),X={tema:h,nivel:g,treeData:G,nodes:K,edges:ee},D=await Dst(X,t);l({...X,id:D,createdAt:new Date().toISOString()}),n("editor")}catch(L){console.error("AI Generation Error:",L),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},N=async E=>{try{await Ost(E,t)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},B=E=>{l(E),n("editor")},k=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Pst(E)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},F=()=>{switch(r){case"editor":return i?o.jsx(kM,{children:o.jsx(zst,{mapData:i,onBack:()=>n("list"),onSave:N})}):null;case"config":return o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),o.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>m(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),o.jsx("textarea",{id:"contenido",value:v,onChange:E=>y(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?o.jsx(Mst,{}):"Generar Mapa con IA"})})]})]});case"list":default:return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),o.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx("button",{onClick:()=>B(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),o.jsx("button",{onClick:()=>k(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):o.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?o.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("span",{className:"text-4xl",children:"🧠"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),F()]})},Gst=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Kst=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),qst=({onBack:e,currentUser:t})=>{const[r,n]=_.useState([]),[a,s]=_.useState("Media"),[i,l]=_.useState(10),[c,u]=_.useState(!1),[d,f]=_.useState(Array(10).fill("")),[h,m]=_.useState(""),[g,x]=_.useState(null),[v,y]=_.useState({ai:!1,puzzle:!1,data:!0}),w=_.useRef(null);_.useEffect(()=>{y(R=>({...R,data:!0}));const L=Rst(R=>{n(R),y(j=>({...j,data:!1}))});return()=>L()},[]),_.useEffect(()=>{f(L=>{const R=Array(i).fill("");for(let j=0;j<Math.min(L.length,i);j++)R[j]=L[j];return R})},[i]);const N=(L,R)=>{const j=[...d];j[L]=R,f(j)},B=async()=>{if(h.trim()){y(L=>({...L,ai:!0}));try{const L="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",j=new Os(L).getGenerativeModel({model:"gemini-1.5-flash-latest"}),P=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,W=(await(await j.generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(W);if(!G.palabras||!Array.isArray(G.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const ee=[...G.palabras.map(X=>X.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;ee.length<i;)ee.push("");f(ee)}catch(L){console.error("Error generating words with AI:",L),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(L=>({...L,ai:!1}))}}},k=(L,R,j,P,M,Z)=>{for(let V=0;V<L.length;V++){const W=j+V*M.y,G=P+V*M.x;if(W<0||W>=Z||G<0||G>=Z||R[W][G]&&R[W][G]!==L[V])return!1}return!0},F=(L,R,j,P,M)=>{for(let Z=0;Z<L.length;Z++)R[j+Z*M.y][P+Z*M.x]=L[Z]},E=async()=>{y(W=>({...W,puzzle:!0})),x(null),await new Promise(W=>setTimeout(W,100));const L=d.map(W=>W.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(L.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(W=>({...W,puzzle:!1}));return}const R=Math.max(...L.map(W=>W.length));let j=Math.max(R,L.length)+2;a==="Media"&&(j+=3),a==="Difícil"&&(j+=5),j=Math.min(Math.max(j,10),25);const P=Array(j).fill(null).map(()=>Array(j).fill(null)),M=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&M.push({x:1,y:-1}),a==="Difícil"&&M.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const W of L.sort((G,K)=>K.length-G.length)){let G=!1;for(let K=0;K<100;K++){const ee=M[Math.floor(Math.random()*M.length)],X=Math.floor(Math.random()*j),D=Math.floor(Math.random()*j);if(k(W,P,X,D,ee,j)){F(W,P,X,D,ee),G=!0;break}}G||console.warn(`No se pudo colocar la palabra: ${W}`)}const Z=P.map(W=>W.map(G=>G||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),V={tema:h||"Personalizado",grid:Z.map(W=>W.join("")),words:L.sort()};try{const W=await Lst(V,t);x({...V,id:W,createdAt:new Date().toISOString()})}catch(W){console.error("Error saving puzzle:",W),alert("No se pudo guardar la sopa de letras.")}finally{y(W=>({...W,puzzle:!1}))}},S=()=>{w.current&&Jk(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(L=>{const R=document.createElement("a");R.download="sopa-de-letras.png",R.href=L,R.click()}).catch(L=>{console.error("oops, something went wrong!",L),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},T=()=>{var j;if(!g)return null;const L=((j=g.grid[0])==null?void 0:j.length)||1,R=g.grid.join("").split("");return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{ref:w,className:"p-6 bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${L}, minmax(0, 1fr))`},children:R.map((P,M)=>o.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:P},M))})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),o.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(P=>o.jsx("li",{children:P},P))})]})]})}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),o.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return v.data?o.jsx("div",{className:"text-center py-10",children:"Cargando..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-4xl",children:"🅰️"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&o.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),o.jsxs("select",{value:a,onChange:L=>s(L.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{children:"Fácil"}),o.jsx("option",{children:"Media"}),o.jsx("option",{children:"Difícil"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(L=>o.jsx("button",{onClick:()=>{l(L),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===L?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:L},L)),o.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&o.jsx("input",{type:"number",value:i,onChange:L=>l(parseInt(L.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:L=>m(L.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:B,disabled:v.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:v.ai?o.jsx(Gst,{}):o.jsxs(o.Fragment,{children:[o.jsx(Kst,{}),o.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((L,R)=>o.jsx("input",{type:"text",value:L,onChange:j=>N(R,j.target.value),placeholder:`Palabra ${R+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},R))})]}),o.jsx("div",{className:"text-right pt-4",children:o.jsx("button",{onClick:E,disabled:v.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:v.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&T()]})},Wst=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xst=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Yst=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=_.useState(e),[s,i]=_.useState(null),l=_.useRef(null),c=(m,g,x)=>{a(v=>({...v,events:v.events.map(y=>y.id===m?{...y,[g]:x}:y)}))},u=()=>{const m={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,m].sort((x,v)=>parseInt(x.date)-parseInt(v.date));a(x=>({...x,events:g}))},d=m=>{a(g=>({...g,events:g.events.filter(x=>x.id!==m)}))},f=async m=>{if(!m.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(m.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${m.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const k=(await(await new Os(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),F=JSON.parse(k);a(E=>({...E,events:E.events.map(S=>S.id===m.id?{...S,date:F.date,description:F.description,icon:F.icon}:S).sort((S,T)=>parseInt(S.date)-parseInt(T.date))}))}catch(v){console.error("Error al generar descripción del hito:",v),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{l.current&&Jk(l.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(m=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=m,g.click()}).catch(m=>{console.error("Error al generar la imagen:",m),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),o.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:o.jsxs("div",{ref:l,className:"relative p-10",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),o.jsx("div",{className:"relative",children:n.events.sort((m,g)=>parseInt(m.date)-parseInt(g.date)).map((m,g)=>{const x=g%2===0;return o.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[o.jsx("div",{className:"w-1/2",children:x&&o.jsx("div",{className:"text-right pr-8",children:o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[o.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})}),o.jsx("div",{className:"z-10 flex-shrink-0",children:o.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),o.jsx("div",{className:"w-1/2",children:!x&&o.jsx("div",{className:"text-left pl-8",children:o.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[o.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:m.icon}),o.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:m.date}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:m.description})]})})})]},m.id)})})]})}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(m=>o.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[o.jsx("input",{type:"text",value:m.date,onChange:g=>c(m.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("textarea",{value:m.description,onChange:g=>c(m.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),o.jsx("button",{onClick:()=>f(m),disabled:s===m.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===m.id?o.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):o.jsx(Xst,{})})]}),o.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},m.id))}),o.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[o.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),o.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Jst=({onBack:e,currentUser:t})=>{const[r,n]=_.useState("list"),[a,s]=_.useState([]),[i,l]=_.useState(null),[c,u]=_.useState(!1),[d,f]=_.useState(!0),[h,m]=_.useState(""),[g,x]=_.useState(""),[v,y]=_.useState("");_.useEffect(()=>{f(!0);const k=jst(F=>{s(F),f(!1)});return()=>k()},[]);const w=async k=>{if(k.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&v?`entre ${g} y ${v}`:g?`a partir de ${g}`:v?`hasta ${v}`:"",S=`
            Genera una línea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const M=(await(await new Os(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(S)).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(M);if(!Z.events||!Array.isArray(Z.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const V={tema:h,fechaInicio:g,fechaFin:v,events:Z.events.map(G=>({id:crypto.randomUUID(),date:G.date||"Sin fecha",description:G.description||"Sin descripción",icon:G.icon||"🗓️"}))},W=await Tst(V,t);l({...V,id:W,createdAt:new Date().toISOString()}),n("editor")}catch(T){console.error("AI Generation Error:",T),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},N=async k=>{try{await Bst(k,t),n("list"),l(null)}catch(F){console.error("Error saving timeline:",F),alert("No se pudo guardar la línea de tiempo.")}},B=async k=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await Ist(k)}catch(F){console.error("Error deleting timeline:",F),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?o.jsx(Yst,{timeline:i,onSave:N,onBack:()=>n("list")}):d?o.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-4xl",children:"🕒"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),o.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"tema",value:h,onChange:k=>m(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),o.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:k=>x(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),o.jsx("input",{type:"text",id:"fechaFin",value:v,onChange:k=>y(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?o.jsx(Wst,{}):"Generar con IA"})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(k=>o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{l(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),o.jsx("button",{onClick:()=>B(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):o.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},Zst=()=>o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),DW=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),eit=({onBack:e,currentUser:t})=>{const[r,n]=_.useState([]),[a,s]=_.useState(10),[i,l]=_.useState(!1),[c,u]=_.useState(Array(10).fill("")),[d,f]=_.useState(Array(10).fill("")),[h,m]=_.useState(""),[g,x]=_.useState(null),[v,y]=_.useState(!1),[w,N]=_.useState({ai:!1,puzzle:!1,data:!0}),[B,k]=_.useState(null),F=_.useRef(null);_.useEffect(()=>{N(Z=>({...Z,data:!0}));const M=Sst(Z=>{const V=Z.map(W=>{const{grid_flat:G,grid_width:K,...ee}=W,X=[];if(G&&K>0)for(let D=0;D<G.length;D+=K)X.push(G.slice(D,D+K));return{...ee,grid:X}});n(V),N(W=>({...W,data:!1}))});return()=>M()},[]),_.useEffect(()=>{const M=a;u(Z=>Array.from({length:M},(V,W)=>Z[W]||"")),f(Z=>Array.from({length:M},(V,W)=>Z[W]||""))},[a]);const E=(M,Z)=>{const V=[...c];V[M]=Z,u(V)},S=(M,Z)=>{const V=[...d];V[M]=Z,f(V)},T=async()=>{if(h.trim()){N(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new Os(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),W=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let X=(await(await V.generateContent(W)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const D=X.indexOf("{"),Q=X.lastIndexOf("}");D!==-1&&Q!==-1&&(X=X.substring(D,Q+1)),X=X.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),X.includes("__SPLIT__")&&(X=X.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(se,ie,le,ue)=>{const je=le.split("__SPLIT__").map(ae=>ae.trim().replace(/,$/,""));return ie+je.join(",")+ue})),X=X.replace(/,\s*]/g,"]");let z;try{z=JSON.parse(X)}catch{console.error("Respuesta IA no es JSON válido:",X),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),N(ie=>({...ie,ai:!1}));return}if(!z.items||!Array.isArray(z.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const J=z.items.map(se=>(se.word||"").toUpperCase().replace(/\s/g,"")),te=z.items.map(se=>se.clue||"");u(Array.from({length:a},(se,ie)=>J[ie]||"")),f(Array.from({length:a},(se,ie)=>te[ie]||""))}catch(M){console.error("Error generating words/clues with AI:",M),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{N(M=>({...M,ai:!1}))}}},L=async M=>{const Z=c[M];if(!Z||!Z.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}k(M);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new Os(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${Z}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,Q=(await(await G.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(Q);z.clue&&S(M,z.clue)}catch(V){console.error("Error generating clue with AI:",V),alert("No se pudo generar la pista.")}finally{k(null)}},R=_.useCallback(()=>{try{const M=c.map((Be,Le)=>({word:Be.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Le]})).filter(Be=>Be.word.length>0);if(M.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;M.sort((Be,Le)=>Le.word.length-Be.word.length);const Z=M[0].word.length,V=Math.max(Z,M.length)*2;let W=Array.from({length:V},()=>Array(V).fill(null));const G=[],K=M.shift(),ee=Math.floor(V/2),X=Math.floor((V-K.word.length)/2);for(let Be=0;Be<K.word.length;Be++)W[ee][X+Be]=K.word[Be];G.push({word:K.word,clue:K.clue,direction:"across",row:ee,col:X});for(const Be of M){let Le={score:-1,row:-1,col:-1,direction:"across"};for(const We of G)for(let xe=0;xe<We.word.length;xe++)for(let Oe=0;Oe<Be.word.length;Oe++)if(We.word[xe]===Be.word[Oe]){let Re=0,$e,et,ct;We.direction==="across"?(ct="down",$e=We.row-Oe,et=We.col+xe):(ct="across",$e=We.row+xe,et=We.col-Oe);let gt=!0;for(let It=0;It<Be.word.length;It++){const Mt=$e+(ct==="down"?It:0),Pt=et+(ct==="across"?It:0);if(Mt<0||Mt>=V||Pt<0||Pt>=V){gt=!1;break}const Qt=W[Mt][Pt],wt=Mt===We.row+(We.direction==="down"?xe:0)&&Pt===We.col+(We.direction==="across"?xe:0);if(Qt&&!wt){gt=!1;break}if(Qt&&wt&&Qt!==Be.word[Oe]){gt=!1;break}if(!wt){if(ct==="across"&&(Mt>0&&W[Mt-1][Pt]||Mt<V-1&&W[Mt+1][Pt])){gt=!1;break}if(ct==="down"&&(Pt>0&&W[Mt][Pt-1]||Pt<V-1&&W[Mt][Pt+1])){gt=!1;break}}Qt&&Re++}gt&&Re>Le.score&&(Le={score:Re,row:$e,col:et,direction:ct})}if(Le.score>-1){for(let We=0;We<Be.word.length;We++){const xe=Le.row+(Le.direction==="down"?We:0),Oe=Le.col+(Le.direction==="across"?We:0);W[xe][Oe]=Be.word[We]}G.push({word:Be.word,clue:Be.clue,direction:Le.direction,row:Le.row,col:Le.col})}}let D=V,Q=-1,z=V,J=-1;G.forEach(Be=>{D=Math.min(D,Be.row),Q=Math.max(Q,Be.row+(Be.direction==="down"?Be.word.length-1:0)),z=Math.min(z,Be.col),J=Math.max(J,Be.col+(Be.direction==="across"?Be.word.length-1:0))}),Q===-1&&(D=G[0].row,Q=G[0].row,z=G[0].col,J=G[0].col+G[0].word.length-1);const te=1,se=Math.max(0,D-te),ie=Math.min(V,Q+1+te),le=Math.max(0,z-te),ue=Math.min(V,J+1+te),je=W.slice(se,ie).map(Be=>Be.slice(le,ue)),ae=G.map(Be=>({...Be,row:Be.row-se,col:Be.col-le})).sort((Be,Le)=>Be.row-Le.row||Be.col-Le.col);let Ne=1;const ke=[],_e=new Map;ae.forEach(Be=>{const Le=`${Be.row},${Be.col}`;_e.has(Le)||_e.set(Le,Ne++),ke.push({...Be,number:_e.get(Le)})});const he=je.map(Be=>Be.map(Le=>({char:Le,number:null})));return ke.forEach(Be=>{const Le=`${Be.row},${Be.col}`;he[Be.row]&&he[Be.row][Be.col]!==void 0&&(he[Be.row][Be.col].number=_e.get(Le))}),{grid:he,clues:{across:ke.filter(Be=>Be.direction==="across").sort((Be,Le)=>Be.number-Le.number),down:ke.filter(Be=>Be.direction==="down").sort((Be,Le)=>Be.number-Le.number)}}}catch(M){return console.error("Error generating crossword grid:",M),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),j=async()=>{var Z;N(V=>({...V,puzzle:!0})),x(null),await new Promise(V=>setTimeout(V,100));const M=R();if(M){const V={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:M.grid,clues:M.clues},{grid:W,...G}=V,K={...G,grid_flat:W.flat().map(ee=>ee.char||""),grid_width:((Z=W[0])==null?void 0:Z.length)||0};try{const ee=await kst(K,t);x({...V,id:ee,fechaCreacion:new Date().toISOString()})}catch(ee){console.error("Error saving puzzle:",ee),alert("No se pudo guardar el crucigrama en la base de datos.")}}N(V=>({...V,puzzle:!1}))},P=()=>{F.current&&(y(!1),setTimeout(()=>{Jk(F.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(M=>{const Z=document.createElement("a");Z.download="crucigrama.png",Z.href=M,Z.click()}).catch(M=>console.error("Error generating image",M))},100))};return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-4xl",children:"✏️"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),o.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{ref:F,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsx("div",{children:o.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((M,Z)=>o.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:M.char?"white":"black"},children:[M.number&&o.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:M.number}),v&&M.char&&o.jsx("span",{children:M.char})]},Z))})}),o.jsxs("div",{className:"text-sm",children:[o.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),o.jsx("ul",{className:"space-y-1",children:g.clues.across.map(M=>o.jsxs("li",{children:[o.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))}),o.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),o.jsx("ul",{className:"space-y-1",children:g.clues.down.map(M=>o.jsxs("li",{children:[o.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))})]})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v),className:"h-5 w-5 rounded"}),o.jsx("span",{children:"Mostrar Solución"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),o.jsx("button",{onClick:P,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):o.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>o.jsx("button",{onClick:()=>{s(M),l(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),o.jsx("button",{onClick:()=>l(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&o.jsx("input",{type:"number",value:a,onChange:M=>s(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:T,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?o.jsx(Zst,{}):o.jsxs(o.Fragment,{children:[o.jsx(DW,{}),o.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),o.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((M,Z)=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsx("input",{type:"text",value:c[Z],onChange:V=>E(Z,V.target.value),placeholder:`Palabra ${Z+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[o.jsx("textarea",{value:d[Z],onChange:V=>S(Z,V.target.value),placeholder:`Pista ${Z+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),o.jsx("button",{onClick:()=>L(Z),disabled:B===Z,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:B===Z?o.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):o.jsx(DW,{})})]})]},Z))}),o.jsx("div",{className:"text-right pt-4",children:o.jsx("button",{onClick:j,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},tit=()=>{const[e,t]=_.useState(null),[r,n]=_.useState(!0);return _.useEffect(()=>{const a=NJ(y_,async s=>{if(s&&s.email)try{const i=await Qee(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},rit=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],nit=({recurso:e,onClick:t})=>o.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[o.jsx("div",{className:"text-6xl mb-4",children:e.icon}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),ait=()=>{const[e,t]=_.useState("menu"),{currentUser:r}=tit(),n=()=>e!=="menu"&&!r?o.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?o.jsx($st,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?o.jsx(qst,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?o.jsx(Jst,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?o.jsx(eit,{onBack:()=>t("menu"),currentUser:r}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:rit.map(a=>o.jsx(nit,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return o.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},sit="evaluaciones_formativas",iit="calificaciones_formativas",Mue="trabajos_grupales_formativos",Uue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},oit=(e,t)=>{const r=zt(vt(ft,sit),Br("curso","==",e));return fr(r,n=>{t(n.docs.map(a=>Uue(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},lit=e=>{const t=zt(vt(ft,iit));return fr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},cit=(e,t)=>{const r=zt(vt(ft,Mue),Br("curso","==",e));return fr(r,n=>{t(n.docs.map(a=>Uue(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},uit=async e=>{try{const{id:t,...r}=e,n=sr(ft,Mue,t);await bi(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},dit=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState({}),[s,i]=_.useState([]),[l,c]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(!1),[m,g]=_.useState(null),x=_.useRef(null);_.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const B=oit(e.curso,r),k=lit(a),F=cit(e.curso,E=>{i(E),c(!1)});return()=>{B(),k(),F()}},[e.curso]);const v=_.useMemo(()=>{if(!e.curso)return[];const k=t.filter(F=>F.curso===e.curso).reduce((F,E)=>((F[E.asignatura]=F[E.asignatura]||[]).push(E),F),{});return Object.entries(k).map(([F,E])=>{let S=0,T=0;const L=E.map(j=>{var Z;const P=(Z=n[j.id])==null?void 0:Z[e.nombreCompleto];let M="No Trabajado";return P==="trabajado"?(S+=7,T++,M="Trabajado"):P==="no trabajado"&&(S+=2,T++,M="No Trabajado"),{id:j.id,nombreActividad:j.nombreActividad,fecha:j.fecha,estado:M}}).filter(j=>{var P;return(P=n[j.id])==null?void 0:P[e.nombreCompleto]}),R=T>0?(S/T).toFixed(1):"N/A";return{asignatura:F,promedio:R,actividades:L.sort((j,P)=>new Date(P.fecha).getTime()-new Date(j.fecha).getTime())}}).filter(F=>F.actividades.length>0).sort((F,E)=>F.asignatura.localeCompare(E.asignatura))},[t,n,e]);_.useEffect(()=>{if(v.reduce((T,L)=>T+L.actividades.length,0)===0){d(null);return}const k=v.reduce((T,L)=>{const R=parseFloat(L.promedio);return isNaN(R)?T:T+R},0),F=v.length>0?k/v.length:0,E=RC.find(T=>F>=T.promedioMin&&F<=T.promedioMax)||null,S=RC.filter(T=>F>=T.promedioMin);if(d({puntajeTotal:0,promedio:F,rangoActual:E,insigniasGanadas:S}),x.current!==null){const T=RC.find(L=>x.current>=L.promedioMin&&x.current<=L.promedioMax)||null;E&&(!T||E.nombre!==T.nombre)&&g(E)}x.current=F},[v]);const y=_.useMemo(()=>e.curso?s.filter(B=>B.curso===e.curso).map(B=>{const k=B.grupos.find(F=>F.integrantes.some(E=>E.nombre===e.nombreCompleto));return k?{...B,miGrupo:k}:null}).filter(B=>B!==null).sort((B,k)=>new Date(k.fechaPresentacion).getTime()-new Date(B.fechaPresentacion).getTime()):[],[s,e]),w=async(B,k)=>{const F=s.find(S=>S.id===B);if(!F)return;const E={...F,grupos:F.grupos.map(S=>S.integrantes.some(L=>L.nombre===e.nombreCompleto)?{...S,integrantes:S.integrantes.map(L=>L.nombre===e.nombreCompleto?{...L,rol:k||void 0}:L)}:S)};try{await uit(E)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},N=B=>{const k=parseFloat(B);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return l?o.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:B=>B.stopPropagation(),children:[o.jsx("div",{className:"text-8xl animate-bounce",children:m.emoji}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),o.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:m.nombre}),o.jsx("p",{className:"text-slate-600 mt-4",children:m.mensaje}),o.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:B=>B.stopPropagation(),children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),o.jsx("div",{className:"overflow-y-auto space-y-3",children:RC.map(B=>{const k=u==null?void 0:u.insigniasGanadas.some(F=>F.nombre===B.nombre);return o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[o.jsx("div",{className:"text-5xl",children:B.emoji}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:B.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",B.promedioMin," y ",B.promedioMax]})]})]},B.nombre)})})]})}),o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),o.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),o.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),o.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),o.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),o.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),v.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(B=>o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800",children:B.asignatura}),o.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${N(B.promedio)}`,children:B.promedio})]}),o.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),B.actividades.map(k=>o.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),o.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},k.id))]})]},B.asignatura))}):o.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[o.jsx("span",{className:"text-5xl",children:"📊"}),o.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),o.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),o.jsx("div",{className:"space-y-4",children:y.map(B=>{const k=B.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),F=Vee.filter(E=>!k.includes(E));return o.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[o.jsx("h3",{className:"font-bold text-slate-800",children:B.nombreActividad}),o.jsxs("p",{className:"text-sm text-slate-500",children:[B.asignatura," - Presentación: ",new Date(B.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",B.miGrupo.numero]}),o.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:B.miGrupo.integrantes.map(E=>o.jsxs("li",{className:"grid grid-cols-2 items-center",children:[o.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?o.jsxs("select",{value:E.rol||"",onChange:S=>w(B.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[o.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!F.includes(E.rol)&&o.jsx("option",{value:E.rol,children:E.rol}),F.map(S=>o.jsx("option",{value:S,children:S},S))]}):o.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},B.id)})})]})]})},Ait="proyectos_interdisciplinarios",Que="entregas_interdisciplinarias",Hue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},fit=(e,t)=>{const r=zt(vt(ft,Ait),Br("cursos","array-contains",e));return fr(r,n=>{const a=n.docs.map(s=>Hue(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},hit=(e,t)=>{const r=zt(vt(ft,Que),Br("estudianteId","==",e));return fr(r,n=>{const a=n.docs.map(s=>Hue(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},mit=async e=>{try{const{id:t,...r}=e,n=sr(ft,Que,t),a={...r,fechaCompletado:ir.fromDate(new Date(r.fechaCompletado||Date.now()))};await bi(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},pit=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState([]),[s,i]=_.useState(null),[l,c]=_.useState(!0);_.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=fit(e.curso,r),h=hit(e.id,m=>{a(m),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await mit(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const m=_.useMemo(()=>{const k=n.find(F=>F.planificacionId===f.id&&F.tareaId===h.id);return k||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=_.useState(!1),[v,y]=_.useState({observaciones:m.observacionesEstudiante||"",enlace:m.enlaceUrl||""}),w=k=>{var E;const F=(E=k.target.files)==null?void 0:E[0];F&&(alert(`Simulación: Archivo "${F.name}" listo para subir.`),u({...m,archivoAdjunto:{nombre:F.name,url:`simulated/path/${F.name}`},fechaCompletado:new Date().toISOString()}))},N=()=>{u({...m,observacionesEstudiante:v.observaciones,enlaceUrl:v.enlace,fechaCompletado:new Date().toISOString()})},B=()=>{u({...m,completada:!m.completada,fechaCompletado:new Date().toISOString()})};return o.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("input",{type:"checkbox",checked:m.completada,onChange:B,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:`font-semibold ${m.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),o.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&o.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),o.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&o.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[o.jsx("textarea",{value:v.observaciones,onChange:k=>y({...v,observaciones:k.target.value}),onBlur:N,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),o.jsx("input",{type:"url",value:v.enlace,onChange:k=>y({...v,enlace:k.target.value}),onBlur:N,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),o.jsx("input",{type:"file",onChange:w,className:"text-sm"}),m.archivoAdjunto&&o.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",m.archivoAdjunto.nombre]})]}),m.feedbackProfesor&&o.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),o.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:m.feedbackProfesor})]})]})};return l?o.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(v=>v.planificacionId===f.id).filter(v=>v.completada).length,x=h.length>0?g/h.length*100:0;return o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[o.jsx("span",{children:"Progreso"}),o.jsxs("span",{children:[Math.round(x),"%"]})]}),o.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&o.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(v=>o.jsx(d,{plan:f,tarea:v},v.id)):o.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):o.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[o.jsx("span",{className:"text-5xl",children:"🎉"}),o.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),o.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},git=({data:e})=>o.jsx("div",{className:"space-y-4",children:e.map((r,n)=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),o.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:o.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),xit=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),[s,i]=_.useState(null),[l,c]=_.useState(null),[u,d]=_.useState(lw),f=_.useCallback(async()=>{a(!0);try{const v=(await RJe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(v),i(null)}catch(x){console.error("Error al cargar acompañamientos desde Firestore",x),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=_.useCallback(async()=>{try{const x=await LJe();x&&d(x)}catch(x){console.error("Error al cargar rúbrica personalizada",x)}},[]);_.useEffect(()=>{f(),h()},[f,h]);const m=_.useMemo(()=>{if(!l)return[];const x={};return u.forEach(v=>{x[v.domain]={total:0,count:0},v.criteria.forEach(y=>{const w=l.rubricaResultados[y.name];w&&(x[v.domain].total+=w,x[v.domain].count++)})}),Object.entries(x).map(([v,y])=>({label:v,value:y.count>0?y.total/y.count:0}))},[l,u]),g=x=>{const v=new vr;v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),v.setFont("helvetica","bold"),v.setFontSize(16),v.setTextColor(40),v.text("Informe de Acompañamiento Docente",v.internal.pageSize.getWidth()/2,25,{align:"center"}),v.setFontSize(12),v.setFont("helvetica","normal"),pi(v,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=v.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const B=[],k=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(F=>{B.push([{content:F.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),F.criteria.forEach(E=>{const S=x.rubricaResultados[E.name],T=S?k[S-1]:"No evaluado";B.push([E.name,T])})}),pi(v,{startY:y,head:[["Indicador","Nivel de Logro"]],body:B,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=v.lastAutoTable.finalY+15}const w=(B,k)=>{if(!k)return;y>250&&(v.addPage(),y=20,v.setFont("helvetica","bold"),v.setFontSize(10),v.setTextColor(100),v.text("LICEO INDUSTRIAL DE RECOLETA",v.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),v.setFont("helvetica","bold"),v.setFontSize(14),v.setTextColor(40),v.text(B,14,y),y+=8,v.setFont("helvetica","normal"),v.setFontSize(11),v.setTextColor(60);const F=v.splitTextToSize(k.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);v.text(F,14,y),y+=F.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentación Consolidada",x.retroalimentacionConsolidada);const N=v.getNumberOfPages();for(let B=1;B<=N;B++)v.setPage(B),v.setFontSize(8),v.setTextColor(128),v.text(`Página ${B} de ${N}`,v.internal.pageSize.getWidth()/2,v.internal.pageSize.getHeight()-10,{align:"center"});v.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return l?o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{children:[o.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(l.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",l.curso," - ",l.asignatura]})]}),o.jsxs("button",{onClick:()=>g(l),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[o.jsx(Hee,{})," Exportar PDF"]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[o.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:o.jsx("p",{className:"whitespace-pre-wrap",children:l.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),o.jsx("h3",{children:"Observaciones Generales"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:o.jsx("p",{className:"whitespace-pre-wrap",children:l.observacionesGenerales||"Sin observaciones."})})]})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),o.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:o.jsx(git,{data:m})})]})]})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&o.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),o.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>o.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&o.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),o.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&o.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsx("span",{className:"text-5xl",children:"👍"}),o.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},vit=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=vt(wr,"planificaciones"),r=zt(t,hr("fechaCreacion","desc"));return fr(r,a=>{const s=[];a.forEach(i=>{const l=i.data();s.push({id:i.id,...l})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},bit=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=vt(wr,"planificaciones"),n=zt(r,Br("userId","==",e),hr("fechaCreacion","desc"));return fr(n,s=>{const i=[];s.forEach(l=>{const c=l.data();i.push({id:l.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function yit(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const wit=yit("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Eit={value:function(){}};function Vue(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new N5(r)}function N5(e){this._=e}function Cit(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}N5.prototype=Vue.prototype={constructor:N5,on:function(e,t){var r=this._,n=Cit(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=Nit(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=PW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=PW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new N5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Nit(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function PW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Eit,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const _it=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Vue},Symbol.toStringTag,{value:"Module"})),Sit=she(_it);var RI,RW;function kit(){if(RW)return RI;RW=1;const e=Sit.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:v},n=64,a=2048;RI=function(){var B=[256,256],k=s,F=i,E=c,S=l,T=l,L=u,R=d,j=x,P=[],M=1/0,Z=e("word","end"),V=null,W=Math.random,G={},K=w;G.canvas=function(D){return arguments.length?(K=N(D),G):K},G.start=function(){var D=ee(K()),Q=y((B[0]>>5)*B[1]),z=null,J=P.length,te=-1,se=[],ie=P.map(function(ue,je){return ue.text=k.call(this,ue,je),ue.font=F.call(this,ue,je),ue.style=S.call(this,ue,je),ue.weight=T.call(this,ue,je),ue.rotate=L.call(this,ue,je),ue.size=~~E.call(this,ue,je),ue.padding=R.call(this,ue,je),ue}).sort(function(ue,je){return je.size-ue.size});return V&&clearInterval(V),V=setInterval(le,0),le(),G;function le(){for(var ue=Date.now();Date.now()-ue<M&&++te<J&&V;){var je=ie[te];je.x=B[0]*(W()+.5)>>1,je.y=B[1]*(W()+.5)>>1,f(D,je,ie,te),je.hasText&&X(Q,je,z)&&(se.push(je),Z.call("word",G,je),z?m(z,je):z=[{x:je.x+je.x0,y:je.y+je.y0},{x:je.x+je.x1,y:je.y+je.y1}],je.x-=B[0]>>1,je.y-=B[1]>>1)}te>=J&&(G.stop(),Z.call("end",G,se,z))}},G.stop=function(){V&&(clearInterval(V),V=null);for(const D of P)delete D.sprite;return G};function ee(D){const Q=D.getContext("2d",{willReadFrequently:!0});D.width=D.height=1;const z=Math.sqrt(Q.getImageData(0,0,1,1).data.length>>2);return D.width=(n<<5)/z,D.height=a/z,Q.fillStyle=Q.strokeStyle="red",{context:Q,ratio:z}}function X(D,Q,z){B[0],B[1];for(var J=Q.x,te=Q.y,se=Math.sqrt(B[0]*B[0]+B[1]*B[1]),ie=j(B),le=W()<.5?1:-1,ue=-le,je,ae,Ne;(je=ie(ue+=le))&&(ae=~~je[0],Ne=~~je[1],!(Math.min(Math.abs(ae),Math.abs(Ne))>=se));)if(Q.x=J+ae,Q.y=te+Ne,!(Q.x+Q.x0<0||Q.y+Q.y0<0||Q.x+Q.x1>B[0]||Q.y+Q.y1>B[1])&&(!z||g(Q,z))&&!h(Q,D,B[0])){for(var ke=Q.sprite,_e=Q.width>>5,he=B[0]>>5,Be=Q.x-(_e<<4),Le=Be&127,We=32-Le,xe=Q.y1-Q.y0,Oe=(Q.y+Q.y0)*he+(Be>>5),Re,$e=0;$e<xe;$e++){Re=0;for(var et=0;et<=_e;et++)D[Oe+et]|=Re<<We|(et<_e?(Re=ke[$e*_e+et])>>>Le:0);Oe+=he}return!0}return!1}return G.timeInterval=function(D){return arguments.length?(M=D??1/0,G):M},G.words=function(D){return arguments.length?(P=D,G):P},G.size=function(D){return arguments.length?(B=[+D[0],+D[1]],G):B},G.font=function(D){return arguments.length?(F=N(D),G):F},G.fontStyle=function(D){return arguments.length?(S=N(D),G):S},G.fontWeight=function(D){return arguments.length?(T=N(D),G):T},G.rotate=function(D){return arguments.length?(L=N(D),G):L},G.text=function(D){return arguments.length?(k=N(D),G):k},G.spiral=function(D){return arguments.length?(j=r[D]||D,G):j},G.fontSize=function(D){return arguments.length?(E=N(D),G):E},G.padding=function(D){return arguments.length?(R=N(D),G):R},G.random=function(D){return arguments.length?(W=D,G):W},G.on=function(){var D=Z.on.apply(Z,arguments);return D===Z?G:D},G};function s(B){return B.text}function i(){return"serif"}function l(){return"normal"}function c(B){return Math.sqrt(B.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(B,k,F,E){if(!k.sprite){var S=B.context,T=B.ratio;S.clearRect(0,0,(n<<5)/T,a/T);var L=0,R=0,j=0,P=F.length;for(--E;++E<P;){k=F[E],S.save(),S.font=k.style+" "+k.weight+" "+~~((k.size+1)/T)+"px "+k.font;const je=S.measureText(k.text),ae=-Math.floor(je.width/2);let Ne=(je.width+1)*T,ke=k.size<<1;if(k.rotate){var M=Math.sin(k.rotate*t),Z=Math.cos(k.rotate*t),V=Ne*Z,W=Ne*M,G=ke*Z,K=ke*M;Ne=Math.max(Math.abs(V+K),Math.abs(V-K))+31>>5<<5,ke=~~Math.max(Math.abs(W+G),Math.abs(W-G))}else Ne=Ne+31>>5<<5;if(ke>j&&(j=ke),L+Ne>=n<<5&&(L=0,R+=j,j=0),R+ke>=a)break;S.translate((L+(Ne>>1))/T,(R+(ke>>1))/T),k.rotate&&S.rotate(k.rotate*t),S.fillText(k.text,ae,0),k.padding&&(S.lineWidth=2*k.padding,S.strokeText(k.text,ae,0)),S.restore(),k.width=Ne,k.height=ke,k.xoff=L,k.yoff=R,k.x1=Ne>>1,k.y1=ke>>1,k.x0=-k.x1,k.y0=-k.y1,k.hasText=!0,L+=Ne}for(var ee=S.getImageData(0,0,(n<<5)/T,a/T).data,X=[];--E>=0;)if(k=F[E],!!k.hasText){for(var D=k.width,Q=D>>5,z=k.y1-k.y0,J=0;J<z*Q;J++)X[J]=0;if(L=k.xoff,L==null)return;R=k.yoff;for(var te=0,se=-1,ie=0;ie<z;ie++){for(var J=0;J<D;J++){var le=Q*ie+(J>>5),ue=ee[(R+ie)*(n<<5)+(L+J)<<2]?1<<31-J%32:0;X[le]|=ue,te|=ue}te?se=ie:(k.y0++,z--,ie--,R++)}k.y1=k.y0+se,k.sprite=X.slice(0,(k.y1-k.y0)*Q)}}}function h(B,k,F){F>>=5;for(var E=B.sprite,S=B.width>>5,T=B.x-(S<<4),L=T&127,R=32-L,j=B.y1-B.y0,P=(B.y+B.y0)*F+(T>>5),M,Z=0;Z<j;Z++){M=0;for(var V=0;V<=S;V++)if((M<<R|(V<S?(M=E[Z*S+V])>>>L:0))&k[P+V])return!0;P+=F}return!1}function m(B,k){var F=B[0],E=B[1];k.x+k.x0<F.x&&(F.x=k.x+k.x0),k.y+k.y0<F.y&&(F.y=k.y+k.y0),k.x+k.x1>E.x&&(E.x=k.x+k.x1),k.y+k.y1>E.y&&(E.y=k.y+k.y1)}function g(B,k){return B.x+B.x1>k[0].x&&B.x+B.x0<k[1].x&&B.y+B.y1>k[0].y&&B.y+B.y0<k[1].y}function x(B){var k=B[0]/B[1];return function(F){return[k*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function v(B){var k=4,F=k*B[0]/B[1],E=0,S=0;return function(T){var L=T<0?-1:1;switch(Math.sqrt(1+4*L*T)-L&3){case 0:E+=F;break;case 1:S+=k;break;case 2:E-=F;break;default:S-=k;break}return[E,S]}}function y(B){for(var k=[],F=-1;++F<B;)k[F]=0;return k}function w(){return document.createElement("canvas")}function N(B){return typeof B=="function"?B:function(){return B}}return RI}var jit=kit();const Bit=kl(jit),Tit=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Iit=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Fit=()=>o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Oit=e=>{const[t,r]=_.useState([]),[n,a]=_.useState(!0),[s,i]=_.useState(null),l=_.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return _.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(l)c=vit(u);else{const d=e.email||e.id||"";c=bit(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,l]),{planificaciones:t,loading:n,error:s,canViewAllPlans:l}},Dit=({plan:e,onClose:t})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[o.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),o.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:o.jsx(Iit,{})})]}),o.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[o.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),o.jsxs("p",{className:"mt-2",children:[o.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),o.jsx("div",{className:"mt-3",children:o.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),o.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>o.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[o.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?o.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>o.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[o.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),LW=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Pit=["1º Medio","2º Medio","3º Medio","4º Medio"],Rit=({words:e})=>{const t=_.useRef(null);return _.useEffect(()=>{if(!e.length||!t.current)return;const r=Ru(t.current);r.selectAll("*").remove();const n=Bit().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,l)=>ck(wit)(l.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),o.jsx("svg",{ref:t})},Lit=({planificaciones:e})=>{const[t,r]=_.useState("todos"),[n,a]=_.useState("todos"),s=_.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=_.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),l=_.useMemo(()=>{const d=LW.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,m;return(m=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:m.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=LW.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=_.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(m=>{var g,x;return`${((g=m.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=m.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((m,g)=>(d.has(g)||(m[g]=(m[g]||0)+1),m),{});return Object.entries(h).map(([m,g])=>({text:m,value:g})).sort((m,g)=>g.value-m.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),o.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[o.jsx("option",{value:"todos",children:"Todos los Niveles"}),Pit.map(d=>o.jsx("option",{value:d,children:d},d))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>o.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),l.every(d=>d.value===0)?o.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):o.jsx("ul",{className:"space-y-3",children:l.map((d,f)=>o.jsxs("li",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),o.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(l[0].value||1)*100}%`}})})]})]},d.text))})]}),o.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?o.jsx(Rit,{words:c}):o.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},Mit=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=Oit(e),[s,i]=_.useState("seguimiento"),[l,c]=_.useState("1º"),[u,d]=_.useState(null),[f,h]=_.useState(null),m=_.useMemo(()=>{const v={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===v[l]&&y.tipo==="Unidad")},[t,l]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{children:"Usuario no autenticado."})});if(r)return o.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[o.jsx(Fit,{}),o.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return o.jsx("div",{className:"text-center py-8",children:o.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:o.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(v=>o.jsx("button",{onClick:()=>c(v.key),className:`${l===v.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:v.label},v.key))})}),m.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):o.jsx("div",{className:"space-y-4",children:ks.map(v=>{const y=m.filter(N=>N.asignatura===v);if(y.length===0)return null;const w=u===v;return o.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[o.jsxs("button",{onClick:()=>d(w?null:v),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:v}),o.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),o.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:o.jsx(Tit,{})})]}),w&&o.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:o.jsx("ul",{className:"space-y-3",children:y.map(N=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>h(N),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[o.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:N.nombreUnidad}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",N.autor||"N/A"]})]})},N.id))})})]},v)})})]});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&o.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:o.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),o.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&o.jsx(Lit,{planificaciones:t.filter(v=>v.tipo==="Unidad")})]}),f&&o.jsx(Dit,{plan:f,onClose:()=>h(null)})]})},rj="analisisTaxonomicos",Uit=async()=>{try{const e=zt(vt(wr,rj),hr("uploadDate","desc"));return(await Tn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},Qit=async e=>{if(!e)return[];try{const t=zt(vt(wr,rj),Br("userId","==",e),hr("uploadDate","desc"));return(await Tn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},Hit=async e=>{try{return{id:(await hn(vt(wr,rj),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},Vit=async e=>{try{const t=sr(wr,rj,e);await Ra(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},MW=["1º Medio","2º Medio","3º Medio","4º Medio"],$f=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],$x={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},zit=()=>o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),$it=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),[s,i]=_.useState(null),[l,c]=_.useState(null),[u,d]=_.useState(""),[f,h]=_.useState(!1),[m,g]=_.useState(null),[x,v]=_.useState(null),[y,w]=_.useState(""),[N,B]=_.useState(""),[k,F]=_.useState(""),[E,S]=_.useState(""),[T,L]=_.useState("resumen"),R=_.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const K=e.profile==="SUBDIRECCION"?await Uit():await Qit(e.id);r(K),i(null)}catch(K){console.error("Error al cargar análisis:",K),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);_.useEffect(()=>{R()},[R]);const j=async K=>{var X;const ee=(X=K.target.files)==null?void 0:X[0];if(ee){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(ee.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(ee),d(ee.name),i(null);const Q=new FileReader;Q.onloadend=()=>{var J;const z=(J=Q.result)==null?void 0:J.split(",")[1];if(!z){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),v(null);return}v({mimeType:ee.type,data:z})},Q.onerror=()=>i("Error al leer el archivo."),Q.readAsDataURL(ee)}},P=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!N){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const K=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,ee={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:$f}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:$f.reduce((X,D)=>({...X,[D]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{C1("Análisis Taxonómico",e);const X="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=new Os(X).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:ee}}),z={inlineData:{mimeType:x.mimeType,data:x.data}},te=(await Q.generateContent([K,z])).response.text();let se;try{se=JSON.parse(te)}catch(ue){throw console.error("Error al parsear JSON:",ue),console.error("Respuesta recibida (no es JSON válido):",te),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:se.analysisResults,summary:se.summary,nivel:y,asignatura:N},le=await Hit(ie);await R(),c(le),d(""),g(null),v(null),w(""),B("")}catch(X){console.error(X);const D=X instanceof Error?X.message:"Hubo un error al analizar el documento.";i(D)}finally{h(!1)}},M=async K=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await Vit(K),await R(),(l==null?void 0:l.id)===K&&c(null)}catch{i("No se pudo eliminar el análisis.")}},Z=_.useMemo(()=>t.filter(K=>{const ee=k?K.nivel===k:!0,X=E?K.asignatura===E:!0;return ee&&X}),[t,k,E]),V=_.useMemo(()=>{const K={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};Z.forEach(X=>{$f.forEach(D=>{var z;const Q=((z=X.summary)==null?void 0:z[D])||0;K[D]+=Q})});const ee=Object.values(K).reduce((X,D)=>X+D,0);return{acc:K,total:ee}},[Z]),W=_.useMemo(()=>{const K=new Map;Z.forEach(X=>{const D=X.asignatura||"Sin asignatura";K.has(D)||K.set(D,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const Q=K.get(D);$f.forEach(z=>{var J;Q[z]+=((J=X.summary)==null?void 0:J[z])||0})});const ee=Array.from(K.entries()).map(([X,D])=>({asignatura:X,counts:D,total:Object.values(D).reduce((Q,z)=>Q+z,0)}));return ee.sort((X,D)=>D.total-X.total),ee},[Z]),G=_.useMemo(()=>l?Object.values(l.summary).reduce((K,ee)=>K+(ee||0),0):0,[l]);return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonomico de Evaluaciones"}),s&&o.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),o.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:o.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),o.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[o.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[o.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:j,accept:".pdf,.doc,.docx"}),o.jsx("span",{children:"Cargue un archivo"})]}),o.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),o.jsx("p",{className:"text-xs text-slate-500",children:m?m.name:"PDF, DOCX hasta 10MB"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),o.jsxs("select",{value:y,onChange:K=>w(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione"}),MW.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),o.jsxs("select",{value:N,onChange:K=>B(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Seleccione"}),ks.map(K=>o.jsx("option",{value:K,children:K},K))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),o.jsx("input",{type:"text",id:"documentName",value:u,onChange:K=>d(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),o.jsx("button",{onClick:P,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?o.jsx(zit,{}):"Analizar con IA"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?o.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(K=>o.jsxs("button",{onClick:()=>c(K),className:`w-full text-left p-3 rounded-md border ${(l==null?void 0:l.id)===K.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[o.jsx("p",{className:"font-semibold truncate",children:K.documentName}),o.jsx("p",{className:"text-xs text-slate-500",children:new Date(K.uploadDate).toLocaleString("es-CL")}),(K.nivel||K.asignatura)&&o.jsxs("p",{className:"text-xs text-slate-500",children:[K.nivel||"Nivel s/i"," • ",K.asignatura||"Asignatura s/i"]})]},K.id))})]})]}),o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),o.jsxs("select",{value:k,onChange:K=>F(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todos"}),MW.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),o.jsxs("select",{value:E,onChange:K=>S(K.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{value:"",children:"Todas"}),ks.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsx("button",{type:"button",onClick:()=>{F(""),S("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[o.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:o.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>L("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${T==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),o.jsx("button",{onClick:()=>L("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${T==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),T==="resumen"?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," análisis considerados"]})]}),o.jsx("div",{className:"space-y-3",children:$f.map(K=>{const ee=V.acc[K],X=V.total>0?ee/V.total*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:K}),o.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[ee," (",X.toFixed(0),"%)"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:o.jsx("div",{className:`${$x[K]} h-4 rounded-full`,style:{width:`${X}%`}})})]},K)})}),o.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:$f.map(K=>o.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[o.jsx("span",{className:"text-sm",children:K}),o.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${$x[K]}`,children:V.acc[K]})]},K))})]}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[W.length," asignaturas comparadas"]})]}),W.length===0?o.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):o.jsx("div",{className:"space-y-5",children:W.map(K=>{const ee=K.total||1;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:K.asignatura}),o.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[K.total," ítems"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:$f.map(X=>{const D=K.counts[X]||0,Q=D/ee*100;return o.jsx("div",{className:`${$x[X]} h-5`,style:{width:`${Q}%`},title:`${X}: ${D} (${Q.toFixed(0)}%)`},X)})}),o.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:$f.map(X=>o.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[o.jsx("span",{className:`inline-block w-3 h-3 rounded ${$x[X]}`}),o.jsx("span",{children:X})]},X))})]},K.asignatura)})})]})]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:l?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.documentName}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(l.uploadDate).toLocaleString("es-CL"),(l.nivel||l.asignatura)&&o.jsxs(o.Fragment,{children:[" ","• ",l.nivel||"Nivel s/i"," • ",l.asignatura||"Asignatura s/i"]})]})]}),o.jsx("button",{onClick:()=>M(l.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",G," preguntas)"]}),o.jsx("div",{className:"space-y-3",children:$f.map(K=>{const ee=l.summary[K]||0,X=G>0?ee/G*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:K}),o.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[ee," (",X.toFixed(0),"%)"]})]}),o.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:o.jsx("div",{className:`${$x[K]} h-4 rounded-full`,style:{width:`${X}%`}})})]},K)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),o.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:o.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:l.analysisResults.map((K,ee)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:K.question}),o.jsx("td",{className:"px-4 py-3 text-sm",children:o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${$x[K.habilidadBloom]}`,children:K.habilidadBloom})})]},ee))})]})})]})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},DS="empresas_practicas",Git="usuarios",TM="rutas_supervision",IM=e=>{const t=e.data();return{id:e.id,...t}};async function Kit(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const qit=e=>{const t=zt(vt(ft,DS),hr("nombre","asc"));return fr(t,r=>{const n=r.docs.map(a=>IM(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},Wit=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await Kit(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=sr(ft,DS,n);return await bi(s,a,{merge:!0}),n}else return(await hn(vt(ft,DS),{...r,createdAt:Is()})).id},Xit=async e=>{const t=sr(ft,DS,e);await Ra(t)},Yit=e=>{const t=zt(vt(ft,Git),Br("profile","==","PROFESORADO"),hr("nombreCompleto","asc"));return fr(t,r=>{const n=r.docs.map(a=>IM(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},Jit=async e=>(await hn(vt(ft,TM),{...e,createdAt:Is()})).id,Zit=e=>{const t=zt(vt(ft,TM),hr("createdAt","desc"));return fr(t,r=>{const n=r.docs.map(a=>IM(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},eot=async e=>{const t=sr(ft,TM,e);await Ra(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sg=function(){return sg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},sg.apply(this,arguments)};function tot(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,l)}c((n=n.apply(e,[])).next())})}function rot(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(this,arguments)}function ig(e){return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}function zue(e){var t=function(r,n){if(ig(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(ig(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return ig(t)==="symbol"?t:String(t)}function yv(e,t,r){return(t=zue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UW(Object(r),!0).forEach(function(n){yv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zue(n.key),n)}}function WO(e,t){return WO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},WO(e,t)}function PS(e){return PS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},PS(e)}function not(e,t){if(t&&(ig(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function aot(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=PS(e);if(t){var a=PS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return not(this,r)}}function XO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $ue(e,t){if(e){if(typeof e=="string")return XO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XO(e,t):void 0}}function FM(e){return function(t){if(Array.isArray(t))return XO(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||$ue(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var sot=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Su="-ms-",HW="-moz-",Zn="-webkit-",OM="decl",Gue="@keyframes",iot=Math.abs,nj=String.fromCharCode,oot=Object.assign;function Kue(e){return e.trim()}function sa(e,t,r){return e.replace(t,r)}function YO(e,t){return e.indexOf(t)}function go(e,t){return 0|e.charCodeAt(t)}function _2(e,t,r){return e.slice(t,r)}function MA(e){return e.length}function DM(e){return e.length}function NN(e,t){return t.push(e),e}var aj=1,I1=1,que=0,lc=0,fi=0,hb="";function sj(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:aj,column:I1,length:i,return:""}}function wy(e,t){return oot(sj("",null,null,"",null,null,0),e,{length:-e.length},t)}function $c(){return fi=lc<que?go(hb,lc++):0,I1++,fi===10&&(I1=1,aj++),fi}function nf(){return go(hb,lc)}function _5(){return lc}function CE(e,t){return _2(hb,e,t)}function S2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wue(e){return aj=I1=1,que=MA(hb=e),lc=0,[]}function Xue(e){return hb="",e}function S5(e){return Kue(CE(lc-1,JO(e===91?e+2:e===40?e+1:e)))}function lot(e){for(;(fi=nf())&&fi<33;)$c();return S2(e)>2||S2(fi)>3?"":" "}function cot(e,t){for(;--t&&$c()&&!(fi<48||fi>102||fi>57&&fi<65||fi>70&&fi<97););return CE(e,_5()+(t<6&&nf()==32&&$c()==32))}function JO(e){for(;$c();)switch(fi){case e:return lc;case 34:case 39:e!==34&&e!==39&&JO(fi);break;case 40:e===41&&JO(e);break;case 92:$c()}return lc}function uot(e,t){for(;$c()&&e+fi!==57&&(e+fi!==84||nf()!==47););return"/*"+CE(t,lc-1)+"*"+nj(e===47?e:$c())}function dot(e){for(;!S2(nf());)$c();return CE(e,lc)}function VW(e){return Xue(k5("",null,null,null,[""],e=Wue(e),0,[0],e))}function k5(e,t,r,n,a,s,i,l,c){for(var u=0,d=0,f=i,h=0,m=0,g=0,x=1,v=1,y=1,w=0,N="",B=a,k=s,F=n,E=N;v;)switch(g=w,w=$c()){case 40:if(g!=108&&go(E,f-1)==58){YO(E+=sa(S5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=S5(w);break;case 9:case 10:case 13:case 32:E+=lot(g);break;case 92:E+=cot(_5()-1,7);continue;case 47:switch(nf()){case 42:case 47:NN(Aot(uot($c(),_5()),t,r),c);break;default:E+="/"}break;case 123*x:l[u++]=MA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:v=0;case 59+d:m>0&&MA(E)-f&&NN(m>32?$W(E+";",n,r,f-1):$W(sa(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(NN(F=zW(E,t,r,u,d,a,l,N,B=[],k=[],f),s),w===123)if(d===0)k5(E,t,F,F,B,s,f,l,k);else switch(h===99&&go(E,3)===110?100:h){case 100:case 109:case 115:k5(e,F,F,n&&NN(zW(e,F,F,0,0,a,l,N,a,B=[],f),k),a,k,f,l,n?B:k);break;default:k5(E,F,F,F,[""],k,0,l,k)}}u=d=m=0,x=y=1,N=E="",f=i;break;case 58:f=1+MA(E),m=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(fi=lc>0?go(hb,--lc):0,I1--,fi===10&&(I1=1,aj--),fi==125))continue}switch(E+=nj(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(MA(E)-1)*y,y=1;break;case 64:nf()===45&&(E+=S5($c())),h=nf(),d=f=MA(N=E+=dot(_5())),w++;break;case 45:g===45&&MA(E)==2&&(x=0)}}return s}function zW(e,t,r,n,a,s,i,l,c,u,d){for(var f=a-1,h=a===0?s:[""],m=DM(h),g=0,x=0,v=0;g<n;++g)for(var y=0,w=_2(e,f+1,f=iot(x=i[g])),N=e;y<m;++y)(N=Kue(x>0?h[y]+" "+w:sa(w,/&\f/g,h[y])))&&(c[v++]=N);return sj(e,t,r,a===0?"rule":l,c,u,d)}function Aot(e,t,r){return sj(e,t,r,"comm",nj(fi),_2(e,2,-2),0)}function $W(e,t,r,n){return sj(e,t,r,OM,_2(e,0,n),_2(e,n+1,-1),n)}function og(e,t){for(var r="",n=DM(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function GW(e,t,r,n){switch(e.type){case"@import":case OM:return e.return=e.return||e.value;case"comm":return"";case Gue:return e.return=e.value+"{"+og(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return MA(r=og(e.children,n))?e.return=e.value+"{"+r+"}":""}function KW(e){var t=DM(e);return function(r,n,a,s){for(var i="",l=0;l<t;l++)i+=e[l](r,n,a,s)||"";return i}}function fot(e){return function(t){t.root||(t=t.return)&&e(t)}}function Yue(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var hot=function(e,t,r){for(var n=0,a=0;n=a,a=nf(),n===38&&a===12&&(t[r]=1),!S2(a);)$c();return CE(e,lc)},mot=function(e,t){return Xue(function(r,n){var a=-1,s=44;do switch(S2(s)){case 0:s===38&&nf()===12&&(n[a]=1),r[a]+=hot(lc-1,n,a);break;case 2:r[a]+=S5(s);break;case 4:if(s===44){r[++a]=nf()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=nj(s)}while(s=$c());return r}(Wue(e),t))},qW=new WeakMap,pot=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||qW.get(r))&&!n){qW.set(e,!0);for(var a=[],s=mot(t,a),i=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[l]?s[l].replace(/&\f/g,i[u]):i[u]+" "+s[l]}}},got=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Jue(e,t){switch(function(r,n){return 45^go(r,0)?(((n<<2^go(r,0))<<2^go(r,1))<<2^go(r,2))<<2^go(r,3):0}(e,t)){case 5103:return Zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+e+HW+e+Su+e+e;case 6828:case 4268:return Zn+e+Su+e+e;case 6165:return Zn+e+Su+"flex-"+e+e;case 5187:return Zn+e+sa(e,/(\w+).+(:[^]+)/,Zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Zn+e+Su+"flex-item-"+sa(e,/flex-|-self/,"")+e;case 4675:return Zn+e+Su+"flex-line-pack"+sa(e,/align-content|flex-|-self/,"")+e;case 5548:return Zn+e+Su+sa(e,"shrink","negative")+e;case 5292:return Zn+e+Su+sa(e,"basis","preferred-size")+e;case 6060:return Zn+"box-"+sa(e,"-grow","")+Zn+e+Su+sa(e,"grow","positive")+e;case 4554:return Zn+sa(e,/([^-])(transform)/g,"$1"+Zn+"$2")+e;case 6187:return sa(sa(sa(e,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),e,"")+e;case 5495:case 3959:return sa(e,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return sa(sa(e,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+e+e;case 4095:case 3583:case 4068:case 2532:return sa(e,/(.+)-inline(.+)/,Zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(MA(e)-1-t>6)switch(go(e,t+1)){case 109:if(go(e,t+4)!==45)break;case 102:return sa(e,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+HW+(go(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~YO(e,"stretch")?Jue(sa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(go(e,t+1)!==115)break;case 6444:switch(go(e,MA(e)-3-(~YO(e,"!important")&&10))){case 107:return sa(e,":",":"+Zn)+e;case 101:return sa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(go(e,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(go(e,t+11)){case 114:return Zn+e+Su+sa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zn+e+Su+sa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zn+e+Su+sa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zn+e+Su+e+e}return e}var WW,_N,j5=typeof document<"u",xot=j5?void 0:(WW=function(){return Yue(function(){var e={};return function(t){return e[t]}})},_N=new WeakMap,function(e){if(_N.has(e))return _N.get(e);var t=WW(e);return _N.set(e,t),t}),vot=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case OM:e.return=Jue(e.value,e.length);break;case Gue:return og([wy(e,{value:sa(e.value,"@","@"+Zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return og([wy(e,{props:[sa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return og([wy(e,{props:[sa(a,/:(plac\w+)/,":"+Zn+"input-$1")]}),wy(e,{props:[sa(a,/:(plac\w+)/,":-moz-$1")]}),wy(e,{props:[sa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Zue=function(e){var t=e.key;if(j5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||vot,a,s,i={},l=[];j5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),N=1;N<w.length;N++)i[w[N]]=!0;l.push(y)}));var c=[pot,got];if(j5){var u,d=[GW,fot(function(y){u.insert(y)})],f=KW(c.concat(n,d));s=function(y,w,N,B){u=N,og(VW(y?y+"{"+w.styles+"}":w.styles),f),B&&(v.inserted[w.name]=!0)}}else{var h=[GW],m=KW(c.concat(n,h)),g=xot(n)(t),x=function(y,w){var N=w.name;return g[N]===void 0&&(g[N]=og(VW(y?y+"{"+w.styles+"}":w.styles),m)),g[N]};s=function(y,w,N,B){var k=w.name,F=x(y,w);return v.compat===void 0?(B&&(v.inserted[k]=!0),F):B?void(v.inserted[k]=F):F}}var v={key:t,sheet:new sot({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return v.sheet.hydrate(l),v};function oa(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var so=typeof Symbol=="function"&&Symbol.for,ZO=so?Symbol.for("react.element"):60103,eD=so?Symbol.for("react.portal"):60106,B5=so?Symbol.for("react.fragment"):60107,T5=so?Symbol.for("react.strict_mode"):60108,I5=so?Symbol.for("react.profiler"):60114,F5=so?Symbol.for("react.provider"):60109,O5=so?Symbol.for("react.context"):60110,tD=so?Symbol.for("react.async_mode"):60111,RS=so?Symbol.for("react.concurrent_mode"):60111,D5=so?Symbol.for("react.forward_ref"):60112,P5=so?Symbol.for("react.suspense"):60113,bot=so?Symbol.for("react.suspense_list"):60120,R5=so?Symbol.for("react.memo"):60115,L5=so?Symbol.for("react.lazy"):60116,yot=so?Symbol.for("react.block"):60121,wot=so?Symbol.for("react.fundamental"):60117,Eot=so?Symbol.for("react.responder"):60118,Cot=so?Symbol.for("react.scope"):60119;function Tc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZO:switch(e=e.type){case tD:case RS:case B5:case I5:case T5:case P5:return e;default:switch(e=e&&e.$$typeof){case O5:case D5:case L5:case R5:case F5:return e;default:return t}}case eD:return t}}}function XW(e){return Tc(e)===RS}var Not={AsyncMode:tD,ConcurrentMode:RS,ContextConsumer:O5,ContextProvider:F5,Element:ZO,ForwardRef:D5,Fragment:B5,Lazy:L5,Memo:R5,Portal:eD,Profiler:I5,StrictMode:T5,Suspense:P5,isAsyncMode:function(e){return XW(e)||Tc(e)===tD},isConcurrentMode:XW,isContextConsumer:function(e){return Tc(e)===O5},isContextProvider:function(e){return Tc(e)===F5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZO},isForwardRef:function(e){return Tc(e)===D5},isFragment:function(e){return Tc(e)===B5},isLazy:function(e){return Tc(e)===L5},isMemo:function(e){return Tc(e)===R5},isPortal:function(e){return Tc(e)===eD},isProfiler:function(e){return Tc(e)===I5},isStrictMode:function(e){return Tc(e)===T5},isSuspense:function(e){return Tc(e)===P5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===B5||e===RS||e===I5||e===T5||e===P5||e===bot||typeof e=="object"&&e!==null&&(e.$$typeof===L5||e.$$typeof===R5||e.$$typeof===F5||e.$$typeof===O5||e.$$typeof===D5||e.$$typeof===wot||e.$$typeof===Eot||e.$$typeof===Cot||e.$$typeof===yot)},typeOf:Tc};oa(function(e,t){});var YW=oa(function(e){e.exports=Not}),JW={};JW[YW.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},JW[YW.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var rD=typeof document<"u";function ede(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var PM=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||rD===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},RM=function(e,t,r){PM(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);rD||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!rD&&a.length!==0)return a}},_ot={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Sot=/[A-Z]|^ms/g,kot=/_EMO_([^_]+?)_([^]*?)_EMO_/g,tde=function(e){return e.charCodeAt(1)===45},ZW=function(e){return e!=null&&typeof e!="boolean"},LI=Yue(function(e){return tde(e)?e:e.replace(Sot,"-$&").toLowerCase()}),eX=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(kot,function(r,n,a){return UA={name:n,styles:a,next:UA},n})}return _ot[e]===1||tde(e)||typeof t!="number"||t===0?t:t+"px"};function _w(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return UA={name:r.name,styles:r.styles,next:UA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)UA={name:n.name,styles:n.styles,next:UA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=_w(c,u,d[h])+";";else for(var m in d){var g=d[m];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=m+"{"+u[g]+"}":ZW(g)&&(f+=LI(m)+":"+eX(m,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=_w(c,u,g);switch(m){case"animation":case"animationName":f+=LI(m)+":"+x+";";break;default:f+=m+"{"+x+"}"}}else for(var v=0;v<g.length;v++)ZW(g[v])&&(f+=LI(m)+":"+eX(m,g[v])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=UA,i=r(e);return UA=s,_w(e,t,i)}break}if(t==null)return r;var l=t[r];return l!==void 0?l:r}var UA,tX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ij=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";UA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=_w(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=_w(r,t,e[i]),n&&(a+=s[i]);tX.lastIndex=0;for(var l,c="";(l=tX.exec(a))!==null;)c+="-"+l[1];var u=function(d){for(var f,h=0,m=0,g=d.length;g>=4;++m,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(m)|(255&d.charCodeAt(++m))<<8|(255&d.charCodeAt(++m))<<16|(255&d.charCodeAt(++m))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(m+2))<<16;case 2:h^=(255&d.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(m)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:UA}},jot=typeof document<"u",Bot=function(e){return e()},rde=!!_.useInsertionEffect&&_.useInsertionEffect,nde=jot&&rde||Bot,rX=rde||_.useLayoutEffect,Gv=typeof document<"u",LM={}.hasOwnProperty,LS=_.createContext(typeof HTMLElement<"u"?Zue({key:"css"}):null);LS.Provider;var oj=function(e){return _.forwardRef(function(t,r){var n=_.useContext(LS);return e(t,n,r)})};Gv||(oj=function(e){return function(t){var r=_.useContext(LS);return r===null?(r=Zue({key:"css"}),_.createElement(LS.Provider,{value:r},e(t,r))):e(t,r)}});var MM=_.createContext({}),nD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Tot=function(e,t){var r={};for(var n in t)LM.call(t,n)&&(r[n]=t[n]);return r[nD]=e,r},Iot=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;PM(t,r,n);var a=nde(function(){return RM(t,r,n)});if(!Gv&&a!==void 0){for(var s,i=r.name,l=r.next;l!==void 0;)i+=" "+l.name,l=l.next;return _.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Fot=oj(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[nD],s=[n],i="";typeof e.className=="string"?i=ede(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var l=ij(s,void 0,_.useContext(MM));i+=t.key+"-"+l.name;var c={};for(var u in e)!LM.call(e,u)||u==="css"||u===nD||(c[u]=e[u]);return c.ref=r,c.className=i,_.createElement(_.Fragment,null,_.createElement(Iot,{cache:t,serialized:l,isStringTag:typeof a=="string"}),_.createElement(a,c))});oa(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Ir=function(e,t){var r=arguments;if(t==null||!LM.call(t,"css"))return _.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Fot,a[1]=Tot(e,t);for(var s=2;s<n;s++)a[s]=r[s];return _.createElement.apply(null,a)};oj(function(e,t){var r=e.styles,n=ij([r],void 0,_.useContext(MM));if(!Gv){for(var a,s=n.name,i=n.styles,l=n.next;l!==void 0;)s+=" "+l.name,i+=l.styles,l=l.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:_.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=_.useRef();return rX(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),m=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(m=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,m],function(){h.flush()}},[t]),rX(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&RM(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function UM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ij(t)}var Oot=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var l in i="",s)s[l]&&l&&(i&&(i+=" "),i+=l);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Dot(e,t,r){var n=[],a=ede(e,n,r);return n.length<2?r:a+t(n)}var Pot=function(e){var t,r=e.cache,n=e.serializedArr,a=nde(function(){for(var s="",i=0;i<n.length;i++){var l=RM(r,n[i],!1);Gv||l===void 0||(s+=l)}if(!Gv)return s});return Gv||a.length===0?null:_.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};oj(function(e,t){var r=[],n=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=ij(l,t.registered);return r.push(u),PM(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return Dot(t.registered,n,Oot(l))},theme:_.useContext(MM)},s=e.children(a);return _.createElement(_.Fragment,null,_.createElement(Pot,{cache:t,serializedArr:r}),s)});function Ki(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,l,c,u=[],d=!0,f=!1;try{if(l=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=l.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||$ue(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function VA(e,t){if(e==null)return{};var r,n,a=function(i,l){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],l.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ph(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ade(e){return ph(e).getComputedStyle(e)}const SN=Math.round;function sde(e){return ode(e)?(e.nodeName||"").toLowerCase():""}let kN;function ide(e){return e instanceof ph(e).HTMLElement}function M5(e){return e instanceof ph(e).Element}function ode(e){return e instanceof ph(e).Node}function nX(e){return typeof ShadowRoot>"u"?!1:e instanceof ph(e).ShadowRoot||e instanceof ShadowRoot}function lde(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=ade(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Rot(){return/^((?!chrome|android).)*safari/i.test(function(){if(kN)return kN;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(kN=e.brands.map(t=>t.brand+"/"+t.version).join(" "),kN):navigator.userAgent}())}function cde(e){return M5(e)?e:e.contextElement}const ude={x:1,y:1};function aX(e){const t=cde(e);if(!ide(t))return ude;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=ade(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,m=c.offsetHeight,g=SN(d)!==h||SN(f)!==m;return g&&(d=h,f=m),{width:d,height:f,fallback:g}}(t);let i=(s?SN(r.width):r.width)/n,l=(s?SN(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function sX(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),l=cde(e);let c=ude;t&&(c=aX(e));const u=l?ph(l):window,d=Rot()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=i.width/c.x,g=i.height/c.y;if(l){const x=ph(l),v=n;let y=x.frameElement;for(;y&&n&&v!==x;){const w=aX(y),N=y.getBoundingClientRect(),B=getComputedStyle(y);N.x+=(y.clientLeft+parseFloat(B.paddingLeft))*w.x,N.y+=(y.clientTop+parseFloat(B.paddingTop))*w.y,f*=w.x,h*=w.y,m*=w.x,g*=w.y,f+=N.x,h+=N.y,y=ph(y).frameElement}}return{width:m,height:g,top:h,right:f+m,bottom:h+g,left:f,x:f,y:h}}function Lot(e){if(sde(e)==="html")return e;const t=e.assignedSlot||e.parentNode||nX(e)&&e.host||function(r){return((ode(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return nX(t)?t.host:t}function dde(e){const t=Lot(e);return function(r){return["html","body","#document"].includes(sde(r))}(t)?t.ownerDocument.body:ide(t)&&lde(t)?t:dde(t)}function U5(e,t){var r;t===void 0&&(t=[]);const n=dde(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=ph(n);return a?t.concat(s,s.visualViewport||[],lde(n)?n:[]):t.concat(n,U5(n))}var aD=typeof document<"u"?_.useLayoutEffect:_.useEffect,Mot=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],MS=function(){};function Uot(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Qot(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(Uot(e,i)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var iX=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):ig(e)==="object"&&e!==null?[e]:[];var t},oX=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Cr({},VA(e,Mot))},ws=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function lj(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Ade(e){return lj(e)?window.pageYOffset:e.scrollTop}function US(e,t){lj(e)?window.scrollTo(0,t):e.scrollTop=t}function Hot(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function jN(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:MS,a=Ade(e),s=t-a,i=10,l=0;function c(){var u=Hot(l+=i,a,s,r);US(e,u),l<r?window.requestAnimationFrame(c):n(e)}c()}function lX(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?US(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&US(e,Math.max(t.offsetTop-a,0))}function cX(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var fde=!1,Vot={get passive(){return fde=!0}},BN=typeof window<"u"?window:{};BN.addEventListener&&BN.removeEventListener&&(BN.addEventListener("p",MS,Vot),BN.removeEventListener("p",MS,!1));var zot=fde;function $ot(e){return e!=null}function TN(e,t,r){return e?t:r}var Got=["children","innerProps"],Kot=["children","innerProps"];function qot(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,l=e.controlHeight,c=function(Z){var V=getComputedStyle(Z),W=V.position==="absolute",G=/(auto|scroll)/;if(V.position==="fixed")return document.documentElement;for(var K=Z;K=K.parentElement;)if(V=getComputedStyle(K),(!W||V.position!=="static")&&G.test(V.overflow+V.overflowY+V.overflowX))return K;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),m=h.bottom,g=h.height,x=h.top,v=r.offsetParent.getBoundingClientRect().top,y=i||lj(d=c)?window.innerHeight:d.clientHeight,w=Ade(c),N=parseInt(getComputedStyle(r).marginBottom,10),B=parseInt(getComputedStyle(r).marginTop,10),k=v-B,F=y-x,E=k+w,S=f-w-x,T=m-y+w+N,L=w+x-B,R=160;switch(a){case"auto":case"bottom":if(F>=g)return{placement:"bottom",maxHeight:t};if(S>=g&&!i)return s&&jN(c,T,R),{placement:"bottom",maxHeight:t};if(!i&&S>=n||i&&F>=n)return s&&jN(c,T,R),{placement:"bottom",maxHeight:i?F-N:S-N};if(a==="auto"||i){var j=t,P=i?k:E;return P>=n&&(j=Math.min(P-N-l,t)),{placement:"top",maxHeight:j}}if(a==="bottom")return s&&US(c,T),{placement:"bottom",maxHeight:t};break;case"top":if(k>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&jN(c,L,R),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&k>=n){var M=t;return(!i&&E>=n||i&&k>=n)&&(M=i?k-B:E-B),s&&jN(c,L,R),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var uX,hde=function(e){return e==="auto"?"bottom":e},mde=_.createContext(null),Wot=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,l=e.theme,c=(_.useContext(mde)||{}).setPortalPlacement,u=_.useRef(null),d=Ki(_.useState(n),2),f=d[0],h=d[1],m=Ki(_.useState(null),2),g=m[0],x=m[1],v=l.spacing.controlHeight;return aD(function(){var y=u.current;if(y){var w=s==="fixed",N=qot({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:v});h(N.maxHeight),x(N.placement),c==null||c(N.placement)}},[n,a,s,i,r,c,v]),t({ref:u,placerProps:Cr(Cr({},e),{},{placement:g||hde(a),maxHeight:f})})},Xot=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Ir("div",Lr({},ws(e,"menu",{menu:!0}),{ref:r},n),t)},pde=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return Cr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},Yot=pde,Jot=pde,Zot=["size"],elt=["innerProps","isRtl","size"],MI,UI,tlt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},gde=function(e){var t=e.size,r=VA(e,Zot);return Ir("svg",Lr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:tlt},r))},QI=function(e){return Ir(gde,Lr({size:20},e),Ir("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},dX=function(e){return Ir(gde,Lr({size:20},e),Ir("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},xde=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},rlt=xde,nlt=xde,alt=function(){var e=UM.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(uX||(MI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],UI||(UI=MI.slice(0)),uX=Object.freeze(Object.defineProperties(MI,{raw:{value:Object.freeze(UI)}})))),HI=function(e){var t=e.delay,r=e.offset;return Ir("span",{css:UM({animation:"".concat(alt," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},slt=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Ir("div",Lr({ref:a},ws(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},ilt=["data"],olt=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Ir("div",Lr({},ws(e,"group",{group:!0}),l),Ir(s,Lr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Ir("div",null,t))},llt=["innerRef","isDisabled","isHidden","inputClassName"],vde={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},clt={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},vde)},ult=function(e){return Cr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},vde)},AX=function(e){var t=e.children,r=e.innerProps;return Ir("div",r,t)},dlt=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Ir(c,{data:n,innerProps:Cr(Cr({},ws(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},Ir(u,{data:n,innerProps:Cr({},ws(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Ir(d,{data:n,innerProps:Cr(Cr({},ws(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:l}))},Alt={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},ws(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Ir(QI,null))},Control:slt,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},ws(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Ir(dX,null))},DownChevron:dX,CrossIcon:QI,Group:olt,GroupHeading:function(e){var t=oX(e);t.data;var r=VA(t,ilt);return Ir("div",Lr({},ws(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},ws(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Ir("span",Lr({},t,ws(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=oX(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,l=n.inputClassName,c=VA(n,llt);return Ir("div",Lr({},ws(e,"input",{"input-container":!0}),{"data-value":r||""}),Ir("input",Lr({className:t({input:!0},l),ref:a,style:ult(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=VA(e,elt);return Ir("div",Lr({},ws(Cr(Cr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Ir(HI,{delay:0,offset:r}),Ir(HI,{delay:160,offset:!0}),Ir(HI,{delay:320,offset:!r}))},Menu:Xot,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Ir("div",Lr({},ws(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,l=_.useRef(null),c=_.useRef(null),u=Ki(_.useState(hde(s)),2),d=u[0],f=u[1],h=_.useMemo(function(){return{setPortalPlacement:f}},[]),m=Ki(_.useState(null),2),g=m[0],x=m[1],v=_.useCallback(function(){if(n){var B=function(E){var S=E.getBoundingClientRect();return{bottom:S.bottom,height:S.height,left:S.left,right:S.right,top:S.top,width:S.width}}(n),k=i==="fixed"?0:window.pageYOffset,F=B[d]+k;F===(g==null?void 0:g.offset)&&B.left===(g==null?void 0:g.rect.left)&&B.width===(g==null?void 0:g.rect.width)||x({offset:F,rect:B})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);aD(function(){v()},[v]);var y=_.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&l.current&&(c.current=function(B,k,F,E){E===void 0&&(E={});const{ancestorScroll:S=!0,ancestorResize:T=!0,elementResize:L=!0,animationFrame:R=!1}=E,j=S&&!R,P=j||T?[...M5(B)?U5(B):B.contextElement?U5(B.contextElement):[],...U5(k)]:[];P.forEach(W=>{j&&W.addEventListener("scroll",F,{passive:!0}),T&&W.addEventListener("resize",F)});let M,Z=null;if(L){let W=!0;Z=new ResizeObserver(()=>{W||F(),W=!1}),M5(B)&&!R&&Z.observe(B),M5(B)||!B.contextElement||R||Z.observe(B.contextElement),Z.observe(k)}let V=R?sX(B):null;return R&&function W(){const G=sX(B);!V||G.x===V.x&&G.y===V.y&&G.width===V.width&&G.height===V.height||F(),V=G,M=requestAnimationFrame(W)}(),F(),()=>{var W;P.forEach(G=>{j&&G.removeEventListener("scroll",F),T&&G.removeEventListener("resize",F)}),(W=Z)==null||W.disconnect(),Z=null,R&&cancelAnimationFrame(M)}}(n,l.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);aD(function(){y()},[y]);var w=_.useCallback(function(B){l.current=B,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var N=Ir("div",Lr({ref:w},ws(Cr(Cr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Ir(mde.Provider,{value:h},t?$R.createPortal(N,t):N)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=VA(e,Kot);return Ir("div",Lr({},ws(Cr(Cr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=VA(e,Got);return Ir("div",Lr({},ws(Cr(Cr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:dlt,MultiValueContainer:AX,MultiValueLabel:AX,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({role:"button"},r),t||Ir(QI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Ir("div",Lr({},ws(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Ir("div",Lr({},ws(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Ir("div",Lr({},ws(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Ir("div",Lr({},ws(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Ir("div",Lr({},ws(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},fX=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function flt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||fX(n)&&fX(a)))return!1;var n,a;return!0}for(var hlt={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},hX=function(e){return Ir("span",Lr({css:hlt},e))},mlt={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=l?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},plt=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,m=l.isMulti,g=l.isOptionDisabled,x=l.isSearchable,v=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,N=l.tabSelectsValue,B=l.isLoading,k=l["aria-label"],F=l["aria-live"],E=_.useMemo(function(){return Cr(Cr({},mlt),d||{})},[d]),S=_.useMemo(function(){var M,Z="";if(t&&E.onChange){var V=t.option,W=t.options,G=t.removedValue,K=t.removedValues,ee=t.value,X=G||V||(M=ee,Array.isArray(M)?null:M),D=X?f(X):"",Q=W||K||void 0,z=Q?Q.map(f):[],J=Cr({isDisabled:X&&g(X,i),label:D,labels:z},t);Z=E.onChange(J)}return Z},[t,E,g,i,f]),T=_.useMemo(function(){var M="",Z=r||n,V=!!(r&&i&&i.includes(r));if(Z&&E.onFocus){var W={focused:Z,label:f(Z),isDisabled:g(Z,i),isSelected:V,options:a,context:Z===r?"menu":"value",selectValue:i,isAppleDevice:u};M=E.onFocus(W)}return M},[r,n,f,g,E,a,i,u]),L=_.useMemo(function(){var M="";if(v&&y.length&&!B&&E.onFilter){var Z=w({count:a.length});M=E.onFilter({inputValue:h,resultsMessage:Z})}return M},[a,h,v,E,y,w,B]),R=(t==null?void 0:t.action)==="initial-input-focus",j=_.useMemo(function(){var M="";if(E.guidance){var Z=n?"value":v?"menu":"input";M=E.guidance({"aria-label":k,context:Z,isDisabled:r&&g(r,i),isMulti:m,isSearchable:x,tabSelectsValue:N,isInitialFocus:R})}return M},[k,r,n,m,g,x,v,E,i,N,R]),P=Ir(_.Fragment,null,Ir("span",{id:"aria-selection"},S),Ir("span",{id:"aria-focused"},T),Ir("span",{id:"aria-results"},L),Ir("span",{id:"aria-guidance"},j));return Ir(_.Fragment,null,Ir(hX,{id:c},R&&P),Ir(hX,{"aria-live":F,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!R&&P))},VI=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],glt=new RegExp("["+VI.map(function(e){return e.letters}).join("")+"]","g"),bde={},zI=0;zI<VI.length;zI++)for(var $I=VI[zI],GI=0;GI<$I.letters.length;GI++)bde[$I.letters[GI]]=$I.base;var yde=function(e){return e.replace(glt,function(t){return bde[t]})},xlt=function(e,t){t===void 0&&(t=flt);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(yde),mX=function(e){return e.replace(/^\s+|\s+$/g,"")},vlt=function(e){return"".concat(e.label," ").concat(e.value)},blt=["innerRef"];function ylt(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var l=Object.entries(n).filter(function(c){var u=Ki(c,1)[0];return!s.includes(u)});return l.reduce(function(c,u){var d=Ki(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(VA(e,blt),"onExited","in","enter","exit","appear");return Ir("input",Lr({ref:t},r,{css:UM({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var pX=["boxSizing","height","overflow","paddingRight","position"],gX={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function xX(e){e.preventDefault()}function vX(e){e.stopPropagation()}function bX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function yX(){return"ontouchstart"in window||navigator.maxTouchPoints}var wX=!(typeof window>"u"||!window.document||!window.document.createElement),Ey=0,Gx={capture:!1,passive:!1},wlt=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Elt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Clt(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var l=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=_.useRef(!1),m=_.useRef(!1),g=_.useRef(0),x=_.useRef(null),v=_.useCallback(function(F,E){if(x.current!==null){var S=x.current,T=S.scrollTop,L=S.scrollHeight,R=S.clientHeight,j=x.current,P=E>0,M=L-R-T,Z=!1;M>E&&h.current&&(u&&u(F),h.current=!1),P&&m.current&&(f&&f(F),m.current=!1),P&&E>M?(c&&!h.current&&c(F),j.scrollTop=L,Z=!0,h.current=!0):!P&&-E>T&&(d&&!m.current&&d(F),j.scrollTop=0,Z=!0,m.current=!0),Z&&function(V){V.cancelable&&V.preventDefault(),V.stopPropagation()}(F)}},[c,u,d,f]),y=_.useCallback(function(F){v(F,F.deltaY)},[v]),w=_.useCallback(function(F){g.current=F.changedTouches[0].clientY},[]),N=_.useCallback(function(F){var E=g.current-F.changedTouches[0].clientY;v(F,E)},[v]),B=_.useCallback(function(F){if(F){var E=!!zot&&{passive:!1};F.addEventListener("wheel",y,E),F.addEventListener("touchstart",w,E),F.addEventListener("touchmove",N,E)}},[N,w,y]),k=_.useCallback(function(F){F&&(F.removeEventListener("wheel",y,!1),F.removeEventListener("touchstart",w,!1),F.removeEventListener("touchmove",N,!1))},[N,w,y]);return _.useEffect(function(){if(l){var F=x.current;return B(F),function(){k(F)}}},[l,B,k]),function(F){x.current=F}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var l=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=_.useRef({}),f=_.useRef(null),h=_.useCallback(function(g){if(wX){var x=document.body,v=x&&x.style;if(u&&pX.forEach(function(B){var k=v&&v[B];d.current[B]=k}),u&&Ey<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,N=window.innerWidth-w+y||0;Object.keys(gX).forEach(function(B){var k=gX[B];v&&(v[B]=k)}),v&&(v.paddingRight="".concat(N,"px"))}x&&yX()&&(x.addEventListener("touchmove",xX,Gx),g&&(g.addEventListener("touchstart",bX,Gx),g.addEventListener("touchmove",vX,Gx))),Ey+=1}},[u]),m=_.useCallback(function(g){if(wX){var x=document.body,v=x&&x.style;Ey=Math.max(Ey-1,0),u&&Ey<1&&pX.forEach(function(y){var w=d.current[y];v&&(v[y]=w)}),x&&yX()&&(x.removeEventListener("touchmove",xX,Gx),g&&(g.removeEventListener("touchstart",bX,Gx),g.removeEventListener("touchmove",vX,Gx)))}},[u]);return _.useEffect(function(){if(l){var g=f.current;return h(g),function(){m(g)}}},[l,h,m]),function(g){f.current=g}}({isEnabled:r});return Ir(_.Fragment,null,r&&Ir("div",{onClick:wlt,css:Elt}),t(function(i){a(i),s(i)}))}var Nlt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},_lt=function(e){var t=e.name,r=e.onFocus;return Ir("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Nlt,value:"",onChange:function(){}})};function sD(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function wde(){return sD(/^Mac/i)}function Slt(){return sD(/^iPhone/i)||sD(/^iPad/i)||wde()&&navigator.maxTouchPoints>1}var klt,jlt={clearIndicator:nlt,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:rlt,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return Cr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return Cr(Cr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},clt),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:Jot,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,l=a.colors;return Cr((yv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),yv(r,"position","absolute"),yv(r,"width","100%"),yv(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Cr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return Cr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:Yot,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,l=s.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?l.primary:n?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},KI={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Blt={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:cX(),captureMenuScroll:!cX(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:vlt,trim:!0,matchFrom:"any"},klt),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,l=r.matchFrom,c=i?mX(t):t,u=i?mX(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=xlt(c),u=yde(u)),l==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function EX(e,t,r,n){return{type:"option",data:t,isDisabled:Cde(e,t,r),isSelected:Nde(e,t,r),label:Ede(e,t),value:QS(e,t),index:n}}function IN(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,l){return EX(e,i,t,l)}).filter(function(i){return _X(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=EX(e,r,t,n);return _X(e,s)?s:void 0}).filter($ot)}function CX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,FM(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function NX(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,FM(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function _X(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,l=t.value;return(!Sde(e)||!s)&&_de(e,{label:i,value:l,data:a},n)}var qI=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Ede=function(e,t){return e.getOptionLabel(t)},QS=function(e,t){return e.getOptionValue(t)};function Cde(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function Nde(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=QS(e,t);return r.some(function(a){return QS(e,a)===n})}function _de(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Sde=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Tlt=1,kde=function(e){(function(i,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(l&&l.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),l&&WO(i,l)})(s,_.Component);var t,r,n,a=aot(s);function s(i){var l;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(l=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},l.blockOptionHover=!1,l.isComposing=!1,l.commonProps=void 0,l.initialTouchX=0,l.initialTouchY=0,l.openAfterFocus=!1,l.scrollToFocusedOptionOnUpdate=!1,l.userIsDragging=void 0,l.isAppleDevice=wde()||Slt(),l.controlRef=null,l.getControlRef=function(f){l.controlRef=f},l.focusedOptionRef=null,l.getFocusedOptionRef=function(f){l.focusedOptionRef=f},l.menuListRef=null,l.getMenuListRef=function(f){l.menuListRef=f},l.inputRef=null,l.getInputRef=function(f){l.inputRef=f},l.focus=l.focusInput,l.blur=l.blurInput,l.onChange=function(f,h){var m=l.props,g=m.onChange,x=m.name;h.name=x,l.ariaOnChange(f,h),g(f,h)},l.setValue=function(f,h,m){var g=l.props,x=g.closeMenuOnSelect,v=g.isMulti,y=g.inputValue;l.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(l.setState({inputIsHiddenAfterUpdate:!v}),l.onMenuClose()),l.setState({clearFocusValueOnUpdate:!0}),l.onChange(f,{action:h,option:m})},l.selectOption=function(f){var h=l.props,m=h.blurInputOnSelect,g=h.isMulti,x=h.name,v=l.state.selectValue,y=g&&l.isOptionSelected(f,v),w=l.isOptionDisabled(f,v);if(y){var N=l.getOptionValue(f);l.setValue(v.filter(function(B){return l.getOptionValue(B)!==N}),"deselect-option",f)}else{if(w)return void l.ariaOnChange(f,{action:"select-option",option:f,name:x});g?l.setValue([].concat(FM(v),[f]),"select-option",f):l.setValue(f,"select-option")}m&&l.blurInput()},l.removeValue=function(f){var h=l.props.isMulti,m=l.state.selectValue,g=l.getOptionValue(f),x=m.filter(function(y){return l.getOptionValue(y)!==g}),v=TN(h,x,x[0]||null);l.onChange(v,{action:"remove-value",removedValue:f}),l.focusInput()},l.clearValue=function(){var f=l.state.selectValue;l.onChange(TN(l.props.isMulti,[],null),{action:"clear",removedValues:f})},l.popValue=function(){var f=l.props.isMulti,h=l.state.selectValue,m=h[h.length-1],g=h.slice(0,h.length-1),x=TN(f,g,g[0]||null);l.onChange(x,{action:"pop-value",removedValue:m})},l.getFocusedOptionId=function(f){return qI(l.state.focusableOptionsWithIds,f)},l.getFocusableOptionsWithIds=function(){return NX(IN(l.props,l.state.selectValue),l.getElementId("option"))},l.getValue=function(){return l.state.selectValue},l.cx=function(){for(var f=arguments.length,h=new Array(f),m=0;m<f;m++)h[m]=arguments[m];return Qot.apply(void 0,[l.props.classNamePrefix].concat(h))},l.getOptionLabel=function(f){return Ede(l.props,f)},l.getOptionValue=function(f){return QS(l.props,f)},l.getStyles=function(f,h){var m=l.props.unstyled,g=jlt[f](h,m);g.boxSizing="border-box";var x=l.props.styles[f];return x?x(g,h):g},l.getClassNames=function(f,h){var m,g;return(m=(g=l.props.classNames)[f])===null||m===void 0?void 0:m.call(g,h)},l.getElementId=function(f){return"".concat(l.state.instancePrefix,"-").concat(f)},l.getComponents=function(){return f=l.props,Cr(Cr({},Alt),f.components);var f},l.buildCategorizedOptions=function(){return IN(l.props,l.state.selectValue)},l.getCategorizedOptions=function(){return l.props.menuIsOpen?l.buildCategorizedOptions():[]},l.buildFocusableOptions=function(){return CX(l.buildCategorizedOptions())},l.getFocusableOptions=function(){return l.props.menuIsOpen?l.buildFocusableOptions():[]},l.ariaOnChange=function(f,h){l.setState({ariaSelection:Cr({value:f},h)})},l.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),l.focusInput())},l.onMenuMouseMove=function(f){l.blockOptionHover=!1},l.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=l.props.openMenuOnClick;l.state.isFocused?l.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&l.onMenuClose():h&&l.openMenu("first"):(h&&(l.openAfterFocus=!0),l.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},l.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||l.props.isDisabled)){var h=l.props,m=h.isMulti,g=h.menuIsOpen;l.focusInput(),g?(l.setState({inputIsHiddenAfterUpdate:!m}),l.onMenuClose()):l.openMenu("first"),f.preventDefault()}},l.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(l.clearValue(),f.preventDefault(),l.openAfterFocus=!1,f.type==="touchend"?l.focusInput():setTimeout(function(){return l.focusInput()}))},l.onScroll=function(f){typeof l.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&lj(f.target)&&l.props.onMenuClose():typeof l.props.closeMenuOnScroll=="function"&&l.props.closeMenuOnScroll(f)&&l.props.onMenuClose()},l.onCompositionStart=function(){l.isComposing=!0},l.onCompositionEnd=function(){l.isComposing=!1},l.onTouchStart=function(f){var h=f.touches,m=h&&h.item(0);m&&(l.initialTouchX=m.clientX,l.initialTouchY=m.clientY,l.userIsDragging=!1)},l.onTouchMove=function(f){var h=f.touches,m=h&&h.item(0);if(m){var g=Math.abs(m.clientX-l.initialTouchX),x=Math.abs(m.clientY-l.initialTouchY);l.userIsDragging=g>5||x>5}},l.onTouchEnd=function(f){l.userIsDragging||(l.controlRef&&!l.controlRef.contains(f.target)&&l.menuListRef&&!l.menuListRef.contains(f.target)&&l.blurInput(),l.initialTouchX=0,l.initialTouchY=0)},l.onControlTouchEnd=function(f){l.userIsDragging||l.onControlMouseDown(f)},l.onClearIndicatorTouchEnd=function(f){l.userIsDragging||l.onClearIndicatorMouseDown(f)},l.onDropdownIndicatorTouchEnd=function(f){l.userIsDragging||l.onDropdownIndicatorMouseDown(f)},l.handleInputChange=function(f){var h=l.props.inputValue,m=f.currentTarget.value;l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange(m,{action:"input-change",prevInputValue:h}),l.props.menuIsOpen||l.onMenuOpen()},l.onInputFocus=function(f){l.props.onFocus&&l.props.onFocus(f),l.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(l.openAfterFocus||l.props.openMenuOnFocus)&&l.openMenu("first"),l.openAfterFocus=!1},l.onInputBlur=function(f){var h=l.props.inputValue;l.menuListRef&&l.menuListRef.contains(document.activeElement)?l.inputRef.focus():(l.props.onBlur&&l.props.onBlur(f),l.onInputChange("",{action:"input-blur",prevInputValue:h}),l.onMenuClose(),l.setState({focusedValue:null,isFocused:!1}))},l.onOptionHover=function(f){if(!l.blockOptionHover&&l.state.focusedOption!==f){var h=l.getFocusableOptions().indexOf(f);l.setState({focusedOption:f,focusedOptionId:h>-1?l.getFocusedOptionId(f):null})}},l.shouldHideSelectedOptions=function(){return Sde(l.props)},l.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),l.focus()},l.onKeyDown=function(f){var h=l.props,m=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,v=h.inputValue,y=h.isClearable,w=h.isDisabled,N=h.menuIsOpen,B=h.onKeyDown,k=h.tabSelectsValue,F=h.openMenuOnFocus,E=l.state,S=E.focusedOption,T=E.focusedValue,L=E.selectValue;if(!(w||typeof B=="function"&&(B(f),f.defaultPrevented))){switch(l.blockOptionHover=!0,f.key){case"ArrowLeft":if(!m||v)return;l.focusValue("previous");break;case"ArrowRight":if(!m||v)return;l.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(T)l.removeValue(T);else{if(!g)return;m?l.popValue():y&&l.clearValue()}break;case"Tab":if(l.isComposing||f.shiftKey||!N||!k||!S||F&&l.isOptionSelected(S,L))return;l.selectOption(S);break;case"Enter":if(f.keyCode===229)break;if(N){if(!S||l.isComposing)return;l.selectOption(S);break}return;case"Escape":N?(l.setState({inputIsHiddenAfterUpdate:!1}),l.onInputChange("",{action:"menu-close",prevInputValue:v}),l.onMenuClose()):y&&x&&l.clearValue();break;case" ":if(v)return;if(!N){l.openMenu("first");break}if(!S)return;l.selectOption(S);break;case"ArrowUp":N?l.focusOption("up"):l.openMenu("last");break;case"ArrowDown":N?l.focusOption("down"):l.openMenu("first");break;case"PageUp":if(!N)return;l.focusOption("pageup");break;case"PageDown":if(!N)return;l.focusOption("pagedown");break;case"Home":if(!N)return;l.focusOption("first");break;case"End":if(!N)return;l.focusOption("last");break;default:return}f.preventDefault()}},l.state.instancePrefix="react-select-"+(l.props.instanceId||++Tlt),l.state.selectValue=iX(i.value),i.menuIsOpen&&l.state.selectValue.length){var c=l.getFocusableOptionsWithIds(),u=l.buildFocusableOptions(),d=u.indexOf(l.state.selectValue[0]);l.state.focusableOptionsWithIds=c,l.state.focusedOption=u[d],l.state.focusedOptionId=qI(c,u[d])}return l}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&lX(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var l=this.props,c=l.isDisabled,u=l.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(lX(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,l){this.props.onInputChange(i,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var l=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var m=f.indexOf(u[0]);m>-1&&(h=m)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(i){var l=this.state,c=l.selectValue,u=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-l)<0&&(d=0):i==="pagedown"?(d=f+l)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(KI):Cr(Cr({},KI),this.props.theme):KI}},{key:"getCommonProps",value:function(){var i=this.clearValue,l=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,m=this.props,g=m.isMulti,x=m.isRtl,v=m.options;return{clearValue:i,cx:l,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:v,selectOption:f,selectProps:m,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,l=i.isClearable,c=i.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(i,l){return Cde(this.props,i,l)}},{key:"isOptionSelected",value:function(i,l){return Nde(this.props,i,l)}},{key:"filterOption",value:function(i,l){return _de(this.props,i,l)}},{key:"formatOptionLabel",value:function(i,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:l,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,l=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,m=i.menuIsOpen,g=i.required,x=this.getComponents().Input,v=this.state,y=v.inputIsHidden,w=v.ariaSelection,N=this.commonProps,B=u||this.getElementId("input"),k=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":m,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},m&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?_.createElement(x,Lr({},N,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:B,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},k)):_.createElement(ylt,Lr({id:B,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:MS,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:h,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,l=this.getComponents(),c=l.MultiValue,u=l.MultiValueContainer,d=l.MultiValueLabel,f=l.MultiValueRemove,h=l.SingleValue,m=l.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,N=x.inputValue,B=x.placeholder,k=this.state,F=k.selectValue,E=k.focusedValue,S=k.isFocused;if(!this.hasValue()||!v)return N?null:_.createElement(m,Lr({},g,{key:"placeholder",isDisabled:y,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),B);if(w)return F.map(function(L,R){var j=L===E,P="".concat(i.getOptionLabel(L),"-").concat(i.getOptionValue(L));return _.createElement(c,Lr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:j,isDisabled:y,key:P,index:R,removeProps:{onClick:function(){return i.removeValue(L)},onTouchEnd:function(){return i.removeValue(L)},onMouseDown:function(M){M.preventDefault()}},data:L}),i.formatOptionLabel(L,"value"))});if(N)return null;var T=F[0];return _.createElement(h,Lr({},g,{data:T,isDisabled:y}),this.formatOptionLabel(T,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(i,Lr({},l,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,l=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?_.createElement(i,Lr({},l,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),l=i.DropdownIndicator,c=i.IndicatorSeparator;if(!l||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return _.createElement(c,Lr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(i,Lr({},l,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,l=this.getComponents(),c=l.Group,u=l.GroupHeading,d=l.Menu,f=l.MenuList,h=l.MenuPortal,m=l.LoadingMessage,g=l.NoOptionsMessage,x=l.Option,v=this.commonProps,y=this.state.focusedOption,w=this.props,N=w.captureMenuScroll,B=w.inputValue,k=w.isLoading,F=w.loadingMessage,E=w.minMenuHeight,S=w.maxMenuHeight,T=w.menuIsOpen,L=w.menuPlacement,R=w.menuPosition,j=w.menuPortalTarget,P=w.menuShouldBlockScroll,M=w.menuShouldScrollIntoView,Z=w.noOptionsMessage,V=w.onMenuScrollToTop,W=w.onMenuScrollToBottom;if(!T)return null;var G,K=function(z,J){var te=z.type,se=z.data,ie=z.isDisabled,le=z.isSelected,ue=z.label,je=z.value,ae=y===se,Ne=ie?void 0:function(){return i.onOptionHover(se)},ke=ie?void 0:function(){return i.selectOption(se)},_e="".concat(i.getElementId("option"),"-").concat(J),he={id:_e,onClick:ke,onMouseMove:Ne,onMouseOver:Ne,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:le};return _.createElement(x,Lr({},v,{innerProps:he,data:se,isDisabled:ie,isSelected:le,key:_e,label:ue,type:te,value:je,isFocused:ae,innerRef:ae?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(z.data,"menu"))};if(this.hasOptions())G=this.getCategorizedOptions().map(function(z){if(z.type==="group"){var J=z.data,te=z.options,se=z.index,ie="".concat(i.getElementId("group"),"-").concat(se),le="".concat(ie,"-heading");return _.createElement(c,Lr({},v,{key:ie,data:J,options:te,Heading:u,headingProps:{id:le,data:z.data},label:i.formatGroupLabel(z.data)}),z.options.map(function(ue){return K(ue,"".concat(se,"-").concat(ue.index))}))}if(z.type==="option")return K(z,"".concat(z.index))});else if(k){var ee=F({inputValue:B});if(ee===null)return null;G=_.createElement(m,v,ee)}else{var X=Z({inputValue:B});if(X===null)return null;G=_.createElement(g,v,X)}var D={minMenuHeight:E,maxMenuHeight:S,menuPlacement:L,menuPosition:R,menuShouldScrollIntoView:M},Q=_.createElement(Wot,Lr({},v,D),function(z){var J=z.ref,te=z.placerProps,se=te.placement,ie=te.maxHeight;return _.createElement(d,Lr({},v,D,{innerRef:J,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:k,placement:se}),_.createElement(Clt,{captureEnabled:N,onTopArrive:V,onBottomArrive:W,lockEnabled:P},function(le){return _.createElement(f,Lr({},v,{innerRef:function(ue){i.getMenuListRef(ue),le(ue)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:i.getElementId("listbox")},isLoading:k,maxHeight:ie,focusedOption:y}),G)}))});return j||R==="fixed"?_.createElement(h,Lr({},v,{appendTo:j,controlElement:this.controlRef,menuPlacement:L,menuPosition:R}),Q):Q}},{key:"renderFormField",value:function(){var i=this,l=this.props,c=l.delimiter,u=l.isDisabled,d=l.isMulti,f=l.name,h=l.required,m=this.state.selectValue;if(h&&!this.hasValue()&&!u)return _.createElement(_lt,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=m.map(function(y){return i.getOptionValue(y)}).join(c);return _.createElement("input",{name:f,type:"hidden",value:g})}var x=m.length>0?m.map(function(y,w){return _.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:i.getOptionValue(y)})}):_.createElement("input",{name:f,type:"hidden",value:""});return _.createElement("div",null,x)}var v=m[0]?this.getOptionValue(m[0]):"";return _.createElement("input",{name:f,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,l=this.state,c=l.ariaSelection,u=l.focusedOption,d=l.focusedValue,f=l.isFocused,h=l.selectValue,m=this.getFocusableOptions();return _.createElement(plt,Lr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:m,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),l=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,m=f.id,g=f.isDisabled,x=f.menuIsOpen,v=this.state.isFocused,y=this.commonProps=this.getCommonProps();return _.createElement(u,Lr({},y,{className:h,innerProps:{id:m,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),_.createElement(l,Lr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),_.createElement(d,Lr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),_.createElement(c,Lr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,l){var c=l.prevProps,u=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,h=l.isFocused,m=l.prevWasFocused,g=l.instancePrefix,x=i.options,v=i.value,y=i.menuIsOpen,w=i.inputValue,N=i.isMulti,B=iX(v),k={};if(c&&(v!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var F=y?function(P,M){return CX(IN(P,M))}(i,B):[],E=y?NX(IN(i,B),"".concat(g,"-option")):[],S=u?function(P,M){var Z=P.focusedValue,V=P.selectValue.indexOf(Z);if(V>-1){if(M.indexOf(Z)>-1)return Z;if(V<M.length)return M[V]}return null}(l,B):null,T=function(P,M){var Z=P.focusedOption;return Z&&M.indexOf(Z)>-1?Z:M[0]}(l,F);k={selectValue:B,focusedOption:T,focusedOptionId:qI(E,T),focusableOptionsWithIds:E,focusedValue:S,clearFocusValueOnUpdate:!1}}var L=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},R=f,j=h&&m;return h&&!j&&(R={value:TN(N,B,B[0]||null),options:B,action:"initial-input-focus"},j=!m),(f==null?void 0:f.action)==="initial-input-focus"&&(R=null),Cr(Cr(Cr({},k),L),{},{prevProps:i,ariaSelection:R,prevWasFocused:j})}}],r&&QW(t.prototype,r),n&&QW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();kde.defaultProps=Blt;var Ilt=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Flt=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],QM=oa(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Olt=oa(function(e){var t=QM.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),jde=oa(function(e){var t=QM.default;e.exports=function(r){var n=Olt(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Dlt=oa(function(e){e.exports=function(t,r,n){return(r=jde(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Dlt(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,jde(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Plt=oa(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Plt(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var SX=oa(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Rlt=oa(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Llt=oa(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Mlt=oa(function(e){var t=QM.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Llt(r)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){var r=Rlt();return function(){var n,a=SX(t);if(r){var s=SX(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return Mlt(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var iD=oa(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),Ult=oa(function(e){e.exports=function(t){if(Array.isArray(t))return iD(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Qlt=oa(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Bde=oa(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return iD(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iD(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),Hlt=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t){return Ult(t)||Qlt(t)||Bde(t)||Hlt()},e.exports.__esModule=!0,e.exports.default=e.exports});var Vlt=oa(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),zlt=oa(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,l,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),$lt=oa(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){return Vlt(t)||zlt(t,r)||Bde(t,r)||$lt()},e.exports.__esModule=!0,e.exports.default=e.exports});var Glt=oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});oa(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=Glt(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),oa(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Klt=_.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,l=a.cacheOptions,c=l!==void 0&&l,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,m=a.filterOption,g=m===void 0?null:m,x=VA(a,Flt),v=x.inputValue,y=_.useRef(void 0),w=_.useRef(!1),N=Ki(_.useState(Array.isArray(i)?i:void 0),2),B=N[0],k=N[1],F=Ki(_.useState(v!==void 0?v:""),2),E=F[0],S=F[1],T=Ki(_.useState(i===!0),2),L=T[0],R=T[1],j=Ki(_.useState(void 0),2),P=j[0],M=j[1],Z=Ki(_.useState([]),2),V=Z[0],W=Z[1],G=Ki(_.useState(!1),2),K=G[0],ee=G[1],X=Ki(_.useState({}),2),D=X[0],Q=X[1],z=Ki(_.useState(void 0),2),J=z[0],te=z[1],se=Ki(_.useState(void 0),2),ie=se[0],le=se[1];c!==ie&&(Q({}),le(c)),i!==J&&(k(Array.isArray(i)?i:void 0),te(i)),_.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var ue=_.useCallback(function(Ne,ke){if(!u)return ke();var _e=u(Ne,ke);_e&&typeof _e.then=="function"&&_e.then(ke,function(){return ke()})},[u]);_.useEffect(function(){i===!0&&ue(E,function(Ne){w.current&&(k(Ne||[]),R(!!y.current))})},[]);var je=_.useCallback(function(Ne,ke){var _e=function(Be,Le,We){if(We){var xe=We(Be,Le);if(typeof xe=="string")return xe}return Be}(Ne,ke,h);if(!_e)return y.current=void 0,S(""),M(""),W([]),R(!1),void ee(!1);if(c&&D[_e])S(_e),M(_e),W(D[_e]),R(!1),ee(!1);else{var he=y.current={};S(_e),R(!0),ee(!P),ue(_e,function(Be){w&&he===y.current&&(y.current=void 0,R(!1),M(_e),W(Be||[]),ee(!1),Q(Be?Cr(Cr({},D),{},yv({},_e,Be)):D))})}},[c,ue,P,D,h]),ae=K?[]:E&&P?V:B||[];return Cr(Cr({},x),{},{options:ae,isLoading:L||f,onInputChange:je,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,l=a.defaultMenuIsOpen,c=l!==void 0&&l,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,m=a.onChange,g=a.onInputChange,x=a.onMenuClose,v=a.onMenuOpen,y=a.value,w=VA(a,Ilt),N=Ki(_.useState(f!==void 0?f:i),2),B=N[0],k=N[1],F=Ki(_.useState(h!==void 0?h:c),2),E=F[0],S=F[1],T=Ki(_.useState(y!==void 0?y:d),2),L=T[0],R=T[1],j=_.useCallback(function(K,ee){typeof m=="function"&&m(K,ee),R(K)},[m]),P=_.useCallback(function(K,ee){var X;typeof g=="function"&&(X=g(K,ee)),k(X!==void 0?X:K)},[g]),M=_.useCallback(function(){typeof v=="function"&&v(),S(!0)},[v]),Z=_.useCallback(function(){typeof x=="function"&&x(),S(!1)},[x]),V=f!==void 0?f:B,W=h!==void 0?h:E,G=y!==void 0?y:L;return Cr(Cr({},w),{},{inputValue:V,menuIsOpen:W,onChange:j,onInputChange:P,onMenuClose:Z,onMenuOpen:M,value:G})}(r);return _.createElement(kde,Lr({ref:t},n))}),qlt=Klt,Wlt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},wv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(wv||(wv={}));class Dp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=m,Dp.instance){if(!Wlt(this.options,Dp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Dp.instance.options)}`);return Dp.instance}Dp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?wv.FAILURE:this.done?wv.SUCCESS:this.loading?wv.LOADING:wv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Xlt=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),l=sg({input:t},i);return r&&(l.sessionToken=r),a&&(l.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var m=arguments[u],g=0,x=m.length;g<x;g++,h++)f[h]=m[g];return f}([void 0],a)))),s&&(l.location=new google.maps.LatLng(s)),l},Ylt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,l=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=_.useRef(null),m=_.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,v=_.useRef(!1),y=_.useRef(null),w=_.useRef(!1),N=_.useRef(c);N.current=c;var B=_.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,m.current=[],y.current=null,v.current=!1},[]);_.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var k=_.useCallback(function(){for(var E=[],S=0;S<arguments.length;S++)E[S]=arguments[S];m.current=E,clearTimeout(y.current),v.current&&(v.current=!1),y.current||!g||v.current||(N.current.apply(N,E),v.current=!0),y.current=setTimeout(function(){var T=!0;g&&v.current&&(T=!1),B(),!w.current&&x&&T&&N.current.apply(N,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var T=m.current;B(),w.current||N.current.apply(null,T)},f))},[f,u,B,g,x]),F=_.useCallback(function(){y.current&&(N.current.apply(null,m.current),B())},[B]);return[k,B,F]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=sg({},t);a.getPlacePredictions(Xlt(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return l},kX=_.forwardRef(function(e,t){var r,n,a,s,i,l,c,u,d=function(x){var v=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,N=_.useState(void 0),B=N[0],k=N[1],F=_.useState(void 0),E=F[0],S=F[1],T=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");k(new window.google.maps.places.AutocompleteService),S(new google.maps.places.AutocompleteSessionToken)};return _.useEffect(function(){v?tot(void 0,void 0,void 0,function(){var L;return rot(this,function(R){switch(R.label){case 0:if(!v)return[2];R.label=1;case 1:return R.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Dp(sg({apiKey:v},sg({libraries:["places"]},y))).load()];case 2:R.sent(),R.label=3;case 3:return T(),[3,5];case 4:return L=R.sent(),typeof w=="function"&&w(L),[3,5];case 5:return[2]}})}):T()},[]),{placesService:B,sessionToken:E,setSessionToken:S}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,m=d.setSessionToken,g=Ylt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(l=e.minLengthAutocomplete)!==null&&l!==void 0?l:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return _.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){m(new google.maps.places.AutocompleteSessionToken)}}},[h]),at.createElement(qlt,sg({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oD=function(e,t){return oD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},oD(e,t)};function Jd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var lD=function(){return lD=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},lD.apply(this,arguments)};function hl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function Vo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function FN(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var Oh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),cj=function(e,t){return Oh.fromClientRect(e,t.getBoundingClientRect())},Jlt=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Oh(0,0,n,a)},uj=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Gs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},jX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zlt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ON=0;ON<jX.length;ON++)Zlt[jX.charCodeAt(ON)]=ON;var BX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var DN=0;DN<BX.length;DN++)qy[BX.charCodeAt(DN)]=DN;var ect=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=qy[e.charCodeAt(n)],i=qy[e.charCodeAt(n+1)],l=qy[e.charCodeAt(n+2)],c=qy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},tct=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},rct=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},lg=5,HM=11,WI=2,nct=HM-lg,Tde=65536>>lg,act=1<<lg,XI=act-1,sct=1024>>lg,ict=Tde+sct,oct=ict,lct=32,cct=oct+lct,uct=65536>>HM,dct=1<<nct,Act=dct-1,TX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},fct=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},hct=function(e,t){var r=ect(e),n=Array.isArray(r)?rct(r):new Uint32Array(r),a=Array.isArray(r)?tct(r):new Uint16Array(r),s=24,i=TX(a,s/2,n[4]/2),l=n[5]===2?TX(a,(s+n[4])/2):fct(n,Math.ceil((s+n[4])/4));return new mct(n[0],n[1],n[2],n[3],i,l)},mct=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>lg],r=(r<<WI)+(t&XI),this.data[r];if(t<=65535)return r=this.index[Tde+(t-55296>>lg)],r=(r<<WI)+(t&XI),this.data[r];if(t<this.highStart)return r=cct-uct+(t>>HM),r=this.index[r],r+=t>>lg&Act,r=this.index[r],r=(r<<WI)+(t&XI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),IX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pct=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var PN=0;PN<IX.length;PN++)pct[IX.charCodeAt(PN)]=PN;var gct="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",FX=50,xct=1,Ide=2,Fde=3,vct=4,bct=5,OX=7,Ode=8,DX=9,Z0=10,cD=11,PX=12,uD=13,yct=14,Wy=15,dD=16,RN=17,Cy=18,wct=19,RX=20,AD=21,Ny=22,YI=23,Kx=24,Ic=25,Xy=26,Yy=27,qx=28,Ect=29,Pp=30,Cct=31,LN=32,MN=33,fD=34,hD=35,mD=36,k2=37,pD=38,Q5=39,H5=40,JI=41,Dde=42,Nct=43,_ct=[9001,65288],Pde="!",Sn="×",UN="÷",gD=hct(gct),Gf=[Pp,mD],xD=[xct,Ide,Fde,bct],Rde=[Z0,Ode],LX=[Yy,Xy],Sct=xD.concat(Rde),MX=[pD,Q5,H5,fD,hD],kct=[Wy,uD],jct=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var l=gD.get(s);if(l>FX?(a.push(!0),l-=FX):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(dD);if(l===vct||l===cD){if(i===0)return n.push(i),r.push(Pp);var c=r[i-1];return Sct.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Pp))}if(n.push(i),l===Cct)return r.push(t==="strict"?AD:k2);if(l===Dde||l===Ect)return r.push(Pp);if(l===Nct)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(k2):r.push(Pp);r.push(l)}),[n,r,a]},ZI=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==Z0)break}if(a===Z0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==Z0)break}if(l!==Z0)break}return!1},UX=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===Z0)r--;else return n}return 0},Bct=function(e,t,r,n,a){if(r[n]===0)return Sn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Sn;var i=s-1,l=s+1,c=t[s],u=i>=0?t[i]:0,d=t[l];if(c===Ide&&d===Fde)return Sn;if(xD.indexOf(c)!==-1)return Pde;if(xD.indexOf(d)!==-1||Rde.indexOf(d)!==-1)return Sn;if(UX(s,t)===Ode)return UN;if(gD.get(e[s])===cD||(c===LN||c===MN)&&gD.get(e[l])===cD||c===OX||d===OX||c===DX||[Z0,uD,Wy].indexOf(c)===-1&&d===DX||[RN,Cy,wct,Kx,qx].indexOf(d)!==-1||UX(s,t)===Ny||ZI(YI,Ny,s,t)||ZI([RN,Cy],AD,s,t)||ZI(PX,PX,s,t))return Sn;if(c===Z0)return UN;if(c===YI||d===YI)return Sn;if(d===dD||c===dD)return UN;if([uD,Wy,AD].indexOf(d)!==-1||c===yct||u===mD&&kct.indexOf(c)!==-1||c===qx&&d===mD||d===RX||Gf.indexOf(d)!==-1&&c===Ic||Gf.indexOf(c)!==-1&&d===Ic||c===Yy&&[k2,LN,MN].indexOf(d)!==-1||[k2,LN,MN].indexOf(c)!==-1&&d===Xy||Gf.indexOf(c)!==-1&&LX.indexOf(d)!==-1||LX.indexOf(c)!==-1&&Gf.indexOf(d)!==-1||[Yy,Xy].indexOf(c)!==-1&&(d===Ic||[Ny,Wy].indexOf(d)!==-1&&t[l+1]===Ic)||[Ny,Wy].indexOf(c)!==-1&&d===Ic||c===Ic&&[Ic,qx,Kx].indexOf(d)!==-1)return Sn;if([Ic,qx,Kx,RN,Cy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Ic)return Sn;if([qx,Kx].indexOf(h)!==-1)f--;else break}if([Yy,Xy].indexOf(d)!==-1)for(var f=[RN,Cy].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===Ic)return Sn;if([qx,Kx].indexOf(h)!==-1)f--;else break}if(pD===c&&[pD,Q5,fD,hD].indexOf(d)!==-1||[Q5,fD].indexOf(c)!==-1&&[Q5,H5].indexOf(d)!==-1||[H5,hD].indexOf(c)!==-1&&d===H5||MX.indexOf(c)!==-1&&[RX,Xy].indexOf(d)!==-1||MX.indexOf(d)!==-1&&c===Yy||Gf.indexOf(c)!==-1&&Gf.indexOf(d)!==-1||c===Kx&&Gf.indexOf(d)!==-1||Gf.concat(Ic).indexOf(c)!==-1&&d===Ny&&_ct.indexOf(e[l])===-1||Gf.concat(Ic).indexOf(d)!==-1&&c===Cy)return Sn;if(c===JI&&d===JI){for(var m=r[s],g=1;m>0&&(m--,t[m]===JI);)g++;if(g%2!==0)return Sn}return c===LN&&d===MN?Sn:UN},Tct=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=jct(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[Ic,Pp,Dde].indexOf(l)!==-1?k2:l}));var i=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},Ict=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===Pde,this.start=n,this.end=a}return e.prototype.slice=function(){return Gs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Fct=function(e,t){var r=uj(e),n=Tct(r,t),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Sn;u<l&&(d=Bct(r,s,a,++u,i))===Sn;);if(d!==Sn||u===l){var f=new Ict(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Oct=1,Dct=2,NE=4,QX=8,HS=10,HX=47,Sw=92,Pct=9,Rct=32,QN=34,_y=61,Lct=35,Mct=36,Uct=37,HN=39,VN=40,Sy=41,Qct=95,Yl=45,Hct=33,Vct=60,zct=62,$ct=64,Gct=91,Kct=93,qct=61,Wct=123,zN=63,Xct=125,VX=124,Yct=126,Jct=128,zX=65533,e6=42,$p=43,Zct=44,eut=58,tut=59,j2=46,rut=0,nut=8,aut=11,sut=14,iut=31,out=127,TA=-1,Lde=48,Mde=97,Ude=101,lut=102,cut=117,uut=122,Qde=65,Hde=69,Vde=70,dut=85,Aut=90,qo=function(e){return e>=Lde&&e<=57},fut=function(e){return e>=55296&&e<=57343},Wx=function(e){return qo(e)||e>=Qde&&e<=Vde||e>=Mde&&e<=lut},hut=function(e){return e>=Mde&&e<=uut},mut=function(e){return e>=Qde&&e<=Aut},put=function(e){return hut(e)||mut(e)},gut=function(e){return e>=Jct},$N=function(e){return e===HS||e===Pct||e===Rct},VS=function(e){return put(e)||gut(e)||e===Qct},$X=function(e){return VS(e)||qo(e)||e===Yl},xut=function(e){return e>=rut&&e<=nut||e===aut||e>=sut&&e<=iut||e===out},Q0=function(e,t){return e!==Sw?!1:t!==HS},GN=function(e,t,r){return e===Yl?VS(t)||Q0(t,r):VS(e)?!0:!!(e===Sw&&Q0(e,t))},t6=function(e,t,r){return e===$p||e===Yl?qo(t)?!0:t===j2&&qo(r):qo(e===j2?t:e)},vut=function(e){var t=0,r=1;(e[t]===$p||e[t]===Yl)&&(e[t]===Yl&&(r=-1),t++);for(var n=[];qo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Gs.apply(void 0,n),10):0;e[t]===j2&&t++;for(var s=[];qo(e[t]);)s.push(e[t++]);var i=s.length,l=i?parseInt(Gs.apply(void 0,s),10):0;(e[t]===Hde||e[t]===Ude)&&t++;var c=1;(e[t]===$p||e[t]===Yl)&&(e[t]===Yl&&(c=-1),t++);for(var u=[];qo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Gs.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},but={type:2},yut={type:3},wut={type:4},Eut={type:13},Cut={type:8},Nut={type:21},_ut={type:9},Sut={type:10},kut={type:11},jut={type:12},But={type:14},KN={type:23},Tut={type:1},Iut={type:25},Fut={type:24},Out={type:26},Dut={type:27},Put={type:28},Rut={type:29},Lut={type:31},vD={type:32},zde=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(uj(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==vD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case QN:return this.consumeStringToken(QN);case Lct:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if($X(r)||Q0(n,a)){var s=GN(r,n,a)?Dct:Oct,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Mct:if(this.peekCodePoint(0)===_y)return this.consumeCodePoint(),Eut;break;case HN:return this.consumeStringToken(HN);case VN:return but;case Sy:return yut;case e6:if(this.peekCodePoint(0)===_y)return this.consumeCodePoint(),But;break;case $p:if(t6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Zct:return wut;case Yl:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(t6(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(GN(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Yl&&u===zct)return this.consumeCodePoint(),this.consumeCodePoint(),Fut;break;case j2:if(t6(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case HX:if(this.peekCodePoint(0)===e6)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===e6&&(d=this.consumeCodePoint(),d===HX))return this.consumeToken();if(d===TA)return this.consumeToken()}break;case eut:return Out;case tut:return Dut;case Vct:if(this.peekCodePoint(0)===Hct&&this.peekCodePoint(1)===Yl&&this.peekCodePoint(2)===Yl)return this.consumeCodePoint(),this.consumeCodePoint(),Iut;break;case $ct:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),m=this.peekCodePoint(2);if(GN(f,h,m)){var i=this.consumeName();return{type:7,value:i}}break;case Gct:return Put;case Sw:if(Q0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Kct:return Rut;case qct:if(this.peekCodePoint(0)===_y)return this.consumeCodePoint(),Cut;break;case Wct:return kut;case Xct:return jut;case cut:case dut:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===$p&&(Wx(x)||x===zN)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case VX:if(this.peekCodePoint(0)===_y)return this.consumeCodePoint(),_ut;if(this.peekCodePoint(0)===VX)return this.consumeCodePoint(),Nut;break;case Yct:if(this.peekCodePoint(0)===_y)return this.consumeCodePoint(),Sut;break;case TA:return vD}return $N(t)?(this.consumeWhiteSpace(),Lut):qo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):VS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Gs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Wx(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===zN&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Gs.apply(void 0,t.map(function(c){return c===zN?Lde:c})),16),s=parseInt(Gs.apply(void 0,t.map(function(c){return c===zN?Vde:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Gs.apply(void 0,t),16);if(this.peekCodePoint(0)===Yl&&Wx(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Wx(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Gs.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===VN?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===VN?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===TA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===HN||r===QN){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===TA||this.peekCodePoint(0)===Sy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),KN)}for(;;){var a=this.consumeCodePoint();if(a===TA||a===Sy)return{type:22,value:Gs.apply(void 0,t)};if($N(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===TA||this.peekCodePoint(0)===Sy?(this.consumeCodePoint(),{type:22,value:Gs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),KN);if(a===QN||a===HN||a===VN||xut(a))return this.consumeBadUrlRemnants(),KN;if(a===Sw)if(Q0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),KN;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;$N(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Sy||t===TA)return;Q0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Gs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===TA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===HS)return this._value.splice(0,n),Tut;if(a===Sw){var s=this._value[n+1];s!==TA&&s!==void 0&&(s===HS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Q0(a,s)&&(r+=this.consumeStringSlice(n),r+=Gs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=NE,n=this.peekCodePoint(0);for((n===$p||n===Yl)&&t.push(this.consumeCodePoint());qo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===j2&&qo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=QX;qo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Hde||n===Ude)&&((a===$p||a===Yl)&&qo(s)||qo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=QX;qo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[vut(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(GN(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Uct?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Wx(t)){for(var r=Gs(t);Wx(this.peekCodePoint(0))&&r.length<6;)r+=Gs(this.consumeCodePoint());$N(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||fut(n)||n>1114111?zX:n}return t===TA?zX:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if($X(r))t+=Gs(r);else if(Q0(r,this.peekCodePoint(0)))t+=Gs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),$de=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new zde;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Uut(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?vD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),_E=function(e){return e.type===15},mb=function(e){return e.type===17},wa=function(e){return e.type===20},Mut=function(e){return e.type===0},bD=function(e,t){return wa(e)&&e.value===t},Gde=function(e){return e.type!==31},F1=function(e){return e.type!==31&&e.type!==4},Af=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Uut=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Rm=function(e){return e.type===17||e.type===15},hi=function(e){return e.type===16||Rm(e)},Kde=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Co={type:17,number:0,flags:NE},VM={type:16,number:50,flags:NE},em={type:16,number:100,flags:NE},Jy=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(_E(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},qde="deg",Wde="grad",Xde="rad",Yde="turn",dj={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case qde:return Math.PI*t.number/180;case Wde:return Math.PI/200*t.number;case Xde:return t.number;case Yde:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Jde=function(e){return e.type===15&&(e.unit===qde||e.unit===Wde||e.unit===Xde||e.unit===Yde)},Zde=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Co,Co];case"to top":case"bottom":return Hu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Co,em];case"to right":case"left":return Hu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[em,em];case"to bottom":case"top":return Hu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[em,Co];case"to left":case"right":return Hu(270)}return 0},Hu=function(e){return Math.PI*e/180},hm={name:"color",parse:function(e,t){if(t.type===18){var r=Qut[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return tm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return tm(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return tm(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return tm(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var l=gh[t.value.toUpperCase()];if(typeof l<"u")return l}return gh.TRANSPARENT}},mm=function(e){return(255&e)===0},Gi=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},tm=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},GX=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},KX=function(e,t){var r=t.filter(F1);if(r.length===3){var n=r.map(GX),a=n[0],s=n[1],i=n[2];return tm(a,s,i,1)}if(r.length===4){var l=r.map(GX),a=l[0],s=l[1],i=l[2],c=l[3];return tm(a,s,i,c)}return 0};function r6(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var qX=function(e,t){var r=t.filter(F1),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?Hu(n.number):dj.parse(e,n))/(Math.PI*2),c=hi(a)?a.number/100:0,u=hi(s)?s.number/100:0,d=typeof i<"u"&&hi(i)?Da(i,1):1;if(c===0)return tm(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,m=r6(h,f,l+1/3),g=r6(h,f,l),x=r6(h,f,l-1/3);return tm(m*255,g*255,x*255,d)},Qut={hsl:qX,hsla:qX,rgb:KX,rgba:KX},kw=function(e,t){return hm.parse(e,$de.create(t).parseComponentValue())},gh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Hut={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Vut={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Aj=function(e,t){var r=hm.parse(e,t[0]),n=t[1];return n&&hi(n)?{color:r,stop:n}:{color:r,stop:null}},WX=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Co),n.stop===null&&(n.stop=em);for(var a=[],s=0,i=0;i<e.length;i++){var l=e[i].stop;if(l!==null){var c=Da(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],m=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=m*g;u=null}}return e.map(function(x,v){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[v]/t),0)}})},zut=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},$ut=function(e,t,r){var n=typeof e=="number"?e:zut(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},Nd=function(e,t){return Math.sqrt(e*e+t*t)},XX=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=Nd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Gut=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(Nd(t,r),Nd(t,r-a),Nd(t-n,r),Nd(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=XX(n,a,t,r,!0),u=c[0],d=c[1];s=Nd(u-t,(d-r)/l),i=l*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(Nd(t,r),Nd(t,r-a),Nd(t-n,r),Nd(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=XX(n,a,t,r,!1),u=f[0],d=f[1];s=Nd(u-t,(d-r)/l),i=l*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},Kut=function(e,t){var r=Hu(180),n=[];return Af(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=Zde(a);return}else if(Jde(i)){r=dj.parse(e,i);return}}var l=Aj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},qN=function(e,t){var r=Hu(180),n=[];return Af(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=Zde(a);return}else if(Jde(i)){r=(dj.parse(e,i)+Hu(270))%Hu(360);return}}var l=Aj(e,a);n.push(l)}),{angle:r,stops:n,type:1}},qut=function(e,t){var r=Hu(180),n=[],a=1,s=0,i=3,l=[];return Af(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=hm.parse(e,d.values[0]);n.push({stop:Co,color:f})}else if(d.name==="to"){var f=hm.parse(e,d.values[0]);n.push({stop:em,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(F1);if(h.length===2){var f=hm.parse(e,h[1]),m=h[0];mb(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),a===1?{angle:(r+Hu(180))%Hu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},eAe="closest-side",tAe="farthest-side",rAe="closest-corner",nAe="farthest-corner",aAe="circle",sAe="ellipse",iAe="cover",oAe="contain",Wut=function(e,t){var r=0,n=3,a=[],s=[];return Af(t).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(VM),f;case"top":case"left":return s.push(Co),f;case"right":case"bottom":return s.push(em),f}else(hi(h)||Rm(h))&&s.push(h);else if(wa(h))switch(h.value){case aAe:return r=0,!1;case sAe:return r=1,!1;case"at":return u=!0,!1;case eAe:return n=0,!1;case iAe:case tAe:return n=1,!1;case oAe:case rAe:return n=2,!1;case nAe:return n=3,!1}else if(Rm(h)||hi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=Aj(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},WN=function(e,t){var r=0,n=3,a=[],s=[];return Af(t).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(VM),!1;case"top":case"left":return s.push(Co),!1;case"right":case"bottom":return s.push(em),!1}else if(hi(f)||Rm(f))return s.push(f),!1;return d},c):l===1&&(c=i.reduce(function(d,f){if(wa(f))switch(f.value){case aAe:return r=0,!1;case sAe:return r=1,!1;case oAe:case eAe:return n=0,!1;case tAe:return n=1,!1;case rAe:return n=2,!1;case iAe:case nAe:return n=3,!1}else if(Rm(f)||hi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Aj(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Xut=function(e){return e.type===1},Yut=function(e){return e.type===2},zM={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=lAe[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Jut(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!lAe[e.name])}var lAe={"linear-gradient":Kut,"-moz-linear-gradient":qN,"-ms-linear-gradient":qN,"-o-linear-gradient":qN,"-webkit-linear-gradient":qN,"radial-gradient":Wut,"-moz-radial-gradient":WN,"-ms-radial-gradient":WN,"-o-radial-gradient":WN,"-webkit-radial-gradient":WN,"-webkit-gradient":qut},Zut={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return F1(n)&&Jut(n)}).map(function(n){return zM.parse(e,n)})}},edt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tdt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Af(t).map(function(r){return r.filter(hi)}).map(Kde)}},rdt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Af(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(ndt)}},ndt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Kv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Kv||(Kv={}));var adt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Af(t).map(function(r){return r.filter(sdt)})}},sdt=function(e){return wa(e)||hi(e)},fj=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},idt=fj("top"),odt=fj("right"),ldt=fj("bottom"),cdt=fj("left"),hj=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Kde(r.filter(hi))}}},udt=hj("top-left"),ddt=hj("top-right"),Adt=hj("bottom-right"),fdt=hj("bottom-left"),mj=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},hdt=mj("top"),mdt=mj("right"),pdt=mj("bottom"),gdt=mj("left"),pj=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return _E(r)?r.number:0}}},xdt=pj("top"),vdt=pj("right"),bdt=pj("bottom"),ydt=pj("left"),wdt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Edt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Cdt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|Ndt(n.value)},0)}},Ndt=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},_dt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Sdt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},zS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(zS||(zS={}));var kdt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return zS.STRICT;case"normal":default:return zS.NORMAL}}},jdt={name:"line-height",initialValue:"normal",prefix:!1,type:4},YX=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:hi(e)?Da(e,t):t},Bdt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:zM.parse(e,t)}},Tdt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},yD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},gj=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Idt=gj("top"),Fdt=gj("right"),Odt=gj("bottom"),Ddt=gj("left"),Pdt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Rdt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},xj=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ldt=xj("top"),Mdt=xj("right"),Udt=xj("bottom"),Qdt=xj("left"),Hdt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Vdt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},zdt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&bD(t[0],"none")?[]:Af(t).map(function(r){for(var n={color:gh.TRANSPARENT,offsetX:Co,offsetY:Co,blur:Co},a=0,s=0;s<r.length;s++){var i=r[s];Rm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=hm.parse(e,i)}return n})}},$dt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gdt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Wdt[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Kdt=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},qdt=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,l]:null},Wdt={matrix:Kdt,matrix3d:qdt},JX={type:16,number:50,flags:NE},Xdt=[JX,JX],Ydt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(hi);return r.length!==2?Xdt:[r[0],r[1]]}},Jdt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},jw;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(jw||(jw={}));var Zdt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return jw.BREAK_ALL;case"keep-all":return jw.KEEP_ALL;case"normal":default:return jw.NORMAL}}},eAt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(mb(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},cAe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},tAt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return mb(t)?t.number:1}},rAt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nAt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},aAt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},sAt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},iAt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(mb(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},oAt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},lAt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ki=function(e,t){return(e&t)!==0},cAt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},uAt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Gde),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&mb(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},dAt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Gde),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(wa(s)&&s.value!=="none"){var l=i&&mb(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},AAt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(_E).map(function(r){return cAe.parse(e,r)})}},fAt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Mut);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},ZX=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},hAt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&bD(t[0],"none")?[]:Af(t).map(function(r){for(var n={color:255,offsetX:Co,offsetY:Co,blur:Co,spread:Co,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];bD(i,"inset")?n.inset=!0:Rm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=hm.parse(e,i)}return n})}},mAt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},pAt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},gAt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _E(t)?t.number:0}},xAt=function(){function e(t,r){var n,a;this.animationDuration=lr(t,AAt,r.animationDuration),this.backgroundClip=lr(t,Hut,r.backgroundClip),this.backgroundColor=lr(t,Vut,r.backgroundColor),this.backgroundImage=lr(t,Zut,r.backgroundImage),this.backgroundOrigin=lr(t,edt,r.backgroundOrigin),this.backgroundPosition=lr(t,tdt,r.backgroundPosition),this.backgroundRepeat=lr(t,rdt,r.backgroundRepeat),this.backgroundSize=lr(t,adt,r.backgroundSize),this.borderTopColor=lr(t,idt,r.borderTopColor),this.borderRightColor=lr(t,odt,r.borderRightColor),this.borderBottomColor=lr(t,ldt,r.borderBottomColor),this.borderLeftColor=lr(t,cdt,r.borderLeftColor),this.borderTopLeftRadius=lr(t,udt,r.borderTopLeftRadius),this.borderTopRightRadius=lr(t,ddt,r.borderTopRightRadius),this.borderBottomRightRadius=lr(t,Adt,r.borderBottomRightRadius),this.borderBottomLeftRadius=lr(t,fdt,r.borderBottomLeftRadius),this.borderTopStyle=lr(t,hdt,r.borderTopStyle),this.borderRightStyle=lr(t,mdt,r.borderRightStyle),this.borderBottomStyle=lr(t,pdt,r.borderBottomStyle),this.borderLeftStyle=lr(t,gdt,r.borderLeftStyle),this.borderTopWidth=lr(t,xdt,r.borderTopWidth),this.borderRightWidth=lr(t,vdt,r.borderRightWidth),this.borderBottomWidth=lr(t,bdt,r.borderBottomWidth),this.borderLeftWidth=lr(t,ydt,r.borderLeftWidth),this.boxShadow=lr(t,hAt,r.boxShadow),this.color=lr(t,wdt,r.color),this.direction=lr(t,Edt,r.direction),this.display=lr(t,Cdt,r.display),this.float=lr(t,_dt,r.cssFloat),this.fontFamily=lr(t,aAt,r.fontFamily),this.fontSize=lr(t,sAt,r.fontSize),this.fontStyle=lr(t,lAt,r.fontStyle),this.fontVariant=lr(t,oAt,r.fontVariant),this.fontWeight=lr(t,iAt,r.fontWeight),this.letterSpacing=lr(t,Sdt,r.letterSpacing),this.lineBreak=lr(t,kdt,r.lineBreak),this.lineHeight=lr(t,jdt,r.lineHeight),this.listStyleImage=lr(t,Bdt,r.listStyleImage),this.listStylePosition=lr(t,Tdt,r.listStylePosition),this.listStyleType=lr(t,yD,r.listStyleType),this.marginTop=lr(t,Idt,r.marginTop),this.marginRight=lr(t,Fdt,r.marginRight),this.marginBottom=lr(t,Odt,r.marginBottom),this.marginLeft=lr(t,Ddt,r.marginLeft),this.opacity=lr(t,tAt,r.opacity);var s=lr(t,Pdt,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=lr(t,Rdt,r.overflowWrap),this.paddingTop=lr(t,Ldt,r.paddingTop),this.paddingRight=lr(t,Mdt,r.paddingRight),this.paddingBottom=lr(t,Udt,r.paddingBottom),this.paddingLeft=lr(t,Qdt,r.paddingLeft),this.paintOrder=lr(t,mAt,r.paintOrder),this.position=lr(t,Vdt,r.position),this.textAlign=lr(t,Hdt,r.textAlign),this.textDecorationColor=lr(t,rAt,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=lr(t,nAt,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=lr(t,zdt,r.textShadow),this.textTransform=lr(t,$dt,r.textTransform),this.transform=lr(t,Gdt,r.transform),this.transformOrigin=lr(t,Ydt,r.transformOrigin),this.visibility=lr(t,Jdt,r.visibility),this.webkitTextStrokeColor=lr(t,pAt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(t,gAt,r.webkitTextStrokeWidth),this.wordBreak=lr(t,Zdt,r.wordBreak),this.zIndex=lr(t,eAt,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return mm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ki(this.display,4)||ki(this.display,33554432)||ki(this.display,268435456)||ki(this.display,536870912)||ki(this.display,67108864)||ki(this.display,134217728)},e}(),vAt=function(){function e(t,r){this.content=lr(t,cAt,r.content),this.quotes=lr(t,fAt,r.quotes)}return e}(),eY=function(){function e(t,r){this.counterIncrement=lr(t,uAt,r.counterIncrement),this.counterReset=lr(t,dAt,r.counterReset)}return e}(),lr=function(e,t,r){var n=new zde,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new $de(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,wa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return dj.parse(e,s.parseComponentValue());case"color":return hm.parse(e,s.parseComponentValue());case"image":return zM.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Rm(l)?l:Co;case"length-percentage":var c=s.parseComponentValue();return hi(c)?c:Co;case"time":return cAe.parse(e,s.parseComponentValue())}break}},bAt="data-html2canvas-debug",yAt=function(e){var t=e.getAttribute(bAt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wD=function(e,t){var r=yAt(e);return r===1||t===r},ff=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,wD(r,3))debugger;this.styles=new xAt(t,window.getComputedStyle(r,null)),ND(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=cj(this.context,r),wD(r,4)&&(this.flags|=16)}return e}(),wAt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",tY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var XN=0;XN<tY.length;XN++)Zy[tY.charCodeAt(XN)]=XN;var EAt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Zy[e.charCodeAt(n)],i=Zy[e.charCodeAt(n+1)],l=Zy[e.charCodeAt(n+2)],c=Zy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},CAt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},NAt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},cg=5,$M=11,n6=2,_At=$M-cg,uAe=65536>>cg,SAt=1<<cg,a6=SAt-1,kAt=1024>>cg,jAt=uAe+kAt,BAt=jAt,TAt=32,IAt=BAt+TAt,FAt=65536>>$M,OAt=1<<_At,DAt=OAt-1,rY=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},PAt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},RAt=function(e,t){var r=EAt(e),n=Array.isArray(r)?NAt(r):new Uint32Array(r),a=Array.isArray(r)?CAt(r):new Uint16Array(r),s=24,i=rY(a,s/2,n[4]/2),l=n[5]===2?rY(a,(s+n[4])/2):PAt(n,Math.ceil((s+n[4])/4));return new LAt(n[0],n[1],n[2],n[3],i,l)},LAt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>cg],r=(r<<n6)+(t&a6),this.data[r];if(t<=65535)return r=this.index[uAe+(t-55296>>cg)],r=(r<<n6)+(t&a6),this.data[r];if(t<this.highStart)return r=IAt-FAt+(t>>$M),r=this.index[r],r+=t>>cg&DAt,r=this.index[r],r=(r<<n6)+(t&a6),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),nY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",MAt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var YN=0;YN<nY.length;YN++)MAt[nY.charCodeAt(YN)]=YN;var UAt=1,s6=2,i6=3,aY=4,sY=5,QAt=7,iY=8,o6=9,l6=10,oY=11,lY=12,cY=13,uY=14,c6=15,HAt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},VAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},zAt=RAt(wAt),Fu="×",u6="÷",$At=function(e){return zAt.get(e)},GAt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===s6&&i===i6)return Fu;if(s===s6||s===i6||s===aY||i===s6||i===i6||i===aY)return u6;if(s===iY&&[iY,o6,oY,lY].indexOf(i)!==-1||(s===oY||s===o6)&&(i===o6||i===l6)||(s===lY||s===l6)&&i===l6||i===cY||i===sY||i===QAt||s===UAt)return Fu;if(s===cY&&i===uY){for(;a===sY;)a=t[--n];if(a===uY)return Fu}if(s===c6&&i===c6){for(var l=0;a===c6;)l++,a=t[--n];if(l%2===0)return Fu}return u6},KAt=function(e){var t=HAt(e),r=t.length,n=0,a=0,s=t.map($At);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Fu;n<r&&(i=GAt(t,s,++n))===Fu;);if(i!==Fu||n===r){var l=VAt.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},qAt=function(e){for(var t=KAt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},WAt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},XAt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=uj(n.data).map(function(c){return Gs(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),l},YAt=function(){return typeof new Image().crossOrigin<"u"},JAt=function(){return typeof new XMLHttpRequest().responseType=="string"},ZAt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},dY=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},eft=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=ED(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),AY(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",dY(c)?AY(ED(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),dY(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ED=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},AY=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xo={get SUPPORT_RANGE_BOUNDS(){var e=WAt(document);return Object.defineProperty(xo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=xo.SUPPORT_RANGE_BOUNDS&&XAt(document);return Object.defineProperty(xo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=ZAt(document);return Object.defineProperty(xo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?eft(document):Promise.resolve(!1);return Object.defineProperty(xo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=YAt();return Object.defineProperty(xo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=JAt();return Object.defineProperty(xo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Bw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),tft=function(e,t,r,n){var a=aft(t,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(xo.SUPPORT_RANGE_BOUNDS){var c=fY(n,i,l.length).getClientRects();if(c.length>1){var u=GM(l),d=0;u.forEach(function(h){s.push(new Bw(h,Oh.fromDOMRectList(e,fY(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Bw(l,Oh.fromDOMRectList(e,c)))}else{var f=n.splitText(l.length);s.push(new Bw(l,rft(e,n))),n=f}else xo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},rft=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=cj(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return Oh.EMPTY},fY=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},GM=function(e){if(xo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return qAt(e)},nft=function(e,t){if(xo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return ift(e,t)},aft=function(e,t){return t.letterSpacing!==0?GM(e):nft(e,t)},sft=[32,160,4961,65792,65793,4153,4241],ift=function(e,t){for(var r=Fct(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=uj(i),c="";l.forEach(function(u){sft.indexOf(u)===-1?c+=Gs(u):(c.length&&n.push(c),n.push(Gs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},oft=function(){function e(t,r,n){this.text=lft(r.data,n.textTransform),this.textBounds=tft(t,this.text,n,r)}return e}(),lft=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(cft,uft);case 2:return e.toUpperCase();default:return e}},cft=/(^|\s|:|-|\(|\))([a-z])/g,uft=function(e,t,r){return e.length>0?t+r.toUpperCase():e},dAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(ff),AAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(ff),fAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=cj(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(ff),hAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(ff),CD=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(ff),dft=[{type:15,flags:0,unit:"px",number:3}],Aft=[{type:16,flags:0,number:50}],fft=function(e){return e.width>e.height?new Oh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Oh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},hft=function(e){var t=e.type===mft?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},$S="checkbox",GS="radio",mft="password",hY=707406591,KM=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=hft(n),(a.type===$S||a.type===GS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=fft(a.bounds)),a.type){case $S:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=dft;break;case GS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Aft;break}return a}return t}(ff),mAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(ff),pAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(ff),gAe=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=vAe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?kw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):gh.TRANSPARENT,i=n.contentWindow.document.body?kw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):gh.TRANSPARENT;a.backgroundColor=mm(s)?mm(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(ff),pft=["OL","UL","MENU"],V5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,bAe(a)&&a.data.trim().length>0)r.textNodes.push(new oft(e,a,r.styles));else if(Ev(a))if(CAe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return V5(e,l,r,n)});else{var i=xAe(e,a);i.styles.isVisible()&&(gft(a,i,n)?i.flags|=4:xft(i.styles)&&(i.flags|=2),pft.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?V5(e,a.shadowRoot,i,n):!KS(a)&&!yAe(a)&&!qS(a)&&V5(e,a,i,n))}},xAe=function(e,t){return _D(t)?new dAe(e,t):wAe(t)?new AAe(e,t):yAe(t)?new fAe(e,t):vft(t)?new hAe(e,t):bft(t)?new CD(e,t):yft(t)?new KM(e,t):qS(t)?new mAe(e,t):KS(t)?new pAe(e,t):EAe(t)?new gAe(e,t):new ff(e,t)},vAe=function(e,t){var r=xAe(e,t);return r.flags|=4,V5(e,t,r,r),r},gft=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||qM(e)&&r.styles.isTransparent()},xft=function(e){return e.isPositioned()||e.isFloating()},bAe=function(e){return e.nodeType===Node.TEXT_NODE},Ev=function(e){return e.nodeType===Node.ELEMENT_NODE},ND=function(e){return Ev(e)&&typeof e.style<"u"&&!z5(e)},z5=function(e){return typeof e.className=="object"},vft=function(e){return e.tagName==="LI"},bft=function(e){return e.tagName==="OL"},yft=function(e){return e.tagName==="INPUT"},wft=function(e){return e.tagName==="HTML"},yAe=function(e){return e.tagName==="svg"},qM=function(e){return e.tagName==="BODY"},wAe=function(e){return e.tagName==="CANVAS"},mY=function(e){return e.tagName==="VIDEO"},_D=function(e){return e.tagName==="IMG"},EAe=function(e){return e.tagName==="IFRAME"},pY=function(e){return e.tagName==="STYLE"},Eft=function(e){return e.tagName==="SCRIPT"},KS=function(e){return e.tagName==="TEXTAREA"},qS=function(e){return e.tagName==="SELECT"},CAe=function(e){return e.tagName==="SLOT"},gY=function(e){return e.tagName.indexOf("-")>0},Cft=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},e}(),xY={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vY={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Nft={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},_ft={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Xx=function(e,t,r,n,a,s){return e<t||e>r?B2(e,a,s.length>0):n.integers.reduce(function(i,l,c){for(;e>=l;)e-=l,i+=n.values[c];return i},"")+s},NAe=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Vs=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(NAe(Math.abs(e),s,n,function(i){return Gs(Math.floor(i%s)+t)})+a)},wp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return NAe(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},cv=1,D0=2,P0=4,ew=8,Kf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return B2(e,4,a.length>0);var i=Math.abs(e),l=a;if(i===0)return t[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&ki(s,cv)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ki(s,D0)||u===1&&c===1&&ki(s,P0)&&e>100||u===1&&c>1&&ki(s,ew)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(e<0?n:"")+l},bY="十百千萬",yY="拾佰仟萬",wY="マイナス",d6="마이너스",B2=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var l=Vs(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return wp(e,"〇一二三四五六七八九",a);case 6:return Xx(e,1,3999,xY,3,n).toLowerCase();case 7:return Xx(e,1,3999,xY,3,n);case 8:return Vs(e,945,969,!1,n);case 9:return Vs(e,97,122,!1,n);case 10:return Vs(e,65,90,!1,n);case 11:return Vs(e,1632,1641,!0,n);case 12:case 49:return Xx(e,1,9999,vY,3,n);case 35:return Xx(e,1,9999,vY,3,n).toLowerCase();case 13:return Vs(e,2534,2543,!0,n);case 14:case 30:return Vs(e,6112,6121,!0,n);case 15:return wp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return wp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Kf(e,"零一二三四五六七八九",bY,"負",a,D0|P0|ew);case 47:return Kf(e,"零壹貳參肆伍陸柒捌玖",yY,"負",a,cv|D0|P0|ew);case 42:return Kf(e,"零一二三四五六七八九",bY,"负",a,D0|P0|ew);case 41:return Kf(e,"零壹贰叁肆伍陆柒捌玖",yY,"负",a,cv|D0|P0|ew);case 26:return Kf(e,"〇一二三四五六七八九","十百千万",wY,a,0);case 25:return Kf(e,"零壱弐参四伍六七八九","拾百千万",wY,a,cv|D0|P0);case 31:return Kf(e,"영일이삼사오육칠팔구","십백천만",d6,s,cv|D0|P0);case 33:return Kf(e,"零一二三四五六七八九","十百千萬",d6,s,0);case 32:return Kf(e,"零壹貳參四五六七八九","拾百千",d6,s,cv|D0|P0);case 18:return Vs(e,2406,2415,!0,n);case 20:return Xx(e,1,19999,_ft,3,n);case 21:return Vs(e,2790,2799,!0,n);case 22:return Vs(e,2662,2671,!0,n);case 22:return Xx(e,1,10999,Nft,3,n);case 23:return wp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return wp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Vs(e,3302,3311,!0,n);case 28:return wp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return wp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Vs(e,3792,3801,!0,n);case 37:return Vs(e,6160,6169,!0,n);case 38:return Vs(e,4160,4169,!0,n);case 39:return Vs(e,2918,2927,!0,n);case 40:return Vs(e,1776,1785,!0,n);case 43:return Vs(e,3046,3055,!0,n);case 44:return Vs(e,3174,3183,!0,n);case 45:return Vs(e,3664,3673,!0,n);case 46:return Vs(e,3872,3881,!0,n);case 3:default:return Vs(e,48,57,!0,n)}},_Ae="data-html2canvas-ignore",EY=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Cft,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Sft(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=Bft(a).then(function(){return hl(n,void 0,void 0,function(){var d,f;return Vo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Oft),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,jft(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(Ift(document.doctype)+"<html></html>"),Fft(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(wD(t,2))debugger;if(wAe(t))return this.createCanvasClone(t);if(mY(t))return this.createVideoClone(t);if(pY(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return _D(r)&&(_D(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),gY(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return A6(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Ev(r)||!Eft(r)&&!r.hasAttribute(_Ae)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Ev(r)||!pY(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Ev(s)&&CAe(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(bAe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Ev(t)&&(ND(t)||z5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&ND(a)&&(this.clonedReferenceElement=a),qM(a)&&Rft(a);var c=this.counters.parse(new eY(this.context,s)),u=this.resolvePseudoContent(t,a,i,Tw.BEFORE);gY(t)&&(r=!0),mY(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,Tw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||z5(t))&&!EAe(t)||r)&&A6(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(KS(t)||qS(t))&&(KS(a)||qS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new eY(this.context,n));var c=new vAt(this.context,n),u=l.createElement("html2canvaspseudoelement");A6(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(wa);m.length&&u.appendChild(l.createTextNode(t.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(F1),x=g[0],v=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=v&&wa(v)?yD.parse(s.context,v.value):3;u.appendChild(l.createTextNode(B2(y,w,!1)))}}else if(f.name==="counters"){var N=f.values.filter(F1),x=N[0],B=N[1],v=N[2];if(x&&wa(x)){var k=s.counters.getCounterValues(x.value),F=v&&wa(v)?yD.parse(s.context,v.value):3,E=B&&B.type===0?B.value:"",S=k.map(function(R){return B2(R,F,!1)}).join(E);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(ZX(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(ZX(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=SD+" "+kD;var d=a===Tw.BEFORE?" "+SD:" "+kD;return z5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Tw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Tw||(Tw={}));var Sft=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(_Ae,"true"),e.body.appendChild(r),r},kft=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},jft=function(e){return Promise.all([].slice.call(e.images,0).map(kft))},Bft=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Tft=["all","d","content"],A6=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Tft.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},Ift=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Fft=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Oft=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},Dft=":before",Pft=":after",SD="___html2canvas___pseudoelement_before",kD="___html2canvas___pseudoelement_after",CY=`{
    content: "" !important;
    display: none !important;
}`,Rft=function(e){Lft(e,"."+SD+Dft+CY+`
         .`+kD+Pft+CY)},Lft=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},SAe=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Mft=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(h6(t)||Vft(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return hl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Vo(this,function(l){switch(l.label){case 0:return r=SAe.isSameOrigin(t),n=!f6(t)&&this._options.useCORS===!0&&xo.SUPPORT_CORS_IMAGES&&!r,a=!f6(t)&&!r&&!h6(t)&&typeof this._options.proxy=="string"&&xo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!f6(t)&&!h6(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(zft(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var l=xo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),Uft=/^data:image\/svg\+xml/i,Qft=/^data:image\/.*;base64,/i,Hft=/^data:image\/.*/i,Vft=function(e){return xo.SUPPORT_SVG_DRAWING||!$ft(e)},f6=function(e){return Hft.test(e)},zft=function(e){return Qft.test(e)},h6=function(e){return e.substr(0,4)==="blob"},$ft=function(e){return e.substr(-3).toLowerCase()==="svg"||Uft.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Yx=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},JN=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Yx(this.start,this.startControl,t),a=Yx(this.startControl,this.endControl,t),s=Yx(this.endControl,this.end,t),i=Yx(n,a,t),l=Yx(a,s,t),c=Yx(i,l,t);return r?new e(this.start,n,i,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Pu=function(e){return e.type===1},Gft=function(){function e(t){var r=t.styles,n=t.bounds,a=Jy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=Jy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Jy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],m=Jy(r.borderBottomLeftRadius,n.width,n.height),g=m[0],x=m[1],v=[];v.push((s+c)/n.width),v.push((g+f)/n.width),v.push((i+x)/n.height),v.push((u+h)/n.height);var y=Math.max.apply(Math,v);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,N=n.height-h,B=n.width-f,k=n.height-x,F=r.borderTopWidth,E=r.borderRightWidth,S=r.borderBottomWidth,T=r.borderLeftWidth,L=Da(r.paddingTop,t.bounds.width),R=Da(r.paddingRight,t.bounds.width),j=Da(r.paddingBottom,t.bounds.width),P=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Xa(n.left+T/3,n.top+F/3,s-T/3,i-F/3,aa.TOP_LEFT):new ar(n.left+T/3,n.top+F/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Xa(n.left+w,n.top+F/3,c-E/3,u-F/3,aa.TOP_RIGHT):new ar(n.left+n.width-E/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Xa(n.left+B,n.top+N,f-E/3,h-S/3,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Xa(n.left+T/3,n.top+k,g-T/3,x-S/3,aa.BOTTOM_LEFT):new ar(n.left+T/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Xa(n.left+T*2/3,n.top+F*2/3,s-T*2/3,i-F*2/3,aa.TOP_LEFT):new ar(n.left+T*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Xa(n.left+w,n.top+F*2/3,c-E*2/3,u-F*2/3,aa.TOP_RIGHT):new ar(n.left+n.width-E*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Xa(n.left+B,n.top+N,f-E*2/3,h-S*2/3,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Xa(n.left+T*2/3,n.top+k,g-T*2/3,x-S*2/3,aa.BOTTOM_LEFT):new ar(n.left+T*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||i>0?Xa(n.left+T/2,n.top+F/2,s-T/2,i-F/2,aa.TOP_LEFT):new ar(n.left+T/2,n.top+F/2),this.topRightBorderStroke=s>0||i>0?Xa(n.left+w,n.top+F/2,c-E/2,u-F/2,aa.TOP_RIGHT):new ar(n.left+n.width-E/2,n.top+F/2),this.bottomRightBorderStroke=f>0||h>0?Xa(n.left+B,n.top+N,f-E/2,h-S/2,aa.BOTTOM_RIGHT):new ar(n.left+n.width-E/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=g>0||x>0?Xa(n.left+T/2,n.top+k,g-T/2,x-S/2,aa.BOTTOM_LEFT):new ar(n.left+T/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||i>0?Xa(n.left,n.top,s,i,aa.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Xa(n.left+w,n.top,c,u,aa.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Xa(n.left+B,n.top+N,f,h,aa.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Xa(n.left,n.top+k,g,x,aa.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Xa(n.left+T,n.top+F,Math.max(0,s-T),Math.max(0,i-F),aa.TOP_LEFT):new ar(n.left+T,n.top+F),this.topRightPaddingBox=c>0||u>0?Xa(n.left+Math.min(w,n.width-E),n.top+F,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-F),aa.TOP_RIGHT):new ar(n.left+n.width-E,n.top+F),this.bottomRightPaddingBox=f>0||h>0?Xa(n.left+Math.min(B,n.width-T),n.top+Math.min(N,n.height-S),Math.max(0,f-E),Math.max(0,h-S),aa.BOTTOM_RIGHT):new ar(n.left+n.width-E,n.top+n.height-S),this.bottomLeftPaddingBox=g>0||x>0?Xa(n.left+T,n.top+Math.min(k,n.height-S),Math.max(0,g-T),Math.max(0,x-S),aa.BOTTOM_LEFT):new ar(n.left+T,n.top+n.height-S),this.topLeftContentBox=s>0||i>0?Xa(n.left+T+P,n.top+F+L,Math.max(0,s-(T+P)),Math.max(0,i-(F+L)),aa.TOP_LEFT):new ar(n.left+T+P,n.top+F+L),this.topRightContentBox=c>0||u>0?Xa(n.left+Math.min(w,n.width+T+P),n.top+F+L,w>n.width+T+P?0:c-T+P,u-(F+L),aa.TOP_RIGHT):new ar(n.left+n.width-(E+R),n.top+F+L),this.bottomRightContentBox=f>0||h>0?Xa(n.left+Math.min(B,n.width-(T+P)),n.top+Math.min(N,n.height+F+L),Math.max(0,f-(E+R)),h-(S+j),aa.BOTTOM_RIGHT):new ar(n.left+n.width-(E+R),n.top+n.height-(S+j)),this.bottomLeftContentBox=g>0||x>0?Xa(n.left+T+P,n.top+k,Math.max(0,g-(T+P)),x-(S+j),aa.BOTTOM_LEFT):new ar(n.left+T+P,n.top+n.height-(S+j))}return e}(),aa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(aa||(aa={}));var Xa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=e+r,u=t+n;switch(a){case aa.TOP_LEFT:return new JN(new ar(e,u),new ar(e,u-l),new ar(c-i,t),new ar(c,t));case aa.TOP_RIGHT:return new JN(new ar(e,t),new ar(e+i,t),new ar(c,u-l),new ar(c,u));case aa.BOTTOM_RIGHT:return new JN(new ar(c,t),new ar(c,t+l),new ar(e+i,u),new ar(e,u));case aa.BOTTOM_LEFT:default:return new JN(new ar(c,u),new ar(c-i,u),new ar(e,t+l),new ar(e,t))}},WS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Kft=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},XS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},qft=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),ZN=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),Wft=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Xft=function(e){return e.type===0},kAe=function(e){return e.type===1},Yft=function(e){return e.type===2},NY=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},Jft=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},jAe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),BAe=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new Gft(this.container),this.container.styles.opacity<1&&this.effects.push(new Wft(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new qft(n,a,s))}if(this.container.styles.overflowX!==0){var i=WS(this.curves),l=XS(this.curves);NY(i,l)?this.effects.push(new ZN(i,6)):(this.effects.push(new ZN(i,2)),this.effects.push(new ZN(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!kAe(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=WS(n.curves),l=XS(n.curves);NY(i,l)||a.unshift(new ZN(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return ki(c.target,t)})},e}(),jD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=ki(a.flags,4),i=ki(a.flags,2),l=new BAe(a,e);ki(a.styles.display,2048)&&n.push(l);var c=ki(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new jAe(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var m=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(m=x+1,!1):m>0}),u.positiveZIndex.splice(m,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);jD(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),jD(l,t,r,c);ki(a.flags,8)&&TAe(a,c)})},TAe=function(e,t){for(var r=e instanceof CD?e.start:1,n=e instanceof CD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof hAe&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=B2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},Zft=function(e){var t=new BAe(e,null),r=new jAe(t),n=[];return jD(t,r,r,n),TAe(t.container,n),r},_Y=function(e,t){switch(t){case 0:return Vu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Vu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Vu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Vu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},eht=function(e,t){switch(t){case 0:return Vu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Vu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Vu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Vu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},tht=function(e,t){switch(t){case 0:return Vu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Vu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Vu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Vu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},rht=function(e,t){switch(t){case 0:return e5(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return e5(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return e5(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return e5(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},e5=function(e,t){var r=[];return Pu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Pu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Vu=function(e,t,r,n){var a=[];return Pu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Pu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Pu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Pu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},IAe=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},YS=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},nht=function(e,t){return e===0?t.bounds:e===2?YS(t):IAe(t)},aht=function(e,t){return e===0?t.bounds:e===2?YS(t):IAe(t)},m6=function(e,t,r){var n=nht(uv(e.styles.backgroundOrigin,t),e),a=aht(uv(e.styles.backgroundClip,t),e),s=sht(uv(e.styles.backgroundSize,t),r,n),i=s[0],l=s[1],c=Jy(uv(e.styles.backgroundPosition,t),n.width-i,n.height-l),u=iht(uv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,l]},Jx=function(e){return wa(e)&&e.value===Kv.AUTO},t5=function(e){return typeof e=="number"},sht=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],l=e[1];if(!i)return[0,0];if(hi(i)&&l&&hi(l))return[Da(i,r.width),Da(l,r.height)];var c=t5(s);if(wa(i)&&(i.value===Kv.CONTAIN||i.value===Kv.COVER)){if(t5(s)){var u=r.width/r.height;return u<s!=(i.value===Kv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=t5(n),f=t5(a),h=d||f;if(Jx(i)&&(!l||Jx(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var m=d?n:a*s,g=f?a:n/s;return[m,g]}var x=d?n:r.width,v=f?a:r.height;return[x,v]}if(c){var y=0,w=0;return hi(i)?y=Da(i,r.width):hi(l)&&(w=Da(l,r.height)),Jx(i)?y=w*s:(!l||Jx(l))&&(w=y/s),[y,w]}var N=null,B=null;if(hi(i)?N=Da(i,r.width):l&&hi(l)&&(B=Da(l,r.height)),N!==null&&(!l||Jx(l))&&(B=d&&f?N/n*a:r.height),B!==null&&Jx(i)&&(N=d&&f?B/a*n:r.width),N!==null&&B!==null)return[N,B];throw new Error("Unable to calculate background-size for element")},uv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},iht=function(e,t,r,n,a){var s=t[0],i=t[1],l=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+l),Math.round(n.top)),new ar(Math.round(n.left+s+l),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+l),Math.round(n.top+i)),new ar(Math.round(n.left+s+l),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},oht="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SY="Hidden Text",lht=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=oht,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(SY)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(SY)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),FAe=function(){function e(t,r){this.context=t,this.options=r}return e}(),cht=1e4,uht=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new lht(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),Yft(r)&&(this.ctx.globalAlpha=r.opacity),Xft(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),kAe(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return hl(this,void 0,void 0,function(){var n;return Vo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return hl(this,void 0,void 0,function(){return Vo(this,function(n){switch(n.label){case 0:if(ki(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=GM(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=mht(r.fontFamily).join(", "),s=_E(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return hl(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h=this;return Vo(this,function(m){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Gi(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Gi(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Gi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Gi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=YS(r),i=XS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return hl(this,void 0,void 0,function(){var n,a,s,i,l,c,w,w,u,d,f,h,B,m,g,k,x,v,y,w,N,B,k;return Vo(this,function(F){switch(F.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,F.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:F.sent(),F.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof dAe))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=F.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof AAe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof fAe))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=F.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof gAe&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=F.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof KM&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===$S?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Gi(hY),this.ctx.fill(),this.ctx.restore()):n.type===GS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Gi(hY),this.ctx.fill(),this.ctx.restore())),dht(n)&&n.value.length){switch(h=this.createFontStyle(s),B=h[0],m=h[1],g=this.fontMetrics.getMetrics(B,m).baseline,this.ctx.font=B,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fht(n.styles.textAlign),k=YS(n),x=0,n.styles.textAlign){case 1:x+=k.width/2;break;case 2:x+=k.width;break}v=k.add(x,0,0,-k.height/2+1),this.ctx.save(),this.path([new ar(k.left,k.top),new ar(k.left+k.width,k.top),new ar(k.left+k.width,k.top+k.height),new ar(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Bw(n.value,v),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ki(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,N=y.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return w=F.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Gi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new Oh(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,YX(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Bw(r.listValue,k),s.letterSpacing,YX(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return hl(this,void 0,void 0,function(){var n,a,y,s,i,y,l,c,y,u,d,y,f,h,y,m,g,y,x,v,y;return Vo(this,function(w){switch(w.label){case 0:if(ki(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,w.label=11;case 11:return l<c.length?(y=c[l],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:m=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<g.length?(y=g[m],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:x=0,v=r.positiveZIndex,w.label=27;case 27:return x<v.length?(y=v[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Pu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Pu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return hl(this,void 0,void 0,function(){var n,a,s,i,l,c;return Vo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,m,L,V,W,P,M,S,g,L,V,W,P,M,x,v,y,w,N,B,k,F,E,S,T,L,R,j,P,M,Z,V,W,G,K,ee,X,D,Q,z,J;return Vo(this,function(te){switch(te.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(m=m6(r,n,[f.width,f.height,f.width/f.height]),L=m[0],V=m[1],W=m[2],P=m[3],M=m[4],S=s.ctx.createPattern(s.resizeImage(f,P,M),"repeat"),s.renderRepeat(L,S,V,W)),[3,6];case 5:Xut(d)?(g=m6(r,n,[null,null,null]),L=g[0],V=g[1],W=g[2],P=g[3],M=g[4],x=$ut(d.angle,P,M),v=x[0],y=x[1],w=x[2],N=x[3],B=x[4],k=document.createElement("canvas"),k.width=P,k.height=M,F=k.getContext("2d"),E=F.createLinearGradient(y,N,w,B),WX(d.stops,v).forEach(function(se){return E.addColorStop(se.stop,Gi(se.color))}),F.fillStyle=E,F.fillRect(0,0,P,M),P>0&&M>0&&(S=s.ctx.createPattern(k,"repeat"),s.renderRepeat(L,S,V,W))):Yut(d)&&(T=m6(r,n,[null,null,null]),L=T[0],R=T[1],j=T[2],P=T[3],M=T[4],Z=d.position.length===0?[VM]:d.position,V=Da(Z[0],P),W=Da(Z[Z.length-1],M),G=Gut(d,V,W,P,M),K=G[0],ee=G[1],K>0&&ee>0&&(X=s.ctx.createRadialGradient(R+V,j+W,0,R+V,j+W,K),WX(d.stops,K*2).forEach(function(se){return X.addColorStop(se.stop,Gi(se.color))}),s.path(L),s.ctx.fillStyle=X,K!==ee?(D=r.bounds.left+.5*r.bounds.width,Q=r.bounds.top+.5*r.bounds.height,z=ee/K,J=1/z,s.ctx.save(),s.ctx.translate(D,Q),s.ctx.transform(1,0,0,z,0,0),s.ctx.translate(-D,-Q),s.ctx.fillRect(R,J*(j-Q)+Q,P,M*J),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return hl(this,void 0,void 0,function(){return Vo(this,function(s){return this.path(_Y(a,n)),this.ctx.fillStyle=Gi(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return hl(this,void 0,void 0,function(){var i,l;return Vo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=eht(s,a),this.path(i),this.ctx.fillStyle=Gi(r),this.ctx.fill(),l=tht(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return hl(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,f=this;return Vo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!mm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=Aht(uv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),mm(n.backgroundColor)||(this.ctx.fillStyle=Gi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var g=WS(r.curves),x=m.inset?0:cht,v=Jft(g,-x+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(g),f.ctx.clip(),f.mask(v)):(f.mask(g),f.ctx.clip(),f.path(v)),f.ctx.shadowOffsetX=m.offsetX.number+x,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Gi(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Gi(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!mm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return hl(this,void 0,void 0,function(){var l,c,u,d,f,h,m,g,x,v,y,w,N,B,k,F,k,F;return Vo(this,function(E){return this.ctx.save(),l=rht(s,a),c=_Y(s,a),i===2&&(this.path(c),this.ctx.clip()),Pu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Pu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?m=Math.abs(u-f):m=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),v=!0,m<=g*2?v=!1:m<=g*2+x?(y=m/(2*g+x),g*=y,x*=y):(w=Math.floor((m+x)/(g+x)),N=(m-w*g)/(w-1),B=(m-(w+1)*g)/w,x=B<=0||Math.abs(x-N)<Math.abs(x-B)?N:B),v&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Gi(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Pu(c[0])&&(k=c[3],F=c[0],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke()),Pu(c[1])&&(k=c[1],F=c[2],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return hl(this,void 0,void 0,function(){var n;return Vo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Zft(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(FAe),dht=function(e){return e instanceof pAe||e instanceof mAe?!0:e instanceof KM&&e.type!==GS&&e.type!==$S},Aht=function(e,t){switch(e){case 0:return WS(t);case 2:return Kft(t);case 1:default:return XS(t)}},fht=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},hht=["-apple-system","system-ui"],mht=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return hht.indexOf(t)===-1}):e},pht=function(e){Jd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return hl(this,void 0,void 0,function(){var n,a;return Vo(this,function(s){switch(s.label){case 0:return n=ED(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,ght(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Gi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(FAe),ght=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xht=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,FN([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,FN([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,FN([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,FN([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),vht=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new xht({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Mft(this,t)}return e.instanceCount=1,e}(),BD=function(e,t){return t===void 0&&(t={}),bht(e,t)};typeof window<"u"&&SAe.setContext(window);var bht=function(e,t){return hl(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,f,h,m,g,x,v,y,w,N,B,k,E,F,E,S,T,L,R,j,P,M,Z,V,W,G,K,ee,X,D,Q,z;return Vo(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(T=t.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},s=lD({logging:(R=t.logging)!==null&&R!==void 0?R:!0,cache:t.cache},a),i={windowWidth:(j=t.windowWidth)!==null&&j!==void 0?j:n.innerWidth,windowHeight:(P=t.windowHeight)!==null&&P!==void 0?P:n.innerHeight,scrollX:(M=t.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(Z=t.scrollY)!==null&&Z!==void 0?Z:n.pageYOffset},l=new Oh(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new vht(s,l),u=(V=t.foreignObjectRendering)!==null&&V!==void 0?V:!1,d={allowTaint:(W=t.allowTaint)!==null&&W!==void 0?W:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new EY(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=J.sent(),g=qM(h)||wft(h)?Jlt(h.ownerDocument):cj(c,h),x=g.width,v=g.height,y=g.left,w=g.top,N=yht(c,h,t.backgroundColor),B={canvas:t.canvas,backgroundColor:N,scale:(K=(G=t.scale)!==null&&G!==void 0?G:n.devicePixelRatio)!==null&&K!==void 0?K:1,x:((ee=t.x)!==null&&ee!==void 0?ee:0)+y,y:((X=t.y)!==null&&X!==void 0?X:0)+w,width:(D=t.width)!==null&&D!==void 0?D:Math.ceil(x),height:(Q=t.height)!==null&&Q!==void 0?Q:Math.ceil(v)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new pht(c,B),[4,E.render(h)]):[3,3];case 2:return k=J.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+v+" using computed rendering"),c.logger.debug("Starting DOM parsing"),F=vAe(c,h),N===F.styles.backgroundColor&&(F.styles.backgroundColor=gh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),E=new uht(c,B),[4,E.render(F)];case 4:k=J.sent(),J.label=5;case 5:return(!((z=t.removeContainer)!==null&&z!==void 0)||z)&&(EY.destroy(m)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,k]}})})},yht=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?kw(e,getComputedStyle(n.documentElement).backgroundColor):gh.TRANSPARENT,s=n.body?kw(e,getComputedStyle(n.body).backgroundColor):gh.TRANSPARENT,i=typeof r=="string"?kw(e,r):r===null?gh.TRANSPARENT:4294967295;return t===n.documentElement?mm(a)?mm(s)?i:s:a:i};const wht=Object.freeze(Object.defineProperty({__proto__:null,default:BD},Symbol.toStringTag,{value:"Module"})),Eht=e=>{const[t,r]=_.useState(!1),[n,a]=_.useState(null);return _.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},OAe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],Cht=["Mecánica Industrial","Mecánica Automotriz"],Nht=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:OAe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),kY=({empresas:e,isLoaded:t,route:r})=>{const n=_.useRef(null),a=_.useRef(null),s=_.useRef([]),i=_.useRef(null),l=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return _.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):l.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[l,t,r]),o.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[o.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&l.length===0&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:o.jsx("div",{className:"text-center p-6",children:o.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},_ht=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.duration)==null?void 0:m.value)||0)},0),l=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+l,u=e.routes[0].legs.reduce((f,h)=>{var m;return f+(((m=h.distance)==null?void 0:m.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return o.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[o.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),o.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var m,g,x;return o.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[(m=f.duration)==null?void 0:m.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&o.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((v,y)=>v.transit&&o.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[o.jsx("span",{className:"text-lg",children:"🚌"}),o.jsx("span",{dangerouslySetInnerHTML:{__html:v.instructions}})]},y))})]},h)})}),o.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[o.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),o.jsxs("p",{children:["Tiempo en paradas: ",Math.round(l/60)," min"]}),o.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),o.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&o.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},jY=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,Sht=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),o.jsx(ih,{width:"100%",height:300,children:o.jsxs(KL,{children:[o.jsx(Tk,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>o.jsx(Im,{fill:t[n%t.length]},`cell-${n}`))}),o.jsx(sh,{})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),o.jsx(ih,{width:"100%",height:300,children:o.jsxs(g2,{data:e.porSupervisor,layout:"vertical",children:[o.jsx(p2,{strokeDasharray:"3 3"}),o.jsx(Sg,{type:"number"}),o.jsx(kg,{type:"category",dataKey:"name",width:150}),o.jsx(sh,{}),o.jsx(E1,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),o.jsx(ih,{width:"100%",height:300,children:o.jsxs(g2,{data:e.porComuna,children:[o.jsx(p2,{strokeDasharray:"3 3"}),o.jsx(Sg,{dataKey:"name"}),o.jsx(kg,{}),o.jsx(sh,{}),o.jsx(E1,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),o.jsx(ih,{width:"100%",height:300,children:o.jsxs(_Ke,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[o.jsx(soe,{}),o.jsx(Bk,{dataKey:"subject"}),o.jsx(kk,{angle:30,domain:[0,5]}),o.jsx(UL,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),o.jsx(sh,{})]})})]}),o.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[o.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),o.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:o.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>o.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[o.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),o.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},kht=()=>{const[e,t]=_.useState([]),[r,n]=_.useState([]),[a,s]=_.useState("list"),[i,l]=_.useState(null),[c,u]=_.useState(!0),[d,f]=_.useState(null),[h,m]=_.useState(null),[g,x]=_.useState(null),[v,y]=_.useState([]),[w,N]=_.useState(null),[B,k]=_.useState(!1),[F,E]=_.useState("DRIVING"),[S,T]=_.useState(""),[L,R]=_.useState([]),j="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:P}=Eht(j);_.useEffect(()=>{u(!0);const ie=qit(t),le=Yit(n),ue=Zit(R);return u(!1),()=>{ie(),le(),ue()}},[]);const M=_.useMemo(()=>{const ie=e.reduce((Ne,ke)=>{const _e=ke.area||"Sin especificar";return Ne[_e]=(Ne[_e]||0)+1,Ne},{}),le=e.reduce((Ne,ke)=>{var he;const _e=((he=ke.docenteSupervisor)==null?void 0:he.nombreCompleto)||"Sin asignar";return Ne[_e]=(Ne[_e]||0)+1,Ne},{}),ue=e.reduce((Ne,ke)=>{const _e=ke.direccion.split(",").map(Be=>Be.trim()),he=_e.length>1?_e[1]:"Desconocida";return Ne[he]=(Ne[he]||0)+1,Ne},{}),je=OAe.map(Ne=>{const ke=e.flatMap(he=>{var Be;return(Be=he.calificaciones.find(Le=>Le.elemento===Ne.elemento))==null?void 0:Be.score}).filter(he=>he!=null),_e=ke.length>0?ke.reduce((he,Be)=>he+Be,0)/ke.length:0;return{subject:Ne.elemento.split(" ")[0],A:_e,fullMark:5}}),ae=e.map(Ne=>{const ke=Ne.calificaciones.map(he=>he.score).filter(he=>he!=null),_e=ke.length>0?ke.reduce((he,Be)=>he+Be,0)/ke.length:0;return{...Ne,promedio:_e}}).filter(Ne=>Ne.promedio>0).sort((Ne,ke)=>ke.promedio-Ne.promedio);return{porEspecialidad:Object.entries(ie).map(([Ne,ke])=>({name:Ne,value:ke})),porSupervisor:Object.entries(le).map(([Ne,ke])=>({name:Ne,value:ke})),porComuna:Object.entries(ue).map(([Ne,ke])=>({name:Ne,value:ke})),calificacionPorAmbito:je,ranking:ae}},[e]),Z=async()=>{if(i)try{await Wit(i),s("list"),l(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},V=async ie=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await Xit(ie)},W=(ie,le)=>{l(ue=>ue?{...ue,[ie]:le}:null)},G=async ie=>{var le;if(f(ie),(le=ie==null?void 0:ie.value)!=null&&le.place_id&&P){const ue=await jY(ie.value.place_id);W("direccion",ie.label||""),W("coordenadas",ue)}else W("direccion",(ie==null?void 0:ie.label)||"")},K=ie=>{l(JSON.parse(JSON.stringify(ie))),ie.direccion&&f({label:ie.direccion,value:{description:ie.direccion}}),s("form")},ee=async ie=>{var le;if(m(ie),(le=ie==null?void 0:ie.value)!=null&&le.place_id&&P){const ue=await jY(ie.value.place_id);x(ue)}},X=ie=>{y(le=>le.some(ue=>ue.id===ie.id)?le.filter(ue=>ue.id!==ie.id):[...le,ie])},D=()=>{if(!g||v.length===0||!P)return;k(!0);const ie=new window.google.maps.DirectionsService,le=v.filter(ue=>ue.coordenadas).map(ue=>({location:ue.coordenadas,stopover:!0}));ie.route({origin:g,destination:g,waypoints:le,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[F]},(ue,je)=>{k(!1),je===window.google.maps.DirectionsStatus.OK&&ue?N(ue):alert("No se pudo calcular la ruta: "+je)})},Q=()=>{N(null),m(null),x(null),y([]),T("")},z=async()=>{if(!S||!h||!g||v.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const ie={nombre:S,startPoint:{label:h.label,coords:g},empresas:v.map(le=>({id:le.id,nombre:le.nombre,coordenadas:le.coordenadas})),travelMode:F};try{await Jit(ie),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},J=async()=>{const ie=document.getElementById("map-container-for-pdf"),le=document.getElementById("route-details-for-pdf");if(!ie||!le)return;const ue=new vr("p","mm","a4"),je=ue.internal.pageSize.getWidth();ue.text(`Ruta de Supervisión: ${S||"Sin nombre"}`,10,15),ue.setFontSize(10),ue.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Ne=(await BD(ie,{useCORS:!0})).toDataURL("image/png");ue.addImage(Ne,"PNG",10,30,je-20,100);const _e=(await BD(le)).toDataURL("image/png"),he=ue.getImageProperties(_e),Be=he.height*(je-20)/he.width;ue.addImage(_e,"PNG",10,135,je-20,Be),ue.save(`ruta-${S||"supervision"}.pdf`)},te=ie=>{m({label:ie.startPoint.label,value:null}),x(ie.startPoint.coords),y(ie.empresas),E(ie.travelMode),T(ie.nombre),s("route")},se=async ie=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await eot(ie),alert("Ruta eliminada."))};return c?o.jsx("div",{className:"text-center p-8",children:"Cargando..."}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),o.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&o.jsx("button",{onClick:()=>{s("list"),f(null),l(null),Q()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[o.jsx(Kee,{size:18})," Dashboard"]}),o.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),o.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),o.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),o.jsx("button",{onClick:()=>{l(Nht()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&o.jsx(Sht,{data:M}),a==="saved-routes"&&o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),o.jsx("div",{className:"space-y-3",children:L.length===0?o.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):L.map(ie=>o.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:ie.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:[ie.empresas.length," paradas"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>te(ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),o.jsx("button",{onClick:()=>se(ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ie.id))})]}),a==="route"&&o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),o.jsx("input",{type:"text",value:S,onChange:ie=>T(ie.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),o.jsx(kX,{apiKey:j,selectProps:{value:h,onChange:ee,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),o.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[o.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${F==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),o.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${F==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),o.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ie=>ie.coordenadas).map(ie=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:`route-${ie.id}`,checked:v.some(le=>le.id===ie.id),onChange:()=>X(ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("label",{htmlFor:`route-${ie.id}`,className:"ml-3 text-sm text-gray-700",children:ie.nombre})]},ie.id))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("button",{onClick:D,disabled:!g||v.length===0||B,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:B?"Calculando...":"Visualizar Ruta"}),o.jsx("button",{onClick:z,disabled:!S||!g||v.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),o.jsx("button",{onClick:J,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),o.jsx("button",{onClick:Q,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),o.jsx("div",{children:o.jsx(kY,{empresas:v,isLoaded:P,route:w})})]}),w&&o.jsx(_ht,{route:w,travelMode:F})]}),a==="map"&&o.jsx(kY,{empresas:e,isLoaded:P}),a==="list"&&o.jsx("div",{className:"space-y-3",children:e.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ie=>{var le;return o.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:ie.nombre}),o.jsxs("p",{className:"text-sm text-slate-500",children:[ie.rut," | ",ie.direccion]}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",ie.area||"No especificada"," | Cupos: ",ie.cupos," | Supervisor: ",((le=ie.docenteSupervisor)==null?void 0:le.nombreCompleto)||"Ninguno"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>K(ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),o.jsx("button",{onClick:()=>V(ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ie.id)})}),a==="form"&&i&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(owe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{value:i.nombre,onChange:ie=>W("nombre",ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(e2e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{value:i.rut,onChange:ie=>W("rut",ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),o.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[o.jsx(v_,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),o.jsx("div",{className:"w-full pl-10",children:o.jsx(kX,{apiKey:j,selectProps:{value:d,onChange:G,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(zw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{value:i.contacto,onChange:ie=>W("contacto",ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(x2e,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"email",value:i.email||"",onChange:ie=>W("email",ie.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(Nl,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsx("input",{type:"number",value:i.cupos,onChange:ie=>W("cupos",parseInt(ie.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),o.jsxs("div",{className:"relative flex items-center",children:[o.jsx(p_,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsxs("select",{value:i.area||"",onChange:ie=>W("area",ie.target.value),className:"input-style pl-10 w-full",children:[o.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),Cht.map(ie=>o.jsx("option",{value:ie,children:ie},ie))]})]}),o.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[o.jsx(zw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),o.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:ie=>{const le=ie.target.value;W("docenteSupervisor",le?JSON.parse(le):void 0)},className:"input-style pl-10 w-full",children:[o.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ie=>o.jsx("option",{value:JSON.stringify({id:ie.id,nombre:ie.nombreCompleto}),children:ie.nombreCompleto},ie.id))]})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((ie,le)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[o.jsx(Z2e,{className:"w-5 h-5 text-slate-400"}),o.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ie.elemento}),o.jsxs("select",{value:ie.score||"",onChange:ue=>{const je=[...i.calificaciones];je[le].score=ue.target.value?parseInt(ue.target.value):null,W("calificaciones",je)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[o.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ue=>o.jsx("option",{value:ue,children:ue},ue))]})]},le))]}),o.jsx("div",{className:"pt-6",children:o.jsx("button",{onClick:Z,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},WM="dpd_actividades",DAe="dpd_respuestas",jht="usuarios";function Bht(e,{includeArchived:t=!1}={}){const r=vt(ft,WM),n=t?zt(r,hr("createdAt","desc")):zt(r,Br("isArchived","==",!1),hr("createdAt","desc"));return fr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));e(s)})}async function Tht(e){const t=vt(ft,WM);return(await hn(t,{...e,isArchived:!1,createdAt:Is(),updatedAt:Is()})).id}async function Iht(e){const t=sr(ft,WM,e);await Ra(t)}function Fht(e,t){const r=vt(ft,DAe),n=zt(r,Br("activityId","==",e),hr("createdAt","desc"));return fr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));t(s)})}async function Oht(e){const t=vt(ft,DAe);return(await hn(t,{...e,createdAt:Is()})).id}function Dht(e,t){const r=vt(ft,jht),n=zt(r,Br("profile","in",e));return fr(n,a=>{const s=a.docs.map(i=>{const l=i.data();return{id:i.id,nombre:(l==null?void 0:l.displayName)||(l==null?void 0:l.name)||(l==null?void 0:l.email)||"Sin nombre",profile:l==null?void 0:l.profile,email:l==null?void 0:l.email}});t(s)})}function PAe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const Pht=[{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}},{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}],Rht=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new Os(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function Lht(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function RAe(){const e=Rht();if(!e)return null;for(const t of Pht){const r=await Lht(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontró ningún modelo de Gemini disponible"),null}function LAe(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function Mht(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function Uht(e,t=3){var n;const r=await RAe();if(!r)return p6(e,t);try{const a=`Genera ${t} preguntas de selección múltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "¿Pregunta 1?",
          "opciones": ["Opción 1", "Opción 2", "Opción 3", "Opción 4"]
        }
      ]
    }`,i=(await r.generateContent(a)).response.text(),l=LAe(i);return(n=l==null?void 0:l.preguntas)!=null&&n.length?l.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",i),p6(e,t))}catch(a){return console.error("Error al generar preguntas:",a),p6(e,t)}}async function Qht(e,t=30){var n;const r=await RAe();if(!r)return g6(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos más relevantes.`,l=(await r.generateContent(s)).response.text(),c=LAe(l);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",l),g6(e))}catch(a){return console.error("Error al analizar respuestas:",a),g6(e)}}function p6(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:Mht(r).slice(0,4)}))}function g6(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}const JS=500,BY=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificación y organización del currículo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),ky=at.memo(({title:e,icon:t,right:r,children:n})=>o.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[o.jsxs("header",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),Hht=at.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>o.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return o.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),Vht=at.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?o.jsx("ul",{className:"space-y-2",children:e.map(s=>{const i=s.id===t;return o.jsxs("li",{children:[o.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${i?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo} • ${s.dimension} / ${s.subdimension}`,children:[o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx(mg,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:s.titulo})]}),o.jsx(KP,{className:"w-4 h-4 opacity-70"})]}),n(s)&&o.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):o.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[o.jsx(qwe,{className:"w-4 h-4"})," Aún no hay actividades creadas."]})),x6=at.memo(({label:e,value:t,pill:r})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?o.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):o.jsx("span",{className:"font-medium",children:t})]})),zht=at.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return o.jsxs("div",{className:"relative mt-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),o.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),o.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:o.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),$ht=at.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=_.useCallback(i=>r(e.id,i.target.value),[e.id,r]),s=_.useCallback(()=>n(e.id),[e.id,n]);return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opción ${t.findIndex(i=>i.id===e.id)+1}`}),o.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opción",children:o.jsx(xi,{className:"w-4 h-4"})})]})}),Ght=at.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=_.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=_.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),i=_.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),l=_.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=_.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(m=>m.id===f?{...m,text:h}:m)})},[e.id,e.opciones,n]),u=_.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=_.useCallback(()=>r(e.id),[e.id,r]);return o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1," • ",e.tipo==="abierta"?"Abierta":"Selección múltiple"]}),o.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:o.jsx(xi,{className:"w-4 h-4"})})]}),o.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{className:"text-sm",children:"Máx. palabras"}),o.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||JS,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:i})," Permitir selección múltiple"]}),e.opciones.map(f=>o.jsx($ht,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),o.jsx("button",{onClick:l,className:"text-sm text-sky-700 hover:underline",children:"+ Añadir opción"})]})]})}),Kht=at.memo(({q:e,respuestas:t,onChange:r})=>{var i,l;const n=_.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((i=t[e.id])==null?void 0:i.valorTexto)||"";return o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),o.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Máximo ${e.maxPalabras||JS} palabras…`,className:"w-full border rounded-lg px-3 py-2"}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[PAe(c)," / ",e.maxPalabras||JS," palabras"]})]})}const a=((l=t[e.id])==null?void 0:l.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),o.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),o.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),qht=({currentUser:e})=>{var D;const[t,r]=_.useState("responder"),[n,a]=_.useState([]),[s,i]=_.useState(""),[l,c]=_.useState(""),[u,d]=_.useState(BY()),f=_.useCallback(Q=>d(z=>({...z,...Q})),[]),[h,m]=_.useState([]),[g,x]=_.useState({}),[v,y]=_.useState([]),w=YQ.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);_.useEffect(()=>{const Q=Bht(z=>{a(z),i(J=>{var te;return J||(((te=z[0])==null?void 0:te.id)??"")})});return()=>Q()},[]),_.useEffect(()=>{const Q=Dht(["PROFESORADO","SUBDIRECCION"],z=>{m(z),d(J=>{if(J.creadorId)return J;const te=z.find(se=>se.id===(e==null?void 0:e.uid));return te?{...J,creadorId:te.id,creadorNombre:te.nombre,creadorPerfil:te.profile||J.creadorPerfil}:J})});return()=>Q()},[e]),_.useEffect(()=>{if(!s)return;const Q=Fht(s,y);return()=>Q()},[s]);const N=_.useMemo(()=>n.find(Q=>Q.id===s),[n,s]);_.useMemo(()=>Yf[u.dimension]||[],[u.dimension]),_.useEffect(()=>{d(Q=>{const z=Yf[Q.dimension]||[],J=z.includes(Q.subdimension)?Q.subdimension:z[0]||"";return J===Q.subdimension?Q:{...Q,subdimension:J}})},[u.dimension]);const B=_.useCallback(()=>{const Q={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aquí tu pregunta abierta",maxPalabras:JS};d(z=>({...z,preguntas:[...z.preguntas,Q]}))},[]),k=_.useCallback(()=>{const Q={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opción(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opción 1"},{id:crypto.randomUUID(),text:"Opción 2"},{id:crypto.randomUUID(),text:"Opción 3"},{id:crypto.randomUUID(),text:"Opción 4"}],multiple:!0};d(z=>({...z,preguntas:[...z.preguntas,Q]}))},[]),F=_.useCallback((Q,z)=>{d(J=>({...J,preguntas:J.preguntas.map(te=>te.id===Q?{...te,...z}:te)}))},[]),E=_.useCallback(Q=>{d(z=>({...z,preguntas:z.preguntas.filter(J=>J.id!==Q)}))},[]),[S,T]=_.useState(!1),L=_.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){T(!0);try{const z=(await Uht(u.aiTema,u.aiCantidad)).map(J=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:J.enunciado,opciones:J.opciones.slice(0,5).map(te=>({id:crypto.randomUUID(),text:te})),multiple:!0}));d(J=>({...J,preguntas:[...J.preguntas,...z]}))}finally{T(!1)}}},[u.aiTema,u.aiCantidad]),[R,j]=_.useState([]);_.useEffect(()=>{(async()=>{var J;if(!N)return;const z=[];for(const te of v)if(te.respuestas)for(const[se,ie]of Object.entries(te.respuestas)){const le=N.preguntas.find(je=>je.id===se);if(!le||le.tipo!=="abierta")continue;const ue=ie;ue.tipo==="abierta"&&((J=ue.valorTexto)!=null&&J.trim())&&z.push(ue.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",z.length),z.length>0)try{const te=await Qht(z,30);console.log("Keywords generadas:",te),j(te)}catch(te){console.error("Error al extraer keywords:",te),j([])}else j([])})()},[N,v]);const P=_.useMemo(()=>{if(!N)return{};const Q={};for(const z of N.preguntas)z.tipo==="seleccion_multiple"&&(Q[z.id]={},(z.opciones||[]).forEach(J=>Q[z.id][J]=0));for(const z of v)for(const[J,te]of Object.entries(z.respuestas||{})){const se=te;if((se==null?void 0:se.tipo)==="seleccion_multiple")for(const ie of se.seleccionados||[])Q[J]||(Q[J]={}),Q[J][ie]=(Q[J][ie]||0)+1}return Q},[N,v]),M=_.useCallback(Q=>Q.map(z=>z.tipo==="abierta"?z:{...z,opciones:z.opciones.map(J=>J.text)}),[]),Z=_.useCallback(()=>d(BY()),[]),V=_.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un título");if(!u.creadorId)return alert("Debes seleccionar un creador");const Q={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:M(u.preguntas)},z=await Tht(Q);Z(),i(z),r("responder")},[u,M,Z]),W=_.useCallback(async(Q,z)=>{var te;if(window.confirm(`¿Eliminar "${z}"?
Se eliminarán la actividad, sus preguntas y respuestas. Esta acción no se puede deshacer.`)){if(await Iht(Q),s===Q){const se=n.filter(ie=>ie.id!==Q);i(((te=se[0])==null?void 0:te.id)||""),se.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),G=_.useCallback(async()=>{if(!N||!v.length)return;const Q=new vr("p","mm","a4"),z=20;let J=z;Q.setFontSize(20),Q.text(`Informe: ${N.titulo}`,z,J),J+=10,Q.setFontSize(12),Q.text(`Dimensión: ${N.dimension}`,z,J+=10),Q.text(`Subdimensión: ${N.subdimension}`,z,J+=7),Q.text(`Creador: ${N.creadorNombre} (${N.creadorPerfil})`,z,J+=7),Q.text(`Total de respuestas: ${v.length}`,z,J+=7),J+=10;for(const te of N.preguntas){if(J>250&&(Q.addPage(),J=z),Q.setFontSize(14),Q.text(`Pregunta: ${te.enunciado}`,z,J+=10),J+=5,Q.setFontSize(12),te.tipo==="seleccion_multiple"){const se=P[te.id]||{},ie=v.length;Object.entries(se).forEach(([le,ue])=>{const je=ie>0?Math.round(ue/ie*100):0;Q.text(`${le}: ${ue} respuestas (${je}%)`,z+5,J+=7)})}else{Q.text("Respuestas:",z,J+=7);for(const se of v){const ie=se.respuestas[te.id];if((ie==null?void 0:ie.tipo)==="abierta"&&ie.valorTexto){J>250&&(Q.addPage(),J=z),Q.text(`${se.userNombre}:`,z+5,J+=7);const le=Q.splitTextToSize(ie.valorTexto,170);Q.text(le,z+10,J+=7),J+=le.length*7}}}J+=10}if(R.length>0){J>250&&(Q.addPage(),J=z),Q.setFontSize(14),Q.text("Conceptos clave detectados:",z,J+=10),Q.setFontSize(12);const te=R.map(ie=>`${ie.keyword} (${Math.round(ie.score*100)}%)`).join(", "),se=Q.splitTextToSize(te,170);Q.text(se,z,J+=7)}Q.save(`informe_${N.titulo.replace(/\s+/g,"_")}.pdf`)},[N,v,P,R]),K=_.useCallback(Q=>{const z=e==null?void 0:e.isAdmin,J=Q.creadorId===(e==null?void 0:e.uid);return w&&(z||J)},[e,w]),ee=_.useCallback((Q,z)=>{x(J=>({...J,[Q.id]:Q.tipo==="abierta"?{tipo:"abierta",valorTexto:z}:{tipo:"seleccion_multiple",seleccionados:z}}))},[]),X=_.useCallback(async()=>{if(N){for(const Q of N.preguntas){const z=g[Q.id];if(z&&Q.tipo==="abierta"&&Q.maxPalabras){const J=PAe(z.valorTexto||"");if(J>Q.maxPalabras)return alert(`La respuesta a "${Q.enunciado}" supera el máximo de ${Q.maxPalabras} palabras (${J}).`)}}await Oht({activityId:N.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Anónimo",respuestas:g}),x({}),alert("¡Respuestas enviadas!")}},[N,g,e]);return o.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[o.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(WP,{className:"w-7 h-7 text-indigo-600"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),o.jsx(Hht,{value:t,onChange:r,canCreate:w})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[o.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:o.jsx(ky,{title:"Actividades",icon:o.jsx(mg,{className:"w-5 h-5 text-indigo-600"}),children:o.jsx(Vht,{items:n,selectedId:s,onSelect:Q=>{i(Q),r("responder")},canDelete:K,onDelete:W})})}),o.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&o.jsxs(ky,{title:"Nueva actividad / sesión",icon:o.jsx(sH,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[o.jsx($d,{className:"w-4 h-4"}),"Guardar"]}),children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Título"}),o.jsx("input",{value:u.titulo,onChange:Q=>f({titulo:Q.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Área de trabajo (Dimensión PME)"}),o.jsx("select",{value:u.dimension,onChange:Q=>f({dimension:Q.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(Yf).map(Q=>o.jsx("option",{value:Q,children:Q},Q))}),o.jsx("select",{value:u.subdimension,onChange:Q=>f({subdimension:Q.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(Yf[u.dimension]||[]).map(Q=>o.jsx("option",{value:Q,children:Q},Q))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Creador • Perfil"}),o.jsx("select",{value:u.creadorPerfil,onChange:Q=>f({creadorPerfil:Q.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:YQ.map(Q=>o.jsx("option",{value:Q,children:Q},Q))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Creador • Usuario"}),o.jsxs("select",{value:u.creadorId,onChange:Q=>{const z=Q.target.value,J=h.find(te=>te.id===z);f({creadorId:z,creadorNombre:(J==null?void 0:J.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[o.jsx("option",{value:"",children:"Seleccione…"}),h.filter(Q=>Q.profile===u.creadorPerfil).map(Q=>o.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[o.jsx(qee,{className:"w-4 h-4"})," Preguntas"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[o.jsx(Cl,{className:"w-4 h-4"})," Abierta"]}),o.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[o.jsx(Cl,{className:"w-4 h-4"})," Selección múltiple"]}),o.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[o.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[o.jsx(pEe,{className:"w-4 h-4"})," IA"]}),o.jsx("input",{value:u.aiTema,onChange:Q=>f({aiTema:Q.target.value}),placeholder:"Tema para IA (p. ej., evaluación formativa)",className:"border rounded-lg px-3 py-1.5"}),o.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:Q=>f({aiCantidad:parseInt(Q.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),o.jsxs("button",{onClick:L,disabled:S||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[o.jsx(Wp,{className:"w-4 h-4"}),S?"Generando…":"Generar con IA"]})]})]}),o.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((Q,z)=>o.jsx(Ght,{q:Q,index:z,onRemove:E,onPatch:F},Q.id)),u.preguntas.length===0&&o.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[o.jsx(Bi,{className:"w-4 h-4"}),"Añade preguntas abiertas o de selección múltiple (o usa IA)."]})]})]})]}),t==="responder"&&N&&o.jsx(ky,{title:`Responder: ${N.titulo}`,icon:o.jsx(Nl,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("button",{onClick:X,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[o.jsx($d,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[o.jsx(x6,{pill:!0,label:"Dimensión",value:N.dimension}),o.jsx(x6,{pill:!0,label:"Subdimensión",value:N.subdimension}),o.jsx(x6,{pill:!0,label:"Creador",value:`${N.creadorNombre} • ${N.creadorPerfil}`})]}),N.preguntas.map(Q=>o.jsx(Kht,{q:Q,respuestas:g,onChange:ee},Q.id))]})}),t==="respuestas_individuales"&&N&&o.jsx(ky,{title:`Respuestas individuales: ${N.titulo}`,icon:o.jsx(Nl,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:G,disabled:!v.length,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[o.jsx(Cm,{className:"w-4 h-4"}),"Descargar informe"]}),o.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[o.jsx(Mu,{className:"w-4 h-4"}),"Volver al dashboard"]})]}),children:o.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[o.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[o.jsx(ny,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",v.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:v.length>0?v.map(Q=>{var z;return o.jsxs("button",{onClick:()=>c(Q.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l===Q.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:o.jsx(ny,{className:"w-4 h-4 text-indigo-600"})}),o.jsx("span",{className:"font-medium",children:Q.userNombre})]}),o.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[o.jsx(ac,{className:"w-3.5 h-3.5"}),new Date(((z=Q.createdAt)==null?void 0:z.seconds)*1e3).toLocaleDateString()]})]},Q.userId)}):o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(ny,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No hay respuestas todavía"})]})})]})}),o.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:l?o.jsxs(o.Fragment,{children:[o.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[o.jsx(sH,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",o.jsx("span",{className:"text-indigo-600",children:(D=v.find(Q=>Q.userId===l))==null?void 0:D.userNombre})]}),o.jsx("div",{className:"space-y-6",children:N.preguntas.map(Q=>{var te;const z=v.find(se=>se.userId===l),J=(te=z==null?void 0:z.respuestas)==null?void 0:te[Q.id];return console.log("Respuesta encontrada:",{preguntaId:Q.id,tipo:Q.tipo,respuesta:J}),o.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:Q.tipo==="abierta"?o.jsx(iH,{className:"w-5 h-5 text-indigo-600"}):o.jsx(uw,{className:"w-5 h-5 text-indigo-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-slate-900",children:Q.enunciado}),o.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Q.tipo==="abierta"?"Respuesta abierta":"Selección múltiple"})]})]}),Q.tipo==="abierta"?(J==null?void 0:J.tipo)==="abierta"&&J.valorTexto?o.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:o.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:J.valorTexto})}):o.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):o.jsxs("div",{className:"space-y-2 mt-3",children:[(Q.opciones||[]).map(se=>{const le=((J==null?void 0:J.tipo)==="seleccion_multiple"?J.seleccionados||[]:[]).includes(se.text);return o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${le?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:le?o.jsx(Bi,{className:"w-4 h-4 text-indigo-600"}):o.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),o.jsx("span",{className:"text-sm",children:typeof se=="string"?se:se.text})]},typeof se=="string"?se:se.id)}),!J&&o.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},Q.id)})})]}):o.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&N&&o.jsxs(ky,{title:`Dashboard: ${N.titulo}`,icon:o.jsx(Hw,{className:"w-5 h-5 text-indigo-600"}),right:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[o.jsx(ny,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),K(N)&&o.jsxs("button",{onClick:()=>W(N.id,N.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[o.jsx(xi,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[o.jsx("div",{className:"mb-6",children:o.jsxs("button",{onClick:G,disabled:!v.length,className:"w-full md:w-auto inline-flex items-center justify-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-lg font-medium",title:v.length?"Descargar informe en PDF":"No hay respuestas para generar informe",children:[o.jsx(Cm,{className:"w-5 h-5"}),"Descargar Informe Global"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:o.jsx(ny,{className:"w-5 h-5 text-indigo-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),o.jsx("p",{className:"text-xl font-semibold",children:v.length})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:o.jsx(uw,{className:"w-5 h-5 text-emerald-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),o.jsx("p",{className:"text-xl font-semibold",children:N.preguntas.length})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(pg,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),o.jsx("p",{className:"text-sm font-medium truncate",children:N.creadorNombre})]})]})}),o.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(ac,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),o.jsx("p",{className:"text-sm font-medium",children:(()=>{const Q=N.createdAt,z=Q!=null&&Q.toDate?Q.toDate():Q!=null&&Q.seconds?new Date(Q.seconds*1e3):Q?new Date(Q):null;return z?z.toLocaleDateString():"No disponible"})()})]})]})})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(cw,{className:"w-5 h-5 text-indigo-600"}),o.jsx("h4",{className:"font-semibold",children:"Resultados de selección múltiple"})]}),o.jsxs("div",{className:"space-y-4",children:[N.preguntas.filter(Q=>Q.tipo==="seleccion_multiple").map(Q=>o.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[o.jsx("p",{className:"font-medium mb-3 text-slate-700",children:Q.enunciado}),Object.entries(P[Q.id]||{}).map(([z,J])=>o.jsx(zht,{label:z,value:J},z)),o.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[o.jsx(s1,{className:"w-4 h-4"}),"Total respuestas: ",v.length]})]},Q.id)),N.preguntas.filter(Q=>Q.tipo==="seleccion_multiple").length===0&&o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(uw,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No hay preguntas de selección múltiple en esta actividad."})]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(rwe,{className:"w-5 h-5 text-indigo-600"}),o.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),R.length?o.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(Q=>o.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(Q.score*18)}px`},children:Q.keyword},Q.keyword))}):o.jsxs("div",{className:"text-center py-8 text-slate-500",children:[o.jsx(iH,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"Aún no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var SE=e=>e.type==="checkbox",Gp=e=>e instanceof Date,xl=e=>e==null;const MAe=e=>typeof e=="object";var Zs=e=>!xl(e)&&!Array.isArray(e)&&MAe(e)&&!Gp(e),Wht=e=>Zs(e)&&e.target?SE(e.target)?e.target.checked:e.target.value:e,Xht=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Yht=(e,t)=>e.has(Xht(t)),Jht=e=>{const t=e.constructor&&e.constructor.prototype;return Zs(t)&&t.hasOwnProperty("isPrototypeOf")},XM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ya(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(XM&&(e instanceof Blob||n))&&(r||Zs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Jht(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ya(e[a]));else return e;return t}var vj=e=>/^\w*$/.test(e),Ja=e=>e===void 0,bj=e=>Array.isArray(e)?e.filter(Boolean):[],YM=e=>bj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cr=(e,t,r)=>{if(!t||!Zs(e))return r;const n=(vj(t)?[t]:YM(t)).reduce((a,s)=>xl(a)?a:a[s],e);return Ja(n)||n===e?Ja(e[t])?r:e[t]:n},LA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=vj(t)?[t]:YM(t),s=a.length,i=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==i){const u=e[l];c=Zs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const TY={BLUR:"blur",FOCUS_OUT:"focusout"},Lu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},qf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},UAe=at.createContext(null);UAe.displayName="HookFormContext";const Zht=()=>at.useContext(UAe);var e0t=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Lu.all&&(t._proxyFormState[i]=!n||Lu.all),e[i]}});return a};const QAe=typeof window<"u"?at.useLayoutEffect:at.useEffect;var WA=e=>typeof e=="string",t0t=(e,t,r,n,a)=>WA(e)?(n&&t.watch.add(e),cr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),cr(r,s))):(n&&(t.watchAll=!0),r),TD=e=>xl(e)||!MAe(e);function q0(e,t,r=new WeakSet){if(TD(e)||TD(t))return e===t;if(Gp(e)&&Gp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const l=t[s];if(Gp(i)&&Gp(l)||Zs(i)&&Zs(l)||Array.isArray(i)&&Array.isArray(l)?!q0(i,l,r):i!==l)return!1}}return!0}var r0t=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},nc=e=>Array.isArray(e)?e:[e],IY=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},ml=e=>Zs(e)&&!Object.keys(e).length,JM=e=>e.type==="file",Bd=e=>typeof e=="function",ZS=e=>{if(!XM)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},HAe=e=>e.type==="select-multiple",ZM=e=>e.type==="radio",n0t=e=>ZM(e)||SE(e),v6=e=>ZS(e)&&e.isConnected;function a0t(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ja(e)?n++:e[t[n++]];return e}function s0t(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ja(e[t]))return!1;return!0}function $s(e,t){const r=Array.isArray(t)?t:vj(t)?[t]:YM(t),n=r.length===1?e:a0t(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Zs(n)&&ml(n)||Array.isArray(n)&&s0t(n))&&$s(e,r.slice(0,-1)),e}var VAe=e=>{for(const t in e)if(Bd(e[t]))return!0;return!1};function e4(e,t={}){const r=Array.isArray(e);if(Zs(e)||r)for(const n in e)Array.isArray(e[n])||Zs(e[n])&&!VAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},e4(e[n],t[n])):xl(e[n])||(t[n]=!0);return t}function zAe(e,t,r){const n=Array.isArray(e);if(Zs(e)||n)for(const a in e)Array.isArray(e[a])||Zs(e[a])&&!VAe(e[a])?Ja(t)||TD(r[a])?r[a]=Array.isArray(e[a])?e4(e[a],[]):{...e4(e[a])}:zAe(e[a],xl(t)?{}:t[a],r[a]):r[a]=!q0(e[a],t[a]);return r}var jy=(e,t)=>zAe(e,t,e4(t));const FY={value:!1,isValid:!1},OY={value:!0,isValid:!0};var $Ae=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ja(e[0].attributes.value)?Ja(e[0].value)||e[0].value===""?OY:{value:e[0].value,isValid:!0}:OY:FY}return FY},GAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ja(e)?e:t?e===""?NaN:e&&+e:r&&WA(e)?new Date(e):n?n(e):e;const DY={isValid:!1,value:null};var KAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,DY):DY;function PY(e){const t=e.ref;return JM(t)?t.files:ZM(t)?KAe(e.refs).value:HAe(t)?[...t.selectedOptions].map(({value:r})=>r):SE(t)?$Ae(e.refs).value:GAe(Ja(t.value)?e.ref.value:t.value,e)}var i0t=(e,t,r,n)=>{const a={};for(const s of e){const i=cr(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},t4=e=>e instanceof RegExp,By=e=>Ja(e)?e:t4(e)?e.source:Zs(e)?t4(e.value)?e.value.source:e.value:e,Cv=e=>({isOnSubmit:!e||e===Lu.onSubmit,isOnBlur:e===Lu.onBlur,isOnChange:e===Lu.onChange,isOnAll:e===Lu.all,isOnTouch:e===Lu.onTouched});const RY="AsyncFunction";var o0t=e=>!!e&&!!e.validate&&!!(Bd(e.validate)&&e.validate.constructor.name===RY||Zs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===RY)),l0t=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ID=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const qv=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=cr(e,a);if(s){const{_f:i,...l}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(qv(l,t))break}else if(Zs(l)&&qv(l,t))break}}};function LY(e,t,r){const n=cr(e,r);if(n||vj(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=cr(t,s),l=cr(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};a.pop()}return{name:r}}var c0t=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return ml(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Lu.all))},u0t=(e,t,r)=>!e||!t||e===t||nc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),d0t=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,A0t=(e,t)=>!bj(cr(e,t)).length&&$s(e,t),qAe=(e,t,r)=>{const n=nc(cr(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},$5=e=>WA(e);function MY(e,t,r="validate"){if($5(e)||Array.isArray(e)&&e.every($5)||LA(e)&&!e)return{type:r,message:$5(e)?e:"",ref:t}}var Zx=e=>Zs(e)&&!t4(e)?e:{value:e,message:""},FD=async(e,t,r,n,a,s)=>{const{ref:i,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:v,mount:y}=e._f,w=cr(r,x);if(!y||t.has(x))return{};const N=l?l[0]:i,B=j=>{a&&N.reportValidity&&(N.setCustomValidity(LA(j)?"":j||""),N.reportValidity())},k={},F=ZM(i),E=SE(i),S=F||E,T=(v||JM(i))&&Ja(i.value)&&Ja(w)||ZS(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,L=r0t.bind(null,x,n,k),R=(j,P,M,Z=qf.maxLength,V=qf.minLength)=>{const W=j?P:M;k[x]={type:j?Z:V,message:W,ref:i,...L(j?Z:V,W)}};if(s?!Array.isArray(w)||!w.length:c&&(!S&&(T||xl(w))||LA(w)&&!w||E&&!$Ae(l).isValid||F&&!KAe(l).isValid)){const{value:j,message:P}=$5(c)?{value:!!c,message:c}:Zx(c);if(j&&(k[x]={type:qf.required,message:P,ref:N,...L(qf.required,P)},!n))return B(P),k}if(!T&&(!xl(f)||!xl(h))){let j,P;const M=Zx(h),Z=Zx(f);if(!xl(w)&&!isNaN(w)){const V=i.valueAsNumber||w&&+w;xl(M.value)||(j=V>M.value),xl(Z.value)||(P=V<Z.value)}else{const V=i.valueAsDate||new Date(w),W=ee=>new Date(new Date().toDateString()+" "+ee),G=i.type=="time",K=i.type=="week";WA(M.value)&&w&&(j=G?W(w)>W(M.value):K?w>M.value:V>new Date(M.value)),WA(Z.value)&&w&&(P=G?W(w)<W(Z.value):K?w<Z.value:V<new Date(Z.value))}if((j||P)&&(R(!!j,M.message,Z.message,qf.max,qf.min),!n))return B(k[x].message),k}if((u||d)&&!T&&(WA(w)||s&&Array.isArray(w))){const j=Zx(u),P=Zx(d),M=!xl(j.value)&&w.length>+j.value,Z=!xl(P.value)&&w.length<+P.value;if((M||Z)&&(R(M,j.message,P.message),!n))return B(k[x].message),k}if(m&&!T&&WA(w)){const{value:j,message:P}=Zx(m);if(t4(j)&&!w.match(j)&&(k[x]={type:qf.pattern,message:P,ref:i,...L(qf.pattern,P)},!n))return B(P),k}if(g){if(Bd(g)){const j=await g(w,r),P=MY(j,N);if(P&&(k[x]={...P,...L(qf.validate,P.message)},!n))return B(P.message),k}else if(Zs(g)){let j={};for(const P in g){if(!ml(j)&&!n)break;const M=MY(await g[P](w,r),N,P);M&&(j={...M,...L(P,M.message)},B(M.message),n&&(k[x]=j))}if(!ml(j)&&(k[x]={ref:N,...j},!n))return k}}return B(!0),k};const f0t={mode:Lu.onSubmit,reValidateMode:Lu.onChange,shouldFocusError:!0};function h0t(e={}){let t={...f0t,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Bd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Zs(t.defaultValues)||Zs(t.values)?Ya(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ya(a),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:IY(),state:IY()},m=t.criteriaMode===Lu.all,g=xe=>Oe=>{clearTimeout(u),u=setTimeout(xe,Oe)},x=async xe=>{if(!t.disabled&&(d.isValid||f.isValid||xe)){const Oe=t.resolver?ml((await E()).errors):await T(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},v=(xe,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((xe||Array.from(l.mount)).forEach(Re=>{Re&&(Oe?Fa(r.validatingFields,Re,Oe):$s(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ml(r.validatingFields)}))},y=(xe,Oe=[],Re,$e,et=!0,ct=!0)=>{if($e&&Re&&!t.disabled){if(i.action=!0,ct&&Array.isArray(cr(n,xe))){const gt=Re(cr(n,xe),$e.argA,$e.argB);et&&Fa(n,xe,gt)}if(ct&&Array.isArray(cr(r.errors,xe))){const gt=Re(cr(r.errors,xe),$e.argA,$e.argB);et&&Fa(r.errors,xe,gt),A0t(r.errors,xe)}if((d.touchedFields||f.touchedFields)&&ct&&Array.isArray(cr(r.touchedFields,xe))){const gt=Re(cr(r.touchedFields,xe),$e.argA,$e.argB);et&&Fa(r.touchedFields,xe,gt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=jy(a,s)),h.state.next({name:xe,isDirty:R(xe,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,xe,Oe)},w=(xe,Oe)=>{Fa(r.errors,xe,Oe),h.state.next({errors:r.errors})},N=xe=>{r.errors=xe,h.state.next({errors:r.errors,isValid:!1})},B=(xe,Oe,Re,$e)=>{const et=cr(n,xe);if(et){const ct=cr(s,xe,Ja(Re)?cr(a,xe):Re);Ja(ct)||$e&&$e.defaultChecked||Oe?Fa(s,xe,Oe?ct:PY(et._f)):M(xe,ct),i.mount&&x()}},k=(xe,Oe,Re,$e,et)=>{let ct=!1,gt=!1;const It={name:xe};if(!t.disabled){if(!Re||$e){(d.isDirty||f.isDirty)&&(gt=r.isDirty,r.isDirty=It.isDirty=R(),ct=gt!==It.isDirty);const Mt=q0(cr(a,xe),Oe);gt=!!cr(r.dirtyFields,xe),Mt?$s(r.dirtyFields,xe):Fa(r.dirtyFields,xe,!0),It.dirtyFields=r.dirtyFields,ct=ct||(d.dirtyFields||f.dirtyFields)&&gt!==!Mt}if(Re){const Mt=cr(r.touchedFields,xe);Mt||(Fa(r.touchedFields,xe,Re),It.touchedFields=r.touchedFields,ct=ct||(d.touchedFields||f.touchedFields)&&Mt!==Re)}ct&&et&&h.state.next(It)}return ct?It:{}},F=(xe,Oe,Re,$e)=>{const et=cr(r.errors,xe),ct=(d.isValid||f.isValid)&&LA(Oe)&&r.isValid!==Oe;if(t.delayError&&Re?(c=g(()=>w(xe,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Fa(r.errors,xe,Re):$s(r.errors,xe)),(Re?!q0(et,Re):et)||!ml($e)||ct){const gt={...$e,...ct&&LA(Oe)?{isValid:Oe}:{},errors:r.errors,name:xe};r={...r,...gt},h.state.next(gt)}},E=async xe=>{v(xe,!0);const Oe=await t.resolver(s,t.context,i0t(xe||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(xe),Oe},S=async xe=>{const{errors:Oe}=await E(xe);if(xe)for(const Re of xe){const $e=cr(Oe,Re);$e?Fa(r.errors,Re,$e):$s(r.errors,Re)}else r.errors=Oe;return Oe},T=async(xe,Oe,Re={valid:!0})=>{for(const $e in xe){const et=xe[$e];if(et){const{_f:ct,...gt}=et;if(ct){const It=l.array.has(ct.name),Mt=et._f&&o0t(et._f);Mt&&d.validatingFields&&v([$e],!0);const Pt=await FD(et,l.disabled,s,m,t.shouldUseNativeValidation&&!Oe,It);if(Mt&&d.validatingFields&&v([$e]),Pt[ct.name]&&(Re.valid=!1,Oe))break;!Oe&&(cr(Pt,ct.name)?It?qAe(r.errors,Pt,ct.name):Fa(r.errors,ct.name,Pt[ct.name]):$s(r.errors,ct.name))}!ml(gt)&&await T(gt,Oe,Re)}}return Re.valid},L=()=>{for(const xe of l.unMount){const Oe=cr(n,xe);Oe&&(Oe._f.refs?Oe._f.refs.every(Re=>!v6(Re)):!v6(Oe._f.ref))&&se(xe)}l.unMount=new Set},R=(xe,Oe)=>!t.disabled&&(xe&&Oe&&Fa(s,xe,Oe),!q0(ee(),a)),j=(xe,Oe,Re)=>t0t(xe,l,{...i.mount?s:Ja(Oe)?a:WA(xe)?{[xe]:Oe}:Oe},Re,Oe),P=xe=>bj(cr(i.mount?s:a,xe,t.shouldUnregister?cr(a,xe,[]):[])),M=(xe,Oe,Re={})=>{const $e=cr(n,xe);let et=Oe;if($e){const ct=$e._f;ct&&(!ct.disabled&&Fa(s,xe,GAe(Oe,ct)),et=ZS(ct.ref)&&xl(Oe)?"":Oe,HAe(ct.ref)?[...ct.ref.options].forEach(gt=>gt.selected=et.includes(gt.value)):ct.refs?SE(ct.ref)?ct.refs.forEach(gt=>{(!gt.defaultChecked||!gt.disabled)&&(Array.isArray(et)?gt.checked=!!et.find(It=>It===gt.value):gt.checked=et===gt.value||!!et)}):ct.refs.forEach(gt=>gt.checked=gt.value===et):JM(ct.ref)?ct.ref.value="":(ct.ref.value=et,ct.ref.type||h.state.next({name:xe,values:Ya(s)})))}(Re.shouldDirty||Re.shouldTouch)&&k(xe,et,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&K(xe)},Z=(xe,Oe,Re)=>{for(const $e in Oe){if(!Oe.hasOwnProperty($e))return;const et=Oe[$e],ct=xe+"."+$e,gt=cr(n,ct);(l.array.has(xe)||Zs(et)||gt&&!gt._f)&&!Gp(et)?Z(ct,et,Re):M(ct,et,Re)}},V=(xe,Oe,Re={})=>{const $e=cr(n,xe),et=l.array.has(xe),ct=Ya(Oe);Fa(s,xe,ct),et?(h.array.next({name:xe,values:Ya(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Re.shouldDirty&&h.state.next({name:xe,dirtyFields:jy(a,s),isDirty:R(xe,ct)})):$e&&!$e._f&&!xl(ct)?Z(xe,ct,Re):M(xe,ct,Re),ID(xe,l)&&h.state.next({...r,name:xe}),h.state.next({name:i.mount?xe:void 0,values:Ya(s)})},W=async xe=>{i.mount=!0;const Oe=xe.target;let Re=Oe.name,$e=!0;const et=cr(n,Re),ct=Mt=>{$e=Number.isNaN(Mt)||Gp(Mt)&&isNaN(Mt.getTime())||q0(Mt,cr(s,Re,Mt))},gt=Cv(t.mode),It=Cv(t.reValidateMode);if(et){let Mt,Pt;const Qt=Oe.type?PY(et._f):Wht(xe),wt=xe.type===TY.BLUR||xe.type===TY.FOCUS_OUT,Tr=!l0t(et._f)&&!t.resolver&&!cr(r.errors,Re)&&!et._f.deps||d0t(wt,cr(r.touchedFields,Re),r.isSubmitted,It,gt),tr=ID(Re,l,wt);Fa(s,Re,Qt),wt?(!Oe||!Oe.readOnly)&&(et._f.onBlur&&et._f.onBlur(xe),c&&c(0)):et._f.onChange&&et._f.onChange(xe);const an=k(Re,Qt,wt),Sr=!ml(an)||tr;if(!wt&&h.state.next({name:Re,type:xe.type,values:Ya(s)}),Tr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?wt&&x():wt||x()),Sr&&h.state.next({name:Re,...tr?{}:an});if(!wt&&tr&&h.state.next({...r}),t.resolver){const{errors:$r}=await E([Re]);if(ct(Qt),$e){const Fn=LY(r.errors,n,Re),Pr=LY($r,n,Fn.name||Re);Mt=Pr.error,Re=Pr.name,Pt=ml($r)}}else v([Re],!0),Mt=(await FD(et,l.disabled,s,m,t.shouldUseNativeValidation))[Re],v([Re]),ct(Qt),$e&&(Mt?Pt=!1:(d.isValid||f.isValid)&&(Pt=await T(n,!0)));$e&&(et._f.deps&&K(et._f.deps),F(Re,Pt,Mt,an))}},G=(xe,Oe)=>{if(cr(r.errors,Oe)&&xe.focus)return xe.focus(),1},K=async(xe,Oe={})=>{let Re,$e;const et=nc(xe);if(t.resolver){const ct=await S(Ja(xe)?xe:et);Re=ml(ct),$e=xe?!et.some(gt=>cr(ct,gt)):Re}else xe?($e=(await Promise.all(et.map(async ct=>{const gt=cr(n,ct);return await T(gt&&gt._f?{[ct]:gt}:gt)}))).every(Boolean),!(!$e&&!r.isValid)&&x()):$e=Re=await T(n);return h.state.next({...!WA(xe)||(d.isValid||f.isValid)&&Re!==r.isValid?{}:{name:xe},...t.resolver||!xe?{isValid:Re}:{},errors:r.errors}),Oe.shouldFocus&&!$e&&qv(n,G,xe?et:l.mount),$e},ee=xe=>{const Oe={...i.mount?s:a};return Ja(xe)?Oe:WA(xe)?cr(Oe,xe):xe.map(Re=>cr(Oe,Re))},X=(xe,Oe)=>({invalid:!!cr((Oe||r).errors,xe),isDirty:!!cr((Oe||r).dirtyFields,xe),error:cr((Oe||r).errors,xe),isValidating:!!cr(r.validatingFields,xe),isTouched:!!cr((Oe||r).touchedFields,xe)}),D=xe=>{xe&&nc(xe).forEach(Oe=>$s(r.errors,Oe)),h.state.next({errors:xe?r.errors:{}})},Q=(xe,Oe,Re)=>{const $e=(cr(n,xe,{_f:{}})._f||{}).ref,et=cr(r.errors,xe)||{},{ref:ct,message:gt,type:It,...Mt}=et;Fa(r.errors,xe,{...Mt,...Oe,ref:$e}),h.state.next({name:xe,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&$e&&$e.focus&&$e.focus()},z=(xe,Oe)=>Bd(xe)?h.state.subscribe({next:Re=>"values"in Re&&xe(j(void 0,Oe),Re)}):j(xe,Oe,!0),J=xe=>h.state.subscribe({next:Oe=>{u0t(xe.name,Oe.name,xe.exact)&&c0t(Oe,xe.formState||d,Be,xe.reRenderRoot)&&xe.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,te=xe=>(i.mount=!0,f={...f,...xe.formState},J({...xe,formState:f})),se=(xe,Oe={})=>{for(const Re of xe?nc(xe):l.mount)l.mount.delete(Re),l.array.delete(Re),Oe.keepValue||($s(n,Re),$s(s,Re)),!Oe.keepError&&$s(r.errors,Re),!Oe.keepDirty&&$s(r.dirtyFields,Re),!Oe.keepTouched&&$s(r.touchedFields,Re),!Oe.keepIsValidating&&$s(r.validatingFields,Re),!t.shouldUnregister&&!Oe.keepDefaultValue&&$s(a,Re);h.state.next({values:Ya(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:R()}:{}}),!Oe.keepIsValid&&x()},ie=({disabled:xe,name:Oe})=>{(LA(xe)&&i.mount||xe||l.disabled.has(Oe))&&(xe?l.disabled.add(Oe):l.disabled.delete(Oe))},le=(xe,Oe={})=>{let Re=cr(n,xe);const $e=LA(Oe.disabled)||LA(t.disabled);return Fa(n,xe,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:xe}},name:xe,mount:!0,...Oe}}),l.mount.add(xe),Re?ie({disabled:LA(Oe.disabled)?Oe.disabled:t.disabled,name:xe}):B(xe,!0,Oe.value),{...$e?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:By(Oe.min),max:By(Oe.max),minLength:By(Oe.minLength),maxLength:By(Oe.maxLength),pattern:By(Oe.pattern)}:{},name:xe,onChange:W,onBlur:W,ref:et=>{if(et){le(xe,Oe),Re=cr(n,xe);const ct=Ja(et.value)&&et.querySelectorAll&&et.querySelectorAll("input,select,textarea")[0]||et,gt=n0t(ct),It=Re._f.refs||[];if(gt?It.find(Mt=>Mt===ct):ct===Re._f.ref)return;Fa(n,xe,{_f:{...Re._f,...gt?{refs:[...It.filter(v6),ct,...Array.isArray(cr(a,xe))?[{}]:[]],ref:{type:ct.type,name:xe}}:{ref:ct}}}),B(xe,!1,void 0,ct)}else Re=cr(n,xe,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(Yht(l.array,xe)&&i.action)&&l.unMount.add(xe)}}},ue=()=>t.shouldFocusError&&qv(n,G,l.mount),je=xe=>{LA(xe)&&(h.state.next({disabled:xe}),qv(n,(Oe,Re)=>{const $e=cr(n,Re);$e&&(Oe.disabled=$e._f.disabled||xe,Array.isArray($e._f.refs)&&$e._f.refs.forEach(et=>{et.disabled=$e._f.disabled||xe}))},0,!1))},ae=(xe,Oe)=>async Re=>{let $e;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let et=Ya(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ct,values:gt}=await E();r.errors=ct,et=Ya(gt)}else await T(n);if(l.disabled.size)for(const ct of l.disabled)$s(et,ct);if($s(r.errors,"root"),ml(r.errors)){h.state.next({errors:{}});try{await xe(et,Re)}catch(ct){$e=ct}}else Oe&&await Oe({...r.errors},Re),ue(),setTimeout(ue);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ml(r.errors)&&!$e,submitCount:r.submitCount+1,errors:r.errors}),$e)throw $e},Ne=(xe,Oe={})=>{cr(n,xe)&&(Ja(Oe.defaultValue)?V(xe,Ya(cr(a,xe))):(V(xe,Oe.defaultValue),Fa(a,xe,Ya(Oe.defaultValue))),Oe.keepTouched||$s(r.touchedFields,xe),Oe.keepDirty||($s(r.dirtyFields,xe),r.isDirty=Oe.defaultValue?R(xe,Ya(cr(a,xe))):R()),Oe.keepError||($s(r.errors,xe),d.isValid&&x()),h.state.next({...r}))},ke=(xe,Oe={})=>{const Re=xe?Ya(xe):a,$e=Ya(Re),et=ml(xe),ct=et?a:$e;if(Oe.keepDefaultValues||(a=Re),!Oe.keepValues){if(Oe.keepDirtyValues){const gt=new Set([...l.mount,...Object.keys(jy(a,s))]);for(const It of Array.from(gt))cr(r.dirtyFields,It)?Fa(ct,It,cr(s,It)):V(It,cr(ct,It))}else{if(XM&&Ja(xe))for(const gt of l.mount){const It=cr(n,gt);if(It&&It._f){const Mt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(ZS(Mt)){const Pt=Mt.closest("form");if(Pt){Pt.reset();break}}}}if(Oe.keepFieldsRef)for(const gt of l.mount)V(gt,cr(ct,gt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Ya(a):{}:Ya(ct),h.array.next({values:{...ct}}),h.state.next({values:{...ct}})}l={mount:Oe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:et?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!q0(xe,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:et?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?jy(a,s):r.dirtyFields:Oe.keepDefaultValues&&xe?jy(a,xe):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(xe,Oe)=>ke(Bd(xe)?xe(s):xe,Oe),he=(xe,Oe={})=>{const Re=cr(n,xe),$e=Re&&Re._f;if($e){const et=$e.refs?$e.refs[0]:$e.ref;et.focus&&(et.focus(),Oe.shouldSelect&&Bd(et.select)&&et.select())}},Be=xe=>{r={...r,...xe}},We={control:{register:le,unregister:se,getFieldState:X,handleSubmit:ae,setError:Q,_subscribe:J,_runSchema:E,_focusError:ue,_getWatch:j,_getDirty:R,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:N,_getFieldArray:P,_reset:ke,_resetDefaultValues:()=>Bd(t.defaultValues)&&t.defaultValues().then(xe=>{_e(xe,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:je,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(xe){i=xe},get _defaultValues(){return a},get _names(){return l},set _names(xe){l=xe},get _formState(){return r},get _options(){return t},set _options(xe){t={...t,...xe}}},subscribe:te,trigger:K,register:le,handleSubmit:ae,watch:z,setValue:V,getValues:ee,reset:_e,resetField:Ne,clearErrors:D,unregister:se,setError:Q,setFocus:he,getFieldState:X};return{...We,formControl:We}}var O0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},b6=(e,t,r={})=>r.shouldFocus||Ja(r.shouldFocus)?r.focusName||`${e}.${Ja(r.focusIndex)?t:r.focusIndex}.`:"",y6=(e,t)=>[...e,...nc(t)],w6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function E6(e,t,r){return[...e.slice(0,t),...nc(r),...e.slice(t)]}var C6=(e,t,r)=>Array.isArray(e)?(Ja(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],N6=(e,t)=>[...nc(t),...nc(e)];function m0t(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return bj(n).length?n:[]}var _6=(e,t)=>Ja(t)?[]:m0t(e,nc(t).sort((r,n)=>r-n)),S6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},UY=(e,t,r)=>(e[t]=r,e);function p0t(e){const t=Zht(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[l,c]=at.useState(r._getFieldArray(n)),u=at.useRef(r._getFieldArray(n).map(O0)),d=at.useRef(l),f=at.useRef(!1);d.current=l,r._names.array.add(n),at.useMemo(()=>i&&r.register(n,i),[r,i,n]),QAe(()=>r._subjects.array.subscribe({next:({values:k,name:F})=>{if(F===n||!F){const E=cr(k,n);Array.isArray(E)&&(c(E),u.current=E.map(O0))}}}).unsubscribe,[r,n]);const h=at.useCallback(k=>{f.current=!0,r._setFieldArray(n,k)},[r,n]),m=(k,F)=>{const E=nc(Ya(k)),S=y6(r._getFieldArray(n),E);r._names.focus=b6(n,S.length-1,F),u.current=y6(u.current,E.map(O0)),h(S),c(S),r._setFieldArray(n,S,y6,{argA:w6(k)})},g=(k,F)=>{const E=nc(Ya(k)),S=N6(r._getFieldArray(n),E);r._names.focus=b6(n,0,F),u.current=N6(u.current,E.map(O0)),h(S),c(S),r._setFieldArray(n,S,N6,{argA:w6(k)})},x=k=>{const F=_6(r._getFieldArray(n),k);u.current=_6(u.current,k),h(F),c(F),!Array.isArray(cr(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,F,_6,{argA:k})},v=(k,F,E)=>{const S=nc(Ya(F)),T=E6(r._getFieldArray(n),k,S);r._names.focus=b6(n,k,E),u.current=E6(u.current,k,S.map(O0)),h(T),c(T),r._setFieldArray(n,T,E6,{argA:k,argB:w6(F)})},y=(k,F)=>{const E=r._getFieldArray(n);S6(E,k,F),S6(u.current,k,F),h(E),c(E),r._setFieldArray(n,E,S6,{argA:k,argB:F},!1)},w=(k,F)=>{const E=r._getFieldArray(n);C6(E,k,F),C6(u.current,k,F),h(E),c(E),r._setFieldArray(n,E,C6,{argA:k,argB:F},!1)},N=(k,F)=>{const E=Ya(F),S=UY(r._getFieldArray(n),k,E);u.current=[...S].map((T,L)=>!T||L===k?O0():u.current[L]),h(S),c([...S]),r._setFieldArray(n,S,UY,{argA:k,argB:E},!0,!1)},B=k=>{const F=nc(Ya(k));u.current=F.map(O0),h([...F]),c([...F]),r._setFieldArray(n,[...F],E=>E,{},!0,!1)};return at.useEffect(()=>{if(r._state.action=!1,ID(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!Cv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Cv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(k=>{const F=cr(k.errors,n),E=cr(r._formState.errors,n);(E?!F&&E.type||F&&(E.type!==F.type||E.message!==F.message):F&&F.type)&&(F?Fa(r._formState.errors,n,F):$s(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const k=cr(r._fields,n);k&&k._f&&!(Cv(r._options.reValidateMode).isOnSubmit&&Cv(r._options.mode).isOnSubmit)&&FD(k,r._names.disabled,r._formValues,r._options.criteriaMode===Lu.all,r._options.shouldUseNativeValidation,!0).then(F=>!ml(F)&&r._subjects.state.next({errors:qAe(r._formState.errors,F,n)}))}r._subjects.state.next({name:n,values:Ya(r._formValues)}),r._names.focus&&qv(r._fields,(k,F)=>{if(r._names.focus&&F.startsWith(r._names.focus)&&k.focus)return k.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[l,n,r]),at.useEffect(()=>(!cr(r._formValues,n)&&r._setFieldArray(n),()=>{const k=(F,E)=>{const S=cr(r._fields,F);S&&S._f&&(S._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):k(n,!1)}),[n,r,a,s]),{swap:at.useCallback(y,[h,n,r]),move:at.useCallback(w,[h,n,r]),prepend:at.useCallback(g,[h,n,r]),append:at.useCallback(m,[h,n,r]),remove:at.useCallback(x,[h,n,r]),insert:at.useCallback(v,[h,n,r]),update:at.useCallback(N,[h,n,r]),replace:at.useCallback(B,[h,n,r]),fields:at.useMemo(()=>l.map((k,F)=>({...k,[a]:u.current[F]||O0()})),[l,a])}}function g0t(e={}){const t=at.useRef(void 0),r=at.useRef(void 0),[n,a]=at.useState({isDirty:!1,isValidating:!1,isLoading:Bd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Bd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Bd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...l}=h0t(e);t.current={...l,formState:n}}const s=t.current.control;return s._options=e,QAe(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),s._formState.isReady=!0,i},[s]),at.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),at.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),at.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),at.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),at.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),at.useEffect(()=>{e.values&&!q0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),at.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=e0t(n,s),t.current}const OD=vt(wr,"alternancias");async function x0t(e){return(await hn(OD,{...e,createdAt:Is(),updatedAt:Is()})).id}async function v0t({especialidad:e,pageSize:t=10,lastDoc:r}){let n=zt(OD,hr("createdAt","desc"),Rd(t));e&&(n=zt(OD,Br("especialidad","==",e),hr("createdAt","desc"),Rd(t))),r&&(n=zt(n,fee(r)));const a=await Tn(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function b0t(e,t){const r=sr(wr,"alternancias",e);await cc(r,{...t,updatedAt:Is()})}async function y0t(e){const t=sr(wr,"alternancias",e);await Ra(t)}async function w0t(e,t,r){const n=vt(wr,"alternancias",e,t);await hn(n,{...r,createdAt:Is()})}async function E0t(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=z2(zP,r);await QP(n,t);const a=await D4(n);return await w0t(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const Ep=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return o.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),o.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},IA=({children:e,hint:t})=>o.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&o.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),r5=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return o.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},Cp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return o.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},C0t=({currentUser:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(null),[s,i]=_.useState(!1),{register:l,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:m}}=g0t({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=p0t({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],v=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!v||x.some(M=>v.includes(M))))return o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[o.jsx(q2e,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=M=>(M||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),N=(M,Z)=>{var V;return!M||!Z?[]:((V=Dye[M])==null?void 0:V[Z])??[]},B=f("especialidad"),k=f("modulos")||[],F=_.useMemo(()=>B?Iye[B]??[]:[],[B]),E=_.useMemo(()=>B?Oye[B]??[]:[],[B]);_.useEffect(()=>{h("curso",[]),h("modulos",[]);const M=[...f("actividades")||[]].map(Z=>({...Z,modulo:"",oa:""}));h("actividades",M)},[B]),_.useEffect(()=>{const M=[...f("actividades")||[]].map(Z=>Z.modulo&&!k.includes(Z.modulo)?{...Z,modulo:"",oa:""}:Z);h("actividades",M)},[k]);const S=async()=>{i(!0);const{items:M}=await v0t({});r(M),i(!1)};_.useEffect(()=>{S()},[]);const T=async M=>{n?await b0t(n,{...M}):await x0t({...M,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await S()},L=M=>{const Z=Array.isArray(M.curso)?M.curso:M.curso?[M.curso]:[],V=Array.isArray(M.modulos)?M.modulos.map(G=>w(G)):[],W=Array.isArray(M.actividades)?M.actividades.map(G=>({...G,modulo:G!=null&&G.modulo?w(G.modulo):"",oa:(G==null?void 0:G.oa)||""})):[];d({...M,curso:Z,modulos:V,actividades:W}),a(M.id),window.scrollTo({top:0,behavior:"smooth"})},R=async M=>{confirm("¿Eliminar esta alternancia?")&&(await y0t(M),await S())},j=async(M,Z)=>{await E0t(M,Z),alert("Evidencia subida correctamente")},P=M=>{const Z=Array.from(M.currentTarget.selectedOptions).map(V=>V.value);h("curso",Z,{shouldDirty:!0})};return o.jsxs("div",{className:"p-4 md:p-6",children:[o.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:o.jsx(p_,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),o.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Cp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[o.jsx(Nm,{className:"w-4 h-4"}),"Limpiar"]}),o.jsxs(Cp,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?o.jsx(vl,{className:"w-4 h-4 animate-spin"}):o.jsx($d,{className:"w-4 h-4"}),"Guardar"]})]})]})}),o.jsx(Ep,{title:"Planes guardados",icon:o.jsx(mg,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?o.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[o.jsx(vl,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?o.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(M=>o.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[o.jsx(Tv,{className:"w-4 h-4 text-indigo-600"}),M.especialidad]}),o.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[o.jsx(r5,{tone:"indigo",children:Array.isArray(M.curso)?M.curso.join(", "):M.curso}),o.jsx(r5,{tone:"sky",children:M.institucion}),(Array.isArray(M.tipoAlternancia)?M.tipoAlternancia:[]).slice(0,2).map(Z=>o.jsx(r5,{tone:"emerald",children:Z},Z))]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[o.jsx(K1,{className:"w-4 h-4"}),o.jsx("input",{type:"file",className:"hidden",onChange:Z=>Z.target.files&&j(M.id,Z.target.files[0])}),"Evidencia"]}),o.jsxs(Cp,{title:"Editar",onClick:()=>L(M),children:[o.jsx(aF,{className:"w-4 h-4"})," Editar"]}),o.jsxs(Cp,{title:"Eliminar",onClick:()=>R(M.id),tone:"danger",children:[o.jsx(xi,{className:"w-4 h-4"})," Eliminar"]})]})]})},M.id))})}),o.jsxs("form",{onSubmit:u(T),className:"mt-6 space-y-5",children:[o.jsx(Ep,{title:"Contexto de la Alternancia",icon:o.jsx(g_,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(IA,{children:"Especialidad"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tv,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),o.jsxs("select",{...l("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[o.jsx("option",{value:"",children:"Selecciona…"}),Bye.map(M=>o.jsx("option",{value:M,children:M},M))]})]})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Institución"}),o.jsxs("div",{className:"relative",children:[o.jsx(g_,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),o.jsxs("select",{...l("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[o.jsx("option",{value:"",children:"Selecciona…"}),Tye.map(M=>o.jsx("option",{value:M,children:M},M))]})]})]}),o.jsxs("div",{children:[o.jsx(IA,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),o.jsxs("div",{className:"relative",children:[o.jsx(Nl,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),o.jsx("select",{multiple:!0,size:4,...l("curso"),onChange:P,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!B,children:B?F.map(M=>o.jsx("option",{value:M,children:M},M)):o.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(M=>o.jsx(r5,{tone:"sky",children:M},M))})]})]})}),o.jsx(Ep,{title:"Módulos implicados",icon:o.jsx(WP,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:B?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(M=>o.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[o.jsx("input",{type:"checkbox",value:M,className:"mt-1 accent-emerald-600",...l("modulos")}),o.jsx("span",{className:"text-sm text-slate-700",children:M})]},M))}):o.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),o.jsx(Ep,{title:"Tipo de Alternancia",icon:o.jsx(uw,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:o.jsx("div",{className:"flex gap-3 flex-wrap",children:Fye.map(M=>o.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[o.jsx("input",{type:"checkbox",value:M,className:"accent-amber-600",...l("tipoAlternancia")}),o.jsx("span",{className:"text-slate-700",children:M})]},M))})}),o.jsx(Ep,{title:"Fundamentación técnico‑pedagógica",icon:o.jsx(Jye,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:o.jsx("textarea",{...l("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),o.jsx(Ep,{title:"Plan de actividades",icon:o.jsx(mg,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:o.jsxs("div",{className:"space-y-3",children:[g.fields.map((M,Z)=>{const V=f(`actividades.${Z}.modulo`)||"",W=N(B,V);return o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(IA,{children:"Fecha"}),o.jsx(ac,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),o.jsx("input",{type:"date",placeholder:"Fecha",...l(`actividades.${Z}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Tipo"}),o.jsx("input",{placeholder:"Pasantía, visita, taller...",...l(`actividades.${Z}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Actividad"}),o.jsx("input",{placeholder:"Descripción breve",...l(`actividades.${Z}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(IA,{children:"Lugar"}),o.jsx(v_,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),o.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...l(`actividades.${Z}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(IA,{children:"Evidencias"}),o.jsx(Mwe,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),o.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...l(`actividades.${Z}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx(IA,{children:"Módulo"}),o.jsxs("select",{...l(`actividades.${Z}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!B||k.length===0,children:[o.jsx("option",{value:"",children:!B&&"Elige especialidad arriba"||k.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),k.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),o.jsxs("div",{children:[o.jsx(IA,{children:"Objetivo de Aprendizaje (OA)"}),o.jsxs("select",{...l(`actividades.${Z}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!V||W.length===0,children:[o.jsx("option",{value:"",children:V?W.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),W.map(G=>o.jsx("option",{value:G,children:G},G))]})]})]}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsxs(Cp,{title:"Eliminar fila",onClick:()=>g.remove(Z),tone:"danger",children:[o.jsx(xi,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},M.id)}),o.jsxs(Cp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[o.jsx(Cl,{className:"w-4 h-4"})," Agregar actividad"]})]})}),o.jsx(Ep,{title:"Análisis Curricular",icon:o.jsx(Tv,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:o.jsx("textarea",{...l("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),o.jsx("div",{className:"flex items-center justify-end gap-2",children:o.jsxs(Cp,{title:"Guardar",type:"submit",tone:"success",disabled:m,children:[m?o.jsx(vl,{className:"w-4 h-4 animate-spin"}):o.jsx(Bi,{className:"w-4 h-4"}),"Guardar"]})})]})]})},DD=["INCIPIENTE","EN_DESARROLLO","LOGRADO","SOBRESALIENTE"],N0t={INCIPIENTE:25},_0t=["AULA","TALLER","EMPRESA"],QY={escalaMin:1,escalaMax:7,porcentajeAprobacion:60,notaAprobacion:4,regla:"lineal"},S0t="tp_especialidades",k0t="tp_modulos",j0t="tp_resultados_aprendizaje",B0t="tp_criterios_evaluacion",PD="tp_rubricas",WAe="tp_evidencias",XAe="tp_evaluaciones_comp",RD="config_evaluacion/competencias",HY=()=>Date.now(),YAe=async()=>{const e=await Rg(sr(wr,RD));return e.exists()?e.data():(await bi(sr(wr,RD),QY),QY)},T0t=(e,t)=>{const{escalaMin:r,escalaMax:n,porcentajeAprobacion:a,notaAprobacion:s}=t;if(e<=a){const i=(s-r)/(a-0||1);return Number((r+i*(e-0)).toFixed(1))}else{const i=(n-s)/(100-a||1);return Number((s+i*(e-a)).toFixed(1))}},I0t=async(e,t)=>{const r=await YAe();let n=0,a=0;Object.entries(t).forEach(([l,c])=>{a+=c;const u=e[l],d=(u==null?void 0:u.puntaje)??N0t.INCIPIENTE;n+=d*c/100});const s=a?n/a*100:0,i=T0t(s,r);return{puntajeTotal:n,porcentaje:s,nota:i}},F0t=e=>{const t=zt(vt(wr,S0t),hr("nombre"));return fr(t,r=>{e(r.docs.map(n=>({id:n.id,...n.data()})))})},O0t=async e=>{const t=zt(vt(wr,k0t),Br("especialidadId","==",e),hr("nombre"));return(await Tn(t)).docs.map(n=>({id:n.id,...n.data()}))},D0t=async e=>{const t=zt(vt(wr,j0t),Br("moduloId","==",e),hr("codigo"));return(await Tn(t)).docs.map(n=>({id:n.id,...n.data()}))},P0t=async e=>{const t=zt(vt(wr,B0t),Br("raId","==",e),hr("codigo"));return(await Tn(t)).docs.map(n=>({id:n.id,...n.data()}))},R0t=async e=>e.id?(await cc(sr(wr,PD,e.id),{...e,updatedAt:HY()}),e.id):(await hn(vt(wr,PD),{...e,updatedAt:HY()})).id,JAe=async e=>{const t=zt(vt(wr,PD),Br("raId","==",e)),n=(await Tn(t)).docs[0];return n?{id:n.id,...n.data()}:null},L0t=async(e,t)=>{const r=z2(zP,t),n=await QP(r,e);return{url:await D4(n.ref),path:n.ref.fullPath}},M0t=e=>hn(vt(wr,WAe),e),U0t=(e,t)=>{const r=zt(vt(wr,WAe),Br("raId","==",e),hr("fecha","desc"));return fr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},Q0t=async e=>{const t=await JAe(e.raId),r=(t==null?void 0:t.ponderacionCE)??{},{puntajeTotal:n,porcentaje:a,nota:s}=await I0t(e.ceIdScores,r);return hn(vt(wr,XAe),{...e,puntajeTotal:n,porcentaje:a,nota:s})},H0t=(e,t)=>{const r=zt(vt(wr,XAe),Br("raId","==",e),hr("fecha","desc"));return fr(r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},V0t=async e=>{const t=await YAe();await bi(sr(wr,RD),{...t,...e},{merge:!0})},z0t=({raId:e,ces:t,rubrica:r,onSaved:n,currentUserId:a})=>{const[s,i]=_.useState(null);if(_.useEffect(()=>{i(e?r??{id:"",raId:e,niveles:DD,descriptores:[],ponderacionCE:Object.fromEntries(t.map(f=>[f.id,f.peso])),updatedAt:Date.now(),createdBy:a}:null)},[e,r,t,a]),!e)return o.jsx("div",{children:"Selecciona un RA para editar su rúbrica."});if(!s)return null;const l=(f,h)=>{i(m=>m&&{...m,ponderacionCE:{...m.ponderacionCE,[f]:h}})},c=(f,h,m)=>{i(g=>{if(!g)return g;const x=g.descriptores.filter(v=>!(v.ceId===f&&v.nivel===h));return{...g,descriptores:[...x,{ceId:f,nivel:h,descriptor:m,puntaje:h==="SOBRESALIENTE"?100:h==="LOGRADO"?75:h==="EN_DESARROLLO"?50:25}]}})},u=_.useMemo(()=>Object.values(s.ponderacionCE).reduce((f,h)=>f+(Number(h)||0),0),[s.ponderacionCE]),d=async()=>{const f=await R0t(s);n==null||n(f)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Rúbrica por CE (debe sumar 100%)"}),o.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${u===100?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:["Total: ",u,"%"]})]}),o.jsx("div",{className:"space-y-4",children:t.map(f=>o.jsxs("div",{className:"border rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-semibold text-slate-800",children:[f.codigo," — ",f.descriptor]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Evidencia esperada: ",f.evidenciaEsperada||"—"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-xs text-slate-500",children:"Peso"}),o.jsx("input",{type:"number",className:"w-20 border rounded-lg px-2 py-1",value:s.ponderacionCE[f.id]??0,onChange:h=>l(f.id,Number(h.target.value))}),o.jsx("span",{className:"text-xs text-slate-500",children:"%"})]})]}),o.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:DD.map(h=>{const m=s.descriptores.find(g=>g.ceId===f.id&&g.nivel===h);return o.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3",children:[o.jsx("div",{className:"text-xs font-medium text-slate-600 mb-1",children:h.replace("_"," ")}),o.jsx("textarea",{className:"w-full border rounded-lg px-2 py-1 text-sm",rows:2,value:(m==null?void 0:m.descriptor)||"",onChange:g=>c(f.id,h,g.target.value),placeholder:"Descriptor observable y medible…"})]},h)})})]},f.id))}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:d,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:[o.jsx($d,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar rúbrica"})]})})]})},$0t=({raId:e,currentUser:t,evidencias:r})=>{const[n,a]=_.useState(""),[s,i]=_.useState(""),[l,c]=_.useState("AULA"),[u,d]=_.useState(null),[f,h]=_.useState(""),[m,g]=_.useState(!1);if(!e)return o.jsx("div",{children:"Selecciona una RA para gestionar evidencias."});const x=async()=>{if(!(!u||!n)){g(!0);try{const v=u.name.split(".").pop(),y=`evidencias/${e}/${n}/${Date.now()}.${v}`,{url:w,path:N}=await L0t(u,y);await M0t({estudianteId:n,raId:e,ceId:s||void 0,url:w,tipo:G0t(u.name),fecha:Date.now(),autorId:t.id,contexto:l,observaciones:f,storagePath:N}),d(null),h(""),a(""),i("")}finally{g(!1)}}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[o.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"Estudiante (ID)",value:n,onChange:v=>a(v.target.value)}),o.jsx("input",{className:"border rounded-xl px-3 py-2",placeholder:"CE (opcional)",value:s,onChange:v=>i(v.target.value)}),o.jsxs("select",{className:"border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:[o.jsx("option",{value:"AULA",children:"AULA"}),o.jsx("option",{value:"TALLER",children:"TALLER"}),o.jsx("option",{value:"EMPRESA",children:"EMPRESA"})]}),o.jsx("input",{type:"file",onChange:v=>{var y;return d(((y=v.target.files)==null?void 0:y[0])||null)},className:"border rounded-xl px-3 py-2"})]}),o.jsx("textarea",{className:"w-full border rounded-xl px-3 py-2",rows:2,placeholder:"Observaciones…",value:f,onChange:v=>h(v.target.value)}),o.jsxs("button",{onClick:x,disabled:m||!u||!n,className:`flex items-center gap-2 rounded-xl px-4 py-2 ${m||!u||!n?"bg-slate-200 text-slate-500":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:[o.jsx(K1,{className:"w-4 h-4"}),o.jsx("span",{children:"Subir evidencia"})]}),o.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:r.map(v=>o.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",className:"border rounded-xl p-3 hover:shadow",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[K0t(v.tipo),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium",children:new Date(v.fecha).toLocaleString()}),o.jsxs("div",{className:"text-xs text-slate-500",children:[v.contexto," — Est.: ",v.estudianteId]})]})]}),v.observaciones&&o.jsx("div",{className:"text-xs text-slate-600 mt-2",children:v.observaciones})]},v.id))})]})},G0t=e=>{var r;const t=(r=e.split(".").pop())==null?void 0:r.toLowerCase();return["png","jpg","jpeg","webp","gif"].includes(t||"")?"imagen":["mp4","mov","avi","mkv","webm"].includes(t||"")?"video":["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","csv"].includes(t||"")?"documento":"otro"},K0t=e=>{switch(e){case"imagen":return o.jsx(n2e,{className:"w-5 h-5 text-rose-600"});case"video":return o.jsx(Vwe,{className:"w-5 h-5 text-indigo-600"});case"documento":return o.jsx(Ld,{className:"w-5 h-5 text-emerald-600"});default:return o.jsx(K1,{className:"w-5 h-5 text-slate-500"})}},VY=["#6366F1","#22C55E","#F59E0B","#EF4444","#14B8A6","#8B5CF6","#F43F5E"],q0t=({raId:e})=>{const[t,r]=_.useState([]);if(_.useEffect(()=>{if(!e){r([]);return}const i=H0t(e,r);return()=>i()},[e]),!e)return o.jsx("div",{children:"Selecciona una RA para visualizar el dashboard."});const n=_.useMemo(()=>{const i={};return t.forEach(l=>{const c=l.curso||"—";i[c]||(i[c]={curso:c,promedio:0,n:0}),i[c].promedio+=l.nota,i[c].n+=1}),Object.values(i).map(l=>({curso:l.curso,promedio:Number((l.promedio/(l.n||1)).toFixed(2)),n:l.n}))},[t]),a=_.useMemo(()=>{const i={"1.0-3.9":0,"4.0-4.9":0,"5.0-5.9":0,"6.0-7.0":0};return t.forEach(l=>{l.nota<4?i["1.0-3.9"]++:l.nota<5?i["4.0-4.9"]++:l.nota<6?i["5.0-5.9"]++:i["6.0-7.0"]++}),Object.entries(i).map(([l,c])=>({rango:l,value:c}))},[t]),s=()=>{const i=t.map(u=>({id:u.id,estudianteId:u.estudianteId,curso:u.curso,raId:u.raId,porcentaje:u.porcentaje,nota:u.nota,fecha:new Date(u.fecha).toISOString(),contexto:u.contexto})),l=Ti.book_new(),c=Ti.json_to_sheet(i);Ti.book_append_sheet(l,c,"Evaluaciones_RA"),tE(l,`evaluaciones_${e}.xlsx`)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[o.jsx(Mu,{className:"w-5 h-5 text-indigo-600"}),"Resumen de logro por curso"]}),o.jsxs("button",{onClick:s,className:"flex items-center gap-2 border rounded-xl px-3 py-2 hover:bg-slate-50",children:[o.jsx(Cm,{className:"w-4 h-4"}),o.jsx("span",{children:"Descargar CSV"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{className:"h-72 border rounded-xl p-3",children:o.jsx(ih,{width:"100%",height:"100%",children:o.jsxs(g2,{data:n,children:[o.jsx(Sg,{dataKey:"curso"}),o.jsx(kg,{domain:[1,7]}),o.jsx(sh,{}),o.jsx(E1,{dataKey:"promedio"})]})})}),o.jsx("div",{className:"h-72 border rounded-xl p-3",children:o.jsx(ih,{width:"100%",height:"100%",children:o.jsxs(KL,{children:[o.jsx(Tk,{data:a,dataKey:"value",nameKey:"rango",outerRadius:90,label:!0,children:a.map((i,l)=>o.jsx(Im,{fill:VY[l%VY.length]},`c-${l}`))}),o.jsx(sh,{}),o.jsx(Z1,{})]})})})]}),o.jsx("div",{className:"text-xs text-slate-500",children:"Nota: los promedios consideran la conversión lineal configurable (Decreto 67)."})]})},Ty=({active:e,onClick:t,icon:r,label:n})=>o.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-full transition 
    ${e?"bg-indigo-600 text-white shadow":"bg-white text-slate-700 hover:bg-slate-100 border"}`,children:[r,o.jsx("span",{className:"font-medium",children:n})]}),ev=({children:e,className:t})=>o.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ${t||""}`,children:e}),W0t=({currentUser:e})=>{const[t,r]=_.useState("planificacion"),[n,a]=_.useState([]),[s,i]=_.useState([]),[l,c]=_.useState([]),[u,d]=_.useState([]),[f,h]=_.useState({}),[m,g]=_.useState(null),[x,v]=_.useState([]);_.useEffect(()=>{const w=F0t(a);return()=>w()},[]),_.useEffect(()=>{f.especialidadId?O0t(f.especialidadId).then(i):i([]),h(w=>({...w,moduloId:void 0,raId:void 0})),c([]),d([]),g(null)},[f.especialidadId]),_.useEffect(()=>{f.moduloId?D0t(f.moduloId).then(c):c([]),h(w=>({...w,raId:void 0})),d([]),g(null)},[f.moduloId]),_.useEffect(()=>{if(f.raId){P0t(f.raId).then(d),JAe(f.raId).then(g);const w=U0t(f.raId,v);return()=>w()}else d([]),g(null),v([])},[f.raId]);const y=f.raId&&u.length>0;return o.jsxs("div",{className:"w-full min-h-screen bg-slate-50",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-white border-b",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(WP,{className:"w-6 h-6 text-indigo-600"}),o.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Evaluación por Competencias EMTP"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ty,{active:t==="planificacion",onClick:()=>r("planificacion"),icon:o.jsx(mg,{className:"w-4 h-4"}),label:"Planificar"}),o.jsx(Ty,{active:t==="evaluar",onClick:()=>r("evaluar"),icon:o.jsx(U2e,{className:"w-4 h-4"}),label:"Evaluar"}),o.jsx(Ty,{active:t==="evidencias",onClick:()=>r("evidencias"),icon:o.jsx(K1,{className:"w-4 h-4"}),label:"Evidencias"}),o.jsx(Ty,{active:t==="dashboard",onClick:()=>r("dashboard"),icon:o.jsx(Mu,{className:"w-4 h-4"}),label:"Dashboard"}),o.jsx(Ty,{active:t==="config",onClick:()=>r("config"),icon:o.jsx(G2e,{className:"w-4 h-4"}),label:"Config"})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[o.jsx(ev,{children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Especialidad"}),o.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.especialidadId||"",onChange:w=>h({especialidadId:w.target.value}),children:[o.jsx("option",{value:"",children:"— Selecciona —"}),n.map(w=>o.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Módulo"}),o.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.moduloId||"",onChange:w=>h(N=>({...N,moduloId:w.target.value})),children:[o.jsx("option",{value:"",children:"— Selecciona —"}),s.map(w=>o.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Resultado de Aprendizaje (RA)"}),o.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:f.raId||"",onChange:w=>h(N=>({...N,raId:w.target.value})),children:[o.jsx("option",{value:"",children:"— Selecciona —"}),l.map(w=>o.jsxs("option",{value:w.id,children:[w.codigo," — ",w.enunciado.slice(0,60),w.enunciado.length>60?"…":""]},w.id))]})]})]})}),t==="planificacion"&&o.jsx(ev,{children:o.jsx(z0t,{raId:f.raId,ces:u,rubrica:m,onSaved:w=>{},currentUserId:e.id})}),t==="evaluar"&&o.jsxs(ev,{children:[!y&&o.jsx("div",{className:"text-slate-600",children:"Selecciona una RA con criterios (CE) para comenzar a evaluar."}),y&&o.jsx(X0t,{raId:f.raId,ces:u,currentUser:e})]}),t==="evidencias"&&o.jsx(ev,{children:o.jsx($0t,{raId:f.raId,currentUser:e,evidencias:x})}),t==="dashboard"&&o.jsx(ev,{children:o.jsx(q0t,{raId:f.raId})}),t==="config"&&o.jsx(ev,{children:o.jsx(Y0t,{})})]})]})},X0t=({raId:e,ces:t,currentUser:r})=>{const[n,a]=_.useState(""),[s,i]=_.useState(r.curso||""),[l,c]=_.useState("AULA"),[u,d]=_.useState(""),[f,h]=_.useState({}),m=(v,y,w)=>{h(N=>({...N,[v]:{nivel:y,puntaje:w}}))},g=n&&Object.keys(f).length===t.length,x=async()=>{const v={estudianteId:n,curso:s,raId:e,ceIdScores:f,evaluadorId:r.id,fecha:Date.now(),contexto:l,retroalimentacion:u};await Q0t(v),d(""),h({}),a("")};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Estudiante (ID)"}),o.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:n,onChange:v=>a(v.target.value),placeholder:"rut_o_uid"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Curso"}),o.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:s,onChange:v=>i(v.target.value),placeholder:"p.ej. 3ºB"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Contexto"}),o.jsx("select",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:l,onChange:v=>c(v.target.value),children:_0t.map(v=>o.jsx("option",{value:v,children:v},v))})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("button",{disabled:!g,onClick:x,className:`w-full flex items-center justify-center gap-2 rounded-xl px-3 py-2 transition ${g?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:[o.jsx(Bi,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar evaluación"})]})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(v=>o.jsxs("div",{className:"border rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"font-semibold text-slate-800",children:[v.codigo," — ",v.descriptor]}),o.jsxs("span",{className:"text-xs text-slate-500",children:["Peso ",v.peso,"%"]})]}),o.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-2",children:DD.map(y=>{var w;return o.jsx("button",{onClick:()=>m(v.id,y,y==="SOBRESALIENTE"?100:y==="LOGRADO"?75:y==="EN_DESARROLLO"?50:25),className:`px-3 py-2 rounded-lg border text-sm ${((w=f[v.id])==null?void 0:w.nivel)===y?"bg-indigo-600 text-white":"bg-white hover:bg-slate-50"}`,children:y.replace("_"," ")},y)})})]},v.id))}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Retroalimentación formativa"}),o.jsx("textarea",{value:u,onChange:v=>d(v.target.value),className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,placeholder:"Sugerencias específicas para mejorar..."})]})]})},Y0t=()=>{const[e,t]=_.useState(60),[r,n]=_.useState(4),a=async()=>{await V0t({porcentajeAprobacion:e,notaAprobacion:r})};return o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Porcentaje de aprobación (%)"}),o.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:e,onChange:s=>t(Number(s.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-slate-500",children:"Nota de aprobación"}),o.jsx("input",{type:"number",step:"0.1",className:"mt-1 w-full border rounded-xl px-3 py-2",value:r,onChange:s=>n(Number(s.target.value))})]}),o.jsx("button",{onClick:a,className:"self-end bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl px-4 py-2",children:"Guardar"})]})},J0t=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Z0t=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const l=e.profile,c=_.useMemo(()=>{const B=Sye[l]||[];return l!==Yt.ESTUDIANTE?B:B.filter(k=>{if(k.name==="Asistencia a Empresa"){const F=J0t(e.curso||"");return F.startsWith("3º")||F.startsWith("4º")}return!0})},[l,e.curso]),[u,d]=_.useState(null),[f,h]=_.useState(!1),[m,g]=_.useState(!1),x=_.useRef([]);_.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[l,c]);const v=_.useCallback(B=>{d(B),window.innerWidth<768&&h(!1)},[]),y=_.useCallback(B=>{const k=c.find(F=>F.name===B);k&&v(k)},[c,v]),w=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:o.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:o.jsx(dye,{className:"w-5 h-5"})})}),!m&&o.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),o.jsx("button",{type:"button",onClick:()=>g(B=>!B),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:m?"Expandir":"Colapsar",children:m?o.jsx(KP,{className:"w-5 h-5 text-slate-200"}):o.jsx(Vw,{className:"w-5 h-5 text-slate-200"})})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:B=>{var F,E,S;const k=x.current.findIndex(T=>T===document.activeElement);if(B.key==="ArrowDown"){B.preventDefault();const T=Math.min(k===-1?0:k+1,x.current.length-1);(F=x.current[T])==null||F.focus()}else if(B.key==="ArrowUp"){B.preventDefault();const T=Math.max(k===-1?0:k-1,0);(E=x.current[T])==null||E.focus()}else B.key==="Enter"&&k>=0&&((S=x.current[k])==null||S.click())},children:o.jsx("div",{className:"space-y-1",children:c.map((B,k)=>{const F=(u==null?void 0:u.name)===B.name;return o.jsxs("button",{ref:E=>x.current[k]=E,onClick:()=>v(B),className:`w-full group flex items-center ${m?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${F?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:m?B.name:void 0,children:[o.jsx("span",{className:`shrink-0 ${F?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:B.icon}),!m&&o.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:B.name})]},B.name)})})})]}),N=()=>{if(!u)return o.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return o.jsx(Iqe,{profile:l});if(u.name==="Muro de Anuncios")return o.jsx(Rqe,{currentUser:e});if(u.name==="Mensajería Interna")return o.jsx(XJe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return o.jsx($qe,{});if(u.name==="Desarrollo Profesional")return o.jsx(qht,{currentUser:e});if(l===Yt.SUBDIRECCION){if(u.name==="Dashboard")return o.jsx(qEe,{currentUser:e});if(u.name==="Administración")return o.jsx(KXe,{});if(u.name==="Seguimiento Curricular")return o.jsx(Mit,{currentUser:e});if(u.name==="Acompañamiento docente")return o.jsx(HJe,{currentUser:e});if(u.name==="Análisis Taxonómico")return o.jsx($it,{currentUser:e});if(u.name==="Interdisciplinario")return o.jsx(Wq,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return o.jsx(VEe,{currentUser:e});if(u.name==="Crear horarios")return o.jsx(n6e,{});if(u.name==="Seguimiento de acciones pedagógicas")return o.jsx(IKe,{});if(u.name==="Inclusión")return o.jsx(zq,{currentUser:e})}if(l===Yt.PROFESORADO){if(u.name==="Planificación")return o.jsx(Cqe,{currentUser:e});if(u.name==="Mis Acompañamientos")return o.jsx(xit,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return o.jsx(ait,{});if(u.name==="Análisis Taxonómico")return o.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return o.jsx(Wq,{});if(u.name==="Inclusión")return o.jsx(zq,{currentUser:e});if(u.name==="Actividades Remotas")return o.jsx(EYe,{});if(u.name==="Evaluación de Aprendizajes")return o.jsx(zXe,{});if(u.name==="Evaluaciones Formativas")return o.jsx(EJe,{currentUser:e});if(u.name==="Evaluación de Competencias")return o.jsx(W0t,{currentUser:e})}if(l===Yt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return o.jsx(nYe,{});if(u.name==="Asistencia Dual")return o.jsx(oJe,{});if(u.name==="Pañol")return o.jsx(gZe,{});if(u.name==="Gestión de Empresas")return o.jsx(kht,{});if(u.name==="Alternancia TP")return o.jsx(C0t,{})}if(l===Yt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return o.jsx(LYe,{currentUser:e});if(u.name==="Evaluación Formativa")return o.jsx(dit,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return o.jsx(pit,{currentUser:e});if(u.name==="Asistencia a Empresa")return o.jsx(ZYe,{currentUser:e})}return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),o.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:o.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",o.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return o.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[o.jsx(CEe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(B=>!B),unreadMessagesCount:s,refreshUnreadCount:i}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&o.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),o.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${m?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:o.jsx(w,{})}),o.jsx("main",{className:"flex-1 overflow-y-auto",children:o.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:o.jsx(E2e,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&o.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),o.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),o.jsx("div",{className:"min-h-[60vh]",children:N()})]})})]})]})},emt=({onSelectProfile:e,isAdminView:t=!1})=>o.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[o.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[o.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),o.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),o.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("div",{className:"mb-4 flex justify-center items-center",children:o.jsx(GP,{})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),o.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:_ye.map(r=>o.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[o.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),o.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),o.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),o.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),tmt=()=>{const[e,t]=_.useState(null),[r,n]=_.useState(null),[a,s]=_.useState(!0),[i,l]=_.useState(null),[c,u]=_.useState(!1),[d,f]=_.useState(null),[h,m]=_.useState(null);_.useEffect(()=>{const B=new URLSearchParams(window.location.search),k=B.get("auth"),F=B.get("userId");B.get("module"),k==="success"&&F&&(m("¡Autorización de Google Slides completada exitosamente!"),setTimeout(()=>{const E=window.location.pathname;window.history.replaceState({},document.title,E),m(null)},3e3))},[]),_.useEffect(()=>{const B=NJ(Ug,async k=>{if(t(k),k)try{const F=await Qee(k.email);F?(n(F),F.profile===Yt.SUBDIRECCION&&u(!0)):(l("Usuario no encontrado en la base de datos. Contacte al administrador."),await W3())}catch{l("Error al conectar con la base de datos."),await W3()}else n(null),f(null),u(!1),l(null);s(!1)});return()=>B()},[]);const g=async(B,k)=>{if(l(null),!B.trim()||!k.trim()){l("Por favor ingrese email y contraseña");return}try{await oye(B.trim(),k)}catch(F){switch(F.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":l("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":l("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":l("Error de conexión. Verifique su internet.");break;default:l("Ocurrió un error al intentar iniciar sesión.")}}},x=async B=>{try{await lye(B)}catch(k){console.error("Error al enviar email de recuperación:",k)}},v=B=>{f(B),u(!1)},y=()=>{u(!0),f(null)},w=async()=>{try{await W3()}catch(B){console.error("Error al cerrar sesión:",B)}};if(a)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mb-4 flex justify-center items-center",children:o.jsx(GP,{})}),o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return o.jsx(Pye,{onLoginAttempt:g,onForgotPasswordRequest:x,error:i});if(c&&r.profile===Yt.SUBDIRECCION)return o.jsx(emt,{onSelectProfile:v,isAdminView:!0});const N=d||r.profile;return o.jsxs(o.Fragment,{children:[h&&o.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:"✅"}),o.jsx("span",{children:h})]}),o.jsx(Z0t,{currentUser:{...r,profile:N},onLogout:w,onChangeProfile:r.profile===Yt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===Yt.SUBDIRECCION})]})},ZAe=document.getElementById("root");if(!ZAe)throw new Error("Could not find root element to mount to");const rmt=phe.createRoot(ZAe);rmt.render(o.jsx(at.StrictMode,{children:o.jsx(tmt,{})}));export{ga as _,amt as c,kl as g};
