(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var sMe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wq(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var oE={exports:{}},kg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A3;function Yq(){if(A3)return kg;A3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return kg.Fragment=e,kg.jsx=n,kg.jsxs=n,kg}var f3;function Xq(){return f3||(f3=1,oE.exports=Yq()),oE.exports}var u=Xq(),lE={exports:{}},br={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3;function Jq(){if(h3)return br;h3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),h=Symbol.iterator;function p(J){return J===null||typeof J!="object"?null:(J=h&&J[h]||J["@@iterator"],typeof J=="function"?J:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function S(J,ce,Q){this.props=J,this.context=ce,this.refs=x,this.updater=Q||g}S.prototype.isReactComponent={},S.prototype.setState=function(J,ce){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ce,"setState")},S.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function N(){}N.prototype=S.prototype;function F(J,ce,Q){this.props=J,this.context=ce,this.refs=x,this.updater=Q||g}var D=F.prototype=new N;D.constructor=F,w(D,S.prototype),D.isPureReactComponent=!0;var R=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function E(J,ce,Q,Z,se,ie){return Q=ie.ref,{$$typeof:t,type:J,key:ce,ref:Q!==void 0?Q:null,props:ie}}function T(J,ce){return E(J.type,ce,void 0,void 0,void 0,J.props)}function k(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function z(J){var ce={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Q){return ce[Q]})}var M=/\/+/g;function U(J,ce){return typeof J=="object"&&J!==null&&J.key!=null?z(""+J.key):ce.toString(36)}function G(){}function q(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(G,G):(J.status="pending",J.then(function(ce){J.status==="pending"&&(J.status="fulfilled",J.value=ce)},function(ce){J.status==="pending"&&(J.status="rejected",J.reason=ce)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function oe(J,ce,Q,Z,se){var ie=typeof J;(ie==="undefined"||ie==="boolean")&&(J=null);var fe=!1;if(J===null)fe=!0;else switch(ie){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(J.$$typeof){case t:case e:fe=!0;break;case A:return fe=J._init,oe(fe(J._payload),ce,Q,Z,se)}}if(fe)return se=se(J),fe=Z===""?"."+U(J,0):Z,R(se)?(Q="",fe!=null&&(Q=fe.replace(M,"$&/")+"/"),oe(se,ce,Q,"",function(xe){return xe})):se!=null&&(k(se)&&(se=T(se,Q+(se.key==null||J&&J.key===se.key?"":(""+se.key).replace(M,"$&/")+"/")+fe)),ce.push(se)),1;fe=0;var Se=Z===""?".":Z+":";if(R(J))for(var ge=0;ge<J.length;ge++)Z=J[ge],ie=Se+U(Z,ge),fe+=oe(Z,ce,Q,ie,se);else if(ge=p(J),typeof ge=="function")for(J=ge.call(J),ge=0;!(Z=J.next()).done;)Z=Z.value,ie=Se+U(Z,ge++),fe+=oe(Z,ce,Q,ie,se);else if(ie==="object"){if(typeof J.then=="function")return oe(q(J),ce,Q,Z,se);throw ce=String(J),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return fe}function ee(J,ce,Q){if(J==null)return J;var Z=[],se=0;return oe(J,Z,"","",function(ie){return ce.call(Q,ie,se++)}),Z}function le(J){if(J._status===-1){var ce=J._result;ce=ce(),ce.then(function(Q){(J._status===0||J._status===-1)&&(J._status=1,J._result=Q)},function(Q){(J._status===0||J._status===-1)&&(J._status=2,J._result=Q)}),J._status===-1&&(J._status=0,J._result=ce)}if(J._status===1)return J._result.default;throw J._result}var K=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function ne(){}return br.Children={map:ee,forEach:function(J,ce,Q){ee(J,function(){ce.apply(this,arguments)},Q)},count:function(J){var ce=0;return ee(J,function(){ce++}),ce},toArray:function(J){return ee(J,function(ce){return ce})||[]},only:function(J){if(!k(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},br.Component=S,br.Fragment=n,br.Profiler=s,br.PureComponent=F,br.StrictMode=r,br.Suspense=l,br.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,br.__COMPILER_RUNTIME={__proto__:null,c:function(J){return j.H.useMemoCache(J)}},br.cache=function(J){return function(){return J.apply(null,arguments)}},br.cloneElement=function(J,ce,Q){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Z=w({},J.props),se=J.key,ie=void 0;if(ce!=null)for(fe in ce.ref!==void 0&&(ie=void 0),ce.key!==void 0&&(se=""+ce.key),ce)!P.call(ce,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ce.ref===void 0||(Z[fe]=ce[fe]);var fe=arguments.length-2;if(fe===1)Z.children=Q;else if(1<fe){for(var Se=Array(fe),ge=0;ge<fe;ge++)Se[ge]=arguments[ge+2];Z.children=Se}return E(J.type,se,void 0,void 0,ie,Z)},br.createContext=function(J){return J={$$typeof:i,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:a,_context:J},J},br.createElement=function(J,ce,Q){var Z,se={},ie=null;if(ce!=null)for(Z in ce.key!==void 0&&(ie=""+ce.key),ce)P.call(ce,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(se[Z]=ce[Z]);var fe=arguments.length-2;if(fe===1)se.children=Q;else if(1<fe){for(var Se=Array(fe),ge=0;ge<fe;ge++)Se[ge]=arguments[ge+2];se.children=Se}if(J&&J.defaultProps)for(Z in fe=J.defaultProps,fe)se[Z]===void 0&&(se[Z]=fe[Z]);return E(J,ie,void 0,void 0,null,se)},br.createRef=function(){return{current:null}},br.forwardRef=function(J){return{$$typeof:o,render:J}},br.isValidElement=k,br.lazy=function(J){return{$$typeof:A,_payload:{_status:-1,_result:J},_init:le}},br.memo=function(J,ce){return{$$typeof:c,type:J,compare:ce===void 0?null:ce}},br.startTransition=function(J){var ce=j.T,Q={};j.T=Q;try{var Z=J(),se=j.S;se!==null&&se(Q,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(ne,K)}catch(ie){K(ie)}finally{j.T=ce}},br.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},br.use=function(J){return j.H.use(J)},br.useActionState=function(J,ce,Q){return j.H.useActionState(J,ce,Q)},br.useCallback=function(J,ce){return j.H.useCallback(J,ce)},br.useContext=function(J){return j.H.useContext(J)},br.useDebugValue=function(){},br.useDeferredValue=function(J,ce){return j.H.useDeferredValue(J,ce)},br.useEffect=function(J,ce,Q){var Z=j.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(J,ce)},br.useId=function(){return j.H.useId()},br.useImperativeHandle=function(J,ce,Q){return j.H.useImperativeHandle(J,ce,Q)},br.useInsertionEffect=function(J,ce){return j.H.useInsertionEffect(J,ce)},br.useLayoutEffect=function(J,ce){return j.H.useLayoutEffect(J,ce)},br.useMemo=function(J,ce){return j.H.useMemo(J,ce)},br.useOptimistic=function(J,ce){return j.H.useOptimistic(J,ce)},br.useReducer=function(J,ce,Q){return j.H.useReducer(J,ce,Q)},br.useRef=function(J){return j.H.useRef(J)},br.useState=function(J){return j.H.useState(J)},br.useSyncExternalStore=function(J,ce,Q){return j.H.useSyncExternalStore(J,ce,Q)},br.useTransition=function(){return j.H.useTransition()},br.version="19.1.1",br}var m3;function Bx(){return m3||(m3=1,lE.exports=Jq()),lE.exports}var W=Bx();const yt=Nx(W);var cE={exports:{}},Ig={},uE={exports:{}},dE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3;function Zq(){return p3||(p3=1,function(t){function e(ee,le){var K=ee.length;ee.push(le);e:for(;0<K;){var ne=K-1>>>1,J=ee[ne];if(0<s(J,le))ee[ne]=le,ee[K]=J,K=ne;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var le=ee[0],K=ee.pop();if(K!==le){ee[0]=K;e:for(var ne=0,J=ee.length,ce=J>>>1;ne<ce;){var Q=2*(ne+1)-1,Z=ee[Q],se=Q+1,ie=ee[se];if(0>s(Z,K))se<J&&0>s(ie,Z)?(ee[ne]=ie,ee[se]=K,ne=se):(ee[ne]=Z,ee[Q]=K,ne=Q);else if(se<J&&0>s(ie,K))ee[ne]=ie,ee[se]=K,ne=se;else break e}}return le}function s(ee,le){var K=ee.sortIndex-le.sortIndex;return K!==0?K:ee.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],c=[],A=1,h=null,p=3,g=!1,w=!1,x=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function R(ee){for(var le=n(c);le!==null;){if(le.callback===null)r(c);else if(le.startTime<=ee)r(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=n(c)}}function j(ee){if(x=!1,R(ee),!w)if(n(l)!==null)w=!0,P||(P=!0,U());else{var le=n(c);le!==null&&oe(j,le.startTime-ee)}}var P=!1,E=-1,T=5,k=-1;function z(){return S?!0:!(t.unstable_now()-k<T)}function M(){if(S=!1,P){var ee=t.unstable_now();k=ee;var le=!0;try{e:{w=!1,x&&(x=!1,F(E),E=-1),g=!0;var K=p;try{t:{for(R(ee),h=n(l);h!==null&&!(h.expirationTime>ee&&z());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,p=h.priorityLevel;var J=ne(h.expirationTime<=ee);if(ee=t.unstable_now(),typeof J=="function"){h.callback=J,R(ee),le=!0;break t}h===n(l)&&r(l),R(ee)}else r(l);h=n(l)}if(h!==null)le=!0;else{var ce=n(c);ce!==null&&oe(j,ce.startTime-ee),le=!1}}break e}finally{h=null,p=K,g=!1}le=void 0}}finally{le?U():P=!1}}}var U;if(typeof D=="function")U=function(){D(M)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,q=G.port2;G.port1.onmessage=M,U=function(){q.postMessage(null)}}else U=function(){N(M,0)};function oe(ee,le){E=N(function(){ee(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(ee){switch(p){case 1:case 2:case 3:var le=3;break;default:le=p}var K=p;p=le;try{return ee()}finally{p=K}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(ee,le){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var K=p;p=ee;try{return le()}finally{p=K}},t.unstable_scheduleCallback=function(ee,le,K){var ne=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,ee){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,ee={id:A++,callback:le,priorityLevel:ee,startTime:K,expirationTime:J,sortIndex:-1},K>ne?(ee.sortIndex=K,e(c,ee),n(l)===null&&ee===n(c)&&(x?(F(E),E=-1):x=!0,oe(j,K-ne))):(ee.sortIndex=J,e(l,ee),w||g||(w=!0,P||(P=!0,U()))),ee},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(ee){var le=p;return function(){var K=p;p=le;try{return ee.apply(this,arguments)}finally{p=K}}}}(dE)),dE}var g3;function eK(){return g3||(g3=1,uE.exports=Zq()),uE.exports}var AE={exports:{}},Vo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3;function tK(){if(v3)return Vo;v3=1;var t=Bx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)c+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,c,A){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:c,implementation:A}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Vo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Vo.createPortal=function(l,c){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,A)},Vo.flushSync=function(l){var c=i.T,A=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=c,r.p=A,r.d.f()}},Vo.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Vo.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Vo.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var A=c.as,h=o(A,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;A==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):A==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Vo.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var A=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:A,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Vo.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var A=c.as,h=o(A,c.crossOrigin);r.d.L(l,A,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Vo.preloadModule=function(l,c){if(typeof l=="string")if(c){var A=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:A,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Vo.requestFormReset=function(l){r.d.r(l)},Vo.unstable_batchedUpdates=function(l,c){return l(c)},Vo.useFormState=function(l,c,A){return i.H.useFormState(l,c,A)},Vo.useFormStatus=function(){return i.H.useHostTransitionStatus()},Vo.version="19.1.1",Vo}var x3;function VU(){if(x3)return AE.exports;x3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),AE.exports=tK(),AE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3;function nK(){if(y3)return Ig;y3=1;var t=eK(),e=Bx(),n=VU();function r(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function a(d){var f=d,v=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(v=f.return),d=f.return;while(d)}return f.tag===3?v:null}function i(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function o(d){if(a(d)!==d)throw Error(r(188))}function l(d){var f=d.alternate;if(!f){if(f=a(d),f===null)throw Error(r(188));return f!==d?null:d}for(var v=d,C=f;;){var H=v.return;if(H===null)break;var Y=H.alternate;if(Y===null){if(C=H.return,C!==null){v=C;continue}break}if(H.child===Y.child){for(Y=H.child;Y;){if(Y===v)return o(H),d;if(Y===C)return o(H),f;Y=Y.sibling}throw Error(r(188))}if(v.return!==C.return)v=H,C=Y;else{for(var pe=!1,Be=H.child;Be;){if(Be===v){pe=!0,v=H,C=Y;break}if(Be===C){pe=!0,C=H,v=Y;break}Be=Be.sibling}if(!pe){for(Be=Y.child;Be;){if(Be===v){pe=!0,v=Y,C=H;break}if(Be===C){pe=!0,C=Y,v=H;break}Be=Be.sibling}if(!pe)throw Error(r(189))}}if(v.alternate!==C)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?d:f}function c(d){var f=d.tag;if(f===5||f===26||f===27||f===6)return d;for(d=d.child;d!==null;){if(f=c(d),f!==null)return f;d=d.sibling}return null}var A=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),D=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(d){return d===null||typeof d!="object"?null:(d=M&&d[M]||d["@@iterator"],typeof d=="function"?d:null)}var G=Symbol.for("react.client.reference");function q(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===G?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case w:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case P:return"SuspenseList";case k:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case g:return"Portal";case D:return(d.displayName||"Context")+".Provider";case F:return(d._context.displayName||"Context")+".Consumer";case R:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case E:return f=d.displayName||null,f!==null?f:q(d.type)||"Memo";case T:f=d._payload,d=d._init;try{return q(d(f))}catch{}}return null}var oe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ne=[],J=-1;function ce(d){return{current:d}}function Q(d){0>J||(d.current=ne[J],ne[J]=null,J--)}function Z(d,f){J++,ne[J]=d.current,d.current=f}var se=ce(null),ie=ce(null),fe=ce(null),Se=ce(null);function ge(d,f){switch(Z(fe,f),Z(ie,d),Z(se,null),f.nodeType){case 9:case 11:d=(d=f.documentElement)&&(d=d.namespaceURI)?jI(d):0;break;default:if(d=f.tagName,f=f.namespaceURI)f=jI(f),d=HI(f,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}Q(se),Z(se,d)}function xe(){Q(se),Q(ie),Q(fe)}function ve(d){d.memoizedState!==null&&Z(Se,d);var f=se.current,v=HI(f,d.type);f!==v&&(Z(ie,d),Z(se,v))}function me(d){ie.current===d&&(Q(se),Q(ie)),Se.current===d&&(Q(Se),Eg._currentValue=K)}var he=Object.prototype.hasOwnProperty,He=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,Ue=t.unstable_shouldYield,Ie=t.unstable_requestPaint,je=t.unstable_now,Ke=t.unstable_getCurrentPriorityLevel,rt=t.unstable_ImmediatePriority,xt=t.unstable_UserBlockingPriority,Tt=t.unstable_NormalPriority,vt=t.unstable_LowPriority,Vt=t.unstable_IdlePriority,Kt=t.log,cn=t.unstable_setDisableYieldValue,Gt=null,Wt=null;function sn(d){if(typeof Kt=="function"&&cn(d),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Gt,d)}catch{}}var Ht=Math.clz32?Math.clz32:Hn,Qt=Math.log,_t=Math.LN2;function Hn(d){return d>>>=0,d===0?32:31-(Qt(d)/_t|0)|0}var dn=256,kr=4194304;function Fn(d){var f=d&42;if(f!==0)return f;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function ar(d,f,v){var C=d.pendingLanes;if(C===0)return 0;var H=0,Y=d.suspendedLanes,pe=d.pingedLanes;d=d.warmLanes;var Be=C&134217727;return Be!==0?(C=Be&~Y,C!==0?H=Fn(C):(pe&=Be,pe!==0?H=Fn(pe):v||(v=Be&~d,v!==0&&(H=Fn(v))))):(Be=C&~Y,Be!==0?H=Fn(Be):pe!==0?H=Fn(pe):v||(v=C&~d,v!==0&&(H=Fn(v)))),H===0?0:f!==0&&f!==H&&(f&Y)===0&&(Y=H&-H,v=f&-f,Y>=v||Y===32&&(v&4194048)!==0)?f:H}function Mr(d,f){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&f)===0}function nr(d,f){switch(d){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sa(){var d=dn;return dn<<=1,(dn&4194048)===0&&(dn=256),d}function Cr(){var d=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),d}function hs(d){for(var f=[],v=0;31>v;v++)f.push(d);return f}function Ms(d,f){d.pendingLanes|=f,f!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function dr(d,f,v,C,H,Y){var pe=d.pendingLanes;d.pendingLanes=v,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=v,d.entangledLanes&=v,d.errorRecoveryDisabledLanes&=v,d.shellSuspendCounter=0;var Be=d.entanglements,Ve=d.expirationTimes,dt=d.hiddenUpdates;for(v=pe&~v;0<v;){var Ct=31-Ht(v),Dt=1<<Ct;Be[Ct]=0,Ve[Ct]=-1;var ft=dt[Ct];if(ft!==null)for(dt[Ct]=null,Ct=0;Ct<ft.length;Ct++){var mt=ft[Ct];mt!==null&&(mt.lane&=-536870913)}v&=~Dt}C!==0&&xn(d,C,0),Y!==0&&H===0&&d.tag!==0&&(d.suspendedLanes|=Y&~(pe&~f))}function xn(d,f,v){d.pendingLanes|=f,d.suspendedLanes&=~f;var C=31-Ht(f);d.entangledLanes|=f,d.entanglements[C]=d.entanglements[C]|1073741824|v&4194090}function hr(d,f){var v=d.entangledLanes|=f;for(d=d.entanglements;v;){var C=31-Ht(v),H=1<<C;H&f|d[C]&f&&(d[C]|=f),v&=~H}}function Ta(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function ms(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Ys(){var d=le.p;return d!==0?d:(d=window.event,d===void 0?32:i3(d.type))}function fa(d,f){var v=le.p;try{return le.p=d,f()}finally{le.p=v}}var rn=Math.random().toString(36).slice(2),Ur="__reactFiber$"+rn,Ir="__reactProps$"+rn,es="__reactContainer$"+rn,Er="__reactEvents$"+rn,Yt="__reactListeners$"+rn,be="__reactHandles$"+rn,Pe="__reactResources$"+rn,Fe="__reactMarker$"+rn;function De(d){delete d[Ur],delete d[Ir],delete d[Er],delete d[Yt],delete d[be]}function Le(d){var f=d[Ur];if(f)return f;for(var v=d.parentNode;v;){if(f=v[es]||v[Ur]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(d=GI(d);d!==null;){if(v=d[Ur])return v;d=GI(d)}return f}d=v,v=d.parentNode}return null}function Me(d){if(d=d[Ur]||d[es]){var f=d.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return d}return null}function tt(d){var f=d.tag;if(f===5||f===26||f===27||f===6)return d.stateNode;throw Error(r(33))}function At(d){var f=d[Pe];return f||(f=d[Pe]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Je(d){d[Fe]=!0}var at=new Set,ct={};function Bt(d,f){jt(d,f),jt(d+"Capture",f)}function jt(d,f){for(ct[d]=f,d=0;d<f.length;d++)at.add(f[d])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},$t={};function Cn(d){return he.call($t,d)?!0:he.call(Ot,d)?!1:Jt.test(d)?$t[d]=!0:(Ot[d]=!0,!1)}function Ar(d,f,v){if(Cn(f))if(v===null)d.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":d.removeAttribute(f);return;case"boolean":var C=f.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){d.removeAttribute(f);return}}d.setAttribute(f,""+v)}}function fr(d,f,v){if(v===null)d.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(f);return}d.setAttribute(f,""+v)}}function mr(d,f,v,C){if(C===null)d.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(v);return}d.setAttributeNS(f,v,""+C)}}var Hs,Na;function Xs(d){if(Hs===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);Hs=f&&f[1]||"",Na=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+d+Na}var ha=!1;function Us(d,f){if(!d||ha)return"";ha=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(f){var Dt=function(){throw Error()};if(Object.defineProperty(Dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dt,[])}catch(mt){var ft=mt}Reflect.construct(d,[],Dt)}else{try{Dt.call()}catch(mt){ft=mt}d.call(Dt.prototype)}}else{try{throw Error()}catch(mt){ft=mt}(Dt=d())&&typeof Dt.catch=="function"&&Dt.catch(function(){})}}catch(mt){if(mt&&ft&&typeof mt.stack=="string")return[mt.stack,ft.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=C.DetermineComponentFrameRoot(),pe=Y[0],Be=Y[1];if(pe&&Be){var Ve=pe.split(`
`),dt=Be.split(`
`);for(H=C=0;C<Ve.length&&!Ve[C].includes("DetermineComponentFrameRoot");)C++;for(;H<dt.length&&!dt[H].includes("DetermineComponentFrameRoot");)H++;if(C===Ve.length||H===dt.length)for(C=Ve.length-1,H=dt.length-1;1<=C&&0<=H&&Ve[C]!==dt[H];)H--;for(;1<=C&&0<=H;C--,H--)if(Ve[C]!==dt[H]){if(C!==1||H!==1)do if(C--,H--,0>H||Ve[C]!==dt[H]){var Ct=`
`+Ve[C].replace(" at new "," at ");return d.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",d.displayName)),Ct}while(1<=C&&0<=H);break}}}finally{ha=!1,Error.prepareStackTrace=v}return(v=d?d.displayName||d.name:"")?Xs(v):""}function Mn(d){switch(d.tag){case 26:case 27:case 5:return Xs(d.type);case 16:return Xs("Lazy");case 13:return Xs("Suspense");case 19:return Xs("SuspenseList");case 0:case 15:return Us(d.type,!1);case 11:return Us(d.type.render,!1);case 1:return Us(d.type,!0);case 31:return Xs("Activity");default:return""}}function Un(d){try{var f="";do f+=Mn(d),d=d.return;while(d);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Js(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function lo(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Al(d){var f=lo(d)?"checked":"value",v=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),C=""+d[f];if(!d.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var H=v.get,Y=v.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return H.call(this)},set:function(pe){C=""+pe,Y.call(this,pe)}}),Object.defineProperty(d,f,{enumerable:v.enumerable}),{getValue:function(){return C},setValue:function(pe){C=""+pe},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Do(d){d._valueTracker||(d._valueTracker=Al(d))}function Vn(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var v=f.getValue(),C="";return d&&(C=lo(d)?d.checked?"true":"false":d.value),d=C,d!==v?(f.setValue(d),!0):!1}function xr(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var Dl=/[\n"\\]/g;function Sr(d){return d.replace(Dl,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function is(d,f,v,C,H,Y,pe,Be){d.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?d.type=pe:d.removeAttribute("type"),f!=null?pe==="number"?(f===0&&d.value===""||d.value!=f)&&(d.value=""+Js(f)):d.value!==""+Js(f)&&(d.value=""+Js(f)):pe!=="submit"&&pe!=="reset"||d.removeAttribute("value"),f!=null?co(d,pe,Js(f)):v!=null?co(d,pe,Js(v)):C!=null&&d.removeAttribute("value"),H==null&&Y!=null&&(d.defaultChecked=!!Y),H!=null&&(d.checked=H&&typeof H!="function"&&typeof H!="symbol"),Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"?d.name=""+Js(Be):d.removeAttribute("name")}function Ll(d,f,v,C,H,Y,pe,Be){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(d.type=Y),f!=null||v!=null){if(!(Y!=="submit"&&Y!=="reset"||f!=null))return;v=v!=null?""+Js(v):"",f=f!=null?""+Js(f):v,Be||f===d.value||(d.value=f),d.defaultValue=f}C=C??H,C=typeof C!="function"&&typeof C!="symbol"&&!!C,d.checked=Be?d.checked:!!C,d.defaultChecked=!!C,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(d.name=pe)}function co(d,f,v){f==="number"&&xr(d.ownerDocument)===d||d.defaultValue===""+v||(d.defaultValue=""+v)}function Ba(d,f,v,C){if(d=d.options,f){f={};for(var H=0;H<v.length;H++)f["$"+v[H]]=!0;for(v=0;v<d.length;v++)H=f.hasOwnProperty("$"+d[v].value),d[v].selected!==H&&(d[v].selected=H),H&&C&&(d[v].defaultSelected=!0)}else{for(v=""+Js(v),f=null,H=0;H<d.length;H++){if(d[H].value===v){d[H].selected=!0,C&&(d[H].defaultSelected=!0);return}f!==null||d[H].disabled||(f=d[H])}f!==null&&(f.selected=!0)}}function Dn(d,f,v){if(f!=null&&(f=""+Js(f),f!==d.value&&(d.value=f),v==null)){d.defaultValue!==f&&(d.defaultValue=f);return}d.defaultValue=v!=null?""+Js(v):""}function li(d,f,v,C){if(f==null){if(C!=null){if(v!=null)throw Error(r(92));if(oe(C)){if(1<C.length)throw Error(r(93));C=C[0]}v=C}v==null&&(v=""),f=v}v=Js(f),d.defaultValue=v,C=d.textContent,C===v&&C!==""&&C!==null&&(d.value=C)}function ka(d,f){if(f){var v=d.firstChild;if(v&&v===d.lastChild&&v.nodeType===3){v.nodeValue=f;return}}d.textContent=f}var Ni=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hc(d,f,v){var C=f.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?d.setProperty(f,""):f==="float"?d.cssFloat="":d[f]="":C?d.setProperty(f,v):typeof v!="number"||v===0||Ni.has(f)?f==="float"?d.cssFloat=v:d[f]=(""+v).trim():d[f]=v+"px"}function fl(d,f,v){if(f!=null&&typeof f!="object")throw Error(r(62));if(d=d.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||f!=null&&f.hasOwnProperty(C)||(C.indexOf("--")===0?d.setProperty(C,""):C==="float"?d.cssFloat="":d[C]="");for(var H in f)C=f[H],f.hasOwnProperty(H)&&v[H]!==C&&Hc(d,H,C)}else for(var Y in f)f.hasOwnProperty(Y)&&Hc(d,Y,f[Y])}function uc(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ao(d){return hl.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var ji=null;function $r(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Lo=null,Hi=null;function Ln(d){var f=Me(d);if(f&&(d=f.stateNode)){var v=d[Ir]||null;e:switch(d=f.stateNode,f.type){case"input":if(is(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),f=v.name,v.type==="radio"&&f!=null){for(v=d;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Sr(""+f)+'"][type="radio"]'),f=0;f<v.length;f++){var C=v[f];if(C!==d&&C.form===d.form){var H=C[Ir]||null;if(!H)throw Error(r(90));is(C,H.value,H.defaultValue,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name)}}for(f=0;f<v.length;f++)C=v[f],C.form===d.form&&Vn(C)}break e;case"textarea":Dn(d,v.value,v.defaultValue);break e;case"select":f=v.value,f!=null&&Ba(d,!!v.multiple,f,!1)}}}var bn=!1;function Bi(d,f,v){if(bn)return d(f,v);bn=!0;try{var C=d(f);return C}finally{if(bn=!1,(Lo!==null||Hi!==null)&&(j1(),Lo&&(f=Lo,d=Hi,Hi=Lo=null,Ln(f),d)))for(f=0;f<d.length;f++)Ln(d[f])}}function ir(d,f){var v=d.stateNode;if(v===null)return null;var C=v[Ir]||null;if(C===null)return null;v=C[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(d=d.type,C=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!C;break e;default:d=!1}if(d)return null;if(v&&typeof v!="function")throw Error(r(231,f,typeof v));return v}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(ki)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{Ga=!1}var ci=null,ui=null,fo=null;function ml(){if(fo)return fo;var d,f=ui,v=f.length,C,H="value"in ci?ci.value:ci.textContent,Y=H.length;for(d=0;d<v&&f[d]===H[d];d++);var pe=v-d;for(C=1;C<=pe&&f[v-C]===H[Y-C];C++);return fo=H.slice(d,1<C?1-C:void 0)}function Wr(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function Qs(){return!0}function ho(){return!1}function Zs(d){function f(v,C,H,Y,pe){this._reactName=v,this._targetInst=H,this.type=C,this.nativeEvent=Y,this.target=pe,this.currentTarget=null;for(var Be in d)d.hasOwnProperty(Be)&&(v=d[Be],this[Be]=v?v(Y):Y[Be]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?Qs:ho,this.isPropagationStopped=ho,this}return A(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),f}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=Zs(Tr),Vi=A({},Tr,{view:0,detail:0}),_u=Zs(Vi),Rl,rr,mo,ps=A({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gl,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==mo&&(mo&&d.type==="mousemove"?(Rl=d.screenX-mo.screenX,rr=d.screenY-mo.screenY):rr=Rl=0,mo=d),Rl)},movementY:function(d){return"movementY"in d?d.movementY:rr}}),Fs=Zs(ps),Cu=A({},ps,{dataTransfer:0}),Pl=Zs(Cu),ma=A({},Vi,{relatedTarget:0}),Ml=Zs(ma),Ro=A({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qc=Zs(Ro),dc=A({},Tr,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ul=Zs(dc),Eu=A({},Tr,{data:0}),Ia=Zs(Eu),Ol={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ii={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=Ii[d])?!!f[d]:!1}function gl(){return Hl}var Vc=A({},Vi,{key:function(d){if(d.key){var f=Ol[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=Wr(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?jl[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gl,charCode:function(d){return d.type==="keypress"?Wr(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Wr(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),vl=Zs(Vc),xl=A({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ql=Zs(xl),di=A({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gl}),zc=Zs(di),X=A({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ye=Zs(X),Oe=A({},ps,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Zs(Oe),Xe=A({},Tr,{newState:0,oldState:0}),gt=Zs(Xe),Rt=[9,13,27,32],qt=ki&&"CompositionEvent"in window,I=null;ki&&"documentMode"in document&&(I=document.documentMode);var ae=ki&&"TextEvent"in window&&!I,Ae=ki&&(!qt||I&&8<I&&11>=I),Te=" ",We=!1;function ot(d,f){switch(d){case"keyup":return Rt.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pt(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Rn=!1;function yr(d,f){switch(d){case"compositionend":return Pt(f);case"keypress":return f.which!==32?null:(We=!0,Te);case"textInput":return d=f.data,d===Te&&We?null:d;default:return null}}function Zn(d,f){if(Rn)return d==="compositionend"||!qt&&ot(d,f)?(d=ml(),fo=ui=ci=null,Rn=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Ae&&f.locale!=="ko"?null:f.data;default:return null}}var lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!lr[d.type]:f==="textarea"}function Po(d,f,v,C){Lo?Hi?Hi.push(C):Hi=[C]:Lo=C,f=q1(f,"onChange"),0<f.length&&(v=new pl("onChange","change",null,v,C),d.push({event:v,listeners:f}))}var ts=null,zi=null;function Fi(d){RI(d,0)}function Gc(d){var f=tt(d);if(Vn(f))return d}function Vl(d,f){if(d==="change")return f}var qc=!1;if(ki){var Vs;if(ki){var Kc="oninput"in document;if(!Kc){var Gi=document.createElement("div");Gi.setAttribute("oninput","return;"),Kc=typeof Gi.oninput=="function"}Vs=Kc}else Vs=!1;qc=Vs&&(!document.documentMode||9<document.documentMode)}function zl(){ts&&(ts.detachEvent("onpropertychange",td),zi=ts=null)}function td(d){if(d.propertyName==="value"&&Gc(zi)){var f=[];Po(f,zi,d,$r(d)),Bi(Fi,f)}}function Ai(d,f,v){d==="focusin"?(zl(),ts=f,zi=v,ts.attachEvent("onpropertychange",td)):d==="focusout"&&zl()}function hh(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Gc(zi)}function po(d,f){if(d==="click")return Gc(f)}function OA(d,f){if(d==="input"||d==="change")return Gc(f)}function qa(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var Fa=typeof Object.is=="function"?Object.is:qa;function fi(d,f){if(Fa(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var v=Object.keys(d),C=Object.keys(f);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var H=v[C];if(!he.call(f,H)||!Fa(d[H],f[H]))return!1}return!0}function $c(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Gl(d,f){var v=$c(d);d=0;for(var C;v;){if(v.nodeType===3){if(C=d+v.textContent.length,d<=f&&C>=f)return{node:v,offset:f-d};d=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=$c(v)}}function ql(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?ql(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function Da(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var f=xr(d.document);f instanceof d.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)d=f.contentWindow;else break;f=xr(d.document)}return f}function pa(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}var yl=ki&&"documentMode"in document&&11>=document.documentMode,ga=null,qi=null,Mo=null,Uo=!1;function zs(d,f,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Uo||ga==null||ga!==xr(C)||(C=ga,"selectionStart"in C&&pa(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Mo&&fi(Mo,C)||(Mo=C,C=q1(qi,"onSelect"),0<C.length&&(f=new pl("onSelect","select",null,f,v),d.push({event:f,listeners:C}),f.target=ga)))}function Ki(d,f){var v={};return v[d.toLowerCase()]=f.toLowerCase(),v["Webkit"+d]="webkit"+f,v["Moz"+d]="moz"+f,v}var ca={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},Di={},Su={};ki&&(Su=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function wl(d){if(Di[d])return Di[d];if(!ca[d])return d;var f=ca[d],v;for(v in f)if(f.hasOwnProperty(v)&&v in Su)return Di[d]=f[v];return d}var nd=wl("animationend"),Ka=wl("animationiteration"),bl=wl("animationstart"),Wc=wl("transitionrun"),Kl=wl("transitionstart"),rd=wl("transitioncancel"),Ac=wl("transitionend"),fc=new Map,_l="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_l.push("scrollEnd");function Gs(d,f){fc.set(d,f),Bt(f,[d])}var La=new WeakMap;function pr(d,f){if(typeof d=="object"&&d!==null){var v=La.get(d);return v!==void 0?v:(f={value:d,source:f,stack:Un(f)},La.set(d,f),f)}return{value:d,source:f,stack:Un(f)}}var gr=[],gs=0,ns=0;function go(){for(var d=gs,f=ns=gs=0;f<d;){var v=gr[f];gr[f++]=null;var C=gr[f];gr[f++]=null;var H=gr[f];gr[f++]=null;var Y=gr[f];if(gr[f++]=null,C!==null&&H!==null){var pe=C.pending;pe===null?H.next=H:(H.next=pe.next,pe.next=H),C.pending=H}Y!==0&&Tu(v,H,Y)}}function hc(d,f,v,C){gr[gs++]=d,gr[gs++]=f,gr[gs++]=v,gr[gs++]=C,ns|=C,d.lanes|=C,d=d.alternate,d!==null&&(d.lanes|=C)}function Oo(d,f,v,C){return hc(d,f,v,C),Cl(d)}function mc(d,f){return hc(d,null,null,f),Cl(d)}function Tu(d,f,v){d.lanes|=v;var C=d.alternate;C!==null&&(C.lanes|=v);for(var H=!1,Y=d.return;Y!==null;)Y.childLanes|=v,C=Y.alternate,C!==null&&(C.childLanes|=v),Y.tag===22&&(d=Y.stateNode,d===null||d._visibility&1||(H=!0)),d=Y,Y=Y.return;return d.tag===3?(Y=d.stateNode,H&&f!==null&&(H=31-Ht(v),d=Y.hiddenUpdates,C=d[H],C===null?d[H]=[f]:C.push(f),f.lane=v|536870912),Y):null}function Cl(d){if(50<gg)throw gg=0,IC=null,Error(r(185));for(var f=d.return;f!==null;)d=f,f=d.return;return d.tag===3?d.stateNode:null}var va={};function vo(d,f,v,C){this.tag=d,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(d,f,v,C){return new vo(d,f,v,C)}function Nu(d){return d=d.prototype,!(!d||!d.isReactComponent)}function El(d,f){var v=d.alternate;return v===null?(v=hi(d.tag,f,d.key,d.mode),v.elementType=d.elementType,v.type=d.type,v.stateNode=d.stateNode,v.alternate=d,d.alternate=v):(v.pendingProps=f,v.type=d.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=d.flags&65011712,v.childLanes=d.childLanes,v.lanes=d.lanes,v.child=d.child,v.memoizedProps=d.memoizedProps,v.memoizedState=d.memoizedState,v.updateQueue=d.updateQueue,f=d.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=d.sibling,v.index=d.index,v.ref=d.ref,v.refCleanup=d.refCleanup,v}function sd(d,f){d.flags&=65011714;var v=d.alternate;return v===null?(d.childLanes=0,d.lanes=f,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=v.childLanes,d.lanes=v.lanes,d.child=v.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=v.memoizedProps,d.memoizedState=v.memoizedState,d.updateQueue=v.updateQueue,d.type=v.type,f=v.dependencies,d.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),d}function Yc(d,f,v,C,H,Y){var pe=0;if(C=d,typeof d=="function")Nu(d)&&(pe=1);else if(typeof d=="string")pe=Pq(d,v,se.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case k:return d=hi(31,v,f,H),d.elementType=k,d.lanes=Y,d;case w:return $l(v.children,H,Y,f);case x:pe=8,H|=24;break;case S:return d=hi(12,v,f,H|2),d.elementType=S,d.lanes=Y,d;case j:return d=hi(13,v,f,H),d.elementType=j,d.lanes=Y,d;case P:return d=hi(19,v,f,H),d.elementType=P,d.lanes=Y,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case N:case D:pe=10;break e;case F:pe=9;break e;case R:pe=11;break e;case E:pe=14;break e;case T:pe=16,C=null;break e}pe=29,v=Error(r(130,d===null?"null":typeof d,"")),C=null}return f=hi(pe,v,f,H),f.elementType=d,f.type=C,f.lanes=Y,f}function $l(d,f,v,C){return d=hi(7,d,C,f),d.lanes=v,d}function jA(d,f,v){return d=hi(6,d,null,f),d.lanes=v,d}function ad(d,f,v){return f=hi(4,d.children!==null?d.children:[],d.key,f),f.lanes=v,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}var pc=[],gc=0,m=null,b=0,O=[],te=0,de=null,Ce=1,Qe="";function st(d,f){pc[gc++]=b,pc[gc++]=m,m=d,b=f}function ht(d,f,v){O[te++]=Ce,O[te++]=Qe,O[te++]=de,de=d;var C=Ce;d=Qe;var H=32-Ht(C)-1;C&=~(1<<H),v+=1;var Y=32-Ht(f)+H;if(30<Y){var pe=H-H%5;Y=(C&(1<<pe)-1).toString(32),C>>=pe,H-=pe,Ce=1<<32-Ht(f)+H|v<<H|C,Qe=Y+d}else Ce=1<<Y|v<<H|C,Qe=d}function Ft(d){d.return!==null&&(st(d,1),ht(d,1,0))}function an(d){for(;d===m;)m=pc[--gc],pc[gc]=null,b=pc[--gc],pc[gc]=null;for(;d===de;)de=O[--te],O[te]=null,Qe=O[--te],O[te]=null,Ce=O[--te],O[te]=null}var An=null,vn=null,Kn=!1,_s=null,ea=!1,mi=Error(r(519));function jo(d){var f=Error(r(418,""));throw Bu(pr(f,d)),mi}function L0(d){var f=d.stateNode,v=d.type,C=d.memoizedProps;switch(f[Ur]=d,f[Ir]=C,v){case"dialog":Hr("cancel",f),Hr("close",f);break;case"iframe":case"object":case"embed":Hr("load",f);break;case"video":case"audio":for(v=0;v<xg.length;v++)Hr(xg[v],f);break;case"source":Hr("error",f);break;case"img":case"image":case"link":Hr("error",f),Hr("load",f);break;case"details":Hr("toggle",f);break;case"input":Hr("invalid",f),Ll(f,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),Do(f);break;case"select":Hr("invalid",f);break;case"textarea":Hr("invalid",f),li(f,C.value,C.defaultValue,C.children),Do(f)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||f.textContent===""+v||C.suppressHydrationWarning===!0||OI(f.textContent,v)?(C.popover!=null&&(Hr("beforetoggle",f),Hr("toggle",f)),C.onScroll!=null&&Hr("scroll",f),C.onScrollEnd!=null&&Hr("scrollend",f),C.onClick!=null&&(f.onclick=K1),f=!0):f=!1,f||jo(d)}function vc(d){for(An=d.return;An;)switch(An.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:An=An.return}}function Li(d){if(d!==An)return!1;if(!Kn)return vc(d),Kn=!0,!1;var f=d.tag,v;if((v=f!==3&&f!==27)&&((v=f===5)&&(v=d.type,v=!(v!=="form"&&v!=="button")||KC(d.type,d.memoizedProps)),v=!v),v&&vn&&jo(d),vc(d),f===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8)if(v=d.data,v==="/$"){if(f===0){vn=Pu(d.nextSibling);break e}f--}else v!=="$"&&v!=="$!"&&v!=="$?"||f++;d=d.nextSibling}vn=null}}else f===27?(f=vn,nf(d.type)?(d=XC,XC=null,vn=d):vn=f):vn=An?Pu(d.stateNode.nextSibling):null;return!0}function $i(){vn=An=null,Kn=!1}function R0(){var d=_s;return d!==null&&(Jl===null?Jl=d:Jl.push.apply(Jl,d),_s=null),d}function Bu(d){_s===null?_s=[d]:_s.push(d)}var rs=ce(null),ta=null,xc=null;function Xc(d,f,v){Z(rs,f._currentValue),f._currentValue=v}function Wl(d){d._currentValue=rs.current,Q(rs)}function id(d,f,v){for(;d!==null;){var C=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,C!==null&&(C.childLanes|=f)):C!==null&&(C.childLanes&f)!==f&&(C.childLanes|=f),d===v)break;d=d.return}}function Wd(d,f,v,C){var H=d.child;for(H!==null&&(H.return=d);H!==null;){var Y=H.dependencies;if(Y!==null){var pe=H.child;Y=Y.firstContext;e:for(;Y!==null;){var Be=Y;Y=H;for(var Ve=0;Ve<f.length;Ve++)if(Be.context===f[Ve]){Y.lanes|=v,Be=Y.alternate,Be!==null&&(Be.lanes|=v),id(Y.return,v,d),C||(pe=null);break e}Y=Be.next}}else if(H.tag===18){if(pe=H.return,pe===null)throw Error(r(341));pe.lanes|=v,Y=pe.alternate,Y!==null&&(Y.lanes|=v),id(pe,v,d),pe=null}else pe=H.child;if(pe!==null)pe.return=H;else for(pe=H;pe!==null;){if(pe===d){pe=null;break}if(H=pe.sibling,H!==null){H.return=pe.return,pe=H;break}pe=pe.return}H=pe}}function od(d,f,v,C){d=null;for(var H=f,Y=!1;H!==null;){if(!Y){if((H.flags&524288)!==0)Y=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var pe=H.alternate;if(pe===null)throw Error(r(387));if(pe=pe.memoizedProps,pe!==null){var Be=H.type;Fa(H.pendingProps.value,pe.value)||(d!==null?d.push(Be):d=[Be])}}else if(H===Se.current){if(pe=H.alternate,pe===null)throw Error(r(387));pe.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(d!==null?d.push(Eg):d=[Eg])}H=H.return}d!==null&&Wd(f,d,v,C),f.flags|=262144}function P0(d){for(d=d.firstContext;d!==null;){if(!Fa(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function Jc(d){ta=d,xc=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function $a(d){return M0(ta,d)}function ld(d,f){return ta===null&&Jc(d),M0(d,f)}function M0(d,f){var v=f._currentValue;if(f={context:f,memoizedValue:v,next:null},xc===null){if(d===null)throw Error(r(308));xc=f,d.dependencies={lanes:0,firstContext:f},d.flags|=524288}else xc=xc.next=f;return v}var nC=typeof AbortController<"u"?AbortController:function(){var d=[],f=this.signal={aborted:!1,addEventListener:function(v,C){d.push(C)}};this.abort=function(){f.aborted=!0,d.forEach(function(v){return v()})}},f1=t.unstable_scheduleCallback,rC=t.unstable_NormalPriority,Wa={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $p(){return{controller:new nC,data:new Map,refCount:0}}function mh(d){d.refCount--,d.refCount===0&&f1(rC,function(){d.controller.abort()})}var ph=null,Wp=0,Yd=0,ku=null;function sC(d,f){if(ph===null){var v=ph=[];Wp=0,Yd=UC(),ku={status:"pending",value:void 0,then:function(C){v.push(C)}}}return Wp++,f.then(h1,h1),f}function h1(){if(--Wp===0&&ph!==null){ku!==null&&(ku.status="fulfilled");var d=ph;ph=null,Yd=0,ku=null;for(var f=0;f<d.length;f++)(0,d[f])()}}function m1(d,f){var v=[],C={status:"pending",value:null,reason:null,then:function(H){v.push(H)}};return d.then(function(){C.status="fulfilled",C.value=f;for(var H=0;H<v.length;H++)(0,v[H])(f)},function(H){for(C.status="rejected",C.reason=H,H=0;H<v.length;H++)(0,v[H])(void 0)}),C}var B=ee.S;ee.S=function(d,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&sC(d,f),B!==null&&B(d,f)};var V=ce(null);function re(){var d=V.current;return d!==null?d:Ks.pooledCache}function ue(d,f){f===null?Z(V,V.current):Z(V,f.pool)}function we(){var d=re();return d===null?null:{parent:Wa._currentValue,pool:d}}var _e=Error(r(460)),Ee=Error(r(474)),Ne=Error(r(542)),ke={then:function(){}};function Re(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Ge(){}function ut(d,f,v){switch(v=d[v],v===void 0?d.push(f):v!==f&&(f.then(Ge,Ge),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw d=f.reason,kt(d),d;default:if(typeof f.status=="string")f.then(Ge,Ge);else{if(d=Ks,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=f,d.status="pending",d.then(function(C){if(f.status==="pending"){var H=f;H.status="fulfilled",H.value=C}},function(C){if(f.status==="pending"){var H=f;H.status="rejected",H.reason=C}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw d=f.reason,kt(d),d}throw it=f,_e}}var it=null;function Ze(){if(it===null)throw Error(r(459));var d=it;return it=null,d}function kt(d){if(d===_e||d===Ne)throw Error(r(483))}var pt=!1;function qe(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ye(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function bt(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function It(d,f,v){var C=d.updateQueue;if(C===null)return null;if(C=C.shared,(Es&2)!==0){var H=C.pending;return H===null?f.next=f:(f.next=H.next,H.next=f),C.pending=f,f=Cl(d),Tu(d,null,v),f}return hc(d,C,f,v),Cl(d)}function Et(d,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194048)!==0)){var C=f.lanes;C&=d.pendingLanes,v|=C,f.lanes=v,hr(d,v)}}function ln(d,f){var v=d.updateQueue,C=d.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var H=null,Y=null;if(v=v.firstBaseUpdate,v!==null){do{var pe={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};Y===null?H=Y=pe:Y=Y.next=pe,v=v.next}while(v!==null);Y===null?H=Y=f:Y=Y.next=f}else H=Y=f;v={baseState:C.baseState,firstBaseUpdate:H,lastBaseUpdate:Y,shared:C.shared,callbacks:C.callbacks},d.updateQueue=v;return}d=v.lastBaseUpdate,d===null?v.firstBaseUpdate=f:d.next=f,v.lastBaseUpdate=f}var en=!1;function yn(){if(en){var d=ku;if(d!==null)throw d}}function nn(d,f,v,C){en=!1;var H=d.updateQueue;pt=!1;var Y=H.firstBaseUpdate,pe=H.lastBaseUpdate,Be=H.shared.pending;if(Be!==null){H.shared.pending=null;var Ve=Be,dt=Ve.next;Ve.next=null,pe===null?Y=dt:pe.next=dt,pe=Ve;var Ct=d.alternate;Ct!==null&&(Ct=Ct.updateQueue,Be=Ct.lastBaseUpdate,Be!==pe&&(Be===null?Ct.firstBaseUpdate=dt:Be.next=dt,Ct.lastBaseUpdate=Ve))}if(Y!==null){var Dt=H.baseState;pe=0,Ct=dt=Ve=null,Be=Y;do{var ft=Be.lane&-536870913,mt=ft!==Be.lane;if(mt?(Jr&ft)===ft:(C&ft)===ft){ft!==0&&ft===Yd&&(en=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:Be.tag,payload:Be.payload,callback:null,next:null});e:{var er=d,Qn=Be;ft=f;var Ls=v;switch(Qn.tag){case 1:if(er=Qn.payload,typeof er=="function"){Dt=er.call(Ls,Dt,ft);break e}Dt=er;break e;case 3:er.flags=er.flags&-65537|128;case 0:if(er=Qn.payload,ft=typeof er=="function"?er.call(Ls,Dt,ft):er,ft==null)break e;Dt=A({},Dt,ft);break e;case 2:pt=!0}}ft=Be.callback,ft!==null&&(d.flags|=64,mt&&(d.flags|=8192),mt=H.callbacks,mt===null?H.callbacks=[ft]:mt.push(ft))}else mt={lane:ft,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Ct===null?(dt=Ct=mt,Ve=Dt):Ct=Ct.next=mt,pe|=ft;if(Be=Be.next,Be===null){if(Be=H.shared.pending,Be===null)break;mt=Be,Be=mt.next,mt.next=null,H.lastBaseUpdate=mt,H.shared.pending=null}}while(!0);Ct===null&&(Ve=Dt),H.baseState=Ve,H.firstBaseUpdate=dt,H.lastBaseUpdate=Ct,Y===null&&(H.shared.lanes=0),JA|=pe,d.lanes=pe,d.memoizedState=Dt}}function Yr(d,f){if(typeof d!="function")throw Error(r(191,d));d.call(f)}function os(d,f){var v=d.callbacks;if(v!==null)for(d.callbacks=null,d=0;d<v.length;d++)Yr(v[d],f)}var Nr=ce(null),wr=ce(0);function vs(d,f){d=iA,Z(wr,d),Z(Nr,f),iA=d|f.baseLanes}function ls(){Z(wr,iA),Z(Nr,Nr.current)}function sr(){iA=wr.current,Q(Nr),Q(wr)}var Cs=0,In=null,$n=null,Kr=null,Xr=!1,pi=!1,Ya=!1,xa=0,ya=0,Ra=null,Yl=0;function cs(){throw Error(r(321))}function Pa(d,f){if(f===null)return!1;for(var v=0;v<f.length&&v<d.length;v++)if(!Fa(d[v],f[v]))return!1;return!0}function yc(d,f,v,C,H,Y){return Cs=Y,In=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ee.H=d===null||d.memoizedState===null?xk:yk,Ya=!1,Y=v(C,H),Ya=!1,pi&&(Y=Xd(f,v,C,H)),cd(d),Y}function cd(d){ee.H=T1;var f=$n!==null&&$n.next!==null;if(Cs=0,Kr=$n=In=null,Xr=!1,ya=0,Ra=null,f)throw Error(r(300));d===null||Wi||(d=d.dependencies,d!==null&&P0(d)&&(Wi=!0))}function Xd(d,f,v,C){In=d;var H=0;do{if(pi&&(Ra=null),ya=0,pi=!1,25<=H)throw Error(r(301));if(H+=1,Kr=$n=null,d.updateQueue!=null){var Y=d.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}ee.H=KG,Y=f(v,C)}while(pi);return Y}function ud(){var d=ee.H,f=d.useState()[0];return f=typeof f.then=="function"?dd(f):f,d=d.useState()[0],($n!==null?$n.memoizedState:null)!==d&&(In.flags|=1024),f}function qs(){var d=xa!==0;return xa=0,d}function gh(d,f,v){f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~v}function U0(d){if(Xr){for(d=d.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Xr=!1}Cs=0,Kr=$n=In=null,pi=!1,ya=xa=0,Ra=null}function xo(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?In.memoizedState=Kr=d:Kr=Kr.next=d,Kr}function na(){if($n===null){var d=In.alternate;d=d!==null?d.memoizedState:null}else d=$n.next;var f=Kr===null?In.memoizedState:Kr.next;if(f!==null)Kr=f,$n=d;else{if(d===null)throw In.alternate===null?Error(r(467)):Error(r(310));$n=d,d={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Kr===null?In.memoizedState=Kr=d:Kr=Kr.next=d}return Kr}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dd(d){var f=ya;return ya+=1,Ra===null&&(Ra=[]),d=ut(Ra,d,f),f=In,(Kr===null?f.memoizedState:Kr.next)===null&&(f=f.alternate,ee.H=f===null||f.memoizedState===null?xk:yk),d}function Ho(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return dd(d);if(d.$$typeof===D)return $a(d)}throw Error(r(438,String(d)))}function Ad(d){var f=null,v=In.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var C=In.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(f={data:C.data.map(function(H){return H.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=Jd(),In.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(d),C=0;C<d;C++)v[C]=z;return f.index++,v}function Qo(d,f){return typeof f=="function"?f(d):f}function vh(d){var f=na();return HA(f,$n,d)}function HA(d,f,v){var C=d.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=v;var H=d.baseQueue,Y=C.pending;if(Y!==null){if(H!==null){var pe=H.next;H.next=Y.next,Y.next=pe}f.baseQueue=H=Y,C.pending=null}if(Y=d.baseState,H===null)d.memoizedState=Y;else{f=H.next;var Be=pe=null,Ve=null,dt=f,Ct=!1;do{var Dt=dt.lane&-536870913;if(Dt!==dt.lane?(Jr&Dt)===Dt:(Cs&Dt)===Dt){var ft=dt.revertLane;if(ft===0)Ve!==null&&(Ve=Ve.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Dt===Yd&&(Ct=!0);else if((Cs&ft)===ft){dt=dt.next,ft===Yd&&(Ct=!0);continue}else Dt={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ve===null?(Be=Ve=Dt,pe=Y):Ve=Ve.next=Dt,In.lanes|=ft,JA|=ft;Dt=dt.action,Ya&&v(Y,Dt),Y=dt.hasEagerState?dt.eagerState:v(Y,Dt)}else ft={lane:Dt,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ve===null?(Be=Ve=ft,pe=Y):Ve=Ve.next=ft,In.lanes|=Dt,JA|=Dt;dt=dt.next}while(dt!==null&&dt!==f);if(Ve===null?pe=Y:Ve.next=Be,!Fa(Y,d.memoizedState)&&(Wi=!0,Ct&&(v=ku,v!==null)))throw v;d.memoizedState=Y,d.baseState=pe,d.baseQueue=Ve,C.lastRenderedState=Y}return H===null&&(C.lanes=0),[d.memoizedState,C.dispatch]}function O0(d){var f=na(),v=f.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=d;var C=v.dispatch,H=v.pending,Y=f.memoizedState;if(H!==null){v.pending=null;var pe=H=H.next;do Y=d(Y,pe.action),pe=pe.next;while(pe!==H);Fa(Y,f.memoizedState)||(Wi=!0),f.memoizedState=Y,f.baseQueue===null&&(f.baseState=Y),v.lastRenderedState=Y}return[Y,C]}function xh(d,f,v){var C=In,H=na(),Y=Kn;if(Y){if(v===void 0)throw Error(r(407));v=v()}else v=f();var pe=!Fa(($n||H).memoizedState,v);pe&&(H.memoizedState=v,Wi=!0),H=H.queue;var Be=QA.bind(null,C,H,d);if(GA(2048,8,Be,[d]),H.getSnapshot!==f||pe||Kr!==null&&Kr.memoizedState.tag&1){if(C.flags|=2048,Fu(9,_h(),yh.bind(null,C,H,v,f),null),Ks===null)throw Error(r(349));Y||(Cs&124)!==0||j0(C,f,v)}return v}function j0(d,f,v){d.flags|=16384,d={getSnapshot:f,value:v},f=In.updateQueue,f===null?(f=Jd(),In.updateQueue=f,f.stores=[d]):(v=f.stores,v===null?f.stores=[d]:v.push(d))}function yh(d,f,v,C){f.value=v,f.getSnapshot=C,p1(f)&&g1(d)}function QA(d,f,v){return v(function(){p1(f)&&g1(d)})}function p1(d){var f=d.getSnapshot;d=d.value;try{var v=f();return!Fa(d,v)}catch{return!0}}function g1(d){var f=mc(d,2);f!==null&&Sc(f,d,2)}function wh(d){var f=xo();if(typeof d=="function"){var v=d;if(d=v(),Ya){sn(!0);try{v()}finally{sn(!1)}}}return f.memoizedState=f.baseState=d,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:d},f}function Iu(d,f,v,C){return d.baseState=v,HA(d,$n,typeof C=="function"?C:Qo)}function aC(d,f,v,C,H){if(S1(d))throw Error(r(485));if(d=f.action,d!==null){var Y={payload:H,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){Y.listeners.push(pe)}};ee.T!==null?v(!0):Y.isTransition=!1,C(Y),v=f.pending,v===null?(Y.next=f.pending=Y,v1(f,Y)):(Y.next=v.next,f.pending=v.next=Y)}}function v1(d,f){var v=f.action,C=f.payload,H=d.state;if(f.isTransition){var Y=ee.T,pe={};ee.T=pe;try{var Be=v(H,C),Ve=ee.S;Ve!==null&&Ve(pe,Be),x1(d,f,Be)}catch(dt){VA(d,f,dt)}finally{ee.T=Y}}else try{Y=v(H,C),x1(d,f,Y)}catch(dt){VA(d,f,dt)}}function x1(d,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){Yp(d,f,C)},function(C){return VA(d,f,C)}):Yp(d,f,v)}function Yp(d,f,v){f.status="fulfilled",f.value=v,Xp(f),d.state=v,f=d.pending,f!==null&&(v=f.next,v===f?d.pending=null:(v=v.next,f.next=v,v1(d,v)))}function VA(d,f,v){var C=d.pending;if(d.pending=null,C!==null){C=C.next;do f.status="rejected",f.reason=v,Xp(f),f=f.next;while(f!==C)}d.action=null}function Xp(d){d=d.listeners;for(var f=0;f<d.length;f++)(0,d[f])()}function Jp(d,f){return f}function bh(d,f){if(Kn){var v=Ks.formState;if(v!==null){e:{var C=In;if(Kn){if(vn){t:{for(var H=vn,Y=ea;H.nodeType!==8;){if(!Y){H=null;break t}if(H=Pu(H.nextSibling),H===null){H=null;break t}}Y=H.data,H=Y==="F!"||Y==="F"?H:null}if(H){vn=Pu(H.nextSibling),C=H.data==="F!";break e}}jo(C)}C=!1}C&&(f=v[0])}}return v=xo(),v.memoizedState=v.baseState=f,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jp,lastRenderedState:f},v.queue=C,v=pk.bind(null,In,C),C.dispatch=v,C=wh(!1),Y=iC.bind(null,In,!1,C.queue),C=xo(),H={state:f,dispatch:null,action:d,pending:null},C.queue=H,v=aC.bind(null,In,H,Y,v),H.dispatch=v,C.memoizedState=d,[f,v,!1]}function H0(d){var f=na();return zA(f,$n,d)}function zA(d,f,v){if(f=HA(d,f,Jp)[0],d=vh(Qo)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var C=dd(f)}catch(pe){throw pe===_e?Ne:pe}else C=f;f=na();var H=f.queue,Y=H.dispatch;return v!==f.memoizedState&&(In.flags|=2048,Fu(9,_h(),y1.bind(null,H,v),null)),[C,Y,d]}function y1(d,f){d.action=f}function w1(d){var f=na(),v=$n;if(v!==null)return zA(f,v,d);na(),f=f.memoizedState,v=na();var C=v.queue.dispatch;return v.memoizedState=d,[f,C,!1]}function Fu(d,f,v,C){return d={tag:d,create:v,deps:C,inst:f,next:null},f=In.updateQueue,f===null&&(f=Jd(),In.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=d.next=d:(C=v.next,v.next=d,d.next=C,f.lastEffect=d),d}function _h(){return{destroy:void 0,resource:void 0}}function Q0(){return na().memoizedState}function wc(d,f,v,C){var H=xo();C=C===void 0?null:C,In.flags|=d,H.memoizedState=Fu(1|f,_h(),v,C)}function GA(d,f,v,C){var H=na();C=C===void 0?null:C;var Y=H.memoizedState.inst;$n!==null&&C!==null&&Pa(C,$n.memoizedState.deps)?H.memoizedState=Fu(f,Y,v,C):(In.flags|=d,H.memoizedState=Fu(1|f,Y,v,C))}function Zp(d,f){wc(8390656,8,d,f)}function b1(d,f){GA(2048,8,d,f)}function eg(d,f){return GA(4,2,d,f)}function Zd(d,f){return GA(4,4,d,f)}function _1(d,f){if(typeof f=="function"){d=d();var v=f(d);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function tg(d,f,v){v=v!=null?v.concat([d]):null,GA(4,4,_1.bind(null,f,d),v)}function ng(){}function rg(d,f){var v=na();f=f===void 0?null:f;var C=v.memoizedState;return f!==null&&Pa(f,C[1])?C[0]:(v.memoizedState=[d,f],d)}function C1(d,f){var v=na();f=f===void 0?null:f;var C=v.memoizedState;if(f!==null&&Pa(f,C[1]))return C[0];if(C=d(),Ya){sn(!0);try{d()}finally{sn(!1)}}return v.memoizedState=[C,f],C}function eA(d,f,v){return v===void 0||(Cs&1073741824)!==0?d.memoizedState=f:(d.memoizedState=v,d=AI(),In.lanes|=d,JA|=d,v)}function V0(d,f,v,C){return Fa(v,f)?v:Nr.current!==null?(d=eA(d,v,C),Fa(d,f)||(Wi=!0),d):(Cs&42)===0?(Wi=!0,d.memoizedState=v):(d=AI(),In.lanes|=d,JA|=d,f)}function Ch(d,f,v,C,H){var Y=le.p;le.p=Y!==0&&8>Y?Y:8;var pe=ee.T,Be={};ee.T=Be,iC(d,!1,f,v);try{var Ve=H(),dt=ee.S;if(dt!==null&&dt(Be,Ve),Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var Ct=m1(Ve,C);og(d,f,Ct,Ec(d))}else og(d,f,C,Ec(d))}catch(Dt){og(d,f,{then:function(){},status:"rejected",reason:Dt},Ec())}finally{le.p=Y,ee.T=pe}}function Du(){}function Zc(d,f,v,C){if(d.tag!==5)throw Error(r(476));var H=Lu(d).queue;Ch(d,H,f,K,v===null?Du:function(){return Eh(d),v(C)})}function Lu(d){var f=d.memoizedState;if(f!==null)return f;f={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:K},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:v},next:null},d.memoizedState=f,d=d.alternate,d!==null&&(d.memoizedState=f),f}function Eh(d){var f=Lu(d).next.queue;og(d,f,{},Ec())}function Sh(){return $a(Eg)}function sg(){return na().memoizedState}function E1(){return na().memoizedState}function ag(d){for(var f=d.return;f!==null;){switch(f.tag){case 24:case 3:var v=Ec();d=bt(v);var C=It(f,d,v);C!==null&&(Sc(C,f,v),Et(C,f,v)),f={cache:$p()},d.payload=f;return}f=f.return}}function ig(d,f,v){var C=Ec();v={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},S1(d)?gk(f,v):(v=Oo(d,f,v,C),v!==null&&(Sc(v,d,C),vk(v,f,C)))}function pk(d,f,v){var C=Ec();og(d,f,v,C)}function og(d,f,v,C){var H={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(S1(d))gk(f,H);else{var Y=d.alternate;if(d.lanes===0&&(Y===null||Y.lanes===0)&&(Y=f.lastRenderedReducer,Y!==null))try{var pe=f.lastRenderedState,Be=Y(pe,v);if(H.hasEagerState=!0,H.eagerState=Be,Fa(Be,pe))return hc(d,f,H,0),Ks===null&&go(),!1}catch{}finally{}if(v=Oo(d,f,H,C),v!==null)return Sc(v,d,C),vk(v,f,C),!0}return!1}function iC(d,f,v,C){if(C={lane:2,revertLane:UC(),action:C,hasEagerState:!1,eagerState:null,next:null},S1(d)){if(f)throw Error(r(479))}else f=Oo(d,v,C,2),f!==null&&Sc(f,d,2)}function S1(d){var f=d.alternate;return d===In||f!==null&&f===In}function gk(d,f){pi=Xr=!0;var v=d.pending;v===null?f.next=f:(f.next=v.next,v.next=f),d.pending=f}function vk(d,f,v){if((v&4194048)!==0){var C=f.lanes;C&=d.pendingLanes,v|=C,f.lanes=v,hr(d,v)}}var T1={readContext:$a,use:Ho,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useLayoutEffect:cs,useInsertionEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useSyncExternalStore:cs,useId:cs,useHostTransitionStatus:cs,useFormState:cs,useActionState:cs,useOptimistic:cs,useMemoCache:cs,useCacheRefresh:cs},xk={readContext:$a,use:Ho,useCallback:function(d,f){return xo().memoizedState=[d,f===void 0?null:f],d},useContext:$a,useEffect:Zp,useImperativeHandle:function(d,f,v){v=v!=null?v.concat([d]):null,wc(4194308,4,_1.bind(null,f,d),v)},useLayoutEffect:function(d,f){return wc(4194308,4,d,f)},useInsertionEffect:function(d,f){wc(4,2,d,f)},useMemo:function(d,f){var v=xo();f=f===void 0?null:f;var C=d();if(Ya){sn(!0);try{d()}finally{sn(!1)}}return v.memoizedState=[C,f],C},useReducer:function(d,f,v){var C=xo();if(v!==void 0){var H=v(f);if(Ya){sn(!0);try{v(f)}finally{sn(!1)}}}else H=f;return C.memoizedState=C.baseState=H,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:H},C.queue=d,d=d.dispatch=ig.bind(null,In,d),[C.memoizedState,d]},useRef:function(d){var f=xo();return d={current:d},f.memoizedState=d},useState:function(d){d=wh(d);var f=d.queue,v=pk.bind(null,In,f);return f.dispatch=v,[d.memoizedState,v]},useDebugValue:ng,useDeferredValue:function(d,f){var v=xo();return eA(v,d,f)},useTransition:function(){var d=wh(!1);return d=Ch.bind(null,In,d.queue,!0,!1),xo().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,f,v){var C=In,H=xo();if(Kn){if(v===void 0)throw Error(r(407));v=v()}else{if(v=f(),Ks===null)throw Error(r(349));(Jr&124)!==0||j0(C,f,v)}H.memoizedState=v;var Y={value:v,getSnapshot:f};return H.queue=Y,Zp(QA.bind(null,C,Y,d),[d]),C.flags|=2048,Fu(9,_h(),yh.bind(null,C,Y,v,f),null),v},useId:function(){var d=xo(),f=Ks.identifierPrefix;if(Kn){var v=Qe,C=Ce;v=(C&~(1<<32-Ht(C)-1)).toString(32)+v,f=""+f+"R"+v,v=xa++,0<v&&(f+="H"+v.toString(32)),f+=""}else v=Yl++,f=""+f+"r"+v.toString(32)+"";return d.memoizedState=f},useHostTransitionStatus:Sh,useFormState:bh,useActionState:bh,useOptimistic:function(d){var f=xo();f.memoizedState=f.baseState=d;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=iC.bind(null,In,!0,v),v.dispatch=f,[d,f]},useMemoCache:Ad,useCacheRefresh:function(){return xo().memoizedState=ag.bind(null,In)}},yk={readContext:$a,use:Ho,useCallback:rg,useContext:$a,useEffect:b1,useImperativeHandle:tg,useInsertionEffect:eg,useLayoutEffect:Zd,useMemo:C1,useReducer:vh,useRef:Q0,useState:function(){return vh(Qo)},useDebugValue:ng,useDeferredValue:function(d,f){var v=na();return V0(v,$n.memoizedState,d,f)},useTransition:function(){var d=vh(Qo)[0],f=na().memoizedState;return[typeof d=="boolean"?d:dd(d),f]},useSyncExternalStore:xh,useId:sg,useHostTransitionStatus:Sh,useFormState:H0,useActionState:H0,useOptimistic:function(d,f){var v=na();return Iu(v,$n,d,f)},useMemoCache:Ad,useCacheRefresh:E1},KG={readContext:$a,use:Ho,useCallback:rg,useContext:$a,useEffect:b1,useImperativeHandle:tg,useInsertionEffect:eg,useLayoutEffect:Zd,useMemo:C1,useReducer:O0,useRef:Q0,useState:function(){return O0(Qo)},useDebugValue:ng,useDeferredValue:function(d,f){var v=na();return $n===null?eA(v,d,f):V0(v,$n.memoizedState,d,f)},useTransition:function(){var d=O0(Qo)[0],f=na().memoizedState;return[typeof d=="boolean"?d:dd(d),f]},useSyncExternalStore:xh,useId:sg,useHostTransitionStatus:Sh,useFormState:w1,useActionState:w1,useOptimistic:function(d,f){var v=na();return $n!==null?Iu(v,$n,d,f):(v.baseState=d,[d,v.queue.dispatch])},useMemoCache:Ad,useCacheRefresh:E1},z0=null,lg=0;function N1(d){var f=lg;return lg+=1,z0===null&&(z0=[]),ut(z0,d,f)}function cg(d,f){f=f.props.ref,d.ref=f!==void 0?f:null}function B1(d,f){throw f.$$typeof===h?Error(r(525)):(d=Object.prototype.toString.call(f),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d)))}function wk(d){var f=d._init;return f(d._payload)}function bk(d){function f(nt,$e){if(d){var lt=nt.deletions;lt===null?(nt.deletions=[$e],nt.flags|=16):lt.push($e)}}function v(nt,$e){if(!d)return null;for(;$e!==null;)f(nt,$e),$e=$e.sibling;return null}function C(nt){for(var $e=new Map;nt!==null;)nt.key!==null?$e.set(nt.key,nt):$e.set(nt.index,nt),nt=nt.sibling;return $e}function H(nt,$e){return nt=El(nt,$e),nt.index=0,nt.sibling=null,nt}function Y(nt,$e,lt){return nt.index=lt,d?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<$e?(nt.flags|=67108866,$e):lt):(nt.flags|=67108866,$e)):(nt.flags|=1048576,$e)}function pe(nt){return d&&nt.alternate===null&&(nt.flags|=67108866),nt}function Be(nt,$e,lt,Nt){return $e===null||$e.tag!==6?($e=jA(lt,nt.mode,Nt),$e.return=nt,$e):($e=H($e,lt),$e.return=nt,$e)}function Ve(nt,$e,lt,Nt){var pn=lt.type;return pn===w?Ct(nt,$e,lt.props.children,Nt,lt.key):$e!==null&&($e.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===T&&wk(pn)===$e.type)?($e=H($e,lt.props),cg($e,lt),$e.return=nt,$e):($e=Yc(lt.type,lt.key,lt.props,null,nt.mode,Nt),cg($e,lt),$e.return=nt,$e)}function dt(nt,$e,lt,Nt){return $e===null||$e.tag!==4||$e.stateNode.containerInfo!==lt.containerInfo||$e.stateNode.implementation!==lt.implementation?($e=ad(lt,nt.mode,Nt),$e.return=nt,$e):($e=H($e,lt.children||[]),$e.return=nt,$e)}function Ct(nt,$e,lt,Nt,pn){return $e===null||$e.tag!==7?($e=$l(lt,nt.mode,Nt,pn),$e.return=nt,$e):($e=H($e,lt),$e.return=nt,$e)}function Dt(nt,$e,lt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return $e=jA(""+$e,nt.mode,lt),$e.return=nt,$e;if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:return lt=Yc($e.type,$e.key,$e.props,null,nt.mode,lt),cg(lt,$e),lt.return=nt,lt;case g:return $e=ad($e,nt.mode,lt),$e.return=nt,$e;case T:var Nt=$e._init;return $e=Nt($e._payload),Dt(nt,$e,lt)}if(oe($e)||U($e))return $e=$l($e,nt.mode,lt,null),$e.return=nt,$e;if(typeof $e.then=="function")return Dt(nt,N1($e),lt);if($e.$$typeof===D)return Dt(nt,ld(nt,$e),lt);B1(nt,$e)}return null}function ft(nt,$e,lt,Nt){var pn=$e!==null?$e.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return pn!==null?null:Be(nt,$e,""+lt,Nt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:return lt.key===pn?Ve(nt,$e,lt,Nt):null;case g:return lt.key===pn?dt(nt,$e,lt,Nt):null;case T:return pn=lt._init,lt=pn(lt._payload),ft(nt,$e,lt,Nt)}if(oe(lt)||U(lt))return pn!==null?null:Ct(nt,$e,lt,Nt,null);if(typeof lt.then=="function")return ft(nt,$e,N1(lt),Nt);if(lt.$$typeof===D)return ft(nt,$e,ld(nt,lt),Nt);B1(nt,lt)}return null}function mt(nt,$e,lt,Nt,pn){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return nt=nt.get(lt)||null,Be($e,nt,""+Nt,pn);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case p:return nt=nt.get(Nt.key===null?lt:Nt.key)||null,Ve($e,nt,Nt,pn);case g:return nt=nt.get(Nt.key===null?lt:Nt.key)||null,dt($e,nt,Nt,pn);case T:var Dr=Nt._init;return Nt=Dr(Nt._payload),mt(nt,$e,lt,Nt,pn)}if(oe(Nt)||U(Nt))return nt=nt.get(lt)||null,Ct($e,nt,Nt,pn,null);if(typeof Nt.then=="function")return mt(nt,$e,lt,N1(Nt),pn);if(Nt.$$typeof===D)return mt(nt,$e,lt,ld($e,Nt),pn);B1($e,Nt)}return null}function er(nt,$e,lt,Nt){for(var pn=null,Dr=null,_n=$e,zn=$e=0,Xi=null;_n!==null&&zn<lt.length;zn++){_n.index>zn?(Xi=_n,_n=null):Xi=_n.sibling;var us=ft(nt,_n,lt[zn],Nt);if(us===null){_n===null&&(_n=Xi);break}d&&_n&&us.alternate===null&&f(nt,_n),$e=Y(us,$e,zn),Dr===null?pn=us:Dr.sibling=us,Dr=us,_n=Xi}if(zn===lt.length)return v(nt,_n),Kn&&st(nt,zn),pn;if(_n===null){for(;zn<lt.length;zn++)_n=Dt(nt,lt[zn],Nt),_n!==null&&($e=Y(_n,$e,zn),Dr===null?pn=_n:Dr.sibling=_n,Dr=_n);return Kn&&st(nt,zn),pn}for(_n=C(_n);zn<lt.length;zn++)Xi=mt(_n,nt,zn,lt[zn],Nt),Xi!==null&&(d&&Xi.alternate!==null&&_n.delete(Xi.key===null?zn:Xi.key),$e=Y(Xi,$e,zn),Dr===null?pn=Xi:Dr.sibling=Xi,Dr=Xi);return d&&_n.forEach(function(lf){return f(nt,lf)}),Kn&&st(nt,zn),pn}function Qn(nt,$e,lt,Nt){if(lt==null)throw Error(r(151));for(var pn=null,Dr=null,_n=$e,zn=$e=0,Xi=null,us=lt.next();_n!==null&&!us.done;zn++,us=lt.next()){_n.index>zn?(Xi=_n,_n=null):Xi=_n.sibling;var lf=ft(nt,_n,us.value,Nt);if(lf===null){_n===null&&(_n=Xi);break}d&&_n&&lf.alternate===null&&f(nt,_n),$e=Y(lf,$e,zn),Dr===null?pn=lf:Dr.sibling=lf,Dr=lf,_n=Xi}if(us.done)return v(nt,_n),Kn&&st(nt,zn),pn;if(_n===null){for(;!us.done;zn++,us=lt.next())us=Dt(nt,us.value,Nt),us!==null&&($e=Y(us,$e,zn),Dr===null?pn=us:Dr.sibling=us,Dr=us);return Kn&&st(nt,zn),pn}for(_n=C(_n);!us.done;zn++,us=lt.next())us=mt(_n,nt,zn,us.value,Nt),us!==null&&(d&&us.alternate!==null&&_n.delete(us.key===null?zn:us.key),$e=Y(us,$e,zn),Dr===null?pn=us:Dr.sibling=us,Dr=us);return d&&_n.forEach(function($q){return f(nt,$q)}),Kn&&st(nt,zn),pn}function Ls(nt,$e,lt,Nt){if(typeof lt=="object"&&lt!==null&&lt.type===w&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:e:{for(var pn=lt.key;$e!==null;){if($e.key===pn){if(pn=lt.type,pn===w){if($e.tag===7){v(nt,$e.sibling),Nt=H($e,lt.props.children),Nt.return=nt,nt=Nt;break e}}else if($e.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===T&&wk(pn)===$e.type){v(nt,$e.sibling),Nt=H($e,lt.props),cg(Nt,lt),Nt.return=nt,nt=Nt;break e}v(nt,$e);break}else f(nt,$e);$e=$e.sibling}lt.type===w?(Nt=$l(lt.props.children,nt.mode,Nt,lt.key),Nt.return=nt,nt=Nt):(Nt=Yc(lt.type,lt.key,lt.props,null,nt.mode,Nt),cg(Nt,lt),Nt.return=nt,nt=Nt)}return pe(nt);case g:e:{for(pn=lt.key;$e!==null;){if($e.key===pn)if($e.tag===4&&$e.stateNode.containerInfo===lt.containerInfo&&$e.stateNode.implementation===lt.implementation){v(nt,$e.sibling),Nt=H($e,lt.children||[]),Nt.return=nt,nt=Nt;break e}else{v(nt,$e);break}else f(nt,$e);$e=$e.sibling}Nt=ad(lt,nt.mode,Nt),Nt.return=nt,nt=Nt}return pe(nt);case T:return pn=lt._init,lt=pn(lt._payload),Ls(nt,$e,lt,Nt)}if(oe(lt))return er(nt,$e,lt,Nt);if(U(lt)){if(pn=U(lt),typeof pn!="function")throw Error(r(150));return lt=pn.call(lt),Qn(nt,$e,lt,Nt)}if(typeof lt.then=="function")return Ls(nt,$e,N1(lt),Nt);if(lt.$$typeof===D)return Ls(nt,$e,ld(nt,lt),Nt);B1(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,$e!==null&&$e.tag===6?(v(nt,$e.sibling),Nt=H($e,lt),Nt.return=nt,nt=Nt):(v(nt,$e),Nt=jA(lt,nt.mode,Nt),Nt.return=nt,nt=Nt),pe(nt)):v(nt,$e)}return function(nt,$e,lt,Nt){try{lg=0;var pn=Ls(nt,$e,lt,Nt);return z0=null,pn}catch(_n){if(_n===_e||_n===Ne)throw _n;var Dr=hi(29,_n,null,nt.mode);return Dr.lanes=Nt,Dr.return=nt,Dr}finally{}}}var G0=bk(!0),_k=bk(!1),eu=ce(null),fd=null;function qA(d){var f=d.alternate;Z(Ri,Ri.current&1),Z(eu,d),fd===null&&(f===null||Nr.current!==null||f.memoizedState!==null)&&(fd=d)}function Ck(d){if(d.tag===22){if(Z(Ri,Ri.current),Z(eu,d),fd===null){var f=d.alternate;f!==null&&f.memoizedState!==null&&(fd=d)}}else KA()}function KA(){Z(Ri,Ri.current),Z(eu,eu.current)}function tA(d){Q(eu),fd===d&&(fd=null),Q(Ri)}var Ri=ce(0);function k1(d){for(var f=d;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||YC(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function oC(d,f,v,C){f=d.memoizedState,v=v(C,f),v=v==null?f:A({},f,v),d.memoizedState=v,d.lanes===0&&(d.updateQueue.baseState=v)}var lC={enqueueSetState:function(d,f,v){d=d._reactInternals;var C=Ec(),H=bt(C);H.payload=f,v!=null&&(H.callback=v),f=It(d,H,C),f!==null&&(Sc(f,d,C),Et(f,d,C))},enqueueReplaceState:function(d,f,v){d=d._reactInternals;var C=Ec(),H=bt(C);H.tag=1,H.payload=f,v!=null&&(H.callback=v),f=It(d,H,C),f!==null&&(Sc(f,d,C),Et(f,d,C))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var v=Ec(),C=bt(v);C.tag=2,f!=null&&(C.callback=f),f=It(d,C,v),f!==null&&(Sc(f,d,v),Et(f,d,v))}};function Ek(d,f,v,C,H,Y,pe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(C,Y,pe):f.prototype&&f.prototype.isPureReactComponent?!fi(v,C)||!fi(H,Y):!0}function Sk(d,f,v,C){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,C),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,C),f.state!==d&&lC.enqueueReplaceState(f,f.state,null)}function Th(d,f){var v=f;if("ref"in f){v={};for(var C in f)C!=="ref"&&(v[C]=f[C])}if(d=d.defaultProps){v===f&&(v=A({},v));for(var H in d)v[H]===void 0&&(v[H]=d[H])}return v}var I1=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function Tk(d){I1(d)}function Nk(d){console.error(d)}function Bk(d){I1(d)}function F1(d,f){try{var v=d.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(C){setTimeout(function(){throw C})}}function kk(d,f,v){try{var C=d.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function cC(d,f,v){return v=bt(v),v.tag=3,v.payload={element:null},v.callback=function(){F1(d,f)},v}function Ik(d){return d=bt(d),d.tag=3,d}function Fk(d,f,v,C){var H=v.type.getDerivedStateFromError;if(typeof H=="function"){var Y=C.value;d.payload=function(){return H(Y)},d.callback=function(){kk(f,v,C)}}var pe=v.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(d.callback=function(){kk(f,v,C),typeof H!="function"&&(ZA===null?ZA=new Set([this]):ZA.add(this));var Be=C.stack;this.componentDidCatch(C.value,{componentStack:Be!==null?Be:""})})}function $G(d,f,v,C,H){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(f=v.alternate,f!==null&&od(f,v,H,!0),v=eu.current,v!==null){switch(v.tag){case 13:return fd===null?DC():v.alternate===null&&Ma===0&&(Ma=3),v.flags&=-257,v.flags|=65536,v.lanes=H,C===ke?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([C]):f.add(C),RC(d,C,H)),!1;case 22:return v.flags|=65536,C===ke?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([C]):v.add(C)),RC(d,C,H)),!1}throw Error(r(435,v.tag))}return RC(d,C,H),DC(),!1}if(Kn)return f=eu.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=H,C!==mi&&(d=Error(r(422),{cause:C}),Bu(pr(d,v)))):(C!==mi&&(f=Error(r(423),{cause:C}),Bu(pr(f,v))),d=d.current.alternate,d.flags|=65536,H&=-H,d.lanes|=H,C=pr(C,v),H=cC(d.stateNode,C,H),ln(d,H),Ma!==4&&(Ma=2)),!1;var Y=Error(r(520),{cause:C});if(Y=pr(Y,v),pg===null?pg=[Y]:pg.push(Y),Ma!==4&&(Ma=2),f===null)return!0;C=pr(C,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,d=H&-H,v.lanes|=d,d=cC(v.stateNode,C,d),ln(v,d),!1;case 1:if(f=v.type,Y=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ZA===null||!ZA.has(Y))))return v.flags|=65536,H&=-H,v.lanes|=H,H=Ik(H),Fk(H,d,v,C),ln(v,H),!1}v=v.return}while(v!==null);return!1}var Dk=Error(r(461)),Wi=!1;function yo(d,f,v,C){f.child=d===null?_k(f,null,v,C):G0(f,d.child,v,C)}function Lk(d,f,v,C,H){v=v.render;var Y=f.ref;if("ref"in C){var pe={};for(var Be in C)Be!=="ref"&&(pe[Be]=C[Be])}else pe=C;return Jc(f),C=yc(d,f,v,pe,Y,H),Be=qs(),d!==null&&!Wi?(gh(d,f,H),nA(d,f,H)):(Kn&&Be&&Ft(f),f.flags|=1,yo(d,f,C,H),f.child)}function Rk(d,f,v,C,H){if(d===null){var Y=v.type;return typeof Y=="function"&&!Nu(Y)&&Y.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=Y,Pk(d,f,Y,C,H)):(d=Yc(v.type,null,C,f,f.mode,H),d.ref=f.ref,d.return=f,f.child=d)}if(Y=d.child,!gC(d,H)){var pe=Y.memoizedProps;if(v=v.compare,v=v!==null?v:fi,v(pe,C)&&d.ref===f.ref)return nA(d,f,H)}return f.flags|=1,d=El(Y,C),d.ref=f.ref,d.return=f,f.child=d}function Pk(d,f,v,C,H){if(d!==null){var Y=d.memoizedProps;if(fi(Y,C)&&d.ref===f.ref)if(Wi=!1,f.pendingProps=C=Y,gC(d,H))(d.flags&131072)!==0&&(Wi=!0);else return f.lanes=d.lanes,nA(d,f,H)}return uC(d,f,v,C,H)}function Mk(d,f,v){var C=f.pendingProps,H=C.children,Y=d!==null?d.memoizedState:null;if(C.mode==="hidden"){if((f.flags&128)!==0){if(C=Y!==null?Y.baseLanes|v:v,d!==null){for(H=f.child=d.child,Y=0;H!==null;)Y=Y|H.lanes|H.childLanes,H=H.sibling;f.childLanes=Y&~C}else f.childLanes=0,f.child=null;return Uk(d,f,C,v)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},d!==null&&ue(f,Y!==null?Y.cachePool:null),Y!==null?vs(f,Y):ls(),Ck(f);else return f.lanes=f.childLanes=536870912,Uk(d,f,Y!==null?Y.baseLanes|v:v,v)}else Y!==null?(ue(f,Y.cachePool),vs(f,Y),KA(),f.memoizedState=null):(d!==null&&ue(f,null),ls(),KA());return yo(d,f,H,v),f.child}function Uk(d,f,v,C){var H=re();return H=H===null?null:{parent:Wa._currentValue,pool:H},f.memoizedState={baseLanes:v,cachePool:H},d!==null&&ue(f,null),ls(),Ck(f),d!==null&&od(d,f,C,!0),null}function D1(d,f){var v=f.ref;if(v===null)d!==null&&d.ref!==null&&(f.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(d===null||d.ref!==v)&&(f.flags|=4194816)}}function uC(d,f,v,C,H){return Jc(f),v=yc(d,f,v,C,void 0,H),C=qs(),d!==null&&!Wi?(gh(d,f,H),nA(d,f,H)):(Kn&&C&&Ft(f),f.flags|=1,yo(d,f,v,H),f.child)}function Ok(d,f,v,C,H,Y){return Jc(f),f.updateQueue=null,v=Xd(f,C,v,H),cd(d),C=qs(),d!==null&&!Wi?(gh(d,f,Y),nA(d,f,Y)):(Kn&&C&&Ft(f),f.flags|=1,yo(d,f,v,Y),f.child)}function jk(d,f,v,C,H){if(Jc(f),f.stateNode===null){var Y=va,pe=v.contextType;typeof pe=="object"&&pe!==null&&(Y=$a(pe)),Y=new v(C,Y),f.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=lC,f.stateNode=Y,Y._reactInternals=f,Y=f.stateNode,Y.props=C,Y.state=f.memoizedState,Y.refs={},qe(f),pe=v.contextType,Y.context=typeof pe=="object"&&pe!==null?$a(pe):va,Y.state=f.memoizedState,pe=v.getDerivedStateFromProps,typeof pe=="function"&&(oC(f,v,pe,C),Y.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(pe=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),pe!==Y.state&&lC.enqueueReplaceState(Y,Y.state,null),nn(f,C,Y,H),yn(),Y.state=f.memoizedState),typeof Y.componentDidMount=="function"&&(f.flags|=4194308),C=!0}else if(d===null){Y=f.stateNode;var Be=f.memoizedProps,Ve=Th(v,Be);Y.props=Ve;var dt=Y.context,Ct=v.contextType;pe=va,typeof Ct=="object"&&Ct!==null&&(pe=$a(Ct));var Dt=v.getDerivedStateFromProps;Ct=typeof Dt=="function"||typeof Y.getSnapshotBeforeUpdate=="function",Be=f.pendingProps!==Be,Ct||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(Be||dt!==pe)&&Sk(f,Y,C,pe),pt=!1;var ft=f.memoizedState;Y.state=ft,nn(f,C,Y,H),yn(),dt=f.memoizedState,Be||ft!==dt||pt?(typeof Dt=="function"&&(oC(f,v,Dt,C),dt=f.memoizedState),(Ve=pt||Ek(f,v,Ve,C,ft,dt,pe))?(Ct||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=C,f.memoizedState=dt),Y.props=C,Y.state=dt,Y.context=pe,C=Ve):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),C=!1)}else{Y=f.stateNode,Ye(d,f),pe=f.memoizedProps,Ct=Th(v,pe),Y.props=Ct,Dt=f.pendingProps,ft=Y.context,dt=v.contextType,Ve=va,typeof dt=="object"&&dt!==null&&(Ve=$a(dt)),Be=v.getDerivedStateFromProps,(dt=typeof Be=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(pe!==Dt||ft!==Ve)&&Sk(f,Y,C,Ve),pt=!1,ft=f.memoizedState,Y.state=ft,nn(f,C,Y,H),yn();var mt=f.memoizedState;pe!==Dt||ft!==mt||pt||d!==null&&d.dependencies!==null&&P0(d.dependencies)?(typeof Be=="function"&&(oC(f,v,Be,C),mt=f.memoizedState),(Ct=pt||Ek(f,v,Ct,C,ft,mt,Ve)||d!==null&&d.dependencies!==null&&P0(d.dependencies))?(dt||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(C,mt,Ve),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(C,mt,Ve)),typeof Y.componentDidUpdate=="function"&&(f.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Y.componentDidUpdate!="function"||pe===d.memoizedProps&&ft===d.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||pe===d.memoizedProps&&ft===d.memoizedState||(f.flags|=1024),f.memoizedProps=C,f.memoizedState=mt),Y.props=C,Y.state=mt,Y.context=Ve,C=Ct):(typeof Y.componentDidUpdate!="function"||pe===d.memoizedProps&&ft===d.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||pe===d.memoizedProps&&ft===d.memoizedState||(f.flags|=1024),C=!1)}return Y=C,D1(d,f),C=(f.flags&128)!==0,Y||C?(Y=f.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:Y.render(),f.flags|=1,d!==null&&C?(f.child=G0(f,d.child,null,H),f.child=G0(f,null,v,H)):yo(d,f,v,H),f.memoizedState=Y.state,d=f.child):d=nA(d,f,H),d}function Hk(d,f,v,C){return $i(),f.flags|=256,yo(d,f,v,C),f.child}var dC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function AC(d){return{baseLanes:d,cachePool:we()}}function fC(d,f,v){return d=d!==null?d.childLanes&~v:0,f&&(d|=tu),d}function Qk(d,f,v){var C=f.pendingProps,H=!1,Y=(f.flags&128)!==0,pe;if((pe=Y)||(pe=d!==null&&d.memoizedState===null?!1:(Ri.current&2)!==0),pe&&(H=!0,f.flags&=-129),pe=(f.flags&32)!==0,f.flags&=-33,d===null){if(Kn){if(H?qA(f):KA(),Kn){var Be=vn,Ve;if(Ve=Be){e:{for(Ve=Be,Be=ea;Ve.nodeType!==8;){if(!Be){Be=null;break e}if(Ve=Pu(Ve.nextSibling),Ve===null){Be=null;break e}}Be=Ve}Be!==null?(f.memoizedState={dehydrated:Be,treeContext:de!==null?{id:Ce,overflow:Qe}:null,retryLane:536870912,hydrationErrors:null},Ve=hi(18,null,null,0),Ve.stateNode=Be,Ve.return=f,f.child=Ve,An=f,vn=null,Ve=!0):Ve=!1}Ve||jo(f)}if(Be=f.memoizedState,Be!==null&&(Be=Be.dehydrated,Be!==null))return YC(Be)?f.lanes=32:f.lanes=536870912,null;tA(f)}return Be=C.children,C=C.fallback,H?(KA(),H=f.mode,Be=L1({mode:"hidden",children:Be},H),C=$l(C,H,v,null),Be.return=f,C.return=f,Be.sibling=C,f.child=Be,H=f.child,H.memoizedState=AC(v),H.childLanes=fC(d,pe,v),f.memoizedState=dC,C):(qA(f),hC(f,Be))}if(Ve=d.memoizedState,Ve!==null&&(Be=Ve.dehydrated,Be!==null)){if(Y)f.flags&256?(qA(f),f.flags&=-257,f=mC(d,f,v)):f.memoizedState!==null?(KA(),f.child=d.child,f.flags|=128,f=null):(KA(),H=C.fallback,Be=f.mode,C=L1({mode:"visible",children:C.children},Be),H=$l(H,Be,v,null),H.flags|=2,C.return=f,H.return=f,C.sibling=H,f.child=C,G0(f,d.child,null,v),C=f.child,C.memoizedState=AC(v),C.childLanes=fC(d,pe,v),f.memoizedState=dC,f=H);else if(qA(f),YC(Be)){if(pe=Be.nextSibling&&Be.nextSibling.dataset,pe)var dt=pe.dgst;pe=dt,C=Error(r(419)),C.stack="",C.digest=pe,Bu({value:C,source:null,stack:null}),f=mC(d,f,v)}else if(Wi||od(d,f,v,!1),pe=(v&d.childLanes)!==0,Wi||pe){if(pe=Ks,pe!==null&&(C=v&-v,C=(C&42)!==0?1:Ta(C),C=(C&(pe.suspendedLanes|v))!==0?0:C,C!==0&&C!==Ve.retryLane))throw Ve.retryLane=C,mc(d,C),Sc(pe,d,C),Dk;Be.data==="$?"||DC(),f=mC(d,f,v)}else Be.data==="$?"?(f.flags|=192,f.child=d.child,f=null):(d=Ve.treeContext,vn=Pu(Be.nextSibling),An=f,Kn=!0,_s=null,ea=!1,d!==null&&(O[te++]=Ce,O[te++]=Qe,O[te++]=de,Ce=d.id,Qe=d.overflow,de=f),f=hC(f,C.children),f.flags|=4096);return f}return H?(KA(),H=C.fallback,Be=f.mode,Ve=d.child,dt=Ve.sibling,C=El(Ve,{mode:"hidden",children:C.children}),C.subtreeFlags=Ve.subtreeFlags&65011712,dt!==null?H=El(dt,H):(H=$l(H,Be,v,null),H.flags|=2),H.return=f,C.return=f,C.sibling=H,f.child=C,C=H,H=f.child,Be=d.child.memoizedState,Be===null?Be=AC(v):(Ve=Be.cachePool,Ve!==null?(dt=Wa._currentValue,Ve=Ve.parent!==dt?{parent:dt,pool:dt}:Ve):Ve=we(),Be={baseLanes:Be.baseLanes|v,cachePool:Ve}),H.memoizedState=Be,H.childLanes=fC(d,pe,v),f.memoizedState=dC,C):(qA(f),v=d.child,d=v.sibling,v=El(v,{mode:"visible",children:C.children}),v.return=f,v.sibling=null,d!==null&&(pe=f.deletions,pe===null?(f.deletions=[d],f.flags|=16):pe.push(d)),f.child=v,f.memoizedState=null,v)}function hC(d,f){return f=L1({mode:"visible",children:f},d.mode),f.return=d,d.child=f}function L1(d,f){return d=hi(22,d,null,f),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function mC(d,f,v){return G0(f,d.child,null,v),d=hC(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function Vk(d,f,v){d.lanes|=f;var C=d.alternate;C!==null&&(C.lanes|=f),id(d.return,f,v)}function pC(d,f,v,C,H){var Y=d.memoizedState;Y===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:H}:(Y.isBackwards=f,Y.rendering=null,Y.renderingStartTime=0,Y.last=C,Y.tail=v,Y.tailMode=H)}function zk(d,f,v){var C=f.pendingProps,H=C.revealOrder,Y=C.tail;if(yo(d,f,C.children,v),C=Ri.current,(C&2)!==0)C=C&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Vk(d,v,f);else if(d.tag===19)Vk(d,v,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}C&=1}switch(Z(Ri,C),H){case"forwards":for(v=f.child,H=null;v!==null;)d=v.alternate,d!==null&&k1(d)===null&&(H=v),v=v.sibling;v=H,v===null?(H=f.child,f.child=null):(H=v.sibling,v.sibling=null),pC(f,!1,H,v,Y);break;case"backwards":for(v=null,H=f.child,f.child=null;H!==null;){if(d=H.alternate,d!==null&&k1(d)===null){f.child=H;break}d=H.sibling,H.sibling=v,v=H,H=d}pC(f,!0,v,null,Y);break;case"together":pC(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function nA(d,f,v){if(d!==null&&(f.dependencies=d.dependencies),JA|=f.lanes,(v&f.childLanes)===0)if(d!==null){if(od(d,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(d!==null&&f.child!==d.child)throw Error(r(153));if(f.child!==null){for(d=f.child,v=El(d,d.pendingProps),f.child=v,v.return=f;d.sibling!==null;)d=d.sibling,v=v.sibling=El(d,d.pendingProps),v.return=f;v.sibling=null}return f.child}function gC(d,f){return(d.lanes&f)!==0?!0:(d=d.dependencies,!!(d!==null&&P0(d)))}function WG(d,f,v){switch(f.tag){case 3:ge(f,f.stateNode.containerInfo),Xc(f,Wa,d.memoizedState.cache),$i();break;case 27:case 5:ve(f);break;case 4:ge(f,f.stateNode.containerInfo);break;case 10:Xc(f,f.type,f.memoizedProps.value);break;case 13:var C=f.memoizedState;if(C!==null)return C.dehydrated!==null?(qA(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Qk(d,f,v):(qA(f),d=nA(d,f,v),d!==null?d.sibling:null);qA(f);break;case 19:var H=(d.flags&128)!==0;if(C=(v&f.childLanes)!==0,C||(od(d,f,v,!1),C=(v&f.childLanes)!==0),H){if(C)return zk(d,f,v);f.flags|=128}if(H=f.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Z(Ri,Ri.current),C)break;return null;case 22:case 23:return f.lanes=0,Mk(d,f,v);case 24:Xc(f,Wa,d.memoizedState.cache)}return nA(d,f,v)}function Gk(d,f,v){if(d!==null)if(d.memoizedProps!==f.pendingProps)Wi=!0;else{if(!gC(d,v)&&(f.flags&128)===0)return Wi=!1,WG(d,f,v);Wi=(d.flags&131072)!==0}else Wi=!1,Kn&&(f.flags&1048576)!==0&&ht(f,b,f.index);switch(f.lanes=0,f.tag){case 16:e:{d=f.pendingProps;var C=f.elementType,H=C._init;if(C=H(C._payload),f.type=C,typeof C=="function")Nu(C)?(d=Th(C,d),f.tag=1,f=jk(null,f,C,d,v)):(f.tag=0,f=uC(null,f,C,d,v));else{if(C!=null){if(H=C.$$typeof,H===R){f.tag=11,f=Lk(null,f,C,d,v);break e}else if(H===E){f.tag=14,f=Rk(null,f,C,d,v);break e}}throw f=q(C)||C,Error(r(306,f,""))}}return f;case 0:return uC(d,f,f.type,f.pendingProps,v);case 1:return C=f.type,H=Th(C,f.pendingProps),jk(d,f,C,H,v);case 3:e:{if(ge(f,f.stateNode.containerInfo),d===null)throw Error(r(387));C=f.pendingProps;var Y=f.memoizedState;H=Y.element,Ye(d,f),nn(f,C,null,v);var pe=f.memoizedState;if(C=pe.cache,Xc(f,Wa,C),C!==Y.cache&&Wd(f,[Wa],v,!0),yn(),C=pe.element,Y.isDehydrated)if(Y={element:C,isDehydrated:!1,cache:pe.cache},f.updateQueue.baseState=Y,f.memoizedState=Y,f.flags&256){f=Hk(d,f,C,v);break e}else if(C!==H){H=pr(Error(r(424)),f),Bu(H),f=Hk(d,f,C,v);break e}else{switch(d=f.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(vn=Pu(d.firstChild),An=f,Kn=!0,_s=null,ea=!0,v=_k(f,null,C,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if($i(),C===H){f=nA(d,f,v);break e}yo(d,f,C,v)}f=f.child}return f;case 26:return D1(d,f),d===null?(v=WI(f.type,null,f.pendingProps,null))?f.memoizedState=v:Kn||(v=f.type,d=f.pendingProps,C=$1(fe.current).createElement(v),C[Ur]=f,C[Ir]=d,bo(C,v,d),Je(C),f.stateNode=C):f.memoizedState=WI(f.type,d.memoizedProps,f.pendingProps,d.memoizedState),null;case 27:return ve(f),d===null&&Kn&&(C=f.stateNode=qI(f.type,f.pendingProps,fe.current),An=f,ea=!0,H=vn,nf(f.type)?(XC=H,vn=Pu(C.firstChild)):vn=H),yo(d,f,f.pendingProps.children,v),D1(d,f),d===null&&(f.flags|=4194304),f.child;case 5:return d===null&&Kn&&((H=C=vn)&&(C=_q(C,f.type,f.pendingProps,ea),C!==null?(f.stateNode=C,An=f,vn=Pu(C.firstChild),ea=!1,H=!0):H=!1),H||jo(f)),ve(f),H=f.type,Y=f.pendingProps,pe=d!==null?d.memoizedProps:null,C=Y.children,KC(H,Y)?C=null:pe!==null&&KC(H,pe)&&(f.flags|=32),f.memoizedState!==null&&(H=yc(d,f,ud,null,null,v),Eg._currentValue=H),D1(d,f),yo(d,f,C,v),f.child;case 6:return d===null&&Kn&&((d=v=vn)&&(v=Cq(v,f.pendingProps,ea),v!==null?(f.stateNode=v,An=f,vn=null,d=!0):d=!1),d||jo(f)),null;case 13:return Qk(d,f,v);case 4:return ge(f,f.stateNode.containerInfo),C=f.pendingProps,d===null?f.child=G0(f,null,C,v):yo(d,f,C,v),f.child;case 11:return Lk(d,f,f.type,f.pendingProps,v);case 7:return yo(d,f,f.pendingProps,v),f.child;case 8:return yo(d,f,f.pendingProps.children,v),f.child;case 12:return yo(d,f,f.pendingProps.children,v),f.child;case 10:return C=f.pendingProps,Xc(f,f.type,C.value),yo(d,f,C.children,v),f.child;case 9:return H=f.type._context,C=f.pendingProps.children,Jc(f),H=$a(H),C=C(H),f.flags|=1,yo(d,f,C,v),f.child;case 14:return Rk(d,f,f.type,f.pendingProps,v);case 15:return Pk(d,f,f.type,f.pendingProps,v);case 19:return zk(d,f,v);case 31:return C=f.pendingProps,v=f.mode,C={mode:C.mode,children:C.children},d===null?(v=L1(C,v),v.ref=f.ref,f.child=v,v.return=f,f=v):(v=El(d.child,C),v.ref=f.ref,f.child=v,v.return=f,f=v),f;case 22:return Mk(d,f,v);case 24:return Jc(f),C=$a(Wa),d===null?(H=re(),H===null&&(H=Ks,Y=$p(),H.pooledCache=Y,Y.refCount++,Y!==null&&(H.pooledCacheLanes|=v),H=Y),f.memoizedState={parent:C,cache:H},qe(f),Xc(f,Wa,H)):((d.lanes&v)!==0&&(Ye(d,f),nn(f,null,null,v),yn()),H=d.memoizedState,Y=f.memoizedState,H.parent!==C?(H={parent:C,cache:C},f.memoizedState=H,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=H),Xc(f,Wa,C)):(C=Y.cache,Xc(f,Wa,C),C!==H.cache&&Wd(f,[Wa],v,!0))),yo(d,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function rA(d){d.flags|=4}function qk(d,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!e3(f)){if(f=eu.current,f!==null&&((Jr&4194048)===Jr?fd!==null:(Jr&62914560)!==Jr&&(Jr&536870912)===0||f!==fd))throw it=ke,Ee;d.flags|=8192}}function R1(d,f){f!==null&&(d.flags|=4),d.flags&16384&&(f=d.tag!==22?Cr():536870912,d.lanes|=f,W0|=f)}function ug(d,f){if(!Kn)switch(d.tailMode){case"hidden":f=d.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?d.tail=null:v.sibling=null;break;case"collapsed":v=d.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:C.sibling=null}}function wa(d){var f=d.alternate!==null&&d.alternate.child===d.child,v=0,C=0;if(f)for(var H=d.child;H!==null;)v|=H.lanes|H.childLanes,C|=H.subtreeFlags&65011712,C|=H.flags&65011712,H.return=d,H=H.sibling;else for(H=d.child;H!==null;)v|=H.lanes|H.childLanes,C|=H.subtreeFlags,C|=H.flags,H.return=d,H=H.sibling;return d.subtreeFlags|=C,d.childLanes=v,f}function YG(d,f,v){var C=f.pendingProps;switch(an(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(f),null;case 1:return wa(f),null;case 3:return v=f.stateNode,C=null,d!==null&&(C=d.memoizedState.cache),f.memoizedState.cache!==C&&(f.flags|=2048),Wl(Wa),xe(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(d===null||d.child===null)&&(Li(f)?rA(f):d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,R0())),wa(f),null;case 26:return v=f.memoizedState,d===null?(rA(f),v!==null?(wa(f),qk(f,v)):(wa(f),f.flags&=-16777217)):v?v!==d.memoizedState?(rA(f),wa(f),qk(f,v)):(wa(f),f.flags&=-16777217):(d.memoizedProps!==C&&rA(f),wa(f),f.flags&=-16777217),null;case 27:me(f),v=fe.current;var H=f.type;if(d!==null&&f.stateNode!=null)d.memoizedProps!==C&&rA(f);else{if(!C){if(f.stateNode===null)throw Error(r(166));return wa(f),null}d=se.current,Li(f)?L0(f):(d=qI(H,C,v),f.stateNode=d,rA(f))}return wa(f),null;case 5:if(me(f),v=f.type,d!==null&&f.stateNode!=null)d.memoizedProps!==C&&rA(f);else{if(!C){if(f.stateNode===null)throw Error(r(166));return wa(f),null}if(d=se.current,Li(f))L0(f);else{switch(H=$1(fe.current),d){case 1:d=H.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:d=H.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":d=H.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":d=H.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":d=H.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof C.is=="string"?H.createElement("select",{is:C.is}):H.createElement("select"),C.multiple?d.multiple=!0:C.size&&(d.size=C.size);break;default:d=typeof C.is=="string"?H.createElement(v,{is:C.is}):H.createElement(v)}}d[Ur]=f,d[Ir]=C;e:for(H=f.child;H!==null;){if(H.tag===5||H.tag===6)d.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===f)break e;for(;H.sibling===null;){if(H.return===null||H.return===f)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}f.stateNode=d;e:switch(bo(d,v,C),v){case"button":case"input":case"select":case"textarea":d=!!C.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&rA(f)}}return wa(f),f.flags&=-16777217,null;case 6:if(d&&f.stateNode!=null)d.memoizedProps!==C&&rA(f);else{if(typeof C!="string"&&f.stateNode===null)throw Error(r(166));if(d=fe.current,Li(f)){if(d=f.stateNode,v=f.memoizedProps,C=null,H=An,H!==null)switch(H.tag){case 27:case 5:C=H.memoizedProps}d[Ur]=f,d=!!(d.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||OI(d.nodeValue,v)),d||jo(f)}else d=$1(d).createTextNode(C),d[Ur]=f,f.stateNode=d}return wa(f),null;case 13:if(C=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(H=Li(f),C!==null&&C.dehydrated!==null){if(d===null){if(!H)throw Error(r(318));if(H=f.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(r(317));H[Ur]=f}else $i(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;wa(f),H=!1}else H=R0(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=H),H=!0;if(!H)return f.flags&256?(tA(f),f):(tA(f),null)}if(tA(f),(f.flags&128)!==0)return f.lanes=v,f;if(v=C!==null,d=d!==null&&d.memoizedState!==null,v){C=f.child,H=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(H=C.alternate.memoizedState.cachePool.pool);var Y=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(Y=C.memoizedState.cachePool.pool),Y!==H&&(C.flags|=2048)}return v!==d&&v&&(f.child.flags|=8192),R1(f,f.updateQueue),wa(f),null;case 4:return xe(),d===null&&QC(f.stateNode.containerInfo),wa(f),null;case 10:return Wl(f.type),wa(f),null;case 19:if(Q(Ri),H=f.memoizedState,H===null)return wa(f),null;if(C=(f.flags&128)!==0,Y=H.rendering,Y===null)if(C)ug(H,!1);else{if(Ma!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(Y=k1(d),Y!==null){for(f.flags|=128,ug(H,!1),d=Y.updateQueue,f.updateQueue=d,R1(f,d),f.subtreeFlags=0,d=v,v=f.child;v!==null;)sd(v,d),v=v.sibling;return Z(Ri,Ri.current&1|2),f.child}d=d.sibling}H.tail!==null&&je()>U1&&(f.flags|=128,C=!0,ug(H,!1),f.lanes=4194304)}else{if(!C)if(d=k1(Y),d!==null){if(f.flags|=128,C=!0,d=d.updateQueue,f.updateQueue=d,R1(f,d),ug(H,!0),H.tail===null&&H.tailMode==="hidden"&&!Y.alternate&&!Kn)return wa(f),null}else 2*je()-H.renderingStartTime>U1&&v!==536870912&&(f.flags|=128,C=!0,ug(H,!1),f.lanes=4194304);H.isBackwards?(Y.sibling=f.child,f.child=Y):(d=H.last,d!==null?d.sibling=Y:f.child=Y,H.last=Y)}return H.tail!==null?(f=H.tail,H.rendering=f,H.tail=f.sibling,H.renderingStartTime=je(),f.sibling=null,d=Ri.current,Z(Ri,C?d&1|2:d&1),f):(wa(f),null);case 22:case 23:return tA(f),sr(),C=f.memoizedState!==null,d!==null?d.memoizedState!==null!==C&&(f.flags|=8192):C&&(f.flags|=8192),C?(v&536870912)!==0&&(f.flags&128)===0&&(wa(f),f.subtreeFlags&6&&(f.flags|=8192)):wa(f),v=f.updateQueue,v!==null&&R1(f,v.retryQueue),v=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),C=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(C=f.memoizedState.cachePool.pool),C!==v&&(f.flags|=2048),d!==null&&Q(V),null;case 24:return v=null,d!==null&&(v=d.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),Wl(Wa),wa(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function XG(d,f){switch(an(f),f.tag){case 1:return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Wl(Wa),xe(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 26:case 27:case 5:return me(f),null;case 13:if(tA(f),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(r(340));$i()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return Q(Ri),null;case 4:return xe(),null;case 10:return Wl(f.type),null;case 22:case 23:return tA(f),sr(),d!==null&&Q(V),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 24:return Wl(Wa),null;case 25:return null;default:return null}}function Kk(d,f){switch(an(f),f.tag){case 3:Wl(Wa),xe();break;case 26:case 27:case 5:me(f);break;case 4:xe();break;case 13:tA(f);break;case 19:Q(Ri);break;case 10:Wl(f.type);break;case 22:case 23:tA(f),sr(),d!==null&&Q(V);break;case 24:Wl(Wa)}}function dg(d,f){try{var v=f.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var H=C.next;v=H;do{if((v.tag&d)===d){C=void 0;var Y=v.create,pe=v.inst;C=Y(),pe.destroy=C}v=v.next}while(v!==H)}}catch(Be){Os(f,f.return,Be)}}function $A(d,f,v){try{var C=f.updateQueue,H=C!==null?C.lastEffect:null;if(H!==null){var Y=H.next;C=Y;do{if((C.tag&d)===d){var pe=C.inst,Be=pe.destroy;if(Be!==void 0){pe.destroy=void 0,H=f;var Ve=v,dt=Be;try{dt()}catch(Ct){Os(H,Ve,Ct)}}}C=C.next}while(C!==Y)}}catch(Ct){Os(f,f.return,Ct)}}function $k(d){var f=d.updateQueue;if(f!==null){var v=d.stateNode;try{os(f,v)}catch(C){Os(d,d.return,C)}}}function Wk(d,f,v){v.props=Th(d.type,d.memoizedProps),v.state=d.memoizedState;try{v.componentWillUnmount()}catch(C){Os(d,f,C)}}function Ag(d,f){try{var v=d.ref;if(v!==null){switch(d.tag){case 26:case 27:case 5:var C=d.stateNode;break;case 30:C=d.stateNode;break;default:C=d.stateNode}typeof v=="function"?d.refCleanup=v(C):v.current=C}}catch(H){Os(d,f,H)}}function hd(d,f){var v=d.ref,C=d.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(H){Os(d,f,H)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(H){Os(d,f,H)}else v.current=null}function Yk(d){var f=d.type,v=d.memoizedProps,C=d.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(H){Os(d,d.return,H)}}function vC(d,f,v){try{var C=d.stateNode;vq(C,d.type,v,f),C[Ir]=f}catch(H){Os(d,d.return,H)}}function Xk(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&nf(d.type)||d.tag===4}function xC(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Xk(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&nf(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function yC(d,f,v){var C=d.tag;if(C===5||C===6)d=d.stateNode,f?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(d,f):(f=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,f.appendChild(d),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=K1));else if(C!==4&&(C===27&&nf(d.type)&&(v=d.stateNode,f=null),d=d.child,d!==null))for(yC(d,f,v),d=d.sibling;d!==null;)yC(d,f,v),d=d.sibling}function P1(d,f,v){var C=d.tag;if(C===5||C===6)d=d.stateNode,f?v.insertBefore(d,f):v.appendChild(d);else if(C!==4&&(C===27&&nf(d.type)&&(v=d.stateNode),d=d.child,d!==null))for(P1(d,f,v),d=d.sibling;d!==null;)P1(d,f,v),d=d.sibling}function Jk(d){var f=d.stateNode,v=d.memoizedProps;try{for(var C=d.type,H=f.attributes;H.length;)f.removeAttributeNode(H[0]);bo(f,C,v),f[Ur]=d,f[Ir]=v}catch(Y){Os(d,d.return,Y)}}var sA=!1,Xa=!1,wC=!1,Zk=typeof WeakSet=="function"?WeakSet:Set,Yi=null;function JG(d,f){if(d=d.containerInfo,GC=ey,d=Da(d),pa(d)){if("selectionStart"in d)var v={start:d.selectionStart,end:d.selectionEnd};else e:{v=(v=d.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var H=C.anchorOffset,Y=C.focusNode;C=C.focusOffset;try{v.nodeType,Y.nodeType}catch{v=null;break e}var pe=0,Be=-1,Ve=-1,dt=0,Ct=0,Dt=d,ft=null;t:for(;;){for(var mt;Dt!==v||H!==0&&Dt.nodeType!==3||(Be=pe+H),Dt!==Y||C!==0&&Dt.nodeType!==3||(Ve=pe+C),Dt.nodeType===3&&(pe+=Dt.nodeValue.length),(mt=Dt.firstChild)!==null;)ft=Dt,Dt=mt;for(;;){if(Dt===d)break t;if(ft===v&&++dt===H&&(Be=pe),ft===Y&&++Ct===C&&(Ve=pe),(mt=Dt.nextSibling)!==null)break;Dt=ft,ft=Dt.parentNode}Dt=mt}v=Be===-1||Ve===-1?null:{start:Be,end:Ve}}else v=null}v=v||{start:0,end:0}}else v=null;for(qC={focusedElem:d,selectionRange:v},ey=!1,Yi=f;Yi!==null;)if(f=Yi,d=f.child,(f.subtreeFlags&1024)!==0&&d!==null)d.return=f,Yi=d;else for(;Yi!==null;){switch(f=Yi,Y=f.alternate,d=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&Y!==null){d=void 0,v=f,H=Y.memoizedProps,Y=Y.memoizedState,C=v.stateNode;try{var er=Th(v.type,H,v.elementType===v.type);d=C.getSnapshotBeforeUpdate(er,Y),C.__reactInternalSnapshotBeforeUpdate=d}catch(Qn){Os(v,v.return,Qn)}}break;case 3:if((d&1024)!==0){if(d=f.stateNode.containerInfo,v=d.nodeType,v===9)WC(d);else if(v===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":WC(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=f.sibling,d!==null){d.return=f.return,Yi=d;break}Yi=f.return}}function eI(d,f,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:WA(d,v),C&4&&dg(5,v);break;case 1:if(WA(d,v),C&4)if(d=v.stateNode,f===null)try{d.componentDidMount()}catch(pe){Os(v,v.return,pe)}else{var H=Th(v.type,f.memoizedProps);f=f.memoizedState;try{d.componentDidUpdate(H,f,d.__reactInternalSnapshotBeforeUpdate)}catch(pe){Os(v,v.return,pe)}}C&64&&$k(v),C&512&&Ag(v,v.return);break;case 3:if(WA(d,v),C&64&&(d=v.updateQueue,d!==null)){if(f=null,v.child!==null)switch(v.child.tag){case 27:case 5:f=v.child.stateNode;break;case 1:f=v.child.stateNode}try{os(d,f)}catch(pe){Os(v,v.return,pe)}}break;case 27:f===null&&C&4&&Jk(v);case 26:case 5:WA(d,v),f===null&&C&4&&Yk(v),C&512&&Ag(v,v.return);break;case 12:WA(d,v);break;case 13:WA(d,v),C&4&&rI(d,v),C&64&&(d=v.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(v=oq.bind(null,v),Eq(d,v))));break;case 22:if(C=v.memoizedState!==null||sA,!C){f=f!==null&&f.memoizedState!==null||Xa,H=sA;var Y=Xa;sA=C,(Xa=f)&&!Y?YA(d,v,(v.subtreeFlags&8772)!==0):WA(d,v),sA=H,Xa=Y}break;case 30:break;default:WA(d,v)}}function tI(d){var f=d.alternate;f!==null&&(d.alternate=null,tI(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&De(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var ua=null,Xl=!1;function aA(d,f,v){for(v=v.child;v!==null;)nI(d,f,v),v=v.sibling}function nI(d,f,v){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Gt,v)}catch{}switch(v.tag){case 26:Xa||hd(v,f),aA(d,f,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Xa||hd(v,f);var C=ua,H=Xl;nf(v.type)&&(ua=v.stateNode,Xl=!1),aA(d,f,v),wg(v.stateNode),ua=C,Xl=H;break;case 5:Xa||hd(v,f);case 6:if(C=ua,H=Xl,ua=null,aA(d,f,v),ua=C,Xl=H,ua!==null)if(Xl)try{(ua.nodeType===9?ua.body:ua.nodeName==="HTML"?ua.ownerDocument.body:ua).removeChild(v.stateNode)}catch(Y){Os(v,f,Y)}else try{ua.removeChild(v.stateNode)}catch(Y){Os(v,f,Y)}break;case 18:ua!==null&&(Xl?(d=ua,zI(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,v.stateNode),Bg(d)):zI(ua,v.stateNode));break;case 4:C=ua,H=Xl,ua=v.stateNode.containerInfo,Xl=!0,aA(d,f,v),ua=C,Xl=H;break;case 0:case 11:case 14:case 15:Xa||$A(2,v,f),Xa||$A(4,v,f),aA(d,f,v);break;case 1:Xa||(hd(v,f),C=v.stateNode,typeof C.componentWillUnmount=="function"&&Wk(v,f,C)),aA(d,f,v);break;case 21:aA(d,f,v);break;case 22:Xa=(C=Xa)||v.memoizedState!==null,aA(d,f,v),Xa=C;break;default:aA(d,f,v)}}function rI(d,f){if(f.memoizedState===null&&(d=f.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Bg(d)}catch(v){Os(f,f.return,v)}}function ZG(d){switch(d.tag){case 13:case 19:var f=d.stateNode;return f===null&&(f=d.stateNode=new Zk),f;case 22:return d=d.stateNode,f=d._retryCache,f===null&&(f=d._retryCache=new Zk),f;default:throw Error(r(435,d.tag))}}function bC(d,f){var v=ZG(d);f.forEach(function(C){var H=lq.bind(null,d,C);v.has(C)||(v.add(C),C.then(H,H))})}function bc(d,f){var v=f.deletions;if(v!==null)for(var C=0;C<v.length;C++){var H=v[C],Y=d,pe=f,Be=pe;e:for(;Be!==null;){switch(Be.tag){case 27:if(nf(Be.type)){ua=Be.stateNode,Xl=!1;break e}break;case 5:ua=Be.stateNode,Xl=!1;break e;case 3:case 4:ua=Be.stateNode.containerInfo,Xl=!0;break e}Be=Be.return}if(ua===null)throw Error(r(160));nI(Y,pe,H),ua=null,Xl=!1,Y=H.alternate,Y!==null&&(Y.return=null),H.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)sI(f,d),f=f.sibling}var Ru=null;function sI(d,f){var v=d.alternate,C=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:bc(f,d),_c(d),C&4&&($A(3,d,d.return),dg(3,d),$A(5,d,d.return));break;case 1:bc(f,d),_c(d),C&512&&(Xa||v===null||hd(v,v.return)),C&64&&sA&&(d=d.updateQueue,d!==null&&(C=d.callbacks,C!==null&&(v=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var H=Ru;if(bc(f,d),_c(d),C&512&&(Xa||v===null||hd(v,v.return)),C&4){var Y=v!==null?v.memoizedState:null;if(C=d.memoizedState,v===null)if(C===null)if(d.stateNode===null){e:{C=d.type,v=d.memoizedProps,H=H.ownerDocument||H;t:switch(C){case"title":Y=H.getElementsByTagName("title")[0],(!Y||Y[Fe]||Y[Ur]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=H.createElement(C),H.head.insertBefore(Y,H.querySelector("head > title"))),bo(Y,C,v),Y[Ur]=d,Je(Y),C=Y;break e;case"link":var pe=JI("link","href",H).get(C+(v.href||""));if(pe){for(var Be=0;Be<pe.length;Be++)if(Y=pe[Be],Y.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&Y.getAttribute("rel")===(v.rel==null?null:v.rel)&&Y.getAttribute("title")===(v.title==null?null:v.title)&&Y.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){pe.splice(Be,1);break t}}Y=H.createElement(C),bo(Y,C,v),H.head.appendChild(Y);break;case"meta":if(pe=JI("meta","content",H).get(C+(v.content||""))){for(Be=0;Be<pe.length;Be++)if(Y=pe[Be],Y.getAttribute("content")===(v.content==null?null:""+v.content)&&Y.getAttribute("name")===(v.name==null?null:v.name)&&Y.getAttribute("property")===(v.property==null?null:v.property)&&Y.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&Y.getAttribute("charset")===(v.charSet==null?null:v.charSet)){pe.splice(Be,1);break t}}Y=H.createElement(C),bo(Y,C,v),H.head.appendChild(Y);break;default:throw Error(r(468,C))}Y[Ur]=d,Je(Y),C=Y}d.stateNode=C}else ZI(H,d.type,d.stateNode);else d.stateNode=XI(H,C,d.memoizedProps);else Y!==C?(Y===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):Y.count--,C===null?ZI(H,d.type,d.stateNode):XI(H,C,d.memoizedProps)):C===null&&d.stateNode!==null&&vC(d,d.memoizedProps,v.memoizedProps)}break;case 27:bc(f,d),_c(d),C&512&&(Xa||v===null||hd(v,v.return)),v!==null&&C&4&&vC(d,d.memoizedProps,v.memoizedProps);break;case 5:if(bc(f,d),_c(d),C&512&&(Xa||v===null||hd(v,v.return)),d.flags&32){H=d.stateNode;try{ka(H,"")}catch(mt){Os(d,d.return,mt)}}C&4&&d.stateNode!=null&&(H=d.memoizedProps,vC(d,H,v!==null?v.memoizedProps:H)),C&1024&&(wC=!0);break;case 6:if(bc(f,d),_c(d),C&4){if(d.stateNode===null)throw Error(r(162));C=d.memoizedProps,v=d.stateNode;try{v.nodeValue=C}catch(mt){Os(d,d.return,mt)}}break;case 3:if(X1=null,H=Ru,Ru=W1(f.containerInfo),bc(f,d),Ru=H,_c(d),C&4&&v!==null&&v.memoizedState.isDehydrated)try{Bg(f.containerInfo)}catch(mt){Os(d,d.return,mt)}wC&&(wC=!1,aI(d));break;case 4:C=Ru,Ru=W1(d.stateNode.containerInfo),bc(f,d),_c(d),Ru=C;break;case 12:bc(f,d),_c(d);break;case 13:bc(f,d),_c(d),d.child.flags&8192&&d.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(NC=je()),C&4&&(C=d.updateQueue,C!==null&&(d.updateQueue=null,bC(d,C)));break;case 22:H=d.memoizedState!==null;var Ve=v!==null&&v.memoizedState!==null,dt=sA,Ct=Xa;if(sA=dt||H,Xa=Ct||Ve,bc(f,d),Xa=Ct,sA=dt,_c(d),C&8192)e:for(f=d.stateNode,f._visibility=H?f._visibility&-2:f._visibility|1,H&&(v===null||Ve||sA||Xa||Nh(d)),v=null,f=d;;){if(f.tag===5||f.tag===26){if(v===null){Ve=v=f;try{if(Y=Ve.stateNode,H)pe=Y.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Be=Ve.stateNode;var Dt=Ve.memoizedProps.style,ft=Dt!=null&&Dt.hasOwnProperty("display")?Dt.display:null;Be.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(mt){Os(Ve,Ve.return,mt)}}}else if(f.tag===6){if(v===null){Ve=f;try{Ve.stateNode.nodeValue=H?"":Ve.memoizedProps}catch(mt){Os(Ve,Ve.return,mt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===d)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}C&4&&(C=d.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,bC(d,v))));break;case 19:bc(f,d),_c(d),C&4&&(C=d.updateQueue,C!==null&&(d.updateQueue=null,bC(d,C)));break;case 30:break;case 21:break;default:bc(f,d),_c(d)}}function _c(d){var f=d.flags;if(f&2){try{for(var v,C=d.return;C!==null;){if(Xk(C)){v=C;break}C=C.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var H=v.stateNode,Y=xC(d);P1(d,Y,H);break;case 5:var pe=v.stateNode;v.flags&32&&(ka(pe,""),v.flags&=-33);var Be=xC(d);P1(d,Be,pe);break;case 3:case 4:var Ve=v.stateNode.containerInfo,dt=xC(d);yC(d,dt,Ve);break;default:throw Error(r(161))}}catch(Ct){Os(d,d.return,Ct)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function aI(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var f=d;aI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),d=d.sibling}}function WA(d,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)eI(d,f.alternate,f),f=f.sibling}function Nh(d){for(d=d.child;d!==null;){var f=d;switch(f.tag){case 0:case 11:case 14:case 15:$A(4,f,f.return),Nh(f);break;case 1:hd(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&Wk(f,f.return,v),Nh(f);break;case 27:wg(f.stateNode);case 26:case 5:hd(f,f.return),Nh(f);break;case 22:f.memoizedState===null&&Nh(f);break;case 30:Nh(f);break;default:Nh(f)}d=d.sibling}}function YA(d,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var C=f.alternate,H=d,Y=f,pe=Y.flags;switch(Y.tag){case 0:case 11:case 15:YA(H,Y,v),dg(4,Y);break;case 1:if(YA(H,Y,v),C=Y,H=C.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(dt){Os(C,C.return,dt)}if(C=Y,H=C.updateQueue,H!==null){var Be=C.stateNode;try{var Ve=H.shared.hiddenCallbacks;if(Ve!==null)for(H.shared.hiddenCallbacks=null,H=0;H<Ve.length;H++)Yr(Ve[H],Be)}catch(dt){Os(C,C.return,dt)}}v&&pe&64&&$k(Y),Ag(Y,Y.return);break;case 27:Jk(Y);case 26:case 5:YA(H,Y,v),v&&C===null&&pe&4&&Yk(Y),Ag(Y,Y.return);break;case 12:YA(H,Y,v);break;case 13:YA(H,Y,v),v&&pe&4&&rI(H,Y);break;case 22:Y.memoizedState===null&&YA(H,Y,v),Ag(Y,Y.return);break;case 30:break;default:YA(H,Y,v)}f=f.sibling}}function _C(d,f){var v=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),d=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(d=f.memoizedState.cachePool.pool),d!==v&&(d!=null&&d.refCount++,v!=null&&mh(v))}function CC(d,f){d=null,f.alternate!==null&&(d=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==d&&(f.refCount++,d!=null&&mh(d))}function md(d,f,v,C){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)iI(d,f,v,C),f=f.sibling}function iI(d,f,v,C){var H=f.flags;switch(f.tag){case 0:case 11:case 15:md(d,f,v,C),H&2048&&dg(9,f);break;case 1:md(d,f,v,C);break;case 3:md(d,f,v,C),H&2048&&(d=null,f.alternate!==null&&(d=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==d&&(f.refCount++,d!=null&&mh(d)));break;case 12:if(H&2048){md(d,f,v,C),d=f.stateNode;try{var Y=f.memoizedProps,pe=Y.id,Be=Y.onPostCommit;typeof Be=="function"&&Be(pe,f.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Ve){Os(f,f.return,Ve)}}else md(d,f,v,C);break;case 13:md(d,f,v,C);break;case 23:break;case 22:Y=f.stateNode,pe=f.alternate,f.memoizedState!==null?Y._visibility&2?md(d,f,v,C):fg(d,f):Y._visibility&2?md(d,f,v,C):(Y._visibility|=2,q0(d,f,v,C,(f.subtreeFlags&10256)!==0)),H&2048&&_C(pe,f);break;case 24:md(d,f,v,C),H&2048&&CC(f.alternate,f);break;default:md(d,f,v,C)}}function q0(d,f,v,C,H){for(H=H&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var Y=d,pe=f,Be=v,Ve=C,dt=pe.flags;switch(pe.tag){case 0:case 11:case 15:q0(Y,pe,Be,Ve,H),dg(8,pe);break;case 23:break;case 22:var Ct=pe.stateNode;pe.memoizedState!==null?Ct._visibility&2?q0(Y,pe,Be,Ve,H):fg(Y,pe):(Ct._visibility|=2,q0(Y,pe,Be,Ve,H)),H&&dt&2048&&_C(pe.alternate,pe);break;case 24:q0(Y,pe,Be,Ve,H),H&&dt&2048&&CC(pe.alternate,pe);break;default:q0(Y,pe,Be,Ve,H)}f=f.sibling}}function fg(d,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=d,C=f,H=C.flags;switch(C.tag){case 22:fg(v,C),H&2048&&_C(C.alternate,C);break;case 24:fg(v,C),H&2048&&CC(C.alternate,C);break;default:fg(v,C)}f=f.sibling}}var hg=8192;function K0(d){if(d.subtreeFlags&hg)for(d=d.child;d!==null;)oI(d),d=d.sibling}function oI(d){switch(d.tag){case 26:K0(d),d.flags&hg&&d.memoizedState!==null&&Uq(Ru,d.memoizedState,d.memoizedProps);break;case 5:K0(d);break;case 3:case 4:var f=Ru;Ru=W1(d.stateNode.containerInfo),K0(d),Ru=f;break;case 22:d.memoizedState===null&&(f=d.alternate,f!==null&&f.memoizedState!==null?(f=hg,hg=16777216,K0(d),hg=f):K0(d));break;default:K0(d)}}function lI(d){var f=d.alternate;if(f!==null&&(d=f.child,d!==null)){f.child=null;do f=d.sibling,d.sibling=null,d=f;while(d!==null)}}function mg(d){var f=d.deletions;if((d.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var C=f[v];Yi=C,uI(C,d)}lI(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)cI(d),d=d.sibling}function cI(d){switch(d.tag){case 0:case 11:case 15:mg(d),d.flags&2048&&$A(9,d,d.return);break;case 3:mg(d);break;case 12:mg(d);break;case 22:var f=d.stateNode;d.memoizedState!==null&&f._visibility&2&&(d.return===null||d.return.tag!==13)?(f._visibility&=-3,M1(d)):mg(d);break;default:mg(d)}}function M1(d){var f=d.deletions;if((d.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var C=f[v];Yi=C,uI(C,d)}lI(d)}for(d=d.child;d!==null;){switch(f=d,f.tag){case 0:case 11:case 15:$A(8,f,f.return),M1(f);break;case 22:v=f.stateNode,v._visibility&2&&(v._visibility&=-3,M1(f));break;default:M1(f)}d=d.sibling}}function uI(d,f){for(;Yi!==null;){var v=Yi;switch(v.tag){case 0:case 11:case 15:$A(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:mh(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,Yi=C;else e:for(v=d;Yi!==null;){C=Yi;var H=C.sibling,Y=C.return;if(tI(C),C===v){Yi=null;break e}if(H!==null){H.return=Y,Yi=H;break e}Yi=Y}}}var eq={getCacheForType:function(d){var f=$a(Wa),v=f.data.get(d);return v===void 0&&(v=d(),f.data.set(d,v)),v}},tq=typeof WeakMap=="function"?WeakMap:Map,Es=0,Ks=null,jr=null,Jr=0,Ss=0,Cc=null,XA=!1,$0=!1,EC=!1,iA=0,Ma=0,JA=0,Bh=0,SC=0,tu=0,W0=0,pg=null,Jl=null,TC=!1,NC=0,U1=1/0,O1=null,ZA=null,wo=0,ef=null,Y0=null,X0=0,BC=0,kC=null,dI=null,gg=0,IC=null;function Ec(){if((Es&2)!==0&&Jr!==0)return Jr&-Jr;if(ee.T!==null){var d=Yd;return d!==0?d:UC()}return Ys()}function AI(){tu===0&&(tu=(Jr&536870912)===0||Kn?Sa():536870912);var d=eu.current;return d!==null&&(d.flags|=32),tu}function Sc(d,f,v){(d===Ks&&(Ss===2||Ss===9)||d.cancelPendingCommit!==null)&&(J0(d,0),tf(d,Jr,tu,!1)),Ms(d,v),((Es&2)===0||d!==Ks)&&(d===Ks&&((Es&2)===0&&(Bh|=v),Ma===4&&tf(d,Jr,tu,!1)),pd(d))}function fI(d,f,v){if((Es&6)!==0)throw Error(r(327));var C=!v&&(f&124)===0&&(f&d.expiredLanes)===0||Mr(d,f),H=C?sq(d,f):LC(d,f,!0),Y=C;do{if(H===0){$0&&!C&&tf(d,f,0,!1);break}else{if(v=d.current.alternate,Y&&!nq(v)){H=LC(d,f,!1),Y=!1;continue}if(H===2){if(Y=f,d.errorRecoveryDisabledLanes&Y)var pe=0;else pe=d.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){f=pe;e:{var Be=d;H=pg;var Ve=Be.current.memoizedState.isDehydrated;if(Ve&&(J0(Be,pe).flags|=256),pe=LC(Be,pe,!1),pe!==2){if(EC&&!Ve){Be.errorRecoveryDisabledLanes|=Y,Bh|=Y,H=4;break e}Y=Jl,Jl=H,Y!==null&&(Jl===null?Jl=Y:Jl.push.apply(Jl,Y))}H=pe}if(Y=!1,H!==2)continue}}if(H===1){J0(d,0),tf(d,f,0,!0);break}e:{switch(C=d,Y=H,Y){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:tf(C,f,tu,!XA);break e;case 2:Jl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(H=NC+300-je(),10<H)){if(tf(C,f,tu,!XA),ar(C,0,!0)!==0)break e;C.timeoutHandle=QI(hI.bind(null,C,v,Jl,O1,TC,f,tu,Bh,W0,XA,Y,2,-0,0),H);break e}hI(C,v,Jl,O1,TC,f,tu,Bh,W0,XA,Y,0,-0,0)}}break}while(!0);pd(d)}function hI(d,f,v,C,H,Y,pe,Be,Ve,dt,Ct,Dt,ft,mt){if(d.timeoutHandle=-1,Dt=f.subtreeFlags,(Dt&8192||(Dt&16785408)===16785408)&&(Cg={stylesheets:null,count:0,unsuspend:Mq},oI(f),Dt=Oq(),Dt!==null)){d.cancelPendingCommit=Dt(wI.bind(null,d,f,Y,v,C,H,pe,Be,Ve,Ct,1,ft,mt)),tf(d,Y,pe,!dt);return}wI(d,f,Y,v,C,H,pe,Be,Ve)}function nq(d){for(var f=d;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var H=v[C],Y=H.getSnapshot;H=H.value;try{if(!Fa(Y(),H))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function tf(d,f,v,C){f&=~SC,f&=~Bh,d.suspendedLanes|=f,d.pingedLanes&=~f,C&&(d.warmLanes|=f),C=d.expirationTimes;for(var H=f;0<H;){var Y=31-Ht(H),pe=1<<Y;C[Y]=-1,H&=~pe}v!==0&&xn(d,v,f)}function j1(){return(Es&6)===0?(vg(0),!1):!0}function FC(){if(jr!==null){if(Ss===0)var d=jr.return;else d=jr,xc=ta=null,U0(d),z0=null,lg=0,d=jr;for(;d!==null;)Kk(d.alternate,d),d=d.return;jr=null}}function J0(d,f){var v=d.timeoutHandle;v!==-1&&(d.timeoutHandle=-1,yq(v)),v=d.cancelPendingCommit,v!==null&&(d.cancelPendingCommit=null,v()),FC(),Ks=d,jr=v=El(d.current,null),Jr=f,Ss=0,Cc=null,XA=!1,$0=Mr(d,f),EC=!1,W0=tu=SC=Bh=JA=Ma=0,Jl=pg=null,TC=!1,(f&8)!==0&&(f|=f&32);var C=d.entangledLanes;if(C!==0)for(d=d.entanglements,C&=f;0<C;){var H=31-Ht(C),Y=1<<H;f|=d[H],C&=~Y}return iA=f,go(),v}function mI(d,f){In=null,ee.H=T1,f===_e||f===Ne?(f=Ze(),Ss=3):f===Ee?(f=Ze(),Ss=4):Ss=f===Dk?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Cc=f,jr===null&&(Ma=1,F1(d,pr(f,d.current)))}function pI(){var d=ee.H;return ee.H=T1,d===null?T1:d}function gI(){var d=ee.A;return ee.A=eq,d}function DC(){Ma=4,XA||(Jr&4194048)!==Jr&&eu.current!==null||($0=!0),(JA&134217727)===0&&(Bh&134217727)===0||Ks===null||tf(Ks,Jr,tu,!1)}function LC(d,f,v){var C=Es;Es|=2;var H=pI(),Y=gI();(Ks!==d||Jr!==f)&&(O1=null,J0(d,f)),f=!1;var pe=Ma;e:do try{if(Ss!==0&&jr!==null){var Be=jr,Ve=Cc;switch(Ss){case 8:FC(),pe=6;break e;case 3:case 2:case 9:case 6:eu.current===null&&(f=!0);var dt=Ss;if(Ss=0,Cc=null,Z0(d,Be,Ve,dt),v&&$0){pe=0;break e}break;default:dt=Ss,Ss=0,Cc=null,Z0(d,Be,Ve,dt)}}rq(),pe=Ma;break}catch(Ct){mI(d,Ct)}while(!0);return f&&d.shellSuspendCounter++,xc=ta=null,Es=C,ee.H=H,ee.A=Y,jr===null&&(Ks=null,Jr=0,go()),pe}function rq(){for(;jr!==null;)vI(jr)}function sq(d,f){var v=Es;Es|=2;var C=pI(),H=gI();Ks!==d||Jr!==f?(O1=null,U1=je()+500,J0(d,f)):$0=Mr(d,f);e:do try{if(Ss!==0&&jr!==null){f=jr;var Y=Cc;t:switch(Ss){case 1:Ss=0,Cc=null,Z0(d,f,Y,1);break;case 2:case 9:if(Re(Y)){Ss=0,Cc=null,xI(f);break}f=function(){Ss!==2&&Ss!==9||Ks!==d||(Ss=7),pd(d)},Y.then(f,f);break e;case 3:Ss=7;break e;case 4:Ss=5;break e;case 7:Re(Y)?(Ss=0,Cc=null,xI(f)):(Ss=0,Cc=null,Z0(d,f,Y,7));break;case 5:var pe=null;switch(jr.tag){case 26:pe=jr.memoizedState;case 5:case 27:var Be=jr;if(!pe||e3(pe)){Ss=0,Cc=null;var Ve=Be.sibling;if(Ve!==null)jr=Ve;else{var dt=Be.return;dt!==null?(jr=dt,H1(dt)):jr=null}break t}}Ss=0,Cc=null,Z0(d,f,Y,5);break;case 6:Ss=0,Cc=null,Z0(d,f,Y,6);break;case 8:FC(),Ma=6;break e;default:throw Error(r(462))}}aq();break}catch(Ct){mI(d,Ct)}while(!0);return xc=ta=null,ee.H=C,ee.A=H,Es=v,jr!==null?0:(Ks=null,Jr=0,go(),Ma)}function aq(){for(;jr!==null&&!Ue();)vI(jr)}function vI(d){var f=Gk(d.alternate,d,iA);d.memoizedProps=d.pendingProps,f===null?H1(d):jr=f}function xI(d){var f=d,v=f.alternate;switch(f.tag){case 15:case 0:f=Ok(v,f,f.pendingProps,f.type,void 0,Jr);break;case 11:f=Ok(v,f,f.pendingProps,f.type.render,f.ref,Jr);break;case 5:U0(f);default:Kk(v,f),f=jr=sd(f,iA),f=Gk(v,f,iA)}d.memoizedProps=d.pendingProps,f===null?H1(d):jr=f}function Z0(d,f,v,C){xc=ta=null,U0(f),z0=null,lg=0;var H=f.return;try{if($G(d,H,f,v,Jr)){Ma=1,F1(d,pr(v,d.current)),jr=null;return}}catch(Y){if(H!==null)throw jr=H,Y;Ma=1,F1(d,pr(v,d.current)),jr=null;return}f.flags&32768?(Kn||C===1?d=!0:$0||(Jr&536870912)!==0?d=!1:(XA=d=!0,(C===2||C===9||C===3||C===6)&&(C=eu.current,C!==null&&C.tag===13&&(C.flags|=16384))),yI(f,d)):H1(f)}function H1(d){var f=d;do{if((f.flags&32768)!==0){yI(f,XA);return}d=f.return;var v=YG(f.alternate,f,iA);if(v!==null){jr=v;return}if(f=f.sibling,f!==null){jr=f;return}jr=f=d}while(f!==null);Ma===0&&(Ma=5)}function yI(d,f){do{var v=XG(d.alternate,d);if(v!==null){v.flags&=32767,jr=v;return}if(v=d.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(d=d.sibling,d!==null)){jr=d;return}jr=d=v}while(d!==null);Ma=6,jr=null}function wI(d,f,v,C,H,Y,pe,Be,Ve){d.cancelPendingCommit=null;do Q1();while(wo!==0);if((Es&6)!==0)throw Error(r(327));if(f!==null){if(f===d.current)throw Error(r(177));if(Y=f.lanes|f.childLanes,Y|=ns,dr(d,v,Y,pe,Be,Ve),d===Ks&&(jr=Ks=null,Jr=0),Y0=f,ef=d,X0=v,BC=Y,kC=H,dI=C,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,cq(Tt,function(){return SI(),null})):(d.callbackNode=null,d.callbackPriority=0),C=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||C){C=ee.T,ee.T=null,H=le.p,le.p=2,pe=Es,Es|=4;try{JG(d,f,v)}finally{Es=pe,le.p=H,ee.T=C}}wo=1,bI(),_I(),CI()}}function bI(){if(wo===1){wo=0;var d=ef,f=Y0,v=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||v){v=ee.T,ee.T=null;var C=le.p;le.p=2;var H=Es;Es|=4;try{sI(f,d);var Y=qC,pe=Da(d.containerInfo),Be=Y.focusedElem,Ve=Y.selectionRange;if(pe!==Be&&Be&&Be.ownerDocument&&ql(Be.ownerDocument.documentElement,Be)){if(Ve!==null&&pa(Be)){var dt=Ve.start,Ct=Ve.end;if(Ct===void 0&&(Ct=dt),"selectionStart"in Be)Be.selectionStart=dt,Be.selectionEnd=Math.min(Ct,Be.value.length);else{var Dt=Be.ownerDocument||document,ft=Dt&&Dt.defaultView||window;if(ft.getSelection){var mt=ft.getSelection(),er=Be.textContent.length,Qn=Math.min(Ve.start,er),Ls=Ve.end===void 0?Qn:Math.min(Ve.end,er);!mt.extend&&Qn>Ls&&(pe=Ls,Ls=Qn,Qn=pe);var nt=Gl(Be,Qn),$e=Gl(Be,Ls);if(nt&&$e&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==$e.node||mt.focusOffset!==$e.offset)){var lt=Dt.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),Qn>Ls?(mt.addRange(lt),mt.extend($e.node,$e.offset)):(lt.setEnd($e.node,$e.offset),mt.addRange(lt))}}}}for(Dt=[],mt=Be;mt=mt.parentNode;)mt.nodeType===1&&Dt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Be.focus=="function"&&Be.focus(),Be=0;Be<Dt.length;Be++){var Nt=Dt[Be];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}ey=!!GC,qC=GC=null}finally{Es=H,le.p=C,ee.T=v}}d.current=f,wo=2}}function _I(){if(wo===2){wo=0;var d=ef,f=Y0,v=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||v){v=ee.T,ee.T=null;var C=le.p;le.p=2;var H=Es;Es|=4;try{eI(d,f.alternate,f)}finally{Es=H,le.p=C,ee.T=v}}wo=3}}function CI(){if(wo===4||wo===3){wo=0,Ie();var d=ef,f=Y0,v=X0,C=dI;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?wo=5:(wo=0,Y0=ef=null,EI(d,d.pendingLanes));var H=d.pendingLanes;if(H===0&&(ZA=null),ms(v),f=f.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Gt,f,void 0,(f.current.flags&128)===128)}catch{}if(C!==null){f=ee.T,H=le.p,le.p=2,ee.T=null;try{for(var Y=d.onRecoverableError,pe=0;pe<C.length;pe++){var Be=C[pe];Y(Be.value,{componentStack:Be.stack})}}finally{ee.T=f,le.p=H}}(X0&3)!==0&&Q1(),pd(d),H=d.pendingLanes,(v&4194090)!==0&&(H&42)!==0?d===IC?gg++:(gg=0,IC=d):gg=0,vg(0)}}function EI(d,f){(d.pooledCacheLanes&=f)===0&&(f=d.pooledCache,f!=null&&(d.pooledCache=null,mh(f)))}function Q1(d){return bI(),_I(),CI(),SI()}function SI(){if(wo!==5)return!1;var d=ef,f=BC;BC=0;var v=ms(X0),C=ee.T,H=le.p;try{le.p=32>v?32:v,ee.T=null,v=kC,kC=null;var Y=ef,pe=X0;if(wo=0,Y0=ef=null,X0=0,(Es&6)!==0)throw Error(r(331));var Be=Es;if(Es|=4,cI(Y.current),iI(Y,Y.current,pe,v),Es=Be,vg(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Gt,Y)}catch{}return!0}finally{le.p=H,ee.T=C,EI(d,f)}}function TI(d,f,v){f=pr(v,f),f=cC(d.stateNode,f,2),d=It(d,f,2),d!==null&&(Ms(d,2),pd(d))}function Os(d,f,v){if(d.tag===3)TI(d,d,v);else for(;f!==null;){if(f.tag===3){TI(f,d,v);break}else if(f.tag===1){var C=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(ZA===null||!ZA.has(C))){d=pr(v,d),v=Ik(2),C=It(f,v,2),C!==null&&(Fk(v,C,f,d),Ms(C,2),pd(C));break}}f=f.return}}function RC(d,f,v){var C=d.pingCache;if(C===null){C=d.pingCache=new tq;var H=new Set;C.set(f,H)}else H=C.get(f),H===void 0&&(H=new Set,C.set(f,H));H.has(v)||(EC=!0,H.add(v),d=iq.bind(null,d,f,v),f.then(d,d))}function iq(d,f,v){var C=d.pingCache;C!==null&&C.delete(f),d.pingedLanes|=d.suspendedLanes&v,d.warmLanes&=~v,Ks===d&&(Jr&v)===v&&(Ma===4||Ma===3&&(Jr&62914560)===Jr&&300>je()-NC?(Es&2)===0&&J0(d,0):SC|=v,W0===Jr&&(W0=0)),pd(d)}function NI(d,f){f===0&&(f=Cr()),d=mc(d,f),d!==null&&(Ms(d,f),pd(d))}function oq(d){var f=d.memoizedState,v=0;f!==null&&(v=f.retryLane),NI(d,v)}function lq(d,f){var v=0;switch(d.tag){case 13:var C=d.stateNode,H=d.memoizedState;H!==null&&(v=H.retryLane);break;case 19:C=d.stateNode;break;case 22:C=d.stateNode._retryCache;break;default:throw Error(r(314))}C!==null&&C.delete(f),NI(d,v)}function cq(d,f){return He(d,f)}var V1=null,em=null,PC=!1,z1=!1,MC=!1,kh=0;function pd(d){d!==em&&d.next===null&&(em===null?V1=em=d:em=em.next=d),z1=!0,PC||(PC=!0,dq())}function vg(d,f){if(!MC&&z1){MC=!0;do for(var v=!1,C=V1;C!==null;){if(d!==0){var H=C.pendingLanes;if(H===0)var Y=0;else{var pe=C.suspendedLanes,Be=C.pingedLanes;Y=(1<<31-Ht(42|d)+1)-1,Y&=H&~(pe&~Be),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(v=!0,FI(C,Y))}else Y=Jr,Y=ar(C,C===Ks?Y:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(Y&3)===0||Mr(C,Y)||(v=!0,FI(C,Y));C=C.next}while(v);MC=!1}}function uq(){BI()}function BI(){z1=PC=!1;var d=0;kh!==0&&(xq()&&(d=kh),kh=0);for(var f=je(),v=null,C=V1;C!==null;){var H=C.next,Y=kI(C,f);Y===0?(C.next=null,v===null?V1=H:v.next=H,H===null&&(em=v)):(v=C,(d!==0||(Y&3)!==0)&&(z1=!0)),C=H}vg(d)}function kI(d,f){for(var v=d.suspendedLanes,C=d.pingedLanes,H=d.expirationTimes,Y=d.pendingLanes&-62914561;0<Y;){var pe=31-Ht(Y),Be=1<<pe,Ve=H[pe];Ve===-1?((Be&v)===0||(Be&C)!==0)&&(H[pe]=nr(Be,f)):Ve<=f&&(d.expiredLanes|=Be),Y&=~Be}if(f=Ks,v=Jr,v=ar(d,d===f?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),C=d.callbackNode,v===0||d===f&&(Ss===2||Ss===9)||d.cancelPendingCommit!==null)return C!==null&&C!==null&&et(C),d.callbackNode=null,d.callbackPriority=0;if((v&3)===0||Mr(d,v)){if(f=v&-v,f===d.callbackPriority)return f;switch(C!==null&&et(C),ms(v)){case 2:case 8:v=xt;break;case 32:v=Tt;break;case 268435456:v=Vt;break;default:v=Tt}return C=II.bind(null,d),v=He(v,C),d.callbackPriority=f,d.callbackNode=v,f}return C!==null&&C!==null&&et(C),d.callbackPriority=2,d.callbackNode=null,2}function II(d,f){if(wo!==0&&wo!==5)return d.callbackNode=null,d.callbackPriority=0,null;var v=d.callbackNode;if(Q1()&&d.callbackNode!==v)return null;var C=Jr;return C=ar(d,d===Ks?C:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),C===0?null:(fI(d,C,f),kI(d,je()),d.callbackNode!=null&&d.callbackNode===v?II.bind(null,d):null)}function FI(d,f){if(Q1())return null;fI(d,f,!0)}function dq(){wq(function(){(Es&6)!==0?He(rt,uq):BI()})}function UC(){return kh===0&&(kh=Sa()),kh}function DI(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Ao(""+d)}function LI(d,f){var v=f.ownerDocument.createElement("input");return v.name=f.name,v.value=f.value,d.id&&v.setAttribute("form",d.id),f.parentNode.insertBefore(v,f),d=new FormData(d),v.parentNode.removeChild(v),d}function Aq(d,f,v,C,H){if(f==="submit"&&v&&v.stateNode===H){var Y=DI((H[Ir]||null).action),pe=C.submitter;pe&&(f=(f=pe[Ir]||null)?DI(f.formAction):pe.getAttribute("formAction"),f!==null&&(Y=f,pe=null));var Be=new pl("action","action",null,C,H);d.push({event:Be,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(kh!==0){var Ve=pe?LI(H,pe):new FormData(H);Zc(v,{pending:!0,data:Ve,method:H.method,action:Y},null,Ve)}}else typeof Y=="function"&&(Be.preventDefault(),Ve=pe?LI(H,pe):new FormData(H),Zc(v,{pending:!0,data:Ve,method:H.method,action:Y},Y,Ve))},currentTarget:H}]})}}for(var OC=0;OC<_l.length;OC++){var jC=_l[OC],fq=jC.toLowerCase(),hq=jC[0].toUpperCase()+jC.slice(1);Gs(fq,"on"+hq)}Gs(nd,"onAnimationEnd"),Gs(Ka,"onAnimationIteration"),Gs(bl,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(Wc,"onTransitionRun"),Gs(Kl,"onTransitionStart"),Gs(rd,"onTransitionCancel"),Gs(Ac,"onTransitionEnd"),jt("onMouseEnter",["mouseout","mouseover"]),jt("onMouseLeave",["mouseout","mouseover"]),jt("onPointerEnter",["pointerout","pointerover"]),jt("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xg));function RI(d,f){f=(f&4)!==0;for(var v=0;v<d.length;v++){var C=d[v],H=C.event;C=C.listeners;e:{var Y=void 0;if(f)for(var pe=C.length-1;0<=pe;pe--){var Be=C[pe],Ve=Be.instance,dt=Be.currentTarget;if(Be=Be.listener,Ve!==Y&&H.isPropagationStopped())break e;Y=Be,H.currentTarget=dt;try{Y(H)}catch(Ct){I1(Ct)}H.currentTarget=null,Y=Ve}else for(pe=0;pe<C.length;pe++){if(Be=C[pe],Ve=Be.instance,dt=Be.currentTarget,Be=Be.listener,Ve!==Y&&H.isPropagationStopped())break e;Y=Be,H.currentTarget=dt;try{Y(H)}catch(Ct){I1(Ct)}H.currentTarget=null,Y=Ve}}}}function Hr(d,f){var v=f[Er];v===void 0&&(v=f[Er]=new Set);var C=d+"__bubble";v.has(C)||(PI(f,d,2,!1),v.add(C))}function HC(d,f,v){var C=0;f&&(C|=4),PI(v,d,C,f)}var G1="_reactListening"+Math.random().toString(36).slice(2);function QC(d){if(!d[G1]){d[G1]=!0,at.forEach(function(v){v!=="selectionchange"&&(mq.has(v)||HC(v,!1,d),HC(v,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[G1]||(f[G1]=!0,HC("selectionchange",!1,f))}}function PI(d,f,v,C){switch(i3(f)){case 2:var H=Qq;break;case 8:H=Vq;break;default:H=nE}v=H.bind(null,f,v,d),H=void 0,!Ga||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(H=!0),C?H!==void 0?d.addEventListener(f,v,{capture:!0,passive:H}):d.addEventListener(f,v,!0):H!==void 0?d.addEventListener(f,v,{passive:H}):d.addEventListener(f,v,!1)}function VC(d,f,v,C,H){var Y=C;if((f&1)===0&&(f&2)===0&&C!==null)e:for(;;){if(C===null)return;var pe=C.tag;if(pe===3||pe===4){var Be=C.stateNode.containerInfo;if(Be===H)break;if(pe===4)for(pe=C.return;pe!==null;){var Ve=pe.tag;if((Ve===3||Ve===4)&&pe.stateNode.containerInfo===H)return;pe=pe.return}for(;Be!==null;){if(pe=Le(Be),pe===null)return;if(Ve=pe.tag,Ve===5||Ve===6||Ve===26||Ve===27){C=Y=pe;continue e}Be=Be.parentNode}}C=C.return}Bi(function(){var dt=Y,Ct=$r(v),Dt=[];e:{var ft=fc.get(d);if(ft!==void 0){var mt=pl,er=d;switch(d){case"keypress":if(Wr(v)===0)break e;case"keydown":case"keyup":mt=vl;break;case"focusin":er="focus",mt=Ml;break;case"focusout":er="blur",mt=Ml;break;case"beforeblur":case"afterblur":mt=Ml;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Pl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=zc;break;case nd:case Ka:case bl:mt=Qc;break;case Ac:mt=ye;break;case"scroll":case"scrollend":mt=_u;break;case"wheel":mt=ze;break;case"copy":case"cut":case"paste":mt=Ul;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Ql;break;case"toggle":case"beforetoggle":mt=gt}var Qn=(f&4)!==0,Ls=!Qn&&(d==="scroll"||d==="scrollend"),nt=Qn?ft!==null?ft+"Capture":null:ft;Qn=[];for(var $e=dt,lt;$e!==null;){var Nt=$e;if(lt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||lt===null||nt===null||(Nt=ir($e,nt),Nt!=null&&Qn.push(yg($e,Nt,lt))),Ls)break;$e=$e.return}0<Qn.length&&(ft=new mt(ft,er,null,v,Ct),Dt.push({event:ft,listeners:Qn}))}}if((f&7)===0){e:{if(ft=d==="mouseover"||d==="pointerover",mt=d==="mouseout"||d==="pointerout",ft&&v!==ji&&(er=v.relatedTarget||v.fromElement)&&(Le(er)||er[es]))break e;if((mt||ft)&&(ft=Ct.window===Ct?Ct:(ft=Ct.ownerDocument)?ft.defaultView||ft.parentWindow:window,mt?(er=v.relatedTarget||v.toElement,mt=dt,er=er?Le(er):null,er!==null&&(Ls=a(er),Qn=er.tag,er!==Ls||Qn!==5&&Qn!==27&&Qn!==6)&&(er=null)):(mt=null,er=dt),mt!==er)){if(Qn=Fs,Nt="onMouseLeave",nt="onMouseEnter",$e="mouse",(d==="pointerout"||d==="pointerover")&&(Qn=Ql,Nt="onPointerLeave",nt="onPointerEnter",$e="pointer"),Ls=mt==null?ft:tt(mt),lt=er==null?ft:tt(er),ft=new Qn(Nt,$e+"leave",mt,v,Ct),ft.target=Ls,ft.relatedTarget=lt,Nt=null,Le(Ct)===dt&&(Qn=new Qn(nt,$e+"enter",er,v,Ct),Qn.target=lt,Qn.relatedTarget=Ls,Nt=Qn),Ls=Nt,mt&&er)t:{for(Qn=mt,nt=er,$e=0,lt=Qn;lt;lt=tm(lt))$e++;for(lt=0,Nt=nt;Nt;Nt=tm(Nt))lt++;for(;0<$e-lt;)Qn=tm(Qn),$e--;for(;0<lt-$e;)nt=tm(nt),lt--;for(;$e--;){if(Qn===nt||nt!==null&&Qn===nt.alternate)break t;Qn=tm(Qn),nt=tm(nt)}Qn=null}else Qn=null;mt!==null&&MI(Dt,ft,mt,Qn,!1),er!==null&&Ls!==null&&MI(Dt,Ls,er,Qn,!0)}}e:{if(ft=dt?tt(dt):window,mt=ft.nodeName&&ft.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ft.type==="file")var pn=Vl;else if(Or(ft))if(qc)pn=OA;else{pn=hh;var Dr=Ai}else mt=ft.nodeName,!mt||mt.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?dt&&uc(dt.elementType)&&(pn=Vl):pn=po;if(pn&&(pn=pn(d,dt))){Po(Dt,pn,v,Ct);break e}Dr&&Dr(d,ft,dt),d==="focusout"&&dt&&ft.type==="number"&&dt.memoizedProps.value!=null&&co(ft,"number",ft.value)}switch(Dr=dt?tt(dt):window,d){case"focusin":(Or(Dr)||Dr.contentEditable==="true")&&(ga=Dr,qi=dt,Mo=null);break;case"focusout":Mo=qi=ga=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,zs(Dt,v,Ct);break;case"selectionchange":if(yl)break;case"keydown":case"keyup":zs(Dt,v,Ct)}var _n;if(qt)e:{switch(d){case"compositionstart":var zn="onCompositionStart";break e;case"compositionend":zn="onCompositionEnd";break e;case"compositionupdate":zn="onCompositionUpdate";break e}zn=void 0}else Rn?ot(d,v)&&(zn="onCompositionEnd"):d==="keydown"&&v.keyCode===229&&(zn="onCompositionStart");zn&&(Ae&&v.locale!=="ko"&&(Rn||zn!=="onCompositionStart"?zn==="onCompositionEnd"&&Rn&&(_n=ml()):(ci=Ct,ui="value"in ci?ci.value:ci.textContent,Rn=!0)),Dr=q1(dt,zn),0<Dr.length&&(zn=new Ia(zn,d,null,v,Ct),Dt.push({event:zn,listeners:Dr}),_n?zn.data=_n:(_n=Pt(v),_n!==null&&(zn.data=_n)))),(_n=ae?yr(d,v):Zn(d,v))&&(zn=q1(dt,"onBeforeInput"),0<zn.length&&(Dr=new Ia("onBeforeInput","beforeinput",null,v,Ct),Dt.push({event:Dr,listeners:zn}),Dr.data=_n)),Aq(Dt,d,dt,v,Ct)}RI(Dt,f)})}function yg(d,f,v){return{instance:d,listener:f,currentTarget:v}}function q1(d,f){for(var v=f+"Capture",C=[];d!==null;){var H=d,Y=H.stateNode;if(H=H.tag,H!==5&&H!==26&&H!==27||Y===null||(H=ir(d,v),H!=null&&C.unshift(yg(d,H,Y)),H=ir(d,f),H!=null&&C.push(yg(d,H,Y))),d.tag===3)return C;d=d.return}return[]}function tm(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function MI(d,f,v,C,H){for(var Y=f._reactName,pe=[];v!==null&&v!==C;){var Be=v,Ve=Be.alternate,dt=Be.stateNode;if(Be=Be.tag,Ve!==null&&Ve===C)break;Be!==5&&Be!==26&&Be!==27||dt===null||(Ve=dt,H?(dt=ir(v,Y),dt!=null&&pe.unshift(yg(v,dt,Ve))):H||(dt=ir(v,Y),dt!=null&&pe.push(yg(v,dt,Ve)))),v=v.return}pe.length!==0&&d.push({event:f,listeners:pe})}var pq=/\r\n?/g,gq=/\u0000|\uFFFD/g;function UI(d){return(typeof d=="string"?d:""+d).replace(pq,`
`).replace(gq,"")}function OI(d,f){return f=UI(f),UI(d)===f}function K1(){}function Ds(d,f,v,C,H,Y){switch(v){case"children":typeof C=="string"?f==="body"||f==="textarea"&&C===""||ka(d,C):(typeof C=="number"||typeof C=="bigint")&&f!=="body"&&ka(d,""+C);break;case"className":fr(d,"class",C);break;case"tabIndex":fr(d,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(d,v,C);break;case"style":fl(d,C,Y);break;case"data":if(f!=="object"){fr(d,"data",C);break}case"src":case"href":if(C===""&&(f!=="a"||v!=="href")){d.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){d.removeAttribute(v);break}C=Ao(""+C),d.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){d.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(v==="formAction"?(f!=="input"&&Ds(d,f,"name",H.name,H,null),Ds(d,f,"formEncType",H.formEncType,H,null),Ds(d,f,"formMethod",H.formMethod,H,null),Ds(d,f,"formTarget",H.formTarget,H,null)):(Ds(d,f,"encType",H.encType,H,null),Ds(d,f,"method",H.method,H,null),Ds(d,f,"target",H.target,H,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){d.removeAttribute(v);break}C=Ao(""+C),d.setAttribute(v,C);break;case"onClick":C!=null&&(d.onclick=K1);break;case"onScroll":C!=null&&Hr("scroll",d);break;case"onScrollEnd":C!=null&&Hr("scrollend",d);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(r(61));if(v=C.__html,v!=null){if(H.children!=null)throw Error(r(60));d.innerHTML=v}}break;case"multiple":d.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":d.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){d.removeAttribute("xlink:href");break}v=Ao(""+C),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?d.setAttribute(v,""+C):d.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?d.setAttribute(v,""):d.removeAttribute(v);break;case"capture":case"download":C===!0?d.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?d.setAttribute(v,C):d.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?d.setAttribute(v,C):d.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?d.removeAttribute(v):d.setAttribute(v,C);break;case"popover":Hr("beforetoggle",d),Hr("toggle",d),Ar(d,"popover",C);break;case"xlinkActuate":mr(d,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":mr(d,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":mr(d,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":mr(d,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":mr(d,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":mr(d,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":mr(d,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":mr(d,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":mr(d,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":Ar(d,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=uo.get(v)||v,Ar(d,v,C))}}function zC(d,f,v,C,H,Y){switch(v){case"style":fl(d,C,Y);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(r(61));if(v=C.__html,v!=null){if(H.children!=null)throw Error(r(60));d.innerHTML=v}}break;case"children":typeof C=="string"?ka(d,C):(typeof C=="number"||typeof C=="bigint")&&ka(d,""+C);break;case"onScroll":C!=null&&Hr("scroll",d);break;case"onScrollEnd":C!=null&&Hr("scrollend",d);break;case"onClick":C!=null&&(d.onclick=K1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ct.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(H=v.endsWith("Capture"),f=v.slice(2,H?v.length-7:void 0),Y=d[Ir]||null,Y=Y!=null?Y[v]:null,typeof Y=="function"&&d.removeEventListener(f,Y,H),typeof C=="function")){typeof Y!="function"&&Y!==null&&(v in d?d[v]=null:d.hasAttribute(v)&&d.removeAttribute(v)),d.addEventListener(f,C,H);break e}v in d?d[v]=C:C===!0?d.setAttribute(v,""):Ar(d,v,C)}}}function bo(d,f,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hr("error",d),Hr("load",d);var C=!1,H=!1,Y;for(Y in v)if(v.hasOwnProperty(Y)){var pe=v[Y];if(pe!=null)switch(Y){case"src":C=!0;break;case"srcSet":H=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Ds(d,f,Y,pe,v,null)}}H&&Ds(d,f,"srcSet",v.srcSet,v,null),C&&Ds(d,f,"src",v.src,v,null);return;case"input":Hr("invalid",d);var Be=Y=pe=H=null,Ve=null,dt=null;for(C in v)if(v.hasOwnProperty(C)){var Ct=v[C];if(Ct!=null)switch(C){case"name":H=Ct;break;case"type":pe=Ct;break;case"checked":Ve=Ct;break;case"defaultChecked":dt=Ct;break;case"value":Y=Ct;break;case"defaultValue":Be=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(137,f));break;default:Ds(d,f,C,Ct,v,null)}}Ll(d,Y,Be,Ve,dt,pe,H,!1),Do(d);return;case"select":Hr("invalid",d),C=pe=Y=null;for(H in v)if(v.hasOwnProperty(H)&&(Be=v[H],Be!=null))switch(H){case"value":Y=Be;break;case"defaultValue":pe=Be;break;case"multiple":C=Be;default:Ds(d,f,H,Be,v,null)}f=Y,v=pe,d.multiple=!!C,f!=null?Ba(d,!!C,f,!1):v!=null&&Ba(d,!!C,v,!0);return;case"textarea":Hr("invalid",d),Y=H=C=null;for(pe in v)if(v.hasOwnProperty(pe)&&(Be=v[pe],Be!=null))switch(pe){case"value":C=Be;break;case"defaultValue":H=Be;break;case"children":Y=Be;break;case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(91));break;default:Ds(d,f,pe,Be,v,null)}li(d,C,H,Y),Do(d);return;case"option":for(Ve in v)if(v.hasOwnProperty(Ve)&&(C=v[Ve],C!=null))switch(Ve){case"selected":d.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:Ds(d,f,Ve,C,v,null)}return;case"dialog":Hr("beforetoggle",d),Hr("toggle",d),Hr("cancel",d),Hr("close",d);break;case"iframe":case"object":Hr("load",d);break;case"video":case"audio":for(C=0;C<xg.length;C++)Hr(xg[C],d);break;case"image":Hr("error",d),Hr("load",d);break;case"details":Hr("toggle",d);break;case"embed":case"source":case"link":Hr("error",d),Hr("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in v)if(v.hasOwnProperty(dt)&&(C=v[dt],C!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Ds(d,f,dt,C,v,null)}return;default:if(uc(f)){for(Ct in v)v.hasOwnProperty(Ct)&&(C=v[Ct],C!==void 0&&zC(d,f,Ct,C,v,void 0));return}}for(Be in v)v.hasOwnProperty(Be)&&(C=v[Be],C!=null&&Ds(d,f,Be,C,v,null))}function vq(d,f,v,C){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var H=null,Y=null,pe=null,Be=null,Ve=null,dt=null,Ct=null;for(mt in v){var Dt=v[mt];if(v.hasOwnProperty(mt)&&Dt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Ve=Dt;default:C.hasOwnProperty(mt)||Ds(d,f,mt,null,C,Dt)}}for(var ft in C){var mt=C[ft];if(Dt=v[ft],C.hasOwnProperty(ft)&&(mt!=null||Dt!=null))switch(ft){case"type":Y=mt;break;case"name":H=mt;break;case"checked":dt=mt;break;case"defaultChecked":Ct=mt;break;case"value":pe=mt;break;case"defaultValue":Be=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:mt!==Dt&&Ds(d,f,ft,mt,C,Dt)}}is(d,pe,Be,Ve,dt,Ct,Y,H);return;case"select":mt=pe=Be=ft=null;for(Y in v)if(Ve=v[Y],v.hasOwnProperty(Y)&&Ve!=null)switch(Y){case"value":break;case"multiple":mt=Ve;default:C.hasOwnProperty(Y)||Ds(d,f,Y,null,C,Ve)}for(H in C)if(Y=C[H],Ve=v[H],C.hasOwnProperty(H)&&(Y!=null||Ve!=null))switch(H){case"value":ft=Y;break;case"defaultValue":Be=Y;break;case"multiple":pe=Y;default:Y!==Ve&&Ds(d,f,H,Y,C,Ve)}f=Be,v=pe,C=mt,ft!=null?Ba(d,!!v,ft,!1):!!C!=!!v&&(f!=null?Ba(d,!!v,f,!0):Ba(d,!!v,v?[]:"",!1));return;case"textarea":mt=ft=null;for(Be in v)if(H=v[Be],v.hasOwnProperty(Be)&&H!=null&&!C.hasOwnProperty(Be))switch(Be){case"value":break;case"children":break;default:Ds(d,f,Be,null,C,H)}for(pe in C)if(H=C[pe],Y=v[pe],C.hasOwnProperty(pe)&&(H!=null||Y!=null))switch(pe){case"value":ft=H;break;case"defaultValue":mt=H;break;case"children":break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:H!==Y&&Ds(d,f,pe,H,C,Y)}Dn(d,ft,mt);return;case"option":for(var er in v)if(ft=v[er],v.hasOwnProperty(er)&&ft!=null&&!C.hasOwnProperty(er))switch(er){case"selected":d.selected=!1;break;default:Ds(d,f,er,null,C,ft)}for(Ve in C)if(ft=C[Ve],mt=v[Ve],C.hasOwnProperty(Ve)&&ft!==mt&&(ft!=null||mt!=null))switch(Ve){case"selected":d.selected=ft&&typeof ft!="function"&&typeof ft!="symbol";break;default:Ds(d,f,Ve,ft,C,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qn in v)ft=v[Qn],v.hasOwnProperty(Qn)&&ft!=null&&!C.hasOwnProperty(Qn)&&Ds(d,f,Qn,null,C,ft);for(dt in C)if(ft=C[dt],mt=v[dt],C.hasOwnProperty(dt)&&ft!==mt&&(ft!=null||mt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,f));break;default:Ds(d,f,dt,ft,C,mt)}return;default:if(uc(f)){for(var Ls in v)ft=v[Ls],v.hasOwnProperty(Ls)&&ft!==void 0&&!C.hasOwnProperty(Ls)&&zC(d,f,Ls,void 0,C,ft);for(Ct in C)ft=C[Ct],mt=v[Ct],!C.hasOwnProperty(Ct)||ft===mt||ft===void 0&&mt===void 0||zC(d,f,Ct,ft,C,mt);return}}for(var nt in v)ft=v[nt],v.hasOwnProperty(nt)&&ft!=null&&!C.hasOwnProperty(nt)&&Ds(d,f,nt,null,C,ft);for(Dt in C)ft=C[Dt],mt=v[Dt],!C.hasOwnProperty(Dt)||ft===mt||ft==null&&mt==null||Ds(d,f,Dt,ft,C,mt)}var GC=null,qC=null;function $1(d){return d.nodeType===9?d:d.ownerDocument}function jI(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HI(d,f){if(d===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&f==="foreignObject"?0:d}function KC(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var $C=null;function xq(){var d=window.event;return d&&d.type==="popstate"?d===$C?!1:($C=d,!0):($C=null,!1)}var QI=typeof setTimeout=="function"?setTimeout:void 0,yq=typeof clearTimeout=="function"?clearTimeout:void 0,VI=typeof Promise=="function"?Promise:void 0,wq=typeof queueMicrotask=="function"?queueMicrotask:typeof VI<"u"?function(d){return VI.resolve(null).then(d).catch(bq)}:QI;function bq(d){setTimeout(function(){throw d})}function nf(d){return d==="head"}function zI(d,f){var v=f,C=0,H=0;do{var Y=v.nextSibling;if(d.removeChild(v),Y&&Y.nodeType===8)if(v=Y.data,v==="/$"){if(0<C&&8>C){v=C;var pe=d.ownerDocument;if(v&1&&wg(pe.documentElement),v&2&&wg(pe.body),v&4)for(v=pe.head,wg(v),pe=v.firstChild;pe;){var Be=pe.nextSibling,Ve=pe.nodeName;pe[Fe]||Ve==="SCRIPT"||Ve==="STYLE"||Ve==="LINK"&&pe.rel.toLowerCase()==="stylesheet"||v.removeChild(pe),pe=Be}}if(H===0){d.removeChild(Y),Bg(f);return}H--}else v==="$"||v==="$?"||v==="$!"?H++:C=v.charCodeAt(0)-48;else C=0;v=Y}while(v);Bg(f)}function WC(d){var f=d.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var v=f;switch(f=f.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":WC(v),De(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}d.removeChild(v)}}function _q(d,f,v,C){for(;d.nodeType===1;){var H=v;if(d.nodeName.toLowerCase()!==f.toLowerCase()){if(!C&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(C){if(!d[Fe])switch(f){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(Y=d.getAttribute("rel"),Y==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(Y!==H.rel||d.getAttribute("href")!==(H.href==null||H.href===""?null:H.href)||d.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin)||d.getAttribute("title")!==(H.title==null?null:H.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(Y=d.getAttribute("src"),(Y!==(H.src==null?null:H.src)||d.getAttribute("type")!==(H.type==null?null:H.type)||d.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin))&&Y&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(f==="input"&&d.type==="hidden"){var Y=H.name==null?null:""+H.name;if(H.type==="hidden"&&d.getAttribute("name")===Y)return d}else return d;if(d=Pu(d.nextSibling),d===null)break}return null}function Cq(d,f,v){if(f==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!v||(d=Pu(d.nextSibling),d===null))return null;return d}function YC(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Eq(d,f){var v=d.ownerDocument;if(d.data!=="$?"||v.readyState==="complete")f();else{var C=function(){f(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),d._reactRetry=C}}function Pu(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return d}var XC=null;function GI(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var v=d.data;if(v==="$"||v==="$!"||v==="$?"){if(f===0)return d;f--}else v==="/$"&&f++}d=d.previousSibling}return null}function qI(d,f,v){switch(f=$1(v),d){case"html":if(d=f.documentElement,!d)throw Error(r(452));return d;case"head":if(d=f.head,!d)throw Error(r(453));return d;case"body":if(d=f.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function wg(d){for(var f=d.attributes;f.length;)d.removeAttributeNode(f[0]);De(d)}var nu=new Map,KI=new Set;function W1(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var oA=le.d;le.d={f:Sq,r:Tq,D:Nq,C:Bq,L:kq,m:Iq,X:Dq,S:Fq,M:Lq};function Sq(){var d=oA.f(),f=j1();return d||f}function Tq(d){var f=Me(d);f!==null&&f.tag===5&&f.type==="form"?Eh(f):oA.r(d)}var nm=typeof document>"u"?null:document;function $I(d,f,v){var C=nm;if(C&&typeof f=="string"&&f){var H=Sr(f);H='link[rel="'+d+'"][href="'+H+'"]',typeof v=="string"&&(H+='[crossorigin="'+v+'"]'),KI.has(H)||(KI.add(H),d={rel:d,crossOrigin:v,href:f},C.querySelector(H)===null&&(f=C.createElement("link"),bo(f,"link",d),Je(f),C.head.appendChild(f)))}}function Nq(d){oA.D(d),$I("dns-prefetch",d,null)}function Bq(d,f){oA.C(d,f),$I("preconnect",d,f)}function kq(d,f,v){oA.L(d,f,v);var C=nm;if(C&&d&&f){var H='link[rel="preload"][as="'+Sr(f)+'"]';f==="image"&&v&&v.imageSrcSet?(H+='[imagesrcset="'+Sr(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(H+='[imagesizes="'+Sr(v.imageSizes)+'"]')):H+='[href="'+Sr(d)+'"]';var Y=H;switch(f){case"style":Y=rm(d);break;case"script":Y=sm(d)}nu.has(Y)||(d=A({rel:"preload",href:f==="image"&&v&&v.imageSrcSet?void 0:d,as:f},v),nu.set(Y,d),C.querySelector(H)!==null||f==="style"&&C.querySelector(bg(Y))||f==="script"&&C.querySelector(_g(Y))||(f=C.createElement("link"),bo(f,"link",d),Je(f),C.head.appendChild(f)))}}function Iq(d,f){oA.m(d,f);var v=nm;if(v&&d){var C=f&&typeof f.as=="string"?f.as:"script",H='link[rel="modulepreload"][as="'+Sr(C)+'"][href="'+Sr(d)+'"]',Y=H;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=sm(d)}if(!nu.has(Y)&&(d=A({rel:"modulepreload",href:d},f),nu.set(Y,d),v.querySelector(H)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(_g(Y)))return}C=v.createElement("link"),bo(C,"link",d),Je(C),v.head.appendChild(C)}}}function Fq(d,f,v){oA.S(d,f,v);var C=nm;if(C&&d){var H=At(C).hoistableStyles,Y=rm(d);f=f||"default";var pe=H.get(Y);if(!pe){var Be={loading:0,preload:null};if(pe=C.querySelector(bg(Y)))Be.loading=5;else{d=A({rel:"stylesheet",href:d,"data-precedence":f},v),(v=nu.get(Y))&&JC(d,v);var Ve=pe=C.createElement("link");Je(Ve),bo(Ve,"link",d),Ve._p=new Promise(function(dt,Ct){Ve.onload=dt,Ve.onerror=Ct}),Ve.addEventListener("load",function(){Be.loading|=1}),Ve.addEventListener("error",function(){Be.loading|=2}),Be.loading|=4,Y1(pe,f,C)}pe={type:"stylesheet",instance:pe,count:1,state:Be},H.set(Y,pe)}}}function Dq(d,f){oA.X(d,f);var v=nm;if(v&&d){var C=At(v).hoistableScripts,H=sm(d),Y=C.get(H);Y||(Y=v.querySelector(_g(H)),Y||(d=A({src:d,async:!0},f),(f=nu.get(H))&&ZC(d,f),Y=v.createElement("script"),Je(Y),bo(Y,"link",d),v.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},C.set(H,Y))}}function Lq(d,f){oA.M(d,f);var v=nm;if(v&&d){var C=At(v).hoistableScripts,H=sm(d),Y=C.get(H);Y||(Y=v.querySelector(_g(H)),Y||(d=A({src:d,async:!0,type:"module"},f),(f=nu.get(H))&&ZC(d,f),Y=v.createElement("script"),Je(Y),bo(Y,"link",d),v.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},C.set(H,Y))}}function WI(d,f,v,C){var H=(H=fe.current)?W1(H):null;if(!H)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(f=rm(v.href),v=At(H).hoistableStyles,C=v.get(f),C||(C={type:"style",instance:null,count:0,state:null},v.set(f,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){d=rm(v.href);var Y=At(H).hoistableStyles,pe=Y.get(d);if(pe||(H=H.ownerDocument||H,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(d,pe),(Y=H.querySelector(bg(d)))&&!Y._p&&(pe.instance=Y,pe.state.loading=5),nu.has(d)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},nu.set(d,v),Y||Rq(H,d,v,pe.state))),f&&C===null)throw Error(r(528,""));return pe}if(f&&C!==null)throw Error(r(529,""));return null;case"script":return f=v.async,v=v.src,typeof v=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=sm(v),v=At(H).hoistableScripts,C=v.get(f),C||(C={type:"script",instance:null,count:0,state:null},v.set(f,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function rm(d){return'href="'+Sr(d)+'"'}function bg(d){return'link[rel="stylesheet"]['+d+"]"}function YI(d){return A({},d,{"data-precedence":d.precedence,precedence:null})}function Rq(d,f,v,C){d.querySelector('link[rel="preload"][as="style"]['+f+"]")?C.loading=1:(f=d.createElement("link"),C.preload=f,f.addEventListener("load",function(){return C.loading|=1}),f.addEventListener("error",function(){return C.loading|=2}),bo(f,"link",v),Je(f),d.head.appendChild(f))}function sm(d){return'[src="'+Sr(d)+'"]'}function _g(d){return"script[async]"+d}function XI(d,f,v){if(f.count++,f.instance===null)switch(f.type){case"style":var C=d.querySelector('style[data-href~="'+Sr(v.href)+'"]');if(C)return f.instance=C,Je(C),C;var H=A({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(d.ownerDocument||d).createElement("style"),Je(C),bo(C,"style",H),Y1(C,v.precedence,d),f.instance=C;case"stylesheet":H=rm(v.href);var Y=d.querySelector(bg(H));if(Y)return f.state.loading|=4,f.instance=Y,Je(Y),Y;C=YI(v),(H=nu.get(H))&&JC(C,H),Y=(d.ownerDocument||d).createElement("link"),Je(Y);var pe=Y;return pe._p=new Promise(function(Be,Ve){pe.onload=Be,pe.onerror=Ve}),bo(Y,"link",C),f.state.loading|=4,Y1(Y,v.precedence,d),f.instance=Y;case"script":return Y=sm(v.src),(H=d.querySelector(_g(Y)))?(f.instance=H,Je(H),H):(C=v,(H=nu.get(Y))&&(C=A({},v),ZC(C,H)),d=d.ownerDocument||d,H=d.createElement("script"),Je(H),bo(H,"link",C),d.head.appendChild(H),f.instance=H);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(C=f.instance,f.state.loading|=4,Y1(C,v.precedence,d));return f.instance}function Y1(d,f,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),H=C.length?C[C.length-1]:null,Y=H,pe=0;pe<C.length;pe++){var Be=C[pe];if(Be.dataset.precedence===f)Y=Be;else if(Y!==H)break}Y?Y.parentNode.insertBefore(d,Y.nextSibling):(f=v.nodeType===9?v.head:v,f.insertBefore(d,f.firstChild))}function JC(d,f){d.crossOrigin==null&&(d.crossOrigin=f.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=f.referrerPolicy),d.title==null&&(d.title=f.title)}function ZC(d,f){d.crossOrigin==null&&(d.crossOrigin=f.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=f.referrerPolicy),d.integrity==null&&(d.integrity=f.integrity)}var X1=null;function JI(d,f,v){if(X1===null){var C=new Map,H=X1=new Map;H.set(v,C)}else H=X1,C=H.get(v),C||(C=new Map,H.set(v,C));if(C.has(d))return C;for(C.set(d,null),v=v.getElementsByTagName(d),H=0;H<v.length;H++){var Y=v[H];if(!(Y[Fe]||Y[Ur]||d==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=Y.getAttribute(f)||"";pe=d+pe;var Be=C.get(pe);Be?Be.push(Y):C.set(pe,[Y])}}return C}function ZI(d,f,v){d=d.ownerDocument||d,d.head.insertBefore(v,f==="title"?d.querySelector("head > title"):null)}function Pq(d,f,v){if(v===1||f.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return d=f.disabled,typeof f.precedence=="string"&&d==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function e3(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var Cg=null;function Mq(){}function Uq(d,f,v){if(Cg===null)throw Error(r(475));var C=Cg;if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var H=rm(v.href),Y=d.querySelector(bg(H));if(Y){d=Y._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(C.count++,C=J1.bind(C),d.then(C,C)),f.state.loading|=4,f.instance=Y,Je(Y);return}Y=d.ownerDocument||d,v=YI(v),(H=nu.get(H))&&JC(v,H),Y=Y.createElement("link"),Je(Y);var pe=Y;pe._p=new Promise(function(Be,Ve){pe.onload=Be,pe.onerror=Ve}),bo(Y,"link",v),f.instance=Y}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(f,d),(d=f.state.preload)&&(f.state.loading&3)===0&&(C.count++,f=J1.bind(C),d.addEventListener("load",f),d.addEventListener("error",f))}}function Oq(){if(Cg===null)throw Error(r(475));var d=Cg;return d.stylesheets&&d.count===0&&eE(d,d.stylesheets),0<d.count?function(f){var v=setTimeout(function(){if(d.stylesheets&&eE(d,d.stylesheets),d.unsuspend){var C=d.unsuspend;d.unsuspend=null,C()}},6e4);return d.unsuspend=f,function(){d.unsuspend=null,clearTimeout(v)}}:null}function J1(){if(this.count--,this.count===0){if(this.stylesheets)eE(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var Z1=null;function eE(d,f){d.stylesheets=null,d.unsuspend!==null&&(d.count++,Z1=new Map,f.forEach(jq,d),Z1=null,J1.call(d))}function jq(d,f){if(!(f.state.loading&4)){var v=Z1.get(d);if(v)var C=v.get(null);else{v=new Map,Z1.set(d,v);for(var H=d.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<H.length;Y++){var pe=H[Y];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(v.set(pe.dataset.precedence,pe),C=pe)}C&&v.set(null,C)}H=f.instance,pe=H.getAttribute("data-precedence"),Y=v.get(pe)||C,Y===C&&v.set(null,H),v.set(pe,H),this.count++,C=J1.bind(this),H.addEventListener("load",C),H.addEventListener("error",C),Y?Y.parentNode.insertBefore(H,Y.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(H,d.firstChild)),f.state.loading|=4}}var Eg={$$typeof:D,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Hq(d,f,v,C,H,Y,pe,Be){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hs(0),this.hiddenUpdates=hs(null),this.identifierPrefix=C,this.onUncaughtError=H,this.onCaughtError=Y,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function t3(d,f,v,C,H,Y,pe,Be,Ve,dt,Ct,Dt){return d=new Hq(d,f,v,pe,Be,Ve,dt,Dt),f=1,Y===!0&&(f|=24),Y=hi(3,null,null,f),d.current=Y,Y.stateNode=d,f=$p(),f.refCount++,d.pooledCache=f,f.refCount++,Y.memoizedState={element:C,isDehydrated:v,cache:f},qe(Y),d}function n3(d){return d?(d=va,d):va}function r3(d,f,v,C,H,Y){H=n3(H),C.context===null?C.context=H:C.pendingContext=H,C=bt(f),C.payload={element:v},Y=Y===void 0?null:Y,Y!==null&&(C.callback=Y),v=It(d,C,f),v!==null&&(Sc(v,d,f),Et(v,d,f))}function s3(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var v=d.retryLane;d.retryLane=v!==0&&v<f?v:f}}function tE(d,f){s3(d,f),(d=d.alternate)&&s3(d,f)}function a3(d){if(d.tag===13){var f=mc(d,67108864);f!==null&&Sc(f,d,67108864),tE(d,67108864)}}var ey=!0;function Qq(d,f,v,C){var H=ee.T;ee.T=null;var Y=le.p;try{le.p=2,nE(d,f,v,C)}finally{le.p=Y,ee.T=H}}function Vq(d,f,v,C){var H=ee.T;ee.T=null;var Y=le.p;try{le.p=8,nE(d,f,v,C)}finally{le.p=Y,ee.T=H}}function nE(d,f,v,C){if(ey){var H=rE(C);if(H===null)VC(d,f,C,ty,v),o3(d,C);else if(Gq(H,d,f,v,C))C.stopPropagation();else if(o3(d,C),f&4&&-1<zq.indexOf(d)){for(;H!==null;){var Y=Me(H);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var pe=Fn(Y.pendingLanes);if(pe!==0){var Be=Y;for(Be.pendingLanes|=2,Be.entangledLanes|=2;pe;){var Ve=1<<31-Ht(pe);Be.entanglements[1]|=Ve,pe&=~Ve}pd(Y),(Es&6)===0&&(U1=je()+500,vg(0))}}break;case 13:Be=mc(Y,2),Be!==null&&Sc(Be,Y,2),j1(),tE(Y,2)}if(Y=rE(C),Y===null&&VC(d,f,C,ty,v),Y===H)break;H=Y}H!==null&&C.stopPropagation()}else VC(d,f,C,null,v)}}function rE(d){return d=$r(d),sE(d)}var ty=null;function sE(d){if(ty=null,d=Le(d),d!==null){var f=a(d);if(f===null)d=null;else{var v=f.tag;if(v===13){if(d=i(f),d!==null)return d;d=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null)}}return ty=d,null}function i3(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case rt:return 2;case xt:return 8;case Tt:case vt:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var aE=!1,rf=null,sf=null,af=null,Sg=new Map,Tg=new Map,of=[],zq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o3(d,f){switch(d){case"focusin":case"focusout":rf=null;break;case"dragenter":case"dragleave":sf=null;break;case"mouseover":case"mouseout":af=null;break;case"pointerover":case"pointerout":Sg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tg.delete(f.pointerId)}}function Ng(d,f,v,C,H,Y){return d===null||d.nativeEvent!==Y?(d={blockedOn:f,domEventName:v,eventSystemFlags:C,nativeEvent:Y,targetContainers:[H]},f!==null&&(f=Me(f),f!==null&&a3(f)),d):(d.eventSystemFlags|=C,f=d.targetContainers,H!==null&&f.indexOf(H)===-1&&f.push(H),d)}function Gq(d,f,v,C,H){switch(f){case"focusin":return rf=Ng(rf,d,f,v,C,H),!0;case"dragenter":return sf=Ng(sf,d,f,v,C,H),!0;case"mouseover":return af=Ng(af,d,f,v,C,H),!0;case"pointerover":var Y=H.pointerId;return Sg.set(Y,Ng(Sg.get(Y)||null,d,f,v,C,H)),!0;case"gotpointercapture":return Y=H.pointerId,Tg.set(Y,Ng(Tg.get(Y)||null,d,f,v,C,H)),!0}return!1}function l3(d){var f=Le(d.target);if(f!==null){var v=a(f);if(v!==null){if(f=v.tag,f===13){if(f=i(v),f!==null){d.blockedOn=f,fa(d.priority,function(){if(v.tag===13){var C=Ec();C=Ta(C);var H=mc(v,C);H!==null&&Sc(H,v,C),tE(v,C)}});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){d.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ny(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var v=rE(d.nativeEvent);if(v===null){v=d.nativeEvent;var C=new v.constructor(v.type,v);ji=C,v.target.dispatchEvent(C),ji=null}else return f=Me(v),f!==null&&a3(f),d.blockedOn=v,!1;f.shift()}return!0}function c3(d,f,v){ny(d)&&v.delete(f)}function qq(){aE=!1,rf!==null&&ny(rf)&&(rf=null),sf!==null&&ny(sf)&&(sf=null),af!==null&&ny(af)&&(af=null),Sg.forEach(c3),Tg.forEach(c3)}function ry(d,f){d.blockedOn===f&&(d.blockedOn=null,aE||(aE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qq)))}var sy=null;function u3(d){sy!==d&&(sy=d,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sy===d&&(sy=null);for(var f=0;f<d.length;f+=3){var v=d[f],C=d[f+1],H=d[f+2];if(typeof C!="function"){if(sE(C||v)===null)continue;break}var Y=Me(v);Y!==null&&(d.splice(f,3),f-=3,Zc(Y,{pending:!0,data:H,method:v.method,action:C},C,H))}}))}function Bg(d){function f(Ve){return ry(Ve,d)}rf!==null&&ry(rf,d),sf!==null&&ry(sf,d),af!==null&&ry(af,d),Sg.forEach(f),Tg.forEach(f);for(var v=0;v<of.length;v++){var C=of[v];C.blockedOn===d&&(C.blockedOn=null)}for(;0<of.length&&(v=of[0],v.blockedOn===null);)l3(v),v.blockedOn===null&&of.shift();if(v=(d.ownerDocument||d).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var H=v[C],Y=v[C+1],pe=H[Ir]||null;if(typeof Y=="function")pe||u3(v);else if(pe){var Be=null;if(Y&&Y.hasAttribute("formAction")){if(H=Y,pe=Y[Ir]||null)Be=pe.formAction;else if(sE(H)!==null)continue}else Be=pe.action;typeof Be=="function"?v[C+1]=Be:(v.splice(C,3),C-=3),u3(v)}}}function iE(d){this._internalRoot=d}ay.prototype.render=iE.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(r(409));var v=f.current,C=Ec();r3(v,C,d,f,null,null)},ay.prototype.unmount=iE.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;r3(d.current,2,null,d,null,null),j1(),f[es]=null}};function ay(d){this._internalRoot=d}ay.prototype.unstable_scheduleHydration=function(d){if(d){var f=Ys();d={blockedOn:null,target:d,priority:f};for(var v=0;v<of.length&&f!==0&&f<of[v].priority;v++);of.splice(v,0,d),v===0&&l3(d)}};var d3=e.version;if(d3!=="19.1.1")throw Error(r(527,d3,"19.1.1"));le.findDOMNode=function(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=l(f),d=d!==null?c(d):null,d=d===null?null:d.stateNode,d};var Kq={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iy.isDisabled&&iy.supportsFiber)try{Gt=iy.inject(Kq),Wt=iy}catch{}}return Ig.createRoot=function(d,f){if(!s(d))throw Error(r(299));var v=!1,C="",H=Tk,Y=Nk,pe=Bk,Be=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onUncaughtError!==void 0&&(H=f.onUncaughtError),f.onCaughtError!==void 0&&(Y=f.onCaughtError),f.onRecoverableError!==void 0&&(pe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Be=f.unstable_transitionCallbacks)),f=t3(d,1,!1,null,null,v,C,H,Y,pe,Be,null),d[es]=f.current,QC(d),new iE(f)},Ig.hydrateRoot=function(d,f,v){if(!s(d))throw Error(r(299));var C=!1,H="",Y=Tk,pe=Nk,Be=Bk,Ve=null,dt=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(H=v.identifierPrefix),v.onUncaughtError!==void 0&&(Y=v.onUncaughtError),v.onCaughtError!==void 0&&(pe=v.onCaughtError),v.onRecoverableError!==void 0&&(Be=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Ve=v.unstable_transitionCallbacks),v.formState!==void 0&&(dt=v.formState)),f=t3(d,1,!0,f,v??null,C,H,Y,pe,Be,Ve,dt),f.context=n3(null),v=f.current,C=Ec(),C=Ta(C),H=bt(C),H.callback=null,It(v,H,C),v=C,f.current.lanes=v,Ms(f,v),pd(f),d[es]=f.current,QC(d),new ay(f)},Ig.version="19.1.1",Ig}var w3;function rK(){if(w3)return cE.exports;w3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cE.exports=nK(),cE.exports}var sK=rK();const aK=Nx(sK),iK=()=>{};var b3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],i=t[n++],o=t[n++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},GU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,A=a>>2,h=(a&3)<<4|o>>4;let p=(o&15)<<2|c>>6,g=c&63;l||(g=64,i||(p=64)),r.push(n[A],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||o==null||c==null||h==null)throw new lK;const p=a<<2|o>>4;if(r.push(p),c!==64){const g=o<<4&240|c>>2;if(r.push(g),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cK=function(t){const e=zU(t);return GU.encodeByteArray(e,!0)},u2=function(t){return cK(t).replace(/\./g,"")},qU=function(t){try{return GU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=()=>uK().__FIREBASE_DEFAULTS__,AK=()=>{if(typeof process>"u"||typeof b3>"u")return;const t=b3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qU(t[1]);return e&&JSON.parse(e)},kb=()=>{try{return iK()||dK()||AK()||fK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},KU=t=>{var e,n;return(n=(e=kb())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$U=t=>{const e=KU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},WU=()=>{var t;return(t=kb())==null?void 0:t.config},YU=t=>{var e;return(e=kb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[u2(JSON.stringify(n)),u2(JSON.stringify(i)),""].join(".")}const pv={};function pK(){const t={prod:[],emulator:[]};for(const e of Object.keys(pv))pv[e]?t.emulator.push(e):t.prod.push(e);return t}function gK(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _3=!1;function yN(t,e){if(typeof window>"u"||typeof document>"u"||!w0(window.location.host)||pv[t]===e||pv[t]||_3)return;pv[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",a=pK().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{_3=!0,i()},p}function A(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=gK(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),S=document.getElementById(x)||document.createElement("a"),N=n("preprendIcon"),F=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const D=p.element;o(D),A(S,x);const R=c();l(F,N),D.append(F,w,S,R),document.body.appendChild(D)}a?(w.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ll())}function xK(){var e;const t=(e=kb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _K(){const t=ll();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CK(){return!xK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EK(){try{return typeof indexedDB=="object"}catch{return!1}}function SK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK="FirebaseError";class Qd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TK,Object.setPrototypeOf(this,Qd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kx.prototype.create)}}class kx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?NK(a,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Qd(s,o,r)}}function NK(t,e){return t.replace(BK,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const BK=/\{\$([^}]+)}/g;function kK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],i=e[s];if(C3(a)&&C3(i)){if(!Kf(a,i))return!1}else if(a!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function C3(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $g(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Wg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function IK(t,e){const n=new FK(t,e);return n.subscribe.bind(n)}class FK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DK(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=fE),s.error===void 0&&(s.error=fE),s.complete===void 0&&(s.complete=fE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){return t&&t._delegate?t._delegate:t}class $f{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LK=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PK(e))try{this.getOrInitializeService({instanceIdentifier:Lh})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Lh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lh){return this.instances.has(e)}getOptions(e=Lh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&i.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lh){return this.component?this.component.multipleInstances?e:Lh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RK(t){return t===Lh?void 0:t}function PK(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LK(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(zr||(zr={}));const UK={debug:zr.DEBUG,verbose:zr.VERBOSE,info:zr.INFO,warn:zr.WARN,error:zr.ERROR,silent:zr.SILENT},OK=zr.INFO,jK={[zr.DEBUG]:"log",[zr.VERBOSE]:"log",[zr.INFO]:"info",[zr.WARN]:"warn",[zr.ERROR]:"error"},HK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jK[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let wN=class{constructor(e){this.name=e,this._logLevel=OK,this._logHandler=HK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zr.DEBUG,...e),this._logHandler(this,zr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zr.VERBOSE,...e),this._logHandler(this,zr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zr.INFO,...e),this._logHandler(this,zr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zr.WARN,...e),this._logHandler(this,zr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zr.ERROR,...e),this._logHandler(this,zr.ERROR,...e)}};const QK=(t,e)=>e.some(n=>t instanceof n);let E3,S3;function VK(){return E3||(E3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zK(){return S3||(S3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XU=new WeakMap,aT=new WeakMap,JU=new WeakMap,hE=new WeakMap,bN=new WeakMap;function GK(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{n(Rf(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&XU.set(n,t)}).catch(()=>{}),bN.set(e,t),e}function qK(t){if(aT.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});aT.set(t,e)}let iT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return aT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JU.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KK(t){iT=t(iT)}function $K(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mE(this),e,...n);return JU.set(r,e.sort?e.sort():[e]),Rf(r)}:zK().includes(t)?function(...e){return t.apply(mE(this),e),Rf(XU.get(this))}:function(...e){return Rf(t.apply(mE(this),e))}}function WK(t){return typeof t=="function"?$K(t):(t instanceof IDBTransaction&&qK(t),QK(t,VK())?new Proxy(t,iT):t)}function Rf(t){if(t instanceof IDBRequest)return GK(t);if(hE.has(t))return hE.get(t);const e=WK(t);return e!==t&&(hE.set(t,e),bN.set(e,t)),e}const mE=t=>bN.get(t);function YK(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=Rf(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Rf(i.result),l.oldVersion,l.newVersion,Rf(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const XK=["get","getKey","getAll","getAllKeys","count"],JK=["put","add","delete","clear"],pE=new Map;function T3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pE.get(e))return pE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=JK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||XK.includes(n)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&l.done]))[0]};return pE.set(e,a),a}KK(t=>({...t,get:(e,n,r)=>T3(e,n)||t.get(e,n,r),has:(e,n)=>!!T3(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function e$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oT="@firebase/app",N3="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new wN("@firebase/app"),t$="@firebase/app-compat",n$="@firebase/analytics-compat",r$="@firebase/analytics",s$="@firebase/app-check-compat",a$="@firebase/app-check",i$="@firebase/auth",o$="@firebase/auth-compat",l$="@firebase/database",c$="@firebase/data-connect",u$="@firebase/database-compat",d$="@firebase/functions",A$="@firebase/functions-compat",f$="@firebase/installations",h$="@firebase/installations-compat",m$="@firebase/messaging",p$="@firebase/messaging-compat",g$="@firebase/performance",v$="@firebase/performance-compat",x$="@firebase/remote-config",y$="@firebase/remote-config-compat",w$="@firebase/storage",b$="@firebase/storage-compat",_$="@firebase/firestore",C$="@firebase/ai",E$="@firebase/firestore-compat",S$="firebase",T$="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="[DEFAULT]",N$={[oT]:"fire-core",[t$]:"fire-core-compat",[r$]:"fire-analytics",[n$]:"fire-analytics-compat",[a$]:"fire-app-check",[s$]:"fire-app-check-compat",[i$]:"fire-auth",[o$]:"fire-auth-compat",[l$]:"fire-rtdb",[c$]:"fire-data-connect",[u$]:"fire-rtdb-compat",[d$]:"fire-fn",[A$]:"fire-fn-compat",[f$]:"fire-iid",[h$]:"fire-iid-compat",[m$]:"fire-fcm",[p$]:"fire-fcm-compat",[g$]:"fire-perf",[v$]:"fire-perf-compat",[x$]:"fire-rc",[y$]:"fire-rc-compat",[w$]:"fire-gcs",[b$]:"fire-gcs-compat",[_$]:"fire-fst",[E$]:"fire-fst-compat",[C$]:"fire-vertex","fire-js":"fire-js",[S$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map,B$=new Map,cT=new Map;function B3(t,e){try{t.container.addComponent(e)}catch(n){_A.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function o0(t){const e=t.name;if(cT.has(e))return _A.debug(`There were multiple attempts to register component ${e}.`),!1;cT.set(e,t);for(const n of Hv.values())B3(n,t);for(const n of B$.values())B3(n,t);return!0}function Ib(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Au(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pf=new kx("app","Firebase",k$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $f("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=T$;function _N(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lT,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Pf.create("bad-app-name",{appName:String(s)});if(n||(n=WU()),!n)throw Pf.create("no-options");const a=Hv.get(s);if(a){if(Kf(n,a.options)&&Kf(r,a.config))return a;throw Pf.create("duplicate-app",{appName:s})}const i=new MK(s);for(const l of cT.values())i.addComponent(l);const o=new I$(n,r,i);return Hv.set(s,o),o}function CN(t=lT){const e=Hv.get(t);if(!e&&t===lT&&WU())return _N();if(!e)throw Pf.create("no-app",{appName:t});return e}function k3(){return Array.from(Hv.values())}function kd(t,e,n){let r=N$[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${r}" with version "${e}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_A.warn(i.join(" "));return}o0(new $f(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$="firebase-heartbeat-database",D$=1,Qv="firebase-heartbeat-store";let gE=null;function ZU(){return gE||(gE=YK(F$,D$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pf.create("idb-open",{originalErrorMessage:t.message})})),gE}async function L$(t){try{const n=(await ZU()).transaction(Qv),r=await n.objectStore(Qv).get(e8(t));return await n.done,r}catch(e){if(e instanceof Qd)_A.warn(e.message);else{const n=Pf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_A.warn(n.message)}}}async function I3(t,e){try{const r=(await ZU()).transaction(Qv,"readwrite");await r.objectStore(Qv).put(e,e8(t)),await r.done}catch(n){if(n instanceof Qd)_A.warn(n.message);else{const r=Pf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_A.warn(r.message)}}}function e8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=1024,P$=30;class M${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=F3();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>P$){const i=j$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_A.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=F3(),{heartbeatsToSend:r,unsentEntries:s}=U$(this._heartbeatsCache.heartbeats),a=u2(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return _A.warn(n),""}}}function F3(){return new Date().toISOString().substring(0,10)}function U$(t,e=R$){const n=[];let r=t.slice();for(const s of t){const a=n.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),D3(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),D3(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EK()?SK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return I3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return I3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function D3(t){return u2(JSON.stringify({version:2,heartbeats:t})).length}function j$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t){o0(new $f("platform-logger",e=>new ZK(e),"PRIVATE")),o0(new $f("heartbeat",e=>new M$(e),"PRIVATE")),kd(oT,N3,t),kd(oT,N3,"esm2020"),kd("fire-js","")}H$("");function t8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q$=t8,n8=new kx("auth","Firebase",t8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new wN("@firebase/auth");function V$(t,...e){d2.logLevel<=zr.WARN&&d2.warn(`Auth (${kp}): ${t}`,...e)}function ww(t,...e){d2.logLevel<=zr.ERROR&&d2.error(`Auth (${kp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t,...e){throw EN(t,...e)}function Id(t,...e){return EN(t,...e)}function r8(t,e,n){const r={...Q$(),[e]:n};return new kx("auth","Firebase",r).create(e,{appName:t.name})}function Mf(t){return r8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return n8.create(t,...e)}function Xn(t,e,...n){if(!t)throw EN(e,...n)}function AA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ww(e),new Error(e)}function CA(t,e){t||AA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function z$(){return L3()==="http:"||L3()==="https:"}function L3(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z$()||wK()||"connection"in navigator)?navigator.onLine:!0}function q$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n){this.shortDelay=e,this.longDelay=n,CA(n>e,"Short delay should be less than long delay!"),this.isMobile=vK()||bK()}get(){return G$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e){CA(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;AA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;AA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;AA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],W$=new Fx(3e4,6e4);function lh(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function DA(t,e,n,r,s={}){return a8(t,s,async()=>{let a={},i={};r&&(e==="GET"?i=r:a={body:JSON.stringify(r)});const o=Ix({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...a};return yK()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&w0(t.emulatorConfig.host)&&(c.credentials="include"),s8.fetch()(await i8(t,t.config.apiHost,n,o),c)})}async function a8(t,e,n){t._canInitEmulator=!1;const r={...K$,...e};try{const s=new X$(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw oy(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw oy(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw oy(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw oy(t,"user-disabled",i);const A=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw r8(t,A,c);Wu(t,A)}}catch(s){if(s instanceof Qd)throw s;Wu(t,"network-request-failed",{message:String(s)})}}async function Fb(t,e,n,r,s={}){const a=await DA(t,e,n,r,s);return"mfaPendingCredential"in a&&Wu(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function i8(t,e,n,r){const s=`${e}${n}?${r}`,a=t,i=a.config.emulator?SN(t.config,s):`${t.config.apiScheme}://${s}`;return $$.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function Y$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class X${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Id(this.auth,"network-request-failed")),W$.get())})}}function oy(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Id(t,e,r);return s.customData._tokenResponse=n,s}function R3(t){return t!==void 0&&t.enterprise!==void 0}class J${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Y$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z$(t,e){return DA(t,"GET","/v2/recaptchaConfig",lh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eW(t,e){return DA(t,"POST","/v1/accounts:delete",e)}async function A2(t,e){return DA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tW(t,e=!1){const n=Aa(t),r=await n.getIdToken(e),s=TN(r);Xn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:gv(vE(s.auth_time)),issuedAtTime:gv(vE(s.iat)),expirationTime:gv(vE(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vE(t){return Number(t)*1e3}function TN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ww("JWT malformed, contained fewer than 3 sections"),null;try{const s=qU(n);return s?JSON.parse(s):(ww("Failed to decode base64 JWT payload"),null)}catch(s){return ww("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function P3(t){const e=TN(t);return Xn(e,"internal-error"),Xn(typeof e.exp<"u","internal-error"),Xn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vv(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qd&&nW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gv(this.lastLoginAt),this.creationTime=gv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Vv(t,A2(e,{idToken:n}));Xn(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?o8(s.providerUserInfo):[],i=aW(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),c=o?l:!1,A={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dT(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,A)}async function sW(t){const e=Aa(t);await f2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aW(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function o8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iW(t,e){const n=await a8(t,{},async()=>{const r=Ix({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await i8(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&w0(t.emulatorConfig.host)&&(l.credentials="include"),s8.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oW(t,e){return DA(t,"POST","/v2/accounts:revokeToken",lh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xn(e.idToken,"internal-error"),Xn(typeof e.idToken<"u","internal-error"),Xn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Xn(e.length!==0,"internal-error");const n=P3(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Xn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await iW(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,i=new Vm;return r&&(Xn(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(Xn(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(Xn(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vm,this.toJSON())}_performRefresh(){return AA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e){Xn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vu{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new rW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Vv(this,this.stsTokenManager.getToken(this.auth,e));return Xn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tW(this,e)}reload(){return sW(this)}_assign(e){this!==e&&(Xn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Xn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await f2(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Au(this.auth.app))return Promise.reject(Mf(this.auth));const e=await this.getIdToken();return await Vv(this,eW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,i=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,A=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:x}=n;Xn(h&&x,e,"internal-error");const S=Vm.fromJSON(this.name,x);Xn(typeof h=="string",e,"internal-error"),cf(r,e.name),cf(s,e.name),Xn(typeof p=="boolean",e,"internal-error"),Xn(typeof g=="boolean",e,"internal-error"),cf(a,e.name),cf(i,e.name),cf(o,e.name),cf(l,e.name),cf(c,e.name),cf(A,e.name);const N=new Vu({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:S,createdAt:c,lastLoginAt:A});return w&&Array.isArray(w)&&(N.providerData=w.map(F=>({...F}))),l&&(N._redirectEventId=l),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Vm;s.updateFromServerResponse(n);const a=new Vu({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await f2(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Xn(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?o8(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new Vm;o.updateFromIdToken(r);const l=new Vu({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new Map;function fA(t){CA(t instanceof Function,"Expected a class definition");let e=M3.get(t);return e?(CA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M3.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l8.type="NONE";const U3=l8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t,e,n){return`firebase:${t}:${e}:${n}`}class zm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=bw(this.userKey,s.apiKey,a),this.fullPersistenceKey=bw("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await A2(this.auth,{idToken:e}).catch(()=>{});return n?Vu._fromGetAccountInfoResponse(this.auth,n,e):null}return Vu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zm(fA(U3),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||fA(U3);const i=bw(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const A=await c._get(i);if(A){let h;if(typeof A=="string"){const p=await A2(e,{idToken:A}).catch(()=>{});if(!p)break;h=await Vu._fromGetAccountInfoResponse(e,p,A)}else h=Vu._fromJSON(e,A);c!==a&&(o=h),a=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new zm(a,e,r):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==a)try{await c._remove(i)}catch{}})),new zm(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h8(e))return"Blackberry";if(m8(e))return"Webos";if(u8(e))return"Safari";if((e.includes("chrome/")||d8(e))&&!e.includes("edge/"))return"Chrome";if(f8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c8(t=ll()){return/firefox\//i.test(t)}function u8(t=ll()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d8(t=ll()){return/crios\//i.test(t)}function A8(t=ll()){return/iemobile/i.test(t)}function f8(t=ll()){return/android/i.test(t)}function h8(t=ll()){return/blackberry/i.test(t)}function m8(t=ll()){return/webos/i.test(t)}function NN(t=ll()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lW(t=ll()){var e;return NN(t)&&!!((e=window.navigator)!=null&&e.standalone)}function cW(){return _K()&&document.documentMode===10}function p8(t=ll()){return NN(t)||f8(t)||m8(t)||h8(t)||/windows phone/i.test(t)||A8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t,e=[]){let n;switch(t){case"Browser":n=O3(ll());break;case"Worker":n=`${O3(ll())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dW(t,e={}){return DA(t,"GET","/v2/passwordPolicy",lh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW=6;class fW{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AW,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j3(this),this.idTokenSubscription=new j3(this),this.beforeStateQueue=new uW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fA(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await zm.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await A2(this,{idToken:e}),r=await Vu._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Au(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await f2(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Au(this.app))return Promise.reject(Mf(this));const n=e?Aa(e):null;return n&&Xn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Xn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Au(this.app)?Promise.reject(Mf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Au(this.app)?Promise.reject(Mf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dW(this),n=new fW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fA(e)||this._popupRedirectResolver;Xn(n,this,"argument-error"),this.redirectPersistenceManager=await zm.create(this,[fA(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xn(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Au(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&V$(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function b0(t){return Aa(t)}class j3{constructor(e){this.auth=e,this.observer=null,this.addObserver=IK(n=>this.observer=n)}get next(){return Xn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Db={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mW(t){Db=t}function v8(t){return Db.loadJS(t)}function pW(){return Db.recaptchaEnterpriseScript}function gW(){return Db.gapiScript}function vW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xW{constructor(){this.enterprise=new yW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wW="recaptcha-enterprise",x8="NO_RECAPTCHA";class bW{constructor(e){this.type=wW,this.auth=b0(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{Z$(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new J$(l);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,i(c.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;R3(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(c=>{i(c)}).catch(()=>{i(x8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xW().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{r(this.auth).then(o=>{if(!n&&R3(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pW();l.length!==0&&(l+=o),v8(l).then(()=>{s(o,a,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function H3(t,e,n,r=!1,s=!1){const a=new bW(t);let i;if(s)i=x8;else try{i=await a.verify(n)}catch{i=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function AT(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await H3(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await H3(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t,e){const n=Ib(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Kf(a,e??{}))return s;Wu(s,"already-initialized")}return n.initialize({options:e})}function CW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EW(t,e,n){const r=b0(t);Xn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=y8(e),{host:i,port:o}=SW(e),l=o===null?"":`:${o}`,c={url:`${a}//${i}${l}/`},A=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Xn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xn(Kf(c,r.config.emulator)&&Kf(A,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=A,r.settings.appVerificationDisabledForTesting=!0,w0(i)?(xN(`${a}//${i}${l}`),yN("Auth",!0)):TW()}function y8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SW(t){const e=y8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Q3(r.substr(a.length+1))}}else{const[a,i]=r.split(":");return{host:a,port:Q3(i)}}}function Q3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return AA("not implemented")}_getIdTokenResponse(e){return AA("not implemented")}_linkToIdToken(e,n){return AA("not implemented")}_getReauthenticationResolver(e){return AA("not implemented")}}async function NW(t,e){return DA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BW(t,e){return Fb(t,"POST","/v1/accounts:signInWithPassword",lh(t,e))}async function kW(t,e){return DA(t,"POST","/v1/accounts:sendOobCode",lh(t,e))}async function IW(t,e){return kW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FW(t,e){return Fb(t,"POST","/v1/accounts:signInWithEmailLink",lh(t,e))}async function DW(t,e){return Fb(t,"POST","/v1/accounts:signInWithEmailLink",lh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends BN{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new zv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AT(e,n,"signInWithPassword",BW);case"emailLink":return FW(e,{email:this._email,oobCode:this._password});default:Wu(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return AT(e,r,"signUpPassword",NW);case"emailLink":return DW(e,{idToken:n,email:this._email,oobCode:this._password});default:Wu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gm(t,e){return Fb(t,"POST","/v1/accounts:signInWithIdp",lh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW="http://localhost";class l0 extends BN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new l0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wu("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const i=new l0(r,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Gm(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gm(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gm(e,n)}buildRequest(){const e={requestUri:LW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ix(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PW(t){const e=$g(Wg(t)).link,n=e?$g(Wg(e)).deep_link_id:null,r=$g(Wg(t)).deep_link_id;return(r?$g(Wg(r)).link:null)||r||n||e||t}class kN{constructor(e){const n=$g(Wg(e)),r=n.apiKey??null,s=n.oobCode??null,a=RW(n.mode??null);Xn(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PW(e);try{return new kN(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.providerId=Ip.PROVIDER_ID}static credential(e,n){return zv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kN.parseLink(n);return Xn(r,"argument-error"),zv._fromEmailAndCode(e,r.code,r.tenantId)}}Ip.PROVIDER_ID="password";Ip.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ip.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx extends w8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends Dx{constructor(){super("facebook.com")}static credential(e){return l0._fromParams({providerId:wf.PROVIDER_ID,signInMethod:wf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wf.credentialFromTaggedObject(e)}static credentialFromError(e){return wf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wf.credential(e.oauthAccessToken)}catch{return null}}}wf.FACEBOOK_SIGN_IN_METHOD="facebook.com";wf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends Dx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return l0._fromParams({providerId:bf.PROVIDER_ID,signInMethod:bf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bf.credentialFromTaggedObject(e)}static credentialFromError(e){return bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bf.credential(n,r)}catch{return null}}}bf.GOOGLE_SIGN_IN_METHOD="google.com";bf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends Dx{constructor(){super("github.com")}static credential(e){return l0._fromParams({providerId:_f.PROVIDER_ID,signInMethod:_f.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _f.credentialFromTaggedObject(e)}static credentialFromError(e){return _f.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _f.credential(e.oauthAccessToken)}catch{return null}}}_f.GITHUB_SIGN_IN_METHOD="github.com";_f.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends Dx{constructor(){super("twitter.com")}static credential(e,n){return l0._fromParams({providerId:Cf.PROVIDER_ID,signInMethod:Cf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cf.credentialFromTaggedObject(e)}static credentialFromError(e){return Cf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cf.credential(n,r)}catch{return null}}}Cf.TWITTER_SIGN_IN_METHOD="twitter.com";Cf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Vu._fromIdTokenResponse(e,r,s),i=V3(r);return new dp({user:a,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=V3(r);return new dp({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function V3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2 extends Qd{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,h2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new h2(e,n,r,s)}}function b8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?h2._fromErrorAndOperation(t,a,e,r):a})}async function MW(t,e,n=!1){const r=await Vv(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return dp._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(t,e,n=!1){const{auth:r}=t;if(Au(r.app))return Promise.reject(Mf(r));const s="reauthenticate";try{const a=await Vv(t,b8(r,s,e,t),n);Xn(a.idToken,r,"internal-error");const i=TN(a.idToken);Xn(i,r,"internal-error");const{sub:o}=i;return Xn(t.uid===o,r,"user-mismatch"),dp._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Wu(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(t,e,n=!1){if(Au(t.app))return Promise.reject(Mf(t));const r="signIn",s=await b8(t,r,e),a=await dp._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function OW(t,e){return _8(b0(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jW(t){const e=b0(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HW(t,e,n){const r=b0(t);await AT(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",IW)}function QW(t,e,n){return Au(t.app)?Promise.reject(Mf(t)):OW(Aa(t),Ip.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jW(t),r})}function VW(t,e,n,r){return Aa(t).onIdTokenChanged(e,n,r)}function zW(t,e,n){return Aa(t).beforeAuthStateChanged(e,n)}function C8(t,e,n,r){return Aa(t).onAuthStateChanged(e,n,r)}function GW(t){return Aa(t).signOut()}const m2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(m2,"1"),this.storage.removeItem(m2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW=1e3,KW=10;class S8 extends E8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},a=this.storage.getItem(r);cW()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KW):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S8.type="LOCAL";const $W=S8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8 extends E8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T8.type="SESSION";const N8=T8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Lb(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async c=>c(n.origin,a)),l=await WW(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const c=IN("",20);s.port1.start();const A=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(A),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(p.data.response);break;default:clearTimeout(A),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){return window}function XW(t){Fd().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(){return typeof Fd().WorkerGlobalScope<"u"&&typeof Fd().importScripts=="function"}async function JW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eY(){return B8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8="firebaseLocalStorageDb",tY=1,p2="firebaseLocalStorage",I8="fbase_key";class Lx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rb(t,e){return t.transaction([p2],e?"readwrite":"readonly").objectStore(p2)}function nY(){const t=indexedDB.deleteDatabase(k8);return new Lx(t).toPromise()}function fT(){const t=indexedDB.open(k8,tY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(p2,{keyPath:I8})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(p2)?e(r):(r.close(),await nY(),e(await fT()))})})}async function z3(t,e,n){const r=Rb(t,!0).put({[I8]:e,value:n});return new Lx(r).toPromise()}async function rY(t,e){const n=Rb(t,!1).get(e),r=await new Lx(n).toPromise();return r===void 0?null:r.value}function G3(t,e){const n=Rb(t,!0).delete(e);return new Lx(n).toPromise()}const sY=800,aY=3;class F8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fT(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lb._getInstance(eY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JW(),!this.activeServiceWorker)return;this.sender=new YW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fT();return await z3(e,m2,"1"),await G3(e,m2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>z3(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>G3(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Rb(s,!1).getAll();return new Lx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F8.type="LOCAL";const iY=F8;new Fx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t,e){return e?fA(e):(Xn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN extends BN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lY(t){return _8(t.auth,new FN(t),t.bypassAuthState)}function cY(t){const{auth:e,user:n}=t;return Xn(n,e,"internal-error"),UW(n,new FN(t),t.bypassAuthState)}async function uY(t){const{auth:e,user:n}=t;return Xn(n,e,"internal-error"),MW(n,new FN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lY;case"linkViaPopup":case"linkViaRedirect":return uY;case"reauthViaPopup":case"reauthViaRedirect":return cY;default:Wu(this.auth,"internal-error")}}resolve(e){CA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){CA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY=new Fx(2e3,1e4);class Rm extends D8{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Rm.currentPopupAction&&Rm.currentPopupAction.cancel(),Rm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xn(e,this.auth,"internal-error"),e}async onExecution(){CA(this.filter.length===1,"Popup operations only handle one event");const e=IN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Id(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Id(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Id(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dY.get())};e()}}Rm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY="pendingRedirect",_w=new Map;class fY extends D8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_w.get(this.auth._key());if(!e){try{const r=await hY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_w.set(this.auth._key(),e)}return this.bypassAuthState||_w.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hY(t,e){const n=gY(e),r=pY(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mY(t,e){_w.set(t._key(),e)}function pY(t){return fA(t._redirectPersistence)}function gY(t){return bw(AY,t.config.apiKey,t.name)}async function vY(t,e,n=!1){if(Au(t.app))return Promise.reject(Mf(t));const r=b0(t),s=oY(r,e),i=await new fY(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xY=600*1e3;class yY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!L8(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Id(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xY&&this.cachedEventUids.clear(),this.cachedEventUids.has(q3(e))}saveEventToCache(e){this.cachedEventUids.add(q3(e)),this.lastProcessedEventTime=Date.now()}}function q3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function L8({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L8(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bY(t,e={}){return DA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CY=/^https?/;async function EY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bY(t);for(const n of e)try{if(SY(n))return}catch{}Wu(t,"unauthorized-domain")}function SY(t){const e=uT(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!CY.test(n))return!1;if(_Y.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TY=new Fx(3e4,6e4);function K3(){const t=Fd().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NY(t){return new Promise((e,n)=>{var s,a,i;function r(){K3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K3(),n(Id(t,"network-request-failed"))},timeout:TY.get()})}if((a=(s=Fd().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=Fd().gapi)!=null&&i.load)r();else{const o=vW("iframefcb");return Fd()[o]=()=>{gapi.load?r():n(Id(t,"network-request-failed"))},v8(`${gW()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Cw=null,e})}let Cw=null;function BY(t){return Cw=Cw||NY(t),Cw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=new Fx(5e3,15e3),IY="__/auth/iframe",FY="emulator/auth/iframe",DY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RY(t){const e=t.config;Xn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?SN(e,FY):`https://${t.config.authDomain}/${IY}`,r={apiKey:e.apiKey,appName:t.name,v:kp},s=LY.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ix(r).slice(1)}`}async function PY(t){const e=await BY(t),n=Fd().gapi;return Xn(n,t,"internal-error"),e.open({where:document.body,url:RY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DY,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const i=Id(t,"network-request-failed"),o=Fd().setTimeout(()=>{a(i)},kY.get());function l(){Fd().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UY=500,OY=600,jY="_blank",HY="http://localhost";class $3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QY(t,e,n,r=UY,s=OY){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...MY,width:r.toString(),height:s.toString(),top:a,left:i},c=ll().toLowerCase();n&&(o=d8(c)?jY:n),c8(c)&&(e=e||HY,l.scrollbars="yes");const A=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(lW(c)&&o!=="_self")return VY(e||"",o),new $3(null);const h=window.open(e||"",o,A);Xn(h,t,"popup-blocked");try{h.focus()}catch{}return new $3(h)}function VY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY="__/auth/handler",GY="emulator/auth/handler",qY=encodeURIComponent("fac");async function W3(t,e,n,r,s,a){Xn(t.config.authDomain,t,"auth-domain-config-required"),Xn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kp,eventId:s};if(e instanceof w8){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",kK(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,h]of Object.entries({}))i[A]=h}if(e instanceof Dx){const A=e.getScopes().filter(h=>h!=="");A.length>0&&(i.scopes=A.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const A of Object.keys(o))o[A]===void 0&&delete o[A];const l=await t._getAppCheckToken(),c=l?`#${qY}=${encodeURIComponent(l)}`:"";return`${KY(t)}?${Ix(o).slice(1)}${c}`}function KY({config:t}){return t.emulator?SN(t,GY):`https://${t.authDomain}/${zY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="webStorageSupport";class $Y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N8,this._completeRedirectFn=vY,this._overrideRedirectResult=mY}async _openPopup(e,n,r,s){var i;CA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await W3(e,n,r,uT(),s);return QY(e,a,IN())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await W3(e,n,r,uT(),s);return XW(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(CA(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await PY(e),r=new yY(e);return n.register("authEvent",s=>(Xn(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xE,{type:xE},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[xE];a!==void 0&&n(!!a),Wu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p8()||u8()||NN()}}const WY=$Y;var Y3="@firebase/auth",X3="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Xn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JY(t){o0(new $f("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Xn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g8(t)},c=new hW(r,s,a,l);return CW(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),o0(new $f("auth-internal",e=>{const n=b0(e.getProvider("auth").getImmediate());return(r=>new YY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kd(Y3,X3,XY(t)),kd(Y3,X3,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY=300,eX=YU("authIdTokenMaxAge")||ZY;let J3=null;const tX=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eX)return;const s=n==null?void 0:n.token;J3!==s&&(J3=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function R8(t=CN()){const e=Ib(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_W(t,{popupRedirectResolver:WY,persistence:[iY,$W,N8]}),r=YU("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const i=tX(a.toString());zW(n,i,()=>i(n.currentUser)),VW(n,o=>i(o))}}const s=KU("auth");return s&&EW(n,`http://${s}`),n}function nX(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Id("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",nX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JY("Browser");var rX="firebase",sX="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kd(rX,sX,"app");var Z3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uf,P8;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function k(){}k.prototype=T.prototype,E.D=T.prototype,E.prototype=new k,E.prototype.constructor=E,E.C=function(z,M,U){for(var G=Array(arguments.length-2),q=2;q<arguments.length;q++)G[q-2]=arguments[q];return T.prototype[M].apply(z,G)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,T,k){k||(k=0);var z=Array(16);if(typeof T=="string")for(var M=0;16>M;++M)z[M]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(M=0;16>M;++M)z[M]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=E.g[0],k=E.g[1],M=E.g[2];var U=E.g[3],G=T+(U^k&(M^U))+z[0]+3614090360&4294967295;T=k+(G<<7&4294967295|G>>>25),G=U+(M^T&(k^M))+z[1]+3905402710&4294967295,U=T+(G<<12&4294967295|G>>>20),G=M+(k^U&(T^k))+z[2]+606105819&4294967295,M=U+(G<<17&4294967295|G>>>15),G=k+(T^M&(U^T))+z[3]+3250441966&4294967295,k=M+(G<<22&4294967295|G>>>10),G=T+(U^k&(M^U))+z[4]+4118548399&4294967295,T=k+(G<<7&4294967295|G>>>25),G=U+(M^T&(k^M))+z[5]+1200080426&4294967295,U=T+(G<<12&4294967295|G>>>20),G=M+(k^U&(T^k))+z[6]+2821735955&4294967295,M=U+(G<<17&4294967295|G>>>15),G=k+(T^M&(U^T))+z[7]+4249261313&4294967295,k=M+(G<<22&4294967295|G>>>10),G=T+(U^k&(M^U))+z[8]+1770035416&4294967295,T=k+(G<<7&4294967295|G>>>25),G=U+(M^T&(k^M))+z[9]+2336552879&4294967295,U=T+(G<<12&4294967295|G>>>20),G=M+(k^U&(T^k))+z[10]+4294925233&4294967295,M=U+(G<<17&4294967295|G>>>15),G=k+(T^M&(U^T))+z[11]+2304563134&4294967295,k=M+(G<<22&4294967295|G>>>10),G=T+(U^k&(M^U))+z[12]+1804603682&4294967295,T=k+(G<<7&4294967295|G>>>25),G=U+(M^T&(k^M))+z[13]+4254626195&4294967295,U=T+(G<<12&4294967295|G>>>20),G=M+(k^U&(T^k))+z[14]+2792965006&4294967295,M=U+(G<<17&4294967295|G>>>15),G=k+(T^M&(U^T))+z[15]+1236535329&4294967295,k=M+(G<<22&4294967295|G>>>10),G=T+(M^U&(k^M))+z[1]+4129170786&4294967295,T=k+(G<<5&4294967295|G>>>27),G=U+(k^M&(T^k))+z[6]+3225465664&4294967295,U=T+(G<<9&4294967295|G>>>23),G=M+(T^k&(U^T))+z[11]+643717713&4294967295,M=U+(G<<14&4294967295|G>>>18),G=k+(U^T&(M^U))+z[0]+3921069994&4294967295,k=M+(G<<20&4294967295|G>>>12),G=T+(M^U&(k^M))+z[5]+3593408605&4294967295,T=k+(G<<5&4294967295|G>>>27),G=U+(k^M&(T^k))+z[10]+38016083&4294967295,U=T+(G<<9&4294967295|G>>>23),G=M+(T^k&(U^T))+z[15]+3634488961&4294967295,M=U+(G<<14&4294967295|G>>>18),G=k+(U^T&(M^U))+z[4]+3889429448&4294967295,k=M+(G<<20&4294967295|G>>>12),G=T+(M^U&(k^M))+z[9]+568446438&4294967295,T=k+(G<<5&4294967295|G>>>27),G=U+(k^M&(T^k))+z[14]+3275163606&4294967295,U=T+(G<<9&4294967295|G>>>23),G=M+(T^k&(U^T))+z[3]+4107603335&4294967295,M=U+(G<<14&4294967295|G>>>18),G=k+(U^T&(M^U))+z[8]+1163531501&4294967295,k=M+(G<<20&4294967295|G>>>12),G=T+(M^U&(k^M))+z[13]+2850285829&4294967295,T=k+(G<<5&4294967295|G>>>27),G=U+(k^M&(T^k))+z[2]+4243563512&4294967295,U=T+(G<<9&4294967295|G>>>23),G=M+(T^k&(U^T))+z[7]+1735328473&4294967295,M=U+(G<<14&4294967295|G>>>18),G=k+(U^T&(M^U))+z[12]+2368359562&4294967295,k=M+(G<<20&4294967295|G>>>12),G=T+(k^M^U)+z[5]+4294588738&4294967295,T=k+(G<<4&4294967295|G>>>28),G=U+(T^k^M)+z[8]+2272392833&4294967295,U=T+(G<<11&4294967295|G>>>21),G=M+(U^T^k)+z[11]+1839030562&4294967295,M=U+(G<<16&4294967295|G>>>16),G=k+(M^U^T)+z[14]+4259657740&4294967295,k=M+(G<<23&4294967295|G>>>9),G=T+(k^M^U)+z[1]+2763975236&4294967295,T=k+(G<<4&4294967295|G>>>28),G=U+(T^k^M)+z[4]+1272893353&4294967295,U=T+(G<<11&4294967295|G>>>21),G=M+(U^T^k)+z[7]+4139469664&4294967295,M=U+(G<<16&4294967295|G>>>16),G=k+(M^U^T)+z[10]+3200236656&4294967295,k=M+(G<<23&4294967295|G>>>9),G=T+(k^M^U)+z[13]+681279174&4294967295,T=k+(G<<4&4294967295|G>>>28),G=U+(T^k^M)+z[0]+3936430074&4294967295,U=T+(G<<11&4294967295|G>>>21),G=M+(U^T^k)+z[3]+3572445317&4294967295,M=U+(G<<16&4294967295|G>>>16),G=k+(M^U^T)+z[6]+76029189&4294967295,k=M+(G<<23&4294967295|G>>>9),G=T+(k^M^U)+z[9]+3654602809&4294967295,T=k+(G<<4&4294967295|G>>>28),G=U+(T^k^M)+z[12]+3873151461&4294967295,U=T+(G<<11&4294967295|G>>>21),G=M+(U^T^k)+z[15]+530742520&4294967295,M=U+(G<<16&4294967295|G>>>16),G=k+(M^U^T)+z[2]+3299628645&4294967295,k=M+(G<<23&4294967295|G>>>9),G=T+(M^(k|~U))+z[0]+4096336452&4294967295,T=k+(G<<6&4294967295|G>>>26),G=U+(k^(T|~M))+z[7]+1126891415&4294967295,U=T+(G<<10&4294967295|G>>>22),G=M+(T^(U|~k))+z[14]+2878612391&4294967295,M=U+(G<<15&4294967295|G>>>17),G=k+(U^(M|~T))+z[5]+4237533241&4294967295,k=M+(G<<21&4294967295|G>>>11),G=T+(M^(k|~U))+z[12]+1700485571&4294967295,T=k+(G<<6&4294967295|G>>>26),G=U+(k^(T|~M))+z[3]+2399980690&4294967295,U=T+(G<<10&4294967295|G>>>22),G=M+(T^(U|~k))+z[10]+4293915773&4294967295,M=U+(G<<15&4294967295|G>>>17),G=k+(U^(M|~T))+z[1]+2240044497&4294967295,k=M+(G<<21&4294967295|G>>>11),G=T+(M^(k|~U))+z[8]+1873313359&4294967295,T=k+(G<<6&4294967295|G>>>26),G=U+(k^(T|~M))+z[15]+4264355552&4294967295,U=T+(G<<10&4294967295|G>>>22),G=M+(T^(U|~k))+z[6]+2734768916&4294967295,M=U+(G<<15&4294967295|G>>>17),G=k+(U^(M|~T))+z[13]+1309151649&4294967295,k=M+(G<<21&4294967295|G>>>11),G=T+(M^(k|~U))+z[4]+4149444226&4294967295,T=k+(G<<6&4294967295|G>>>26),G=U+(k^(T|~M))+z[11]+3174756917&4294967295,U=T+(G<<10&4294967295|G>>>22),G=M+(T^(U|~k))+z[2]+718787259&4294967295,M=U+(G<<15&4294967295|G>>>17),G=k+(U^(M|~T))+z[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(M+(G<<21&4294967295|G>>>11))&4294967295,E.g[2]=E.g[2]+M&4294967295,E.g[3]=E.g[3]+U&4294967295}r.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var k=T-this.blockSize,z=this.B,M=this.h,U=0;U<T;){if(M==0)for(;U<=k;)s(this,E,U),U+=this.blockSize;if(typeof E=="string"){for(;U<T;)if(z[M++]=E.charCodeAt(U++),M==this.blockSize){s(this,z),M=0;break}}else for(;U<T;)if(z[M++]=E[U++],M==this.blockSize){s(this,z),M=0;break}}this.h=M,this.o+=T},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var k=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=k&255,k/=256;for(this.u(E),E=Array(16),T=k=0;4>T;++T)for(var z=0;32>z;z+=8)E[k++]=this.g[T]>>>z&255;return E};function a(E,T){var k=o;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=T(E)}function i(E,T){this.h=T;for(var k=[],z=!0,M=E.length-1;0<=M;M--){var U=E[M]|0;z&&U==T||(k[M]=U,z=!1)}this.g=k}var o={};function l(E){return-128<=E&&128>E?a(E,function(T){return new i([T|0],0>T?-1:0)}):new i([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return S(c(-E));for(var T=[],k=1,z=0;E>=k;z++)T[z]=E/k|0,k*=4294967296;return new i(T,0)}function A(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return S(A(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(T,8)),z=h,M=0;M<E.length;M+=8){var U=Math.min(8,E.length-M),G=parseInt(E.substring(M,M+U),T);8>U?(U=c(Math.pow(T,U)),z=z.j(U).add(c(G))):(z=z.j(k),z=z.add(c(G)))}return z}var h=l(0),p=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(x(this))return-S(this).m();for(var E=0,T=1,k=0;k<this.g.length;k++){var z=this.i(k);E+=(0<=z?z:4294967296+z)*T,T*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(x(this))return"-"+S(this).toString(E);for(var T=c(Math.pow(E,6)),k=this,z="";;){var M=R(k,T).g;k=N(k,M.j(T));var U=((0<k.g.length?k.g[0]:k.h)>>>0).toString(E);if(k=M,w(k))return U+z;for(;6>U.length;)U="0"+U;z=U+z}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=N(this,E),x(E)?-1:w(E)?0:1};function S(E){for(var T=E.g.length,k=[],z=0;z<T;z++)k[z]=~E.g[z];return new i(k,~E.h).add(p)}t.abs=function(){return x(this)?S(this):this},t.add=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],z=0,M=0;M<=T;M++){var U=z+(this.i(M)&65535)+(E.i(M)&65535),G=(U>>>16)+(this.i(M)>>>16)+(E.i(M)>>>16);z=G>>>16,U&=65535,G&=65535,k[M]=G<<16|U}return new i(k,k[k.length-1]&-2147483648?-1:0)};function N(E,T){return E.add(S(T))}t.j=function(E){if(w(this)||w(E))return h;if(x(this))return x(E)?S(this).j(S(E)):S(S(this).j(E));if(x(E))return S(this.j(S(E)));if(0>this.l(g)&&0>E.l(g))return c(this.m()*E.m());for(var T=this.g.length+E.g.length,k=[],z=0;z<2*T;z++)k[z]=0;for(z=0;z<this.g.length;z++)for(var M=0;M<E.g.length;M++){var U=this.i(z)>>>16,G=this.i(z)&65535,q=E.i(M)>>>16,oe=E.i(M)&65535;k[2*z+2*M]+=G*oe,F(k,2*z+2*M),k[2*z+2*M+1]+=U*oe,F(k,2*z+2*M+1),k[2*z+2*M+1]+=G*q,F(k,2*z+2*M+1),k[2*z+2*M+2]+=U*q,F(k,2*z+2*M+2)}for(z=0;z<T;z++)k[z]=k[2*z+1]<<16|k[2*z];for(z=T;z<2*T;z++)k[z]=0;return new i(k,0)};function F(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function D(E,T){this.g=E,this.h=T}function R(E,T){if(w(T))throw Error("division by zero");if(w(E))return new D(h,h);if(x(E))return T=R(S(E),T),new D(S(T.g),S(T.h));if(x(T))return T=R(E,S(T)),new D(S(T.g),T.h);if(30<E.g.length){if(x(E)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var k=p,z=T;0>=z.l(E);)k=j(k),z=j(z);var M=P(k,1),U=P(z,1);for(z=P(z,2),k=P(k,2);!w(z);){var G=U.add(z);0>=G.l(E)&&(M=M.add(k),U=G),z=P(z,1),k=P(k,1)}return T=N(E,M.j(T)),new D(M,T)}for(M=h;0<=E.l(T);){for(k=Math.max(1,Math.floor(E.m()/T.m())),z=Math.ceil(Math.log(k)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),U=c(k),G=U.j(T);x(G)||0<G.l(E);)k-=z,U=c(k),G=U.j(T);w(U)&&(U=p),M=M.add(U),E=N(E,G)}return new D(M,E)}t.A=function(E){return R(this,E).h},t.and=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],z=0;z<T;z++)k[z]=this.i(z)&E.i(z);return new i(k,this.h&E.h)},t.or=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],z=0;z<T;z++)k[z]=this.i(z)|E.i(z);return new i(k,this.h|E.h)},t.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],z=0;z<T;z++)k[z]=this.i(z)^E.i(z);return new i(k,this.h^E.h)};function j(E){for(var T=E.g.length+1,k=[],z=0;z<T;z++)k[z]=E.i(z)<<1|E.i(z-1)>>>31;return new i(k,E.h)}function P(E,T){var k=T>>5;T%=32;for(var z=E.g.length-k,M=[],U=0;U<z;U++)M[U]=0<T?E.i(U+k)>>>T|E.i(U+k+1)<<32-T:E.i(U+k);return new i(M,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,P8=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=A,Uf=i}).apply(typeof Z3<"u"?Z3:typeof self<"u"?self:typeof window<"u"?window:{});var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M8,Yg,U8,Ew,hT,O8,j8,H8;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,ae,Ae){return I==Array.prototype||I==Object.prototype||(I[ae]=Ae.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof ly=="object"&&ly];for(var ae=0;ae<I.length;++ae){var Ae=I[ae];if(Ae&&Ae.Math==Math)return Ae}throw Error("Cannot find global object")}var r=n(this);function s(I,ae){if(ae)e:{var Ae=r;I=I.split(".");for(var Te=0;Te<I.length-1;Te++){var We=I[Te];if(!(We in Ae))break e;Ae=Ae[We]}I=I[I.length-1],Te=Ae[I],ae=ae(Te),ae!=Te&&ae!=null&&e(Ae,I,{configurable:!0,writable:!0,value:ae})}}function a(I,ae){I instanceof String&&(I+="");var Ae=0,Te=!1,We={next:function(){if(!Te&&Ae<I.length){var ot=Ae++;return{value:ae(ot,I[ot]),done:!1}}return Te=!0,{done:!0,value:void 0}}};return We[Symbol.iterator]=function(){return We},We}s("Array.prototype.values",function(I){return I||function(){return a(this,function(ae,Ae){return Ae})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(I){var ae=typeof I;return ae=ae!="object"?ae:I?Array.isArray(I)?"array":ae:"null",ae=="array"||ae=="object"&&typeof I.length=="number"}function c(I){var ae=typeof I;return ae=="object"&&I!=null||ae=="function"}function A(I,ae,Ae){return I.call.apply(I.bind,arguments)}function h(I,ae,Ae){if(!I)throw Error();if(2<arguments.length){var Te=Array.prototype.slice.call(arguments,2);return function(){var We=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(We,Te),I.apply(ae,We)}}return function(){return I.apply(ae,arguments)}}function p(I,ae,Ae){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:h,p.apply(null,arguments)}function g(I,ae){var Ae=Array.prototype.slice.call(arguments,1);return function(){var Te=Ae.slice();return Te.push.apply(Te,arguments),I.apply(this,Te)}}function w(I,ae){function Ae(){}Ae.prototype=ae.prototype,I.aa=ae.prototype,I.prototype=new Ae,I.prototype.constructor=I,I.Qb=function(Te,We,ot){for(var Pt=Array(arguments.length-2),Rn=2;Rn<arguments.length;Rn++)Pt[Rn-2]=arguments[Rn];return ae.prototype[We].apply(Te,Pt)}}function x(I){const ae=I.length;if(0<ae){const Ae=Array(ae);for(let Te=0;Te<ae;Te++)Ae[Te]=I[Te];return Ae}return[]}function S(I,ae){for(let Ae=1;Ae<arguments.length;Ae++){const Te=arguments[Ae];if(l(Te)){const We=I.length||0,ot=Te.length||0;I.length=We+ot;for(let Pt=0;Pt<ot;Pt++)I[We+Pt]=Te[Pt]}else I.push(Te)}}class N{constructor(ae,Ae){this.i=ae,this.j=Ae,this.h=0,this.g=null}get(){let ae;return 0<this.h?(this.h--,ae=this.g,this.g=ae.next,ae.next=null):ae=this.i(),ae}}function F(I){return/^[\s\xa0]*$/.test(I)}function D(){var I=o.navigator;return I&&(I=I.userAgent)?I:""}function R(I){return R[" "](I),I}R[" "]=function(){};var j=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function P(I,ae,Ae){for(const Te in I)ae.call(Ae,I[Te],Te,I)}function E(I,ae){for(const Ae in I)ae.call(void 0,I[Ae],Ae,I)}function T(I){const ae={};for(const Ae in I)ae[Ae]=I[Ae];return ae}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(I,ae){let Ae,Te;for(let We=1;We<arguments.length;We++){Te=arguments[We];for(Ae in Te)I[Ae]=Te[Ae];for(let ot=0;ot<k.length;ot++)Ae=k[ot],Object.prototype.hasOwnProperty.call(Te,Ae)&&(I[Ae]=Te[Ae])}}function M(I){var ae=1;I=I.split(":");const Ae=[];for(;0<ae&&I.length;)Ae.push(I.shift()),ae--;return I.length&&Ae.push(I.join(":")),Ae}function U(I){o.setTimeout(()=>{throw I},0)}function G(){var I=ne;let ae=null;return I.g&&(ae=I.g,I.g=I.g.next,I.g||(I.h=null),ae.next=null),ae}class q{constructor(){this.h=this.g=null}add(ae,Ae){const Te=oe.get();Te.set(ae,Ae),this.h?this.h.next=Te:this.g=Te,this.h=Te}}var oe=new N(()=>new ee,I=>I.reset());class ee{constructor(){this.next=this.g=this.h=null}set(ae,Ae){this.h=ae,this.g=Ae,this.next=null}reset(){this.next=this.g=this.h=null}}let le,K=!1,ne=new q,J=()=>{const I=o.Promise.resolve(void 0);le=()=>{I.then(ce)}};var ce=()=>{for(var I;I=G();){try{I.h.call(I.g)}catch(Ae){U(Ae)}var ae=oe;ae.j(I),100>ae.h&&(ae.h++,I.next=ae.g,ae.g=I)}K=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(I,ae){this.type=I,this.g=this.target=ae,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var I=!1,ae=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const Ae=()=>{};o.addEventListener("test",Ae,ae),o.removeEventListener("test",Ae,ae)}catch{}return I}();function ie(I,ae){if(Z.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var Ae=this.type=I.type,Te=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=ae,ae=I.relatedTarget){if(j){e:{try{R(ae.nodeName);var We=!0;break e}catch{}We=!1}We||(ae=null)}}else Ae=="mouseover"?ae=I.fromElement:Ae=="mouseout"&&(ae=I.toElement);this.relatedTarget=ae,Te?(this.clientX=Te.clientX!==void 0?Te.clientX:Te.pageX,this.clientY=Te.clientY!==void 0?Te.clientY:Te.pageY,this.screenX=Te.screenX||0,this.screenY=Te.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:fe[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&ie.aa.h.call(this)}}w(ie,Z);var fe={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),ge=0;function xe(I,ae,Ae,Te,We){this.listener=I,this.proxy=null,this.src=ae,this.type=Ae,this.capture=!!Te,this.ha=We,this.key=++ge,this.da=this.fa=!1}function ve(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function me(I){this.src=I,this.g={},this.h=0}me.prototype.add=function(I,ae,Ae,Te,We){var ot=I.toString();I=this.g[ot],I||(I=this.g[ot]=[],this.h++);var Pt=He(I,ae,Te,We);return-1<Pt?(ae=I[Pt],Ae||(ae.fa=!1)):(ae=new xe(ae,this.src,ot,!!Te,We),ae.fa=Ae,I.push(ae)),ae};function he(I,ae){var Ae=ae.type;if(Ae in I.g){var Te=I.g[Ae],We=Array.prototype.indexOf.call(Te,ae,void 0),ot;(ot=0<=We)&&Array.prototype.splice.call(Te,We,1),ot&&(ve(ae),I.g[Ae].length==0&&(delete I.g[Ae],I.h--))}}function He(I,ae,Ae,Te){for(var We=0;We<I.length;++We){var ot=I[We];if(!ot.da&&ot.listener==ae&&ot.capture==!!Ae&&ot.ha==Te)return We}return-1}var et="closure_lm_"+(1e6*Math.random()|0),Ue={};function Ie(I,ae,Ae,Te,We){if(Array.isArray(ae)){for(var ot=0;ot<ae.length;ot++)Ie(I,ae[ot],Ae,Te,We);return null}return Ae=cn(Ae),I&&I[Se]?I.K(ae,Ae,c(Te)?!!Te.capture:!1,We):je(I,ae,Ae,!1,Te,We)}function je(I,ae,Ae,Te,We,ot){if(!ae)throw Error("Invalid event type");var Pt=c(We)?!!We.capture:!!We,Rn=Vt(I);if(Rn||(I[et]=Rn=new me(I)),Ae=Rn.add(ae,Ae,Te,Pt,ot),Ae.proxy)return Ae;if(Te=Ke(),Ae.proxy=Te,Te.src=I,Te.listener=Ae,I.addEventListener)se||(We=Pt),We===void 0&&(We=!1),I.addEventListener(ae.toString(),Te,We);else if(I.attachEvent)I.attachEvent(Tt(ae.toString()),Te);else if(I.addListener&&I.removeListener)I.addListener(Te);else throw Error("addEventListener and attachEvent are unavailable.");return Ae}function Ke(){function I(Ae){return ae.call(I.src,I.listener,Ae)}const ae=vt;return I}function rt(I,ae,Ae,Te,We){if(Array.isArray(ae))for(var ot=0;ot<ae.length;ot++)rt(I,ae[ot],Ae,Te,We);else Te=c(Te)?!!Te.capture:!!Te,Ae=cn(Ae),I&&I[Se]?(I=I.i,ae=String(ae).toString(),ae in I.g&&(ot=I.g[ae],Ae=He(ot,Ae,Te,We),-1<Ae&&(ve(ot[Ae]),Array.prototype.splice.call(ot,Ae,1),ot.length==0&&(delete I.g[ae],I.h--)))):I&&(I=Vt(I))&&(ae=I.g[ae.toString()],I=-1,ae&&(I=He(ae,Ae,Te,We)),(Ae=-1<I?ae[I]:null)&&xt(Ae))}function xt(I){if(typeof I!="number"&&I&&!I.da){var ae=I.src;if(ae&&ae[Se])he(ae.i,I);else{var Ae=I.type,Te=I.proxy;ae.removeEventListener?ae.removeEventListener(Ae,Te,I.capture):ae.detachEvent?ae.detachEvent(Tt(Ae),Te):ae.addListener&&ae.removeListener&&ae.removeListener(Te),(Ae=Vt(ae))?(he(Ae,I),Ae.h==0&&(Ae.src=null,ae[et]=null)):ve(I)}}}function Tt(I){return I in Ue?Ue[I]:Ue[I]="on"+I}function vt(I,ae){if(I.da)I=!0;else{ae=new ie(ae,this);var Ae=I.listener,Te=I.ha||I.src;I.fa&&xt(I),I=Ae.call(Te,ae)}return I}function Vt(I){return I=I[et],I instanceof me?I:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(I){return typeof I=="function"?I:(I[Kt]||(I[Kt]=function(ae){return I.handleEvent(ae)}),I[Kt])}function Gt(){Q.call(this),this.i=new me(this),this.M=this,this.F=null}w(Gt,Q),Gt.prototype[Se]=!0,Gt.prototype.removeEventListener=function(I,ae,Ae,Te){rt(this,I,ae,Ae,Te)};function Wt(I,ae){var Ae,Te=I.F;if(Te)for(Ae=[];Te;Te=Te.F)Ae.push(Te);if(I=I.M,Te=ae.type||ae,typeof ae=="string")ae=new Z(ae,I);else if(ae instanceof Z)ae.target=ae.target||I;else{var We=ae;ae=new Z(Te,I),z(ae,We)}if(We=!0,Ae)for(var ot=Ae.length-1;0<=ot;ot--){var Pt=ae.g=Ae[ot];We=sn(Pt,Te,!0,ae)&&We}if(Pt=ae.g=I,We=sn(Pt,Te,!0,ae)&&We,We=sn(Pt,Te,!1,ae)&&We,Ae)for(ot=0;ot<Ae.length;ot++)Pt=ae.g=Ae[ot],We=sn(Pt,Te,!1,ae)&&We}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var I=this.i,ae;for(ae in I.g){for(var Ae=I.g[ae],Te=0;Te<Ae.length;Te++)ve(Ae[Te]);delete I.g[ae],I.h--}}this.F=null},Gt.prototype.K=function(I,ae,Ae,Te){return this.i.add(String(I),ae,!1,Ae,Te)},Gt.prototype.L=function(I,ae,Ae,Te){return this.i.add(String(I),ae,!0,Ae,Te)};function sn(I,ae,Ae,Te){if(ae=I.i.g[String(ae)],!ae)return!0;ae=ae.concat();for(var We=!0,ot=0;ot<ae.length;++ot){var Pt=ae[ot];if(Pt&&!Pt.da&&Pt.capture==Ae){var Rn=Pt.listener,yr=Pt.ha||Pt.src;Pt.fa&&he(I.i,Pt),We=Rn.call(yr,Te)!==!1&&We}}return We&&!Te.defaultPrevented}function Ht(I,ae,Ae){if(typeof I=="function")Ae&&(I=p(I,Ae));else if(I&&typeof I.handleEvent=="function")I=p(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(ae)?-1:o.setTimeout(I,ae||0)}function Qt(I){I.g=Ht(()=>{I.g=null,I.i&&(I.i=!1,Qt(I))},I.l);const ae=I.h;I.h=null,I.m.apply(null,ae)}class _t extends Q{constructor(ae,Ae){super(),this.m=ae,this.l=Ae,this.h=null,this.i=!1,this.g=null}j(ae){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hn(I){Q.call(this),this.h=I,this.g={}}w(Hn,Q);var dn=[];function kr(I){P(I.g,function(ae,Ae){this.g.hasOwnProperty(Ae)&&xt(ae)},I),I.g={}}Hn.prototype.N=function(){Hn.aa.N.call(this),kr(this)},Hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=o.JSON.stringify,ar=o.JSON.parse,Mr=class{stringify(I){return o.JSON.stringify(I,void 0)}parse(I){return o.JSON.parse(I,void 0)}};function nr(){}nr.prototype.h=null;function Sa(I){return I.h||(I.h=I.i())}function Cr(){}var hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ms(){Z.call(this,"d")}w(Ms,Z);function dr(){Z.call(this,"c")}w(dr,Z);var xn={},hr=null;function Ta(){return hr=hr||new Gt}xn.La="serverreachability";function ms(I){Z.call(this,xn.La,I)}w(ms,Z);function Ys(I){const ae=Ta();Wt(ae,new ms(ae))}xn.STAT_EVENT="statevent";function fa(I,ae){Z.call(this,xn.STAT_EVENT,I),this.stat=ae}w(fa,Z);function rn(I){const ae=Ta();Wt(ae,new fa(ae,I))}xn.Ma="timingevent";function Ur(I,ae){Z.call(this,xn.Ma,I),this.size=ae}w(Ur,Z);function Ir(I,ae){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){I()},ae)}function es(){this.g=!0}es.prototype.xa=function(){this.g=!1};function Er(I,ae,Ae,Te,We,ot){I.info(function(){if(I.g)if(ot)for(var Pt="",Rn=ot.split("&"),yr=0;yr<Rn.length;yr++){var Zn=Rn[yr].split("=");if(1<Zn.length){var lr=Zn[0];Zn=Zn[1];var Or=lr.split("_");Pt=2<=Or.length&&Or[1]=="type"?Pt+(lr+"="+Zn+"&"):Pt+(lr+"=redacted&")}}else Pt=null;else Pt=ot;return"XMLHTTP REQ ("+Te+") [attempt "+We+"]: "+ae+`
`+Ae+`
`+Pt})}function Yt(I,ae,Ae,Te,We,ot,Pt){I.info(function(){return"XMLHTTP RESP ("+Te+") [ attempt "+We+"]: "+ae+`
`+Ae+`
`+ot+" "+Pt})}function be(I,ae,Ae,Te){I.info(function(){return"XMLHTTP TEXT ("+ae+"): "+Fe(I,Ae)+(Te?" "+Te:"")})}function Pe(I,ae){I.info(function(){return"TIMEOUT: "+ae})}es.prototype.info=function(){};function Fe(I,ae){if(!I.g)return ae;if(!ae)return null;try{var Ae=JSON.parse(ae);if(Ae){for(I=0;I<Ae.length;I++)if(Array.isArray(Ae[I])){var Te=Ae[I];if(!(2>Te.length)){var We=Te[1];if(Array.isArray(We)&&!(1>We.length)){var ot=We[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Pt=1;Pt<We.length;Pt++)We[Pt]=""}}}}return Fn(Ae)}catch{return ae}}var De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Me;function tt(){}w(tt,nr),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},Me=new tt;function At(I,ae,Ae,Te){this.j=I,this.i=ae,this.l=Ae,this.R=Te||1,this.U=new Hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Je}function Je(){this.i=null,this.g="",this.h=!1}var at={},ct={};function Bt(I,ae,Ae){I.L=1,I.v=li(is(ae)),I.m=Ae,I.P=!0,jt(I,null)}function jt(I,ae){I.F=Date.now(),$t(I),I.A=is(I.v);var Ae=I.A,Te=I.R;Array.isArray(Te)||(Te=[String(Te)]),Ln(Ae.i,"t",Te),I.C=0,Ae=I.j.J,I.h=new Je,I.g=ye(I.j,Ae?ae:null,!I.m),0<I.O&&(I.M=new _t(p(I.Y,I,I.g),I.O)),ae=I.U,Ae=I.g,Te=I.ca;var We="readystatechange";Array.isArray(We)||(We&&(dn[0]=We.toString()),We=dn);for(var ot=0;ot<We.length;ot++){var Pt=Ie(Ae,We[ot],Te||ae.handleEvent,!1,ae.h||ae);if(!Pt)break;ae.g[Pt.key]=Pt}ae=I.H?T(I.H):{},I.m?(I.u||(I.u="POST"),ae["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,ae)):(I.u="GET",I.g.ea(I.A,I.u,null,ae)),Ys(),Er(I.i,I.u,I.A,I.l,I.R,I.m)}At.prototype.ca=function(I){I=I.target;const ae=this.M;ae&&Fs(I)==3?ae.j():this.Y(I)},At.prototype.Y=function(I){try{if(I==this.g)e:{const Or=Fs(this.g);var ae=this.g.Ba();const Po=this.g.Z();if(!(3>Or)&&(Or!=3||this.g&&(this.h.h||this.g.oa()||Cu(this.g)))){this.J||Or!=4||ae==7||(ae==8||0>=Po?Ys(3):Ys(2)),Ar(this);var Ae=this.g.Z();this.X=Ae;t:if(Jt(this)){var Te=Cu(this.g);I="";var We=Te.length,ot=Fs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),fr(this);var Pt="";break t}this.h.i=new o.TextDecoder}for(ae=0;ae<We;ae++)this.h.h=!0,I+=this.h.i.decode(Te[ae],{stream:!(ot&&ae==We-1)});Te.length=0,this.h.g+=I,this.C=0,Pt=this.h.g}else Pt=this.g.oa();if(this.o=Ae==200,Yt(this.i,this.u,this.A,this.l,this.R,Or,Ae),this.o){if(this.T&&!this.K){t:{if(this.g){var Rn,yr=this.g;if((Rn=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Rn)){var Zn=Rn;break t}}Zn=null}if(Ae=Zn)be(this.i,this.l,Ae,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hs(this,Ae);else{this.o=!1,this.s=3,rn(12),mr(this),fr(this);break e}}if(this.P){Ae=!0;let ts;for(;!this.J&&this.C<Pt.length;)if(ts=Ot(this,Pt),ts==ct){Or==4&&(this.s=4,rn(14),Ae=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(ts==at){this.s=4,rn(15),be(this.i,this.l,Pt,"[Invalid Chunk]"),Ae=!1;break}else be(this.i,this.l,ts,null),Hs(this,ts);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Or!=4||Pt.length!=0||this.h.h||(this.s=1,rn(16),Ae=!1),this.o=this.o&&Ae,!Ae)be(this.i,this.l,Pt,"[Invalid Chunked Response]"),mr(this),fr(this);else if(0<Pt.length&&!this.W){this.W=!0;var lr=this.j;lr.g==this&&lr.ba&&!lr.M&&(lr.j.info("Great, no buffering proxy detected. Bytes received: "+Pt.length),gl(lr),lr.M=!0,rn(11))}}else be(this.i,this.l,Pt,null),Hs(this,Pt);Or==4&&mr(this),this.o&&!this.J&&(Or==4?xl(this.j,this):(this.o=!1,$t(this)))}else Pl(this.g),Ae==400&&0<Pt.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),mr(this),fr(this)}}}catch{}finally{}};function Jt(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function Ot(I,ae){var Ae=I.C,Te=ae.indexOf(`
`,Ae);return Te==-1?ct:(Ae=Number(ae.substring(Ae,Te)),isNaN(Ae)?at:(Te+=1,Te+Ae>ae.length?ct:(ae=ae.slice(Te,Te+Ae),I.C=Te+Ae,ae)))}At.prototype.cancel=function(){this.J=!0,mr(this)};function $t(I){I.S=Date.now()+I.I,Cn(I,I.I)}function Cn(I,ae){if(I.B!=null)throw Error("WatchDog timer not null");I.B=Ir(p(I.ba,I),ae)}function Ar(I){I.B&&(o.clearTimeout(I.B),I.B=null)}At.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(Pe(this.i,this.A),this.L!=2&&(Ys(),rn(17)),mr(this),this.s=2,fr(this)):Cn(this,this.S-I)};function fr(I){I.j.G==0||I.J||xl(I.j,I)}function mr(I){Ar(I);var ae=I.M;ae&&typeof ae.ma=="function"&&ae.ma(),I.M=null,kr(I.U),I.g&&(ae=I.g,I.g=null,ae.abort(),ae.ma())}function Hs(I,ae){try{var Ae=I.j;if(Ae.G!=0&&(Ae.g==I||Mn(Ae.h,I))){if(!I.K&&Mn(Ae.h,I)&&Ae.G==3){try{var Te=Ae.Da.g.parse(ae)}catch{Te=null}if(Array.isArray(Te)&&Te.length==3){var We=Te;if(We[0]==0){e:if(!Ae.u){if(Ae.g)if(Ae.g.F+3e3<I.F)vl(Ae),Qc(Ae);else break e;Hl(Ae),rn(18)}}else Ae.za=We[1],0<Ae.za-Ae.T&&37500>We[2]&&Ae.F&&Ae.v==0&&!Ae.C&&(Ae.C=Ir(p(Ae.Za,Ae),6e3));if(1>=Us(Ae.h)&&Ae.ca){try{Ae.ca()}catch{}Ae.ca=void 0}}else di(Ae,11)}else if((I.K||Ae.g==I)&&vl(Ae),!F(ae))for(We=Ae.Da.g.parse(ae),ae=0;ae<We.length;ae++){let Zn=We[ae];if(Ae.T=Zn[0],Zn=Zn[1],Ae.G==2)if(Zn[0]=="c"){Ae.K=Zn[1],Ae.ia=Zn[2];const lr=Zn[3];lr!=null&&(Ae.la=lr,Ae.j.info("VER="+Ae.la));const Or=Zn[4];Or!=null&&(Ae.Aa=Or,Ae.j.info("SVER="+Ae.Aa));const Po=Zn[5];Po!=null&&typeof Po=="number"&&0<Po&&(Te=1.5*Po,Ae.L=Te,Ae.j.info("backChannelRequestTimeoutMs_="+Te)),Te=Ae;const ts=I.g;if(ts){const zi=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var ot=Te.h;ot.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Un(ot,ot.h),ot.h=null))}if(Te.D){const Fi=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Fi&&(Te.ya=Fi,Dn(Te.I,Te.D,Fi))}}Ae.G=3,Ae.l&&Ae.l.ua(),Ae.ba&&(Ae.R=Date.now()-I.F,Ae.j.info("Handshake RTT: "+Ae.R+"ms")),Te=Ae;var Pt=I;if(Te.qa=X(Te,Te.J?Te.ia:null,Te.W),Pt.K){Js(Te.h,Pt);var Rn=Pt,yr=Te.L;yr&&(Rn.I=yr),Rn.B&&(Ar(Rn),$t(Rn)),Te.g=Pt}else Ii(Te);0<Ae.i.length&&Ul(Ae)}else Zn[0]!="stop"&&Zn[0]!="close"||di(Ae,7);else Ae.G==3&&(Zn[0]=="stop"||Zn[0]=="close"?Zn[0]=="stop"?di(Ae,7):Ro(Ae):Zn[0]!="noop"&&Ae.l&&Ae.l.ta(Zn),Ae.v=0)}}Ys(4)}catch{}}var Na=class{constructor(I,ae){this.g=I,this.map=ae}};function Xs(I){this.l=I||10,o.PerformanceNavigationTiming?(I=o.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function Us(I){return I.h?1:I.g?I.g.size:0}function Mn(I,ae){return I.h?I.h==ae:I.g?I.g.has(ae):!1}function Un(I,ae){I.g?I.g.add(ae):I.h=ae}function Js(I,ae){I.h&&I.h==ae?I.h=null:I.g&&I.g.has(ae)&&I.g.delete(ae)}Xs.prototype.cancel=function(){if(this.i=lo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function lo(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let ae=I.i;for(const Ae of I.g.values())ae=ae.concat(Ae.D);return ae}return x(I.i)}function Al(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(l(I)){for(var ae=[],Ae=I.length,Te=0;Te<Ae;Te++)ae.push(I[Te]);return ae}ae=[],Ae=0;for(Te in I)ae[Ae++]=I[Te];return ae}function Do(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(l(I)||typeof I=="string"){var ae=[];I=I.length;for(var Ae=0;Ae<I;Ae++)ae.push(Ae);return ae}ae=[],Ae=0;for(const Te in I)ae[Ae++]=Te;return ae}}}function Vn(I,ae){if(I.forEach&&typeof I.forEach=="function")I.forEach(ae,void 0);else if(l(I)||typeof I=="string")Array.prototype.forEach.call(I,ae,void 0);else for(var Ae=Do(I),Te=Al(I),We=Te.length,ot=0;ot<We;ot++)ae.call(void 0,Te[ot],Ae&&Ae[ot],I)}var xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dl(I,ae){if(I){I=I.split("&");for(var Ae=0;Ae<I.length;Ae++){var Te=I[Ae].indexOf("="),We=null;if(0<=Te){var ot=I[Ae].substring(0,Te);We=I[Ae].substring(Te+1)}else ot=I[Ae];ae(ot,We?decodeURIComponent(We.replace(/\+/g," ")):"")}}}function Sr(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof Sr){this.h=I.h,Ll(this,I.j),this.o=I.o,this.g=I.g,co(this,I.s),this.l=I.l;var ae=I.i,Ae=new ji;Ae.i=ae.i,ae.g&&(Ae.g=new Map(ae.g),Ae.h=ae.h),Ba(this,Ae),this.m=I.m}else I&&(ae=String(I).match(xr))?(this.h=!1,Ll(this,ae[1]||"",!0),this.o=ka(ae[2]||""),this.g=ka(ae[3]||"",!0),co(this,ae[4]),this.l=ka(ae[5]||"",!0),Ba(this,ae[6]||"",!0),this.m=ka(ae[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Sr.prototype.toString=function(){var I=[],ae=this.j;ae&&I.push(Ni(ae,fl,!0),":");var Ae=this.g;return(Ae||ae=="file")&&(I.push("//"),(ae=this.o)&&I.push(Ni(ae,fl,!0),"@"),I.push(encodeURIComponent(String(Ae)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Ae=this.s,Ae!=null&&I.push(":",String(Ae))),(Ae=this.l)&&(this.g&&Ae.charAt(0)!="/"&&I.push("/"),I.push(Ni(Ae,Ae.charAt(0)=="/"?uo:uc,!0))),(Ae=this.i.toString())&&I.push("?",Ae),(Ae=this.m)&&I.push("#",Ni(Ae,Ao)),I.join("")};function is(I){return new Sr(I)}function Ll(I,ae,Ae){I.j=Ae?ka(ae,!0):ae,I.j&&(I.j=I.j.replace(/:$/,""))}function co(I,ae){if(ae){if(ae=Number(ae),isNaN(ae)||0>ae)throw Error("Bad port number "+ae);I.s=ae}else I.s=null}function Ba(I,ae,Ae){ae instanceof ji?(I.i=ae,Bi(I.i,I.h)):(Ae||(ae=Ni(ae,hl)),I.i=new ji(ae,I.h))}function Dn(I,ae,Ae){I.i.set(ae,Ae)}function li(I){return Dn(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function ka(I,ae){return I?ae?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function Ni(I,ae,Ae){return typeof I=="string"?(I=encodeURI(I).replace(ae,Hc),Ae&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function Hc(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var fl=/[#\/\?@]/g,uc=/[#\?:]/g,uo=/[#\?]/g,hl=/[#\?@]/g,Ao=/#/g;function ji(I,ae){this.h=this.g=null,this.i=I||null,this.j=!!ae}function $r(I){I.g||(I.g=new Map,I.h=0,I.i&&Dl(I.i,function(ae,Ae){I.add(decodeURIComponent(ae.replace(/\+/g," ")),Ae)}))}t=ji.prototype,t.add=function(I,ae){$r(this),this.i=null,I=bn(this,I);var Ae=this.g.get(I);return Ae||this.g.set(I,Ae=[]),Ae.push(ae),this.h+=1,this};function Lo(I,ae){$r(I),ae=bn(I,ae),I.g.has(ae)&&(I.i=null,I.h-=I.g.get(ae).length,I.g.delete(ae))}function Hi(I,ae){return $r(I),ae=bn(I,ae),I.g.has(ae)}t.forEach=function(I,ae){$r(this),this.g.forEach(function(Ae,Te){Ae.forEach(function(We){I.call(ae,We,Te,this)},this)},this)},t.na=function(){$r(this);const I=Array.from(this.g.values()),ae=Array.from(this.g.keys()),Ae=[];for(let Te=0;Te<ae.length;Te++){const We=I[Te];for(let ot=0;ot<We.length;ot++)Ae.push(ae[Te])}return Ae},t.V=function(I){$r(this);let ae=[];if(typeof I=="string")Hi(this,I)&&(ae=ae.concat(this.g.get(bn(this,I))));else{I=Array.from(this.g.values());for(let Ae=0;Ae<I.length;Ae++)ae=ae.concat(I[Ae])}return ae},t.set=function(I,ae){return $r(this),this.i=null,I=bn(this,I),Hi(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[ae]),this.h+=1,this},t.get=function(I,ae){return I?(I=this.V(I),0<I.length?String(I[0]):ae):ae};function Ln(I,ae,Ae){Lo(I,ae),0<Ae.length&&(I.i=null,I.g.set(bn(I,ae),x(Ae)),I.h+=Ae.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],ae=Array.from(this.g.keys());for(var Ae=0;Ae<ae.length;Ae++){var Te=ae[Ae];const ot=encodeURIComponent(String(Te)),Pt=this.V(Te);for(Te=0;Te<Pt.length;Te++){var We=ot;Pt[Te]!==""&&(We+="="+encodeURIComponent(String(Pt[Te]))),I.push(We)}}return this.i=I.join("&")};function bn(I,ae){return ae=String(ae),I.j&&(ae=ae.toLowerCase()),ae}function Bi(I,ae){ae&&!I.j&&($r(I),I.i=null,I.g.forEach(function(Ae,Te){var We=Te.toLowerCase();Te!=We&&(Lo(this,Te),Ln(this,We,Ae))},I)),I.j=ae}function ir(I,ae){const Ae=new es;if(o.Image){const Te=new Image;Te.onload=g(Ga,Ae,"TestLoadImage: loaded",!0,ae,Te),Te.onerror=g(Ga,Ae,"TestLoadImage: error",!1,ae,Te),Te.onabort=g(Ga,Ae,"TestLoadImage: abort",!1,ae,Te),Te.ontimeout=g(Ga,Ae,"TestLoadImage: timeout",!1,ae,Te),o.setTimeout(function(){Te.ontimeout&&Te.ontimeout()},1e4),Te.src=I}else ae(!1)}function ki(I,ae){const Ae=new es,Te=new AbortController,We=setTimeout(()=>{Te.abort(),Ga(Ae,"TestPingServer: timeout",!1,ae)},1e4);fetch(I,{signal:Te.signal}).then(ot=>{clearTimeout(We),ot.ok?Ga(Ae,"TestPingServer: ok",!0,ae):Ga(Ae,"TestPingServer: server error",!1,ae)}).catch(()=>{clearTimeout(We),Ga(Ae,"TestPingServer: error",!1,ae)})}function Ga(I,ae,Ae,Te,We){try{We&&(We.onload=null,We.onerror=null,We.onabort=null,We.ontimeout=null),Te(Ae)}catch{}}function Qi(){this.g=new Mr}function ci(I,ae,Ae){const Te=Ae||"";try{Vn(I,function(We,ot){let Pt=We;c(We)&&(Pt=Fn(We)),ae.push(Te+ot+"="+encodeURIComponent(Pt))})}catch(We){throw ae.push(Te+"type="+encodeURIComponent("_badmap")),We}}function ui(I){this.l=I.Ub||null,this.j=I.eb||!1}w(ui,nr),ui.prototype.g=function(){return new fo(this.l,this.j)},ui.prototype.i=function(I){return function(){return I}}({});function fo(I,ae){Gt.call(this),this.D=I,this.o=ae,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(fo,Gt),t=fo.prototype,t.open=function(I,ae){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=ae,this.readyState=1,Qs(this)},t.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ae={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(ae.body=I),(this.D||o).fetch(new Request(this.A,ae)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wr(this)),this.readyState=0},t.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ml(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function ml(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}t.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var ae=I.value?I.value:new Uint8Array(0);(ae=this.v.decode(ae,{stream:!I.done}))&&(this.response=this.responseText+=ae)}I.done?Wr(this):Qs(this),this.readyState==3&&ml(this)}},t.Ra=function(I){this.g&&(this.response=this.responseText=I,Wr(this))},t.Qa=function(I){this.g&&(this.response=I,Wr(this))},t.ga=function(){this.g&&Wr(this)};function Wr(I){I.readyState=4,I.l=null,I.j=null,I.v=null,Qs(I)}t.setRequestHeader=function(I,ae){this.u.append(I,ae)},t.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],ae=this.h.entries();for(var Ae=ae.next();!Ae.done;)Ae=Ae.value,I.push(Ae[0]+": "+Ae[1]),Ae=ae.next();return I.join(`\r
`)};function Qs(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function ho(I){let ae="";return P(I,function(Ae,Te){ae+=Te,ae+=":",ae+=Ae,ae+=`\r
`}),ae}function Zs(I,ae,Ae){e:{for(Te in Ae){var Te=!1;break e}Te=!0}Te||(Ae=ho(Ae),typeof I=="string"?Ae!=null&&encodeURIComponent(String(Ae)):Dn(I,ae,Ae))}function Tr(I){Gt.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Tr,Gt);var pl=/^https?$/i,Vi=["POST","PUT"];t=Tr.prototype,t.Ha=function(I){this.J=I},t.ea=function(I,ae,Ae,Te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);ae=ae?ae.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Me.g(),this.v=this.o?Sa(this.o):Sa(Me),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(ae,String(I),!0),this.B=!1}catch(ot){_u(this,ot);return}if(I=Ae||"",Ae=new Map(this.headers),Te)if(Object.getPrototypeOf(Te)===Object.prototype)for(var We in Te)Ae.set(We,Te[We]);else if(typeof Te.keys=="function"&&typeof Te.get=="function")for(const ot of Te.keys())Ae.set(ot,Te.get(ot));else throw Error("Unknown input type for opt_headers: "+String(Te));Te=Array.from(Ae.keys()).find(ot=>ot.toLowerCase()=="content-type"),We=o.FormData&&I instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Vi,ae,void 0))||Te||We||Ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Pt]of Ae)this.g.setRequestHeader(ot,Pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ps(this),this.u=!0,this.g.send(I),this.u=!1}catch(ot){_u(this,ot)}};function _u(I,ae){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=ae,I.m=5,Rl(I),mo(I)}function Rl(I){I.A||(I.A=!0,Wt(I,"complete"),Wt(I,"error"))}t.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Wt(this,"complete"),Wt(this,"abort"),mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mo(this,!0)),Tr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rr(this):this.bb())},t.bb=function(){rr(this)};function rr(I){if(I.h&&typeof i<"u"&&(!I.v[1]||Fs(I)!=4||I.Z()!=2)){if(I.u&&Fs(I)==4)Ht(I.Ea,0,I);else if(Wt(I,"readystatechange"),Fs(I)==4){I.h=!1;try{const Pt=I.Z();e:switch(Pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ae=!0;break e;default:ae=!1}var Ae;if(!(Ae=ae)){var Te;if(Te=Pt===0){var We=String(I.D).match(xr)[1]||null;!We&&o.self&&o.self.location&&(We=o.self.location.protocol.slice(0,-1)),Te=!pl.test(We?We.toLowerCase():"")}Ae=Te}if(Ae)Wt(I,"complete"),Wt(I,"success");else{I.m=6;try{var ot=2<Fs(I)?I.g.statusText:""}catch{ot=""}I.l=ot+" ["+I.Z()+"]",Rl(I)}}finally{mo(I)}}}}function mo(I,ae){if(I.g){ps(I);const Ae=I.g,Te=I.v[0]?()=>{}:null;I.g=null,I.v=null,ae||Wt(I,"ready");try{Ae.onreadystatechange=Te}catch{}}}function ps(I){I.I&&(o.clearTimeout(I.I),I.I=null)}t.isActive=function(){return!!this.g};function Fs(I){return I.g?I.g.readyState:0}t.Z=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(I){if(this.g){var ae=this.g.responseText;return I&&ae.indexOf(I)==0&&(ae=ae.substring(I.length)),ar(ae)}};function Cu(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function Pl(I){const ae={};I=(I.g&&2<=Fs(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let Te=0;Te<I.length;Te++){if(F(I[Te]))continue;var Ae=M(I[Te]);const We=Ae[0];if(Ae=Ae[1],typeof Ae!="string")continue;Ae=Ae.trim();const ot=ae[We]||[];ae[We]=ot,ot.push(Ae)}E(ae,function(Te){return Te.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(I,ae,Ae){return Ae&&Ae.internalChannelParams&&Ae.internalChannelParams[I]||ae}function Ml(I){this.Aa=0,this.i=[],this.j=new es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,I),this.cb=ma("retryDelaySeedMs",1e4,I),this.Wa=ma("forwardChannelMaxRetries",2,I),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new Xs(I&&I.concurrentRequestLimit),this.Da=new Qi,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ml.prototype,t.la=8,t.G=1,t.connect=function(I,ae,Ae,Te){rn(0),this.W=I,this.H=ae||{},Ae&&Te!==void 0&&(this.H.OSID=Ae,this.H.OAID=Te),this.F=this.X,this.I=X(this,null,this.W),Ul(this)};function Ro(I){if(dc(I),I.G==3){var ae=I.U++,Ae=is(I.I);if(Dn(Ae,"SID",I.K),Dn(Ae,"RID",ae),Dn(Ae,"TYPE","terminate"),Ol(I,Ae),ae=new At(I,I.j,ae),ae.L=2,ae.v=li(is(Ae)),Ae=!1,o.navigator&&o.navigator.sendBeacon)try{Ae=o.navigator.sendBeacon(ae.v.toString(),"")}catch{}!Ae&&o.Image&&(new Image().src=ae.v,Ae=!0),Ae||(ae.g=ye(ae.j,null),ae.g.ea(ae.v)),ae.F=Date.now(),$t(ae)}zc(I)}function Qc(I){I.g&&(gl(I),I.g.cancel(),I.g=null)}function dc(I){Qc(I),I.u&&(o.clearTimeout(I.u),I.u=null),vl(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&o.clearTimeout(I.s),I.s=null)}function Ul(I){if(!ha(I.h)&&!I.s){I.s=!0;var ae=I.Ga;le||J(),K||(le(),K=!0),ne.add(ae,I),I.B=0}}function Eu(I,ae){return Us(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=ae.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=Ir(p(I.Ga,I,ae),Ql(I,I.B)),I.B++,!0)}t.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const We=new At(this,this.j,I);let ot=this.o;if(this.S&&(ot?(ot=T(ot),z(ot,this.S)):ot=this.S),this.m!==null||this.O||(We.H=ot,ot=null),this.P)e:{for(var ae=0,Ae=0;Ae<this.i.length;Ae++){t:{var Te=this.i[Ae];if("__data__"in Te.map&&(Te=Te.map.__data__,typeof Te=="string")){Te=Te.length;break t}Te=void 0}if(Te===void 0)break;if(ae+=Te,4096<ae){ae=Ae;break e}if(ae===4096||Ae===this.i.length-1){ae=Ae+1;break e}}ae=1e3}else ae=1e3;ae=jl(this,We,ae),Ae=is(this.I),Dn(Ae,"RID",I),Dn(Ae,"CVER",22),this.D&&Dn(Ae,"X-HTTP-Session-Id",this.D),Ol(this,Ae),ot&&(this.O?ae="headers="+encodeURIComponent(String(ho(ot)))+"&"+ae:this.m&&Zs(Ae,this.m,ot)),Un(this.h,We),this.Ua&&Dn(Ae,"TYPE","init"),this.P?(Dn(Ae,"$req",ae),Dn(Ae,"SID","null"),We.T=!0,Bt(We,Ae,null)):Bt(We,Ae,ae),this.G=2}}else this.G==3&&(I?Ia(this,I):this.i.length==0||ha(this.h)||Ia(this))};function Ia(I,ae){var Ae;ae?Ae=ae.l:Ae=I.U++;const Te=is(I.I);Dn(Te,"SID",I.K),Dn(Te,"RID",Ae),Dn(Te,"AID",I.T),Ol(I,Te),I.m&&I.o&&Zs(Te,I.m,I.o),Ae=new At(I,I.j,Ae,I.B+1),I.m===null&&(Ae.H=I.o),ae&&(I.i=ae.D.concat(I.i)),ae=jl(I,Ae,1e3),Ae.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),Un(I.h,Ae),Bt(Ae,Te,ae)}function Ol(I,ae){I.H&&P(I.H,function(Ae,Te){Dn(ae,Te,Ae)}),I.l&&Vn({},function(Ae,Te){Dn(ae,Te,Ae)})}function jl(I,ae,Ae){Ae=Math.min(I.i.length,Ae);var Te=I.l?p(I.l.Na,I.l,I):null;e:{var We=I.i;let ot=-1;for(;;){const Pt=["count="+Ae];ot==-1?0<Ae?(ot=We[0].g,Pt.push("ofs="+ot)):ot=0:Pt.push("ofs="+ot);let Rn=!0;for(let yr=0;yr<Ae;yr++){let Zn=We[yr].g;const lr=We[yr].map;if(Zn-=ot,0>Zn)ot=Math.max(0,We[yr].g-100),Rn=!1;else try{ci(lr,Pt,"req"+Zn+"_")}catch{Te&&Te(lr)}}if(Rn){Te=Pt.join("&");break e}}}return I=I.i.splice(0,Ae),ae.D=I,Te}function Ii(I){if(!I.g&&!I.u){I.Y=1;var ae=I.Fa;le||J(),K||(le(),K=!0),ne.add(ae,I),I.v=0}}function Hl(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=Ir(p(I.Fa,I),Ql(I,I.v)),I.v++,!0)}t.Fa=function(){if(this.u=null,Vc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Ir(p(this.ab,this),I)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),Qc(this),Vc(this))};function gl(I){I.A!=null&&(o.clearTimeout(I.A),I.A=null)}function Vc(I){I.g=new At(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var ae=is(I.qa);Dn(ae,"RID","rpc"),Dn(ae,"SID",I.K),Dn(ae,"AID",I.T),Dn(ae,"CI",I.F?"0":"1"),!I.F&&I.ja&&Dn(ae,"TO",I.ja),Dn(ae,"TYPE","xmlhttp"),Ol(I,ae),I.m&&I.o&&Zs(ae,I.m,I.o),I.L&&(I.g.I=I.L);var Ae=I.g;I=I.ia,Ae.L=1,Ae.v=li(is(ae)),Ae.m=null,Ae.P=!0,jt(Ae,I)}t.Za=function(){this.C!=null&&(this.C=null,Qc(this),Hl(this),rn(19))};function vl(I){I.C!=null&&(o.clearTimeout(I.C),I.C=null)}function xl(I,ae){var Ae=null;if(I.g==ae){vl(I),gl(I),I.g=null;var Te=2}else if(Mn(I.h,ae))Ae=ae.D,Js(I.h,ae),Te=1;else return;if(I.G!=0){if(ae.o)if(Te==1){Ae=ae.m?ae.m.length:0,ae=Date.now()-ae.F;var We=I.B;Te=Ta(),Wt(Te,new Ur(Te,Ae)),Ul(I)}else Ii(I);else if(We=ae.s,We==3||We==0&&0<ae.X||!(Te==1&&Eu(I,ae)||Te==2&&Hl(I)))switch(Ae&&0<Ae.length&&(ae=I.h,ae.i=ae.i.concat(Ae)),We){case 1:di(I,5);break;case 4:di(I,10);break;case 3:di(I,6);break;default:di(I,2)}}}function Ql(I,ae){let Ae=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(Ae*=2),Ae*ae}function di(I,ae){if(I.j.info("Error code "+ae),ae==2){var Ae=p(I.fb,I),Te=I.Xa;const We=!Te;Te=new Sr(Te||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ll(Te,"https"),li(Te),We?ir(Te.toString(),Ae):ki(Te.toString(),Ae)}else rn(2);I.G=0,I.l&&I.l.sa(ae),zc(I),dc(I)}t.fb=function(I){I?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function zc(I){if(I.G=0,I.ka=[],I.l){const ae=lo(I.h);(ae.length!=0||I.i.length!=0)&&(S(I.ka,ae),S(I.ka,I.i),I.h.i.length=0,x(I.i),I.i.length=0),I.l.ra()}}function X(I,ae,Ae){var Te=Ae instanceof Sr?is(Ae):new Sr(Ae);if(Te.g!="")ae&&(Te.g=ae+"."+Te.g),co(Te,Te.s);else{var We=o.location;Te=We.protocol,ae=ae?ae+"."+We.hostname:We.hostname,We=+We.port;var ot=new Sr(null);Te&&Ll(ot,Te),ae&&(ot.g=ae),We&&co(ot,We),Ae&&(ot.l=Ae),Te=ot}return Ae=I.D,ae=I.ya,Ae&&ae&&Dn(Te,Ae,ae),Dn(Te,"VER",I.la),Ol(I,Te),Te}function ye(I,ae,Ae){if(ae&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return ae=I.Ca&&!I.pa?new Tr(new ui({eb:Ae})):new Tr(I.pa),ae.Ha(I.J),ae}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oe(){}t=Oe.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ze(){}ze.prototype.g=function(I,ae){return new Xe(I,ae)};function Xe(I,ae){Gt.call(this),this.g=new Ml(ae),this.l=I,this.h=ae&&ae.messageUrlParams||null,I=ae&&ae.messageHeaders||null,ae&&ae.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=ae&&ae.initMessageHeaders||null,ae&&ae.messageContentType&&(I?I["X-WebChannel-Content-Type"]=ae.messageContentType:I={"X-WebChannel-Content-Type":ae.messageContentType}),ae&&ae.va&&(I?I["X-WebChannel-Client-Profile"]=ae.va:I={"X-WebChannel-Client-Profile":ae.va}),this.g.S=I,(I=ae&&ae.Sb)&&!F(I)&&(this.g.m=I),this.v=ae&&ae.supportsCrossDomainXhr||!1,this.u=ae&&ae.sendRawJson||!1,(ae=ae&&ae.httpSessionIdParam)&&!F(ae)&&(this.g.D=ae,I=this.h,I!==null&&ae in I&&(I=this.h,ae in I&&delete I[ae])),this.j=new qt(this)}w(Xe,Gt),Xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xe.prototype.close=function(){Ro(this.g)},Xe.prototype.o=function(I){var ae=this.g;if(typeof I=="string"){var Ae={};Ae.__data__=I,I=Ae}else this.u&&(Ae={},Ae.__data__=Fn(I),I=Ae);ae.i.push(new Na(ae.Ya++,I)),ae.G==3&&Ul(ae)},Xe.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,Xe.aa.N.call(this)};function gt(I){Ms.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var ae=I.__sm__;if(ae){e:{for(const Ae in ae){I=Ae;break e}I=void 0}(this.i=I)&&(I=this.i,ae=ae!==null&&I in ae?ae[I]:void 0),this.data=ae}else this.data=I}w(gt,Ms);function Rt(){dr.call(this),this.status=1}w(Rt,dr);function qt(I){this.g=I}w(qt,Oe),qt.prototype.ua=function(){Wt(this.g,"a")},qt.prototype.ta=function(I){Wt(this.g,new gt(I))},qt.prototype.sa=function(I){Wt(this.g,new Rt)},qt.prototype.ra=function(){Wt(this.g,"b")},ze.prototype.createWebChannel=ze.prototype.g,Xe.prototype.send=Xe.prototype.o,Xe.prototype.open=Xe.prototype.m,Xe.prototype.close=Xe.prototype.close,H8=function(){return new ze},j8=function(){return Ta()},O8=xn,hT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Ew=De,Le.COMPLETE="complete",U8=Le,Cr.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,Yg=Cr,Tr.prototype.listenOnce=Tr.prototype.L,Tr.prototype.getLastError=Tr.prototype.Ka,Tr.prototype.getLastErrorCode=Tr.prototype.Ba,Tr.prototype.getStatus=Tr.prototype.Z,Tr.prototype.getResponseJson=Tr.prototype.Oa,Tr.prototype.getResponseText=Tr.prototype.oa,Tr.prototype.send=Tr.prototype.ea,Tr.prototype.setWithCredentials=Tr.prototype.Ha,M8=Tr}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});const eF="@firebase/firestore",tF="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xo.UNAUTHENTICATED=new Xo(null),Xo.GOOGLE_CREDENTIALS=new Xo("google-credentials-uid"),Xo.FIRST_PARTY=new Xo("first-party-uid"),Xo.MOCK_USER=new Xo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new wN("@firebase/firestore");function Sm(){return c0.logLevel}function hn(t,...e){if(c0.logLevel<=zr.DEBUG){const n=e.map(DN);c0.debug(`Firestore (${Fp}): ${t}`,...n)}}function EA(t,...e){if(c0.logLevel<=zr.ERROR){const n=e.map(DN);c0.error(`Firestore (${Fp}): ${t}`,...n)}}function Ap(t,...e){if(c0.logLevel<=zr.WARN){const n=e.map(DN);c0.warn(`Firestore (${Fp}): ${t}`,...n)}}function DN(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Q8(t,r,n)}function Q8(t,e,n){let r=`FIRESTORE (${Fp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw EA(r),new Error(r)}function ws(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Q8(e,s,r)}function ur(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class on extends Qd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xo.UNAUTHENTICATED))}shutdown(){}}class iX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oX{constructor(e){this.t=e,this.currentUser=Xo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ws(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new gA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gA)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ws(typeof r.accessToken=="string",31837,{l:r}),new V8(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ws(e===null||typeof e=="string",2055,{h:e}),new Xo(e)}}class lX{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cX{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lX(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uX{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Au(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ws(this.o===void 0,3512);const r=a=>{a.error!=null&&hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,hn("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nF(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ws(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dX(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Gr(t,e){return t<e?-1:t>e?1:0}function mT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return yE(s)===yE(a)?Gr(s,a):yE(s)?1:-1}return Gr(t.length,e.length)}const AX=55296,fX=57343;function yE(t){const e=t.charCodeAt(0);return e>=AX&&e<=fX}function fp(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="__name__";class _d{constructor(e,n,r){n===void 0?n=0:n>e.length&&Jn(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Jn(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _d.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=_d.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Gr(e.length,n.length)}static compareSegments(e,n){const r=_d.isNumericId(e),s=_d.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?_d.extractNumericId(e).compare(_d.extractNumericId(n)):mT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uf.fromString(e.substring(4,e.length-2))}}class $s extends _d{construct(e,n,r){return new $s(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new on(St.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $s(n)}static emptyPath(){return new $s([])}}const hX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class No extends _d{construct(e,n,r){return new No(e,n,r)}static isValidIdentifier(e){return hX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),No.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rF}static keyField(){return new No([rF])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new on(St.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new on(St.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new on(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(a(),s++)}if(a(),i)throw new on(St.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new No(n)}static emptyPath(){return new No([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.path=e}static fromPath(e){return new kn($s.fromString(e))}static fromName(e){return new kn($s.fromString(e).popFirst(5))}static empty(){return new kn($s.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$s.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $s.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kn(new $s(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t,e,n){if(!n)throw new on(St.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mX(t,e,n,r){if(e===!0&&r===!0)throw new on(St.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sF(t){if(!kn.isDocumentKey(t))throw new on(St.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aF(t){if(kn.isDocumentKey(t))throw new on(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function G8(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Jn(12329,{type:typeof t})}function Bl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new on(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pb(t);throw new on(St.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pX(t,e){if(e<=0)throw new on(St.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,e){const n={typeString:t};return e&&(n.value=e),n}function Rx(t,e){if(!G8(t))throw new on(St.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(s&&typeof i!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new on(St.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=-62135596800,oF=1e6;class Nn{static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oF);return new Nn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new on(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new on(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iF)throw new on(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new on(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oF}_compareTo(e){return this.seconds===e.seconds?Gr(this.nanoseconds,e.nanoseconds):Gr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rx(e,Nn._jsonSchema))return new Nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nn._jsonSchemaVersion="firestore/timestamp/1.0",Nn._jsonSchema={type:Ci("string",Nn._jsonSchemaVersion),seconds:Ci("number"),nanoseconds:Ci("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{static fromTimestamp(e){return new or(e)}static min(){return new or(new Nn(0,0))}static max(){return new or(new Nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-1;function gX(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=or.fromTimestamp(r===1e9?new Nn(n+1,0):new Nn(n,r));return new Wf(s,kn.empty(),e)}function vX(t){return new Wf(t.readTime,t.key,Gv)}class Wf{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wf(or.min(),kn.empty(),Gv)}static max(){return new Wf(or.max(),kn.empty(),Gv)}}function xX(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=kn.comparator(t.documentKey,e.documentKey),n!==0?n:Gr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){if(t.code!==St.FAILED_PRECONDITION||t.message!==yX)throw t;hn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Jn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Lt((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Lt?n:Lt.resolve(n)}catch(n){return Lt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Lt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Lt.reject(n)}static resolve(e){return new Lt((n,r)=>{n(e)})}static reject(e){return new Lt((n,r)=>{r(e)})}static waitFor(e){return new Lt((n,r)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&n()},l=>r(l))}),i=!0,a===s&&n()})}static or(e){let n=Lt.resolve(!1);for(const r of e)n=n.next(s=>s?Lt.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Lt((r,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const c=l;n(e[c]).next(A=>{i[c]=A,++o,o===a&&r(i)},A=>s(A))}})}static doWhile(e,n){return new Lt((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function bX(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mb.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=-1;function Ub(t){return t==null}function g2(t){return t===0&&1/t==-1/0}function _X(t){return typeof t=="number"&&Number.isInteger(t)&&!g2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="";function CX(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lF(e)),e=EX(t.get(n),e);return lF(e)}function EX(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case q8:n+="";break;default:n+=a}}return n}function lF(t){return t+q8+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ch(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.comparator=e,this.root=n||So.EMPTY}insert(e,n){return new Ca(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,So.BLACK,null,null))}remove(e){return new Ca(this.comparator,this.root.remove(e,this.comparator).copy(null,null,So.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cy(this.root,e,this.comparator,!1)}getReverseIterator(){return new cy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cy(this.root,e,this.comparator,!0)}}class cy{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class So{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??So.RED,this.left=s??So.EMPTY,this.right=a??So.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new So(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return So.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Jn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Jn(27949);return e+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1;So.EMPTY=new class{constructor(){this.size=0}get key(){throw Jn(57766)}get value(){throw Jn(16141)}get color(){throw Jn(16727)}get left(){throw Jn(29726)}get right(){throw Jn(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new So(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.comparator=e,this.data=new Ca(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uF(this.data.getIterator())}getIteratorFrom(e){return new uF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ui(this.comparator);return n.data=e,n}}class uF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.fields=e,e.sort(No.comparator)}static empty(){return new Lc([])}unionWith(e){let n=new Ui(No.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lc(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fp(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $8("Invalid base64 string: "+a):a}}(e);return new Io(n)}static fromUint8Array(e){const n=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new Io(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Io.EMPTY_BYTE_STRING=new Io("");const SX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yf(t){if(ws(!!t,39018),typeof t=="string"){let e=0;const n=SX.exec(t);if(ws(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ti(t.seconds),nanos:ti(t.nanos)}}function ti(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xf(t){return typeof t=="string"?Io.fromBase64String(t):Io.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="server_timestamp",Y8="__type__",X8="__previous_value__",J8="__local_write_time__";function PN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Y8])==null?void 0:r.stringValue)===W8}function Ob(t){const e=t.mapValue.fields[X8];return PN(e)?Ob(e):e}function qv(t){const e=Yf(t.mapValue.fields[J8].timestampValue);return new Nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(e,n,r,s,a,i,o,l,c,A){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=A}}const v2="(default)";class Kv{constructor(e,n){this.projectId=e,this.database=n||v2}static empty(){return new Kv("","")}get isDefaultDatabase(){return this.database===v2}isEqual(e){return e instanceof Kv&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="__type__",NX="__max__",uy={mapValue:{}},eO="__vector__",x2="value";function Jf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?PN(t)?4:kX(t)?9007199254740991:BX(t)?10:11:Jn(28295,{value:t})}function jd(t,e){if(t===e)return!0;const n=Jf(t);if(n!==Jf(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qv(t).isEqual(qv(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=Yf(s.timestampValue),o=Yf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Xf(s.bytesValue).isEqual(Xf(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return ti(s.geoPointValue.latitude)===ti(a.geoPointValue.latitude)&&ti(s.geoPointValue.longitude)===ti(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return ti(s.integerValue)===ti(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=ti(s.doubleValue),o=ti(a.doubleValue);return i===o?g2(i)===g2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return fp(t.arrayValue.values||[],e.arrayValue.values||[],jd);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(cF(i)!==cF(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!jd(i[l],o[l])))return!1;return!0}(t,e);default:return Jn(52216,{left:t})}}function $v(t,e){return(t.values||[]).find(n=>jd(n,e))!==void 0}function hp(t,e){if(t===e)return 0;const n=Jf(t),r=Jf(e);if(n!==r)return Gr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gr(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=ti(a.integerValue||a.doubleValue),l=ti(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return dF(t.timestampValue,e.timestampValue);case 4:return dF(qv(t),qv(e));case 5:return mT(t.stringValue,e.stringValue);case 6:return function(a,i){const o=Xf(a),l=Xf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let c=0;c<o.length&&c<l.length;c++){const A=Gr(o[c],l[c]);if(A!==0)return A}return Gr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=Gr(ti(a.latitude),ti(i.latitude));return o!==0?o:Gr(ti(a.longitude),ti(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return AF(t.arrayValue,e.arrayValue);case 10:return function(a,i){var p,g,w,x;const o=a.fields||{},l=i.fields||{},c=(p=o[x2])==null?void 0:p.arrayValue,A=(g=l[x2])==null?void 0:g.arrayValue,h=Gr(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((x=A==null?void 0:A.values)==null?void 0:x.length)||0);return h!==0?h:AF(c,A)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===uy.mapValue&&i===uy.mapValue)return 0;if(a===uy.mapValue)return 1;if(i===uy.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),c=i.fields||{},A=Object.keys(c);l.sort(),A.sort();for(let h=0;h<l.length&&h<A.length;++h){const p=mT(l[h],A[h]);if(p!==0)return p;const g=hp(o[l[h]],c[A[h]]);if(g!==0)return g}return Gr(l.length,A.length)}(t.mapValue,e.mapValue);default:throw Jn(23264,{he:n})}}function dF(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Gr(t,e);const n=Yf(t),r=Yf(e),s=Gr(n.seconds,r.seconds);return s!==0?s:Gr(n.nanos,r.nanos)}function AF(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=hp(n[s],r[s]);if(a)return a}return Gr(n.length,r.length)}function mp(t){return pT(t)}function pT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xf(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return kn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=pT(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const i of r)a?a=!1:s+=",",s+=`${i}:${pT(n.fields[i])}`;return s+"}"}(t.mapValue):Jn(61005,{value:t})}function Sw(t){switch(Jf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ob(t);return e?16+Sw(e):16;case 5:return 2*t.stringValue.length;case 6:return Xf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Sw(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ch(r.fields,(a,i)=>{s+=a.length+Sw(i)}),s}(t.mapValue);default:throw Jn(13486,{value:t})}}function fF(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gT(t){return!!t&&"integerValue"in t}function MN(t){return!!t&&"arrayValue"in t}function hF(t){return!!t&&"nullValue"in t}function mF(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tw(t){return!!t&&"mapValue"in t}function BX(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Z8])==null?void 0:r.stringValue)===eO}function vv(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ch(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vv(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vv(t.arrayValue.values[n]);return e}return{...t}}function kX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NX}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.value=e}static empty(){return new nc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vv(n)}setAll(e){let n=No.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=vv(i):s.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Tw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jd(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tw(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ch(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new nc(vv(this.value))}}function tO(t){const e=[];return ch(t.fields,(n,r)=>{const s=new No([n]);if(Tw(r)){const a=tO(r.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new Lc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r,s,a,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new tl(e,0,or.min(),or.min(),or.min(),nc.empty(),0)}static newFoundDocument(e,n,r,s){return new tl(e,1,n,or.min(),r,s,0)}static newNoDocument(e,n){return new tl(e,2,n,or.min(),or.min(),nc.empty(),0)}static newUnknownDocument(e,n){return new tl(e,3,n,or.min(),or.min(),nc.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(or.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=or.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.position=e,this.inclusive=n}}function pF(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?r=kn.comparator(kn.fromName(i.referenceValue),n.key):r=hp(i,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function gF(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jd(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n="asc"){this.field=e,this.dir=n}}function IX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{}class _i extends nO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DX(e,n,r):n==="array-contains"?new PX(e,r):n==="in"?new MX(e,r):n==="not-in"?new UX(e,r):n==="array-contains-any"?new OX(e,r):new _i(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LX(e,r):new RX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hp(n,this.value)):n!==null&&Jf(this.value)===Jf(n)&&this.matchesComparison(hp(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Jn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yu extends nO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yu(e,n)}matches(e){return rO(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rO(t){return t.op==="and"}function sO(t){return FX(t)&&rO(t)}function FX(t){for(const e of t.filters)if(e instanceof Yu)return!1;return!0}function vT(t){if(t instanceof _i)return t.field.canonicalString()+t.op.toString()+mp(t.value);if(sO(t))return t.filters.map(e=>vT(e)).join(",");{const e=t.filters.map(n=>vT(n)).join(",");return`${t.op}(${e})`}}function aO(t,e){return t instanceof _i?function(r,s){return s instanceof _i&&r.op===s.op&&r.field.isEqual(s.field)&&jd(r.value,s.value)}(t,e):t instanceof Yu?function(r,s){return s instanceof Yu&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,i,o)=>a&&aO(i,s.filters[o]),!0):!1}(t,e):void Jn(19439)}function iO(t){return t instanceof _i?function(n){return`${n.field.canonicalString()} ${n.op} ${mp(n.value)}`}(t):t instanceof Yu?function(n){return n.op.toString()+" {"+n.getFilters().map(iO).join(" ,")+"}"}(t):"Filter"}class DX extends _i{constructor(e,n,r){super(e,n,r),this.key=kn.fromName(r.referenceValue)}matches(e){const n=kn.comparator(e.key,this.key);return this.matchesComparison(n)}}class LX extends _i{constructor(e,n){super(e,"in",n),this.keys=oO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RX extends _i{constructor(e,n){super(e,"not-in",n),this.keys=oO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oO(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>kn.fromName(r.referenceValue))}class PX extends _i{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return MN(n)&&$v(n.arrayValue,this.value)}}class MX extends _i{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$v(this.value.arrayValue,n)}}class UX extends _i{constructor(e,n){super(e,"not-in",n)}matches(e){if($v(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$v(this.value.arrayValue,n)}}class OX extends _i{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!MN(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$v(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e,n=null,r=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function vF(t,e=null,n=[],r=[],s=null,a=null,i=null){return new jX(t,e,n,r,s,a,i)}function UN(t){const e=ur(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Ub(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mp(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mp(r)).join(",")),e.Te=n}return e.Te}function ON(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gF(t.startAt,e.startAt)&&gF(t.endAt,e.endAt)}function xT(t){return kn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n=null,r=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HX(t,e,n,r,s,a,i,o){return new Rp(t,e,n,r,s,a,i,o)}function jb(t){return new Rp(t)}function xF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lO(t){return t.collectionGroup!==null}function xv(t){const e=ur(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ui(No.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Wv(a,r))}),n.has(No.keyField().canonicalString())||e.Ie.push(new Wv(No.keyField(),r))}return e.Ie}function Dd(t){const e=ur(t);return e.Ee||(e.Ee=QX(e,xv(t))),e.Ee}function QX(t,e){if(t.limitType==="F")return vF(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Wv(s.field,a)});const n=t.endAt?new y2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new y2(t.startAt.position,t.startAt.inclusive):null;return vF(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yT(t,e){const n=t.filters.concat([e]);return new Rp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function w2(t,e,n){return new Rp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hb(t,e){return ON(Dd(t),Dd(e))&&t.limitType===e.limitType}function cO(t){return`${UN(Dd(t))}|lt:${t.limitType}`}function Tm(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>iO(s)).join(", ")}]`),Ub(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>mp(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>mp(s)).join(",")),`Target(${r})`}(Dd(t))}; limitType=${t.limitType})`}function Qb(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):kn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of xv(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,l){const c=pF(i,o,l);return i.inclusive?c<=0:c<0}(r.startAt,xv(r),s)||r.endAt&&!function(i,o,l){const c=pF(i,o,l);return i.inclusive?c>=0:c>0}(r.endAt,xv(r),s))}(t,e)}function VX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uO(t){return(e,n)=>{let r=!1;for(const s of xv(t)){const a=zX(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zX(t,e,n){const r=t.field.isKeyField()?kn.comparator(e.key,n.key):function(a,i,o){const l=i.data.field(a),c=o.data.field(a);return l!==null&&c!==null?hp(l,c):Jn(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Jn(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ch(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return K8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GX=new Ca(kn.comparator);function SA(){return GX}const dO=new Ca(kn.comparator);function Xg(...t){let e=dO;for(const n of t)e=e.insert(n.key,n);return e}function AO(t){let e=dO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qh(){return yv()}function fO(){return yv()}function yv(){return new _0(t=>t.toString(),(t,e)=>t.isEqual(e))}const qX=new Ca(kn.comparator),KX=new Ui(kn.comparator);function qr(...t){let e=KX;for(const n of t)e=e.add(n);return e}const $X=new Ui(Gr);function WX(){return $X}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g2(e)?"-0":e}}function hO(t){return{integerValue:""+t}}function YX(t,e){return _X(e)?hO(e):jN(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this._=void 0}}function XX(t,e,n){return t instanceof Yv?function(s,a){const i={fields:{[Y8]:{stringValue:W8},[J8]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&PN(a)&&(a=Ob(a)),a&&(i.fields[X8]=a),{mapValue:i}}(n,e):t instanceof pp?pO(t,e):t instanceof Xv?gO(t,e):function(s,a){const i=mO(s,a),o=yF(i)+yF(s.Ae);return gT(i)&&gT(s.Ae)?hO(o):jN(s.serializer,o)}(t,e)}function JX(t,e,n){return t instanceof pp?pO(t,e):t instanceof Xv?gO(t,e):n}function mO(t,e){return t instanceof b2?function(r){return gT(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Yv extends Vb{}class pp extends Vb{constructor(e){super(),this.elements=e}}function pO(t,e){const n=vO(e);for(const r of t.elements)n.some(s=>jd(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xv extends Vb{constructor(e){super(),this.elements=e}}function gO(t,e){let n=vO(e);for(const r of t.elements)n=n.filter(s=>!jd(s,r));return{arrayValue:{values:n}}}class b2 extends Vb{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yF(t){return ti(t.integerValue||t.doubleValue)}function vO(t){return MN(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.field=e,this.transform=n}}function ZX(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof pp&&s instanceof pp||r instanceof Xv&&s instanceof Xv?fp(r.elements,s.elements,jd):r instanceof b2&&s instanceof b2?jd(r.Ae,s.Ae):r instanceof Yv&&s instanceof Yv}(t.transform,e.transform)}class eJ{constructor(e,n){this.version=e,this.transformResults=n}}class kl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kl}static exists(e){return new kl(void 0,e)}static updateTime(e){return new kl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zb{}function yO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gb(t.key,kl.none()):new Px(t.key,t.data,kl.none());{const n=t.data,r=nc.empty();let s=new Ui(No.comparator);for(let a of e.fields)if(!s.has(a)){let i=n.field(a);i===null&&a.length>1&&(a=a.popLast(),i=n.field(a)),i===null?r.delete(a):r.set(a,i),s=s.add(a)}return new uh(t.key,r,new Lc(s.toArray()),kl.none())}}function tJ(t,e,n){t instanceof Px?function(s,a,i){const o=s.value.clone(),l=bF(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof uh?function(s,a,i){if(!Nw(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=bF(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(wO(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function wv(t,e,n,r){return t instanceof Px?function(a,i,o,l){if(!Nw(a.precondition,i))return o;const c=a.value.clone(),A=_F(a.fieldTransforms,l,i);return c.setAll(A),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof uh?function(a,i,o,l){if(!Nw(a.precondition,i))return o;const c=_F(a.fieldTransforms,l,i),A=i.data;return A.setAll(wO(a)),A.setAll(c),i.convertToFoundDocument(i.version,A).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,i,o){return Nw(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function nJ(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=mO(r.transform,s||null);a!=null&&(n===null&&(n=nc.empty()),n.set(r.field,a))}return n||null}function wF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&fp(r,s,(a,i)=>ZX(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Px extends zb{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class uh extends zb{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function wO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bF(t,e,n){const r=new Map;ws(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);r.set(a.field,JX(i,o,n[s]))}return r}function _F(t,e,n){const r=new Map;for(const s of t){const a=s.transform,i=n.data.field(s.field);r.set(s.field,XX(a,i,e))}return r}class Gb extends zb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rJ extends zb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&tJ(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fO();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=n.has(s.key)?null:o;const l=yO(i,o);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(or.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qr())}isEqual(e){return this.batchId===e.batchId&&fp(this.mutations,e.mutations,(n,r)=>wF(n,r))&&fp(this.baseMutations,e.baseMutations,(n,r)=>wF(n,r))}}class HN{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ws(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return qX}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,r[i].version);return new HN(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vi,Zr;function oJ(t){switch(t){case St.OK:return Jn(64938);case St.CANCELLED:case St.UNKNOWN:case St.DEADLINE_EXCEEDED:case St.RESOURCE_EXHAUSTED:case St.INTERNAL:case St.UNAVAILABLE:case St.UNAUTHENTICATED:return!1;case St.INVALID_ARGUMENT:case St.NOT_FOUND:case St.ALREADY_EXISTS:case St.PERMISSION_DENIED:case St.FAILED_PRECONDITION:case St.ABORTED:case St.OUT_OF_RANGE:case St.UNIMPLEMENTED:case St.DATA_LOSS:return!0;default:return Jn(15467,{code:t})}}function bO(t){if(t===void 0)return EA("GRPC error has no .code"),St.UNKNOWN;switch(t){case vi.OK:return St.OK;case vi.CANCELLED:return St.CANCELLED;case vi.UNKNOWN:return St.UNKNOWN;case vi.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case vi.INTERNAL:return St.INTERNAL;case vi.UNAVAILABLE:return St.UNAVAILABLE;case vi.UNAUTHENTICATED:return St.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case vi.NOT_FOUND:return St.NOT_FOUND;case vi.ALREADY_EXISTS:return St.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return St.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case vi.ABORTED:return St.ABORTED;case vi.OUT_OF_RANGE:return St.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return St.UNIMPLEMENTED;case vi.DATA_LOSS:return St.DATA_LOSS;default:return Jn(39323,{code:t})}}(Zr=vi||(vi={}))[Zr.OK=0]="OK",Zr[Zr.CANCELLED=1]="CANCELLED",Zr[Zr.UNKNOWN=2]="UNKNOWN",Zr[Zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zr[Zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zr[Zr.NOT_FOUND=5]="NOT_FOUND",Zr[Zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zr[Zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zr[Zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zr[Zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zr[Zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zr[Zr.ABORTED=10]="ABORTED",Zr[Zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zr[Zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zr[Zr.INTERNAL=13]="INTERNAL",Zr[Zr.UNAVAILABLE=14]="UNAVAILABLE",Zr[Zr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cJ=new Uf([4294967295,4294967295],0);function CF(t){const e=lJ().encode(t),n=new P8;return n.update(e),new Uint8Array(n.digest())}function EF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Uf([n,r],0),new Uf([s,a],0)]}class QN{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jg(`Invalid padding: ${n}`);if(r<0)throw new Jg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Uf.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Uf.fromNumber(r)));return s.compare(cJ)===1&&(s=new Uf([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=CF(e),[r,s]=EF(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);if(!this.we(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new QN(a,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const n=CF(e),[r,s]=EF(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);this.Se(i)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Mx.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qb(or.min(),s,new Ca(Gr),SA(),qr())}}class Mx{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mx(r,n,qr(),qr(),qr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class _O{constructor(e,n){this.targetId=e,this.Ce=n}}class CO{constructor(e,n,r=Io.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class SF{constructor(){this.ve=0,this.Fe=TF(),this.Me=Io.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qr(),n=qr(),r=qr();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Jn(38017,{changeType:a})}}),new Mx(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=TF()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ws(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uJ{constructor(e){this.Ge=e,this.ze=new Map,this.je=SA(),this.Je=dy(),this.He=dy(),this.Ye=new Ca(Gr)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Jn(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(xT(a))if(r===0){const i=new kn(a.path);this.et(n,i,tl.newNoDocument(i,or.min()))}else ws(r===1,20013,{expectedCount:r});else{const i=this._t(n);if(i!==r){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let i,o;try{i=Xf(r).toUint8Array()}catch(l){if(l instanceof $8)return Ap("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new QN(i,s,a)}catch(l){return Ap(l instanceof Jg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&xT(o.target)){const l=new kn(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,tl.newNoDocument(l,e))}a.Be&&(n.set(i,a.ke()),a.qe())}});let r=qr();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new qb(e,n,this.Ye,this.je,r);return this.je=SA(),this.Je=dy(),this.He=dy(),this.Ye=new Ca(Gr),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new SF,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ui(Gr),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ui(Gr),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||hn("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new SF),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dy(){return new Ca(kn.comparator)}function TF(){return new Ca(kn.comparator)}const dJ={asc:"ASCENDING",desc:"DESCENDING"},AJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fJ={and:"AND",or:"OR"};class hJ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wT(t,e){return t.useProto3Json||Ub(e)?e:{value:e}}function _2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mJ(t,e){return _2(t,e.toTimestamp())}function Ld(t){return ws(!!t,49232),or.fromTimestamp(function(n){const r=Yf(n);return new Nn(r.seconds,r.nanos)}(t))}function VN(t,e){return bT(t,e).canonicalString()}function bT(t,e){const n=function(s){return new $s(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SO(t){const e=$s.fromString(t);return ws(IO(e),10190,{key:e.toString()}),e}function _T(t,e){return VN(t.databaseId,e.path)}function wE(t,e){const n=SO(e);if(n.get(1)!==t.databaseId.projectId)throw new on(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new on(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new kn(NO(n))}function TO(t,e){return VN(t.databaseId,e)}function pJ(t){const e=SO(t);return e.length===4?$s.emptyPath():NO(e)}function CT(t){return new $s(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NO(t){return ws(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function NF(t,e,n){return{name:_T(t,e),fields:n.value.mapValue.fields}}function gJ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Jn(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,A){return c.useProto3Json?(ws(A===void 0||typeof A=="string",58123),Io.fromBase64String(A||"")):(ws(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Io.fromUint8Array(A||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const A=c.code===void 0?St.UNKNOWN:bO(c.code);return new on(A,c.message||"")}(i);n=new CO(r,s,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wE(t,r.document.name),a=Ld(r.document.updateTime),i=r.document.createTime?Ld(r.document.createTime):or.min(),o=new nc({mapValue:{fields:r.document.fields}}),l=tl.newFoundDocument(s,a,i,o),c=r.targetIds||[],A=r.removedTargetIds||[];n=new Bw(c,A,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wE(t,r.document),a=r.readTime?Ld(r.readTime):or.min(),i=tl.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Bw([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wE(t,r.document),a=r.removedTargetIds||[];n=new Bw([],a,s,null)}else{if(!("filter"in e))return Jn(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,i=new iJ(s,a),o=r.targetId;n=new _O(o,i)}}return n}function vJ(t,e){let n;if(e instanceof Px)n={update:NF(t,e.key,e.value)};else if(e instanceof Gb)n={delete:_T(t,e.key)};else if(e instanceof uh)n={update:NF(t,e.key,e.data),updateMask:TJ(e.fieldMask)};else{if(!(e instanceof rJ))return Jn(16599,{Vt:e.type});n={verify:_T(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,i){const o=i.transform;if(o instanceof Yv)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof pp)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xv)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof b2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Jn(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:mJ(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Jn(27497)}(t,e.precondition)),n}function xJ(t,e){return t&&t.length>0?(ws(e!==void 0,14353),t.map(n=>function(s,a){let i=s.updateTime?Ld(s.updateTime):Ld(a);return i.isEqual(or.min())&&(i=Ld(a)),new eJ(i,s.transformResults||[])}(n,e))):[]}function yJ(t,e){return{documents:[TO(t,e.path)]}}function wJ(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TO(t,s);const a=function(c){if(c.length!==0)return kO(Yu.create(c,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const i=function(c){if(c.length!==0)return c.map(A=>function(p){return{field:Nm(p.field),direction:CJ(p.dir)}}(A))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=wT(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function bJ(t){let e=pJ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ws(r===1,65062);const A=n.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let a=[];n.where&&(a=function(h){const p=BO(h);return p instanceof Yu&&sO(p)?p.getFilters():[p]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(p=>function(w){return new Wv(Bm(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(h){let p;return p=typeof h=="object"?h.value:h,Ub(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new y2(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new y2(g,p)}(n.endAt)),HX(e,s,i,a,o,"F",l,c)}function _J(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jn(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bm(n.unaryFilter.field);return _i.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bm(n.unaryFilter.field);return _i.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bm(n.unaryFilter.field);return _i.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bm(n.unaryFilter.field);return _i.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Jn(61313);default:return Jn(60726)}}(t):t.fieldFilter!==void 0?function(n){return _i.create(Bm(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Jn(58110);default:return Jn(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yu.create(n.compositeFilter.filters.map(r=>BO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Jn(1026)}}(n.compositeFilter.op))}(t):Jn(30097,{filter:t})}function CJ(t){return dJ[t]}function EJ(t){return AJ[t]}function SJ(t){return fJ[t]}function Nm(t){return{fieldPath:t.canonicalString()}}function Bm(t){return No.fromServerFormat(t.fieldPath)}function kO(t){return t instanceof _i?function(n){if(n.op==="=="){if(mF(n.value))return{unaryFilter:{field:Nm(n.field),op:"IS_NAN"}};if(hF(n.value))return{unaryFilter:{field:Nm(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mF(n.value))return{unaryFilter:{field:Nm(n.field),op:"IS_NOT_NAN"}};if(hF(n.value))return{unaryFilter:{field:Nm(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nm(n.field),op:EJ(n.op),value:n.value}}}(t):t instanceof Yu?function(n){const r=n.getFilters().map(s=>kO(s));return r.length===1?r[0]:{compositeFilter:{op:SJ(n.op),filters:r}}}(t):Jn(54877,{filter:t})}function TJ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r,s,a=or.min(),i=or.min(),o=Io.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Tf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(e){this.yt=e}}function BJ(t){const e=bJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?w2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(){this.Cn=new IJ}addToCollectionParentIndex(e,n){return this.Cn.add(n),Lt.resolve()}getCollectionParents(e,n){return Lt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Lt.resolve()}deleteFieldIndex(e,n){return Lt.resolve()}deleteAllFieldIndexes(e){return Lt.resolve()}createTargetIndexes(e,n){return Lt.resolve()}getDocumentsMatchingTarget(e,n){return Lt.resolve(null)}getIndexType(e,n){return Lt.resolve(0)}getFieldIndexes(e,n){return Lt.resolve([])}getNextCollectionGroupToUpdate(e){return Lt.resolve(null)}getMinOffset(e,n){return Lt.resolve(Wf.min())}getMinOffsetFromCollectionGroup(e,n){return Lt.resolve(Wf.min())}updateCollectionGroup(e,n,r){return Lt.resolve()}updateIndexEntries(e,n){return Lt.resolve()}}class IJ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ui($s.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ui($s.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FO=41943040;class ec{static withCacheSize(e){return new ec(e,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ec.DEFAULT_COLLECTION_PERCENTILE=10,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ec.DEFAULT=new ec(FO,ec.DEFAULT_COLLECTION_PERCENTILE,ec.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ec.DISABLED=new ec(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gp(0)}static cr(){return new gp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="LruGarbageCollector",FJ=1048576;function IF([t,e],[n,r]){const s=Gr(t,n);return s===0?Gr(e,r):s}class DJ{constructor(e){this.Ir=e,this.buffer=new Ui(IF),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();IF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LJ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){hn(kF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lp(n)?hn(kF,"Ignoring IndexedDB error during garbage collection: ",n):await Dp(n)}await this.Vr(3e5)})}}class RJ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Lt.resolve(Mb.ce);const r=new DJ(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(hn("LruGarbageCollector","Garbage collection skipped; disabled"),Lt.resolve(BF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(hn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BF):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,i,o,l,c;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(hn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Sm()<=zr.DEBUG&&hn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-A}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-A}ms`),Lt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function PJ(t,e){return new RJ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(){this.changes=new _0(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tl.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Lt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wv(r.mutation,s,Lc.empty(),Nn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,qr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=qr()){const s=Qh();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let i=Xg();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Qh();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,qr()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let a=SA();const i=yv(),o=function(){return yv()}();return n.forEach((l,c)=>{const A=r.get(c.key);s.has(c.key)&&(A===void 0||A.mutation instanceof uh)?a=a.insert(c.key,c):A!==void 0?(i.set(c.key,A.mutation.getFieldMask()),wv(A.mutation,c,A.mutation.getFieldMask(),Nn.now())):i.set(c.key,Lc.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,A)=>i.set(c,A)),n.forEach((c,A)=>o.set(c,new UJ(A,i.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const r=yv();let s=new Ca((i,o)=>i-o),a=qr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let A=r.get(l)||Lc.empty();A=o.applyToLocalView(c,A),r.set(l,A);const h=(s.get(o.batchId)||qr()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,A=l.value,h=fO();A.forEach(p=>{if(!a.has(p)){const g=yO(n.get(p),r.get(p));g!==null&&h.set(p,g),a=a.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Lt.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return kn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Lt.resolve(Qh());let o=Gv,l=a;return i.next(c=>Lt.forEach(c,(A,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(A)?Lt.resolve():this.remoteDocumentCache.getEntry(e,A).next(p=>{l=l.insert(A,p)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,qr())).next(A=>({batchId:o,changes:AO(A)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new kn(n)).next(r=>{let s=Xg();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let i=Xg();return this.indexManager.getCollectionParents(e,a).next(o=>Lt.forEach(o,l=>{const c=function(h,p){return new Rp(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(A=>{A.forEach((h,p)=>{i=i.insert(h,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(i=>{a.forEach((l,c)=>{const A=c.getKey();i.get(A)===null&&(i=i.insert(A,tl.newInvalidDocument(A)))});let o=Xg();return i.forEach((l,c)=>{const A=a.get(l);A!==void 0&&wv(A.mutation,c,Lc.empty(),Nn.now()),Qb(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Lt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ld(s.createTime)}}(n)),Lt.resolve()}getNamedQuery(e,n){return Lt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:BJ(s.bundledQuery),readTime:Ld(s.readTime)}}(n)),Lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(){this.overlays=new Ca(kn.comparator),this.qr=new Map}getOverlay(e,n){return Lt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qh();return Lt.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),Lt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),Lt.resolve()}getOverlaysForCollection(e,n,r){const s=Qh(),a=n.length+1,i=new kn(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Lt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Ca((c,A)=>c-A);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let A=a.get(c.largestBatchId);A===null&&(A=Qh(),a=a.insert(c.largestBatchId,A)),A.set(c.getKey(),c)}}const o=Qh(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,A)=>o.set(c,A)),!(o.size()>=s)););return Lt.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new aJ(n,r));let a=this.qr.get(n);a===void 0&&(a=qr(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(){this.sessionToken=Io.EMPTY_BYTE_STRING}getSessionToken(e){return Lt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.Qr=new Ui(eo.$r),this.Ur=new Ui(eo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new eo(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new eo(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new kn(new $s([])),r=new eo(n,e),s=new eo(n,e+1),a=[];return this.Ur.forEachInRange([r,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new kn(new $s([])),r=new eo(n,e),s=new eo(n,e+1);let a=qr();return this.Ur.forEachInRange([r,s],i=>{a=a.add(i.key)}),a}containsKey(e){const n=new eo(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class eo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return kn.comparator(e.key,n.key)||Gr(e.Yr,n.Yr)}static Kr(e,n){return Gr(e.Yr,n.Yr)||kn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ui(eo.$r)}checkEmpty(e){return Lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new sJ(a,n,r,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new eo(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Lt.resolve(i)}lookupMutationBatch(e,n){return Lt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return Lt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Lt.resolve(this.mutationQueue.length===0?RN:this.tr-1)}getAllMutationBatches(e){return Lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new eo(n,0),s=new eo(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),Lt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ui(Gr);return n.forEach(s=>{const a=new eo(s,0),i=new eo(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{r=r.add(o.Yr)})}),Lt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;kn.isDocumentKey(a)||(a=a.child(""));const i=new eo(new kn(a),0);let o=new Ui(Gr);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.Yr)),!0)},i),Lt.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ws(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Lt.forEach(n.mutations,s=>{const a=new eo(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new eo(n,0),s=this.Zr.firstAfterOrEqual(r);return Lt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Lt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(e){this.ri=e,this.docs=function(){return new Ca(kn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,i=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Lt.resolve(r?r.document.mutableCopy():tl.newInvalidDocument(n))}getEntries(e,n){let r=SA();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():tl.newInvalidDocument(s))}),Lt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=SA();const i=n.path,o=new kn(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:A}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||xX(vX(A),r)<=0||(s.has(A.key)||Qb(n,A))&&(a=a.insert(A.key,A.mutableCopy()))}return Lt.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Jn(9500)}ii(e,n){return Lt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GJ(this)}getSize(e){return Lt.resolve(this.size)}}class GJ extends MJ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Lt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(e){this.persistence=e,this.si=new _0(n=>UN(n),ON),this.lastRemoteSnapshotVersion=or.min(),this.highestTargetId=0,this.oi=0,this._i=new zN,this.targetCount=0,this.ai=gp.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Lt.resolve()}getLastRemoteSnapshotVersion(e){return Lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Lt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Lt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gp(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Lt.resolve()}updateTargetData(e,n){return this.Pr(n),Lt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Lt.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Lt.waitFor(a).next(()=>s)}getTargetCount(e){return Lt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Lt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Lt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),Lt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Lt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Lt.resolve(r)}containsKey(e,n){return Lt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mb(0),this.li=!1,this.li=!0,this.hi=new QJ,this.referenceDelegate=e(this),this.Pi=new qJ(this),this.indexManager=new kJ,this.remoteDocumentCache=function(s){return new zJ(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new NJ(n),this.Ii=new jJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HJ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VJ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){hn("MemoryPersistence","Starting transaction:",e);const s=new KJ(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return Lt.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class KJ extends wX{constructor(e){super(),this.currentSequenceNumber=e}}class GN{constructor(e){this.persistence=e,this.Ri=new zN,this.Vi=null}static mi(e){return new GN(e)}get fi(){if(this.Vi)return this.Vi;throw Jn(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Lt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Lt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Lt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lt.forEach(this.fi,r=>{const s=kn.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,or.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Lt.or([()=>Lt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class C2{constructor(e,n){this.persistence=e,this.pi=new _0(r=>CX(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=PJ(this,n)}static mi(e,n){return new C2(e,n)}Ei(){}di(e){return Lt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Lt.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?Lt.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,n).next(o=>{o||(r++,a.removeEntry(i,or.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Lt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Lt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Lt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Lt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sw(e.data.value)),n}br(e,n,r){return Lt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Lt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=qr(),s=qr();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new qN(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CK()?8:bX(ll())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new $J;return this.Ss(e,n,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,i,o.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Sm()<=zr.DEBUG&&hn("QueryEngine","SDK will not create cache indexes for query:",Tm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Lt.resolve()):(Sm()<=zr.DEBUG&&hn("QueryEngine","Query:",Tm(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Sm()<=zr.DEBUG&&hn("QueryEngine","The SDK decides to create cache indexes for query:",Tm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dd(n))):Lt.resolve())}ys(e,n){if(xF(n))return Lt.resolve(null);let r=Dd(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=w2(n,null,"F"),r=Dd(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const i=qr(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,i,l.readTime)?this.ys(e,w2(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return xF(n)||s.isEqual(or.min())?Lt.resolve(null):this.ps.getDocuments(e,r).next(a=>{const i=this.Ds(n,a);return this.Cs(n,i,r,s)?Lt.resolve(null):(Sm()<=zr.DEBUG&&hn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tm(n)),this.vs(e,i,n,gX(s,Gv)).next(o=>o))})}Ds(e,n){let r=new Ui(uO(e));return n.forEach((s,a)=>{Qb(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Sm()<=zr.DEBUG&&hn("QueryEngine","Using full collection scan to execute query:",Tm(n)),this.ps.getDocumentsMatchingQuery(e,n,Wf.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="LocalStore",YJ=3e8;class XJ{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ca(Gr),this.xs=new _0(a=>UN(a),ON),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OJ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function JJ(t,e,n,r){return new XJ(t,e,n,r)}async function LO(t,e){const n=ur(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const i=[],o=[];let l=qr();for(const c of s){i.push(c.batchId);for(const A of c.mutations)l=l.add(A.key)}for(const c of a){o.push(c.batchId);for(const A of c.mutations)l=l.add(A.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:i,addedBatchIds:o}))})})}function ZJ(t,e){const n=ur(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,A){const h=c.batch,p=h.keys();let g=Lt.resolve();return p.forEach(w=>{g=g.next(()=>A.getEntry(l,w)).next(x=>{const S=c.docVersions.get(w);ws(S!==null,48541),x.version.compareTo(S)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),A.addEntry(x)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=qr();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RO(t){const e=ur(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function eZ(t,e){const n=ur(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach((A,h)=>{const p=s.get(h);if(!p)return;o.push(n.Pi.removeMatchingKeys(a,A.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(a,A.addedDocuments,h)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Io.EMPTY_BYTE_STRING,or.min()).withLastLimboFreeSnapshotVersion(or.min()):A.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(A.resumeToken,r)),s=s.insert(h,g),function(x,S,N){return x.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=YJ?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(p,g,A)&&o.push(n.Pi.updateTargetData(a,g))});let l=SA(),c=qr();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,A))}),o.push(tZ(a,i,e.documentUpdates).next(A=>{l=A.ks,c=A.qs})),!r.isEqual(or.min())){const A=n.Pi.getLastRemoteSnapshotVersion(a).next(h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(A)}return Lt.waitFor(o).next(()=>i.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(n.Ms=s,a))}function tZ(t,e,n){let r=qr(),s=qr();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let i=SA();return n.forEach((o,l)=>{const c=a.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(or.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):hn(KN,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:i,qs:s}})}function nZ(t,e){const n=ur(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=RN),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rZ(t,e){const n=ur(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,Lt.resolve(s)):n.Pi.allocateTargetId(r).next(i=>(s=new Tf(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ET(t,e,n){const r=ur(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Lp(i))throw i;hn(KN,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function FF(t,e,n){const r=ur(t);let s=or.min(),a=qr();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,A){const h=ur(l),p=h.xs.get(A);return p!==void 0?Lt.resolve(h.Ms.get(p)):h.Pi.getTargetData(c,A)}(r,i,Dd(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(i,e,n?s:or.min(),n?a:qr())).next(o=>(sZ(r,VX(e),o),{documents:o,Qs:a})))}function sZ(t,e,n){let r=t.Os.get(e)||or.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class DF{constructor(){this.activeTargetIds=WX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aZ{constructor(){this.Mo=new DF,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new DF,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF="ConnectivityMonitor";class RF{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){hn(LF,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){hn(LF,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ay=null;function ST(){return Ay===null?Ay=function(){return 268435456+Math.round(2147483648*Math.random())}():Ay++,"0x"+Ay.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="RestConnection",oZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lZ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===v2?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const i=ST(),o=this.zo(e,n.toUriEncodedString());hn(bE,`Sending RPC '${e}' ${i}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:c}=new URL(o),A=w0(c);return this.Jo(e,o,l,r,A).then(h=>(hn(bE,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Ap(bE,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",r),h})}Ho(e,n,r,s,a,i){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=oZ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="WebChannelConnection";class uZ extends lZ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const i=ST();return new Promise((o,l)=>{const c=new M8;c.setWithCredentials(!0),c.listenOnce(U8.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ew.NO_ERROR:const h=c.getResponseJson();hn(zo,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Ew.TIMEOUT:hn(zo,`RPC '${e}' ${i} timed out`),l(new on(St.DEADLINE_EXCEEDED,"Request time out"));break;case Ew.HTTP_ERROR:const p=c.getStatus();if(hn(zo,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const x=function(N){const F=N.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(F)>=0?F:St.UNKNOWN}(w.status);l(new on(x,w.message))}else l(new on(St.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new on(St.UNAVAILABLE,"Connection failed."));break;default:Jn(9055,{l_:e,streamId:i,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{hn(zo,`RPC '${e}' ${i} completed.`)}});const A=JSON.stringify(s);hn(zo,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",A,r,15)})}T_(e,n,r){const s=ST(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=H8(),o=j8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const A=a.join("");hn(zo,`Creating RPC '${e}' stream ${s}: ${A}`,l);const h=i.createWebChannel(A,l);this.I_(h);let p=!1,g=!1;const w=new cZ({Yo:S=>{g?hn(zo,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(hn(zo,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),hn(zo,`RPC '${e}' stream ${s} sending:`,S),h.send(S))},Zo:()=>h.close()}),x=(S,N,F)=>{S.listen(N,D=>{try{F(D)}catch(R){setTimeout(()=>{throw R},0)}})};return x(h,Yg.EventType.OPEN,()=>{g||(hn(zo,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),x(h,Yg.EventType.CLOSE,()=>{g||(g=!0,hn(zo,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),x(h,Yg.EventType.ERROR,S=>{g||(g=!0,Ap(zo,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),w.a_(new on(St.UNAVAILABLE,"The operation could not be completed")))}),x(h,Yg.EventType.MESSAGE,S=>{var N;if(!g){const F=S.data[0];ws(!!F,16349);const D=F,R=(D==null?void 0:D.error)||((N=D[0])==null?void 0:N.error);if(R){hn(zo,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let P=function(k){const z=vi[k];if(z!==void 0)return bO(z)}(j),E=R.message;P===void 0&&(P=St.INTERNAL,E="Unknown error status: "+j+" with message "+R.message),g=!0,w.a_(new on(P,E)),h.close()}else hn(zo,`RPC '${e}' stream ${s} received:`,F),w.u_(F)}}),x(o,O8.STAT_EVENT,S=>{S.stat===hT.PROXY?hn(zo,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===hT.NOPROXY&&hn(zo,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function _E(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){return new hJ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&hn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="PersistentStream";class MO{constructor(e,n,r,s,a,i,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PO(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===St.RESOURCE_EXHAUSTED?(EA(n.toString()),EA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===St.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new on(St.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return hn(PF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(hn(PF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dZ extends MO{constructor(e,n,r,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=gJ(this.serializer,e),r=function(a){if(!("targetChange"in a))return or.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?or.min():i.readTime?Ld(i.readTime):or.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=CT(this.serializer),n.addTarget=function(a,i){let o;const l=i.target;if(o=xT(l)?{documents:yJ(a,l)}:{query:wJ(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=EO(a,i.resumeToken);const c=wT(a,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(or.min())>0){o.readTime=_2(a,i.snapshotVersion.toTimestamp());const c=wT(a,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=_J(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=CT(this.serializer),n.removeTarget=e,this.q_(n)}}class AZ extends MO{constructor(e,n,r,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ws(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ws(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ws(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xJ(e.writeResults,e.commitTime),r=Ld(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=CT(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vJ(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{}class hZ extends fZ{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new on(St.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,bT(n,r),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new on(St.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,bT(n,r),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new on(St.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(EA(n),this.aa=!1):hn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="RemoteStore";class pZ{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{r.enqueueAndForget(async()=>{C0(this)&&(hn(u0,"Restarting streams for network reachability change."),await async function(l){const c=ur(l);c.Ea.add(4),await Ux(c),c.Ra.set("Unknown"),c.Ea.delete(4),await $b(c)}(this))})}),this.Ra=new mZ(r,s)}}async function $b(t){if(C0(t))for(const e of t.da)await e(!0)}async function Ux(t){for(const e of t.da)await e(!1)}function UO(t,e){const n=ur(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),XN(n)?YN(n):Pp(n).O_()&&WN(n,e))}function $N(t,e){const n=ur(t),r=Pp(n);n.Ia.delete(e),r.O_()&&OO(n,e),n.Ia.size===0&&(r.O_()?r.L_():C0(n)&&n.Ra.set("Unknown"))}function WN(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(or.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pp(t).Y_(e)}function OO(t,e){t.Va.Ue(e),Pp(t).Z_(e)}function YN(t){t.Va=new uJ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pp(t).start(),t.Ra.ua()}function XN(t){return C0(t)&&!Pp(t).x_()&&t.Ia.size>0}function C0(t){return ur(t).Ea.size===0}function jO(t){t.Va=void 0}async function gZ(t){t.Ra.set("Online")}async function vZ(t){t.Ia.forEach((e,n)=>{WN(t,e)})}async function xZ(t,e){jO(t),XN(t)?(t.Ra.ha(e),YN(t)):t.Ra.set("Unknown")}async function yZ(t,e,n){if(t.Ra.set("Online"),e instanceof CO&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(r){hn(u0,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await E2(t,r)}else if(e instanceof Bw?t.Va.Ze(e):e instanceof _O?t.Va.st(e):t.Va.tt(e),!n.isEqual(or.min()))try{const r=await RO(t.localStore);n.compareTo(r)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const A=a.Ia.get(c);A&&a.Ia.set(c,A.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,c)=>{const A=a.Ia.get(l);if(!A)return;a.Ia.set(l,A.withResumeToken(Io.EMPTY_BYTE_STRING,A.snapshotVersion)),OO(a,l);const h=new Tf(A.target,l,c,A.sequenceNumber);WN(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){hn(u0,"Failed to raise snapshot:",r),await E2(t,r)}}async function E2(t,e,n){if(!Lp(e))throw e;t.Ea.add(1),await Ux(t),t.Ra.set("Offline"),n||(n=()=>RO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{hn(u0,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $b(t)})}function HO(t,e){return e().catch(n=>E2(t,n,e))}async function Wb(t){const e=ur(t),n=Zf(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:RN;for(;wZ(e);)try{const s=await nZ(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,bZ(e,s)}catch(s){await E2(e,s)}QO(e)&&VO(e)}function wZ(t){return C0(t)&&t.Ta.length<10}function bZ(t,e){t.Ta.push(e);const n=Zf(t);n.O_()&&n.X_&&n.ea(e.mutations)}function QO(t){return C0(t)&&!Zf(t).x_()&&t.Ta.length>0}function VO(t){Zf(t).start()}async function _Z(t){Zf(t).ra()}async function CZ(t){const e=Zf(t);for(const n of t.Ta)e.ea(n.mutations)}async function EZ(t,e,n){const r=t.Ta.shift(),s=HN.from(r,e,n);await HO(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wb(t)}async function SZ(t,e){e&&Zf(t).X_&&await async function(r,s){if(function(i){return oJ(i)&&i!==St.ABORTED}(s.code)){const a=r.Ta.shift();Zf(r).B_(),await HO(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Wb(r)}}(t,e),QO(t)&&VO(t)}async function MF(t,e){const n=ur(t);n.asyncQueue.verifyOperationInProgress(),hn(u0,"RemoteStore received new credentials");const r=C0(n);n.Ea.add(3),await Ux(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $b(n)}async function TZ(t,e){const n=ur(t);e?(n.Ea.delete(2),await $b(n)):e||(n.Ea.add(2),await Ux(n),n.Ra.set("Unknown"))}function Pp(t){return t.ma||(t.ma=function(n,r,s){const a=ur(n);return a.sa(),new dZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:gZ.bind(null,t),t_:vZ.bind(null,t),r_:xZ.bind(null,t),H_:yZ.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),XN(t)?YN(t):t.Ra.set("Unknown")):(await t.ma.stop(),jO(t))})),t.ma}function Zf(t){return t.fa||(t.fa=function(n,r,s){const a=ur(n);return a.sa(),new AZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_Z.bind(null,t),r_:SZ.bind(null,t),ta:CZ.bind(null,t),na:EZ.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wb(t)):(await t.fa.stop(),t.Ta.length>0&&(hn(u0,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new gA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const i=Date.now()+r,o=new JN(e,n,i,s,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new on(St.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZN(t,e){if(EA("AsyncQueue",`${e}: ${t}`),Lp(t))return new on(St.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{static emptySet(e){return new qm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||kn.comparator(n.key,r.key):(n,r)=>kn.comparator(n.key,r.key),this.keyedMap=Xg(),this.sortedSet=new Ca(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.ga=new Ca(kn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Jn(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vp{constructor(e,n,r,s,a,i,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,a){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new vp(e,n,qm.emptySet(n),i,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class BZ{constructor(){this.queries=OF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ur(n),a=s.queries;s.queries=OF(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new on(St.ABORTED,"Firestore shutting down"))}}function OF(){return new _0(t=>cO(t),Hb)}async function eB(t,e){const n=ur(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new NZ,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=ZN(i,`Initialization of query '${Tm(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&nB(n)}async function tB(t,e){const n=ur(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kZ(t,e){const n=ur(t);let r=!1;for(const s of e){const a=s.query,i=n.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(r=!0);i.wa=s}}r&&nB(n)}function IZ(t,e,n){const r=ur(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function nB(t){t.Ca.forEach(e=>{e.next()})}var TT,jF;(jF=TT||(TT={})).Ma="default",jF.Cache="cache";class rB{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==TT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.key=e}}class GO{constructor(e){this.key=e}}class FZ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qr(),this.mutatedKeys=qr(),this.eu=uO(e),this.tu=new qm(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new UF,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,h)=>{const p=s.get(A),g=Qb(this.query,h)?h:null,w=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;p&&g?p.data.isEqual(g.data)?w!==x&&(r.track({type:3,doc:g}),S=!0):this.su(p,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(o=!0)):!p&&g?(r.track({type:0,doc:g}),S=!0):p&&!g&&(r.track({type:1,doc:p}),S=!0,(l||c)&&(o=!0)),S&&(g?(i=i.add(g),a=x?a.add(A):a.delete(A)):(i=i.delete(A),a=a.delete(A)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const A=this.query.limitType==="F"?i.last():i.first();i=i.delete(A.key),a=a.delete(A.key),r.track({type:1,doc:A})}return{tu:i,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((A,h)=>function(g,w){const x=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jn(20277,{Rt:S})}};return x(g)-x(w)}(A.type,h.type)||this.eu(A.doc,h.doc)),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,i.length!==0||c?{snapshot:new vp(this.query,e.tu,a,i,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qr(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new GO(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new zO(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=qr();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sB="SyncEngine";class DZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LZ{constructor(e){this.key=e,this.hu=!1}}class RZ{constructor(e,n,r,s,a,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new _0(o=>cO(o),Hb),this.Iu=new Map,this.Eu=new Set,this.du=new Ca(kn.comparator),this.Au=new Map,this.Ru=new zN,this.Vu={},this.mu=new Map,this.fu=gp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PZ(t,e,n=!0){const r=XO(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await qO(r,e,n,!0),s}async function MZ(t,e){const n=XO(t);await qO(n,e,!0,!1)}async function qO(t,e,n,r){const s=await rZ(t.localStore,Dd(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await UZ(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&UO(t.remoteStore,s),o}async function UZ(t,e,n,r,s){t.pu=(h,p,g)=>async function(x,S,N,F){let D=S.view.ru(N);D.Cs&&(D=await FF(x.localStore,S.query,!1).then(({documents:E})=>S.view.ru(E,D)));const R=F&&F.targetChanges.get(S.targetId),j=F&&F.targetMismatches.get(S.targetId)!=null,P=S.view.applyChanges(D,x.isPrimaryClient,R,j);return QF(x,S.targetId,P.au),P.snapshot}(t,h,p,g);const a=await FF(t.localStore,e,!0),i=new FZ(e,a.Qs),o=i.ru(a.documents),l=Mx.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,l);QF(t,n,c.au);const A=new DZ(e,n,i);return t.Tu.set(e,A),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function OZ(t,e,n){const r=ur(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(i=>!Hb(i,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ET(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$N(r.remoteStore,s.targetId),NT(r,s.targetId)}).catch(Dp)):(NT(r,s.targetId),await ET(r.localStore,s.targetId,!0))}async function jZ(t,e){const n=ur(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$N(n.remoteStore,r.targetId))}async function HZ(t,e,n){const r=$Z(t);try{const s=await function(i,o){const l=ur(i),c=Nn.now(),A=o.reduce((g,w)=>g.add(w.key),qr());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=SA(),x=qr();return l.Ns.getEntries(g,A).next(S=>{w=S,w.forEach((N,F)=>{F.isValidDocument()||(x=x.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(S=>{h=S;const N=[];for(const F of o){const D=nJ(F,h.get(F.key).overlayedDocument);D!=null&&N.push(new uh(F.key,D,tO(D.value.mapValue),kl.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,N,o)}).next(S=>{p=S;const N=S.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(g,S.batchId,N)})}).then(()=>({batchId:p.batchId,changes:AO(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let c=i.Vu[i.currentUser.toKey()];c||(c=new Ca(Gr)),c=c.insert(o,l),i.Vu[i.currentUser.toKey()]=c}(r,s.batchId,n),await Ox(r,s.changes),await Wb(r.remoteStore)}catch(s){const a=ZN(s,"Failed to persist write");n.reject(a)}}async function KO(t,e){const n=ur(t);try{const r=await eZ(n.localStore,e);e.targetChanges.forEach((s,a)=>{const i=n.Au.get(a);i&&(ws(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?ws(i.hu,14607):s.removedDocuments.size>0&&(ws(i.hu,42227),i.hu=!1))}),await Ox(n,r,e)}catch(r){await Dp(r)}}function HF(t,e,n){const r=ur(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=ur(i);l.onlineState=o;let c=!1;l.queries.forEach((A,h)=>{for(const p of h.Sa)p.va(o)&&(c=!0)}),c&&nB(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QZ(t,e,n){const r=ur(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let i=new Ca(kn.comparator);i=i.insert(a,tl.newNoDocument(a,or.min()));const o=qr().add(a),l=new qb(or.min(),new Map,new Ca(Gr),i,o);await KO(r,l),r.du=r.du.remove(a),r.Au.delete(e),aB(r)}else await ET(r.localStore,e,!1).then(()=>NT(r,e,n)).catch(Dp)}async function VZ(t,e){const n=ur(t),r=e.batch.batchId;try{const s=await ZJ(n.localStore,e);WO(n,r,null),$O(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ox(n,s)}catch(s){await Dp(s)}}async function zZ(t,e,n){const r=ur(t);try{const s=await function(i,o){const l=ur(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let A;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(ws(h!==null,37113),A=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,A,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,A)).next(()=>l.localDocuments.getDocuments(c,A))})}(r.localStore,e);WO(r,e,n),$O(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ox(r,s)}catch(s){await Dp(s)}}function $O(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function WO(t,e,n){const r=ur(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function NT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||YO(t,r)})}function YO(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($N(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),aB(t))}function QF(t,e,n){for(const r of n)r instanceof zO?(t.Ru.addReference(r.key,e),GZ(t,r)):r instanceof GO?(hn(sB,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||YO(t,r.key)):Jn(19791,{wu:r})}function GZ(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(hn(sB,"New document in limbo: "+n),t.Eu.add(r),aB(t))}function aB(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new kn($s.fromString(e)),r=t.fu.next();t.Au.set(r,new LZ(n)),t.du=t.du.insert(n,r),UO(t.remoteStore,new Tf(Dd(jb(n.path)),r,"TargetPurposeLimboResolution",Mb.ce))}}async function Ox(t,e,n){const r=ur(t),s=[],a=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{i.push(r.pu(l,e,n).then(c=>{var A;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(A=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:A.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=qN.As(l.targetId,c);a.push(h)}}))}),await Promise.all(i),r.Pu.H_(s),await async function(l,c){const A=ur(l);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Lt.forEach(c,p=>Lt.forEach(p.Es,g=>A.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>Lt.forEach(p.ds,g=>A.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Lp(h))throw h;hn(KN,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=A.Ms.get(p),w=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(w);A.Ms=A.Ms.insert(p,x)}}}(r.localStore,a))}async function qZ(t,e){const n=ur(t);if(!n.currentUser.isEqual(e)){hn(sB,"User change. New user:",e.toKey());const r=await LO(n.localStore,e);n.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new on(St.CANCELLED,i))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ox(n,r.Ls)}}function KZ(t,e){const n=ur(t),r=n.Au.get(e);if(r&&r.hu)return qr().add(r.key);{let s=qr();const a=n.Iu.get(e);if(!a)return s;for(const i of a){const o=n.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function XO(t){const e=ur(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QZ.bind(null,e),e.Pu.H_=kZ.bind(null,e.eventManager),e.Pu.yu=IZ.bind(null,e.eventManager),e}function $Z(t){const e=ur(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zZ.bind(null,e),e}class S2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return JJ(this.persistence,new WJ,e.initialUser,this.serializer)}Cu(e){return new DO(GN.mi,this.serializer)}Du(e){return new aZ}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}S2.provider={build:()=>new S2};class WZ extends S2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ws(this.persistence.referenceDelegate instanceof C2,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LJ(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ec.withCacheSize(this.cacheSizeBytes):ec.DEFAULT;return new DO(r=>C2.mi(r,n),this.serializer)}}class BT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qZ.bind(null,this.syncEngine),await TZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BZ}()}createDatastore(e){const n=Kb(e.databaseInfo.databaseId),r=function(a){return new uZ(a)}(e.databaseInfo);return function(a,i,o,l){return new hZ(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,i,o){return new pZ(r,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>HF(this.syncEngine,n,0),function(){return RF.v()?new RF:new iZ}())}createSyncEngine(e,n){return function(s,a,i,o,l,c,A){const h=new RZ(s,a,i,o,l,c);return A&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=ur(s);hn(u0,"RemoteStore shutting down."),a.Ea.add(5),await Ux(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}BT.provider={build:()=>new BT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):EA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="FirestoreClient";class YZ{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Xo.UNAUTHENTICATED,this.clientId=LN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async i=>{hn(eh,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(hn(eh,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ZN(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function CE(t,e){t.asyncQueue.verifyOperationInProgress(),hn(eh,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await LO(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function VF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XZ(t);hn(eh,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>MF(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>MF(e.remoteStore,s)),t._onlineComponents=e}async function XZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){hn(eh,"Using user provided OfflineComponentProvider");try{await CE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===St.FAILED_PRECONDITION||s.code===St.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ap("Error using user provided cache. Falling back to memory cache: "+n),await CE(t,new S2)}}else hn(eh,"Using default OfflineComponentProvider"),await CE(t,new WZ(void 0));return t._offlineComponents}async function JO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(hn(eh,"Using user provided OnlineComponentProvider"),await VF(t,t._uninitializedComponentsProvider._online)):(hn(eh,"Using default OnlineComponentProvider"),await VF(t,new BT))),t._onlineComponents}function JZ(t){return JO(t).then(e=>e.syncEngine)}async function T2(t){const e=await JO(t),n=e.eventManager;return n.onListen=PZ.bind(null,e.syncEngine),n.onUnlisten=OZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jZ.bind(null,e.syncEngine),n}function ZZ(t,e,n={}){const r=new gA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,c){const A=new iB({next:p=>{A.Nu(),i.enqueueAndForget(()=>tB(a,h));const g=p.docs.has(o);!g&&p.fromCache?c.reject(new on(St.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new on(St.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new rB(jb(o.path),A,{includeMetadataChanges:!0,qa:!0});return eB(a,h)}(await T2(t),t.asyncQueue,e,n,r)),r.promise}function eee(t,e,n={}){const r=new gA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,c){const A=new iB({next:p=>{A.Nu(),i.enqueueAndForget(()=>tB(a,h)),p.fromCache&&l.source==="server"?c.reject(new on(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new rB(o,A,{includeMetadataChanges:!0,qa:!0});return eB(a,h)}(await T2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="firestore.googleapis.com",GF=!0;class qF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new on(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ej,this.ssl=GF}else this.host=e.host,this.ssl=e.ssl??GF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FJ)throw new on(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZO(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new on(St.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new on(St.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new on(St.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yb{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new on(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new on(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aX;switch(r.type){case"firstParty":return new cX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new on(St.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zF.get(n);r&&(hn("ComponentProvider","Removing Datastore"),zF.delete(n),r.terminate())}(this),Promise.resolve()}}function tee(t,e,n,r={}){var c;t=Bl(t,Yb);const s=w0(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;s&&(xN(`https://${o}`),yN("Firestore",!0)),a.host!==ej&&a.host!==o&&Ap("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:r};if(!Kf(l,i)&&(t._setSettings(l),r.mockUserToken)){let A,h;if(typeof r.mockUserToken=="string")A=r.mockUserToken,h=Xo.MOCK_USER;else{A=mK(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new on(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Xo(p)}t._authCredentials=new iX(new V8(A,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new LA(this.firestore,e,this._query)}}class Ha{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Of(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ha(this.firestore,e,this._key)}toJSON(){return{type:Ha._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rx(n,Ha._jsonSchema))return new Ha(e,r||null,new kn($s.fromString(n.referencePath)))}}Ha._jsonSchemaVersion="firestore/documentReference/1.0",Ha._jsonSchema={type:Ci("string",Ha._jsonSchemaVersion),referencePath:Ci("string")};class Of extends LA{constructor(e,n,r){super(e,n,jb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ha(this.firestore,null,new kn(e))}withConverter(e){return new Of(this.firestore,e,this._path)}}function zt(t,e,...n){if(t=Aa(t),z8("collection","path",e),t instanceof Yb){const r=$s.fromString(e,...n);return aF(r),new Of(t,null,r)}{if(!(t instanceof Ha||t instanceof Of))throw new on(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($s.fromString(e,...n));return aF(r),new Of(t.firestore,null,r)}}function On(t,e,...n){if(t=Aa(t),arguments.length===1&&(e=LN.newId()),z8("doc","path",e),t instanceof Yb){const r=$s.fromString(e,...n);return sF(r),new Ha(t,null,new kn(r))}{if(!(t instanceof Ha||t instanceof Of))throw new on(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($s.fromString(e,...n));return sF(r),new Ha(t.firestore,t instanceof Of?t.converter:null,new kn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="AsyncQueue";class $F{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PO(this,"async_queue_retry"),this._c=()=>{const r=_E();r&&hn(KF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_E();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_E();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lp(e))throw e;hn(KF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,EA("INTERNAL UNHANDLED ERROR: ",WF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=JN.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Jn(47125,{Pc:WF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function WF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Hd extends Yb{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new $F,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $F(e),this._firestoreClient=void 0,await e}}}function tj(t,e){const n=typeof t=="object"?t:CN(),r=typeof t=="string"?t:v2,s=Ib(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=$U("firestore");a&&tee(s,...a)}return s}function jx(t){if(t._terminated)throw new on(St.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nee(t),t._firestoreClient}function nee(t){var r,s,a;const e=t._freezeSettings(),n=function(o,l,c,A){return new TX(o,l,c,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,ZO(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new YZ(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fu(Io.fromBase64String(e))}catch(n){throw new on(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fu(Io.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rx(e,fu._jsonSchema))return fu.fromBase64String(e.bytes)}}fu._jsonSchemaVersion="firestore/bytes/1.0",fu._jsonSchema={type:Ci("string",fu._jsonSchemaVersion),bytes:Ci("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new on(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new No(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new on(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new on(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gr(this._lat,e._lat)||Gr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rd._jsonSchemaVersion}}static fromJSON(e){if(Rx(e,Rd._jsonSchema))return new Rd(e.latitude,e.longitude)}}Rd._jsonSchemaVersion="firestore/geoPoint/1.0",Rd._jsonSchema={type:Ci("string",Rd._jsonSchemaVersion),latitude:Ci("number"),longitude:Ci("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rx(e,Pd._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pd(e.vectorValues);throw new on(St.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pd._jsonSchemaVersion="firestore/vectorValue/1.0",Pd._jsonSchema={type:Ci("string",Pd._jsonSchemaVersion),vectorValues:Ci("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ree=/^__.*__$/;class see{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new uh(e,this.data,this.fieldMask,n,this.fieldTransforms):new Px(e,this.data,n,this.fieldTransforms)}}class nj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new uh(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jn(40011,{Ac:t})}}class Xb{constructor(e,n,r,s,a,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return N2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rj(this.Ac)&&ree.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aee{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kb(e)}Cc(e,n,r,s=!1){return new Xb({Ac:e,methodName:n,Dc:r,path:No.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vx(t){const e=t._freezeSettings(),n=Kb(t._databaseId);return new aee(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oB(t,e,n,r,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);uB("Data must be an object, but it was:",i,r);const o=ij(r,i);let l,c;if(a.merge)l=new Lc(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const A=[];for(const h of a.mergeFields){const p=kT(e,h,n);if(!i.contains(p))throw new on(St.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);lj(A,p)||A.push(p)}l=new Lc(A),c=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=i.fieldTransforms;return new see(new nc(o),l,c)}class Jb extends Qx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jb}}function iee(t,e,n){return new Xb({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lB extends Qx{_toFieldTransform(e){return new xO(e.path,new Yv)}isEqual(e){return e instanceof lB}}class cB extends Qx{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=iee(this,e,!0),r=this.vc.map(a=>Mp(a,n)),s=new pp(r);return new xO(e.path,s)}isEqual(e){return e instanceof cB&&Kf(this.vc,e.vc)}}function sj(t,e,n,r){const s=t.Cc(1,e,n);uB("Data must be an object, but it was:",s,r);const a=[],i=nc.empty();ch(r,(l,c)=>{const A=dB(e,l,n);c=Aa(c);const h=s.yc(A);if(c instanceof Jb)a.push(A);else{const p=Mp(c,h);p!=null&&(a.push(A),i.set(A,p))}});const o=new Lc(a);return new nj(i,o,s.fieldTransforms)}function aj(t,e,n,r,s,a){const i=t.Cc(1,e,n),o=[kT(e,r,n)],l=[s];if(a.length%2!=0)throw new on(St.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push(kT(e,a[p])),l.push(a[p+1]);const c=[],A=nc.empty();for(let p=o.length-1;p>=0;--p)if(!lj(c,o[p])){const g=o[p];let w=l[p];w=Aa(w);const x=i.yc(g);if(w instanceof Jb)c.push(g);else{const S=Mp(w,x);S!=null&&(c.push(g),A.set(g,S))}}const h=new Lc(c);return new nj(A,h,i.fieldTransforms)}function oee(t,e,n,r=!1){return Mp(n,t.Cc(r?4:3,e))}function Mp(t,e){if(oj(t=Aa(t)))return uB("Unsupported field value:",e,t),ij(t,e);if(t instanceof Qx)return function(r,s){if(!rj(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let i=0;for(const o of r){let l=Mp(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Aa(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YX(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Nn.fromDate(r);return{timestampValue:_2(s.serializer,a)}}if(r instanceof Nn){const a=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_2(s.serializer,a)}}if(r instanceof Rd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fu)return{bytesValue:EO(s.serializer,r._byteString)};if(r instanceof Ha){const a=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:VN(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pd)return function(i,o){return{mapValue:{fields:{[Z8]:{stringValue:eO},[x2]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return jN(o.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Pb(r)}`)}(t,e)}function ij(t,e){const n={};return K8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ch(t,(r,s)=>{const a=Mp(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function oj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nn||t instanceof Rd||t instanceof fu||t instanceof Ha||t instanceof Qx||t instanceof Pd)}function uB(t,e,n){if(!oj(n)||!G8(n)){const r=Pb(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function kT(t,e,n){if((e=Aa(e))instanceof Hx)return e._internalPath;if(typeof e=="string")return dB(t,e);throw N2("Field path arguments must be of type string or ",t,!1,void 0,n)}const lee=new RegExp("[~\\*/\\[\\]]");function dB(t,e,n){if(e.search(lee)>=0)throw N2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hx(...e.split("."))._internalPath}catch{throw N2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function N2(t,e,n,r,s){const a=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new on(St.INVALID_ARGUMENT,o+t+l)}function lj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ha(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cee extends cj{data(){return super.data()}}function Zb(t,e){return typeof e=="string"?dB(t,e):e instanceof Hx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new on(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AB{}class fB extends AB{}function mn(t,e,...n){let r=[];e instanceof AB&&r.push(e),r=r.concat(n),function(a){const i=a.filter(l=>l instanceof hB).length,o=a.filter(l=>l instanceof e_).length;if(i>1||i>0&&o>0)throw new on(St.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class e_ extends fB{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new e_(e,n,r)}_apply(e){const n=this._parse(e);return dj(e._query,n),new LA(e.firestore,e.converter,yT(e._query,n))}_parse(e){const n=Vx(e.firestore);return function(a,i,o,l,c,A,h){let p;if(c.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new on(St.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){JF(h,A);const w=[];for(const x of h)w.push(XF(l,a,x));p={arrayValue:{values:w}}}else p=XF(l,a,h)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||JF(h,A),p=oee(o,i,h,A==="in"||A==="not-in");return _i.create(c,A,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fs(t,e,n){const r=e,s=Zb("where",t);return e_._create(s,r,n)}class hB extends AB{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hB(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yu.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)dj(i,l),i=yT(i,l)}(e._query,n),new LA(e.firestore,e.converter,yT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mB extends fB{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mB(e,n)}_apply(e){const n=function(s,a,i){if(s.startAt!==null)throw new on(St.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new on(St.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wv(a,i)}(e._query,this._field,this._direction);return new LA(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new Rp(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Pr(t,e="asc"){const n=e,r=Zb("orderBy",t);return mB._create(r,n)}class pB extends fB{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pB(e,n,r)}_apply(e){return new LA(e.firestore,e.converter,w2(e._query,this._limit,this._limitType))}}function jf(t){return pX("limit",t),pB._create("limit",t,"F")}function XF(t,e,n){if(typeof(n=Aa(n))=="string"){if(n==="")throw new on(St.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lO(e)&&n.indexOf("/")!==-1)throw new on(St.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($s.fromString(n));if(!kn.isDocumentKey(r))throw new on(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fF(t,new kn(r))}if(n instanceof Ha)return fF(t,n._key);throw new on(St.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pb(n)}.`)}function JF(t,e){if(!Array.isArray(t)||t.length===0)throw new on(St.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dj(t,e){const n=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new on(St.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new on(St.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uee{convertValue(e,n="none"){switch(Jf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ti(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Jn(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ch(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[x2].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>ti(i.doubleValue));return new Pd(n)}convertGeoPoint(e){return new Rd(ti(e.latitude),ti(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ob(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qv(e));default:return null}}convertTimestamp(e){const n=Yf(e);return new Nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$s.fromString(e);ws(IO(r),9688,{name:e});const s=new Kv(r.get(1),r.get(3)),a=new kn(r.popFirst(5));return s.isEqual(n)||EA(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kh extends cj{constructor(e,n,r,s,a,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new on(St.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Kh._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Kh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kh._jsonSchema={type:Ci("string",Kh._jsonSchemaVersion),bundleSource:Ci("string","DocumentSnapshot"),bundleName:Ci("string"),bundle:Ci("string")};class kw extends Kh{data(e={}){return super.data(e)}}class $h{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kw(this._firestore,this._userDataWriter,r.key,r,new Zg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new on(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new kw(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Zg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new kw(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Zg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,A=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),A=i.indexOf(o.doc.key)),{type:dee(o.type),doc:l,oldIndex:c,newIndex:A}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new on(St.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$h._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=LN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jn(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){t=Bl(t,Ha);const e=Bl(t.firestore,Hd);return ZZ(jx(e),t._key).then(n=>Aj(e,t,n))}$h._jsonSchemaVersion="firestore/querySnapshot/1.0",$h._jsonSchema={type:Ci("string",$h._jsonSchemaVersion),bundleSource:Ci("string","QuerySnapshot"),bundleName:Ci("string"),bundle:Ci("string")};class vB extends uee{constructor(e){super(),this.firestore=e}convertBytes(e){return new fu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ha(this.firestore,null,n)}}function Ei(t){t=Bl(t,LA);const e=Bl(t.firestore,Hd),n=jx(e),r=new vB(e);return uj(t._query),eee(n,t._query).then(s=>new $h(e,r,t,s))}function Fo(t,e,n){t=Bl(t,Ha);const r=Bl(t.firestore,Hd),s=gB(t.converter,e,n);return qx(r,[oB(Vx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,kl.none())])}function Gx(t,e,n,...r){t=Bl(t,Ha);const s=Bl(t.firestore,Hd),a=Vx(s);let i;return i=typeof(e=Aa(e))=="string"||e instanceof Hx?aj(a,"updateDoc",t._key,e,n,r):sj(a,"updateDoc",t._key,e),qx(s,[i.toMutation(t._key,kl.exists(!0))])}function ao(t){return qx(Bl(t.firestore,Hd),[new Gb(t._key,kl.none())])}function la(t,e){const n=Bl(t.firestore,Hd),r=On(t),s=gB(t.converter,e);return qx(n,[oB(Vx(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,kl.exists(!1))]).then(()=>r)}function jn(t,...e){var l,c,A;t=Aa(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||YF(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(YF(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(A=h.complete)==null?void 0:A.bind(h)}let a,i,o;if(t instanceof Ha)i=Bl(t.firestore,Hd),o=jb(t._key.path),a={next:h=>{e[r]&&e[r](Aj(i,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Bl(t,LA);i=Bl(h.firestore,Hd),o=h._query;const p=new vB(i);a={next:g=>{e[r]&&e[r](new $h(i,p,h,g))},error:e[r+1],complete:e[r+2]},uj(t._query)}return function(p,g,w,x){const S=new iB(x),N=new rB(g,S,w);return p.asyncQueue.enqueueAndForget(async()=>eB(await T2(p),N)),()=>{S.Nu(),p.asyncQueue.enqueueAndForget(async()=>tB(await T2(p),N))}}(jx(i),o,s,a)}function qx(t,e){return function(r,s){const a=new gA;return r.asyncQueue.enqueueAndForget(async()=>HZ(await JZ(r),s,a)),a.promise}(jx(t),e)}function Aj(t,e,n){const r=n.docs.get(e._key),s=new vB(t);return new Kh(t,s,e._key,r,new Zg(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vx(e)}set(e,n,r){this._verifyNotCommitted();const s=EE(e,this._firestore),a=gB(s.converter,n,r),i=oB(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,kl.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=EE(e,this._firestore);let i;return i=typeof(n=Aa(n))=="string"||n instanceof Hx?aj(this._dataReader,"WriteBatch.update",a._key,n,r,s):sj(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(i.toMutation(a._key,kl.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=EE(e,this._firestore);return this._mutations=this._mutations.concat(new Gb(n._key,kl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new on(St.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function EE(t,e){if((t=Aa(t)).firestore!==e)throw new on(St.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function fee(){return new lB("serverTimestamp")}function hee(...t){return new cB("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(t){return jx(t=Bl(t,Hd)),new Aee(t,e=>qx(t,e))}(function(e,n=!0){(function(s){Fp=s})(kp),o0(new $f("firestore",(r,{instanceIdentifier:s,options:a})=>{const i=r.getProvider("app").getImmediate(),o=new Hd(new oX(r.getProvider("auth-internal")),new uX(i,r.getProvider("app-check-internal")),function(c,A){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new on(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kv(c.options.projectId,A)}(i,s),i);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),kd(eF,tF,e),kd(eF,tF,"esm2020")})();const mee={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},fj=_N(mee),Kx=R8(fj),Br=tj(fj),pee=Object.freeze(Object.defineProperty({__proto__:null,auth:Kx,db:Br},Symbol.toStringTag,{value:"Module"})),gee=async(t,e)=>{try{return(await QW(Kx,t,e)).user}catch(n){throw console.error("Error en loginUser helper:",n),n}},SE=async()=>{try{await GW(Kx)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},vee=async t=>{try{await HW(Kx,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},hj=async t=>{try{const e=On(Br,"usuarios",t),n=await zx(e);return n.exists()?{id:n.id,...n.data()}:(console.warn(`No se encontr perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var tn=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(tn||{}),Qr=(t=>(t.EVALUACION="Evaluacin",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedaggica",t))(Qr||{}),Mh=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Gua de Aprendizaje",t.RUBRICA="Rbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Mh||{});const xee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),Ti="w-6 h-6",t_="w-24 h-24",yB=()=>u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),yee=()=>u.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M9 18h6"}),u.jsx("path",{d:"M10 22h4"}),u.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),wee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),bee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),ev=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),tv=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),mj=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),_ee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t_,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Cee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t_,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Eee=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t_,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),See=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t_,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),Tee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),ZF=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),fy=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),TE=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),hy=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),NE=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),eD=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Nee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Bee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),kee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Iee=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),tD=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),Fee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),BE=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),Dee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ti,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Lee=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Ti,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),nD=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Ti,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),Ree=[{id:tn.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:u.jsx(_ee,{})},{id:tn.PROFESORADO,label:"Profesorado",icon:u.jsx(Cee,{})},{id:tn.COORDINACION_TP,label:"Coordinacin TP",icon:u.jsx(Eee,{})},{id:tn.ESTUDIANTE,label:"Estudiantes",icon:u.jsx(See,{})}],Pee={[tn.SUBDIRECCION]:[{name:"Dashboard",icon:u.jsx(Tee,{})},{name:"Administracin",icon:u.jsx(Iee,{})},{name:"Seguimiento Curricular",icon:u.jsx(Lee,{})},{name:"Acompaamiento docente",icon:u.jsx(kee,{})},{name:"Anlisis Taxonmico",icon:u.jsx(nD,{})},{name:"Interdisciplinario",icon:u.jsx(BE,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:u.jsx(ZF,{})},{name:"Crear horarios",icon:u.jsx(TE,{})},{name:"Seguimiento de acciones pedaggicas",icon:u.jsx(hy,{})},{name:"Inclusin",icon:u.jsx(tD,{})},{name:"Calendario Acadmico",icon:u.jsx(fy,{})},{name:"Muro de Anuncios",icon:u.jsx(ev,{})},{name:"Mensajera Interna",icon:u.jsx(tv,{})},{name:"Generador de Actas",icon:u.jsx(NE,{})}],[tn.PROFESORADO]:[{name:"Planificacin",icon:u.jsx(eD,{})},{name:"Mis Acompaamientos",icon:u.jsx(Fee,{})},{name:"Recursos de Aprendizaje",icon:u.jsx(Nee,{})},{name:"Anlisis Taxonmico",icon:u.jsx(nD,{})},{name:"Interdisciplinario",icon:u.jsx(BE,{})},{name:"Inclusin",icon:u.jsx(tD,{})},{name:"Actividades Remotas",icon:u.jsx(Bee,{})},{name:"Evaluacin de Aprendizajes",icon:u.jsx(NE,{})},{name:"Evaluaciones Formativas",icon:u.jsx(hy,{})},{name:"Calendario Acadmico",icon:u.jsx(fy,{})},{name:"Muro de Anuncios",icon:u.jsx(ev,{})},{name:"Mensajera Interna",icon:u.jsx(tv,{})},{name:"Generador de Actas",icon:u.jsx(ZF,{})}],[tn.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:u.jsx(hy,{})},{name:"Asistencia Dual",icon:u.jsx(TE,{})},{name:"Paol",icon:u.jsx(Dee,{})},{name:"Gestin de Empresas",icon:u.jsx(xee,{})},{name:"Calendario Acadmico",icon:u.jsx(fy,{})},{name:"Muro de Anuncios",icon:u.jsx(ev,{})},{name:"Mensajera Interna",icon:u.jsx(tv,{})},{name:"Generador de Actas",icon:u.jsx(NE,{})}],[tn.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:u.jsx(eD,{})},{name:"Evaluacin Formativa",icon:u.jsx(hy,{})},{name:"Tareas Interdisciplinarias",icon:u.jsx(BE,{})},{name:"Asistencia a Empresa",icon:u.jsx(TE,{})},{name:"Calendario Acadmico",icon:u.jsx(fy,{})},{name:"Muro de Anuncios",icon:u.jsx(ev,{})},{name:"Mensajera Interna",icon:u.jsx(tv,{})}]},rD=["Currculum y Evaluacin","Convivencia Escolar","Orientacin","Gestin Pedaggica General"],my=["Pendiente","En Proceso","Cumplida"],B2=["1 Medio","2 Medio","3 Medio","4 Medio"],Uc=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],ai=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],IT=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Iw=["Lunes","Martes","Mircoles","Jueves","Viernes"],FT=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Mee={"1 y 2 medio":{"Lengua y Literatura":6,Matemtica:6,Ingls:3,"Historia y Geografa":4,"Educacin Fsica":2,Ciencias:4,"Artes/Msica":2,Tecnologa:2,Orientacin:1},"3 y 4 medio (Humanista-Cientfico)":{"Lengua y Literatura":4,Matemtica:4,Ingls:2,"Historia y Geografa":3,"Educacin Ciudadana":2,Filosofa:3,"Ciencias para la Ciudadana":2,"Educacin Fsica":2},"3 y 4 medio (Tcnico-Profesional)":{"Lengua y Literatura":2,Matemtica:2,Ingls:2,"Historia y Geografa":2,Filosofa:2,"Educacin Fsica":2,"Mdulo TP":18}},Ef={[Qr.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Qr.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Qr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Qr.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},Uee=Object.values(Mh),kE=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],IE=["Vinculado","Desvinculado","En proceso","Empresa"],Wh=["3A","3B","3C","3D","4A","4B","4C","4D"],Oee=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],k2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],bv=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],pj=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],py=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],jee=({onLoginAttempt:t,onForgotPasswordRequest:e,error:n})=>{const[r,s]=W.useState(""),[a,i]=W.useState(""),[o,l]=W.useState("login"),c=p=>{p.preventDefault(),t(r,a)},A=p=>{p.preventDefault(),e(r),l("forgot_sent")},h=()=>o==="forgot"?u.jsxs("form",{onSubmit:A,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),u.jsx("div",{className:"text-sm text-center",children:u.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):o==="forgot_sent"?u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),u.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",u.jsx("strong",{children:r}),", hemos enviado un enlace para restablecer su contrasea."]}),u.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),u.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):u.jsxs("form",{onSubmit:c,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:p=>i(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),n&&u.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:u.jsx("p",{children:n})}),u.jsx("div",{className:"text-sm text-center",children:u.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),u.jsx("div",{children:u.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(yB,{})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),u.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),u.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},FE=({trigger:t,children:e,onOpen:n})=>{const[r,s]=W.useState(!1),a=W.useRef(null),i=()=>{const l=!r;s(l),l&&n&&n()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return W.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),u.jsxs("div",{className:"relative",ref:a,children:[u.jsx("div",{onClick:i,children:t}),r&&u.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},sD="usuariosLiceo",Hee=({user:t,onClose:e,onSave:n})=>{const[r,s]=W.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...r,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...r};try{const c=localStorage.getItem(sD);let A=c?JSON.parse(c):[];const h=A.findIndex(p=>p.id===t.id);h>-1?A[h]=l:A.push(l),localStorage.setItem(sD,JSON.stringify(A)),n(l),e()}catch(c){console.error("Failed to save user profile:",c),alert("No se pudo guardar el perfil.")}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:u.jsxs("form",{onSubmit:i,children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),u.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:r.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),u.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:r.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),u.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),u.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},aD="usuariosLiceo",Qee=({user:t,onClose:e,onSave:n})=>{const[r,s]=W.useState(""),[a,i]=W.useState(""),[o,l]=W.useState(null),c=A=>{if(A.preventDefault(),l(null),!r){l("La contrasea no puede estar en blanco.");return}if(r!==a){l("Las contraseas no coinciden.");return}const h={...t,password:r};try{const p=localStorage.getItem(aD);let g=p?JSON.parse(p):[];const w=g.findIndex(x=>x.id===t.id);w>-1?g[w]=h:g.push(h),localStorage.setItem(aD,JSON.stringify(g)),n(h),e()}catch(p){console.error("Failed to save new password:",p),l("No se pudo guardar la nueva contrasea.")}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:A=>A.stopPropagation(),children:u.jsxs("form",{onSubmit:c,children:[u.jsxs("div",{className:"p-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),u.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:r,onChange:A=>s(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:A=>i(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&u.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:u.jsx("p",{children:o})})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})},iD="anunciosMuro",oD="mensajesInternos",lD="lir-read-status",Vee=({user:t})=>{if(t.fotoUrl)return u.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",n=String(e).split(" ").filter(r=>r).map(r=>r[0]).join("").toUpperCase();return u.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:n.substring(0,2)})},zee=({currentUser:t,onLogout:e,onNavigate:n,onUserUpdate:r,onChangeProfile:s,canChangeProfile:a,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[c,A]=W.useState([]),[h,p]=W.useState([]),[g,w]=W.useState(!1),[x,S]=W.useState(!1),N=W.useCallback(()=>{try{const j=localStorage.getItem(`${lD}-${t.id}`);return j?JSON.parse(j):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),F=W.useCallback(j=>{try{localStorage.setItem(`${lD}-${t.id}`,JSON.stringify(j))}catch(P){console.error("Failed to set read status:",P)}},[t.id]);W.useEffect(()=>{const j=JSON.parse(localStorage.getItem(iD)||"[]"),P=N();A(j.filter(T=>!P.announcements.includes(T.id)));const E=JSON.parse(localStorage.getItem(oD)||"[]");p(E.filter(T=>T.para===t.email).sort((T,k)=>new Date(k.fecha).getTime()-new Date(T.fecha).getTime()).slice(0,5))},[t.id,N,o]);const D=()=>{const j=N(),P=JSON.parse(localStorage.getItem(iD)||"[]").map(E=>E.id);j.announcements=P,F(j),A([])},R=()=>{const j=N(),E=JSON.parse(localStorage.getItem(oD)||"[]").filter(T=>T.para===t.email).map(T=>T.id);j.messages=[...new Set([...j.messages,...E])],F(j),l()};return u.jsxs(u.Fragment,{children:[u.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:u.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:u.jsx(wee,{})}),u.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("Dashboard"),children:[u.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),u.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),u.jsx("div",{className:"flex-1 flex justify-center",children:u.jsx("button",{onClick:()=>n("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:u.jsx(bee,{})})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex items-center gap-3",children:u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),u.jsx(FE,{onOpen:D,trigger:u.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[u.jsx(ev,{}),c.length>0&&u.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:c.length})]}),children:u.jsxs("div",{className:"p-2",children:[u.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),u.jsxs("ul",{className:"mt-1",children:[c.slice(0,3).map(j=>u.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[u.jsx("p",{className:"font-bold dark:text-slate-200",children:j.titulo}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.mensaje})]},j.id)),c.length===0&&u.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),u.jsx("button",{onClick:()=>n("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),u.jsx(FE,{onOpen:R,trigger:u.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[u.jsx(tv,{}),o>0&&u.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:u.jsxs("div",{className:"p-2",children:[u.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),u.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(j=>u.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[u.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",j.de]}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:j.asunto})]},j.id)),h.length===0&&u.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),u.jsx("button",{onClick:()=>n("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),u.jsx(FE,{trigger:u.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:u.jsx(Vee,{user:t})}),children:u.jsxs("div",{className:"p-2",children:[u.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),u.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[u.jsx("li",{children:u.jsx("button",{onClick:()=>w(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>S(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),a&&u.jsx("li",{children:u.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),u.jsx("li",{children:u.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),g&&u.jsx(Hee,{user:t,onClose:()=>w(!1),onSave:r}),x&&u.jsx(Qee,{user:t,onClose:()=>S(!1),onSave:r})]})};var Ih={};const Gee={apiKey:Ih.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:Ih.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:Ih.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:Ih.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:Ih.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:Ih.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:Ih.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},gj=k3().length===0?_N(Gee):k3()[0],Ut=tj(gj),qee=R8(gj),$x="reemplazos_docentes",Kee="usuarios",wB=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,fechaActualizacion:((a=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaActualizacion}},$ee=t=>{const e=t.data();return{id:t.id,...e}},Wee=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:Nn.fromDate(new Date),fechaActualizacion:Nn.fromDate(new Date)};return(await la(zt(Ut,$x),n)).id}catch(n){throw console.error("Error al guardar reemplazo:",n),new Error("No se pudo guardar el reemplazo")}},Yee=async(t,e)=>{try{const n=On(Ut,$x,t),r=await zx(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await ao(n)}catch(n){throw console.error("Error al eliminar reemplazo:",n),new Error("No se pudo eliminar el reemplazo")}},Xee=(t,e,n=50)=>{try{const r=mn(zt(Ut,$x),fs("userId","==",t),Pr("diaAusencia","desc"),jf(n));return jn(r,s=>{const a=s.docs.map(wB);e(a)},s=>{console.error("Error en suscripcin a reemplazos:",s),e([])})}catch(r){return console.error("Error al crear la suscripcin de reemplazos:",r),()=>{}}},Jee=t=>{try{const e=mn(zt(Ut,Kee),fs("profile","==",tn.PROFESORADO));return jn(e,r=>{const s=r.docs.map($ee);t(s)},r=>{console.error("Error al obtener la lista de profesores:",r),t([])})}catch(e){return console.error("Error al crear la suscripcin de profesores:",e),()=>{}}},Zee=async t=>{try{const e=mn(zt(Ut,$x),fs("userId","==",t)),r=(await Ei(e)).docs.map(wB),s=r.length,a=r.filter(o=>o.resultado==="Hora realizada").length,i=r.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:s,horasRealizadas:a,horasCubiertas:i,porcentajeRealizadas:s>0?a/s*100:0}}catch(e){throw console.error("Error al obtener estadsticas:",e),new Error("No se pudieron obtener las estadsticas")}},ete=async(t,e)=>{try{if(!e.trim())return[];const n=mn(zt(Ut,$x),fs("userId","==",t),Pr("diaAusencia","desc"),jf(100)),s=(await Ei(n)).docs.map(wB),a=e.toLowerCase();return s.filter(i=>i.docenteAusente.toLowerCase().includes(a)||i.docenteReemplazante.toLowerCase().includes(a)||i.curso.toLowerCase().includes(a)||i.diaAusencia.includes(a)||i.asignaturaAusente.toLowerCase().includes(a)||i.asignaturaReemplazante.toLowerCase().includes(a))}catch(n){return console.error("Error en bsqueda de reemplazos:",n),[]}},tte=Array.from({length:12},(t,e)=>e+1),cD={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},nte=t=>{const[e,n]=W.useState([]),[r,s]=W.useState(!0),[a,i]=W.useState(null);W.useEffect(()=>t?Xee(t,h=>{n(h),s(!1)}):void 0,[t]);const o=W.useCallback(async A=>{try{return i(null),await Wee(A,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=W.useCallback(async A=>{try{i(null),await Yee(A,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),c=W.useCallback(async A=>{try{return i(null),A.trim()?await ete(t,A):e}catch(h){return i(h instanceof Error?h.message:"Error en la bsqueda"),[]}},[t,e]);return{reemplazos:e,loading:r,error:a,save:o,remove:l,search:c}},rte=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!0);W.useEffect(()=>Jee(i=>{e(i),r(!1)}),[]);const s=W.useMemo(()=>t.map(a=>a.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:s,loading:n}},ste=({selectedBlocks:t,onChange:e,legend:n,disabled:r=!1})=>u.jsxs("fieldset",{children:[u.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:n}),u.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:tte.map(s=>u.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${r?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[u.jsx("input",{type:"checkbox",value:s,checked:t.includes(s),onChange:e,disabled:r,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),u.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:s})]},s))})]}),ate=({userId:t})=>{const[e,n]=W.useState(null),[r,s]=W.useState(!1),a=W.useCallback(async()=>{try{s(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),c=await Zee(t);n(c)}catch(i){console.error("Error al cargar estadsticas:",i)}finally{s(!1)}},[t]);return W.useEffect(()=>{t&&a()},[t,a]),r?u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("div",{className:"animate-pulse flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadsticas del Mes"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),u.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},ite=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:n,save:r,remove:s,search:a,loading:i,error:o}=nte(e),{profesorNames:l,loading:c}=rte(),[A,h]=W.useState(cD),[p,g]=W.useState(""),[w,x]=W.useState([]),[S,N]=W.useState(null),[F,D]=W.useState(!1),[R,j]=W.useState(!1);W.useEffect(()=>{(async()=>{if(!p.trim()){x(n);return}j(!0);try{const U=await a(p);x(U)}catch(U){console.error("Error en bsqueda:",U),x(n)}finally{j(!1)}})()},[n,p,a]);const P=W.useCallback(M=>{const{name:U,value:G}=M.target;h(q=>({...q,[U]:G}))},[]),E=W.useCallback(M=>{const U=parseInt(M.target.value,10);h(G=>{const q=G.bloquesAfectados,oe=q.includes(U)?q.filter(ee=>ee!==U):[...q,U].sort((ee,le)=>ee-le);return{...G,bloquesAfectados:oe}})},[]),T=W.useCallback(async M=>{M.preventDefault(),N(null),D(!0);const{docenteAusente:U,asignaturaAusente:G,curso:q,diaAusencia:oe,bloquesAfectados:ee,docenteReemplazante:le,asignaturaReemplazante:K}=A;if(!U||!G||!q||!oe||!le||!K||ee.length===0){N("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),D(!1);return}if(U===le){N("El docente ausente y el reemplazante no pueden ser la misma persona."),D(!1);return}const ne=new Date(oe),J=new Date;if(J.setHours(0,0,0,0),ne<J&&!window.confirm("La fecha seleccionada es anterior a hoy. Desea continuar?")){D(!1);return}try{const ce=G.trim().toLowerCase()===K.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",Q={...A,resultado:ce};await r(Q),h(cD);const Z=ce==="Hora realizada"?" Reemplazo registrado - Hora realizada":" Reemplazo registrado - Hora cubierta, no realizada",se=document.createElement("div");se.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",se.textContent=Z,document.body.appendChild(se),setTimeout(()=>{document.body.contains(se)&&document.body.removeChild(se)},3e3)}catch(ce){console.error("Error al guardar reemplazo:",ce),N("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{D(!1)}},[A,r]),k=W.useCallback(async M=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await s(M)}catch(U){console.error("Error al eliminar reemplazo:",U),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[s]),z="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),u.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx(ate,{userId:e}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),c?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):u.jsxs("form",{onSubmit:T,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),u.jsxs("select",{name:"docenteAusente",value:A.docenteAusente,onChange:P,className:z,disabled:F,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignaturaAusente",value:A.asignaturaAusente,onChange:P,className:z,disabled:F,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una asignatura"}),Uc.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:A.curso,onChange:P,className:z,disabled:F,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un curso"}),ai.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Da Ausencia"}),u.jsx("input",{type:"date",name:"diaAusencia",value:A.diaAusencia,onChange:P,className:z,disabled:F,required:!0})]}),u.jsx(ste,{legend:"Bloques Afectados",selectedBlocks:A.bloquesAfectados,onChange:E,disabled:F})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),u.jsxs("select",{name:"docenteReemplazante",value:A.docenteReemplazante,onChange:P,className:z,disabled:F,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignaturaReemplazante",value:A.asignaturaReemplazante,onChange:P,className:z,disabled:F,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una asignatura"}),Uc.map(M=>u.jsx("option",{value:M,children:M},M))]})]}),A.asignaturaAusente&&A.asignaturaReemplazante&&u.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),u.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${A.asignaturaAusente.toLowerCase()===A.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:A.asignaturaAusente.toLowerCase()===A.asignaturaReemplazante.toLowerCase()?" Hora realizada":" Hora cubierta, no realizada"}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:A.asignaturaAusente.toLowerCase()===A.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(S||o)&&u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:u.jsx("p",{className:"text-red-600 dark:text-red-400",children:S||o})}),u.jsx("div",{className:"pt-4 text-right",children:u.jsxs("button",{type:"submit",disabled:F||c,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[F&&u.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),F?"Registrando...":"Registrar Reemplazo"]})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:p,onChange:M=>g(M.target.value),className:`${z} md:w-1/2 pl-10`,disabled:R}),u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:R?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):u.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p&&u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:R?"Buscando...":`${w.length} resultado(s) encontrado(s)`})]}),i?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),u.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:w.length>0?w.map(M=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(M.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:M.curso}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[M.docenteAusente,u.jsx("br",{}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:M.asignaturaAusente})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[M.docenteReemplazante,u.jsx("br",{}),u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:M.asignaturaReemplazante})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:M.bloquesAfectados.join(", ")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${M.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:M.resultado})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:u.jsx("button",{onClick:()=>k(M.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:F,children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},M.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:p?"No se encontraron registros que coincidan con la bsqueda.":"No hay registros de reemplazos."})})})]})}),w.length>0&&!p&&u.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los ltimos ",w.length," registros"]})]})]})},ote=t=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const e=zt(Br,"reemplazos"),n=mn(e,Pr("fecha","desc"));return jn(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log(" Reemplazos cargados para dashboard:",a.length),t(a)},s=>{throw console.error(" Error al cargar reemplazos:",s),s})}catch(e){throw console.error(" Error al configurar suscripcin a reemplazos:",e),e}},lte=t=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const e=zt(Br,"acompanamientos"),n=mn(e,Pr("fecha","desc"));return jn(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log(" Acompaamientos cargados para dashboard:",a.length),t(a)},s=>{throw console.error(" Error al cargar acompaamientos:",s),s})}catch(e){throw console.error(" Error al configurar suscripcin a acompaamientos:",e),e}},cte=t=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const e=zt(Br,"calendar_events"),n=mn(e,Pr("date","asc"));return jn(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log(" Eventos del calendario cargados para dashboard:",a.length),t(a)},s=>{throw console.error(" Error al cargar eventos del calendario:",s),s})}catch(e){throw console.error(" Error al configurar suscripcin a eventos del calendario:",e),e}},gd=({title:t,value:e,description:n,isLoading:r=!1})=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),r?u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]})]}),Fh=({title:t,data:e,colorClass:n,valueFormatter:r=a=>String(a),isLoading:s=!1})=>{const a=W.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=W.useMemo(()=>Math.max(...a,1),[a]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),s?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):u.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const c=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),u.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:r(o.value)})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:u.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${c/i*100}%`}})})]},o.label+l)}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},ute=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[s,a]=W.useState([]),[i,o]=W.useState(!0),[l,c]=W.useState(null);return W.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let A=0;const h=3,p=()=>{A++,A>=h&&(o(!1),console.log(" Todos los datos del dashboard cargados"))};try{const g=ote(S=>{e(S),p()}),w=lte(S=>{r(S),p()}),x=cte(S=>{a(S),p()});return()=>{g(),w(),x()}}catch(g){console.error(" Error al configurar suscripciones del dashboard:",g),c(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:n,calendarEvents:s,loading:i,error:l}},dte=({currentUser:t})=>{var h,p;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",t),console.log(" Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log(" Dashboard - Verificacin de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log(" Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log(" Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log(" Dashboard - Comparacin con trim:",((p=t==null?void 0:t.profile)==null?void 0:p.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:n,calendarEvents:r,loading:s,error:a}=ute(),[i,o]=W.useState(bv);if(console.log(" Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:n.length,calendarEvents:r.length,loading:s,error:a,currentUser:t==null?void 0:t.profile}),W.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):bv)}catch(g){console.error("Error al leer rbrica personalizada",g),o(bv)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!t),console.log(" Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log(" Dashboard - comparacin exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log(" Dashboard - currentUser es null/undefined"),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",t.profile),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),u.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[u.jsx("p",{children:u.jsx("strong",{children:"Debug Info:"})}),u.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),u.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),u.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),a)return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),u.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:a}),u.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const l=W.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const w=e.filter(j=>j.resultado==="Hora realizada").length,x=g-w,S=`${(w/g*100).toFixed(1)}%`,N=(j,P)=>j.reduce((E,T)=>{const k=T[P];return typeof k=="string"&&(E[k]=(E[k]||0)+1),E},{}),F=N(e,"docenteAusente"),D=N(e,"docenteReemplazante"),R=N(e,"curso");return{totalInasistencias:g,horasRealizadas:w,horasCubiertas:x,tasaCobertura:S,inasistenciasPorDocente:Object.entries(F).map(([j,P])=>({label:j,value:P})),reemplazosPorDocente:Object.entries(D).map(([j,P])=>({label:j,value:P})),inasistenciasPorCurso:Object.entries(R).map(([j,P])=>({label:j,value:P})),distribucionResultados:[{label:"Hora Realizada",value:w},{label:"Hora Cubierta",value:x}]}},[e]),c=W.useMemo(()=>{const g=n.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const w=new Map;i.forEach(P=>{P.criteria.forEach(E=>{w.set(E.name,P.domain)})});let x=0,S=0;const N={},F={};n.forEach(P=>{N[P.docente]||(N[P.docente]={total:0,count:0}),Object.entries(P.rubricaResultados).forEach(([E,T])=>{x+=T,S++,N[P.docente].total+=T,N[P.docente].count++;const k=w.get(E);k&&(F[k]||(F[k]={total:0,count:0}),F[k].total+=T,F[k].count++)})});const D=S>0?(x/S).toFixed(2):"N/A",R=Object.entries(N).map(([P,E])=>({label:P,value:E.count>0?(E.total/E.count).toFixed(2):0})),j=Object.entries(F).map(([P,E])=>({label:P,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:D,desempenoPorDocente:R,desempenoPorDominio:j}},[n,i]),A=W.useMemo(()=>{const g={[Qr.EVALUACION]:0,[Qr.ACTO]:0,[Qr.ACTIVIDAD_FOCALIZADA]:0,[Qr.SALIDA_PEDAGOGICA]:0};for(const x of r)g.hasOwnProperty(x.type)&&g[x.type]++;const w=Object.entries(g).map(([x,S])=>({label:Ef[x].label,value:S}));return{totalEvaluaciones:g[Qr.EVALUACION],totalActos:g[Qr.ACTO],totalActividadesFocalizadas:g[Qr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[Qr.SALIDA_PEDAGOGICA],distribucionEventos:w}},[r]);return s?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&c.totalAcompanamientos===0&&r.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[u.jsx("span",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),u.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[u.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),u.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),u.jsx("p",{children:" Calendario Acadmico"})]})]}):u.jsxs("div",{className:"space-y-12 animate-fade-in",children:[u.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),u.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),u.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(gd,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:s}),u.jsx(gd,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:s}),u.jsx(gd,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:s}),u.jsx(gd,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:s})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(Fh,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:s}),u.jsx(Fh,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:s}),u.jsx(Fh,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:s}),u.jsx(Fh,{title:"Distribucin de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:s})]})]}),n.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(gd,{title:"Total Acompaamientos",value:c.totalAcompanamientos,description:"Registros realizados",isLoading:s}),u.jsx(gd,{title:"Promedio General",value:c.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:s})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(Fh,{title:"Desempeo Promedio por Docente",data:c.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:s}),u.jsx(Fh,{title:"Desempeo Promedio por Dominio",data:c.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:s})]})]}),r.length>0&&u.jsxs("div",{className:"space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(gd,{title:"Evaluaciones",value:A.totalEvaluaciones,description:"Eventos registrados",isLoading:s}),u.jsx(gd,{title:"Actos",value:A.totalActos,description:"Eventos registrados",isLoading:s}),u.jsx(gd,{title:"Act. Focalizadas",value:A.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:s}),u.jsx(gd,{title:"Salidas Pedaggicas",value:A.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:s})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(Fh,{title:"Distribucin de Eventos del Calendario",data:A.distribucionEventos,colorClass:"bg-violet-400",isLoading:s}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),s?u.jsxs("div",{className:"flex justify-center items-center py-8",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):u.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[r.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,w)=>{var x,S;return u.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin ttulo"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&u.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",g.ubicacion]})]}),u.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=Ef[g.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((S=Ef[g.type])==null?void 0:S.label)||g.type})]})},g.id||w)}),r.filter(g=>new Date(g.date)>=new Date).length===0&&u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+n.length+r.length}),u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...n.map(g=>g.docente)]).size}),u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),u.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),u.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[u.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),u.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var uD;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(uD||(uD={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dD;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(dD||(dD={}));var AD;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(AD||(AD={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=["user","model","function","system"];var hD;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(hD||(hD={}));var mD;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(mD||(mD={}));var pD;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(pD||(pD={}));var gD;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(gD||(gD={}));var _v;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(_v||(_v={}));var vD;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(vD||(vD={}));var xD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(xD||(xD={}));var yD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yD||(yD={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class am extends rl{constructor(e,n){super(e),this.response=n}}class vj extends rl{constructor(e,n,r,s){super(e),this.status=n,this.statusText=r,this.errorDetails=s}}class Hf extends rl{}class xj extends rl{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate="https://generativelanguage.googleapis.com",fte="v1beta",hte="0.24.1",mte="genai-js";var d0;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(d0||(d0={}));class pte{constructor(e,n,r,s,a){this.model=e,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||fte;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Ate}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function gte(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${mte}/${hte}`),e.join(" ")}async function vte(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",gte(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new Hf(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,a]of r.entries()){if(s==="x-goog-api-key")throw new Hf(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Hf(`Header name ${s} can only be set using the apiClient field`);n.append(s,a)}}return n}async function xte(t,e,n,r,s,a){const i=new pte(t,e,n,r,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},_te(a)),{method:"POST",headers:await vte(i),body:s})}}async function Wx(t,e,n,r,s,a={},i=fetch){const{url:o,fetchOptions:l}=await xte(t,e,n,r,s,a);return yte(o,l,i)}async function yte(t,e,n=fetch){let r;try{r=await n(t,e)}catch(s){wte(s,t)}return r.ok||await bte(r,t),r}function wte(t,e){let n=t;throw n.name==="AbortError"?(n=new xj(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof vj||t instanceof Hf||(n=new rl(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function bte(t,e){let n="",r;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new vj(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function _te(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Fw(t.candidates[0]))throw new am(`${gf(t)}`,t);return Cte(t)}else if(t.promptFeedback)throw new am(`Text not available. ${gf(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Fw(t.candidates[0]))throw new am(`${gf(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),wD(t)[0]}else if(t.promptFeedback)throw new am(`Function call not available. ${gf(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Fw(t.candidates[0]))throw new am(`${gf(t)}`,t);return wD(t)}else if(t.promptFeedback)throw new am(`Function call not available. ${gf(t)}`,t)},t}function Cte(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function wD(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const Ete=[_v.RECITATION,_v.SAFETY,_v.LANGUAGE];function Fw(t){return!!t.finishReason&&Ete.includes(t.finishReason)}function gf(t){var e,n,r;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];Fw(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function Jv(t){return this instanceof Jv?(this.v=t,this):new Jv(t)}function Ste(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(p){r[p]&&(s[p]=function(g){return new Promise(function(w,x){a.push([p,g,w,x])>1||o(p,g)})})}function o(p,g){try{l(r[p](g))}catch(w){h(a[0][3],w)}}function l(p){p.value instanceof Jv?Promise.resolve(p.value.v).then(c,A):h(a[0][2],p)}function c(p){o("next",p)}function A(p){o("throw",p)}function h(p,g){p(g),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Tte(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=kte(e),[r,s]=n.tee();return{stream:Bte(r),response:Nte(s)}}async function Nte(t){const e=[],n=t.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return bB(Ite(e));e.push(s)}}function Bte(t){return Ste(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:s}=yield Jv(n.read());if(s)break;yield yield Jv(bB(r))}})}function kte(t){const e=t.getReader();return new ReadableStream({start(r){let s="";return a();function a(){return e.read().then(({value:i,done:o})=>{if(o){if(s.trim()){r.error(new rl("Failed to parse stream"));return}r.close();return}s+=i;let l=s.match(bD),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new rl(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),s=s.substring(l[0].length),l=s.match(bD)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new xj("Request aborted when reading from the stream"):o=new rl("Error reading from the stream"),o})}}})}function Ite(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let s=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=a.citationMetadata,n.candidates[s].groundingMetadata=a.groundingMetadata,n.candidates[s].finishReason=a.finishReason,n.candidates[s].finishMessage=a.finishMessage,n.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[s].content||(n.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),n.candidates[s].content.parts.push(i)}s++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e,n,r){const s=await Wx(e,d0.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return Tte(s)}async function wj(t,e,n,r){const a=await(await Wx(e,d0.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:bB(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Zv(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return Fte(e)}function Fte(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),s=!0):(e.parts.push(a),r=!0);if(r&&s)throw new rl("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new rl("No content is provided for sending chat message.");return r?e:n}function Dte(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new Hf("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(s)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=Zv(t);r.contents=[a]}return{generateContentRequest:r}}function _D(t){let e;return t.contents?e=t:e={contents:[Zv(t)]},t.systemInstruction&&(e.systemInstruction=bj(t.systemInstruction)),e}function Lte(t){return typeof t=="string"||Array.isArray(t)?{content:Zv(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Rte={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Pte(t){let e=!1;for(const n of t){const{role:r,parts:s}=n;if(!e&&r!=="user")throw new rl(`First content should be with role 'user', got ${r}`);if(!fD.includes(r))throw new rl(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(fD)}`);if(!Array.isArray(s))throw new rl("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new rl("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of CD)l in o&&(a[l]+=1);const i=Rte[r];for(const o of CD)if(!i.includes(o)&&a[o]>0)throw new rl(`Content with role '${r}' can't contain '${o}' part`);e=!0}}function ED(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="SILENT_ERROR";class Mte{constructor(e,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(Pte(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,s,a,i,o,l;await this._sendPromise;const c=Zv(e),A={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),n);let p;return this._sendPromise=this._sendPromise.then(()=>wj(this._apiKey,this.model,A,h)).then(g=>{var w;if(ED(g.response)){this._history.push(c);const x=Object.assign({parts:[],role:"model"},(w=g.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(x)}else{const x=gf(g.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}p=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,p}async sendMessageStream(e,n={}){var r,s,a,i,o,l;await this._sendPromise;const c=Zv(e),A={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),n),p=yj(this._apiKey,this.model,A,h);return this._sendPromise=this._sendPromise.then(()=>p).catch(g=>{throw new Error(SD)}).then(g=>g.response).then(g=>{if(ED(g)){this._history.push(c);const w=Object.assign({},g.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=gf(g);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(g=>{g.message!==SD&&console.error(g)}),p}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ute(t,e,n,r){return(await Wx(e,d0.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ote(t,e,n,r){return(await Wx(e,d0.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function jte(t,e,n,r){const s=n.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await Wx(e,d0.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=bj(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const s=_D(e),a=Object.assign(Object.assign({},this._requestOptions),n);return wj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}async generateContentStream(e,n={}){var r;const s=_D(e),a=Object.assign(Object.assign({},this._requestOptions),n);return yj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}startChat(e){var n;return new Mte(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=Dte(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return Ute(this.apiKey,this.model,r,s)}async embedContent(e,n={}){const r=Lte(e),s=Object.assign(Object.assign({},this._requestOptions),n);return Ote(this.apiKey,this.model,r,s)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return jte(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new rl("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new TD(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Hf("Cached content must contain a `name` field.");if(!e.model)throw new Hf("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(n!=null&&n[i]&&e[i]&&(n==null?void 0:n[i])!==e[i]){if(i==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new Hf(`Different value for "${i}" specified in modelParams (${n[i]}) and cachedContent (${e[i]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new TD(this.apiKey,a,r)}}const _B="horario_asignaciones",_j="horarios_generados",Hte="usuarios",Cj=t=>{const e=t.data();return{id:t.id,...e}},Qte=t=>{const e=mn(zt(Ut,_B));return jn(e,r=>{const s=r.docs.map(a=>Cj(a));t(s)},r=>{console.error("Error al suscribirse a las asignaciones:",r),t([])})},Vte=async t=>{try{return(await la(zt(Ut,_B),t)).id}catch(e){throw console.error("Error al agregar asignacin:",e),new Error("No se pudo agregar la asignacin.")}},zte=async t=>{try{const e=On(Ut,_B,t);await ao(e)}catch(e){throw console.error("Error al eliminar asignacin:",e),new Error("No se pudo eliminar la asignacin.")}},ND=async t=>{try{const e=On(Ut,_j,"global");await Fo(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},Gte=t=>{const e=On(Ut,_j,"global");return jn(e,r=>{r.exists()?t(r.data().data||{}):t({})},r=>{console.error("Error al suscribirse a los horarios:",r),t({})})},qte=t=>{const e=mn(zt(Ut,Hte),fs("profile","==",tn.PROFESORADO));return jn(e,r=>{const s=r.docs.map(a=>Cj(a));t(s)},r=>{console.error("Error al suscribirse a los profesores:",r),t([])})},Kte=({horarios:t})=>Object.keys(t).length===0?u.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no se ha generado ningn horario. Utilice la pestaa de "Configuracin" para generar uno.'})}):u.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),ai.map(e=>u.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),u.jsx("tbody",{children:Iw.map(e=>u.jsxs(yt.Fragment,{children:[u.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:u.jsx("th",{colSpan:2+ai.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),FT.map(({bloque:n,inicio:r,fin:s})=>u.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:n}),u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${r} - ${s}`}),ai.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[n];return u.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?u.jsxs("div",{className:"flex flex-col justify-center h-full",children:[u.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),u.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):u.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${n}`)})]},`${e}-${n}`))]},e))})]})}),$te=()=>{const[t,e]=W.useState([]),[n,r]=W.useState({curso:"",asignatura:"",profesor:""}),[s,a]=W.useState([]),[i,o]=W.useState({}),[l,c]=W.useState(ai[0]),[A,h]=W.useState(!1),[p,g]=W.useState(!0),[w,x]=W.useState(null),[S,N]=W.useState(null),[F,D]=W.useState(null),[R,j]=W.useState({asignatura:"",profesor:""}),[P,E]=W.useState("edicion"),[T,k]=W.useState("");W.useEffect(()=>{g(!0);const K=Qte(e),ne=Gte(o),J=qte(ce=>{const Q=ce.map(Z=>Z.nombreCompleto).sort();a(Q),g(!1)});return()=>{K(),ne(),J()}},[]);const z=async K=>{if(K.preventDefault(),x(null),!n.curso||!n.asignatura||!n.profesor){x("Todos los campos de la asignacin son obligatorios.");return}try{await Vte({curso:n.curso,asignatura:n.asignatura,profesor:n.profesor}),r({curso:"",asignatura:"",profesor:""})}catch(ne){x(ne instanceof Error?ne.message:"Error al guardar la asignacin.")}},M=async K=>{try{await zte(K)}catch(ne){x(ne instanceof Error?ne.message:"Error al eliminar la asignacin.")}},U=async()=>{if(t.length===0){x("Debe agregar al menos una asignacin de profesor antes de generar el horario.");return}h(!0),x(null),N(null);try{const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=new Si(K),J=`
                Eres un asistente experto en planificacin de horarios escolares para un liceo tcnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Das de la semana: ${Iw.join(", ")}
                - Bloques horarios por da: 10 bloques con los siguientes horarios: ${JSON.stringify(FT,null,2)}
                - Cursos del liceo: ${ai.join(", ")}

                **Contexto Adicional de Especialidades (3 y 4 Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecnica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecnica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3/4 Medio Automotriz" y "3/4 Medio Industrial" correctamente.

                **Reglas de Asignacin de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura segn el nivel del curso:
                ${JSON.stringify(Mee,null,2)}
                Notas sobre las reglas:
                - '1 y 2 medio' aplica a cursos que empiezan con '1' o '2'.
                - '3 y 4 medio' aplica a cursos que empiezan con '3' o '4'.
                - Algunas reglas aplican a cursos especficos (ej. Mecnica).

                **Asignaciones de Profesores (Input):**
                Aqu est la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRTICA INVIOLABLE:**
                La restriccin ms importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo da y mismo bloque horario. Es fsicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las dems. No deben existir topes de horario para ningn profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${T||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma ms balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo da si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un nico objeto JSON vlido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1A": {
                    "Lunes": { "1": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1B": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada da de la semana. Cada da tiene claves para cada bloque del 1 al 10. Si un bloque est vaco, usa \`{ "asignatura": null, "profesor": null }\`.
            `,ie=(await(await ne.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(J)).response).text().replace(/^```json\s*|```\s*$/g,""),fe=JSON.parse(ie);await ND(fe),N("Horario generado y guardado con xito!")}catch(K){console.error("Error al generar horario con IA:",K),x("Ocurri un error al contactar con la IA o al procesar la respuesta. Revisa la consola para ms detalles.")}finally{h(!1)}},G=(K,ne,J)=>{D({dia:K,bloque:ne}),j({asignatura:(J==null?void 0:J.asignatura)||"",profesor:(J==null?void 0:J.profesor)||""})},q=async()=>{if(!F)return;const{dia:K,bloque:ne}=F,J=JSON.parse(JSON.stringify(i));J[l]||(J[l]={}),J[l][K]||(J[l][K]={}),J[l][K][ne]={asignatura:R.asignatura||null,profesor:R.profesor||null};try{await ND(J),D(null)}catch(ce){x(ce instanceof Error?ce.message:"Error al guardar la edicin.")}},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=()=>{const K=i[l]||{};return u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[u.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Iw.map(ne=>u.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:ne},ne))]})}),u.jsx("tbody",{children:FT.map(({bloque:ne,inicio:J,fin:ce})=>u.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[u.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:ne}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${J} - ${ce}`})]}),Iw.map(Q=>{var ie;const Z=(F==null?void 0:F.dia)===Q&&(F==null?void 0:F.bloque)===ne,se=(ie=K[Q])==null?void 0:ie[ne];return u.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Z&&G(Q,ne,se),children:Z?u.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[u.jsx("input",{type:"text",placeholder:"Asignatura",value:R.asignatura,onChange:fe=>j(Se=>({...Se,asignatura:fe.target.value})),className:oe+" text-xs mb-1"}),u.jsx("input",{type:"text",placeholder:"Profesor",value:R.profesor,onChange:fe=>j(Se=>({...Se,profesor:fe.target.value})),className:oe+" text-xs"}),u.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[u.jsx("button",{onClick:()=>D(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),u.jsx("button",{onClick:q,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):se!=null&&se.asignatura?u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:se.asignatura}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",se.profesor,")"]})]}):u.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${Q}-${ne}`)})]},ne))})]})})},le=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 1. Configuracin de Asignaciones"}),u.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:n.curso,onChange:K=>r(ne=>({...ne,curso:K.target.value})),className:oe,children:[u.jsx("option",{value:"",children:"Seleccione"}),ai.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignatura",value:n.asignatura,onChange:K=>r(ne=>({...ne,asignatura:K.target.value})),className:oe,children:[u.jsx("option",{value:"",children:"Seleccione"}),Uc.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),u.jsxs("select",{name:"profesor",value:n.profesor,onChange:K=>r(ne=>({...ne,profesor:K.target.value})),className:oe,children:[u.jsx("option",{value:"",children:"Seleccione"}),s.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),u.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:u.jsx("ul",{className:"space-y-2",children:t.map(K=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[u.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[K.curso," - ",K.asignatura," - ",u.jsx("strong",{children:K.profesor})]}),u.jsx("button",{onClick:()=>M(K.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:""})]},K.id))})})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 2. Generacin Automtica con IA"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),u.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:T,onChange:K=>k(K.target.value),rows:3,placeholder:"Ej: Dejar los mdulos tericos en la maana y los prcticos en la tarde. Evitar poner 2 bloques de matemtica seguidos.",className:oe})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:U,disabled:A,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[A&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A?"Generando...":"Generar Horario Completo"]}),w&&u.jsx("p",{className:"text-red-600",children:w}),S&&u.jsx("p",{className:"text-green-600",children:S})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 3. Visualizacin y Edicin por Curso"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),u.jsx("select",{id:"selectCurso",value:l,onChange:K=>c(K.target.value),className:oe+" md:w-1/3",children:ai.map(K=>u.jsx("option",{value:K,children:K},K))})]}),Object.keys(i).length>0?ee():u.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"An no se ha generado ningn horario. Utilice el botn de generacin con IA."})})]})]});return p?u.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>E("edicion"),className:`${P==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuracin y Edicin por Curso"}),u.jsx("button",{onClick:()=>E("global"),className:`${P==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),P==="edicion"?le():u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),u.jsx(Kte,{horarios:i})]})]})},n_="acciones",Wte=async()=>{try{const t=mn(zt(Br,n_),Pr("fechaRegistro","desc"));return(await Ei(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedaggicas")}},Yte=async t=>{try{return{id:(await la(zt(Br,n_),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear accin:",e),new Error("No se pudo crear la accin pedaggica")}},BD=async(t,e)=>{try{const n=On(Br,n_,t);await Gx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar accin:",n,"ID:",t),new Error("No se pudo actualizar la accin pedaggica")}},Xte=async t=>{try{const e=On(Br,n_,t);await ao(e)}catch(e){throw console.error("Error al eliminar accin:",e,"ID:",t),new Error("No se pudo eliminar la accin pedaggica")}},kD={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Jte={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Zte=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!1),[s,a]=W.useState(null),[i,o]=W.useState(kD),[l,c]=W.useState(null),[A,h]=W.useState(""),[p,g]=W.useState(""),[w,x]=W.useState(""),S=W.useCallback(async()=>{r(!0);try{const k=await Wte();e(k),a(null)}catch(k){console.error("Error al cargar acciones:",k),a("No se pudieron cargar las acciones pedaggicas.")}finally{r(!1)}},[]);W.useEffect(()=>{S()},[S]);const N=W.useCallback(k=>{const{name:z,value:M}=k.target;o(U=>({...U,[z]:M}))},[]),F=W.useCallback(()=>{o(kD),c(null),a(null)},[]),D=W.useCallback(async k=>{if(k.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){a("Los campos responsables, rea, descripcin y fecha de cumplimiento son obligatorios.");return}try{l?await BD(l,i):await Yte(i),await S(),F()}catch(z){console.error("Error al guardar accin:",z),a("Error al guardar la accin.")}},[i,l,S,F]),R=W.useCallback(k=>{window.scrollTo({top:0,behavior:"smooth"}),c(k.id),o({...k,enlaceDocumento:k.enlaceDocumento||""})},[]),j=W.useCallback(async k=>{if(window.confirm("Est seguro de que desea eliminar esta accin?"))try{await Xte(k),await S()}catch(z){console.error("Error al eliminar accin:",z),a("No se pudo eliminar la accin.")}},[S]),P=W.useCallback(async k=>{try{const z=t.find(M=>M.id===k);if(z){const U=(my.indexOf(z.estado)+1)%my.length,G=my[U];await BD(k,{estado:G}),await S()}}catch(z){console.error("Error al cambiar estado:",z),a("No se pudo cambiar el estado de la accin.")}},[t,S]),E=W.useMemo(()=>t.filter(k=>{const z=A===""||k.responsable.toLowerCase().includes(A.toLowerCase())||k.descripcion.toLowerCase().includes(A.toLowerCase()),M=p===""||k.area===p,U=w===""||k.estado===w;return z&&M&&U}),[t,A,p,w]),T="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedaggicas"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando accin existente.":"Registre una nueva accin de seguimiento."}),s&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),u.jsxs("form",{onSubmit:D,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),u.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:N,className:T})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),u.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:N,placeholder:"Nombre del responsable",className:T})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"rea Vinculada"}),u.jsxs("select",{name:"area",value:i.area,onChange:N,className:T,children:[u.jsx("option",{value:"",children:"Seleccione un rea"}),rD.map(k=>u.jsx("option",{value:k,children:k},k))]})]}),u.jsxs("div",{className:"lg:col-span-3",children:[u.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripcin de la Accin"}),u.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:N,rows:3,placeholder:"Detalle de la accin a realizar...",className:T})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),u.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:N,className:T})]}),u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),u.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:N,placeholder:"https://ejemplo.com/documento",className:T})]})]}),u.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&u.jsx("button",{type:"button",onClick:F,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Accin":"Registrar Accin"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:A,onChange:k=>h(k.target.value),className:T+" md:col-span-1"}),u.jsxs("select",{value:p,onChange:k=>g(k.target.value),className:T,children:[u.jsx("option",{value:"",children:"Filtrar por rea"}),rD.map(k=>u.jsx("option",{value:k,children:k},k))]}),u.jsxs("select",{value:w,onChange:k=>x(k.target.value),className:T,children:[u.jsx("option",{value:"",children:"Filtrar por Estado"}),my.map(k=>u.jsx("option",{value:k,children:k},k))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripcin"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:n?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):E.length>0?E.map(k=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:k.responsable}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:k.area})]}),u.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:k.descripcion}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[u.jsxs("div",{children:["Reg: ",k.fechaRegistro]}),u.jsxs("div",{className:"font-semibold",children:["Comp: ",k.fechaCumplimiento]})]}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:u.jsx("button",{onClick:()=>P(k.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Jte[k.estado]}`,children:k.estado})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[k.enlaceDocumento&&u.jsx("a",{href:k.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:""}),u.jsx("button",{onClick:()=>R(k),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),u.jsx("button",{onClick:()=>j(k.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},k.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},r_="planificaciones",Ej="actividades_calendario",Sj=t=>{var n,r,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((s=(r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n))==null?void 0:s.toISOString())||e.fechaCreacion}},ene=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:Nn.fromDate(new Date),fechaActualizacion:Nn.fromDate(new Date)};return(await la(zt(Ut,r_),n)).id}catch(n){throw console.error("Error al guardar planificacin:",n),new Error("No se pudo guardar la planificacin")}},tne=async(t,e,n)=>{try{const r=On(Ut,r_,t),s=await zx(r);if(!s.exists()||s.data().userId!==n)throw new Error("No tienes permisos para actualizar esta planificacin");await Gx(r,{...e,fechaActualizacion:Nn.fromDate(new Date)})}catch(r){throw console.error("Error al actualizar planificacin:",r),new Error("No se pudo actualizar la planificacin")}},nne=async(t,e)=>{try{const n=On(Ut,r_,t),r=await zx(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificacin");await ao(n)}catch(n){throw console.error("Error al eliminar planificacin:",n),new Error("No se pudo eliminar la planificacin")}},rne=(t,e)=>{const n=mn(zt(Ut,r_),fs("userId","==",t),Pr("fechaCreacion","desc"));return jn(n,r=>{const s=r.docs.map(Sj);e(s)},r=>{console.error("Error en suscripcin a planificaciones:",r)})},sne=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:Nn.fromDate(new Date),fechaActualizacion:Nn.fromDate(new Date)};return(await la(zt(Ut,Ej),n)).id}catch(n){throw console.error("Error al guardar actividad:",n),new Error("No se pudo guardar la actividad")}},ane=(t,e)=>{const n=mn(zt(Ut,Ej),fs("userId","==",t),Pr("fecha","desc"));return jn(n,r=>{const s=r.docs.map(Sj);e(s)},r=>{console.error("Error en suscripcin a actividades:",r)})},ine=t=>{const[e,n]=W.useState([]),[r,s]=W.useState(!0),[a,i]=W.useState(null);return W.useEffect(()=>t?(s(!0),rne(t,h=>{n(h),s(!1)})):void 0,[t]),{planificaciones:e,loading:r,error:a,save:async A=>{try{return i(null),await ene(A,t)}catch(h){throw i(h.message||"Error al guardar planificacin"),h}},update:async(A,h)=>{try{i(null),await tne(A,h,t)}catch(p){throw i(p.message||"Error al actualizar planificacin"),p}},remove:async A=>{try{i(null),await nne(A,t)}catch(h){throw i(h.message||"Error al eliminar planificacin"),h}}}},DT=t=>{const e=new Date().toISOString();console.log(`[${e}] API Call: ${t}`)},one=t=>{const[e,n]=W.useState([]),[r,s]=W.useState(!0),[a,i]=W.useState(null);W.useEffect(()=>t?ane(t,c=>{n(c),s(!1)}):void 0,[t]);const o=W.useCallback(async l=>{try{return i(null),await sne(l,t)}catch(c){throw i(c instanceof Error?c.message:"Error al guardar actividad"),c}},[t]);return{actividades:e,loading:r,error:a,save:o}},lne=({lesson:t,onClose:e,onSave:n,isLoading:r=!1})=>{const[s,a]=W.useState(t),i=l=>{a({...s,[l.target.name]:l.target.value})},o=async()=>{try{await n(s),e()}catch(l){console.error("Error al guardar leccin:",l)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),u.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(s).map(([l,c])=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),u.jsx("textarea",{name:l,value:c,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:r})]},l))}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[u.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Cancelar"}),u.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:r,children:[r&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},cne=({plan:t,onEditLesson:e,onUseLesson:n,isLoading:r=!1,onUpdatePlan:s})=>{const[a,i]=W.useState(t.progreso??0),[o,l]=W.useState(!1),c=async A=>{const h=parseInt(A.target.value,10);i(h),l(!0);try{t.id&&s&&(await s(t.id,{progreso:h}),console.log(" Progreso actualizado exitosamente"))}catch(p){console.error(" Error completo:",p),alert(`Error al guardar el avance: ${p.message}`),i(t.progreso??0)}finally{l(!1)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",t.indicadoresEvaluacion]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"range",min:0,max:100,value:a,onChange:c,disabled:o||r}),u.jsxs("span",{className:"font-bold w-12",children:[a,"%"]}),o&&u.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),u.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((A,h)=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[u.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",h+1,": ",A.actividades]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo:"})," ",A.objetivosAprendizaje]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Contenidos:"})," ",A.contenidosConceptuales]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Habilidad (Bloom):"})," ",A.habilidadesBloom]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Perfil de Egreso:"})," ",A.perfilEgreso]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Interdisciplinariedad:"})," ",A.asignaturasInterdisciplinariedad]})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[u.jsx("button",{onClick:()=>e(h,A),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Editar"}),u.jsx("button",{onClick:()=>n(A,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:r,children:"Usar para Plan de Clase"})]})]},h))})]})},une=({plan:t,onBack:e,onSave:n,onDelete:r,isLoading:s=!1})=>{const[a,i]=W.useState(t),[o,l]=W.useState(!1),c=h=>{const{name:p,value:g}=h.target,[w,x]=p.split(".");i(w==="momentosClase"?S=>({...S,momentosClase:{...S.momentosClase,[x]:g}}):S=>({...S,[p]:g}))},A=async()=>{l(!0);try{await n(a)}catch(h){console.error("Error al guardar plan de clase:",h)}finally{l(!1)}};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),u.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:s||o,children:" Volver"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),u.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),u.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:c,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),u.jsxs("div",{children:[u.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),u.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:c,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]})]}),u.jsx("div",{className:"text-right mt-6",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("button",{onClick:()=>r(t.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:" Eliminar Plan"}),u.jsxs("button",{onClick:A,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:[o&&u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},dne=({userId:t})=>{const{actividades:e,save:n}=one(t),[r,s]=W.useState("list"),[a,i]=W.useState(null),[o,l]=W.useState(!1),[c,A]=W.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[p,g]=W.useState(h);W.useEffect(()=>{r==="summary"&&a&&w()},[r,a,t]);const w=async()=>{if(a)try{A(!1)}catch(P){console.error("Error al verificar evento en calendario:",P)}},x=P=>{const{name:E,value:T}=P.target;g(k=>({...k,[E]:T}))},S=(P,E,T)=>{g(k=>({...k,tareas:k.tareas.map(z=>z.id===P?{...z,[E]:T}:z)}))},N=()=>{g(P=>({...P,tareas:[...P.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},F=P=>{g(E=>({...E,tareas:E.tareas.filter(T=>T.id!==P)}))},D=async P=>{P.preventDefault(),l(!0);const E=`Basado en la siguiente informacin de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${p.nombre}
    - Descripcin: ${p.descripcion}
    - Tareas: ${p.tareas.map(T=>T.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propsito principal de la actividad.`;try{DT("Planificacin - Actividad Calendario");const T="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=(await(await new Si(T).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),q={...p,objetivo:G.replace(/(\*\*|\*)/g,"")},oe=await n(q),ee={...q,id:oe};i(ee),s("summary")}catch(T){console.error("Error al generar objetivo con IA:",T),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l.");try{const k={...p,objetivo:"No generado"},z=await n(k),M={...k,id:z};i(M),s("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},R=async P=>{if(P)try{A(!0),alert("Actividad marcada como aadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return r==="form"?u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:u.jsxs("form",{onSubmit:D,className:"space-y-8",children:[u.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacin General"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{name:"nombre",value:p.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:j,required:!0,disabled:o}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{name:"fecha",type:"date",value:p.fecha,onChange:x,className:j,required:!0,disabled:o}),u.jsx("input",{name:"hora",type:"time",value:p.hora,onChange:x,className:j,required:!0,disabled:o})]}),u.jsx("textarea",{name:"descripcion",value:p.descripcion,onChange:x,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:j,required:!0,disabled:o}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx("input",{name:"ubicacion",value:p.ubicacion,onChange:x,placeholder:"Ubicacin",className:j,required:!0,disabled:o}),u.jsx("input",{name:"participantes",value:p.participantes,onChange:x,placeholder:"Participantes",className:j,required:!0,disabled:o})]}),u.jsx("textarea",{name:"recursosGenerales",value:p.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:j,disabled:o})]})]}),u.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),u.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),u.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:p.tareas.map((P,E)=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[u.jsx("button",{type:"button",onClick:()=>F(P.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:""}),u.jsx("textarea",{value:P.descripcion,onChange:T=>S(P.id,"descripcion",T.target.value),placeholder:`Descripcin de la Tarea ${E+1}`,rows:2,className:j,required:!0,disabled:o}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[u.jsx("input",{value:P.responsable,onChange:T=>S(P.id,"responsable",T.target.value),placeholder:"Responsable",className:j,required:!0,disabled:o}),u.jsx("input",{value:P.recursos,onChange:T=>S(P.id,"recursos",T.target.value),placeholder:"Recursos Necesarios",className:j,disabled:o})]})]},P.id))})]}),u.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[u.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),u.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{type:"button",onClick:()=>s("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):r==="summary"&&a?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),u.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),u.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),u.jsxs("div",{className:"space-y-4 text-sm",children:[u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),u.jsx("span",{children:a.nombre})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),u.jsx("span",{children:new Date(`${a.fecha}T${a.hora}`).toLocaleString("es-CL")})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),u.jsx("p",{children:a.descripcion})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),u.jsx("span",{children:a.ubicacion})]}),u.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[u.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),u.jsx("span",{children:a.participantes})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),u.jsx("p",{children:a.recursosGenerales})]}),u.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[u.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),u.jsx("p",{children:a.objetivo})]})]}),u.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[u.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),u.jsx("button",{onClick:()=>R(a),disabled:c,className:`font-bold px-4 py-2 rounded-lg transition-colors ${c?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?" Aadido al Calendario":"Aadir al Calendario"})]})]}),u.jsx("button",{onClick:()=>{s("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),u.jsx("button",{onClick:()=>{s("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),u.jsx("div",{className:"space-y-3",children:e.length>0?e.map(P=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:P.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(P.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",P.ubicacion]})]},P.id)):u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Ane=({currentUser:t})=>{const e=t.uid||t.email||t.id||"",{planificaciones:n,save:r,update:s,remove:a,loading:i}=ine(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,c]=W.useState(o),[A,h]=W.useState(null),[p,g]=W.useState(!1),[w,x]=W.useState(null),[S,N]=W.useState("unidad"),[F,D]=W.useState(null),[R,j]=W.useState(null),P=W.useMemo(()=>t.asignaturas||[],[t.asignaturas]),E=W.useMemo(()=>{const J=t.cursos||[],ce=new Set;return J.forEach(Q=>{Q.startsWith("1")?ce.add("1 Medio"):Q.startsWith("2")?ce.add("2 Medio"):Q.startsWith("3")?ce.add("3 Medio"):Q.startsWith("4")&&ce.add("4 Medio")}),Array.from(ce)},[t.cursos]);W.useEffect(()=>{c(J=>({...J,asignatura:P[0]||"",nivel:E[0]||""})),console.log(" Debug datos usuario y planificaciones:",{currentUser:{uid:t.uid,email:t.email,id:t.id,nombreCompleto:t.nombreCompleto},userId:e,planificacionesCount:n.length,planificacionesAutores:n.map(J=>({id:J.id,autor:J.autor,tipo:J.tipo,coincideConUserId:J.autor===e}))})},[P,E,t,e,n]);const T=J=>{const{name:ce,value:Q}=J.target;c(Z=>({...Z,[ce]:ce==="cantidadClases"?parseInt(Q,10):Q}))},k=()=>{const{asignatura:J,nivel:ce,nombreUnidad:Q,contenidos:Z,cantidadClases:se,observaciones:ie,ideasParaUnidad:fe}=l;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica completa en formato JSON estructurado, basndote en la informacin proporcionada.

    **Informacin Base:**
    - Asignatura: ${J}
    - Nivel: ${ce}
    - Nombre de la Unidad: "${Q}"
    - Contenidos clave a trabajar (insumo principal): "${Z}"
    - Cantidad de clases para la unidad: ${se}
    - Ideas y perspectiva del docente para la unidad: "${fe||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${ie||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${se} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},z=async J=>{if(J.preventDefault(),g(!0),x(null),!l.contenidos||!l.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{DT("Planificacin - Unidad");const ce="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=new Si(ce).getGenerativeModel({model:"gemini-1.5-flash-latest"}),se=k(),ie={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},ge=(await(await Z.generateContent({contents:[{parts:[{text:se}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),xe=JSON.parse(ge),ve={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:xe.objetivosAprendizaje,indicadoresEvaluacion:xe.indicadoresEvaluacion,detallesLeccion:xe.detallesLeccion};if(A)await s(A.id,ve),h({...ve,id:A.id});else{const me=await r(ve);h({...ve,id:me})}}catch(ce){console.error("Error al generar planificacin con IA",ce),x("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{g(!1)}},M=async(J,ce)=>{g(!0),x(null);const Q=`A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ce.asignatura}
    - Nivel: ${ce.nivel}
    - Objetivo de la clase: ${J.objetivosAprendizaje}
    - Contenidos: ${J.contenidosConceptuales}
    - Actividades sugeridas: ${J.actividades}
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{DT("Planificacin - Utilizar Clase");const Z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new Si(Z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),fe={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},xe=(await(await ie.generateContent({contents:[{parts:[{text:Q}]}],generationConfig:{responseMimeType:"application/json",responseSchema:fe}})).response).text(),ve=JSON.parse(xe),me={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:ce.asignatura,nivel:ce.nivel,contenidos:J.contenidosConceptuales,observaciones:"",nombreClase:J.actividades,duracionClase:80,momentosClase:ve,detalleLeccionOrigen:J};await r(me),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),N("clase")}catch(Z){console.error("Error al generar plan de clase con IA",Z),x("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{g(!1)}},U=J=>{J.tipo==="Unidad"&&(c({asignatura:J.asignatura,nivel:J.nivel,nombreUnidad:J.nombreUnidad,contenidos:J.contenidos,cantidadClases:J.cantidadClases,observaciones:J.observaciones,ideasParaUnidad:J.ideasParaUnidad||""}),h(J),window.scrollTo({top:0,behavior:"smooth"}))},G=async J=>{if(window.confirm("Est seguro de que desea eliminar esta planificacin?"))try{await a(J),(A==null?void 0:A.id)===J&&(h(null),c(o))}catch(ce){console.error("Error al eliminar planificacin:",ce),alert("Error al eliminar la planificacin. Por favor, intente nuevamente.")}},q=async J=>{if(window.confirm("Est seguro de que desea eliminar este plan de clase?"))try{await a(J),(F==null?void 0:F.id)===J&&D(null),console.log(" Plan de clase eliminado exitosamente")}catch(ce){console.error("Error al eliminar plan de clase:",ce),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},oe=(J,ce)=>{A&&j({planId:A.id,lessonIndex:J,lessonData:ce})},ee=async J=>{if(R)try{const{planId:ce,lessonIndex:Q}=R,Z=n.find(fe=>fe.id===ce&&fe.tipo==="Unidad");if(!Z)return;const se=[...Z.detallesLeccion];se[Q]=J;const ie={...Z,detallesLeccion:se};await s(ce,ie),h(ie),j(null)}catch(ce){console.error("Error al actualizar leccin:",ce),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},le="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=()=>u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."}),i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):u.jsxs("form",{onSubmit:z,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{name:"asignatura",value:l.asignatura,onChange:T,className:le,disabled:p,children:P.length>0?P.map(J=>u.jsx("option",{value:J,children:J},J)):u.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),u.jsx("select",{name:"nivel",value:l.nivel,onChange:T,className:le,disabled:p,children:E.length>0?E.map(J=>u.jsx("option",{value:J,children:J},J)):u.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:T,className:le,placeholder:"Ej: La Clula y sus procesos",disabled:p})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[u.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:T,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificacin debe abordar.",className:le,disabled:p})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[u.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),u.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:T,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:le,disabled:p})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),u.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:T,className:le,min:"1",max:"20",disabled:p})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),u.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:T,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:le,disabled:p})]})]}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",disabled:p||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:p?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A?"Regenerar":"Generar Plan"})}),w&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:w})]})]}),A&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),u.jsx(cne,{plan:A,onEditLesson:oe,onUseLesson:M,onUpdatePlan:s,isLoading:p})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):u.jsx("div",{className:"space-y-4",children:n.filter(J=>J.tipo==="Unidad").length>0?n.filter(J=>J.tipo==="Unidad").map(J=>u.jsx("div",{className:`p-4 border rounded-lg ${(A==null?void 0:A.id)===J.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:J.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(J.fechaCreacion).toLocaleString("es-CL")]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",J.contenidos]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>U(J),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:p,children:"Ver y Editar"}),u.jsx("button",{onClick:()=>G(J.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:p,children:""})]})]})},J.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),ne=()=>{const J=n.filter(ce=>ce.tipo==="Clase").sort((ce,Q)=>new Date(Q.fechaCreacion).getTime()-new Date(ce.fechaCreacion).getTime());return F?u.jsx(une,{plan:F,onBack:()=>D(null),onDelete:q,onSave:async ce=>{try{await s(ce.id,ce),D(ce)}catch(Q){console.error("Error al actualizar plan de clase:",Q),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:p}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):u.jsx("div",{className:"space-y-4",children:J.length>0?J.map(ce=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ce.nombreClase}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ce.fechaCreacion).toLocaleString("es-CL")]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ce.contenidos]})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("button",{onClick:()=>D(ce),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ce.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return!t||!t.email&&!t.id?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),u.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>N("unidad"),className:`${S==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),u.jsx("button",{onClick:()=>N("clase"),className:`${S==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),u.jsx("button",{onClick:()=>N("calendario"),className:`${S==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),S==="unidad"&&K(),S==="clase"&&ne(),S==="calendario"&&u.jsx(dne,{userId:e}),R&&u.jsx(lne,{lesson:R.lessonData,onClose:()=>j(null),onSave:ee,isLoading:p})]})},s_="events",fne=async()=>{try{const t=mn(zt(Br,s_),Pr("date","asc"));return(await Ei(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},hne=async t=>{try{return{id:(await la(zt(Br,s_),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},mne=async(t,e)=>{try{const n=On(Br,s_,t);await Gx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar evento:",n,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},pne=async t=>{try{const e=On(Br,s_,t);await ao(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},gne=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],vne=t=>{switch(t.type){case Qr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Qr.ACTO:return`Acto: ${t.ubicacion}`;case Qr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Qr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},xne=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:s,date:a,isLoading:i})=>{const[o,l]=W.useState({});W.useEffect(()=>{l(s||{type:Qr.EVALUACION,subtype:Mh.PRUEBA_PARCIAL,asignatura:Uc[0],curso:ai[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s,t]);const c="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",A=x=>{const{name:S,value:N}=x.target;l(F=>({...F,[S]:N}))},h=x=>{l(S=>{if(S.type===Qr.SALIDA_PEDAGOGICA){const N=S.cursos||[],F=N.includes(x)?N.filter(D=>D!==x):[...N,x];return{...S,cursos:F.sort()}}return S})},p=x=>{var N;x.preventDefault();let S;switch(o.type){case Qr.EVALUACION:const F={date:a,type:Qr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Mh.RUBRICA||o.subtype===Mh.PAUTA_COTEJO)&&((N=o.enlace)!=null&&N.trim())&&(F.enlace=o.enlace.trim()),S=F;break;case Qr.ACTO:S={date:a,type:Qr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Qr.ACTIVIDAD_FOCALIZADA:S={date:a,type:Qr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Qr.SALIDA_PEDAGOGICA:S={date:a,type:Qr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}n(S)};if(!t)return null;const g=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),w=()=>{switch(o.type){case Qr.EVALUACION:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),u.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:A,required:!0,className:c,children:Uee.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:A,required:!0,className:c,children:Uc.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:A,required:!0,className:c,children:ai.map(x=>u.jsx("option",{value:x,children:x},x))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),u.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:A,required:!0,rows:3,className:c})]}),(o.subtype===Mh.RUBRICA||o.subtype===Mh.PAUTA_COTEJO)&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),u.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:A,placeholder:"https://...",className:c})]})]});case Qr.ACTO:case Qr.ACTIVIDAD_FOCALIZADA:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),u.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:A,required:!0,className:c})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicacin"}),u.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:A,required:!0,className:c})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),u.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:A,required:!0,className:c})]})]});case Qr.SALIDA_PEDAGOGICA:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),u.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:A,required:!0,className:c})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),u.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:A,required:!0,className:c})]}),u.jsxs("fieldset",{children:[u.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),u.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:ai.map(x=>u.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>h(x),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{children:x})]},x))})]})]});default:return null}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:x=>x.stopPropagation(),children:u.jsxs("form",{onSubmit:p,children:[u.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),u.jsx("select",{id:"type",name:"type",value:o.type,onChange:A,className:c,children:Object.values(Qr).map(x=>u.jsx("option",{value:x,children:x},x))})]}),w()]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[u.jsx("div",{children:s&&r&&u.jsx("button",{type:"button",onClick:r,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),u.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},yne=({profile:t})=>{const[e,n]=W.useState(new Date),[r,s]=W.useState([]),[a,i]=W.useState(!1),[o,l]=W.useState(null),[c,A]=W.useState(!1),[h,p]=W.useState(Object.values(Qr)),[g,w]=W.useState(!1),[x,S]=W.useState(null),[N,F]=W.useState(null),D=W.useCallback(async()=>{i(!0);try{const M=await fne();s(M),l(null)}catch(M){console.error("Error al cargar eventos desde Firestore",M),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);W.useEffect(()=>{D()},[D]);const R=W.useMemo(()=>{const M=e.getFullYear(),U=e.getMonth(),G=new Date(M,U,1).getDay(),q=new Date(M,U+1,0).getDate(),oe=[];let ee=1;for(let le=0;le<6;le++){const K=[];for(let ne=0;ne<7;ne++)le===0&&ne<G||ee>q?K.push(null):(K.push(new Date(M,U,ee)),ee++);if(oe.push(K),ee>q)break}return oe},[e]),j=M=>{p(U=>U.includes(M)?U.filter(G=>G!==M):[...U,M])},P=()=>{h.length===Object.values(Qr).length?p([]):p(Object.values(Qr))},E=M=>{t!==tn.ESTUDIANTE&&(S(M.toISOString().split("T")[0]),F(null),w(!0))},T=(M,U)=>{U.stopPropagation(),t!==tn.ESTUDIANTE&&(S(M.date),F(M),w(!0))},k=async M=>{A(!0);try{N?await mne(N.id,M):await hne(M),await D(),w(!1)}catch(U){console.error("Error al guardar evento:",U);const G=U instanceof Error?U.message:"Error desconocido";l(`Error al guardar el evento: ${G}`)}finally{A(!1)}},z=async()=>{if(N){A(!0);try{await pne(N.id),await D(),w(!1)}catch(M){console.error("Error al eliminar evento:",M);const U=M instanceof Error?M.message:"Error desconocido";l(`No se pudo eliminar el evento: ${U}`)}finally{A(!1)}}};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Acadmico"}),a&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&r.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),u.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y acadmico."})})]})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),u.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[u.jsx("button",{onClick:P,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(Qr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Qr).map(M=>u.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(M)?`shadow-sm ${Ef[M].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[u.jsx("input",{type:"checkbox",checked:h.includes(M),onChange:()=>j(M),className:"hidden"}),u.jsx("span",{children:Ef[M].icon}),u.jsx("span",{children:Ef[M].label})]},M))]})]}),u.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[u.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[u.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),u.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),u.jsx("button",{onClick:()=>n(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),u.jsx("div",{className:"grid grid-cols-7",children:gne.map(M=>u.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:M},M))}),u.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:R.flat().map((M,U)=>{const G=M&&M.toDateString()===new Date().toDateString(),q=M==null?void 0:M.toISOString().split("T")[0],oe=q?r.filter(ee=>ee.date===q&&h.includes(ee.type)):[];return u.jsx("div",{onClick:()=>M&&E(M),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${M?t!==tn.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:M&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:`self-end text-sm font-semibold ${G?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:M.getDate()}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:oe.map(ee=>u.jsxs("div",{onClick:le=>T(ee,le),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Ef[ee.type].color}`,children:[u.jsx("span",{children:Ef[ee.type].icon}),u.jsx("span",{className:"truncate",children:vne(ee)})]},ee.id))}),t!==tn.ESTUDIANTE&&u.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},U)})})]}),g&&u.jsx(xne,{isOpen:g,onClose:()=>w(!1),onSave:k,onDelete:z,event:N,date:x,isLoading:c})]})},a_="anuncios",wne=async()=>{try{const t=mn(zt(Br,a_),Pr("fechaPublicacion","desc"));return(await Ei(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},bne=async t=>{try{return{id:(await la(zt(Br,a_),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},_ne=async(t,e)=>{try{const n=On(Br,a_,t);await Gx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar anuncio:",n,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Cne=async t=>{try{const e=On(Br,a_,t);await ao(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},ID=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],Ene=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState(!1),[a,i]=W.useState(null),[o,l]=W.useState({titulo:"",mensaje:"",adjunto:""}),[c,A]=W.useState({tipo:"Todos",cursos:[]}),h=W.useCallback(async()=>{s(!0);try{const E=await wne();n(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);W.useEffect(()=>{h()},[h]);const p=E=>{const{name:T,value:k}=E.target;l(z=>({...z,[T]:k}))},g=E=>{A({tipo:E,cursos:E==="Cursos"?[]:void 0})},w=E=>{A(T=>{var z;if(T.tipo!=="Cursos")return T;const k=(z=T.cursos)!=null&&z.includes(E)?T.cursos.filter(M=>M!==E):[...T.cursos||[],E];return{...T,cursos:k}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(c.tipo==="Cursos"&&(!c.cursos||c.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const T={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:c,...o};await bne(T),await h(),l({titulo:"",mensaje:"",adjunto:""}),A({tipo:"Todos",cursos:[]})}catch(T){console.error("Error al crear anuncio:",T),i("Error al publicar el anuncio en la nube.")}},S=async E=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await Cne(E),await h()}catch(T){console.error("Error al eliminar anuncio:",T),i("No se pudo eliminar el anuncio en la nube.")}},N=async E=>{try{const T=e.find(k=>k.id===E);T&&(await _ne(E,{destacado:!T.destacado}),await h())}catch(T){console.error("Error al actualizar anuncio:",T),i("No se pudo actualizar el estado del anuncio en la nube.")}},F=W.useMemo(()=>[...e].sort((E,T)=>E.destacado&&!T.destacado?-1:!E.destacado&&T.destacado?1:new Date(T.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[e]),D=W.useMemo(()=>{const E=t.profile,T=t.curso;return F.filter(k=>{if(E===tn.SUBDIRECCION)return!0;if(!k.destinatarios)return E!==tn.ESTUDIANTE;const{tipo:z,cursos:M}=k.destinatarios;return z==="Todos"||z==="Profesores"&&E===tn.PROFESORADO||z==="Coordinacin TP"&&E===tn.COORDINACION_TP?!0:z==="Cursos"?E===tn.ESTUDIANTE?M==null?void 0:M.includes(T||""):!0:!1})},[F,t]),R=E=>t.profile===tn.ESTUDIANTE?!1:t.profile===tn.SUBDIRECCION||t.profile===E.profileCreador,j=()=>t.profile===tn.SUBDIRECCION||t.profile===tn.PROFESORADO,P="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),r&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==tn.ESTUDIANTE?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),u.jsxs("form",{onSubmit:x,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),u.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:p,required:!0,className:P})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),u.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:p,required:!0,rows:4,className:P})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),u.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(E=>u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:c.tipo===E,onChange:()=>g(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),u.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinacin TP","Coord. TP")})]},E))})]}),c.tipo==="Cursos"&&u.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ai.map(E=>{var T;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(T=c.cursos)==null?void 0:T.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),u.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:p,placeholder:"https://ejemplo.com/documento.pdf",className:P})]}),u.jsx("div",{className:"pt-2 text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!r&&D.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!r&&D.length>0&&D.map((E,T)=>{const k=ID[T%ID.length];return u.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${k.bg} ${k.rotate}`,children:[E.destacado&&u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),u.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),u.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&u.jsx("div",{className:"font-sans text-sm mb-4",children:u.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),u.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold",children:E.autor}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),u.jsxs("div",{className:"flex items-center",children:[j()&&u.jsx("button",{onClick:()=>N(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:""})}),R(E)&&u.jsx("button",{onClick:()=>S(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},Tj="api_logs",Sne=async(t,e)=>{try{const n={module:t,userId:e.id,userEmail:e.email,userName:e.nombreCompleto,timestamp:Nn.fromDate(new Date)};await la(zt(Ut,Tj),n)}catch(n){console.error("Error al registrar la llamada a la API en Firestore:",n)}},Tne=t=>{const e=mn(zt(Ut,Tj),Pr("timestamp","desc"));return jn(e,r=>{const s=r.docs.map(a=>{var o,l;const i=a.data();return{id:a.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});t(s)},r=>{console.error("Error al suscribirse a los logs de API:",r),t([])})},TA=(t,e)=>{if(!e||!e.id||!e.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}Sne(t,e)},CB="actas_de_reunion",Nne=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion}},Bne=t=>{const e=mn(zt(Ut,CB),Pr("fechaCreacion","desc"));return jn(e,r=>{const s=r.docs.map(a=>Nne(a));t(s)},r=>{console.error("Error al suscribirse a las actas:",r),t([])})},kne=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Nn.fromDate(new Date(t.fechaCreacion))};return(await la(zt(Ut,CB),n)).id}catch(n){throw console.error("Error al crear el acta:",n),new Error("No se pudo crear el acta.")}},Ine=async t=>{try{const e=On(Ut,CB,t);await ao(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},Nj=window.SpeechRecognition||window.webkitSpeechRecognition,FD=!!Nj,Fne=({isListening:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Dne=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState(null),[a,i]=W.useState({tipoReunion:kE[0],asistentes:"",textoReunion:""}),[o,l]=W.useState(!1),[c,A]=W.useState(!1),[h,p]=W.useState(!0),[g,w]=W.useState(null),x=W.useRef(null);W.useEffect(()=>{p(!0);const E=Bne(T=>{n(T),!r&&T.length>0&&s(T[0]),p(!1)});return()=>E()},[r]);const S=E=>{const{name:T,value:k}=E.target;i(z=>({...z,[T]:k}))},N=W.useCallback(()=>{var E;if(!FD){w("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new Nj,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=T=>{let k="";for(let z=T.resultIndex;z<T.results.length;++z)T.results[z].isFinal&&(k+=T.results[z][0].transcript+". ");i(z=>({...z,textoReunion:z.textoReunion+k}))},x.current.onstart=()=>l(!0),x.current.onend=()=>l(!1),x.current.onerror=T=>{console.error("Speech recognition error",T.error),w(`Error de reconocimiento: ${T.error}`),l(!1)},x.current.start())},[o]),F=async E=>{E.preventDefault();const{tipoReunion:T,asistentes:k,textoReunion:z}=a;if(!T||!k.trim()||!z.trim()){w("Todos los campos son obligatorios.");return}A(!0),w(null);try{TA("Generador de Actas");const M="",G=new globalThis.GoogleGenerativeAI(M).getGenerativeModel({model:"gemini-pro"}),q=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${z}"
                
                Asistentes a la reunin para referencia de nombres: ${k}
            `,K=(await(await G.generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),ne=JSON.parse(K),J={fechaCreacion:new Date().toISOString(),...a,...ne},ce=await kne(J,t);i({tipoReunion:kE[0],asistentes:"",textoReunion:""})}catch(M){console.error("Error al analizar acta con IA:",M),w("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{A(!1)}},D=async E=>{if(window.confirm("Est seguro de que desea eliminar esta acta?"))try{await Ine(E),(r==null?void 0:r.id)===E&&s(e.length>1?e[1]:null)}catch(T){console.error("Error deleting acta:",T),alert("No se pudo eliminar el acta.")}},R=E=>{s(E)},j=E=>E.temas||E.acuerdos||E.plazos||E.responsables?u.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),E.temas&&E.temas.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((k,z)=>u.jsx("li",{children:k},z))})]}),E.acuerdos&&E.acuerdos.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((k,z)=>u.jsx("li",{children:k},z))})]}),E.plazos&&E.plazos.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((k,z)=>u.jsx("li",{children:k},z))})]}),E.responsables&&E.responsables.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),u.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((k,z)=>u.jsx("li",{children:k},z))})]})]}):null,P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?u.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[u.jsxs("div",{className:"md:col-span-1 space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),u.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",u.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),u.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:S,required:!0,className:P,children:kE.map(E=>u.jsx("option",{value:E,children:E},E))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),u.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:S,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:P})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),u.jsxs("div",{className:"relative",children:[u.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:S,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:P}),FD&&u.jsx("button",{type:"button",onClick:N,title:o?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:u.jsx(Fne,{isListening:o})})]})]}),g&&u.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g}),u.jsx("div",{className:"pt-2 text-right",children:u.jsx("button",{type:"submit",disabled:c,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),u.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(E=>u.jsxs("button",{onClick:()=>R(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(r==null?void 0:r.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),u.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:r?u.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${r.tipoReunion}`}),u.jsx("button",{onClick:()=>D(r.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[u.jsx("strong",{children:"Fecha:"})," ",new Date(r.fechaCreacion).toLocaleString("es-CL")]}),u.jsx("h2",{children:"Asistentes"}),u.jsx("ul",{className:"list-disc pl-5",children:String(r.asistentes||"").split(",").map((E,T)=>E.trim()&&u.jsx("li",{children:E.trim()},T))}),j(r),u.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:u.jsx("p",{children:r.textoReunion})})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},Lne="modulepreload",Rne=function(t){return"/"+t},DD={},I2=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(c){return Promise.all(c.map(A=>Promise.resolve(A).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(n.map(c=>{if(c=Rne(c),c in DD)return;DD[c]=!0;const A=c.endsWith(".css"),h=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=A?"stylesheet":Lne,A||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),A)return new Promise((g,w)=>{p.addEventListener("load",g),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Bs(t){"@babel/helpers - typeof";return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bs(t)}var sl=Uint8Array,Rc=Uint16Array,EB=Int32Array,i_=new sl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o_=new sl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LT=new sl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bj=function(t,e){for(var n=new Rc(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new EB(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},kj=Bj(i_,2),Ij=kj.b,RT=kj.r;Ij[28]=258,RT[258]=28;var Fj=Bj(o_,0),Pne=Fj.b,LD=Fj.r,PT=new Rc(32768);for(var aa=0;aa<32768;++aa){var uf=(aa&43690)>>1|(aa&21845)<<1;uf=(uf&52428)>>2|(uf&13107)<<2,uf=(uf&61680)>>4|(uf&3855)<<4,PT[aa]=((uf&65280)>>8|(uf&255)<<8)>>1}var Md=function(t,e,n){for(var r=t.length,s=0,a=new Rc(e);s<r;++s)t[s]&&++a[t[s]-1];var i=new Rc(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(n){o=new Rc(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],A=e-t[s],h=i[t[s]-1]++<<A,p=h|(1<<A)-1;h<=p;++h)o[PT[h]>>l]=c}else for(o=new Rc(r),s=0;s<r;++s)t[s]&&(o[s]=PT[i[t[s]-1]++]>>15-t[s]);return o},th=new sl(288);for(var aa=0;aa<144;++aa)th[aa]=8;for(var aa=144;aa<256;++aa)th[aa]=9;for(var aa=256;aa<280;++aa)th[aa]=7;for(var aa=280;aa<288;++aa)th[aa]=8;var ex=new sl(32);for(var aa=0;aa<32;++aa)ex[aa]=5;var Mne=Md(th,9,0),Une=Md(th,9,1),One=Md(ex,5,0),jne=Md(ex,5,1),DE=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Mu=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},LE=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},SB=function(t){return(t+7)/8|0},Dj=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new sl(t.subarray(e,n))},Hne=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hu=function(t,e,n){var r=new Error(e||Hne[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Hu),!n)throw r;return r},Qne=function(t,e,n,r){var s=t.length,a=0;if(!s||e.f&&!e.l)return n||new sl(0);var i=!n,o=i||e.i!=2,l=e.i;i&&(n=new sl(s*3));var c=function(me){var he=n.length;if(me>he){var He=new sl(Math.max(he*2,me));He.set(n),n=He}},A=e.f||0,h=e.p||0,p=e.b||0,g=e.l,w=e.d,x=e.m,S=e.n,N=s*8;do{if(!g){A=Mu(t,h,1);var F=Mu(t,h+1,3);if(h+=3,F)if(F==1)g=Une,w=jne,x=9,S=5;else if(F==2){var P=Mu(t,h,31)+257,E=Mu(t,h+10,15)+4,T=P+Mu(t,h+5,31)+1;h+=14;for(var k=new sl(T),z=new sl(19),M=0;M<E;++M)z[LT[M]]=Mu(t,h+M*3,7);h+=E*3;for(var U=DE(z),G=(1<<U)-1,q=Md(z,U,1),M=0;M<T;){var oe=q[Mu(t,h,G)];h+=oe&15;var D=oe>>4;if(D<16)k[M++]=D;else{var ee=0,le=0;for(D==16?(le=3+Mu(t,h,3),h+=2,ee=k[M-1]):D==17?(le=3+Mu(t,h,7),h+=3):D==18&&(le=11+Mu(t,h,127),h+=7);le--;)k[M++]=ee}}var K=k.subarray(0,P),ne=k.subarray(P);x=DE(K),S=DE(ne),g=Md(K,x,1),w=Md(ne,S,1)}else Hu(1);else{var D=SB(h)+4,R=t[D-4]|t[D-3]<<8,j=D+R;if(j>s){l&&Hu(0);break}o&&c(p+R),n.set(t.subarray(D,j),p),e.b=p+=R,e.p=h=j*8,e.f=A;continue}if(h>N){l&&Hu(0);break}}o&&c(p+131072);for(var J=(1<<x)-1,ce=(1<<S)-1,Q=h;;Q=h){var ee=g[LE(t,h)&J],Z=ee>>4;if(h+=ee&15,h>N){l&&Hu(0);break}if(ee||Hu(2),Z<256)n[p++]=Z;else if(Z==256){Q=h,g=null;break}else{var se=Z-254;if(Z>264){var M=Z-257,ie=i_[M];se=Mu(t,h,(1<<ie)-1)+Ij[M],h+=ie}var fe=w[LE(t,h)&ce],Se=fe>>4;fe||Hu(3),h+=fe&15;var ne=Pne[Se];if(Se>3){var ie=o_[Se];ne+=LE(t,h)&(1<<ie)-1,h+=ie}if(h>N){l&&Hu(0);break}o&&c(p+131072);var ge=p+se;if(p<ne){var xe=a-ne,ve=Math.min(ne,ge);for(xe+p<0&&Hu(3);p<ve;++p)n[p]=r[xe+p]}for(;p<ge;++p)n[p]=n[p-ne]}}e.l=g,e.p=Q,e.b=p,e.f=A,g&&(A=1,e.m=x,e.d=w,e.n=S)}while(!A);return p!=n.length&&i?Dj(n,0,p):n.subarray(0,p)},lA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Fg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},RE=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return{t:Rj,l:0};if(s==1){var i=new sl(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(j,P){return j.f-P.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,A=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};A!=s-1;)o=n[n[c].f<n[h].f?c++:h++],l=n[c!=A&&n[c].f<n[h].f?c++:h++],n[A++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<s;++r)a[r].s>p&&(p=a[r].s);var g=new Rc(p+1),w=MT(n[A-1],g,0);if(w>e){var r=0,x=0,S=w-e,N=1<<S;for(a.sort(function(P,E){return g[E.s]-g[P.s]||P.f-E.f});r<s;++r){var F=a[r].s;if(g[F]>e)x+=N-(1<<w-g[F]),g[F]=e;else break}for(x>>=S;x>0;){var D=a[r].s;g[D]<e?x-=1<<e-g[D]++-1:++r}for(;r>=0&&x;--r){var R=a[r].s;g[R]==e&&(--g[R],++x)}w=e}return{t:new sl(g),l:w}},MT=function(t,e,n){return t.s==-1?Math.max(MT(t.l,e,n+1),MT(t.r,e,n+1)):e[t.s]=n},RD=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Rc(++e),r=0,s=t[0],a=1,i=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:n.subarray(0,r),n:e}},Dg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Lj=function(t,e,n){var r=n.length,s=SB(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<r;++a)t[s+a+4]=n[a];return(s+4+r)*8},PD=function(t,e,n,r,s,a,i,o,l,c,A){lA(e,A++,n),++s[256];for(var h=RE(s,15),p=h.t,g=h.l,w=RE(a,15),x=w.t,S=w.l,N=RD(p),F=N.c,D=N.n,R=RD(x),j=R.c,P=R.n,E=new Rc(19),T=0;T<F.length;++T)++E[F[T]&31];for(var T=0;T<j.length;++T)++E[j[T]&31];for(var k=RE(E,7),z=k.t,M=k.l,U=19;U>4&&!z[LT[U-1]];--U);var G=c+5<<3,q=Dg(s,th)+Dg(a,ex)+i,oe=Dg(s,p)+Dg(a,x)+i+14+3*U+Dg(E,z)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&G<=q&&G<=oe)return Lj(e,A,t.subarray(l,l+c));var ee,le,K,ne;if(lA(e,A,1+(oe<q)),A+=2,oe<q){ee=Md(p,g,0),le=p,K=Md(x,S,0),ne=x;var J=Md(z,M,0);lA(e,A,D-257),lA(e,A+5,P-1),lA(e,A+10,U-4),A+=14;for(var T=0;T<U;++T)lA(e,A+3*T,z[LT[T]]);A+=3*U;for(var ce=[F,j],Q=0;Q<2;++Q)for(var Z=ce[Q],T=0;T<Z.length;++T){var se=Z[T]&31;lA(e,A,J[se]),A+=z[se],se>15&&(lA(e,A,Z[T]>>5&127),A+=Z[T]>>12)}}else ee=Mne,le=th,K=One,ne=ex;for(var T=0;T<o;++T){var ie=r[T];if(ie>255){var se=ie>>18&31;Fg(e,A,ee[se+257]),A+=le[se+257],se>7&&(lA(e,A,ie>>23&31),A+=i_[se]);var fe=ie&31;Fg(e,A,K[fe]),A+=ne[fe],fe>3&&(Fg(e,A,ie>>5&8191),A+=o_[fe])}else Fg(e,A,ee[ie]),A+=le[ie]}return Fg(e,A,ee[256]),A+le[256]},Vne=new EB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rj=new sl(0),zne=function(t,e,n,r,s,a){var i=a.z||t.length,o=new sl(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),c=a.l,A=(a.r||0)&7;if(e){A&&(l[0]=a.r>>3);for(var h=Vne[e-1],p=h>>13,g=h&8191,w=(1<<n)-1,x=a.p||new Rc(32768),S=a.h||new Rc(w+1),N=Math.ceil(n/3),F=2*N,D=function(et){return(t[et]^t[et+1]<<N^t[et+2]<<F)&w},R=new EB(25e3),j=new Rc(288),P=new Rc(32),E=0,T=0,k=a.i||0,z=0,M=a.w||0,U=0;k+2<i;++k){var G=D(k),q=k&32767,oe=S[G];if(x[q]=oe,S[G]=q,M<=k){var ee=i-k;if((E>7e3||z>24576)&&(ee>423||!c)){A=PD(t,l,0,R,j,P,T,z,U,k-U,A),z=E=T=0,U=k;for(var le=0;le<286;++le)j[le]=0;for(var le=0;le<30;++le)P[le]=0}var K=2,ne=0,J=g,ce=q-oe&32767;if(ee>2&&G==D(k-ce))for(var Q=Math.min(p,ee)-1,Z=Math.min(32767,k),se=Math.min(258,ee);ce<=Z&&--J&&q!=oe;){if(t[k+K]==t[k+K-ce]){for(var ie=0;ie<se&&t[k+ie]==t[k+ie-ce];++ie);if(ie>K){if(K=ie,ne=ce,ie>Q)break;for(var fe=Math.min(ce,ie-2),Se=0,le=0;le<fe;++le){var ge=k-ce+le&32767,xe=x[ge],ve=ge-xe&32767;ve>Se&&(Se=ve,oe=ge)}}}q=oe,oe=x[q],ce+=q-oe&32767}if(ne){R[z++]=268435456|RT[K]<<18|LD[ne];var me=RT[K]&31,he=LD[ne]&31;T+=i_[me]+o_[he],++j[257+me],++P[he],M=k+K,++E}else R[z++]=t[k],++j[t[k]]}}for(k=Math.max(k,M);k<i;++k)R[z++]=t[k],++j[t[k]];A=PD(t,l,c,R,j,P,T,z,U,k-U,A),c||(a.r=A&7|l[A/8|0]<<3,A-=7,a.h=S,a.p=x,a.i=k,a.w=M)}else{for(var k=a.w||0;k<i+c;k+=65535){var He=k+65535;He>=i&&(l[A/8|0]=c,He=i),A=Lj(l,A+1,t.subarray(k,He))}a.i=i}return Dj(o,0,r+SB(A)+s)},Pj=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,a=n.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Gne=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new sl(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return zne(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},Mj=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},qne=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=Pj();s.p(e.dictionary),Mj(t,2,s.d())}},Kne=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Hu(6,"invalid zlib data"),(t[1]>>5&1)==1&&Hu(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function UT(t,e){e||(e={});var n=Pj();n.p(t);var r=Gne(t,e,e.dictionary?6:2,4);return qne(r,e),Mj(r,r.length-4,n.d()),r}function $ne(t,e){return Qne(t.subarray(Kne(t),-4),{i:2},e,e)}var Wne=typeof TextDecoder<"u"&&new TextDecoder,Yne=0;try{Wne.decode(Rj,{stream:!0}),Yne=1}catch{}var Wn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function PE(){Wn.console&&typeof Wn.console.log=="function"&&Wn.console.log.apply(Wn.console,arguments)}var js={log:PE,warn:function(t){Wn.console&&(typeof Wn.console.warn=="function"?Wn.console.warn.apply(Wn.console,arguments):PE.call(null,arguments))},error:function(t){Wn.console&&(typeof Wn.console.error=="function"?Wn.console.error.apply(Wn.console,arguments):PE(t))}};function ME(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Rh(r.response,e,n)},r.onerror=function(){js.error("could not download file")},r.send()}function MD(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Cv,OT,Rh=Wn.saveAs||((typeof window>"u"?"undefined":Bs(window))!=="object"||window!==Wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Wn.URL||Wn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?MD(s.href)?ME(t,e,n):gy(s,s.target="_blank"):gy(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){gy(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(MD(t))ME(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){gy(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Bs(a)!=="object"&&(js.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return ME(t,e,n);var s=t.type==="application/octet-stream",a=/constructor/i.test(Wn.HTMLElement)||Wn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":Bs(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var A=o.result;A=i?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=A:location=A,r=null},o.readAsDataURL(t)}else{var l=Wn.URL||Wn.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Uj(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function UE(t,e){var n=t[0],r=t[1],s=t[2],a=t[3];n=Go(n,r,s,a,e[0],7,-680876936),a=Go(a,n,r,s,e[1],12,-389564586),s=Go(s,a,n,r,e[2],17,606105819),r=Go(r,s,a,n,e[3],22,-1044525330),n=Go(n,r,s,a,e[4],7,-176418897),a=Go(a,n,r,s,e[5],12,1200080426),s=Go(s,a,n,r,e[6],17,-1473231341),r=Go(r,s,a,n,e[7],22,-45705983),n=Go(n,r,s,a,e[8],7,1770035416),a=Go(a,n,r,s,e[9],12,-1958414417),s=Go(s,a,n,r,e[10],17,-42063),r=Go(r,s,a,n,e[11],22,-1990404162),n=Go(n,r,s,a,e[12],7,1804603682),a=Go(a,n,r,s,e[13],12,-40341101),s=Go(s,a,n,r,e[14],17,-1502002290),n=qo(n,r=Go(r,s,a,n,e[15],22,1236535329),s,a,e[1],5,-165796510),a=qo(a,n,r,s,e[6],9,-1069501632),s=qo(s,a,n,r,e[11],14,643717713),r=qo(r,s,a,n,e[0],20,-373897302),n=qo(n,r,s,a,e[5],5,-701558691),a=qo(a,n,r,s,e[10],9,38016083),s=qo(s,a,n,r,e[15],14,-660478335),r=qo(r,s,a,n,e[4],20,-405537848),n=qo(n,r,s,a,e[9],5,568446438),a=qo(a,n,r,s,e[14],9,-1019803690),s=qo(s,a,n,r,e[3],14,-187363961),r=qo(r,s,a,n,e[8],20,1163531501),n=qo(n,r,s,a,e[13],5,-1444681467),a=qo(a,n,r,s,e[2],9,-51403784),s=qo(s,a,n,r,e[7],14,1735328473),n=Ko(n,r=qo(r,s,a,n,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Ko(a,n,r,s,e[8],11,-2022574463),s=Ko(s,a,n,r,e[11],16,1839030562),r=Ko(r,s,a,n,e[14],23,-35309556),n=Ko(n,r,s,a,e[1],4,-1530992060),a=Ko(a,n,r,s,e[4],11,1272893353),s=Ko(s,a,n,r,e[7],16,-155497632),r=Ko(r,s,a,n,e[10],23,-1094730640),n=Ko(n,r,s,a,e[13],4,681279174),a=Ko(a,n,r,s,e[0],11,-358537222),s=Ko(s,a,n,r,e[3],16,-722521979),r=Ko(r,s,a,n,e[6],23,76029189),n=Ko(n,r,s,a,e[9],4,-640364487),a=Ko(a,n,r,s,e[12],11,-421815835),s=Ko(s,a,n,r,e[15],16,530742520),n=$o(n,r=Ko(r,s,a,n,e[2],23,-995338651),s,a,e[0],6,-198630844),a=$o(a,n,r,s,e[7],10,1126891415),s=$o(s,a,n,r,e[14],15,-1416354905),r=$o(r,s,a,n,e[5],21,-57434055),n=$o(n,r,s,a,e[12],6,1700485571),a=$o(a,n,r,s,e[3],10,-1894986606),s=$o(s,a,n,r,e[10],15,-1051523),r=$o(r,s,a,n,e[1],21,-2054922799),n=$o(n,r,s,a,e[8],6,1873313359),a=$o(a,n,r,s,e[15],10,-30611744),s=$o(s,a,n,r,e[6],15,-1560198380),r=$o(r,s,a,n,e[13],21,1309151649),n=$o(n,r,s,a,e[4],6,-145523070),a=$o(a,n,r,s,e[11],10,-1120210379),s=$o(s,a,n,r,e[2],15,718787259),r=$o(r,s,a,n,e[9],21,-343485551),t[0]=Nf(n,t[0]),t[1]=Nf(r,t[1]),t[2]=Nf(s,t[2]),t[3]=Nf(a,t[3])}function l_(t,e,n,r,s,a){return e=Nf(Nf(e,t),Nf(r,a)),Nf(e<<s|e>>>32-s,n)}function Go(t,e,n,r,s,a,i){return l_(e&n|~e&r,t,e,s,a,i)}function qo(t,e,n,r,s,a,i){return l_(e&r|n&~r,t,e,s,a,i)}function Ko(t,e,n,r,s,a,i){return l_(e^n^r,t,e,s,a,i)}function $o(t,e,n,r,s,a,i){return l_(n^(e|~r),t,e,s,a,i)}function Oj(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)UE(r,Xne(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(UE(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,UE(r,s),r}function Xne(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Cv=Wn.atob.bind(Wn),OT=Wn.btoa.bind(Wn);var UD="0123456789abcdef".split("");function Jne(t){for(var e="",n=0;n<4;n++)e+=UD[t>>8*n+4&15]+UD[t>>8*n&15];return e}function Zne(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function jT(t){return Oj(t).map(Zne).join("")}var ere=function(t){for(var e=0;e<t.length;e++)t[e]=Jne(t[e]);return t.join("")}(Oj("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nf(t,e){if(ere){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function HT(t,e){var n,r,s,a;if(t!==n){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var A=o[l];c=(c+A+i.charCodeAt(l))%256,o[l]=o[c],o[c]=A}n=t,r=o}else o=r;var h=e.length,p=0,g=0,w="";for(l=0;l<h;l++)g=(g+(A=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=A,i=o[(o[p]+o[g])%256],w+=String.fromCharCode(e.charCodeAt(l)^i);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var OD={print:4,modify:8,copy:16,"annot-forms":32};function km(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(OD.perm!==void 0)throw new Error("Invalid permission: "+o);s+=OD[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=jT(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=HT(this.encryptionKey,this.padding)}function Im(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function jD(t){if(Bs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[n]){var i=e[n][a];try{i[0].apply(t,r)}catch(o){Wn.console&&js.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function F2(t){if(!(this instanceof F2))return new F2(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function jj(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Uh(t,e,n,r,s){if(!(this instanceof Uh))return new Uh(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,jj.call(this,r,s)}function Pm(t,e,n,r,s){if(!(this instanceof Pm))return new Pm(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,jj.call(this,r,s)}function En(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,c="S",A=null;Bs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,a=t.compress||t.compressPdf||a,(A=t.encryption||null)!==null&&(A.userPassword=A.userPassword||"",A.ownerPassword=A.ownerPassword||"",A.userPermissions=A.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=jD;var w="1.3",x=g.__private__.getPdfVersion=function(){return w};g.__private__.setPdfVersion=function(X){w=X};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return S};var N=g.__private__.getPageFormat=function(X){return S[X]};s=s||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},D=F.COMPAT;function R(){this.saveGraphicsState(),Ie(new rn(_t,0,0,-_t,0,di()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),c="n",D=F.ADVANCED}function j(){this.restoreGraphicsState(),c="S",D=F.COMPAT}var P=g.__private__.combineFontStyleAndFontWeight=function(X,ye){if(X=="bold"&&ye=="normal"||X=="bold"&&ye==400||X=="normal"&&ye=="italic"||X=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(X=ye==400||ye==="normal"?X==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||X!=="normal"?(ye==700?"bold":ye)+""+X:"bold"),X};g.advancedAPI=function(X){var ye=D===F.COMPAT;return ye&&R.call(this),typeof X!="function"||(X(this),ye&&j.call(this)),this},g.compatAPI=function(X){var ye=D===F.ADVANCED;return ye&&j.call(this),typeof X!="function"||(X(this),ye&&R.call(this)),this},g.isAdvancedAPI=function(){return D===F.ADVANCED};var E,T=function(X){if(D!==F.ADVANCED)throw new Error(X+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=g.roundToPrecision=g.__private__.roundToPrecision=function(X,ye){var Oe=e||ye;if(isNaN(X)||isNaN(Oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return X.toFixed(Oe).replace(/0+$/,"")};E=g.hpf=g.__private__.hpf=typeof l=="number"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return k(X,l)}:l==="smart"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return k(X,X>-1&&X<1?16:5)}:function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return k(X,16)};var z=g.f2=g.__private__.f2=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f2");return k(X,2)},M=g.__private__.f3=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f3");return k(X,3)},U=g.scale=g.__private__.scale=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.scale");return D===F.COMPAT?X*_t:D===F.ADVANCED?X:void 0},G=function(X){return D===F.COMPAT?di()-X:D===F.ADVANCED?X:void 0},q=function(X){return U(G(X))};g.__private__.setPrecision=g.setPrecision=function(X){typeof parseInt(X,10)=="number"&&(e=parseInt(X,10))};var oe,ee="00000000000000000000000000000000",le=g.__private__.getFileId=function(){return ee},K=g.__private__.setFileId=function(X){return ee=X!==void 0&&/^[a-fA-F0-9]{32}$/.test(X)?X.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),A!==null&&($r=new km(A.userPermissions,A.userPassword,A.ownerPassword,ee)),ee};g.setFileId=function(X){return K(X),this},g.getFileId=function(){return le()};var ne=g.__private__.convertDateToPDFDate=function(X){var ye=X.getTimezoneOffset(),Oe=ye<0?"+":"-",ze=Math.floor(Math.abs(ye/60)),Xe=Math.abs(ye%60),gt=[Oe,se(ze),"'",se(Xe),"'"].join("");return["D:",X.getFullYear(),se(X.getMonth()+1),se(X.getDate()),se(X.getHours()),se(X.getMinutes()),se(X.getSeconds()),gt].join("")},J=g.__private__.convertPDFDateToDate=function(X){var ye=parseInt(X.substr(2,4),10),Oe=parseInt(X.substr(6,2),10)-1,ze=parseInt(X.substr(8,2),10),Xe=parseInt(X.substr(10,2),10),gt=parseInt(X.substr(12,2),10),Rt=parseInt(X.substr(14,2),10);return new Date(ye,Oe,ze,Xe,gt,Rt,0)},ce=g.__private__.setCreationDate=function(X){var ye;if(X===void 0&&(X=new Date),X instanceof Date)ye=ne(X);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(X))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=X}return oe=ye},Q=g.__private__.getCreationDate=function(X){var ye=oe;return X==="jsDate"&&(ye=J(oe)),ye};g.setCreationDate=function(X){return ce(X),this},g.getCreationDate=function(X){return Q(X)};var Z,se=g.__private__.padd2=function(X){return("0"+parseInt(X)).slice(-2)},ie=g.__private__.padd2Hex=function(X){return("00"+(X=X.toString())).substr(X.length)},fe=0,Se=[],ge=[],xe=0,ve=[],me=[],he=!1,He=ge,et=function(){fe=0,xe=0,ge=[],Se=[],ve=[],Fe=Yt(),De=Yt()};g.__private__.setCustomOutputDestination=function(X){he=!0,He=X};var Ue=function(X){he||(He=X)};g.__private__.resetCustomOutputDestination=function(){he=!1,He=ge};var Ie=g.__private__.out=function(X){return X=X.toString(),xe+=X.length+1,He.push(X),He},je=g.__private__.write=function(X){return Ie(arguments.length===1?X.toString():Array.prototype.join.call(arguments," "))},Ke=g.__private__.getArrayBuffer=function(X){for(var ye=X.length,Oe=new ArrayBuffer(ye),ze=new Uint8Array(Oe);ye--;)ze[ye]=X.charCodeAt(ye);return Oe},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return rt};var xt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(X){return xt=D===F.ADVANCED?X/_t:X,this};var Tt,vt=g.__private__.getFontSize=g.getFontSize=function(){return D===F.COMPAT?xt:xt*_t},Vt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(X){return Vt=X,this},g.__private__.getR2L=g.getR2L=function(){return Vt};var Kt,cn=g.__private__.setZoomMode=function(X){var ye=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(X))Tt=X;else if(isNaN(X)){if(ye.indexOf(X)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+X+'" is not recognized.');Tt=X}else Tt=parseInt(X,10)};g.__private__.getZoomMode=function(){return Tt};var Gt,Wt=g.__private__.setPageMode=function(X){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(X)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+X+'" is not recognized.');Kt=X};g.__private__.getPageMode=function(){return Kt};var sn=g.__private__.setLayoutMode=function(X){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(X)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+X+'" is not recognized.');Gt=X};g.__private__.getLayoutMode=function(){return Gt},g.__private__.setDisplayMode=g.setDisplayMode=function(X,ye,Oe){return cn(X),sn(ye),Wt(Oe),this};var Ht={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(X){if(Object.keys(Ht).indexOf(X)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ht[X]},g.__private__.getDocumentProperties=function(){return Ht},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(X){for(var ye in Ht)Ht.hasOwnProperty(ye)&&X[ye]&&(Ht[ye]=X[ye]);return this},g.__private__.setDocumentProperty=function(X,ye){if(Object.keys(Ht).indexOf(X)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ht[X]=ye};var Qt,_t,Hn,dn,kr,Fn={},ar={},Mr=[],nr={},Sa={},Cr={},hs={},Ms=null,dr=0,xn=[],hr=new jD(g),Ta=t.hotfixes||[],ms={},Ys={},fa=[],rn=function X(ye,Oe,ze,Xe,gt,Rt){if(!(this instanceof X))return new X(ye,Oe,ze,Xe,gt,Rt);isNaN(ye)&&(ye=1),isNaN(Oe)&&(Oe=0),isNaN(ze)&&(ze=0),isNaN(Xe)&&(Xe=1),isNaN(gt)&&(gt=0),isNaN(Rt)&&(Rt=0),this._matrix=[ye,Oe,ze,Xe,gt,Rt]};Object.defineProperty(rn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(rn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(rn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(rn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(rn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(rn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(rn.prototype,"a",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(rn.prototype,"b",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(rn.prototype,"c",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(rn.prototype,"d",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(rn.prototype,"e",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(rn.prototype,"f",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(rn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rn.prototype.join=function(X){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(X)},rn.prototype.multiply=function(X){var ye=X.sx*this.sx+X.shy*this.shx,Oe=X.sx*this.shy+X.shy*this.sy,ze=X.shx*this.sx+X.sy*this.shx,Xe=X.shx*this.shy+X.sy*this.sy,gt=X.tx*this.sx+X.ty*this.shx+this.tx,Rt=X.tx*this.shy+X.ty*this.sy+this.ty;return new rn(ye,Oe,ze,Xe,gt,Rt)},rn.prototype.decompose=function(){var X=this.sx,ye=this.shy,Oe=this.shx,ze=this.sy,Xe=this.tx,gt=this.ty,Rt=Math.sqrt(X*X+ye*ye),qt=(X/=Rt)*Oe+(ye/=Rt)*ze;Oe-=X*qt,ze-=ye*qt;var I=Math.sqrt(Oe*Oe+ze*ze);return qt/=I,X*(ze/=I)<ye*(Oe/=I)&&(X=-X,ye=-ye,qt=-qt,Rt=-Rt),{scale:new rn(Rt,0,0,I,0,0),translate:new rn(1,0,0,1,Xe,gt),rotate:new rn(X,ye,-ye,X,0,0),skew:new rn(1,0,qt,1,0,0)}},rn.prototype.toString=function(X){return this.join(" ")},rn.prototype.inversed=function(){var X=this.sx,ye=this.shy,Oe=this.shx,ze=this.sy,Xe=this.tx,gt=this.ty,Rt=1/(X*ze-ye*Oe),qt=ze*Rt,I=-ye*Rt,ae=-Oe*Rt,Ae=X*Rt;return new rn(qt,I,ae,Ae,-qt*Xe-ae*gt,-I*Xe-Ae*gt)},rn.prototype.applyToPoint=function(X){var ye=X.x*this.sx+X.y*this.shx+this.tx,Oe=X.x*this.shy+X.y*this.sy+this.ty;return new jl(ye,Oe)},rn.prototype.applyToRectangle=function(X){var ye=this.applyToPoint(X),Oe=this.applyToPoint(new jl(X.x+X.w,X.y+X.h));return new Ii(ye.x,ye.y,Oe.x-ye.x,Oe.y-ye.y)},rn.prototype.clone=function(){var X=this.sx,ye=this.shy,Oe=this.shx,ze=this.sy,Xe=this.tx,gt=this.ty;return new rn(X,ye,Oe,ze,Xe,gt)},g.Matrix=rn;var Ur=g.matrixMult=function(X,ye){return ye.multiply(X)},Ir=new rn(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Ir;var es=function(X,ye){if(!Sa[X]){var Oe=(ye instanceof Uh?"Sh":"P")+(Object.keys(nr).length+1).toString(10);ye.id=Oe,Sa[X]=Oe,nr[Oe]=ye,hr.publish("addPattern",ye)}};g.ShadingPattern=Uh,g.TilingPattern=Pm,g.addShadingPattern=function(X,ye){return T("addShadingPattern()"),es(X,ye),this},g.beginTilingPattern=function(X){T("beginTilingPattern()"),gl(X.boundingBox[0],X.boundingBox[1],X.boundingBox[2]-X.boundingBox[0],X.boundingBox[3]-X.boundingBox[1],X.matrix)},g.endTilingPattern=function(X,ye){T("endTilingPattern()"),ye.stream=me[Z].join(`
`),es(X,ye),hr.publish("endTilingPattern",ye),fa.pop().restore()};var Er=g.__private__.newObject=function(){var X=Yt();return be(X,!0),X},Yt=g.__private__.newObjectDeferred=function(){return fe++,Se[fe]=function(){return xe},fe},be=function(X,ye){return ye=typeof ye=="boolean"&&ye,Se[X]=xe,ye&&Ie(X+" 0 obj"),X},Pe=g.__private__.newAdditionalObject=function(){var X={objId:Yt(),content:""};return ve.push(X),X},Fe=Yt(),De=Yt(),Le=g.__private__.decodeColorString=function(X){var ye=X.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length===5&&(ye[4]==="k"||ye[4]==="K")&&(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Oe=parseFloat(ye[0]);ye=[Oe,Oe,Oe,"r"]}for(var ze="#",Xe=0;Xe<3;Xe++)ze+=("0"+Math.floor(255*parseFloat(ye[Xe])).toString(16)).slice(-2);return ze},Me=g.__private__.encodeColorString=function(X){var ye;typeof X=="string"&&(X={ch1:X});var Oe=X.ch1,ze=X.ch2,Xe=X.ch3,gt=X.ch4,Rt=X.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Oe=="string"&&Oe.charAt(0)!=="#"){var qt=new Uj(Oe);if(qt.ok)Oe=qt.toHex();else if(!/^\d*\.?\d*$/.test(Oe))throw new Error('Invalid color "'+Oe+'" passed to jsPDF.encodeColorString.')}if(typeof Oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Oe)&&(Oe="#"+Oe[1]+Oe[1]+Oe[2]+Oe[2]+Oe[3]+Oe[3]),typeof Oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Oe)){var I=parseInt(Oe.substr(1),16);Oe=I>>16&255,ze=I>>8&255,Xe=255&I}if(ze===void 0||gt===void 0&&Oe===ze&&ze===Xe)if(typeof Oe=="string")ye=Oe+" "+Rt[0];else switch(X.precision){case 2:ye=z(Oe/255)+" "+Rt[0];break;case 3:default:ye=M(Oe/255)+" "+Rt[0]}else if(gt===void 0||Bs(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return ye=["1.","1.","1.",Rt[1]].join(" ");if(typeof Oe=="string")ye=[Oe,ze,Xe,Rt[1]].join(" ");else switch(X.precision){case 2:ye=[z(Oe/255),z(ze/255),z(Xe/255),Rt[1]].join(" ");break;default:case 3:ye=[M(Oe/255),M(ze/255),M(Xe/255),Rt[1]].join(" ")}}else if(typeof Oe=="string")ye=[Oe,ze,Xe,gt,Rt[2]].join(" ");else switch(X.precision){case 2:ye=[z(Oe),z(ze),z(Xe),z(gt),Rt[2]].join(" ");break;case 3:default:ye=[M(Oe),M(ze),M(Xe),M(gt),Rt[2]].join(" ")}return ye},tt=g.__private__.getFilters=function(){return i},At=g.__private__.putStream=function(X){var ye=(X=X||{}).data||"",Oe=X.filters||tt(),ze=X.alreadyAppliedFilters||[],Xe=X.addLength1||!1,gt=ye.length,Rt=X.objectId,qt=function(Rn){return Rn};if(A!==null&&Rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");A!==null&&(qt=$r.encryptor(Rt,0));var I={};Oe===!0&&(Oe=["FlateEncode"]);var ae=X.additionalKeyValues||[],Ae=(I=En.API.processDataByFilters!==void 0?En.API.processDataByFilters(ye,Oe):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(ze)?ze.join(" "):ze.toString());if(I.data.length!==0&&(ae.push({key:"Length",value:I.data.length}),Xe===!0&&ae.push({key:"Length1",value:gt})),Ae.length!=0)if(Ae.split("/").length-1==1)ae.push({key:"Filter",value:Ae});else{ae.push({key:"Filter",value:"["+Ae+"]"});for(var Te=0;Te<ae.length;Te+=1)if(ae[Te].key==="DecodeParms"){for(var We=[],ot=0;ot<I.reverseChain.split("/").length-1;ot+=1)We.push("null");We.push(ae[Te].value),ae[Te].value="["+We.join(" ")+"]"}}Ie("<<");for(var Pt=0;Pt<ae.length;Pt++)Ie("/"+ae[Pt].key+" "+ae[Pt].value);Ie(">>"),I.data.length!==0&&(Ie("stream"),Ie(qt(I.data)),Ie("endstream"))},Je=g.__private__.putPage=function(X){var ye=X.number,Oe=X.data,ze=X.objId,Xe=X.contentsObjId;be(ze,!0),Ie("<</Type /Page"),Ie("/Parent "+X.rootDictionaryObjId+" 0 R"),Ie("/Resources "+X.resourceDictionaryObjId+" 0 R"),Ie("/MediaBox ["+parseFloat(E(X.mediaBox.bottomLeftX))+" "+parseFloat(E(X.mediaBox.bottomLeftY))+" "+E(X.mediaBox.topRightX)+" "+E(X.mediaBox.topRightY)+"]"),X.cropBox!==null&&Ie("/CropBox ["+E(X.cropBox.bottomLeftX)+" "+E(X.cropBox.bottomLeftY)+" "+E(X.cropBox.topRightX)+" "+E(X.cropBox.topRightY)+"]"),X.bleedBox!==null&&Ie("/BleedBox ["+E(X.bleedBox.bottomLeftX)+" "+E(X.bleedBox.bottomLeftY)+" "+E(X.bleedBox.topRightX)+" "+E(X.bleedBox.topRightY)+"]"),X.trimBox!==null&&Ie("/TrimBox ["+E(X.trimBox.bottomLeftX)+" "+E(X.trimBox.bottomLeftY)+" "+E(X.trimBox.topRightX)+" "+E(X.trimBox.topRightY)+"]"),X.artBox!==null&&Ie("/ArtBox ["+E(X.artBox.bottomLeftX)+" "+E(X.artBox.bottomLeftY)+" "+E(X.artBox.topRightX)+" "+E(X.artBox.topRightY)+"]"),typeof X.userUnit=="number"&&X.userUnit!==1&&Ie("/UserUnit "+X.userUnit),hr.publish("putPage",{objId:ze,pageContext:xn[ye],pageNumber:ye,page:Oe}),Ie("/Contents "+Xe+" 0 R"),Ie(">>"),Ie("endobj");var gt=Oe.join(`
`);return D===F.ADVANCED&&(gt+=`
Q`),be(Xe,!0),At({data:gt,filters:tt(),objectId:Xe}),Ie("endobj"),ze},at=g.__private__.putPages=function(){var X,ye,Oe=[];for(X=1;X<=dr;X++)xn[X].objId=Yt(),xn[X].contentsObjId=Yt();for(X=1;X<=dr;X++)Oe.push(Je({number:X,data:me[X],objId:xn[X].objId,contentsObjId:xn[X].contentsObjId,mediaBox:xn[X].mediaBox,cropBox:xn[X].cropBox,bleedBox:xn[X].bleedBox,trimBox:xn[X].trimBox,artBox:xn[X].artBox,userUnit:xn[X].userUnit,rootDictionaryObjId:Fe,resourceDictionaryObjId:De}));be(Fe,!0),Ie("<</Type /Pages");var ze="/Kids [";for(ye=0;ye<dr;ye++)ze+=Oe[ye]+" 0 R ";Ie(ze+"]"),Ie("/Count "+dr),Ie(">>"),Ie("endobj"),hr.publish("postPutPages")},ct=function(X){hr.publish("putFont",{font:X,out:Ie,newObject:Er,putStream:At}),X.isAlreadyPutted!==!0&&(X.objectNumber=Er(),Ie("<<"),Ie("/Type /Font"),Ie("/BaseFont /"+Im(X.postScriptName)),Ie("/Subtype /Type1"),typeof X.encoding=="string"&&Ie("/Encoding /"+X.encoding),Ie("/FirstChar 32"),Ie("/LastChar 255"),Ie(">>"),Ie("endobj"))},Bt=function(){for(var X in Fn)Fn.hasOwnProperty(X)&&(h===!1||h===!0&&p.hasOwnProperty(X))&&ct(Fn[X])},jt=function(X){X.objectNumber=Er();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[E(X.x),E(X.y),E(X.x+X.width),E(X.y+X.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+X.matrix.toString()+"]"});var Oe=X.pages[1].join(`
`);At({data:Oe,additionalKeyValues:ye,objectId:X.objectNumber}),Ie("endobj")},Jt=function(){for(var X in ms)ms.hasOwnProperty(X)&&jt(ms[X])},Ot=function(X,ye){var Oe,ze=[],Xe=1/(ye-1);for(Oe=0;Oe<1;Oe+=Xe)ze.push(Oe);if(ze.push(1),X[0].offset!=0){var gt={offset:0,color:X[0].color};X.unshift(gt)}if(X[X.length-1].offset!=1){var Rt={offset:1,color:X[X.length-1].color};X.push(Rt)}for(var qt="",I=0,ae=0;ae<ze.length;ae++){for(Oe=ze[ae];Oe>X[I+1].offset;)I++;var Ae=X[I].offset,Te=(Oe-Ae)/(X[I+1].offset-Ae),We=X[I].color,ot=X[I+1].color;qt+=ie(Math.round((1-Te)*We[0]+Te*ot[0]).toString(16))+ie(Math.round((1-Te)*We[1]+Te*ot[1]).toString(16))+ie(Math.round((1-Te)*We[2]+Te*ot[2]).toString(16))}return qt.trim()},$t=function(X,ye){ye||(ye=21);var Oe=Er(),ze=Ot(X.colors,ye),Xe=[];Xe.push({key:"FunctionType",value:"0"}),Xe.push({key:"Domain",value:"[0.0 1.0]"}),Xe.push({key:"Size",value:"["+ye+"]"}),Xe.push({key:"BitsPerSample",value:"8"}),Xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),At({data:ze,additionalKeyValues:Xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Oe}),Ie("endobj"),X.objectNumber=Er(),Ie("<< /ShadingType "+X.type),Ie("/ColorSpace /DeviceRGB");var gt="/Coords ["+E(parseFloat(X.coords[0]))+" "+E(parseFloat(X.coords[1]))+" ";X.type===2?gt+=E(parseFloat(X.coords[2]))+" "+E(parseFloat(X.coords[3])):gt+=E(parseFloat(X.coords[2]))+" "+E(parseFloat(X.coords[3]))+" "+E(parseFloat(X.coords[4]))+" "+E(parseFloat(X.coords[5])),Ie(gt+="]"),X.matrix&&Ie("/Matrix ["+X.matrix.toString()+"]"),Ie("/Function "+Oe+" 0 R"),Ie("/Extend [true true]"),Ie(">>"),Ie("endobj")},Cn=function(X,ye){var Oe=Yt(),ze=Er();ye.push({resourcesOid:Oe,objectOid:ze}),X.objectNumber=ze;var Xe=[];Xe.push({key:"Type",value:"/Pattern"}),Xe.push({key:"PatternType",value:"1"}),Xe.push({key:"PaintType",value:"1"}),Xe.push({key:"TilingType",value:"1"}),Xe.push({key:"BBox",value:"["+X.boundingBox.map(E).join(" ")+"]"}),Xe.push({key:"XStep",value:E(X.xStep)}),Xe.push({key:"YStep",value:E(X.yStep)}),Xe.push({key:"Resources",value:Oe+" 0 R"}),X.matrix&&Xe.push({key:"Matrix",value:"["+X.matrix.toString()+"]"}),At({data:X.stream,additionalKeyValues:Xe,objectId:X.objectNumber}),Ie("endobj")},Ar=function(X){var ye;for(ye in nr)nr.hasOwnProperty(ye)&&(nr[ye]instanceof Uh?$t(nr[ye]):nr[ye]instanceof Pm&&Cn(nr[ye],X))},fr=function(X){for(var ye in X.objectNumber=Er(),Ie("<<"),X)switch(ye){case"opacity":Ie("/ca "+z(X[ye]));break;case"stroke-opacity":Ie("/CA "+z(X[ye]))}Ie(">>"),Ie("endobj")},mr=function(){var X;for(X in Cr)Cr.hasOwnProperty(X)&&fr(Cr[X])},Hs=function(){for(var X in Ie("/XObject <<"),ms)ms.hasOwnProperty(X)&&ms[X].objectNumber>=0&&Ie("/"+X+" "+ms[X].objectNumber+" 0 R");hr.publish("putXobjectDict"),Ie(">>")},Na=function(){$r.oid=Er(),Ie("<<"),Ie("/Filter /Standard"),Ie("/V "+$r.v),Ie("/R "+$r.r),Ie("/U <"+$r.toHexString($r.U)+">"),Ie("/O <"+$r.toHexString($r.O)+">"),Ie("/P "+$r.P),Ie(">>"),Ie("endobj")},Xs=function(){for(var X in Ie("/Font <<"),Fn)Fn.hasOwnProperty(X)&&(h===!1||h===!0&&p.hasOwnProperty(X))&&Ie("/"+X+" "+Fn[X].objectNumber+" 0 R");Ie(">>")},ha=function(){if(Object.keys(nr).length>0){for(var X in Ie("/Shading <<"),nr)nr.hasOwnProperty(X)&&nr[X]instanceof Uh&&nr[X].objectNumber>=0&&Ie("/"+X+" "+nr[X].objectNumber+" 0 R");hr.publish("putShadingPatternDict"),Ie(">>")}},Us=function(X){if(Object.keys(nr).length>0){for(var ye in Ie("/Pattern <<"),nr)nr.hasOwnProperty(ye)&&nr[ye]instanceof g.TilingPattern&&nr[ye].objectNumber>=0&&nr[ye].objectNumber<X&&Ie("/"+ye+" "+nr[ye].objectNumber+" 0 R");hr.publish("putTilingPatternDict"),Ie(">>")}},Mn=function(){if(Object.keys(Cr).length>0){var X;for(X in Ie("/ExtGState <<"),Cr)Cr.hasOwnProperty(X)&&Cr[X].objectNumber>=0&&Ie("/"+X+" "+Cr[X].objectNumber+" 0 R");hr.publish("putGStateDict"),Ie(">>")}},Un=function(X){be(X.resourcesOid,!0),Ie("<<"),Ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Xs(),ha(),Us(X.objectOid),Mn(),Hs(),Ie(">>"),Ie("endobj")},Js=function(){var X=[];Bt(),mr(),Jt(),Ar(X),hr.publish("putResources"),X.forEach(Un),Un({resourcesOid:De,objectOid:Number.MAX_SAFE_INTEGER}),hr.publish("postPutResources")},lo=function(){hr.publish("putAdditionalObjects");for(var X=0;X<ve.length;X++){var ye=ve[X];be(ye.objId,!0),Ie(ye.content),Ie("endobj")}hr.publish("postPutAdditionalObjects")},Al=function(X){ar[X.fontName]=ar[X.fontName]||{},ar[X.fontName][X.fontStyle]=X.id},Do=function(X,ye,Oe,ze,Xe){var gt={id:"F"+(Object.keys(Fn).length+1).toString(10),postScriptName:X,fontName:ye,fontStyle:Oe,encoding:ze,isStandardFont:Xe||!1,metadata:{}};return hr.publish("addFont",{font:gt,instance:this}),Fn[gt.id]=gt,Al(gt),gt.id},Vn=function(X){for(var ye=0,Oe=rt.length;ye<Oe;ye++){var ze=Do.call(this,X[ye][0],X[ye][1],X[ye][2],rt[ye][3],!0);h===!1&&(p[ze]=!0);var Xe=X[ye][0].split("-");Al({id:ze,fontName:Xe[0],fontStyle:Xe[1]||""})}hr.publish("addFonts",{fonts:Fn,dictionary:ar})},xr=function(X){return X.foo=function(){try{return X.apply(this,arguments)}catch(ze){var ye=ze.stack||"";~ye.indexOf(" at ")&&(ye=ye.split(" at ")[1]);var Oe="Error in function "+ye.split(`
`)[0].split("<")[0]+": "+ze.message;if(!Wn.console)throw new Error(Oe);Wn.console.error(Oe,ze),Wn.alert&&alert(Oe)}},X.foo.bar=X,X.foo},Dl=function(X,ye){var Oe,ze,Xe,gt,Rt,qt,I,ae,Ae;if(Xe=(ye=ye||{}).sourceEncoding||"Unicode",Rt=ye.outputEncoding,(ye.autoencode||Rt)&&Fn[Qt].metadata&&Fn[Qt].metadata[Xe]&&Fn[Qt].metadata[Xe].encoding&&(gt=Fn[Qt].metadata[Xe].encoding,!Rt&&Fn[Qt].encoding&&(Rt=Fn[Qt].encoding),!Rt&&gt.codePages&&(Rt=gt.codePages[0]),typeof Rt=="string"&&(Rt=gt[Rt]),Rt)){for(I=!1,qt=[],Oe=0,ze=X.length;Oe<ze;Oe++)(ae=Rt[X.charCodeAt(Oe)])?qt.push(String.fromCharCode(ae)):qt.push(X[Oe]),qt[Oe].charCodeAt(0)>>8&&(I=!0);X=qt.join("")}for(Oe=X.length;I===void 0&&Oe!==0;)X.charCodeAt(Oe-1)>>8&&(I=!0),Oe--;if(!I)return X;for(qt=ye.noBOM?[]:[254,255],Oe=0,ze=X.length;Oe<ze;Oe++){if((Ae=(ae=X.charCodeAt(Oe))>>8)>>8)throw new Error("Character at position "+Oe+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(Ae),qt.push(ae-(Ae<<8))}return String.fromCharCode.apply(void 0,qt)},Sr=g.__private__.pdfEscape=g.pdfEscape=function(X,ye){return Dl(X,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},is=g.__private__.beginPage=function(X){me[++dr]=[],xn[dr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(X[0]),topRightY:Number(X[1])}},Ba(dr),Ue(me[Z])},Ll=function(X,ye){var Oe,ze,Xe;switch(n=ye||n,typeof X=="string"&&(Oe=N(X.toLowerCase()),Array.isArray(Oe)&&(ze=Oe[0],Xe=Oe[1])),Array.isArray(X)&&(ze=X[0]*_t,Xe=X[1]*_t),isNaN(ze)&&(ze=s[0],Xe=s[1]),(ze>14400||Xe>14400)&&(js.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ze=Math.min(14400,ze),Xe=Math.min(14400,Xe)),s=[ze,Xe],n.substr(0,1)){case"l":Xe>ze&&(s=[Xe,ze]);break;case"p":ze>Xe&&(s=[Xe,ze])}is(s),_u(pl),Ie(ma),Eu!==0&&Ie(Eu+" J"),Ia!==0&&Ie(Ia+" j"),hr.publish("addPage",{pageNumber:dr})},co=function(X){X>0&&X<=dr&&(me.splice(X,1),xn.splice(X,1),dr--,Z>dr&&(Z=dr),this.setPage(Z))},Ba=function(X){X>0&&X<=dr&&(Z=X)},Dn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return me.length-1},li=function(X,ye,Oe){var ze,Xe=void 0;return Oe=Oe||{},X=X!==void 0?X:Fn[Qt].fontName,ye=ye!==void 0?ye:Fn[Qt].fontStyle,ze=X.toLowerCase(),ar[ze]!==void 0&&ar[ze][ye]!==void 0?Xe=ar[ze][ye]:ar[X]!==void 0&&ar[X][ye]!==void 0?Xe=ar[X][ye]:Oe.disableWarning===!1&&js.warn("Unable to look up font label for font '"+X+"', '"+ye+"'. Refer to getFontList() for available fonts."),Xe||Oe.noFallback||(Xe=ar.times[ye])==null&&(Xe=ar.times.normal),Xe},ka=g.__private__.putInfo=function(){var X=Er(),ye=function(ze){return ze};for(var Oe in A!==null&&(ye=$r.encryptor(X,0)),Ie("<<"),Ie("/Producer ("+Sr(ye("jsPDF "+En.version))+")"),Ht)Ht.hasOwnProperty(Oe)&&Ht[Oe]&&Ie("/"+Oe.substr(0,1).toUpperCase()+Oe.substr(1)+" ("+Sr(ye(Ht[Oe]))+")");Ie("/CreationDate ("+Sr(ye(oe))+")"),Ie(">>"),Ie("endobj")},Ni=g.__private__.putCatalog=function(X){var ye=(X=X||{}).rootDictionaryObjId||Fe;switch(Er(),Ie("<<"),Ie("/Type /Catalog"),Ie("/Pages "+ye+" 0 R"),Tt||(Tt="fullwidth"),Tt){case"fullwidth":Ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ie("/OpenAction [3 0 R /Fit]");break;case"original":Ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Oe=""+Tt;Oe.substr(Oe.length-1)==="%"&&(Tt=parseInt(Tt)/100),typeof Tt=="number"&&Ie("/OpenAction [3 0 R /XYZ null null "+z(Tt)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":Ie("/PageLayout /OneColumn");break;case"single":Ie("/PageLayout /SinglePage");break;case"two":case"twoleft":Ie("/PageLayout /TwoColumnLeft");break;case"tworight":Ie("/PageLayout /TwoColumnRight")}Kt&&Ie("/PageMode /"+Kt),hr.publish("putCatalog"),Ie(">>"),Ie("endobj")},Hc=g.__private__.putTrailer=function(){Ie("trailer"),Ie("<<"),Ie("/Size "+(fe+1)),Ie("/Root "+fe+" 0 R"),Ie("/Info "+(fe-1)+" 0 R"),A!==null&&Ie("/Encrypt "+$r.oid+" 0 R"),Ie("/ID [ <"+ee+"> <"+ee+"> ]"),Ie(">>")},fl=g.__private__.putHeader=function(){Ie("%PDF-"+w),Ie("%")},uc=g.__private__.putXRef=function(){var X="0000000000";Ie("xref"),Ie("0 "+(fe+1)),Ie("0000000000 65535 f ");for(var ye=1;ye<=fe;ye++)typeof Se[ye]=="function"?Ie((X+Se[ye]()).slice(-10)+" 00000 n "):Se[ye]!==void 0?Ie((X+Se[ye]).slice(-10)+" 00000 n "):Ie("0000000000 00000 n ")},uo=g.__private__.buildDocument=function(){et(),Ue(ge),hr.publish("buildDocument"),fl(),at(),lo(),Js(),A!==null&&Na(),ka(),Ni();var X=xe;return uc(),Hc(),Ie("startxref"),Ie(""+X),Ie("%%EOF"),Ue(me[Z]),ge.join(`
`)},hl=g.__private__.getBlob=function(X){return new Blob([Ke(X)],{type:"application/pdf"})},Ao=g.output=g.__private__.output=xr(function(X,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",X){case void 0:return uo();case"save":g.save(ye.filename);break;case"arraybuffer":return Ke(uo());case"blob":return hl(uo());case"bloburi":case"bloburl":if(Wn.URL!==void 0&&typeof Wn.URL.createObjectURL=="function")return Wn.URL&&Wn.URL.createObjectURL(hl(uo()))||void 0;js.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Oe="",ze=uo();try{Oe=OT(ze)}catch{Oe=OT(unescape(encodeURIComponent(ze)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var Xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(Xe=ye.pdfObjectUrl,gt="");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Xe+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",qt=Wn.open();return qt!==null&&qt.document.write(Rt),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var I='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',ae=Wn.open();if(ae!==null){ae.document.write(I);var Ae=this;ae.document.documentElement.querySelector("#pdfViewer").onload=function(){ae.document.title=ye.filename,ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ae.output("bloburl"))}}return ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',We=Wn.open();if(We!==null&&(We.document.write(Te),We.document.title=ye.filename),We||typeof safari>"u")return We;break;case"datauri":case"dataurl":return Wn.document.location.href=this.output("datauristring",ye);default:return null}}),ji=function(X){return Array.isArray(Ta)===!0&&Ta.indexOf(X)>-1};switch(r){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=ji("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_t=r}var $r=null;ce(),K();var Lo=function(X){return A!==null?$r.encryptor(X,0):function(ye){return ye}},Hi=g.__private__.getPageInfo=g.getPageInfo=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xn[X].objId,pageNumber:X,pageContext:xn[X]}},Ln=g.__private__.getPageInfoByObjId=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in xn)if(xn[ye].objId===X)break;return Hi(ye)},bn=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:xn[Z].objId,pageNumber:Z,pageContext:xn[Z]}};g.addPage=function(){return Ll.apply(this,arguments),this},g.setPage=function(){return Ba.apply(this,arguments),Ue.call(this,me[Z]),this},g.insertPage=function(X){return this.addPage(),this.movePage(Z,X),this},g.movePage=function(X,ye){var Oe,ze;if(X>ye){Oe=me[X],ze=xn[X];for(var Xe=X;Xe>ye;Xe--)me[Xe]=me[Xe-1],xn[Xe]=xn[Xe-1];me[ye]=Oe,xn[ye]=ze,this.setPage(ye)}else if(X<ye){Oe=me[X],ze=xn[X];for(var gt=X;gt<ye;gt++)me[gt]=me[gt+1],xn[gt]=xn[gt+1];me[ye]=Oe,xn[ye]=ze,this.setPage(ye)}return this},g.deletePage=function(){return co.apply(this,arguments),this},g.__private__.text=g.text=function(X,ye,Oe,ze,Xe){var gt,Rt,qt,I,ae,Ae,Te,We,ot,Pt=(ze=ze||{}).scope||this;if(typeof X=="number"&&typeof ye=="number"&&(typeof Oe=="string"||Array.isArray(Oe))){var Rn=Oe;Oe=ye,ye=X,X=Rn}if(arguments[3]instanceof rn?(T("The transform parameter of text() with a Matrix value"),ot=Xe):(qt=arguments[4],I=arguments[5],Bs(Te=arguments[3])==="object"&&Te!==null||(typeof qt=="string"&&(I=qt,qt=null),typeof Te=="string"&&(I=Te,Te=null),typeof Te=="number"&&(qt=Te,Te=null),ze={flags:Te,angle:qt,align:I})),isNaN(ye)||isNaN(Oe)||X==null)throw new Error("Invalid arguments passed to jsPDF.text");if(X.length===0)return Pt;var yr="",Zn=!1,lr=typeof ze.lineHeightFactor=="number"?ze.lineHeightFactor:Tr,Or=Pt.internal.scaleFactor;function Po(pr){return pr=pr.split("	").join(Array(ze.TabLen||9).join(" ")),Sr(pr,Te)}function ts(pr){for(var gr,gs=pr.concat(),ns=[],go=gs.length;go--;)typeof(gr=gs.shift())=="string"?ns.push(gr):Array.isArray(pr)&&(gr.length===1||gr[1]===void 0&&gr[2]===void 0)?ns.push(gr[0]):ns.push([gr[0],gr[1],gr[2]]);return ns}function zi(pr,gr){var gs;if(typeof pr=="string")gs=gr(pr)[0];else if(Array.isArray(pr)){for(var ns,go,hc=pr.concat(),Oo=[],mc=hc.length;mc--;)typeof(ns=hc.shift())=="string"?Oo.push(gr(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(go=gr(ns[0],ns[1],ns[2]),Oo.push([go[0],go[1],go[2]]));gs=Oo}return gs}var Fi=!1,Gc=!0;if(typeof X=="string")Fi=!0;else if(Array.isArray(X)){var Vl=X.concat();Rt=[];for(var qc,Vs=Vl.length;Vs--;)(typeof(qc=Vl.shift())!="string"||Array.isArray(qc)&&typeof qc[0]!="string")&&(Gc=!1);Fi=Gc}if(Fi===!1)throw new Error('Type of text must be string or Array. "'+X+'" is not recognized.');typeof X=="string"&&(X=X.match(/[\r?\n]/)?X.split(/\r\n|\r|\n/g):[X]);var Kc=xt/Pt.internal.scaleFactor,Gi=Kc*(lr-1);switch(ze.baseline){case"bottom":Oe-=Gi;break;case"top":Oe+=Kc-Gi;break;case"hanging":Oe+=Kc-2*Gi;break;case"middle":Oe+=Kc/2-Gi}if((Ae=ze.maxWidth||0)>0&&(typeof X=="string"?X=Pt.splitTextToSize(X,Ae):Object.prototype.toString.call(X)==="[object Array]"&&(X=X.reduce(function(pr,gr){return pr.concat(Pt.splitTextToSize(gr,Ae))},[]))),gt={text:X,x:ye,y:Oe,options:ze,mutex:{pdfEscape:Sr,activeFontKey:Qt,fonts:Fn,activeFontSize:xt}},hr.publish("preProcessText",gt),X=gt.text,qt=(ze=gt.options).angle,!(ot instanceof rn)&&qt&&typeof qt=="number"){qt*=Math.PI/180,ze.rotationDirection===0&&(qt=-qt),D===F.ADVANCED&&(qt=-qt);var zl=Math.cos(qt),td=Math.sin(qt);ot=new rn(zl,td,-td,zl,0,0)}else qt&&qt instanceof rn&&(ot=qt);D!==F.ADVANCED||ot||(ot=Ir),(ae=ze.charSpace||dc)!==void 0&&(yr+=E(U(ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(We=ze.horizontalScale)!==void 0&&(yr+=E(100*We)+` Tz
`),ze.lang;var Ai=-1,hh=ze.renderingMode!==void 0?ze.renderingMode:ze.stroke,po=Pt.internal.getCurrentPageInfo().pageContext;switch(hh){case 0:case!1:case"fill":Ai=0;break;case 1:case!0:case"stroke":Ai=1;break;case 2:case"fillThenStroke":Ai=2;break;case 3:case"invisible":Ai=3;break;case 4:case"fillAndAddForClipping":Ai=4;break;case 5:case"strokeAndAddPathForClipping":Ai=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ai=6;break;case 7:case"addToPathForClipping":Ai=7}var OA=po.usedRenderingMode!==void 0?po.usedRenderingMode:-1;Ai!==-1?yr+=Ai+` Tr
`:OA!==-1&&(yr+=`0 Tr
`),Ai!==-1&&(po.usedRenderingMode=Ai),I=ze.align||"left";var qa,Fa=xt*lr,fi=Pt.internal.pageSize.getWidth(),$c=Fn[Qt];ae=ze.charSpace||dc,Ae=ze.maxWidth||0,Te=Object.assign({autoencode:!0,noBOM:!0},ze.flags);var Gl=[],ql=function(pr){return Pt.getStringUnitWidth(pr,{font:$c,charSpace:ae,fontSize:xt,doKerning:!1})*xt/Or};if(Object.prototype.toString.call(X)==="[object Array]"){var Da;Rt=ts(X),I!=="left"&&(qa=Rt.map(ql));var pa,yl=0;if(I==="right"){ye-=qa[0],X=[],Vs=Rt.length;for(var ga=0;ga<Vs;ga++)ga===0?(pa=ps(ye),Da=Fs(Oe)):(pa=U(yl-qa[ga]),Da=-Fa),X.push([Rt[ga],pa,Da]),yl=qa[ga]}else if(I==="center"){ye-=qa[0]/2,X=[],Vs=Rt.length;for(var qi=0;qi<Vs;qi++)qi===0?(pa=ps(ye),Da=Fs(Oe)):(pa=U((yl-qa[qi])/2),Da=-Fa),X.push([Rt[qi],pa,Da]),yl=qa[qi]}else if(I==="left"){X=[],Vs=Rt.length;for(var Mo=0;Mo<Vs;Mo++)X.push(Rt[Mo])}else if(I==="justify"&&$c.encoding==="Identity-H"){X=[],Vs=Rt.length,Ae=Ae!==0?Ae:fi;for(var Uo=0,zs=0;zs<Vs;zs++)if(Da=zs===0?Fs(Oe):-Fa,pa=zs===0?ps(ye):Uo,zs<Vs-1){var Ki=U((Ae-qa[zs])/(Rt[zs].split(" ").length-1)),ca=Rt[zs].split(" ");X.push([ca[0]+" ",pa,Da]),Uo=0;for(var Di=1;Di<ca.length;Di++){var Su=(ql(ca[Di-1]+" "+ca[Di])-ql(ca[Di]))*Or+Ki;Di==ca.length-1?X.push([ca[Di],Su,0]):X.push([ca[Di]+" ",Su,0]),Uo-=Su}}else X.push([Rt[zs],pa,Da]);X.push(["",Uo,0])}else{if(I!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(X=[],Vs=Rt.length,Ae=Ae!==0?Ae:fi,zs=0;zs<Vs;zs++)Da=zs===0?Fs(Oe):-Fa,pa=zs===0?ps(ye):0,zs<Vs-1?Gl.push(E(U((Ae-qa[zs])/(Rt[zs].split(" ").length-1)))):Gl.push(0),X.push([Rt[zs],pa,Da])}}var wl=typeof ze.R2L=="boolean"?ze.R2L:Vt;wl===!0&&(X=zi(X,function(pr,gr,gs){return[pr.split("").reverse().join(""),gr,gs]})),gt={text:X,x:ye,y:Oe,options:ze,mutex:{pdfEscape:Sr,activeFontKey:Qt,fonts:Fn,activeFontSize:xt}},hr.publish("postProcessText",gt),X=gt.text,Zn=gt.mutex.isHex||!1;var nd=Fn[Qt].encoding;nd!=="WinAnsiEncoding"&&nd!=="StandardEncoding"||(X=zi(X,function(pr,gr,gs){return[Po(pr),gr,gs]})),Rt=ts(X),X=[];for(var Ka,bl,Wc,Kl=0,rd=1,Ac=Array.isArray(Rt[0])?rd:Kl,fc="",_l=function(pr,gr,gs){var ns="";return gs instanceof rn?(gs=typeof ze.angle=="number"?Ur(gs,new rn(1,0,0,1,pr,gr)):Ur(new rn(1,0,0,1,pr,gr),gs),D===F.ADVANCED&&(gs=Ur(new rn(1,0,0,-1,0,0),gs)),ns=gs.join(" ")+` Tm
`):ns=E(pr)+" "+E(gr)+` Td
`,ns},Gs=0;Gs<Rt.length;Gs++){switch(fc="",Ac){case rd:Wc=(Zn?"<":"(")+Rt[Gs][0]+(Zn?">":")"),Ka=parseFloat(Rt[Gs][1]),bl=parseFloat(Rt[Gs][2]);break;case Kl:Wc=(Zn?"<":"(")+Rt[Gs]+(Zn?">":")"),Ka=ps(ye),bl=Fs(Oe)}Gl!==void 0&&Gl[Gs]!==void 0&&(fc=Gl[Gs]+` Tw
`),Gs===0?X.push(fc+_l(Ka,bl,ot)+Wc):Ac===Kl?X.push(fc+Wc):Ac===rd&&X.push(fc+_l(Ka,bl,ot)+Wc)}X=Ac===Kl?X.join(` Tj
T* `):X.join(` Tj
`),X+=` Tj
`;var La=`BT
/`;return La+=Qt+" "+xt+` Tf
`,La+=E(xt*lr)+` TL
`,La+=Ro+`
`,La+=yr,La+=X,Ie(La+="ET"),p[Qt]=!0,Pt};var Bi=g.__private__.clip=g.clip=function(X){return Ie(X==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Bi("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Ie("n"),this};var ir=g.__private__.isValidStyle=function(X){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(X)!==-1&&(ye=!0),ye};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(X){return ir(X)&&(c=X),this};var ki=g.__private__.getStyle=g.getStyle=function(X){var ye=c;switch(X){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=X}return ye},Ga=g.close=function(){return Ie("h"),this};g.stroke=function(){return Ie("S"),this},g.fill=function(X){return Qi("f",X),this},g.fillEvenOdd=function(X){return Qi("f*",X),this},g.fillStroke=function(X){return Qi("B",X),this},g.fillStrokeEvenOdd=function(X){return Qi("B*",X),this};var Qi=function(X,ye){Bs(ye)==="object"?fo(ye,X):Ie(X)},ci=function(X){X===null||D===F.ADVANCED&&X===void 0||(X=ki(X),Ie(X))};function ui(X,ye,Oe,ze,Xe){var gt=new Pm(ye||this.boundingBox,Oe||this.xStep,ze||this.yStep,this.gState,Xe||this.matrix);gt.stream=this.stream;var Rt=X+"$$"+this.cloneIndex+++"$$";return es(Rt,gt),gt}var fo=function(X,ye){var Oe=Sa[X.key],ze=nr[Oe];if(ze instanceof Uh)Ie("q"),Ie(ml(ye)),ze.gState&&g.setGState(ze.gState),Ie(X.matrix.toString()+" cm"),Ie("/"+Oe+" sh"),Ie("Q");else if(ze instanceof Pm){var Xe=new rn(1,0,0,-1,0,di());X.matrix&&(Xe=Xe.multiply(X.matrix||Ir),Oe=ui.call(ze,X.key,X.boundingBox,X.xStep,X.yStep,Xe).id),Ie("q"),Ie("/Pattern cs"),Ie("/"+Oe+" scn"),ze.gState&&g.setGState(ze.gState),Ie(ye),Ie("Q")}},ml=function(X){switch(X){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wr=g.moveTo=function(X,ye){return Ie(E(U(X))+" "+E(q(ye))+" m"),this},Qs=g.lineTo=function(X,ye){return Ie(E(U(X))+" "+E(q(ye))+" l"),this},ho=g.curveTo=function(X,ye,Oe,ze,Xe,gt){return Ie([E(U(X)),E(q(ye)),E(U(Oe)),E(q(ze)),E(U(Xe)),E(q(gt)),"c"].join(" ")),this};g.__private__.line=g.line=function(X,ye,Oe,ze,Xe){if(isNaN(X)||isNaN(ye)||isNaN(Oe)||isNaN(ze)||!ir(Xe))throw new Error("Invalid arguments passed to jsPDF.line");return D===F.COMPAT?this.lines([[Oe-X,ze-ye]],X,ye,[1,1],Xe||"S"):this.lines([[Oe-X,ze-ye]],X,ye,[1,1]).stroke()},g.__private__.lines=g.lines=function(X,ye,Oe,ze,Xe,gt){var Rt,qt,I,ae,Ae,Te,We,ot,Pt,Rn,yr,Zn;if(typeof X=="number"&&(Zn=Oe,Oe=ye,ye=X,X=Zn),ze=ze||[1,1],gt=gt||!1,isNaN(ye)||isNaN(Oe)||!Array.isArray(X)||!Array.isArray(ze)||!ir(Xe)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wr(ye,Oe),Rt=ze[0],qt=ze[1],ae=X.length,Rn=ye,yr=Oe,I=0;I<ae;I++)(Ae=X[I]).length===2?(Rn=Ae[0]*Rt+Rn,yr=Ae[1]*qt+yr,Qs(Rn,yr)):(Te=Ae[0]*Rt+Rn,We=Ae[1]*qt+yr,ot=Ae[2]*Rt+Rn,Pt=Ae[3]*qt+yr,Rn=Ae[4]*Rt+Rn,yr=Ae[5]*qt+yr,ho(Te,We,ot,Pt,Rn,yr));return gt&&Ga(),ci(Xe),this},g.path=function(X){for(var ye=0;ye<X.length;ye++){var Oe=X[ye],ze=Oe.c;switch(Oe.op){case"m":Wr(ze[0],ze[1]);break;case"l":Qs(ze[0],ze[1]);break;case"c":ho.apply(this,ze);break;case"h":Ga()}}return this},g.__private__.rect=g.rect=function(X,ye,Oe,ze,Xe){if(isNaN(X)||isNaN(ye)||isNaN(Oe)||isNaN(ze)||!ir(Xe))throw new Error("Invalid arguments passed to jsPDF.rect");return D===F.COMPAT&&(ze=-ze),Ie([E(U(X)),E(q(ye)),E(U(Oe)),E(U(ze)),"re"].join(" ")),ci(Xe),this},g.__private__.triangle=g.triangle=function(X,ye,Oe,ze,Xe,gt,Rt){if(isNaN(X)||isNaN(ye)||isNaN(Oe)||isNaN(ze)||isNaN(Xe)||isNaN(gt)||!ir(Rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Oe-X,ze-ye],[Xe-Oe,gt-ze],[X-Xe,ye-gt]],X,ye,[1,1],Rt,!0),this},g.__private__.roundedRect=g.roundedRect=function(X,ye,Oe,ze,Xe,gt,Rt){if(isNaN(X)||isNaN(ye)||isNaN(Oe)||isNaN(ze)||isNaN(Xe)||isNaN(gt)||!ir(Rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return Xe=Math.min(Xe,.5*Oe),gt=Math.min(gt,.5*ze),this.lines([[Oe-2*Xe,0],[Xe*qt,0,Xe,gt-gt*qt,Xe,gt],[0,ze-2*gt],[0,gt*qt,-Xe*qt,gt,-Xe,gt],[2*Xe-Oe,0],[-Xe*qt,0,-Xe,-gt*qt,-Xe,-gt],[0,2*gt-ze],[0,-gt*qt,Xe*qt,-gt,Xe,-gt]],X+Xe,ye,[1,1],Rt,!0),this},g.__private__.ellipse=g.ellipse=function(X,ye,Oe,ze,Xe){if(isNaN(X)||isNaN(ye)||isNaN(Oe)||isNaN(ze)||!ir(Xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*Oe,Rt=4/3*(Math.SQRT2-1)*ze;return Wr(X+Oe,ye),ho(X+Oe,ye-Rt,X+gt,ye-ze,X,ye-ze),ho(X-gt,ye-ze,X-Oe,ye-Rt,X-Oe,ye),ho(X-Oe,ye+Rt,X-gt,ye+ze,X,ye+ze),ho(X+gt,ye+ze,X+Oe,ye+Rt,X+Oe,ye),ci(Xe),this},g.__private__.circle=g.circle=function(X,ye,Oe,ze){if(isNaN(X)||isNaN(ye)||isNaN(Oe)||!ir(ze))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(X,ye,Oe,Oe,ze)},g.setFont=function(X,ye,Oe){return Oe&&(ye=P(ye,Oe)),Qt=li(X,ye,{disableWarning:!1}),this};var Zs=g.__private__.getFont=g.getFont=function(){return Fn[li.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var X,ye,Oe={};for(X in ar)if(ar.hasOwnProperty(X))for(ye in Oe[X]=[],ar[X])ar[X].hasOwnProperty(ye)&&Oe[X].push(ye);return Oe},g.addFont=function(X,ye,Oe,ze,Xe){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?Xe=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(Oe=P(Oe,ze)),Xe=Xe||"Identity-H",Do.call(this,X,ye,Oe,Xe)};var Tr,pl=t.lineWidth||.200025,Vi=g.__private__.getLineWidth=g.getLineWidth=function(){return pl},_u=g.__private__.setLineWidth=g.setLineWidth=function(X){return pl=X,Ie(E(U(X))+" w"),this};g.__private__.setLineDash=En.API.setLineDash=En.API.setLineDashPattern=function(X,ye){if(X=X||[],ye=ye||0,isNaN(ye)||!Array.isArray(X))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return X=X.map(function(Oe){return E(U(Oe))}).join(" "),ye=E(U(ye)),Ie("["+X+"] "+ye+" d"),this};var Rl=g.__private__.getLineHeight=g.getLineHeight=function(){return xt*Tr};g.__private__.getLineHeight=g.getLineHeight=function(){return xt*Tr};var rr=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(X){return typeof(X=X||1.15)=="number"&&(Tr=X),this},mo=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Tr};rr(t.lineHeight);var ps=g.__private__.getHorizontalCoordinate=function(X){return U(X)},Fs=g.__private__.getVerticalCoordinate=function(X){return D===F.ADVANCED?X:xn[Z].mediaBox.topRightY-xn[Z].mediaBox.bottomLeftY-U(X)},Cu=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(X){return E(ps(X))},Pl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(X){return E(Fs(X))},ma=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Le(ma)},g.__private__.setStrokeColor=g.setDrawColor=function(X,ye,Oe,ze){return ma=Me({ch1:X,ch2:ye,ch3:Oe,ch4:ze,pdfColorType:"draw",precision:2}),Ie(ma),this};var Ml=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Le(Ml)},g.__private__.setFillColor=g.setFillColor=function(X,ye,Oe,ze){return Ml=Me({ch1:X,ch2:ye,ch3:Oe,ch4:ze,pdfColorType:"fill",precision:2}),Ie(Ml),this};var Ro=t.textColor||"0 g",Qc=g.__private__.getTextColor=g.getTextColor=function(){return Le(Ro)};g.__private__.setTextColor=g.setTextColor=function(X,ye,Oe,ze){return Ro=Me({ch1:X,ch2:ye,ch3:Oe,ch4:ze,pdfColorType:"text",precision:3}),this};var dc=t.charSpace,Ul=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(dc||0)};g.__private__.setCharSpace=g.setCharSpace=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dc=X,this};var Eu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(X){var ye=g.CapJoinStyles[X];if(ye===void 0)throw new Error("Line cap style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Eu=ye,Ie(ye+" J"),this};var Ia=0;g.__private__.setLineJoin=g.setLineJoin=function(X){var ye=g.CapJoinStyles[X];if(ye===void 0)throw new Error("Line join style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ia=ye,Ie(ye+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(X){if(X=X||0,isNaN(X))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ie(E(U(X))+" M"),this},g.GState=F2,g.setGState=function(X){(X=typeof X=="string"?Cr[hs[X]]:Ol(null,X)).equals(Ms)||(Ie("/"+X.id+" gs"),Ms=X)};var Ol=function(X,ye){if(!X||!hs[X]){var Oe=!1;for(var ze in Cr)if(Cr.hasOwnProperty(ze)&&Cr[ze].equals(ye)){Oe=!0;break}if(Oe)ye=Cr[ze];else{var Xe="GS"+(Object.keys(Cr).length+1).toString(10);Cr[Xe]=ye,ye.id=Xe}return X&&(hs[X]=ye.id),hr.publish("addGState",ye),ye}};g.addGState=function(X,ye){return Ol(X,ye),this},g.saveGraphicsState=function(){return Ie("q"),Mr.push({key:Qt,size:xt,color:Ro}),this},g.restoreGraphicsState=function(){Ie("Q");var X=Mr.pop();return Qt=X.key,xt=X.size,Ro=X.color,Ms=null,this},g.setCurrentTransformationMatrix=function(X){return Ie(X.toString()+" cm"),this},g.comment=function(X){return Ie("#"+X),this};var jl=function(X,ye){var Oe=X||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Oe},set:function(gt){isNaN(gt)||(Oe=parseFloat(gt))}});var ze=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ze},set:function(gt){isNaN(gt)||(ze=parseFloat(gt))}});var Xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Xe},set:function(gt){Xe=gt.toString()}}),this},Ii=function(X,ye,Oe,ze){jl.call(this,X,ye),this.type="rect";var Xe=Oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Xe},set:function(Rt){isNaN(Rt)||(Xe=parseFloat(Rt))}});var gt=ze||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(Rt){isNaN(Rt)||(gt=parseFloat(Rt))}}),this},Hl=function(){this.page=dr,this.currentPage=Z,this.pages=me.slice(0),this.pagesContext=xn.slice(0),this.x=Hn,this.y=dn,this.matrix=kr,this.width=xl(Z),this.height=di(Z),this.outputDestination=He,this.id="",this.objectNumber=-1};Hl.prototype.restore=function(){dr=this.page,Z=this.currentPage,xn=this.pagesContext,me=this.pages,Hn=this.x,dn=this.y,kr=this.matrix,Ql(Z,this.width),zc(Z,this.height),He=this.outputDestination};var gl=function(X,ye,Oe,ze,Xe){fa.push(new Hl),dr=Z=0,me=[],Hn=X,dn=ye,kr=Xe,is([Oe,ze])},Vc=function(X){if(Ys[X])fa.pop().restore();else{var ye=new Hl,Oe="Xo"+(Object.keys(ms).length+1).toString(10);ye.id=Oe,Ys[X]=Oe,ms[Oe]=ye,hr.publish("addFormObject",ye),fa.pop().restore()}};for(var vl in g.beginFormObject=function(X,ye,Oe,ze,Xe){return gl(X,ye,Oe,ze,Xe),this},g.endFormObject=function(X){return Vc(X),this},g.doFormObject=function(X,ye){var Oe=ms[Ys[X]];return Ie("q"),Ie(ye.toString()+" cm"),Ie("/"+Oe.id+" Do"),Ie("Q"),this},g.getFormObject=function(X){var ye=ms[Ys[X]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},g.save=function(X,ye){return X=X||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(Rh(hl(uo()),X),typeof Rh.unload=="function"&&Wn.setTimeout&&setTimeout(Rh.unload,911),this):new Promise(function(Oe,ze){try{var Xe=Rh(hl(uo()),X);typeof Rh.unload=="function"&&Wn.setTimeout&&setTimeout(Rh.unload,911),Oe(Xe)}catch(gt){ze(gt.message)}})},En.API)En.API.hasOwnProperty(vl)&&(vl==="events"&&En.API.events.length?function(X,ye){var Oe,ze,Xe;for(Xe=ye.length-1;Xe!==-1;Xe--)Oe=ye[Xe][0],ze=ye[Xe][1],X.subscribe.apply(X,[Oe].concat(typeof ze=="function"?[ze]:ze))}(hr,En.API.events):g[vl]=En.API[vl]);var xl=g.getPageWidth=function(X){return(xn[X=X||Z].mediaBox.topRightX-xn[X].mediaBox.bottomLeftX)/_t},Ql=g.setPageWidth=function(X,ye){xn[X].mediaBox.topRightX=ye*_t+xn[X].mediaBox.bottomLeftX},di=g.getPageHeight=function(X){return(xn[X=X||Z].mediaBox.topRightY-xn[X].mediaBox.bottomLeftY)/_t},zc=g.setPageHeight=function(X,ye){xn[X].mediaBox.topRightY=ye*_t+xn[X].mediaBox.bottomLeftY};return g.internal={pdfEscape:Sr,getStyle:ki,getFont:Zs,getFontSize:vt,getCharSpace:Ul,getTextColor:Qc,getLineHeight:Rl,getLineHeightFactor:mo,getLineWidth:Vi,write:je,getHorizontalCoordinate:ps,getVerticalCoordinate:Fs,getCoordinateString:Cu,getVerticalCoordinateString:Pl,collections:{},newObject:Er,newAdditionalObject:Pe,newObjectDeferred:Yt,newObjectDeferredBegin:be,getFilters:tt,putStream:At,events:hr,scaleFactor:_t,pageSize:{getWidth:function(){return xl(Z)},setWidth:function(X){Ql(Z,X)},getHeight:function(){return di(Z)},setHeight:function(X){zc(Z,X)}},encryptionOptions:A,encryption:$r,getEncryptor:Lo,output:Ao,getNumberOfPages:Dn,pages:me,out:Ie,f2:z,f3:M,getPageInfo:Hi,getPageInfoByObjId:Ln,getCurrentPageInfo:bn,getPDFVersion:x,Point:jl,Rectangle:Ii,Matrix:rn,hasHotfix:ji},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return xl(Z)},set:function(X){Ql(Z,X)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return di(Z)},set:function(X){zc(Z,X)},enumerable:!0,configurable:!0}),Vn.call(g,rt),Qt="F1",Ll(s,n),hr.publish("initialized"),g}km.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},km.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},km.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},km.prototype.processOwnerPassword=function(t,e){return HT(jT(e).substr(0,5),t)},km.prototype.encryptor=function(t,e){var n=jT(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return HT(n,r)}},F2.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Bs(t)!==Bs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},En.API={events:[]},En.version="2.5.2";var Oa=En.API,TB=1,E0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},im=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cr=function(t){return t.toFixed(2)},df=function(t){return t.toFixed(5)};Oa.__acroform__={};var cc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},HD=function(t){return t*TB},yd=function(t){var e=new Qj,n=gn.internal.getHeight(t)||0,r=gn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(cr(r)),Number(cr(n))],e},tre=Oa.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},nre=Oa.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},rre=Oa.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},ni=Oa.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rre(t,e-1)},ri=Oa.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tre(t,e-1)},si=Oa.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nre(t,e-1)},sre=Oa.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(cr(l.lowerLeft_X)),Number(cr(l.lowerLeft_Y)),Number(cr(l.upperRight_X)),Number(cr(l.upperRight_Y))]},are=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=QT(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+cr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=yd(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},QT=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(M){return M.split(`
`)}):s.map(function(M){return[M]});var a=n,i=gn.internal.getHeight(t)||0;i=i<0?-i:i;var o=gn.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(M,U,G){if(M+1<s.length){var q=U+" "+s[M+1][0];return vy(q,t,G).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var c,A,h=vy("3",t,a).height,p=t.multiline?i-a:(i-h)/2,g=p+=2,w=0,x=0,S=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+vy(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var N="",F=0,D=0;D<s.length;D++)if(s.hasOwnProperty(D)){var R=!1;if(s[D].length!==1&&S!==s[D].length-1){if((h+2)*(F+2)+2>i)continue e;N+=s[D][S],R=!0,x=D,D--}else{N=(N+=s[D][S]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var j=parseInt(D),P=l(j,N,a),E=D>=s.length-1;if(P&&!E){N+=" ",S=0;continue}if(P||E){if(E)x=j;else if(t.multiline&&(h+2)*(F+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(F+2)+2>i)continue e;x=j}}for(var T="",k=w;k<=x;k++){var z=s[k];if(t.multiline){if(k===x){T+=z[S]+" ",S=(S+1)%z.length;continue}if(k===w){T+=z[z.length-1]+" ";continue}}T+=z[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,A=vy(T,t,a).width,t.textAlign){case"right":c=o-A-2;break;case"center":c=(o-A)/2;break;case"left":default:c=2}e+=cr(c)+" "+cr(g)+` Td
`,e+="("+E0(T)+`) Tj
`,e+=-cr(c)+` 0 Td
`,g=-(a+2),A=0,w=R?x:x+1,F++,N=""}break}return r.text=e,r.fontSize=a,r},vy=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},ire={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ore=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},lre=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),Bs(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},cre=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Xu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ire)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");TB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Vj,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&ore(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var i in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var o=r[i],l=[],c=o.Rect;if(o.Rect&&(o.Rect=sre(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=gn.createDefaultAppearanceStream(o),Bs(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var A=are(o);l.push({key:"AP",value:"<</N "+A+">>"}),s.internal.acroformPlugin.xForms.push(A)}if(o.appearanceStreamContent){var h="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var w=g[i];typeof w=="function"&&(w=w.call(s,o)),h+="/"+i+" "+w+" ",s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w)}}else typeof(w=g)=="function"&&(w=w.call(s,o)),h+="/"+i+" "+w,s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&lre(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Hj=Oa.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),Bs(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+E0(r(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},OE=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+E0(r(t))+")"},Nd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Nd.prototype.toString=function(){return this.objId+" 0 R"},Nd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Nd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:Hj(s,this.objId,this.scope)}):s instanceof Nd?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var Qj=function(){Nd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};cc(Qj,Nd);var Vj=function(){Nd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+E0(n(t))+")"}},set:function(n){t=n}})};cc(Vj,Nd);var Xu=function t(){Nd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ni(e,3)},set:function(N){N?this.F=ri(e,3):this.F=si(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof D2)return;a="FieldObject"+t.FieldNum++}var N=function(F){return F};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+E0(N(a))+")"},set:function(N){a=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(N){a=N}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(N){i=N}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/TB:c},set:function(N){c=N}});var A="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return A},set:function(N){A=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof D2||this instanceof Yh))return OE(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof no?p:OE(p,this.objId,this.scope)},set:function(N){N=N.toString(),p=this instanceof no?N:N.substr(0,1)==="("?im(N.substr(1,N.length-2)):im(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof no?im(p.substr(1,p.length-1)):p},set:function(N){N=N.toString(),p=this instanceof no?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof no?g:OE(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=this instanceof no?N:N.substr(0,1)==="("?im(N.substr(1,N.length-2)):im(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof no?im(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof no?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(N){N=!!N,x=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(N){w=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,1)},set:function(N){N?this.Ff=ri(this.Ff,1):this.Ff=si(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,2)},set:function(N){N?this.Ff=ri(this.Ff,2):this.Ff=si(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,3)},set:function(N){N?this.Ff=ri(this.Ff,3):this.Ff=si(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');S=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(S){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};cc(Xu,Nd);var Km=function(){Xu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Hj(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,c=[];l=i.exec(a);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,18)},set:function(n){n?this.Ff=ri(this.Ff,18):this.Ff=si(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ri(this.Ff,19):this.Ff=si(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,20)},set:function(n){n?(this.Ff=ri(this.Ff,20),e.sort()):this.Ff=si(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,22)},set:function(n){n?this.Ff=ri(this.Ff,22):this.Ff=si(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(n){n?this.Ff=ri(this.Ff,23):this.Ff=si(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,27)},set:function(n){n?this.Ff=ri(this.Ff,27):this.Ff=si(this.Ff,27)}}),this.hasAppearanceStream=!1};cc(Km,Xu);var $m=function(){Km.call(this),this.fontName="helvetica",this.combo=!1};cc($m,Km);var Wm=function(){$m.call(this),this.combo=!0};cc(Wm,$m);var Dw=function(){Wm.call(this),this.edit=!0};cc(Dw,Wm);var no=function(){Xu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,15)},set:function(n){n?this.Ff=ri(this.Ff,15):this.Ff=si(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,16)},set:function(n){n?this.Ff=ri(this.Ff,16):this.Ff=si(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,17)},set:function(n){n?this.Ff=ri(this.Ff,17):this.Ff=si(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(n){n?this.Ff=ri(this.Ff,26):this.Ff=si(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+E0(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Bs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};cc(no,Xu);var Lw=function(){no.call(this),this.pushButton=!0};cc(Lw,no);var Ym=function(){no.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};cc(Ym,no);var D2=function(){var t,e;Xu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),r)i.push("/"+a+" ("+E0(s(r[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){Bs(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};cc(D2,Xu),Ym.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Ym.prototype.createOption=function(t){var e=new D2;return e.Parent=this,e.optionName=t,this.Kids.push(e),ure.call(this.scope,e),e};var Rw=function(){no.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gn.CheckBox.createAppearanceStream()};cc(Rw,no);var Yh=function(){Xu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,13)},set:function(e){e?this.Ff=ri(this.Ff,13):this.Ff=si(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,21)},set:function(e){e?this.Ff=ri(this.Ff,21):this.Ff=si(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(e){e?this.Ff=ri(this.Ff,23):this.Ff=si(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,24)},set:function(e){e?this.Ff=ri(this.Ff,24):this.Ff=si(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,25)},set:function(e){e?this.Ff=ri(this.Ff,25):this.Ff=si(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(e){e?this.Ff=ri(this.Ff,26):this.Ff=si(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};cc(Yh,Xu);var Pw=function(){Yh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,14)},set:function(t){t?this.Ff=ri(this.Ff,14):this.Ff=si(this.Ff,14)}}),this.password=!0};cc(Pw,Yh);var gn={CheckBox:{createAppearanceStream:function(){return{N:{On:gn.CheckBox.YesNormal},D:{On:gn.CheckBox.YesPushDown,Off:gn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=yd(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=QT(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+cr(gn.internal.getWidth(t))+" "+cr(gn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+cr(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=yd(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],a=gn.internal.getHeight(t),i=gn.internal.getWidth(t),o=QT(t,t.caption);return s.push("1 g"),s.push("0 0 "+cr(i)+" "+cr(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+cr(i-1)+" "+cr(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+cr(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=yd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+cr(gn.internal.getWidth(t))+" "+cr(gn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:gn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=gn.RadioButton.Circle.YesNormal,e.D[t]=gn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=yd(t);e.scope=t.scope;var n=[],r=gn.internal.getWidth(t)<=gn.internal.getHeight(t)?gn.internal.getWidth(t)/4:gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=gn.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+df(gn.internal.getWidth(t)/2)+" "+df(gn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=yd(t);e.scope=t.scope;var n=[],r=gn.internal.getWidth(t)<=gn.internal.getHeight(t)?gn.internal.getWidth(t)/4:gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*gn.internal.Bezier_C).toFixed(5)),i=Number((r*gn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+df(gn.internal.getWidth(t)/2)+" "+df(gn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+df(gn.internal.getWidth(t)/2)+" "+df(gn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=yd(t);e.scope=t.scope;var n=[],r=gn.internal.getWidth(t)<=gn.internal.getHeight(t)?gn.internal.getWidth(t)/4:gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*gn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+df(gn.internal.getWidth(t)/2)+" "+df(gn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:gn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=gn.RadioButton.Cross.YesNormal,e.D[t]=gn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=yd(t);e.scope=t.scope;var n=[],r=gn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+cr(gn.internal.getWidth(t)-2)+" "+cr(gn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(cr(r.x1.x)+" "+cr(r.x1.y)+" m"),n.push(cr(r.x2.x)+" "+cr(r.x2.y)+" l"),n.push(cr(r.x4.x)+" "+cr(r.x4.y)+" m"),n.push(cr(r.x3.x)+" "+cr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=yd(t);e.scope=t.scope;var n=gn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+cr(gn.internal.getWidth(t))+" "+cr(gn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+cr(gn.internal.getWidth(t)-2)+" "+cr(gn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(cr(n.x1.x)+" "+cr(n.x1.y)+" m"),r.push(cr(n.x2.x)+" "+cr(n.x2.y)+" l"),r.push(cr(n.x4.x)+" "+cr(n.x4.y)+" m"),r.push(cr(n.x3.x)+" "+cr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=yd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+cr(gn.internal.getWidth(t))+" "+cr(gn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};gn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=gn.internal.getWidth(t),n=gn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},gn.internal.getWidth=function(t){var e=0;return Bs(t)==="object"&&(e=HD(t.Rect[2])),e},gn.internal.getHeight=function(t){var e=0;return Bs(t)==="object"&&(e=HD(t.Rect[3])),e};var ure=Oa.addField=function(t){if(cre(this,t),!(t instanceof Xu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Oa.AcroFormChoiceField=Km,Oa.AcroFormListBox=$m,Oa.AcroFormComboBox=Wm,Oa.AcroFormEditBox=Dw,Oa.AcroFormButton=no,Oa.AcroFormPushButton=Lw,Oa.AcroFormRadioButton=Ym,Oa.AcroFormCheckBox=Rw,Oa.AcroFormTextField=Yh,Oa.AcroFormPasswordField=Pw,Oa.AcroFormAppearance=gn,Oa.AcroForm={ChoiceField:Km,ListBox:$m,ComboBox:Wm,EditBox:Dw,Button:no,PushButton:Lw,RadioButton:Ym,CheckBox:Rw,TextField:Yh,PasswordField:Pw,Appearance:gn},En.AcroForm={ChoiceField:Km,ListBox:$m,ComboBox:Wm,EditBox:Dw,Button:no,PushButton:Lw,RadioButton:Ym,CheckBox:Rw,TextField:Yh,PasswordField:Pw,Appearance:gn};En.AcroForm;function zj(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(M,U){var G,q,oe,ee,le,K=e;if((U=U||e)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(P(M))for(le in n)for(oe=n[le],G=0;G<oe.length;G+=1){for(ee=!0,q=0;q<oe[G].length;q+=1)if(oe[G][q]!==void 0&&oe[G][q]!==M[q]){ee=!1;break}if(ee===!0){K=le;break}}else for(le in n)for(oe=n[le],G=0;G<oe.length;G+=1){for(ee=!0,q=0;q<oe[G].length;q+=1)if(oe[G][q]!==void 0&&oe[G][q]!==M.charCodeAt(q)){ee=!1;break}if(ee===!0){K=le;break}}return K===e&&U!==e&&(K=U),K},s=function M(U){for(var G=this.internal.write,q=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:U.width}),ee.push({key:"Height",value:U.height}),U.colorSpace===S.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===S.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var le="",K=0,ne=U.transparency.length;K<ne;K++)le+=U.transparency[K]+" "+U.transparency[K]+" ";ee.push({key:"Mask",value:"["+le+"]"})}U.sMask!==void 0&&ee.push({key:"SMask",value:U.objectId+1+" 0 R"});var J=U.filter!==void 0?["/"+U.filter]:void 0;if(q({data:U.data,additionalKeyValues:ee,alreadyAppliedFilters:J,objectId:U.objectId}),G("endobj"),"sMask"in U&&U.sMask!==void 0){var ce="/Predictor "+U.predictor+" /Colors 1 /BitsPerComponent "+U.bitsPerComponent+" /Columns "+U.width,Q={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:ce,data:U.sMask};"filter"in U&&(Q.filter=U.filter),M.call(this,Q)}if(U.colorSpace===S.INDEXED){var Z=this.internal.newObject();q({data:T(new Uint8Array(U.palette)),objectId:Z}),G("endobj")}},a=function(){var M=this.internal.collections.addImage_images;for(var U in M)s.call(this,M[U])},i=function(){var M,U=this.internal.collections.addImage_images,G=this.internal.write;for(var q in U)G("/I"+(M=U[q]).index,M.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var M=this.internal.collections.addImage_images;return o.call(this),M},c=function(){return Object.keys(this.internal.collections.addImage_images).length},A=function(M){return typeof t["process"+M.toUpperCase()]=="function"},h=function(M){return Bs(M)==="object"&&M.nodeType===1},p=function(M,U){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var G=""+M.getAttribute("src");if(G.indexOf("data:image/")===0)return Cv(unescape(G).split("base64,").pop());var q=t.loadFile(G,!0);if(q!==void 0)return q}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var oe;switch(U){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return Cv(M.toDataURL(oe,1).split("base64,").pop())}},g=function(M){var U=this.internal.collections.addImage_images;if(U){for(var G in U)if(M===U[G].alias)return U[G]}},w=function(M,U,G){return M||U||(M=-96,U=-96),M<0&&(M=-1*G.width*72/M/this.internal.scaleFactor),U<0&&(U=-1*G.height*72/U/this.internal.scaleFactor),M===0&&(M=U*G.width/G.height),U===0&&(U=M*G.height/G.width),[M,U]},x=function(M,U,G,q,oe,ee){var le=w.call(this,G,q,oe),K=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,J=l.call(this);if(G=le[0],q=le[1],J[oe.index]=oe,ee){ee*=Math.PI/180;var ce=Math.cos(ee),Q=Math.sin(ee),Z=function(ie){return ie.toFixed(4)},se=[Z(ce),Z(Q),Z(-1*Q),Z(ce),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,K(M),ne(U+q),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([K(G),"0","0",K(q),"0","0","cm"].join(" "))):this.internal.write([K(G),"0","0",K(q),K(M),ne(U+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},S=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=t.__addimage__.sHashCode=function(M){var U,G,q=0;if(typeof M=="string")for(G=M.length,U=0;U<G;U++)q=(q<<5)-q+M.charCodeAt(U),q|=0;else if(P(M))for(G=M.byteLength/2,U=0;U<G;U++)q=(q<<5)-q+M[U],q|=0;return q},D=t.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var U=!0;return M.length===0&&(U=!1),M.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(U=!1),U},R=t.__addimage__.extractImageFromDataUrl=function(M){var U=(M=M||"").split("base64,"),G=null;if(U.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(U[0]);Array.isArray(q)&&(G={mimeType:q[1],charset:q[2],data:U[1]})}return G},j=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(M){return j()&&M instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(M){return j()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(M){for(var U=M.length,G=new Uint8Array(U),q=0;q<U;q++)G[q]=M.charCodeAt(q);return G},T=t.__addimage__.arrayBufferToBinaryString=function(M){for(var U="",G=P(M)?M:new Uint8Array(M),q=0;q<G.length;q+=8192)U+=String.fromCharCode.apply(null,G.subarray(q,q+8192));return U};t.addImage=function(){var M,U,G,q,oe,ee,le,K,ne;if(typeof arguments[1]=="number"?(U=e,G=arguments[1],q=arguments[2],oe=arguments[3],ee=arguments[4],le=arguments[5],K=arguments[6],ne=arguments[7]):(U=arguments[1],G=arguments[2],q=arguments[3],oe=arguments[4],ee=arguments[5],le=arguments[6],K=arguments[7],ne=arguments[8]),Bs(M=arguments[0])==="object"&&!h(M)&&"imageData"in M){var J=M;M=J.imageData,U=J.format||U||e,G=J.x||G||0,q=J.y||q||0,oe=J.w||J.width||oe,ee=J.h||J.height||ee,le=J.alias||le,K=J.compression||K,ne=J.rotation||J.angle||ne}var ce=this.internal.getFilters();if(K===void 0&&ce.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(G)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var Q=k.call(this,M,U,le,K);return x.call(this,G,q,oe,ee,Q,ne),this};var k=function(M,U,G,q){var oe,ee,le;if(typeof M=="string"&&r(M)===e){M=unescape(M);var K=z(M,!1);(K!==""||(K=t.loadFile(M,!0))!==void 0)&&(M=K)}if(h(M)&&(M=p(M,U)),U=r(M,U),!A(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((le=G)==null||le.length===0)&&(G=function(ne){return typeof ne=="string"||P(ne)?F(ne):P(ne.data)?F(ne.data):null}(M)),(oe=g.call(this,G))||(j()&&(M instanceof Uint8Array||U==="RGBA"||(ee=M,M=E(M))),oe=this["process"+U.toUpperCase()](M,c.call(this),G,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in t.image_compression?ne:N.NONE}(q),ee)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},z=t.__addimage__.convertBase64ToBinaryString=function(M,U){var G;U=typeof U!="boolean"||U;var q,oe="";if(typeof M=="string"){q=(G=R(M))!==null?G.data:M;try{oe=Cv(q)}catch(ee){if(U)throw D(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};t.getImageProperties=function(M){var U,G,q="";if(h(M)&&(M=p(M)),typeof M=="string"&&r(M)===e&&((q=z(M,!1))===""&&(q=t.loadFile(M)||""),M=q),G=r(M),!A(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!j()||M instanceof Uint8Array||(M=E(M)),!(U=this["process"+G.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=G,U}})(En.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};En.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,A=!1,h=0;h<c.length&&!A;h++)switch((r=c[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(A!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){r=c[p];var g=this.internal.pdfEscape,w=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(x.objId),F=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(N(r.contents))+")",a+=" /Popup "+S.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+g(N(F))+") >>",x.content=a;var D=x.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+D,r.open&&(a+=" /Open true"),a+=" >>",S.content=a,this.internal.write(x.objId,"0 R",S.objId,"0 R");break;case"freetext":s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(w(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var j=this.annotations._nameMap[r.options.name];r.options.pageNumber=j.page,r.options.top=j.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(w(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+s),h:c(r+a)},options:i,type:"link"})},t.textWithLink=function(n,r,s,a){var i,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var A=this.splitTextToSize(n,o).length;i=Math.ceil(c*A)}else o=l,i=c;return this.text(n,r,s,a),s+=.2*c,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,s-c,o,i,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(En.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=t.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&s.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length>=3};var A=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&a(x)&&e[x.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(x){var S=0,N=n,F="",D=0;for(S=0;S<x.length;S+=1)N[x.charCodeAt(S)]!==void 0?(D++,typeof(N=N[x.charCodeAt(S)])=="number"&&(F+=String.fromCharCode(N),N=n,D=0),S===x.length-1&&(N=n,F+=x.charAt(S-(D-1)),S-=D-1,D=0)):(N=n,F+=x.charAt(S-D),S-=D,D=0);return F};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(x,S,N){return i(x)?a(x)===!1?-1:!c(x)||!i(S)&&!i(N)||!i(N)&&o(S)||o(x)&&!i(S)||o(x)&&l(S)||o(x)&&o(S)?0:A(x)&&i(S)&&!o(S)&&i(N)&&c(N)?3:o(x)||!i(N)?1:2:-1},g=function(x){var S=0,N=0,F=0,D="",R="",j="",P=(x=x||"").split("\\s+"),E=[];for(S=0;S<P.length;S+=1){for(E.push(""),N=0;N<P[S].length;N+=1)D=P[S][N],R=P[S][N-1],j=P[S][N+1],i(D)?(F=p(D,R,j),E[S]+=F!==-1?String.fromCharCode(e[D.charCodeAt(0)][F]):D):E[S]+=D;E[S]=h(E[S])}return E.join(" ")},w=t.__arabicParser__.processArabic=t.processArabic=function(){var x,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(S)){var F=0;for(N=[],F=0;F<S.length;F+=1)Array.isArray(S[F])?N.push([g(S[F][0]),S[F][1],S[F][2]]):N.push([g(S[F])]);x=N}else x=g(S);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",w])}(En.API),En.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(En.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var A=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(x){w=x}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var A=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,g=0,w=0,x=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=c.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(D,R){return D.concat(S.splitTextToSize(R,N))},[])):l=Array.isArray(l)?l:[l];for(var F=0;F<l.length;F++)g<(x=this.getStringUnitWidth(l[F],{font:h})*A)&&(g=x);return g!==0&&(w=l.length),{w:g/=p,h:Math.max((w*A*this.getLineHeightFactor()-A*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,A=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-A,l.y+A,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+A,{align:"center",baseline:"top",maxWidth:l.width-A-A}):this.text(l.text,l.x+A,l.y+A,{align:"left",baseline:"top",maxWidth:l.width-A-A})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,A,h,p){if(r.call(this),!A)throw new Error("No data for PDF table.");var g,w,x,S,N=[],F=[],D=[],R={},j={},P=[],E=[],T=(p=p||{}).autoSize||!1,k=p.printHeaders!==!1,z=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,M=p.margins||Object.assign({width:this.getPageWidth()},e),U=typeof p.padding=="number"?p.padding:3,G=p.headerBackgroundColor||"#c8c8c8",q=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=q,this.setFontSize(z),h==null)F=N=Object.keys(A[0]),D=N.map(function(){return"left"});else if(Array.isArray(h)&&Bs(h[0])==="object")for(N=h.map(function(J){return J.name}),F=h.map(function(J){return J.prompt||J.name||""}),D=h.map(function(J){return J.align||"left"}),g=0;g<h.length;g+=1)j[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(F=N=h,D=N.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(R[S=N[g]]=A.map(function(J){return J[S]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(F[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=R[S],this.setFont(void 0,"normal"),x=0;x<w.length;x+=1)P.push(this.getTextDimensions(w[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[S]=Math.max.apply(null,P)+U+U,P=[]}if(k){var oe={};for(g=0;g<N.length;g+=1)oe[N[g]]={},oe[N[g]].text=F[g],oe[N[g]].align=D[g];var ee=o.call(this,oe,j);E=N.map(function(J){return new a(l,c,j[J],ee,oe[J].text,void 0,oe[J].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var le=h.reduce(function(J,ce){return J[ce.name]=ce.align,J},{});for(g=0;g<A.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:A[g]},this);var K=o.call(this,A[g],j);for(x=0;x<N.length;x+=1){var ne=A[g][N[x]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:x,data:ne},this),i.call(this,new a(l,c,j[N[x]],K,ne,g+2,le[N[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var A=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(g){var w=l[g];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,c[g]-A-A)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/p+A+A},this).reduce(function(g,w){return Math.max(g,w)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var A;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){A=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(A.y=this.internal.__cell__.margins.top||0,p.push(A)),A.lineNumber=l;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,A),this.setTextColor(w)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(En.API);var Gj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},qj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],VT=zj(qj),Kj=[100,200,300,400,500,600,700,800,900],dre=zj(Kj);function zT(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return Gj[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof VT[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function QD(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var Are={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},VD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function zD(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function fre(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Are,n.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=zT(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[r]))throw new Error("Could not find a font-family for the rule '"+zD(a)+"' and default family '"+r+"'.");if(i=function(l,c){if(c[l])return c[l];var A=VT[l],h=A<=VT.normal?-1:1,p=QD(c,qj,A,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(a.stretch,i),i=function(l,c){if(c[l])return c[l];for(var A=Gj[l],h=0;h<A.length;++h)if(c[A[h]])return c[A[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var A=dre[l],h=QD(c,Kj,A,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+zD(a)+"'.");return i}function GD(t){return t.trimLeft()}function hre(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function mre(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var xy,qD,KD,jE=["times"];(function(t){var e,n,r,s,a,i,o,l,c,A=function(Q){return Q=Q||{},this.isStrokeTransparent=Q.isStrokeTransparent||!1,this.strokeOpacity=Q.strokeOpacity||1,this.strokeStyle=Q.strokeStyle||"#000000",this.fillStyle=Q.fillStyle||"#000000",this.isFillTransparent=Q.isFillTransparent||!1,this.fillOpacity=Q.fillOpacity||1,this.font=Q.font||"10px sans-serif",this.textBaseline=Q.textBaseline||"alphabetic",this.textAlign=Q.textAlign||"left",this.lineWidth=Q.lineWidth||1,this.lineJoin=Q.lineJoin||"miter",this.lineCap=Q.lineCap||"butt",this.path=Q.path||[],this.transform=Q.transform!==void 0?Q.transform.clone():new l,this.globalCompositeOperation=Q.globalCompositeOperation||"normal",this.globalAlpha=Q.globalAlpha||1,this.clip_path=Q.clip_path||[],this.currentPoint=Q.currentPoint||new i,this.miterLimit=Q.miterLimit||10,this.lastPoint=Q.lastPoint||new i,this.lineDashOffset=Q.lineDashOffset||0,this.lineDash=Q.lineDash||[],this.margin=Q.margin||[0,0,0,0],this.prevPageLastElemOffset=Q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Q.ignoreClearRect!="boolean"||Q.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new A}]);var h=function(Q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=Q;Object.defineProperty(this,"pdf",{get:function(){return Z}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(Ue){se=!!Ue}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Ue){ie=!!Ue}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(Ue){isNaN(Ue)||(fe=Ue)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(Ue){isNaN(Ue)||(Se=Ue)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ue){var Ie;typeof Ue=="number"?Ie=[Ue,Ue,Ue,Ue]:((Ie=new Array(4))[0]=Ue[0],Ie[1]=Ue.length>=2?Ue[1]:Ie[0],Ie[2]=Ue.length>=3?Ue[2]:Ie[0],Ie[3]=Ue.length>=4?Ue[3]:Ie[1]),c.margin=Ie}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(Ue){ge=Ue}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Ue){xe=Ue}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(Ue){ve=Ue}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ue){Ue instanceof A&&(c=Ue)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ue){c.path=Ue}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(Ue){me=Ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ue){var Ie;Ie=p(Ue),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ue){var Ie=p(Ue);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ue){["butt","round","square"].indexOf(Ue)!==-1&&(this.ctx.lineCap=Ue,this.pdf.setLineCap(Ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ue){isNaN(Ue)||(this.ctx.lineWidth=Ue,this.pdf.setLineWidth(Ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ue){["bevel","round","miter"].indexOf(Ue)!==-1&&(this.ctx.lineJoin=Ue,this.pdf.setLineJoin(Ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ue){isNaN(Ue)||(this.ctx.miterLimit=Ue,this.pdf.setMiterLimit(Ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ue){this.ctx.textBaseline=Ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ue){["right","end","center","left","start"].indexOf(Ue)!==-1&&(this.ctx.textAlign=Ue)}});var he=null;function He(Ue,Ie){if(he===null){var je=function(Ke){var rt=[];return Object.keys(Ke).forEach(function(xt){Ke[xt].forEach(function(Tt){var vt=null;switch(Tt){case"bold":vt={family:xt,weight:"bold"};break;case"italic":vt={family:xt,style:"italic"};break;case"bolditalic":vt={family:xt,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:xt}}vt!==null&&(vt.ref={name:xt,style:Tt},rt.push(vt))})}),rt}(Ue.getFontList());he=function(Ke){for(var rt={},xt=0;xt<Ke.length;++xt){var Tt=zT(Ke[xt]),vt=Tt.family,Vt=Tt.stretch,Kt=Tt.style,cn=Tt.weight;rt[vt]=rt[vt]||{},rt[vt][Vt]=rt[vt][Vt]||{},rt[vt][Vt][Kt]=rt[vt][Vt][Kt]||{},rt[vt][Vt][Kt][cn]=Tt}return rt}(je.concat(Ie))}return he}var et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(Ue){he=null,et=Ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ue){var Ie;if(this.ctx.font=Ue,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ue))!==null){var je=Ie[1],Ke=(Ie[2],Ie[3]),rt=Ie[4],xt=(Ie[5],Ie[6]),Tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(rt)[2];rt=Math.floor(Tt==="px"?parseFloat(rt)*this.pdf.internal.scaleFactor:Tt==="em"?parseFloat(rt)*this.pdf.getFontSize():parseFloat(rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(rt);var vt=function(Ht){var Qt,_t,Hn=[],dn=Ht.trim();if(dn==="")return jE;if(dn in VD)return[VD[dn]];for(;dn!=="";){switch(_t=null,Qt=(dn=GD(dn)).charAt(0)){case'"':case"'":_t=hre(dn.substring(1),Qt);break;default:_t=mre(dn)}if(_t===null||(Hn.push(_t[0]),(dn=GD(_t[1]))!==""&&dn.charAt(0)!==","))return jE;dn=dn.replace(/^,/,"")}return Hn}(xt);if(this.fontFaces){var Vt=fre(He(this.pdf,this.fontFaces),vt.map(function(Ht){return{family:Ht,stretch:"normal",weight:Ke,style:je}}));this.pdf.setFont(Vt.ref.name,Vt.ref.style)}else{var Kt="";(Ke==="bold"||parseInt(Ke,10)>=700||je==="bold")&&(Kt="bold"),je==="italic"&&(Kt+="italic"),Kt.length===0&&(Kt="normal");for(var cn="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Wt=0;Wt<vt.length;Wt++){if(this.pdf.internal.getFont(vt[Wt],Kt,{noFallback:!0,disableWarning:!0})!==void 0){cn=vt[Wt];break}if(Kt==="bolditalic"&&this.pdf.internal.getFont(vt[Wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)cn=vt[Wt],Kt="bold";else if(this.pdf.internal.getFont(vt[Wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){cn=vt[Wt],Kt="normal";break}}if(cn===""){for(var sn=0;sn<vt.length;sn++)if(Gt[vt[sn]]){cn=Gt[vt[sn]];break}}cn=cn===""?"Times":cn,this.pdf.setFont(cn,Kt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ue){this.ctx.globalCompositeOperation=Ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ue){this.ctx.globalAlpha=Ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ue){this.ctx.lineDashOffset=Ue,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ue){this.ctx.lineDash=Ue,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ue){this.ctx.ignoreClearRect=!!Ue}})};h.prototype.setLineDash=function(Q){this.lineDash=Q},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){R.call(this,"fill",!1)},h.prototype.stroke=function(){R.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(Q,Z){if(isNaN(Q)||isNaN(Z))throw js.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new i(Q,Z));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new i(Q,Z)},h.prototype.closePath=function(){var Q=new i(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&Bs(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){Q=new i(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(Q.x,Q.y)},h.prototype.lineTo=function(Q,Z){if(isNaN(Q)||isNaN(Z))throw js.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new i(Q,Z));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new i(se.x,se.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},h.prototype.quadraticCurveTo=function(Q,Z,se,ie){if(isNaN(se)||isNaN(ie)||isNaN(Q)||isNaN(Z))throw js.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new i(se,ie)),Se=this.ctx.transform.applyToPoint(new i(Q,Z));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new i(fe.x,fe.y)},h.prototype.bezierCurveTo=function(Q,Z,se,ie,fe,Se){if(isNaN(fe)||isNaN(Se)||isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie))throw js.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new i(fe,Se)),xe=this.ctx.transform.applyToPoint(new i(Q,Z)),ve=this.ctx.transform.applyToPoint(new i(se,ie));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:ve.x,y2:ve.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new i(ge.x,ge.y)},h.prototype.arc=function(Q,Z,se,ie,fe,Se){if(isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie)||isNaN(fe))throw js.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new i(Q,Z));Q=ge.x,Z=ge.y;var xe=this.ctx.transform.applyToPoint(new i(0,se)),ve=this.ctx.transform.applyToPoint(new i(0,0));se=Math.sqrt(Math.pow(xe.x-ve.x,2)+Math.pow(xe.y-ve.y,2))}Math.abs(fe-ie)>=2*Math.PI&&(ie=0,fe=2*Math.PI),this.path.push({type:"arc",x:Q,y:Z,radius:se,startAngle:ie,endAngle:fe,counterclockwise:Se})},h.prototype.arcTo=function(Q,Z,se,ie,fe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(Q,Z,se,ie){if(isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie))throw js.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Q,Z),this.lineTo(Q+se,Z),this.lineTo(Q+se,Z+ie),this.lineTo(Q,Z+ie),this.lineTo(Q,Z),this.lineTo(Q+se,Z),this.lineTo(Q,Z)},h.prototype.fillRect=function(Q,Z,se,ie){if(isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie))throw js.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Q,Z,se,ie),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},h.prototype.strokeRect=function(Q,Z,se,ie){if(isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie))throw js.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(Q,Z,se,ie),this.stroke())},h.prototype.clearRect=function(Q,Z,se,ie){if(isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie))throw js.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Q,Z,se,ie))},h.prototype.save=function(Q){Q=typeof Q!="boolean"||Q;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),Q){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new A(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},h.prototype.restore=function(Q){Q=typeof Q!="boolean"||Q;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),Q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(Q){var Z,se,ie,fe;if(Q.isCanvasGradient===!0&&(Q=Q.getColor()),!Q)return{r:0,g:0,b:0,a:0,style:Q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Q))Z=0,se=0,ie=0,fe=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Q);if(Se!==null)Z=parseInt(Se[1]),se=parseInt(Se[2]),ie=parseInt(Se[3]),fe=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Q))!==null)Z=parseInt(Se[1]),se=parseInt(Se[2]),ie=parseInt(Se[3]),fe=parseFloat(Se[4]);else{if(fe=1,typeof Q=="string"&&Q.charAt(0)!=="#"){var ge=new Uj(Q);Q=ge.ok?ge.toHex():"#000000"}Q.length===4?(Z=Q.substring(1,2),Z+=Z,se=Q.substring(2,3),se+=se,ie=Q.substring(3,4),ie+=ie):(Z=Q.substring(1,3),se=Q.substring(3,5),ie=Q.substring(5,7)),Z=parseInt(Z,16),se=parseInt(se,16),ie=parseInt(ie,16)}}return{r:Z,g:se,b:ie,a:fe,style:Q}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(Q,Z,se,ie){if(isNaN(Z)||isNaN(se)||typeof Q!="string")throw js.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!g.call(this)){var fe=K(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;U.call(this,{text:Q,x:Z,y:se,scale:Se,angle:fe,align:this.textAlign,maxWidth:ie})}},h.prototype.strokeText=function(Q,Z,se,ie){if(isNaN(Z)||isNaN(se)||typeof Q!="string")throw js.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){ie=isNaN(ie)?void 0:ie;var fe=K(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;U.call(this,{text:Q,x:Z,y:se,scale:Se,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:ie})}},h.prototype.measureText=function(Q){if(typeof Q!="string")throw js.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,se=this.pdf.internal.scaleFactor,ie=Z.internal.getFontSize(),fe=Z.getStringUnitWidth(Q)*ie/Z.internal.scaleFactor,Se=function(ge){var xe=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new Se({width:fe*=Math.round(96*se/72*1e4)/1e4})},h.prototype.scale=function(Q,Z){if(isNaN(Q)||isNaN(Z))throw js.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new l(Q,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},h.prototype.rotate=function(Q){if(isNaN(Q))throw js.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new l(Math.cos(Q),Math.sin(Q),-Math.sin(Q),Math.cos(Q),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.translate=function(Q,Z){if(isNaN(Q)||isNaN(Z))throw js.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new l(1,0,0,1,Q,Z);this.ctx.transform=this.ctx.transform.multiply(se)},h.prototype.transform=function(Q,Z,se,ie,fe,Se){if(isNaN(Q)||isNaN(Z)||isNaN(se)||isNaN(ie)||isNaN(fe)||isNaN(Se))throw js.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(Q,Z,se,ie,fe,Se);this.ctx.transform=this.ctx.transform.multiply(ge)},h.prototype.setTransform=function(Q,Z,se,ie,fe,Se){Q=isNaN(Q)?1:Q,Z=isNaN(Z)?0:Z,se=isNaN(se)?0:se,ie=isNaN(ie)?1:ie,fe=isNaN(fe)?0:fe,Se=isNaN(Se)?0:Se,this.ctx.transform=new l(Q,Z,se,ie,fe,Se)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(Q,Z,se,ie,fe,Se,ge,xe,ve){var me=this.pdf.getImageProperties(Q),he=1,He=1,et=1,Ue=1;ie!==void 0&&xe!==void 0&&(et=xe/ie,Ue=ve/fe,he=me.width/ie*xe/ie,He=me.height/fe*ve/fe),Se===void 0&&(Se=Z,ge=se,Z=0,se=0),ie!==void 0&&xe===void 0&&(xe=ie,ve=fe),ie===void 0&&xe===void 0&&(xe=me.width,ve=me.height);for(var Ie,je=this.ctx.transform.decompose(),Ke=K(je.rotate.shx),rt=new l,xt=(rt=(rt=(rt=rt.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(Se-Z*et,ge-se*Ue,ie*he,fe*He)),Tt=S.call(this,xt),vt=[],Vt=0;Vt<Tt.length;Vt+=1)vt.indexOf(Tt[Vt])===-1&&vt.push(Tt[Vt]);if(D(vt),this.autoPaging)for(var Kt=vt[0],cn=vt[vt.length-1],Gt=Kt;Gt<cn+1;Gt++){this.pdf.setPage(Gt);var Wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],sn=Gt===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=Gt===1?0:Ht+(Gt-2)*Qt;if(this.ctx.clip_path.length!==0){var Hn=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ie,this.posX+this.margin[3],-_t+sn+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Hn}var dn=JSON.parse(JSON.stringify(xt));dn=F([dn],this.posX+this.margin[3],-_t+sn+this.ctx.prevPageLastElemOffset)[0];var kr=(Gt>Kt||Gt<cn)&&x.call(this);kr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Qt,null).clip().discardPath()),this.pdf.addImage(Q,"JPEG",dn.x,dn.y,dn.w,dn.h,null,null,Ke),kr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Q,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,Ke)};var S=function(Q,Z,se){var ie=[];Z=Z||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(Q.type){default:case"mt":case"lt":ie.push(Math.floor((Q.y+fe)/se)+1);break;case"arc":ie.push(Math.floor((Q.y+fe-Q.radius)/se)+1),ie.push(Math.floor((Q.y+fe+Q.radius)/se)+1);break;case"qct":var Se=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x,Q.y);ie.push(Math.floor((Se.y+fe)/se)+1),ie.push(Math.floor((Se.y+Se.h+fe)/se)+1);break;case"bct":var ge=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x2,Q.y2,Q.x,Q.y);ie.push(Math.floor((ge.y+fe)/se)+1),ie.push(Math.floor((ge.y+ge.h+fe)/se)+1);break;case"rect":ie.push(Math.floor((Q.y+fe)/se)+1),ie.push(Math.floor((Q.y+Q.h+fe)/se)+1)}for(var xe=0;xe<ie.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ie[xe];)N.call(this);return ie},N=function(){var Q=this.fillStyle,Z=this.strokeStyle,se=this.font,ie=this.lineCap,fe=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=Q,this.strokeStyle=Z,this.font=se,this.lineCap=ie,this.lineWidth=fe,this.lineJoin=Se},F=function(Q,Z,se){for(var ie=0;ie<Q.length;ie++)switch(Q[ie].type){case"bct":Q[ie].x2+=Z,Q[ie].y2+=se;case"qct":Q[ie].x1+=Z,Q[ie].y1+=se;case"mt":case"lt":case"arc":default:Q[ie].x+=Z,Q[ie].y+=se}return Q},D=function(Q){return Q.sort(function(Z,se){return Z-se})},R=function(Q,Z){for(var se,ie,fe=this.fillStyle,Se=this.strokeStyle,ge=this.lineCap,xe=this.lineWidth,ve=Math.abs(xe*this.ctx.transform.scaleX),me=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),et=[],Ue=0;Ue<He.length;Ue++)if(He[Ue].x!==void 0)for(var Ie=S.call(this,He[Ue]),je=0;je<Ie.length;je+=1)et.indexOf(Ie[je])===-1&&et.push(Ie[je]);for(var Ke=0;Ke<et.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<et[Ke];)N.call(this);if(D(et),this.autoPaging)for(var rt=et[0],xt=et[et.length-1],Tt=rt;Tt<xt+1;Tt++){this.pdf.setPage(Tt),this.fillStyle=fe,this.strokeStyle=Se,this.lineCap=ge,this.lineWidth=ve,this.lineJoin=me;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=Tt===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],cn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Tt===1?0:Kt+(Tt-2)*cn;if(this.ctx.clip_path.length!==0){var Wt=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(se,this.posX+this.margin[3],-Gt+Vt+this.ctx.prevPageLastElemOffset),j.call(this,Q,!0),this.path=Wt}if(ie=JSON.parse(JSON.stringify(he)),this.path=F(ie,this.posX+this.margin[3],-Gt+Vt+this.ctx.prevPageLastElemOffset),Z===!1||Tt===0){var sn=(Tt>rt||Tt<xt)&&x.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,cn,null).clip().discardPath()),j.call(this,Q,Z),sn&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=ve,j.call(this,Q,Z),this.lineWidth=xe;this.path=he},j=function(Q,Z){if((Q!=="stroke"||Z||!w.call(this))&&(Q==="stroke"||Z||!g.call(this))){for(var se,ie,fe=[],Se=this.path,ge=0;ge<Se.length;ge++){var xe=Se[ge];switch(xe.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:xe,deltas:[],abs:[]});break;case"lt":var ve=fe.length;if(Se[ge-1]&&!isNaN(Se[ge-1].x)&&(se=[xe.x-Se[ge-1].x,xe.y-Se[ge-1].y],ve>0)){for(;ve>=0;ve--)if(fe[ve-1].close!==!0&&fe[ve-1].begin!==!0){fe[ve-1].deltas.push(se),fe[ve-1].abs.push(xe);break}}break;case"bct":se=[xe.x1-Se[ge-1].x,xe.y1-Se[ge-1].y,xe.x2-Se[ge-1].x,xe.y2-Se[ge-1].y,xe.x-Se[ge-1].x,xe.y-Se[ge-1].y],fe[fe.length-1].deltas.push(se);break;case"qct":var me=Se[ge-1].x+2/3*(xe.x1-Se[ge-1].x),he=Se[ge-1].y+2/3*(xe.y1-Se[ge-1].y),He=xe.x+2/3*(xe.x1-xe.x),et=xe.y+2/3*(xe.y1-xe.y),Ue=xe.x,Ie=xe.y;se=[me-Se[ge-1].x,he-Se[ge-1].y,He-Se[ge-1].x,et-Se[ge-1].y,Ue-Se[ge-1].x,Ie-Se[ge-1].y],fe[fe.length-1].deltas.push(se);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(xe)}}ie=Z?null:Q==="stroke"?"stroke":"fill";for(var je=!1,Ke=0;Ke<fe.length;Ke++)if(fe[Ke].arc)for(var rt=fe[Ke].abs,xt=0;xt<rt.length;xt++){var Tt=rt[xt];Tt.type==="arc"?T.call(this,Tt.x,Tt.y,Tt.radius,Tt.startAngle,Tt.endAngle,Tt.counterclockwise,void 0,Z,!je):G.call(this,Tt.x,Tt.y),je=!0}else if(fe[Ke].close===!0)this.pdf.internal.out("h"),je=!1;else if(fe[Ke].begin!==!0){var vt=fe[Ke].start.x,Vt=fe[Ke].start.y;q.call(this,fe[Ke].deltas,vt,Vt),je=!0}ie&&k.call(this,ie),Z&&z.call(this)}},P=function(Q){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Q-se;case"top":return Q+Z-se;case"hanging":return Q+Z-2*se;case"middle":return Q+Z/2-se;case"ideographic":return Q;case"alphabetic":default:return Q}},E=function(Q){return Q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var Q=function(){};return Q.colorStops=[],Q.addColorStop=function(Z,se){this.colorStops.push([Z,se])},Q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Q.isCanvasGradient=!0,Q},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(Q,Z,se,ie,fe,Se,ge,xe,ve){for(var me=ee.call(this,se,ie,fe,Se),he=0;he<me.length;he++){var He=me[he];he===0&&(ve?M.call(this,He.x1+Q,He.y1+Z):G.call(this,He.x1+Q,He.y1+Z)),oe.call(this,Q,Z,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}xe?z.call(this):k.call(this,ge)},k=function(Q){switch(Q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(Q,Z){this.pdf.internal.out(n(Q)+" "+r(Z)+" m")},U=function(Q){var Z;switch(Q.align){case"right":case"end":Z="right";break;case"center":Z="center";break;case"left":case"start":default:Z="left"}var se=this.pdf.getTextDimensions(Q.text),ie=P.call(this,Q.y),fe=E.call(this,ie)-se.h,Se=this.ctx.transform.applyToPoint(new i(Q.x,ie)),ge=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var ve,me,he,He=this.ctx.transform.applyToRectangle(new o(Q.x,ie,se.w,se.h)),et=xe.applyToRectangle(new o(Q.x,fe,se.w,se.h)),Ue=S.call(this,et),Ie=[],je=0;je<Ue.length;je+=1)Ie.indexOf(Ue[je])===-1&&Ie.push(Ue[je]);if(D(Ie),this.autoPaging)for(var Ke=Ie[0],rt=Ie[Ie.length-1],xt=Ke;xt<rt+1;xt++){this.pdf.setPage(xt);var Tt=xt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[2],Kt=Vt-this.margin[0],cn=this.pdf.internal.pageSize.width-this.margin[1],Gt=cn-this.margin[3],Wt=xt===1?0:vt+(xt-2)*Kt;if(this.ctx.clip_path.length!==0){var sn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(ve,this.posX+this.margin[3],-1*Wt+Tt),j.call(this,"fill",!0),this.path=sn}var Ht=F([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Wt+Tt+this.ctx.prevPageLastElemOffset)[0];Q.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*Q.scale),he=this.lineWidth,this.lineWidth=he*Q.scale);var Qt=this.autoPaging!=="text";if(Qt||Ht.y+Ht.h<=Vt){if(Qt||Ht.y>=Tt&&Ht.x<=cn){var _t=Qt?Q.text:this.pdf.splitTextToSize(Q.text,Q.maxWidth||cn-Ht.x)[0],Hn=F([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Wt+Tt+this.ctx.prevPageLastElemOffset)[0],dn=Qt&&(xt>Ke||xt<rt)&&x.call(this);dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Kt,null).clip().discardPath()),this.pdf.text(_t,Hn.x,Hn.y,{angle:Q.angle,align:Z,renderingMode:Q.renderingMode}),dn&&this.pdf.restoreGraphicsState()}}else Ht.y<Vt&&(this.ctx.prevPageLastElemOffset+=Vt-Ht.y);Q.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=he)}else Q.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*Q.scale),he=this.lineWidth,this.lineWidth=he*Q.scale),this.pdf.text(Q.text,Se.x+this.posX,Se.y+this.posY,{angle:Q.angle,align:Z,renderingMode:Q.renderingMode,maxWidth:Q.maxWidth}),Q.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=he)},G=function(Q,Z,se,ie){se=se||0,ie=ie||0,this.pdf.internal.out(n(Q+se)+" "+r(Z+ie)+" l")},q=function(Q,Z,se){return this.pdf.lines(Q,Z,se,null,null)},oe=function(Q,Z,se,ie,fe,Se,ge,xe){this.pdf.internal.out([e(s(se+Q)),e(a(ie+Z)),e(s(fe+Q)),e(a(Se+Z)),e(s(ge+Q)),e(a(xe+Z)),"c"].join(" "))},ee=function(Q,Z,se,ie){for(var fe=2*Math.PI,Se=Math.PI/2;Z>se;)Z-=fe;var ge=Math.abs(se-Z);ge<fe&&ie&&(ge=fe-ge);for(var xe=[],ve=ie?-1:1,me=Z;ge>1e-5;){var he=me+ve*Math.min(ge,Se);xe.push(le.call(this,Q,me,he)),ge-=Math.abs(he-me),me=he}return xe},le=function(Q,Z,se){var ie=(se-Z)/2,fe=Q*Math.cos(ie),Se=Q*Math.sin(ie),ge=fe,xe=-Se,ve=ge*ge+xe*xe,me=ve+ge*fe+xe*Se,he=4/3*(Math.sqrt(2*ve*me)-me)/(ge*Se-xe*fe),He=ge-he*xe,et=xe+he*ge,Ue=He,Ie=-et,je=ie+Z,Ke=Math.cos(je),rt=Math.sin(je);return{x1:Q*Math.cos(Z),y1:Q*Math.sin(Z),x2:He*Ke-et*rt,y2:He*rt+et*Ke,x3:Ue*Ke-Ie*rt,y3:Ue*rt+Ie*Ke,x4:Q*Math.cos(se),y4:Q*Math.sin(se)}},K=function(Q){return 180*Q/Math.PI},ne=function(Q,Z,se,ie,fe,Se){var ge=Q+.5*(se-Q),xe=Z+.5*(ie-Z),ve=fe+.5*(se-fe),me=Se+.5*(ie-Se),he=Math.min(Q,fe,ge,ve),He=Math.max(Q,fe,ge,ve),et=Math.min(Z,Se,xe,me),Ue=Math.max(Z,Se,xe,me);return new o(he,et,He-he,Ue-et)},J=function(Q,Z,se,ie,fe,Se,ge,xe){var ve,me,he,He,et,Ue,Ie,je,Ke,rt,xt,Tt,vt,Vt,Kt=se-Q,cn=ie-Z,Gt=fe-se,Wt=Se-ie,sn=ge-fe,Ht=xe-Se;for(me=0;me<41;me++)Ke=(Ie=(he=Q+(ve=me/40)*Kt)+ve*((et=se+ve*Gt)-he))+ve*(et+ve*(fe+ve*sn-et)-Ie),rt=(je=(He=Z+ve*cn)+ve*((Ue=ie+ve*Wt)-He))+ve*(Ue+ve*(Se+ve*Ht-Ue)-je),me==0?(xt=Ke,Tt=rt,vt=Ke,Vt=rt):(xt=Math.min(xt,Ke),Tt=Math.min(Tt,rt),vt=Math.max(vt,Ke),Vt=Math.max(Vt,rt));return new o(Math.round(xt),Math.round(Tt),Math.round(vt-xt),Math.round(Vt-Tt))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Q,Z,se=(Q=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:Q,lineDashOffset:Z}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(En.API),function(t){var e=function(a){var i,o,l,c,A,h,p,g,w,x;for(o=[],l=0,c=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;c>l;l+=4)(A=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(A=((A=((A=((A=(A-(x=A%85))/85)-(w=A%85))/85)-(g=A%85))/85)-(p=A%85))/85)%85,o.push(h+33,p+33,g+33,w+33,x+33)):o.push(122);return function(S,N){for(var F=N;F>0;F--)S.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},n=function(a){var i,o,l,c,A,h=String,p="length",g=255,w="charCodeAt",x="slice",S="replace";for(a[x](-2),a=a[x](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,A=(a+=i="uuuuu"[x](a[p]%5||5))[p];A>c;c+=5)o=52200625*(a[w](c)-33)+614125*(a[w](c+1)-33)+7225*(a[w](c+2)-33)+85*(a[w](c+3)-33)+(a[w](c+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(N,F){for(var D=F;D>0;D--)N.pop()}(l,i[p]),h.fromCharCode.apply(h,l)},r=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=UT(i)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",c=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(A){return("0"+A.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(En.API),function(t){t.loadFile=function(e,n,r){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,c,A){var h=new XMLHttpRequest,p=0,g=function(w){var x=w.length,S=[],N=String.fromCharCode;for(p=0;p<x;p+=1)S.push(N(255&w.charCodeAt(p)));return S.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?A(g(this.responseText)):A(void 0)}),h.send(null),c&&h.status===200)return g(h.responseText)}(s,a,i)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(En.API),function(t){function e(){return(Wn.html2canvas?Promise.resolve(Wn.html2canvas):I2(()=>Promise.resolve().then(()=>eBe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function n(){return(Wn.DOMPurify?Promise.resolve(Wn.DOMPurify):I2(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var o=Bs(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),c=i.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,A){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)A!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,A));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var g=c[p],w=g.src.find(function(x){return x.format==="truetype"});w&&l.addFont(w.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(r(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(i=i||En.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,c){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,c){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(c,A){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,A).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),A=l.call(c,i,o);return a.convert(A,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,En.getPageSize=function(i,o,l){if(Bs(i)==="object"){var c=i;i=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var A,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+o}var g,w=0,x=0;if(p.hasOwnProperty(h))w=p[h][1]/A,x=p[h][0]/A;else try{w=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",x>w&&(g=x,x=w,w=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",w>x&&(g=x,x=w,w=g)}return{width:x,height:w,unit:o,k:A,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(zT):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(En.API),En.API.addJS=function(t){return KD=t,this.internal.events.subscribe("postPutResources",function(){xy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(xy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+KD+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){xy!==void 0&&qD!==void 0&&this.internal.out("/Names <</JavaScript "+xy+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=r.exec(i);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(i)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,A=[];for(a=0;a<c;a++){var h=n.internal.newObject();A.push(h);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<A.length;a++)n.internal.write("(page_"+(a+1)+")"+A[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var i={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(i),i},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var i=r.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=n.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(En.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,a,i,o){var l,c=this.decode.DCT_DECODE,A=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=i||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var p,g=256*h.charCodeAt(4)+h.charCodeAt(5),w=h.length,x={width:0,height:0,numcomponents:1},S=4;S<w;S+=2){if(S+=g,e.indexOf(h.charCodeAt(S+1))!==-1){p=256*h.charCodeAt(S+5)+h.charCodeAt(S+6),x={width:256*h.charCodeAt(S+7)+h.charCodeAt(S+8),height:p,numcomponents:h.charCodeAt(S+9)};break}g=256*h.charCodeAt(S+2)+h.charCodeAt(S+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}A={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:s}}return A}}(En.API);var om,yy,$D,WD,YD,pre=function(){var t,e,n;function r(a){var i,o,l,c,A,h,p,g,w,x,S,N,F,D;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),w=(function(){var R,j;for(j=[],R=0;R<4;++R)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},A=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*A/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,N=0;0<=i?N<i:N>i;0<=i?++N:--N)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(F=0;0<=x?F<x:F>x;0<=x?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":p=(S=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,S.slice(0,p)),this.text[g]=String.fromCharCode.apply(String,S.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,c=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function A(h,p,g,w){var x,S,N,F,D,R,j,P,E,T,k,z,M,U,G,q,oe,ee,le,K,ne,J=Math.ceil((c.width-h)/g),ce=Math.ceil((c.height-p)/w),Q=c.width==J&&c.height==ce;for(U=i*J,z=Q?o:new Uint8Array(U*ce),R=a.length,M=0,S=0;M<ce&&l<R;){switch(a[l++]){case 0:for(F=oe=0;oe<U;F=oe+=1)z[S++]=a[l++];break;case 1:for(F=ee=0;ee<U;F=ee+=1)x=a[l++],D=F<i?0:z[S-i],z[S++]=(x+D)%256;break;case 2:for(F=le=0;le<U;F=le+=1)x=a[l++],N=(F-F%i)/i,G=M&&z[(M-1)*U+N*i+F%i],z[S++]=(G+x)%256;break;case 3:for(F=K=0;K<U;F=K+=1)x=a[l++],N=(F-F%i)/i,D=F<i?0:z[S-i],G=M&&z[(M-1)*U+N*i+F%i],z[S++]=(x+Math.floor((D+G)/2))%256;break;case 4:for(F=ne=0;ne<U;F=ne+=1)x=a[l++],N=(F-F%i)/i,D=F<i?0:z[S-i],M===0?G=q=0:(G=z[(M-1)*U+N*i+F%i],q=N&&z[(M-1)*U+(N-1)*i+F%i]),j=D+G-q,P=Math.abs(j-D),T=Math.abs(j-G),k=Math.abs(j-q),E=P<=T&&P<=k?D:T<=k?G:q,z[S++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!Q){var Z=((p+M*w)*c.width+h)*i,se=M*U;for(F=0;F<J;F+=1){for(var ie=0;ie<i;ie+=1)o[Z++]=z[se++];Z+=(g-1)*i}}M++}}return a=$ne(a),c.interlaceMethod==1?(A(0,0,8,8),A(4,0,8,8),A(0,4,4,8),A(2,0,4,4),A(0,2,2,4),A(1,0,2,2),A(0,1,1,2)):A(0,0,1,1),o},r.prototype.decodePalette=function(){var a,i,o,l,c,A,h,p,g;for(o=this.palette,A=this.transparency.indexed||[],c=new Uint8Array((A.length||0)+o.length),l=0,a=0,i=h=0,p=o.length;h<p;i=h+=3)c[l++]=o[i],c[l++]=o[i+1],c[l++]=o[i+2],c[l++]=(g=A[a++])!=null?g:255;return c},r.prototype.copyToImageData=function(a,i){var o,l,c,A,h,p,g,w,x,S,N;if(l=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,o=!0),w=(c=a.data||a).length,h=x||i,A=p=0,l===1)for(;A<w;)g=x?4*i[A/4]:p,S=h[g++],c[A++]=S,c[A++]=S,c[A++]=S,c[A++]=o?h[g++]:255,p=g;else for(;A<w;)g=x?4*i[A/4]:p,c[A++]=h[g++],c[A++]=h[g++],c[A++]=h[g++],c[A++]=o?h[g++]:255,p=g},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(Wn)==="[object Window]"){try{e=Wn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var i,o,l,c,A,h,p,g;if(this.animation){for(g=[],o=A=0,h=(p=this.animation.frames).length;A<h;o=++A)i=p[o],l=a.createImageData(i.width,i.height),c=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,c),i.imageData=l,g.push(i.image=t(l));return g}},r.prototype.renderFrame=function(a,i){var o,l,c;return o=(l=this.animation.frames)[i],c=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?a.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&a.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(a){var i,o,l,c,A,h,p=this;return o=0,h=this.animation,c=h.numFrames,l=h.frames,A=h.numPlays,(i=function(){var g,w;if(g=o++%c,w=l[g],p.renderFrame(a,g),c>1&&o/c<A)return p.animation._timeout=setTimeout(i,w.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function gre(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var c=!0,A=[],h=0,p=null,g=0,w=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,w=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],(1&x)==0&&(p=null),g=x>>2&7,e++;break;case 254:for(;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var S=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,R=t[e++],j=R>>6&1,P=1<<(7&R)+1,E=o,T=l,k=!1;R>>7&&(k=!0,E=e,T=P,e+=3*P);var z=e;for(e++;;){var M;if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}A.push({x:S,y:N,width:F,height:D,has_local_palette:k,palette_offset:E,palette_size:T,data_offset:z,data_length:e-z,transparent_index:p,interlaced:!!j,delay:h,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return A.length},this.loopCount=function(){return w},this.frameInfo=function(U){if(U<0||U>=A.length)throw new Error("Frame index out of range.");return A[U]},this.decodeAndBlitFrameBGRA=function(U,G){var q=this.frameInfo(U),oe=q.width*q.height,ee=new Uint8Array(oe);XD(t,q.data_offset,ee,oe);var le=q.palette_offset,K=q.transparent_index;K===null&&(K=256);var ne=q.width,J=n-ne,ce=ne,Q=4*(q.y*n+q.x),Z=4*((q.y+q.height)*n+q.x),se=Q,ie=4*J;q.interlaced===!0&&(ie+=4*n*7);for(var fe=8,Se=0,ge=ee.length;Se<ge;++Se){var xe=ee[Se];if(ce===0&&(ce=ne,(se+=ie)>=Z&&(ie=4*J+4*n*(fe-1),se=Q+(ne+J)*(fe<<1),fe>>=1)),xe===K)se+=4;else{var ve=t[le+3*xe],me=t[le+3*xe+1],he=t[le+3*xe+2];G[se++]=he,G[se++]=me,G[se++]=ve,G[se++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(U,G){var q=this.frameInfo(U),oe=q.width*q.height,ee=new Uint8Array(oe);XD(t,q.data_offset,ee,oe);var le=q.palette_offset,K=q.transparent_index;K===null&&(K=256);var ne=q.width,J=n-ne,ce=ne,Q=4*(q.y*n+q.x),Z=4*((q.y+q.height)*n+q.x),se=Q,ie=4*J;q.interlaced===!0&&(ie+=4*n*7);for(var fe=8,Se=0,ge=ee.length;Se<ge;++Se){var xe=ee[Se];if(ce===0&&(ce=ne,(se+=ie)>=Z&&(ie=4*J+4*n*(fe-1),se=Q+(ne+J)*(fe<<1),fe>>=1)),xe===K)se+=4;else{var ve=t[le+3*xe],me=t[le+3*xe+1],he=t[le+3*xe+2];G[se++]=ve,G[se++]=me,G[se++]=he,G[se++]=255}--ce}}}function XD(t,e,n,r){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,c=(1<<l)-1,A=0,h=0,p=0,g=t[e++],w=new Int32Array(4096),x=null;;){for(;A<16&&g!==0;)h|=t[e++]<<A,A+=8,g===1?g=t[e++]:--g;if(A<l)break;var S=h&c;if(h>>=l,A-=l,S!==a){if(S===i)break;for(var N=S<o?S:x,F=0,D=N;D>a;)D=w[D]>>8,++F;var R=D;if(p+F+(N!==S?1:0)>r)return void js.log("Warning, gif stream longer than expected.");n[p++]=R;var j=p+=F;for(N!==S&&(n[p++]=R),D=N;F--;)D=w[D],n[--j]=255&D,D>>=8;x!==null&&o<4096&&(w[o++]=x<<8|R,o>=c+1&&l<12&&(++l,c=c<<1|1)),x=S}else o=i+1,c=(1<<(l=s+1))-1,x=null}return p!==r&&js.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function HE(t){var e,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),A=new Array(64),h=new Array(65535),p=new Array(65535),g=new Array(64),w=new Array(64),x=[],S=0,N=7,F=new Array(64),D=new Array(64),R=new Array(64),j=new Array(256),P=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(Q,Z){for(var se=0,ie=0,fe=new Array,Se=1;Se<=16;Se++){for(var ge=1;ge<=Q[Se];ge++)fe[Z[ie]]=[],fe[Z[ie]][0]=se,fe[Z[ie]][1]=Se,ie++,se++;se*=2}return fe}function le(Q){for(var Z=Q[0],se=Q[1]-1;se>=0;)Z&1<<se&&(S|=1<<N),se--,--N<0&&(S==255?(K(255),K(0)):K(S),N=7,S=0)}function K(Q){x.push(Q)}function ne(Q){K(Q>>8&255),K(255&Q)}function J(Q,Z,se,ie,fe){for(var Se,ge=fe[0],xe=fe[240],ve=function(rt,xt){var Tt,vt,Vt,Kt,cn,Gt,Wt,sn,Ht,Qt,_t=0;for(Ht=0;Ht<8;++Ht){Tt=rt[_t],vt=rt[_t+1],Vt=rt[_t+2],Kt=rt[_t+3],cn=rt[_t+4],Gt=rt[_t+5],Wt=rt[_t+6];var Hn=Tt+(sn=rt[_t+7]),dn=Tt-sn,kr=vt+Wt,Fn=vt-Wt,ar=Vt+Gt,Mr=Vt-Gt,nr=Kt+cn,Sa=Kt-cn,Cr=Hn+nr,hs=Hn-nr,Ms=kr+ar,dr=kr-ar;rt[_t]=Cr+Ms,rt[_t+4]=Cr-Ms;var xn=.707106781*(dr+hs);rt[_t+2]=hs+xn,rt[_t+6]=hs-xn;var hr=.382683433*((Cr=Sa+Mr)-(dr=Fn+dn)),Ta=.5411961*Cr+hr,ms=1.306562965*dr+hr,Ys=.707106781*(Ms=Mr+Fn),fa=dn+Ys,rn=dn-Ys;rt[_t+5]=rn+Ta,rt[_t+3]=rn-Ta,rt[_t+1]=fa+ms,rt[_t+7]=fa-ms,_t+=8}for(_t=0,Ht=0;Ht<8;++Ht){Tt=rt[_t],vt=rt[_t+8],Vt=rt[_t+16],Kt=rt[_t+24],cn=rt[_t+32],Gt=rt[_t+40],Wt=rt[_t+48];var Ur=Tt+(sn=rt[_t+56]),Ir=Tt-sn,es=vt+Wt,Er=vt-Wt,Yt=Vt+Gt,be=Vt-Gt,Pe=Kt+cn,Fe=Kt-cn,De=Ur+Pe,Le=Ur-Pe,Me=es+Yt,tt=es-Yt;rt[_t]=De+Me,rt[_t+32]=De-Me;var At=.707106781*(tt+Le);rt[_t+16]=Le+At,rt[_t+48]=Le-At;var Je=.382683433*((De=Fe+be)-(tt=Er+Ir)),at=.5411961*De+Je,ct=1.306562965*tt+Je,Bt=.707106781*(Me=be+Er),jt=Ir+Bt,Jt=Ir-Bt;rt[_t+40]=Jt+at,rt[_t+24]=Jt-at,rt[_t+8]=jt+ct,rt[_t+56]=jt-ct,_t++}for(Ht=0;Ht<64;++Ht)Qt=rt[Ht]*xt[Ht],g[Ht]=Qt>0?Qt+.5|0:Qt-.5|0;return g}(Q,Z),me=0;me<64;++me)w[E[me]]=ve[me];var he=w[0]-se;se=w[0],he==0?le(ie[0]):(le(ie[p[Se=32767+he]]),le(h[Se]));for(var He=63;He>0&&w[He]==0;)He--;if(He==0)return le(ge),se;for(var et,Ue=1;Ue<=He;){for(var Ie=Ue;w[Ue]==0&&Ue<=He;)++Ue;var je=Ue-Ie;if(je>=16){et=je>>4;for(var Ke=1;Ke<=et;++Ke)le(xe);je&=15}Se=32767+w[Ue],le(fe[(je<<4)+p[Se]]),le(h[Se]),Ue++}return He!=63&&le(ge),se}function ce(Q){Q=Math.min(Math.max(Q,1),100),a!=Q&&(function(Z){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var fe=i((se[ie]*Z+50)/100);fe=Math.min(Math.max(fe,1),255),o[E[ie]]=fe}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var xe=i((Se[ge]*Z+50)/100);xe=Math.min(Math.max(xe,1),255),l[E[ge]]=xe}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,he=0;he<8;he++)for(var He=0;He<8;He++)c[me]=1/(o[E[me]]*ve[he]*ve[He]*8),A[me]=1/(l[E[me]]*ve[he]*ve[He]*8),me++}(Q<50?Math.floor(5e3/Q):Math.floor(200-2*Q)),a=Q)}this.encode=function(Q,Z){Z&&ce(Z),x=new Array,S=0,N=7,ne(65496),ne(65504),ne(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),ne(1),ne(1),K(0),K(0),function(){ne(65499),ne(132),K(0);for(var vt=0;vt<64;vt++)K(o[vt]);K(1);for(var Vt=0;Vt<64;Vt++)K(l[Vt])}(),function(vt,Vt){ne(65472),ne(17),K(8),ne(Vt),ne(vt),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(Q.width,Q.height),function(){ne(65476),ne(418),K(0);for(var vt=0;vt<16;vt++)K(T[vt+1]);for(var Vt=0;Vt<=11;Vt++)K(k[Vt]);K(16);for(var Kt=0;Kt<16;Kt++)K(z[Kt+1]);for(var cn=0;cn<=161;cn++)K(M[cn]);K(1);for(var Gt=0;Gt<16;Gt++)K(U[Gt+1]);for(var Wt=0;Wt<=11;Wt++)K(G[Wt]);K(17);for(var sn=0;sn<16;sn++)K(q[sn+1]);for(var Ht=0;Ht<=161;Ht++)K(oe[Ht])}(),ne(65498),ne(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var se=0,ie=0,fe=0;S=0,N=7,this.encode.displayName="_encode_";for(var Se,ge,xe,ve,me,he,He,et,Ue,Ie=Q.data,je=Q.width,Ke=Q.height,rt=4*je,xt=0;xt<Ke;){for(Se=0;Se<rt;){for(me=rt*xt+Se,He=-1,et=0,Ue=0;Ue<64;Ue++)he=me+(et=Ue>>3)*rt+(He=4*(7&Ue)),xt+et>=Ke&&(he-=rt*(xt+1+et-Ke)),Se+He>=rt&&(he-=Se+He-rt+4),ge=Ie[he++],xe=Ie[he++],ve=Ie[he++],F[Ue]=(P[ge]+P[xe+256>>0]+P[ve+512>>0]>>16)-128,D[Ue]=(P[ge+768>>0]+P[xe+1024>>0]+P[ve+1280>>0]>>16)-128,R[Ue]=(P[ge+1280>>0]+P[xe+1536>>0]+P[ve+1792>>0]>>16)-128;se=J(F,c,se,e,r),ie=J(D,A,ie,n,s),fe=J(R,A,fe,n,s),Se+=32}xt+=8}if(N>=0){var Tt=[];Tt[1]=N+1,Tt[0]=(1<<N+1)-1,le(Tt)}return ne(65497),new Uint8Array(x)},t=t||50,function(){for(var Q=String.fromCharCode,Z=0;Z<256;Z++)j[Z]=Q(Z)}(),e=ee(T,k),n=ee(U,G),r=ee(z,M),s=ee(q,oe),function(){for(var Q=1,Z=2,se=1;se<=15;se++){for(var ie=Q;ie<Z;ie++)p[32767+ie]=se,h[32767+ie]=[],h[32767+ie][1]=se,h[32767+ie][0]=ie;for(var fe=-(Z-1);fe<=-Q;fe++)p[32767+fe]=se,h[32767+fe]=[],h[32767+fe][1]=se,h[32767+fe][0]=Z-1+fe;Q<<=1,Z<<=1}}(),function(){for(var Q=0;Q<256;Q++)P[Q]=19595*Q,P[Q+256>>0]=38470*Q,P[Q+512>>0]=7471*Q+32768,P[Q+768>>0]=-11059*Q,P[Q+1024>>0]=-21709*Q,P[Q+1280>>0]=32768*Q+8421375,P[Q+1536>>0]=-27439*Q,P[Q+1792>>0]=-5329*Q}(),ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Uu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function JD(t){function e(T){if(!T)throw Error("assert :P")}function n(T,k,z){for(var M=0;4>M;M++)if(T[k+M]!=z.charCodeAt(M))return!0;return!1}function r(T,k,z,M,U){for(var G=0;G<U;G++)T[k+G]=z[M+G]}function s(T,k,z,M){for(var U=0;U<M;U++)T[k+U]=z}function a(T){return new Int32Array(T)}function i(T,k){for(var z=[],M=0;M<T;M++)z.push(new k);return z}function o(T,k){var z=[];return function M(U,G,q){for(var oe=q[G],ee=0;ee<oe&&(U.push(q.length>G+1?[]:new k),!(q.length<G+1));ee++)M(U[ee],G+1,q)}(z,0,T),z}var l=function(){var T=this;function k(B,V){for(var re=1<<V-1>>>0;B&re;)re>>>=1;return re?(B&re-1)+re:B}function z(B,V,re,ue,we){e(!(ue%re));do B[V+(ue-=re)]=we;while(0<ue)}function M(B,V,re,ue,we){if(e(2328>=we),512>=we)var _e=a(512);else if((_e=a(we))==null)return 0;return function(Ee,Ne,ke,Re,Ge,ut){var it,Ze,kt=Ne,pt=1<<ke,qe=a(16),Ye=a(16);for(e(Ge!=0),e(Re!=null),e(Ee!=null),e(0<ke),Ze=0;Ze<Ge;++Ze){if(15<Re[Ze])return 0;++qe[Re[Ze]]}if(qe[0]==Ge)return 0;for(Ye[1]=0,it=1;15>it;++it){if(qe[it]>1<<it)return 0;Ye[it+1]=Ye[it]+qe[it]}for(Ze=0;Ze<Ge;++Ze)it=Re[Ze],0<Re[Ze]&&(ut[Ye[it]++]=Ze);if(Ye[15]==1)return(Re=new U).g=0,Re.value=ut[0],z(Ee,kt,1,pt,Re),pt;var bt,It=-1,Et=pt-1,ln=0,en=1,yn=1,nn=1<<ke;for(Ze=0,it=1,Ge=2;it<=ke;++it,Ge<<=1){if(en+=yn<<=1,0>(yn-=qe[it]))return 0;for(;0<qe[it];--qe[it])(Re=new U).g=it,Re.value=ut[Ze++],z(Ee,kt+ln,Ge,nn,Re),ln=k(ln,it)}for(it=ke+1,Ge=2;15>=it;++it,Ge<<=1){if(en+=yn<<=1,0>(yn-=qe[it]))return 0;for(;0<qe[it];--qe[it]){if(Re=new U,(ln&Et)!=It){for(kt+=nn,bt=1<<(It=it)-ke;15>It&&!(0>=(bt-=qe[It]));)++It,bt<<=1;pt+=nn=1<<(bt=It-ke),Ee[Ne+(It=ln&Et)].g=bt+ke,Ee[Ne+It].value=kt-Ne-It}Re.g=it-ke,Re.value=ut[Ze++],z(Ee,kt+(ln>>ke),Ge,nn,Re),ln=k(ln,it)}}return en!=2*Ye[15]-1?0:pt}(B,V,re,ue,we,_e)}function U(){this.value=this.g=0}function G(){this.value=this.g=0}function q(){this.G=i(5,U),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Vs,G)}function oe(B,V,re,ue){e(B!=null),e(V!=null),e(2147483648>ue),B.Ca=254,B.I=0,B.b=-8,B.Ka=0,B.oa=V,B.pa=re,B.Jd=V,B.Yc=re+ue,B.Zc=4<=ue?re+ue-4+1:re,Se(B)}function ee(B,V){for(var re=0;0<V--;)re|=xe(B,128)<<V;return re}function le(B,V){var re=ee(B,V);return ge(B)?-re:re}function K(B,V,re,ue){var we,_e=0;for(e(B!=null),e(V!=null),e(4294967288>ue),B.Sb=ue,B.Ra=0,B.u=0,B.h=0,4<ue&&(ue=4),we=0;we<ue;++we)_e+=V[re+we]<<8*we;B.Ra=_e,B.bb=ue,B.oa=V,B.pa=re}function ne(B){for(;8<=B.u&&B.bb<B.Sb;)B.Ra>>>=8,B.Ra+=B.oa[B.pa+B.bb]<<zl-8>>>0,++B.bb,B.u-=8;se(B)&&(B.h=1,B.u=0)}function J(B,V){if(e(0<=V),!B.h&&V<=Gi){var re=Z(B)&Kc[V];return B.u+=V,ne(B),re}return B.h=1,B.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(B){return B.Ra>>>(B.u&zl-1)>>>0}function se(B){return e(B.bb<=B.Sb),B.h||B.bb==B.Sb&&B.u>zl}function ie(B,V){B.u=V,B.h=se(B)}function fe(B){B.u>=td&&(e(B.u>=td),ne(B))}function Se(B){e(B!=null&&B.oa!=null),B.pa<B.Zc?(B.I=(B.oa[B.pa++]|B.I<<8)>>>0,B.b+=8):(e(B!=null&&B.oa!=null),B.pa<B.Yc?(B.b+=8,B.I=B.oa[B.pa++]|B.I<<8):B.Ka?B.b=0:(B.I<<=8,B.b+=8,B.Ka=1))}function ge(B){return ee(B,1)}function xe(B,V){var re=B.Ca;0>B.b&&Se(B);var ue=B.b,we=re*V>>>8,_e=(B.I>>>ue>we)+0;for(_e?(re-=we,B.I-=we+1<<ue>>>0):re=we+1,ue=re,we=0;256<=ue;)we+=8,ue>>=8;return ue=7^we+Ai[ue],B.b-=ue,B.Ca=(re<<ue)-1,_e}function ve(B,V,re){B[V+0]=re>>24&255,B[V+1]=re>>16&255,B[V+2]=re>>8&255,B[V+3]=re>>0&255}function me(B,V){return B[V+0]<<0|B[V+1]<<8}function he(B,V){return me(B,V)|B[V+2]<<16}function He(B,V){return me(B,V)|me(B,V+2)<<16}function et(B,V){var re=1<<V;return e(B!=null),e(0<V),B.X=a(re),B.X==null?0:(B.Mb=32-V,B.Xa=V,1)}function Ue(B,V){e(B!=null),e(V!=null),e(B.Xa==V.Xa),r(V.X,0,B.X,0,1<<V.Xa)}function Ie(){this.X=[],this.Xa=this.Mb=0}function je(B,V,re,ue){e(re!=null),e(ue!=null);var we=re[0],_e=ue[0];return we==0&&(we=(B*_e+V/2)/V),_e==0&&(_e=(V*we+B/2)/B),0>=we||0>=_e?0:(re[0]=we,ue[0]=_e,1)}function Ke(B,V){return B+(1<<V)-1>>>V}function rt(B,V){return((4278255360&B)+(4278255360&V)>>>0&4278255360)+((16711935&B)+(16711935&V)>>>0&16711935)>>>0}function xt(B,V){T[V]=function(re,ue,we,_e,Ee,Ne,ke){var Re;for(Re=0;Re<Ee;++Re){var Ge=T[B](Ne[ke+Re-1],we,_e+Re);Ne[ke+Re]=rt(re[ue+Re],Ge)}}}function Tt(){this.ud=this.hd=this.jd=0}function vt(B,V){return((4278124286&(B^V))>>>1)+(B&V)>>>0}function Vt(B){return 0<=B&&256>B?B:0>B?0:255<B?255:void 0}function Kt(B,V){return Vt(B+(B-V+.5>>1))}function cn(B,V,re){return Math.abs(V-re)-Math.abs(B-re)}function Gt(B,V,re,ue,we,_e,Ee){for(ue=_e[Ee-1],re=0;re<we;++re)_e[Ee+re]=ue=rt(B[V+re],ue)}function Wt(B,V,re,ue,we){var _e;for(_e=0;_e<re;++_e){var Ee=B[V+_e],Ne=Ee>>8&255,ke=16711935&(ke=(ke=16711935&Ee)+((Ne<<16)+Ne));ue[we+_e]=(4278255360&Ee)+ke>>>0}}function sn(B,V){V.jd=B>>0&255,V.hd=B>>8&255,V.ud=B>>16&255}function Ht(B,V,re,ue,we,_e){var Ee;for(Ee=0;Ee<ue;++Ee){var Ne=V[re+Ee],ke=Ne>>>8,Re=Ne,Ge=255&(Ge=(Ge=Ne>>>16)+((B.jd<<24>>24)*(ke<<24>>24)>>>5));Re=255&(Re=(Re=Re+((B.hd<<24>>24)*(ke<<24>>24)>>>5))+((B.ud<<24>>24)*(Ge<<24>>24)>>>5)),we[_e+Ee]=(4278255360&Ne)+(Ge<<16)+Re}}function Qt(B,V,re,ue,we){T[V]=function(_e,Ee,Ne,ke,Re,Ge,ut,it,Ze){for(ke=ut;ke<it;++ke)for(ut=0;ut<Ze;++ut)Re[Ge++]=we(Ne[ue(_e[Ee++])])},T[B]=function(_e,Ee,Ne,ke,Re,Ge,ut){var it=8>>_e.b,Ze=_e.Ea,kt=_e.K[0],pt=_e.w;if(8>it)for(_e=(1<<_e.b)-1,pt=(1<<it)-1;Ee<Ne;++Ee){var qe,Ye=0;for(qe=0;qe<Ze;++qe)qe&_e||(Ye=ue(ke[Re++])),Ge[ut++]=we(kt[Ye&pt]),Ye>>=it}else T["VP8LMapColor"+re](ke,Re,kt,pt,Ge,ut,Ee,Ne,Ze)}}function _t(B,V,re,ue,we){for(re=V+re;V<re;){var _e=B[V++];ue[we++]=_e>>16&255,ue[we++]=_e>>8&255,ue[we++]=_e>>0&255}}function Hn(B,V,re,ue,we){for(re=V+re;V<re;){var _e=B[V++];ue[we++]=_e>>16&255,ue[we++]=_e>>8&255,ue[we++]=_e>>0&255,ue[we++]=_e>>24&255}}function dn(B,V,re,ue,we){for(re=V+re;V<re;){var _e=(Ee=B[V++])>>16&240|Ee>>12&15,Ee=Ee>>0&240|Ee>>28&15;ue[we++]=_e,ue[we++]=Ee}}function kr(B,V,re,ue,we){for(re=V+re;V<re;){var _e=(Ee=B[V++])>>16&248|Ee>>13&7,Ee=Ee>>5&224|Ee>>3&31;ue[we++]=_e,ue[we++]=Ee}}function Fn(B,V,re,ue,we){for(re=V+re;V<re;){var _e=B[V++];ue[we++]=_e>>0&255,ue[we++]=_e>>8&255,ue[we++]=_e>>16&255}}function ar(B,V,re,ue,we,_e){if(_e==0)for(re=V+re;V<re;)ve(ue,((_e=B[V++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),we+=32;else r(ue,we,B,V,re)}function Mr(B,V){T[V][0]=T[B+"0"],T[V][1]=T[B+"1"],T[V][2]=T[B+"2"],T[V][3]=T[B+"3"],T[V][4]=T[B+"4"],T[V][5]=T[B+"5"],T[V][6]=T[B+"6"],T[V][7]=T[B+"7"],T[V][8]=T[B+"8"],T[V][9]=T[B+"9"],T[V][10]=T[B+"10"],T[V][11]=T[B+"11"],T[V][12]=T[B+"12"],T[V][13]=T[B+"13"],T[V][14]=T[B+"0"],T[V][15]=T[B+"0"]}function nr(B){return B==ad||B==pc||B==gc||B==m}function Sa(){this.eb=[],this.size=this.A=this.fb=0}function Cr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function hs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sa,this.f.kb=new Cr,this.sd=null}function Ms(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xn(B){return alert("todo:WebPSamplerProcessPlane"),B.T}function hr(B,V){var re=B.T,ue=V.ba.f.RGBA,we=ue.eb,_e=ue.fb+B.ka*ue.A,Ee=ta[V.ba.S],Ne=B.y,ke=B.O,Re=B.f,Ge=B.N,ut=B.ea,it=B.W,Ze=V.cc,kt=V.dc,pt=V.Mc,qe=V.Nc,Ye=B.ka,bt=B.ka+B.T,It=B.U,Et=It+1>>1;for(Ye==0?Ee(Ne,ke,null,null,Re,Ge,ut,it,Re,Ge,ut,it,we,_e,null,null,It):(Ee(V.ec,V.fc,Ne,ke,Ze,kt,pt,qe,Re,Ge,ut,it,we,_e-ue.A,we,_e,It),++re);Ye+2<bt;Ye+=2)Ze=Re,kt=Ge,pt=ut,qe=it,Ge+=B.Rc,it+=B.Rc,_e+=2*ue.A,Ee(Ne,(ke+=2*B.fa)-B.fa,Ne,ke,Ze,kt,pt,qe,Re,Ge,ut,it,we,_e-ue.A,we,_e,It);return ke+=B.fa,B.j+bt<B.o?(r(V.ec,V.fc,Ne,ke,It),r(V.cc,V.dc,Re,Ge,Et),r(V.Mc,V.Nc,ut,it,Et),re--):1&bt||Ee(Ne,ke,null,null,Re,Ge,ut,it,Re,Ge,ut,it,we,_e+ue.A,null,null,It),re}function Ta(B,V,re){var ue=B.F,we=[B.J];if(ue!=null){var _e=B.U,Ee=V.ba.S,Ne=Ee==Yc||Ee==gc;V=V.ba.f.RGBA;var ke=[0],Re=B.ka;ke[0]=B.T,B.Kb&&(Re==0?--ke[0]:(--Re,we[0]-=B.width),B.j+B.ka+B.T==B.o&&(ke[0]=B.o-B.j-Re));var Ge=V.eb;Re=V.fb+Re*V.A,B=gr(ue,we[0],B.width,_e,ke,Ge,Re+(Ne?0:3),V.A),e(re==ke),B&&nr(Ee)&&La(Ge,Re,Ne,_e,ke,V.A)}return 0}function ms(B){var V=B.ma,re=V.ba.S,ue=11>re,we=re==Nu||re==sd||re==Yc||re==$l||re==12||nr(re);if(V.memory=null,V.Ib=null,V.Jb=null,V.Nd=null,!Gc(V.Oa,B,we?11:12))return 0;if(we&&nr(re)&&Rt(),B.da)alert("todo:use_scaling");else{if(ue){if(V.Ib=xn,B.Kb){if(re=B.U+1>>1,V.memory=a(B.U+2*re),V.memory==null)return 0;V.ec=V.memory,V.fc=0,V.cc=V.ec,V.dc=V.fc+B.U,V.Mc=V.cc,V.Nc=V.dc+re,V.Ib=hr,Rt()}}else alert("todo:EmitYUV");we&&(V.Jb=Ta,ue&&Xe())}if(ue&&!f1){for(B=0;256>B;++B)rC[B]=89858*(B-128)+$a>>Jc,mh[B]=-22014*(B-128)+$a,$p[B]=-45773*(B-128),Wa[B]=113618*(B-128)+$a>>Jc;for(B=ld;B<M0;++B)V=76283*(B-16)+$a>>Jc,ph[B-ld]=lr(V,255),Wp[B-ld]=lr(V+8>>4,15);f1=1}return 1}function Ys(B){var V=B.ma,re=B.U,ue=B.T;return e(!(1&B.ka)),0>=re||0>=ue?0:(re=V.Ib(B,V),V.Jb!=null&&V.Jb(B,V,re),V.Dc+=re,1)}function fa(B){B.ma.memory=null}function rn(B,V,re,ue){return J(B,8)!=47?0:(V[0]=J(B,14)+1,re[0]=J(B,14)+1,ue[0]=J(B,1),J(B,3)!=0?0:!B.h)}function Ur(B,V){if(4>B)return B+1;var re=B-2>>1;return(2+(1&B)<<re)+J(V,re)+1}function Ir(B,V){return 120<V?V-120:1<=(re=((re=Qe[V-1])>>4)*B+(8-(15&re)))?re:1;var re}function es(B,V,re){var ue=Z(re),we=B[V+=255&ue].g-8;return 0<we&&(ie(re,re.u+8),ue=Z(re),V+=B[V].value,V+=ue&(1<<we)-1),ie(re,re.u+B[V].g),B[V].value}function Er(B,V,re){return re.g+=B.g,re.value+=B.value<<V>>>0,e(8>=re.g),B.g}function Yt(B,V,re){var ue=B.xc;return e((V=ue==0?0:B.vc[B.md*(re>>ue)+(V>>ue)])<B.Wb),B.Ya[V]}function be(B,V,re,ue){var we=B.ab,_e=B.c*V,Ee=B.C;V=Ee+V;var Ne=re,ke=ue;for(ue=B.Ta,re=B.Ua;0<we--;){var Re=B.gc[we],Ge=Ee,ut=V,it=Ne,Ze=ke,kt=(ke=ue,Ne=re,Re.Ea);switch(e(Ge<ut),e(ut<=Re.nc),Re.hc){case 2:OA(it,Ze,(ut-Ge)*kt,ke,Ne);break;case 0:var pt=Ge,qe=ut,Ye=ke,bt=Ne,It=(nn=Re).Ea;pt==0&&(hh(it,Ze,null,null,1,Ye,bt),Gt(it,Ze+1,0,0,It-1,Ye,bt+1),Ze+=It,bt+=It,++pt);for(var Et=1<<nn.b,ln=Et-1,en=Ke(It,nn.b),yn=nn.K,nn=nn.w+(pt>>nn.b)*en;pt<qe;){var Yr=yn,os=nn,Nr=1;for(po(it,Ze,Ye,bt-It,1,Ye,bt);Nr<It;){var wr=(Nr&~ln)+Et;wr>It&&(wr=It),(0,Gl[Yr[os++]>>8&15])(it,Ze+ +Nr,Ye,bt+Nr-It,wr-Nr,Ye,bt+Nr),Nr=wr}Ze+=It,bt+=It,++pt&ln||(nn+=en)}ut!=Re.nc&&r(ke,Ne-kt,ke,Ne+(ut-Ge-1)*kt,kt);break;case 1:for(kt=it,qe=Ze,It=(it=Re.Ea)-(bt=it&~(Ye=(Ze=1<<Re.b)-1)),pt=Ke(it,Re.b),Et=Re.K,Re=Re.w+(Ge>>Re.b)*pt;Ge<ut;){for(ln=Et,en=Re,yn=new Tt,nn=qe+bt,Yr=qe+it;qe<nn;)sn(ln[en++],yn),ql(yn,kt,qe,Ze,ke,Ne),qe+=Ze,Ne+=Ze;qe<Yr&&(sn(ln[en++],yn),ql(yn,kt,qe,It,ke,Ne),qe+=It,Ne+=It),++Ge&Ye||(Re+=pt)}break;case 3:if(it==ke&&Ze==Ne&&0<Re.b){for(qe=ke,it=kt=Ne+(ut-Ge)*kt-(bt=(ut-Ge)*Ke(Re.Ea,Re.b)),Ze=ke,Ye=Ne,pt=[],bt=(It=bt)-1;0<=bt;--bt)pt[bt]=Ze[Ye+bt];for(bt=It-1;0<=bt;--bt)qe[it+bt]=pt[bt];qa(Re,Ge,ut,ke,kt,ke,Ne)}else qa(Re,Ge,ut,it,Ze,ke,Ne)}Ne=ue,ke=re}ke!=re&&r(ue,re,Ne,ke,_e)}function Pe(B,V){var re=B.V,ue=B.Ba+B.c*B.C,we=V-B.C;if(e(V<=B.l.o),e(16>=we),0<we){var _e=B.l,Ee=B.Ta,Ne=B.Ua,ke=_e.width;if(be(B,we,re,ue),we=Ne=[Ne],e((re=B.C)<(ue=V)),e(_e.v<_e.va),ue>_e.o&&(ue=_e.o),re<_e.j){var Re=_e.j-re;re=_e.j,we[0]+=Re*ke}if(re>=ue?re=0:(we[0]+=4*_e.v,_e.ka=re-_e.j,_e.U=_e.va-_e.v,_e.T=ue-re,re=1),re){if(Ne=Ne[0],11>(re=B.ca).S){var Ge=re.f.RGBA,ut=(ue=re.S,we=_e.U,_e=_e.T,Re=Ge.eb,Ge.A),it=_e;for(Ge=Ge.fb+B.Ma*Ge.A;0<it--;){var Ze=Ee,kt=Ne,pt=we,qe=Re,Ye=Ge;switch(ue){case hi:Da(Ze,kt,pt,qe,Ye);break;case Nu:pa(Ze,kt,pt,qe,Ye);break;case ad:pa(Ze,kt,pt,qe,Ye),La(qe,Ye,0,pt,1,0);break;case El:qi(Ze,kt,pt,qe,Ye);break;case sd:ar(Ze,kt,pt,qe,Ye,1);break;case pc:ar(Ze,kt,pt,qe,Ye,1),La(qe,Ye,0,pt,1,0);break;case Yc:ar(Ze,kt,pt,qe,Ye,0);break;case gc:ar(Ze,kt,pt,qe,Ye,0),La(qe,Ye,1,pt,1,0);break;case $l:yl(Ze,kt,pt,qe,Ye);break;case m:yl(Ze,kt,pt,qe,Ye),pr(qe,Ye,pt,1,0);break;case jA:ga(Ze,kt,pt,qe,Ye);break;default:e(0)}Ne+=ke,Ge+=ut}B.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");e(B.Ma<=re.height)}}B.C=V,e(B.C<=B.i)}function Fe(B){var V;if(0<B.ua)return 0;for(V=0;V<B.Wb;++V){var re=B.Ya[V].G,ue=B.Ya[V].H;if(0<re[1][ue[1]+0].g||0<re[2][ue[2]+0].g||0<re[3][ue[3]+0].g)return 0}return 1}function De(B,V,re,ue,we,_e){if(B.Z!=0){var Ee=B.qd,Ne=B.rd;for(e(rs[B.Z]!=null);V<re;++V)rs[B.Z](Ee,Ne,ue,we,ue,we,_e),Ee=ue,Ne=we,we+=_e;B.qd=Ee,B.rd=Ne}}function Le(B,V){var re=B.l.ma,ue=re.Z==0||re.Z==1?B.l.j:B.C;if(ue=B.C<ue?ue:B.C,e(V<=B.l.o),V>ue){var we=B.l.width,_e=re.ca,Ee=re.tb+we*ue,Ne=B.V,ke=B.Ba+B.c*ue,Re=B.gc;e(B.ab==1),e(Re[0].hc==3),fi(Re[0],ue,V,Ne,ke,_e,Ee),De(re,ue,V,_e,Ee,we)}B.C=B.Ma=V}function Me(B,V,re,ue,we,_e,Ee){var Ne=B.$/ue,ke=B.$%ue,Re=B.m,Ge=B.s,ut=re+B.$,it=ut;we=re+ue*we;var Ze=re+ue*_e,kt=280+Ge.ua,pt=B.Pb?Ne:16777216,qe=0<Ge.ua?Ge.Wa:null,Ye=Ge.wc,bt=ut<Ze?Yt(Ge,ke,Ne):null;e(B.C<_e),e(Ze<=we);var It=!1;e:for(;;){for(;It||ut<Ze;){var Et=0;if(Ne>=pt){var ln=ut-re;e((pt=B).Pb),pt.wd=pt.m,pt.xd=ln,0<pt.s.ua&&Ue(pt.s.Wa,pt.s.vb),pt=Ne+ht}if(ke&Ye||(bt=Yt(Ge,ke,Ne)),e(bt!=null),bt.Qb&&(V[ut]=bt.qb,It=!0),!It)if(fe(Re),bt.jc){Et=Re,ln=V;var en=ut,yn=bt.pd[Z(Et)&Vs-1];e(bt.jc),256>yn.g?(ie(Et,Et.u+yn.g),ln[en]=yn.value,Et=0):(ie(Et,Et.u+yn.g-256),e(256<=yn.value),Et=yn.value),Et==0&&(It=!0)}else Et=es(bt.G[0],bt.H[0],Re);if(Re.h)break;if(It||256>Et){if(!It)if(bt.nd)V[ut]=(bt.qb|Et<<8)>>>0;else{if(fe(Re),It=es(bt.G[1],bt.H[1],Re),fe(Re),ln=es(bt.G[2],bt.H[2],Re),en=es(bt.G[3],bt.H[3],Re),Re.h)break;V[ut]=(en<<24|It<<16|Et<<8|ln)>>>0}if(It=!1,++ut,++ke>=ue&&(ke=0,++Ne,Ee!=null&&Ne<=_e&&!(Ne%16)&&Ee(B,Ne),qe!=null))for(;it<ut;)Et=V[it++],qe.X[(506832829*Et&4294967295)>>>qe.Mb]=Et}else if(280>Et){if(Et=Ur(Et-256,Re),ln=es(bt.G[4],bt.H[4],Re),fe(Re),ln=Ir(ue,ln=Ur(ln,Re)),Re.h)break;if(ut-re<ln||we-ut<Et)break e;for(en=0;en<Et;++en)V[ut+en]=V[ut+en-ln];for(ut+=Et,ke+=Et;ke>=ue;)ke-=ue,++Ne,Ee!=null&&Ne<=_e&&!(Ne%16)&&Ee(B,Ne);if(e(ut<=we),ke&Ye&&(bt=Yt(Ge,ke,Ne)),qe!=null)for(;it<ut;)Et=V[it++],qe.X[(506832829*Et&4294967295)>>>qe.Mb]=Et}else{if(!(Et<kt))break e;for(It=Et-280,e(qe!=null);it<ut;)Et=V[it++],qe.X[(506832829*Et&4294967295)>>>qe.Mb]=Et;Et=ut,e(!(It>>>(ln=qe).Xa)),V[Et]=ln.X[It],It=!0}It||e(Re.h==se(Re))}if(B.Pb&&Re.h&&ut<we)e(B.m.h),B.a=5,B.m=B.wd,B.$=B.xd,0<B.s.ua&&Ue(B.s.vb,B.s.Wa);else{if(Re.h)break e;Ee!=null&&Ee(B,Ne>_e?_e:Ne),B.a=0,B.$=ut-re}return 1}return B.a=3,0}function tt(B){e(B!=null),B.vc=null,B.yc=null,B.Ya=null;var V=B.Wa;V!=null&&(V.X=null),B.vb=null,e(B!=null)}function At(){var B=new Vc;return B==null?null:(B.a=0,B.xb=Bu,Mr("Predictor","VP8LPredictors"),Mr("Predictor","VP8LPredictors_C"),Mr("PredictorAdd","VP8LPredictorsAdd"),Mr("PredictorAdd","VP8LPredictorsAdd_C"),OA=Wt,ql=Ht,Da=_t,pa=Hn,yl=dn,ga=kr,qi=Fn,T.VP8LMapColor32b=Fa,T.VP8LMapColor8b=$c,B)}function Je(B,V,re,ue,we){var _e=1,Ee=[B],Ne=[V],ke=ue.m,Re=ue.s,Ge=null,ut=0;e:for(;;){if(re)for(;_e&&J(ke,1);){var it=Ee,Ze=Ne,kt=ue,pt=1,qe=kt.m,Ye=kt.gc[kt.ab],bt=J(qe,2);if(kt.Oc&1<<bt)_e=0;else{switch(kt.Oc|=1<<bt,Ye.hc=bt,Ye.Ea=it[0],Ye.nc=Ze[0],Ye.K=[null],++kt.ab,e(4>=kt.ab),bt){case 0:case 1:Ye.b=J(qe,3)+2,pt=Je(Ke(Ye.Ea,Ye.b),Ke(Ye.nc,Ye.b),0,kt,Ye.K),Ye.K=Ye.K[0];break;case 3:var It,Et=J(qe,8)+1,ln=16<Et?0:4<Et?1:2<Et?2:3;if(it[0]=Ke(Ye.Ea,ln),Ye.b=ln,It=pt=Je(Et,1,0,kt,Ye.K)){var en,yn=Et,nn=Ye,Yr=1<<(8>>nn.b),os=a(Yr);if(os==null)It=0;else{var Nr=nn.K[0],wr=nn.w;for(os[0]=nn.K[0][0],en=1;en<1*yn;++en)os[en]=rt(Nr[wr+en],os[en-1]);for(;en<4*Yr;++en)os[en]=0;nn.K[0]=null,nn.K[0]=os,It=1}}pt=It;break;case 2:break;default:e(0)}_e=pt}}if(Ee=Ee[0],Ne=Ne[0],_e&&J(ke,1)&&!(_e=1<=(ut=J(ke,4))&&11>=ut)){ue.a=3;break e}var vs;if(vs=_e)t:{var ls,sr,Cs,In=ue,$n=Ee,Kr=Ne,Xr=ut,pi=re,Ya=In.m,xa=In.s,ya=[null],Ra=1,Yl=0,cs=st[Xr];n:for(;;){if(pi&&J(Ya,1)){var Pa=J(Ya,3)+2,yc=Ke($n,Pa),cd=Ke(Kr,Pa),Xd=yc*cd;if(!Je(yc,cd,0,In,ya))break n;for(ya=ya[0],xa.xc=Pa,ls=0;ls<Xd;++ls){var ud=ya[ls]>>8&65535;ya[ls]=ud,ud>=Ra&&(Ra=ud+1)}}if(Ya.h)break n;for(sr=0;5>sr;++sr){var qs=te[sr];!sr&&0<Xr&&(qs+=1<<Xr),Yl<qs&&(Yl=qs)}var gh=i(Ra*cs,U),U0=Ra,xo=i(U0,q);if(xo==null)var na=null;else e(65536>=U0),na=xo;var Jd=a(Yl);if(na==null||Jd==null||gh==null){In.a=1;break n}var dd=gh;for(ls=Cs=0;ls<Ra;++ls){var Ho=na[ls],Ad=Ho.G,Qo=Ho.H,vh=0,HA=1,O0=0;for(sr=0;5>sr;++sr){qs=te[sr],Ad[sr]=dd,Qo[sr]=Cs,!sr&&0<Xr&&(qs+=1<<Xr);s:{var xh,j0=qs,yh=In,QA=Jd,p1=dd,g1=Cs,wh=0,Iu=yh.m,aC=J(Iu,1);if(s(QA,0,0,j0),aC){var v1=J(Iu,1)+1,x1=J(Iu,1),Yp=J(Iu,x1==0?1:8);QA[Yp]=1,v1==2&&(QA[Yp=J(Iu,8)]=1);var VA=1}else{var Xp=a(19),Jp=J(Iu,4)+4;if(19<Jp){yh.a=3;var bh=0;break s}for(xh=0;xh<Jp;++xh)Xp[Ce[xh]]=J(Iu,3);var H0=void 0,zA=void 0,y1=yh,w1=Xp,Fu=j0,_h=QA,Q0=0,wc=y1.m,GA=8,Zp=i(128,U);r:for(;M(Zp,0,7,w1,19);){if(J(wc,1)){var b1=2+2*J(wc,3);if((H0=2+J(wc,b1))>Fu)break r}else H0=Fu;for(zA=0;zA<Fu&&H0--;){fe(wc);var eg=Zp[0+(127&Z(wc))];ie(wc,wc.u+eg.g);var Zd=eg.value;if(16>Zd)_h[zA++]=Zd,Zd!=0&&(GA=Zd);else{var _1=Zd==16,tg=Zd-16,ng=O[tg],rg=J(wc,b[tg])+ng;if(zA+rg>Fu)break r;for(var C1=_1?GA:0;0<rg--;)_h[zA++]=C1}}Q0=1;break r}Q0||(y1.a=3),VA=Q0}(VA=VA&&!Iu.h)&&(wh=M(p1,g1,8,QA,j0)),VA&&wh!=0?bh=wh:(yh.a=3,bh=0)}if(bh==0)break n;if(HA&&de[sr]==1&&(HA=dd[Cs].g==0),vh+=dd[Cs].g,Cs+=bh,3>=sr){var eA,V0=Jd[0];for(eA=1;eA<qs;++eA)Jd[eA]>V0&&(V0=Jd[eA]);O0+=V0}}if(Ho.nd=HA,Ho.Qb=0,HA&&(Ho.qb=(Ad[3][Qo[3]+0].value<<24|Ad[1][Qo[1]+0].value<<16|Ad[2][Qo[2]+0].value)>>>0,vh==0&&256>Ad[0][Qo[0]+0].value&&(Ho.Qb=1,Ho.qb+=Ad[0][Qo[0]+0].value<<8)),Ho.jc=!Ho.Qb&&6>O0,Ho.jc){var Ch,Du=Ho;for(Ch=0;Ch<Vs;++Ch){var Zc=Ch,Lu=Du.pd[Zc],Eh=Du.G[0][Du.H[0]+Zc];256<=Eh.value?(Lu.g=Eh.g+256,Lu.value=Eh.value):(Lu.g=0,Lu.value=0,Zc>>=Er(Eh,8,Lu),Zc>>=Er(Du.G[1][Du.H[1]+Zc],16,Lu),Zc>>=Er(Du.G[2][Du.H[2]+Zc],0,Lu),Er(Du.G[3][Du.H[3]+Zc],24,Lu))}}}xa.vc=ya,xa.Wb=Ra,xa.Ya=na,xa.yc=gh,vs=1;break t}vs=0}if(!(_e=vs)){ue.a=3;break e}if(0<ut){if(Re.ua=1<<ut,!et(Re.Wa,ut)){ue.a=1,_e=0;break e}}else Re.ua=0;var Sh=ue,sg=Ee,E1=Ne,ag=Sh.s,ig=ag.xc;if(Sh.c=sg,Sh.i=E1,ag.md=Ke(sg,ig),ag.wc=ig==0?-1:(1<<ig)-1,re){ue.xb=R0;break e}if((Ge=a(Ee*Ne))==null){ue.a=1,_e=0;break e}_e=(_e=Me(ue,Ge,0,Ee,Ne,Ne,null))&&!ke.h;break e}return _e?(we!=null?we[0]=Ge:(e(Ge==null),e(re)),ue.$=0,re||tt(Re)):tt(Re),_e}function at(B,V){var re=B.c*B.i,ue=re+V+16*V;return e(B.c<=V),B.V=a(ue),B.V==null?(B.Ta=null,B.Ua=0,B.a=1,0):(B.Ta=B.V,B.Ua=B.Ba+re+V,1)}function ct(B,V){var re=B.C,ue=V-re,we=B.V,_e=B.Ba+B.c*re;for(e(V<=B.l.o);0<ue;){var Ee=16<ue?16:ue,Ne=B.l.ma,ke=B.l.width,Re=ke*Ee,Ge=Ne.ca,ut=Ne.tb+ke*re,it=B.Ta,Ze=B.Ua;be(B,Ee,we,_e),gs(it,Ze,Ge,ut,Re),De(Ne,re,re+Ee,Ge,ut,ke),ue-=Ee,we+=Ee*B.c,re+=Ee}e(re==V),B.C=B.Ma=V}function Bt(){this.ub=this.yd=this.td=this.Rb=0}function jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ot(){this.Yb=function(){var B=[];return function V(re,ue,we){for(var _e=we[ue],Ee=0;Ee<_e&&(re.push(we.length>ue+1?[]:0),!(we.length<ue+1));Ee++)V(re[Ee],ue+1,we)}(B,0,[3,11]),B}()}function $t(){this.jb=a(3),this.Wc=o([4,8],Ot),this.Xc=o([4,17],Ot)}function Cn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ar(){this.ld=this.La=this.dd=this.tc=0}function fr(){this.Na=this.la=0}function mr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hs(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Na(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ar),this.Y=0,this.ya=Array(new Hs),this.aa=0,this.l=new Us}function Xs(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ha(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new Bt,this.Kc=new jt,this.ed=new Cn,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new Na,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ce),this.ia=0,this.pb=i(4,mr),this.Pa=new $t,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Xs),this.Hd=0,this.rb=Array(new fr),this.sb=0,this.wa=Array(new Ar),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hs),this.L=this.aa=0,this.gd=o([4,2],Ar),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Us(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mn(){var B=new ha;return B!=null&&(B.a=0,B.sc="OK",B.cb=0,B.Xb=0,An||(An=Al)),B}function Un(B,V,re){return B.a==0&&(B.a=V,B.sc=re,B.cb=0),0}function Js(B,V,re){return 3<=re&&B[V+0]==157&&B[V+1]==1&&B[V+2]==42}function lo(B,V){if(B==null)return 0;if(B.a=0,B.sc="OK",V==null)return Un(B,2,"null VP8Io passed to VP8GetHeaders()");var re=V.data,ue=V.w,we=V.ha;if(4>we)return Un(B,7,"Truncated header.");var _e=re[ue+0]|re[ue+1]<<8|re[ue+2]<<16,Ee=B.Od;if(Ee.Rb=!(1&_e),Ee.td=_e>>1&7,Ee.yd=_e>>4&1,Ee.ub=_e>>5,3<Ee.td)return Un(B,3,"Incorrect keyframe parameters.");if(!Ee.yd)return Un(B,4,"Frame not displayable.");ue+=3,we-=3;var Ne=B.Kc;if(Ee.Rb){if(7>we)return Un(B,7,"cannot parse picture header");if(!Js(re,ue,we))return Un(B,3,"Bad code word");Ne.c=16383&(re[ue+4]<<8|re[ue+3]),Ne.Td=re[ue+4]>>6,Ne.i=16383&(re[ue+6]<<8|re[ue+5]),Ne.Ud=re[ue+6]>>6,ue+=7,we-=7,B.za=Ne.c+15>>4,B.Ub=Ne.i+15>>4,V.width=Ne.c,V.height=Ne.i,V.Da=0,V.j=0,V.v=0,V.va=V.width,V.o=V.height,V.da=0,V.ib=V.width,V.hb=V.height,V.U=V.width,V.T=V.height,s((_e=B.Pa).jb,0,255,_e.jb.length),e((_e=B.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,s(_e.Zb,0,0,_e.Zb.length),s(_e.Lb,0,0,_e.Lb)}if(Ee.ub>we)return Un(B,7,"bad partition length");oe(_e=B.m,re,ue,Ee.ub),ue+=Ee.ub,we-=Ee.ub,Ee.Rb&&(Ne.Ld=ge(_e),Ne.Kd=ge(_e)),Ne=B.Qa;var ke,Re=B.Pa;if(e(_e!=null),e(Ne!=null),Ne.Cb=ge(_e),Ne.Cb){if(Ne.Bb=ge(_e),ge(_e)){for(Ne.Fb=ge(_e),ke=0;4>ke;++ke)Ne.Zb[ke]=ge(_e)?le(_e,7):0;for(ke=0;4>ke;++ke)Ne.Lb[ke]=ge(_e)?le(_e,6):0}if(Ne.Bb)for(ke=0;3>ke;++ke)Re.jb[ke]=ge(_e)?ee(_e,8):255}else Ne.Bb=0;if(_e.Ka)return Un(B,3,"cannot parse segment header");if((Ne=B.ed).zd=ge(_e),Ne.Tb=ee(_e,6),Ne.wb=ee(_e,3),Ne.Pc=ge(_e),Ne.Pc&&ge(_e)){for(Re=0;4>Re;++Re)ge(_e)&&(Ne.vd[Re]=le(_e,6));for(Re=0;4>Re;++Re)ge(_e)&&(Ne.od[Re]=le(_e,6))}if(B.L=Ne.Tb==0?0:Ne.zd?1:2,_e.Ka)return Un(B,3,"cannot parse filter header");var Ge=we;if(we=ke=ue,ue=ke+Ge,Ne=Ge,B.Xb=(1<<ee(B.m,2))-1,Ge<3*(Re=B.Xb))re=7;else{for(ke+=3*Re,Ne-=3*Re,Ge=0;Ge<Re;++Ge){var ut=re[we+0]|re[we+1]<<8|re[we+2]<<16;ut>Ne&&(ut=Ne),oe(B.Jc[+Ge],re,ke,ut),ke+=ut,Ne-=ut,we+=3}oe(B.Jc[+Re],re,ke,Ne),re=ke<ue?0:5}if(re!=0)return Un(B,re,"cannot parse partitions");for(re=ee(ke=B.m,7),we=ge(ke)?le(ke,4):0,ue=ge(ke)?le(ke,4):0,Ne=ge(ke)?le(ke,4):0,Re=ge(ke)?le(ke,4):0,ke=ge(ke)?le(ke,4):0,Ge=B.Qa,ut=0;4>ut;++ut){if(Ge.Cb){var it=Ge.Zb[ut];Ge.Fb||(it+=re)}else{if(0<ut){B.pb[ut]=B.pb[0];continue}it=re}var Ze=B.pb[ut];Ze.Sc[0]=Ft[lr(it+we,127)],Ze.Sc[1]=an[lr(it+0,127)],Ze.Eb[0]=2*Ft[lr(it+ue,127)],Ze.Eb[1]=101581*an[lr(it+Ne,127)]>>16,8>Ze.Eb[1]&&(Ze.Eb[1]=8),Ze.Qc[0]=Ft[lr(it+Re,117)],Ze.Qc[1]=an[lr(it+ke,127)],Ze.lc=it+ke}if(!Ee.Rb)return Un(B,4,"Not a key frame.");for(ge(_e),Ee=B.Pa,re=0;4>re;++re){for(we=0;8>we;++we)for(ue=0;3>ue;++ue)for(Ne=0;11>Ne;++Ne)Re=xe(_e,jo[re][we][ue][Ne])?ee(_e,8):ea[re][we][ue][Ne],Ee.Wc[re][we].Yb[ue][Ne]=Re;for(we=0;17>we;++we)Ee.Xc[re][we]=Ee.Wc[re][L0[we]]}return B.kc=ge(_e),B.kc&&(B.Bd=ee(_e,8)),B.cb=1}function Al(B,V,re,ue,we,_e,Ee){var Ne=V[we].Yb[re];for(re=0;16>we;++we){if(!xe(B,Ne[re+0]))return we;for(;!xe(B,Ne[re+1]);)if(Ne=V[++we].Yb[0],re=0,we==16)return 16;var ke=V[we+1].Yb;if(xe(B,Ne[re+2])){var Re=B,Ge=0;if(xe(Re,(it=Ne)[(ut=re)+3]))if(xe(Re,it[ut+6])){for(Ne=0,ut=2*(Ge=xe(Re,it[ut+8]))+(it=xe(Re,it[ut+9+Ge])),Ge=0,it=vn[ut];it[Ne];++Ne)Ge+=Ge+xe(Re,it[Ne]);Ge+=3+(8<<ut)}else xe(Re,it[ut+7])?(Ge=7+2*xe(Re,165),Ge+=xe(Re,145)):Ge=5+xe(Re,159);else Ge=xe(Re,it[ut+4])?3+xe(Re,it[ut+5]):2;Ne=ke[2]}else Ge=1,Ne=ke[1];ke=Ee+Kn[we],0>(Re=B).b&&Se(Re);var ut,it=Re.b,Ze=(ut=Re.Ca>>1)-(Re.I>>it)>>31;--Re.b,Re.Ca+=Ze,Re.Ca|=1,Re.I-=(ut+1&Ze)<<it,_e[ke]=((Ge^Ze)-Ze)*ue[(0<we)+0]}return 16}function Do(B){var V=B.rb[B.sb-1];V.la=0,V.Na=0,s(B.zc,0,0,B.zc.length),B.ja=0}function Vn(B,V){if(B==null)return 0;if(V==null)return Un(B,2,"NULL VP8Io parameter in VP8Decode().");if(!B.cb&&!lo(B,V))return 0;if(e(B.cb),V.ac==null||V.ac(V)){V.ob&&(B.L=0);var re=ku[B.L];if(B.L==2?(B.yb=0,B.zb=0):(B.yb=V.v-re>>4,B.zb=V.j-re>>4,0>B.yb&&(B.yb=0),0>B.zb&&(B.zb=0)),B.Va=V.o+15+re>>4,B.Hb=V.va+15+re>>4,B.Hb>B.za&&(B.Hb=B.za),B.Va>B.Ub&&(B.Va=B.Ub),0<B.L){var ue=B.ed;for(re=0;4>re;++re){var we;if(B.Qa.Cb){var _e=B.Qa.Lb[re];B.Qa.Fb||(_e+=ue.Tb)}else _e=ue.Tb;for(we=0;1>=we;++we){var Ee=B.gd[re][we],Ne=_e;if(ue.Pc&&(Ne+=ue.vd[0],we&&(Ne+=ue.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var ke=Ne;0<ue.wb&&(ke=4<ue.wb?ke>>2:ke>>1)>9-ue.wb&&(ke=9-ue.wb),1>ke&&(ke=1),Ee.dd=ke,Ee.tc=2*Ne+ke,Ee.ld=40<=Ne?2:15<=Ne?1:0}else Ee.tc=0;Ee.La=we}}}re=0}else Un(B,6,"Frame setup failed"),re=B.a;if(re=re==0){if(re){B.$c=0,0<B.Aa||(B.Ic=h1);e:{re=B.Ic,ue=4*(ke=B.za);var Re=32*ke,Ge=ke+1,ut=0<B.L?ke*(0<B.Aa?2:1):0,it=(B.Aa==2?2:1)*ke;if((Ee=ue+832+(we=3*(16*re+ku[B.L])/2*Re)+(_e=B.Fa!=null&&0<B.Fa.length?B.Kc.c*B.Kc.i:0))!=Ee)re=0;else{if(Ee>B.Vb){if(B.Vb=0,B.Ec=a(Ee),B.Fc=0,B.Ec==null){re=Un(B,1,"no memory during frame initialization.");break e}B.Vb=Ee}Ee=B.Ec,Ne=B.Fc,B.Ac=Ee,B.Bc=Ne,Ne+=ue,B.Gd=i(Re,Xs),B.Hd=0,B.rb=i(Ge+1,fr),B.sb=1,B.wa=ut?i(ut,Ar):null,B.Y=0,B.D.Nb=0,B.D.wa=B.wa,B.D.Y=B.Y,0<B.Aa&&(B.D.Y+=ke),e(!0),B.oc=Ee,B.pc=Ne,Ne+=832,B.ya=i(it,Hs),B.aa=0,B.D.ya=B.ya,B.D.aa=B.aa,B.Aa==2&&(B.D.aa+=ke),B.R=16*ke,B.B=8*ke,ke=(Re=ku[B.L])*B.R,Re=Re/2*B.B,B.sa=Ee,B.ta=Ne+ke,B.qa=B.sa,B.ra=B.ta+16*re*B.R+Re,B.Ha=B.qa,B.Ia=B.ra+8*re*B.B+Re,B.$c=0,Ne+=we,B.mb=_e?Ee:null,B.nb=_e?Ne:null,e(Ne+_e<=B.Fc+B.Vb),Do(B),s(B.Ac,B.Bc,0,ue),re=1}}if(re){if(V.ka=0,V.y=B.sa,V.O=B.ta,V.f=B.qa,V.N=B.ra,V.ea=B.Ha,V.Vd=B.Ia,V.fa=B.R,V.Rc=B.B,V.F=null,V.J=0,!mc){for(re=-255;255>=re;++re)ns[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)go[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)hc[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)Oo[255+re]=0>re?0:255<re?255:re;mc=1}Mo=ka,Uo=co,Ki=Ba,ca=Dn,Di=li,zs=Ll,Su=Ml,wl=Ro,nd=Ul,Ka=Eu,bl=Qc,Wc=dc,Kl=Ia,rd=Ol,Ac=mo,fc=ps,_l=Fs,Gs=Cu,Li[0]=ir,Li[1]=Hc,Li[2]=bn,Li[3]=Bi,Li[4]=ki,Li[5]=Qi,Li[6]=Ga,Li[7]=ci,Li[8]=fo,Li[9]=ui,vc[0]=ji,vc[1]=uc,vc[2]=uo,vc[3]=hl,vc[4]=$r,vc[5]=Lo,vc[6]=Hi,$i[0]=ho,$i[1]=fl,$i[2]=ml,$i[3]=Wr,$i[4]=Tr,$i[5]=Zs,$i[6]=pl,re=1}else re=0}re&&(re=function(Ze,kt){for(Ze.M=0;Ze.M<Ze.Va;++Ze.M){var pt,qe=Ze.Jc[Ze.M&Ze.Xb],Ye=Ze.m,bt=Ze;for(pt=0;pt<bt.za;++pt){var It=Ye,Et=bt,ln=Et.Ac,en=Et.Bc+4*pt,yn=Et.zc,nn=Et.ya[Et.aa+pt];if(Et.Qa.Bb?nn.$b=xe(It,Et.Pa.jb[0])?2+xe(It,Et.Pa.jb[2]):xe(It,Et.Pa.jb[1]):nn.$b=0,Et.kc&&(nn.Ad=xe(It,Et.Bd)),nn.Za=!xe(It,145)+0,nn.Za){var Yr=nn.Ob,os=0;for(Et=0;4>Et;++Et){var Nr,wr=yn[0+Et];for(Nr=0;4>Nr;++Nr){wr=mi[ln[en+Nr]][wr];for(var vs=_s[xe(It,wr[0])];0<vs;)vs=_s[2*vs+xe(It,wr[vs])];wr=-vs,ln[en+Nr]=wr}r(Yr,os,ln,en,4),os+=4,yn[0+Et]=wr}}else wr=xe(It,156)?xe(It,128)?1:3:xe(It,163)?2:0,nn.Ob[0]=wr,s(ln,en,wr,4),s(yn,0,wr,4);nn.Dd=xe(It,142)?xe(It,114)?xe(It,183)?1:3:2:0}if(bt.m.Ka)return Un(Ze,7,"Premature end-of-partition0 encountered.");for(;Ze.ja<Ze.za;++Ze.ja){if(bt=qe,It=(Ye=Ze).rb[Ye.sb-1],ln=Ye.rb[Ye.sb+Ye.ja],pt=Ye.ya[Ye.aa+Ye.ja],en=Ye.kc?pt.Ad:0)It.la=ln.la=0,pt.Za||(It.Na=ln.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var ls,sr;if(It=ln,ln=bt,en=Ye.Pa.Xc,yn=Ye.ya[Ye.aa+Ye.ja],nn=Ye.pb[yn.$b],Et=yn.ad,Yr=0,os=Ye.rb[Ye.sb-1],wr=Nr=0,s(Et,Yr,0,384),yn.Za)var Cs=0,In=en[3];else{vs=a(16);var $n=It.Na+os.Na;if($n=An(ln,en[1],$n,nn.Eb,0,vs,0),It.Na=os.Na=(0<$n)+0,1<$n)Mo(vs,0,Et,Yr);else{var Kr=vs[0]+3>>3;for(vs=0;256>vs;vs+=16)Et[Yr+vs]=Kr}Cs=1,In=en[0]}var Xr=15&It.la,pi=15&os.la;for(vs=0;4>vs;++vs){var Ya=1&pi;for(Kr=sr=0;4>Kr;++Kr)Xr=Xr>>1|(Ya=($n=An(ln,In,$n=Ya+(1&Xr),nn.Sc,Cs,Et,Yr))>Cs)<<7,sr=sr<<2|(3<$n?3:1<$n?2:Et[Yr+0]!=0),Yr+=16;Xr>>=4,pi=pi>>1|Ya<<7,Nr=(Nr<<8|sr)>>>0}for(In=Xr,Cs=pi>>4,ls=0;4>ls;ls+=2){for(sr=0,Xr=It.la>>4+ls,pi=os.la>>4+ls,vs=0;2>vs;++vs){for(Ya=1&pi,Kr=0;2>Kr;++Kr)$n=Ya+(1&Xr),Xr=Xr>>1|(Ya=0<($n=An(ln,en[2],$n,nn.Qc,0,Et,Yr)))<<3,sr=sr<<2|(3<$n?3:1<$n?2:Et[Yr+0]!=0),Yr+=16;Xr>>=2,pi=pi>>1|Ya<<5}wr|=sr<<4*ls,In|=Xr<<4<<ls,Cs|=(240&pi)<<ls}It.la=In,os.la=Cs,yn.Hc=Nr,yn.Gc=wr,yn.ia=43690&wr?0:nn.ia,en=!(Nr|wr)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[pt.$b][pt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!en),bt.Ka)return Un(Ze,7,"Premature end-of-file encountered.")}if(Do(Ze),Ye=kt,bt=1,pt=(qe=Ze).D,It=0<qe.L&&qe.M>=qe.zb&&qe.M<=qe.Va,qe.Aa==0)e:{if(pt.M=qe.M,pt.uc=It,zi(qe,pt),bt=1,pt=(sr=qe.D).Nb,It=(wr=ku[qe.L])*qe.R,ln=wr/2*qe.B,vs=16*pt*qe.R,Kr=8*pt*qe.B,en=qe.sa,yn=qe.ta-It+vs,nn=qe.qa,Et=qe.ra-ln+Kr,Yr=qe.Ha,os=qe.Ia-ln+Kr,pi=(Xr=sr.M)==0,Nr=Xr>=qe.Va-1,qe.Aa==2&&zi(qe,sr),sr.uc)for(Ya=($n=qe).D.M,e($n.D.uc),sr=$n.yb;sr<$n.Hb;++sr){Cs=sr,In=Ya;var xa=(ya=(qs=$n).D).Nb;ls=qs.R;var ya=ya.wa[ya.Y+Cs],Ra=qs.sa,Yl=qs.ta+16*xa*ls+16*Cs,cs=ya.dd,Pa=ya.tc;if(Pa!=0)if(e(3<=Pa),qs.L==1)0<Cs&&fc(Ra,Yl,ls,Pa+4),ya.La&&Gs(Ra,Yl,ls,Pa),0<In&&Ac(Ra,Yl,ls,Pa+4),ya.La&&_l(Ra,Yl,ls,Pa);else{var yc=qs.B,cd=qs.qa,Xd=qs.ra+8*xa*yc+8*Cs,ud=qs.Ha,qs=qs.Ia+8*xa*yc+8*Cs;xa=ya.ld,0<Cs&&(wl(Ra,Yl,ls,Pa+4,cs,xa),Ka(cd,Xd,ud,qs,yc,Pa+4,cs,xa)),ya.La&&(Wc(Ra,Yl,ls,Pa,cs,xa),rd(cd,Xd,ud,qs,yc,Pa,cs,xa)),0<In&&(Su(Ra,Yl,ls,Pa+4,cs,xa),nd(cd,Xd,ud,qs,yc,Pa+4,cs,xa)),ya.La&&(bl(Ra,Yl,ls,Pa,cs,xa),Kl(cd,Xd,ud,qs,yc,Pa,cs,xa))}}if(qe.ia&&alert("todo:DitherRow"),Ye.put!=null){if(sr=16*Xr,Xr=16*(Xr+1),pi?(Ye.y=qe.sa,Ye.O=qe.ta+vs,Ye.f=qe.qa,Ye.N=qe.ra+Kr,Ye.ea=qe.Ha,Ye.W=qe.Ia+Kr):(sr-=wr,Ye.y=en,Ye.O=yn,Ye.f=nn,Ye.N=Et,Ye.ea=Yr,Ye.W=os),Nr||(Xr-=wr),Xr>Ye.o&&(Xr=Ye.o),Ye.F=null,Ye.J=null,qe.Fa!=null&&0<qe.Fa.length&&sr<Xr&&(Ye.J=zc(qe,Ye,sr,Xr-sr),Ye.F=qe.mb,Ye.F==null&&Ye.F.length==0)){bt=Un(qe,3,"Could not decode alpha data.");break e}sr<Ye.j&&(wr=Ye.j-sr,sr=Ye.j,e(!(1&wr)),Ye.O+=qe.R*wr,Ye.N+=qe.B*(wr>>1),Ye.W+=qe.B*(wr>>1),Ye.F!=null&&(Ye.J+=Ye.width*wr)),sr<Xr&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=sr-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=Xr-sr,bt=Ye.put(Ye))}pt+1!=qe.Ic||Nr||(r(qe.sa,qe.ta-It,en,yn+16*qe.R,It),r(qe.qa,qe.ra-ln,nn,Et+8*qe.B,ln),r(qe.Ha,qe.Ia-ln,Yr,os+8*qe.B,ln))}if(!bt)return Un(Ze,6,"Output aborted.")}return 1}(B,V)),V.bc!=null&&V.bc(V),re&=1}return re?(B.cb=0,re):0}function xr(B,V,re,ue,we){we=B[V+re+32*ue]+(we>>3),B[V+re+32*ue]=-256&we?0>we?0:255:we}function Dl(B,V,re,ue,we,_e){xr(B,V,0,re,ue+we),xr(B,V,1,re,ue+_e),xr(B,V,2,re,ue-_e),xr(B,V,3,re,ue-we)}function Sr(B){return(20091*B>>16)+B}function is(B,V,re,ue){var we,_e=0,Ee=a(16);for(we=0;4>we;++we){var Ne=B[V+0]+B[V+8],ke=B[V+0]-B[V+8],Re=(35468*B[V+4]>>16)-Sr(B[V+12]),Ge=Sr(B[V+4])+(35468*B[V+12]>>16);Ee[_e+0]=Ne+Ge,Ee[_e+1]=ke+Re,Ee[_e+2]=ke-Re,Ee[_e+3]=Ne-Ge,_e+=4,V++}for(we=_e=0;4>we;++we)Ne=(B=Ee[_e+0]+4)+Ee[_e+8],ke=B-Ee[_e+8],Re=(35468*Ee[_e+4]>>16)-Sr(Ee[_e+12]),xr(re,ue,0,0,Ne+(Ge=Sr(Ee[_e+4])+(35468*Ee[_e+12]>>16))),xr(re,ue,1,0,ke+Re),xr(re,ue,2,0,ke-Re),xr(re,ue,3,0,Ne-Ge),_e++,ue+=32}function Ll(B,V,re,ue){var we=B[V+0]+4,_e=35468*B[V+4]>>16,Ee=Sr(B[V+4]),Ne=35468*B[V+1]>>16;Dl(re,ue,0,we+Ee,B=Sr(B[V+1]),Ne),Dl(re,ue,1,we+_e,B,Ne),Dl(re,ue,2,we-_e,B,Ne),Dl(re,ue,3,we-Ee,B,Ne)}function co(B,V,re,ue,we){is(B,V,re,ue),we&&is(B,V+16,re,ue+4)}function Ba(B,V,re,ue){Uo(B,V+0,re,ue,1),Uo(B,V+32,re,ue+128,1)}function Dn(B,V,re,ue){var we;for(B=B[V+0]+4,we=0;4>we;++we)for(V=0;4>V;++V)xr(re,ue,V,we,B)}function li(B,V,re,ue){B[V+0]&&ca(B,V+0,re,ue),B[V+16]&&ca(B,V+16,re,ue+4),B[V+32]&&ca(B,V+32,re,ue+128),B[V+48]&&ca(B,V+48,re,ue+128+4)}function ka(B,V,re,ue){var we,_e=a(16);for(we=0;4>we;++we){var Ee=B[V+0+we]+B[V+12+we],Ne=B[V+4+we]+B[V+8+we],ke=B[V+4+we]-B[V+8+we],Re=B[V+0+we]-B[V+12+we];_e[0+we]=Ee+Ne,_e[8+we]=Ee-Ne,_e[4+we]=Re+ke,_e[12+we]=Re-ke}for(we=0;4>we;++we)Ee=(B=_e[0+4*we]+3)+_e[3+4*we],Ne=_e[1+4*we]+_e[2+4*we],ke=_e[1+4*we]-_e[2+4*we],Re=B-_e[3+4*we],re[ue+0]=Ee+Ne>>3,re[ue+16]=Re+ke>>3,re[ue+32]=Ee-Ne>>3,re[ue+48]=Re-ke>>3,ue+=64}function Ni(B,V,re){var ue,we=V-32,_e=va,Ee=255-B[we-1];for(ue=0;ue<re;++ue){var Ne,ke=_e,Re=Ee+B[V-1];for(Ne=0;Ne<re;++Ne)B[V+Ne]=ke[Re+B[we+Ne]];V+=32}}function Hc(B,V){Ni(B,V,4)}function fl(B,V){Ni(B,V,8)}function uc(B,V){Ni(B,V,16)}function uo(B,V){var re;for(re=0;16>re;++re)r(B,V+32*re,B,V-32,16)}function hl(B,V){var re;for(re=16;0<re;--re)s(B,V,B[V-1],16),V+=32}function Ao(B,V,re){var ue;for(ue=0;16>ue;++ue)s(V,re+32*ue,B,16)}function ji(B,V){var re,ue=16;for(re=0;16>re;++re)ue+=B[V-1+32*re]+B[V+re-32];Ao(ue>>5,B,V)}function $r(B,V){var re,ue=8;for(re=0;16>re;++re)ue+=B[V-1+32*re];Ao(ue>>4,B,V)}function Lo(B,V){var re,ue=8;for(re=0;16>re;++re)ue+=B[V+re-32];Ao(ue>>4,B,V)}function Hi(B,V){Ao(128,B,V)}function Ln(B,V,re){return B+2*V+re+2>>2}function bn(B,V){var re,ue=V-32;for(ue=new Uint8Array([Ln(B[ue-1],B[ue+0],B[ue+1]),Ln(B[ue+0],B[ue+1],B[ue+2]),Ln(B[ue+1],B[ue+2],B[ue+3]),Ln(B[ue+2],B[ue+3],B[ue+4])]),re=0;4>re;++re)r(B,V+32*re,ue,0,ue.length)}function Bi(B,V){var re=B[V-1],ue=B[V-1+32],we=B[V-1+64],_e=B[V-1+96];ve(B,V+0,16843009*Ln(B[V-1-32],re,ue)),ve(B,V+32,16843009*Ln(re,ue,we)),ve(B,V+64,16843009*Ln(ue,we,_e)),ve(B,V+96,16843009*Ln(we,_e,_e))}function ir(B,V){var re,ue=4;for(re=0;4>re;++re)ue+=B[V+re-32]+B[V-1+32*re];for(ue>>=3,re=0;4>re;++re)s(B,V+32*re,ue,4)}function ki(B,V){var re=B[V-1+0],ue=B[V-1+32],we=B[V-1+64],_e=B[V-1-32],Ee=B[V+0-32],Ne=B[V+1-32],ke=B[V+2-32],Re=B[V+3-32];B[V+0+96]=Ln(ue,we,B[V-1+96]),B[V+1+96]=B[V+0+64]=Ln(re,ue,we),B[V+2+96]=B[V+1+64]=B[V+0+32]=Ln(_e,re,ue),B[V+3+96]=B[V+2+64]=B[V+1+32]=B[V+0+0]=Ln(Ee,_e,re),B[V+3+64]=B[V+2+32]=B[V+1+0]=Ln(Ne,Ee,_e),B[V+3+32]=B[V+2+0]=Ln(ke,Ne,Ee),B[V+3+0]=Ln(Re,ke,Ne)}function Ga(B,V){var re=B[V+1-32],ue=B[V+2-32],we=B[V+3-32],_e=B[V+4-32],Ee=B[V+5-32],Ne=B[V+6-32],ke=B[V+7-32];B[V+0+0]=Ln(B[V+0-32],re,ue),B[V+1+0]=B[V+0+32]=Ln(re,ue,we),B[V+2+0]=B[V+1+32]=B[V+0+64]=Ln(ue,we,_e),B[V+3+0]=B[V+2+32]=B[V+1+64]=B[V+0+96]=Ln(we,_e,Ee),B[V+3+32]=B[V+2+64]=B[V+1+96]=Ln(_e,Ee,Ne),B[V+3+64]=B[V+2+96]=Ln(Ee,Ne,ke),B[V+3+96]=Ln(Ne,ke,ke)}function Qi(B,V){var re=B[V-1+0],ue=B[V-1+32],we=B[V-1+64],_e=B[V-1-32],Ee=B[V+0-32],Ne=B[V+1-32],ke=B[V+2-32],Re=B[V+3-32];B[V+0+0]=B[V+1+64]=_e+Ee+1>>1,B[V+1+0]=B[V+2+64]=Ee+Ne+1>>1,B[V+2+0]=B[V+3+64]=Ne+ke+1>>1,B[V+3+0]=ke+Re+1>>1,B[V+0+96]=Ln(we,ue,re),B[V+0+64]=Ln(ue,re,_e),B[V+0+32]=B[V+1+96]=Ln(re,_e,Ee),B[V+1+32]=B[V+2+96]=Ln(_e,Ee,Ne),B[V+2+32]=B[V+3+96]=Ln(Ee,Ne,ke),B[V+3+32]=Ln(Ne,ke,Re)}function ci(B,V){var re=B[V+0-32],ue=B[V+1-32],we=B[V+2-32],_e=B[V+3-32],Ee=B[V+4-32],Ne=B[V+5-32],ke=B[V+6-32],Re=B[V+7-32];B[V+0+0]=re+ue+1>>1,B[V+1+0]=B[V+0+64]=ue+we+1>>1,B[V+2+0]=B[V+1+64]=we+_e+1>>1,B[V+3+0]=B[V+2+64]=_e+Ee+1>>1,B[V+0+32]=Ln(re,ue,we),B[V+1+32]=B[V+0+96]=Ln(ue,we,_e),B[V+2+32]=B[V+1+96]=Ln(we,_e,Ee),B[V+3+32]=B[V+2+96]=Ln(_e,Ee,Ne),B[V+3+64]=Ln(Ee,Ne,ke),B[V+3+96]=Ln(Ne,ke,Re)}function ui(B,V){var re=B[V-1+0],ue=B[V-1+32],we=B[V-1+64],_e=B[V-1+96];B[V+0+0]=re+ue+1>>1,B[V+2+0]=B[V+0+32]=ue+we+1>>1,B[V+2+32]=B[V+0+64]=we+_e+1>>1,B[V+1+0]=Ln(re,ue,we),B[V+3+0]=B[V+1+32]=Ln(ue,we,_e),B[V+3+32]=B[V+1+64]=Ln(we,_e,_e),B[V+3+64]=B[V+2+64]=B[V+0+96]=B[V+1+96]=B[V+2+96]=B[V+3+96]=_e}function fo(B,V){var re=B[V-1+0],ue=B[V-1+32],we=B[V-1+64],_e=B[V-1+96],Ee=B[V-1-32],Ne=B[V+0-32],ke=B[V+1-32],Re=B[V+2-32];B[V+0+0]=B[V+2+32]=re+Ee+1>>1,B[V+0+32]=B[V+2+64]=ue+re+1>>1,B[V+0+64]=B[V+2+96]=we+ue+1>>1,B[V+0+96]=_e+we+1>>1,B[V+3+0]=Ln(Ne,ke,Re),B[V+2+0]=Ln(Ee,Ne,ke),B[V+1+0]=B[V+3+32]=Ln(re,Ee,Ne),B[V+1+32]=B[V+3+64]=Ln(ue,re,Ee),B[V+1+64]=B[V+3+96]=Ln(we,ue,re),B[V+1+96]=Ln(_e,we,ue)}function ml(B,V){var re;for(re=0;8>re;++re)r(B,V+32*re,B,V-32,8)}function Wr(B,V){var re;for(re=0;8>re;++re)s(B,V,B[V-1],8),V+=32}function Qs(B,V,re){var ue;for(ue=0;8>ue;++ue)s(V,re+32*ue,B,8)}function ho(B,V){var re,ue=8;for(re=0;8>re;++re)ue+=B[V+re-32]+B[V-1+32*re];Qs(ue>>4,B,V)}function Zs(B,V){var re,ue=4;for(re=0;8>re;++re)ue+=B[V+re-32];Qs(ue>>3,B,V)}function Tr(B,V){var re,ue=4;for(re=0;8>re;++re)ue+=B[V-1+32*re];Qs(ue>>3,B,V)}function pl(B,V){Qs(128,B,V)}function Vi(B,V,re){var ue=B[V-re],we=B[V+0],_e=3*(we-ue)+Tu[1020+B[V-2*re]-B[V+re]],Ee=Cl[112+(_e+4>>3)];B[V-re]=va[255+ue+Cl[112+(_e+3>>3)]],B[V+0]=va[255+we-Ee]}function _u(B,V,re,ue){var we=B[V+0],_e=B[V+re];return vo[255+B[V-2*re]-B[V-re]]>ue||vo[255+_e-we]>ue}function Rl(B,V,re,ue){return 4*vo[255+B[V-re]-B[V+0]]+vo[255+B[V-2*re]-B[V+re]]<=ue}function rr(B,V,re,ue,we){var _e=B[V-3*re],Ee=B[V-2*re],Ne=B[V-re],ke=B[V+0],Re=B[V+re],Ge=B[V+2*re],ut=B[V+3*re];return 4*vo[255+Ne-ke]+vo[255+Ee-Re]>ue?0:vo[255+B[V-4*re]-_e]<=we&&vo[255+_e-Ee]<=we&&vo[255+Ee-Ne]<=we&&vo[255+ut-Ge]<=we&&vo[255+Ge-Re]<=we&&vo[255+Re-ke]<=we}function mo(B,V,re,ue){var we=2*ue+1;for(ue=0;16>ue;++ue)Rl(B,V+ue,re,we)&&Vi(B,V+ue,re)}function ps(B,V,re,ue){var we=2*ue+1;for(ue=0;16>ue;++ue)Rl(B,V+ue*re,1,we)&&Vi(B,V+ue*re,1)}function Fs(B,V,re,ue){var we;for(we=3;0<we;--we)mo(B,V+=4*re,re,ue)}function Cu(B,V,re,ue){var we;for(we=3;0<we;--we)ps(B,V+=4,re,ue)}function Pl(B,V,re,ue,we,_e,Ee,Ne){for(_e=2*_e+1;0<we--;){if(rr(B,V,re,_e,Ee))if(_u(B,V,re,Ne))Vi(B,V,re);else{var ke=B,Re=V,Ge=re,ut=ke[Re-2*Ge],it=ke[Re-Ge],Ze=ke[Re+0],kt=ke[Re+Ge],pt=ke[Re+2*Ge],qe=27*(bt=Tu[1020+3*(Ze-it)+Tu[1020+ut-kt]])+63>>7,Ye=18*bt+63>>7,bt=9*bt+63>>7;ke[Re-3*Ge]=va[255+ke[Re-3*Ge]+bt],ke[Re-2*Ge]=va[255+ut+Ye],ke[Re-Ge]=va[255+it+qe],ke[Re+0]=va[255+Ze-qe],ke[Re+Ge]=va[255+kt-Ye],ke[Re+2*Ge]=va[255+pt-bt]}V+=ue}}function ma(B,V,re,ue,we,_e,Ee,Ne){for(_e=2*_e+1;0<we--;){if(rr(B,V,re,_e,Ee))if(_u(B,V,re,Ne))Vi(B,V,re);else{var ke=B,Re=V,Ge=re,ut=ke[Re-Ge],it=ke[Re+0],Ze=ke[Re+Ge],kt=Cl[112+((pt=3*(it-ut))+4>>3)],pt=Cl[112+(pt+3>>3)],qe=kt+1>>1;ke[Re-2*Ge]=va[255+ke[Re-2*Ge]+qe],ke[Re-Ge]=va[255+ut+pt],ke[Re+0]=va[255+it-kt],ke[Re+Ge]=va[255+Ze-qe]}V+=ue}}function Ml(B,V,re,ue,we,_e){Pl(B,V,re,1,16,ue,we,_e)}function Ro(B,V,re,ue,we,_e){Pl(B,V,1,re,16,ue,we,_e)}function Qc(B,V,re,ue,we,_e){var Ee;for(Ee=3;0<Ee;--Ee)ma(B,V+=4*re,re,1,16,ue,we,_e)}function dc(B,V,re,ue,we,_e){var Ee;for(Ee=3;0<Ee;--Ee)ma(B,V+=4,1,re,16,ue,we,_e)}function Ul(B,V,re,ue,we,_e,Ee,Ne){Pl(B,V,we,1,8,_e,Ee,Ne),Pl(re,ue,we,1,8,_e,Ee,Ne)}function Eu(B,V,re,ue,we,_e,Ee,Ne){Pl(B,V,1,we,8,_e,Ee,Ne),Pl(re,ue,1,we,8,_e,Ee,Ne)}function Ia(B,V,re,ue,we,_e,Ee,Ne){ma(B,V+4*we,we,1,8,_e,Ee,Ne),ma(re,ue+4*we,we,1,8,_e,Ee,Ne)}function Ol(B,V,re,ue,we,_e,Ee,Ne){ma(B,V+4,1,we,8,_e,Ee,Ne),ma(re,ue+4,1,we,8,_e,Ee,Ne)}function jl(){this.ba=new hs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ii(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Hl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gl(){this.ua=0,this.Wa=new Ie,this.vb=new Ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new U}function Vc(){this.xb=this.a=0,this.l=new Us,this.ca=new hs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gl,this.ab=0,this.gc=i(4,Hl),this.Oc=0}function vl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Us,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xl(B,V,re,ue,we,_e,Ee){for(B=B==null?0:B[V+0],V=0;V<Ee;++V)we[_e+V]=B+re[ue+V]&255,B=we[_e+V]}function Ql(B,V,re,ue,we,_e,Ee){var Ne;if(B==null)xl(null,null,re,ue,we,_e,Ee);else for(Ne=0;Ne<Ee;++Ne)we[_e+Ne]=B[V+Ne]+re[ue+Ne]&255}function di(B,V,re,ue,we,_e,Ee){if(B==null)xl(null,null,re,ue,we,_e,Ee);else{var Ne,ke=B[V+0],Re=ke,Ge=ke;for(Ne=0;Ne<Ee;++Ne)Re=Ge+(ke=B[V+Ne])-Re,Ge=re[ue+Ne]+(-256&Re?0>Re?0:255:Re)&255,Re=ke,we[_e+Ne]=Ge}}function zc(B,V,re,ue){var we=V.width,_e=V.o;if(e(B!=null&&V!=null),0>re||0>=ue||re+ue>_e)return null;if(!B.Cc){if(B.ga==null){var Ee;if(B.ga=new vl,(Ee=B.ga==null)||(Ee=V.width*V.o,e(B.Gb.length==0),B.Gb=a(Ee),B.Uc=0,B.Gb==null?Ee=0:(B.mb=B.Gb,B.nb=B.Uc,B.rc=null,Ee=1),Ee=!Ee),!Ee){Ee=B.ga;var Ne=B.Fa,ke=B.P,Re=B.qc,Ge=B.mb,ut=B.nb,it=ke+1,Ze=Re-1,kt=Ee.l;if(e(Ne!=null&&Ge!=null&&V!=null),rs[0]=null,rs[1]=xl,rs[2]=Ql,rs[3]=di,Ee.ca=Ge,Ee.tb=ut,Ee.c=V.width,Ee.i=V.height,e(0<Ee.c&&0<Ee.i),1>=Re)V=0;else if(Ee.$a=Ne[ke+0]>>0&3,Ee.Z=Ne[ke+0]>>2&3,Ee.Lc=Ne[ke+0]>>4&3,ke=Ne[ke+0]>>6&3,0>Ee.$a||1<Ee.$a||4<=Ee.Z||1<Ee.Lc||ke)V=0;else if(kt.put=Ys,kt.ac=ms,kt.bc=fa,kt.ma=Ee,kt.width=V.width,kt.height=V.height,kt.Da=V.Da,kt.v=V.v,kt.va=V.va,kt.j=V.j,kt.o=V.o,Ee.$a)e:{e(Ee.$a==1),V=At();t:for(;;){if(V==null){V=0;break e}if(e(Ee!=null),Ee.mc=V,V.c=Ee.c,V.i=Ee.i,V.l=Ee.l,V.l.ma=Ee,V.l.width=Ee.c,V.l.height=Ee.i,V.a=0,K(V.m,Ne,it,Ze),!Je(Ee.c,Ee.i,1,V,null)||(V.ab==1&&V.gc[0].hc==3&&Fe(V.s)?(Ee.ic=1,Ne=V.c*V.i,V.Ta=null,V.Ua=0,V.V=a(Ne),V.Ba=0,V.V==null?(V.a=1,V=0):V=1):(Ee.ic=0,V=at(V,Ee.c)),!V))break t;V=1;break e}Ee.mc=null,V=0}else V=Ze>=Ee.c*Ee.i;Ee=!V}if(Ee)return null;B.ga.Lc!=1?B.Ga=0:ue=_e-re}e(B.ga!=null),e(re+ue<=_e);e:{if(V=(Ne=B.ga).c,_e=Ne.l.o,Ne.$a==0){if(it=B.rc,Ze=B.Vc,kt=B.Fa,ke=B.P+1+re*V,Re=B.mb,Ge=B.nb+re*V,e(ke<=B.P+B.qc),Ne.Z!=0)for(e(rs[Ne.Z]!=null),Ee=0;Ee<ue;++Ee)rs[Ne.Z](it,Ze,kt,ke,Re,Ge,V),it=Re,Ze=Ge,Ge+=V,ke+=V;else for(Ee=0;Ee<ue;++Ee)r(Re,Ge,kt,ke,V),it=Re,Ze=Ge,Ge+=V,ke+=V;B.rc=it,B.Vc=Ze}else{if(e(Ne.mc!=null),V=re+ue,e((Ee=Ne.mc)!=null),e(V<=Ee.i),Ee.C>=V)V=1;else if(Ne.ic||Xe(),Ne.ic){Ne=Ee.V,it=Ee.Ba,Ze=Ee.c;var pt=Ee.i,qe=(kt=1,ke=Ee.$/Ze,Re=Ee.$%Ze,Ge=Ee.m,ut=Ee.s,Ee.$),Ye=Ze*pt,bt=Ze*V,It=ut.wc,Et=qe<bt?Yt(ut,Re,ke):null;e(qe<=Ye),e(V<=pt),e(Fe(ut));t:for(;;){for(;!Ge.h&&qe<bt;){if(Re&It||(Et=Yt(ut,Re,ke)),e(Et!=null),fe(Ge),256>(pt=es(Et.G[0],Et.H[0],Ge)))Ne[it+qe]=pt,++qe,++Re>=Ze&&(Re=0,++ke<=V&&!(ke%16)&&Le(Ee,ke));else{if(!(280>pt)){kt=0;break t}pt=Ur(pt-256,Ge);var ln,en=es(Et.G[4],Et.H[4],Ge);if(fe(Ge),!(qe>=(en=Ir(Ze,en=Ur(en,Ge)))&&Ye-qe>=pt)){kt=0;break t}for(ln=0;ln<pt;++ln)Ne[it+qe+ln]=Ne[it+qe+ln-en];for(qe+=pt,Re+=pt;Re>=Ze;)Re-=Ze,++ke<=V&&!(ke%16)&&Le(Ee,ke);qe<bt&&Re&It&&(Et=Yt(ut,Re,ke))}e(Ge.h==se(Ge))}Le(Ee,ke>V?V:ke);break t}!kt||Ge.h&&qe<Ye?(kt=0,Ee.a=Ge.h?5:3):Ee.$=qe,V=kt}else V=Me(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,V,ct);if(!V){ue=0;break e}}re+ue>=_e&&(B.Cc=1),ue=1}if(!ue)return null;if(B.Cc&&((ue=B.ga)!=null&&(ue.mc=null),B.ga=null,0<B.Ga))return alert("todo:WebPDequantizeLevels"),null}return B.nb+re*we}function X(B,V,re,ue,we,_e){for(;0<we--;){var Ee,Ne=B,ke=V+(re?1:0),Re=B,Ge=V+(re?0:3);for(Ee=0;Ee<ue;++Ee){var ut=Re[Ge+4*Ee];ut!=255&&(ut*=32897,Ne[ke+4*Ee+0]=Ne[ke+4*Ee+0]*ut>>23,Ne[ke+4*Ee+1]=Ne[ke+4*Ee+1]*ut>>23,Ne[ke+4*Ee+2]=Ne[ke+4*Ee+2]*ut>>23)}V+=_e}}function ye(B,V,re,ue,we){for(;0<ue--;){var _e;for(_e=0;_e<re;++_e){var Ee=B[V+2*_e+0],Ne=15&(Re=B[V+2*_e+1]),ke=4369*Ne,Re=(240&Re|Re>>4)*ke>>16;B[V+2*_e+0]=(240&Ee|Ee>>4)*ke>>16&240|(15&Ee|Ee<<4)*ke>>16>>4&15,B[V+2*_e+1]=240&Re|Ne}V+=we}}function Oe(B,V,re,ue,we,_e,Ee,Ne){var ke,Re,Ge=255;for(Re=0;Re<we;++Re){for(ke=0;ke<ue;++ke){var ut=B[V+ke];_e[Ee+4*ke]=ut,Ge&=ut}V+=re,Ee+=Ne}return Ge!=255}function ze(B,V,re,ue,we){var _e;for(_e=0;_e<we;++_e)re[ue+_e]=B[V+_e]>>8}function Xe(){La=X,pr=ye,gr=Oe,gs=ze}function gt(B,V,re){T[B]=function(ue,we,_e,Ee,Ne,ke,Re,Ge,ut,it,Ze,kt,pt,qe,Ye,bt,It){var Et,ln=It-1>>1,en=Ne[ke+0]|Re[Ge+0]<<16,yn=ut[it+0]|Ze[kt+0]<<16;e(ue!=null);var nn=3*en+yn+131074>>2;for(V(ue[we+0],255&nn,nn>>16,pt,qe),_e!=null&&(nn=3*yn+en+131074>>2,V(_e[Ee+0],255&nn,nn>>16,Ye,bt)),Et=1;Et<=ln;++Et){var Yr=Ne[ke+Et]|Re[Ge+Et]<<16,os=ut[it+Et]|Ze[kt+Et]<<16,Nr=en+Yr+yn+os+524296,wr=Nr+2*(Yr+yn)>>3;nn=wr+en>>1,en=(Nr=Nr+2*(en+os)>>3)+Yr>>1,V(ue[we+2*Et-1],255&nn,nn>>16,pt,qe+(2*Et-1)*re),V(ue[we+2*Et-0],255&en,en>>16,pt,qe+(2*Et-0)*re),_e!=null&&(nn=Nr+yn>>1,en=wr+os>>1,V(_e[Ee+2*Et-1],255&nn,nn>>16,Ye,bt+(2*Et-1)*re),V(_e[Ee+2*Et+0],255&en,en>>16,Ye,bt+(2*Et+0)*re)),en=Yr,yn=os}1&It||(nn=3*en+yn+131074>>2,V(ue[we+It-1],255&nn,nn>>16,pt,qe+(It-1)*re),_e!=null&&(nn=3*yn+en+131074>>2,V(_e[Ee+It-1],255&nn,nn>>16,Ye,bt+(It-1)*re)))}}function Rt(){ta[hi]=xc,ta[Nu]=Wl,ta[El]=Xc,ta[sd]=id,ta[Yc]=Wd,ta[$l]=od,ta[jA]=P0,ta[ad]=Wl,ta[pc]=id,ta[gc]=Wd,ta[m]=od}function qt(B){return B&-16384?0>B?0:255:B>>nC}function I(B,V){return qt((19077*B>>8)+(26149*V>>8)-14234)}function ae(B,V,re){return qt((19077*B>>8)-(6419*V>>8)-(13320*re>>8)+8708)}function Ae(B,V){return qt((19077*B>>8)+(33050*V>>8)-17685)}function Te(B,V,re,ue,we){ue[we+0]=I(B,re),ue[we+1]=ae(B,V,re),ue[we+2]=Ae(B,V)}function We(B,V,re,ue,we){ue[we+0]=Ae(B,V),ue[we+1]=ae(B,V,re),ue[we+2]=I(B,re)}function ot(B,V,re,ue,we){var _e=ae(B,V,re);V=_e<<3&224|Ae(B,V)>>3,ue[we+0]=248&I(B,re)|_e>>5,ue[we+1]=V}function Pt(B,V,re,ue,we){var _e=240&Ae(B,V)|15;ue[we+0]=240&I(B,re)|ae(B,V,re)>>4,ue[we+1]=_e}function Rn(B,V,re,ue,we){ue[we+0]=255,Te(B,V,re,ue,we+1)}function yr(B,V,re,ue,we){We(B,V,re,ue,we),ue[we+3]=255}function Zn(B,V,re,ue,we){Te(B,V,re,ue,we),ue[we+3]=255}function lr(B,V){return 0>B?0:B>V?V:B}function Or(B,V,re){T[B]=function(ue,we,_e,Ee,Ne,ke,Re,Ge,ut){for(var it=Ge+(-2&ut)*re;Ge!=it;)V(ue[we+0],_e[Ee+0],Ne[ke+0],Re,Ge),V(ue[we+1],_e[Ee+0],Ne[ke+0],Re,Ge+re),we+=2,++Ee,++ke,Ge+=2*re;1&ut&&V(ue[we+0],_e[Ee+0],Ne[ke+0],Re,Ge)}}function Po(B,V,re){return re==0?B==0?V==0?6:5:V==0?4:0:re}function ts(B,V,re,ue,we){switch(B>>>30){case 3:Uo(V,re,ue,we,0);break;case 2:zs(V,re,ue,we);break;case 1:ca(V,re,ue,we)}}function zi(B,V){var re,ue,we=V.M,_e=V.Nb,Ee=B.oc,Ne=B.pc+40,ke=B.oc,Re=B.pc+584,Ge=B.oc,ut=B.pc+600;for(re=0;16>re;++re)Ee[Ne+32*re-1]=129;for(re=0;8>re;++re)ke[Re+32*re-1]=129,Ge[ut+32*re-1]=129;for(0<we?Ee[Ne-1-32]=ke[Re-1-32]=Ge[ut-1-32]=129:(s(Ee,Ne-32-1,127,21),s(ke,Re-32-1,127,9),s(Ge,ut-32-1,127,9)),ue=0;ue<B.za;++ue){var it=V.ya[V.aa+ue];if(0<ue){for(re=-1;16>re;++re)r(Ee,Ne+32*re-4,Ee,Ne+32*re+12,4);for(re=-1;8>re;++re)r(ke,Re+32*re-4,ke,Re+32*re+4,4),r(Ge,ut+32*re-4,Ge,ut+32*re+4,4)}var Ze=B.Gd,kt=B.Hd+ue,pt=it.ad,qe=it.Hc;if(0<we&&(r(Ee,Ne-32,Ze[kt].y,0,16),r(ke,Re-32,Ze[kt].f,0,8),r(Ge,ut-32,Ze[kt].ea,0,8)),it.Za){var Ye=Ee,bt=Ne-32+16;for(0<we&&(ue>=B.za-1?s(Ye,bt,Ze[kt].y[15],4):r(Ye,bt,Ze[kt+1].y,0,4)),re=0;4>re;re++)Ye[bt+128+re]=Ye[bt+256+re]=Ye[bt+384+re]=Ye[bt+0+re];for(re=0;16>re;++re,qe<<=2)Ye=Ee,bt=Ne+Yd[re],Li[it.Ob[re]](Ye,bt),ts(qe,pt,16*+re,Ye,bt)}else if(Ye=Po(ue,we,it.Ob[0]),vc[Ye](Ee,Ne),qe!=0)for(re=0;16>re;++re,qe<<=2)ts(qe,pt,16*+re,Ee,Ne+Yd[re]);for(re=it.Gc,Ye=Po(ue,we,it.Dd),$i[Ye](ke,Re),$i[Ye](Ge,ut),qe=pt,Ye=ke,bt=Re,255&(it=re>>0)&&(170&it?Ki(qe,256,Ye,bt):Di(qe,256,Ye,bt)),it=Ge,qe=ut,255&(re>>=8)&&(170&re?Ki(pt,320,it,qe):Di(pt,320,it,qe)),we<B.Ub-1&&(r(Ze[kt].y,0,Ee,Ne+480,16),r(Ze[kt].f,0,ke,Re+224,8),r(Ze[kt].ea,0,Ge,ut+224,8)),re=8*_e*B.B,Ze=B.sa,kt=B.ta+16*ue+16*_e*B.R,pt=B.qa,it=B.ra+8*ue+re,qe=B.Ha,Ye=B.Ia+8*ue+re,re=0;16>re;++re)r(Ze,kt+re*B.R,Ee,Ne+32*re,16);for(re=0;8>re;++re)r(pt,it+re*B.B,ke,Re+32*re,8),r(qe,Ye+re*B.B,Ge,ut+32*re,8)}}function Fi(B,V,re,ue,we,_e,Ee,Ne,ke){var Re=[0],Ge=[0],ut=0,it=ke!=null?ke.kd:0,Ze=ke??new Ii;if(B==null||12>re)return 7;Ze.data=B,Ze.w=V,Ze.ha=re,V=[V],re=[re],Ze.gb=[Ze.gb];e:{var kt=V,pt=re,qe=Ze.gb;if(e(B!=null),e(pt!=null),e(qe!=null),qe[0]=0,12<=pt[0]&&!n(B,kt[0],"RIFF")){if(n(B,kt[0]+8,"WEBP")){qe=3;break e}var Ye=He(B,kt[0]+4);if(12>Ye||4294967286<Ye){qe=3;break e}if(it&&Ye>pt[0]-8){qe=7;break e}qe[0]=Ye,kt[0]+=12,pt[0]-=12}qe=0}if(qe!=0)return qe;for(Ye=0<Ze.gb[0],re=re[0];;){e:{var bt=B;pt=V,qe=re;var It=Re,Et=Ge,ln=kt=[0];if((nn=ut=[ut])[0]=0,8>qe[0])qe=7;else{if(!n(bt,pt[0],"VP8X")){if(He(bt,pt[0]+4)!=10){qe=3;break e}if(18>qe[0]){qe=7;break e}var en=He(bt,pt[0]+8),yn=1+he(bt,pt[0]+12);if(2147483648<=yn*(bt=1+he(bt,pt[0]+15))){qe=3;break e}ln!=null&&(ln[0]=en),It!=null&&(It[0]=yn),Et!=null&&(Et[0]=bt),pt[0]+=18,qe[0]-=18,nn[0]=1}qe=0}}if(ut=ut[0],kt=kt[0],qe!=0)return qe;if(pt=!!(2&kt),!Ye&&ut)return 3;if(_e!=null&&(_e[0]=!!(16&kt)),Ee!=null&&(Ee[0]=pt),Ne!=null&&(Ne[0]=0),Ee=Re[0],kt=Ge[0],ut&&pt&&ke==null){qe=0;break}if(4>re){qe=7;break}if(Ye&&ut||!Ye&&!ut&&!n(B,V[0],"ALPH")){re=[re],Ze.na=[Ze.na],Ze.P=[Ze.P],Ze.Sa=[Ze.Sa];e:{en=B,qe=V,Ye=re;var nn=Ze.gb;It=Ze.na,Et=Ze.P,ln=Ze.Sa,yn=22,e(en!=null),e(Ye!=null),bt=qe[0];var Yr=Ye[0];for(e(It!=null),e(ln!=null),It[0]=null,Et[0]=null,ln[0]=0;;){if(qe[0]=bt,Ye[0]=Yr,8>Yr){qe=7;break e}var os=He(en,bt+4);if(4294967286<os){qe=3;break e}var Nr=8+os+1&-2;if(yn+=Nr,0<nn&&yn>nn){qe=3;break e}if(!n(en,bt,"VP8 ")||!n(en,bt,"VP8L")){qe=0;break e}if(Yr[0]<Nr){qe=7;break e}n(en,bt,"ALPH")||(It[0]=en,Et[0]=bt+8,ln[0]=os),bt+=Nr,Yr-=Nr}}if(re=re[0],Ze.na=Ze.na[0],Ze.P=Ze.P[0],Ze.Sa=Ze.Sa[0],qe!=0)break}re=[re],Ze.Ja=[Ze.Ja],Ze.xa=[Ze.xa];e:if(nn=B,qe=V,Ye=re,It=Ze.gb[0],Et=Ze.Ja,ln=Ze.xa,en=qe[0],bt=!n(nn,en,"VP8 "),yn=!n(nn,en,"VP8L"),e(nn!=null),e(Ye!=null),e(Et!=null),e(ln!=null),8>Ye[0])qe=7;else{if(bt||yn){if(nn=He(nn,en+4),12<=It&&nn>It-12){qe=3;break e}if(it&&nn>Ye[0]-8){qe=7;break e}Et[0]=nn,qe[0]+=8,Ye[0]-=8,ln[0]=yn}else ln[0]=5<=Ye[0]&&nn[en+0]==47&&!(nn[en+4]>>5),Et[0]=Ye[0];qe=0}if(re=re[0],Ze.Ja=Ze.Ja[0],Ze.xa=Ze.xa[0],V=V[0],qe!=0)break;if(4294967286<Ze.Ja)return 3;if(Ne==null||pt||(Ne[0]=Ze.xa?2:1),Ee=[Ee],kt=[kt],Ze.xa){if(5>re){qe=7;break}Ne=Ee,it=kt,pt=_e,B==null||5>re?B=0:5<=re&&B[V+0]==47&&!(B[V+4]>>5)?(Ye=[0],nn=[0],It=[0],K(Et=new Q,B,V,re),rn(Et,Ye,nn,It)?(Ne!=null&&(Ne[0]=Ye[0]),it!=null&&(it[0]=nn[0]),pt!=null&&(pt[0]=It[0]),B=1):B=0):B=0}else{if(10>re){qe=7;break}Ne=kt,B==null||10>re||!Js(B,V+3,re-3)?B=0:(it=B[V+0]|B[V+1]<<8|B[V+2]<<16,pt=16383&(B[V+7]<<8|B[V+6]),B=16383&(B[V+9]<<8|B[V+8]),1&it||3<(it>>1&7)||!(it>>4&1)||it>>5>=Ze.Ja||!pt||!B?B=0:(Ee&&(Ee[0]=pt),Ne&&(Ne[0]=B),B=1))}if(!B||(Ee=Ee[0],kt=kt[0],ut&&(Re[0]!=Ee||Ge[0]!=kt)))return 3;ke!=null&&(ke[0]=Ze,ke.offset=V-ke.w,e(4294967286>V-ke.w),e(ke.offset==ke.ha-re));break}return qe==0||qe==7&&ut&&ke==null?(_e!=null&&(_e[0]|=Ze.na!=null&&0<Ze.na.length),ue!=null&&(ue[0]=Ee),we!=null&&(we[0]=kt),0):qe}function Gc(B,V,re){var ue=V.width,we=V.height,_e=0,Ee=0,Ne=ue,ke=we;if(V.Da=B!=null&&0<B.Da,V.Da&&(Ne=B.cd,ke=B.bd,_e=B.v,Ee=B.j,11>re||(_e&=-2,Ee&=-2),0>_e||0>Ee||0>=Ne||0>=ke||_e+Ne>ue||Ee+ke>we))return 0;if(V.v=_e,V.j=Ee,V.va=_e+Ne,V.o=Ee+ke,V.U=Ne,V.T=ke,V.da=B!=null&&0<B.da,V.da){if(!je(Ne,ke,re=[B.ib],_e=[B.hb]))return 0;V.ib=re[0],V.hb=_e[0]}return V.ob=B!=null&&B.ob,V.Kb=B==null||!B.Sd,V.da&&(V.ob=V.ib<3*ue/4&&V.hb<3*we/4,V.Kb=0),1}function Vl(B){if(B==null)return 2;if(11>B.S){var V=B.f.RGBA;V.fb+=(B.height-1)*V.A,V.A=-V.A}else V=B.f.kb,B=B.height,V.O+=(B-1)*V.fa,V.fa=-V.fa,V.N+=(B-1>>1)*V.Ab,V.Ab=-V.Ab,V.W+=(B-1>>1)*V.Db,V.Db=-V.Db,V.F!=null&&(V.J+=(B-1)*V.lb,V.lb=-V.lb);return 0}function qc(B,V,re,ue){if(ue==null||0>=B||0>=V)return 2;if(re!=null){if(re.Da){var we=re.cd,_e=re.bd,Ee=-2&re.v,Ne=-2&re.j;if(0>Ee||0>Ne||0>=we||0>=_e||Ee+we>B||Ne+_e>V)return 2;B=we,V=_e}if(re.da){if(!je(B,V,we=[re.ib],_e=[re.hb]))return 2;B=we[0],V=_e[0]}}ue.width=B,ue.height=V;e:{var ke=ue.width,Re=ue.height;if(B=ue.S,0>=ke||0>=Re||!(B>=hi&&13>B))B=2;else{if(0>=ue.Rd&&ue.sd==null){Ee=_e=we=V=0;var Ge=(Ne=ke*m1[B])*Re;if(11>B||(_e=(Re+1)/2*(V=(ke+1)/2),B==12&&(Ee=(we=ke)*Re)),(Re=a(Ge+2*_e+Ee))==null){B=1;break e}ue.sd=Re,11>B?((ke=ue.f.RGBA).eb=Re,ke.fb=0,ke.A=Ne,ke.size=Ge):((ke=ue.f.kb).y=Re,ke.O=0,ke.fa=Ne,ke.Fd=Ge,ke.f=Re,ke.N=0+Ge,ke.Ab=V,ke.Cd=_e,ke.ea=Re,ke.W=0+Ge+_e,ke.Db=V,ke.Ed=_e,B==12&&(ke.F=Re,ke.J=0+Ge+2*_e),ke.Tc=Ee,ke.lb=we)}if(V=1,we=ue.S,_e=ue.width,Ee=ue.height,we>=hi&&13>we)if(11>we)B=ue.f.RGBA,V&=(Ne=Math.abs(B.A))*(Ee-1)+_e<=B.size,V&=Ne>=_e*m1[we],V&=B.eb!=null;else{B=ue.f.kb,Ne=(_e+1)/2,Ge=(Ee+1)/2,ke=Math.abs(B.fa),Re=Math.abs(B.Ab);var ut=Math.abs(B.Db),it=Math.abs(B.lb),Ze=it*(Ee-1)+_e;V&=ke*(Ee-1)+_e<=B.Fd,V&=Re*(Ge-1)+Ne<=B.Cd,V=(V&=ut*(Ge-1)+Ne<=B.Ed)&ke>=_e&Re>=Ne&ut>=Ne,V&=B.y!=null,V&=B.f!=null,V&=B.ea!=null,we==12&&(V&=it>=_e,V&=Ze<=B.Tc,V&=B.F!=null)}else V=0;B=V?0:2}}return B!=0||re!=null&&re.fd&&(B=Vl(ue)),B}var Vs=64,Kc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gi=24,zl=32,td=8,Ai=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xt("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(B){return B},T.Predictor2=function(B,V,re){return V[re+0]},T.Predictor3=function(B,V,re){return V[re+1]},T.Predictor4=function(B,V,re){return V[re-1]},T.Predictor5=function(B,V,re){return vt(vt(B,V[re+1]),V[re+0])},T.Predictor6=function(B,V,re){return vt(B,V[re-1])},T.Predictor7=function(B,V,re){return vt(B,V[re+0])},T.Predictor8=function(B,V,re){return vt(V[re-1],V[re+0])},T.Predictor9=function(B,V,re){return vt(V[re+0],V[re+1])},T.Predictor10=function(B,V,re){return vt(vt(B,V[re-1]),vt(V[re+0],V[re+1]))},T.Predictor11=function(B,V,re){var ue=V[re+0];return 0>=cn(ue>>24&255,B>>24&255,(V=V[re-1])>>24&255)+cn(ue>>16&255,B>>16&255,V>>16&255)+cn(ue>>8&255,B>>8&255,V>>8&255)+cn(255&ue,255&B,255&V)?ue:B},T.Predictor12=function(B,V,re){var ue=V[re+0];return(Vt((B>>24&255)+(ue>>24&255)-((V=V[re-1])>>24&255))<<24|Vt((B>>16&255)+(ue>>16&255)-(V>>16&255))<<16|Vt((B>>8&255)+(ue>>8&255)-(V>>8&255))<<8|Vt((255&B)+(255&ue)-(255&V)))>>>0},T.Predictor13=function(B,V,re){var ue=V[re-1];return(Kt((B=vt(B,V[re+0]))>>24&255,ue>>24&255)<<24|Kt(B>>16&255,ue>>16&255)<<16|Kt(B>>8&255,ue>>8&255)<<8|Kt(B>>0&255,ue>>0&255))>>>0};var hh=T.PredictorAdd0;T.PredictorAdd1=Gt,xt("Predictor2","PredictorAdd2"),xt("Predictor3","PredictorAdd3"),xt("Predictor4","PredictorAdd4"),xt("Predictor5","PredictorAdd5"),xt("Predictor6","PredictorAdd6"),xt("Predictor7","PredictorAdd7"),xt("Predictor8","PredictorAdd8"),xt("Predictor9","PredictorAdd9"),xt("Predictor10","PredictorAdd10"),xt("Predictor11","PredictorAdd11"),xt("Predictor12","PredictorAdd12"),xt("Predictor13","PredictorAdd13");var po=T.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(B){return B>>8&255},function(B){return B}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(B){return B},function(B){return B>>8&255});var OA,qa=T.ColorIndexInverseTransform,Fa=T.MapARGB,fi=T.VP8LColorIndexInverseTransformAlpha,$c=T.MapAlpha,Gl=T.VP8LPredictorsAdd=[];Gl.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var ql,Da,pa,yl,ga,qi,Mo,Uo,zs,Ki,ca,Di,Su,wl,nd,Ka,bl,Wc,Kl,rd,Ac,fc,_l,Gs,La,pr,gr,gs,ns=a(511),go=a(2041),hc=a(225),Oo=a(767),mc=0,Tu=go,Cl=hc,va=Oo,vo=ns,hi=0,Nu=1,El=2,sd=3,Yc=4,$l=5,jA=6,ad=7,pc=8,gc=9,m=10,b=[2,3,7],O=[3,3,11],te=[280,256,256,256,40],de=[0,1,1,1,0],Ce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],st=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ht=8,Ft=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],an=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],An=null,vn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Kn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_s=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ea=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],L0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vc=[],Li=[],$i=[],R0=1,Bu=2,rs=[],ta=[];gt("UpsampleRgbLinePair",Te,3),gt("UpsampleBgrLinePair",We,3),gt("UpsampleRgbaLinePair",Zn,4),gt("UpsampleBgraLinePair",yr,4),gt("UpsampleArgbLinePair",Rn,4),gt("UpsampleRgba4444LinePair",Pt,2),gt("UpsampleRgb565LinePair",ot,2);var xc=T.UpsampleRgbLinePair,Xc=T.UpsampleBgrLinePair,Wl=T.UpsampleRgbaLinePair,id=T.UpsampleBgraLinePair,Wd=T.UpsampleArgbLinePair,od=T.UpsampleRgba4444LinePair,P0=T.UpsampleRgb565LinePair,Jc=16,$a=1<<Jc-1,ld=-227,M0=482,nC=6,f1=0,rC=a(256),Wa=a(256),$p=a(256),mh=a(256),ph=a(M0-ld),Wp=a(M0-ld);Or("YuvToRgbRow",Te,3),Or("YuvToBgrRow",We,3),Or("YuvToRgbaRow",Zn,4),Or("YuvToBgraRow",yr,4),Or("YuvToArgbRow",Rn,4),Or("YuvToRgba4444Row",Pt,2),Or("YuvToRgb565Row",ot,2);var Yd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ku=[0,2,8],sC=[8,7,6,4,4,2,2,2,1,1,1,1],h1=1;this.WebPDecodeRGBA=function(B,V,re,ue,we){var _e=Nu,Ee=new jl,Ne=new hs;Ee.ba=Ne,Ne.S=_e,Ne.width=[Ne.width],Ne.height=[Ne.height];var ke=Ne.width,Re=Ne.height,Ge=new Ms;if(Ge==null||B==null)var ut=2;else e(Ge!=null),ut=Fi(B,V,re,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(ut!=0?ke=0:(ke!=null&&(ke[0]=Ge.width[0]),Re!=null&&(Re[0]=Ge.height[0]),ke=1),ke){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ue!=null&&(ue[0]=Ne.width),we!=null&&(we[0]=Ne.height);e:{if(ue=new Us,(we=new Ii).data=B,we.w=V,we.ha=re,we.kd=1,V=[0],e(we!=null),((B=Fi(we.data,we.w,we.ha,null,null,null,V,null,we))==0||B==7)&&V[0]&&(B=4),(V=B)==0){if(e(Ee!=null),ue.data=we.data,ue.w=we.w+we.offset,ue.ha=we.ha-we.offset,ue.put=Ys,ue.ac=ms,ue.bc=fa,ue.ma=Ee,we.xa){if((B=At())==null){Ee=1;break e}if(function(it,Ze){var kt=[0],pt=[0],qe=[0];t:for(;;){if(it==null)return 0;if(Ze==null)return it.a=2,0;if(it.l=Ze,it.a=0,K(it.m,Ze.data,Ze.w,Ze.ha),!rn(it.m,kt,pt,qe)){it.a=3;break t}if(it.xb=Bu,Ze.width=kt[0],Ze.height=pt[0],!Je(kt[0],pt[0],1,it,null))break t;return 1}return e(it.a!=0),0}(B,ue)){if(ue=(V=qc(ue.width,ue.height,Ee.Oa,Ee.ba))==0){t:{ue=B;n:for(;;){if(ue==null){ue=0;break t}if(e(ue.s.yc!=null),e(ue.s.Ya!=null),e(0<ue.s.Wb),e((re=ue.l)!=null),e((we=re.ma)!=null),ue.xb!=0){if(ue.ca=we.ba,ue.tb=we.tb,e(ue.ca!=null),!Gc(we.Oa,re,sd)){ue.a=2;break n}if(!at(ue,re.width)||re.da)break n;if((re.da||nr(ue.ca.S))&&Xe(),11>ue.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ue.ca.f.kb.F!=null&&Xe()),ue.Pb&&0<ue.s.ua&&ue.s.vb.X==null&&!et(ue.s.vb,ue.s.Wa.Xa)){ue.a=1;break n}ue.xb=0}if(!Me(ue,ue.V,ue.Ba,ue.c,ue.i,re.o,Pe))break n;we.Dc=ue.Ma,ue=1;break t}e(ue.a!=0),ue=0}ue=!ue}ue&&(V=B.a)}else V=B.a}else{if((B=new Mn)==null){Ee=1;break e}if(B.Fa=we.na,B.P=we.P,B.qc=we.Sa,lo(B,ue)){if((V=qc(ue.width,ue.height,Ee.Oa,Ee.ba))==0){if(B.Aa=0,re=Ee.Oa,e((we=B)!=null),re!=null){if(0<(ke=0>(ke=re.Md)?0:100<ke?255:255*ke/100)){for(Re=Ge=0;4>Re;++Re)12>(ut=we.pb[Re]).lc&&(ut.ia=ke*sC[0>ut.lc?0:ut.lc]>>3),Ge|=ut.ia;Ge&&(alert("todo:VP8InitRandom"),we.ia=1)}we.Ga=re.Id,100<we.Ga?we.Ga=100:0>we.Ga&&(we.Ga=0)}Vn(B,ue)||(V=B.a)}}else V=B.a}V==0&&Ee.Oa!=null&&Ee.Oa.fd&&(V=Vl(Ee.ba))}Ee=V}_e=Ee!=0?null:11>_e?Ne.f.RGBA.eb:Ne.f.kb.y}else _e=null;return _e};var m1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,k){for(var z="",M=0;M<4;M++)z+=String.fromCharCode(T[k++]);return z}function A(T,k){return(T[k+0]<<0|T[k+1]<<8|T[k+2]<<16)>>>0}function h(T,k){return(T[k+0]<<0|T[k+1]<<8|T[k+2]<<16|T[k+3]<<24)>>>0}new l;var p=[0],g=[0],w=[],x=new l,S=t,N=function(T,k){var z={},M=0,U=!1,G=0,q=0;if(z.frames=[],!function(Z,se,ie,fe){for(var Se=0;Se<fe;Se++)if(Z[se+Se]!=ie.charCodeAt(Se))return!0;return!1}(T,k,"RIFF",4)){var oe,ee;for(h(T,k+=4),k+=8;k<T.length;){var le=c(T,k),K=h(T,k+=4);k+=4;var ne=K+(1&K);switch(le){case"VP8 ":case"VP8L":z.frames[M]===void 0&&(z.frames[M]={}),(Q=z.frames[M]).src_off=U?q:k-8,Q.src_size=G+K+8,M++,U&&(U=!1,G=0,q=0);break;case"VP8X":(Q=z.header={}).feature_flags=T[k];var J=k+4;Q.canvas_width=1+A(T,J),J+=3,Q.canvas_height=1+A(T,J),J+=3;break;case"ALPH":U=!0,G=ne+8,q=k-8;break;case"ANIM":(Q=z.header).bgcolor=h(T,k),J=k+4,Q.loop_count=(oe=T)[(ee=J)+0]<<0|oe[ee+1]<<8,J+=2;break;case"ANMF":var ce,Q;(Q=z.frames[M]={}).offset_x=2*A(T,k),k+=3,Q.offset_y=2*A(T,k),k+=3,Q.width=1+A(T,k),k+=3,Q.height=1+A(T,k),k+=3,Q.duration=A(T,k),k+=3,ce=T[k++],Q.dispose=1&ce,Q.blend=ce>>1&1}le!="ANMF"&&(k+=ne)}return z}}(S,0);N.response=S,N.rgbaoutput=!0,N.dataurl=!1;var F=N.header?N.header:null,D=N.frames?N.frames:null;if(F){F.loop_counter=F.loop_count,p=[F.canvas_height],g=[F.canvas_width];for(var R=0;R<D.length&&D[R].blend!=0;R++);}var j=D[0],P=x.WebPDecodeRGBA(S,j.src_off,j.src_size,g,p);j.rgba=P,j.imgwidth=g[0],j.imgheight=p[0];for(var E=0;E<g[0]*p[0]*4;E++)w[E]=P[E];return this.width=g,this.height=p,this.data=w,this}(function(t){var e=function(){return typeof UT=="function"},n=function(p,g,w,x){var S=4,N=i;switch(x){case t.image_compression.FAST:S=1,N=a;break;case t.image_compression.MEDIUM:S=6,N=o;break;case t.image_compression.SLOW:S=9,N=l}p=r(p,g,w,N);var F=UT(p,{level:S});return t.__addimage__.arrayBufferToBinaryString(F)},r=function(p,g,w,x){for(var S,N,F,D=p.length/g,R=new Uint8Array(p.length+D),j=A(),P=0;P<D;P+=1){if(F=P*g,S=p.subarray(F,F+g),x)R.set(x(S,w,N),F+P);else{for(var E,T=j.length,k=[];E<T;E+=1)k[E]=j[E](S,w,N);var z=h(k.concat());R.set(k[z],F+P)}N=S}return R},s=function(p){var g=Array.apply([],p);return g.unshift(0),g},a=function(p,g){var w,x=[],S=p.length;x[0]=1;for(var N=0;N<S;N+=1)w=p[N-g]||0,x[N+1]=p[N]-w+256&255;return x},i=function(p,g,w){var x,S=[],N=p.length;S[0]=2;for(var F=0;F<N;F+=1)x=w&&w[F]||0,S[F+1]=p[F]-x+256&255;return S},o=function(p,g,w){var x,S,N=[],F=p.length;N[0]=3;for(var D=0;D<F;D+=1)x=p[D-g]||0,S=w&&w[D]||0,N[D+1]=p[D]+256-(x+S>>>1)&255;return N},l=function(p,g,w){var x,S,N,F,D=[],R=p.length;D[0]=4;for(var j=0;j<R;j+=1)x=p[j-g]||0,S=w&&w[j]||0,N=w&&w[j-g]||0,F=c(x,S,N),D[j+1]=p[j]-F+256&255;return D},c=function(p,g,w){if(p===g&&g===w)return p;var x=Math.abs(g-w),S=Math.abs(p-w),N=Math.abs(p+g-w-w);return x<=S&&x<=N?p:S<=N?g:w},A=function(){return[s,a,i,o,l]},h=function(p){var g=p.map(function(w){return w.reduce(function(x,S){return x+Math.abs(S)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(p,g,w,x){var S,N,F,D,R,j,P,E,T,k,z,M,U,G,q,oe=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(F=new pre(p)).imgData,N=F.bits,S=F.colorSpace,R=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){T=(E=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,z=new Uint8Array(T*F.colors),k=new Uint8Array(T);var le,K=F.pixelBitlength-F.bits;for(G=0,q=0;G<T;G++){for(U=E[G],le=0;le<K;)z[q++]=U>>>le&255,le+=F.bits;k[G]=U>>>le&255}}if(F.bits===16){T=(E=new Uint32Array(F.decodePixels().buffer)).length,z=new Uint8Array(T*(32/F.pixelBitlength)*F.colors),k=new Uint8Array(T*(32/F.pixelBitlength)),M=F.colors>1,G=0,q=0;for(var ne=0;G<T;)U=E[G++],z[q++]=U>>>0&255,M&&(z[q++]=U>>>16&255,U=E[G++],z[q++]=U>>>0&255),k[ne++]=U>>>16&255;N=8}x!==t.image_compression.NONE&&e()?(p=n(z,F.width*F.colors,F.colors,x),P=n(k,F.width,1,x)):(p=z,P=k,oe=void 0)}if(F.colorType===3&&(S=this.color_spaces.INDEXED,j=F.palette,F.transparency.indexed)){var J=F.transparency.indexed,ce=0;for(G=0,T=J.length;G<T;++G)ce+=J[G];if((ce/=255)===T-1&&J.indexOf(0)!==-1)D=[J.indexOf(0)];else if(ce!==T){for(E=F.decodePixels(),k=new Uint8Array(E.length),G=0,T=E.length;G<T;G++)k[G]=J[E[G]];P=n(k,F.width,1)}}var Q=function(Z){var se;switch(Z){case t.image_compression.FAST:se=11;break;case t.image_compression.MEDIUM:se=13;break;case t.image_compression.SLOW:se=14;break;default:se=12}return se}(x);return oe===this.decode.FLATE_DECODE&&(ee="/Predictor "+Q+" "),ee+="/Colors "+R+" /BitsPerComponent "+N+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:w,data:p,index:g,filter:oe,decodeParameters:ee,transparency:D,palette:j,sMask:P,predictor:Q,width:F.width,height:F.height,bitsPerComponent:N,colorSpace:S}}}})(En.API),function(t){t.processGIF89A=function(e,n,r,s){var a=new gre(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},A=new HE(100).encode(c,100);return t.processJPEG.call(this,A,n,r,s)},t.processGIF87A=t.processGIF89A}(En.API),Uu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Uu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){js.log("bit decode error:"+n)}},Uu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Uu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Uu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Uu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,A=r*this.width*4+4*s;this.data[A]=l,this.data[A+1]=o,this.data[A+2]=i,this.data[A+3]=c}this.pos+=t}},Uu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&n)/n*255|0,c=(i>>11)/e*255|0,A=s*this.width*4+4*a;this.data[A]=c,this.data[A+1]=l,this.data[A+2]=o,this.data[A+3]=255}this.pos+=t}},Uu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},Uu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},Uu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var a=new Uu(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new HE(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(En.API),JD.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var a=new JD(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new HE(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(En.API),En.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var A=r[c],h=r[c+1],p=r[c+2],g=r[c+3];a[o++]=A,a[o++]=h,a[o++]=p,i[l++]=g}var w=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:w,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},En.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},om=En.API,yy=om.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,A=c.fof?c.fof:1,h=e.doKerning!==!1,p=0,g=t.length,w=0,x=o[0]||l,S=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?S.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(p=h&&Bs(c[r])==="object"&&!isNaN(parseInt(c[r][w],10))?c[r][w]/A:0,S.push((o[r]||x)/l+p)),w=r;return S},$D=om.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return om.processArabic&&(t=om.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:yy.apply(this,arguments).reduce(function(a,i){return a+i},0)},WD=function(t,e,n,r){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<n;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>r&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},YD=function(t,e,n){n||(n={});var r,s,a,i,o,l,c,A=[],h=[A],p=n.textIndent||0,g=0,w=0,x=t.split(" "),S=yy.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var N=Array(l).join(" "),F=[];x.map(function(R){(R=R.split(/\s*\n/)).length>1?F=F.concat(R.map(function(j,P){return(P&&j.length?`
`:"")+j})):F.push(R[0])}),x=F,l=$D.apply(this,[N,n])}for(a=0,i=x.length;a<i;a++){var D=0;if(r=x[a],l&&r[0]==`
`&&(r=r.substr(1),D=1),p+g+(w=(s=yy.apply(this,[r,n])).reduce(function(R,j){return R+j},0))>e||D){if(w>e){for(o=WD.apply(this,[r,s,e-(p+g),e]),A.push(o.shift()),A=[o.pop()];o.length;)h.push([o.shift()]);w=s.slice(r.length-(A[0]?A[0].length:0)).reduce(function(R,j){return R+j},0)}else A=[r];h.push(A),p=w+l,g=S}else A.push(r),p+=g+w,g=S}return c=l?function(R,j){return(j?N:"")+R.join(" ")}:function(R){return R.join(" ")},h.map(c)},om.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(A){if(A.widths&&A.kerning)return{widths:A.widths,kerning:A.kerning};var h=this.internal.getFont(A.fontName,A.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(YD.apply(this,[r[o],i,a]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var p,g,w,x,S=["{"];for(var N in h){if(p=h[N],isNaN(parseInt(N,10))?g="'"+N+"'":(N=parseInt(N,10),g=(g=a(N).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof p=="number")p<0?(w=a(p).slice(3),x="-"):(w=a(p).slice(2),x=""),w=x+w.slice(0,-1)+r[w.slice(-1)];else{if(Bs(p)!=="object")throw new Error("Don't know what to do with value type "+Bs(p)+".");w=i(p)}S.push(g+w)}return S.push("}"),S.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,g,w,x,S={},N=1,F=S,D=[],R="",j="",P=h.length-1,E=1;E<P;E+=1)(x=h[E])=="'"?p?(w=p.join(""),p=void 0):p=[]:p?p.push(x):x=="{"?(D.push([F,w]),F={},w=void 0):x=="}"?((g=D.pop())[0][g[1]]=F,w=void 0,F=g[0]):x=="-"?N=-1:w===void 0?n.hasOwnProperty(x)?(R+=n[x],w=parseInt(R,16)*N,N=1,R=""):R+=x:n.hasOwnProperty(x)?(j+=n[x],F[w]=parseInt(j,16)*N,N=1,w=void 0,j=""):j+=x;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},A={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var p=h.font,g=A.Unicode[p.postScriptName];g&&(p.metadata.Unicode={},p.metadata.Unicode.widths=g.widths,p.metadata.Unicode.kerning=g.kerning);var w=c.Unicode[p.postScriptName];w&&(p.metadata.Unicode.encoding=w,p.encoding=w.codePages[0])}])}(En.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Cv(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,r)}}])}(En),function(t){function e(){return(Wn.canvg?Promise.resolve(Wn.canvg):I2(()=>import("./index.es-IFeVcg3l.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}En.API.addSvgAsImage=function(n,r,s,a,i,o,l,c){if(isNaN(r)||isNaN(s))throw js.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw js.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=a,A.height=i;var h=A.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,A.width,A.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(w){return w.fromString(h,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(p)}).then(function(){g.addImage(A.toDataURL("image/jpeg",1),r,s,a,i,l,c)})}}(),En.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},En.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],c=0,A=0,h=0;function p(w,x){var S,N=!1;for(S=0;S<w.length;S+=1)w[S]===x&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)n[o[h]].value=n[o[h]].defaultValue,n[o[h]].explicitSet=!1}if(Bs(t)==="object"){for(s in t)if(a=t[s],p(o,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&p(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(c=0;c<a.length;c+=1)if(r=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(A=0;A<a[c].length;A+=1)typeof a[c][A]!="number"&&(r=!1);r===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,x=[];for(w in n)n[w].explicitSet===!0&&(n[w].type==="name"?x.push("/"+w+" /"+n[w].value):x.push("/"+w+" "+n[w].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(En.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,c=["","0","00","000","0000"],A=[""],h=0,p=a.length;h<p;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return A.join("");o=o.toString(16),A.push(c[4-o.length],o)}return A.join("")},r=function(a){var i,o,l,c,A,h,p;for(A=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(o=Object.keys(a).sort(function(g,w){return g-w})).length;h<p;h++)i=o[h],l.length>=100&&(A+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(c=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+c+">"));return l.length&&(A+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),A+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,c=i.newObject,A=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",w=0;w<p.length;w++)g+=String.fromCharCode(p[w]);var x=c();A({data:g,addLength1:!0,objectId:x}),l("endobj");var S=c();A({data:r(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var N=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Im(o.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var F=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Im(o.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+Im(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+F+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,c=i.newObject,A=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var w=c();A({data:p,addLength1:!0,objectId:w}),l("endobj");var x=c();A({data:r(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var S=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+w+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Im(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var N=0;N<o.metadata.hmtx.widths.length;N++)o.metadata.hmtx.widths[N]=parseInt(o.metadata.hmtx.widths[N]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Im(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,c=a.y,A=a.options||{},h=a.mutex||{},p=h.pdfEscape,g=h.activeFontKey,w=h.fonts,x=g,S="",N=0,F="",D=w[x].encoding;if(w[x].encoding!=="Identity-H")return{text:o,x:l,y:c,options:A,mutex:h};for(F=o,x=g,Array.isArray(o)&&(F=o[0]),N=0;N<F.length;N+=1)w[x].metadata.hasOwnProperty("cmap")&&(i=w[x].metadata.cmap.unicode.codeMap[F[N].charCodeAt(0)]),i||F[N].charCodeAt(0)<256&&w[x].metadata.hasOwnProperty("Unicode")?S+=F[N]:S+="";var R="";return parseInt(x.slice(1))<14||D==="WinAnsiEncoding"?R=p(S,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(R=n(S,w[x])),h.isHex=!0,{text:R,x:l,y:c,options:A,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var c=0;for(c=0;c<i.length;c+=1)Array.isArray(i[c])&&i[c].length===3?o.push([s(Object.assign({},l,{text:i[c][0]})).text,i[c][1],i[c][2]]):o.push(s(Object.assign({},l,{text:i[c]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(En),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(En.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,a,i,o,l,c,A,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,D=0;this.__bidiEngine__={};var R=function(M){var U=M.charCodeAt(),G=U>>8,q=x[G];return q!==void 0?h[256*q+(255&U)]:G===252||G===253?"AL":N.test(G)?"L":G===8?"R":"N"},j=function(M){for(var U,G=0;G<M.length;G++){if((U=R(M.charAt(G)))==="L")return!1;if(U==="R")return!0}return!1},P=function(M,U,G,q){var oe,ee,le,K,ne=U[q];switch(ne){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(ne="AN");break;case"AL":F=!0,ne="R";break;case"WS":ne="N";break;case"CS":q<1||q+1>=U.length||(oe=G[q-1])!=="EN"&&oe!=="AN"||(ee=U[q+1])!=="EN"&&ee!=="AN"?ne="N":F&&(ee="AN"),ne=ee===oe?ee:"N";break;case"ES":ne=(oe=q>0?G[q-1]:"B")==="EN"&&q+1<U.length&&U[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&G[q-1]==="EN"){ne="EN";break}if(F){ne="N";break}for(le=q+1,K=U.length;le<K&&U[le]==="ET";)le++;ne=le<K&&U[le]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(K=U.length,le=q+1;le<K&&U[le]==="NSM";)le++;if(le<K){var J=M[q],ce=J>=1425&&J<=2303||J===64286;if(oe=U[le],ce&&(oe==="R"||oe==="AL")){ne="R";break}}}ne=q<1||(oe=U[q-1])==="B"?"N":G[q-1];break;case"B":F=!1,s=!0,ne=D;break;case"S":a=!0,ne="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":ne="N"}return ne},E=function(M,U,G){var q=M.split("");return G&&T(q,G,{hiLevel:D}),q.reverse(),U&&U.reverse(),q.join("")},T=function(M,U,G){var q,oe,ee,le,K,ne=-1,J=M.length,ce=0,Q=[],Z=D?g:p,se=[];for(F=!1,s=!1,a=!1,oe=0;oe<J;oe++)se[oe]=R(M[oe]);for(ee=0;ee<J;ee++){if(K=ce,Q[ee]=P(M,se,Q,ee),q=240&(ce=Z[K][w[Q[ee]]]),ce&=15,U[ee]=le=Z[ce][5],q>0)if(q===16){for(oe=ne;oe<ee;oe++)U[oe]=1;ne=-1}else ne=-1;if(Z[ce][6])ne===-1&&(ne=ee);else if(ne>-1){for(oe=ne;oe<ee;oe++)U[oe]=le;ne=-1}se[ee]==="B"&&(U[ee]=0),G.hiLevel|=le}a&&function(ie,fe,Se){for(var ge=0;ge<Se;ge++)if(ie[ge]==="S"){fe[ge]=D;for(var xe=ge-1;xe>=0&&ie[xe]==="WS";xe--)fe[xe]=D}}(se,U,J)},k=function(M,U,G,q,oe){if(!(oe.hiLevel<M)){if(M===1&&D===1&&!s)return U.reverse(),void(G&&G.reverse());for(var ee,le,K,ne,J=U.length,ce=0;ce<J;){if(q[ce]>=M){for(K=ce+1;K<J&&q[K]>=M;)K++;for(ne=ce,le=K-1;ne<le;ne++,le--)ee=U[ne],U[ne]=U[le],U[le]=ee,G&&(ee=G[ne],G[ne]=G[le],G[le]=ee);ce=K}ce++}}},z=function(M,U,G){var q=M.split(""),oe={hiLevel:D};return G||(G=[]),T(q,G,oe),function(ee,le,K){if(K.hiLevel!==0&&A)for(var ne,J=0;J<ee.length;J++)le[J]===1&&(ne=S.indexOf(ee[J]))>=0&&(ee[J]=S[ne+1])}(q,G,oe),k(2,q,U,G,oe),k(1,q,U,G,oe),q.join("")};return this.__bidiEngine__.doBidiReorder=function(M,U,G){if(function(oe,ee){if(ee)for(var le=0;le<oe.length;le++)ee[le]=le;o===void 0&&(o=j(oe)),c===void 0&&(c=j(oe))}(M,U),i||!l||c)if(i&&l&&o^c)D=o?1:0,M=E(M,U,G);else if(!i&&l&&c)D=o?1:0,M=z(M,U,G),M=E(M,U);else if(!i||o||l||c){if(i&&!l&&o^c)M=E(M,U),o?(D=0,M=z(M,U,G)):(D=1,M=z(M,U,G),M=E(M,U));else if(i&&o&&!l&&c)D=1,M=z(M,U,G),M=E(M,U);else if(!i&&!l&&o^c){var q=A;o?(D=1,M=z(M,U,G),D=0,A=!1,M=z(M,U,G),A=q):(D=0,M=z(M,U,G),M=E(M,U),D=1,A=!1,M=z(M,U,G),A=q,M=E(M,U))}}else D=0,M=z(M,U,G);else D=o?1:0,M=z(M,U,G);return M},this.__bidiEngine__.setOptions=function(M){M&&(i=M.isInputVisual,l=M.isOutputVisual,o=M.isInputRtl,c=M.isOutputRtl,A=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,a=(r.x,r.y,r.options||{}),i=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([n.doBidiReorder(s[o])]);r.text=i}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(En),En.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new nh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Fre(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new vre(this.contents),this.head=new yre(this),this.name=new Ere(this),this.cmap=new $j(this),this.toUnicode={},this.hhea=new wre(this),this.maxp=new Sre(this),this.hmtx=new Tre(this),this.post=new _re(this),this.os2=new bre(this),this.loca=new Ire(this),this.glyf=new Nre(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,c;for(c=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(n=s>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return i*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ju,nh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,a,i,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),vre=function(){var t;function e(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,a,i,o,l,c,A,h,p,g,w,x;for(x in g=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),A=16*g-h,(s=new nh).writeInt(this.scalarType),s.writeShort(g),s.writeShort(h),s.writeShort(i),s.writeShort(A),a=16*g,c=s.pos+a,o=null,w=[],n)for(p=n[x],s.writeString(x),s.writeInt(t(p)),s.writeInt(c),s.writeInt(p.length),w=w.concat(p),x==="head"&&(o=c),c+=p.length;c%4;)w.push(0),c++;return s.write(w),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,a,i;for(n=Wj.call(n);n.length%4;)n.push(0);for(a=new nh(n),s=0,r=0,i=n.length;r<i;r=r+=4)s+=a.readUInt32();return 4294967295&s},e}(),xre={}.hasOwnProperty,Vd=function(t,e){for(var n in e)xre.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ju=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var yre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new nh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),ZD=function(){function t(e,n){var r,s,a,i,o,l,c,A,h,p,g,w,x,S,N,F,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,a=function(){var R,j;for(j=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)j.push(e.readUInt16());return j}(),e.pos+=2,x=function(){var R,j;for(j=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)j.push(e.readUInt16());return j}(),c=function(){var R,j;for(j=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)j.push(e.readUInt16());return j}(),A=function(){var R,j;for(j=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)j.push(e.readUInt16());return j}(),s=(this.length-e.pos+this.offset)/2,o=function(){var R,j;for(j=[],l=R=0;0<=s?R<s:R>s;l=0<=s?++R:--R)j.push(e.readUInt16());return j}(),l=N=0,D=a.length;N<D;l=++N)for(S=a[l],r=F=w=x[l];w<=S?F<=S:F>=S;r=w<=S?++F:--F)A[l]===0?i=r+c[l]:(i=o[A[l]/2+(r-w)-(p-l)]||0)!==0&&(i+=c[l]),this.codeMap[r]=65535&i}e.pos=h}return t.encode=function(e,n){var r,s,a,i,o,l,c,A,h,p,g,w,x,S,N,F,D,R,j,P,E,T,k,z,M,U,G,q,oe,ee,le,K,ne,J,ce,Q,Z,se,ie,fe,Se,ge,xe,ve,me,he;switch(q=new nh,i=Object.keys(e).sort(function(He,et){return He-et}),n){case"macroman":for(x=0,S=function(){var He=[];for(w=0;w<256;++w)He.push(0);return He}(),F={0:0},a={},oe=0,ne=i.length;oe<ne;oe++)F[xe=e[s=i[oe]]]==null&&(F[xe]=++x),a[s]={old:e[s],new:F[e[s]]},S[s]=F[e[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(S),{charMap:a,subtable:q.data,maxGlyphID:x+1};case"unicode":for(U=[],h=[],D=0,F={},r={},N=c=null,ee=0,J=i.length;ee<J;ee++)F[j=e[s=i[ee]]]==null&&(F[j]=++D),r[s]={old:j,new:F[j]},o=F[j]-s,N!=null&&o===c||(N&&h.push(N),U.push(s),c=o),N=s;for(N&&h.push(N),h.push(65535),U.push(65535),z=2*(k=U.length),T=2*Math.pow(Math.log(k)/Math.LN2,2),p=Math.log(T/2)/Math.LN2,E=2*k-T,l=[],P=[],g=[],w=le=0,ce=U.length;le<ce;w=++le){if(M=U[w],A=h[w],M===65535){l.push(0),P.push(0);break}if(M-(G=r[M].new)>=32768)for(l.push(0),P.push(2*(g.length+k-w)),s=K=M;M<=A?K<=A:K>=A;s=M<=A?++K:--K)g.push(r[s].new);else l.push(G-M),P.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*k+2*g.length),q.writeUInt16(0),q.writeUInt16(z),q.writeUInt16(T),q.writeUInt16(p),q.writeUInt16(E),Se=0,Q=h.length;Se<Q;Se++)s=h[Se],q.writeUInt16(s);for(q.writeUInt16(0),ge=0,Z=U.length;ge<Z;ge++)s=U[ge],q.writeUInt16(s);for(ve=0,se=l.length;ve<se;ve++)o=l[ve],q.writeUInt16(o);for(me=0,ie=P.length;me<ie;me++)R=P[me],q.writeUInt16(R);for(he=0,fe=g.length;he<fe;he++)x=g[he],q.writeUInt16(x);return{charMap:r,subtable:q.data,maxGlyphID:D+1}}},t}(),$j=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new ZD(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,a;return r==null&&(r="macroman"),s=ZD.encode(n,r),(a=new nh).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),wre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),bre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),_re=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var i;for(s=n.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(n.readUInt32());return c}).call(this)}},e}(),Cre=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Ere=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,a,i,o,l,c,A,h,p,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},i=h=0,p=s.length;h<p;i=++h)a=s[i],n.pos=a.offset,A=n.readString(a.length),o=new Cre(A,a),c[g=a.nameID]==null&&(c[g]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Sre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Tre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,a,i,o,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var A,h;for(h=[],r=A=0;0<=a?A<a:A>a;r=0<=a?++A:--A)h.push(n.readInt16());return h}(),this.widths=(function(){var A,h,p,g;for(g=[],A=0,h=(p=this.metrics).length;A<h;A++)i=p[A],g.push(i.advance);return g}).call(this),s=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),Wj=[].slice,Nre=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,a,i,o,l,c,A,h,p;return n in this.cache?this.cache[n]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(n),(a=i.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(l=new nh(r.read(a))).readShort(),A=l.readShort(),p=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[n]=o===-1?new kre(l,A,p,c,h):new Bre(l,o,A,p,c,h),this.cache[n]))},e.prototype.encode=function(n,r,s){var a,i,o,l,c;for(o=[],i=[],l=0,c=r.length;l<c;l++)a=n[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),Bre=function(){function t(e,n,r,s,a,i){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),kre=function(){function t(e,n,r,s,a){var i,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new nh(Wj.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Ire=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vd(e,Ju),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*n.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(n.readUInt32());return i}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<r.length&&r[i]==o){++i,s[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var A=new Array(4*s.length),h=0;h<s.length;++h)A[4*h+3]=255&s[h],A[4*h+2]=(65280&s[h])>>8,A[4*h+1]=(16711680&s[h])>>16,A[4*h]=(4278190080&s[h])>>24;return A},e}(),Fre=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],s[a]=r;return s},t.prototype.encode=function(e,n){var r,s,a,i,o,l,c,A,h,p,g,w,x,S,N;for(s in r=$j.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},N=r.charMap)g[(l=N[s]).old]=l.new;for(w in p=r.maxGlyphID,i)w in g||(g[w]=p++);return A=function(F){var D,R;for(D in R={},F)R[F[D]]=D;return R}(g),h=Object.keys(A).sort(function(F,D){return F-D}),x=function(){var F,D,R;for(R=[],F=0,D=h.length;F<D;F++)o=h[F],R.push(A[o]);return R}(),a=this.font.glyf.encode(i,x,g),c=this.font.loca.encode(a.offsets,x),S={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t}();En.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+n},e}();function Yj(t,e,n,r,s){r=r||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,c=o*l,A=/\r\n|\r|\n/g,h="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof t=="string"?t.split(A):t,p=h.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*c:r.valign==="bottom"&&(n-=p*c),r.halign==="center"||r.halign==="right"){var g=o;if(r.halign==="center"&&(g*=.5),h&&p>=1){for(var w=0;w<h.length;w++)s.text(h[w],e-s.getStringUnitWidth(h[w])*g,n),n+=c;return s}e-=s.getStringUnitWidth(t)*g}return r.halign==="justify"?s.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(t,e,n),s}var eL={},Xm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:eL=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,s,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var A=t.unifyColor(e.fillColor);A&&(r=this.jsPDFDocument).setFillColor.apply(r,A),A=t.unifyColor(e.textColor),A&&(s=this.jsPDFDocument).setTextColor.apply(s,A),A=t.unifyColor(e.lineColor),A&&(a=this.jsPDFDocument).setDrawColor.apply(a,A),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,s,a){return this.jsPDFDocument.rect(e,n,r,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return eL||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),GT=function(t,e){return GT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},GT(t,e)};function Xj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");GT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Jj=function(t){Xj(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function Dre(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Lre(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function L2(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],s=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function Zj(t,e,n,r){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=e7(s,!1);i&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,i)}function e7(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function c_(t,e){var n,r,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function t7(t,e){var n=c_(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function Rre(t,e,n,r,s){var a={},i=1.3333333333333333,o=QE(e,function(D){return s.getComputedStyle(D).backgroundColor});o!=null&&(a.fillColor=o);var l=QE(e,function(D){return s.getComputedStyle(D).color});l!=null&&(a.textColor=l);var c=Mre(r,n);c&&(a.cellPadding=c);var A="borderTopColor",h=i*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var g=(parseFloat(p)||0)/h;g&&(a.lineWidth=g)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?A="borderRightColor":a.lineWidth.bottom?A="borderBottomColor":a.lineWidth.left&&(A="borderLeftColor"));var w=QE(e,function(D){return s.getComputedStyle(D)[A]});w!=null&&(a.lineColor=w);var x=["left","right","center","justify"];x.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),x=["middle","bottom","top"],x.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var S=parseInt(r.fontSize||"");isNaN(S)||(a.fontSize=S/i);var N=Pre(r);N&&(a.fontStyle=N);var F=(r.fontFamily||"").toLowerCase();return t.indexOf(F)!==-1&&(a.font=F),a}function Pre(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function QE(t,e){var n=n7(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function n7(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:n7(t.parentElement,e):n}function Mre(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),i=c_(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function r7(t,e,n,r,s){var a,i;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),A=[],h=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:A,body:h,foot:p};for(var g=0;g<o.rows.length;g++){var w=o.rows[g],x=(i=(a=w==null?void 0:w.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),S=Ure(l,c,n,w,r,s);S&&(x==="thead"?A.push(S):x==="tfoot"?p.push(S):h.push(S))}return{head:A,body:h,foot:p}}function Ure(t,e,n,r,s,a){for(var i=new Jj(r),o=0;o<r.cells.length;o++){var l=r.cells[o],c=n.getComputedStyle(l);if(s||c.display!=="none"){var A=void 0;a&&(A=Rre(t,l,e,c,n)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:A,_element:l,content:Ore(l)})}}var h=n.getComputedStyle(r);if(i.length>0&&(s||h.display!=="none"))return i}function Ore(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function jre(t,e,n){for(var r=0,s=[t,e,n];r<s.length;r++){var a=s[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function hA(t,e,n,r,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function s7(t,e){var n=new Xm(t),r=n.getDocumentOptions(),s=n.getGlobalOptions();jre(s,r,e);var a=hA({},s,r,e),i;typeof window<"u"&&(i=window);var o=Hre(s,r,e),l=Qre(s,r,e),c=Vre(n,a),A=Gre(n,a,i);return{id:e.tableId,content:A,hooks:l,styles:o,settings:c}}function Hre(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var c=t[l],A=e[l],h=n[l];r.columnStyles=hA({},c,A,h)}else{var p=[t,e,n],g=p.map(function(w){return w[l]||{}});r[l]=hA({},g[0],g[1],g[2])}},a=0,i=Object.keys(r);a<i.length;a++){var o=i[a];s(o)}return r}function Qre(t,e,n){for(var r=[t,e,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=r;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function Vre(t,e){var n,r,s,a,i,o,l,c,A,h,p,g,w=c_(e.margin,40/t.scaleFactor()),x=(n=zre(t,e.startY))!==null&&n!==void 0?n:w.top,S;e.showFoot===!0?S="everyPage":e.showFoot===!1?S="never":S=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var F=(a=e.useCss)!==null&&a!==void 0?a:!1,D=e.theme||(F?"plain":"striped"),R=!!e.horizontalPageBreak,j=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:F,theme:D,startY:x,margin:w,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(A=e.tableWidth)!==null&&A!==void 0?A:"auto",showHead:N,showFoot:S,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:R,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function zre(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),s=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var i=n.startPageNumber+n.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function Gre(t,e,n){var r=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(n){var o=r7(t,e.html,n,i,e.useCss)||{};r=o.head||r,s=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||qre(r,s,a);return{columns:l,head:r,body:s,foot:a}}function qre(t,e,n){var r=t[0]||e[0]||n[0]||[],s=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var c=void 0;Array.isArray(r)?c=s.length:c=a+(l>0?"_".concat(l):"");var A={dataKey:c};s.push(A)}}),s}var qT=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),Kre=function(t){Xj(e,t);function e(n,r,s,a,i,o){var l=t.call(this,n,r,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(qT),$re=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,s,a,i){for(var o=0,l=n;o<l.length;o++){var c=l[o],A=new Kre(e,this,r,s,a,i),h=c(A)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var a=s[r];a(new qT(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var a=s[r];a(new qT(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),a7=function(){function t(e,n,r,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof Jj&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,s){var a;return Math.max(r,((a=n.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(s,a){var i=r.cells[a.index];if(!i)return 0;var o=n.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),c=l+o;return c>s?c:s},0)},t}(),i7=function(){function t(e,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*n,a=r*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=c_(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),Wre=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,s=e.allRows();r<s.length;r++){var a=s[r],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(n=Math.max(n,i.styles.cellWidth))}return n},t}();function Yre(t,e){Xre(t,e);var n=[],r=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var s=e.getWidth(t.pageSize().width)-r;s&&(s=KT(n,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=KT(n,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Zre(e),ese(e,t),Jre(e)}function Xre(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,s=t7(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(c){var A=e.hooks.didParseCell;e.callCellHooks(t,A,c,a,l,null);var h=c.padding("horizontal");c.contentWidth=L2(c.text,c.styles,t)+h;var p=L2(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=p+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||r===!0)c.contentWidth>s?(c.minWidth=s,c.wrappedWidth=s):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var g=10/n;c.minWidth=c.styles.minCellWidth||g,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var A=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=A.cellWidth||A.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function KT(t,e,n){for(var r=e,s=t.reduce(function(g,w){return g+w.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=r*o,c=i.width+l,A=n(i),h=c<A?A:c;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(g){return e<0?g.width>n(g):!0});p.length&&(e=KT(p,e,n))}return e}function Jre(t){for(var e={},n=1,r=t.allRows(),s=0;s<r.length;s++)for(var a=r[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],c=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,n=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var A=a.cells[l.index];if(!A)continue;if(A.height=a.height,A.rowSpan>1){var h=r.length-s,p=A.rowSpan>h?h:A.rowSpan;e[l.index]={cell:A,left:p,row:a}}}}}function Zre(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(s){var c=s;delete r.cells[l.index],s=null,c.width=l.width+a}else{var c=r.cells[l.index];if(!c)continue;if(i=c.colSpan,a=0,c.colSpan>1){s=c,a+=l.width;continue}c.width=l.width+a}}}function ese(t,e){for(var n={count:0,height:0},r=0,s=t.allRows();r<s.length;r++){for(var a=s[r],i=0,o=t.columns;i<o.length;i++){var l=o[i],c=a.cells[l.index];if(c){e.applyStyles(c.styles,!0);var A=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,A+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=tL(c.text,A,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=tL(c.text,A,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var h=c.styles.overflow(c.text,A);typeof h=="string"?c.text=[h]:c.text=h}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<p*c.rowSpan?n={height:p,count:c.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function tL(t,e,n,r,s){return t.map(function(a){return tse(a,e,n,r,s)})}function tse(t,e,n,r,s){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=L2(t,n,r))return t;for(;e<L2(t+s,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function o7(t,e){var n=new Xm(t),r=nse(e,n.scaleFactor()),s=new $re(e,r);return Yre(n,s),n.applyStyles(n.userStyles),s}function nse(t,e){var n=t.content,r=sse(n.columns);if(n.head.length===0){var s=nL(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=nL(r,"foot");s&&n.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:r,head:VE("head",n.head,r,i,a,e),body:VE("body",n.body,r,i,a,e),foot:VE("foot",n.foot,r,i,a,e)}}function VE(t,e,n,r,s,a){var i={},o=e.map(function(l,c){for(var A=0,h={},p=0,g=0,w=0,x=n;w<x.length;w++){var S=x[w];if(i[S.index]==null||i[S.index].left===0)if(g===0){var N=void 0;Array.isArray(l)?N=l[S.index-p-A]:N=l[S.dataKey];var F={};typeof N=="object"&&!Array.isArray(N)&&(F=(N==null?void 0:N.styles)||{});var D=ase(t,S,c,s,r,a,F),R=new i7(N,D,t);h[S.dataKey]=R,h[S.index]=R,g=R.colSpan-1,i[S.index]={left:R.rowSpan-1,times:g}}else g--,p++;else i[S.index].left--,g=i[S.index].times,A++}return new a7(l,c,t,h)});return o}function nL(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var s=rse(e,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function rse(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function sse(t){return t.map(function(e,n){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:n:s=n,new Wre(s,e,n)})}function ase(t,e,n,r,s,a,i){var o=Lre(r),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var c=hA({},o.table,o[t],s.styles,l),A=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?A:{},p=t==="body"&&n%2===0?hA({},o.alternateRow,s.alternateRowStyles):{},g=Dre(a),w=hA({},g,c,p,h);return hA(w,i)}function ise(t,e,n){var r;n===void 0&&(n={});var s=t7(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var g=e.columns.find(function(w){return w.dataKey===p||w.index===p});g&&!a.has(g.index)&&(a.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),s-=g.wrappedWidth)});for(var c=!0,A=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;A<e.columns.length;){if(a.has(A)){A++;continue}var h=e.columns[A].wrappedWidth;if(c||s>=h)c=!1,i.push(A),o.push(e.columns[A]),s-=h;else break;A++}return{colIndexes:i,columns:o,lastIndex:A-1}}function ose(t,e){for(var n=[],r=0;r<e.columns.length;r++){var s=ise(t,e,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function l7(t,e){var n=e.settings,r=n.startY,s=n.margin,a={x:s.left,y:r},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+i;if(n.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(p,g){return p+g.height},0);o+=c}var A=new Xm(t);(n.pageBreak==="always"||n.startY!=null&&o>A.pageSize().height)&&(u7(A),a.y=s.top),e.callWillDrawPageHooks(A,a);var h=hA({},a);e.startPageNumber=A.pageNumber(),n.horizontalPageBreak?lse(A,e,h,a):(A.applyStyles(A.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return NA(A,e,p,a,e.columns)}),A.applyStyles(A.userStyles),e.body.forEach(function(p,g){var w=g===e.body.length-1;R2(A,e,p,w,h,a,e.columns)}),A.applyStyles(A.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return NA(A,e,p,a,e.columns)})),Zj(A,e,h,a),e.callEndPageHooks(A,a),e.finalY=a.y,t.lastAutoTable=e,A.applyStyles(A.userStyles)}function lse(t,e,n,r){var s=ose(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(c,A){t.applyStyles(t.userStyles),A>0?Ev(t,e,n,r,c.columns,!0):rL(t,e,r,c.columns),cse(t,e,n,r,c.columns),zE(t,e,r,c.columns)});else for(var i=-1,o=s[0],l=function(){var c=i;if(o){t.applyStyles(t.userStyles);var A=o.columns;i>=0?Ev(t,e,n,r,A,!0):rL(t,e,r,A),c=sL(t,e,i+1,r,A),zE(t,e,r,A)}var h=c-i;s.slice(1).forEach(function(p){t.applyStyles(t.userStyles),Ev(t,e,n,r,p.columns,!0),sL(t,e,i+1,r,p.columns,h),zE(t,e,r,p.columns)}),i=c};i<e.body.length-1;)l()}function rL(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return NA(t,e,a,n,r)})}function cse(t,e,n,r,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;R2(t,e,a,o,n,r,s)})}function sL(t,e,n,r,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,i).forEach(function(l,c){var A=n+c===e.body.length-1,h=c7(t,e,A,r);l.canEntireRowFit(h,s)&&(NA(t,e,l,r,s),o=n+c)}),o}function zE(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return NA(t,e,a,n,r)})}function use(t,e,n){var r=n.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/r);return Math.max(0,a)}function dse(t,e,n,r){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=n.columns;i<o.length;i++){var l=o[i],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var A=new i7(c.raw,c.styles,c.section);A=hA(A,c),A.text=[];var h=use(c,e,r);c.text.length>h&&(A.text=c.text.splice(h,c.text.length));var p=r.scaleFactor(),g=r.getLineHeightFactor();c.contentHeight=c.getContentHeight(p,g),c.contentHeight>=e&&(c.contentHeight=e,A.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),A.contentHeight=A.getContentHeight(p,g),A.contentHeight>a&&(a=A.contentHeight),s[l.index]=A}}var w=new a7(t.raw,-1,t.section,s,!0);w.height=a;for(var x=0,S=n.columns;x<S.length;x++){var l=S[x],A=w.cells[l.index];A&&(A.height=w.height);var c=t.cells[l.index];c&&(c.height=t.height)}return w}function Ase(t,e,n,r){var s=t.pageSize().height,a=r.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),c=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var A=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>o;return h?(A&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(A||r.settings.rowPageBreak==="avoid")}function R2(t,e,n,r,s,a,i){var o=c7(t,e,r,a);if(n.canEntireRowFit(o,i))NA(t,e,n,a,i);else if(Ase(t,n,o,e)){var l=dse(n,o,e,t);NA(t,e,n,a,i),Ev(t,e,s,a,i),R2(t,e,l,r,s,a,i)}else Ev(t,e,s,a,i),R2(t,e,n,r,s,a,i)}function NA(t,e,n,r,s){r.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(c===!1){r.x+=o.width;continue}fse(t,l,r);var A=l.getTextPos();Yj(l.text,A.x,A.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function fse(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=e7(r.lineWidth,r.fillColor);s&&t.rect(e.x,n.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),hse(t,e,n,r.lineWidth))}function hse(t,e,n,r){var s,a,i,o;r.top&&(s=n.x,a=n.y,i=n.x+e.width,o=n.y,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.top,s,a,i,o)),r.bottom&&(s=n.x,a=n.y+e.height,i=n.x+e.width,o=n.y+e.height,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.bottom,s,a,i,o)),r.left&&(s=n.x,a=n.y,i=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,s,a,i,o)),r.right&&(s=n.x+e.width,a=n.y,i=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,s,a,i,o));function l(c,A,h,p,g){t.getDocument().setLineWidth(c),t.getDocument().line(A,h,p,g,"S")}}function c7(t,e,n,r){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-s}function Ev(t,e,n,r,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return NA(t,e,o,r,s)}),e.callEndPageHooks(t,r);var i=e.settings.margin;Zj(t,e,n,r),u7(t),e.pageNumber++,r.x=i.left,r.y=i.top,n.y=i.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return NA(t,e,o,r,s)}),t.applyStyles(t.userStyles))}function u7(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function mse(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],s=s7(this,r),a=o7(this,s);return l7(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,s){Yj(e,n,r,s,this)},t.API.autoTableSetDefaults=function(e){return Xm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Xm.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Xm(this),a=r7(s,e,window,n,!1),i=a.head,o=a.body,l=((r=i[0])===null||r===void 0?void 0:r.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var GE;function Pc(t,e){var n=s7(t,e),r=o7(t,n);l7(t,r)}try{if(typeof window<"u"&&window){var aL=window,iL=aL.jsPDF||((GE=aL.jspdf)===null||GE===void 0?void 0:GE.jsPDF);iL&&mse(iL)}}catch(t){console.error("Could not apply autoTable plugin",t)}const NB="evaluaciones_pruebas",BB="evaluaciones_rubricas_estaticas",kB="evaluaciones_rubricas_interactivas",pse="usuarios",u_=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion}},gse=t=>{const e=mn(zt(Ut,NB),Pr("fechaCreacion","desc"));return jn(e,r=>{t(r.docs.map(s=>u_(s)))},r=>{console.error("Error al suscribirse a las pruebas:",r),t([])})},vse=async t=>{try{const{id:e,...n}=t,r=On(Ut,NB,e);await Fo(r,{...n,fechaCreacion:Nn.fromDate(new Date(n.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},xse=async t=>{try{await ao(On(Ut,NB,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},yse=t=>{const e=mn(zt(Ut,BB),Pr("fechaCreacion","desc"));return jn(e,r=>{t(r.docs.map(s=>u_(s)))},r=>{console.error("Error al suscribirse a las rbricas estticas:",r),t([])})},wse=async t=>{try{const{id:e,...n}=t,r=On(Ut,BB,e);await Fo(r,{...n,fechaCreacion:Nn.fromDate(new Date(n.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rbrica esttica:",e),new Error("No se pudo guardar la rbrica.")}},bse=async t=>{try{await ao(On(Ut,BB,t))}catch(e){throw console.error("Error al eliminar la rbrica esttica:",e),new Error("No se pudo eliminar la rbrica.")}},_se=t=>{const e=mn(zt(Ut,kB));return jn(e,r=>{t(r.docs.map(s=>u_(s)))},r=>{console.error("Error al suscribirse a las rbricas interactivas:",r),t([])})},Cse=async t=>{try{const{id:e,...n}=t,r=On(Ut,kB,e);await Fo(r,n)}catch(e){throw console.error("Error al guardar la rbrica interactiva:",e),new Error("No se pudo guardar la rbrica interactiva.")}},Ese=async t=>{try{return(await la(zt(Ut,kB),t)).id}catch(e){throw console.error("Error al crear la rbrica interactiva:",e),new Error("No se pudo crear la rbrica interactiva.")}},Sse=t=>{const e=mn(zt(Ut,pse));return jn(e,r=>{t(r.docs.map(s=>u_(s)))},r=>{console.error("Error al suscribirse a los usuarios:",r),t([])})},Tse=["Seleccin mltiple","Verdadero o Falso","Desarrollo","Trminos pareados","Comprensin de lectura"],oL={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},Mw=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Nse=({open:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):u.jsxs(u.Fragment,{children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Bse=({item:t,index:e,showAnswers:n})=>{const r=W.useMemo(()=>t.tipo==="Trminos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Seleccin mltiple"&&u.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=n&&a===t.respuestaCorrecta;return u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[u.jsx("div",{className:"w-5 h-5 border rounded-full"}),u.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&u.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&u.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[u.jsx("span",{children:"V ___ F ___"}),n&&u.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Trminos pareados"&&u.jsxs("div",{className:"mt-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),u.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definicin"}),u.jsx("div",{className:"space-y-2",children:r.map((s,a)=>u.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),n&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[u.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),u.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>u.jsxs("li",{children:[u.jsx("strong",{children:s.concepto}),"  ",s.definicion]},a))})]})]}),t.tipo==="Comprensin de lectura"&&u.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[u.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Seleccin mltiple"){const i=s;return u.jsxs("div",{className:"pt-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),u.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const c=n&&l===i.respuestaCorrecta;return u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${c?"bg-green-100 dark:bg-green-900/50":""}`,children:[u.jsx("div",{className:"w-5 h-5 border rounded-full"}),u.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return u.jsxs("div",{className:"pt-2",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&u.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),u.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},kse=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(null),[s,a]=W.useState(!1),[i,o]=W.useState(!1),[l,c]=W.useState(null),[A,h]=W.useState(!1),p={nombre:"",asignatura:Uc[0],nivel:B2[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,w]=W.useState(p);W.useEffect(()=>{const E=gse(e);return()=>E()},[]);const x=E=>{const{name:T,value:k}=E.target;w(z=>({...z,[T]:k}))},S=E=>{w(T=>{const k={...T.tiposActividad};return k[E]?delete k[E]:k[E]=oL[E][0],{...T,tiposActividad:k}})},N=(E,T)=>{w(k=>({...k,tiposActividad:{...k.tiposActividad,[E]:T}}))},F=E=>{w(T=>{const k=T.selectedNee.includes(E)?T.selectedNee.filter(z=>z!==E):[...T.selectedNee,E];return{...T,selectedNee:k}})},D=async E=>{if(E.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){c("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),c(null);const T=Object.entries(g.tiposActividad).map(([M,U])=>`- ${U} tem(s) de tipo '${M}'`).join(`
`),k=g.isNee&&g.selectedNee.length>0?`
            **Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes caractersticas: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negacin o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes ms pequeas si es posible.
            - Para 'Comprensin de Lectura', usa textos ms cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Seleccin Mltiple', asegrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",z=`
            Eres un experto en evaluacin educativa para la educacin media en Chile.
            Genera una prueba o gua de trabajo completa en formato JSON estructurado.
            
            Informacin base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de tems solicitados:
              ${T}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
            
            ${k}

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluacin.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de tem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un ttulo descriptivo (ej: "Actividad 1: Seleccin Mltiple").
               - 'instrucciones': Instrucciones para esa actividad especfica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de tem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numrico.
                   - 'habilidadBloom': La habilidad principal de la Taxonoma de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales segn el tipo:
                       - Para 'Seleccin mltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (ndice numrico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Trminos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensin de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Seleccin mltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{TA("Evaluacin - Pruebas");const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",le=(await(await new Si(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(le);let ne=0;K.actividades.forEach(ce=>{ce.items.forEach(Q=>{ne+=Q.puntaje||0,Q.tipo==="Comprensin de lectura"&&Q.preguntas&&Q.preguntas.forEach(Z=>{ne+=Z.puntaje||0})})});const J={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:K.objetivo,instruccionesGenerales:K.instruccionesGenerales,puntajeIdeal:ne,actividades:K.actividades,dificultad:g.dificultad,...g.isNee&&{adaptacionNEE:g.selectedNee}};r(J),h(!1)}catch(M){console.error(M),c("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{a(!1)}},R=async()=>{if(n)try{await vse(n),alert("Prueba guardada con xito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},j=async E=>{if(window.confirm("Eliminar esta prueba?"))try{await xse(E),(n==null?void 0:n.id)===E&&r(null)}catch(T){console.error(T),alert("No se pudo eliminar la prueba.")}},P=async E=>{o(!0);const T=new En("p","mm","a4"),k=20,z=T.internal.pageSize.getHeight(),M=T.internal.pageSize.getWidth(),U=M-k*2;let G=k;const q=le=>{le.setFillColor(230,230,230),le.rect(0,0,M,25,"F"),le.setFontSize(9),le.setTextColor(0,0,0),le.text("LICEO INDUSTRIAL DE RECOLETA",k,15,{align:"left"}),le.text("SUBDIRECCIN DE GESTIN PEDAGGICA",M-k,15,{align:"right"})};q(T),G=30,T.setTextColor(0,0,0),T.setFont("helvetica","bold"),T.setFontSize(16),T.text(E.nombre,M/2,G,{align:"center"}),G+=10,Pc(T,{startY:G,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:le=>{q(T)}}),G=T.lastAutoTable.finalY+10;const oe=le=>{G+le>z-k&&(T.addPage(),q(T),G=k+15,T.setTextColor(0,0,0))},ee=(le,K)=>{T.setFont("helvetica",K.isBold?"bold":"normal"),T.setFontSize(K.fontSize);const ne=Array.isArray(le)?le.join(`
`):le;return T.getTextDimensions(ne,{maxWidth:K.width}).h};for(const le of E.actividades){let K=ee(le.titulo,{fontSize:12,width:U,isBold:!0})+ee(le.instrucciones,{fontSize:10,width:U})+12;oe(K),T.setFont("helvetica","bold"),T.setFontSize(12),T.setTextColor(0,0,0),T.text(le.titulo,k,G),G+=8,T.setFont("helvetica","normal"),T.setFontSize(10);const ne=T.splitTextToSize(le.instrucciones,U);T.text(ne,k,G),G+=ne.length*(10*.35*1.15)+4;for(const[J,ce]of le.items.entries()){let Q=0;const Z=`${J+1}. ${ce.pregunta} (${ce.puntaje} pts)`;switch(Q+=ee(Z,{fontSize:10,width:U,isBold:!0}),ce.tipo){case"Seleccin mltiple":ce.opciones.forEach(fe=>{Q+=ee(fe,{fontSize:10,width:U-5})+3}),Q+=7;break;case"Verdadero o Falso":Q+=10;break;case"Desarrollo":Q+=30;break;case"Trminos pareados":Q+=ce.pares.length*12+20;break;case"Comprensin de lectura":const ie=ce;Q+=ee(ie.texto,{fontSize:10,width:U-10})+10,ie.preguntas.forEach(fe=>{const Se=`${fe.pregunta} (${fe.puntaje} pts)`;Q+=ee(Se,{fontSize:10,width:U-5,isBold:!0}),fe.tipo==="Seleccin mltiple"?(fe.opciones.forEach(ge=>{Q+=ee(ge,{fontSize:10,width:U-10})+3}),Q+=7):fe.tipo==="Desarrollo"&&(Q+=30),Q+=5}),Q+=15;break}oe(Q),T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(0,0,0);const se=T.splitTextToSize(Z,U);if(T.text(se,k,G),G+=se.length*5+4,T.setFont("helvetica","normal"),ce.tipo==="Seleccin mltiple")ce.opciones.forEach((ie,fe)=>{T.text(`${String.fromCharCode(65+fe)}) ${ie}`,k+5,G),G+=7});else if(ce.tipo==="Verdadero o Falso")T.text("V ______    F ______",k+5,G),G+=10;else if(ce.tipo==="Desarrollo")T.setDrawColor(200,200,200),T.setFillColor(245,245,245),T.rect(k,G,U,25,"FD"),G+=30;else if(ce.tipo==="Trminos pareados"){const ie=[...ce.pares.map(Se=>Se.definicion)].sort(()=>Math.random()-.5),fe=ce.pares.map((Se,ge)=>[`${ge+1}. ${Se.concepto}`,`(   ) ${ie[ge]}`]);Pc(T,{startY:G,head:[["Columna A: Concepto","Columna B: Definicin"]],body:fe,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Se=>q(T)}),G=T.lastAutoTable.finalY+10}else if(ce.tipo==="Comprensin de lectura"){const ie=ce;T.setFillColor(240,240,240),T.setDrawColor(200,200,200);const fe=T.splitTextToSize(ie.texto,U-10),Se=fe.length*(10*.35*1.15)+8;T.rect(k,G,U,Se,"FD"),G+=4,T.setFont("helvetica","normal"),T.setFontSize(10),T.setTextColor(0,0,0),T.text(fe,k+5,G),G+=Se;for(const[ge,xe]of ie.preguntas.entries()){const ve=`${ge+1}. ${xe.pregunta} (${xe.puntaje} pts)`;T.setFont("helvetica","bold");const me=T.splitTextToSize(ve,U-5);T.text(me,k+5,G),G+=me.length*5+4,T.setFont("helvetica","normal"),xe.tipo==="Seleccin mltiple"?xe.opciones.forEach((he,He)=>{T.text(`${String.fromCharCode(65+He)}) ${he}`,k+10,G),G+=7}):xe.tipo==="Desarrollo"&&(T.setDrawColor(200,200,200),T.setFillColor(245,245,245),T.rect(k+5,G,U-5,25,"FD"),G+=30)}}G+=5}}T.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return n?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("button",{onClick:()=>r(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>h(!A),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[u.jsx(Nse,{open:!A})," ",u.jsxs("span",{children:[A?"Ocultar":"Mostrar"," Respuestas"]})]}),u.jsx("button",{onClick:R,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),u.jsxs("button",{onClick:()=>P(n),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":u.jsx(mj,{})," PDF"]})]})]}),u.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[u.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[u.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),u.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),u.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:n.nombre}),u.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Asignatura:"})," ",n.asignatura]}),u.jsxs("p",{className:"text-right",children:[u.jsx("strong",{children:"Puntaje Ideal:"})," ",n.puntajeIdeal]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Nivel:"})," ",n.nivel]})]}),u.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[u.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",n.dificultad||"Intermedio"]}),n.adaptacionNEE&&n.adaptacionNEE.length>0&&u.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",n.adaptacionNEE.join(", ")]})]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",n.objetivo]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Instrucciones Generales:"})," ",n.instruccionesGenerales]})]}),n.actividades.map(E=>u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[u.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),u.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),u.jsx("div",{className:"space-y-6",children:E.items.map((T,k)=>u.jsx(Bse,{item:T,index:k,showAnswers:A},T.id))})]},E.id))]})]}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),u.jsxs("form",{onSubmit:D,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:x,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),u.jsx("div",{}),u.jsx("select",{name:"asignatura",value:g.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Uc.map(E=>u.jsx("option",{children:E},E))}),u.jsx("select",{name:"nivel",value:g.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:B2.map(E=>u.jsx("option",{children:E},E))})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),u.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((E,T)=>u.jsx("button",{type:"button",onClick:()=>w(k=>({...k,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${T===0?"rounded-l-lg":""} ${T===2?"rounded-r-lg":""}
                                            ${g.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:g.isNee,onChange:E=>w(T=>({...T,isNee:E.target.checked,selectedNee:E.target.checked?T.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&u.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:k2.map(E=>u.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(E),onChange:()=>F(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),u.jsx("textarea",{name:"contenido",value:g.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("div",{className:"space-y-3",children:Tse.map(E=>u.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[E],onChange:()=>S(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),g.tiposActividad[E]&&u.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),oL[E].map(T=>u.jsx("button",{type:"button",onClick:()=>N(E,T),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[E]===T?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:T},T))]})]},E))}),l&&u.jsx("p",{className:"text-red-500 text-sm",children:l}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),u.jsx("div",{className:"space-y-2",children:t.length>0?t.map(E=>u.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>r(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),u.jsx("button",{onClick:()=>j(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Ise=({rubricas:t,onSave:e,onDelete:n,onCreate:r})=>{const[s,a]=W.useState(null),[i,o]=W.useState("list"),[l,c]=W.useState(!1),[A,h]=W.useState(""),p=async(j,P)=>{if(!j.trim()||!P.trim()){alert("El ttulo y la descripcin son obligatorios.");return}c(!0);const E=`Crea una rbrica de evaluacin detallada sobre "${j}" con el propsito de "${P}". Genera entre 3 y 5 dimensiones de evaluacin. Para cada dimensin, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,T={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{TA("Evaluacin - Rbricas");const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=(await(await new Si(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:T}})).response).text(),oe=JSON.parse(q),ee={id:crypto.randomUUID(),titulo:j,descripcion:P,fechaCreacion:new Date().toISOString(),dimensiones:oe.map(le=>({id:crypto.randomUUID(),nombre:le.dimension,niveles:{insuficiente:le.insuficiente,suficiente:le.suficiente,competente:le.competente,avanzado:le.avanzado}}))};a(ee)}catch(k){console.error(k),alert("Error al generar la rbrica con IA.")}finally{c(!1)}},g=async()=>{if(!A.trim()||!s)return;const j=crypto.randomUUID(),P={id:j,nombre:A,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};a(k=>k?{...k,dimensiones:[...k.dimensiones,P]}:null),h("");const E=`Para una rbrica sobre "${s.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensin: "${A}". Considera las dimensiones existentes como contexto: ${s.dimensiones.map(k=>k.nombre).join(", ")}. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,T={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{TA("Evaluacin - Rbricas (Aadir Dimensin)");const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=(await(await new Si(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:T}})).response).text(),oe=JSON.parse(q);a(ee=>ee?{...ee,dimensiones:ee.dimensiones.map(le=>le.id===j?{...le,niveles:oe,isLoading:!1}:le)}:null)}catch(k){console.error("Error generating dimension descriptors:",k),alert("No se pudieron generar los descriptores."),a(z=>z?{...z,dimensiones:z.dimensiones.filter(M=>M.id!==j)}:null)}},w=()=>{if(!s)return;t.some(P=>P.id===s.id)?e(s):r(s),o("list"),a(null)},x=j=>{a(j),o("form")},S=()=>{a({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},N=(j,P,E)=>{s&&a(T=>T?{...T,dimensiones:T.dimensiones.map(k=>k.id!==j?k:P==="nombre"?{...k,nombre:E}:{...k,niveles:{...k.niveles,[P]:E}})}:null)},F=(j,P)=>{a(E=>E?{...E,[j]:P}:null)},D=j=>{s&&a(P=>P?{...P,dimensiones:P.dimensiones.filter(E=>E.id!==j)}:null)},R=()=>{if(!s)return null;const j="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",P=`${j} resize-none text-sm`;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),u.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),u.jsx("input",{value:s.titulo,onChange:E=>F("titulo",E.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${j} mt-1`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),u.jsx("textarea",{value:s.descripcion,onChange:E=>F("descripcion",E.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${j} mt-1`})]})]}),s.dimensiones.length===0&&u.jsx("div",{className:"text-center py-4",children:u.jsx("button",{onClick:()=>p(s.titulo,s.descripcion),disabled:l||!s.titulo||!s.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":" Generar Rbrica con IA"})}),s.dimensiones.length>0&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>u.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.dimensiones.map(E=>u.jsxs("tr",{children:[u.jsx("td",{className:"p-2 w-1/5",children:u.jsx("textarea",{value:E.nombre,onChange:T=>N(E.id,"nombre",T.target.value),rows:4,className:P})}),Object.keys(E.niveles).map(T=>u.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?u.jsx("div",{className:"flex justify-center items-center h-full",children:u.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):u.jsx("textarea",{value:E.niveles[T],onChange:k=>N(E.id,T,k.target.value),rows:4,className:P})},T)),u.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:u.jsx("button",{onClick:()=>D(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},E.id))})]})}),u.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),u.jsx("input",{value:A,onChange:E=>h(E.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${j} mt-1`})]}),u.jsx("button",{onClick:g,disabled:!A.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),u.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:u.jsx("button",{onClick:w,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rbrica"})})]})};return i==="list"?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),u.jsx("button",{onClick:S,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(j=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:j.titulo}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:j.descripcion})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:()=>x(j),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),u.jsx("button",{onClick:()=>n(j.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},j.id)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):R()},Fse=({allUsers:t,rubricasEstaticas:e})=>{const[n,r]=W.useState([]),[s,a]=W.useState(null),[i,o]=W.useState(null),[l,c]=W.useState({rubricaEstaticaId:"",curso:""}),[A,h]=W.useState(null);W.useEffect(()=>{const F=_se(r);return()=>F()},[]);const p=async F=>{F.preventDefault();const D=e.find(j=>j.id===l.rubricaEstaticaId);if(!D||!l.curso){alert("Debe seleccionar una rbrica y un curso.");return}const R={nombre:D.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:D.id,resultados:{}};try{await Ese(R),c({rubricaEstaticaId:"",curso:""})}catch(j){console.error(j),alert("No se pudo crear la evaluacin con rbrica.")}},g=F=>{a(F),o(JSON.parse(JSON.stringify(F)))},w=(F,D,R)=>{i&&o(j=>{if(!j)return null;const P=JSON.parse(JSON.stringify(j));return P.resultados[F]||(P.resultados[F]={puntajes:{},feedback:""}),P.resultados[F].puntajes[D]=R,P})},x=async()=>{if(i)try{await Cse(i),a(i),alert("Cambios guardados.")}catch(F){console.error(F),alert("No se pudieron guardar los cambios.")}},S=W.useCallback(F=>{const D=i,R=e.find(z=>z.id===(D==null?void 0:D.rubricaEstaticaId));if(!D||!R)return{score:0,maxScore:0,grade:"N/A"};const j=R.dimensiones.length*4,P=D.resultados[F];if(!P)return{score:0,maxScore:j,grade:"1.0"};const E=Object.values(P.puntajes).reduce((z,M)=>z+M,0),T=1+6*(E/j),k=j>0?T.toFixed(1):"1.0";return{score:E,maxScore:j,grade:k}},[i,e]),N=async F=>{if(!i)return;const D=e.find(E=>E.id===i.rubricaEstaticaId),R=i.resultados[F];if(!D||!R||Object.keys(R.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}h(F);const P=`Genera una retroalimentacin constructiva para un estudiante basada en estos puntajes de rbrica (de 1 a 4): ${D.dimensiones.map(E=>`${E.nombre}: ${R.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluacin es "${D.titulo}". Destaca fortalezas y sugiere 1-2 reas de mejora concretas. S breve y motivador.`;try{TA("Evaluacin - Rbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=(await(await new Si(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(P)).response).text();o(G=>{if(!G)return null;const q=JSON.parse(JSON.stringify(G));return q.resultados[F].feedback=U.replace(/(\*\*|\*)/g,""),q})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const F=e.find(R=>R.id===s.rubricaEstaticaId),D=t.filter(R=>R.profile===tn.ESTUDIANTE&&Mw(R.curso||"")===s.curso).map(R=>R.nombreCompleto).sort();return F?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),u.jsx("p",{className:"text-slate-500",children:s.curso})]}),u.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:" Volver"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),F.dimensiones.map(R=>u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:R.nombre},R.id)),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),u.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentacin"})]})}),u.jsx("tbody",{children:D.map(R=>{var T;const{score:j,maxScore:P,grade:E}=S(R);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:R}),F.dimensiones.map(k=>u.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:u.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(z=>{var M;return u.jsx("button",{onClick:()=>w(R,k.id,z),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((M=i.resultados[R])==null?void 0:M.puntajes[k.id])===z?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:z},z)})})},k.id)),u.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[j,"/",P]}),u.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),u.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:u.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[u.jsx("p",{className:"text-xs w-full",children:((T=i.resultados[R])==null?void 0:T.feedback)||"Sin generar"}),u.jsx("button",{onClick:()=>N(R),disabled:A===R,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:A===R?"...":"Generar IA"})]})})]},R)})})]})}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):u.jsxs("div",{children:["Error: Rbrica base no encontrada. ",u.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluacin con Rbrica"}),u.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsxs("select",{value:l.rubricaEstaticaId,onChange:F=>c({...l,rubricaEstaticaId:F.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[u.jsx("option",{value:"",children:"Seleccione una Rbrica Guardada"}),e.map(F=>u.jsx("option",{value:F.id,children:F.titulo},F.id))]}),u.jsxs("select",{value:l.curso,onChange:F=>c({...l,curso:F.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un Curso"}),ai.map(F=>u.jsx("option",{value:F,children:F},F))]}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluacin"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),u.jsx("div",{className:"space-y-2",children:n.map(F=>u.jsxs("button",{onClick:()=>g(F),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[u.jsx("p",{className:"font-semibold",children:F.nombre}),u.jsx("p",{className:"text-sm text-slate-500",children:F.curso})]},F.id))})]})]})},Dse=({allUsers:t})=>{const[e,n]=W.useState(""),r=W.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===tn.ESTUDIANTE&&a.curso).map(a=>Mw(a.curso)))).sort(),[t]),s=W.useMemo(()=>{const a=t.filter(i=>i.profile===tn.ESTUDIANTE);return e?a.filter(i=>Mw(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nminas de Cursos"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el mdulo de ",u.jsx("strong",{className:"font-semibold",children:"Administracin"}),"."]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),u.jsxs("select",{id:"curso-filter",value:e,onChange:a=>n(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),r.map(a=>u.jsx("option",{value:a,children:a},a))]})]}),u.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:Mw(a.curso||"")}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Lse=()=>{const[t,e]=W.useState("pruebas"),[n,r]=W.useState([]),[s,a]=W.useState([]),[i,o]=W.useState(!0);W.useEffect(()=>{o(!0);const h=Sse(r),p=yse(g=>{a(g),o(!1)});return()=>{h(),p()}},[]);const l=async h=>{try{await wse(h)}catch(p){console.error(p),alert("No se pudo guardar la rbrica.")}},c=async h=>{try{await bse(h)}catch(p){console.error(p),alert("No se pudo eliminar la rbrica.")}},A=({tabName:h,label:p})=>u.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:p});return i?u.jsx("div",{className:"text-center py-10",children:"Cargando mdulo de evaluaciones..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin de Aprendizajes"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx(A,{tabName:"pruebas",label:"Pruebas y Guas"}),u.jsx(A,{tabName:"rubricas",label:"Generador de Rbricas"}),u.jsx(A,{tabName:"rubricasInteractivas",label:"Rbricas Interactivas"}),u.jsx(A,{tabName:"nominas",label:"Gestin de Nminas"})]})}),u.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&u.jsx(kse,{}),t==="rubricas"&&u.jsx(Ise,{rubricas:s,onSave:l,onDelete:c,onCreate:l}),t==="rubricasInteractivas"&&u.jsx(Fse,{allUsers:n,rubricasEstaticas:s}),t==="nominas"&&u.jsx(Dse,{allUsers:n})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var P2={};P2.version="0.18.5";var d7=1252,Rse=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],IB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},FB=function(t){Rse.indexOf(t)!=-1&&(d7=IB[0]=t)};function Pse(){FB(1252)}var zu=function(t){FB(t)};function DB(){zu(1200),Pse()}function lL(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function Mse(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function A7(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var nv=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?Mse(t.slice(2)):e==254&&n==255?A7(t.slice(2)):e==65279?t.slice(1):t},wy=function(e){return String.fromCharCode(e)},cL=function(e){return String.fromCharCode(e)},tx,Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function nx(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),a=n>>2,r=t.charCodeAt(c++),i=(n&3)<<4|r>>4,s=t.charCodeAt(c++),o=(r&15)<<2|s>>6,l=s&63,isNaN(r)?o=l=64:isNaN(s)&&(l=64),e+=Bf.charAt(a)+Bf.charAt(i)+Bf.charAt(o)+Bf.charAt(l);return e}function Oc(t){var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)a=Bf.indexOf(t.charAt(c++)),i=Bf.indexOf(t.charAt(c++)),n=a<<2|i>>4,e+=String.fromCharCode(n),o=Bf.indexOf(t.charAt(c++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Bf.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Fr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),RA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function rh(t){return Fr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function uL(t){return Fr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Fc=function(e){return Fr?RA(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function d_(t){if(typeof ArrayBuffer>"u")return Fc(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function dh(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Use(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function LB(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return LB(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var ro=Fr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:RA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Ose(t){for(var e=[],n=0,r=t.length+250,s=rh(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(i&3)<<4,s[n++]=128|o&63}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|i&63;n>r&&(e.push(s.slice(0,n)),n=0,s=rh(65535),r=65530)}return e.push(s.slice(0,n)),ro(e)}var Il=/\u0000/g,rv=/[\u0001-\u0006]/g;function Jm(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Gu(t,e){var n=""+t;return n.length>=e?n:ja("0",e-n.length)+n}function RB(t,e){var n=""+t;return n.length>=e?n:ja(" ",e-n.length)+n}function M2(t,e){var n=""+t;return n.length>=e?n:n+ja(" ",e-n.length)}function jse(t,e){var n=""+Math.round(t);return n.length>=e?n:ja("0",e-n.length)+n}function Hse(t,e){var n=""+t;return n.length>=e?n:ja("0",e-n.length)+n}var dL=Math.pow(2,32);function lm(t,e){if(t>dL||t<-dL)return jse(t,e);var n=Math.round(t);return Hse(n,e)}function U2(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var AL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],qE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Qse(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var qn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},fL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Vse={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function O2(t,e,n){for(var r=t<0?-1:1,s=t*r,a=0,i=1,o=0,l=1,c=0,A=0,h=Math.floor(s);c<e&&(h=Math.floor(s),o=h*i+a,A=h*c+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=c,c=A;if(A>e&&(c>e?(A=l,o=a):(A=c,o=i)),!n)return[0,r*o,A];var p=Math.floor(r*o/A);return[p,r*o-p*A,A]}function Vh(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),a=0,i=[],o={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++r,++o.D)),r===60)i=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=Wse(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var f7=new Date(1899,11,31,0,0,0),zse=f7.getTime(),Gse=new Date(1900,2,1,0,0,0);function h7(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Gse&&(n+=1440*60*1e3),(n-(zse+(t.getTimezoneOffset()-f7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function PB(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function qse(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Kse(t){var e=t<0?12:11,n=PB(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function $se(t){var e=PB(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function rx(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Kse(t):e===10?n=t.toFixed(10).substr(0,12):n=$se(t),PB(qse(n.toUpperCase()))}function A0(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):rx(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return wu(14,h7(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Wse(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Yse(t,e,n,r){var s="",a=0,i=0,o=n.y,l,c=0;switch(t){case 98:o=n.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return qE[n.m-1][1];case 5:return qE[n.m-1][0];default:return qE[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return AL[n.q][0];default:return AL[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Gu(n.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,a=Math.round(i*(n.S+n.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=Gu(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var A=c>0?Gu(l,c):"";return A}function kf(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var m7=/%/g;function Xse(t,e,n){var r=e.replace(m7,""),s=e.length-r.length;return vA(t,r,n*Math.pow(10,2*s))+ja("%",s)}function Jse(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return vA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function p7(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+p7(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),n.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,A){return l+c+A.substr(0,(s+a)%s)+"."+A.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var g7=/# (\?+)( ?)\/( ?)(\d+)/;function Zse(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(a===0?"":""+a)+" "+(i===0?ja(" ",t[1].length+1+t[4].length):RB(i,t[1].length)+t[2]+"/"+t[3]+Gu(o,t[4].length))}function eae(t,e,n){return n+(e===0?"":""+e)+ja(" ",t[1].length+2+t[4].length)}var v7=/^#*0*\.([0#]+)/,x7=/\).*[0#]/,y7=/\(###\) ###\\?-####/;function Tl(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function hL(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function mL(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function tae(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function nae(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function au(t,e,n){if(t.charCodeAt(0)===40&&!e.match(x7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?au("n",r,n):"("+au("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Jse(t,e,n);if(e.indexOf("%")!==-1)return Xse(t,e,n);if(e.indexOf("E")!==-1)return p7(e,n);if(e.charCodeAt(0)===36)return"$"+au(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+lm(l,e.length);if(e.match(/^[#?]+$/))return s=lm(n,0),s==="0"&&(s=""),s.length>e.length?s:Tl(e.substr(0,e.length-s.length))+s;if(a=e.match(g7))return Zse(a,l,c);if(e.match(/^#+0+$/))return c+lm(l,e.length-e.indexOf("0"));if(a=e.match(v7))return s=hL(n,a[1].length).replace(/^([^\.]+)$/,"$1."+Tl(a[1])).replace(/\.$/,"."+Tl(a[1])).replace(/\.(\d*)$/,function(w,x){return"."+x+ja("0",Tl(a[1]).length-x.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return c+hL(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return c+kf(lm(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+au(t,e,-n):kf(""+(Math.floor(n)+tae(n,a[1].length)))+"."+Gu(mL(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return au(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Jm(au(t,e.replace(/[\\-]/g,""),n)),i=0,Jm(Jm(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return i<s.length?s.charAt(i++):w==="0"?"0":""}));if(e.match(y7))return s=au(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var A="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=O2(l,Math.pow(10,i)-1,!1),s=""+c,A=vA("n",a[1],o[1]),A.charAt(A.length-1)==" "&&(A=A.substr(0,A.length-1)+"0"),s+=A+a[2]+"/"+a[3],A=M2(o[2],i),A.length<a[4].length&&(A=Tl(a[4].substr(a[4].length-A.length))+A),s+=A,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=O2(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RB(o[1],i)+a[2]+"/"+a[3]+M2(o[2],i):ja(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=lm(n,0),e.length<=s.length?s:Tl(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return Tl(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=mL(n,a[1].length),n<0?"-"+au(t,e,-n):kf(nae(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Gu(0,3-w.length):"")+w})+"."+Gu(i,a[1].length);switch(e){case"###,##0.00":return au(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=kf(lm(l,0));return g!=="0"?c+g:"";case"###,###.00":return au(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return au(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function rae(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return vA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function sae(t,e,n){var r=e.replace(m7,""),s=e.length-r.length;return vA(t,r,n*Math.pow(10,2*s))+ja("%",s)}function w7(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+w7(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!n.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,A){return l+c+A.substr(0,(s+a)%s)+"."+A.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function wd(t,e,n){if(t.charCodeAt(0)===40&&!e.match(x7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?wd("n",r,n):"("+wd("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return rae(t,e,n);if(e.indexOf("%")!==-1)return sae(t,e,n);if(e.indexOf("E")!==-1)return w7(e,n);if(e.charCodeAt(0)===36)return"$"+wd(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+Gu(l,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:Tl(e.substr(0,e.length-s.length))+s;if(a=e.match(g7))return eae(a,l,c);if(e.match(/^#+0+$/))return c+Gu(l,e.length-e.indexOf("0"));if(a=e.match(v7))return s=(""+n).replace(/^([^\.]+)$/,"$1."+Tl(a[1])).replace(/\.$/,"."+Tl(a[1])),s=s.replace(/\.(\d*)$/,function(w,x){return"."+x+ja("0",Tl(a[1]).length-x.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return c+kf(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+wd(t,e,-n):kf(""+n)+"."+ja("0",a[1].length);if(a=e.match(/^#,#*,#0/))return wd(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Jm(wd(t,e.replace(/[\\-]/g,""),n)),i=0,Jm(Jm(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return i<s.length?s.charAt(i++):w==="0"?"0":""}));if(e.match(y7))return s=wd(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var A="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=O2(l,Math.pow(10,i)-1,!1),s=""+c,A=vA("n",a[1],o[1]),A.charAt(A.length-1)==" "&&(A=A.substr(0,A.length-1)+"0"),s+=A+a[2]+"/"+a[3],A=M2(o[2],i),A.length<a[4].length&&(A=Tl(a[4].substr(a[4].length-A.length))+A),s+=A,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=O2(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RB(o[1],i)+a[2]+"/"+a[3]+M2(o[2],i):ja(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:Tl(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return Tl(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+wd(t,e,-n):kf(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Gu(0,3-w.length):"")+w})+"."+Gu(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=kf(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return wd(t,e.slice(0,e.lastIndexOf(".")),n)+Tl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function vA(t,e,n){return(n|0)===n?wd(t,e,n):au(t,e,n)}function aae(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var b7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Up(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":U2(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(b7))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function iae(t,e,n,r){for(var s=[],a="",i=0,o="",l="t",c,A,h,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!U2(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=t.charAt(++i),w=g==="("||g===")"?g:"t";s[s.length]={t:w,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(c==null&&(c=Vh(e,n,t.charAt(i+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Vh(e,n),c==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var x={t:o,v:o};if(c==null&&(c=Vh(e,n)),t.substr(i,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="/"?(c!=null&&(x.v=c.H>=12?"":""),x.t="T",i+=5,p="h"):(x.t="t",++i),c==null&&x.t==="T")return"";s[s.length]=x,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(b7)){if(c==null&&(c=Vh(e,n),c==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Up(t)||(s[s.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var S=0,N=0,F;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=p,l="h",S<1&&(S=1);break;case"s":(F=s[i].v.match(/\.0+$/))&&(N=Math.max(N,F[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&s[i].v.match(/[Hh]/)&&(S=1),S<2&&s[i].v.match(/[Mm]/)&&(S=2),S<3&&s[i].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var D="",R;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Yse(s[i].t.charCodeAt(0),s[i].v,c,N),s[i].t="t";break;case"n":case"?":for(R=i+1;s[R]!=null&&((o=s[R].t)==="?"||o==="D"||(o===" "||o==="t")&&s[R+1]!=null&&(s[R+1].t==="?"||s[R+1].t==="t"&&s[R+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[R].v==="/"||s[R].v===" "&&s[R+1]!=null&&s[R+1].t=="?"));)s[i].v+=s[R].v,s[R]={v:"",t:";"},++R;D+=s[i].v,i=R-1;break;case"G":s[i].t="t",s[i].v=A0(e,n);break}var j="",P,E;if(D.length>0){D.charCodeAt(0)==40?(P=e<0&&D.charCodeAt(0)===45?-e:e,E=vA("n",D,P)):(P=e<0&&r>1?-e:e,E=vA("n",D,P),P<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),R=E.length-1;var T=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){T=i;break}var k=s.length;if(T===s.length&&E.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(R>=s[i].v.length-1?(R-=s[i].v.length,s[i].v=E.substr(R+1,s[i].v.length)):R<0?s[i].v="":(s[i].v=E.substr(0,R+1),R=-1),s[i].t="t",k=i);R>=0&&k<s.length&&(s[k].v=E.substr(0,R+1)+s[k].v)}else if(T!==s.length&&E.indexOf("E")===-1){for(R=E.indexOf(".")-1,i=T;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(A=s[i].v.indexOf(".")>-1&&i===T?s[i].v.indexOf(".")-1:s[i].v.length-1,j=s[i].v.substr(A+1);A>=0;--A)R>=0&&(s[i].v.charAt(A)==="0"||s[i].v.charAt(A)==="#")&&(j=E.charAt(R--)+j);s[i].v=j,s[i].t="t",k=i}for(R>=0&&k<s.length&&(s[k].v=E.substr(0,R+1)+s[k].v),R=E.indexOf(".")+1,i=T;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==T)){for(A=s[i].v.indexOf(".")>-1&&i===T?s[i].v.indexOf(".")+1:0,j=s[i].v.substr(0,A);A<s[i].v.length;++A)R<E.length&&(j+=E.charAt(R++));s[i].v=j,s[i].t="t",k=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(P=r>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=vA(s[i].t,s[i].v,P),s[i].t="t");var z="";for(i=0;i!==s.length;++i)s[i]!=null&&(z+=s[i].v);return z}var pL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function gL(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function oae(t,e){var n=aae(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var i=n[0].match(pL),o=n[1].match(pL);return gL(e,i)?[r,n[0]]:gL(e,o)?[r,n[1]]:[r,n[i!=null&&o!=null?2:1]]}return[r,a]}function wu(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:qn)[t],r==null&&(r=n.table&&n.table[fL[t]]||qn[fL[t]]),r==null&&(r=Vse[t]||"General");break}if(U2(r,0))return A0(e,n);e instanceof Date&&(e=h7(e,n.date1904));var s=oae(r,e);if(U2(s[1]))return A0(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return iae(s[1],e,n,s[0])}function xA(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(qn[n]==null){e<0&&(e=n);continue}if(qn[n]==t){e=n;break}}e<0&&(e=391)}return qn[e]=t,e}function A_(t){for(var e=0;e!=392;++e)t[e]!==void 0&&xA(t[e],e)}function Op(){qn=Qse()}var lae={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},_7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function cae(t){var e=typeof t=="number"?qn[t]:t;return e=e.replace(_7,"(\\d+)"),new RegExp("^"+e+"$")}function uae(t,e,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(_7)||[]).forEach(function(h,p){var g=parseInt(n[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var A=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?c:r==-1&&s==-1&&a==-1?A:c+"T"+A}var dae=function(){var t={};t.version="1.2.0";function e(){for(var E=0,T=new Array(256),k=0;k!=256;++k)E=k,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[k]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var n=e();function r(E){var T=0,k=0,z=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)M[z]=E[z];for(z=0;z!=256;++z)for(k=E[z],T=256+z;T<4096;T+=256)k=M[T]=k>>>8^E[k&255];var U=[];for(z=1;z!=16;++z)U[z-1]=typeof Int32Array<"u"?M.subarray(z*256,z*256+256):M.slice(z*256,z*256+256);return U}var s=r(n),a=s[0],i=s[1],o=s[2],l=s[3],c=s[4],A=s[5],h=s[6],p=s[7],g=s[8],w=s[9],x=s[10],S=s[11],N=s[12],F=s[13],D=s[14];function R(E,T){for(var k=T^-1,z=0,M=E.length;z<M;)k=k>>>8^n[(k^E.charCodeAt(z++))&255];return~k}function j(E,T){for(var k=T^-1,z=E.length-15,M=0;M<z;)k=D[E[M++]^k&255]^F[E[M++]^k>>8&255]^N[E[M++]^k>>16&255]^S[E[M++]^k>>>24]^x[E[M++]]^w[E[M++]]^g[E[M++]]^p[E[M++]]^h[E[M++]]^A[E[M++]]^c[E[M++]]^l[E[M++]]^o[E[M++]]^i[E[M++]]^a[E[M++]]^n[E[M++]];for(z+=15;M<z;)k=k>>>8^n[(k^E[M++])&255];return~k}function P(E,T){for(var k=T^-1,z=0,M=E.length,U=0,G=0;z<M;)U=E.charCodeAt(z++),U<128?k=k>>>8^n[(k^U)&255]:U<2048?(k=k>>>8^n[(k^(192|U>>6&31))&255],k=k>>>8^n[(k^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,G=E.charCodeAt(z++)&1023,k=k>>>8^n[(k^(240|U>>8&7))&255],k=k>>>8^n[(k^(128|U>>2&63))&255],k=k>>>8^n[(k^(128|G>>6&15|(U&3)<<4))&255],k=k>>>8^n[(k^(128|G&63))&255]):(k=k>>>8^n[(k^(224|U>>12&15))&255],k=k>>>8^n[(k^(128|U>>6&63))&255],k=k>>>8^n[(k^(128|U&63))&255]);return~k}return t.table=n,t.bstr=R,t.buf=j,t.str=P,t}(),Bn=function(){var e={};e.version="1.2.1";function n(be,Pe){for(var Fe=be.split("/"),De=Pe.split("/"),Le=0,Me=0,tt=Math.min(Fe.length,De.length);Le<tt;++Le){if(Me=Fe[Le].length-De[Le].length)return Me;if(Fe[Le]!=De[Le])return Fe[Le]<De[Le]?-1:1}return Fe.length-De.length}function r(be){if(be.charAt(be.length-1)=="/")return be.slice(0,-1).indexOf("/")===-1?be:r(be.slice(0,-1));var Pe=be.lastIndexOf("/");return Pe===-1?be:be.slice(0,Pe+1)}function s(be){if(be.charAt(be.length-1)=="/")return s(be.slice(0,-1));var Pe=be.lastIndexOf("/");return Pe===-1?be:be.slice(Pe+1)}function a(be,Pe){typeof Pe=="string"&&(Pe=new Date(Pe));var Fe=Pe.getHours();Fe=Fe<<6|Pe.getMinutes(),Fe=Fe<<5|Pe.getSeconds()>>>1,be.write_shift(2,Fe);var De=Pe.getFullYear()-1980;De=De<<4|Pe.getMonth()+1,De=De<<5|Pe.getDate(),be.write_shift(2,De)}function i(be){var Pe=be.read_shift(2)&65535,Fe=be.read_shift(2)&65535,De=new Date,Le=Fe&31;Fe>>>=5;var Me=Fe&15;Fe>>>=4,De.setMilliseconds(0),De.setFullYear(Fe+1980),De.setMonth(Me-1),De.setDate(Le);var tt=Pe&31;Pe>>>=5;var At=Pe&63;return Pe>>>=6,De.setHours(Pe),De.setMinutes(At),De.setSeconds(tt<<1),De}function o(be){To(be,0);for(var Pe={},Fe=0;be.l<=be.length-4;){var De=be.read_shift(2),Le=be.read_shift(2),Me=be.l+Le,tt={};switch(De){case 21589:Fe=be.read_shift(1),Fe&1&&(tt.mtime=be.read_shift(4)),Le>5&&(Fe&2&&(tt.atime=be.read_shift(4)),Fe&4&&(tt.ctime=be.read_shift(4))),tt.mtime&&(tt.mt=new Date(tt.mtime*1e3));break}be.l=Me,Pe[De]=tt}return Pe}var l;function c(){return l||(l={})}function A(be,Pe){if(be[0]==80&&be[1]==75)return Cr(be,Pe);if((be[0]|32)==109&&(be[1]|32)==105)return fa(be,Pe);if(be.length<512)throw new Error("CFB file size "+be.length+" < 512");var Fe=3,De=512,Le=0,Me=0,tt=0,At=0,Je=0,at=[],ct=be.slice(0,512);To(ct,0);var Bt=h(ct);switch(Fe=Bt[0],Fe){case 3:De=512;break;case 4:De=4096;break;case 0:if(Bt[1]==0)return Cr(be,Pe);default:throw new Error("Major Version: Expected 3 or 4 saw "+Fe)}De!==512&&(ct=be.slice(0,De),To(ct,28));var jt=be.slice(0,De);p(ct,Fe);var Jt=ct.read_shift(4,"i");if(Fe===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);ct.l+=4,tt=ct.read_shift(4,"i"),ct.l+=4,ct.chk("00100000","Mini Stream Cutoff Size: "),At=ct.read_shift(4,"i"),Le=ct.read_shift(4,"i"),Je=ct.read_shift(4,"i"),Me=ct.read_shift(4,"i");for(var Ot=-1,$t=0;$t<109&&(Ot=ct.read_shift(4,"i"),!(Ot<0));++$t)at[$t]=Ot;var Cn=g(be,De);S(Je,Me,Cn,De,at);var Ar=F(Cn,tt,at,De);Ar[tt].name="!Directory",Le>0&&At!==G&&(Ar[At].name="!MiniFAT"),Ar[at[0]].name="!FAT",Ar.fat_addrs=at,Ar.ssz=De;var fr={},mr=[],Hs=[],Na=[];D(tt,Ar,Cn,mr,Le,fr,Hs,At),w(Hs,Na,mr),mr.shift();var Xs={FileIndex:Hs,FullPaths:Na};return Pe&&Pe.raw&&(Xs.raw={header:jt,sectors:Cn}),Xs}function h(be){if(be[be.l]==80&&be[be.l+1]==75)return[0,0];be.chk(q,"Header Signature: "),be.l+=16;var Pe=be.read_shift(2,"u");return[be.read_shift(2,"u"),Pe]}function p(be,Pe){var Fe=9;switch(be.l+=2,Fe=be.read_shift(2)){case 9:if(Pe!=3)throw new Error("Sector Shift: Expected 9 saw "+Fe);break;case 12:if(Pe!=4)throw new Error("Sector Shift: Expected 12 saw "+Fe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Fe)}be.chk("0600","Mini Sector Shift: "),be.chk("000000000000","Reserved: ")}function g(be,Pe){for(var Fe=Math.ceil(be.length/Pe)-1,De=[],Le=1;Le<Fe;++Le)De[Le-1]=be.slice(Le*Pe,(Le+1)*Pe);return De[Fe-1]=be.slice(Fe*Pe),De}function w(be,Pe,Fe){for(var De=0,Le=0,Me=0,tt=0,At=0,Je=Fe.length,at=[],ct=[];De<Je;++De)at[De]=ct[De]=De,Pe[De]=Fe[De];for(;At<ct.length;++At)De=ct[At],Le=be[De].L,Me=be[De].R,tt=be[De].C,at[De]===De&&(Le!==-1&&at[Le]!==Le&&(at[De]=at[Le]),Me!==-1&&at[Me]!==Me&&(at[De]=at[Me])),tt!==-1&&(at[tt]=De),Le!==-1&&De!=at[De]&&(at[Le]=at[De],ct.lastIndexOf(Le)<At&&ct.push(Le)),Me!==-1&&De!=at[De]&&(at[Me]=at[De],ct.lastIndexOf(Me)<At&&ct.push(Me));for(De=1;De<Je;++De)at[De]===De&&(Me!==-1&&at[Me]!==Me?at[De]=at[Me]:Le!==-1&&at[Le]!==Le&&(at[De]=at[Le]));for(De=1;De<Je;++De)if(be[De].type!==0){if(At=De,At!=at[At])do At=at[At],Pe[De]=Pe[At]+"/"+Pe[De];while(At!==0&&at[At]!==-1&&At!=at[At]);at[De]=-1}for(Pe[0]+="/",De=1;De<Je;++De)be[De].type!==2&&(Pe[De]+="/")}function x(be,Pe,Fe){for(var De=be.start,Le=be.size,Me=[],tt=De;Fe&&Le>0&&tt>=0;)Me.push(Pe.slice(tt*U,tt*U+U)),Le-=U,tt=Oh(Fe,tt*4);return Me.length===0?wt(0):ro(Me).slice(0,be.size)}function S(be,Pe,Fe,De,Le){var Me=G;if(be===G){if(Pe!==0)throw new Error("DIFAT chain shorter than expected")}else if(be!==-1){var tt=Fe[be],At=(De>>>2)-1;if(!tt)return;for(var Je=0;Je<At&&(Me=Oh(tt,Je*4))!==G;++Je)Le.push(Me);S(Oh(tt,De-4),Pe-1,Fe,De,Le)}}function N(be,Pe,Fe,De,Le){var Me=[],tt=[];Le||(Le=[]);var At=De-1,Je=0,at=0;for(Je=Pe;Je>=0;){Le[Je]=!0,Me[Me.length]=Je,tt.push(be[Je]);var ct=Fe[Math.floor(Je*4/De)];if(at=Je*4&At,De<4+at)throw new Error("FAT boundary crossed: "+Je+" 4 "+De);if(!be[ct])break;Je=Oh(be[ct],at)}return{nodes:Me,data:BL([tt])}}function F(be,Pe,Fe,De){var Le=be.length,Me=[],tt=[],At=[],Je=[],at=De-1,ct=0,Bt=0,jt=0,Jt=0;for(ct=0;ct<Le;++ct)if(At=[],jt=ct+Pe,jt>=Le&&(jt-=Le),!tt[jt]){Je=[];var Ot=[];for(Bt=jt;Bt>=0;){Ot[Bt]=!0,tt[Bt]=!0,At[At.length]=Bt,Je.push(be[Bt]);var $t=Fe[Math.floor(Bt*4/De)];if(Jt=Bt*4&at,De<4+Jt)throw new Error("FAT boundary crossed: "+Bt+" 4 "+De);if(!be[$t]||(Bt=Oh(be[$t],Jt),Ot[Bt]))break}Me[jt]={nodes:At,data:BL([Je])}}return Me}function D(be,Pe,Fe,De,Le,Me,tt,At){for(var Je=0,at=De.length?2:0,ct=Pe[be].data,Bt=0,jt=0,Jt;Bt<ct.length;Bt+=128){var Ot=ct.slice(Bt,Bt+128);To(Ot,64),jt=Ot.read_shift(2),Jt=VB(Ot,0,jt-at),De.push(Jt);var $t={name:Jt,type:Ot.read_shift(1),color:Ot.read_shift(1),L:Ot.read_shift(4,"i"),R:Ot.read_shift(4,"i"),C:Ot.read_shift(4,"i"),clsid:Ot.read_shift(16),state:Ot.read_shift(4,"i"),start:0,size:0},Cn=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Cn!==0&&($t.ct=R(Ot,Ot.l-8));var Ar=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Ar!==0&&($t.mt=R(Ot,Ot.l-8)),$t.start=Ot.read_shift(4,"i"),$t.size=Ot.read_shift(4,"i"),$t.size<0&&$t.start<0&&($t.size=$t.type=0,$t.start=G,$t.name=""),$t.type===5?(Je=$t.start,Le>0&&Je!==G&&(Pe[Je].name="!StreamData")):$t.size>=4096?($t.storage="fat",Pe[$t.start]===void 0&&(Pe[$t.start]=N(Fe,$t.start,Pe.fat_addrs,Pe.ssz)),Pe[$t.start].name=$t.name,$t.content=Pe[$t.start].data.slice(0,$t.size)):($t.storage="minifat",$t.size<0?$t.size=0:Je!==G&&$t.start!==G&&Pe[Je]&&($t.content=x($t,Pe[Je].data,(Pe[At]||{}).data))),$t.content&&To($t.content,0),Me[Jt]=$t,tt.push($t)}}function R(be,Pe){return new Date((Ic(be,Pe+4)/1e7*Math.pow(2,32)+Ic(be,Pe)/1e7-11644473600)*1e3)}function j(be,Pe){return c(),A(l.readFileSync(be),Pe)}function P(be,Pe){var Fe=Pe&&Pe.type;switch(Fe||Fr&&Buffer.isBuffer(be)&&(Fe="buffer"),Fe||"base64"){case"file":return j(be,Pe);case"base64":return A(Fc(Oc(be)),Pe);case"binary":return A(Fc(be),Pe)}return A(be,Pe)}function E(be,Pe){var Fe=Pe||{},De=Fe.root||"Root Entry";if(be.FullPaths||(be.FullPaths=[]),be.FileIndex||(be.FileIndex=[]),be.FullPaths.length!==be.FileIndex.length)throw new Error("inconsistent CFB structure");be.FullPaths.length===0&&(be.FullPaths[0]=De+"/",be.FileIndex[0]={name:De,type:5}),Fe.CLSID&&(be.FileIndex[0].clsid=Fe.CLSID),T(be)}function T(be){var Pe="Sh33tJ5";if(!Bn.find(be,"/"+Pe)){var Fe=wt(4);Fe[0]=55,Fe[1]=Fe[3]=50,Fe[2]=54,be.FileIndex.push({name:Pe,type:2,content:Fe,size:4,L:69,R:69,C:69}),be.FullPaths.push(be.FullPaths[0]+Pe),k(be)}}function k(be,Pe){E(be);for(var Fe=!1,De=!1,Le=be.FullPaths.length-1;Le>=0;--Le){var Me=be.FileIndex[Le];switch(Me.type){case 0:De?Fe=!0:(be.FileIndex.pop(),be.FullPaths.pop());break;case 1:case 2:case 5:De=!0,isNaN(Me.R*Me.L*Me.C)&&(Fe=!0),Me.R>-1&&Me.L>-1&&Me.R==Me.L&&(Fe=!0);break;default:Fe=!0;break}}if(!(!Fe&&!Pe)){var tt=new Date(1987,1,19),At=0,Je=Object.create?Object.create(null):{},at=[];for(Le=0;Le<be.FullPaths.length;++Le)Je[be.FullPaths[Le]]=!0,be.FileIndex[Le].type!==0&&at.push([be.FullPaths[Le],be.FileIndex[Le]]);for(Le=0;Le<at.length;++Le){var ct=r(at[Le][0]);De=Je[ct],De||(at.push([ct,{name:s(ct).replace("/",""),type:1,clsid:ee,ct:tt,mt:tt,content:null}]),Je[ct]=!0)}for(at.sort(function(Jt,Ot){return n(Jt[0],Ot[0])}),be.FullPaths=[],be.FileIndex=[],Le=0;Le<at.length;++Le)be.FullPaths[Le]=at[Le][0],be.FileIndex[Le]=at[Le][1];for(Le=0;Le<at.length;++Le){var Bt=be.FileIndex[Le],jt=be.FullPaths[Le];if(Bt.name=s(jt).replace("/",""),Bt.L=Bt.R=Bt.C=-(Bt.color=1),Bt.size=Bt.content?Bt.content.length:0,Bt.start=0,Bt.clsid=Bt.clsid||ee,Le===0)Bt.C=at.length>1?1:-1,Bt.size=0,Bt.type=5;else if(jt.slice(-1)=="/"){for(At=Le+1;At<at.length&&r(be.FullPaths[At])!=jt;++At);for(Bt.C=At>=at.length?-1:At,At=Le+1;At<at.length&&r(be.FullPaths[At])!=r(jt);++At);Bt.R=At>=at.length?-1:At,Bt.type=1}else r(be.FullPaths[Le+1]||"")==r(jt)&&(Bt.R=Le+1),Bt.type=2}}}function z(be,Pe){var Fe=Pe||{};if(Fe.fileType=="mad")return rn(be,Fe);switch(k(be),Fe.fileType){case"zip":return Ms(be,Fe)}var De=function(Jt){for(var Ot=0,$t=0,Cn=0;Cn<Jt.FileIndex.length;++Cn){var Ar=Jt.FileIndex[Cn];if(Ar.content){var fr=Ar.content.length;fr>0&&(fr<4096?Ot+=fr+63>>6:$t+=fr+511>>9)}}for(var mr=Jt.FullPaths.length+3>>2,Hs=Ot+7>>3,Na=Ot+127>>7,Xs=Hs+$t+mr+Na,ha=Xs+127>>7,Us=ha<=109?0:Math.ceil((ha-109)/127);Xs+ha+Us+127>>7>ha;)Us=++ha<=109?0:Math.ceil((ha-109)/127);var Mn=[1,Us,ha,Na,mr,$t,Ot,0];return Jt.FileIndex[0].size=Ot<<6,Mn[7]=(Jt.FileIndex[0].start=Mn[0]+Mn[1]+Mn[2]+Mn[3]+Mn[4]+Mn[5])+(Mn[6]+7>>3),Mn}(be),Le=wt(De[7]<<9),Me=0,tt=0;{for(Me=0;Me<8;++Me)Le.write_shift(1,oe[Me]);for(Me=0;Me<8;++Me)Le.write_shift(2,0);for(Le.write_shift(2,62),Le.write_shift(2,3),Le.write_shift(2,65534),Le.write_shift(2,9),Le.write_shift(2,6),Me=0;Me<3;++Me)Le.write_shift(2,0);for(Le.write_shift(4,0),Le.write_shift(4,De[2]),Le.write_shift(4,De[0]+De[1]+De[2]+De[3]-1),Le.write_shift(4,0),Le.write_shift(4,4096),Le.write_shift(4,De[3]?De[0]+De[1]+De[2]-1:G),Le.write_shift(4,De[3]),Le.write_shift(-4,De[1]?De[0]-1:G),Le.write_shift(4,De[1]),Me=0;Me<109;++Me)Le.write_shift(-4,Me<De[2]?De[1]+Me:-1)}if(De[1])for(tt=0;tt<De[1];++tt){for(;Me<236+tt*127;++Me)Le.write_shift(-4,Me<De[2]?De[1]+Me:-1);Le.write_shift(-4,tt===De[1]-1?G:tt+1)}var At=function(Jt){for(tt+=Jt;Me<tt-1;++Me)Le.write_shift(-4,Me+1);Jt&&(++Me,Le.write_shift(-4,G))};for(tt=Me=0,tt+=De[1];Me<tt;++Me)Le.write_shift(-4,le.DIFSECT);for(tt+=De[2];Me<tt;++Me)Le.write_shift(-4,le.FATSECT);At(De[3]),At(De[4]);for(var Je=0,at=0,ct=be.FileIndex[0];Je<be.FileIndex.length;++Je)ct=be.FileIndex[Je],ct.content&&(at=ct.content.length,!(at<4096)&&(ct.start=tt,At(at+511>>9)));for(At(De[6]+7>>3);Le.l&511;)Le.write_shift(-4,le.ENDOFCHAIN);for(tt=Me=0,Je=0;Je<be.FileIndex.length;++Je)ct=be.FileIndex[Je],ct.content&&(at=ct.content.length,!(!at||at>=4096)&&(ct.start=tt,At(at+63>>6)));for(;Le.l&511;)Le.write_shift(-4,le.ENDOFCHAIN);for(Me=0;Me<De[4]<<2;++Me){var Bt=be.FullPaths[Me];if(!Bt||Bt.length===0){for(Je=0;Je<17;++Je)Le.write_shift(4,0);for(Je=0;Je<3;++Je)Le.write_shift(4,-1);for(Je=0;Je<12;++Je)Le.write_shift(4,0);continue}ct=be.FileIndex[Me],Me===0&&(ct.start=ct.size?ct.start-1:G);var jt=Me===0&&Fe.root||ct.name;if(at=2*(jt.length+1),Le.write_shift(64,jt,"utf16le"),Le.write_shift(2,at),Le.write_shift(1,ct.type),Le.write_shift(1,ct.color),Le.write_shift(-4,ct.L),Le.write_shift(-4,ct.R),Le.write_shift(-4,ct.C),ct.clsid)Le.write_shift(16,ct.clsid,"hex");else for(Je=0;Je<4;++Je)Le.write_shift(4,0);Le.write_shift(4,ct.state||0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,ct.start),Le.write_shift(4,ct.size),Le.write_shift(4,0)}for(Me=1;Me<be.FileIndex.length;++Me)if(ct=be.FileIndex[Me],ct.size>=4096)if(Le.l=ct.start+1<<9,Fr&&Buffer.isBuffer(ct.content))ct.content.copy(Le,Le.l,0,ct.size),Le.l+=ct.size+511&-512;else{for(Je=0;Je<ct.size;++Je)Le.write_shift(1,ct.content[Je]);for(;Je&511;++Je)Le.write_shift(1,0)}for(Me=1;Me<be.FileIndex.length;++Me)if(ct=be.FileIndex[Me],ct.size>0&&ct.size<4096)if(Fr&&Buffer.isBuffer(ct.content))ct.content.copy(Le,Le.l,0,ct.size),Le.l+=ct.size+63&-64;else{for(Je=0;Je<ct.size;++Je)Le.write_shift(1,ct.content[Je]);for(;Je&63;++Je)Le.write_shift(1,0)}if(Fr)Le.l=Le.length;else for(;Le.l<Le.length;)Le.write_shift(1,0);return Le}function M(be,Pe){var Fe=be.FullPaths.map(function(Je){return Je.toUpperCase()}),De=Fe.map(function(Je){var at=Je.split("/");return at[at.length-(Je.slice(-1)=="/"?2:1)]}),Le=!1;Pe.charCodeAt(0)===47?(Le=!0,Pe=Fe[0].slice(0,-1)+Pe):Le=Pe.indexOf("/")!==-1;var Me=Pe.toUpperCase(),tt=Le===!0?Fe.indexOf(Me):De.indexOf(Me);if(tt!==-1)return be.FileIndex[tt];var At=!Me.match(rv);for(Me=Me.replace(Il,""),At&&(Me=Me.replace(rv,"!")),tt=0;tt<Fe.length;++tt)if((At?Fe[tt].replace(rv,"!"):Fe[tt]).replace(Il,"")==Me||(At?De[tt].replace(rv,"!"):De[tt]).replace(Il,"")==Me)return be.FileIndex[tt];return null}var U=64,G=-2,q="d0cf11e0a1b11ae1",oe=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",le={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:G,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(be,Pe,Fe){c();var De=z(be,Fe);l.writeFileSync(Pe,De)}function ne(be){for(var Pe=new Array(be.length),Fe=0;Fe<be.length;++Fe)Pe[Fe]=String.fromCharCode(be[Fe]);return Pe.join("")}function J(be,Pe){var Fe=z(be,Pe);switch(Pe&&Pe.type||"buffer"){case"file":return c(),l.writeFileSync(Pe.filename,Fe),Fe;case"binary":return typeof Fe=="string"?Fe:ne(Fe);case"base64":return nx(typeof Fe=="string"?Fe:ne(Fe));case"buffer":if(Fr)return Buffer.isBuffer(Fe)?Fe:RA(Fe);case"array":return typeof Fe=="string"?Fc(Fe):Fe}return Fe}var ce;function Q(be){try{var Pe=be.InflateRaw,Fe=new Pe;if(Fe._processChunk(new Uint8Array([3,0]),Fe._finishFlushFlag),Fe.bytesRead)ce=be;else throw new Error("zlib does not expose bytesRead")}catch(De){console.error("cannot use native zlib: "+(De.message||De))}}function Z(be,Pe){if(!ce)return nr(be,Pe);var Fe=ce.InflateRaw,De=new Fe,Le=De._processChunk(be.slice(be.l),De._finishFlushFlag);return be.l+=De.bytesRead,Le}function se(be){return ce?ce.deflateRawSync(be):Qt(be)}var ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ge(be){var Pe=(be<<1|be<<11)&139536|(be<<5|be<<15)&558144;return(Pe>>16|Pe>>8|Pe)&255}for(var xe=typeof Uint8Array<"u",ve=xe?new Uint8Array(256):[],me=0;me<256;++me)ve[me]=ge(me);function he(be,Pe){var Fe=ve[be&255];return Pe<=8?Fe>>>8-Pe:(Fe=Fe<<8|ve[be>>8&255],Pe<=16?Fe>>>16-Pe:(Fe=Fe<<8|ve[be>>16&255],Fe>>>24-Pe))}function He(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=6?0:be[De+1]<<8))>>>Fe&3}function et(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=5?0:be[De+1]<<8))>>>Fe&7}function Ue(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=4?0:be[De+1]<<8))>>>Fe&15}function Ie(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=3?0:be[De+1]<<8))>>>Fe&31}function je(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=1?0:be[De+1]<<8))>>>Fe&127}function Ke(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3,Me=(1<<Fe)-1,tt=be[Le]>>>De;return Fe<8-De||(tt|=be[Le+1]<<8-De,Fe<16-De)||(tt|=be[Le+2]<<16-De,Fe<24-De)||(tt|=be[Le+3]<<24-De),tt&Me}function rt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return De<=5?be[Le]|=(Fe&7)<<De:(be[Le]|=Fe<<De&255,be[Le+1]=(Fe&7)>>8-De),Pe+3}function xt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return Fe=(Fe&1)<<De,be[Le]|=Fe,Pe+1}function Tt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return Fe<<=De,be[Le]|=Fe&255,Fe>>>=8,be[Le+1]=Fe,Pe+8}function vt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return Fe<<=De,be[Le]|=Fe&255,Fe>>>=8,be[Le+1]=Fe&255,be[Le+2]=Fe>>>8,Pe+16}function Vt(be,Pe){var Fe=be.length,De=2*Fe>Pe?2*Fe:Pe+5,Le=0;if(Fe>=Pe)return be;if(Fr){var Me=uL(De);if(be.copy)be.copy(Me);else for(;Le<be.length;++Le)Me[Le]=be[Le];return Me}else if(xe){var tt=new Uint8Array(De);if(tt.set)tt.set(be);else for(;Le<Fe;++Le)tt[Le]=be[Le];return tt}return be.length=De,be}function Kt(be){for(var Pe=new Array(be),Fe=0;Fe<be;++Fe)Pe[Fe]=0;return Pe}function cn(be,Pe,Fe){var De=1,Le=0,Me=0,tt=0,At=0,Je=be.length,at=xe?new Uint16Array(32):Kt(32);for(Me=0;Me<32;++Me)at[Me]=0;for(Me=Je;Me<Fe;++Me)be[Me]=0;Je=be.length;var ct=xe?new Uint16Array(Je):Kt(Je);for(Me=0;Me<Je;++Me)at[Le=be[Me]]++,De<Le&&(De=Le),ct[Me]=0;for(at[0]=0,Me=1;Me<=De;++Me)at[Me+16]=At=At+at[Me-1]<<1;for(Me=0;Me<Je;++Me)At=be[Me],At!=0&&(ct[Me]=at[At+16]++);var Bt=0;for(Me=0;Me<Je;++Me)if(Bt=be[Me],Bt!=0)for(At=he(ct[Me],De)>>De-Bt,tt=(1<<De+4-Bt)-1;tt>=0;--tt)Pe[At|tt<<Bt]=Bt&15|Me<<4;return De}var Gt=xe?new Uint16Array(512):Kt(512),Wt=xe?new Uint16Array(32):Kt(32);if(!xe){for(var sn=0;sn<512;++sn)Gt[sn]=0;for(sn=0;sn<32;++sn)Wt[sn]=0}(function(){for(var be=[],Pe=0;Pe<32;Pe++)be.push(5);cn(be,Wt,32);var Fe=[];for(Pe=0;Pe<=143;Pe++)Fe.push(8);for(;Pe<=255;Pe++)Fe.push(9);for(;Pe<=279;Pe++)Fe.push(7);for(;Pe<=287;Pe++)Fe.push(8);cn(Fe,Gt,288)})();var Ht=function(){for(var Pe=xe?new Uint8Array(32768):[],Fe=0,De=0;Fe<Se.length-1;++Fe)for(;De<Se[Fe+1];++De)Pe[De]=Fe;for(;De<32768;++De)Pe[De]=29;var Le=xe?new Uint8Array(259):[];for(Fe=0,De=0;Fe<fe.length-1;++Fe)for(;De<fe[Fe+1];++De)Le[De]=Fe;function Me(At,Je){for(var at=0;at<At.length;){var ct=Math.min(65535,At.length-at),Bt=at+ct==At.length;for(Je.write_shift(1,+Bt),Je.write_shift(2,ct),Je.write_shift(2,~ct&65535);ct-- >0;)Je[Je.l++]=At[at++]}return Je.l}function tt(At,Je){for(var at=0,ct=0,Bt=xe?new Uint16Array(32768):[];ct<At.length;){var jt=Math.min(65535,At.length-ct);if(jt<10){for(at=rt(Je,at,+(ct+jt==At.length)),at&7&&(at+=8-(at&7)),Je.l=at/8|0,Je.write_shift(2,jt),Je.write_shift(2,~jt&65535);jt-- >0;)Je[Je.l++]=At[ct++];at=Je.l*8;continue}at=rt(Je,at,+(ct+jt==At.length)+2);for(var Jt=0;jt-- >0;){var Ot=At[ct];Jt=(Jt<<5^Ot)&32767;var $t=-1,Cn=0;if(($t=Bt[Jt])&&($t|=ct&-32768,$t>ct&&($t-=32768),$t<ct))for(;At[$t+Cn]==At[ct+Cn]&&Cn<250;)++Cn;if(Cn>2){Ot=Le[Cn],Ot<=22?at=Tt(Je,at,ve[Ot+1]>>1)-1:(Tt(Je,at,3),at+=5,Tt(Je,at,ve[Ot-23]>>5),at+=3);var Ar=Ot<8?0:Ot-4>>2;Ar>0&&(vt(Je,at,Cn-fe[Ot]),at+=Ar),Ot=Pe[ct-$t],at=Tt(Je,at,ve[Ot]>>3),at-=3;var fr=Ot<4?0:Ot-2>>1;fr>0&&(vt(Je,at,ct-$t-Se[Ot]),at+=fr);for(var mr=0;mr<Cn;++mr)Bt[Jt]=ct&32767,Jt=(Jt<<5^At[ct])&32767,++ct;jt-=Cn-1}else Ot<=143?Ot=Ot+48:at=xt(Je,at,1),at=Tt(Je,at,ve[Ot]),Bt[Jt]=ct&32767,++ct}at=Tt(Je,at,0)-1}return Je.l=(at+7)/8|0,Je.l}return function(Je,at){return Je.length<8?Me(Je,at):tt(Je,at)}}();function Qt(be){var Pe=wt(50+Math.floor(be.length*1.1)),Fe=Ht(be,Pe);return Pe.slice(0,Fe)}var _t=xe?new Uint16Array(32768):Kt(32768),Hn=xe?new Uint16Array(32768):Kt(32768),dn=xe?new Uint16Array(128):Kt(128),kr=1,Fn=1;function ar(be,Pe){var Fe=Ie(be,Pe)+257;Pe+=5;var De=Ie(be,Pe)+1;Pe+=5;var Le=Ue(be,Pe)+4;Pe+=4;for(var Me=0,tt=xe?new Uint8Array(19):Kt(19),At=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Je=1,at=xe?new Uint8Array(8):Kt(8),ct=xe?new Uint8Array(8):Kt(8),Bt=tt.length,jt=0;jt<Le;++jt)tt[ie[jt]]=Me=et(be,Pe),Je<Me&&(Je=Me),at[Me]++,Pe+=3;var Jt=0;for(at[0]=0,jt=1;jt<=Je;++jt)ct[jt]=Jt=Jt+at[jt-1]<<1;for(jt=0;jt<Bt;++jt)(Jt=tt[jt])!=0&&(At[jt]=ct[Jt]++);var Ot=0;for(jt=0;jt<Bt;++jt)if(Ot=tt[jt],Ot!=0){Jt=ve[At[jt]]>>8-Ot;for(var $t=(1<<7-Ot)-1;$t>=0;--$t)dn[Jt|$t<<Ot]=Ot&7|jt<<3}var Cn=[];for(Je=1;Cn.length<Fe+De;)switch(Jt=dn[je(be,Pe)],Pe+=Jt&7,Jt>>>=3){case 16:for(Me=3+He(be,Pe),Pe+=2,Jt=Cn[Cn.length-1];Me-- >0;)Cn.push(Jt);break;case 17:for(Me=3+et(be,Pe),Pe+=3;Me-- >0;)Cn.push(0);break;case 18:for(Me=11+je(be,Pe),Pe+=7;Me-- >0;)Cn.push(0);break;default:Cn.push(Jt),Je<Jt&&(Je=Jt);break}var Ar=Cn.slice(0,Fe),fr=Cn.slice(Fe);for(jt=Fe;jt<286;++jt)Ar[jt]=0;for(jt=De;jt<30;++jt)fr[jt]=0;return kr=cn(Ar,_t,286),Fn=cn(fr,Hn,30),Pe}function Mr(be,Pe){if(be[0]==3&&!(be[1]&3))return[rh(Pe),2];for(var Fe=0,De=0,Le=uL(Pe||1<<18),Me=0,tt=Le.length>>>0,At=0,Je=0;(De&1)==0;){if(De=et(be,Fe),Fe+=3,De>>>1)De>>1==1?(At=9,Je=5):(Fe=ar(be,Fe),At=kr,Je=Fn);else{Fe&7&&(Fe+=8-(Fe&7));var at=be[Fe>>>3]|be[(Fe>>>3)+1]<<8;if(Fe+=32,at>0)for(!Pe&&tt<Me+at&&(Le=Vt(Le,Me+at),tt=Le.length);at-- >0;)Le[Me++]=be[Fe>>>3],Fe+=8;continue}for(;;){!Pe&&tt<Me+32767&&(Le=Vt(Le,Me+32767),tt=Le.length);var ct=Ke(be,Fe,At),Bt=De>>>1==1?Gt[ct]:_t[ct];if(Fe+=Bt&15,Bt>>>=4,(Bt>>>8&255)===0)Le[Me++]=Bt;else{if(Bt==256)break;Bt-=257;var jt=Bt<8?0:Bt-4>>2;jt>5&&(jt=0);var Jt=Me+fe[Bt];jt>0&&(Jt+=Ke(be,Fe,jt),Fe+=jt),ct=Ke(be,Fe,Je),Bt=De>>>1==1?Wt[ct]:Hn[ct],Fe+=Bt&15,Bt>>>=4;var Ot=Bt<4?0:Bt-2>>1,$t=Se[Bt];for(Ot>0&&($t+=Ke(be,Fe,Ot),Fe+=Ot),!Pe&&tt<Jt&&(Le=Vt(Le,Jt+100),tt=Le.length);Me<Jt;)Le[Me]=Le[Me-$t],++Me}}}return Pe?[Le,Fe+7>>>3]:[Le.slice(0,Me),Fe+7>>>3]}function nr(be,Pe){var Fe=be.slice(be.l||0),De=Mr(Fe,Pe);return be.l+=De[1],De[0]}function Sa(be,Pe){if(be)typeof console<"u"&&console.error(Pe);else throw new Error(Pe)}function Cr(be,Pe){var Fe=be;To(Fe,0);var De=[],Le=[],Me={FileIndex:De,FullPaths:Le};E(Me,{root:Pe.root});for(var tt=Fe.length-4;(Fe[tt]!=80||Fe[tt+1]!=75||Fe[tt+2]!=5||Fe[tt+3]!=6)&&tt>=0;)--tt;Fe.l=tt+4,Fe.l+=4;var At=Fe.read_shift(2);Fe.l+=6;var Je=Fe.read_shift(4);for(Fe.l=Je,tt=0;tt<At;++tt){Fe.l+=20;var at=Fe.read_shift(4),ct=Fe.read_shift(4),Bt=Fe.read_shift(2),jt=Fe.read_shift(2),Jt=Fe.read_shift(2);Fe.l+=8;var Ot=Fe.read_shift(4),$t=o(Fe.slice(Fe.l+Bt,Fe.l+Bt+jt));Fe.l+=Bt+jt+Jt;var Cn=Fe.l;Fe.l=Ot+4,hs(Fe,at,ct,Me,$t),Fe.l=Cn}return Me}function hs(be,Pe,Fe,De,Le){be.l+=2;var Me=be.read_shift(2),tt=be.read_shift(2),At=i(be);if(Me&8257)throw new Error("Unsupported ZIP encryption");for(var Je=be.read_shift(4),at=be.read_shift(4),ct=be.read_shift(4),Bt=be.read_shift(2),jt=be.read_shift(2),Jt="",Ot=0;Ot<Bt;++Ot)Jt+=String.fromCharCode(be[be.l++]);if(jt){var $t=o(be.slice(be.l,be.l+jt));($t[21589]||{}).mt&&(At=$t[21589].mt),((Le||{})[21589]||{}).mt&&(At=Le[21589].mt)}be.l+=jt;var Cn=be.slice(be.l,be.l+at);switch(tt){case 8:Cn=Z(be,ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+tt)}var Ar=!1;Me&8&&(Je=be.read_shift(4),Je==134695760&&(Je=be.read_shift(4),Ar=!0),at=be.read_shift(4),ct=be.read_shift(4)),at!=Pe&&Sa(Ar,"Bad compressed size: "+Pe+" != "+at),ct!=Fe&&Sa(Ar,"Bad uncompressed size: "+Fe+" != "+ct),Ir(De,Jt,Cn,{unsafe:!0,mt:At})}function Ms(be,Pe){var Fe=Pe||{},De=[],Le=[],Me=wt(1),tt=Fe.compression?8:0,At=0,Je=0,at=0,ct=0,Bt=0,jt=be.FullPaths[0],Jt=jt,Ot=be.FileIndex[0],$t=[],Cn=0;for(Je=1;Je<be.FullPaths.length;++Je)if(Jt=be.FullPaths[Je].slice(jt.length),Ot=be.FileIndex[Je],!(!Ot.size||!Ot.content||Jt=="Sh33tJ5")){var Ar=ct,fr=wt(Jt.length);for(at=0;at<Jt.length;++at)fr.write_shift(1,Jt.charCodeAt(at)&127);fr=fr.slice(0,fr.l),$t[Bt]=dae.buf(Ot.content,0);var mr=Ot.content;tt==8&&(mr=se(mr)),Me=wt(30),Me.write_shift(4,67324752),Me.write_shift(2,20),Me.write_shift(2,At),Me.write_shift(2,tt),Ot.mt?a(Me,Ot.mt):Me.write_shift(4,0),Me.write_shift(-4,$t[Bt]),Me.write_shift(4,mr.length),Me.write_shift(4,Ot.content.length),Me.write_shift(2,fr.length),Me.write_shift(2,0),ct+=Me.length,De.push(Me),ct+=fr.length,De.push(fr),ct+=mr.length,De.push(mr),Me=wt(46),Me.write_shift(4,33639248),Me.write_shift(2,0),Me.write_shift(2,20),Me.write_shift(2,At),Me.write_shift(2,tt),Me.write_shift(4,0),Me.write_shift(-4,$t[Bt]),Me.write_shift(4,mr.length),Me.write_shift(4,Ot.content.length),Me.write_shift(2,fr.length),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(4,0),Me.write_shift(4,Ar),Cn+=Me.l,Le.push(Me),Cn+=fr.length,Le.push(fr),++Bt}return Me=wt(22),Me.write_shift(4,101010256),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(2,Bt),Me.write_shift(2,Bt),Me.write_shift(4,Cn),Me.write_shift(4,ct),Me.write_shift(2,0),ro([ro(De),ro(Le),Me])}var dr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function xn(be,Pe){if(be.ctype)return be.ctype;var Fe=be.name||"",De=Fe.match(/\.([^\.]+)$/);return De&&dr[De[1]]||Pe&&(De=(Fe=Pe).match(/[\.\\]([^\.\\])+$/),De&&dr[De[1]])?dr[De[1]]:"application/octet-stream"}function hr(be){for(var Pe=nx(be),Fe=[],De=0;De<Pe.length;De+=76)Fe.push(Pe.slice(De,De+76));return Fe.join(`\r
`)+`\r
`}function Ta(be){var Pe=be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(at){var ct=at.charCodeAt(0).toString(16).toUpperCase();return"="+(ct.length==1?"0"+ct:ct)});Pe=Pe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Pe.charAt(0)==`
`&&(Pe="=0D"+Pe.slice(1)),Pe=Pe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Fe=[],De=Pe.split(`\r
`),Le=0;Le<De.length;++Le){var Me=De[Le];if(Me.length==0){Fe.push("");continue}for(var tt=0;tt<Me.length;){var At=76,Je=Me.slice(tt,tt+At);Je.charAt(At-1)=="="?At--:Je.charAt(At-2)=="="?At-=2:Je.charAt(At-3)=="="&&(At-=3),Je=Me.slice(tt,tt+At),tt+=At,tt<Me.length&&(Je+="="),Fe.push(Je)}}return Fe.join(`\r
`)}function ms(be){for(var Pe=[],Fe=0;Fe<be.length;++Fe){for(var De=be[Fe];Fe<=be.length&&De.charAt(De.length-1)=="=";)De=De.slice(0,De.length-1)+be[++Fe];Pe.push(De)}for(var Le=0;Le<Pe.length;++Le)Pe[Le]=Pe[Le].replace(/[=][0-9A-Fa-f]{2}/g,function(Me){return String.fromCharCode(parseInt(Me.slice(1),16))});return Fc(Pe.join(`\r
`))}function Ys(be,Pe,Fe){for(var De="",Le="",Me="",tt,At=0;At<10;++At){var Je=Pe[At];if(!Je||Je.match(/^\s*$/))break;var at=Je.match(/^(.*?):\s*([^\s].*)$/);if(at)switch(at[1].toLowerCase()){case"content-location":De=at[2].trim();break;case"content-type":Me=at[2].trim();break;case"content-transfer-encoding":Le=at[2].trim();break}}switch(++At,Le.toLowerCase()){case"base64":tt=Fc(Oc(Pe.slice(At).join("")));break;case"quoted-printable":tt=ms(Pe.slice(At));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Le)}var ct=Ir(be,De.slice(Fe.length),tt,{unsafe:!0});Me&&(ct.ctype=Me)}function fa(be,Pe){if(ne(be.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Fe=Pe&&Pe.root||"",De=(Fr&&Buffer.isBuffer(be)?be.toString("binary"):ne(be)).split(`\r
`),Le=0,Me="";for(Le=0;Le<De.length;++Le)if(Me=De[Le],!!/^Content-Location:/i.test(Me)&&(Me=Me.slice(Me.indexOf("file")),Fe||(Fe=Me.slice(0,Me.lastIndexOf("/")+1)),Me.slice(0,Fe.length)!=Fe))for(;Fe.length>0&&(Fe=Fe.slice(0,Fe.length-1),Fe=Fe.slice(0,Fe.lastIndexOf("/")+1),Me.slice(0,Fe.length)!=Fe););var tt=(De[1]||"").match(/boundary="(.*?)"/);if(!tt)throw new Error("MAD cannot find boundary");var At="--"+(tt[1]||""),Je=[],at=[],ct={FileIndex:Je,FullPaths:at};E(ct);var Bt,jt=0;for(Le=0;Le<De.length;++Le){var Jt=De[Le];Jt!==At&&Jt!==At+"--"||(jt++&&Ys(ct,De.slice(Bt,Le),Fe),Bt=Le)}return ct}function rn(be,Pe){var Fe=Pe||{},De=Fe.boundary||"SheetJS";De="------="+De;for(var Le=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+De.slice(2)+'"',"","",""],Me=be.FullPaths[0],tt=Me,At=be.FileIndex[0],Je=1;Je<be.FullPaths.length;++Je)if(tt=be.FullPaths[Je].slice(Me.length),At=be.FileIndex[Je],!(!At.size||!At.content||tt=="Sh33tJ5")){tt=tt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Cn){return"_x"+Cn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Cn){return"_u"+Cn.charCodeAt(0).toString(16)+"_"});for(var at=At.content,ct=Fr&&Buffer.isBuffer(at)?at.toString("binary"):ne(at),Bt=0,jt=Math.min(1024,ct.length),Jt=0,Ot=0;Ot<=jt;++Ot)(Jt=ct.charCodeAt(Ot))>=32&&Jt<128&&++Bt;var $t=Bt>=jt*4/5;Le.push(De),Le.push("Content-Location: "+(Fe.root||"file:///C:/SheetJS/")+tt),Le.push("Content-Transfer-Encoding: "+($t?"quoted-printable":"base64")),Le.push("Content-Type: "+xn(At,tt)),Le.push(""),Le.push($t?Ta(ct):hr(ct))}return Le.push(De+`--\r
`),Le.join(`\r
`)}function Ur(be){var Pe={};return E(Pe,be),Pe}function Ir(be,Pe,Fe,De){var Le=De&&De.unsafe;Le||E(be);var Me=!Le&&Bn.find(be,Pe);if(!Me){var tt=be.FullPaths[0];Pe.slice(0,tt.length)==tt?tt=Pe:(tt.slice(-1)!="/"&&(tt+="/"),tt=(tt+Pe).replace("//","/")),Me={name:s(Pe),type:2},be.FileIndex.push(Me),be.FullPaths.push(tt),Le||Bn.utils.cfb_gc(be)}return Me.content=Fe,Me.size=Fe?Fe.length:0,De&&(De.CLSID&&(Me.clsid=De.CLSID),De.mt&&(Me.mt=De.mt),De.ct&&(Me.ct=De.ct)),Me}function es(be,Pe){E(be);var Fe=Bn.find(be,Pe);if(Fe){for(var De=0;De<be.FileIndex.length;++De)if(be.FileIndex[De]==Fe)return be.FileIndex.splice(De,1),be.FullPaths.splice(De,1),!0}return!1}function Er(be,Pe,Fe){E(be);var De=Bn.find(be,Pe);if(De){for(var Le=0;Le<be.FileIndex.length;++Le)if(be.FileIndex[Le]==De)return be.FileIndex[Le].name=s(Fe),be.FullPaths[Le]=Fe,!0}return!1}function Yt(be){k(be,!0)}return e.find=M,e.read=P,e.parse=A,e.write=J,e.writeFile=K,e.utils={cfb_new:Ur,cfb_add:Ir,cfb_del:es,cfb_mov:Er,cfb_gc:Yt,ReadShift:Sv,CheckField:G7,prep_blob:To,bconcat:ro,use_zlib:Q,_deflateRaw:Qt,_inflateRaw:nr,consts:le},e}();function Aae(t){return typeof t=="string"?d_(t):Array.isArray(t)?Use(t):t}function Yx(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=d_(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?Bd(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var s=new Blob([Aae(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=dh(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function fae(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function za(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function vL(t,e){for(var n=[],r=za(t),s=0;s!==r.length;++s)n[t[r[s]][e]]==null&&(n[t[r[s]][e]]=r[s]);return n}function f_(t){for(var e=[],n=za(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function h_(t){for(var e=[],n=za(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function hae(t){for(var e=[],n=za(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var j2=new Date(1899,11,30,0,0,0);function Oi(t,e){var n=t.getTime(),r=j2.getTime()+(t.getTimezoneOffset()-j2.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var C7=new Date,mae=j2.getTime()+(C7.getTimezoneOffset()-j2.getTimezoneOffset())*6e4,xL=C7.getTimezoneOffset();function m_(t){var e=new Date;return e.setTime(t*24*60*60*1e3+mae),e.getTimezoneOffset()!==xL&&e.setTime(e.getTime()+(e.getTimezoneOffset()-xL)*6e4),e}function pae(t){var e=0,n=0,r=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(s[a],10)}return e}var yL=new Date("2017-02-19T19:06:09.000Z"),E7=isNaN(yL.getFullYear())?new Date("2/19/17"):yL,gae=E7.getFullYear()==2017;function ia(t,e){var n=new Date(t);if(gae)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(E7.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function f0(t,e){if(Fr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Bd(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Bd(A7(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Bd(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Bd(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(a){return n[a]||a})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function oa(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=oa(t[n]));return e}function ja(t,e){for(var n="";n.length<e;)n+=t;return n}function qu(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var vae=["january","february","march","april","may","june","july","august","september","october","november","december"];function xp(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&vae.indexOf(i)==-1)return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var xae=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,s){if(t||typeof r=="string")return n.split(r);for(var a=n.split(r),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function S7(t){return t?t.content&&t.type?f0(t.content,!0):t.data?nv(t.data):t.asNodeBuffer&&Fr?nv(t.asNodeBuffer().toString("binary")):t.asBinary?nv(t.asBinary()):t._data&&t._data.getContent?nv(f0(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function T7(t){if(!t)return null;if(t.data)return lL(t.data);if(t.asNodeBuffer&&Fr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?lL(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function yae(t){return t&&t.name.slice(-4)===".bin"?T7(t):S7(t)}function lu(t,e){for(var n=t.FullPaths||za(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var i=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||s==i)return t.files?t.files[n[a]]:t.FileIndex[a]}return null}function MB(t,e){var n=lu(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function xi(t,e,n){if(!n)return yae(MB(t,e));if(!e)return null;try{return xi(t,e)}catch{return null}}function Dc(t,e,n){if(!n)return S7(MB(t,e));if(!e)return null;try{return Dc(t,e)}catch{return null}}function wae(t,e,n){return T7(MB(t,e))}function wL(t){for(var e=t.FullPaths||za(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function _r(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Fr?r=RA(n):r=Ose(n),Bn.utils.cfb_add(t,e,r)}Bn.utils.cfb_add(t,e,n)}else t.file(e,n)}function UB(){return Bn.utils.cfb_new()}function N7(t,e){switch(e.type){case"base64":return Bn.read(t,{type:"base64"});case"binary":return Bn.read(t,{type:"binary"});case"buffer":case"array":return Bn.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function sv(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var s=r.shift();s===".."?n.pop():s!=="."&&n.push(s)}return n.join("/")}var oi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,bae=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,bL=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,_ae=/<[^>]*>/g,dl=oi.match(bL)?bL:_ae,Cae=/<\w*:/,Eae=/<(\/?)\w+:/;function tr(t,e,n){for(var r={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(r[0]=t.slice(0,s)),s===t.length)return r;var i=t.match(bae),o=0,l="",c=0,A="",h="",p=1;if(i)for(c=0;c!=i.length;++c){for(h=i[c],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(A=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(p=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+p,h.length-p),o=0;o!=A.length&&A.charCodeAt(o)!==58;++o);if(o===A.length)A.indexOf("_")>0&&(A=A.slice(0,A.indexOf("_"))),r[A]=l,r[A.toLowerCase()]=l;else{var g=(o===5&&A.slice(0,5)==="xmlns"?"xmlns":"")+A.slice(o+1);if(r[g]&&A.slice(o-3,o)=="ext")continue;r[g]=l,r[g.toLowerCase()]=l}}return r}function zd(t){return t.replace(Eae,"<$1")}var B7={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},OB=f_(B7),ss=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return B7[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,i)+n(s.slice(i+3))}}(),jB=/[&<>'"]/g,Sae=/[\u0000-\u0008\u000b-\u001f]/g;function ks(t){var e=t+"";return e.replace(jB,function(n){return OB[n]}).replace(Sae,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function _L(t){return ks(t).replace(/ /g,"_x0020_")}var k7=/[\u0000-\u001f]/g;function HB(t){var e=t+"";return e.replace(jB,function(n){return OB[n]}).replace(/\n/g,"<br/>").replace(k7,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function Tae(t){var e=t+"";return e.replace(jB,function(n){return OB[n]}).replace(k7,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var CL=function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}}();function Nae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function sa(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function KE(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){i=(r&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(n++),o=((r&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function EL(t){var e=rh(2*t.length),n,r,s=1,a=0,i=0,o;for(r=0;r<t.length;r+=s)s=1,(o=t.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(t.charCodeAt(r+1)&63),s=2):o<240?(n=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,i=55296+(n>>>10&1023),n=56320+(n&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function SL(t){return RA(t,"binary").toString("utf8")}var by="foo bar baz",Ps=Fr&&(SL(by)==KE(by)&&SL||EL(by)==KE(by)&&EL)||KE,Bd=Fr?function(t){return RA(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},sx=function(){var t={};return function(n,r){var s=n+"|"+(r||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}}(),I7=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}}(),Bae=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),kae=/<\/?(?:vt:)?variant>/g,Iae=/<(?:vt:)([^>]*)>([\s\S]*)</;function TL(t,e){var n=tr(t),r=t.match(Bae(n.baseType))||[],s=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(a){var i=a.replace(kae,"").match(Iae);i&&s.push({v:Ps(i[2]),t:i[1]})}),s}var F7=/(^\s|\s$|\n)/;function Bo(t,e){return"<"+t+(e.match(F7)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function ax(t){return za(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Xt(t,e,n){return"<"+t+(n!=null?ax(n):"")+(e!=null?(e.match(F7)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function $T(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function Fae(t,e){switch(typeof t){case"string":var n=Xt("vt:lpwstr",ks(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Xt((t|0)==t?"vt:i4":"vt:r8",ks(String(t)));case"boolean":return Xt("vt:bool",t?"true":"false")}if(t instanceof Date)return Xt("vt:filetime",$T(t));throw new Error("Unable to serialize "+t)}function QB(t){if(Fr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ps(dh(LB(t)));throw new Error("Bad input format: expected Buffer or string")}var ix=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Mi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},S0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],kc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Dae(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function Lae(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=r?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[n+o]=a&255;t[n+6]=(s&15)<<4|a&15,t[n+7]=s>>4|r}var NL=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,a=t[0][r].length;s<a;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},BL=Fr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:RA(e)})):NL(t)}:NL,kL=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(mA(t,s)));return r.join("").replace(Il,"")},VB=Fr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(Il,""):kL(t,e,n)}:kL,IL=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},D7=Fr?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):IL(t,e,n)}:IL,FL=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(Fm(t,s)));return r.join("")},Xx=Fr?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):FL(e,n,r)}:FL,L7=function(t,e){var n=Ic(t,e);return n>0?Xx(t,e+4,e+4+n-1):""},R7=L7,P7=function(t,e){var n=Ic(t,e);return n>0?Xx(t,e+4,e+4+n-1):""},M7=P7,U7=function(t,e){var n=2*Ic(t,e);return n>0?Xx(t,e+4,e+4+n-1):""},O7=U7,j7=function(e,n){var r=Ic(e,n);return r>0?VB(e,n+4,n+4+r):""},H7=j7,Q7=function(t,e){var n=Ic(t,e);return n>0?Xx(t,e+4,e+4+n):""},V7=Q7,z7=function(t,e){return Dae(t,e)},H2=z7,zB=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Fr&&(R7=function(e,n){if(!Buffer.isBuffer(e))return L7(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},M7=function(e,n){if(!Buffer.isBuffer(e))return P7(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},O7=function(e,n){if(!Buffer.isBuffer(e))return U7(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},H7=function(e,n){if(!Buffer.isBuffer(e))return j7(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},V7=function(e,n){if(!Buffer.isBuffer(e))return Q7(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},H2=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):z7(e,n)},zB=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Fm=function(t,e){return t[e]},mA=function(t,e){return t[e+1]*256+t[e]},Rae=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Ic=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Oh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Pae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Sv(t,e){var n="",r,s,a=[],i,o,l,c;switch(e){case"dbcs":if(c=this.l,Fr&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(mA(this,c)),c+=2;t*=2;break;case"utf8":n=Xx(this,this.l,this.l+t);break;case"utf16le":t*=2,n=VB(this,this.l,this.l+t);break;case"wstr":return Sv.call(this,t,"dbcs");case"lpstr-ansi":n=R7(this,this.l),t=4+Ic(this,this.l);break;case"lpstr-cp":n=M7(this,this.l),t=4+Ic(this,this.l);break;case"lpwstr":n=O7(this,this.l),t=4+2*Ic(this,this.l);break;case"lpp4":t=4+Ic(this,this.l),n=H7(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ic(this,this.l),n=V7(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(i=Fm(this,this.l+t++))!==0;)a.push(wy(i));n=a.join("");break;case"_wstr":for(t=0,n="";(i=mA(this,this.l+t))!==0;)a.push(wy(i)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=Fm(this,c),this.l=c+1,o=Sv.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(wy(mA(this,c))),c+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=Fm(this,c),this.l=c+1,o=Sv.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(wy(Fm(this,c))),c+=1}n=a.join("");break;default:switch(t){case 1:return r=Fm(this,this.l),this.l++,r;case 2:return r=(e==="i"?Rae:mA)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Oh:Pae)(this,this.l),this.l+=4,r):(s=Ic(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=H2(this,this.l):s=H2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=D7(this,this.l,t);break}}return this.l+=t,n}var Mae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},Uae=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Oae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function jae(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)Oae(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Mae(this,e,this.l);break;case 8:if(r=8,n==="f"){Lae(this,e,this.l);break}case 16:break;case-4:r=4,Uae(this,e,this.l);break}return this.l+=r,this}function G7(t,e){var n=D7(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function To(t,e){t.l=e,t.read_shift=Sv,t.chk=G7,t.write_shift=jae}function cl(t,e){t.l+=e}function wt(t){var e=rh(t);return To(e,0),e}function PA(t,e,n){if(t){var r,s,a;To(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var c=Ax[o]||Ax[65535];for(r=t.read_shift(1),a=r&127,s=1;s<4&&r&128;++s)a+=((r=t.read_shift(1))&127)<<7*s;l=t.l+a;var A=c.f&&c.f(t,a,n);if(t.l=l,e(A,c,o))return}}}function ac(){var t=[],e=Fr?256:2048,n=function(c){var A=wt(c);return To(A,0),A},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(c){return r&&c<r.length-r.l?r:(s(),r=n(Math.max(c+1,e)))},i=function(){return s(),ro(t)},o=function(c){s(),r=c,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Mt(t,e,n,r){var s=+e,a;if(!isNaN(s)){r||(r=Ax[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&zB(n)&&t.push(n)}}function Tv(t,e,n){var r=oa(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function DL(t,e,n){var r=oa(t);return r.s=Tv(r.s,e.s,n),r.e=Tv(r.e,e.s,n),r}function Nv(t,e){if(t.cRel&&t.c<0)for(t=oa(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=oa(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=Yn(t);return!t.cRel&&t.cRel!=null&&(n=Vae(n)),!t.rRel&&t.rRel!=null&&(n=Hae(n)),n}function $E(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ba(t.s.c)+":"+(t.e.cRel?"":"$")+ba(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ii(t.s.r)+":"+(t.e.rRel?"":"$")+ii(t.e.r):Nv(t.s,e.biff)+":"+Nv(t.e,e.biff)}function GB(t){return parseInt(Qae(t),10)-1}function ii(t){return""+(t+1)}function Hae(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Qae(t){return t.replace(/\$(\d+)$/,"$1")}function qB(t){for(var e=zae(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function ba(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Vae(t){return t.replace(/^([A-Z])/,"$$$1")}function zae(t){return t.replace(/^\$([A-Z])/,"$1")}function Gae(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function _a(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function Yn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function oc(t){var e=t.indexOf(":");return e==-1?{s:_a(t),e:_a(t)}:{s:_a(t.slice(0,e)),e:_a(t.slice(e+1))}}function vr(t,e){return typeof e>"u"||typeof e=="number"?vr(t.s,t.e):(typeof t!="string"&&(t=Yn(t)),typeof e!="string"&&(e=Yn(e)),t==e?t:t+":"+e)}function as(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=t.length;for(n=0;r<a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function LL(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=wu(t.z,n?Oi(e):e)}catch{}try{return t.w=wu((t.XF||{}).numFmtId||(n?14:0),n?Oi(e):e)}catch{return""+e}}function BA(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?MA[t.v]||t.v:e==null?LL(t,t.v):LL(t,e))}function Ah(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function q7(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?_a(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var A=as(a["!ref"]);c.s.c=A.s.c,c.s.r=A.s.r,c.e.c=Math.max(c.e.c,A.e.c),c.e.r=Math.max(c.e.r,A.e.r),i==-1&&(c.e.r=i=A.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var g={v:e[h][p]},w=i+h,x=o+p;if(c.s.r>w&&(c.s.r=w),c.s.c>x&&(c.s.c=x),c.e.r<w&&(c.e.r=w),c.e.c<x&&(c.e.c=x),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))g=e[h][p];else if(Array.isArray(g.v)&&(g.f=e[h][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||qn[14],r.cellDates?(g.t="d",g.w=wu(g.z,Oi(g.v))):(g.t="n",g.v=Oi(g.v),g.w=wu(g.z,g.v))):g.t="s";if(s)a[w]||(a[w]=[]),a[w][x]&&a[w][x].z&&(g.z=a[w][x].z),a[w][x]=g;else{var S=Yn({c:x,r:w});a[S]&&a[S].z&&(g.z=a[S].z),a[S]=g}}}return c.s.c<1e7&&(a["!ref"]=vr(c)),a}function jp(t,e){return q7(null,t,e)}function qae(t){return t.read_shift(4,"i")}function Ku(t,e){return e||(e=wt(4)),e.write_shift(4,t),e}function ol(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function so(t,e){var n=!1;return e==null&&(n=!0,e=wt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function Kae(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function $ae(t,e){return e||(e=wt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function KB(t,e){var n=t.l,r=t.read_shift(1),s=ol(t),a=[],i={t:s,h:s};if((r&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(Kae(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=n+e,i}function Wae(t,e){var n=!1;return e==null&&(n=!0,e=wt(15+4*t.t.length)),e.write_shift(1,0),so(t.t,e),n?e.slice(0,e.l):e}var Yae=KB;function Xae(t,e){var n=!1;return e==null&&(n=!0,e=wt(23+4*t.t.length)),e.write_shift(1,1),so(t.t,e),e.write_shift(4,1),$ae({},e),n?e.slice(0,e.l):e}function bu(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function T0(t,e){return e==null&&(e=wt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function N0(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function B0(t,e){return e==null&&(e=wt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Jae=ol,K7=so;function $B(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Q2(t,e){var n=!1;return e==null&&(n=!0,e=wt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var Zae=ol,WT=$B,WB=Q2;function YB(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?H2([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Oh(e,0)>>2;return n?s/100:s}function $7(t,e){e==null&&(e=wt(4));var n=0,r=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?s:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function W7(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function eie(t,e){return e||(e=wt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var k0=W7,Hp=eie;function al(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function h0(t,e){return(e||wt(8)).write_shift(8,t,"f")}function tie(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var c=Xh[s];c&&(e.rgb=lx(c));break;case 2:e.rgb=lx([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function V2(t,e){if(e||(e=wt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function nie(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function rie(t,e){e||(e=wt(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function Y7(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function sie(t){return Y7(t,1)}function aie(t){return Y7(t,2)}var XB=2,Zl=3,_y=11,RL=12,z2=19,Cy=64,iie=65,oie=71,lie=4108,cie=4126,to=80,X7=81,uie=[to,X7],YT={1:{n:"CodePage",t:XB},2:{n:"Category",t:to},3:{n:"PresentationFormat",t:to},4:{n:"ByteCount",t:Zl},5:{n:"LineCount",t:Zl},6:{n:"ParagraphCount",t:Zl},7:{n:"SlideCount",t:Zl},8:{n:"NoteCount",t:Zl},9:{n:"HiddenCount",t:Zl},10:{n:"MultimediaClipCount",t:Zl},11:{n:"ScaleCrop",t:_y},12:{n:"HeadingPairs",t:lie},13:{n:"TitlesOfParts",t:cie},14:{n:"Manager",t:to},15:{n:"Company",t:to},16:{n:"LinksUpToDate",t:_y},17:{n:"CharacterCount",t:Zl},19:{n:"SharedDoc",t:_y},22:{n:"HyperlinksChanged",t:_y},23:{n:"AppVersion",t:Zl,p:"version"},24:{n:"DigSig",t:iie},26:{n:"ContentType",t:to},27:{n:"ContentStatus",t:to},28:{n:"Language",t:to},29:{n:"Version",t:to},255:{},2147483648:{n:"Locale",t:z2},2147483651:{n:"Behavior",t:z2},1919054434:{}},XT={1:{n:"CodePage",t:XB},2:{n:"Title",t:to},3:{n:"Subject",t:to},4:{n:"Author",t:to},5:{n:"Keywords",t:to},6:{n:"Comments",t:to},7:{n:"Template",t:to},8:{n:"LastAuthor",t:to},9:{n:"RevNumber",t:to},10:{n:"EditTime",t:Cy},11:{n:"LastPrinted",t:Cy},12:{n:"CreatedDate",t:Cy},13:{n:"ModifiedDate",t:Cy},14:{n:"PageCount",t:Zl},15:{n:"WordCount",t:Zl},16:{n:"CharCount",t:Zl},17:{n:"Thumbnail",t:oie},18:{n:"Application",t:to},19:{n:"DocSecurity",t:Zl},255:{},2147483648:{n:"Locale",t:z2},2147483651:{n:"Behavior",t:z2},1919054434:{}},PL={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},die=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Aie(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var fie=Aie([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Xh=oa(fie),MA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},J7={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},JT={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Ey={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function JB(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function hie(t){var e=JB();if(!t||!t.match)return e;var n={};if((t.match(dl)||[]).forEach(function(r){var s=tr(r);switch(s[0].replace(Cae,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[s.Extension]=s.ContentType;break;case"<Override":e[JT[s.ContentType]]!==void 0&&e[JT[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Mi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function Z7(t,e){var n=hae(JT),r=[],s;r[r.length]=oi,r[r.length]=Xt("Types",null,{xmlns:Mi.CT,"xmlns:xsd":Mi.xsd,"xmlns:xsi":Mi.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Xt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],r[r.length]=Xt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Ey[l][e.bookType]||Ey[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(c){r[r.length]=Xt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Ey[l][e.bookType]||Ey[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=Xt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Rr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function ox(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Bv(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(dl)||[]).forEach(function(s){var a=tr(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:sv(a.Target,e);n[o]=i,r[a.Id]=i}}),n["!id"]=r,n}function Zm(t){var e=[oi,Xt("Relationships",null,{xmlns:Mi.RELS})];return za(t["!id"]).forEach(function(n){e[e.length]=Xt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Ns(t,e,n,r,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=n,[Rr.HLINK,Rr.XPATH,Rr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var mie="application/vnd.oasis.opendocument.spreadsheet";function pie(t,e){for(var n=QB(t),r,s;r=ix.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(s=tr(r[0],!1),s.path=="/"&&s.type!==mie)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function gie(t){var e=[oi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function ML(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function vie(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function xie(t){var e=[oi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(ML(t[n][0],t[n][1])),e.push(vie("",t[n][0]));return e.push(ML("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function eH(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+P2.version+"</meta:generator></office:meta></office:document-meta>"}var xu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],yie=function(){for(var t=new Array(xu.length),e=0;e<xu.length;++e){var n=xu[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function tH(t){var e={};t=Ps(t);for(var n=0;n<xu.length;++n){var r=xu[n],s=t.match(yie[n]);s!=null&&s.length>0&&(e[r[1]]=ss(s[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=ia(e[r[1]]))}return e}function WE(t,e,n,r,s){s[t]!=null||e==null||e===""||(s[t]=e,e=ks(e),r[r.length]=n?Xt(t,e,n):Bo(t,e))}function nH(t,e){var n=e||{},r=[oi,Xt("cp:coreProperties",null,{"xmlns:cp":Mi.CORE_PROPS,"xmlns:dc":Mi.dc,"xmlns:dcterms":Mi.dcterms,"xmlns:dcmitype":Mi.dcmitype,"xmlns:xsi":Mi.xsi})],s={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&WE("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:$T(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),t.ModifiedDate!=null&&WE("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:$T(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=xu.length;++a){var i=xu[a],o=n.Props&&n.Props[i[1]]!=null?n.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&WE(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Jh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],rH=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sH(t,e,n,r){var s=[];if(typeof t=="string")s=TL(t,r);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(A){return{v:A}}));var i=typeof e=="string"?TL(e,r).map(function(A){return A.v}):e,o=0,l=0;if(i.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l);break}o+=l}}function wie(t,e,n){var r={};return e||(e={}),t=Ps(t),Jh.forEach(function(s){var a=(t.match(sx(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=ss(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(r[s[1]]=i[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&sH(r.HeadingPairs,r.TitlesOfParts,e,n),e}function aH(t){var e=[],n=Xt;return t||(t={}),t.Application="SheetJS",e[e.length]=oi,e[e.length]=Xt("Properties",null,{xmlns:Mi.EXT_PROPS,"xmlns:vt":Mi.vt}),Jh.forEach(function(r){if(t[r[1]]!==void 0){var s;switch(r[2]){case"string":s=ks(String(t[r[1]]));break;case"bool":s=t[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=n(r[0],s))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+ks(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var bie=/<[^>]+>[^<]*/g;function _ie(t,e){var n={},r="",s=t.match(bie);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=tr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=ss(o.name);break;case"</property>":r=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),c=l[0].slice(4),A=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":n[r]=ss(A);break;case"bool":n[r]=sa(A);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(A,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(A);break;case"filetime":case"date":n[r]=ia(A);break;case"cy":case"error":n[r]=ss(A);break;default:if(c.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,c,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return n}function iH(t){var e=[oi,Xt("Properties",null,{xmlns:Mi.CUST_PROPS,"xmlns:vt":Mi.vt})];if(!t)return e.join("");var n=1;return za(t).forEach(function(s){++n,e[e.length]=Xt("property",Fae(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:ks(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var ZT={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},YE;function Cie(t,e,n){YE||(YE=f_(ZT)),e=YE[e]||e,t[e]=n}function Eie(t,e){var n=[];return za(ZT).map(function(r){for(var s=0;s<xu.length;++s)if(xu[s][1]==r)return xu[s];for(s=0;s<Jh.length;++s)if(Jh[s][1]==r)return Jh[s];throw r}).forEach(function(r){if(t[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(Bo(ZT[r[1]]||r[1],s))}}),Xt("DocumentProperties",n.join(""),{xmlns:kc.o})}function Sie(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return t&&za(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<xu.length;++i)if(a==xu[i][1])return;for(i=0;i<Jh.length;++i)if(a==Jh[i][1])return;for(i=0;i<n.length;++i)if(a==n[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Xt(_L(a),o,{"dt:dt":l}))}}),e&&za(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Xt(_L(a),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+kc.o+'">'+s.join("")+"</"+r+">"}function ZB(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Tie(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),s=(n-r)/Math.pow(2,32);r*=1e7,s*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),s+=a);var i=wt(8);return i.write_shift(4,r),i.write_shift(4,s),i}function oH(t,e,n){var r=t.l,s=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return s}function lH(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function cH(t,e,n){return e===31?lH(t):oH(t,e,n)}function e5(t,e,n){return cH(t,e,n===!1?0:4)}function Nie(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return cH(t,e,0)}function Bie(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var s=t.l;n[r]=t.read_shift(0,"lpwstr").replace(Il,""),t.l-s&2&&(t.l+=2)}return n}function kie(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(Il,"");return n}function Iie(t){var e=t.l,n=G2(t,X7);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=G2(t,Zl);return[n,r]}function Fie(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(Iie(t));return n}function UL(t,e){for(var n=t.read_shift(4),r={},s=0;s!=n;++s){var a=t.read_shift(4),i=t.read_shift(4);r[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Il,"").replace(rv,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function uH(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function Die(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function G2(t,e,n){var r=t.read_shift(2),s,a=n||{};if(t.l+=2,e!==RL&&r!==e&&uie.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===RL?r:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return oH(t,r,4).replace(Il,"");case 31:return lH(t);case 64:return ZB(t);case 65:return uH(t);case 71:return Die(t);case 80:return e5(t,r,!a.raw).replace(Il,"");case 81:return Nie(t,r).replace(Il,"");case 4108:return Fie(t);case 4126:case 4127:return r==4127?Bie(t):kie(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function OL(t,e){var n=wt(4),r=wt(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=wt(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Tie(e);break;case 31:case 80:for(r=wt(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return ro([n,r])}function jL(t,e){var n=t.l,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,c={};for(i=0;i!=s;++i){var A=t.read_shift(4),h=t.read_shift(4);a[i]=[A,h+n]}a.sort(function(F,D){return F[1]-D[1]});var p={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var g=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(g=!1,t.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var w=e[a[i][0]];if(p[w.n]=G2(t,w.t,{raw:!0}),w.p==="version"&&(p[w.n]=String(p[w.n]>>16)+"."+("0000"+String(p[w.n]&65535)).slice(-4)),w.n=="CodePage")switch(p[w.n]){case 0:p[w.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:zu(o=p[w.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[w.n])}}else if(a[i][0]===1){if(o=p.CodePage=G2(t,XB),zu(o),l!==-1){var x=t.l;t.l=a[l][1],c=UL(t,o),t.l=x}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}c=UL(t,o)}else{var S=c[a[i][0]],N;switch(t[t.l]){case 65:t.l+=4,N=uH(t);break;case 30:t.l+=4,N=e5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,N=e5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,N=t.read_shift(4,"i");break;case 19:t.l+=4,N=t.read_shift(4);break;case 5:t.l+=4,N=t.read_shift(8,"f");break;case 11:t.l+=4,N=Za(t,4);break;case 64:t.l+=4,N=ia(ZB(t));break;default:throw new Error("unparsed value: "+t[t.l])}p[S]=N}}return t.l=n+r,p}var dH=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Lie(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function HL(t,e,n){var r=wt(8),s=[],a=[],i=8,o=0,l=wt(8),c=wt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),s.push(c),i+=8+l.length,!e){c=wt(8),c.write_shift(4,0),s.unshift(c);var A=[wt(4)];for(A[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=wt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);A.push(l)}l=ro(A),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(dH.indexOf(t[o][0])>-1||rH.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],g=0;if(e){g=+e[t[o][0]];var w=n[g];if(w.p=="version"&&typeof p=="string"){var x=p.split(".");p=(+x[0]<<16)+(+x[1]||0)}l=OL(w.t,p)}else{var S=Lie(p);S==-1&&(S=31,p=String(p)),l=OL(S,p)}a.push(l),c=wt(8),c.write_shift(4,e?g:2+o),s.push(c),i+=8+l.length}var N=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,N),N+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),ro([r].concat(s).concat(a))}function QL(t,e,n){var r=t.content;if(!r)return{};To(r,0);var s,a,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),A=r.read_shift(16);if(A!==Bn.utils.consts.HEADER_CLSID&&A!==n)throw new Error("Bad PropertySet CLSID "+A);if(s=r.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),o=r.read_shift(4),s===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);s===2&&(i=r.read_shift(16),l=r.read_shift(4));var h=jL(r,e),p={SystemIdentifier:c};for(var g in h)p[g]=h[g];if(p.FMTID=a,s===1)return p;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var w;try{w=jL(r,null)}catch{}for(g in w)p[g]=w[g];return p.FMTID=[a,i],p}function VL(t,e,n,r,s,a){var i=wt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Bn.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=HL(t,n,r);if(o.push(l),s){var c=HL(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(c)}return ro(o)}function Af(t,e){return t.read_shift(e),null}function Rie(t,e){e||(e=wt(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Pie(t,e,n){for(var r=[],s=t.l+e;t.l<s;)r.push(n(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return r}function Za(t,e){return t.read_shift(e)===1}function Nl(t,e){return e||(e=wt(2)),e.write_shift(2,+!!t),e}function yi(t){return t.read_shift(2,"u")}function uu(t,e){return e||(e=wt(2)),e.write_shift(2,t),e}function AH(t,e){return Pie(t,e,yi)}function Mie(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function fH(t,e,n){return n||(n=wt(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function Jx(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?t.read_shift(r,s):"";return i}function Uie(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,s=n&8,a=1+(n&1),i=0,o,l={};s&&(i=t.read_shift(2)),r&&(o=t.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",A=e===0?"":t.read_shift(e,c);return s&&(t.l+=4*i),r&&(t.l+=o),l.t=A,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Oie(t){var e=t.t||"",n=wt(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=wt(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[n,r];return ro(s)}function m0(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Zx(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):m0(t,r,n)}function I0(t,e,n){if(n.biff>5)return Zx(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function hH(t,e,n){return n||(n=wt(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function jie(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function Hie(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var s=t.read_shift((r?e-24:e)>>1,"utf16le").replace(Il,"");return r&&(t.l+=24),s}function Qie(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return n+r.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(Il,"");return n+i}function Vie(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return Hie(t);case"0303000000000000c000000000000046":return Qie(t);default:throw new Error("Unsupported Moniker "+n)}}function Sy(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(Il,""):"";return n}function zL(t,e){e||(e=wt(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function zie(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var s=t.read_shift(2);t.l+=2;var a,i,o,l,c="",A,h;s&16&&(a=Sy(t,n-t.l)),s&128&&(i=Sy(t,n-t.l)),(s&257)===257&&(o=Sy(t,n-t.l)),(s&257)===1&&(l=Vie(t,n-t.l)),s&8&&(c=Sy(t,n-t.l)),s&32&&(A=t.read_shift(16)),s&64&&(h=ZB(t)),t.l=n;var p=i||o||l||"";p&&c&&(p+="#"+c),p||(p="#"+c),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return A&&(g.guid=A),h&&(g.time=h),a&&(g.Tooltip=a),g}function Gie(t){var e=wt(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)e.write_shift(4,i[n]);if(a==28)r=r.slice(1),zL(r,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)e.write_shift(2,o.charCodeAt(n));e.write_shift(2,0),a&8&&zL(s>-1?r.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function mH(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1);return[e,n,r,s]}function pH(t,e){var n=mH(t);return n[3]=0,n}function Gd(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function p0(t,e,n,r){return r||(r=wt(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function qie(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function Kie(t,e,n){return e===0?"":I0(t,e,n)}function $ie(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),a=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[s,a,i]}function gH(t){var e=t.read_shift(2),n=YB(t);return[e,n]}function Wie(t,e,n){t.l+=4,e-=4;var r=t.l+e,s=Jx(t,e,n),a=t.read_shift(2);if(r-=t.l,a!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return t.l+=a,s}function p_(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function vH(t,e){return e||(e=wt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function xH(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),s=t.read_shift(1);return{s:{c:r,r:e},e:{c:s,r:n}}}var Yie=xH;function yH(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function Xie(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Jie(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Wo(t){t.l+=2,t.l+=t.read_shift(2)}var Zie={0:Wo,4:Wo,5:Wo,6:Wo,7:Jie,8:Wo,9:Wo,10:Wo,11:Wo,12:Wo,13:Xie,14:Wo,15:Wo,16:Wo,17:Wo,18:Wo,19:Wo,20:Wo,21:yH};function eoe(t,e){for(var n=t.l+e,r=[];t.l<n;){var s=t.read_shift(2);t.l-=2;try{r.push(Zie[s](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function Ty(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function e4(t,e,n){var r=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=wt(s);return a.write_shift(2,r),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function toe(t,e){return e===0||t.read_shift(2),1200}function noe(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,s=I0(t,0,n);return t.read_shift(e+r-t.l),s}function roe(t,e){var n=!e||e.biff==8,r=wt(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function soe(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function aoe(t,e,n){var r=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=Jx(t,0,n);return i.length===0&&(i="Sheet1"),{pos:r,hs:s,dt:a,name:i}}function ioe(t,e){var n=!e||e.biff>=8?2:1,r=wt(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function ooe(t,e){for(var n=t.l+e,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<n;++i)a.push(Uie(t));return a.Count=r,a.Unique=s,a}function loe(t,e){var n=wt(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],s=0;s<t.length;++s)r[s]=Oie(t[s]);var a=ro([n].concat(r));return a.parts=[n.length].concat(r.map(function(i){return i.length})),a}function coe(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function uoe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function doe(t){var e=qie(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function Aoe(t){return t.read_shift(2),t.read_shift(4)}function GL(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var s=t.read_shift(2);n&&n.biff==2&&(r=1-(s>>15),s&=32767);var a={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[a,s]}function foe(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);return{Pos:[e,n],Dim:[r,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:c}}function hoe(){var t=wt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function moe(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function poe(t){var e=wt(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function goe(){}function voe(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=Jx(t,0,n),r}function xoe(t,e){var n=t.name||"Arial",r=e&&e.biff==5,s=r?15+n.length:16+2*n.length,a=wt(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}function yoe(t){var e=Gd(t);return e.isst=t.read_shift(4),e}function woe(t,e,n,r){var s=wt(10);return p0(t,e,r,s),s.write_shift(4,n),s}function boe(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,s=Gd(t);n.biff==2&&t.l++;var a=Zx(t,r-t.l,n);return s.val=a,s}function _oe(t,e,n,r,s){var a=!s||s.biff==8,i=wt(8+ +a+(1+a)*n.length);return p0(t,e,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}function Coe(t,e,n){var r=t.read_shift(2),s=I0(t,0,n);return[r,s]}function Eoe(t,e,n,r){var s=n&&n.biff==5;r||(r=wt(s?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}var Soe=I0;function qL(t,e,n){var r=t.l+e,s=n.biff==8||!n.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:a,c:o},e:{r:i,c:l}}}function Toe(t,e){var n=e.biff==8||!e.biff?4:2,r=wt(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Noe(t){var e=t.read_shift(2),n=t.read_shift(2),r=gH(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function Boe(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(gH(t));if(t.l!==n)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r,c:s,C:i,rkrec:a}}function koe(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r,c:s,C:i,ixfe:a}}function Ioe(t,e,n,r){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=die[o>>26],r.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Foe(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=Ioe(t,e,r.fStyle,n),r}function KL(t,e,n,r){var s=n&&n.biff==5;r||(r=wt(s?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function Doe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Loe(t){var e=wt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function $L(t,e,n){var r=Gd(t);(n.biff==2||e==9)&&++t.l;var s=Mie(t);return r.val=s,r.t=s===!0||s===!1?"b":"e",r}function Roe(t,e,n,r,s,a){var i=wt(8);return p0(t,e,r,i),fH(n,a,i),i}function Poe(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=Gd(t),s=al(t);return r.val=s,r}function Moe(t,e,n,r){var s=wt(14);return p0(t,e,r,s),h0(n,s),s}var WL=Kie;function Uoe(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(n.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=m0(t,a),o=[];r>t.l;)o.push(Zx(t));return[a,s,i,o]}function YL(t,e,n){var r=t.read_shift(2),s,a={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(s=Wie(t,e-2,n)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var Ooe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function XL(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),l=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var c=m0(t,i,n);s&32&&(c=Ooe[c.charCodeAt(0)]);var A=r-t.l;n&&n.biff==2&&--A;var h=r==t.l||o===0||!(A>0)?[]:eAe(t,A,n,o);return{chKey:a,Name:c,itab:l,rgce:h}}function wH(t,e,n){if(n.biff<8)return joe(t,e,n);for(var r=[],s=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push($ie(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function joe(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=Jx(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function Hoe(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),s=t.read_shift(2),a=m0(t,r,n),i=m0(t,s,n);return[a,i]}function Qoe(t,e,n){var r=xH(t);t.l++;var s=t.read_shift(1);return e-=8,[tAe(t,e,n),s,r]}function JL(t,e,n){var r=Yie(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,Jde(t,e,n)]}function Voe(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function zoe(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=I0(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:s},o,i,a]}}function Goe(t,e,n){return zoe(t,e,n)}function qoe(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(p_(t));return n}function Koe(t){var e=wt(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)vH(t[n],e);return e}function $oe(t,e,n){if(n&&n.biff<8)return Yoe(t,e,n);var r=yH(t),s=eoe(t,e-22,r[1]);return{cmo:r,ft:s}}var Woe={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=n,{fmt:r}}};function Yoe(t,e,n){t.l+=4;var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Woe[r]||cl)(t,e,n)),{cmo:[s,r,a],ft:i}}function Xoe(t,e,n){var r=t.l,s="";try{t.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=jie(t,6,n);var o=t.read_shift(2);t.read_shift(2),yi(t,2);var l=t.read_shift(2);t.l+=l;for(var c=1;c<t.lens.length-1;++c){if(t.l-r!=t.lens[c])throw new Error("TxO: bad continue record");var A=t[t.l],h=m0(t,t.lens[c+1]-t.lens[c]-1);if(s+=h,s.length>=(A?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=r+e,{t:s}}catch{return t.l=r+e,{t:s}}}function Joe(t,e){var n=p_(t);t.l+=16;var r=zie(t,e-24);return[n,r]}function Zoe(t){var e=wt(24),n=_a(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return ro([e,Gie(t[1])])}function ele(t,e){t.read_shift(2);var n=p_(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(Il,""),[n,r]}function tle(t){var e=t[1].Tooltip,n=wt(10+2*(e.length+1));n.write_shift(2,2048);var r=_a(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<e.length;++s)n.write_shift(2,e.charCodeAt(s));return n.write_shift(2,0),n}function nle(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=PL[n]||n,n=t.read_shift(2),e[1]=PL[n]||n,e}function rle(t){return t||(t=wt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function sle(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(pH(t));return n}function ale(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(pH(t));return n}function ile(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function bH(t,e,n){if(!n.cellStyles)return cl(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),a=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function ole(t,e){var n=wt(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function lle(t,e){var n={};return e<32||(t.l+=16,n.header=al(t),n.footer=al(t),t.l+=2),n}function cle(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var s=t.read_shift(1);return t.l+=3,s&16&&(r.area=!0),r}function ule(t){for(var e=wt(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var dle=Gd,Ale=AH,fle=Zx;function hle(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,s}function mle(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=Gd(t);++t.l;var s=I0(t,e-7,n);return r.t="str",r.val=s,r}function ple(t){var e=Gd(t);++t.l;var n=al(t);return e.t="n",e.val=n,e}function gle(t,e,n){var r=wt(15);return r1(r,t,e),r.write_shift(8,n,"f"),r}function vle(t){var e=Gd(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function xle(t,e,n){var r=wt(9);return r1(r,t,e),r.write_shift(2,n),r}function yle(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function wle(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function ble(t,e,n){var r=t.l+e,s=Gd(t),a=t.read_shift(2),i=m0(t,a,n);return t.l=r,s.t="str",s.val=i,s}var _le=[2,3,48,49,131,139,140,245],t5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=f_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var c=[],A=rh(1);switch(l.type){case"base64":A=Fc(Oc(o));break;case"binary":A=Fc(o);break;case"buffer":case"array":A=o;break}To(A,0);var h=A.read_shift(1),p=!!(h&136),g=!1,w=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var x=0,S=521;h==2&&(x=A.read_shift(2)),A.l+=3,h!=2&&(x=A.read_shift(4)),x>1048576&&(x=1e6),h!=2&&(S=A.read_shift(2));var N=A.read_shift(2),F=l.codepage||1252;h!=2&&(A.l+=16,A.read_shift(1),A[A.l]!==0&&(F=t[A[A.l]]),A.l+=1,A.l+=2),w&&(A.l+=36);for(var D=[],R={},j=Math.min(A.length,h==2?521:S-10-(g?264:0)),P=w?32:11;A.l<j&&A[A.l]!=13;)switch(R={},R.name=tx.utils.decode(F,A.slice(A.l,A.l+P)).replace(/[\u0000\r\n].*$/g,""),A.l+=P,R.type=String.fromCharCode(A.read_shift(1)),h!=2&&!w&&(R.offset=A.read_shift(4)),R.len=A.read_shift(1),h==2&&(R.offset=A.read_shift(2)),R.dec=A.read_shift(1),R.name.length&&D.push(R),h!=2&&(A.l+=w?13:14),R.type){case"B":(!g||R.len!=8)&&l.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+R.type)}if(A[A.l]!==13&&(A.l=S-1),A.read_shift(1)!==13)throw new Error("DBF Terminator not found "+A.l+" "+A[A.l]);A.l=S;var E=0,T=0;for(c[0]=[],T=0;T!=D.length;++T)c[0][T]=D[T].name;for(;x-- >0;){if(A[A.l]===42){A.l+=N;continue}for(++A.l,c[++E]=[],T=0,T=0;T!=D.length;++T){var k=A.slice(A.l,A.l+D[T].len);A.l+=D[T].len,To(k,0);var z=tx.utils.decode(F,k);switch(D[T].type){case"C":z.trim().length&&(c[E][T]=z.replace(/\s+$/,""));break;case"D":z.length===8?c[E][T]=new Date(+z.slice(0,4),+z.slice(4,6)-1,+z.slice(6,8)):c[E][T]=z;break;case"F":c[E][T]=parseFloat(z.trim());break;case"+":case"I":c[E][T]=w?k.read_shift(-4,"i")^2147483648:k.read_shift(4,"i");break;case"L":switch(z.trim().toUpperCase()){case"Y":case"T":c[E][T]=!0;break;case"N":case"F":c[E][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+z+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[E][T]="##MEMO##"+(w?parseInt(z.trim(),10):k.read_shift(4));break;case"N":z=z.replace(/\u0000/g,"").trim(),z&&z!="."&&(c[E][T]=+z||0);break;case"@":c[E][T]=new Date(k.read_shift(-8,"f")-621356832e5);break;case"T":c[E][T]=new Date((k.read_shift(4)-2440588)*864e5+k.read_shift(4));break;case"Y":c[E][T]=k.read_shift(4,"i")/1e4+k.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[E][T]=-k.read_shift(-8,"f");break;case"B":if(g&&D[T].len==8){c[E][T]=k.read_shift(8,"f");break}case"G":case"P":k.l+=D[T].len;break;case"0":if(D[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[T].type)}}}if(h!=2&&A.l<A.length&&A[A.l++]!=26)throw new Error("DBF EOF Marker missing "+(A.l-1)+" of "+A.length+" "+A[A.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=D,c}function r(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var A=jp(n(o,c),c);return A["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,A}function s(o,l){try{return Ah(r(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var c=l||{};if(+c.codepage>=0&&zu(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var A=ac(),h=$2(o,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),w=o["!cols"]||[],x=0,S=0,N=0,F=1;for(x=0;x<p.length;++x){if(((w[x]||{}).DBF||{}).name){p[x]=w[x].DBF.name,++N;continue}if(p[x]!=null){if(++N,typeof p[x]=="number"&&(p[x]=p[x].toString(10)),typeof p[x]!="string")throw new Error("DBF Invalid column name "+p[x]+" |"+typeof p[x]+"|");if(p.indexOf(p[x])!==x){for(S=0;S<1024;++S)if(p.indexOf(p[x]+"_"+S)==-1){p[x]+="_"+S;break}}}}var D=as(o["!ref"]),R=[],j=[],P=[];for(x=0;x<=D.e.c-D.s.c;++x){var E="",T="",k=0,z=[];for(S=0;S<g.length;++S)g[S][x]!=null&&z.push(g[S][x]);if(z.length==0||p[x]==null){R[x]="?";continue}for(S=0;S<z.length;++S){switch(typeof z[S]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=z[S]instanceof Date?"D":"C";break;default:T="C"}k=Math.max(k,String(z[S]).length),E=E&&E!=T?"C":T}k>250&&(k=250),T=((w[x]||{}).DBF||{}).type,T=="C"&&w[x].DBF.len>k&&(k=w[x].DBF.len),E=="B"&&T=="N"&&(E="N",P[x]=w[x].DBF.dec,k=w[x].DBF.len),j[x]=E=="C"||T=="N"?k:a[E]||0,F+=j[x],R[x]=E}var M=A.next(32);for(M.write_shift(4,318902576),M.write_shift(4,g.length),M.write_shift(2,296+32*N),M.write_shift(2,F),x=0;x<4;++x)M.write_shift(4,0);for(M.write_shift(4,0|(+e[d7]||3)<<8),x=0,S=0;x<p.length;++x)if(p[x]!=null){var U=A.next(32),G=(p[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,G,"sbcs"),U.write_shift(1,R[x]=="?"?"C":R[x],"sbcs"),U.write_shift(4,S),U.write_shift(1,j[x]||a[R[x]]||0),U.write_shift(1,P[x]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),S+=j[x]||a[R[x]]||0}var q=A.next(264);for(q.write_shift(4,13),x=0;x<65;++x)q.write_shift(4,0);for(x=0;x<g.length;++x){var oe=A.next(F);for(oe.write_shift(1,0),S=0;S<p.length;++S)if(p[S]!=null)switch(R[S]){case"L":oe.write_shift(1,g[x][S]==null?63:g[x][S]?84:70);break;case"B":oe.write_shift(8,g[x][S]||0,"f");break;case"N":var ee="0";for(typeof g[x][S]=="number"&&(ee=g[x][S].toFixed(P[S]||0)),N=0;N<j[S]-ee.length;++N)oe.write_shift(1,32);oe.write_shift(1,ee,"sbcs");break;case"D":g[x][S]?(oe.write_shift(4,("0000"+g[x][S].getFullYear()).slice(-4),"sbcs"),oe.write_shift(2,("00"+(g[x][S].getMonth()+1)).slice(-2),"sbcs"),oe.write_shift(2,("00"+g[x][S].getDate()).slice(-2),"sbcs")):oe.write_shift(8,"00000000","sbcs");break;case"C":var le=String(g[x][S]!=null?g[x][S]:"").slice(0,j[S]);for(oe.write_shift(1,le,"sbcs"),N=0;N<j[S]-le.length;++N)oe.write_shift(1,32);break}}return A.next(1).write_shift(1,26),A.end()}return{to_workbook:s,to_sheet:r,from_sheet:i}}(),_H=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+za(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(p,g){var w=t[g];return typeof w=="number"?cL(w):w},r=function(p,g,w){var x=g.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return x==59?p:cL(x)};t["|"]=254;function s(p,g){switch(g.type){case"base64":return a(Oc(p),g);case"binary":return a(p,g);case"buffer":return a(Fr&&Buffer.isBuffer(p)?p.toString("binary"):dh(p),g);case"array":return a(f0(p),g)}throw new Error("Unrecognized type "+g.type)}function a(p,g){var w=p.split(/[\n\r]+/),x=-1,S=-1,N=0,F=0,D=[],R=[],j=null,P={},E=[],T=[],k=[],z=0,M;for(+g.codepage>=0&&zu(+g.codepage);N!==w.length;++N){z=0;var U=w[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),G=U.replace(/;;/g,"\0").split(";").map(function(ie){return ie.replace(/\u0000/g,";")}),q=G[0],oe;if(U.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":G[1].charAt(0)=="P"&&R.push(U.slice(3).replace(/;;/g,";"));break;case"C":var ee=!1,le=!1,K=!1,ne=!1,J=-1,ce=-1;for(F=1;F<G.length;++F)switch(G[F].charAt(0)){case"A":break;case"X":S=parseInt(G[F].slice(1))-1,le=!0;break;case"Y":for(x=parseInt(G[F].slice(1))-1,le||(S=0),M=D.length;M<=x;++M)D[M]=[];break;case"K":oe=G[F].slice(1),oe.charAt(0)==='"'?oe=oe.slice(1,oe.length-1):oe==="TRUE"?oe=!0:oe==="FALSE"?oe=!1:isNaN(qu(oe))?isNaN(xp(oe).getDate())||(oe=ia(oe)):(oe=qu(oe),j!==null&&Up(j)&&(oe=m_(oe))),ee=!0;break;case"E":ne=!0;var Q=ep(G[F].slice(1),{r:x,c:S});D[x][S]=[D[x][S],Q];break;case"S":K=!0,D[x][S]=[D[x][S],"S5S"];break;case"G":break;case"R":J=parseInt(G[F].slice(1))-1;break;case"C":ce=parseInt(G[F].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}if(ee&&(D[x][S]&&D[x][S].length==2?D[x][S][0]=oe:D[x][S]=oe,j=null),K){if(ne)throw new Error("SYLK shared formula cannot have own formula");var Z=J>-1&&D[J][ce];if(!Z||!Z[1])throw new Error("SYLK shared formula cannot find base");D[x][S][1]=HH(Z[1],{r:x-J,c:S-ce})}break;case"F":var se=0;for(F=1;F<G.length;++F)switch(G[F].charAt(0)){case"X":S=parseInt(G[F].slice(1))-1,++se;break;case"Y":for(x=parseInt(G[F].slice(1))-1,M=D.length;M<=x;++M)D[M]=[];break;case"M":z=parseInt(G[F].slice(1))/20;break;case"F":break;case"G":break;case"P":j=R[parseInt(G[F].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(k=G[F].slice(1).split(" "),M=parseInt(k[0],10);M<=parseInt(k[1],10);++M)z=parseInt(k[2],10),T[M-1]=z===0?{hidden:!0}:{wch:z},sh(T[M-1]);break;case"C":S=parseInt(G[F].slice(1))-1,T[S]||(T[S]={});break;case"R":x=parseInt(G[F].slice(1))-1,E[x]||(E[x]={}),z>0?(E[x].hpt=z,E[x].hpx=wp(z)):z===0&&(E[x].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}se<1&&(j=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}}return E.length>0&&(P["!rows"]=E),T.length>0&&(P["!cols"]=T),g&&g.sheetRows&&(D=D.slice(0,g.sheetRows)),[D,P]}function i(p,g){var w=s(p,g),x=w[0],S=w[1],N=jp(x,g);return za(S).forEach(function(F){N[F]=S[F]}),N}function o(p,g){return Ah(i(p,g),g)}function l(p,g,w,x){var S="C;Y"+(w+1)+";X"+(x+1)+";K";switch(p.t){case"n":S+=p.v||0,p.f&&!p.F&&(S+=";E"+i4(p.f,{r:w,c:x}));break;case"b":S+=p.v?"TRUE":"FALSE";break;case"e":S+=p.w||p.v;break;case"d":S+='"'+(p.w||p.v)+'"';break;case"s":S+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function c(p,g){g.forEach(function(w,x){var S="F;W"+(x+1)+" "+(x+1)+" ";w.hidden?S+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=cx(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=ux(w.wpx)),typeof w.wch=="number"&&(S+=Math.round(w.wch))),S.charAt(S.length-1)!=" "&&p.push(S)})}function A(p,g){g.forEach(function(w,x){var S="F;";w.hidden?S+="M0;":w.hpt?S+="M"+20*w.hpt+";":w.hpx&&(S+="M"+20*dx(w.hpx)+";"),S.length>2&&p.push(S+"R"+(x+1))})}function h(p,g){var w=["ID;PWXL;N;E"],x=[],S=as(p["!ref"]),N,F=Array.isArray(p),D=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),p["!cols"]&&c(w,p["!cols"]),p["!rows"]&&A(w,p["!rows"]),w.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var R=S.s.r;R<=S.e.r;++R)for(var j=S.s.c;j<=S.e.c;++j){var P=Yn({r:R,c:j});N=F?(p[R]||[])[j]:p[P],!(!N||N.v==null&&(!N.f||N.F))&&x.push(l(N,p,R,j))}return w.join(D)+D+x.join(D)+D+"E"+D}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),CH=function(){function t(a,i){switch(i.type){case"base64":return e(Oc(a),i);case"binary":return e(a,i);case"buffer":return e(Fr&&Buffer.isBuffer(a)?a.toString("binary"):dh(a),i);case"array":return e(f0(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,c=-1,A=0,h=[];A!==o.length;++A){if(o[A].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var p=o[A].trim().split(","),g=p[0],w=p[1];++A;for(var x=o[A]||"";(x.match(/["]/g)||[]).length&1&&A<o.length-1;)x+=`
`+o[++A];switch(x=x.trim(),+g){case-1:if(x==="BOT"){h[++l]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?h[l][c]=!0:x==="FALSE"?h[l][c]=!1:isNaN(qu(w))?isNaN(xp(w).getDate())?h[l][c]=w:h[l][c]=ia(w):h[l][c]=qu(w),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),h[l][c++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function n(a,i){return jp(t(a,i),i)}function r(a,i){return Ah(n(a,i),i)}var s=function(){var a=function(l,c,A,h,p){l.push(c),l.push(A+","+h),l.push('"'+p.replace(/"/g,'""')+'"')},i=function(l,c,A,h){l.push(c+","+A),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],A=as(l["!ref"]),h,p=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,A.e.r-A.s.r+1,""),a(c,"TUPLES",0,A.e.c-A.s.c+1,""),a(c,"DATA",0,0,"");for(var g=A.s.r;g<=A.e.r;++g){i(c,-1,0,"BOT");for(var w=A.s.c;w<=A.e.c;++w){var x=Yn({r:g,c:w});if(h=p?(l[g]||[])[w]:l[x],!h){i(c,1,0,"");continue}switch(h.t){case"n":var S=h.w;!S&&h.v!=null&&(S=h.v),S==null?h.f&&!h.F?i(c,1,0,"="+h.f):i(c,1,0,""):i(c,0,S,"V");break;case"b":i(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=wu(h.z||qn[14],Oi(ia(h.v)))),i(c,0,h.w,"V");break;default:i(c,1,0,"")}}}i(c,-1,0,"EOD");var N=`\r
`,F=c.join(N);return F}}();return{to_workbook:r,to_sheet:n,from_sheet:s}}(),EH=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,p){for(var g=h.split(`
`),w=-1,x=-1,S=0,N=[];S!==g.length;++S){var F=g[S].trim().split(":");if(F[0]==="cell"){var D=_a(F[1]);if(N.length<=D.r)for(w=N.length;w<=D.r;++w)N[w]||(N[w]=[]);switch(w=D.r,x=D.c,F[2]){case"t":N[w][x]=t(F[3]);break;case"v":N[w][x]=+F[3];break;case"vtf":var R=F[F.length-1];case"vtc":switch(F[3]){case"nl":N[w][x]=!!+F[4];break;default:N[w][x]=+F[4];break}F[2]=="vtf"&&(N[w][x]=[N[w][x],R])}}}return p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),N}function r(h,p){return jp(n(h,p),p)}function s(h,p){return Ah(r(h,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var p=[],g=[],w,x="",S=oc(h["!ref"]),N=Array.isArray(h),F=S.s.r;F<=S.e.r;++F)for(var D=S.s.c;D<=S.e.c;++D)if(x=Yn({r:F,c:D}),w=N?(h[F]||[])[D]:h[x],!(!w||w.v==null||w.t==="z")){switch(g=["cell",x,"t"],w.t){case"s":case"str":g.push(e(w.v));break;case"n":w.f?(g[2]="vtf",g[3]="n",g[4]=w.v,g[5]=e(w.f)):(g[2]="v",g[3]=w.v);break;case"b":g[2]="vt"+(w.f?"f":"c"),g[3]="nl",g[4]=w.v?"1":"0",g[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var R=Oi(ia(w.v));g[2]="vtc",g[3]="nd",g[4]=""+R,g[5]=w.w||wu(w.z||qn[14],R);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function A(h){return[a,i,o,i,c(h),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:A}}(),yp=function(){function t(A,h,p,g,w){w.raw?h[p][g]=A:A===""||(A==="TRUE"?h[p][g]=!0:A==="FALSE"?h[p][g]=!1:isNaN(qu(A))?isNaN(xp(A).getDate())?h[p][g]=A:h[p][g]=ia(A):h[p][g]=qu(A))}function e(A,h){var p=h||{},g=[];if(!A||A.length===0)return g;for(var w=A.split(/[\r\n]/),x=w.length-1;x>=0&&w[x].length===0;)--x;for(var S=10,N=0,F=0;F<=x;++F)N=w[F].indexOf(" "),N==-1?N=w[F].length:N++,S=Math.max(S,N);for(F=0;F<=x;++F){g[F]=[];var D=0;for(t(w[F].slice(0,S).trim(),g,F,D,p),D=1;D<=(w[F].length-S)/10+1;++D)t(w[F].slice(S+(D-1)*10,S+D*10).trim(),g,F,D,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(A){for(var h={},p=!1,g=0,w=0;g<A.length;++g)(w=A.charCodeAt(g))==34?p=!p:!p&&w in n&&(h[w]=(h[w]||0)+1);w=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&w.push([h[g],g]);if(!w.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&w.push([h[g],g])}return w.sort(function(x,S){return x[0]-S[0]||r[x[1]]-r[S[1]]}),n[w.pop()[1]]||44}function a(A,h){var p=h||{},g="",w=p.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};A.slice(0,4)=="sep="?A.charCodeAt(5)==13&&A.charCodeAt(6)==10?(g=A.charAt(4),A=A.slice(7)):A.charCodeAt(5)==13||A.charCodeAt(5)==10?(g=A.charAt(4),A=A.slice(6)):g=s(A.slice(0,1024)):p&&p.FS?g=p.FS:g=s(A.slice(0,1024));var S=0,N=0,F=0,D=0,R=0,j=g.charCodeAt(0),P=!1,E=0,T=A.charCodeAt(0);A=A.replace(/\r\n/mg,`
`);var k=p.dateNF!=null?cae(p.dateNF):null;function z(){var M=A.slice(D,R),U={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)U.t="z";else if(p.raw)U.t="s",U.v=M;else if(M.trim().length===0)U.t="s",U.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(U.t="s",U.v=M.slice(2,-1).replace(/""/g,'"')):Uue(M)?(U.t="n",U.f=M.slice(1)):(U.t="s",U.v=M);else if(M=="TRUE")U.t="b",U.v=!0;else if(M=="FALSE")U.t="b",U.v=!1;else if(!isNaN(F=qu(M)))U.t="n",p.cellText!==!1&&(U.w=M),U.v=F;else if(!isNaN(xp(M).getDate())||k&&M.match(k)){U.z=p.dateNF||qn[14];var G=0;k&&M.match(k)&&(M=uae(M,p.dateNF,M.match(k)||[]),G=1),p.cellDates?(U.t="d",U.v=ia(M,G)):(U.t="n",U.v=Oi(ia(M,G))),p.cellText!==!1&&(U.w=wu(U.z,U.v instanceof Date?Oi(U.v):U.v)),p.cellNF||delete U.z}else U.t="s",U.v=M;if(U.t=="z"||(p.dense?(w[S]||(w[S]=[]),w[S][N]=U):w[Yn({c:N,r:S})]=U),D=R+1,T=A.charCodeAt(D),x.e.c<N&&(x.e.c=N),x.e.r<S&&(x.e.r=S),E==j)++N;else if(N=0,++S,p.sheetRows&&p.sheetRows<=S)return!0}e:for(;R<A.length;++R)switch(E=A.charCodeAt(R)){case 34:T===34&&(P=!P);break;case j:case 10:case 13:if(!P&&z())break e;break}return R-D>0&&z(),w["!ref"]=vr(x),w}function i(A,h){return!(h&&h.PRN)||h.FS||A.slice(0,4)=="sep="||A.indexOf("	")>=0||A.indexOf(",")>=0||A.indexOf(";")>=0?a(A,h):jp(e(A,h),h)}function o(A,h){var p="",g=h.type=="string"?[0,0,0,0]:h4(A,h);switch(h.type){case"base64":p=Oc(A);break;case"binary":p=A;break;case"buffer":h.codepage==65001?p=A.toString("utf8"):h.codepage&&typeof tx<"u"||(p=Fr&&Buffer.isBuffer(A)?A.toString("binary"):dh(A));break;case"array":p=f0(A);break;case"string":p=A;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=Ps(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=Ps(p):h.type=="binary"&&typeof tx<"u",p.slice(0,19)=="socialcalc:version:"?EH.to_sheet(h.type=="string"?p:Ps(p),h):i(p,h)}function l(A,h){return Ah(o(A,h),h)}function c(A){for(var h=[],p=as(A["!ref"]),g,w=Array.isArray(A),x=p.s.r;x<=p.e.r;++x){for(var S=[],N=p.s.c;N<=p.e.c;++N){var F=Yn({r:x,c:N});if(g=w?(A[x]||[])[N]:A[F],!g||g.v==null){S.push("          ");continue}for(var D=(g.w||(BA(g),g.w)||"").slice(0,10);D.length<10;)D+=" ";S.push(D+(N===0?" ":""))}h.push(S.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function Cle(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var s=_H.to_workbook(t,n);return n.WTF=r,s}catch(a){if(n.WTF=r,!a.message.match(/SYLK bad record ID/)&&r)throw a;return yp.to_workbook(t,e)}}var Zh=function(){function t(Q,Z,se){if(Q){To(Q,Q.l||0);for(var ie=se.Enum||J;Q.l<Q.length;){var fe=Q.read_shift(2),Se=ie[fe]||ie[65535],ge=Q.read_shift(2),xe=Q.l+ge,ve=Se.f&&Se.f(Q,ge,se);if(Q.l=xe,Z(ve,Se,fe))return}}}function e(Q,Z){switch(Z.type){case"base64":return n(Fc(Oc(Q)),Z);case"binary":return n(Fc(Q),Z);case"buffer":case"array":return n(Q,Z)}throw"Unsupported type "+Z.type}function n(Q,Z){if(!Q)return Q;var se=Z||{},ie=se.dense?[]:{},fe="Sheet1",Se="",ge=0,xe={},ve=[],me=[],he={s:{r:0,c:0},e:{r:0,c:0}},He=se.sheetRows||0;if(Q[2]==0&&(Q[3]==8||Q[3]==9)&&Q.length>=16&&Q[14]==5&&Q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Q[2]==2)se.Enum=J,t(Q,function(je,Ke,rt){switch(rt){case 0:se.vers=je,je>=4096&&(se.qpro=!0);break;case 6:he=je;break;case 204:je&&(Se=je);break;case 222:Se=je;break;case 15:case 51:se.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:rt==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=se.dateNF||qn[14],se.cellDates&&(je[1].t="d",je[1].v=m_(je[1].v))),se.qpro&&je[3]>ge&&(ie["!ref"]=vr(he),xe[fe]=ie,ve.push(fe),ie=se.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},ge=je[3],fe=Se||"Sheet"+(ge+1),Se="");var xt=se.dense?(ie[je[0].r]||[])[je[0].c]:ie[Yn(je[0])];if(xt){xt.t=je[1].t,xt.v=je[1].v,je[1].z!=null&&(xt.z=je[1].z),je[1].f!=null&&(xt.f=je[1].f);break}se.dense?(ie[je[0].r]||(ie[je[0].r]=[]),ie[je[0].r][je[0].c]=je[1]):ie[Yn(je[0])]=je[1];break}},se);else if(Q[2]==26||Q[2]==14)se.Enum=ce,Q[2]==14&&(se.qpro=!0,Q.l=0),t(Q,function(je,Ke,rt){switch(rt){case 204:fe=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>ge&&(ie["!ref"]=vr(he),xe[fe]=ie,ve.push(fe),ie=se.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},ge=je[3],fe="Sheet"+(ge+1)),He>0&&je[0].r>=He)break;se.dense?(ie[je[0].r]||(ie[je[0].r]=[]),ie[je[0].r][je[0].c]=je[1]):ie[Yn(je[0])]=je[1],he.e.c<je[0].c&&(he.e.c=je[0].c),he.e.r<je[0].r&&(he.e.r=je[0].r);break;case 27:je[14e3]&&(me[je[14e3][0]]=je[14e3][1]);break;case 1537:me[je[0]]=je[1],je[0]==ge&&(fe=je[1]);break}},se);else throw new Error("Unrecognized LOTUS BOF "+Q[2]);if(ie["!ref"]=vr(he),xe[Se||fe]=ie,ve.push(Se||fe),!me.length)return{SheetNames:ve,Sheets:xe};for(var et={},Ue=[],Ie=0;Ie<me.length;++Ie)xe[ve[Ie]]?(Ue.push(me[Ie]||ve[Ie]),et[me[Ie]]=xe[me[Ie]]||xe[ve[Ie]]):(Ue.push(me[Ie]),et[me[Ie]]={"!ref":"A1"});return{SheetNames:Ue,Sheets:et}}function r(Q,Z){var se=Z||{};if(+se.codepage>=0&&zu(+se.codepage),se.type=="string")throw new Error("Cannot write WK1 to JS string");var ie=ac(),fe=as(Q["!ref"]),Se=Array.isArray(Q),ge=[];Zt(ie,0,a(1030)),Zt(ie,6,l(fe));for(var xe=Math.min(fe.e.r,8191),ve=fe.s.r;ve<=xe;++ve)for(var me=ii(ve),he=fe.s.c;he<=fe.e.c;++he){ve===fe.s.r&&(ge[he]=ba(he));var He=ge[he]+me,et=Se?(Q[ve]||[])[he]:Q[He];if(!(!et||et.t=="z"))if(et.t=="n")(et.v|0)==et.v&&et.v>=-32768&&et.v<=32767?Zt(ie,13,g(ve,he,et.v)):Zt(ie,14,x(ve,he,et.v));else{var Ue=BA(et);Zt(ie,15,h(ve,he,Ue.slice(0,239)))}}return Zt(ie,1),ie.end()}function s(Q,Z){var se=Z||{};if(+se.codepage>=0&&zu(+se.codepage),se.type=="string")throw new Error("Cannot write WK3 to JS string");var ie=ac();Zt(ie,0,i(Q));for(var fe=0,Se=0;fe<Q.SheetNames.length;++fe)(Q.Sheets[Q.SheetNames[fe]]||{})["!ref"]&&Zt(ie,27,ne(Q.SheetNames[fe],Se++));var ge=0;for(fe=0;fe<Q.SheetNames.length;++fe){var xe=Q.Sheets[Q.SheetNames[fe]];if(!(!xe||!xe["!ref"])){for(var ve=as(xe["!ref"]),me=Array.isArray(xe),he=[],He=Math.min(ve.e.r,8191),et=ve.s.r;et<=He;++et)for(var Ue=ii(et),Ie=ve.s.c;Ie<=ve.e.c;++Ie){et===ve.s.r&&(he[Ie]=ba(Ie));var je=he[Ie]+Ue,Ke=me?(xe[et]||[])[Ie]:xe[je];if(!(!Ke||Ke.t=="z"))if(Ke.t=="n")Zt(ie,23,z(et,Ie,ge,Ke.v));else{var rt=BA(Ke);Zt(ie,22,E(et,Ie,ge,rt.slice(0,239)))}}++ge}}return Zt(ie,1),ie.end()}function a(Q){var Z=wt(2);return Z.write_shift(2,Q),Z}function i(Q){var Z=wt(26);Z.write_shift(2,4096),Z.write_shift(2,4),Z.write_shift(4,0);for(var se=0,ie=0,fe=0,Se=0;Se<Q.SheetNames.length;++Se){var ge=Q.SheetNames[Se],xe=Q.Sheets[ge];if(!(!xe||!xe["!ref"])){++fe;var ve=oc(xe["!ref"]);se<ve.e.r&&(se=ve.e.r),ie<ve.e.c&&(ie=ve.e.c)}}return se>8191&&(se=8191),Z.write_shift(2,se),Z.write_shift(1,fe),Z.write_shift(1,ie),Z.write_shift(2,0),Z.write_shift(2,0),Z.write_shift(1,1),Z.write_shift(1,2),Z.write_shift(4,0),Z.write_shift(4,0),Z}function o(Q,Z,se){var ie={s:{c:0,r:0},e:{c:0,r:0}};return Z==8&&se.qpro?(ie.s.c=Q.read_shift(1),Q.l++,ie.s.r=Q.read_shift(2),ie.e.c=Q.read_shift(1),Q.l++,ie.e.r=Q.read_shift(2),ie):(ie.s.c=Q.read_shift(2),ie.s.r=Q.read_shift(2),Z==12&&se.qpro&&(Q.l+=2),ie.e.c=Q.read_shift(2),ie.e.r=Q.read_shift(2),Z==12&&se.qpro&&(Q.l+=2),ie.s.c==65535&&(ie.s.c=ie.e.c=ie.s.r=ie.e.r=0),ie)}function l(Q){var Z=wt(8);return Z.write_shift(2,Q.s.c),Z.write_shift(2,Q.s.r),Z.write_shift(2,Q.e.c),Z.write_shift(2,Q.e.r),Z}function c(Q,Z,se){var ie=[{c:0,r:0},{t:"n",v:0},0,0];return se.qpro&&se.vers!=20768?(ie[0].c=Q.read_shift(1),ie[3]=Q.read_shift(1),ie[0].r=Q.read_shift(2),Q.l+=2):(ie[2]=Q.read_shift(1),ie[0].c=Q.read_shift(2),ie[0].r=Q.read_shift(2)),ie}function A(Q,Z,se){var ie=Q.l+Z,fe=c(Q,Z,se);if(fe[1].t="s",se.vers==20768){Q.l++;var Se=Q.read_shift(1);return fe[1].v=Q.read_shift(Se,"utf8"),fe}return se.qpro&&Q.l++,fe[1].v=Q.read_shift(ie-Q.l,"cstr"),fe}function h(Q,Z,se){var ie=wt(7+se.length);ie.write_shift(1,255),ie.write_shift(2,Z),ie.write_shift(2,Q),ie.write_shift(1,39);for(var fe=0;fe<ie.length;++fe){var Se=se.charCodeAt(fe);ie.write_shift(1,Se>=128?95:Se)}return ie.write_shift(1,0),ie}function p(Q,Z,se){var ie=c(Q,Z,se);return ie[1].v=Q.read_shift(2,"i"),ie}function g(Q,Z,se){var ie=wt(7);return ie.write_shift(1,255),ie.write_shift(2,Z),ie.write_shift(2,Q),ie.write_shift(2,se,"i"),ie}function w(Q,Z,se){var ie=c(Q,Z,se);return ie[1].v=Q.read_shift(8,"f"),ie}function x(Q,Z,se){var ie=wt(13);return ie.write_shift(1,255),ie.write_shift(2,Z),ie.write_shift(2,Q),ie.write_shift(8,se,"f"),ie}function S(Q,Z,se){var ie=Q.l+Z,fe=c(Q,Z,se);if(fe[1].v=Q.read_shift(8,"f"),se.qpro)Q.l=ie;else{var Se=Q.read_shift(2);R(Q.slice(Q.l,Q.l+Se),fe),Q.l+=Se}return fe}function N(Q,Z,se){var ie=Z&32768;return Z&=-32769,Z=(ie?Q:0)+(Z>=8192?Z-16384:Z),(ie?"":"$")+(se?ba(Z):ii(Z))}var F={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},D=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function R(Q,Z){To(Q,0);for(var se=[],ie=0,fe="",Se="",ge="",xe="";Q.l<Q.length;){var ve=Q[Q.l++];switch(ve){case 0:se.push(Q.read_shift(8,"f"));break;case 1:Se=N(Z[0].c,Q.read_shift(2),!0),fe=N(Z[0].r,Q.read_shift(2),!1),se.push(Se+fe);break;case 2:{var me=N(Z[0].c,Q.read_shift(2),!0),he=N(Z[0].r,Q.read_shift(2),!1);Se=N(Z[0].c,Q.read_shift(2),!0),fe=N(Z[0].r,Q.read_shift(2),!1),se.push(me+he+":"+Se+fe)}break;case 3:if(Q.l<Q.length){console.error("WK1 premature formula end");return}break;case 4:se.push("("+se.pop()+")");break;case 5:se.push(Q.read_shift(2));break;case 6:{for(var He="";ve=Q[Q.l++];)He+=String.fromCharCode(ve);se.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:se.push("-"+se.pop());break;case 23:se.push("+"+se.pop());break;case 22:se.push("NOT("+se.pop()+")");break;case 20:case 21:xe=se.pop(),ge=se.pop(),se.push(["AND","OR"][ve-20]+"("+ge+","+xe+")");break;default:if(ve<32&&D[ve])xe=se.pop(),ge=se.pop(),se.push(ge+D[ve]+xe);else if(F[ve]){if(ie=F[ve][1],ie==69&&(ie=Q[Q.l++]),ie>se.length){console.error("WK1 bad formula parse 0x"+ve.toString(16)+":|"+se.join("|")+"|");return}var et=se.slice(-ie);se.length-=ie,se.push(F[ve][0]+"("+et.join(",")+")")}else return ve<=7?console.error("WK1 invalid opcode "+ve.toString(16)):ve<=24?console.error("WK1 unsupported op "+ve.toString(16)):ve<=30?console.error("WK1 invalid opcode "+ve.toString(16)):ve<=115?console.error("WK1 unsupported function opcode "+ve.toString(16)):console.error("WK1 unrecognized opcode "+ve.toString(16))}}se.length==1?Z[1].f=""+se[0]:console.error("WK1 bad formula parse |"+se.join("|")+"|")}function j(Q){var Z=[{c:0,r:0},{t:"n",v:0},0];return Z[0].r=Q.read_shift(2),Z[3]=Q[Q.l++],Z[0].c=Q[Q.l++],Z}function P(Q,Z){var se=j(Q);return se[1].t="s",se[1].v=Q.read_shift(Z-4,"cstr"),se}function E(Q,Z,se,ie){var fe=wt(6+ie.length);fe.write_shift(2,Q),fe.write_shift(1,se),fe.write_shift(1,Z),fe.write_shift(1,39);for(var Se=0;Se<ie.length;++Se){var ge=ie.charCodeAt(Se);fe.write_shift(1,ge>=128?95:ge)}return fe.write_shift(1,0),fe}function T(Q,Z){var se=j(Q);se[1].v=Q.read_shift(2);var ie=se[1].v>>1;if(se[1].v&1)switch(ie&7){case 0:ie=(ie>>3)*5e3;break;case 1:ie=(ie>>3)*500;break;case 2:ie=(ie>>3)/20;break;case 3:ie=(ie>>3)/200;break;case 4:ie=(ie>>3)/2e3;break;case 5:ie=(ie>>3)/2e4;break;case 6:ie=(ie>>3)/16;break;case 7:ie=(ie>>3)/64;break}return se[1].v=ie,se}function k(Q,Z){var se=j(Q),ie=Q.read_shift(4),fe=Q.read_shift(4),Se=Q.read_shift(2);if(Se==65535)return ie===0&&fe===3221225472?(se[1].t="e",se[1].v=15):ie===0&&fe===3489660928?(se[1].t="e",se[1].v=42):se[1].v=0,se;var ge=Se&32768;return Se=(Se&32767)-16446,se[1].v=(1-ge*2)*(fe*Math.pow(2,Se+32)+ie*Math.pow(2,Se)),se}function z(Q,Z,se,ie){var fe=wt(14);if(fe.write_shift(2,Q),fe.write_shift(1,se),fe.write_shift(1,Z),ie==0)return fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(2,65535),fe;var Se=0,ge=0,xe=0,ve=0;return ie<0&&(Se=1,ie=-ie),ge=Math.log2(ie)|0,ie/=Math.pow(2,ge-31),ve=ie>>>0,(ve&2147483648)==0&&(ie/=2,++ge,ve=ie>>>0),ie-=ve,ve|=2147483648,ve>>>=0,ie*=Math.pow(2,32),xe=ie>>>0,fe.write_shift(4,xe),fe.write_shift(4,ve),ge+=16383+(Se?32768:0),fe.write_shift(2,ge),fe}function M(Q,Z){var se=k(Q);return Q.l+=Z-14,se}function U(Q,Z){var se=j(Q),ie=Q.read_shift(4);return se[1].v=ie>>6,se}function G(Q,Z){var se=j(Q),ie=Q.read_shift(8,"f");return se[1].v=ie,se}function q(Q,Z){var se=G(Q);return Q.l+=Z-10,se}function oe(Q,Z){return Q[Q.l+Z-1]==0?Q.read_shift(Z,"cstr"):""}function ee(Q,Z){var se=Q[Q.l++];se>Z-1&&(se=Z-1);for(var ie="";ie.length<se;)ie+=String.fromCharCode(Q[Q.l++]);return ie}function le(Q,Z,se){if(!(!se.qpro||Z<21)){var ie=Q.read_shift(1);Q.l+=17,Q.l+=1,Q.l+=2;var fe=Q.read_shift(Z-21,"cstr");return[ie,fe]}}function K(Q,Z){for(var se={},ie=Q.l+Z;Q.l<ie;){var fe=Q.read_shift(2);if(fe==14e3){for(se[fe]=[0,""],se[fe][0]=Q.read_shift(2);Q[Q.l];)se[fe][1]+=String.fromCharCode(Q[Q.l]),Q.l++;Q.l++}}return se}function ne(Q,Z){var se=wt(5+Q.length);se.write_shift(2,14e3),se.write_shift(2,Z);for(var ie=0;ie<Q.length;++ie){var fe=Q.charCodeAt(ie);se[se.l++]=fe>127?95:fe}return se[se.l++]=0,se}var J={0:{n:"BOF",f:yi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:A},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:A},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:oe},222:{n:"SHEETNAMELP",f:ee},65535:{n:""}},ce={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:k},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:G},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:oe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:le},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}();function Ele(t){var e={},n=t.match(dl),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=tr(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=IB[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var Sle=function(){var t=sx("t"),e=sx("rPr");function n(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:ss(i[1])},l=a.match(e);return l&&(o.s=Ele(l[1])),o}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(r,"").split(s).map(n).filter(function(o){return o.v})}}(),Tle=function(){var e=/(\r\n|\n)/g;function n(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function r(s){var a=[[],s.v,[]];return s.v?(s.s&&n(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(r).join("")}}(),Nle=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Ble=/<(?:\w+:)?r>/,kle=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function t4(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=ss(Ps(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Ps(t),n&&(r.h=HB(r.t))):t.match(Ble)&&(r.r=Ps(t),r.t=ss(Ps((t.replace(kle,"").match(Nle)||[]).join("").replace(dl,""))),n&&(r.h=Tle(Sle(r.r)))),r):{t:""}}var Ile=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Fle=/<(?:\w+:)?(?:si|sstItem)>/g,Dle=/<\/(?:\w+:)?(?:si|sstItem)>/;function Lle(t,e){var n=[],r="";if(!t)return n;var s=t.match(Ile);if(s){r=s[2].replace(Fle,"").split(Dle);for(var a=0;a!=r.length;++a){var i=t4(r[a].trim(),e);i!=null&&(n[n.length]=i)}s=tr(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}var Rle=/^\s|\s$|[\t\n\r]/;function SH(t,e){if(!e.bookSST)return"";var n=[oi];n[n.length]=Xt("sst",null,{xmlns:S0[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var s=t[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Rle)&&(a+=' xml:space="preserve"'),a+=">"+ks(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Ple(t){return[t.read_shift(4),t.read_shift(4)]}function Mle(t,e){var n=[],r=!1;return PA(t,function(a,i,o){switch(o){case 159:n.Count=a[0],n.Unique=a[1];break;case 19:n.push(a);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Ule(t,e){return e||(e=wt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Ole=Wae;function jle(t){var e=ac();Mt(e,159,Ule(t));for(var n=0;n<t.length;++n)Mt(e,19,Ole(t[n]));return Mt(e,160),e.end()}function TH(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function yA(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function Hle(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=yA(t,4),e.U=yA(t,4),e.W=yA(t,4),e}function Qle(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=a,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function Vle(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(Qle(t));return e}function zle(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Gle(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=yA(t,4),e.U=yA(t,4),e.W=yA(t,4),e}function qle(t){var e=Gle(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function NH(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=r.Flags==36;break;case 26625:s=r.Flags==4;break;case 0:s=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function BH(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function Kle(t){var e=yA(t);switch(e.Minor){case 2:return[e.Minor,$le(t)];case 3:return[e.Minor,Wle()];case 4:return[e.Minor,Yle(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function $le(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=NH(t,n),s=BH(t,t.length-t.l);return{t:"Std",h:r,v:s}}function Wle(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Yle(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(dl,function(a){var i=tr(a);switch(zd(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=i[o]});break;case"<dataIntegrity":r.encryptedHmacKey=i.encryptedHmacKey,r.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(i);break;default:throw i[0]}}),r}function Xle(t,e){var n={},r=n.EncryptionVersionInfo=yA(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,n.EncryptionHeader=NH(t,s),e-=s,n.EncryptionVerifier=BH(t,e),n}function Jle(t){var e={},n=e.EncryptionVersionInfo=yA(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function n4(t){var e=0,n,r=TH(t),s=r.length+1,a,i,o,l,c;for(n=rh(s),n[0]=r.length,a=1;a!=s;++a)n[a]=r[a-1];for(a=s-1;a>=0;--a)i=n[a],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^i;return e^52811}var kH=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(i){return(i/2|i*128)&255},s=function(i,o){return r(i^o)},a=function(i){for(var o=e[i.length-1],l=104,c=i.length-1;c>=0;--c)for(var A=i[c],h=0;h!=7;++h)A&64&&(o^=n[l]),A*=2,--l;return o};return function(i){for(var o=TH(i),l=a(o),c=o.length,A=rh(16),h=0;h!=16;++h)A[h]=0;var p,g,w;for((c&1)===1&&(p=l>>8,A[c]=s(t[0],p),--c,p=l&255,g=o[o.length-1],A[c]=s(g,p));c>0;)--c,p=l>>8,A[c]=s(o[c],p),--c,p=l&255,A[c]=s(o[c],p);for(c=15,w=15-o.length;w>0;)p=l>>8,A[c]=s(t[w],p),--c,--w,p=l&255,A[c]=s(o[c],p),--c,--w;return A}}(),Zle=function(t,e,n,r,s){s||(s=e),r||(r=kH(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=r[n],i=(i>>5|i<<3)&255,s[a]=i,++n;return[s,n,r]},ece=function(t){var e=0,n=kH(t);return function(r){var s=Zle("",r,e,n);return e=s[1],s[0]}};function tce(t,e,n,r){var s={key:yi(t),verificationBytes:yi(t)};return n.password&&(s.verifier=n4(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=ece(n.password)),s}function nce(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=Jle(t):r.Data=Xle(t,e),r}function rce(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?nce(t,e-2,r):tce(t,n.biff>=8?e:e-2,n,r),r}var IH=function(){function t(s,a){switch(a.type){case"base64":return e(Oc(s),a);case"binary":return e(s,a);case"buffer":return e(Fr&&Buffer.isBuffer(s)?s.toString("binary"):dh(s),a);case"array":return e(f0(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(A,h){Array.isArray(o)&&(o[h]=[]);for(var p=/\\\w+\b/g,g=0,w,x=-1;w=p.exec(A);){switch(w[0]){case"\\cell":var S=A.slice(g,p.lastIndex-w[0].length);if(S[0]==" "&&(S=S.slice(1)),++x,S.length){var N={v:S,t:"s"};Array.isArray(o)?o[h][x]=N:o[Yn({r:h,c:x})]=N}break}g=p.lastIndex}x>c.e.c&&(c.e.c=x)}),o["!ref"]=vr(c),o}function n(s,a){return Ah(t(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],i=as(s["!ref"]),o,l=Array.isArray(s),c=i.s.r;c<=i.e.r;++c){a.push("\\trowd\\trautofit1");for(var A=i.s.c;A<=i.e.c;++A)a.push("\\cellx"+(A+1));for(a.push("\\pard\\intbl"),A=i.s.c;A<=i.e.c;++A){var h=Yn({r:c,c:A});o=l?(s[c]||[])[A]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(BA(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function sce(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function lx(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function ace(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,c=s+a;switch(l=i/(c>1?2-c:c),s){case e:o=((n-r)/i+6)%6;break;case n:o=(r-e)/i+2;break;case r:o=(e-n)/i+4;break}return[o/6,l,c/2]}function ice(t){var e=t[0],n=t[1],r=t[2],s=n*2*(r<.5?r:1-r),a=r-s/2,i=[a,a,a],o=6*e,l;if(n!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var c=0;c!=3;++c)i[c]=Math.round(i[c]*255);return i}function q2(t,e){if(e===0)return t;var n=ace(sce(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),lx(ice(n))}var FH=6,oce=15,lce=1,nl=FH;function cx(t){return Math.floor((t+Math.round(128/nl)/256)*nl)}function ux(t){return Math.floor((t-5)/nl*100+.5)/100}function K2(t){return Math.round((t*nl+5)/nl*256)/256}function XE(t){return K2(ux(cx(t)))}function r4(t){var e=Math.abs(t-XE(t)),n=nl;if(e>.005)for(nl=lce;nl<oce;++nl)Math.abs(t-XE(t))<=e&&(e=Math.abs(t-XE(t)),n=nl);nl=n}function sh(t){t.width?(t.wpx=cx(t.width),t.wch=ux(t.wpx),t.MDW=nl):t.wpx?(t.wch=ux(t.wpx),t.width=K2(t.wch),t.MDW=nl):typeof t.wch=="number"&&(t.width=K2(t.wch),t.wpx=cx(t.width),t.MDW=nl),t.customWidth&&delete t.customWidth}var cce=96,DH=cce;function dx(t){return t*96/DH}function wp(t){return t*DH/96}var uce={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function dce(t,e,n,r){e.Borders=[];var s={},a=!1;(t[0].match(dl)||[]).forEach(function(i){var o=tr(i);switch(zd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=sa(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=sa(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Ace(t,e,n,r){e.Fills=[];var s={},a=!1;(t[0].match(dl)||[]).forEach(function(i){var o=tr(i);switch(zd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function fce(t,e,n,r){e.Fonts=[];var s={},a=!1;(t[0].match(dl)||[]).forEach(function(i){var o=tr(i);switch(zd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Ps(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?sa(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?sa(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?sa(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?sa(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?sa(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?sa(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?sa(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=IB[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=sa(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=Xh[s.color.index];s.color.index==81&&(l=Xh[1]),l||(l=Xh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=q2(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function hce(t,e,n){e.NumberFmt=[];for(var r=za(qn),s=0;s<r.length;++s)e.NumberFmt[r[s]]=qn[r[s]];var a=t[0].match(dl);if(a)for(s=0;s<a.length;++s){var i=tr(a[s]);switch(zd(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=ss(Ps(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}xA(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function mce(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Xt("numFmt",null,{numFmtId:r,formatCode:ks(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Xt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Ny=["numFmtId","fillId","fontId","borderId","xfId"],By=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function pce(t,e,n){e.CellXf=[];var r,s=!1;(t[0].match(dl)||[]).forEach(function(a){var i=tr(a),o=0;switch(zd(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=i,delete r[0],o=0;o<Ny.length;++o)r[Ny[o]]&&(r[Ny[o]]=parseInt(r[Ny[o]],10));for(o=0;o<By.length;++o)r[By[o]]&&(r[By[o]]=sa(r[By[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=sa(i.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function gce(t){var e=[];return e[e.length]=Xt("cellXfs",null),t.forEach(function(n){e[e.length]=Xt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Xt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var vce=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var A={};if(!o)return A;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&hce(h,A,c),(h=o.match(s))&&fce(h,A,l,c),(h=o.match(r))&&Ace(h,A,l,c),(h=o.match(a))&&dce(h,A,l,c),(h=o.match(n))&&pce(h,A,c),A}}();function LH(t,e){var n=[oi,Xt("styleSheet",null,{xmlns:S0[0],"xmlns:vt":Mi.vt})],r;return t.SSF&&(r=mce(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=gce(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function xce(t,e){var n=t.read_shift(2),r=ol(t);return[n,r]}function yce(t,e,n){n||(n=wt(6+4*e.length)),n.write_shift(2,t),so(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function wce(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=nie(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=tie(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ol(t),r}function bce(t,e){e||(e=wt(153)),e.write_shift(2,t.sz*20),rie(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),V2(t.color,e);var r=0;return r=2,e.write_shift(1,r),so(t.name,e),e.length>e.l?e.slice(0,e.l):e}var _ce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],JE,Cce=cl;function ZL(t,e){e||(e=wt(84)),JE||(JE=f_(_ce));var n=JE[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(V2({auto:1},e),V2({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Ece(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}function RH(t,e,n){n||(n=wt(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Lg(t,e){return e||(e=wt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Sce=cl;function Tce(t,e){return e||(e=wt(51)),e.write_shift(1,0),Lg(null,e),Lg(null,e),Lg(null,e),Lg(null,e),Lg(null,e),e.length>e.l?e.slice(0,e.l):e}function Nce(t,e){return e||(e=wt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Q2(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Bce(t,e,n){var r=wt(2052);return r.write_shift(4,t),Q2(e,r),Q2(n,r),r.length>r.l?r.slice(0,r.l):r}function kce(t,e,n){var r={};r.NumberFmt=[];for(var s in qn)r.NumberFmt[s]=qn[s];r.CellXf=[],r.Fonts=[];var a=[],i=!1;return PA(t,function(l,c,A){switch(A){case 44:r.NumberFmt[l[0]]=l[1],xA(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=q2(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(A),i=!0;break;case 38:a.pop(),i=!1;break;default:if(c.T>0)a.push(A);else if(c.T<0)a.pop();else if(!i||n.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+A.toString(16))}}),r}function Ice(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++n}),n!=0&&(Mt(t,615,Ku(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Mt(t,44,yce(s,e[s]))}),Mt(t,616))}}function Fce(t){var e=1;Mt(t,611,Ku(e)),Mt(t,43,bce({sz:12,color:{theme:1},name:"Calibri",family:2})),Mt(t,612)}function Dce(t){var e=2;Mt(t,603,Ku(e)),Mt(t,45,ZL({patternType:"none"})),Mt(t,45,ZL({patternType:"gray125"})),Mt(t,604)}function Lce(t){var e=1;Mt(t,613,Ku(e)),Mt(t,46,Tce()),Mt(t,614)}function Rce(t){var e=1;Mt(t,626,Ku(e)),Mt(t,47,RH({numFmtId:0},65535)),Mt(t,627)}function Pce(t,e){Mt(t,617,Ku(e.length)),e.forEach(function(n){Mt(t,47,RH(n,0))}),Mt(t,618)}function Mce(t){var e=1;Mt(t,619,Ku(e)),Mt(t,48,Nce({xfId:0,name:"Normal"})),Mt(t,620)}function Uce(t){var e=0;Mt(t,505,Ku(e)),Mt(t,506)}function Oce(t){var e=0;Mt(t,508,Bce(e,"TableStyleMedium9","PivotStyleMedium4")),Mt(t,509)}function jce(t,e){var n=ac();return Mt(n,278),Ice(n,t.SSF),Fce(n),Dce(n),Lce(n),Rce(n),Pce(n,e.cellXfs),Mce(n),Uce(n),Oce(n),Mt(n,279),n.end()}var Hce=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Qce(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(dl)||[]).forEach(function(s){var a=tr(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[Hce.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Vce(){}function zce(){}var Gce=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,qce=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Kce=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function $ce(t,e,n){e.themeElements={};var r;[["clrScheme",Gce,Qce],["fontScheme",qce,Vce],["fmtScheme",Kce,zce]].forEach(function(s){if(!(r=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,e,n)})}var Wce=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function PH(t,e){(!t||t.length===0)&&(t=s4());var n,r={};if(!(n=t.match(Wce)))throw new Error("themeElements not found in theme");return $ce(n[0],r,e),r.raw=t,r}function s4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[oi];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Yce(t,e,n){var r=t.l+e,s=t.read_shift(4);if(s!==124226){if(!n.cellStyles){t.l=r;return}var a=t.slice(t.l);t.l=r;var i;try{i=N7(a,{type:"array"})}catch{return}var o=Dc(i,"theme/theme/theme1.xml",!0);if(o)return PH(o,n)}}function Xce(t){return t.read_shift(4)}function Jce(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Zce(t,4);break;case 2:e.xclrValue=mH(t);break;case 3:e.xclrValue=Xce(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Zce(t,e){return cl(t,e)}function eue(t,e){return cl(t,e)}function tue(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=Jce(t);break;case 6:r[1]=eue(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function nue(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(tue(t,n-t.l));return{ixfe:r,ext:a}}function rue(t,e){e.forEach(function(n){n[0]})}function sue(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ol(t)}}function aue(t){var e=wt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),so(t.name,e),e.slice(0,e.l)}function iue(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function oue(t){var e=wt(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function lue(t,e){var n=wt(8+2*e.length);return n.write_shift(4,t),so(e,n),n.slice(0,n.l)}function cue(t){return t.l+=4,t.read_shift(4)!=0}function uue(t,e){var n=wt(8);return n.write_shift(4,t),n.write_shift(4,1),n}function due(t,e,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],i=!1,o=2;return PA(t,function(l,c,A){switch(A){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?r.Cell.push({type:r.Types[h[0]-1].name,index:h[1]}):o==0&&r.Value.push({type:r.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(A),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!c.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+A.toString(16))}}}),r}function Aue(){var t=ac();return Mt(t,332),Mt(t,334,Ku(1)),Mt(t,335,aue({name:"XLDAPR",version:12e4,flags:3496657072})),Mt(t,336),Mt(t,339,lue(1,"XLDAPR")),Mt(t,52),Mt(t,35,Ku(514)),Mt(t,4096,Ku(0)),Mt(t,4097,uu(1)),Mt(t,36),Mt(t,53),Mt(t,340),Mt(t,337,uue(1)),Mt(t,51,oue([[1,0]])),Mt(t,338),Mt(t,333),t.end()}function fue(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var s=!1,a=2,i;return t.replace(dl,function(o){var l=tr(o);switch(zd(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<r.Types.length;++c)r.Types[c].name==l.name&&(i=r.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):a==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function MH(){var t=[oi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function hue(t){var e=[];if(!t)return e;var n=1;return(t.match(dl)||[]).forEach(function(r){var s=tr(r);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?n=s.i:s.i=n,e.push(s);break}}),e}function mue(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=Yn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function pue(t,e,n){var r=[];return PA(t,function(a,i,o){switch(o){case 63:r.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function gue(t,e,n,r){if(!t)return t;var s=r||{},a=!1;PA(t,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},s)}function vue(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}var Mm=1024;function UH(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[Xt("xml",null,{"xmlns:v":kc.v,"xmlns:o":kc.o,"xmlns:x":kc.x,"xmlns:mv":kc.mv}).replace(/\/>/,">"),Xt("o:shapelayout",Xt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Xt("v:shapetype",[Xt("v:stroke",null,{joinstyle:"miter"}),Xt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Mm<t*1e3;)Mm+=1e3;return e.forEach(function(a){var i=_a(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Xt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=Xt("v:fill",l,o),A={on:"t",obscured:"t"};++Mm,s=s.concat(["<v:shape"+ax({id:"_x0000_s"+Mm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,Xt("v:shadow",null,A),Xt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Bo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Bo("x:AutoFill","False"),Bo("x:Row",String(i.r)),Bo("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function eR(t,e,n,r){var s=Array.isArray(t),a;e.forEach(function(i){var o=_a(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=as(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=vr(l);c!==t["!ref"]&&(t["!ref"]=c)}a.c||(a.c=[]);var A={a:i.author,t:i.t,r:i.r,T:n};i.h&&(A.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!n&&a.c[h].T)return;n&&!a.c[h].T&&a.c.splice(h,1)}if(n&&r){for(h=0;h<r.length;++h)if(A.a==r[h].id){A.a=r[h].name||A.a;break}}a.c.push(A)})}function xue(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&n.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=tr(o[0]),c={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},A=_a(l.ref);if(!(e.sheetRows&&e.sheetRows<=A.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!h&&!!h[1]&&t4(h[1])||{r:"",t:"",h:""};c.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),c.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(c.h=p.h),r.push(c)}}}}),r}function OH(t){var e=[oi,Xt("comments",null,{xmlns:S0[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(s){var a=ks(s.a);n.indexOf(a)==-1&&(n.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var s=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=n.indexOf(ks(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(Bo("t",ks(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(Bo("t",ks(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function yue(t,e){var n=[],r=!1,s={},a=0;return t.replace(dl,function(o,l){var c=tr(o);switch(zd(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":s.t!=null&&n.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),n}function wue(t,e,n){var r=[oi,Xt("ThreadedComments",null,{xmlns:Mi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(Xt("threadedComment",Bo("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function bue(t,e){var n=[],r=!1;return t.replace(dl,function(a){var i=tr(a);switch(zd(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),n}function _ue(t){var e=[oi,Xt("personList",null,{xmlns:Mi.TCMNT,"xmlns:x":S0[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Xt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Cue(t){var e={};e.iauthor=t.read_shift(4);var n=k0(t);return e.rfx=n.s,e.ref=Yn(n.s),t.l+=16,e}function Eue(t,e){return e==null&&(e=wt(36)),e.write_shift(4,t[1].iauthor),Hp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Sue=ol;function Tue(t){return so(t.slice(0,54))}function Nue(t,e){var n=[],r=[],s={},a=!1;return PA(t,function(o,l,c){switch(c){case 632:r.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),n}function Bue(t){var e=ac(),n=[];return Mt(e,628),Mt(e,630),t.forEach(function(r){r[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),Mt(e,632,Tue(s.a)))})}),Mt(e,631),Mt(e,633),t.forEach(function(r){r[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var a={s:_a(r[0]),e:_a(r[0])};Mt(e,635,Eue([a,s])),s.t&&s.t.length>0&&Mt(e,637,Xae(s)),Mt(e,636),delete s.iauthor})}),Mt(e,634),Mt(e,629),e.end()}var kue="application/vnd.ms-office.vbaProject";function Iue(t){var e=Bn.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Bn.utils.cfb_add(e,s,t.FileIndex[r].content)}}),Bn.write(e)}function Fue(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Bn.utils.cfb_add(t,s,e.FileIndex[r].content)}})}var jH=["xlsb","xlsm","xlam","biff8","xla"];function Due(){return{"!type":"dialog"}}function Lue(){return{"!type":"dialog"}}function Rue(){return{"!type":"macro"}}function Pue(){return{"!type":"macro"}}var ep=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,A=i.length>0?parseInt(i,10)|0:0;return o?A+=e.c:--A,l?c+=e.r:--c,s+(o?"":"$")+ba(A)+(l?"":"$")+ii(c)}return function(s,a){return e=a,s.replace(t,n)}}(),a4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,i4=function(){return function(e,n){return e.replace(a4,function(r,s,a,i,o,l){var c=qB(i)-(a?0:n.c),A=GB(l)-(o?0:n.r),h=A==0?"":o?A+1:"["+A+"]",p=c==0?"":a?c+1:"["+c+"]";return s+"R"+h+"C"+p})}}();function HH(t,e){return t.replace(a4,function(n,r,s,a,i,o){return r+(s=="$"?s+a:ba(qB(a)+e.c))+(i=="$"?i+o:ii(GB(o)+e.r))})}function Mue(t,e,n){var r=oc(e),s=r.s,a=_a(n),i={r:a.r-s.r,c:a.c-s.c};return HH(t,i)}function Uue(t){return t.length!=1}function tR(t){return t.replace(/_xlfn\./g,"")}function gi(t){t.l+=1}function ah(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function QH(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return VH(t);n.biff==12&&(r=4)}var s=t.read_shift(r),a=t.read_shift(r),i=ah(t),o=ah(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function VH(t){var e=ah(t),n=ah(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function Oue(t,e,n){if(n.biff<8)return VH(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),a=ah(t),i=ah(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function zH(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return jue(t);var r=t.read_shift(n&&n.biff==12?4:2),s=ah(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function jue(t){var e=ah(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function Hue(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Que(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Vue(t);var s=t.read_shift(r>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Vue(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function zue(t,e,n){var r=(t[t.l++]&96)>>5,s=QH(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function Gue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=QH(t,a,n);return[r,s,i]}function que(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Kue(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,s]}function $ue(t,e,n){var r=(t[t.l++]&96)>>5,s=Oue(t,e-1,n);return[r,s]}function Wue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function nR(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Yue(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function Xue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Jue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Zue(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function ede(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function GH(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function tde(t){return t.read_shift(2),GH(t)}function nde(t){return t.read_shift(2),GH(t)}function rde(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=zH(t,0,n);return[r,s]}function sde(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=Que(t,0,n);return[r,s]}function ade(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=zH(t,0,n);return[r,s,a]}function ide(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[cAe[s],$H[s],r]}function ode(t,e,n){var r=t[t.l++],s=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:lde(t);return[s,(a[0]===0?$H:lAe)[a[1]]]}function lde(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function cde(t,e,n){t.l+=n&&n.biff==2?3:4}function ude(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function dde(t){return t.l++,MA[t.read_shift(1)]}function Ade(t){return t.l++,t.read_shift(2)}function fde(t){return t.l++,t.read_shift(1)!==0}function hde(t){return t.l++,al(t)}function mde(t,e,n){return t.l++,Jx(t,e-1,n)}function pde(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Za(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=MA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=al(t);break;case 2:n[1]=I0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function gde(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((n.biff==12?k0:p_)(t));return s}function vde(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=pde(t,n.biff);return i}function xde(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function yde(t,e,n){if(n.biff==5)return wde(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[r,s,a]}function wde(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function bde(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function _de(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Cde(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function Ede(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,s]}var Sde=cl,Tde=cl,Nde=cl;function e1(t,e,n){return t.l+=2,[Hue(t)]}function o4(t){return t.l+=6,[]}var Bde=e1,kde=o4,Ide=o4,Fde=e1;function qH(t){return t.l+=2,[yi(t),t.read_shift(2)&1]}var Dde=e1,Lde=qH,Rde=o4,Pde=e1,Mde=e1,Ude=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ode(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=Ude[n>>2&31];return{ixti:e,coltype:n&3,rt:i,idx:r,c:s,C:a}}function jde(t){return t.l+=2,[t.read_shift(4)]}function Hde(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function Qde(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function Vde(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function zde(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Gde(t){return t.l+=4,[0,0]}var rR={1:{n:"PtgExp",f:ude},2:{n:"PtgTbl",f:Nde},3:{n:"PtgAdd",f:gi},4:{n:"PtgSub",f:gi},5:{n:"PtgMul",f:gi},6:{n:"PtgDiv",f:gi},7:{n:"PtgPower",f:gi},8:{n:"PtgConcat",f:gi},9:{n:"PtgLt",f:gi},10:{n:"PtgLe",f:gi},11:{n:"PtgEq",f:gi},12:{n:"PtgGe",f:gi},13:{n:"PtgGt",f:gi},14:{n:"PtgNe",f:gi},15:{n:"PtgIsect",f:gi},16:{n:"PtgUnion",f:gi},17:{n:"PtgRange",f:gi},18:{n:"PtgUplus",f:gi},19:{n:"PtgUminus",f:gi},20:{n:"PtgPercent",f:gi},21:{n:"PtgParen",f:gi},22:{n:"PtgMissArg",f:gi},23:{n:"PtgStr",f:mde},26:{n:"PtgSheet",f:Hde},27:{n:"PtgEndSheet",f:Qde},28:{n:"PtgErr",f:dde},29:{n:"PtgBool",f:fde},30:{n:"PtgInt",f:Ade},31:{n:"PtgNum",f:hde},32:{n:"PtgArray",f:Wue},33:{n:"PtgFunc",f:ide},34:{n:"PtgFuncVar",f:ode},35:{n:"PtgName",f:xde},36:{n:"PtgRef",f:rde},37:{n:"PtgArea",f:zue},38:{n:"PtgMemArea",f:bde},39:{n:"PtgMemErr",f:Sde},40:{n:"PtgMemNoMem",f:Tde},41:{n:"PtgMemFunc",f:_de},42:{n:"PtgRefErr",f:Cde},43:{n:"PtgAreaErr",f:que},44:{n:"PtgRefN",f:sde},45:{n:"PtgAreaN",f:$ue},46:{n:"PtgMemAreaN",f:Vde},47:{n:"PtgMemNoMemN",f:zde},57:{n:"PtgNameX",f:yde},58:{n:"PtgRef3d",f:ade},59:{n:"PtgArea3d",f:Gue},60:{n:"PtgRefErr3d",f:Ede},61:{n:"PtgAreaErr3d",f:Kue},255:{}},qde={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Kde={1:{n:"PtgElfLel",f:qH},2:{n:"PtgElfRw",f:Pde},3:{n:"PtgElfCol",f:Bde},6:{n:"PtgElfRwV",f:Mde},7:{n:"PtgElfColV",f:Fde},10:{n:"PtgElfRadical",f:Dde},11:{n:"PtgElfRadicalS",f:Rde},13:{n:"PtgElfColS",f:kde},15:{n:"PtgElfColSV",f:Ide},16:{n:"PtgElfRadicalLel",f:Lde},25:{n:"PtgList",f:Ode},29:{n:"PtgSxName",f:jde},255:{}},$de={0:{n:"PtgAttrNoop",f:Gde},1:{n:"PtgAttrSemi",f:ede},2:{n:"PtgAttrIf",f:Jue},4:{n:"PtgAttrChoose",f:Yue},8:{n:"PtgAttrGoto",f:Xue},16:{n:"PtgAttrSum",f:cde},32:{n:"PtgAttrBaxcel",f:nR},33:{n:"PtgAttrBaxcel",f:nR},64:{n:"PtgAttrSpace",f:tde},65:{n:"PtgAttrSpaceSemi",f:nde},128:{n:"PtgAttrIfError",f:Zue},255:{}};function t1(t,e,n,r){if(r.biff<8)return cl(t,e);for(var s=t.l+e,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=vde(t,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=gde(t,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&r.biff==12&&(n[i][1][1]=t.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return e=s-t.l,e!==0&&a.push(cl(t,e)),a}function n1(t,e,n){for(var r=t.l+e,s,a,i=[];r!=t.l;)e=r-t.l,a=t[t.l],s=rR[a]||rR[qde[a]],(a===24||a===25)&&(s=(a===24?Kde:$de)[t[t.l+1]]),!s||!s.f?cl(t,e):i.push([s.n,s.f(t,e,n)]);return i}function Wde(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Yde={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Xde(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function KH(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function sR(t,e,n){var r=KH(t,e,n);return r=="#REF"?r:Xde(r,n)}function Zo(t,e,n,r,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,c,A,h=0,p=0,g,w="";if(!t[0]||!t[0][0])return"";for(var x=-1,S="",N=0,F=t[0].length;N<F;++N){var D=t[0][N];switch(D[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),x>=0){switch(t[0][x][1][0]){case 0:S=ja(" ",t[0][x][1][1]);break;case 1:S=ja("\r",t[0][x][1][1]);break;default:if(S="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}c=c+S,x=-1}o.push(c+Yde[D[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":A=Tv(D[1][1],i,s),o.push(Nv(A,a));break;case"PtgRefN":A=n?Tv(D[1][1],n,s):D[1][1],o.push(Nv(A,a));break;case"PtgRef3d":h=D[1][1],A=Tv(D[1][2],i,s),w=sR(r,h,s),o.push(w+"!"+Nv(A,a));break;case"PtgFunc":case"PtgFuncVar":var R=D[1][0],j=D[1][1];R||(R=0),R&=127;var P=R==0?[]:o.slice(-R);o.length-=R,j==="User"&&(j=P.shift()),o.push(j+"("+P.join(",")+")");break;case"PtgBool":o.push(D[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(D[1]);break;case"PtgNum":o.push(String(D[1]));break;case"PtgStr":o.push('"'+D[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(D[1]);break;case"PtgAreaN":g=DL(D[1][1],n?{s:n}:i,s),o.push($E(g,s));break;case"PtgArea":g=DL(D[1][1],i,s),o.push($E(g,s));break;case"PtgArea3d":h=D[1][1],g=D[1][2],w=sR(r,h,s),o.push(w+"!"+$E(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=D[1][2];var E=(r.names||[])[p-1]||(r[0]||[])[p],T=E?E.Name:"SH33TJSNAME"+String(p);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),o.push(T);break;case"PtgNameX":var k=D[1][1];p=D[1][2];var z;if(s.biff<=5)k<0&&(k=-k),r[k]&&(z=r[k][p]);else{var M="";if(((r[k]||[])[0]||[])[0]==14849||(((r[k]||[])[0]||[])[0]==1025?r[k][p]&&r[k][p].itab>0&&(M=r.SheetNames[r[k][p].itab-1]+"!"):M=r.SheetNames[p-1]+"!"),r[k]&&r[k][p])M+=r[k][p].Name;else if(r[0]&&r[0][p])M+=r[0][p].Name;else{var U=(KH(r,k,s)||"").split(";;");U[p-1]?M=U[p-1]:M+="SH33TJSERRX"}o.push(M);break}z||(z={Name:"SH33TJSERRY"}),o.push(z.Name);break;case"PtgParen":var G="(",q=")";if(x>=0){switch(S="",t[0][x][1][0]){case 2:G=ja(" ",t[0][x][1][1])+G;break;case 3:G=ja("\r",t[0][x][1][1])+G;break;case 4:q=ja(" ",t[0][x][1][1])+q;break;case 5:q=ja("\r",t[0][x][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}o.push(G+o.pop()+q);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":A={c:D[1][1],r:D[1][0]};var oe={c:n.c,r:n.r};if(r.sharedf[Yn(A)]){var ee=r.sharedf[Yn(A)];o.push(Zo(ee,i,oe,r,s))}else{var le=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(A.c<c[0].s.c||A.c>c[0].e.c)&&!(A.r<c[0].s.r||A.r>c[0].e.r)){o.push(Zo(c[1],i,oe,r,s)),le=!0;break}le||o.push(D[1])}break;case"PtgArray":o.push("{"+Wde(D[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+D[1].idx+"[#"+D[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(D));default:throw new Error("Unrecognized Formula Token: "+String(D))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&x>=0&&K.indexOf(t[0][N][0])==-1){D=t[0][x];var ne=!0;switch(D[1][0]){case 4:ne=!1;case 0:S=ja(" ",D[1][1]);break;case 5:ne=!1;case 1:S=ja("\r",D[1][1]);break;default:if(S="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+D[1][0])}o.push((ne?S:"")+o.pop()+(ne?"":S)),x=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Jde(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],cl(t,e-2)];var o=n1(t,i,n);return e!==i+s&&(a=t1(t,e-i-s,o,n)),t.l=r,[o,a]}function Zde(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],cl(t,e-2)];var o=n1(t,i,n);return e!==i+s&&(a=t1(t,e-i-s,o,n)),t.l=r,[o,a]}function eAe(t,e,n,r){var s=t.l+e,a=n1(t,r,n),i;return s!==t.l&&(i=t1(t,s-t.l,a,n)),[a,i]}function tAe(t,e,n){var r=t.l+e,s,a=t.read_shift(2),i=n1(t,a,n);return a==65535?[[],cl(t,e-2)]:(e!==a+2&&(s=t1(t,r-a-2,i,n)),[i,s])}function nAe(t){var e;if(mA(t,t.l+6)!==65535)return[al(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function rAe(t){if(t==null){var e=wt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return h0(t);return h0(0)}function ZE(t,e,n){var r=t.l+e,s=Gd(t);n.biff==2&&++t.l;var a=nAe(t),i=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var o=Zde(t,r-t.l,n);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function sAe(t,e,n,r,s){var a=p0(e,n,s),i=rAe(t.v),o=wt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=wt(t.bf.length),A=0;A<t.bf.length;++A)c[A]=t.bf[A];var h=ro([a,i,o,c]);return h}function g_(t,e,n){var r=t.read_shift(4),s=n1(t,r,n),a=t.read_shift(4),i=a>0?t1(t,a,s,n):null;return[s,i]}var aAe=g_,v_=g_,iAe=g_,oAe=g_,lAe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},$H={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cAe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function aR(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function uAe(t){var e="of:="+t.replace(a4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function eS(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function dAe(t){return t.replace(/\./,"!")}var kv={},tp={},Iv=typeof Map<"u";function l4(t,e,n){var r=0,s=t.length;if(n){if(Iv?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var a=Iv?n.get(e):n[e];r<a.length;++r)if(t[a[r]].t===e)return t.Count++,a[r]}}else for(;r<s;++r)if(t[r].t===e)return t.Count++,r;return t[s]={t:e},t.Count++,t.Unique++,n&&(Iv?(n.has(e)||n.set(e,[]),n.get(e).push(s)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(s))),s}function x_(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(nl=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=ux(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=K2(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function e0(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function fh(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(r==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){xA(e.z,s),n.ssf[s]=e.z,n.revssf[e.z]=r=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===r)return s;return t[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function WH(t,e,n,r,s,a){try{r.cellNF&&(t.z=qn[e])}catch(o){if(r.WTF)throw o}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ia(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(qn[e]==null&&xA(lae[e]||"General",e),t.t==="e")t.w=t.w||MA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=rx(t.v);else if(t.t==="d"){var i=Oi(t.v);(i|0)===i?t.w=i.toString(10):t.w=rx(i)}else{if(t.v===void 0)return"";t.w=A0(t.v,tp)}else t.t==="d"?t.w=wu(e,Oi(t.v),tp):t.w=wu(e,t.v,tp)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&n!=null)try{t.s=a.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=q2(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=q2(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&a.Fills)throw o}}}function AAe(t,e,n){if(t&&t["!ref"]){var r=as(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function fAe(t,e){var n=as(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=vr(n))}var hAe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,mAe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,pAe=/<(?:\w:)?hyperlink [^>]*>/mg,gAe=/"(\w*:\w*)"/,vAe=/<(?:\w:)?col\b[^>]*[\/]?>/g,xAe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,yAe=/<(?:\w:)?pageMargins[^>]*\/>/g,YH=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,wAe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,bAe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function _Ae(t,e,n,r,s,a,i){if(!t)return t;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",A="",h=t.match(mAe);h?(c=t.slice(0,h.index),A=t.slice(h.index+h[0].length)):c=A=t;var p=c.match(YH);p?c4(p[0],o,s,n):(p=c.match(wAe))&&EAe(p[0],p[1]||"",o,s,n);var g=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var w=c.slice(g,g+50).match(gAe);w&&fAe(o,w[1])}var x=c.match(bAe);x&&x[1]&&UAe(x[1],s);var S=[];if(e.cellStyles){var N=c.match(vAe);N&&DAe(S,N)}h&&HAe(h[1],o,e,l,a,i);var F=A.match(xAe);F&&(o["!autofilter"]=RAe(F[0]));var D=[],R=A.match(hAe);if(R)for(g=0;g!=R.length;++g)D[g]=as(R[g].slice(R[g].indexOf('"')+1));var j=A.match(pAe);j&&kAe(o,j,r);var P=A.match(yAe);if(P&&(o["!margins"]=IAe(tr(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=vr(l)),e.sheetRows>0&&o["!ref"]){var E=as(o["!ref"]);e.sheetRows<=+E.e.r&&(E.e.r=e.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=vr(E))}return S.length>0&&(o["!cols"]=S),D.length>0&&(o["!merges"]=D),o}function CAe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+vr(t[n])+'"/>';return e+"</mergeCells>"}function c4(t,e,n,r){var s=tr(t);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=ss(Ps(s.codeName)))}function EAe(t,e,n,r,s){c4(t.slice(0,t.indexOf(">")),n,r,s)}function SAe(t,e,n,r,s){var a=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}a=!0,i.codeName=Bd(ks(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+Xt("outlinePr",null,c)}!a&&!o||(s[s.length]=Xt("sheetPr",o,i))}var TAe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],NAe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function BAe(t){var e={sheet:1};return TAe.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),NAe.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=n4(t.password).toString(16).toUpperCase()),Xt("sheetProtection",null,e)}function kAe(t,e,n){for(var r=Array.isArray(t),s=0;s!=e.length;++s){var a=tr(Ps(e[s]),!0);if(!a.ref)return;var i=((n||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+ss(a.location))):(a.Target="#"+ss(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=as(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var A=Yn({c,r:l});r?(t[l]||(t[l]=[]),t[l][c]||(t[l][c]={t:"z",v:void 0}),t[l][c].l=a):(t[A]||(t[A]={t:"z",v:void 0}),t[A].l=a)}}}function IAe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function FAe(t){return e0(t),Xt("pageMargins",null,t)}function DAe(t,e){for(var n=!1,r=0;r!=e.length;++r){var s=tr(e[r],!0);s.hidden&&(s.hidden=sa(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,r4(s.width)),sh(s);a<=i;)t[a++]=oa(s)}}function LAe(t,e){for(var n=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(n[n.length]=Xt("col",null,x_(s,r)));return n[n.length]="</cols>",n.join("")}function RAe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function PAe(t,e,n,r){var s=typeof t.ref=="string"?t.ref:vr(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=oc(s);i.s.r==i.e.r&&(i.e.r=oc(e["!ref"]).e.r,s=vr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Xt("autoFilter",null,{ref:s})}var MAe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function UAe(t,e){e.Views||(e.Views=[{}]),(t.match(MAe)||[]).forEach(function(n,r){var s=tr(n);e.Views[r]||(e.Views[r]={}),+s.zoomScale&&(e.Views[r].zoom=+s.zoomScale),sa(s.rightToLeft)&&(e.Views[r].RTL=!0)})}function OAe(t,e,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Xt("sheetViews",Xt("sheetView",null,s),{})}function jAe(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=MA[t.v];break;case"d":r&&r.cellDates?s=ia(t.v,-1).toISOString():(t=oa(t),t.t="n",s=""+(t.v=Oi(ia(t.v)))),typeof t.z>"u"&&(t.z=qn[14]);break;default:s=t.v;break}var o=Bo("v",ks(s)),l={r:e},c=fh(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Bo("v",""+l4(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var A=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Xt("f",ks(t.f),A)+(t.v!=null?o:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),Xt("c",o,l)}var HAe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=sx("v"),i=sx("f");return function(l,c,A,h,p,g){for(var w=0,x="",S=[],N=[],F=0,D=0,R=0,j="",P,E,T=0,k=0,z,M,U=0,G=0,q=Array.isArray(g.CellXf),oe,ee=[],le=[],K=Array.isArray(c),ne=[],J={},ce=!1,Q=!!A.sheetStubs,Z=l.split(e),se=0,ie=Z.length;se!=ie;++se){x=Z[se].trim();var fe=x.length;if(fe!==0){var Se=0;e:for(w=0;w<fe;++w)switch(x[w]){case">":if(x[w-1]!="/"){++w;break e}if(A&&A.cellStyles){if(E=tr(x.slice(Se,w),!0),T=E.r!=null?parseInt(E.r,10):T+1,k=-1,A.sheetRows&&A.sheetRows<T)continue;J={},ce=!1,E.ht&&(ce=!0,J.hpt=parseFloat(E.ht),J.hpx=wp(J.hpt)),E.hidden=="1"&&(ce=!0,J.hidden=!0),E.outlineLevel!=null&&(ce=!0,J.level=+E.outlineLevel),ce&&(ne[T-1]=J)}break;case"<":Se=w;break}if(Se>=w)break;if(E=tr(x.slice(Se,w),!0),T=E.r!=null?parseInt(E.r,10):T+1,k=-1,!(A.sheetRows&&A.sheetRows<T)){h.s.r>T-1&&(h.s.r=T-1),h.e.r<T-1&&(h.e.r=T-1),A&&A.cellStyles&&(J={},ce=!1,E.ht&&(ce=!0,J.hpt=parseFloat(E.ht),J.hpx=wp(J.hpt)),E.hidden=="1"&&(ce=!0,J.hidden=!0),E.outlineLevel!=null&&(ce=!0,J.level=+E.outlineLevel),ce&&(ne[T-1]=J)),S=x.slice(w).split(t);for(var ge=0;ge!=S.length&&S[ge].trim().charAt(0)=="<";++ge);for(S=S.slice(ge),w=0;w!=S.length;++w)if(x=S[w].trim(),x.length!==0){if(N=x.match(n),F=w,D=0,R=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,N!=null&&N.length===2){for(F=0,j=N[1],D=0;D!=j.length&&!((R=j.charCodeAt(D)-64)<1||R>26);++D)F=26*F+R;--F,k=F}else++k;for(D=0;D!=x.length&&x.charCodeAt(D)!==62;++D);if(++D,E=tr(x.slice(0,D),!0),E.r||(E.r=Yn({r:T-1,c:k})),j=x.slice(D),P={t:""},(N=j.match(a))!=null&&N[1]!==""&&(P.v=ss(N[1])),A.cellFormula){if((N=j.match(i))!=null&&N[1]!==""){if(P.f=ss(Ps(N[1])).replace(/\r\n/g,`
`),A.xlfn||(P.f=tR(P.f)),N[0].indexOf('t="array"')>-1)P.F=(j.match(s)||[])[1],P.F.indexOf(":")>-1&&ee.push([as(P.F),P.F]);else if(N[0].indexOf('t="shared"')>-1){M=tr(N[0]);var xe=ss(Ps(N[1]));A.xlfn||(xe=tR(xe)),le[parseInt(M.si,10)]=[M,xe,E.r]}}else(N=j.match(/<f[^>]*\/>/))&&(M=tr(N[0]),le[M.si]&&(P.f=Mue(le[M.si][1],le[M.si][2],E.r)));var ve=_a(E.r);for(D=0;D<ee.length;++D)ve.r>=ee[D][0].s.r&&ve.r<=ee[D][0].e.r&&ve.c>=ee[D][0].s.c&&ve.c<=ee[D][0].e.c&&(P.F=ee[D][1])}if(E.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(Q)P.t="z";else continue;else P.t=E.t||"n";switch(h.s.c>k&&(h.s.c=k),h.e.c<k&&(h.e.c=k),P.t){case"n":if(P.v==""||P.v==null){if(!Q)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!Q)continue;P.t="z"}else z=kv[parseInt(P.v,10)],P.v=z.t,P.r=z.r,A.cellHTML&&(P.h=z.h);break;case"str":P.t="s",P.v=P.v!=null?Ps(P.v):"",A.cellHTML&&(P.h=HB(P.v));break;case"inlineStr":N=j.match(r),P.t="s",N!=null&&(z=t4(N[1]))?(P.v=z.t,A.cellHTML&&(P.h=z.h)):P.v="";break;case"b":P.v=sa(P.v);break;case"d":A.cellDates?P.v=ia(P.v,1):(P.v=Oi(ia(P.v,1)),P.t="n");break;case"e":(!A||A.cellText!==!1)&&(P.w=P.v),P.v=J7[P.v];break}if(U=G=0,oe=null,q&&E.s!==void 0&&(oe=g.CellXf[E.s],oe!=null&&(oe.numFmtId!=null&&(U=oe.numFmtId),A.cellStyles&&oe.fillId!=null&&(G=oe.fillId))),WH(P,U,G,A,p,g),A.cellDates&&q&&P.t=="n"&&Up(qn[U])&&(P.t="d",P.v=m_(P.v)),E.cm&&A.xlmeta){var me=(A.xlmeta.Cell||[])[+E.cm-1];me&&me.type=="XLDAPR"&&(P.D=!0)}if(K){var he=_a(E.r);c[he.r]||(c[he.r]=[]),c[he.r][he.c]=P}else c[E.r]=P}}}}ne.length>0&&(c["!rows"]=ne)}}();function QAe(t,e,n,r){var s=[],a=[],i=as(t["!ref"]),o="",l,c="",A=[],h=0,p=0,g=t["!rows"],w=Array.isArray(t),x={r:c},S,N=-1;for(p=i.s.c;p<=i.e.c;++p)A[p]=ba(p);for(h=i.s.r;h<=i.e.r;++h){for(a=[],c=ii(h),p=i.s.c;p<=i.e.c;++p){l=A[p]+c;var F=w?(t[h]||[])[p]:t[l];F!==void 0&&(o=jAe(F,l,t,e))!=null&&a.push(o)}(a.length>0||g&&g[h])&&(x={r:c},g&&g[h]&&(S=g[h],S.hidden&&(x.hidden=1),N=-1,S.hpx?N=dx(S.hpx):S.hpt&&(N=S.hpt),N>-1&&(x.ht=N,x.customHeight=1),S.level&&(x.outlineLevel=S.level)),s[s.length]=Xt("row",a.join(""),x))}if(g)for(;h<g.length;++h)g&&g[h]&&(x={r:h+1},S=g[h],S.hidden&&(x.hidden=1),N=-1,S.hpx?N=dx(S.hpx):S.hpt&&(N=S.hpt),N>-1&&(x.ht=N,x.customHeight=1),S.level&&(x.outlineLevel=S.level),s[s.length]=Xt("row","",x));return s.join("")}function XH(t,e,n,r){var s=[oi,Xt("worksheet",null,{xmlns:S0[0],"xmlns:r":Mi.r})],a=n.SheetNames[t],i=0,o="",l=n.Sheets[a];l==null&&(l={});var c=l["!ref"]||"A1",A=as(c);if(A.e.c>16383||A.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");A.e.c=Math.min(A.e.c,16383),A.e.r=Math.min(A.e.c,1048575),c=vr(A)}r||(r={}),l["!comments"]=[];var h=[];SAe(l,n,t,e,s),s[s.length]=Xt("dimension",null,{ref:c}),s[s.length]=OAe(l,e,t,n),e.sheetFormat&&(s[s.length]=Xt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=LAe(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=QAe(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=BAe(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=PAe(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=CAe(l["!merges"]));var p=-1,g,w=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(g={ref:x[0]},x[1].Target.charAt(0)!="#"&&(w=Ns(r,-1,ks(x[1].Target).replace(/#.*$/,""),Rr.HLINK),g["r:id"]="rId"+w),(p=x[1].Target.indexOf("#"))>-1&&(g.location=ks(x[1].Target.slice(p+1))),x[1].Tooltip&&(g.tooltip=ks(x[1].Tooltip)),s[s.length]=Xt("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=FAe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Bo("ignoredErrors",Xt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(w=Ns(r,-1,"../drawings/drawing"+(t+1)+".xml",Rr.DRAW),s[s.length]=Xt("drawing",null,{"r:id":"rId"+w}),l["!drawing"]=h),l["!comments"].length>0&&(w=Ns(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Rr.VML),s[s.length]=Xt("legacyDrawing",null,{"r:id":"rId"+w}),l["!legacy"]=w),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function VAe(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=s/20),n}function zAe(t,e,n){var r=wt(145),s=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var a=320;s.hpx?a=dx(s.hpx)*20:s.hpt&&(a=s.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:t,c:0},A=0;A<16;++A)if(!(e.s.c>A+1<<10||e.e.c<A<<10)){for(var h=-1,p=-1,g=A<<10;g<A+1<<10;++g){c.c=g;var w=Array.isArray(n)?(n[c.r]||[])[c.c]:n[Yn(c)];w&&(h<0&&(h=g),p=g)}h<0||(++o,r.write_shift(4,h),r.write_shift(4,p))}var x=r.l;return r.l=l,r.write_shift(4,o),r.l=x,r.length>r.l?r.slice(0,r.l):r}function GAe(t,e,n,r){var s=zAe(r,n,e);(s.length>17||(e["!rows"]||[])[r])&&Mt(t,0,s)}var qAe=k0,KAe=Hp;function $Ae(){}function WAe(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Jae(t),n}function YAe(t,e,n){n==null&&(n=wt(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return V2({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),K7(t,n),n.slice(0,n.l)}function XAe(t){var e=bu(t);return[e]}function JAe(t,e,n){return n==null&&(n=wt(8)),T0(e,n)}function ZAe(t){var e=N0(t);return[e]}function efe(t,e,n){return n==null&&(n=wt(4)),B0(e,n)}function tfe(t){var e=bu(t),n=t.read_shift(1);return[e,n,"b"]}function nfe(t,e,n){return n==null&&(n=wt(9)),T0(e,n),n.write_shift(1,t.v?1:0),n}function rfe(t){var e=N0(t),n=t.read_shift(1);return[e,n,"b"]}function sfe(t,e,n){return n==null&&(n=wt(5)),B0(e,n),n.write_shift(1,t.v?1:0),n}function afe(t){var e=bu(t),n=t.read_shift(1);return[e,n,"e"]}function ife(t,e,n){return n==null&&(n=wt(9)),T0(e,n),n.write_shift(1,t.v),n}function ofe(t){var e=N0(t),n=t.read_shift(1);return[e,n,"e"]}function lfe(t,e,n){return n==null&&(n=wt(8)),B0(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function cfe(t){var e=bu(t),n=t.read_shift(4);return[e,n,"s"]}function ufe(t,e,n){return n==null&&(n=wt(12)),T0(e,n),n.write_shift(4,e.v),n}function dfe(t){var e=N0(t),n=t.read_shift(4);return[e,n,"s"]}function Afe(t,e,n){return n==null&&(n=wt(8)),B0(e,n),n.write_shift(4,e.v),n}function ffe(t){var e=bu(t),n=al(t);return[e,n,"n"]}function hfe(t,e,n){return n==null&&(n=wt(16)),T0(e,n),h0(t.v,n),n}function JH(t){var e=N0(t),n=al(t);return[e,n,"n"]}function mfe(t,e,n){return n==null&&(n=wt(12)),B0(e,n),h0(t.v,n),n}function pfe(t){var e=bu(t),n=YB(t);return[e,n,"n"]}function gfe(t,e,n){return n==null&&(n=wt(12)),T0(e,n),$7(t.v,n),n}function vfe(t){var e=N0(t),n=YB(t);return[e,n,"n"]}function xfe(t,e,n){return n==null&&(n=wt(8)),B0(e,n),$7(t.v,n),n}function yfe(t){var e=bu(t),n=KB(t);return[e,n,"is"]}function wfe(t){var e=bu(t),n=ol(t);return[e,n,"str"]}function bfe(t,e,n){return n==null&&(n=wt(12+4*t.v.length)),T0(e,n),so(t.v,n),n.length>n.l?n.slice(0,n.l):n}function _fe(t){var e=N0(t),n=ol(t);return[e,n,"str"]}function Cfe(t,e,n){return n==null&&(n=wt(8+4*t.v.length)),B0(e,n),so(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Efe(t,e,n){var r=t.l+e,s=bu(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(n.cellFormula){t.l+=2;var o=v_(t,r-t.l,n);i[3]=Zo(o,null,s,n.supbooks,n)}else t.l=r;return i}function Sfe(t,e,n){var r=t.l+e,s=bu(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(n.cellFormula){t.l+=2;var o=v_(t,r-t.l,n);i[3]=Zo(o,null,s,n.supbooks,n)}else t.l=r;return i}function Tfe(t,e,n){var r=t.l+e,s=bu(t);s.r=n["!row"];var a=al(t),i=[s,a,"n"];if(n.cellFormula){t.l+=2;var o=v_(t,r-t.l,n);i[3]=Zo(o,null,s,n.supbooks,n)}else t.l=r;return i}function Nfe(t,e,n){var r=t.l+e,s=bu(t);s.r=n["!row"];var a=ol(t),i=[s,a,"str"];if(n.cellFormula){t.l+=2;var o=v_(t,r-t.l,n);i[3]=Zo(o,null,s,n.supbooks,n)}else t.l=r;return i}var Bfe=k0,kfe=Hp;function Ife(t,e){return e==null&&(e=wt(4)),e.write_shift(4,t),e}function Ffe(t,e){var n=t.l+e,r=k0(t),s=$B(t),a=ol(t),i=ol(t),o=ol(t);t.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Dfe(t,e){var n=wt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Hp({s:_a(t[0]),e:_a(t[0])},n),WB("rId"+e,n);var r=t[1].Target.indexOf("#"),s=r==-1?"":t[1].Target.slice(r+1);return so(s||"",n),so(t[1].Tooltip||"",n),so("",n),n.slice(0,n.l)}function Lfe(){}function Rfe(t,e,n){var r=t.l+e,s=W7(t),a=t.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=aAe(t,r-t.l,n);i[1]=o}else t.l=r;return i}function Pfe(t,e,n){var r=t.l+e,s=k0(t),a=[s];if(n.cellFormula){var i=oAe(t,r-t.l,n);a[1]=i,t.l=r}else t.l=r;return a}function Mfe(t,e,n){n==null&&(n=wt(18));var r=x_(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),n.write_shift(2,s),n}var ZH=["left","right","top","bottom","header","footer"];function Ufe(t){var e={};return ZH.forEach(function(n){e[n]=al(t)}),e}function Ofe(t,e){return e==null&&(e=wt(48)),e0(t),ZH.forEach(function(n){h0(t[n],e)}),e}function jfe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Hfe(t,e,n){n==null&&(n=wt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function Qfe(t){var e=wt(24);return e.write_shift(4,4),e.write_shift(4,1),Hp(t,e),e}function Vfe(t,e){return e==null&&(e=wt(66)),e.write_shift(2,t.password?n4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function zfe(){}function Gfe(){}function qfe(t,e,n,r,s,a,i){if(!t)return t;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},c,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,p=!1,g,w,x,S,N,F,D,R,j,P=[];o.biff=12,o["!row"]=0;var E=0,T=!1,k=[],z={},M=o.supbooks||s.supbooks||[[]];if(M.sharedf=z,M.arrayf=k,M.SheetNames=s.SheetNames||s.Sheets.map(function(K){return K.name}),!o.supbooks&&(o.supbooks=M,s.Names))for(var U=0;U<s.Names.length;++U)M[0][U+1]=s.Names[U];var G=[],q=[],oe=!1;Ax[16]={n:"BrtShortReal",f:JH};var ee;if(PA(t,function(ne,J,ce){if(!p)switch(ce){case 148:c=ne;break;case 0:g=ne,o.sheetRows&&o.sheetRows<=g.r&&(p=!0),R=ii(S=g.r),o["!row"]=g.r,(ne.hidden||ne.hpt||ne.level!=null)&&(ne.hpt&&(ne.hpx=wp(ne.hpt)),q[ne.r]=ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(w={t:ne[2]},ne[2]){case"n":w.v=ne[1];break;case"s":D=kv[ne[1]],w.v=D.t,w.r=D.r;break;case"b":w.v=!!ne[1];break;case"e":w.v=ne[1],o.cellText!==!1&&(w.w=MA[w.v]);break;case"str":w.t="s",w.v=ne[1];break;case"is":w.t="s",w.v=ne[1].t;break}if((x=i.CellXf[ne[0].iStyleRef])&&WH(w,x.numFmtId,null,o,a,i),N=ne[0].c==-1?N+1:ne[0].c,o.dense?(l[S]||(l[S]=[]),l[S][N]=w):l[ba(N)+R]=w,o.cellFormula){for(T=!1,E=0;E<k.length;++E){var Q=k[E];g.r>=Q[0].s.r&&g.r<=Q[0].e.r&&N>=Q[0].s.c&&N<=Q[0].e.c&&(w.F=vr(Q[0]),T=!0)}!T&&ne.length>3&&(w.f=ne[3])}if(A.s.r>g.r&&(A.s.r=g.r),A.s.c>N&&(A.s.c=N),A.e.r<g.r&&(A.e.r=g.r),A.e.c<N&&(A.e.c=N),o.cellDates&&x&&w.t=="n"&&Up(qn[x.numFmtId])){var Z=Vh(w.v);Z&&(w.t="d",w.v=new Date(Z.y,Z.m-1,Z.d,Z.H,Z.M,Z.S,Z.u))}ee&&(ee.type=="XLDAPR"&&(w.D=!0),ee=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;w={t:"z",v:void 0},N=ne[0].c==-1?N+1:ne[0].c,o.dense?(l[S]||(l[S]=[]),l[S][N]=w):l[ba(N)+R]=w,A.s.r>g.r&&(A.s.r=g.r),A.s.c>N&&(A.s.c=N),A.e.r<g.r&&(A.e.r=g.r),A.e.c<N&&(A.e.c=N),ee&&(ee.type=="XLDAPR"&&(w.D=!0),ee=void 0);break;case 176:P.push(ne);break;case 49:ee=((o.xlmeta||{}).Cell||[])[ne-1];break;case 494:var se=r["!id"][ne.relId];for(se?(ne.Target=se.Target,ne.loc&&(ne.Target+="#"+ne.loc),ne.Rel=se):ne.relId==""&&(ne.Target="#"+ne.loc),S=ne.rfx.s.r;S<=ne.rfx.e.r;++S)for(N=ne.rfx.s.c;N<=ne.rfx.e.c;++N)o.dense?(l[S]||(l[S]=[]),l[S][N]||(l[S][N]={t:"z",v:void 0}),l[S][N].l=ne):(F=Yn({c:N,r:S}),l[F]||(l[F]={t:"z",v:void 0}),l[F].l=ne);break;case 426:if(!o.cellFormula)break;k.push(ne),j=o.dense?l[S][N]:l[ba(N)+R],j.f=Zo(ne[1],A,{r:g.r,c:N},M,o),j.F=vr(ne[0]);break;case 427:if(!o.cellFormula)break;z[Yn(ne[0].s)]=ne[1],j=o.dense?l[S][N]:l[ba(N)+R],j.f=Zo(ne[1],A,{r:g.r,c:N},M,o);break;case 60:if(!o.cellStyles)break;for(;ne.e>=ne.s;)G[ne.e--]={width:ne.w/256,hidden:!!(ne.flags&1),level:ne.level},oe||(oe=!0,r4(ne.w/256)),sh(G[ne.e+1]);break;case 161:l["!autofilter"]={ref:vr(ne)};break;case 476:l["!margins"]=ne;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),ne.name&&(s.Sheets[n].CodeName=ne.name),(ne.above||ne.left)&&(l["!outline"]={above:ne.above,left:ne.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),ne.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!J.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ce.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(A.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=vr(c||A)),o.sheetRows&&l["!ref"]){var le=as(l["!ref"]);o.sheetRows<=+le.e.r&&(le.e.r=o.sheetRows-1,le.e.r>A.e.r&&(le.e.r=A.e.r),le.e.r<le.s.r&&(le.s.r=le.e.r),le.e.c>A.e.c&&(le.e.c=A.e.c),le.e.c<le.s.c&&(le.s.c=le.e.c),l["!fullref"]=l["!ref"],l["!ref"]=vr(le))}return P.length>0&&(l["!merges"]=P),G.length>0&&(l["!cols"]=G),q.length>0&&(l["!rows"]=q),l}function Kfe(t,e,n,r,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=oa(e),e.z=e.z||qn[14],e.v=Oi(ia(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:n,c:r};switch(l.s=fh(s.cellXfs,e,s),e.l&&a["!links"].push([Yn(l),e.l]),e.c&&a["!comments"].push([Yn(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=l4(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Mt(t,18,Afe(e,l)):Mt(t,7,ufe(e,l))):(l.t="str",i?Mt(t,17,Cfe(e,l)):Mt(t,6,bfe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Mt(t,13,xfe(e,l)):Mt(t,2,gfe(e,l)):i?Mt(t,16,mfe(e,l)):Mt(t,5,hfe(e,l)),!0;case"b":return l.t="b",i?Mt(t,15,sfe(e,l)):Mt(t,4,nfe(e,l)),!0;case"e":return l.t="e",i?Mt(t,14,lfe(e,l)):Mt(t,3,ife(e,l)),!0}return i?Mt(t,12,efe(e,l)):Mt(t,1,JAe(e,l)),!0}function $fe(t,e,n,r){var s=as(e["!ref"]||"A1"),a,i="",o=[];Mt(t,145);var l=Array.isArray(e),c=s.e.r;e["!rows"]&&(c=Math.max(s.e.r,e["!rows"].length-1));for(var A=s.s.r;A<=c;++A){i=ii(A),GAe(t,e,s,A);var h=!1;if(A<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){A===s.s.r&&(o[p]=ba(p)),a=o[p]+i;var g=l?(e[A]||[])[p]:e[a];if(!g){h=!1;continue}h=Kfe(t,g,A,p,r,e,h)}}Mt(t,146)}function Wfe(t,e){!e||!e["!merges"]||(Mt(t,177,Ife(e["!merges"].length)),e["!merges"].forEach(function(n){Mt(t,176,kfe(n))}),Mt(t,178))}function Yfe(t,e){!e||!e["!cols"]||(Mt(t,390),e["!cols"].forEach(function(n,r){n&&Mt(t,60,Mfe(r,n))}),Mt(t,391))}function Xfe(t,e){!e||!e["!ref"]||(Mt(t,648),Mt(t,649,Qfe(as(e["!ref"]))),Mt(t,650))}function Jfe(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var s=Ns(n,-1,r[1].Target.replace(/#.*$/,""),Rr.HLINK);Mt(t,494,Dfe(r,s))}}),delete e["!links"]}function Zfe(t,e,n,r){if(e["!comments"].length>0){var s=Ns(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Rr.VML);Mt(t,551,WB("rId"+s)),e["!legacy"]=s}}function ehe(t,e,n,r){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:vr(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=oc(a);o.s.r==o.e.r&&(o.e.r=oc(e["!ref"]).e.r,a=vr(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Mt(t,161,Hp(as(a))),Mt(t,162)}}function the(t,e,n){Mt(t,133),Mt(t,137,Hfe(e,n)),Mt(t,138),Mt(t,134)}function nhe(t,e){e["!protect"]&&Mt(t,535,Vfe(e["!protect"]))}function rhe(t,e,n,r){var s=ac(),a=n.SheetNames[t],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[t].CodeName||o)}catch{}var l=as(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Mt(s,129),(n.vbaraw||i["!outline"])&&Mt(s,147,YAe(o,i["!outline"])),Mt(s,148,KAe(l)),the(s,i,n.Workbook),Yfe(s,i),$fe(s,i,t,e),nhe(s,i),ehe(s,i,n,t),Wfe(s,i),Jfe(s,i,r),i["!margins"]&&Mt(s,476,Ofe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Xfe(s,i),Zfe(s,i,t,r),Mt(s,130),s.end()}function she(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=n?+i[2]:i[2])});var s=ss((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){r=a.replace(/<.*?>/g,"")}),[e,s,r]}function ahe(t,e,n,r,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,c="A",A={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var p=she(h);A.s.r=A.s.c=0,A.e.c=o,c=ba(o),p[0].forEach(function(g,w){i[c+ii(w)]={t:"n",v:g,z:p[1]},l=w}),A.e.r<l&&(A.e.r=l),++o}),o>0&&(i["!ref"]=vr(A)),i}function ihe(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(YH);return o&&c4(o[0],a,s,n),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function ohe(t,e){t.l+=10;var n=ol(t);return{name:n}}function lhe(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return PA(t,function(l,c,A){switch(A){case 550:a["!rel"]=l;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),l.name&&(s.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}},e),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}var u4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],che=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],uhe=[],dhe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function iR(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],s=0;s!=e.length;++s){var a=e[s];if(r[a[0]]==null)r[a[0]]=a[1];else switch(a[2]){case"bool":typeof r[a[0]]=="string"&&(r[a[0]]=sa(r[a[0]]));break;case"int":typeof r[a[0]]=="string"&&(r[a[0]]=parseInt(r[a[0]],10));break}}}function oR(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=sa(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function eQ(t){oR(t.WBProps,u4),oR(t.CalcPr,dhe),iR(t.WBView,che),iR(t.Sheets,uhe),tp.date1904=sa(t.WBProps.date1904)}function Ahe(t){return!t.Workbook||!t.Workbook.WBProps?"false":sa(t.Workbook.WBProps.date1904)?"true":"false"}var fhe="][*?/\\".split("");function tQ(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return fhe.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function hhe(t,e,n){t.forEach(function(r,s){tQ(r);for(var a=0;a<s;++a)if(r==t[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=e&&e[s]&&e[s].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function mhe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];hhe(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)AAe(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}var phe=/<\w+:workbook/;function ghe(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},i=0;if(t.replace(dl,function(l,c){var A=tr(l);switch(zd(A[0])){case"<?xml":break;case"<workbook":l.match(phe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=A[s];break;case"</workbook>":break;case"<fileVersion":delete A[0],n.AppVersion=A;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":u4.forEach(function(h){if(A[h[0]]!=null)switch(h[2]){case"bool":n.WBProps[h[0]]=sa(A[h[0]]);break;case"int":n.WBProps[h[0]]=parseInt(A[h[0]],10);break;default:n.WBProps[h[0]]=A[h[0]]}}),A.codeName&&(n.WBProps.CodeName=Ps(A.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete A[0],n.WBView.push(A);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(A.state){case"hidden":A.Hidden=1;break;case"veryHidden":A.Hidden=2;break;default:A.Hidden=0}delete A.state,A.name=ss(Ps(A.name)),delete A[0],n.Sheets.push(A);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":a={},a.Name=Ps(A.name),A.comment&&(a.Comment=A.comment),A.localSheetId&&(a.Sheet=+A.localSheetId),sa(A.hidden||"0")&&(a.Hidden=!0),i=c+l.length;break;case"</definedName>":a.Ref=ss(Ps(t.slice(i,c))),n.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete A[0],n.CalcPr=A;break;case"<calcPr/>":delete A[0],n.CalcPr=A;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+A[0]+" in workbook")}return l}),S0.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return eQ(n),n}function nQ(t){var e=[oi];e[e.length]=Xt("workbook",null,{xmlns:S0[0],"xmlns:r":Mi.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(u4.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Xt("workbookPr",null,r);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:ks(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Xt("sheet",null,i)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Xt("definedName",ks(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function vhe(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=WT(t),n.name=ol(t),n}function xhe(t,e){return e||(e=wt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),WB(t.strRelID,e),so(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function yhe(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?ol(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function whe(t,e){e||(e=wt(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),K7(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function bhe(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function _he(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=Zae(t),i=iAe(t,0,n),o=$B(t);t.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Che(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Ax[16]={n:"BrtFRTArchID$",f:bhe},PA(t,function(l,c,A){switch(A){case 156:i.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Zo(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([A,l]):i[0]=[A,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(A),s=!0;break;case 36:r.pop(),s=!1;break;case 37:r.push(A),s=!0;break;case 38:r.pop(),s=!1;break;case 16:break;default:if(!c.T){if(!s||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+A.toString(16))}}},e),eQ(n),n.Names=a,n.supbooks=i,n}function Ehe(t,e){Mt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,s={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};Mt(t,156,xhe(s))}Mt(t,144)}function She(t,e){e||(e=wt(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return so("SheetJS",e),so(P2.version,e),so(P2.version,e),so("7262",e),e.length>e.l?e.slice(0,e.l):e}function The(t,e){e||(e=wt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function Nhe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,s=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&s==-1?s=r:n[r].Hidden==1&&a==-1&&(a=r);a>s||(Mt(t,135),Mt(t,158,The(s)),Mt(t,136))}}function Bhe(t,e){var n=ac();return Mt(n,131),Mt(n,128,She()),Mt(n,153,whe(t.Workbook&&t.Workbook.WBProps||null)),Nhe(n,t),Ehe(n,t),Mt(n,132),n.end()}function khe(t,e,n){return e.slice(-4)===".bin"?Che(t,n):ghe(t,n)}function Ihe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?qfe(t,r,n,s,a,i,o):_Ae(t,r,n,s,a,i,o)}function Fhe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?lhe(t,r,n,s,a):ihe(t,r,n,s,a)}function Dhe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Rue():Pue()}function Lhe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Due():Lue()}function Rhe(t,e,n,r){return e.slice(-4)===".bin"?kce(t,n,r):vce(t,n,r)}function Phe(t,e,n){return PH(t,n)}function Mhe(t,e,n){return e.slice(-4)===".bin"?Mle(t,n):Lle(t,n)}function Uhe(t,e,n){return e.slice(-4)===".bin"?Nue(t,n):xue(t,n)}function Ohe(t,e,n){return e.slice(-4)===".bin"?pue(t):hue(t)}function jhe(t,e,n,r){return n.slice(-4)===".bin"?gue(t,e,n,r):void 0}function Hhe(t,e,n){return e.slice(-4)===".bin"?due(t,e,n):fue(t,e,n)}function Qhe(t,e,n){return(e.slice(-4)===".bin"?Bhe:nQ)(t)}function Vhe(t,e,n,r,s){return(e.slice(-4)===".bin"?rhe:XH)(t,n,r,s)}function zhe(t,e,n){return(e.slice(-4)===".bin"?jce:LH)(t,n)}function Ghe(t,e,n){return(e.slice(-4)===".bin"?jle:SH)(t,n)}function qhe(t,e,n){return(e.slice(-4)===".bin"?Bue:OH)(t)}function Khe(t){return(t.slice(-4)===".bin"?Aue:MH)()}var rQ=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,sQ=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ou(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var s=t.match(rQ),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(sQ),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}function $he(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(rQ),s,a,i,o;if(r)for(o=0;o!=r.length;++o)s=r[o].match(sQ),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),n[i]=s[2].slice(1,s[2].length-1));return n}var Fv;function Whe(t,e){var n=Fv[t]||ss(t);return n==="General"?A0(e):wu(n,e)}function Yhe(t,e,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=sa(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=ia(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[ss(e)]=s}function Xhe(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||MA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=rx(t.v):t.w=A0(t.v):t.w=Whe(e||"General",t.v)}catch(a){if(n.WTF)throw a}try{var r=Fv[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&Up(r)){var s=Vh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(n.WTF)throw a}}}function Jhe(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=uce[r.Pattern]||r.Pattern)}t[e.ID]=e}function Zhe(t,e,n,r,s,a,i,o,l,c){var A="General",h=r.StyleID,p={};c=c||{};var g=[],w=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(A=a[h].nf),a[h].Interior&&g.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=sa(t);break;case"String":r.t="s",r.r=CL(ss(t)),r.v=t.indexOf("<")>-1?ss(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(ia(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=ss(t):r.v<60&&(r.v=r.v-1),(!A||A=="General")&&(A="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=J7[t],c.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=CL(e||t));break}if(Xhe(r,A,c),c.cellFormula!==!1)if(r.Formula){var x=ss(r.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),r.f=ep(x,s),delete r.Formula,r.ArrayRange=="RC"?r.F=ep("RC:RC",s):r.ArrayRange&&(r.F=ep(r.ArrayRange,s),l.push([as(r.F),r.F]))}else for(w=0;w<l.length;++w)s.r>=l[w][0].s.r&&s.r<=l[w][0].e.r&&s.c>=l[w][0].s.c&&s.c<=l[w][0].e.c&&(r.F=l[w][1]);c.cellStyles&&(g.forEach(function(S){!p.patternType&&S.patternType&&(p.patternType=S.patternType)}),r.s=p),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function e0e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function tS(t,e){var n=e||{};Op();var r=nv(QB(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=Ps(r));var s=r.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=oa(n);return i.type="string",yp.to_workbook(r,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ke){s.indexOf("<"+Ke)>=0&&(a=!0)}),a)return O0e(r,n);Fv={"General Number":"General","General Date":qn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":qn[15],"Short Date":qn[14],"Long Time":qn[19],"Medium Time":qn[18],"Short Time":qn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:qn[2],Standard:qn[4],Percent:qn[10],Scientific:qn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,A={},h=[],p=n.dense?[]:{},g="",w={},x={},S=Ou('<Data ss:Type="String">'),N=0,F=0,D=0,R={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},P={},E="",T=0,k=[],z={},M={},U=0,G=[],q=[],oe={},ee=[],le,K=!1,ne=[],J=[],ce={},Q=0,Z=0,se={Sheets:[],WBProps:{date1904:!1}},ie={};ix.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var fe="";o=ix.exec(r);)switch(o[3]=(fe=o[3]).toLowerCase()){case"data":if(fe=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Zhe(r.slice(N,o.index),E,S,l[l.length-1][0]=="comment"?oe:w,{c:F,r:D},j,ee[F],x,ne,n):(E="",S=Ou(o[0]),N=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(q.length>0&&(w.c=q),(!n.sheetRows||n.sheetRows>D)&&w.v!==void 0&&(n.dense?(p[D]||(p[D]=[]),p[D][F]=w):p[ba(F)+ii(D)]=w),w.HRef&&(w.l={Target:ss(w.HRef)},w.HRefScreenTip&&(w.l.Tooltip=w.HRefScreenTip),delete w.HRef,delete w.HRefScreenTip),(w.MergeAcross||w.MergeDown)&&(Q=F+(parseInt(w.MergeAcross,10)|0),Z=D+(parseInt(w.MergeDown,10)|0),k.push({s:{c:F,r:D},e:{c:Q,r:Z}})),!n.sheetStubs)w.MergeAcross?F=Q+1:++F;else if(w.MergeAcross||w.MergeDown){for(var Se=F;Se<=Q;++Se)for(var ge=D;ge<=Z;++ge)(Se>F||ge>D)&&(n.dense?(p[ge]||(p[ge]=[]),p[ge][Se]={t:"z"}):p[ba(Se)+ii(ge)]={t:"z"});F=Q+1}else++F;else w=$he(o[0]),w.Index&&(F=+w.Index-1),F<R.s.c&&(R.s.c=F),F>R.e.c&&(R.e.c=F),o[0].slice(-2)==="/>"&&++F,q=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(D<R.s.r&&(R.s.r=D),D>R.e.r&&(R.e.r=D),o[0].slice(-2)==="/>"&&(x=Ou(o[0]),x.Index&&(D=+x.Index-1)),F=0,++D):(x=Ou(o[0]),x.Index&&(D=+x.Index-1),ce={},(x.AutoFitHeight=="0"||x.Height)&&(ce.hpx=parseInt(x.Height,10),ce.hpt=dx(ce.hpx),J[D]=ce),x.Hidden=="1"&&(ce.hidden=!0,J[D]=ce));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));h.push(g),R.s.r<=R.e.r&&R.s.c<=R.e.c&&(p["!ref"]=vr(R),n.sheetRows&&n.sheetRows<=R.e.r&&(p["!fullref"]=p["!ref"],R.e.r=n.sheetRows-1,p["!ref"]=vr(R))),k.length&&(p["!merges"]=k),ee.length>0&&(p["!cols"]=ee),J.length>0&&(p["!rows"]=J),A[g]=p}else R={s:{r:2e6,c:2e6},e:{r:0,c:0}},D=F=0,l.push([o[3],!1]),c=Ou(o[0]),g=ss(c.Name),p=n.dense?[]:{},k=[],ne=[],J=[],ie={name:g,Hidden:0},se.Sheets.push(ie);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),ee=[],K=!1}break;case"style":o[1]==="/"?Jhe(j,P,n):P=Ou(o[0]);break;case"numberformat":P.nf=ss(Ou(o[0]).Format||"General"),Fv[P.nf]&&(P.nf=Fv[P.nf]);for(var xe=0;xe!=392&&qn[xe]!=P.nf;++xe);if(xe==392){for(xe=57;xe!=392;++xe)if(qn[xe]==null){xA(P.nf,xe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(le=Ou(o[0]),le.Hidden&&(le.hidden=!0,delete le.Hidden),le.Width&&(le.wpx=parseInt(le.Width,10)),!K&&le.wpx>10){K=!0,nl=FH;for(var ve=0;ve<ee.length;++ve)ee[ve]&&sh(ee[ve])}K&&sh(le),ee[le.Index-1||ee.length]=le;for(var me=0;me<+le.Span;++me)ee[ee.length]=oa(le);break;case"namedrange":if(o[1]==="/")break;se.Names||(se.Names=[]);var he=tr(o[0]),He={Name:he.Name,Ref:ep(he.RefersTo.slice(1),{r:0,c:0})};se.Sheets.length>0&&(He.Sheet=se.Sheets.length-1),se.Names.push(He);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=r.slice(T,o.index):T=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;P.Interior=Ou(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Cie(z,fe,r.slice(U,o.index)):U=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));e0e(oe),q.push(oe)}else l.push([o[3],!1]),c=Ou(o[0]),oe={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var et=Ou(o[0]);p["!autofilter"]={ref:ep(et.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return AR(r,n);var Ue=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ue=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ue=!1}break;case"excelworkbook":switch(o[3]){case"date1904":se.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ue=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ue=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(U,o.index)){case"SheetHidden":ie.Hidden=1;break;case"SheetVeryHidden":ie.Hidden=2;break}else U=o.index+o[0].length;break;case"header":p["!margins"]||e0(p["!margins"]={},"xlml"),isNaN(+tr(o[0]).Margin)||(p["!margins"].header=+tr(o[0]).Margin);break;case"footer":p["!margins"]||e0(p["!margins"]={},"xlml"),isNaN(+tr(o[0]).Margin)||(p["!margins"].footer=+tr(o[0]).Margin);break;case"pagemargins":var Ie=tr(o[0]);p["!margins"]||e0(p["!margins"]={},"xlml"),isNaN(+Ie.Top)||(p["!margins"].top=+Ie.Top),isNaN(+Ie.Left)||(p["!margins"].left=+Ie.Left),isNaN(+Ie.Right)||(p["!margins"].right=+Ie.Right),isNaN(+Ie.Bottom)||(p["!margins"].bottom=+Ie.Bottom);break;case"displayrighttoleft":se.Views||(se.Views=[]),se.Views[0]||(se.Views[0]={}),se.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ue=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ue=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ue=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ue=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ue=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ue=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ue=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ue=!1}break;case"smarttags":break;default:Ue=!1;break}if(Ue||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Yhe(M,fe,G,r.slice(U,o.index)):(G=o,U=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var je={};return!n.bookSheets&&!n.bookProps&&(je.Sheets=A),je.SheetNames=h,je.Workbook=se,je.SSF=oa(qn),je.Props=z,je.Custprops=M,je}function n5(t,e){switch(A4(e=e||{}),e.type||"base64"){case"base64":return tS(Oc(t),e);case"binary":case"buffer":case"file":return tS(t,e);case"array":return tS(dh(t),e)}}function t0e(t,e){var n=[];return t.Props&&n.push(Eie(t.Props,e)),t.Custprops&&n.push(Sie(t.Props,t.Custprops)),n.join("")}function n0e(){return""}function r0e(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var a=[];a.push(Xt("NumberFormat",null,{"ss:Format":ks(qn[r.numFmtId])}));var i={"ss:ID":"s"+(21+s)};n.push(Xt("Style",a.join(""),i))}),Xt("Styles",n.join(""))}function aQ(t){return Xt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+i4(t.Ref,{r:0,c:0})})}function s0e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(aQ(s)))}return Xt("Names",n.join(""))}function a0e(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(aQ(o)))}return a.join("")}function i0e(t,e,n,r){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Xt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Xt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Xt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(Xt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Bo("ProtectContents","True")),t["!protect"].objects&&s.push(Bo("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Bo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Bo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Bo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Xt("WorksheetOptions",s.join(""),{xmlns:kc.x})}function o0e(t){return t.map(function(e){var n=Nae(e.t||""),r=Xt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Xt("Comment",r,{"ss:Author":e.a})}).join("")}function l0e(t,e,n,r,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+ks(i4(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=_a(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=ks(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=ks(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],A=0;A!=c.length;++A)c[A].s.c!=i.c||c[A].s.r!=i.r||(c[A].e.c>c[A].s.c&&(o["ss:MergeAcross"]=c[A].e.c-c[A].s.c),c[A].e.r>c[A].s.r&&(o["ss:MergeDown"]=c[A].e.r-c[A].s.r));var h="",p="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",p=String(t.v);break;case"b":h="Boolean",p=t.v?"1":"0";break;case"e":h="Error",p=MA[t.v];break;case"d":h="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||qn[14]);break;case"s":h="String",p=Tae(t.v||"");break}var g=fh(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var w=t.v!=null?p:"",x=t.t=="z"?"":'<Data ss:Type="'+h+'">'+w+"</Data>";return(t.c||[]).length>0&&(x+=o0e(t.c)),Xt("Cell",x,o)}function c0e(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=wp(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function u0e(t,e,n,r){if(!t["!ref"])return"";var s=as(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(S,N){sh(S);var F=!!S.width,D=x_(N,S),R={"ss:Index":N+1};F&&(R["ss:Width"]=cx(D.width)),S.hidden&&(R["ss:Hidden"]="1"),o.push(Xt("Column",null,R))});for(var l=Array.isArray(t),c=s.s.r;c<=s.e.r;++c){for(var A=[c0e(c,(t["!rows"]||[])[c])],h=s.s.c;h<=s.e.c;++h){var p=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>c)&&!(a[i].e.c<h)&&!(a[i].e.r<c)){(a[i].s.c!=h||a[i].s.r!=c)&&(p=!0);break}if(!p){var g={r:c,c:h},w=Yn(g),x=l?(t[c]||[])[h]:t[w];A.push(l0e(x,w,t,e,n,r,g))}}A.push("</Row>"),A.length>2&&o.push(A.join(""))}return o.join("")}function d0e(t,e,n){var r=[],s=n.SheetNames[t],a=n.Sheets[s],i=a?a0e(a,e,t,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?u0e(a,e,t,n):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(i0e(a,e,t,n)),r.join("")}function A0e(t,e){e||(e={}),t.SSF||(t.SSF=oa(qn)),t.SSF&&(Op(),A_(t.SSF),e.revssf=h_(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],fh(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(t0e(t,e)),n.push(n0e()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Xt("Worksheet",d0e(r,e,t),{"ss:Name":ks(t.SheetNames[r])}));return n[2]=r0e(t,e),n[3]=s0e(t),oi+Xt("Workbook",n.join(""),{xmlns:kc.ss,"xmlns:o":kc.o,"xmlns:x":kc.x,"xmlns:ss":kc.ss,"xmlns:dt":kc.dt,"xmlns:html":kc.html})}function f0e(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=sie(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=aie(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var h0e=[60,1084,2066,2165,2175];function m0e(t,e,n,r,s){var a=r,i=[],o=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),n.l+=a;for(var l=mA(n,n.l),c=r5[l],A=0;c!=null&&h0e.indexOf(l)>-1;)a=mA(n,n.l+2),A=n.l+4,l==2066?A+=4:(l==2165||l==2175)&&(A+=12),o=n.slice(A,n.l+4+a),i.push(o),n.l+=4+a,c=r5[l=mA(n,n.l)];var h=ro(i);To(h,0);var p=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(p),p+=i[g].length;if(h.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,s)}function vd(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=qn[r])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||MA[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=rx(t.v):t.w=A0(t.v):t.w=wu(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&r&&t.t=="n"&&Up(qn[r]||String(r))){var s=Vh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function ky(t,e,n){return{v:t,ixfe:e,t:n}}function p0e(t,e){var n={opts:{}},r={},s=e.dense?[]:{},a={},i={},o=null,l=[],c="",A={},h,p="",g,w,x,S,N={},F=[],D,R,j=[],P=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},k=function(Qt){return Qt<8?Xh[Qt]:Qt<64&&P[Qt-8]||Xh[Qt]},z=function(Qt,_t,Hn){var dn=_t.XF.data;if(!(!dn||!dn.patternType||!Hn||!Hn.cellStyles)){_t.s={},_t.s.patternType=dn.patternType;var kr;(kr=lx(k(dn.icvFore)))&&(_t.s.fgColor={rgb:kr}),(kr=lx(k(dn.icvBack)))&&(_t.s.bgColor={rgb:kr})}},M=function(Qt,_t,Hn){if(!(ce>1)&&!(Hn.sheetRows&&Qt.r>=Hn.sheetRows)){if(Hn.cellStyles&&_t.XF&&_t.XF.data&&z(Qt,_t,Hn),delete _t.ixfe,delete _t.XF,h=Qt,p=Yn(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Hn.cellFormula&&_t.f){for(var dn=0;dn<F.length;++dn)if(!(F[dn][0].s.c>Qt.c||F[dn][0].s.r>Qt.r)&&!(F[dn][0].e.c<Qt.c||F[dn][0].e.r<Qt.r)){_t.F=vr(F[dn][0]),(F[dn][0].s.c!=Qt.c||F[dn][0].s.r!=Qt.r)&&delete _t.f,_t.f&&(_t.f=""+Zo(F[dn][1],i,Qt,ne,U));break}}Hn.dense?(s[Qt.r]||(s[Qt.r]=[]),s[Qt.r][Qt.c]=_t):s[p]=_t}},U={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:F,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(U.password=e.password);var G,q=[],oe=[],ee=[],le=[],K=!1,ne=[];ne.SheetNames=U.snames,ne.sharedf=U.sharedf,ne.arrayf=U.arrayf,ne.names=[],ne.XTI=[];var J=0,ce=0,Q=0,Z=[],se=[],ie;U.codepage=1200,zu(1200);for(var fe=!1;t.l<t.length-1;){var Se=t.l,ge=t.read_shift(2);if(ge===0&&J===10)break;var xe=t.l===t.length?0:t.read_shift(2),ve=r5[ge];if(ve&&ve.f){if(e.bookSheets&&J===133&&ge!==133)break;if(J=ge,ve.r===2||ve.r==12){var me=t.read_shift(2);if(xe-=2,!U.enc&&me!==ge&&((me&255)<<8|me>>8)!==ge)throw new Error("rt mismatch: "+me+"!="+ge);ve.r==12&&(t.l+=10,xe-=10)}var he={};if(ge===10?he=ve.f(t,xe,U):he=m0e(ge,ve,t,xe,U),ce==0&&[9,521,1033,2057].indexOf(J)===-1)continue;switch(ge){case 34:n.opts.Date1904=E.WBProps.date1904=he;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(U.enc||(t.l=0),U.enc=he,!e.password)throw new Error("File is password-protected");if(he.valid==null)throw new Error("Encryption scheme unsupported");if(!he.valid)throw new Error("Password is incorrect");break;case 92:U.lastuser=he;break;case 66:var He=Number(he);switch(He){case 21010:He=1200;break;case 32768:He=1e4;break;case 32769:He=1252;break}zu(U.codepage=He),fe=!0;break;case 317:U.rrtabid=he;break;case 25:U.winlocked=he;break;case 439:n.opts.RefreshAll=he;break;case 12:n.opts.CalcCount=he;break;case 16:n.opts.CalcDelta=he;break;case 17:n.opts.CalcIter=he;break;case 13:n.opts.CalcMode=he;break;case 14:n.opts.CalcPrecision=he;break;case 95:n.opts.CalcSaveRecalc=he;break;case 15:U.CalcRefMode=he;break;case 2211:n.opts.FullCalc=he;break;case 129:he.fDialog&&(s["!type"]="dialog"),he.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),he.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:j.push(he);break;case 430:ne.push([he]),ne[ne.length-1].XTI=[];break;case 35:case 547:ne[ne.length-1].push(he);break;case 24:case 536:ie={Name:he.Name,Ref:Zo(he.rgce,i,null,ne,U)},he.itab>0&&(ie.Sheet=he.itab-1),ne.names.push(ie),ne[0]||(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].push(he),he.Name=="_xlnm._FilterDatabase"&&he.itab>0&&he.rgce&&he.rgce[0]&&he.rgce[0][0]&&he.rgce[0][0][0]=="PtgArea3d"&&(se[he.itab-1]={ref:vr(he.rgce[0][0][1][2])});break;case 22:U.ExternCount=he;break;case 23:ne.length==0&&(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].XTI=ne[ne.length-1].XTI.concat(he),ne.XTI=ne.XTI.concat(he);break;case 2196:if(U.biff<8)break;ie!=null&&(ie.Comment=he[1]);break;case 18:s["!protect"]=he;break;case 19:he!==0&&U.WTF&&console.error("Password verifier: "+he);break;case 133:a[he.pos]=he,U.snames.push(he.name);break;case 10:{if(--ce)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=vr(i),e.sheetRows&&e.sheetRows<=i.e.r){var et=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=vr(i),i.e.r=et}i.e.r++,i.e.c++}q.length>0&&(s["!merges"]=q),oe.length>0&&(s["!objects"]=oe),ee.length>0&&(s["!cols"]=ee),le.length>0&&(s["!rows"]=le),E.Sheets.push(T)}c===""?A=s:r[c]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(U.biff===8&&(U.biff={9:2,521:3,1033:4}[ge]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[he.BIFFVer]||8),U.biffguess=he.BIFFVer==0,he.BIFFVer==0&&he.dt==4096&&(U.biff=5,fe=!0,zu(U.codepage=28591)),U.biff==8&&he.BIFFVer==0&&he.dt==16&&(U.biff=2),ce++)break;if(s=e.dense?[]:{},U.biff<8&&!fe&&(fe=!0,zu(U.codepage=e.codepage||1252)),U.biff<5||he.BIFFVer==0&&he.dt==4096){c===""&&(c="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ue={pos:t.l-xe,name:c};a[Ue.pos]=Ue,U.snames.push(c)}else c=(a[Se]||{name:""}).name;he.dt==32&&(s["!type"]="chart"),he.dt==64&&(s["!type"]="macro"),q=[],oe=[],U.arrayf=F=[],ee=[],le=[],K=!1,T={Hidden:(a[Se]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[he.r]||[])[he.c]:s[Yn({c:he.c,r:he.r})])&&++he.c,D={ixfe:he.ixfe,XF:j[he.ixfe]||{},v:he.val,t:"n"},Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:he.c,r:he.r},D,e);break;case 5:case 517:D={ixfe:he.ixfe,XF:j[he.ixfe],v:he.val,t:he.t},Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:he.c,r:he.r},D,e);break;case 638:D={ixfe:he.ixfe,XF:j[he.ixfe],v:he.rknum,t:"n"},Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:he.c,r:he.r},D,e);break;case 189:for(var Ie=he.c;Ie<=he.C;++Ie){var je=he.rkrec[Ie-he.c][0];D={ixfe:je,XF:j[je],v:he.rkrec[Ie-he.c][1],t:"n"},Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:Ie,r:he.r},D,e)}break;case 6:case 518:case 1030:{if(he.val=="String"){o=he;break}if(D=ky(he.val,he.cell.ixfe,he.tt),D.XF=j[D.ixfe],e.cellFormula){var Ke=he.formula;if(Ke&&Ke[0]&&Ke[0][0]&&Ke[0][0][0]=="PtgExp"){var rt=Ke[0][0][1][0],xt=Ke[0][0][1][1],Tt=Yn({r:rt,c:xt});N[Tt]?D.f=""+Zo(he.formula,i,he.cell,ne,U):D.F=((e.dense?(s[rt]||[])[xt]:s[Tt])||{}).F}else D.f=""+Zo(he.formula,i,he.cell,ne,U)}Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M(he.cell,D,e),o=he}break;case 7:case 519:if(o)o.val=he,D=ky(he,o.cell.ixfe,"s"),D.XF=j[D.ixfe],e.cellFormula&&(D.f=""+Zo(o.formula,i,o.cell,ne,U)),Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M(o.cell,D,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{F.push(he);var vt=Yn(he[0].s);if(g=e.dense?(s[he[0].s.r]||[])[he[0].s.c]:s[vt],e.cellFormula&&g){if(!o||!vt||!g)break;g.f=""+Zo(he[1],i,he[0],ne,U),g.F=vr(he[0])}}break;case 1212:{if(!e.cellFormula)break;if(p){if(!o)break;N[Yn(o.cell)]=he[0],g=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Yn(o.cell)],(g||{}).f=""+Zo(he[0],i,h,ne,U)}}break;case 253:D=ky(l[he.isst].t,he.ixfe,"s"),l[he.isst].h&&(D.h=l[he.isst].h),D.XF=j[D.ixfe],Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:he.c,r:he.r},D,e);break;case 513:e.sheetStubs&&(D={ixfe:he.ixfe,XF:j[he.ixfe],t:"z"},Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:he.c,r:he.r},D,e));break;case 190:if(e.sheetStubs)for(var Vt=he.c;Vt<=he.C;++Vt){var Kt=he.ixfe[Vt-he.c];D={ixfe:Kt,XF:j[Kt],t:"z"},Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:Vt,r:he.r},D,e)}break;case 214:case 516:case 4:D=ky(he.val,he.ixfe,"s"),D.XF=j[D.ixfe],Q>0&&(D.z=Z[D.ixfe>>8&63]),vd(D,e,n.opts.Date1904),M({c:he.c,r:he.r},D,e);break;case 0:case 512:ce===1&&(i=he);break;case 252:l=he;break;case 1054:if(U.biff==4){Z[Q++]=he[1];for(var cn=0;cn<Q+163&&qn[cn]!=he[1];++cn);cn>=163&&xA(he[1],Q+163)}else xA(he[1],he[0]);break;case 30:{Z[Q++]=he;for(var Gt=0;Gt<Q+163&&qn[Gt]!=he;++Gt);Gt>=163&&xA(he,Q+163)}break;case 229:q=q.concat(he);break;case 93:oe[he.cmo[0]]=U.lastobj=he;break;case 438:U.lastobj.TxO=he;break;case 127:U.lastobj.ImData=he;break;case 440:for(S=he[0].s.r;S<=he[0].e.r;++S)for(x=he[0].s.c;x<=he[0].e.c;++x)g=e.dense?(s[S]||[])[x]:s[Yn({c:x,r:S})],g&&(g.l=he[1]);break;case 2048:for(S=he[0].s.r;S<=he[0].e.r;++S)for(x=he[0].s.c;x<=he[0].e.c;++x)g=e.dense?(s[S]||[])[x]:s[Yn({c:x,r:S})],g&&g.l&&(g.l.Tooltip=he[1]);break;case 28:{if(U.biff<=5&&U.biff>=2)break;g=e.dense?(s[he[0].r]||[])[he[0].c]:s[Yn(he[0])];var Wt=oe[he[2]];g||(e.dense?(s[he[0].r]||(s[he[0].r]=[]),g=s[he[0].r][he[0].c]={t:"z"}):g=s[Yn(he[0])]={t:"z"},i.e.r=Math.max(i.e.r,he[0].r),i.s.r=Math.min(i.s.r,he[0].r),i.e.c=Math.max(i.e.c,he[0].c),i.s.c=Math.min(i.s.c,he[0].c)),g.c||(g.c=[]),w={a:he[1],t:Wt.TxO.t},g.c.push(w)}break;case 2173:rue(j[he.ixfe],he.ext);break;case 125:{if(!U.cellStyles)break;for(;he.e>=he.s;)ee[he.e--]={width:he.w/256,level:he.level||0,hidden:!!(he.flags&1)},K||(K=!0,r4(he.w/256)),sh(ee[he.e+1])}break;case 520:{var sn={};he.level!=null&&(le[he.r]=sn,sn.level=he.level),he.hidden&&(le[he.r]=sn,sn.hidden=!0),he.hpt&&(le[he.r]=sn,sn.hpt=he.hpt,sn.hpx=wp(he.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||e0(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ge]]=he;break;case 161:s["!margins"]||e0(s["!margins"]={}),s["!margins"].header=he.header,s["!margins"].footer=he.footer;break;case 574:he.RTL&&(E.Views[0].RTL=!0);break;case 146:P=he;break;case 2198:G=he;break;case 140:R=he;break;case 442:c?T.CodeName=he||T.name:E.WBProps.CodeName=he||"ThisWorkbook";break}}else ve||console.error("Missing Info for XLS Record 0x"+ge.toString(16)),t.l+=xe}return n.SheetNames=za(a).sort(function(Ht,Qt){return Number(Ht)-Number(Qt)}).map(function(Ht){return a[Ht].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&A["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=A)):n.Preamble=A,n.Sheets&&se.forEach(function(Ht,Qt){n.Sheets[n.SheetNames[Qt]]["!autofilter"]=Ht}),n.Strings=l,n.SSF=oa(qn),U.enc&&(n.Encryption=U.enc),G&&(n.Themes=G),n.Metadata={},R!==void 0&&(n.Metadata.Country=R),ne.names.length>0&&(E.Names=ne.names),n.Workbook=E,n}var Dv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function g0e(t,e,n){var r=Bn.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=QL(r,YT,Dv.DSI);for(var a in s)e[a]=s[a]}catch(c){if(n.WTF)throw c}var i=Bn.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=QL(i,XT,Dv.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(c){if(n.WTF)throw c}e.HeadingPairs&&e.TitlesOfParts&&(sH(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function v0e(t,e){var n=[],r=[],s=[],a=0,i,o=vL(YT,"n"),l=vL(XT,"n");if(t.Props)for(i=za(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=za(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Custprops[i[a]]]);var c=[];for(a=0;a<s.length;++a)dH.indexOf(s[a][0])>-1||rH.indexOf(s[a][0])>-1||s[a][1]!=null&&c.push(s[a]);r.length&&Bn.utils.cfb_add(e,"/SummaryInformation",VL(r,Dv.SI,l,XT)),(n.length||c.length)&&Bn.utils.cfb_add(e,"/DocumentSummaryInformation",VL(n,Dv.DSI,o,YT,c.length?c:null,Dv.UDI))}function iQ(t,e){e||(e={}),A4(e),DB(),e.codepage&&FB(e.codepage);var n,r;if(t.FullPaths){if(Bn.find(t,"/encryption"))throw new Error("File is password-protected");n=Bn.find(t,"!CompObj"),r=Bn.find(t,"/Workbook")||Bn.find(t,"/Book")}else{switch(e.type){case"base64":t=Fc(Oc(t));break;case"binary":t=Fc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}To(t,0),r={content:t}}var s,a;if(n&&f0e(n),e.bookProps&&!e.bookSheets)s={};else{var i=Fr?"buffer":"array";if(r&&r.content)s=p0e(r.content,e);else if((a=Bn.find(t,"PerfectOffice_MAIN"))&&a.content)s=Zh.to_workbook(a.content,(e.type=i,e));else if((a=Bn.find(t,"NativeContent_MAIN"))&&a.content)s=Zh.to_workbook(a.content,(e.type=i,e));else throw(a=Bn.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Bn.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Iue(t))}var o={};return t.FullPaths&&g0e(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function x0e(t,e){var n=e||{},r=Bn.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Bn.utils.cfb_add(r,s,oQ(t,n)),n.biff==8&&(t.Props||t.Custprops)&&v0e(t,r),n.biff==8&&t.vbaraw&&Fue(r,Bn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var Ax={0:{f:VAe},1:{f:XAe},2:{f:pfe},3:{f:afe},4:{f:tfe},5:{f:ffe},6:{f:wfe},7:{f:cfe},8:{f:Nfe},9:{f:Tfe},10:{f:Efe},11:{f:Sfe},12:{f:ZAe},13:{f:vfe},14:{f:ofe},15:{f:rfe},16:{f:JH},17:{f:_fe},18:{f:dfe},19:{f:KB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:_he},40:{},42:{},43:{f:wce},44:{f:xce},45:{f:Cce},46:{f:Sce},47:{f:Ece},48:{},49:{f:qae},50:{},51:{f:iue},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:bH},62:{f:yfe},63:{f:mue},64:{f:zfe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:cl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:jfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:WAe},148:{f:qAe,p:16},151:{f:Lfe},152:{},153:{f:yhe},154:{},155:{},156:{f:vhe},157:{},158:{},159:{T:1,f:Ple},160:{T:-1},161:{T:1,f:k0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Bfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:sue},336:{T:-1},337:{f:cue,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:WT},357:{},358:{},359:{},360:{T:1},361:{},362:{f:wH},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Rfe},427:{f:Pfe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Ufe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:$Ae},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Ffe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:WT},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Sue},633:{T:1},634:{T:-1},635:{T:1,f:Cue},636:{T:-1},637:{f:Yae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ohe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Gfe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},r5={6:{f:ZE},10:{f:Af},12:{f:yi},13:{f:yi},14:{f:Za},15:{f:Za},16:{f:al},17:{f:Za},18:{f:Za},19:{f:yi},20:{f:WL},21:{f:WL},23:{f:wH},24:{f:XL},25:{f:Za},26:{},27:{},28:{f:Goe},29:{},34:{f:Za},35:{f:YL},38:{f:al},39:{f:al},40:{f:al},41:{f:al},42:{f:Za},43:{f:Za},47:{f:rce},49:{f:voe},51:{f:yi},60:{},61:{f:foe},64:{f:Za},65:{f:goe},66:{f:yi},77:{},80:{},81:{},82:{},85:{f:yi},89:{},90:{},91:{},92:{f:noe},93:{f:$oe},94:{},95:{f:Za},96:{},97:{},99:{f:Za},125:{f:bH},128:{f:Doe},129:{f:soe},130:{f:yi},131:{f:Za},132:{f:Za},133:{f:aoe},134:{},140:{f:nle},141:{f:yi},144:{},146:{f:ale},151:{},152:{},153:{},154:{},155:{},156:{f:yi},157:{},158:{},160:{f:Ale},161:{f:lle},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Boe},190:{f:koe},193:{f:Af},197:{},198:{},199:{},200:{},201:{},202:{f:Za},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:yi},220:{},221:{f:Za},222:{},224:{f:Foe},225:{f:toe},226:{f:Af},227:{},229:{f:qoe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ooe},253:{f:yoe},255:{f:coe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:AH},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Za},353:{f:Af},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Uoe},431:{f:Za},432:{},433:{},434:{},437:{},438:{f:Xoe},439:{f:Za},440:{f:Joe},441:{},442:{f:Zx},443:{},444:{f:yi},445:{},446:{},448:{f:Af},449:{f:Aoe,r:2},450:{f:Af},512:{f:qL},513:{f:dle},515:{f:Poe},516:{f:boe},517:{f:$L},519:{f:fle},520:{f:uoe},523:{},545:{f:JL},549:{f:GL},566:{},574:{f:moe},638:{f:Noe},659:{},1048:{},1054:{f:Coe},1084:{},1212:{f:Qoe},2048:{f:ele},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ty},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Af},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ile,r:12},2173:{f:nue,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Za,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Hoe,r:12},2197:{},2198:{f:Yce,r:12},2199:{},2200:{},2201:{},2202:{f:Voe,r:12},2203:{f:Af},2204:{},2205:{},2206:{},2207:{},2211:{f:doe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:yi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:cle},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:sle},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:qL},1:{},2:{f:vle},3:{f:ple},4:{f:mle},5:{f:$L},7:{f:yle},8:{},9:{f:Ty},11:{},22:{f:yi},30:{f:Soe},31:{},32:{},33:{f:JL},36:{},37:{f:GL},50:{f:wle},62:{},52:{},67:{},68:{f:yi},69:{},86:{},126:{},127:{f:hle},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ble},223:{},234:{},354:{},421:{},518:{f:ZE},521:{f:Ty},536:{f:XL},547:{f:YL},561:{},579:{},1030:{f:ZE},1033:{f:Ty},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Zt(t,e,n,r){var s=e;if(!isNaN(s)){var a=r||(n||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&zB(n)&&t.push(n)}}function y0e(t,e,n,r){var s=(n||[]).length||0;if(s<=8224)return Zt(t,e,n,s);var a=e;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var A=t.next(4);for(A.write_shift(2,a),A.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<s;){for(A=t.next(4),A.write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;A.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function r1(t,e,n){return t||(t=wt(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function w0e(t,e,n,r){var s=wt(9);return r1(s,t,e),fH(n,r||"b",s),s}function b0e(t,e,n){var r=wt(8+2*n.length);return r1(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function _0e(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Oi(ia(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Zt(t,2,xle(n,r,s)):Zt(t,3,gle(n,r,s));return;case"b":case"e":Zt(t,5,w0e(n,r,e.v,e.t));return;case"s":case"str":Zt(t,4,b0e(n,r,(e.v||"").slice(0,255)));return}Zt(t,1,r1(null,n,r))}function C0e(t,e,n,r){var s=Array.isArray(e),a=as(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=vr(a)}for(var c=a.s.r;c<=a.e.r;++c){o=ii(c);for(var A=a.s.c;A<=a.e.c;++A){c===a.s.r&&(l[A]=ba(A)),i=l[A]+o;var h=s?(e[c]||[])[A]:e[i];h&&_0e(t,h,c,A)}}}function E0e(t,e){for(var n=e||{},r=ac(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==n.sheet&&(s=a);if(s==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Zt(r,n.biff==4?1033:n.biff==3?521:9,e4(t,16,n)),C0e(r,t.Sheets[t.SheetNames[s]],s,n),Zt(r,10),r.end()}function S0e(t,e,n){Zt(t,49,xoe({sz:12,name:"Arial"},n))}function T0e(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Zt(t,1054,Eoe(s,e[s],n))})}function N0e(t,e){var n=wt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Zt(t,2151,n),n=wt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),vH(as(e["!ref"]||"A1"),n),n.write_shift(4,4),Zt(t,2152,n)}function B0e(t,e){for(var n=0;n<16;++n)Zt(t,224,KL({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Zt(t,224,KL(r,0,e))})}function k0e(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Zt(t,440,Zoe(r)),r[1].Tooltip&&Zt(t,2048,tle(r))}delete e["!links"]}function I0e(t,e){if(e){var n=0;e.forEach(function(r,s){++n<=256&&r&&Zt(t,125,ole(x_(s,r),s))})}}function F0e(t,e,n,r,s){var a=16+fh(s.cellXfs,e,s);if(e.v==null&&!e.bf){Zt(t,513,p0(n,r,a));return}if(e.bf)Zt(t,6,sAe(e,n,r,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Oi(ia(e.v)):e.v;Zt(t,515,Moe(n,r,i,a));break;case"b":case"e":Zt(t,517,Roe(n,r,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=l4(s.Strings,e.v,s.revStrings);Zt(t,253,woe(n,r,o,a))}else Zt(t,516,_oe(n,r,(e.v||"").slice(0,255),a,s));break;default:Zt(t,513,p0(n,r,a))}}function D0e(t,e,n){var r=ac(),s=n.SheetNames[t],a=n.Sheets[s]||{},i=(n||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),c=e.biff==8,A,h="",p=[],g=as(a["!ref"]||"A1"),w=c?65536:16384;if(g.e.c>255||g.e.r>=w){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,w-1)}Zt(r,2057,e4(n,16,e)),Zt(r,13,uu(1)),Zt(r,12,uu(100)),Zt(r,15,Nl(!0)),Zt(r,17,Nl(!1)),Zt(r,16,h0(.001)),Zt(r,95,Nl(!0)),Zt(r,42,Nl(!1)),Zt(r,43,Nl(!1)),Zt(r,130,uu(1)),Zt(r,128,Loe()),Zt(r,131,Nl(!1)),Zt(r,132,Nl(!1)),c&&I0e(r,a["!cols"]),Zt(r,512,Toe(g,e)),c&&(a["!links"]=[]);for(var x=g.s.r;x<=g.e.r;++x){h=ii(x);for(var S=g.s.c;S<=g.e.c;++S){x===g.s.r&&(p[S]=ba(S)),A=p[S]+h;var N=l?(a[x]||[])[S]:a[A];N&&(F0e(r,N,x,S,e),c&&N.l&&a["!links"].push([A,N.l]))}}var F=o.CodeName||o.name||s;return c&&Zt(r,574,poe((i.Views||[])[0])),c&&(a["!merges"]||[]).length&&Zt(r,229,Koe(a["!merges"])),c&&k0e(r,a),Zt(r,442,hH(F)),c&&N0e(r,a),Zt(r,10),r.end()}function L0e(t,e,n){var r=ac(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=n.biff==8,l=n.biff==5;if(Zt(r,2057,e4(t,5,n)),n.bookType=="xla"&&Zt(r,135),Zt(r,225,o?uu(1200):null),Zt(r,193,Rie(2)),l&&Zt(r,191),l&&Zt(r,192),Zt(r,226),Zt(r,92,roe("SheetJS",n)),Zt(r,66,uu(o?1200:1252)),o&&Zt(r,353,uu(0)),o&&Zt(r,448),Zt(r,317,ule(t.SheetNames.length)),o&&t.vbaraw&&Zt(r,211),o&&t.vbaraw){var c=i.CodeName||"ThisWorkbook";Zt(r,442,hH(c))}Zt(r,156,uu(17)),Zt(r,25,Nl(!1)),Zt(r,18,Nl(!1)),Zt(r,19,uu(0)),o&&Zt(r,431,Nl(!1)),o&&Zt(r,444,uu(0)),Zt(r,61,hoe()),Zt(r,64,Nl(!1)),Zt(r,141,uu(0)),Zt(r,34,Nl(Ahe(t)=="true")),Zt(r,14,Nl(!0)),o&&Zt(r,439,Nl(!1)),Zt(r,218,uu(0)),S0e(r,t,n),T0e(r,t.SSF,n),B0e(r,n),o&&Zt(r,352,Nl(!1));var A=r.end(),h=ac();o&&Zt(h,140,rle()),o&&n.Strings&&y0e(h,252,loe(n.Strings)),Zt(h,10);var p=h.end(),g=ac(),w=0,x=0;for(x=0;x<t.SheetNames.length;++x)w+=(o?12:11)+(o?2:1)*t.SheetNames[x].length;var S=A.length+w+p.length;for(x=0;x<t.SheetNames.length;++x){var N=a[x]||{};Zt(g,133,ioe({pos:S,hs:N.Hidden||0,dt:0,name:t.SheetNames[x]},n)),S+=e[x].length}var F=g.end();if(w!=F.length)throw new Error("BS8 "+w+" != "+F.length);var D=[];return A.length&&D.push(A),F.length&&D.push(F),p.length&&D.push(p),ro(D)}function R0e(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=oa(qn)),t&&t.SSF&&(Op(),A_(t.SSF),n.revssf=h_(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,f4(n),n.cellXfs=[],fh(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)r[r.length]=D0e(s,n,t);return r.unshift(L0e(t,r,n)),ro(r)}function oQ(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var s=oc(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return R0e(t,e);case 4:case 3:case 2:return E0e(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function lR(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=xae(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,A=0,h=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},w=[];for(i=0;i<l.length;++i){var x=l[i].trim(),S=x.slice(0,3).toLowerCase();if(S=="<tr"){if(++c,n.sheetRows&&n.sheetRows<=c){--c;break}A=0;continue}if(!(S!="<td"&&S!="<th")){var N=x.split(/<\/t[dh]>/i);for(o=0;o<N.length;++o){var F=N[o].trim();if(F.match(/<t[dh]/i)){for(var D=F,R=0;D.charAt(0)=="<"&&(R=D.indexOf(">"))>-1;)D=D.slice(R+1);for(var j=0;j<w.length;++j){var P=w[j];P.s.c==A&&P.s.r<c&&c<=P.e.r&&(A=P.e.c+1,j=-1)}var E=tr(F.slice(0,F.indexOf(">")));p=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||p>1)&&w.push({s:{r:c,c:A},e:{r:c+(h||1)-1,c:A+p-1}});var T=E.t||E["data-t"]||"";if(!D.length){A+=p;continue}if(D=I7(D),g.s.r>c&&(g.s.r=c),g.e.r<c&&(g.e.r=c),g.s.c>A&&(g.s.c=A),g.e.c<A&&(g.e.c=A),!D.length){A+=p;continue}var k={t:"s",v:D};n.raw||!D.trim().length||T=="s"||(D==="TRUE"?k={t:"b",v:!0}:D==="FALSE"?k={t:"b",v:!1}:isNaN(qu(D))?isNaN(xp(D).getDate())||(k={t:"d",v:ia(D)},n.cellDates||(k={t:"n",v:Oi(k.v)}),k.z=n.dateNF||qn[14]):k={t:"n",v:qu(D)}),n.dense?(r[c]||(r[c]=[]),r[c][A]=k):r[Yn({r:c,c:A})]=k,A+=p}}}}return r["!ref"]=vr(g),w.length&&(r["!merges"]=w),r}function P0e(t,e,n,r){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>n||s[c].s.c>i)&&!(s[c].e.r<n||s[c].e.c<i)){if(s[c].s.r<n||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var A=Yn({r:n,c:i}),h=r.dense?(t[n]||[])[i]:t[A],p=h&&h.v!=null&&(h.h||HB(h.w||(BA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),r.editable?p='<span contenteditable="true">'+p+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),g.id=(r.id||"sjs")+"-"+A,a.push(Xt("td",p,g))}}var w="<tr>";return w+a.join("")+"</tr>"}var M0e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',U0e="</body></html>";function O0e(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return Ah(lR(n[0],e),e);var r=g4();return n.forEach(function(s,a){v4(r,lR(s,e),"Sheet"+(a+1))}),r}function j0e(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function lQ(t,e){var n=e||{},r=n.header!=null?n.header:M0e,s=n.footer!=null?n.footer:U0e,a=[r],i=oc(t["!ref"]);n.dense=Array.isArray(t),a.push(j0e(t,i,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(P0e(t,i,o,n));return a.push("</table>"+s),a.join("")}function cQ(t,e,n){var r=n||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var i=typeof r.origin=="string"?_a(r.origin):r.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var A=oc(t["!ref"]);c.s.r=Math.min(c.s.r,A.s.r),c.s.c=Math.min(c.s.c,A.s.c),c.e.r=Math.max(c.e.r,A.e.r),c.e.c=Math.max(c.e.c,A.e.c),s==-1&&(c.e.r=s=A.e.r+1)}var h=[],p=0,g=t["!rows"]||(t["!rows"]=[]),w=0,x=0,S=0,N=0,F=0,D=0;for(t["!cols"]||(t["!cols"]=[]);w<o.length&&x<l;++w){var R=o[w];if(cR(R)){if(r.display)continue;g[x]={hidden:!0}}var j=R.children;for(S=N=0;S<j.length;++S){var P=j[S];if(!(r.display&&cR(P))){var E=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):I7(P.innerHTML),T=P.getAttribute("data-z")||P.getAttribute("z");for(p=0;p<h.length;++p){var k=h[p];k.s.c==N+a&&k.s.r<x+s&&x+s<=k.e.r&&(N=k.e.c+1-a,p=-1)}D=+P.getAttribute("colspan")||1,((F=+P.getAttribute("rowspan")||1)>1||D>1)&&h.push({s:{r:x+s,c:N+a},e:{r:x+s+(F||1)-1,c:N+a+(D||1)-1}});var z={t:"s",v:E},M=P.getAttribute("data-t")||P.getAttribute("t")||"";E!=null&&(E.length==0?z.t=M||"z":r.raw||E.trim().length==0||M=="s"||(E==="TRUE"?z={t:"b",v:!0}:E==="FALSE"?z={t:"b",v:!1}:isNaN(qu(E))?isNaN(xp(E).getDate())||(z={t:"d",v:ia(E)},r.cellDates||(z={t:"n",v:Oi(z.v)}),z.z=r.dateNF||qn[14]):z={t:"n",v:qu(E)})),z.z===void 0&&T!=null&&(z.z=T);var U="",G=P.getElementsByTagName("A");if(G&&G.length)for(var q=0;q<G.length&&!(G[q].hasAttribute("href")&&(U=G[q].getAttribute("href"),U.charAt(0)!="#"));++q);U&&U.charAt(0)!="#"&&(z.l={Target:U}),r.dense?(t[x+s]||(t[x+s]=[]),t[x+s][N+a]=z):t[Yn({c:N+a,r:x+s})]=z,c.e.c<N+a&&(c.e.c=N+a),N+=D}}++x}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,x-1+s),t["!ref"]=vr(c),x>=l&&(t["!fullref"]=vr((c.e.r=o.length-w+x-1+s,c))),t}function uQ(t,e){var n=e||{},r=n.dense?[]:{};return cQ(r,t,e)}function H0e(t,e){return Ah(uQ(t,e),e)}function cR(t){var e="",n=Q0e(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Q0e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function V0e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=ss(e.replace(/<[^>]*>/g,""));return[n]}var uR={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function dQ(t,e){var n=e||{},r=QB(t),s=[],a,i,o={name:""},l="",c=0,A,h,p={},g=[],w=n.dense?[]:{},x,S,N={value:""},F="",D=0,R=[],j=-1,P=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,k={},z=[],M={},U=0,G=0,q=[],oe=1,ee=1,le=[],K={Names:[]},ne={},J=["",""],ce=[],Q={},Z="",se=0,ie=!1,fe=!1,Se=0;for(ix.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=ix.exec(r);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?w["!ref"]=vr(E):w["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=E.e.r&&(w["!fullref"]=w["!ref"],E.e.r=n.sheetRows-1,w["!ref"]=vr(E)),z.length&&(w["!merges"]=z),q.length&&(w["!rows"]=q),A.name=A.||A.name,typeof JSON<"u"&&JSON.stringify(A),g.push(A.name),p[A.name]=w,fe=!1):x[0].charAt(x[0].length-2)!=="/"&&(A=tr(x[0],!1),j=P=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,w=n.dense?[]:{},z=[],q=[],fe=!0);break;case"table-row-group":x[1]==="/"?--T:++T;break;case"table-row":case"":if(x[1]==="/"){j+=oe,oe=1;break}if(h=tr(x[0],!1),h.?j=h.-1:j==-1&&(j=0),oe=+h["number-rows-repeated"]||1,oe<10)for(Se=0;Se<oe;++Se)T>0&&(q[j+Se]={level:T});P=-1;break;case"covered-table-cell":x[1]!=="/"&&++P,n.sheetStubs&&(n.dense?(w[j]||(w[j]=[]),w[j][P]={t:"z"}):w[Yn({r:j,c:P})]={t:"z"}),F="",R=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++P,N=tr(x[0],!1),ee=parseInt(N["number-columns-repeated"]||"1",10),S={t:"z",v:null},N.formula&&n.cellFormula!=!1&&(S.f=aR(ss(N.formula))),(N.||N["value-type"])=="string"&&(S.t="s",S.v=ss(N["string-value"]||""),n.dense?(w[j]||(w[j]=[]),w[j][P]=S):w[Yn({r:j,c:P})]=S),P+=ee-1;else if(x[1]!=="/"){++P,F="",D=0,R=[],ee=1;var ge=oe?j+oe-1:j;if(P>E.e.c&&(E.e.c=P),P<E.s.c&&(E.s.c=P),j<E.s.r&&(E.s.r=j),ge>E.e.r&&(E.e.r=ge),N=tr(x[0],!1),ce=[],Q={},S={t:N.||N["value-type"],v:null},n.cellFormula)if(N.formula&&(N.formula=ss(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(U=parseInt(N["number-matrix-rows-spanned"],10)||0,G=parseInt(N["number-matrix-columns-spanned"],10)||0,M={s:{r:j,c:P},e:{r:j+U-1,c:P+G-1}},S.F=vr(M),le.push([M,S.F])),N.formula)S.f=aR(N.formula);else for(Se=0;Se<le.length;++Se)j>=le[Se][0].s.r&&j<=le[Se][0].e.r&&P>=le[Se][0].s.c&&P<=le[Se][0].e.c&&(S.F=le[Se][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(U=parseInt(N["number-rows-spanned"],10)||0,G=parseInt(N["number-columns-spanned"],10)||0,M={s:{r:j,c:P},e:{r:j+U-1,c:P+G-1}},z.push(M)),N["number-columns-repeated"]&&(ee=parseInt(N["number-columns-repeated"],10)),S.t){case"boolean":S.t="b",S.v=sa(N["boolean-value"]);break;case"float":S.t="n",S.v=parseFloat(N.value);break;case"percentage":S.t="n",S.v=parseFloat(N.value);break;case"currency":S.t="n",S.v=parseFloat(N.value);break;case"date":S.t="d",S.v=ia(N["date-value"]),n.cellDates||(S.t="n",S.v=Oi(S.v)),S.z="m/d/yy";break;case"time":S.t="n",S.v=pae(N["time-value"])/86400,n.cellDates&&(S.t="d",S.v=m_(S.v)),S.z="HH:MM:SS";break;case"number":S.t="n",S.v=parseFloat(N.);break;default:if(S.t==="string"||S.t==="text"||!S.t)S.t="s",N["string-value"]!=null&&(F=ss(N["string-value"]),R=[]);else throw new Error("Unsupported value type "+S.t)}}else{if(ie=!1,S.t==="s"&&(S.v=F||"",R.length&&(S.R=R),ie=D==0),ne.Target&&(S.l=ne),ce.length>0&&(S.c=ce,ce=[]),F&&n.cellText!==!1&&(S.w=F),ie&&(S.t="z",delete S.v),(!ie||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=j))for(var xe=0;xe<oe;++xe){if(ee=parseInt(N["number-columns-repeated"]||"1",10),n.dense)for(w[j+xe]||(w[j+xe]=[]),w[j+xe][P]=xe==0?S:oa(S);--ee>0;)w[j+xe][P+ee]=oa(S);else for(w[Yn({r:j+xe,c:P})]=S;--ee>0;)w[Yn({r:j+xe,c:P+ee})]=oa(S);E.e.c<=P&&(E.e.c=P)}ee=parseInt(N["number-columns-repeated"]||"1",10),P+=ee-1,ee=0,S={},F="",R=[]}ne={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a;Q.t=F,R.length&&(Q.R=R),Q.a=Z,ce.push(Q)}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);Z="",se=0,F="",D=0,R=[];break;case"creator":x[1]==="/"?Z=r.slice(se,x.index):se=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&s.push([x[3],!1]);F="",D=0,R=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(k[o.name]=l,(a=s.pop())[0]!==x[3])throw"Bad state: "+a}else x[0].charAt(x[0].length-2)!=="/"&&(l="",o=tr(x[0],!1),s.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=tr(x[0],!1),l+=uR[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=tr(x[0],!1),l+=uR[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(c,x.index);break}else c=x.index+x[0].length;break;case"named-range":i=tr(x[0],!1),J=eS(i["cell-range-address"]);var ve={Name:i.name,Ref:J[0]+"!"+J[1]};fe&&(ve.Sheet=g.length),K.Names.push(ve);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(x[1]==="/"&&(!N||!N["string-value"])){var me=V0e(r.slice(D,x.index));F=(F.length>0?F+`
`:"")+me[0]}else tr(x[0],!1),D=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{J=eS(tr(x[0])["target-range-address"]),p[J[0]]["!autofilter"]={ref:J[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(ne=tr(x[0],!1),!ne.href)break;ne.Target=ss(ne.href),delete ne.href,ne.Target.charAt(0)=="#"&&ne.Target.indexOf(".")>-1?(J=eS(ne.Target.slice(1)),ne.Target="#"+J[0]+"!"+J[1]):ne.Target.match(/^\.\.[\\\/]/)&&(ne.Target=ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(x)}}var he={Sheets:p,SheetNames:g,Workbook:K};return n.bookSheets&&delete he.Sheets,he}function dR(t,e){e=e||{},lu(t,"META-INF/manifest.xml")&&pie(xi(t,"META-INF/manifest.xml"),e);var n=Dc(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=dQ(Ps(n),e);return lu(t,"meta.xml")&&(r.Props=tH(xi(t,"meta.xml"))),r}function AR(t,e){return dQ(t,e)}var z0e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+ax({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return oi+e}}(),fR=function(){var t=function(a){return ks(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(a,i,o){var l=[];l.push('      <table:table table:name="'+ks(i.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,A=0,h=oc(a["!ref"]||"A1"),p=a["!merges"]||[],g=0,w=Array.isArray(a);if(a["!cols"])for(A=0;A<=h.e.c;++A)l.push("        <table:table-column"+(a["!cols"][A]?' table:style-name="co'+a["!cols"][A].ods+'"':"")+`></table:table-column>
`);var x="",S=a["!rows"]||[];for(c=0;c<h.s.r;++c)x=S[c]?' table:style-name="ro'+S[c].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=h.e.r;++c){for(x=S[c]?' table:style-name="ro'+S[c].ods+'"':"",l.push("        <table:table-row"+x+`>
`),A=0;A<h.s.c;++A)l.push(e);for(;A<=h.e.c;++A){var N=!1,F={},D="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>A)&&!(p[g].s.r>c)&&!(p[g].e.c<A)&&!(p[g].e.r<c)){(p[g].s.c!=A||p[g].s.r!=c)&&(N=!0),F["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,F["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(N){l.push(n);continue}var R=Yn({r:c,c:A}),j=w?(a[c]||[])[A]:a[R];if(j&&j.f&&(F["table:formula"]=ks(uAe(j.f)),j.F&&j.F.slice(0,R.length)==R)){var P=oc(j.F);F["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,F["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!j){l.push(e);continue}switch(j.t){case"b":D=j.v?"TRUE":"FALSE",F["office:value-type"]="boolean",F["office:boolean-value"]=j.v?"true":"false";break;case"n":D=j.w||String(j.v||0),F["office:value-type"]="float",F["office:value"]=j.v||0;break;case"s":case"str":D=j.v==null?"":j.v,F["office:value-type"]="string";break;case"d":D=j.w||ia(j.v).toISOString(),F["office:value-type"]="date",F["office:date-value"]=ia(j.v).toISOString(),F["table:style-name"]="ce1";break;default:l.push(e);continue}var E=t(D);if(j.l&&j.l.Target){var T=j.l.Target;T=T.charAt(0)=="#"?"#"+dAe(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),E=Xt("text:a",E,{"xlink:href":T.replace(/&/g,"&amp;")})}l.push("          "+Xt("table:table-cell",Xt("text:p",E,{}),F)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(c){return i.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var A=0;A<c["!cols"].length;++A)if(c["!cols"][A]){var h=c["!cols"][A];if(h.width==null&&h.wpx==null&&h.wch==null)continue;sh(h),h.ods=o;var p=c["!cols"][A].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(c){return i.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var A=0;A<c["!rows"].length;++A)if(c["!rows"][A]){c["!rows"][A].ods=l;var h=c["!rows"][A].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[oi],c=ax({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),A=ax({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+A+`>
`),l.push(eH().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(r(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function AQ(t,e){if(e.bookType=="fods")return fR(t,e);var n=UB(),r="",s=[],a=[];return r="mimetype",_r(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",_r(n,r,fR(t,e)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",_r(n,r,z0e(t,e)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",_r(n,r,oi+eH()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",_r(n,r,xie(a)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",_r(n,r,gie(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function g0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function s5(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ps(dh(t))}function G0e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Fc(Bd(t))}function q0e(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function ih(t){var e=t.reduce(function(s,a){return s+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function hR(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function K0e(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,s=e+13;s>=e;--s)r=r*256+t[s];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function $0e(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=n>=0?0:128}function fx(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function Ts(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Va(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function ds(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=fx(t,n),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=n[0];t[n[0]++]>=128;);o=t.slice(l,n[0])}break;case 5:i=4,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 1:i=8,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 2:i=fx(t,n),o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var c={data:o,type:a};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function _o(t){var e=[];return t.forEach(function(n,r){n.forEach(function(s){s.data&&(e.push(Ts(r*8+s.type)),s.type==2&&e.push(Ts(s.data.length)),e.push(s.data))})}),ih(e)}function d4(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function iu(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=fx(t,r),a=ds(t.slice(r[0],r[0]+s));r[0]+=s;var i={id:Va(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=ds(o.data),c=Va(l[3][0].data);i.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=a[3])!=null&&e[0]&&(i.merge=Va(a[3][0].data)>>>0>0),n.push(i)}return n}function cm(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:Ts(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:Ts(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Ts(i.data.length)}],r[2].push({data:_o(i.meta),type:2})});var a=_o(r);e.push(Ts(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),ih(e)}function W0e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=fx(e,n),s=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var i=e[n[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[n[0]],o>1&&(i|=e[n[0]+1]<<8),o>2&&(i|=e[n[0]+2]<<16),o>3&&(i|=e[n[0]+3]<<24),i>>>=0,i++,n[0]+=o}s.push(e.slice(n[0],n[0]+i)),n[0]+=i;continue}else{var l=0,c=0;if(a==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,a==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[ih(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var A=ih(s);if(A.length!=r)throw new Error("Unexpected length: ".concat(A.length," != ").concat(r));return A}function ou(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(W0e(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return ih(e)}function um(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),s=new Uint8Array(4);e.push(s);var a=Ts(r),i=a.length;e.push(a),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),i+=r,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return ih(e)}function Y0e(t,e,n,r){var s=g0(t),a=s.getUint32(4,!0),i=(r>1?12:8)+hR(a&(r>1?3470:398))*4,o=-1,l=-1,c=NaN,A=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=hR(a&(r>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(c=s.getFloat64(i,!0),i+=8),a&64&&(A.setTime(A.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:A};break;case 6:h={t:"b",v:c>0};break;case 7:h={t:"n",v:c/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:n[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(c))h={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function X0e(t,e,n){var r=g0(t),s=r.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,c=NaN,A=new Date(2001,0,1);s&1&&(l=K0e(t,a),a+=16),s&2&&(c=r.getFloat64(a,!0),a+=8),s&4&&(A.setTime(A.getTime()+r.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=r.getUint32(a,!0),a+=4),s&16&&(i=r.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:A};break;case 6:h={t:"b",v:c>0};break;case 7:h={t:"n",v:c/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:n[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function nS(t,e){var n=new Uint8Array(32),r=g0(n),s=12,a=0;switch(n[0]=5,t.t){case"n":n[1]=2,$0e(n,s,t.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,a,!0),n.slice(0,s)}function rS(t,e){var n=new Uint8Array(32),r=g0(n),s=12,a=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,a,!0),n.slice(0,s)}function J0e(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return Y0e(t,e,n,t[0]);case 5:return X0e(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Jo(t){var e=ds(t);return fx(e[1][0].data)}function mR(t,e){var n=ds(e.data),r=Va(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(i){var o=ds(i.data),l=Va(o[1][0].data)>>>0;switch(r){case 1:a[l]=s5(o[3][0].data);break;case 8:{var c=t[Jo(o[9][0].data)][0],A=ds(c.data),h=t[Jo(A[1][0].data)][0],p=Va(h.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=ds(h.data);a[l]=g[3].map(function(w){return s5(w.data)}).join("")}break}}),a}function Z0e(t,e){var n,r,s,a,i,o,l,c,A,h,p,g,w,x,S=ds(t),N=Va(S[1][0].data)>>>0,F=Va(S[2][0].data)>>>0,D=((r=(n=S[8])==null?void 0:n[0])==null?void 0:r.data)&&Va(S[8][0].data)>0||!1,R,j;if((a=(s=S[7])==null?void 0:s[0])!=null&&a.data&&e!=0)R=(o=(i=S[7])==null?void 0:i[0])==null?void 0:o.data,j=(c=(l=S[6])==null?void 0:l[0])==null?void 0:c.data;else if((h=(A=S[4])==null?void 0:A[0])!=null&&h.data&&e!=1)R=(g=(p=S[4])==null?void 0:p[0])==null?void 0:g.data,j=(x=(w=S[3])==null?void 0:w[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var P=D?4:1,E=g0(R),T=[],k=0;k<R.length/2;++k){var z=E.getUint16(k*2,!0);z<65535&&T.push([k,z])}if(T.length!=F)throw"Expected ".concat(F," cells, found ").concat(T.length);var M=[];for(k=0;k<T.length-1;++k)M[T[k][0]]=j.subarray(T[k][1]*P,T[k+1][1]*P);return T.length>=1&&(M[T[T.length-1][0]]=j.subarray(T[T.length-1][1]*P)),{R:N,cells:M}}function eme(t,e){var n,r=ds(e.data),s=(n=r==null?void 0:r[7])!=null&&n[0]?Va(r[7][0].data)>>>0>0?1:0:-1,a=d4(r[5],function(i){return Z0e(i,s)});return{nrows:Va(r[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,c){if(i[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));i[o.R][c]=l}),i},[])}}function tme(t,e,n){var r,s=ds(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Va(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Va(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=vr(a);var i=ds(s[4][0].data),o=mR(t,t[Jo(i[4][0].data)][0]),l=(r=i[17])!=null&&r[0]?mR(t,t[Jo(i[17][0].data)][0]):[],c=ds(i[3][0].data),A=0;c[1].forEach(function(h){var p=ds(h.data),g=t[Jo(p[2][0].data)][0],w=Va(g.meta[1][0].data);if(w!=6002)throw new Error("6001 unexpected reference to ".concat(w));var x=eme(t,g);x.data.forEach(function(S,N){S.forEach(function(F,D){var R=Yn({r:A+N,c:D}),j=J0e(F,o,l);j&&(n[R]=j)})}),A+=x.nrows})}function nme(t,e){var n=ds(e.data),r={"!ref":"A1"},s=t[Jo(n[2][0].data)],a=Va(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return tme(t,s[0],r),r}function rme(t,e){var n,r=ds(e.data),s={name:(n=r[1])!=null&&n[0]?s5(r[1][0].data):"",sheets:[]},a=d4(r[2],Jo);return a.forEach(function(i){t[i].forEach(function(o){var l=Va(o.meta[1][0].data);l==6e3&&s.sheets.push(nme(t,o))})}),s}function sme(t,e){var n=g4(),r=ds(e.data),s=d4(r[1],Jo);if(s.forEach(function(a){t[a].forEach(function(i){var o=Va(i.meta[1][0].data);if(o==2){var l=rme(t,i);l.sheets.forEach(function(c,A){v4(n,c,A==0?l.name:l.name+"_"+A,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function sS(t){var e,n,r,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=ou(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var A;try{A=iu(c)}catch(h){return console.log("## "+(h.message||h))}A.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(r=(n=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:s[0].data)&&Va(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(c){var A=Va(c.meta[1][0].data)>>>0;if(A==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return sme(a,o)}function ame(t,e,n){var r,s,a,i;if(!((r=t[6])!=null&&r[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Va(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=g0(t[7][0].data),A=0,h=[],p=g0(t[4][0].data),g=0,w=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),p.setUint16(x*2,65535);continue}c.setUint16(x*2,A,!0),p.setUint16(x*2,g,!0);var S,N;switch(typeof e[x]){case"string":S=nS({t:"s",v:e[x]},n),N=rS({t:"s",v:e[x]},n);break;case"number":S=nS({t:"n",v:e[x]},n),N=rS({t:"n",v:e[x]},n);break;case"boolean":S=nS({t:"b",v:e[x]},n),N=rS({t:"b",v:e[x]},n);break;default:throw new Error("Unsupported value "+e[x])}h.push(S),A+=S.length,w.push(N),g+=N.length,++l}for(t[2][0].data=Ts(l);x<t[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),p.setUint16(x*2,65535,!0);return t[6][0].data=ih(h),t[3][0].data=ih(w),l}function ime(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=oc(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(vr(r)));var a=$2(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(Z){return Z.forEach(function(se){typeof se=="string"&&i.push(se)})});var o={},l=[],c=Bn.read(e.numbers,{type:"base64"});c.FileIndex.map(function(Z,se){return[Z,c.FullPaths[se]]}).forEach(function(Z){var se=Z[0],ie=Z[1];if(se.type==2&&se.name.match(/\.iwa/)){var fe=se.content,Se=ou(fe),ge=iu(Se);ge.forEach(function(xe){l.push(xe.id),o[xe.id]={deps:[],location:ie,type:Va(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(Z,se){return Z-se});var A=l.filter(function(Z){return Z>1}).map(function(Z){return[Z,Ts(Z)]});c.FileIndex.map(function(Z,se){return[Z,c.FullPaths[se]]}).forEach(function(Z){var se=Z[0];if(Z[1],!!se.name.match(/\.iwa/)){var ie=iu(ou(se.content));ie.forEach(function(fe){fe.messages.forEach(function(Se){A.forEach(function(ge){fe.messages.some(function(xe){return Va(xe.meta[1][0].data)!=11006&&q0e(xe.data,ge[1])})&&o[ge[0]].deps.push(fe.id)})})})}});for(var h=Bn.find(c,o[1].location),p=iu(ou(h.content)),g,w=0;w<p.length;++w){var x=p[w];x.id==1&&(g=x)}var S=Jo(ds(g.messages[0].data)[1][0].data);for(h=Bn.find(c,o[S].location),p=iu(ou(h.content)),w=0;w<p.length;++w)x=p[w],x.id==S&&(g=x);for(S=Jo(ds(g.messages[0].data)[2][0].data),h=Bn.find(c,o[S].location),p=iu(ou(h.content)),w=0;w<p.length;++w)x=p[w],x.id==S&&(g=x);for(S=Jo(ds(g.messages[0].data)[2][0].data),h=Bn.find(c,o[S].location),p=iu(ou(h.content)),w=0;w<p.length;++w)x=p[w],x.id==S&&(g=x);var N=ds(g.messages[0].data);{N[6][0].data=Ts(r.e.r+1),N[7][0].data=Ts(r.e.c+1);var F=Jo(N[46][0].data),D=Bn.find(c,o[F].location),R=iu(ou(D.content));{for(var j=0;j<R.length&&R[j].id!=F;++j);if(R[j].id!=F)throw"Bad ColumnRowUIDMapArchive";var P=ds(R[j].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var E=0;E<=r.e.c;++E){var T=[];T[1]=T[2]=[{type:0,data:Ts(E+420690)}],P[1].push({type:2,data:_o(T)}),P[2].push({type:0,data:Ts(E)}),P[3].push({type:0,data:Ts(E)})}P[4]=[],P[5]=[],P[6]=[];for(var k=0;k<=r.e.r;++k)T=[],T[1]=T[2]=[{type:0,data:Ts(k+726270)}],P[4].push({type:2,data:_o(T)}),P[5].push({type:0,data:Ts(k)}),P[6].push({type:0,data:Ts(k)});R[j].messages[0].data=_o(P)}D.content=um(cm(R)),D.size=D.content.length,delete N[46];var z=ds(N[4][0].data);{z[7][0].data=Ts(r.e.r+1);var M=ds(z[1][0].data),U=Jo(M[2][0].data);D=Bn.find(c,o[U].location),R=iu(ou(D.content));{if(R[0].id!=U)throw"Bad HeaderStorageBucket";var G=ds(R[0].messages[0].data);for(k=0;k<a.length;++k){var q=ds(G[2][0].data);q[1][0].data=Ts(k),q[4][0].data=Ts(a[k].length),G[2][k]={type:G[2][0].type,data:_o(q)}}R[0].messages[0].data=_o(G)}D.content=um(cm(R)),D.size=D.content.length;var oe=Jo(z[2][0].data);D=Bn.find(c,o[oe].location),R=iu(ou(D.content));{if(R[0].id!=oe)throw"Bad HeaderStorageBucket";for(G=ds(R[0].messages[0].data),E=0;E<=r.e.c;++E)q=ds(G[2][0].data),q[1][0].data=Ts(E),q[4][0].data=Ts(r.e.r+1),G[2][E]={type:G[2][0].type,data:_o(q)};R[0].messages[0].data=_o(G)}D.content=um(cm(R)),D.size=D.content.length;var ee=Jo(z[4][0].data);(function(){for(var Z=Bn.find(c,o[ee].location),se=iu(ou(Z.content)),ie,fe=0;fe<se.length;++fe){var Se=se[fe];Se.id==ee&&(ie=Se)}var ge=ds(ie.messages[0].data);{ge[3]=[];var xe=[];i.forEach(function(he,He){xe[1]=[{type:0,data:Ts(He)}],xe[2]=[{type:0,data:Ts(1)}],xe[3]=[{type:2,data:G0e(he)}],ge[3].push({type:2,data:_o(xe)})})}ie.messages[0].data=_o(ge);var ve=cm(se),me=um(ve);Z.content=me,Z.size=Z.content.length})();var le=ds(z[3][0].data);{var K=le[1][0];delete le[2];var ne=ds(K.data);{var J=Jo(ne[2][0].data);(function(){for(var Z=Bn.find(c,o[J].location),se=iu(ou(Z.content)),ie,fe=0;fe<se.length;++fe){var Se=se[fe];Se.id==J&&(ie=Se)}var ge=ds(ie.messages[0].data);{delete ge[6],delete le[7];var xe=new Uint8Array(ge[5][0].data);ge[5]=[];for(var ve=0,me=0;me<=r.e.r;++me){var he=ds(xe);ve+=ame(he,a[me],i),he[1][0].data=Ts(me),ge[5].push({data:_o(he),type:2})}ge[1]=[{type:0,data:Ts(r.e.c+1)}],ge[2]=[{type:0,data:Ts(r.e.r+1)}],ge[3]=[{type:0,data:Ts(ve)}],ge[4]=[{type:0,data:Ts(r.e.r+1)}]}ie.messages[0].data=_o(ge);var He=cm(se),et=um(He);Z.content=et,Z.size=Z.content.length})()}K.data=_o(ne)}z[3][0].data=_o(le)}N[4][0].data=_o(z)}g.messages[0].data=_o(N);var ce=cm(p),Q=um(ce);return h.content=Q,h.size=h.content.length,c}function fQ(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function A4(t){fQ([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function f4(t){fQ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function ome(t){return Rr.WS.indexOf(t)>-1?"sheet":t==Rr.CS?"chart":t==Rr.DS?"dialog":t==Rr.MS?"macro":t&&t.length?t:"sheet"}function lme(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,ome(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function cme(t,e,n,r,s,a,i,o,l,c,A,h){try{a[r]=Bv(Dc(t,n,!0),e);var p=xi(t,e),g;switch(o){case"sheet":g=Ihe(p,e,s,l,a[r],c,A,h);break;case"chart":if(g=Fhe(p,e,s,l,a[r],c,A,h),!g||!g["!drawel"])break;var w=sv(g["!drawel"].Target,e),x=ox(w),S=vue(Dc(t,w,!0),Bv(Dc(t,x,!0),w)),N=sv(S,w),F=ox(N);g=ahe(Dc(t,N,!0),N,l,Bv(Dc(t,F,!0),N),c,g);break;case"macro":g=Dhe(p,e,s,l,a[r],c,A,h);break;case"dialog":g=Lhe(p,e,s,l,a[r],c,A,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=g;var D=[];a&&a[r]&&za(a[r]).forEach(function(R){var j="";if(a[r][R].Type==Rr.CMNT){j=sv(a[r][R].Target,e);var P=Uhe(xi(t,j,!0),j,l);if(!P||!P.length)return;eR(g,P,!1)}a[r][R].Type==Rr.TCMNT&&(j=sv(a[r][R].Target,e),D=D.concat(yue(xi(t,j,!0),l)))}),D&&D.length&&eR(g,D,!0,l.people||[])}catch(R){if(l.WTF)throw R}}function ru(t){return t.charAt(0)=="/"?t.slice(1):t}function ume(t,e){if(Op(),e=e||{},A4(e),lu(t,"META-INF/manifest.xml")||lu(t,"objectdata.xml"))return dR(t,e);if(lu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof sS<"u"){if(t.FileIndex)return sS(t);var n=Bn.utils.cfb_new();return wL(t).forEach(function(q){_r(n,q,wae(t,q))}),sS(n)}throw new Error("Unsupported NUMBERS file")}if(!lu(t,"[Content_Types].xml"))throw lu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):lu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=wL(t),s=hie(Dc(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",xi(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!xi(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!e.bookSheets&&!e.bookProps){if(kv=[],s.sst)try{kv=Mhe(xi(t,ru(s.sst)),s.sst,e)}catch(q){if(e.WTF)throw q}e.cellStyles&&s.themes.length&&(l=Phe(Dc(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(c=Rhe(xi(t,ru(s.style)),s.style,l,e))}s.links.map(function(q){try{var oe=Bv(Dc(t,ox(ru(q))),q);return jhe(xi(t,ru(q)),oe,q,e)}catch{}});var A=khe(xi(t,ru(s.workbooks[0])),s.workbooks[0],e),h={},p="";s.coreprops.length&&(p=xi(t,ru(s.coreprops[0]),!0),p&&(h=tH(p)),s.extprops.length!==0&&(p=xi(t,ru(s.extprops[0]),!0),p&&wie(p,h,e)));var g={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(p=Dc(t,ru(s.custprops[0]),!0),p&&(g=_ie(p,e)));var w={};if((e.bookSheets||e.bookProps)&&(A.Sheets?i=A.Sheets.map(function(oe){return oe.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(w.Props=h,w.Custprops=g),e.bookSheets&&typeof i<"u"&&(w.SheetNames=i),e.bookSheets?w.SheetNames:e.bookProps))return w;i={};var x={};e.bookDeps&&s.calcchain&&(x=Ohe(xi(t,ru(s.calcchain)),s.calcchain));var S=0,N={},F,D;{var R=A.Sheets;h.Worksheets=R.length,h.SheetNames=[];for(var j=0;j!=R.length;++j)h.SheetNames[j]=R[j].name}var P=a?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");lu(t,T)||(T="xl/_rels/workbook."+P+".rels");var k=Bv(Dc(t,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=Hhe(xi(t,ru(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=bue(xi(t,ru(s.people[0])),e)),k&&(k=lme(k,A.Sheets));var z=xi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(S=0;S!=h.Worksheets;++S){var M="sheet";if(k&&k[S]?(F="xl/"+k[S][1].replace(/[\/]?xl\//,""),lu(t,F)||(F=k[S][1]),lu(t,F)||(F=T.replace(/_rels\/.*$/,"")+k[S][1]),M=k[S][2]):(F="xl/worksheets/sheet"+(S+1-z)+"."+P,F=F.replace(/sheet0\./,"sheet.")),D=F.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(S!=e.sheets)continue e;break;case"string":if(h.SheetNames[S].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var U=!1,G=0;G!=e.sheets.length;++G)typeof e.sheets[G]=="number"&&e.sheets[G]==S&&(U=1),typeof e.sheets[G]=="string"&&e.sheets[G].toLowerCase()==h.SheetNames[S].toLowerCase()&&(U=1);if(!U)continue e}}cme(t,F,D,h.SheetNames[S],S,N,i,M,e,A,l,c)}return w={Directory:s,Workbook:A,Props:h,Custprops:g,Deps:x,Sheets:i,SheetNames:h.SheetNames,Strings:kv,Styles:c,Themes:l,SSF:oa(qn)},e&&e.bookFiles&&(t.files?(w.keys=r,w.files=t.files):(w.keys=[],w.files={},t.FullPaths.forEach(function(q,oe){q=q.replace(/^Root Entry[\/]/,""),w.keys.push(q),w.files[q]=t.FileIndex[oe]}))),e&&e.bookVBA&&(s.vba.length>0?w.vbaraw=xi(t,ru(s.vba[0]),!0):s.defaults&&s.defaults.bin===kue&&(w.vbaraw=xi(t,"xl/vbaProject.bin",!0))),w}function dme(t,e){var n=e||{},r="Workbook",s=Bn.find(t,r);try{if(r="/!DataSpaces/Version",s=Bn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(Hle(s.content),r="/!DataSpaces/DataSpaceMap",s=Bn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=Vle(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Bn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=zle(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Bn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);qle(s.content)}catch{}if(r="/EncryptionInfo",s=Bn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=Kle(s.content);if(r="/EncryptedPackage",s=Bn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function Ame(t,e){return e.bookType=="ods"?AQ(t,e):e.bookType=="numbers"?ime(t,e):e.bookType=="xlsb"?fme(t,e):hme(t,e)}function fme(t,e){Mm=1024,t&&!t.SSF&&(t.SSF=oa(qn)),t&&t.SSF&&(Op(),A_(t.SSF),e.revssf=h_(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Iv?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=jH.indexOf(e.bookType)>-1,s=JB();f4(e=e||{});var a=UB(),i="",o=0;if(e.cellXfs=[],fh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",_r(a,i,nH(t.Props,e)),s.coreprops.push(i),Ns(e.rels,2,i,Rr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,_r(a,i,aH(t.Props)),s.extprops.push(i),Ns(e.rels,3,i,Rr.EXT_PROPS),t.Custprops!==t.Props&&za(t.Custprops||{}).length>0&&(i="docProps/custom.xml",_r(a,i,iH(t.Custprops)),s.custprops.push(i),Ns(e.rels,4,i,Rr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var A={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,_r(a,i,Vhe(o-1,i,e,t,A)),s.sheets.push(i),Ns(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Rr.WS[0])}if(h){var g=h["!comments"],w=!1,x="";g&&g.length>0&&(x="xl/comments"+o+"."+n,_r(a,x,qhe(g,x)),s.comments.push(x),Ns(A,-1,"../comments"+o+"."+n,Rr.CMNT),w=!0),h["!legacy"]&&w&&_r(a,"xl/drawings/vmlDrawing"+o+".vml",UH(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}A["!id"].rId1&&_r(a,ox(i),Zm(A))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,_r(a,i,Ghe(e.Strings,i,e)),s.strs.push(i),Ns(e.wbrels,-1,"sharedStrings."+n,Rr.SST)),i="xl/workbook."+n,_r(a,i,Qhe(t,i)),s.workbooks.push(i),Ns(e.rels,1,i,Rr.WB),i="xl/theme/theme1.xml",_r(a,i,s4(t.Themes,e)),s.themes.push(i),Ns(e.wbrels,-1,"theme/theme1.xml",Rr.THEME),i="xl/styles."+n,_r(a,i,zhe(t,i,e)),s.styles.push(i),Ns(e.wbrels,-1,"styles."+n,Rr.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",_r(a,i,t.vbaraw),s.vba.push(i),Ns(e.wbrels,-1,"vbaProject.bin",Rr.VBA)),i="xl/metadata."+n,_r(a,i,Khe(i)),s.metadata.push(i),Ns(e.wbrels,-1,"metadata."+n,Rr.XLMETA),_r(a,"[Content_Types].xml",Z7(s,e)),_r(a,"_rels/.rels",Zm(e.rels)),_r(a,"xl/_rels/workbook."+n+".rels",Zm(e.wbrels)),delete e.revssf,delete e.ssf,a}function hme(t,e){Mm=1024,t&&!t.SSF&&(t.SSF=oa(qn)),t&&t.SSF&&(Op(),A_(t.SSF),e.revssf=h_(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Iv?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=jH.indexOf(e.bookType)>-1,s=JB();f4(e=e||{});var a=UB(),i="",o=0;if(e.cellXfs=[],fh(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",_r(a,i,nH(t.Props,e)),s.coreprops.push(i),Ns(e.rels,2,i,Rr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,_r(a,i,aH(t.Props)),s.extprops.push(i),Ns(e.rels,3,i,Rr.EXT_PROPS),t.Custprops!==t.Props&&za(t.Custprops||{}).length>0&&(i="docProps/custom.xml",_r(a,i,iH(t.Custprops)),s.custprops.push(i),Ns(e.rels,4,i,Rr.CUST_PROPS));var A=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,_r(a,i,XH(o-1,e,t,h)),s.sheets.push(i),Ns(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Rr.WS[0])}if(p){var w=p["!comments"],x=!1,S="";if(w&&w.length>0){var N=!1;w.forEach(function(F){F[1].forEach(function(D){D.T==!0&&(N=!0)})}),N&&(S="xl/threadedComments/threadedComment"+o+"."+n,_r(a,S,wue(w,A,e)),s.threadedcomments.push(S),Ns(h,-1,"../threadedComments/threadedComment"+o+"."+n,Rr.TCMNT)),S="xl/comments"+o+"."+n,_r(a,S,OH(w)),s.comments.push(S),Ns(h,-1,"../comments"+o+"."+n,Rr.CMNT),x=!0}p["!legacy"]&&x&&_r(a,"xl/drawings/vmlDrawing"+o+".vml",UH(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&_r(a,ox(i),Zm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,_r(a,i,SH(e.Strings,e)),s.strs.push(i),Ns(e.wbrels,-1,"sharedStrings."+n,Rr.SST)),i="xl/workbook."+n,_r(a,i,nQ(t)),s.workbooks.push(i),Ns(e.rels,1,i,Rr.WB),i="xl/theme/theme1.xml",_r(a,i,s4(t.Themes,e)),s.themes.push(i),Ns(e.wbrels,-1,"theme/theme1.xml",Rr.THEME),i="xl/styles."+n,_r(a,i,LH(t,e)),s.styles.push(i),Ns(e.wbrels,-1,"styles."+n,Rr.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",_r(a,i,t.vbaraw),s.vba.push(i),Ns(e.wbrels,-1,"vbaProject.bin",Rr.VBA)),i="xl/metadata."+n,_r(a,i,MH()),s.metadata.push(i),Ns(e.wbrels,-1,"metadata."+n,Rr.XLMETA),A.length>1&&(i="xl/persons/person.xml",_r(a,i,_ue(A)),s.people.push(i),Ns(e.wbrels,-1,"persons/person.xml",Rr.PEOPLE)),_r(a,"[Content_Types].xml",Z7(s,e)),_r(a,"_rels/.rels",Zm(e.rels)),_r(a,"xl/_rels/workbook."+n+".rels",Zm(e.wbrels)),delete e.revssf,delete e.ssf,a}function h4(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Oc(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function mme(t,e){return Bn.find(t,"EncryptedPackage")?dme(t,e):iQ(t,e)}function pme(t,e){var n,r=t,s=e||{};return s.type||(s.type=Fr&&Buffer.isBuffer(t)?"buffer":"base64"),n=N7(r,s),ume(n,s)}function hQ(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return n5(t.slice(n),e);default:break e}return yp.to_workbook(t,e)}function gme(t,e){var n="",r=h4(t,e);switch(e.type){case"base64":n=Oc(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=f0(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=Ps(n)),e.type="binary",hQ(n,e)}function vme(t,e){var n=t;return e.type=="base64"&&(n=Oc(n)),n=tx.utils.decode(1200,n.slice(2),"str"),e.type="binary",hQ(n,e)}function xme(t){return t.match(/[^\x00-\x7F]/)?Bd(t):t}function aS(t,e,n,r){return r?(n.type="string",yp.to_workbook(t,n)):yp.to_workbook(e,n)}function hx(t,e){DB();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return hx(new Uint8Array(t),(n=oa(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,s=[0,0,0,0],a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),tp={},n.dateNF&&(tp.dateNF=n.dateNF),n.type||(n.type=Fr&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=Fr?"buffer":"binary",r=fae(t),typeof Uint8Array<"u"&&!Fr&&(n.type="array")),n.type=="string"&&(a=!0,n.type="binary",n.codepage=65001,r=xme(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return n=oa(n),n.type="array",hx(LB(r),n)}switch((s=h4(r,n))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return mme(Bn.read(r,n),n);break;case 9:if(s[1]<=8)return iQ(r,n);break;case 60:return n5(r,n);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Cle(r,n);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return CH.to_workbook(r,n);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?pme(r,n):aS(t,r,n,a);case 239:return s[3]===60?n5(r,n):aS(t,r,n,a);case 255:if(s[1]===254)return vme(r,n);if(s[1]===0&&s[2]===2&&s[3]===0)return Zh.to_workbook(r,n);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Zh.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return t5.to_workbook(r,n);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return IH.to_workbook(r,n);break;case 10:case 13:case 32:return gme(r,n);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return _le.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?t5.to_workbook(r,n):aS(t,r,n,a)}function mQ(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Yx(e.file,Bn.write(t,{type:Fr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Bn.write(t,e)}function yme(t,e){var n=oa(e||{}),r=Ame(t,n);return wme(r,n)}function wme(t,e){var n={},r=Fr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Bn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(d_(s))}return e.password&&typeof encrypt_agile<"u"?mQ(encrypt_agile(s,e.password),e):e.type==="file"?Yx(e.file,s):e.type=="string"?Ps(s):s}function bme(t,e){var n=e||{},r=x0e(t,n);return mQ(r,n)}function bd(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return nx(Bd(r));case"binary":return Bd(r);case"string":return t;case"file":return Yx(e.file,r,"utf8");case"buffer":return Fr?RA(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):bd(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function _me(t,e){switch(e.type){case"base64":return nx(t);case"binary":return t;case"string":return t;case"file":return Yx(e.file,t,"binary");case"buffer":return Fr?RA(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Iy(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?nx(n):e.type=="string"?Ps(n):n;case"file":return Yx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function pQ(t,e){DB(),mhe(t);var n=oa(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=pQ(t,n);return n.type="array",d_(r)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=t.SheetNames.indexOf(n.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return bd(A0e(t,n),n);case"slk":case"sylk":return bd(_H.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"htm":case"html":return bd(lQ(t.Sheets[t.SheetNames[s]],n),n);case"txt":return _me(gQ(t.Sheets[t.SheetNames[s]],n),n);case"csv":return bd(p4(t.Sheets[t.SheetNames[s]],n),n,"\uFEFF");case"dif":return bd(CH.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"dbf":return Iy(t5.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"prn":return bd(yp.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"rtf":return bd(IH.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"eth":return bd(EH.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"fods":return bd(AQ(t,n),n);case"wk1":return Iy(Zh.sheet_to_wk1(t.Sheets[t.SheetNames[s]],n),n);case"wk3":return Iy(Zh.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Iy(oQ(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),bme(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return yme(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Cme(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function m4(t,e,n){var r={};return r.type="file",r.file=e,Cme(r),pQ(t,r)}function Eme(t,e,n,r,s,a,i,o){var l=ii(n),c=o.defval,A=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:n,enumerable:!1})}catch{p.__rowNum__=n}else p.__rowNum__=n;if(!i||t[n])for(var g=e.s.c;g<=e.e.c;++g){var w=i?t[n][g]:t[r[g]+l];if(w===void 0||w.t===void 0){if(c===void 0)continue;a[g]!=null&&(p[a[g]]=c);continue}var x=w.v;switch(w.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(a[g]!=null){if(x==null)if(w.t=="e"&&x===null)p[a[g]]=null;else if(c!==void 0)p[a[g]]=c;else if(A&&x===null)p[a[g]]=null;else continue;else p[a[g]]=A&&(w.t!=="n"||w.t==="n"&&o.rawNumbers!==!1)?x:BA(w,x,o);x!=null&&(h=!1)}}return{row:p,isempty:h}}function $2(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},A=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof A){case"string":l=as(A);break;case"number":l=as(t["!ref"]),l.s.r=A;break;default:l=A}r>0&&(s=0);var h=ii(l.s.r),p=[],g=[],w=0,x=0,S=Array.isArray(t),N=l.s.r,F=0,D={};S&&!t[N]&&(t[N]=[]);var R=c.skipHidden&&t["!cols"]||[],j=c.skipHidden&&t["!rows"]||[];for(F=l.s.c;F<=l.e.c;++F)if(!(R[F]||{}).hidden)switch(p[F]=ba(F),n=S?t[N][F]:t[p[F]+h],r){case 1:a[F]=F-l.s.c;break;case 2:a[F]=p[F];break;case 3:a[F]=c.header[F-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=i=BA(n,null,c),x=D[i]||0,!x)D[i]=1;else{do o=i+"_"+x++;while(D[o]);D[i]=x,D[o]=1}a[F]=o}for(N=l.s.r+s;N<=l.e.r;++N)if(!(j[N]||{}).hidden){var P=Eme(t,l,N,p,r,a,S,c);(P.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[w++]=P.row)}return g.length=w,g}var pR=/"/g;function Sme(t,e,n,r,s,a,i,o){for(var l=!0,c=[],A="",h=ii(n),p=e.s.c;p<=e.e.c;++p)if(r[p]){var g=o.dense?(t[n]||[])[p]:t[r[p]+h];if(g==null)A="";else if(g.v!=null){l=!1,A=""+(o.rawNumbers&&g.t=="n"?g.v:BA(g,null,o));for(var w=0,x=0;w!==A.length;++w)if((x=A.charCodeAt(w))===s||x===a||x===34||o.forceQuotes){A='"'+A.replace(pR,'""')+'"';break}A=="ID"&&(A='"ID"')}else g.f!=null&&!g.F?(l=!1,A="="+g.f,A.indexOf(",")>=0&&(A='"'+A.replace(pR,'""')+'"')):A="";c.push(A)}return o.blankrows===!1&&l?null:c.join(i)}function p4(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=as(t["!ref"]),a=r.FS!==void 0?r.FS:",",i=a.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),A="",h=[];r.dense=Array.isArray(t);for(var p=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],w=s.s.c;w<=s.e.c;++w)(p[w]||{}).hidden||(h[w]=ba(w));for(var x=0,S=s.s.r;S<=s.e.r;++S)(g[S]||{}).hidden||(A=Sme(t,s,S,h,i,l,a,r),A!=null&&(r.strip&&(A=A.replace(c,"")),(A||r.blankrows!==!1)&&n.push((x++?o:"")+A)));return delete r.dense,n.join("")}function gQ(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=p4(t,e);return n}function Tme(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=as(t["!ref"]),a="",i=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=ba(o);for(var A=s.s.r;A<=s.e.r;++A)for(a=ii(A),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,n=c?(t[A]||[])[o]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function vQ(t,e,n){var r=n||{},s=+!r.skipHeader,a=t||{},i=0,o=0;if(a&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?_a(r.origin):r.origin;i=l.r,o=l.c}var c,A={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=as(a["!ref"]);A.e.c=Math.max(A.e.c,h.e.c),A.e.r=Math.max(A.e.r,h.e.r),i==-1&&(i=h.e.r+1,A.e.r=i+e.length-1+s)}else i==-1&&(i=0,A.e.r=e.length-1+s);var p=r.header||[],g=0;e.forEach(function(x,S){za(x).forEach(function(N){(g=p.indexOf(N))==-1&&(p[g=p.length]=N);var F=x[N],D="z",R="",j=Yn({c:o+g,r:i+S+s});c=mx(a,j),F&&typeof F=="object"&&!(F instanceof Date)?a[j]=F:(typeof F=="number"?D="n":typeof F=="boolean"?D="b":typeof F=="string"?D="s":F instanceof Date?(D="d",r.cellDates||(D="n",F=Oi(F)),R=r.dateNF||qn[14]):F===null&&r.nullError&&(D="e",F=0),c?(c.t=D,c.v=F,delete c.w,delete c.R,R&&(c.z=R)):a[j]=c={t:D,v:F},R&&(c.z=R))})}),A.e.c=Math.max(A.e.c,o+p.length-1);var w=ii(i);if(s)for(g=0;g<p.length;++g)a[ba(g+o)+w]={t:"s",v:p[g]};return a["!ref"]=vr(A),a}function Nme(t,e){return vQ(null,t,e)}function mx(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=_a(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?mx(t,Yn(e)):mx(t,Yn({r:e,c:n||0}))}function Bme(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function g4(){return{SheetNames:[],Sheets:{}}}function v4(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=i+s)!=-1;++s);}if(tQ(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function kme(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=Bme(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function Ime(t,e){return t.z=e,t}function xQ(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function Fme(t,e,n){return xQ(t,"#"+e,n)}function Dme(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function Lme(t,e,n,r){for(var s=typeof e!="string"?e:as(e),a=typeof e=="string"?e:vr(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=mx(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return t}var mu={encode_col:ba,encode_row:ii,encode_cell:Yn,encode_range:vr,decode_col:qB,decode_row:GB,split_cell:Gae,decode_cell:_a,decode_range:oc,format_cell:BA,sheet_add_aoa:q7,sheet_add_json:vQ,sheet_add_dom:cQ,aoa_to_sheet:jp,json_to_sheet:Nme,table_to_sheet:uQ,table_to_book:H0e,sheet_to_csv:p4,sheet_to_txt:gQ,sheet_to_json:$2,sheet_to_html:lQ,sheet_to_formulae:Tme,sheet_to_row_object_array:$2,sheet_get_cell:mx,book_new:g4,book_append_sheet:v4,book_set_sheet_visibility:kme,cell_set_number_format:Ime,cell_set_hyperlink:xQ,cell_set_internal_link:Fme,cell_add_comment:Dme,sheet_set_array_formula:Lme,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Rme=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let r=0,s=0;const a=[];for(const l of n)try{const c=zt(Br,l),A=await Ei(c),h=A.size;r+=h,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let p=0;A.docs.forEach(g=>{const w=g.data();w.createdAt&&new Date(w.createdAt)>=e&&p++}),s+=p}catch(c){console.warn(`Error accediendo a coleccin ${l}:`,c),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=zt(Br,"apiLogs"),c=new Date(t.getTime()-10080*60*1e3),A=mn(l,fs("timestamp",">=",c.toISOString()),Pr("timestamp","desc")),h=await Ei(A),p={};h.docs.forEach(g=>{const w=g.data(),x=new Date(w.timestamp).toLocaleDateString("es-CL");p[x]=(p[x]||0)+1}),Object.entries(p).sort(([g],[w])=>new Date(g).getTime()-new Date(w).getTime()).forEach(([g,w])=>{i.push({label:g,value:w})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:r,collectionsActivity:a.sort((l,c)=>c.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadsticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},gR=500,dm=({title:t,value:e,description:n,alert:r})=>u.jsxs("div",{className:`p-5 rounded-xl border ${r?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),u.jsx("p",{className:`text-3xl font-bold mt-2 ${r?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),n&&u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),iS=({title:t,data:e,colorClass:n})=>{const r=W.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),u.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:u.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/r*100}%`}})})]},s.label)):u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Pme=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!0),[s,a]=W.useState(null),[i,o]=W.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});W.useEffect(()=>{r(!0);const h=Tne(w=>{e(w),r(!1)}),p=async()=>{try{const w=await Rme();o(w)}catch(w){console.error("Error al cargar estadsticas de Firestore:",w)}};p();const g=setInterval(p,300*1e3);return()=>{h(),clearInterval(g)}},[]);const{stats:l,userStats:c,moduleStats:A}=W.useMemo(()=>{const h=new Date,p=new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime(),g=p-h.getDay()*24*60*60*1e3,w=new Date(h.getFullYear(),h.getMonth(),1).getTime(),x={today:0,week:0,month:0},S={},N={};t.forEach(R=>{const j=new Date(R.timestamp).getTime();j>=p&&x.today++,j>=g&&x.week++,j>=w&&x.month++;const P=R.userEmail||"Desconocido";S[P]||(S[P]={email:P,today:0,month:0,total:0}),S[P].total++,j>=p&&S[P].today++,j>=w&&S[P].month++,N[R.module]=(N[R.module]||0)+1});const F=Object.values(S).sort((R,j)=>j.total-R.total),D=Object.entries(N).map(([R,j])=>({label:R,value:j})).sort((R,j)=>j.value-R.value);return{stats:x,userStats:F,moduleStats:D}},[t]);return u.jsxs("div",{className:"space-y-8",children:[s&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),n&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!n&&t.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsx(dm,{title:"Llamadas Hoy",value:n?"--":l.today,description:`Lmite recomendado: ${gR}`,alert:l.today>gR}),u.jsx(dm,{title:"Llamadas esta Semana",value:n?"--":l.week}),u.jsx(dm,{title:"Llamadas este Mes",value:n?"--":l.month})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[u.jsx(iS,{title:"Uso por Mdulo",data:A,colorClass:"bg-sky-500"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&c.length>0?c.map(h=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:h.email}),u.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.today}),u.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.month}),u.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:h.total})]},h.email)):u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:n?"Cargando...":"No hay registros."})})})]})})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx(dm,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),u.jsx(dm,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),u.jsx(dm,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[u.jsx(iS,{title:"Actividad por Coleccin",data:i.collectionsActivity,colorClass:"bg-green-500"}),u.jsx(iS,{title:"Actividad Diaria (ltimos 7 das)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme="type.googleapis.com/google.protobuf.Int64Value",Ume="type.googleapis.com/google.protobuf.UInt64Value";function yQ(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function W2(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>W2(e));if(typeof t=="function"||typeof t=="object")return yQ(t,e=>W2(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Mme:case Ume:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bp(e)):typeof t=="function"||typeof t=="object"?yQ(t,e=>bp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rc extends Qd{constructor(e,n,r){super(`${x4}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,rc.prototype)}}function Ome(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Y2(t,e){let n=Ome(t),r=n,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!vR[i])return new rc("internal","internal");n=vR[i],r=i}const o=a.message;typeof o=="string"&&(r=o),s=a.details,s!==void 0&&(s=bp(s))}}catch{}return n==="ok"?null:new rc(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jme{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Au(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="us-central1",Hme=/^data: (.*?)(?:\n|$)/;function Qme(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new rc("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Vme{constructor(e,n,r,s,a=a5,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new jme(e,n,r,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=a5}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function zme(t,e,n){const r=w0(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(xN(t.emulatorOrigin),yN("Functions",!0))}function Gme(t,e,n){const r=s=>Kme(t,e,s,{});return r.stream=(s,a)=>Wme(t,e,s,a),r}async function qme(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function wQ(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Kme(t,e,n,r){const s=t._url(e);return $me(t,s,n,r)}async function $me(t,e,n,r){n=W2(n);const s={data:n},a=await wQ(t,r),i=r.timeout||7e4,o=Qme(i),l=await Promise.race([qme(e,s,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new rc("cancelled","Firebase Functions instance was deleted.");const c=Y2(l.status,l.json);if(c)throw c;if(!l.json)throw new rc("internal","Response is not valid JSON object.");let A=l.json.data;if(typeof A>"u"&&(A=l.json.result),typeof A>"u")throw new rc("internal","Response is missing data field.");return{data:bp(A)}}function Wme(t,e,n,r){const s=t._url(e);return Yme(t,s,n,r||{})}async function Yme(t,e,n,r){var p;n=W2(n);const s={data:n},a=await wQ(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const x=new rc("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const w=Y2(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let o,l;const c=new Promise((g,w)=>{o=g,l=w});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const g=new rc("cancelled","Request was cancelled.");l(g)});const A=i.body.getReader(),h=Xme(A,o,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:w,done:x}=await g.read();return{value:w,done:x}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:c}}function Xme(t,e,n,r){const s=(i,o)=>{const l=i.match(Hme);if(!l)return;const c=l[1];try{const A=JSON.parse(c);if("result"in A){e(bp(A.result));return}if("message"in A){o.enqueue(bp(A.message));return}if("error"in A){const h=Y2(0,A);o.error(h),n(h);return}}catch(A){if(A instanceof rc){o.error(A),n(A);return}}},a=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(r!=null&&r.aborted){const c=new rc("cancelled","Request was cancelled");return i.error(c),n(c),Promise.resolve()}try{const{value:c,done:A}=await t.read();if(A){o.trim()&&s(o.trim(),i),i.close();return}if(r!=null&&r.aborted){const p=new rc("cancelled","Request was cancelled");i.error(p),n(p),await t.cancel();return}o+=a.decode(c,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const p of h)p.trim()&&s(p.trim(),i);return l()}catch(c){const A=c instanceof rc?c:Y2(0,null);i.error(A),n(A)}}},cancel(){return t.cancel()}})}const xR="@firebase/functions",yR="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme="auth-internal",Zme="app-check-internal",epe="messaging-internal";function tpe(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(Jme),i=n.getProvider(epe),o=n.getProvider(Zme);return new Vme(s,a,i,o,r)};o0(new $f(x4,e,"PUBLIC").setMultipleInstances(!0)),kd(xR,yR,t),kd(xR,yR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t=CN(),e=a5){const r=Ib(Aa(t),x4).getImmediate({identifier:e}),s=$U("functions");return s&&npe(r,...s),r}function npe(t,e,n){zme(Aa(t),e,n)}function Am(t,e,n){return Gme(Aa(t),e)}tpe();const wR=zt(Br,"usuarios");async function bQ(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",wR);const t=await Ei(wR);if(console.log(` [DEBUG] Encontrados ${t.docs.length} documentos en la coleccin usuarios`),t.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const e=t.docs.map(n=>{const r=n.data();return console.log(" [DEBUG] Usuario encontrado:",{id:n.id,...r}),{id:n.id,...r}});return console.log(" [DEBUG] Usuarios procesados correctamente:",e.length),console.log(" [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error(" [DEBUG] Error al obtener usuarios:",t),console.error(" [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const bR=Object.values(tn),oS=t=>t?t.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",rpe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!1),[s,a]=W.useState("Usuarios"),[i,o]=W.useState({nombreCompleto:"",email:"",rut:"",profile:tn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,c]=W.useState(null),[A,h]=W.useState(""),[p,g]=W.useState(""),[w,x]=W.useState(""),[S,N]=W.useState(null),[F,D]=W.useState(null),[R,j]=W.useState(null),P=W.useCallback(async()=>{r(!0);try{const K=await bQ();e(K)}catch(K){console.error("Error al cargar usuarios",K),N("No se pudieron cargar los usuarios.")}finally{r(!1)}},[]);W.useEffect(()=>{P()},[P]);const E=W.useCallback(K=>{const{name:ne,value:J}=K.target;o(ce=>({...ce,[ne]:J,curso:ne==="profile"&&J!==tn.ESTUDIANTE?"":ce.curso,cursos:ne==="profile"&&J!==tn.PROFESORADO?[]:ce.cursos,asignaturas:ne==="profile"&&J!==tn.PROFESORADO?[]:ce.asignaturas}))},[]),T=W.useCallback((K,ne)=>{o(J=>{const ce=J[K]||[],Q=ce.includes(ne)?ce.filter(Z=>Z!==ne):[...ce,ne];return{...J,[K]:Q}})},[]),k=W.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:tn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),c(null),N(null)},[]),z=W.useCallback(async K=>{K.preventDefault(),N(null);const{nombreCompleto:ne,email:J,profile:ce,curso:Q,password:Z}=i;if(!ne.trim()||!J.trim()){N("Nombre Completo y Email son obligatorios.");return}if(ce===tn.ESTUDIANTE&&!Q){N('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(Z!=null&&Z.trim())){N("La contrasea es obligatoria al crear un nuevo usuario.");return}const se=Rg();try{if(l){const ie=Am(se,"updateUser"),fe={...i,password:(Z==null?void 0:Z.trim())||void 0,curso:ce===tn.ESTUDIANTE?oS(Q||""):void 0};await ie(fe)}else{const ie=Am(se,"createUser"),fe={...i,curso:ce===tn.ESTUDIANTE?oS(Q||""):void 0};await ie(fe)}await P(),k()}catch(ie){console.error("Error al guardar usuario:",ie),N(ie.message||"Error al guardar el usuario.")}},[i,l,P,k]),M=W.useCallback(K=>{c(K.email),o({nombreCompleto:K.nombreCompleto,email:K.email,rut:K.rut||"",profile:K.profile,password:"",curso:K.curso||"",cursos:K.cursos||[],asignaturas:K.asignaturas||[]}),setTimeout(()=>{const ne=document.querySelector("form");ne&&ne.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),U=W.useCallback(async K=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${K}? Esta accin es irreversible.`))try{const ne=Rg();await Am(ne,"deleteUser")({email:K}),await P()}catch(ne){console.error("Error al eliminar usuario:",ne),N(ne.message||"No se pudo borrar el usuario.")}},[P]),G=async K=>{var Z;const ne=(Z=K.target.files)==null?void 0:Z[0];if(!ne)return;D({message:"Procesando archivo...",isError:!1});const J=Rg(),ce=Am(J,"createUser"),Q=new FileReader;Q.onload=async se=>{var ie;try{const fe=new Uint8Array((ie=se.target)==null?void 0:ie.result),Se=hx(fe,{type:"array"}),ge=Se.Sheets[Se.SheetNames[0]],xe=mu.sheet_to_json(ge);if(xe.length===0){D({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const ve=xe.map(Ue=>{const Ie=Ue.Nombre||Ue.nombre,je=Ue.Correo||Ue.correo||Ue.Email||Ue.email,Ke=Ue.Curso||Ue.curso,rt=Ue.RUT||Ue.rut;return!Ie||!je||!Ke?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ce({nombreCompleto:String(Ie).trim(),email:String(je).trim(),profile:tn.ESTUDIANTE,curso:oS(String(Ke).trim()),rut:rt?String(rt).trim():"",password:"recoleta"}).catch(xt=>({email:je,error:xt.message}))}),me=await Promise.all(ve),he=me.filter(Ue=>!Ue.error).length,He=me.filter(Ue=>Ue.error);let et=`Carga completada. ${he} estudiantes agregados.`;He.length>0&&(et+=` ${He.length} fallaron.`,console.error("Errores en carga masiva:",He)),D({message:et,isError:He.length>0}),await P()}catch(fe){D({message:`Error: ${fe.message}`,isError:!0})}},Q.readAsArrayBuffer(ne),K.target.value=""},q=async K=>{var Z;const ne=(Z=K.target.files)==null?void 0:Z[0];if(!ne)return;j({message:"Procesando archivo...",isError:!1});const J=Rg(),ce=Am(J,"createUser"),Q=new FileReader;Q.onload=async se=>{var ie;try{const fe=new Uint8Array((ie=se.target)==null?void 0:ie.result),Se=hx(fe,{type:"array"}),ge=Se.Sheets[Se.SheetNames[0]],xe=mu.sheet_to_json(ge);if(xe.length===0){j({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const ve=xe.map(Ue=>{const Ie=Ue.Nombre||Ue.nombre,je=Ue.Correo||Ue.correo||Ue.Email||Ue.email,Ke=Ue.Perfil||Ue.perfil||Ue.Profile||Ue.profile,rt=Ue.RUT||Ue.rut;return!Ie||!je||!Ke?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ce({nombreCompleto:String(Ie).trim(),email:String(je).trim(),profile:Ke,rut:rt?String(rt).trim():"",password:"recoleta"}).catch(xt=>({email:je,error:xt.message}))}),me=await Promise.all(ve),he=me.filter(Ue=>!Ue.error).length,He=me.filter(Ue=>Ue.error);let et=`Carga completada. ${he} usuarios agregados.`;He.length>0&&(et+=` ${He.length} fallaron.`,console.error("Errores en carga masiva:",He)),j({message:et,isError:He.length>0}),await P()}catch(fe){j({message:`Error: ${fe.message}`,isError:!0})}},Q.readAsArrayBuffer(ne),K.target.value=""},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=W.useMemo(()=>Array.from(new Set(t.filter(K=>K.profile===tn.ESTUDIANTE&&K.curso).map(K=>K.curso))).sort(),[t]),le=W.useMemo(()=>t.filter(K=>(A===""||K.nombreCompleto.toLowerCase().includes(A.toLowerCase())||K.email.toLowerCase().includes(A.toLowerCase()))&&(p===""||K.profile===p)&&(w===""||K.curso===w)),[t,A,p,w]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),u.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),u.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:G,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),F&&u.jsx("p",{className:`text-sm mt-2 ${F.isError?"text-red-600":"text-green-600"}`,children:F.message})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),u.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),u.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),R&&u.jsx("p",{className:`text-sm mt-2 ${R.isError?"text-red-600":"text-green-600"}`,children:R.message})]})]})]}),u.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),u.jsxs("form",{onSubmit:z,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),u.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:oe,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:oe,required:!0,readOnly:!!l})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),u.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:l?"Dejar en blanco para no cambiar":"Contrasea temporal",className:oe})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),u.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:oe})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),u.jsx("select",{name:"profile",value:i.profile,onChange:E,className:oe,required:!0,children:bR.map(K=>u.jsx("option",{value:K,children:K},K))})]}),i.profile===tn.ESTUDIANTE&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:oe,required:!0,children:[u.jsx("option",{value:"",children:"Seleccione un curso"}),ai.map(K=>u.jsx("option",{value:K,children:K},K))]})]})]}),i.profile===tn.PROFESORADO&&u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[u.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[u.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ai.map(K=>{var ne;return u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[u.jsx("input",{type:"checkbox",checked:((ne=i.cursos)==null?void 0:ne.includes(K))||!1,onChange:()=>T("cursos",K),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),i.profile===tn.PROFESORADO&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[u.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[u.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Uc.map(K=>{var ne;return u.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[u.jsx("input",{type:"checkbox",checked:((ne=i.asignaturas)==null?void 0:ne.includes(K))||!1,onChange:()=>T("asignaturas",K),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),u.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),S&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:S}),u.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&u.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const K=Rg(),J=await Am(K,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",J),N(" Custom claim agregado exitosamente")}catch(K){console.error(" Error al agregar custom claim:",K),N(`Error: ${K.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),u.jsx("button",{type:"button",onClick:async()=>{var K,ne,J,ce,Q;try{const{auth:Z}=await I2(async()=>{const{auth:fe}=await Promise.resolve().then(()=>pee);return{auth:fe}},void 0);console.log(" Usuario actual:",(K=Z.currentUser)==null?void 0:K.email);const se=await((ne=Z.currentUser)==null?void 0:ne.getIdToken(!0));console.log(" Token refreshed:",!!se);const ie=await((J=Z.currentUser)==null?void 0:J.getIdTokenResult());console.log(" Claims completos:",ie==null?void 0:ie.claims),console.log(" Profile claim:",(ce=ie==null?void 0:ie.claims)==null?void 0:ce.profile),((Q=ie==null?void 0:ie.claims)==null?void 0:Q.profile)==="SUBDIRECCION"?N(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):N(` Custom claim faltante. Claims: ${JSON.stringify(ie==null?void 0:ie.claims)}`)}catch(Z){console.error(" Error verificando token:",Z),N(`Error verificando token: ${Z.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsx("div",{children:u.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:A,onChange:K=>h(K.target.value),className:oe})}),u.jsx("div",{children:u.jsxs("select",{value:p,onChange:K=>g(K.target.value),className:oe,children:[u.jsx("option",{value:"",children:"Todos los perfiles"}),bR.map(K=>u.jsx("option",{value:K,children:K},K))]})}),u.jsx("div",{children:u.jsxs("select",{value:w,onChange:K=>x(K.target.value),className:oe,children:[u.jsx("option",{value:"",children:"Todos los cursos"}),ee.map(K=>u.jsx("option",{value:K,children:K},K))]})})]}),n?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):u.jsxs("div",{className:"overflow-x-auto",children:[u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:le.map(K=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:K.nombreCompleto}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:K.email}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:u.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${K.profile===tn.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":K.profile===tn.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:K.profile})}),u.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[K.profile===tn.ESTUDIANTE&&u.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:K.curso||"Sin curso"}),K.profile===tn.PROFESORADO&&u.jsxs("div",{className:"space-y-1",children:[K.cursos&&K.cursos.length>0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.cursos.slice(0,3).map(ne=>u.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:ne},ne)),K.cursos.length>3&&u.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.cursos.length-3]})]})]}),K.asignaturas&&K.asignaturas.length>0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.asignaturas.slice(0,2).map(ne=>u.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:ne},ne)),K.asignaturas.length>2&&u.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.asignaturas.length-2]})]})]}),(!K.cursos||K.cursos.length===0)&&(!K.asignaturas||K.asignaturas.length===0)&&u.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),K.profile!==tn.ESTUDIANTE&&K.profile!==tn.PROFESORADO&&u.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[u.jsx("button",{onClick:()=>M(K),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),u.jsx("button",{onClick:()=>U(K.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},K.email))})]}),le.length===0&&u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),s==="Monitor de Uso"&&u.jsx(Pme,{})]})},_p="seguimiento_dual_records",spe=t=>{const e=t.data(),n=r=>r&&typeof r.toDate=="function"?r.toDate().toISOString().split("T")[0]:r;return{id:t.id,...e,fechaDesvinculacion:n(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:n(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:n(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:n(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:n(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:n(e.fechaSupervisionExcepcional)}},ape=t=>{const e=mn(zt(Ut,_p),Pr("nombreEstudiante","asc"));return jn(e,r=>{const s=r.docs.map(a=>spe(a));t(s)},r=>{console.error("Error al suscribirse a los registros de seguimiento:",r),t([])})},X2=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(r=>{e[r]&&typeof e[r]=="string"&&(e[r]=Nn.fromDate(new Date(e[r]+"T00:00:00")))}),e},ipe=async t=>{try{const e=X2(t);return(await la(zt(Ut,_p),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},_R=async(t,e)=>{try{const n=On(Ut,_p,t),r=X2(e);await Fo(n,r,{merge:!0})}catch(n){throw console.error("Error al actualizar el registro:",n),new Error("No se pudo actualizar el registro.")}},ope=async t=>{try{const e=On(Ut,_p,t);await ao(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},lpe=async t=>{const e=xB(Ut),n=zt(Ut,_p);let r=0,s=0;for(const a of t){const i=mn(n,fs("rutEstudiante","==",a.rutEstudiante)),o=await Ei(i);if(o.empty){const l=On(n);e.set(l,X2(a)),s++}else{const l=o.docs[0].id,c=On(Ut,_p,l);e.set(c,X2(a),{merge:!0}),r++}}return await e.commit(),{updated:r,created:s}},cpe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},upe=t=>{if(!t||t===""||t==="N/A"||t==="Pendiente")return null;try{if(typeof t=="number"){const e=new Date(1900,0,1),n=new Date(e.getTime()+(t-2)*24*60*60*1e3);return isNaN(n.getTime())?null:n.toISOString().split("T")[0]}if(t instanceof Date)return isNaN(t.getTime())?null:t.toISOString().split("T")[0];if(typeof t=="string"){const e=t.trim();if(e==="")return null;const n=new Date(e);return isNaN(n.getTime())?null:n.toISOString().split("T")[0]}return null}catch(e){return console.warn("Error parsing date:",t,e),null}},dpe=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(e)}return typeof t=="number"?t===1:!1},Ape=({record:t,onSave:e,onClose:n})=>{const[r,s]=W.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:c,value:A,type:h,checked:p}=l.target;s(g=>({...g,[c]:h==="checkbox"?p:A}))},o=()=>{e(r)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:n,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.nombreEstudiante})]})]}),u.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),u.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:r.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!r.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),u.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:r.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!r.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),u.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:r.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!r.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),u.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:r.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!r.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),u.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:r.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),u.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[u.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!r.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),u.jsx("span",{children:"Realizada"})]})]})]}),u.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[u.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),u.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:r.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),u.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:r.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),u.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},fpe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!0),s=W.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Wh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:IE[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[a,i]=W.useState(s),[o,l]=W.useState(null),[c,A]=W.useState(""),[h,p]=W.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[g,w]=W.useState(null),[x,S]=W.useState(null),[N,F]=W.useState(!1),[D,R]=W.useState(null);W.useEffect(()=>{r(!0);const K=ape(ne=>{e(ne),r(!1)});return()=>K()},[]);const j=W.useCallback(K=>{const{name:ne,value:J}=K.target;i(ce=>({...ce,[ne]:J}))},[]),P=W.useCallback(K=>{const{name:ne,value:J}=K.target;p(ce=>({...ce,[ne]:J}))},[]),E=W.useCallback(()=>{i(s),l(null),w(null)},[s]),T=async K=>{K.preventDefault(),w(null);const J=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ce=>{var Q;return!((Q=a[ce])!=null&&Q.trim())});if(J){w(`El campo '${J}' es obligatorio.`);return}try{o?await _R(o,a):await ipe(a),E()}catch(ce){console.error(ce),w("No se pudo guardar el registro.")}},k=W.useCallback(K=>{window.scrollTo({top:0,behavior:"smooth"}),l(K.id),i(K)},[]),z=async K=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await ope(K)}catch(ne){console.error(ne),w("No se pudo eliminar el registro.")}},M=K=>{R(K),F(!0)},U=()=>{R(null),F(!1)},G=async K=>{try{await _R(K.id,K),U()}catch(ne){console.error(ne),alert("No se pudieron guardar los cambios de supervisin.")}},q=()=>{const K=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],ne=mu.aoa_to_sheet([K]),J=mu.book_new();mu.book_append_sheet(J,ne,"Plantilla"),m4(J,"Plantilla_Seguimiento_Dual.xlsx")},oe=K=>{var ce;const ne=(ce=K.target.files)==null?void 0:ce[0];if(!ne)return;S({message:"Procesando archivo...",isError:!1});const J=new FileReader;J.onload=async Q=>{var Z;try{const se=new Uint8Array((Z=Q.target)==null?void 0:Z.result),ie=hx(se,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),fe=ie.SheetNames[0],Se=ie.Sheets[fe],ge=mu.sheet_to_json(Se,{raw:!1,dateNF:"yyyy-mm-dd"});if(ge.length===0)throw new Error("El archivo est vaco.");const xe={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},ve=Object.keys(ge[0]).map(et=>et.trim().toLowerCase()),he=["nombre","rut","curso 2025","empresa","estado"].find(et=>!ve.includes(et));if(he)throw new Error(`Falta la columna requerida: '${he}'`);const He=ge.map((et,Ue)=>{try{const Ie={};for(const je in et){const Ke=xe[je.trim().toLowerCase()];if(Ke){let rt=et[je];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Ke)?(rt=upe(rt),rt&&(Ie[Ke]=rt)):Ke.includes("realizada")?Ie[Ke]=dpe(rt):rt!=null&&rt!==""&&(Ie[Ke]=String(rt).trim())}}return!Ie.nombreEstudiante||!Ie.rutEstudiante?(console.warn(`Fila ${Ue+2}: Faltan campos requeridos`),null):Ie}catch(Ie){return console.error(`Error procesando fila ${Ue+2}:`,Ie),null}}).filter(et=>et!==null);if(console.log("Registros procesados:",He),He.length>0){const{updated:et,created:Ue}=await lpe(He);S({message:`Carga exitosa. ${Ue} registros creados, ${et} actualizados.`,isError:!1})}else S({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(se){console.error("Error completo:",se),S({message:`Error al procesar el archivo: ${se.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},J.readAsArrayBuffer(ne)},ee="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",le=W.useMemo(()=>t.filter(K=>(c===""||K.nombreEstudiante.toLowerCase().includes(c.toLowerCase())||K.nombreEmpresa.toLowerCase().includes(c.toLowerCase())||K.rutEstudiante.includes(c))&&(h.curso===""||K.curso===h.curso)&&(h.empresa===""||K.nombreEmpresa===h.empresa)&&(h.estado===""||K.estado===h.estado)&&(h.comuna===""||K.comuna===h.comuna)&&(h.profesor===""||K.profesorTutorEmpresa===h.profesor)).sort((K,ne)=>K.nombreEstudiante.localeCompare(ne.nombreEstudiante)),[t,c,h]);return W.useMemo(()=>{const K=new Set,ne=new Set;return t.forEach(J=>{J.nombreEmpresa&&K.add(J.nombreEmpresa),J.comuna&&ne.add(J.comuna)}),{empresas:Array.from(K).sort(),comunas:Array.from(ne).sort()}},[t]),n?u.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),u.jsxs("form",{onSubmit:T,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),u.jsx("input",{type:"text",name:"nombreEstudiante",value:a.nombreEstudiante,onChange:j,className:ee,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),u.jsx("input",{type:"text",name:"rutEstudiante",value:a.rutEstudiante,onChange:j,className:ee,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsx("select",{name:"curso",value:a.curso,onChange:j,className:ee,required:!0,children:Wh.map(K=>u.jsx("option",{value:K,children:K},K))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),u.jsxs("select",{name:"profesorTutorEmpresa",value:a.profesorTutorEmpresa,onChange:j,className:ee,children:[u.jsx("option",{value:"",children:"Seleccione un profesor"}),IT.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),u.jsx("input",{type:"text",name:"nombreEmpresa",value:a.nombreEmpresa,onChange:j,className:ee,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),u.jsx("input",{type:"text",name:"rutEmpresa",value:a.rutEmpresa,onChange:j,className:ee})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),u.jsx("input",{type:"text",name:"direccionEmpresa",value:a.direccionEmpresa,onChange:j,className:ee})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),u.jsx("input",{type:"text",name:"comuna",value:a.comuna,onChange:j,className:ee})]}),u.jsxs("div",{className:"lg:col-span-4",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),u.jsx("select",{name:"estado",value:a.estado,onChange:j,className:ee,children:IE.map(K=>u.jsx("option",{value:K,children:K},K))})]})]}),a.estado==="Desvinculado"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),u.jsx("input",{type:"date",name:"fechaDesvinculacion",value:a.fechaDesvinculacion||"",onChange:j,className:`${ee} border-red-300`})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),u.jsx("input",{type:"text",name:"motivoDesvinculacion",value:a.motivoDesvinculacion||"",onChange:j,className:`${ee} border-red-300`})]})]}),g&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:g}),u.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&u.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[u.jsx("button",{onClick:q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),u.jsx("input",{type:"file",onChange:oe,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&u.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:c,onChange:K=>A(K.target.value),className:`${ee} md:col-span-2 lg:col-span-1`}),u.jsxs("select",{name:"curso",value:h.curso,onChange:P,className:ee,children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),Wh.map(K=>u.jsx("option",{children:K},K))]}),u.jsxs("select",{name:"estado",value:h.estado,onChange:P,className:ee,children:[u.jsx("option",{value:"",children:"Todos los Estados"}),IE.map(K=>u.jsx("option",{children:K},K))]}),u.jsxs("select",{name:"profesor",value:h.profesor,onChange:P,className:ee,children:[u.jsx("option",{value:"",children:"Todos los Profesores"}),IT.map(K=>u.jsx("option",{children:K},K))]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:le.map(K=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:K.nombreEstudiante}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:K.curso})]}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.nombreEmpresa}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.profesorTutorEmpresa}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${cpe[K.estado]}`,children:K.estado})}),u.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[u.jsx("button",{onClick:()=>M(K),className:"text-blue-600 hover:underline",children:"Supervisin"}),u.jsx("button",{onClick:()=>k(K),className:"text-yellow-600 hover:underline",children:"Editar"}),u.jsx("button",{onClick:()=>z(K.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},K.id))})]})})]}),N&&D&&u.jsx(Ape,{record:D,onClose:U,onSave:G})]})},_Q="actividades_remotas",hpe="respuestas_actividades",mpe="usuarios",y4=t=>{var n,r,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},ppe=t=>{const e=mn(zt(Ut,_Q),Pr("fechaCreacion","desc"));return jn(e,r=>{const s=r.docs.map(a=>y4(a));t(s)},r=>{console.error("Error al suscribirse a las actividades:",r),t([])})},gpe=async t=>{try{const e={...t,fechaCreacion:Nn.fromDate(new Date),plazoEntrega:Nn.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await la(zt(Ut,_Q),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},vpe=t=>{const e=mn(zt(Ut,hpe));return jn(e,r=>{const s=r.docs.map(a=>y4(a));t(s)},r=>{console.error("Error al suscribirse a las respuestas:",r),t([])})},xpe=t=>{const e=mn(zt(Ut,mpe));return jn(e,r=>{const s=r.docs.map(a=>y4(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},lS={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3]},ype=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),wpe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[s,a]=W.useState([]),[i,o]=W.useState(null),[l,c]=W.useState(!1),[A,h]=W.useState(!1),[p,g]=W.useState(!0),[w,x]=W.useState(null),[S,N]=W.useState(""),[F,D]=W.useState(null),[R,j]=W.useState([]),P={asignatura:Uc[0],nivel:B2[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[E,T]=W.useState(P);W.useEffect(()=>{g(!0);const ge=ppe(e),xe=vpe(r),ve=xpe(me=>{a(me),g(!1)});return()=>{ge(),xe(),ve()}},[]);const k=ge=>{T(xe=>({...xe,[ge.target.name]:ge.target.value}))},z=ge=>{T(xe=>({...xe,recursos:{...xe.recursos,[ge.target.name]:ge.target.value}}))},M=ge=>{ge.target.files&&j(Array.from(ge.target.files))},U=ge=>{T(xe=>{const ve=xe.tipos.includes(ge)?xe.tipos.filter(he=>he!==ge):[...xe.tipos,ge],me={...xe.cantidadPreguntas};return ve.includes(ge)?me[ge]||(me[ge]=lS[ge][0]):delete me[ge],{...xe,tipos:ve,cantidadPreguntas:me}})},G=(ge,xe)=>{T(ve=>({...ve,cantidadPreguntas:{...ve.cantidadPreguntas,[ge]:xe}}))},q=ge=>{T(xe=>{var me;const ve=(me=xe.cursosDestino)!=null&&me.includes(ge)?xe.cursosDestino.filter(he=>he!==ge):[...xe.cursosDestino||[],ge];return{...xe,cursosDestino:ve}})},oe=ge=>{T(xe=>{var me;const ve=(me=xe.estudiantesDestino)!=null&&me.includes(ge)?xe.estudiantesDestino.filter(he=>he!==ge):[...xe.estudiantesDestino||[],ge];return{...xe,estudiantesDestino:ve}})},ee=()=>{const{tipos:ge,contenido:xe,asignatura:ve,nivel:me,cantidadPreguntas:he}=E;let He=`Eres un experto diseador de actividades pedaggicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${xe}"
Asignatura: ${ve}
Nivel: ${me}

Genera los siguientes elementos:
- **introduccion**: Una breve introduccin motivadora para el estudiante sobre el tema: "${xe}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return ge.forEach(et=>{const Ue=he[et]||lS[et][0];switch(et){case"Quiz":He+=`- **Quiz**: Un array de ${Ue} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensin de Lectura":He+=`- **Comprensin de Lectura**: Un array de ${Ue} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Trminos Pareados":He+=`- **Trminos Pareados**: Un array de ${Ue} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":He+=`- **Desarrollo**: Un array de ${Ue} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rbrica de evaluacin).
`;break}}),He};function le(ge,xe){if(ge==="Desarrollo"){if(Array.isArray(xe))return xe.map(ve=>{if(typeof ve=="string"){const me=ve.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return me?{pregunta:me[1].trim(),rubrica:me[2].trim()}:{pregunta:ve.trim(),rubrica:""}}return ve&&typeof ve=="object"?{pregunta:ve.pregunta||ve.Pregunta||ve.texto||"",rubrica:ve.rubrica||ve.Rubrica||ve.rbrica||ve.Rbrica||""}:{pregunta:String(ve),rubrica:""}});if(typeof xe=="string")return xe.split(/\n\n|\n- |\d+\. /).map(ve=>{const me=ve.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return me?{pregunta:me[1].trim(),rubrica:me[2].trim()}:{pregunta:ve.trim(),rubrica:""}}).filter(ve=>ve.pregunta)}if(ge==="Trminos Pareados"){if(Array.isArray(xe))return xe.map((ve,me)=>{if(typeof ve=="string"){const he=ve.match(/^(.+?)[\s:-]+(.+)$/);return he?{id:me,concepto:he[1].trim(),definicion:he[2].trim()}:{id:me,concepto:ve.trim(),definicion:""}}return ve&&typeof ve=="object"?{id:me,concepto:ve.concepto||ve.termino||"",definicion:ve.definicion||ve.significado||""}:{id:me,concepto:String(ve),definicion:""}});if(typeof xe=="object"&&xe!==null)return Object.entries(xe).map(([ve,me],he)=>({id:he,concepto:ve,definicion:me}));if(typeof xe=="string")return xe.split(/\n|;/).map((ve,me)=>{const he=ve.match(/^(.+?)[\s:-]+(.+)$/);return he?{id:me,concepto:he[1].trim(),definicion:he[2].trim()}:{id:me,concepto:ve.trim(),definicion:""}}).filter(ve=>ve.concepto)}if(ge==="Comprensin de Lectura"){if(xe&&typeof xe=="object"&&Array.isArray(xe.preguntas))return{texto:xe.texto||"",preguntas:xe.preguntas.map(ve=>({pregunta:ve.pregunta||ve.Pregunta||"",opciones:ve.opciones||ve.Opciones||[],respuestaCorrecta:ve.respuestaCorrecta||ve.respuesta||""}))};if(Array.isArray(xe)){const ve=xe.find(me=>me&&typeof me=="object"&&"texto"in me&&"preguntas"in me);return ve?{texto:ve.texto||"",preguntas:(ve.preguntas||[]).map(me=>({pregunta:me.pregunta||me.Pregunta||"",opciones:me.opciones||me.Opciones||[],respuestaCorrecta:me.respuestaCorrecta||me.respuesta||""}))}:{texto:xe.map(me=>typeof me=="string"?me:JSON.stringify(me)).join(`
`),preguntas:[]}}if(typeof xe=="string"){const[ve,me]=xe.split(/Preguntas:|\nPreguntas:/i);let he=[];return me&&(he=me.split(/\n- |\n\d+\. /).filter(Boolean).map(He=>{const et=He.split(/Opciones:|\nOpciones:/i),Ue=et[0].trim();let Ie=[],je="";et[1]&&(Ie=et[1].split(/;|\n|,/).map(rt=>rt.trim()).filter(Boolean));const Ke=He.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return Ke&&(je=Ke[1].trim()),{pregunta:Ue,opciones:Ie,respuestaCorrecta:je}})),{texto:(ve==null?void 0:ve.trim())||xe,preguntas:he}}}return xe}const K=async ge=>{var xe;if(ge.preventDefault(),!E.contenido.trim()||E.tipos.length===0){x("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),x(null);try{const ve=await Promise.all(R.map(async vt=>({nombre:vt.name,url:await ype(vt)}))),me="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",He=new Si(me).getGenerativeModel({model:"gemini-1.5-flash-latest"}),et=ee(),Ke=(await(await(await He.generateContent(et)).response).text()).replace(/^```json\s*|```\s*$/g,""),rt=JSON.parse(Ke),xt={};for(const vt of E.tipos)xt[vt]=le(vt,(xe=rt.actividades)==null?void 0:xe[vt]);const Tt={id:"",fechaCreacion:new Date().toISOString(),...E,recursos:{...E.recursos,archivos:ve},introduccion:rt.introduccion,generatedContent:xt};D(Tt)}catch(ve){console.error("Error al generar actividad con IA",ve),x("Error al generar la actividad. Por favor, revise el contenido e intntelo de nuevo. Detalle: "+ve.message)}finally{h(!1)}},ne=async()=>{if(F)try{await gpe(F),T(P),j([]),c(!1),D(null)}catch(ge){console.error("Error al guardar la actividad:",ge),x("No se pudo guardar la actividad en la base de datos.")}},J=W.useMemo(()=>{var ve,me;if(!i||!s)return[];const ge=s.filter(he=>{var He;return he.profile===tn.ESTUDIANTE&&((He=i.cursosDestino)==null?void 0:He.includes(he.curso||""))}).map(he=>he.nombreCompleto),xe=i.estudiantesDestino||[];if(!((ve=i.cursosDestino)!=null&&ve.length)&&!((me=i.estudiantesDestino)!=null&&me.length)){const he=i.nivel.charAt(0);return s.filter(He=>{var et;return He.profile===tn.ESTUDIANTE&&((et=He.curso)==null?void 0:et.startsWith(he))}).map(He=>He.nombreCompleto).sort()}return Array.from(new Set([...ge,...xe])).sort()},[i,s]),ce=W.useMemo(()=>n.filter(ge=>ge.actividadId===(i==null?void 0:i.id)),[n,i]),Q=W.useMemo(()=>s.filter(ge=>ge.profile===tn.ESTUDIANTE).sort((ge,xe)=>ge.nombreCompleto.localeCompare(xe.nombreCompleto)),[s]),Z=W.useMemo(()=>S.trim()?Q.filter(ge=>ge.nombreCompleto.toLowerCase().includes(S.toLowerCase())):Q,[Q,S]),se=()=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),u.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),u.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:J.map(ge=>{const xe=ce.find(ve=>ve.estudianteId===ge);return u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:ge}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:xe?u.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):u.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:xe?`${xe.puntaje}/${xe.puntajeMaximo}`:"-"}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:xe?new Date(xe.fechaCompletado).toLocaleString("es-CL"):"-"})]},ge)})})]})})]})]}),ie=()=>{var ge,xe;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),u.jsx("button",{onClick:()=>c(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),u.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad interactiva para sus estudiantes."}),u.jsxs("form",{onSubmit:K,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),u.jsx("select",{name:"asignatura",value:E.asignatura,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm",children:Uc.map(ve=>u.jsx("option",{value:ve,children:ve},ve))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),u.jsx("select",{name:"nivel",value:E.nivel,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm",children:B2.map(ve=>u.jsx("option",{value:ve,children:ve},ve))})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),u.jsx("textarea",{name:"instrucciones",value:(ge=E.recursos)==null?void 0:ge.instrucciones,onChange:z,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),u.jsx("textarea",{name:"enlaces",value:(xe=E.recursos)==null?void 0:xe.enlaces,onChange:z,placeholder:"Pega un enlace por lnea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imgenes, etc.)"}),u.jsx("input",{type:"file",multiple:!0,onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad ser visible para todo el nivel."}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ai.map(ve=>{var me;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(me=E.cursosDestino)==null?void 0:me.includes(ve),onChange:()=>q(ve),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700",children:ve})]},ve)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),u.jsx("input",{type:"text",placeholder:"Buscar...",value:S,onChange:ve=>N(ve.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Z.map(ve=>{var me;return u.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:(me=E.estudiantesDestino)==null?void 0:me.includes(ve.nombreCompleto),onChange:()=>oe(ve.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ve.nombreCompleto,children:ve.nombreCompleto})]},ve.id)})})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),u.jsx("div",{className:"space-y-3",children:Oee.map(ve=>u.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:E.tipos.includes(ve),onChange:()=>U(ve),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),u.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ve})]}),E.tipos.includes(ve)&&u.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),lS[ve].map(me=>u.jsx("button",{type:"button",onClick:()=>G(ve,me),className:`px-3 py-1 rounded-full font-semibold text-xs ${E.cantidadPreguntas[ve]===me?"bg-amber-500 text-white":"bg-slate-200"}`,children:me},me))]})]},ve))})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{name:"contenido",value:E.contenido,onChange:k,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),u.jsx("input",{type:"date",name:"plazoEntrega",value:E.plazoEntrega,onChange:k,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),w&&u.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:w}),u.jsx("div",{className:"pt-4 text-right",children:u.jsx("button",{type:"submit",disabled:A,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:A?u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},fe=()=>{var ge;return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),u.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar la actividad."}),u.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[u.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[u.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:F==null?void 0:F.introduccion})]}),(F==null?void 0:F.recursos)&&(F.recursos.instrucciones||F.recursos.enlaces||((ge=F.recursos.archivos)==null?void 0:ge.length))&&u.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[u.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),u.jsxs("div",{className:"space-y-3",children:[F.recursos.instrucciones&&u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:F.recursos.instrucciones}),F.recursos.enlaces&&u.jsx("div",{children:F.recursos.enlaces.split(`
`).map((xe,ve)=>xe.trim()&&u.jsx("a",{href:xe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:xe},ve))}),F.recursos.archivos&&F.recursos.archivos.length>0&&u.jsx("ul",{className:"list-disc list-inside",children:F.recursos.archivos.map(xe=>u.jsx("li",{className:"text-slate-700",children:xe.nombre},xe.nombre))})]})]}),F==null?void 0:F.tipos.map(xe=>{const ve=F.generatedContent[xe];return ve?u.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:xe}),u.jsxs("div",{className:"space-y-4 text-sm",children:[xe==="Quiz"&&Array.isArray(ve)&&ve.map((me,he)=>u.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[u.jsxs("p",{className:"font-semibold",children:[he+1,". ",me.pregunta]}),u.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:me.opciones.map((He,et)=>u.jsxs("li",{children:[u.jsxs("strong",{children:[String.fromCharCode(65+et),"."]})," ",He]},et))}),u.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",me.respuestaCorrecta]})]},he)),xe==="Comprensin de Lectura"&&ve&&typeof ve=="object"&&Array.isArray(ve.preguntas)&&u.jsxs("div",{children:[u.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:ve.texto}),ve.preguntas.map((me,he)=>u.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[u.jsxs("p",{className:"font-semibold",children:[he+1,". ",me.pregunta]}),u.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:me.opciones.map((He,et)=>u.jsxs("li",{children:[u.jsxs("strong",{children:[String.fromCharCode(65+et),"."]})," ",He]},et))}),u.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",me.respuestaCorrecta]})]},he))]}),xe==="Trminos Pareados"&&Array.isArray(ve)&&u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border border-slate-200",children:[u.jsx("thead",{className:"bg-slate-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),u.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),u.jsx("tbody",{children:ve.map(me=>u.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[u.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:me.concepto}),u.jsx("td",{className:"p-2 align-top text-slate-700",children:me.definicion})]},me.id))})]})}),xe==="Desarrollo"&&Array.isArray(ve)&&ve.map((me,he)=>u.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[u.jsxs("p",{className:"font-semibold",children:[he+1,". ",me.pregunta]}),u.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[u.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",me.rubrica]})]},he)),(xe==="Quiz"||xe==="Trminos Pareados"||xe==="Desarrollo")&&!Array.isArray(ve)&&u.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',u.jsx("strong",{children:xe}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no vlido.']}),xe==="Comprensin de Lectura"&&(!ve||typeof ve!="object"||!Array.isArray(ve.preguntas))&&u.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',u.jsx("strong",{children:"Comprensin de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},xe):null})]}),u.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>D(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:ne,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},Se=()=>u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),u.jsx("button",{onClick:()=>c(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),u.jsx("div",{className:"space-y-4",children:t.length>0?t.map(ge=>{var me,he;const xe=[];(me=ge.cursosDestino)!=null&&me.length&&xe.push(`Cursos: ${ge.cursosDestino.join(", ")}`),(he=ge.estudiantesDestino)!=null&&he.length&&xe.push(`Estudiantes: ${ge.estudiantesDestino.length}`);const ve=xe.length?xe.join(" | "):`Todo ${ge.nivel}`;return u.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800",children:[ge.asignatura," - ",ge.tipos.join(", ")]}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ve," | Creado: ",new Date(ge.fechaCreacion).toLocaleDateString("es-CL")]})]}),u.jsx("button",{onClick:()=>o(ge),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ge.id)}):u.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return p?u.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):u.jsx("div",{className:"animate-fade-in",children:F?fe():i?se():l?ie():Se()})},bpe="actividades_remotas",CQ="respuestas_actividades",EQ=t=>{var n,r,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},_pe=(t,e)=>{if(!t.curso)return e([]),()=>{};const n=t.curso.charAt(0),r=mn(zt(Ut,bpe),Pr("fechaCreacion","desc"));return jn(r,s=>{const i=s.docs.map(o=>EQ(o)).filter(o=>{var h,p,g,w;const l=!((h=o.cursosDestino)!=null&&h.length)&&!((p=o.estudiantesDestino)!=null&&p.length),c=((g=o.cursosDestino)==null?void 0:g.includes(t.curso))??!1,A=((w=o.estudiantesDestino)==null?void 0:w.includes(t.nombreCompleto))??!1;return c||A?!0:l?o.nivel.charAt(0)===n:!1});e(i)},s=>{console.error("Error al suscribirse a actividades disponibles:",s),e([])})},Cpe=(t,e)=>{const n=mn(zt(Ut,CQ),fs("estudianteId","==",t));return jn(n,r=>{const s=r.docs.map(a=>EQ(a));e(s)},r=>{console.error("Error al suscribirse a las respuestas del estudiante:",r),e([])})},Epe=async t=>{try{const e={...t,fechaCompletado:Nn.fromDate(new Date)};return(await la(zt(Ut,CQ),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},Spe=t=>[...t].sort(()=>Math.random()-.5),Tpe=(t,e)=>{if(e===0)return"1.0";const r=e*.6;let s;return t>=r?s=4+(t-r)*3/(e-r):s=1+t*3/(r||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},CR=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Npe=({actividad:t,onComplete:e,currentUser:n})=>{var F,D,R,j;const[r,s]=W.useState({}),[a,i]=W.useState(!1),[o,l]=W.useState(!1),[c,A]=W.useState(!1),[h,p]=W.useState({}),g=`progress-${n.id}-${t.id}`;W.useEffect(()=>{const P={};t.tipos.forEach(E=>{if(E==="Trminos Pareados"){const T=t.generatedContent[E];T&&(P[E]=Spe(T.map(k=>k.definicion)))}}),p(P);try{const E=localStorage.getItem(g);E&&s(JSON.parse(E))}catch(E){console.error("Could not load saved progress",E)}},[t,g]);const w=(P,E)=>{s(T=>({...T,[P]:E}))},x=()=>{l(!0),A(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(r)),A(!0),setTimeout(()=>A(!1),2e3)}catch(P){console.error("Could not save progress",P),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},S=async()=>{i(!0);let P=0,E=0;const T=[],k={},z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let M=null;M=new Si(z);for(const G of t.tipos){const q=t.generatedContent[G],oe=r[G];if(G==="Quiz"||G==="Comprensin de Lectura"){const ee=G==="Quiz"?q:q.preguntas,le=oe||{};let K=0,ne=0;ee.forEach((J,ce)=>{ne+=1,le[ce]===J.respuestaCorrecta&&(K+=1)}),P+=K,E+=ne,T.push(`${G}: ${K}/${ne} correctas.`),k[G]={puntaje:K,puntajeMaximo:ne}}else if(G==="Trminos Pareados"){const ee=q,le=oe||{};let K=0,ne=0;ee.forEach(J=>{ne+=2,le[J.id]===J.definicion&&(K+=2)}),P+=K,E+=ne,T.push(`${G}: ${K/2}/${ee.length} correctas.`),k[G]={puntaje:K,puntajeMaximo:ne}}else if(G==="Desarrollo"){const ee=q,le=oe||{};let K=0,ne=0;for(let J=0;J<ee.length;J++){const ce=ee[J];if(ne+=3,!M){T.push(`${G} #${J+1}: No se pudo evaluar automticamente.`);continue}try{TA("Autoaprendizaje - Evaluar Desarrollo");const Q=M.getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=`Evala la siguiente respuesta de un estudiante a la pregunta de desarrollo, basndote en la rbrica proporcionada.
                        Pregunta: "${ce.pregunta}".
                        Rbrica: "${ce.rubrica}".
                        Respuesta del estudiante: "${le[J]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un nmero entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,Se=(await(await Q.generateContent(Z)).response).text().replace(/^```json\s*|```\s*$/g,""),ge=JSON.parse(Se),xe=Math.max(0,Math.min(3,parseInt(ge.puntaje,10)||0));K+=xe,T.push(`${G} #${J+1}: Puntaje ${xe}/3. (${ge.feedback})`)}catch(Q){console.error("Error evaluating development question:",Q),T.push(`${G} #${J+1}: No se pudo evaluar automticamente.`)}}P+=K,E+=ne,k[G]={puntaje:K,puntajeMaximo:ne}}}let U;if(M){const G=`
                Un estudiante ha completado una actividad sobre "${t.contenido}".
                Su puntaje total fue ${P} de ${E}.
                Detalle por seccin: ${JSON.stringify(k)}
                Respuestas de desarrollo: ${JSON.stringify(r.Desarrollo||{})}
                
                Genera una retroalimentacin detallada y constructiva en espaol. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un prrafo breve y motivador sobre el desempeo general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con reas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback especfico para esta seccin." }
                }
            `;try{TA("Autoaprendizaje - Retroalimentacin Detallada");const K=(await(await M.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,"");U=JSON.parse(K)}catch(q){console.error("Error generating detailed feedback:",q)}}e({respuestas:r,puntaje:P,puntajeMaximo:E,retroalimentacion:`Buen trabajo! Tu puntaje total es ${P} de ${E}.`,calificacion:Tpe(P,E),puntajesPorSeccion:k},U),localStorage.removeItem(g),i(!1)},N=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((F=t.recursos.archivos)==null?void 0:F.length));return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"Hola!"}),u.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),N&&u.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),u.jsxs("div",{className:"space-y-4",children:[((D=t.recursos)==null?void 0:D.instrucciones)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((R=t.recursos)==null?void 0:R.enlaces)&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((P,E)=>P.trim()&&u.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:P},E))]}),((j=t.recursos)==null?void 0:j.archivos)&&t.recursos.archivos.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),u.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((P,E)=>u.jsx("li",{children:u.jsx("a",{href:P.url,download:P.nombre,className:"text-blue-500 hover:underline",children:P.nombre})},E))})]})]})]}),t.tipos.map(P=>{const E=t.generatedContent[P];if(!E)return null;switch(P){case"Quiz":case"Comprensin de Lectura":{const T=P==="Quiz",k=E,z=T?k:k.preguntas;return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),!T&&u.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:k.texto}),u.jsx("div",{className:"space-y-6",children:z.map((M,U)=>u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[U+1,". ",M.pregunta]}),u.jsx("div",{className:"mt-2 space-y-2",children:M.opciones.map((G,q)=>{var oe;return u.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[u.jsx("input",{type:"radio",name:`q-${P}-${U}-${t.id}`,value:G,checked:((oe=r[P])==null?void 0:oe[U])===G,onChange:()=>w(P,{...r[P]||{},[U]:G}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),u.jsx("span",{children:G})]},q)})})]},`${P}-${U}`))})]},P)}case"Trminos Pareados":{const T=E,k=h[P]||[];return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),T.map(z=>u.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:z.concepto},z.id))]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definicin"}),T.map(z=>{var M;return u.jsx("div",{className:"h-14 flex items-center",children:u.jsxs("select",{value:((M=r[P])==null?void 0:M[z.id])||"",onChange:U=>w(P,{...r[P]||{},[z.id]:U.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[u.jsx("option",{value:"",children:"Seleccionar definicin..."}),k.map((U,G)=>u.jsx("option",{value:U,children:U},G))]})},z.id)})]})]})]},P)}case"Desarrollo":{const T=E;return u.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:P}),T.map((k,z)=>{var M;return u.jsxs("div",{className:"mb-6",children:[u.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:k.pregunta}),u.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[u.jsx("strong",{children:"Rbrica:"})," ",k.rubrica]}),u.jsx("textarea",{value:((M=r[P])==null?void 0:M[z])||"",onChange:U=>w(P,{...r[P]||{},[z]:U.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},z)})]},P)}default:return null}}),u.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[u.jsx("button",{onClick:x,disabled:a||o||c,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?u.jsxs(u.Fragment,{children:[u.jsx(CR,{})," Guardando..."]}):c?" Guardado":"Guardar Progreso"}),u.jsx("button",{onClick:S,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?u.jsxs(u.Fragment,{children:[u.jsx(CR,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},Bpe=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState([]),[a,i]=W.useState(null),[o,l]=W.useState("list"),[c,A]=W.useState(null),[h,p]=W.useState(null),[g,w]=W.useState(!0);W.useEffect(()=>{w(!0);const F=_pe(t,n),D=Cpe(t.nombreCompleto,R=>{s(R),w(!1)});return()=>{F(),D()}},[t]);const x=F=>{p(F)},S=()=>{h&&(i(h),l("activity"),p(null))},N=W.useCallback(async(F,D)=>{if(!a)return;const R={actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...F,retroalimentacionDetallada:D};try{const j=await Epe(R);A({...R,id:j}),l("result")}catch(j){console.error("Error saving submission:",j),alert("No se pudo guardar tu respuesta. El error fue: "+j.message)}},[a,t.nombreCompleto]);if(g)return u.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&a)return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),u.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),u.jsx(Npe,{actividad:a,onComplete:N,currentUser:t})]});if(o==="result"&&c){const F=c.retroalimentacionDetallada,D=c.puntajesPorSeccion||{},R=(j,P)=>{const E=P>0?j/P:0;return E<.4?"bg-red-100 text-red-800":E<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentacin de la Actividad"}),F?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentacin General"}),u.jsx("p",{className:"text-slate-600 mb-6",children:F.resumenGeneral}),u.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[u.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),u.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${R(c.puntaje,c.puntajeMaximo)}`,children:[c.puntaje," / ",c.puntajeMaximo]})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:" reas de Fortaleza"}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:F.areasDeFortaleza.map((j,P)=>u.jsx("li",{children:j},P))})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:" reas de Mejora"}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:F.areasDeMejora.map((j,P)=>u.jsx("li",{children:j},P))})]})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(D).map(([j,{puntaje:P,puntajeMaximo:E}])=>{var T;return u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"text-xl font-bold",children:j}),u.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${R(P,E)}`,children:[P," / ",E]})]}),u.jsx("p",{className:"text-slate-500 text-sm",children:(T=F.feedbackPorSeccion)==null?void 0:T[j]})]},j)})}),u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),u.jsx("div",{className:"space-y-4",children:F.planDeMejora.map((j,P)=>u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:""}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:j.paso}),u.jsx("p",{className:"text-slate-600 text-sm",children:j.detalle})]})]},P))})]})]}):u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"Actividad Completada!"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[u.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),u.jsxs("p",{className:"text-2xl font-bold",children:[c.puntaje," / ",c.puntajeMaximo]})]}),u.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-sm text-slate-500",children:"Calificacin"}),u.jsx("p",{className:"text-2xl font-bold",children:c.calificacion})]})]}),u.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[u.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentacin"}),u.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:c.retroalimentacion})]})]}),u.jsx("button",{onClick:()=>{l("list"),A(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),u.jsxs("p",{className:"mt-4 text-slate-600",children:["Ests seguro de que deseas comenzar esta actividad? ",u.jsx("strong",{children:"Tendrs solo una oportunidad para responder."})]}),u.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habr una segunda oportunidad."}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"S, comenzar"})]})]})}),u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),u.jsx("div",{className:"space-y-4",children:e.length>0?e.map(F=>{const D=r.find(j=>j.actividadId===F.id),R=!!D;return u.jsx("div",{className:`p-4 border rounded-lg ${R?"bg-green-50":"bg-slate-50"}`,children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800",children:[F.asignatura," - ",F.tipos.join(", ")]}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",F.plazoEntrega]})]}),R?u.jsxs("div",{className:"text-right",children:[u.jsx("button",{onClick:()=>{A(D),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),u.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",D.puntaje,"/",D.puntajeMaximo]})]}):u.jsx("button",{onClick:()=>x(F),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},F.id)}):u.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},y_="estudiantes_inclusion",kpe="usuarios",SQ=t=>{const e=t.data();return{id:t.id,...e}},Ipe=t=>{const e=mn(zt(Ut,y_));return jn(e,r=>{const s=r.docs.map(a=>SQ(a));t(s)},r=>{console.error("Error al suscribirse a estudiantes de inclusin:",r),t([])})},Fpe=t=>{const e=mn(zt(Ut,kpe));return jn(e,r=>{const s=r.docs.map(a=>SQ(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},Dpe=async t=>{try{return(await la(zt(Ut,y_),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusin:",e),new Error("No se pudo agregar al estudiante.")}},Lpe=async(t,e)=>{try{const{id:n,...r}=e,s=On(Ut,y_,t);await Fo(s,r)}catch(n){throw console.error("Error al actualizar estudiante de inclusin:",n),new Error("No se pudo actualizar la ficha del estudiante.")}},Rpe=async t=>{try{const e=On(Ut,y_,t);await ao(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusin:",e),new Error("No se pudo eliminar al estudiante.")}},Ppe=({student:t,onClose:e,onSave:n,profesores:r})=>{const[s,a]=W.useState("intervenciones"),[i,o]=W.useState(t);W.useEffect(()=>{o(t)},[t]);const[l,c]=W.useState(null),A={responsable:"",accion:"",observaciones:""},[h,p]=W.useState(A),[g,w]=W.useState({trimestre:"T1",meta:""}),[x,S]=W.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,F]=W.useState(null),[D,R]=W.useState(!1),j={motivo:"",acuerdos:"",asistentes:""},[P,E]=W.useState(j),T=()=>{n(i),e()},k=()=>{if(!h.responsable||!h.accion){alert("Responsable y Accin son campos obligatorios.");return}let me;l?me=(i.intervenciones||[]).map(He=>He.id===l.id?{...He,...h}:He):me=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const he=me.sort((He,et)=>new Date(et.fecha).getTime()-new Date(He.fecha).getTime());o(He=>({...He,intervenciones:he})),p(A),c(null)},z=me=>{c(me),p({responsable:me.responsable,accion:me.accion,observaciones:me.observaciones})},M=me=>{window.confirm("Eliminar esta intervencin?")&&o(he=>({...he,intervenciones:(he.intervenciones||[]).filter(He=>He.id!==me)}))},U=me=>{const{name:he,value:He}=me.target;o(et=>({...et,[he]:He,fechaActualizacionApoyos:new Date().toISOString()}))},G=()=>{if(!g.meta.trim())return;const me={...g,id:crypto.randomUUID(),cumplida:!1};o(he=>({...he,metasProgreso:[...he.metasProgreso||[],me]})),w({trimestre:"T1",meta:""})},q=me=>{o(he=>({...he,metasProgreso:(he.metasProgreso||[]).map(He=>He.id===me?{...He,cumplida:!He.cumplida}:He)}))},oe=me=>{o(he=>({...he,metasProgreso:(he.metasProgreso||[]).filter(He=>He.id!==me)}))},ee=W.useMemo(()=>{const me=i.metasProgreso||[];if(me.length===0)return{percent:0,color:"bg-slate-300"};const he=me.filter(Ue=>Ue.cumplida).length,He=Math.round(he/me.length*100),et=He<40?"bg-red-500":He<75?"bg-yellow-500":"bg-green-500";return{percent:He,color:et}},[i.metasProgreso]),le=W.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const me=new Date(i.fechaActualizacionApoyos),he=new Date;return he.setMonth(he.getMonth()-3),me<he},[i.fechaActualizacionApoyos]),K=()=>{if(!x.titulo.trim()||!x.fecha)return;const me={...x,id:crypto.randomUUID(),resuelta:!1};o(he=>({...he,alertas:[...he.alertas||[],me].sort((He,et)=>new Date(He.fecha).getTime()-new Date(et.fecha).getTime())})),S({titulo:"",fecha:new Date().toISOString().split("T")[0]})},ne=me=>{o(he=>({...he,alertas:(he.alertas||[]).map(He=>He.id===me?{...He,resuelta:!He.resuelta}:He)}))},J=me=>{o(he=>({...he,alertas:(he.alertas||[]).filter(He=>He.id!==me)}))},ce=me=>{me.target.files&&me.target.files[0]&&F(me.target.files[0])},Q=()=>{if(!N)return;R(!0);const me=new FileReader;me.readAsDataURL(N),me.onloadend=()=>{const he={id:crypto.randomUUID(),nombre:N.name,url:me.result,fechaSubida:new Date().toISOString()};o(He=>({...He,archivos:[he,...He.archivos||[]]})),F(null),R(!1)},me.onerror=()=>{alert("Error al leer el archivo."),R(!1)}},Z=me=>{window.confirm("Eliminar este archivo?")&&o(he=>({...he,archivos:(he.archivos||[]).filter(He=>He.id!==me)}))},se=()=>{if(!P.motivo.trim()||!P.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const me={...P,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(he=>({...he,reuniones:[me,...he.reuniones||[]].sort((He,et)=>new Date(et.fecha).getTime()-new Date(He.fecha).getTime())})),E(j)},ie=me=>{window.confirm("Eliminar este registro de reunin?")&&o(he=>({...he,reuniones:(he.reuniones||[]).filter(He=>He.id!==me)}))},fe=()=>{var rt,xt,Tt;const me=new En("p","mm","a4"),he=20,He=me.internal.pageSize.getWidth(),et=me.internal.pageSize.getHeight();let Ue=he;const Ie=vt=>{vt.setFontSize(10),vt.setTextColor(100),vt.text("Ficha de Seguimiento - Mdulo Inclusin",he,15)};Ie(me),me.setFontSize(18),me.setFont("helvetica","bold"),me.setTextColor(40),me.text(i.nombre,he,Ue+10),Ue+=15,me.setFontSize(11),me.setFont("helvetica","normal"),me.setTextColor(80),me.text(`Curso: ${i.curso}`,he,Ue),me.text(`Dificultad: ${i.dificultad}`,he,Ue+6),Ue+=15;const je=vt=>{Ue+vt>et-he&&(me.addPage(),Ie(me),Ue=he)},Ke=vt=>{je(15),me.setFontSize(14),me.setFont("helvetica","bold"),me.text(vt,he,Ue),Ue+=10};if((rt=i.intervenciones)!=null&&rt.length&&(Ke("Historial de Intervenciones"),Pc(me,{startY:Ue,head:[["Fecha","Responsable","Accin","Observaciones"]],body:i.intervenciones.map(vt=>[new Date(vt.fecha).toLocaleDateString("es-CL"),vt.responsable,vt.accion,vt.observaciones||""]),theme:"grid",didDrawPage:vt=>Ie(me)}),Ue=me.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){je(30),Ke("Seguimiento y Apoyos"),me.setFontSize(11),me.setFont("helvetica","normal");const vt=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Vt=me.splitTextToSize(vt,He-he*2);me.text(Vt,he,Ue),Ue+=Vt.length*5+10}(xt=i.metasProgreso)!=null&&xt.length&&(je(30),Ke("Metas de Progreso"),Pc(me,{startY:Ue,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(vt=>[vt.trimestre,vt.meta,vt.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:vt=>Ie(me)}),Ue=me.lastAutoTable.finalY+10),(Tt=i.reuniones)!=null&&Tt.length&&(Ke("Reuniones con Apoderados"),Pc(me,{startY:Ue,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(vt=>[new Date(vt.fecha).toLocaleDateString("es-CL"),vt.motivo,vt.acuerdos,vt.asistentes]),theme:"grid",didDrawPage:vt=>Ie(me)})),me.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},Se=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervencin":"Registrar Nueva Intervencin"}),u.jsxs("select",{value:h.responsable,onChange:me=>p(he=>({...he,responsable:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione Responsable..."}),r.map(me=>u.jsx("option",{value:me,children:me},me))]}),u.jsx("textarea",{value:h.accion,onChange:me=>p(he=>({...he,accion:me.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:h.observaciones,onChange:me=>p(he=>({...he,observaciones:me.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[l&&u.jsx("button",{onClick:()=>{c(null),p(A)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edicin"}),u.jsx("button",{onClick:k,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(me=>u.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.accion}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:me.observaciones}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - ",me.responsable]})]}),u.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[u.jsx("button",{onClick:()=>z(me),className:"text-blue-500",children:""}),u.jsx("button",{onClick:()=>M(me.id),className:"text-red-500",children:""})]})]})},me.id))})]}),ge=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),le&&u.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl",children:""})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),u.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),u.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",ee.percent,"%"]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:u.jsx("div",{className:`${ee.color} h-4 rounded-full transition-all duration-500`,style:{width:`${ee.percent}%`}})})]}),u.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[u.jsxs("select",{value:g.trimestre,onChange:me=>w(he=>({...he,trimestre:me.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"T1",children:"T1"}),u.jsx("option",{value:"T2",children:"T2"}),u.jsx("option",{value:"T3",children:"T3"})]}),u.jsx("input",{value:g.meta,onChange:me=>w(he=>({...he,meta:me.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:G,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(me=>u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[u.jsx("input",{type:"checkbox",checked:me.cumplida,onChange:()=>q(me.id),className:"h-5 w-5 rounded text-amber-500"}),u.jsxs("span",{className:`flex-grow text-sm ${me.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[u.jsxs("strong",{children:[me.trimestre,":"]})," ",me.meta]}),u.jsx("button",{onClick:()=>oe(me.id),className:"text-red-500 text-sm",children:""})]},me.id))})]})]}),xe=()=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),u.jsx("input",{type:"text",value:x.titulo,onChange:me=>S(he=>({...he,titulo:me.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),u.jsx("input",{type:"date",value:x.fecha,onChange:me=>S(he=>({...he,fecha:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),u.jsx("button",{onClick:K,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(me=>u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[u.jsx("input",{type:"checkbox",checked:me.resuelta,onChange:()=>ne(me.id),className:"h-5 w-5 rounded text-amber-500"}),u.jsxs("span",{className:`flex-grow text-sm ${me.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[me.titulo," (",new Date(me.fecha+"T12:00:00").toLocaleDateString(),")"]}),u.jsx("button",{onClick:()=>J(me.id),className:"text-red-500 text-sm",children:""})]},me.id))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),u.jsx("input",{type:"file",onChange:ce,className:"w-full text-sm"}),u.jsx("button",{onClick:Q,disabled:!N||D,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:D?"Subiendo...":"Subir"})]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(me=>u.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[u.jsx("a",{href:me.url,download:me.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:me.nombre}),u.jsx("button",{onClick:()=>Z(me.id),className:"text-red-500 text-sm ml-2",children:""})]},me.id))})]})]}),ve=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[u.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),u.jsx("input",{value:P.motivo,onChange:me=>E(he=>({...he,motivo:me.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("textarea",{value:P.acuerdos,onChange:me=>E(he=>({...he,acuerdos:me.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("input",{value:P.asistentes,onChange:me=>E(he=>({...he,asistentes:me.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("div",{className:"text-right",children:u.jsx("button",{onClick:se,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunin"})})]}),u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(me=>u.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.motivo}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("strong",{children:"Acuerdos:"})," ",me.acuerdos]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - Asistentes: ",me.asistentes]})]}),u.jsx("button",{onClick:()=>ie(me.id),className:"text-red-500 flex-shrink-0 ml-4",children:""})]})},me.id))})]});return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:me=>me.stopPropagation(),children:[u.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:fe,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),u.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:""})]})]}),u.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:u.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(me=>u.jsx("button",{onClick:()=>a(me),className:`${s===me?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:me==="alertas"?"Alertas y Archivos":me==="seguimiento"?"Seguimiento y Metas":me},me))})}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&Se(),s==="seguimiento"&&ge(),s==="reuniones"&&ve(),s==="alertas"&&xe()]}),u.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[u.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),u.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},Mpe=({student:t,onClose:e,onConfirm:n})=>{const[r,s]=W.useState(k2[0]),a=()=>{n(t,r)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),u.jsx("select",{id:"dificultad",value:r,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:k2.map(i=>u.jsx("option",{value:i,children:i},i))})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},ER=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState([]),[a,i]=W.useState(!0),[o,l]=W.useState(null),[c,A]=W.useState(null),[h,p]=W.useState(""),[g,w]=W.useState(""),[x,S]=W.useState("");W.useEffect(()=>{i(!0);const T=Ipe(z=>{n(z),i(!1)}),k=Fpe(z=>{s(z)});return()=>{T(),k()}},[]);const N=async(T,k)=>{if(e.some(M=>M.nombre===T.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const z={nombre:T.nombreCompleto,curso:T.curso||"",dificultad:k,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await Dpe(z)}catch(M){console.error("Error al agregar estudiante:",M),alert("Hubo un error al agregar al estudiante al programa.")}},F=async T=>{try{await Lpe(T.id,T)}catch(k){console.error("Error al actualizar la ficha:",k),alert("Hubo un error al guardar los cambios en la ficha.")}},D=async T=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await Rpe(T),(o==null?void 0:o.id)===T&&l(null)}catch(k){console.error("Error al eliminar estudiante:",k),alert("Hubo un error al eliminar al estudiante.")}},R=T=>{if(P.length===0){alert("No hay datos para exportar.");return}const k=P.map(z=>{var M;return{Nombre:z.nombre,Curso:z.curso,Dificultad:z.dificultad,"N Intervenciones":((M=z.intervenciones)==null?void 0:M.length)||0,"Alertas Pendientes":(z.alertas||[]).filter(U=>!U.resuelta).length}});if(T==="xlsx"){const z=mu.json_to_sheet(k),M=mu.book_new();mu.book_append_sheet(M,z,"Estudiantes_Inclusion"),m4(M,"Estudiantes_Inclusion.xlsx")}else{const z=new En;z.text("Listado de Estudiantes - Programa de Inclusin",14,15),Pc(z,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),z.save("Estudiantes_Inclusion.pdf")}},j=W.useMemo(()=>r.filter(T=>{var k;return T.profile===tn.ESTUDIANTE&&(((k=t.cursos)==null?void 0:k.includes(T.curso||""))||t.profile===tn.SUBDIRECCION)}).filter(T=>!e.some(k=>k.nombre===T.nombreCompleto)),[r,e,t]),P=W.useMemo(()=>e.filter(T=>T.nombre.toLowerCase().includes(h.toLowerCase())&&(g===""||T.curso===g)&&(x===""||T.dificultad===x)).sort((T,k)=>T.nombre.localeCompare(k.nombre)),[e,h,g,x]),E=W.useMemo(()=>r.filter(T=>T.profile===tn.PROFESORADO).map(T=>T.nombreCompleto).sort(),[r]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),a?u.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",P.length,")"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>R("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),u.jsx("button",{onClick:()=>R("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:T=>p(T.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("select",{value:g,onChange:T=>w(T.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),ai.map(T=>u.jsx("option",{children:T},T))]}),u.jsxs("select",{value:x,onChange:T=>S(T.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Todas las Dificultades"}),k2.map(T=>u.jsx("option",{children:T},T))]})]}),u.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:P.map(T=>u.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:T.nombre}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[T.curso," - ",T.dificultad]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>l(T),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),u.jsx("button",{onClick:()=>D(T.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:""})]})]},T.id))})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nmina"}),u.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:j.map(T=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:T.nombreCompleto}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:T.curso})]}),u.jsx("button",{onClick:()=>A(T),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},T.id))})]})]}),c&&u.jsx(Mpe,{student:c,onClose:()=>A(null),onConfirm:(T,k)=>{N(T,k),A(null)}}),o&&u.jsx(Ppe,{student:o,onClose:()=>l(null),onSave:F,profesores:E})]})},TQ="asistencia_dual",Upe=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaHora:((r=(n=e.fechaHora)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaHora}},Ope=(t,e)=>{const n=mn(zt(Ut,TQ),fs("emailEstudiante","==",t),Pr("fechaHora","desc"));return jn(n,s=>{const a=s.docs.map(i=>Upe(i));e(a)},s=>{console.error("Error subscribing to personal attendance:",s),e([])})},jpe=async t=>{try{const e={...t,fechaHora:Nn.fromDate(new Date(t.fechaHora))};await la(zt(Ut,TQ),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},Hpe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Qpe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),Vpe=({currentUser:t})=>{const[e,n]=W.useState(t.curso||""),[r,s]=W.useState([]),[a,i]=W.useState(!1),[o,l]=W.useState(!0),[c,A]=W.useState(null);W.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const p=Ope(t.email,g=>{s(g),l(!1)});return()=>p()},[t.email]);const h=p=>{if(!e){A({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),A(null),navigator.geolocation.getCurrentPosition(async g=>{const w={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:p,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};try{await jpe(w),A({text:`Marca de ${p} registrada con xito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),A({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},g=>{console.error("Geolocation error:",g);let w="No se pudo obtener la ubicacin.";switch(g.code){case g.PERMISSION_DENIED:w="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:w="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case g.TIMEOUT:w="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:w=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${g.code}).`;break}A({text:w,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),u.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),u.jsxs("select",{id:"curso",value:e,onChange:p=>n(p.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"-- Mi curso --"}),Wh.map(p=>u.jsx("option",{value:p,children:p},p))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[u.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),u.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&u.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{children:"Obteniendo ubicacin..."})]}),c&&u.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.text})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),u.jsx("div",{className:"overflow-x-auto max-h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):r.length>0?r.map(p=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(p.fechaHora).toLocaleString("es-CL")}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:u.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${p.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.tipo==="Entrada"?u.jsx(Hpe,{}):u.jsx(Qpe,{}),p.tipo]})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:p.curso})]},p.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},zpe=async()=>{try{console.log(" Debugging users collection...");const t=zt(Br,"users"),e=mn(t,jf(10)),n=await Ei(e),r={exists:!0,totalDocs:n.size,sampleDocs:[],fieldAnalysis:{}},s=new Set;return n.forEach((a,i)=>{const o=a.data(),l={id:a.id,data:o,fields:Object.keys(o)};r.sampleDocs.push(l),Object.keys(o).forEach(c=>s.add(c))}),r.fieldAnalysis={allFields:Array.from(s),commonFields:Array.from(s).filter(a=>r.sampleDocs.filter(o=>a in o.data).length>r.sampleDocs.length*.5)},console.log("Users collection debug result:",r),r}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},Gpe=async(t,e)=>{var l,c,A;const n=new Date(t,e,1),r=new Date(t,e+1,0,23,59,59,999),s=Nn.fromDate(n),a=Nn.fromDate(r),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const p=zt(Br,h);try{const g=mn(p,fs("fechaHora",">=",s),fs("fechaHora","<=",a)),w=await Ei(g);o[h]={exists:!0,hasDateField:!0,count:w.size,sampleDoc:((l=w.docs[0])==null?void 0:l.data())||null}}catch{const w=["fecha","timestamp","createdAt"];let x=!1;for(const S of w)try{const N=mn(p,fs(S,">=",s),fs(S,"<=",a)),F=await Ei(N);o[h]={exists:!0,hasDateField:S,count:F.size,sampleDoc:((c=F.docs[0])==null?void 0:c.data())||null},x=!0;break}catch{continue}if(!x){const S=mn(p,Pr("__name__"),jf(5)),N=await Ei(S);o[h]={exists:!0,hasDateField:!1,count:N.size,sampleDoc:((A=N.docs[0])==null?void 0:A.data())||null,note:"No date field found for filtering"}}}}catch(p){o[h]={exists:!1,error:p instanceof Error?p.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},qpe=(t,e,n,r)=>{try{const s=new Date(t,e,1);s.setHours(0,0,0,0);const a=new Date(t,e+1,0);a.setHours(23,59,59,999),console.log(` Buscando registros entre: ${s.toISOString()} y ${a.toISOString()}`),console.log(` Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=Nn.fromDate(s),o=Nn.fromDate(a),l=[],c=new Map,A=()=>{const p=Array.from(c.values());console.log(` Total registros encontrados: ${p.length}`),p.length>0&&console.log(" Registros por da:",p.reduce((g,w)=>{let x;w.fechaHora instanceof Date?x=w.fechaHora:typeof w.fechaHora=="string"?x=new Date(w.fechaHora):x=new Date;const S=x.getDate();return g[S]=(g[S]||0)+1,g},{})),n(p)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(p=>{try{console.log(` Configurando suscripcin para: ${p}`);const g=zt(Br,p),w=mn(g,fs("fechaHora",">=",i),fs("fechaHora","<=",o),Pr("fechaHora","desc")),x=jn(w,S=>{console.log(` ${p}: ${S.size} documentos encontrados con filtro`),S.size>0?(console.log(` Registros encontrados en ${p}:`),Array.from(c.keys()).filter(F=>F.startsWith(`${p}_`)).forEach(F=>c.delete(F)),S.docs.forEach((F,D)=>{var R;if(D<5){const j=F.data();let P;(R=j.fechaHora)!=null&&R.toDate?P=j.fechaHora.toDate():typeof j.fechaHora=="string"?P=new Date(j.fechaHora):P=new Date,console.log(`   ${D+1}. ${j.emailEstudiante} - ${P.toLocaleString()} - ${j.tipo}`),console.log(`       Fecha original: ${j.fechaHora} (tipo: ${typeof j.fechaHora})`)}}),S.forEach(F=>{var E;const D=F.data();let R;(E=D.fechaHora)!=null&&E.toDate?R=D.fechaHora.toDate():typeof D.fechaHora=="string"?R=new Date(D.fechaHora):D.fechaHora instanceof Date?R=D.fechaHora:D.fechaHora?R=new Date(D.fechaHora):R=new Date;const j={id:F.id,emailEstudiante:D.emailEstudiante||D.email||"",nombreEstudiante:D.nombreEstudiante||D.nombre||"",curso:D.curso||"",fechaHora:R,tipo:D.tipo,ubicacion:D.ubicacion||null,observaciones:D.observaciones||"",...D},P=`${p}_${F.id}`;c.set(P,j)}),A()):console.log(` ${p}: vaca, manteniendo datos existentes`)},S=>{console.warn(` Error con filtro en ${p}:`,S),console.log(` Intentando estrategia alternativa en ${p}...`);const N=mn(g,jf(200)),F=jn(N,R=>{if(console.log(` ${p} (sin filtro): ${R.size} documentos`),R.size>0){const P=R.docs[0].data();console.log(` Estructura en ${p}:`,Object.keys(P)),console.log(" Primer documento:",P)}const j=R.docs.filter(P=>{var k;const E=P.data();if(!E.fechaHora)return!1;let T;return(k=E.fechaHora)!=null&&k.toDate?T=E.fechaHora.toDate():typeof E.fechaHora=="string"?T=new Date(E.fechaHora):E.fechaHora instanceof Date?T=E.fechaHora:T=new Date(E.fechaHora),T>=s&&T<=a});console.log(` ${p}: ${j.length} registros despus de filtro manual`),j.length>0&&(Array.from(c.keys()).filter(E=>E.startsWith(`${p}_`)).forEach(E=>c.delete(E)),j.forEach(E=>{var U;const T=E.data();let k;(U=T.fechaHora)!=null&&U.toDate?k=T.fechaHora.toDate():typeof T.fechaHora=="string"?k=new Date(T.fechaHora):T.fechaHora instanceof Date?k=T.fechaHora:k=new Date(T.fechaHora);const z={id:E.id,emailEstudiante:T.emailEstudiante||T.email||"",nombreEstudiante:T.nombreEstudiante||T.nombre||"",curso:T.curso||"",fechaHora:k,tipo:T.tipo,ubicacion:T.ubicacion||null,observaciones:T.observaciones||"",...T},M=`${p}_${E.id}`;c.set(M,z)}),A())}),D=l.findIndex(R=>R===x);D>=0?l[D]=F:l.push(F)});l.push(x)}catch(g){console.warn(` Error configurando ${p}:`,g)}}),()=>{l.forEach(p=>{try{p()}catch(g){console.warn("Error unsubscribing:",g)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),r&&r(new Error(`Error al configurar suscripcin: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},Kpe=(t,e)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const n=["usuarios","users"],r=[],s=new Map,a=()=>{const o=Array.from(s.values());console.log(` Total usuarios encontrados: ${o.length}`);const l=o.reduce((A,h)=>(A[h.profile]=(A[h.profile]||0)+1,A),{});console.log(" Usuarios por perfil:",l);const c=o.filter(A=>A.profile===tn.ESTUDIANTE);console.log(` Estudiantes encontrados: ${c.length}`),c.forEach(A=>{console.log(`   - ${A.nombreCompleto} (${A.curso}) - ${A.email}`)}),t(o)};let i=!1;return n.forEach(o=>{try{const l=zt(Br,o),c=mn(l),A=jn(c,h=>{h.size>0?(console.log(` Encontrados ${h.size} usuarios en coleccin: ${o}`),i=!0,Array.from(s.keys()).filter(g=>g.startsWith(`${o}_`)).forEach(g=>s.delete(g)),h.forEach(g=>{var w,x,S,N;try{const F=g.data(),D=F.email||F.userEmail||F.mail||F.correo||"",R=F.nombreCompleto||F.displayName||F.name||F.nombre||F.fullName||"",j=F.curso||F.course||F.class||F.grade||"";let P=F.profile||F.role||F.tipo||F.userType||tn.ESTUDIANTE;if(typeof P=="string"){const k=P.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?P=tn.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?P=tn.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?P=tn.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(P=tn.COORDINADOR_TP)}const E={id:g.id,email:D,nombreCompleto:R,curso:j,profile:P,activo:F.activo!==!1,fechaCreacion:((x=(w=F.fechaCreacion)==null?void 0:w.toDate)==null?void 0:x.call(w))||new Date(F.fechaCreacion)||new Date,ultimaActividad:((N=(S=F.ultimaActividad)==null?void 0:S.toDate)==null?void 0:N.call(S))||new Date(F.ultimaActividad)||new Date,...F},T=`${o}_${g.id}`;s.set(T,E)}catch(F){console.warn(`Error procesando documento ${g.id} en ${o}:`,F)}}),a()):console.log(` Coleccin ${o}: vaca`)},h=>{console.warn(` Error en coleccin ${o}:`,h)});r.push(A)}catch(l){console.warn(` Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error(" No se encontraron usuarios en ninguna coleccin"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{r.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(n){return console.error("Error setting up multi-collection users subscription:",n),e&&e(new Error(`Error al configurar suscripcin multi-coleccin: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},$pe=(t,e)=>{try{console.log("Setting up users subscription...");const n=zt(Br,"users"),r=mn(n);return jn(r,a=>{console.log(`Raw users snapshot size: ${a.size}`);const i=[];a.forEach(A=>{var h,p,g,w;try{const x=A.data();console.log(`Processing user doc ${A.id}:`,x);const S=x.email||x.userEmail||x.mail||"",N=x.nombreCompleto||x.displayName||x.name||x.nombre||"",F=x.curso||x.course||x.class||"";let D=x.profile||x.role||x.tipo||tn.ESTUDIANTE;if(typeof D=="string"){const j=D.toLowerCase();j.includes("estudiante")||j.includes("student")||j.includes("alumno")?D=tn.ESTUDIANTE:j.includes("coordinador")||j.includes("coordinator")?D=tn.COORDINADOR_TP:j.includes("profesor")||j.includes("teacher")||j.includes("docente")?D=tn.PROFESOR:(j.includes("subdireccion")||j.includes("subdir"))&&(D=tn.COORDINADOR_TP)}const R={id:A.id,email:S,nombreCompleto:N,curso:F,profile:D,activo:x.activo!==!1,fechaCreacion:((p=(h=x.fechaCreacion)==null?void 0:h.toDate)==null?void 0:p.call(h))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((w=(g=x.ultimaActividad)==null?void 0:g.toDate)==null?void 0:w.call(g))||new Date(x.ultimaActividad)||new Date,...x};i.push(R)}catch(x){console.warn(`Error processing user document ${A.id}:`,x)}}),i.sort((A,h)=>A.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((A,h)=>(A[h.profile]=(A[h.profile]||0)+1,A),{});console.log("Users by profile:",o);const l=i.filter(A=>A.profile===tn.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const c=l.filter(A=>A.curso);console.log(`Estudiantes con curso: ${c.length}`),t(i)},a=>{console.error("Error in subscribeToAllUsers:",a),e&&e(new Error(`Error al cargar usuarios: ${a.message}`))})}catch(n){return console.error("Error setting up subscribeToAllUsers:",n),e&&e(new Error(`Error al configurar suscripcin de usuarios: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},Fy=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Wpe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Ype=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),Xpe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[s,a]=W.useState(!0),[i,o]=W.useState(null),[l,c]=W.useState(new Date),[A,h]=W.useState("todos"),[p,g]=W.useState("");W.useEffect(()=>{a(!0),o(null);const P=l.getFullYear(),E=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",P,"Mes:",E);let T=!1,k=!1;const z=()=>{T&&k&&(console.log("=== CARGA COMPLETA ==="),a(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const U=zt(Br,"asistencia_dual"),G=mn(U,jf(5)),q=await Ei(G);if(console.log(` asistencia_dual - Documentos encontrados: ${q.size}`),q.size>0)q.docs.forEach((oe,ee)=>{const le=oe.data();console.log(`   ${ee+1}. ${oe.id.slice(0,8)} - ${le.emailEstudiante} - ${le.tipo}`),console.log("      Fecha original:",le.fechaHora),console.log("      Todos los campos:",Object.keys(le))});else{console.log(" No se encontraron documentos en asistencia_dual");const oe=["asistenciaEmpresa","asistencia_empresa"];for(const ee of oe)try{const le=zt(Br,ee),K=mn(le,jf(3)),ne=await Ei(K);if(console.log(` ${ee}: ${ne.size} documentos`),ne.size>0){const J=ne.docs[0].data();console.log("   Estructura:",Object.keys(J)),console.log("   Email:",J.emailEstudiante||J.email),console.log("   Fecha:",J.fechaHora||J.fecha)}}catch(le){console.log(` ${ee}: ${le instanceof Error?le.message:"Error"}`)}}}catch(U){console.error(" Error en prueba directa:",U),U.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):U.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),Gpe(P,E).then(U=>{console.log(" Debug info for collections:",U),Object.entries(U).forEach(([G,q])=>{if(q.exists&&q.totalDocs>0){if(console.log(`
 COLECCIN ${G.toUpperCase()}:`),console.log(`    Total documentos: ${q.totalDocs}`),console.log(`    Documentos del perodo: ${q.count}`),console.log(`    Campo de fecha: ${q.hasDateField}`),q.sampleDoc){console.log("    Documento ejemplo:",q.sampleDoc);const oe=q.sampleDoc,ee=oe.emailEstudiante||oe.email||oe.userEmail||oe.correo||"NO ENCONTRADO",le=oe.tipo||oe.type||oe.action||oe.tipoRegistro||"NO ENCONTRADO",K=oe.fechaHora||oe.fecha||oe.timestamp||oe.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${ee}`),console.log(`    Tipo registro: ${le}`),console.log(`    Fecha: ${K}`),console.log("    Todos los campos:",Object.keys(oe))}q.filteredDocs&&q.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",q.filteredDocs.length),q.filteredDocs.forEach((oe,ee)=>{ee<3&&console.log(`      ${ee+1}. ID: ${oe.id}`,oe.data)}))}else q.exists?console.log(` Coleccin ${G}: vaca`):console.log(` Coleccin ${G}: no existe`)})}).catch(U=>{console.error("Debug error:",U)}),zpe().then(U=>{console.log(" Debug info for users:",U),(!U.exists||U.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async q=>{var oe;try{const ee=zt(Br,q),le=mn(ee,jf(5)),K=await Ei(le);K.size>0?(console.log(` Encontrada coleccin alternativa: ${q} con ${K.size} documentos`),console.log("Documento muestra:",(oe=K.docs[0])==null?void 0:oe.data())):console.log(` Coleccin ${q}: vaca`)}catch{console.log(` Coleccin ${q}: no existe`)}}))}).catch(U=>{console.error("Users debug error:",U)});try{console.log("Configurando suscripcin a asistencia...");const U=qpe(P,E,q=>{if(console.log(" Received registros:",q.length),q.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",q[0]);const oe=[...new Set(q.map(ce=>ce.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",oe);const ee=[...new Set(q.map(ce=>ce.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",ee);const le=q.reduce((ce,Q)=>{const Z=new Date(Q.fechaHora).getDate();return ce[Z]||(ce[Z]=[]),ce[Z].push(Q),ce},{});console.log(" Registros por da del mes:",Object.keys(le).map(ce=>({dia:parseInt(ce),cantidad:le[parseInt(ce)].length})));const K=n.map(ce=>ce.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",K);const ne=oe.filter(ce=>K.includes(ce)),J=oe.filter(ce=>!K.includes(ce));console.log(" Emails que coinciden:",ne),console.log(" Emails que NO coinciden:",J)}else console.log(" No se encontraron registros de asistencia para el perodo");e(q),T=!0,z()},q=>{console.error(" Error fetching asistencia:",q),o("Error al cargar datos de asistencia: "+q.message),T=!0,z()});console.log("Configurando suscripcin a usuarios...");const G=Kpe(q=>{if(console.log(" Received users (multi-collection):",q.length),q.length>0){console.log("Sample user:",q[0]);const oe=q.filter(ee=>ee.profile===tn.ESTUDIANTE&&ee.curso);console.log("Dual students found:",oe.length),oe.forEach(ee=>{console.log(`- ${ee.nombreCompleto} (${ee.curso}) - ${ee.email}`)})}r(q),k=!0,z()},q=>{console.error(" Error fetching users (multi-collection):",q),console.log(" Intentando con funcin original de usuarios...");const oe=$pe(ee=>{console.log(" Received users (fallback):",ee.length),r(ee),k=!0,z()},ee=>{console.error(" Error en fallback tambin:",ee),o("Error al cargar estudiantes: "+q.message),k=!0,z()})});return()=>{console.log("Limpiando suscripciones..."),U&&U(),G&&G()}}catch(U){console.error(" Error setting up subscriptions:",U),o("Error al inicializar conexiones: "+(U instanceof Error?U.message:"Error desconocido")),a(!1)}},[l]);const{monthDays:w,monthName:x,year:S}=W.useMemo(()=>{const P=l.getFullYear(),E=l.getMonth();return{monthDays:new Date(P,E+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:P}},[l]),N=W.useMemo(()=>{let P=n.filter(E=>E.profile===tn.ESTUDIANTE&&E.curso&&Wh.includes(Fy(E.curso)));if(A!=="todos"&&(P=P.filter(E=>Fy(E.curso||"")===A)),p&&(P=P.filter(E=>E.nombreCompleto.toLowerCase().includes(p.toLowerCase()))),t.length>0){const E=[...new Set(t.map(z=>z.emailEstudiante).filter(Boolean))],T=P.map(z=>z.email),k=E.filter(z=>!T.includes(z));if(k.length>0){console.log(" Agregando estudiantes faltantes con registros:",k);const M=k.map(U=>{const G=t.find(q=>q.emailEstudiante===U);return{id:U,email:U,nombreCompleto:(G==null?void 0:G.nombreEstudiante)||U.split("@")[0],curso:(G==null?void 0:G.curso)||"3C",profile:tn.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(U=>{const G=A==="todos"||Fy(U.curso)===A,q=!p||U.nombreCompleto.toLowerCase().includes(p.toLowerCase());return G&&q&&Wh.includes(Fy(U.curso))});P=[...P,...M]}}return console.log(` Estudiantes filtrados para mostrar: ${P.length}`),P.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),P.sort((E,T)=>E.nombreCompleto.localeCompare(T.nombreCompleto))},[n,A,p,t]),F=W.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${t.length}`),console.log(` Estudiantes disponibles: ${N.length}`);const P=new Map;return t.length===0?(console.log(" No hay registros para procesar an"),P):(t.forEach((E,T)=>{const k=E.emailEstudiante;if(!k)return;let z;if(E.fechaHora instanceof Date)z=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)z=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")z=new Date(E.fechaHora);else{console.warn("Fecha no vlida en registro:",E);return}const M=z.getDate(),U=z.getMonth(),G=z.getFullYear();T<3&&console.log(` Registro ${T+1}:`,{email:k,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:z.toLocaleString(),ao:G,mes:U,da:M}),P.has(k)||P.set(k,new Map);const q=P.get(k);q.has(M)||q.set(M,{});const oe=q.get(M);E.tipo==="Entrada"?(!oe.entrada||z<new Date(oe.entrada.fechaHora))&&(oe.entrada=E):E.tipo==="Salida"&&(!oe.salida||z>new Date(oe.salida.fechaHora))&&(oe.salida=E)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:P.size,estudiantes:Array.from(P.keys()),registrosPorEstudiante:Array.from(P.entries()).map(([E,T])=>({email:E,dias:Array.from(T.keys()),totalRegistros:Array.from(T.values()).reduce((k,z)=>k+(z.entrada?1:0)+(z.salida?1:0),0)}))}),P)},[t]),D=P=>{c(E=>{const T=new Date(E);return T.setMonth(T.getMonth()+P),T})},R=P=>{P!=null&&P.latitud&&(P!=null&&P.longitud)&&window.open(`https://www.google.com/maps?q=${P.latitud},${P.longitud}`,"_blank")},j=["D","L","M","M","J","V","S"];return i?u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:u.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[u.jsx("button",{onClick:()=>D(-1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:""}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${S}`}),u.jsx("button",{onClick:()=>D(1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:""})]}),u.jsxs("select",{value:A,onChange:P=>h(P.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[u.jsx("option",{value:"todos",children:"Todos los Cursos"}),Wh.map(P=>u.jsx("option",{value:P,children:P},P))]}),u.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:p,onChange:P=>g(P.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s?u.jsxs("div",{className:"text-center text-amber-600 py-10",children:[u.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),u.jsx("div",{children:"Cargando datos de asistencia..."})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:w},(P,E)=>{const k=new Date(S,l.getMonth(),E+1).getDay(),z=k===0||k===6;return u.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${z?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[u.jsx("div",{className:"font-semibold",children:j[k]}),u.jsx("div",{children:E+1})]},E)})]})}),u.jsx("tbody",{children:N.length>0?N.map(P=>u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[u.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:P.nombreCompleto}),Array.from({length:w},(E,T)=>{var G;const k=T+1,z=(G=F.get(P.email))==null?void 0:G.get(k),M=new Date(S,l.getMonth(),T+1),U=M.getDay()===0||M.getDay()===6;return P.email==="alexis.robles@industrialderecoleta.cl"&&k===2&&console.log(" Verificando da 2 para Alexis:",{email:P.email,day:k,hasDataForStudent:F.has(P.email),studentDayRecords:z,allAttendanceKeys:Array.from(F.keys()),daysForStudent:F.get(P.email)?Array.from(F.get(P.email).keys()):[]}),u.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${U?"bg-slate-100 dark:bg-slate-700/50":""}`,children:u.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(z==null?void 0:z.entrada)&&u.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var q;return R((q=z.entrada)==null?void 0:q.ubicacion)},children:[u.jsx(Wpe,{}),u.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(z.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(z==null?void 0:z.salida)&&u.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var q;return R((q=z.salida)==null?void 0:q.ubicacion)},children:[u.jsx(Ype,{}),u.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(z.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},k)})]},P.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:w+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},w_="evaluaciones_formativas",b_="calificaciones_formativas",w4="trabajos_grupales_formativos",Jpe="usuarios",b4=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},Zpe=(t,e,n)=>{const r=mn(zt(Ut,w_),fs("curso","==",t),fs("asignatura","==",e),Pr("fecha","asc"));return jn(r,s=>{n(s.docs.map(a=>b4(a)))},s=>{console.error("Error al suscribirse a evaluaciones:",s),n([])})},ege=async(t,e)=>{const n=xB(Ut),r=On(zt(Ut,w_));n.set(r,{...t,fecha:Nn.fromDate(new Date(t.fecha+"T00:00:00"))});const s=On(Ut,b_,r.id);return n.set(s,e),await n.commit(),r.id},tge=async(t,e)=>{const n=On(Ut,w_,t);await Fo(n,e,{merge:!0})},nge=async t=>{const e=xB(Ut);e.delete(On(Ut,w_,t)),e.delete(On(Ut,b_,t)),await e.commit()},rge=(t,e)=>{if(t.length===0)return e({}),()=>{};const n=t.map(r=>{const s=On(Ut,b_,r);return jn(s,a=>{a.exists()&&e({[r]:a.data()})})});return()=>n.forEach(r=>r())},sge=async(t,e)=>{const n=On(Ut,b_,t);await Fo(n,e,{merge:!0})},age=(t,e,n)=>{const r=mn(zt(Ut,w4),fs("curso","==",t),fs("asignatura","==",e),Pr("fechaPresentacion","desc"));return jn(r,s=>{n(s.docs.map(a=>b4(a)))},s=>{console.error("Error al suscribirse a trabajos grupales:",s),n([])})},ige=async t=>{const e={...t,fechaPresentacion:Nn.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await la(zt(Ut,w4),e)},oge=async(t,e)=>{const n=On(Ut,w4,t);await Fo(n,e,{merge:!0})},lge=t=>{const e=mn(zt(Ut,Jpe));return jn(e,n=>{t(n.docs.map(r=>b4(r)))},n=>{console.error("Error al suscribirse a usuarios:",n),t([])})},NQ=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},J2={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},BQ=t=>t.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},cge=({cursos:t,onSelect:e})=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(n=>{const r=BQ(n);return u.jsxs("div",{className:"space-y-2 text-center",children:[u.jsxs("button",{onClick:()=>e(n),className:`relative w-full h-48 rounded-md shadow-lg ${r.bg} ${r.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[u.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${r.spine} rounded-l-md`}),u.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${r.text}`,children:[u.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:n.slice(0,2)}),u.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:n.slice(2)})]})]}),u.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]},n)})}):u.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),u.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),uge=({curso:t,asignaturas:e,onSelect:n,onBack:r})=>{const s=BQ(t);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),u.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>u.jsxs("button",{onClick:()=>n(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[u.jsx("span",{className:"text-2xl",children:J2[a]||J2.Default}),u.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):u.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[u.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),u.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},dge=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=W.useState([]),[i,o]=W.useState({}),[l,c]=W.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[A,h]=W.useState(null),[p,g]=W.useState(null),[w,x]=W.useState(!0),S=W.useMemo(()=>n.filter(T=>T.profile===tn.ESTUDIANTE&&NQ(T.curso||"")===t).map(T=>T.nombreCompleto).sort((T,k)=>T.localeCompare(k)),[n,t]);W.useEffect(()=>{x(!0);const T=Zpe(t,e,k=>{a(k);const z=k.map(U=>U.id),M=rge(z,U=>{o(G=>({...G,...U}))});return x(!1),()=>M()});return()=>T()},[t,e]);const N=T=>{const{name:k,value:z}=T.target;A?h(M=>M?{...M,[k]:z}:null):c(M=>({...M,[k]:z}))},F=async T=>{if(T.preventDefault(),g(null),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const k={asignatura:e,curso:t,...l},z=S.reduce((M,U)=>(M[U]="trabajado",M),{});try{await ege(k,z),c({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(M){console.error(M),g("No se pudo crear la evaluacin.")}},D=(T,k)=>{var G;const M=(((G=i[T])==null?void 0:G[k])||"trabajado")==="trabajado"?"no trabajado":"trabajado",U={...i,[T]:{...i[T]||{},[k]:M}};o(U),sge(T,{[k]:M}).catch(q=>{console.error("Error updating grade:",q)})},R=T=>h(T),j=async()=>{if(A)try{await tge(A.id,{nombreActividad:A.nombreActividad,fecha:A.fecha}),h(null)}catch(T){console.error(T),g("No se pudo guardar la edicin.")}},P=async T=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await nge(T)}catch(k){console.error(k),g("No se pudo eliminar la evaluacin.")}},E=W.useCallback(T=>{if(s.length===0)return"-";let k=0,z=0;return s.forEach(M=>{var G;const U=(G=i[M.id])==null?void 0:G[T];U==="trabajado"?(k+=7,z++):U==="no trabajado"&&(k+=2,z++)}),z===0?"-":(k/z).toFixed(1)},[i,s]);return w?u.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),u.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),u.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),u.jsxs("div",{className:"w-full",children:[u.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),u.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"w-full",children:[u.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),u.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("div",{className:"w-full",children:u.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),p&&u.jsx("p",{className:"text-red-500 text-sm col-span-full",children:p})]}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),s.map(T=>u.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(A==null?void 0:A.id)===T.id?u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("input",{type:"text",name:"nombreActividad",value:A.nombreActividad,onChange:N,className:"text-xs p-1 w-full dark:bg-slate-600"}),u.jsx("input",{type:"date",name:"fecha",value:A.fecha,onChange:N,className:"text-xs p-1 w-full dark:bg-slate-600"}),u.jsx("button",{onClick:j,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"font-semibold",children:T.nombreActividad}),u.jsx("span",{className:"font-normal text-slate-500",children:T.fecha}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx("button",{onClick:()=>R(T),className:"text-blue-500 hover:text-blue-700",children:""}),u.jsx("button",{onClick:()=>P(T.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},T.id)),u.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:S.map(T=>u.jsxs("tr",{children:[u.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:T}),s.map(k=>{var U;const M=((U=i[k.id])==null?void 0:U[T])==="trabajado";return u.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:u.jsx("button",{onClick:()=>D(k.id,T),className:`text-3xl transition-opacity duration-200 ${M?"opacity-100":"opacity-20"}`,children:J2[e]||J2.Default})},k.id)}),u.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(T)})]},T))})]})})]})},Age=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=W.useState([]),[i,o]=W.useState(null),[l,c]=W.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[A,h]=W.useState({}),[p,g]=W.useState(2),w=W.useMemo(()=>n.filter(R=>R.profile===tn.ESTUDIANTE&&NQ(R.curso||"")===t).sort((R,j)=>R.nombreCompleto.localeCompare(j.nombreCompleto)),[n,t]);W.useEffect(()=>{const R=age(t,e,a);return()=>R()},[t,e]),W.useEffect(()=>{if(i){const R={};i.grupos.forEach(j=>{j.integrantes.forEach(P=>{R[P.nombre]={groupNumber:String(j.numero),role:P.rol||""}})}),h(R)}else h({})},[i]);const x=async R=>{if(R.preventDefault(),!l.nombre.trim())return;const j={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await ige(j),c({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(P){console.error(P),alert("No se pudo crear la actividad grupal.")}},S=async()=>{if(!i)return;const R=new Map;for(const P of w){const E=A[P.nombreCompleto];if(E&&E.groupNumber){const T=parseInt(E.groupNumber,10);isNaN(T)||(R.has(T)||R.set(T,[]),R.get(T).push({nombre:P.nombreCompleto,rol:E.role||""}))}}const j=Array.from(R.entries()).map(([P,E])=>({numero:P,integrantes:E})).sort((P,E)=>P.numero-E.numero);try{await oge(i.id,{grupos:j}),alert("Grupos guardados con xito.")}catch(P){console.error(P),alert("No se pudieron guardar los grupos.")}},N=()=>{if(p<2){alert("Debe haber al menos 2 grupos.");return}const R=[...w].sort(()=>Math.random()-.5),j={};R.forEach((P,E)=>{var T;j[P.nombreCompleto]={groupNumber:String(E%p+1),role:((T=A[P.nombreCompleto])==null?void 0:T.role)||""}}),h(j)},F=(R,j,P)=>{h(E=>({...E,[R]:{...E[R]||{groupNumber:"",role:""},[j]:P}}))},D=W.useMemo(()=>{const R=new Map;return Object.entries(A).forEach(([j,P])=>{P.groupNumber&&(R.has(P.groupNumber)||R.set(P.groupNumber,[]),R.get(P.groupNumber).push({nombre:j,rol:P.role}))}),Array.from(R.entries()).sort((j,P)=>parseInt(j[0])-parseInt(P[0]))},[A]);return i?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),u.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),u.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"md:col-span-1 space-y-4",children:[u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"number",value:p,onChange:R=>g(parseInt(R.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),u.jsx("button",{onClick:N,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),u.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),u.jsx("table",{className:"w-full text-sm",children:u.jsx("tbody",{children:w.map(R=>{var j;return u.jsxs("tr",{children:[u.jsx("td",{className:"py-1 pr-2",children:R.nombreCompleto}),u.jsx("td",{className:"py-1",children:u.jsx("input",{type:"number",value:((j=A[R.nombreCompleto])==null?void 0:j.groupNumber)||"",onChange:P=>F(R.nombreCompleto,"groupNumber",P.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},R.id)})})})]})]}),u.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[u.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),u.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:D.map(([R,j])=>u.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[u.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",R]}),u.jsx("ul",{className:"space-y-2",children:j.map(P=>u.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{className:"flex-1 truncate",children:P.nombre}),u.jsxs("select",{value:P.rol||"",onChange:E=>F(P.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[u.jsx("option",{value:"",children:"-- Asignar Rol --"}),pj.map(E=>u.jsx("option",{value:E,children:E},E))]})]},P.nombre))})]},R))})]})]})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),u.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),u.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsx("input",{value:l.nombre,onChange:R=>c({...l,nombre:R.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),u.jsx("input",{type:"date",value:l.fecha,onChange:R=>c({...l,fecha:R.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.map(R=>u.jsxs("button",{onClick:()=>o(R),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[u.jsx("p",{className:"font-bold",children:R.nombreActividad}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",R.fechaPresentacion]})]},R.id))]})]})},fge=({currentUser:t})=>{const[e,n]=W.useState("calificaciones"),[r,s]=W.useState(null),[a,i]=W.useState(null),[o,l]=W.useState([]),[c,A]=W.useState(!0);W.useEffect(()=>{A(!0);const x=lge(S=>{l(S),A(!1)});return()=>x()},[]);const h=W.useMemo(()=>t.cursos||[],[t.cursos]),p=W.useMemo(()=>t.asignaturas||[],[t.asignaturas]),g=({tab:x,label:S})=>u.jsx("button",{onClick:()=>n(x),className:`${e===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:S}),w=()=>{if(c)return u.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!r)return u.jsx(cge,{cursos:h,onSelect:s});if(!a)return u.jsx(uge,{curso:r,asignaturas:p,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return u.jsx(dge,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return u.jsx(Age,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:u.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[u.jsx(g,{tab:"calificaciones",label:"Calificaciones"}),u.jsx(g,{tab:"grupos",label:"Trabajos Grupales"})]})}),u.jsx("div",{className:"mt-6",children:w()})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hge,mge;function pge(){return{geminiUrl:hge,vertexUrl:mge}}function gge(t,e,n,r){var s,a;if(!(t!=null&&t.baseUrl)){const i=pge();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(a=i.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F0{}function wn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function _(t,e,n){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(n))for(let c=0;c<l.length;c++){const A=l[c];_(A,e.slice(a+1),n[c])}else for(const c of l)_(c,e.slice(a+1),n)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];_(l[0],e.slice(a+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function y(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>y(i,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i5(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SR||(SR={}));var TR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(TR||(TR={}));var If;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(If||(If={}));var NR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(NR||(NR={}));var BR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(BR||(BR={}));var kR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(kR||(kR={}));var IR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(IR||(IR={}));var FR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(FR||(FR={}));var DR;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(DR||(DR={}));var LR;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(LR||(LR={}));var RR;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(RR||(RR={}));var PR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(PR||(PR={}));var MR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(MR||(MR={}));var UR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(UR||(UR={}));var OR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(OR||(OR={}));var jR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jR||(jR={}));var Z2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Z2||(Z2={}));var HR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(HR||(HR={}));var o5;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(o5||(o5={}));var QR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(QR||(QR={}));var VR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(VR||(VR={}));var zR;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(zR||(zR={}));var GR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GR||(GR={}));var qR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(qR||(qR={}));var KR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(KR||(KR={}));var $R;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})($R||($R={}));var WR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(WR||(WR={}));var YR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(YR||(YR={}));var XR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(XR||(XR={}));var JR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(JR||(JR={}));var ZR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ZR||(ZR={}));var e6;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(e6||(e6={}));var t6;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(t6||(t6={}));var n6;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(n6||(n6={}));var r6;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(r6||(r6={}));var s6;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(s6||(s6={}));var a6;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(a6||(a6={}));var i6;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(i6||(i6={}));var o6;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(o6||(o6={}));var l6;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(l6||(l6={}));var c6;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(c6||(c6={}));var Um;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Um||(Um={}));class l5{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pg{get text(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",A=!1;const h=[];for(const p of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,w]of Object.entries(p))g!=="text"&&g!=="thought"&&(w!==null||w!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;A=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),A?c:void 0}get data(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const A=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&A.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return A.length>0&&console.warn(`there are non-data parts ${A} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(A=>A.functionCall).map(A=>A.functionCall).filter(A=>A!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,a,i,o,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const A=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((A==null?void 0:A.length)!==0)return(c=A==null?void 0:A[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,a,i,o,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const A=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((A==null?void 0:A.length)!==0)return(c=A==null?void 0:A[0])===null||c===void 0?void 0:c.output}}class u6{}class d6{}class vge{}class xge{}class A6{}class f6{}class h6{}class yge{}class m6{}class p6{}class g6{}class v6{}class wge{}class bge{}class _ge{}class x6{}class Cge{get text(){var e,n,r;let s="",a=!1;const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(o))l!=="text"&&l!=="thought"&&c!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class eb{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new eb;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const s=e.response;if(s){const a=new m6,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?i5(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,r.response=a}}else{const s=e.response;if(s){const a=new m6,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const c=l.video;return{video:{uri:c==null?void 0:c.uri,videoBytes:c!=null&&c.encodedVideo?i5(c==null?void 0:c.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,r.response=a}}return r}}class Ege{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Is(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kQ(t,e){const n=Is(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function IQ(t){return Array.isArray(t)?t.map(e=>tb(e)):[tb(t)]}function tb(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function FQ(t){const e=tb(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function DQ(t){const e=tb(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function y6(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function LQ(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>y6(e)):[y6(t)]}function c5(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function w6(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function b6(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function il(t){if(t==null)throw new Error("ContentUnion is required");return c5(t)?t:{role:"user",parts:LQ(t)}}function RQ(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=il(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=il(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>il(n)):[il(e)]}function yu(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(w6(t)||b6(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[il(t)]}const e=[],n=[],r=c5(t[0]);for(const s of t){const a=c5(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(w6(s)||b6(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:LQ(n)}),e}function Sge(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(If).includes(n[0].toUpperCase())?n[0].toUpperCase():If.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(If).includes(r.toUpperCase())?r.toUpperCase():If.TYPE_UNSPECIFIED})}}function np(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Sge(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(If).includes(o.toUpperCase())?o.toUpperCase():If.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=np(o);else if(r.includes(i)){const l=[];for(const c of o){if(c.type=="null"){e.nullable=!0;continue}l.push(np(c))}e[i]=l}else if(s.includes(i)){const l={};for(const[c,A]of Object.entries(o))l[c]=np(A);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function _4(t){return np(t)}function C4(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function E4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Qp(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=np(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=np(e.response));return t}function Vp(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Tge(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function UA(t,e){if(typeof e!="string")throw new Error("name must be a string");return Tge(t,e,"cachedContents")}function PQ(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function D0(t){return i5(t)}function Nge(t){return t!=null&&typeof t=="object"&&"name"in t}function Bge(t){return t!=null&&typeof t=="object"&&"video"in t}function kge(t){return t!=null&&typeof t=="object"&&"uri"in t}function MQ(t){var e;let n;if(Nge(t)&&(n=t.name),!(kge(t)&&(n=t.uri,n===void 0))&&!(Bge(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function UQ(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function OQ(t){for(const e of["models","tunedModels","publisherModels"])if(Ige(t,e))return t[e];return[]}function Ige(t,e){return t!==null&&typeof t=="object"&&e in t}function Fge(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Dge(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const i=Fge(s,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function jQ(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Lge(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zp(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function HQ(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rge(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function Pge(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Mge(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Uge(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],Rge(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],Pge(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Mge(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function QQ(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Uge(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function Oge(t){const e={},n=y(t,["anyOf"]);n!=null&&_(e,["anyOf"],n);const r=y(t,["default"]);r!=null&&_(e,["default"],r);const s=y(t,["description"]);s!=null&&_(e,["description"],s);const a=y(t,["enum"]);a!=null&&_(e,["enum"],a);const i=y(t,["example"]);i!=null&&_(e,["example"],i);const o=y(t,["format"]);o!=null&&_(e,["format"],o);const l=y(t,["items"]);l!=null&&_(e,["items"],l);const c=y(t,["maxItems"]);c!=null&&_(e,["maxItems"],c);const A=y(t,["maxLength"]);A!=null&&_(e,["maxLength"],A);const h=y(t,["maxProperties"]);h!=null&&_(e,["maxProperties"],h);const p=y(t,["maximum"]);p!=null&&_(e,["maximum"],p);const g=y(t,["minItems"]);g!=null&&_(e,["minItems"],g);const w=y(t,["minLength"]);w!=null&&_(e,["minLength"],w);const x=y(t,["minProperties"]);x!=null&&_(e,["minProperties"],x);const S=y(t,["minimum"]);S!=null&&_(e,["minimum"],S);const N=y(t,["nullable"]);N!=null&&_(e,["nullable"],N);const F=y(t,["pattern"]);F!=null&&_(e,["pattern"],F);const D=y(t,["properties"]);D!=null&&_(e,["properties"],D);const R=y(t,["propertyOrdering"]);R!=null&&_(e,["propertyOrdering"],R);const j=y(t,["required"]);j!=null&&_(e,["required"],j);const P=y(t,["title"]);P!=null&&_(e,["title"],P);const E=y(t,["type"]);return E!=null&&_(e,["type"],E),e}function jge(t){const e={};if(y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=y(t,["category"]);n!=null&&_(e,["category"],n);const r=y(t,["threshold"]);return r!=null&&_(e,["threshold"],r),e}function Hge(t){const e={},n=y(t,["behavior"]);n!=null&&_(e,["behavior"],n);const r=y(t,["description"]);r!=null&&_(e,["description"],r);const s=y(t,["name"]);s!=null&&_(e,["name"],s);const a=y(t,["parameters"]);a!=null&&_(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&_(e,["parametersJsonSchema"],i);const o=y(t,["response"]);o!=null&&_(e,["response"],o);const l=y(t,["responseJsonSchema"]);return l!=null&&_(e,["responseJsonSchema"],l),e}function Qge(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function Vge(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],Qge(n)),e}function zge(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function Gge(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],zge(n)),e}function qge(){return{}}function Kge(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Hge(c))),_(e,["functionDeclarations"],l)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearch"]);r!=null&&_(e,["googleSearch"],Vge(r));const s=y(t,["googleSearchRetrieval"]);if(s!=null&&_(e,["googleSearchRetrieval"],Gge(s)),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(y(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");y(t,["urlContext"])!=null&&_(e,["urlContext"],qge());const i=y(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const o=y(t,["computerUse"]);return o!=null&&_(e,["computerUse"],o),e}function $ge(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);return r!=null&&_(e,["allowedFunctionNames"],r),e}function Wge(t){const e={},n=y(t,["latitude"]);n!=null&&_(e,["latitude"],n);const r=y(t,["longitude"]);return r!=null&&_(e,["longitude"],r),e}function Yge(t){const e={},n=y(t,["latLng"]);n!=null&&_(e,["latLng"],Wge(n));const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function Xge(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&_(e,["functionCallingConfig"],$ge(n));const r=y(t,["retrievalConfig"]);return r!=null&&_(e,["retrievalConfig"],Yge(r)),e}function Jge(t){const e={},n=y(t,["voiceName"]);return n!=null&&_(e,["voiceName"],n),e}function VQ(t){const e={},n=y(t,["prebuiltVoiceConfig"]);return n!=null&&_(e,["prebuiltVoiceConfig"],Jge(n)),e}function Zge(t){const e={},n=y(t,["speaker"]);n!=null&&_(e,["speaker"],n);const r=y(t,["voiceConfig"]);return r!=null&&_(e,["voiceConfig"],VQ(r)),e}function eve(t){const e={},n=y(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Zge(s))),_(e,["speakerVoiceConfigs"],r)}return e}function tve(t){const e={},n=y(t,["voiceConfig"]);n!=null&&_(e,["voiceConfig"],VQ(n));const r=y(t,["multiSpeakerVoiceConfig"]);r!=null&&_(e,["multiSpeakerVoiceConfig"],eve(r));const s=y(t,["languageCode"]);return s!=null&&_(e,["languageCode"],s),e}function nve(t){const e={},n=y(t,["includeThoughts"]);n!=null&&_(e,["includeThoughts"],n);const r=y(t,["thinkingBudget"]);return r!=null&&_(e,["thinkingBudget"],r),e}function rve(t,e,n){const r={},s=y(e,["systemInstruction"]);n!==void 0&&s!=null&&_(n,["systemInstruction"],QQ(il(s)));const a=y(e,["temperature"]);a!=null&&_(r,["temperature"],a);const i=y(e,["topP"]);i!=null&&_(r,["topP"],i);const o=y(e,["topK"]);o!=null&&_(r,["topK"],o);const l=y(e,["candidateCount"]);l!=null&&_(r,["candidateCount"],l);const c=y(e,["maxOutputTokens"]);c!=null&&_(r,["maxOutputTokens"],c);const A=y(e,["stopSequences"]);A!=null&&_(r,["stopSequences"],A);const h=y(e,["responseLogprobs"]);h!=null&&_(r,["responseLogprobs"],h);const p=y(e,["logprobs"]);p!=null&&_(r,["logprobs"],p);const g=y(e,["presencePenalty"]);g!=null&&_(r,["presencePenalty"],g);const w=y(e,["frequencyPenalty"]);w!=null&&_(r,["frequencyPenalty"],w);const x=y(e,["seed"]);x!=null&&_(r,["seed"],x);const S=y(e,["responseMimeType"]);S!=null&&_(r,["responseMimeType"],S);const N=y(e,["responseSchema"]);N!=null&&_(r,["responseSchema"],Oge(_4(N)));const F=y(e,["responseJsonSchema"]);if(F!=null&&_(r,["responseJsonSchema"],F),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=y(e,["safetySettings"]);if(n!==void 0&&D!=null){let M=D;Array.isArray(M)&&(M=M.map(U=>jge(U))),_(n,["safetySettings"],M)}const R=y(e,["tools"]);if(n!==void 0&&R!=null){let M=Vp(R);Array.isArray(M)&&(M=M.map(U=>Kge(Qp(U)))),_(n,["tools"],M)}const j=y(e,["toolConfig"]);if(n!==void 0&&j!=null&&_(n,["toolConfig"],Xge(j)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=y(e,["cachedContent"]);n!==void 0&&P!=null&&_(n,["cachedContent"],UA(t,P));const E=y(e,["responseModalities"]);E!=null&&_(r,["responseModalities"],E);const T=y(e,["mediaResolution"]);T!=null&&_(r,["mediaResolution"],T);const k=y(e,["speechConfig"]);if(k!=null&&_(r,["speechConfig"],tve(C4(k))),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=y(e,["thinkingConfig"]);return z!=null&&_(r,["thinkingConfig"],nve(z)),r}function sve(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["request","model"],Is(t,r));const s=y(e,["contents"]);if(s!=null){let i=yu(s);Array.isArray(i)&&(i=i.map(o=>QQ(o))),_(n,["request","contents"],i)}const a=y(e,["config"]);return a!=null&&_(n,["request","generationConfig"],rve(t,a,n)),n}function ave(t,e){const n={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=y(e,["fileName"]);r!=null&&_(n,["fileName"],r);const s=y(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>sve(t,i))),_(n,["requests","requests"],a)}return n}function ive(t,e){const n={},r=y(t,["displayName"]);if(e!==void 0&&r!=null&&_(e,["batch","displayName"],r),y(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ove(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["src"]);s!=null&&_(n,["batch","inputConfig"],ave(t,jQ(t,s)));const a=y(e,["config"]);return a!=null&&_(n,["config"],ive(a,n)),n}function lve(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],zp(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function cve(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],zp(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function uve(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);if(e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),y(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function dve(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],uve(n,e)),e}function Ave(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],zp(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function fve(t){const e={},n=y(t,["format"]);n!=null&&_(e,["instancesFormat"],n);const r=y(t,["gcsUri"]);r!=null&&_(e,["gcsSource","uris"],r);const s=y(t,["bigqueryUri"]);if(s!=null&&_(e,["bigquerySource","inputUri"],s),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function hve(t){const e={},n=y(t,["format"]);n!=null&&_(e,["predictionsFormat"],n);const r=y(t,["gcsUri"]);r!=null&&_(e,["gcsDestination","outputUriPrefix"],r);const s=y(t,["bigqueryUri"]);if(s!=null&&_(e,["bigqueryDestination","outputUri"],s),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function mve(t,e){const n={},r=y(t,["displayName"]);e!==void 0&&r!=null&&_(e,["displayName"],r);const s=y(t,["dest"]);return e!==void 0&&s!=null&&_(e,["outputConfig"],hve(Lge(s))),n}function pve(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["model"],Is(t,r));const s=y(e,["src"]);s!=null&&_(n,["inputConfig"],fve(jQ(t,s)));const a=y(e,["config"]);return a!=null&&_(n,["config"],mve(a,n)),n}function gve(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],zp(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function vve(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],zp(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function xve(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const a=y(t,["filter"]);return e!==void 0&&a!=null&&_(e,["_query","filter"],a),n}function yve(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],xve(n,e)),e}function wve(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],zp(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function bve(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function _ve(t){const e={},n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Cve(t){const e={},n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Eve(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],bve(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],_ve(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Cve(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function Sve(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Eve(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function Tve(t){const e={},n=y(t,["citationSources"]);return n!=null&&_(e,["citations"],n),e}function Nve(t){const e={},n=y(t,["retrievedUrl"]);n!=null&&_(e,["retrievedUrl"],n);const r=y(t,["urlRetrievalStatus"]);return r!=null&&_(e,["urlRetrievalStatus"],r),e}function Bve(t){const e={},n=y(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Nve(s))),_(e,["urlMetadata"],r)}return e}function kve(t){const e={},n=y(t,["content"]);n!=null&&_(e,["content"],Sve(n));const r=y(t,["citationMetadata"]);r!=null&&_(e,["citationMetadata"],Tve(r));const s=y(t,["tokenCount"]);s!=null&&_(e,["tokenCount"],s);const a=y(t,["finishReason"]);a!=null&&_(e,["finishReason"],a);const i=y(t,["urlContextMetadata"]);i!=null&&_(e,["urlContextMetadata"],Bve(i));const o=y(t,["avgLogprobs"]);o!=null&&_(e,["avgLogprobs"],o);const l=y(t,["groundingMetadata"]);l!=null&&_(e,["groundingMetadata"],l);const c=y(t,["index"]);c!=null&&_(e,["index"],c);const A=y(t,["logprobsResult"]);A!=null&&_(e,["logprobsResult"],A);const h=y(t,["safetyRatings"]);return h!=null&&_(e,["safetyRatings"],h),e}function Ive(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>kve(l))),_(e,["candidates"],o)}const s=y(t,["modelVersion"]);s!=null&&_(e,["modelVersion"],s);const a=y(t,["promptFeedback"]);a!=null&&_(e,["promptFeedback"],a);const i=y(t,["usageMetadata"]);return i!=null&&_(e,["usageMetadata"],i),e}function zQ(t){const e={},n=y(t,["details"]);n!=null&&_(e,["details"],n);const r=y(t,["code"]);r!=null&&_(e,["code"],r);const s=y(t,["message"]);return s!=null&&_(e,["message"],s),e}function Fve(t){const e={},n=y(t,["response"]);n!=null&&_(e,["response"],Ive(n));const r=y(t,["error"]);return r!=null&&_(e,["error"],zQ(r)),e}function Dve(t){const e={},n=y(t,["responsesFile"]);n!=null&&_(e,["fileName"],n);const r=y(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Fve(a))),_(e,["inlinedResponses"],s)}return e}function u5(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["metadata","displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["metadata","state"]);s!=null&&_(e,["state"],HQ(s));const a=y(t,["metadata","createTime"]);a!=null&&_(e,["createTime"],a);const i=y(t,["metadata","endTime"]);i!=null&&_(e,["endTime"],i);const o=y(t,["metadata","updateTime"]);o!=null&&_(e,["updateTime"],o);const l=y(t,["metadata","model"]);l!=null&&_(e,["model"],l);const c=y(t,["metadata","output"]);return c!=null&&_(e,["dest"],Dve(c)),e}function Lve(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>u5(i))),_(e,["batchJobs"],a)}return e}function Rve(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["done"]);r!=null&&_(e,["done"],r);const s=y(t,["error"]);return s!=null&&_(e,["error"],zQ(s)),e}function GQ(t){const e={},n=y(t,["details"]);n!=null&&_(e,["details"],n);const r=y(t,["code"]);r!=null&&_(e,["code"],r);const s=y(t,["message"]);return s!=null&&_(e,["message"],s),e}function Pve(t){const e={},n=y(t,["instancesFormat"]);n!=null&&_(e,["format"],n);const r=y(t,["gcsSource","uris"]);r!=null&&_(e,["gcsUri"],r);const s=y(t,["bigquerySource","inputUri"]);return s!=null&&_(e,["bigqueryUri"],s),e}function Mve(t){const e={},n=y(t,["predictionsFormat"]);n!=null&&_(e,["format"],n);const r=y(t,["gcsDestination","outputUriPrefix"]);r!=null&&_(e,["gcsUri"],r);const s=y(t,["bigqueryDestination","outputUri"]);return s!=null&&_(e,["bigqueryUri"],s),e}function d5(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["state"]);s!=null&&_(e,["state"],HQ(s));const a=y(t,["error"]);a!=null&&_(e,["error"],GQ(a));const i=y(t,["createTime"]);i!=null&&_(e,["createTime"],i);const o=y(t,["startTime"]);o!=null&&_(e,["startTime"],o);const l=y(t,["endTime"]);l!=null&&_(e,["endTime"],l);const c=y(t,["updateTime"]);c!=null&&_(e,["updateTime"],c);const A=y(t,["model"]);A!=null&&_(e,["model"],A);const h=y(t,["inputConfig"]);h!=null&&_(e,["src"],Pve(h));const p=y(t,["outputConfig"]);return p!=null&&_(e,["dest"],Mve(p)),e}function Uve(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>d5(i))),_(e,["batchJobs"],a)}return e}function Ove(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["done"]);r!=null&&_(e,["done"],r);const s=y(t,["error"]);return s!=null&&_(e,["error"],GQ(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var v0;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(v0||(v0={}));class s1{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jve extends F0{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new s1(v0.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=pve(this.apiClient,e);return o=wn("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>d5(A))}else{const c=ove(this.apiClient,e);return o=wn("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>u5(A))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=gve(this.apiClient,e);return o=wn("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>d5(A))}else{const c=lve(this.apiClient,e);return o=wn("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>u5(A))}}async cancel(e){var n,r,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=vve(this.apiClient,e);i=wn("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=cve(this.apiClient,e);i=wn("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=yve(e);return o=wn("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=Uve(A),p=new x6;return Object.assign(p,h),p})}else{const c=dve(e);return o=wn("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=Lve(A),p=new x6;return Object.assign(p,h),p})}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=wve(this.apiClient,e);return o=wn("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>Ove(A))}else{const c=Ave(this.apiClient,e);return o=wn("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>Rve(A))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hve(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function Qve(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Vve(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function zve(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],Hve(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],Qve(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Vve(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function _6(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>zve(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function Gve(t){const e={},n=y(t,["behavior"]);n!=null&&_(e,["behavior"],n);const r=y(t,["description"]);r!=null&&_(e,["description"],r);const s=y(t,["name"]);s!=null&&_(e,["name"],s);const a=y(t,["parameters"]);a!=null&&_(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&_(e,["parametersJsonSchema"],i);const o=y(t,["response"]);o!=null&&_(e,["response"],o);const l=y(t,["responseJsonSchema"]);return l!=null&&_(e,["responseJsonSchema"],l),e}function qve(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function Kve(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],qve(n)),e}function $ve(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function Wve(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],$ve(n)),e}function Yve(){return{}}function Xve(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>Gve(c))),_(e,["functionDeclarations"],l)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearch"]);r!=null&&_(e,["googleSearch"],Kve(r));const s=y(t,["googleSearchRetrieval"]);if(s!=null&&_(e,["googleSearchRetrieval"],Wve(s)),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(y(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");y(t,["urlContext"])!=null&&_(e,["urlContext"],Yve());const i=y(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const o=y(t,["computerUse"]);return o!=null&&_(e,["computerUse"],o),e}function Jve(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);return r!=null&&_(e,["allowedFunctionNames"],r),e}function Zve(t){const e={},n=y(t,["latitude"]);n!=null&&_(e,["latitude"],n);const r=y(t,["longitude"]);return r!=null&&_(e,["longitude"],r),e}function exe(t){const e={},n=y(t,["latLng"]);n!=null&&_(e,["latLng"],Zve(n));const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function txe(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&_(e,["functionCallingConfig"],Jve(n));const r=y(t,["retrievalConfig"]);return r!=null&&_(e,["retrievalConfig"],exe(r)),e}function nxe(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const s=y(t,["expireTime"]);e!==void 0&&s!=null&&_(e,["expireTime"],s);const a=y(t,["displayName"]);e!==void 0&&a!=null&&_(e,["displayName"],a);const i=y(t,["contents"]);if(e!==void 0&&i!=null){let A=yu(i);Array.isArray(A)&&(A=A.map(h=>_6(h))),_(e,["contents"],A)}const o=y(t,["systemInstruction"]);e!==void 0&&o!=null&&_(e,["systemInstruction"],_6(il(o)));const l=y(t,["tools"]);if(e!==void 0&&l!=null){let A=l;Array.isArray(A)&&(A=A.map(h=>Xve(h))),_(e,["tools"],A)}const c=y(t,["toolConfig"]);if(e!==void 0&&c!=null&&_(e,["toolConfig"],txe(c)),y(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rxe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["model"],kQ(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],nxe(s,n)),n}function sxe(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],UA(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function axe(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],UA(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function ixe(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const s=y(t,["expireTime"]);return e!==void 0&&s!=null&&_(e,["expireTime"],s),n}function oxe(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],UA(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],ixe(s,n)),n}function lxe(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),n}function cxe(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],lxe(n,e)),e}function uxe(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function dxe(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["data"]);r!=null&&_(e,["data"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function Axe(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function fxe(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],uxe(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],dxe(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Axe(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function C6(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fxe(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function hxe(t){const e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=y(t,["description"]);n!=null&&_(e,["description"],n);const r=y(t,["name"]);r!=null&&_(e,["name"],r);const s=y(t,["parameters"]);s!=null&&_(e,["parameters"],s);const a=y(t,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const i=y(t,["response"]);i!=null&&_(e,["response"],i);const o=y(t,["responseJsonSchema"]);return o!=null&&_(e,["responseJsonSchema"],o),e}function mxe(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function pxe(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],mxe(n)),e}function gxe(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function vxe(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],gxe(n)),e}function xxe(){return{}}function yxe(t){const e={},n=y(t,["apiKeyString"]);return n!=null&&_(e,["apiKeyString"],n),e}function wxe(t){const e={},n=y(t,["apiKeyConfig"]);n!=null&&_(e,["apiKeyConfig"],yxe(n));const r=y(t,["authType"]);r!=null&&_(e,["authType"],r);const s=y(t,["googleServiceAccountConfig"]);s!=null&&_(e,["googleServiceAccountConfig"],s);const a=y(t,["httpBasicAuthConfig"]);a!=null&&_(e,["httpBasicAuthConfig"],a);const i=y(t,["oauthConfig"]);i!=null&&_(e,["oauthConfig"],i);const o=y(t,["oidcConfig"]);return o!=null&&_(e,["oidcConfig"],o),e}function bxe(t){const e={},n=y(t,["authConfig"]);return n!=null&&_(e,["authConfig"],wxe(n)),e}function _xe(){return{}}function Cxe(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>hxe(p))),_(e,["functionDeclarations"],h)}const r=y(t,["retrieval"]);r!=null&&_(e,["retrieval"],r);const s=y(t,["googleSearch"]);s!=null&&_(e,["googleSearch"],pxe(s));const a=y(t,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],vxe(a)),y(t,["enterpriseWebSearch"])!=null&&_(e,["enterpriseWebSearch"],xxe());const o=y(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],bxe(o)),y(t,["urlContext"])!=null&&_(e,["urlContext"],_xe());const c=y(t,["codeExecution"]);c!=null&&_(e,["codeExecution"],c);const A=y(t,["computerUse"]);return A!=null&&_(e,["computerUse"],A),e}function Exe(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);return r!=null&&_(e,["allowedFunctionNames"],r),e}function Sxe(t){const e={},n=y(t,["latitude"]);n!=null&&_(e,["latitude"],n);const r=y(t,["longitude"]);return r!=null&&_(e,["longitude"],r),e}function Txe(t){const e={},n=y(t,["latLng"]);n!=null&&_(e,["latLng"],Sxe(n));const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function Nxe(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&_(e,["functionCallingConfig"],Exe(n));const r=y(t,["retrievalConfig"]);return r!=null&&_(e,["retrievalConfig"],Txe(r)),e}function Bxe(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const s=y(t,["expireTime"]);e!==void 0&&s!=null&&_(e,["expireTime"],s);const a=y(t,["displayName"]);e!==void 0&&a!=null&&_(e,["displayName"],a);const i=y(t,["contents"]);if(e!==void 0&&i!=null){let h=yu(i);Array.isArray(h)&&(h=h.map(p=>C6(p))),_(e,["contents"],h)}const o=y(t,["systemInstruction"]);e!==void 0&&o!=null&&_(e,["systemInstruction"],C6(il(o)));const l=y(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>Cxe(p))),_(e,["tools"],h)}const c=y(t,["toolConfig"]);e!==void 0&&c!=null&&_(e,["toolConfig"],Nxe(c));const A=y(t,["kmsKeyName"]);return e!==void 0&&A!=null&&_(e,["encryption_spec","kmsKeyName"],A),n}function kxe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["model"],kQ(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],Bxe(s,n)),n}function Ixe(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],UA(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function Fxe(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],UA(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function Dxe(t,e){const n={},r=y(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const s=y(t,["expireTime"]);return e!==void 0&&s!=null&&_(e,["expireTime"],s),n}function Lxe(t,e){const n={},r=y(e,["name"]);r!=null&&_(n,["_url","name"],UA(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],Dxe(s,n)),n}function Rxe(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),n}function Pxe(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],Rxe(n,e)),e}function Uw(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["model"]);s!=null&&_(e,["model"],s);const a=y(t,["createTime"]);a!=null&&_(e,["createTime"],a);const i=y(t,["updateTime"]);i!=null&&_(e,["updateTime"],i);const o=y(t,["expireTime"]);o!=null&&_(e,["expireTime"],o);const l=y(t,["usageMetadata"]);return l!=null&&_(e,["usageMetadata"],l),e}function Mxe(){return{}}function Uxe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Uw(i))),_(e,["cachedContents"],a)}return e}function Ow(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["model"]);s!=null&&_(e,["model"],s);const a=y(t,["createTime"]);a!=null&&_(e,["createTime"],a);const i=y(t,["updateTime"]);i!=null&&_(e,["updateTime"],i);const o=y(t,["expireTime"]);o!=null&&_(e,["expireTime"],o);const l=y(t,["usageMetadata"]);return l!=null&&_(e,["usageMetadata"],l),e}function Oxe(){return{}}function jxe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Ow(i))),_(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hxe extends F0{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new s1(v0.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=kxe(this.apiClient,e);return o=wn("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>Ow(A))}else{const c=rxe(this.apiClient,e);return o=wn("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>Uw(A))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=Ixe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>Ow(A))}else{const c=sxe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>Uw(A))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=Fxe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(()=>{const A=Oxe(),h=new g6;return Object.assign(h,A),h})}else{const c=axe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(()=>{const A=Mxe(),h=new g6;return Object.assign(h,A),h})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=Lxe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>Ow(A))}else{const c=oxe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>Uw(A))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=Pxe(e);return o=wn("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=jxe(A),p=new v6;return Object.assign(p,h),p})}else{const c=cxe(e);return o=wn("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=Uxe(A),p=new v6;return Object.assign(p,h),p})}}}function E6(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ra(t){return this instanceof ra?(this.v=t,this):new ra(t)}function rp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(w){return Promise.resolve(w).then(g,h)}}function o(g,w){r[g]&&(s[g]=function(x){return new Promise(function(S,N){a.push([g,x,S,N])>1||l(g,x)})},w&&(s[g]=w(s[g])))}function l(g,w){try{c(r[g](w))}catch(x){p(a[0][3],x)}}function c(g){g.value instanceof ra?Promise.resolve(g.value.v).then(A,h):p(a[0][2],g)}function A(g){l("next",g)}function h(g){l("throw",g)}function p(g,w){g(w),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Lv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof E6=="function"?E6(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(c){a({value:c,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qxe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:qQ(n)}function qQ(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Vxe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function S6(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!qQ(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class zxe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Gxe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Gxe{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Vxe(a)}async sendMessage(e){var n;await this.sendPromise;const r=il(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,c=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,A=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];A!=null&&(p=(o=A.slice(h))!==null&&o!==void 0?o:[]);const g=c?[c]:[];this.recordHistory(r,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=il(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?S6(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return rp(this,arguments,function*(){var i,o,l,c;const A=[];try{for(var h=!0,p=Lv(e),g;g=yield ra(p.next()),i=g.done,!i;h=!0){c=g.value,h=!1;const w=c;if(Qxe(w)){const x=(s=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;x!==void 0&&A.push(x)}yield yield ra(w)}}catch(w){o={error:w}}finally{try{!h&&!i&&(l=p.return)&&(yield ra(l.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,A)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...S6(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class __ extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,__.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qxe(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),n}function Kxe(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],qxe(n,e)),e}function $xe(t){const e={},n=y(t,["details"]);n!=null&&_(e,["details"],n);const r=y(t,["message"]);r!=null&&_(e,["message"],r);const s=y(t,["code"]);return s!=null&&_(e,["code"],s),e}function Wxe(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["mimeType"]);s!=null&&_(e,["mimeType"],s);const a=y(t,["sizeBytes"]);a!=null&&_(e,["sizeBytes"],a);const i=y(t,["createTime"]);i!=null&&_(e,["createTime"],i);const o=y(t,["expirationTime"]);o!=null&&_(e,["expirationTime"],o);const l=y(t,["updateTime"]);l!=null&&_(e,["updateTime"],l);const c=y(t,["sha256Hash"]);c!=null&&_(e,["sha256Hash"],c);const A=y(t,["uri"]);A!=null&&_(e,["uri"],A);const h=y(t,["downloadUri"]);h!=null&&_(e,["downloadUri"],h);const p=y(t,["state"]);p!=null&&_(e,["state"],p);const g=y(t,["source"]);g!=null&&_(e,["source"],g);const w=y(t,["videoMetadata"]);w!=null&&_(e,["videoMetadata"],w);const x=y(t,["error"]);return x!=null&&_(e,["error"],$xe(x)),e}function Yxe(t){const e={},n=y(t,["file"]);n!=null&&_(e,["file"],Wxe(n));const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function Xxe(t){const e={},n=y(t,["name"]);n!=null&&_(e,["_url","file"],MQ(n));const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function Jxe(t){const e={},n=y(t,["name"]);n!=null&&_(e,["_url","file"],MQ(n));const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function Zxe(t){const e={},n=y(t,["details"]);n!=null&&_(e,["details"],n);const r=y(t,["message"]);r!=null&&_(e,["message"],r);const s=y(t,["code"]);return s!=null&&_(e,["code"],s),e}function A5(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["mimeType"]);s!=null&&_(e,["mimeType"],s);const a=y(t,["sizeBytes"]);a!=null&&_(e,["sizeBytes"],a);const i=y(t,["createTime"]);i!=null&&_(e,["createTime"],i);const o=y(t,["expirationTime"]);o!=null&&_(e,["expirationTime"],o);const l=y(t,["updateTime"]);l!=null&&_(e,["updateTime"],l);const c=y(t,["sha256Hash"]);c!=null&&_(e,["sha256Hash"],c);const A=y(t,["uri"]);A!=null&&_(e,["uri"],A);const h=y(t,["downloadUri"]);h!=null&&_(e,["downloadUri"],h);const p=y(t,["state"]);p!=null&&_(e,["state"],p);const g=y(t,["source"]);g!=null&&_(e,["source"],g);const w=y(t,["videoMetadata"]);w!=null&&_(e,["videoMetadata"],w);const x=y(t,["error"]);return x!=null&&_(e,["error"],Zxe(x)),e}function e1e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>A5(i))),_(e,["files"],a)}return e}function t1e(t){const e={},n=y(t,["sdkHttpResponse"]);return n!=null&&_(e,["sdkHttpResponse"],n),e}function n1e(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r1e extends F0{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new s1(v0.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>A5(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Kxe(e);return a=wn("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const A=c;return A.sdkHttpResponse={headers:l.headers},A})),s.then(l=>{const c=e1e(l),A=new wge;return Object.assign(A,c),A})}}async createInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Yxe(e);return a=wn("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=t1e(l),A=new bge;return Object.assign(A,c),A})}}async get(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Xxe(e);return a=wn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>A5(l))}}async delete(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Jxe(e);return a=wn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=n1e(),c=new _ge;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s1e(t){const e={},n=y(t,["voiceName"]);return n!=null&&_(e,["voiceName"],n),e}function KQ(t){const e={},n=y(t,["prebuiltVoiceConfig"]);return n!=null&&_(e,["prebuiltVoiceConfig"],s1e(n)),e}function a1e(t){const e={},n=y(t,["speaker"]);n!=null&&_(e,["speaker"],n);const r=y(t,["voiceConfig"]);return r!=null&&_(e,["voiceConfig"],KQ(r)),e}function i1e(t){const e={},n=y(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>a1e(s))),_(e,["speakerVoiceConfigs"],r)}return e}function o1e(t){const e={},n=y(t,["voiceConfig"]);n!=null&&_(e,["voiceConfig"],KQ(n));const r=y(t,["multiSpeakerVoiceConfig"]);r!=null&&_(e,["multiSpeakerVoiceConfig"],i1e(r));const s=y(t,["languageCode"]);return s!=null&&_(e,["languageCode"],s),e}function l1e(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function c1e(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function u1e(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function d1e(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],l1e(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],c1e(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],u1e(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function A1e(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>d1e(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function f1e(t){const e={},n=y(t,["behavior"]);n!=null&&_(e,["behavior"],n);const r=y(t,["description"]);r!=null&&_(e,["description"],r);const s=y(t,["name"]);s!=null&&_(e,["name"],s);const a=y(t,["parameters"]);a!=null&&_(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&_(e,["parametersJsonSchema"],i);const o=y(t,["response"]);o!=null&&_(e,["response"],o);const l=y(t,["responseJsonSchema"]);return l!=null&&_(e,["responseJsonSchema"],l),e}function h1e(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function m1e(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],h1e(n)),e}function p1e(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function g1e(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],p1e(n)),e}function v1e(){return{}}function x1e(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>f1e(c))),_(e,["functionDeclarations"],l)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearch"]);r!=null&&_(e,["googleSearch"],m1e(r));const s=y(t,["googleSearchRetrieval"]);if(s!=null&&_(e,["googleSearchRetrieval"],g1e(s)),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(y(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");y(t,["urlContext"])!=null&&_(e,["urlContext"],v1e());const i=y(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const o=y(t,["computerUse"]);return o!=null&&_(e,["computerUse"],o),e}function y1e(t){const e={},n=y(t,["handle"]);if(n!=null&&_(e,["handle"],n),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function T6(){return{}}function w1e(t){const e={},n=y(t,["disabled"]);n!=null&&_(e,["disabled"],n);const r=y(t,["startOfSpeechSensitivity"]);r!=null&&_(e,["startOfSpeechSensitivity"],r);const s=y(t,["endOfSpeechSensitivity"]);s!=null&&_(e,["endOfSpeechSensitivity"],s);const a=y(t,["prefixPaddingMs"]);a!=null&&_(e,["prefixPaddingMs"],a);const i=y(t,["silenceDurationMs"]);return i!=null&&_(e,["silenceDurationMs"],i),e}function b1e(t){const e={},n=y(t,["automaticActivityDetection"]);n!=null&&_(e,["automaticActivityDetection"],w1e(n));const r=y(t,["activityHandling"]);r!=null&&_(e,["activityHandling"],r);const s=y(t,["turnCoverage"]);return s!=null&&_(e,["turnCoverage"],s),e}function _1e(t){const e={},n=y(t,["targetTokens"]);return n!=null&&_(e,["targetTokens"],n),e}function C1e(t){const e={},n=y(t,["triggerTokens"]);n!=null&&_(e,["triggerTokens"],n);const r=y(t,["slidingWindow"]);return r!=null&&_(e,["slidingWindow"],_1e(r)),e}function E1e(t){const e={},n=y(t,["proactiveAudio"]);return n!=null&&_(e,["proactiveAudio"],n),e}function S1e(t,e){const n={},r=y(t,["generationConfig"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig"],r);const s=y(t,["responseModalities"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","responseModalities"],s);const a=y(t,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const i=y(t,["topP"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","topP"],i);const o=y(t,["topK"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topK"],o);const l=y(t,["maxOutputTokens"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","maxOutputTokens"],l);const c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","mediaResolution"],c);const A=y(t,["seed"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","seed"],A);const h=y(t,["speechConfig"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","speechConfig"],o1e(E4(h)));const p=y(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=y(t,["systemInstruction"]);e!==void 0&&g!=null&&_(e,["setup","systemInstruction"],A1e(il(g)));const w=y(t,["tools"]);if(e!==void 0&&w!=null){let j=Vp(w);Array.isArray(j)&&(j=j.map(P=>x1e(Qp(P)))),_(e,["setup","tools"],j)}const x=y(t,["sessionResumption"]);e!==void 0&&x!=null&&_(e,["setup","sessionResumption"],y1e(x));const S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&_(e,["setup","inputAudioTranscription"],T6());const N=y(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&_(e,["setup","outputAudioTranscription"],T6());const F=y(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&_(e,["setup","realtimeInputConfig"],b1e(F));const D=y(t,["contextWindowCompression"]);e!==void 0&&D!=null&&_(e,["setup","contextWindowCompression"],C1e(D));const R=y(t,["proactivity"]);return e!==void 0&&R!=null&&_(e,["setup","proactivity"],E1e(R)),n}function T1e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["setup","model"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],S1e(s,n)),n}function N1e(){return{}}function B1e(){return{}}function k1e(t){const e={},n=y(t,["media"]);n!=null&&_(e,["mediaChunks"],IQ(n));const r=y(t,["audio"]);r!=null&&_(e,["audio"],DQ(r));const s=y(t,["audioStreamEnd"]);s!=null&&_(e,["audioStreamEnd"],s);const a=y(t,["video"]);a!=null&&_(e,["video"],FQ(a));const i=y(t,["text"]);return i!=null&&_(e,["text"],i),y(t,["activityStart"])!=null&&_(e,["activityStart"],N1e()),y(t,["activityEnd"])!=null&&_(e,["activityEnd"],B1e()),e}function $Q(t){const e={},n=y(t,["text"]);n!=null&&_(e,["text"],n);const r=y(t,["weight"]);return r!=null&&_(e,["weight"],r),e}function I1e(t){const e={},n=y(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>$Q(s))),_(e,["weightedPrompts"],r)}return e}function WQ(t){const e={},n=y(t,["temperature"]);n!=null&&_(e,["temperature"],n);const r=y(t,["topK"]);r!=null&&_(e,["topK"],r);const s=y(t,["seed"]);s!=null&&_(e,["seed"],s);const a=y(t,["guidance"]);a!=null&&_(e,["guidance"],a);const i=y(t,["bpm"]);i!=null&&_(e,["bpm"],i);const o=y(t,["density"]);o!=null&&_(e,["density"],o);const l=y(t,["brightness"]);l!=null&&_(e,["brightness"],l);const c=y(t,["scale"]);c!=null&&_(e,["scale"],c);const A=y(t,["muteBass"]);A!=null&&_(e,["muteBass"],A);const h=y(t,["muteDrums"]);h!=null&&_(e,["muteDrums"],h);const p=y(t,["onlyBassAndDrums"]);return p!=null&&_(e,["onlyBassAndDrums"],p),e}function F1e(t){const e={},n=y(t,["musicGenerationConfig"]);return n!=null&&_(e,["musicGenerationConfig"],WQ(n)),e}function YQ(t){const e={},n=y(t,["model"]);return n!=null&&_(e,["model"],n),e}function XQ(t){const e={},n=y(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>$Q(s))),_(e,["weightedPrompts"],r)}return e}function f5(t){const e={},n=y(t,["setup"]);n!=null&&_(e,["setup"],YQ(n));const r=y(t,["clientContent"]);r!=null&&_(e,["clientContent"],XQ(r));const s=y(t,["musicGenerationConfig"]);s!=null&&_(e,["musicGenerationConfig"],WQ(s));const a=y(t,["playbackControl"]);return a!=null&&_(e,["playbackControl"],a),e}function D1e(t){const e={},n=y(t,["voiceName"]);return n!=null&&_(e,["voiceName"],n),e}function L1e(t){const e={},n=y(t,["prebuiltVoiceConfig"]);return n!=null&&_(e,["prebuiltVoiceConfig"],D1e(n)),e}function R1e(t){const e={},n=y(t,["voiceConfig"]);if(n!=null&&_(e,["voiceConfig"],L1e(n)),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function P1e(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function M1e(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["data"]);r!=null&&_(e,["data"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function U1e(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function O1e(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],P1e(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],M1e(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],U1e(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function j1e(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>O1e(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function H1e(t){const e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=y(t,["description"]);n!=null&&_(e,["description"],n);const r=y(t,["name"]);r!=null&&_(e,["name"],r);const s=y(t,["parameters"]);s!=null&&_(e,["parameters"],s);const a=y(t,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const i=y(t,["response"]);i!=null&&_(e,["response"],i);const o=y(t,["responseJsonSchema"]);return o!=null&&_(e,["responseJsonSchema"],o),e}function Q1e(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function V1e(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],Q1e(n)),e}function z1e(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function G1e(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],z1e(n)),e}function q1e(){return{}}function K1e(t){const e={},n=y(t,["apiKeyString"]);return n!=null&&_(e,["apiKeyString"],n),e}function $1e(t){const e={},n=y(t,["apiKeyConfig"]);n!=null&&_(e,["apiKeyConfig"],K1e(n));const r=y(t,["authType"]);r!=null&&_(e,["authType"],r);const s=y(t,["googleServiceAccountConfig"]);s!=null&&_(e,["googleServiceAccountConfig"],s);const a=y(t,["httpBasicAuthConfig"]);a!=null&&_(e,["httpBasicAuthConfig"],a);const i=y(t,["oauthConfig"]);i!=null&&_(e,["oauthConfig"],i);const o=y(t,["oidcConfig"]);return o!=null&&_(e,["oidcConfig"],o),e}function W1e(t){const e={},n=y(t,["authConfig"]);return n!=null&&_(e,["authConfig"],$1e(n)),e}function Y1e(){return{}}function X1e(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>H1e(p))),_(e,["functionDeclarations"],h)}const r=y(t,["retrieval"]);r!=null&&_(e,["retrieval"],r);const s=y(t,["googleSearch"]);s!=null&&_(e,["googleSearch"],V1e(s));const a=y(t,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],G1e(a)),y(t,["enterpriseWebSearch"])!=null&&_(e,["enterpriseWebSearch"],q1e());const o=y(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],W1e(o)),y(t,["urlContext"])!=null&&_(e,["urlContext"],Y1e());const c=y(t,["codeExecution"]);c!=null&&_(e,["codeExecution"],c);const A=y(t,["computerUse"]);return A!=null&&_(e,["computerUse"],A),e}function J1e(t){const e={},n=y(t,["handle"]);n!=null&&_(e,["handle"],n);const r=y(t,["transparent"]);return r!=null&&_(e,["transparent"],r),e}function N6(){return{}}function Z1e(t){const e={},n=y(t,["disabled"]);n!=null&&_(e,["disabled"],n);const r=y(t,["startOfSpeechSensitivity"]);r!=null&&_(e,["startOfSpeechSensitivity"],r);const s=y(t,["endOfSpeechSensitivity"]);s!=null&&_(e,["endOfSpeechSensitivity"],s);const a=y(t,["prefixPaddingMs"]);a!=null&&_(e,["prefixPaddingMs"],a);const i=y(t,["silenceDurationMs"]);return i!=null&&_(e,["silenceDurationMs"],i),e}function eye(t){const e={},n=y(t,["automaticActivityDetection"]);n!=null&&_(e,["automaticActivityDetection"],Z1e(n));const r=y(t,["activityHandling"]);r!=null&&_(e,["activityHandling"],r);const s=y(t,["turnCoverage"]);return s!=null&&_(e,["turnCoverage"],s),e}function tye(t){const e={},n=y(t,["targetTokens"]);return n!=null&&_(e,["targetTokens"],n),e}function nye(t){const e={},n=y(t,["triggerTokens"]);n!=null&&_(e,["triggerTokens"],n);const r=y(t,["slidingWindow"]);return r!=null&&_(e,["slidingWindow"],tye(r)),e}function rye(t){const e={},n=y(t,["proactiveAudio"]);return n!=null&&_(e,["proactiveAudio"],n),e}function sye(t,e){const n={},r=y(t,["generationConfig"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig"],r);const s=y(t,["responseModalities"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","responseModalities"],s);const a=y(t,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const i=y(t,["topP"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","topP"],i);const o=y(t,["topK"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topK"],o);const l=y(t,["maxOutputTokens"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","maxOutputTokens"],l);const c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","mediaResolution"],c);const A=y(t,["seed"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","seed"],A);const h=y(t,["speechConfig"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","speechConfig"],R1e(E4(h)));const p=y(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=y(t,["systemInstruction"]);e!==void 0&&g!=null&&_(e,["setup","systemInstruction"],j1e(il(g)));const w=y(t,["tools"]);if(e!==void 0&&w!=null){let j=Vp(w);Array.isArray(j)&&(j=j.map(P=>X1e(Qp(P)))),_(e,["setup","tools"],j)}const x=y(t,["sessionResumption"]);e!==void 0&&x!=null&&_(e,["setup","sessionResumption"],J1e(x));const S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&_(e,["setup","inputAudioTranscription"],N6());const N=y(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&_(e,["setup","outputAudioTranscription"],N6());const F=y(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&_(e,["setup","realtimeInputConfig"],eye(F));const D=y(t,["contextWindowCompression"]);e!==void 0&&D!=null&&_(e,["setup","contextWindowCompression"],nye(D));const R=y(t,["proactivity"]);return e!==void 0&&R!=null&&_(e,["setup","proactivity"],rye(R)),n}function aye(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["setup","model"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],sye(s,n)),n}function iye(){return{}}function oye(){return{}}function lye(t){const e={},n=y(t,["media"]);n!=null&&_(e,["mediaChunks"],IQ(n));const r=y(t,["audio"]);r!=null&&_(e,["audio"],DQ(r));const s=y(t,["audioStreamEnd"]);s!=null&&_(e,["audioStreamEnd"],s);const a=y(t,["video"]);a!=null&&_(e,["video"],FQ(a));const i=y(t,["text"]);return i!=null&&_(e,["text"],i),y(t,["activityStart"])!=null&&_(e,["activityStart"],iye()),y(t,["activityEnd"])!=null&&_(e,["activityEnd"],oye()),e}function cye(){return{}}function uye(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function dye(t){const e={},n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Aye(t){const e={},n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function fye(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],uye(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],dye(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Aye(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function hye(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fye(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function B6(t){const e={},n=y(t,["text"]);n!=null&&_(e,["text"],n);const r=y(t,["finished"]);return r!=null&&_(e,["finished"],r),e}function mye(t){const e={},n=y(t,["retrievedUrl"]);n!=null&&_(e,["retrievedUrl"],n);const r=y(t,["urlRetrievalStatus"]);return r!=null&&_(e,["urlRetrievalStatus"],r),e}function pye(t){const e={},n=y(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>mye(s))),_(e,["urlMetadata"],r)}return e}function gye(t){const e={},n=y(t,["modelTurn"]);n!=null&&_(e,["modelTurn"],hye(n));const r=y(t,["turnComplete"]);r!=null&&_(e,["turnComplete"],r);const s=y(t,["interrupted"]);s!=null&&_(e,["interrupted"],s);const a=y(t,["groundingMetadata"]);a!=null&&_(e,["groundingMetadata"],a);const i=y(t,["generationComplete"]);i!=null&&_(e,["generationComplete"],i);const o=y(t,["inputTranscription"]);o!=null&&_(e,["inputTranscription"],B6(o));const l=y(t,["outputTranscription"]);l!=null&&_(e,["outputTranscription"],B6(l));const c=y(t,["urlContextMetadata"]);return c!=null&&_(e,["urlContextMetadata"],pye(c)),e}function vye(t){const e={},n=y(t,["id"]);n!=null&&_(e,["id"],n);const r=y(t,["args"]);r!=null&&_(e,["args"],r);const s=y(t,["name"]);return s!=null&&_(e,["name"],s),e}function xye(t){const e={},n=y(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>vye(s))),_(e,["functionCalls"],r)}return e}function yye(t){const e={},n=y(t,["ids"]);return n!=null&&_(e,["ids"],n),e}function Dy(t){const e={},n=y(t,["modality"]);n!=null&&_(e,["modality"],n);const r=y(t,["tokenCount"]);return r!=null&&_(e,["tokenCount"],r),e}function wye(t){const e={},n=y(t,["promptTokenCount"]);n!=null&&_(e,["promptTokenCount"],n);const r=y(t,["cachedContentTokenCount"]);r!=null&&_(e,["cachedContentTokenCount"],r);const s=y(t,["responseTokenCount"]);s!=null&&_(e,["responseTokenCount"],s);const a=y(t,["toolUsePromptTokenCount"]);a!=null&&_(e,["toolUsePromptTokenCount"],a);const i=y(t,["thoughtsTokenCount"]);i!=null&&_(e,["thoughtsTokenCount"],i);const o=y(t,["totalTokenCount"]);o!=null&&_(e,["totalTokenCount"],o);const l=y(t,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(g=>Dy(g))),_(e,["promptTokensDetails"],p)}const c=y(t,["cacheTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>Dy(g))),_(e,["cacheTokensDetails"],p)}const A=y(t,["responseTokensDetails"]);if(A!=null){let p=A;Array.isArray(p)&&(p=p.map(g=>Dy(g))),_(e,["responseTokensDetails"],p)}const h=y(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>Dy(g))),_(e,["toolUsePromptTokensDetails"],p)}return e}function bye(t){const e={},n=y(t,["timeLeft"]);return n!=null&&_(e,["timeLeft"],n),e}function _ye(t){const e={},n=y(t,["newHandle"]);n!=null&&_(e,["newHandle"],n);const r=y(t,["resumable"]);r!=null&&_(e,["resumable"],r);const s=y(t,["lastConsumedClientMessageIndex"]);return s!=null&&_(e,["lastConsumedClientMessageIndex"],s),e}function Cye(t){const e={};y(t,["setupComplete"])!=null&&_(e,["setupComplete"],cye());const r=y(t,["serverContent"]);r!=null&&_(e,["serverContent"],gye(r));const s=y(t,["toolCall"]);s!=null&&_(e,["toolCall"],xye(s));const a=y(t,["toolCallCancellation"]);a!=null&&_(e,["toolCallCancellation"],yye(a));const i=y(t,["usageMetadata"]);i!=null&&_(e,["usageMetadata"],wye(i));const o=y(t,["goAway"]);o!=null&&_(e,["goAway"],bye(o));const l=y(t,["sessionResumptionUpdate"]);return l!=null&&_(e,["sessionResumptionUpdate"],_ye(l)),e}function Eye(){return{}}function Sye(t){const e={},n=y(t,["text"]);n!=null&&_(e,["text"],n);const r=y(t,["weight"]);return r!=null&&_(e,["weight"],r),e}function Tye(t){const e={},n=y(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Sye(s))),_(e,["weightedPrompts"],r)}return e}function Nye(t){const e={},n=y(t,["temperature"]);n!=null&&_(e,["temperature"],n);const r=y(t,["topK"]);r!=null&&_(e,["topK"],r);const s=y(t,["seed"]);s!=null&&_(e,["seed"],s);const a=y(t,["guidance"]);a!=null&&_(e,["guidance"],a);const i=y(t,["bpm"]);i!=null&&_(e,["bpm"],i);const o=y(t,["density"]);o!=null&&_(e,["density"],o);const l=y(t,["brightness"]);l!=null&&_(e,["brightness"],l);const c=y(t,["scale"]);c!=null&&_(e,["scale"],c);const A=y(t,["muteBass"]);A!=null&&_(e,["muteBass"],A);const h=y(t,["muteDrums"]);h!=null&&_(e,["muteDrums"],h);const p=y(t,["onlyBassAndDrums"]);return p!=null&&_(e,["onlyBassAndDrums"],p),e}function Bye(t){const e={},n=y(t,["clientContent"]);n!=null&&_(e,["clientContent"],Tye(n));const r=y(t,["musicGenerationConfig"]);return r!=null&&_(e,["musicGenerationConfig"],Nye(r)),e}function kye(t){const e={},n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);r!=null&&_(e,["mimeType"],r);const s=y(t,["sourceMetadata"]);return s!=null&&_(e,["sourceMetadata"],Bye(s)),e}function Iye(t){const e={},n=y(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>kye(s))),_(e,["audioChunks"],r)}return e}function Fye(t){const e={},n=y(t,["text"]);n!=null&&_(e,["text"],n);const r=y(t,["filteredReason"]);return r!=null&&_(e,["filteredReason"],r),e}function Dye(t){const e={};y(t,["setupComplete"])!=null&&_(e,["setupComplete"],Eye());const r=y(t,["serverContent"]);r!=null&&_(e,["serverContent"],Iye(r));const s=y(t,["filteredPrompt"]);return s!=null&&_(e,["filteredPrompt"],Fye(s)),e}function Lye(t){const e={},n=y(t,["sessionId"]);return n!=null&&_(e,["sessionId"],n),e}function Rye(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function Pye(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["data"]);r!=null&&_(e,["data"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function Mye(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function Uye(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],Rye(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],Pye(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Mye(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function Oye(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Uye(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function k6(t){const e={},n=y(t,["text"]);n!=null&&_(e,["text"],n);const r=y(t,["finished"]);return r!=null&&_(e,["finished"],r),e}function jye(t){const e={},n=y(t,["modelTurn"]);n!=null&&_(e,["modelTurn"],Oye(n));const r=y(t,["turnComplete"]);r!=null&&_(e,["turnComplete"],r);const s=y(t,["interrupted"]);s!=null&&_(e,["interrupted"],s);const a=y(t,["groundingMetadata"]);a!=null&&_(e,["groundingMetadata"],a);const i=y(t,["generationComplete"]);i!=null&&_(e,["generationComplete"],i);const o=y(t,["inputTranscription"]);o!=null&&_(e,["inputTranscription"],k6(o));const l=y(t,["outputTranscription"]);return l!=null&&_(e,["outputTranscription"],k6(l)),e}function Hye(t){const e={},n=y(t,["args"]);n!=null&&_(e,["args"],n);const r=y(t,["name"]);return r!=null&&_(e,["name"],r),e}function Qye(t){const e={},n=y(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Hye(s))),_(e,["functionCalls"],r)}return e}function Vye(t){const e={},n=y(t,["ids"]);return n!=null&&_(e,["ids"],n),e}function Ly(t){const e={},n=y(t,["modality"]);n!=null&&_(e,["modality"],n);const r=y(t,["tokenCount"]);return r!=null&&_(e,["tokenCount"],r),e}function zye(t){const e={},n=y(t,["promptTokenCount"]);n!=null&&_(e,["promptTokenCount"],n);const r=y(t,["cachedContentTokenCount"]);r!=null&&_(e,["cachedContentTokenCount"],r);const s=y(t,["candidatesTokenCount"]);s!=null&&_(e,["responseTokenCount"],s);const a=y(t,["toolUsePromptTokenCount"]);a!=null&&_(e,["toolUsePromptTokenCount"],a);const i=y(t,["thoughtsTokenCount"]);i!=null&&_(e,["thoughtsTokenCount"],i);const o=y(t,["totalTokenCount"]);o!=null&&_(e,["totalTokenCount"],o);const l=y(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(w=>Ly(w))),_(e,["promptTokensDetails"],g)}const c=y(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(w=>Ly(w))),_(e,["cacheTokensDetails"],g)}const A=y(t,["candidatesTokensDetails"]);if(A!=null){let g=A;Array.isArray(g)&&(g=g.map(w=>Ly(w))),_(e,["responseTokensDetails"],g)}const h=y(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(w=>Ly(w))),_(e,["toolUsePromptTokensDetails"],g)}const p=y(t,["trafficType"]);return p!=null&&_(e,["trafficType"],p),e}function Gye(t){const e={},n=y(t,["timeLeft"]);return n!=null&&_(e,["timeLeft"],n),e}function qye(t){const e={},n=y(t,["newHandle"]);n!=null&&_(e,["newHandle"],n);const r=y(t,["resumable"]);r!=null&&_(e,["resumable"],r);const s=y(t,["lastConsumedClientMessageIndex"]);return s!=null&&_(e,["lastConsumedClientMessageIndex"],s),e}function Kye(t){const e={},n=y(t,["setupComplete"]);n!=null&&_(e,["setupComplete"],Lye(n));const r=y(t,["serverContent"]);r!=null&&_(e,["serverContent"],jye(r));const s=y(t,["toolCall"]);s!=null&&_(e,["toolCall"],Qye(s));const a=y(t,["toolCallCancellation"]);a!=null&&_(e,["toolCallCancellation"],Vye(a));const i=y(t,["usageMetadata"]);i!=null&&_(e,["usageMetadata"],zye(i));const o=y(t,["goAway"]);o!=null&&_(e,["goAway"],Gye(o));const l=y(t,["sessionResumptionUpdate"]);return l!=null&&_(e,["sessionResumptionUpdate"],qye(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $ye(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function Wye(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Yye(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Xye(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],$ye(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],Wye(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Yye(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function C_(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Xye(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function Jye(t){const e={},n=y(t,["anyOf"]);n!=null&&_(e,["anyOf"],n);const r=y(t,["default"]);r!=null&&_(e,["default"],r);const s=y(t,["description"]);s!=null&&_(e,["description"],s);const a=y(t,["enum"]);a!=null&&_(e,["enum"],a);const i=y(t,["example"]);i!=null&&_(e,["example"],i);const o=y(t,["format"]);o!=null&&_(e,["format"],o);const l=y(t,["items"]);l!=null&&_(e,["items"],l);const c=y(t,["maxItems"]);c!=null&&_(e,["maxItems"],c);const A=y(t,["maxLength"]);A!=null&&_(e,["maxLength"],A);const h=y(t,["maxProperties"]);h!=null&&_(e,["maxProperties"],h);const p=y(t,["maximum"]);p!=null&&_(e,["maximum"],p);const g=y(t,["minItems"]);g!=null&&_(e,["minItems"],g);const w=y(t,["minLength"]);w!=null&&_(e,["minLength"],w);const x=y(t,["minProperties"]);x!=null&&_(e,["minProperties"],x);const S=y(t,["minimum"]);S!=null&&_(e,["minimum"],S);const N=y(t,["nullable"]);N!=null&&_(e,["nullable"],N);const F=y(t,["pattern"]);F!=null&&_(e,["pattern"],F);const D=y(t,["properties"]);D!=null&&_(e,["properties"],D);const R=y(t,["propertyOrdering"]);R!=null&&_(e,["propertyOrdering"],R);const j=y(t,["required"]);j!=null&&_(e,["required"],j);const P=y(t,["title"]);P!=null&&_(e,["title"],P);const E=y(t,["type"]);return E!=null&&_(e,["type"],E),e}function Zye(t){const e={};if(y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=y(t,["category"]);n!=null&&_(e,["category"],n);const r=y(t,["threshold"]);return r!=null&&_(e,["threshold"],r),e}function ewe(t){const e={},n=y(t,["behavior"]);n!=null&&_(e,["behavior"],n);const r=y(t,["description"]);r!=null&&_(e,["description"],r);const s=y(t,["name"]);s!=null&&_(e,["name"],s);const a=y(t,["parameters"]);a!=null&&_(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&_(e,["parametersJsonSchema"],i);const o=y(t,["response"]);o!=null&&_(e,["response"],o);const l=y(t,["responseJsonSchema"]);return l!=null&&_(e,["responseJsonSchema"],l),e}function twe(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function nwe(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],twe(n)),e}function rwe(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function swe(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],rwe(n)),e}function awe(){return{}}function iwe(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>ewe(c))),_(e,["functionDeclarations"],l)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearch"]);r!=null&&_(e,["googleSearch"],nwe(r));const s=y(t,["googleSearchRetrieval"]);if(s!=null&&_(e,["googleSearchRetrieval"],swe(s)),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(y(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");y(t,["urlContext"])!=null&&_(e,["urlContext"],awe());const i=y(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const o=y(t,["computerUse"]);return o!=null&&_(e,["computerUse"],o),e}function owe(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);return r!=null&&_(e,["allowedFunctionNames"],r),e}function lwe(t){const e={},n=y(t,["latitude"]);n!=null&&_(e,["latitude"],n);const r=y(t,["longitude"]);return r!=null&&_(e,["longitude"],r),e}function cwe(t){const e={},n=y(t,["latLng"]);n!=null&&_(e,["latLng"],lwe(n));const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function uwe(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&_(e,["functionCallingConfig"],owe(n));const r=y(t,["retrievalConfig"]);return r!=null&&_(e,["retrievalConfig"],cwe(r)),e}function dwe(t){const e={},n=y(t,["voiceName"]);return n!=null&&_(e,["voiceName"],n),e}function JQ(t){const e={},n=y(t,["prebuiltVoiceConfig"]);return n!=null&&_(e,["prebuiltVoiceConfig"],dwe(n)),e}function Awe(t){const e={},n=y(t,["speaker"]);n!=null&&_(e,["speaker"],n);const r=y(t,["voiceConfig"]);return r!=null&&_(e,["voiceConfig"],JQ(r)),e}function fwe(t){const e={},n=y(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Awe(s))),_(e,["speakerVoiceConfigs"],r)}return e}function hwe(t){const e={},n=y(t,["voiceConfig"]);n!=null&&_(e,["voiceConfig"],JQ(n));const r=y(t,["multiSpeakerVoiceConfig"]);r!=null&&_(e,["multiSpeakerVoiceConfig"],fwe(r));const s=y(t,["languageCode"]);return s!=null&&_(e,["languageCode"],s),e}function mwe(t){const e={},n=y(t,["includeThoughts"]);n!=null&&_(e,["includeThoughts"],n);const r=y(t,["thinkingBudget"]);return r!=null&&_(e,["thinkingBudget"],r),e}function pwe(t,e,n){const r={},s=y(e,["systemInstruction"]);n!==void 0&&s!=null&&_(n,["systemInstruction"],C_(il(s)));const a=y(e,["temperature"]);a!=null&&_(r,["temperature"],a);const i=y(e,["topP"]);i!=null&&_(r,["topP"],i);const o=y(e,["topK"]);o!=null&&_(r,["topK"],o);const l=y(e,["candidateCount"]);l!=null&&_(r,["candidateCount"],l);const c=y(e,["maxOutputTokens"]);c!=null&&_(r,["maxOutputTokens"],c);const A=y(e,["stopSequences"]);A!=null&&_(r,["stopSequences"],A);const h=y(e,["responseLogprobs"]);h!=null&&_(r,["responseLogprobs"],h);const p=y(e,["logprobs"]);p!=null&&_(r,["logprobs"],p);const g=y(e,["presencePenalty"]);g!=null&&_(r,["presencePenalty"],g);const w=y(e,["frequencyPenalty"]);w!=null&&_(r,["frequencyPenalty"],w);const x=y(e,["seed"]);x!=null&&_(r,["seed"],x);const S=y(e,["responseMimeType"]);S!=null&&_(r,["responseMimeType"],S);const N=y(e,["responseSchema"]);N!=null&&_(r,["responseSchema"],Jye(_4(N)));const F=y(e,["responseJsonSchema"]);if(F!=null&&_(r,["responseJsonSchema"],F),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=y(e,["safetySettings"]);if(n!==void 0&&D!=null){let M=D;Array.isArray(M)&&(M=M.map(U=>Zye(U))),_(n,["safetySettings"],M)}const R=y(e,["tools"]);if(n!==void 0&&R!=null){let M=Vp(R);Array.isArray(M)&&(M=M.map(U=>iwe(Qp(U)))),_(n,["tools"],M)}const j=y(e,["toolConfig"]);if(n!==void 0&&j!=null&&_(n,["toolConfig"],uwe(j)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=y(e,["cachedContent"]);n!==void 0&&P!=null&&_(n,["cachedContent"],UA(t,P));const E=y(e,["responseModalities"]);E!=null&&_(r,["responseModalities"],E);const T=y(e,["mediaResolution"]);T!=null&&_(r,["mediaResolution"],T);const k=y(e,["speechConfig"]);if(k!=null&&_(r,["speechConfig"],hwe(C4(k))),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=y(e,["thinkingConfig"]);return z!=null&&_(r,["thinkingConfig"],mwe(z)),r}function I6(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);if(s!=null){let i=yu(s);Array.isArray(i)&&(i=i.map(o=>C_(o))),_(n,["contents"],i)}const a=y(e,["config"]);return a!=null&&_(n,["generationConfig"],pwe(t,a,n)),n}function gwe(t,e){const n={},r=y(t,["taskType"]);e!==void 0&&r!=null&&_(e,["requests[]","taskType"],r);const s=y(t,["title"]);e!==void 0&&s!=null&&_(e,["requests[]","title"],s);const a=y(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&_(e,["requests[]","outputDimensionality"],a),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function vwe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);s!=null&&_(n,["requests[]","content"],RQ(t,s));const a=y(e,["config"]);a!=null&&_(n,["config"],gwe(a,n));const i=y(e,["model"]);return i!==void 0&&_(n,["requests[]","model"],Is(t,i)),n}function xwe(t,e){const n={};if(y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=y(t,["numberOfImages"]);e!==void 0&&r!=null&&_(e,["parameters","sampleCount"],r);const s=y(t,["aspectRatio"]);e!==void 0&&s!=null&&_(e,["parameters","aspectRatio"],s);const a=y(t,["guidanceScale"]);if(e!==void 0&&a!=null&&_(e,["parameters","guidanceScale"],a),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=y(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&_(e,["parameters","safetySetting"],i);const o=y(t,["personGeneration"]);e!==void 0&&o!=null&&_(e,["parameters","personGeneration"],o);const l=y(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&_(e,["parameters","includeSafetyAttributes"],l);const c=y(t,["includeRaiReason"]);e!==void 0&&c!=null&&_(e,["parameters","includeRaiReason"],c);const A=y(t,["language"]);e!==void 0&&A!=null&&_(e,["parameters","language"],A);const h=y(t,["outputMimeType"]);e!==void 0&&h!=null&&_(e,["parameters","outputOptions","mimeType"],h);const p=y(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&_(e,["parameters","outputOptions","compressionQuality"],p),y(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(y(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ywe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const a=y(e,["config"]);return a!=null&&_(n,["config"],xwe(a,n)),n}function wwe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","name"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function bwe(t,e,n){const r={},s=y(e,["pageSize"]);n!==void 0&&s!=null&&_(n,["_query","pageSize"],s);const a=y(e,["pageToken"]);n!==void 0&&a!=null&&_(n,["_query","pageToken"],a);const i=y(e,["filter"]);n!==void 0&&i!=null&&_(n,["_query","filter"],i);const o=y(e,["queryBase"]);return n!==void 0&&o!=null&&_(n,["_url","models_url"],UQ(t,o)),r}function _we(t,e){const n={},r=y(e,["config"]);return r!=null&&_(n,["config"],bwe(t,r,n)),n}function Cwe(t,e){const n={},r=y(t,["displayName"]);e!==void 0&&r!=null&&_(e,["displayName"],r);const s=y(t,["description"]);e!==void 0&&s!=null&&_(e,["description"],s);const a=y(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&_(e,["defaultCheckpointId"],a),n}function Ewe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","name"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],Cwe(s,n)),n}function Swe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","name"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function Twe(t){const e={};if(y(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Nwe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);if(s!=null){let i=yu(s);Array.isArray(i)&&(i=i.map(o=>C_(o))),_(n,["contents"],i)}const a=y(e,["config"]);return a!=null&&_(n,["config"],Twe(a)),n}function Bwe(t){const e={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=y(t,["imageBytes"]);n!=null&&_(e,["bytesBase64Encoded"],D0(n));const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function kwe(t,e){const n={},r=y(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&_(e,["parameters","sampleCount"],r),y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=y(t,["durationSeconds"]);if(e!==void 0&&s!=null&&_(e,["parameters","durationSeconds"],s),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=y(t,["aspectRatio"]);if(e!==void 0&&a!=null&&_(e,["parameters","aspectRatio"],a),y(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=y(t,["personGeneration"]);if(e!==void 0&&i!=null&&_(e,["parameters","personGeneration"],i),y(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=y(t,["negativePrompt"]);e!==void 0&&o!=null&&_(e,["parameters","negativePrompt"],o);const l=y(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&_(e,["parameters","enhancePrompt"],l),y(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(y(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(y(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Iwe(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const a=y(e,["image"]);if(a!=null&&_(n,["instances[0]","image"],Bwe(a)),y(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=y(e,["config"]);return i!=null&&_(n,["config"],kwe(i,n)),n}function Fwe(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function Dwe(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["data"]);r!=null&&_(e,["data"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function Lwe(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function Rwe(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],Fwe(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],Dwe(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],Lwe(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function Gp(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Rwe(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function Pwe(t){const e={},n=y(t,["anyOf"]);n!=null&&_(e,["anyOf"],n);const r=y(t,["default"]);r!=null&&_(e,["default"],r);const s=y(t,["description"]);s!=null&&_(e,["description"],s);const a=y(t,["enum"]);a!=null&&_(e,["enum"],a);const i=y(t,["example"]);i!=null&&_(e,["example"],i);const o=y(t,["format"]);o!=null&&_(e,["format"],o);const l=y(t,["items"]);l!=null&&_(e,["items"],l);const c=y(t,["maxItems"]);c!=null&&_(e,["maxItems"],c);const A=y(t,["maxLength"]);A!=null&&_(e,["maxLength"],A);const h=y(t,["maxProperties"]);h!=null&&_(e,["maxProperties"],h);const p=y(t,["maximum"]);p!=null&&_(e,["maximum"],p);const g=y(t,["minItems"]);g!=null&&_(e,["minItems"],g);const w=y(t,["minLength"]);w!=null&&_(e,["minLength"],w);const x=y(t,["minProperties"]);x!=null&&_(e,["minProperties"],x);const S=y(t,["minimum"]);S!=null&&_(e,["minimum"],S);const N=y(t,["nullable"]);N!=null&&_(e,["nullable"],N);const F=y(t,["pattern"]);F!=null&&_(e,["pattern"],F);const D=y(t,["properties"]);D!=null&&_(e,["properties"],D);const R=y(t,["propertyOrdering"]);R!=null&&_(e,["propertyOrdering"],R);const j=y(t,["required"]);j!=null&&_(e,["required"],j);const P=y(t,["title"]);P!=null&&_(e,["title"],P);const E=y(t,["type"]);return E!=null&&_(e,["type"],E),e}function Mwe(t){const e={},n=y(t,["featureSelectionPreference"]);return n!=null&&_(e,["featureSelectionPreference"],n),e}function Uwe(t){const e={},n=y(t,["method"]);n!=null&&_(e,["method"],n);const r=y(t,["category"]);r!=null&&_(e,["category"],r);const s=y(t,["threshold"]);return s!=null&&_(e,["threshold"],s),e}function Owe(t){const e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=y(t,["description"]);n!=null&&_(e,["description"],n);const r=y(t,["name"]);r!=null&&_(e,["name"],r);const s=y(t,["parameters"]);s!=null&&_(e,["parameters"],s);const a=y(t,["parametersJsonSchema"]);a!=null&&_(e,["parametersJsonSchema"],a);const i=y(t,["response"]);i!=null&&_(e,["response"],i);const o=y(t,["responseJsonSchema"]);return o!=null&&_(e,["responseJsonSchema"],o),e}function jwe(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function Hwe(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],jwe(n)),e}function Qwe(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function Vwe(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],Qwe(n)),e}function zwe(){return{}}function Gwe(t){const e={},n=y(t,["apiKeyString"]);return n!=null&&_(e,["apiKeyString"],n),e}function qwe(t){const e={},n=y(t,["apiKeyConfig"]);n!=null&&_(e,["apiKeyConfig"],Gwe(n));const r=y(t,["authType"]);r!=null&&_(e,["authType"],r);const s=y(t,["googleServiceAccountConfig"]);s!=null&&_(e,["googleServiceAccountConfig"],s);const a=y(t,["httpBasicAuthConfig"]);a!=null&&_(e,["httpBasicAuthConfig"],a);const i=y(t,["oauthConfig"]);i!=null&&_(e,["oauthConfig"],i);const o=y(t,["oidcConfig"]);return o!=null&&_(e,["oidcConfig"],o),e}function Kwe(t){const e={},n=y(t,["authConfig"]);return n!=null&&_(e,["authConfig"],qwe(n)),e}function $we(){return{}}function ZQ(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Owe(p))),_(e,["functionDeclarations"],h)}const r=y(t,["retrieval"]);r!=null&&_(e,["retrieval"],r);const s=y(t,["googleSearch"]);s!=null&&_(e,["googleSearch"],Hwe(s));const a=y(t,["googleSearchRetrieval"]);a!=null&&_(e,["googleSearchRetrieval"],Vwe(a)),y(t,["enterpriseWebSearch"])!=null&&_(e,["enterpriseWebSearch"],zwe());const o=y(t,["googleMaps"]);o!=null&&_(e,["googleMaps"],Kwe(o)),y(t,["urlContext"])!=null&&_(e,["urlContext"],$we());const c=y(t,["codeExecution"]);c!=null&&_(e,["codeExecution"],c);const A=y(t,["computerUse"]);return A!=null&&_(e,["computerUse"],A),e}function Wwe(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["allowedFunctionNames"]);return r!=null&&_(e,["allowedFunctionNames"],r),e}function Ywe(t){const e={},n=y(t,["latitude"]);n!=null&&_(e,["latitude"],n);const r=y(t,["longitude"]);return r!=null&&_(e,["longitude"],r),e}function Xwe(t){const e={},n=y(t,["latLng"]);n!=null&&_(e,["latLng"],Ywe(n));const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function Jwe(t){const e={},n=y(t,["functionCallingConfig"]);n!=null&&_(e,["functionCallingConfig"],Wwe(n));const r=y(t,["retrievalConfig"]);return r!=null&&_(e,["retrievalConfig"],Xwe(r)),e}function Zwe(t){const e={},n=y(t,["voiceName"]);return n!=null&&_(e,["voiceName"],n),e}function e2e(t){const e={},n=y(t,["prebuiltVoiceConfig"]);return n!=null&&_(e,["prebuiltVoiceConfig"],Zwe(n)),e}function t2e(t){const e={},n=y(t,["voiceConfig"]);if(n!=null&&_(e,["voiceConfig"],e2e(n)),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=y(t,["languageCode"]);return r!=null&&_(e,["languageCode"],r),e}function n2e(t){const e={},n=y(t,["includeThoughts"]);n!=null&&_(e,["includeThoughts"],n);const r=y(t,["thinkingBudget"]);return r!=null&&_(e,["thinkingBudget"],r),e}function r2e(t,e,n){const r={},s=y(e,["systemInstruction"]);n!==void 0&&s!=null&&_(n,["systemInstruction"],Gp(il(s)));const a=y(e,["temperature"]);a!=null&&_(r,["temperature"],a);const i=y(e,["topP"]);i!=null&&_(r,["topP"],i);const o=y(e,["topK"]);o!=null&&_(r,["topK"],o);const l=y(e,["candidateCount"]);l!=null&&_(r,["candidateCount"],l);const c=y(e,["maxOutputTokens"]);c!=null&&_(r,["maxOutputTokens"],c);const A=y(e,["stopSequences"]);A!=null&&_(r,["stopSequences"],A);const h=y(e,["responseLogprobs"]);h!=null&&_(r,["responseLogprobs"],h);const p=y(e,["logprobs"]);p!=null&&_(r,["logprobs"],p);const g=y(e,["presencePenalty"]);g!=null&&_(r,["presencePenalty"],g);const w=y(e,["frequencyPenalty"]);w!=null&&_(r,["frequencyPenalty"],w);const x=y(e,["seed"]);x!=null&&_(r,["seed"],x);const S=y(e,["responseMimeType"]);S!=null&&_(r,["responseMimeType"],S);const N=y(e,["responseSchema"]);N!=null&&_(r,["responseSchema"],Pwe(_4(N)));const F=y(e,["responseJsonSchema"]);F!=null&&_(r,["responseJsonSchema"],F);const D=y(e,["routingConfig"]);D!=null&&_(r,["routingConfig"],D);const R=y(e,["modelSelectionConfig"]);R!=null&&_(r,["modelConfig"],Mwe(R));const j=y(e,["safetySettings"]);if(n!==void 0&&j!=null){let oe=j;Array.isArray(oe)&&(oe=oe.map(ee=>Uwe(ee))),_(n,["safetySettings"],oe)}const P=y(e,["tools"]);if(n!==void 0&&P!=null){let oe=Vp(P);Array.isArray(oe)&&(oe=oe.map(ee=>ZQ(Qp(ee)))),_(n,["tools"],oe)}const E=y(e,["toolConfig"]);n!==void 0&&E!=null&&_(n,["toolConfig"],Jwe(E));const T=y(e,["labels"]);n!==void 0&&T!=null&&_(n,["labels"],T);const k=y(e,["cachedContent"]);n!==void 0&&k!=null&&_(n,["cachedContent"],UA(t,k));const z=y(e,["responseModalities"]);z!=null&&_(r,["responseModalities"],z);const M=y(e,["mediaResolution"]);M!=null&&_(r,["mediaResolution"],M);const U=y(e,["speechConfig"]);U!=null&&_(r,["speechConfig"],t2e(C4(U)));const G=y(e,["audioTimestamp"]);G!=null&&_(r,["audioTimestamp"],G);const q=y(e,["thinkingConfig"]);return q!=null&&_(r,["thinkingConfig"],n2e(q)),r}function F6(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);if(s!=null){let i=yu(s);Array.isArray(i)&&(i=i.map(o=>Gp(o))),_(n,["contents"],i)}const a=y(e,["config"]);return a!=null&&_(n,["generationConfig"],r2e(t,a,n)),n}function s2e(t,e){const n={},r=y(t,["taskType"]);e!==void 0&&r!=null&&_(e,["instances[]","task_type"],r);const s=y(t,["title"]);e!==void 0&&s!=null&&_(e,["instances[]","title"],s);const a=y(t,["outputDimensionality"]);e!==void 0&&a!=null&&_(e,["parameters","outputDimensionality"],a);const i=y(t,["mimeType"]);e!==void 0&&i!=null&&_(e,["instances[]","mimeType"],i);const o=y(t,["autoTruncate"]);return e!==void 0&&o!=null&&_(e,["parameters","autoTruncate"],o),n}function a2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);s!=null&&_(n,["instances[]","content"],RQ(t,s));const a=y(e,["config"]);return a!=null&&_(n,["config"],s2e(a,n)),n}function i2e(t,e){const n={},r=y(t,["outputGcsUri"]);e!==void 0&&r!=null&&_(e,["parameters","storageUri"],r);const s=y(t,["negativePrompt"]);e!==void 0&&s!=null&&_(e,["parameters","negativePrompt"],s);const a=y(t,["numberOfImages"]);e!==void 0&&a!=null&&_(e,["parameters","sampleCount"],a);const i=y(t,["aspectRatio"]);e!==void 0&&i!=null&&_(e,["parameters","aspectRatio"],i);const o=y(t,["guidanceScale"]);e!==void 0&&o!=null&&_(e,["parameters","guidanceScale"],o);const l=y(t,["seed"]);e!==void 0&&l!=null&&_(e,["parameters","seed"],l);const c=y(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&_(e,["parameters","safetySetting"],c);const A=y(t,["personGeneration"]);e!==void 0&&A!=null&&_(e,["parameters","personGeneration"],A);const h=y(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&_(e,["parameters","includeSafetyAttributes"],h);const p=y(t,["includeRaiReason"]);e!==void 0&&p!=null&&_(e,["parameters","includeRaiReason"],p);const g=y(t,["language"]);e!==void 0&&g!=null&&_(e,["parameters","language"],g);const w=y(t,["outputMimeType"]);e!==void 0&&w!=null&&_(e,["parameters","outputOptions","mimeType"],w);const x=y(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&_(e,["parameters","outputOptions","compressionQuality"],x);const S=y(t,["addWatermark"]);e!==void 0&&S!=null&&_(e,["parameters","addWatermark"],S);const N=y(t,["imageSize"]);e!==void 0&&N!=null&&_(e,["parameters","sampleImageSize"],N);const F=y(t,["enhancePrompt"]);return e!==void 0&&F!=null&&_(e,["parameters","enhancePrompt"],F),n}function o2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const a=y(e,["config"]);return a!=null&&_(n,["config"],i2e(a,n)),n}function E_(t){const e={},n=y(t,["gcsUri"]);n!=null&&_(e,["gcsUri"],n);const r=y(t,["imageBytes"]);r!=null&&_(e,["bytesBase64Encoded"],D0(r));const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function l2e(t){const e={},n=y(t,["maskMode"]);n!=null&&_(e,["maskMode"],n);const r=y(t,["segmentationClasses"]);r!=null&&_(e,["maskClasses"],r);const s=y(t,["maskDilation"]);return s!=null&&_(e,["dilation"],s),e}function c2e(t){const e={},n=y(t,["controlType"]);n!=null&&_(e,["controlType"],n);const r=y(t,["enableControlImageComputation"]);return r!=null&&_(e,["computeControl"],r),e}function u2e(t){const e={},n=y(t,["styleDescription"]);return n!=null&&_(e,["styleDescription"],n),e}function d2e(t){const e={},n=y(t,["subjectType"]);n!=null&&_(e,["subjectType"],n);const r=y(t,["subjectDescription"]);return r!=null&&_(e,["subjectDescription"],r),e}function A2e(t){const e={},n=y(t,["referenceImage"]);n!=null&&_(e,["referenceImage"],E_(n));const r=y(t,["referenceId"]);r!=null&&_(e,["referenceId"],r);const s=y(t,["referenceType"]);s!=null&&_(e,["referenceType"],s);const a=y(t,["maskImageConfig"]);a!=null&&_(e,["maskImageConfig"],l2e(a));const i=y(t,["controlImageConfig"]);i!=null&&_(e,["controlImageConfig"],c2e(i));const o=y(t,["styleImageConfig"]);o!=null&&_(e,["styleImageConfig"],u2e(o));const l=y(t,["subjectImageConfig"]);return l!=null&&_(e,["subjectImageConfig"],d2e(l)),e}function f2e(t,e){const n={},r=y(t,["outputGcsUri"]);e!==void 0&&r!=null&&_(e,["parameters","storageUri"],r);const s=y(t,["negativePrompt"]);e!==void 0&&s!=null&&_(e,["parameters","negativePrompt"],s);const a=y(t,["numberOfImages"]);e!==void 0&&a!=null&&_(e,["parameters","sampleCount"],a);const i=y(t,["aspectRatio"]);e!==void 0&&i!=null&&_(e,["parameters","aspectRatio"],i);const o=y(t,["guidanceScale"]);e!==void 0&&o!=null&&_(e,["parameters","guidanceScale"],o);const l=y(t,["seed"]);e!==void 0&&l!=null&&_(e,["parameters","seed"],l);const c=y(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&_(e,["parameters","safetySetting"],c);const A=y(t,["personGeneration"]);e!==void 0&&A!=null&&_(e,["parameters","personGeneration"],A);const h=y(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&_(e,["parameters","includeSafetyAttributes"],h);const p=y(t,["includeRaiReason"]);e!==void 0&&p!=null&&_(e,["parameters","includeRaiReason"],p);const g=y(t,["language"]);e!==void 0&&g!=null&&_(e,["parameters","language"],g);const w=y(t,["outputMimeType"]);e!==void 0&&w!=null&&_(e,["parameters","outputOptions","mimeType"],w);const x=y(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&_(e,["parameters","outputOptions","compressionQuality"],x);const S=y(t,["addWatermark"]);e!==void 0&&S!=null&&_(e,["parameters","addWatermark"],S);const N=y(t,["editMode"]);e!==void 0&&N!=null&&_(e,["parameters","editMode"],N);const F=y(t,["baseSteps"]);return e!==void 0&&F!=null&&_(e,["parameters","editConfig","baseSteps"],F),n}function h2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const a=y(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>A2e(l))),_(n,["instances[0]","referenceImages"],o)}const i=y(e,["config"]);return i!=null&&_(n,["config"],f2e(i,n)),n}function m2e(t,e){const n={},r=y(t,["includeRaiReason"]);e!==void 0&&r!=null&&_(e,["parameters","includeRaiReason"],r);const s=y(t,["outputMimeType"]);e!==void 0&&s!=null&&_(e,["parameters","outputOptions","mimeType"],s);const a=y(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&_(e,["parameters","outputOptions","compressionQuality"],a);const i=y(t,["enhanceInputImage"]);e!==void 0&&i!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=y(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=y(t,["numberOfImages"]);e!==void 0&&l!=null&&_(e,["parameters","sampleCount"],l);const c=y(t,["mode"]);return e!==void 0&&c!=null&&_(e,["parameters","mode"],c),n}function p2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["image"]);s!=null&&_(n,["instances[0]","image"],E_(s));const a=y(e,["upscaleFactor"]);a!=null&&_(n,["parameters","upscaleConfig","upscaleFactor"],a);const i=y(e,["config"]);return i!=null&&_(n,["config"],m2e(i,n)),n}function g2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","name"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function v2e(t,e,n){const r={},s=y(e,["pageSize"]);n!==void 0&&s!=null&&_(n,["_query","pageSize"],s);const a=y(e,["pageToken"]);n!==void 0&&a!=null&&_(n,["_query","pageToken"],a);const i=y(e,["filter"]);n!==void 0&&i!=null&&_(n,["_query","filter"],i);const o=y(e,["queryBase"]);return n!==void 0&&o!=null&&_(n,["_url","models_url"],UQ(t,o)),r}function x2e(t,e){const n={},r=y(e,["config"]);return r!=null&&_(n,["config"],v2e(t,r,n)),n}function y2e(t,e){const n={},r=y(t,["displayName"]);e!==void 0&&r!=null&&_(e,["displayName"],r);const s=y(t,["description"]);e!==void 0&&s!=null&&_(e,["description"],s);const a=y(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&_(e,["defaultCheckpointId"],a),n}function w2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],y2e(s,n)),n}function b2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","name"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],s),n}function _2e(t,e){const n={},r=y(t,["systemInstruction"]);e!==void 0&&r!=null&&_(e,["systemInstruction"],Gp(il(r)));const s=y(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>ZQ(o))),_(e,["tools"],i)}const a=y(t,["generationConfig"]);return e!==void 0&&a!=null&&_(e,["generationConfig"],a),n}function C2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);if(s!=null){let i=yu(s);Array.isArray(i)&&(i=i.map(o=>Gp(o))),_(n,["contents"],i)}const a=y(e,["config"]);return a!=null&&_(n,["config"],_2e(a,n)),n}function E2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["contents"]);if(s!=null){let i=yu(s);Array.isArray(i)&&(i=i.map(o=>Gp(o))),_(n,["contents"],i)}const a=y(e,["config"]);return a!=null&&_(n,["config"],a),n}function S2e(t){const e={},n=y(t,["uri"]);n!=null&&_(e,["gcsUri"],n);const r=y(t,["videoBytes"]);r!=null&&_(e,["bytesBase64Encoded"],D0(r));const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function T2e(t,e){const n={},r=y(t,["numberOfVideos"]);e!==void 0&&r!=null&&_(e,["parameters","sampleCount"],r);const s=y(t,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const a=y(t,["fps"]);e!==void 0&&a!=null&&_(e,["parameters","fps"],a);const i=y(t,["durationSeconds"]);e!==void 0&&i!=null&&_(e,["parameters","durationSeconds"],i);const o=y(t,["seed"]);e!==void 0&&o!=null&&_(e,["parameters","seed"],o);const l=y(t,["aspectRatio"]);e!==void 0&&l!=null&&_(e,["parameters","aspectRatio"],l);const c=y(t,["resolution"]);e!==void 0&&c!=null&&_(e,["parameters","resolution"],c);const A=y(t,["personGeneration"]);e!==void 0&&A!=null&&_(e,["parameters","personGeneration"],A);const h=y(t,["pubsubTopic"]);e!==void 0&&h!=null&&_(e,["parameters","pubsubTopic"],h);const p=y(t,["negativePrompt"]);e!==void 0&&p!=null&&_(e,["parameters","negativePrompt"],p);const g=y(t,["enhancePrompt"]);e!==void 0&&g!=null&&_(e,["parameters","enhancePrompt"],g);const w=y(t,["generateAudio"]);e!==void 0&&w!=null&&_(e,["parameters","generateAudio"],w);const x=y(t,["lastFrame"]);e!==void 0&&x!=null&&_(e,["instances[0]","lastFrame"],E_(x));const S=y(t,["compressionQuality"]);return e!==void 0&&S!=null&&_(e,["parameters","compressionQuality"],S),n}function N2e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["_url","model"],Is(t,r));const s=y(e,["prompt"]);s!=null&&_(n,["instances[0]","prompt"],s);const a=y(e,["image"]);a!=null&&_(n,["instances[0]","image"],E_(a));const i=y(e,["video"]);i!=null&&_(n,["instances[0]","video"],S2e(i));const o=y(e,["config"]);return o!=null&&_(n,["config"],T2e(o,n)),n}function B2e(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function k2e(t){const e={},n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function I2e(t){const e={},n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function F2e(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],B2e(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],k2e(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],I2e(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function D2e(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>F2e(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function L2e(t){const e={},n=y(t,["citationSources"]);return n!=null&&_(e,["citations"],n),e}function R2e(t){const e={},n=y(t,["retrievedUrl"]);n!=null&&_(e,["retrievedUrl"],n);const r=y(t,["urlRetrievalStatus"]);return r!=null&&_(e,["urlRetrievalStatus"],r),e}function P2e(t){const e={},n=y(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>R2e(s))),_(e,["urlMetadata"],r)}return e}function M2e(t){const e={},n=y(t,["content"]);n!=null&&_(e,["content"],D2e(n));const r=y(t,["citationMetadata"]);r!=null&&_(e,["citationMetadata"],L2e(r));const s=y(t,["tokenCount"]);s!=null&&_(e,["tokenCount"],s);const a=y(t,["finishReason"]);a!=null&&_(e,["finishReason"],a);const i=y(t,["urlContextMetadata"]);i!=null&&_(e,["urlContextMetadata"],P2e(i));const o=y(t,["avgLogprobs"]);o!=null&&_(e,["avgLogprobs"],o);const l=y(t,["groundingMetadata"]);l!=null&&_(e,["groundingMetadata"],l);const c=y(t,["index"]);c!=null&&_(e,["index"],c);const A=y(t,["logprobsResult"]);A!=null&&_(e,["logprobsResult"],A);const h=y(t,["safetyRatings"]);return h!=null&&_(e,["safetyRatings"],h),e}function D6(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>M2e(l))),_(e,["candidates"],o)}const s=y(t,["modelVersion"]);s!=null&&_(e,["modelVersion"],s);const a=y(t,["promptFeedback"]);a!=null&&_(e,["promptFeedback"],a);const i=y(t,["usageMetadata"]);return i!=null&&_(e,["usageMetadata"],i),e}function U2e(t){const e={},n=y(t,["values"]);return n!=null&&_(e,["values"],n),e}function O2e(){return{}}function j2e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>U2e(i))),_(e,["embeddings"],a)}return y(t,["metadata"])!=null&&_(e,["metadata"],O2e()),e}function H2e(t){const e={},n=y(t,["bytesBase64Encoded"]);n!=null&&_(e,["imageBytes"],D0(n));const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function e9(t){const e={},n=y(t,["safetyAttributes","categories"]);n!=null&&_(e,["categories"],n);const r=y(t,["safetyAttributes","scores"]);r!=null&&_(e,["scores"],r);const s=y(t,["contentType"]);return s!=null&&_(e,["contentType"],s),e}function Q2e(t){const e={},n=y(t,["_self"]);n!=null&&_(e,["image"],H2e(n));const r=y(t,["raiFilteredReason"]);r!=null&&_(e,["raiFilteredReason"],r);const s=y(t,["_self"]);return s!=null&&_(e,["safetyAttributes"],e9(s)),e}function V2e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Q2e(i))),_(e,["generatedImages"],a)}const s=y(t,["positivePromptSafetyAttributes"]);return s!=null&&_(e,["positivePromptSafetyAttributes"],e9(s)),e}function z2e(t){const e={},n=y(t,["baseModel"]);n!=null&&_(e,["baseModel"],n);const r=y(t,["createTime"]);r!=null&&_(e,["createTime"],r);const s=y(t,["updateTime"]);return s!=null&&_(e,["updateTime"],s),e}function h5(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["description"]);s!=null&&_(e,["description"],s);const a=y(t,["version"]);a!=null&&_(e,["version"],a);const i=y(t,["_self"]);i!=null&&_(e,["tunedModelInfo"],z2e(i));const o=y(t,["inputTokenLimit"]);o!=null&&_(e,["inputTokenLimit"],o);const l=y(t,["outputTokenLimit"]);l!=null&&_(e,["outputTokenLimit"],l);const c=y(t,["supportedGenerationMethods"]);return c!=null&&_(e,["supportedActions"],c),e}function G2e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["_self"]);if(s!=null){let a=OQ(s);Array.isArray(a)&&(a=a.map(i=>h5(i))),_(e,["models"],a)}return e}function q2e(){return{}}function K2e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["totalTokens"]);r!=null&&_(e,["totalTokens"],r);const s=y(t,["cachedContentTokenCount"]);return s!=null&&_(e,["cachedContentTokenCount"],s),e}function $2e(t){const e={},n=y(t,["video","uri"]);n!=null&&_(e,["uri"],n);const r=y(t,["video","encodedVideo"]);r!=null&&_(e,["videoBytes"],D0(r));const s=y(t,["encoding"]);return s!=null&&_(e,["mimeType"],s),e}function W2e(t){const e={},n=y(t,["_self"]);return n!=null&&_(e,["video"],$2e(n)),e}function Y2e(t){const e={},n=y(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>W2e(i))),_(e,["generatedVideos"],a)}const r=y(t,["raiMediaFilteredCount"]);r!=null&&_(e,["raiMediaFilteredCount"],r);const s=y(t,["raiMediaFilteredReasons"]);return s!=null&&_(e,["raiMediaFilteredReasons"],s),e}function X2e(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["metadata"]);r!=null&&_(e,["metadata"],r);const s=y(t,["done"]);s!=null&&_(e,["done"],s);const a=y(t,["error"]);a!=null&&_(e,["error"],a);const i=y(t,["response","generateVideoResponse"]);return i!=null&&_(e,["response"],Y2e(i)),e}function J2e(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function Z2e(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["data"]);r!=null&&_(e,["data"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function ebe(t){const e={},n=y(t,["displayName"]);n!=null&&_(e,["displayName"],n);const r=y(t,["fileUri"]);r!=null&&_(e,["fileUri"],r);const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function tbe(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],J2e(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],Z2e(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],ebe(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function nbe(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>tbe(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function rbe(t){const e={},n=y(t,["citations"]);return n!=null&&_(e,["citations"],n),e}function sbe(t){const e={},n=y(t,["retrievedUrl"]);n!=null&&_(e,["retrievedUrl"],n);const r=y(t,["urlRetrievalStatus"]);return r!=null&&_(e,["urlRetrievalStatus"],r),e}function abe(t){const e={},n=y(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>sbe(s))),_(e,["urlMetadata"],r)}return e}function ibe(t){const e={},n=y(t,["content"]);n!=null&&_(e,["content"],nbe(n));const r=y(t,["citationMetadata"]);r!=null&&_(e,["citationMetadata"],rbe(r));const s=y(t,["finishMessage"]);s!=null&&_(e,["finishMessage"],s);const a=y(t,["finishReason"]);a!=null&&_(e,["finishReason"],a);const i=y(t,["urlContextMetadata"]);i!=null&&_(e,["urlContextMetadata"],abe(i));const o=y(t,["avgLogprobs"]);o!=null&&_(e,["avgLogprobs"],o);const l=y(t,["groundingMetadata"]);l!=null&&_(e,["groundingMetadata"],l);const c=y(t,["index"]);c!=null&&_(e,["index"],c);const A=y(t,["logprobsResult"]);A!=null&&_(e,["logprobsResult"],A);const h=y(t,["safetyRatings"]);return h!=null&&_(e,["safetyRatings"],h),e}function L6(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(A=>ibe(A))),_(e,["candidates"],c)}const s=y(t,["createTime"]);s!=null&&_(e,["createTime"],s);const a=y(t,["responseId"]);a!=null&&_(e,["responseId"],a);const i=y(t,["modelVersion"]);i!=null&&_(e,["modelVersion"],i);const o=y(t,["promptFeedback"]);o!=null&&_(e,["promptFeedback"],o);const l=y(t,["usageMetadata"]);return l!=null&&_(e,["usageMetadata"],l),e}function obe(t){const e={},n=y(t,["truncated"]);n!=null&&_(e,["truncated"],n);const r=y(t,["token_count"]);return r!=null&&_(e,["tokenCount"],r),e}function lbe(t){const e={},n=y(t,["values"]);n!=null&&_(e,["values"],n);const r=y(t,["statistics"]);return r!=null&&_(e,["statistics"],obe(r)),e}function cbe(t){const e={},n=y(t,["billableCharacterCount"]);return n!=null&&_(e,["billableCharacterCount"],n),e}function ube(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>lbe(i))),_(e,["embeddings"],a)}const s=y(t,["metadata"]);return s!=null&&_(e,["metadata"],cbe(s)),e}function dbe(t){const e={},n=y(t,["gcsUri"]);n!=null&&_(e,["gcsUri"],n);const r=y(t,["bytesBase64Encoded"]);r!=null&&_(e,["imageBytes"],D0(r));const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function t9(t){const e={},n=y(t,["safetyAttributes","categories"]);n!=null&&_(e,["categories"],n);const r=y(t,["safetyAttributes","scores"]);r!=null&&_(e,["scores"],r);const s=y(t,["contentType"]);return s!=null&&_(e,["contentType"],s),e}function S4(t){const e={},n=y(t,["_self"]);n!=null&&_(e,["image"],dbe(n));const r=y(t,["raiFilteredReason"]);r!=null&&_(e,["raiFilteredReason"],r);const s=y(t,["_self"]);s!=null&&_(e,["safetyAttributes"],t9(s));const a=y(t,["prompt"]);return a!=null&&_(e,["enhancedPrompt"],a),e}function Abe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>S4(i))),_(e,["generatedImages"],a)}const s=y(t,["positivePromptSafetyAttributes"]);return s!=null&&_(e,["positivePromptSafetyAttributes"],t9(s)),e}function fbe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>S4(a))),_(e,["generatedImages"],s)}return e}function hbe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>S4(a))),_(e,["generatedImages"],s)}return e}function mbe(t){const e={},n=y(t,["endpoint"]);n!=null&&_(e,["name"],n);const r=y(t,["deployedModelId"]);return r!=null&&_(e,["deployedModelId"],r),e}function pbe(t){const e={},n=y(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&_(e,["baseModel"],n);const r=y(t,["createTime"]);r!=null&&_(e,["createTime"],r);const s=y(t,["updateTime"]);return s!=null&&_(e,["updateTime"],s),e}function gbe(t){const e={},n=y(t,["checkpointId"]);n!=null&&_(e,["checkpointId"],n);const r=y(t,["epoch"]);r!=null&&_(e,["epoch"],r);const s=y(t,["step"]);return s!=null&&_(e,["step"],s),e}function m5(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["displayName"]);r!=null&&_(e,["displayName"],r);const s=y(t,["description"]);s!=null&&_(e,["description"],s);const a=y(t,["versionId"]);a!=null&&_(e,["version"],a);const i=y(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>mbe(p))),_(e,["endpoints"],h)}const o=y(t,["labels"]);o!=null&&_(e,["labels"],o);const l=y(t,["_self"]);l!=null&&_(e,["tunedModelInfo"],pbe(l));const c=y(t,["defaultCheckpointId"]);c!=null&&_(e,["defaultCheckpointId"],c);const A=y(t,["checkpoints"]);if(A!=null){let h=A;Array.isArray(h)&&(h=h.map(p=>gbe(p))),_(e,["checkpoints"],h)}return e}function vbe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["_self"]);if(s!=null){let a=OQ(s);Array.isArray(a)&&(a=a.map(i=>m5(i))),_(e,["models"],a)}return e}function xbe(){return{}}function ybe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["totalTokens"]);return r!=null&&_(e,["totalTokens"],r),e}function wbe(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["tokensInfo"]);return r!=null&&_(e,["tokensInfo"],r),e}function bbe(t){const e={},n=y(t,["gcsUri"]);n!=null&&_(e,["uri"],n);const r=y(t,["bytesBase64Encoded"]);r!=null&&_(e,["videoBytes"],D0(r));const s=y(t,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}function _be(t){const e={},n=y(t,["_self"]);return n!=null&&_(e,["video"],bbe(n)),e}function Cbe(t){const e={},n=y(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>_be(i))),_(e,["generatedVideos"],a)}const r=y(t,["raiMediaFilteredCount"]);r!=null&&_(e,["raiMediaFilteredCount"],r);const s=y(t,["raiMediaFilteredReasons"]);return s!=null&&_(e,["raiMediaFilteredReasons"],s),e}function Ebe(t){const e={},n=y(t,["name"]);n!=null&&_(e,["name"],n);const r=y(t,["metadata"]);r!=null&&_(e,["metadata"],r);const s=y(t,["done"]);s!=null&&_(e,["done"],s);const a=y(t,["error"]);a!=null&&_(e,["error"],a);const i=y(t,["response"]);return i!=null&&_(e,["response"],Cbe(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sbe="Content-Type",Tbe="X-Server-Timeout",Nbe="User-Agent",p5="x-goog-api-client",Bbe="1.12.0",kbe=`google-genai-sdk/${Bbe}`,Ibe="v1beta1",Fbe="v1beta",R6=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Dbe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Ibe,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Fbe,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>s.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&Lbe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await P6(s),new l5(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await P6(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return rp(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield ra(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(l,{stream:!0});try{const h=JSON.parse(c);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),g=p.status,w=p.code,x=`got status: ${g}. ${JSON.stringify(h)}`;if(w>=400&&w<600)throw new __({message:x,status:w})}}catch(h){if(h.name==="ApiError")throw h}i+=c;let A=i.match(R6);for(;A;){const h=A[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ra(new l5(p)),i=i.slice(A[0].length),A=i.match(R6)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=kbe+" "+this.clientOptions.userAgentExtra;return e[Nbe]=n,e[p5]=n,e[Sbe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))n.append(r,s);e.timeout&&e.timeout>0&&n.append(Tbe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,n);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:wn("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=i==null?void 0:i.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function P6(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new __({message:s,status:n}):new Error(s)}}function Lbe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=i[l],A=o[l];c&&typeof c=="object"&&!Array.isArray(c)&&A&&typeof A=="object"&&!Array.isArray(A)?o[l]=r(A,c):(A&&c&&typeof A!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof A}, New type: ${typeof c}. Overwriting.`),o[l]=c)}return o}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rbe="mcp_used/unknown";let Pbe=!1;function n9(t){for(const e of t)if(Mbe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Pbe}function r9(t){var e;const n=(e=t[p5])!==null&&e!==void 0?e:"";t[p5]=(n+` ${Rbe}`).trimStart()}function Mbe(t){return t!==null&&typeof t=="object"&&t instanceof T4}function Ube(t,e=100){return rp(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield ra(t.listTools({cursor:r}));for(const i of a.tools)yield yield ra(i),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class T4{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new T4(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const A of this.mcpClients)try{for(var o=!0,l=(n=void 0,Lv(Ube(A))),c;c=await l.next(),e=c.done,!e;o=!0){s=c.value,o=!1;const h=s;i.push(h);const p=h.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=A}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Dge(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Obe(t,e,n){const r=new Ege;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const a=Dye(s);Object.assign(r,a),e(r)}class jbe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=Vbe(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let c=()=>{};const A=new Promise(D=>{c=D}),h=e.callbacks,p=function(){c({})},g=this.apiClient,w={onopen:p,onmessage:D=>{Obe(g,h.onmessage,D)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(D){}},x=this.webSocketFactory.create(l,Qbe(i),w);x.connect(),await A;const S=Is(this.apiClient,e.model),N=YQ({model:S}),F=f5({setup:N});return x.send(JSON.stringify(F)),new Hbe(x,this.apiClient)}}class Hbe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=I1e(e),r=XQ(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=F1e(e),r=f5(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=f5({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Um.PLAY)}pause(){this.sendPlaybackControl(Um.PAUSE)}stop(){this.sendPlaybackControl(Um.STOP)}resetContext(){this.sendPlaybackControl(Um.RESET_CONTEXT)}close(){this.conn.close()}}function Qbe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Vbe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zbe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Gbe(t,e,n){const r=new Cge;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=Kye(a);Object.assign(r,i)}else{const i=Cye(a);Object.assign(r,i)}e(r)}class qbe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new jbe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let A;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&n9(e.config.tools)&&r9(h);const p=Ybe(h);if(this.apiClient.isVertexAI())A=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const k=this.apiClient.getApiKey();let z="BidiGenerateContent",M="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),z="BidiGenerateContentConstrained",M="access_token"),A=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${z}?${M}=${k}`}let g=()=>{};const w=new Promise(k=>{g=k}),x=e.callbacks,S=function(){var k;(k=x==null?void 0:x.onopen)===null||k===void 0||k.call(x),g({})},N=this.apiClient,F={onopen:S,onmessage:k=>{Gbe(N,x.onmessage,k)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(k){}},D=this.webSocketFactory.create(A,Wbe(p),F);D.connect(),await w;let R=Is(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const k=this.apiClient.getProject(),z=this.apiClient.getLocation();R=`projects/${k}/locations/${z}/`+R}let j={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Z2.AUDIO]}:e.config.responseModalities=[Z2.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],E=[];for(const k of P)if(this.isCallableTool(k)){const z=k;E.push(await z.tool())}else E.push(k);E.length>0&&(e.config.tools=E);const T={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=aye(this.apiClient,T):j=T1e(this.apiClient,T),delete j.config,D.send(JSON.stringify(j)),new $be(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Kbe={turnComplete:!0};class $be{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=yu(n.turns),e.isVertexAI()?r=r.map(s=>Gp(s)):r=r.map(s=>C_(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(zbe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Kbe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:lye(e)}:n={realtimeInput:k1e(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Wbe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Ybe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M6=10;function U6(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(sp(i)){s=!0;break}if(!s)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function sp(t){return"callTool"in t&&typeof t.callTool=="function"}function Xbe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>sp(s)))!==null&&r!==void 0?r:!1}function Jbe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!sp(s)))!==null&&r!==void 0?r:!1}function O6(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zbe extends F0{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Xbe(n)||U6(n.config))return await this.generateContentInternal(l);if(Jbe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,A;const h=yu(l.contents),p=(a=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:M6;let g=0;for(;g<p&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const w=c.candidates[0].content,x=[];for(const S of(o=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(sp(S)){const F=await S.callTool(c.functionCalls);x.push(...F)}g++,A={role:"user",parts:x},l.contents=yu(l.contents),l.contents.push(w),l.contents.push(A),O6(l.config)&&(h.push(w),h.push(A))}return O6(l.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),U6(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new s1(v0.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>sp(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&n9(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),r9(c),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return o}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(sp(i)){const o=i,l=await o.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,o)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:M6;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(c,A,h){var p,g;return rp(this,arguments,function*(){for(var w,x,S,N;o<a;){i&&(o++,i=!1);const j=yield ra(c.processParamsMaybeAddMcpUsage(h)),P=yield ra(c.generateContentStreamInternal(j)),E=[],T=[];try{for(var F=!0,D=(x=void 0,Lv(P)),R;R=yield ra(D.next()),w=R.done,!w;F=!0){N=R.value,F=!1;const k=N;if(yield yield ra(k),k.candidates&&(!((p=k.candidates[0])===null||p===void 0)&&p.content)){T.push(k.candidates[0].content);for(const z of(g=k.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<a&&z.functionCall){if(!z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(A.has(z.functionCall.name)){const M=yield ra(A.get(z.functionCall.name).callTool([z.functionCall]));E.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${A.keys()}, mising tool: ${z.functionCall.name}`)}}}}catch(k){x={error:k}}finally{try{!F&&!w&&(S=D.return)&&(yield ra(S.call(D)))}finally{if(x)throw x.error}}if(E.length>0){i=!0;const k=new Pg;k.candidates=[{content:{role:"user",parts:E}}],yield yield ra(k);const z=[];z.push(...T),z.push({role:"user",parts:E});const M=yu(h.contents).concat(z);h.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=F6(this.apiClient,e);return o=wn("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=L6(A),p=new Pg;return Object.assign(p,h),p})}else{const c=I6(this.apiClient,e);return o=wn("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=D6(A),p=new Pg;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=F6(this.apiClient,e);return o=wn("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(h){return rp(this,arguments,function*(){var p,g,w,x;try{for(var S=!0,N=Lv(h),F;F=yield ra(N.next()),p=F.done,!p;S=!0){x=F.value,S=!1;const D=x,R=L6(yield ra(D.json()));R.sdkHttpResponse={headers:D.headers};const j=new Pg;Object.assign(j,R),yield yield ra(j)}}catch(D){g={error:D}}finally{try{!S&&!p&&(w=N.return)&&(yield ra(w.call(N)))}finally{if(g)throw g.error}}})})}else{const c=I6(this.apiClient,e);return o=wn("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return rp(this,arguments,function*(){var p,g,w,x;try{for(var S=!0,N=Lv(h),F;F=yield ra(N.next()),p=F.done,!p;S=!0){x=F.value,S=!1;const D=x,R=D6(yield ra(D.json()));R.sdkHttpResponse={headers:D.headers};const j=new Pg;Object.assign(j,R),yield yield ra(j)}}catch(D){g={error:D}}finally{try{!S&&!p&&(w=N.return)&&(yield ra(w.call(N)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=a2e(this.apiClient,e);return o=wn("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=ube(A),p=new u6;return Object.assign(p,h),p})}else{const c=vwe(this.apiClient,e);return o=wn("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=j2e(A),p=new u6;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=o2e(this.apiClient,e);return o=wn("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=Abe(A),p=new d6;return Object.assign(p,h),p})}else{const c=ywe(this.apiClient,e);return o=wn("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=V2e(A),p=new d6;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=h2e(this.apiClient,e);return a=wn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const A=c;return A.sdkHttpResponse={headers:l.headers},A})),s.then(l=>{const c=fbe(l),A=new vge;return Object.assign(A,c),A})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=p2e(this.apiClient,e);return a=wn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const A=c;return A.sdkHttpResponse={headers:l.headers},A})),s.then(l=>{const c=hbe(l),A=new xge;return Object.assign(A,c),A})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=g2e(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>m5(A))}else{const c=wwe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>h5(A))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=x2e(this.apiClient,e);return o=wn("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=vbe(A),p=new A6;return Object.assign(p,h),p})}else{const c=_we(this.apiClient,e);return o=wn("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=G2e(A),p=new A6;return Object.assign(p,h),p})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=w2e(this.apiClient,e);return o=wn("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>m5(A))}else{const c=Ewe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>h5(A))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=b2e(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(()=>{const A=xbe(),h=new f6;return Object.assign(h,A),h})}else{const c=Swe(this.apiClient,e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(()=>{const A=q2e(),h=new f6;return Object.assign(h,A),h})}}async countTokens(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=C2e(this.apiClient,e);return o=wn("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=ybe(A),p=new h6;return Object.assign(p,h),p})}else{const c=Nwe(this.apiClient,e);return o=wn("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=K2e(A),p=new h6;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=E2e(this.apiClient,e);return a=wn("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const A=c;return A.sdkHttpResponse={headers:l.headers},A})),s.then(l=>{const c=wbe(l),A=new yge;return Object.assign(A,c),A})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=N2e(this.apiClient,e);return o=wn("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i.then(A=>{const h=Ebe(A),p=new eb;return Object.assign(p,h),p})}else{const c=Iwe(this.apiClient,e);return o=wn("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i.then(A=>{const h=X2e(A),p=new eb;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e_e(t){const e={},n=y(t,["operationName"]);n!=null&&_(e,["_url","operationName"],n);const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function t_e(t){const e={},n=y(t,["operationName"]);n!=null&&_(e,["_url","operationName"],n);const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function n_e(t){const e={},n=y(t,["operationName"]);n!=null&&_(e,["operationName"],n);const r=y(t,["resourceName"]);r!=null&&_(e,["_url","resourceName"],r);const s=y(t,["config"]);return s!=null&&_(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r_e extends F0{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=t_e(e);return o=wn("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json()),i}else{const c=e_e(e);return o=wn("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=n_e(e);return a=wn("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s_e(t){const e={},n=y(t,["voiceName"]);return n!=null&&_(e,["voiceName"],n),e}function s9(t){const e={},n=y(t,["prebuiltVoiceConfig"]);return n!=null&&_(e,["prebuiltVoiceConfig"],s_e(n)),e}function a_e(t){const e={},n=y(t,["speaker"]);n!=null&&_(e,["speaker"],n);const r=y(t,["voiceConfig"]);return r!=null&&_(e,["voiceConfig"],s9(r)),e}function i_e(t){const e={},n=y(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>a_e(s))),_(e,["speakerVoiceConfigs"],r)}return e}function o_e(t){const e={},n=y(t,["voiceConfig"]);n!=null&&_(e,["voiceConfig"],s9(n));const r=y(t,["multiSpeakerVoiceConfig"]);r!=null&&_(e,["multiSpeakerVoiceConfig"],i_e(r));const s=y(t,["languageCode"]);return s!=null&&_(e,["languageCode"],s),e}function l_e(t){const e={},n=y(t,["fps"]);n!=null&&_(e,["fps"],n);const r=y(t,["endOffset"]);r!=null&&_(e,["endOffset"],r);const s=y(t,["startOffset"]);return s!=null&&_(e,["startOffset"],s),e}function c_e(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["data"]);n!=null&&_(e,["data"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function u_e(t){const e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=y(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function d_e(t){const e={},n=y(t,["videoMetadata"]);n!=null&&_(e,["videoMetadata"],l_e(n));const r=y(t,["thought"]);r!=null&&_(e,["thought"],r);const s=y(t,["inlineData"]);s!=null&&_(e,["inlineData"],c_e(s));const a=y(t,["fileData"]);a!=null&&_(e,["fileData"],u_e(a));const i=y(t,["thoughtSignature"]);i!=null&&_(e,["thoughtSignature"],i);const o=y(t,["codeExecutionResult"]);o!=null&&_(e,["codeExecutionResult"],o);const l=y(t,["executableCode"]);l!=null&&_(e,["executableCode"],l);const c=y(t,["functionCall"]);c!=null&&_(e,["functionCall"],c);const A=y(t,["functionResponse"]);A!=null&&_(e,["functionResponse"],A);const h=y(t,["text"]);return h!=null&&_(e,["text"],h),e}function A_e(t){const e={},n=y(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>d_e(a))),_(e,["parts"],s)}const r=y(t,["role"]);return r!=null&&_(e,["role"],r),e}function f_e(t){const e={},n=y(t,["behavior"]);n!=null&&_(e,["behavior"],n);const r=y(t,["description"]);r!=null&&_(e,["description"],r);const s=y(t,["name"]);s!=null&&_(e,["name"],s);const a=y(t,["parameters"]);a!=null&&_(e,["parameters"],a);const i=y(t,["parametersJsonSchema"]);i!=null&&_(e,["parametersJsonSchema"],i);const o=y(t,["response"]);o!=null&&_(e,["response"],o);const l=y(t,["responseJsonSchema"]);return l!=null&&_(e,["responseJsonSchema"],l),e}function h_e(t){const e={},n=y(t,["startTime"]);n!=null&&_(e,["startTime"],n);const r=y(t,["endTime"]);return r!=null&&_(e,["endTime"],r),e}function m_e(t){const e={},n=y(t,["timeRangeFilter"]);return n!=null&&_(e,["timeRangeFilter"],h_e(n)),e}function p_e(t){const e={},n=y(t,["mode"]);n!=null&&_(e,["mode"],n);const r=y(t,["dynamicThreshold"]);return r!=null&&_(e,["dynamicThreshold"],r),e}function g_e(t){const e={},n=y(t,["dynamicRetrievalConfig"]);return n!=null&&_(e,["dynamicRetrievalConfig"],p_e(n)),e}function v_e(){return{}}function x_e(t){const e={},n=y(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(c=>f_e(c))),_(e,["functionDeclarations"],l)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=y(t,["googleSearch"]);r!=null&&_(e,["googleSearch"],m_e(r));const s=y(t,["googleSearchRetrieval"]);if(s!=null&&_(e,["googleSearchRetrieval"],g_e(s)),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(y(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");y(t,["urlContext"])!=null&&_(e,["urlContext"],v_e());const i=y(t,["codeExecution"]);i!=null&&_(e,["codeExecution"],i);const o=y(t,["computerUse"]);return o!=null&&_(e,["computerUse"],o),e}function y_e(t){const e={},n=y(t,["handle"]);if(n!=null&&_(e,["handle"],n),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function j6(){return{}}function w_e(t){const e={},n=y(t,["disabled"]);n!=null&&_(e,["disabled"],n);const r=y(t,["startOfSpeechSensitivity"]);r!=null&&_(e,["startOfSpeechSensitivity"],r);const s=y(t,["endOfSpeechSensitivity"]);s!=null&&_(e,["endOfSpeechSensitivity"],s);const a=y(t,["prefixPaddingMs"]);a!=null&&_(e,["prefixPaddingMs"],a);const i=y(t,["silenceDurationMs"]);return i!=null&&_(e,["silenceDurationMs"],i),e}function b_e(t){const e={},n=y(t,["automaticActivityDetection"]);n!=null&&_(e,["automaticActivityDetection"],w_e(n));const r=y(t,["activityHandling"]);r!=null&&_(e,["activityHandling"],r);const s=y(t,["turnCoverage"]);return s!=null&&_(e,["turnCoverage"],s),e}function __e(t){const e={},n=y(t,["targetTokens"]);return n!=null&&_(e,["targetTokens"],n),e}function C_e(t){const e={},n=y(t,["triggerTokens"]);n!=null&&_(e,["triggerTokens"],n);const r=y(t,["slidingWindow"]);return r!=null&&_(e,["slidingWindow"],__e(r)),e}function E_e(t){const e={},n=y(t,["proactiveAudio"]);return n!=null&&_(e,["proactiveAudio"],n),e}function S_e(t,e){const n={},r=y(t,["generationConfig"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig"],r);const s=y(t,["responseModalities"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","responseModalities"],s);const a=y(t,["temperature"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","temperature"],a);const i=y(t,["topP"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","topP"],i);const o=y(t,["topK"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topK"],o);const l=y(t,["maxOutputTokens"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","maxOutputTokens"],l);const c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","mediaResolution"],c);const A=y(t,["seed"]);e!==void 0&&A!=null&&_(e,["setup","generationConfig","seed"],A);const h=y(t,["speechConfig"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","speechConfig"],o_e(E4(h)));const p=y(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],p);const g=y(t,["systemInstruction"]);e!==void 0&&g!=null&&_(e,["setup","systemInstruction"],A_e(il(g)));const w=y(t,["tools"]);if(e!==void 0&&w!=null){let j=Vp(w);Array.isArray(j)&&(j=j.map(P=>x_e(Qp(P)))),_(e,["setup","tools"],j)}const x=y(t,["sessionResumption"]);e!==void 0&&x!=null&&_(e,["setup","sessionResumption"],y_e(x));const S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&_(e,["setup","inputAudioTranscription"],j6());const N=y(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&_(e,["setup","outputAudioTranscription"],j6());const F=y(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&_(e,["setup","realtimeInputConfig"],b_e(F));const D=y(t,["contextWindowCompression"]);e!==void 0&&D!=null&&_(e,["setup","contextWindowCompression"],C_e(D));const R=y(t,["proactivity"]);return e!==void 0&&R!=null&&_(e,["setup","proactivity"],E_e(R)),n}function T_e(t,e){const n={},r=y(e,["model"]);r!=null&&_(n,["setup","model"],Is(t,r));const s=y(e,["config"]);return s!=null&&_(n,["config"],S_e(s,n)),n}function N_e(t,e,n){const r={},s=y(e,["expireTime"]);n!==void 0&&s!=null&&_(n,["expireTime"],s);const a=y(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&_(n,["newSessionExpireTime"],a);const i=y(e,["uses"]);n!==void 0&&i!=null&&_(n,["uses"],i);const o=y(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&_(n,["bidiGenerateContentSetup"],T_e(t,o));const l=y(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&_(n,["fieldMask"],l),r}function B_e(t,e){const n={},r=y(e,["config"]);return r!=null&&_(n,["config"],N_e(t,r,n)),n}function k_e(t){const e={},n=y(t,["name"]);return n!=null&&_(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I_e(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function F_e(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=I_e(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(c=>i.includes(c)?`generationConfig.${c}`:c));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class D_e extends F0{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=B_e(this.apiClient,e);a=wn("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=F_e(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>k_e(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L_e(t){const e={},n=y(t,["name"]);n!=null&&_(e,["_url","name"],n);const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function R_e(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const a=y(t,["filter"]);return e!==void 0&&a!=null&&_(e,["_query","filter"],a),n}function P_e(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],R_e(n,e)),e}function M_e(t){const e={},n=y(t,["textInput"]);n!=null&&_(e,["textInput"],n);const r=y(t,["output"]);return r!=null&&_(e,["output"],r),e}function U_e(t){const e={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=y(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>M_e(s))),_(e,["examples","examples"],r)}return e}function O_e(t,e){const n={};if(y(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=y(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&_(e,["displayName"],r),y(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=y(t,["epochCount"]);e!==void 0&&s!=null&&_(e,["tuningTask","hyperparameters","epochCount"],s);const a=y(t,["learningRateMultiplier"]);if(a!=null&&_(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),y(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=y(t,["batchSize"]);e!==void 0&&i!=null&&_(e,["tuningTask","hyperparameters","batchSize"],i);const o=y(t,["learningRate"]);return e!==void 0&&o!=null&&_(e,["tuningTask","hyperparameters","learningRate"],o),n}function j_e(t){const e={},n=y(t,["baseModel"]);n!=null&&_(e,["baseModel"],n);const r=y(t,["trainingDataset"]);r!=null&&_(e,["tuningTask","trainingData"],U_e(r));const s=y(t,["config"]);return s!=null&&_(e,["config"],O_e(s,e)),e}function H_e(t){const e={},n=y(t,["name"]);n!=null&&_(e,["_url","name"],n);const r=y(t,["config"]);return r!=null&&_(e,["config"],r),e}function Q_e(t,e){const n={},r=y(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=y(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const a=y(t,["filter"]);return e!==void 0&&a!=null&&_(e,["_query","filter"],a),n}function V_e(t){const e={},n=y(t,["config"]);return n!=null&&_(e,["config"],Q_e(n,e)),e}function z_e(t,e){const n={},r=y(t,["gcsUri"]);e!==void 0&&r!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=y(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],s),y(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function G_e(t,e){const n={},r=y(t,["gcsUri"]);r!=null&&_(n,["validationDatasetUri"],r);const s=y(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function q_e(t,e){const n={},r=y(t,["validationDataset"]);e!==void 0&&r!=null&&_(e,["supervisedTuningSpec"],G_e(r,n));const s=y(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&_(e,["tunedModelDisplayName"],s);const a=y(t,["description"]);e!==void 0&&a!=null&&_(e,["description"],a);const i=y(t,["epochCount"]);e!==void 0&&i!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=y(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=y(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=y(t,["adapterSize"]);if(e!==void 0&&c!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),y(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function K_e(t){const e={},n=y(t,["baseModel"]);n!=null&&_(e,["baseModel"],n);const r=y(t,["trainingDataset"]);r!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],z_e(r,e));const s=y(t,["config"]);return s!=null&&_(e,["config"],q_e(s,e)),e}function $_e(t){const e={},n=y(t,["name"]);n!=null&&_(e,["model"],n);const r=y(t,["name"]);return r!=null&&_(e,["endpoint"],r),e}function a9(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["name"]);r!=null&&_(e,["name"],r);const s=y(t,["state"]);s!=null&&_(e,["state"],PQ(s));const a=y(t,["createTime"]);a!=null&&_(e,["createTime"],a);const i=y(t,["tuningTask","startTime"]);i!=null&&_(e,["startTime"],i);const o=y(t,["tuningTask","completeTime"]);o!=null&&_(e,["endTime"],o);const l=y(t,["updateTime"]);l!=null&&_(e,["updateTime"],l);const c=y(t,["description"]);c!=null&&_(e,["description"],c);const A=y(t,["baseModel"]);A!=null&&_(e,["baseModel"],A);const h=y(t,["_self"]);h!=null&&_(e,["tunedModel"],$_e(h));const p=y(t,["distillationSpec"]);p!=null&&_(e,["distillationSpec"],p);const g=y(t,["experiment"]);g!=null&&_(e,["experiment"],g);const w=y(t,["labels"]);w!=null&&_(e,["labels"],w);const x=y(t,["pipelineJob"]);x!=null&&_(e,["pipelineJob"],x);const S=y(t,["satisfiesPzi"]);S!=null&&_(e,["satisfiesPzi"],S);const N=y(t,["satisfiesPzs"]);N!=null&&_(e,["satisfiesPzs"],N);const F=y(t,["serviceAccount"]);F!=null&&_(e,["serviceAccount"],F);const D=y(t,["tunedModelDisplayName"]);return D!=null&&_(e,["tunedModelDisplayName"],D),e}function W_e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>a9(i))),_(e,["tuningJobs"],a)}return e}function Y_e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["name"]);r!=null&&_(e,["name"],r);const s=y(t,["metadata"]);s!=null&&_(e,["metadata"],s);const a=y(t,["done"]);a!=null&&_(e,["done"],a);const i=y(t,["error"]);return i!=null&&_(e,["error"],i),e}function X_e(t){const e={},n=y(t,["checkpointId"]);n!=null&&_(e,["checkpointId"],n);const r=y(t,["epoch"]);r!=null&&_(e,["epoch"],r);const s=y(t,["step"]);s!=null&&_(e,["step"],s);const a=y(t,["endpoint"]);return a!=null&&_(e,["endpoint"],a),e}function J_e(t){const e={},n=y(t,["model"]);n!=null&&_(e,["model"],n);const r=y(t,["endpoint"]);r!=null&&_(e,["endpoint"],r);const s=y(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>X_e(i))),_(e,["checkpoints"],a)}return e}function g5(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["name"]);r!=null&&_(e,["name"],r);const s=y(t,["state"]);s!=null&&_(e,["state"],PQ(s));const a=y(t,["createTime"]);a!=null&&_(e,["createTime"],a);const i=y(t,["startTime"]);i!=null&&_(e,["startTime"],i);const o=y(t,["endTime"]);o!=null&&_(e,["endTime"],o);const l=y(t,["updateTime"]);l!=null&&_(e,["updateTime"],l);const c=y(t,["error"]);c!=null&&_(e,["error"],c);const A=y(t,["description"]);A!=null&&_(e,["description"],A);const h=y(t,["baseModel"]);h!=null&&_(e,["baseModel"],h);const p=y(t,["tunedModel"]);p!=null&&_(e,["tunedModel"],J_e(p));const g=y(t,["supervisedTuningSpec"]);g!=null&&_(e,["supervisedTuningSpec"],g);const w=y(t,["tuningDataStats"]);w!=null&&_(e,["tuningDataStats"],w);const x=y(t,["encryptionSpec"]);x!=null&&_(e,["encryptionSpec"],x);const S=y(t,["partnerModelTuningSpec"]);S!=null&&_(e,["partnerModelTuningSpec"],S);const N=y(t,["distillationSpec"]);N!=null&&_(e,["distillationSpec"],N);const F=y(t,["experiment"]);F!=null&&_(e,["experiment"],F);const D=y(t,["labels"]);D!=null&&_(e,["labels"],D);const R=y(t,["pipelineJob"]);R!=null&&_(e,["pipelineJob"],R);const j=y(t,["satisfiesPzi"]);j!=null&&_(e,["satisfiesPzi"],j);const P=y(t,["satisfiesPzs"]);P!=null&&_(e,["satisfiesPzs"],P);const E=y(t,["serviceAccount"]);E!=null&&_(e,["serviceAccount"],E);const T=y(t,["tunedModelDisplayName"]);return T!=null&&_(e,["tunedModelDisplayName"],T),e}function Z_e(t){const e={},n=y(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=y(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const s=y(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>g5(i))),_(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eCe extends F0{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new s1(v0.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:o5.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=H_e(e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>g5(A))}else{const c=L_e(e);return o=wn("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>a9(A))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const c=V_e(e);return o=wn("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=Z_e(A),p=new p6;return Object.assign(p,h),p})}else{const c=P_e(e);return o=wn("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(A=>A.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:A.headers},p})),i.then(A=>{const h=W_e(A),p=new p6;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=K_e(e);return a=wn("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const A=c;return A.sdkHttpResponse={headers:l.headers},A})),s.then(l=>g5(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=j_e(e);return a=wn("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const A=c;return A.sdkHttpResponse={headers:l.headers},A})),s.then(l=>Y_e(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tCe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nCe=1024*1024*8,rCe=3,sCe=1e3,aCe=2,cS="x-goog-upload-status";async function iCe(t,e,n){var r,s,a;let i=0,o=0,l=new l5(new Response),c="upload";for(i=t.size;o<i;){const h=Math.min(nCe,i-o),p=t.slice(o,o+h);o+h>=i&&(c+=", finalize");let g=0,w=sCe;for(;g<rCe&&(l=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[cS]));)g++,await lCe(w),w=w*aCe;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[cS])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const A=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[cS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return A.file}async function oCe(t){return{size:t.size,type:t.type}}function lCe(t){return new Promise(e=>setTimeout(e,t))}class cCe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iCe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oCe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uCe{create(e,n,r){return new dCe(e,n,r)}}class dCe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H6="x-goog-api-key";class ACe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(H6)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(H6,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fCe="gl-node/";class hCe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=gge(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new ACe(this.apiKey);this.apiClient=new Dbe({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fCe+"web",uploader:new cCe,downloader:new tCe}),this.models=new Zbe(this.apiClient),this.live=new qbe(this.apiClient,s,new uCe),this.batches=new jve(this.apiClient),this.chats=new zxe(this.models,this.apiClient),this.caches=new Hxe(this.apiClient),this.files=new r1e(this.apiClient),this.operations=new r_e(this.apiClient),this.authTokens=new D_e(this.apiClient),this.tunings=new eCe(this.apiClient)}}const a1="acompanamientos",mCe=async()=>{try{const t=mn(zt(Br,a1),Pr("fecha","desc"));return(await Ei(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompaamientos:",t),new Error("No se pudieron cargar los registros de acompaamiento")}},pCe=async t=>{try{return{id:(await la(zt(Br,a1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompaamiento:",e),new Error("No se pudo crear el registro de acompaamiento")}},gCe=async(t,e)=>{try{const n=On(Br,a1,t);await Gx(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acompaamiento:",n,"ID:",t),new Error("No se pudo actualizar el registro de acompaamiento")}},vCe=async t=>{try{const e=On(Br,a1,t);await ao(e)}catch(e){throw console.error("Error al eliminar acompaamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompaamiento")}},xCe=async t=>{try{const e=mn(zt(Br,a1),fs("docente","==",t),Pr("fecha","desc"));return(await Ei(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompaamientos por docente:",e),new Error("No se pudieron cargar los acompaamientos del docente")}},yCe=async()=>{try{const t=On(Br,"configuracion","rubricaAcompanamiento"),e=await zx(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rbrica personalizada:",t),null}},wCe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[s,a]=W.useState(!1),[i,o]=W.useState(!1),[l,c]=W.useState(null),[A,h]=W.useState("list"),[p,g]=W.useState(null),[w,x]=W.useState(!1),[S,N]=W.useState(!1),F=bv,D=W.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[R,j]=W.useState(D),P=W.useCallback(async()=>{a(!0);try{const K=await mCe();e(K),c(null)}catch(K){console.error("Error al cargar acompaamientos desde Firestore",K),c("No se pudieron cargar los registros de acompaamiento desde la nube.")}finally{a(!1)}},[]),E=W.useCallback(async()=>{o(!0);try{const ne=(await bQ()).filter(J=>J.profile===tn.PROFESORADO).map(J=>J.nombreCompleto).sort();r(ne)}catch(K){console.error("Error al cargar profesores desde Firestore",K),c("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);W.useEffect(()=>{P(),E()},[P,E]);const T=K=>{j(ne=>({...ne,[K.target.name]:K.target.value}))},k=(K,ne)=>{j(J=>({...J,rubricaResultados:{...J.rubricaResultados,[K]:ne}}))},z=async()=>{x(!0);const{rubricaResultados:K,observacionesGenerales:ne}=R;let J=`Resultados de la Rbrica:
`;F.forEach(Q=>{Q.criteria.forEach(Z=>{const se=K[Z.name];if(se&&Z.levels[se-1]){const ie=Z.levels[se-1];J+=`- Criterio: "${Z.name}" | Nivel: ${se} (${ie})
`}})}),J+=`
Observaciones Generales del Evaluador:
${ne||"No se proveyeron observaciones adicionales."}`;const ce=`
            Eres un asesor pedaggico experto. Tu tarea es generar una retroalimentacin formal, tcnica y constructiva para un docente, basada en una observacin de clase.
            La retroalimentacin debe ser estructurada y usar un lenguaje pedaggico preciso.

            A continuacin, los datos de la observacin:
            ${J}

            Genera una retroalimentacin que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectndolos con los criterios de la rbrica.
            - ## reas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqu con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prcticas y accionables que el docente pueda implementar.
        `;try{TA("Acompaamiento - Consolidar Feedback");const se=(await new hCe({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ce})).text.replace(/(\*\*|\*)/g,"");j(ie=>({...ie,retroalimentacionConsolidada:se}))}catch(Q){console.error("Error al generar retroalimentacin con IA",Q),alert("No se pudo generar la retroalimentacin. Intntelo de nuevo.")}finally{x(!1)}},M=async()=>{const K=p;if(!K)return;N(!0);const ne=t.find(ve=>ve.id===K);if(!ne){N(!1);return}const J=new En({orientation:"p",unit:"mm",format:"a4"}),ce=20,Q=J.internal.pageSize.getWidth(),Z=J.internal.pageSize.getHeight(),se=Q-ce*2;let ie=ce;const fe=ve=>{ve.setFont("helvetica","bold"),ve.setFontSize(10),ve.setTextColor(100),ve.text("LICEO INDUSTRIAL DE RECOLETA",Q/2,15,{align:"center"})};fe(J),J.setFont("helvetica","bold"),J.setFontSize(18),J.setTextColor(40),J.text("Informe de Acompaamiento Docente",Q/2,ie+10,{align:"center"}),ie+=25,Pc(J,{startY:ie,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},ne.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(ne.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},ne.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},ne.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),ie=J.lastAutoTable.finalY+10;const Se=[],ge=["Dbil","Incipiente","Satisfactorio","Avanzado"];F.forEach(ve=>{Se.push([{content:ve.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),ve.criteria.forEach(me=>{const he=ne.rubricaResultados[me.name],He=he?ge[he-1]:"No evaluado";Se.push([me.name,He])})}),Pc(J,{startY:ie,head:[["Indicador","Nivel de Logro"]],body:Se,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:ve=>{ve.pageNumber>1&&fe(J)}}),ie=J.lastAutoTable.finalY+15;const xe=(ve,me)=>{ie>Z-ce-10&&(J.addPage(),fe(J),ie=ce),J.setFont("helvetica",me.style),J.setFontSize(me.size);const he=J.splitTextToSize(ve,se),He=he.length*(me.size*.352778*1.15);ie+He>Z-ce&&(J.addPage(),fe(J),ie=ce),J.text(he,ce,ie,{align:"left"}),ie+=He+(me.isTitle?5:8)};ne.retroalimentacionConsolidada?ne.retroalimentacionConsolidada.split(/(?=## )/).forEach(me=>{if(me.trim()){const he=me.trim().split(`
`),He=he[0].replace("## ",""),et=he.slice(1).join(`
`).trim();xe(He,{size:14,style:"bold",isTitle:!0}),xe(et,{size:11,style:"normal",isTitle:!1})}}):(xe("Retroalimentacin Consolidada",{size:14,style:"bold",isTitle:!0}),xe("No se ha generado retroalimentacin.",{size:11,style:"normal",isTitle:!1})),J.save(`Acompanamiento_${ne.docente.replace(/\s/g,"_")}_${new Date(ne.fecha).toLocaleDateString("es-CL")}.pdf`),N(!1)},U=async K=>{if(K.preventDefault(),!R.docente||!R.curso||!R.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let ne=p;if(p)await gCe(p,R);else{const J=await pCe(R);g(J.id),j({...R}),ne=J.id}await P(),ne&&alert("Guardado correctamente!")}catch(ne){console.error("Error al guardar acompaamiento:",ne),c("Error al guardar el registro en la nube.")}},G=()=>{j(D),g(null),h("form"),c(null)},q=K=>{j(K),g(K.id),h("form"),c(null)},oe=async K=>{if(window.confirm("Est seguro de que desea eliminar este registro de acompaamiento?"))try{await vCe(K),await P()}catch(ne){console.error("Error al eliminar acompaamiento:",ne),c("No se pudo eliminar el registro en la nube.")}},ee=()=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompaamiento"}),u.jsx("button",{onClick:G,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompaamiento en la nube."}),u.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(K=>u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.docente}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.curso," - ",K.asignatura]}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(K.fecha).toLocaleDateString("es-CL")]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>q(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),u.jsx("button",{onClick:()=>oe(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},K.id))})]}),le=()=>u.jsx("div",{className:"animate-fade-in",children:u.jsxs("form",{onSubmit:U,className:"space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:p?"Editando Acompaamiento":"Nuevo Acompaamiento Docente"}),u.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:" Volver al listado"})]}),l&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),u.jsxs("select",{name:"docente",value:R.docente,onChange:T,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[u.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),n.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),u.jsxs("select",{name:"curso",value:R.curso,onChange:T,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),ai.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsxs("select",{name:"asignatura",value:R.asignatura,onChange:T,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione"}),Uc.map(K=>u.jsx("option",{value:K,children:K},K))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),u.jsx("input",{type:"text",name:"bloques",value:R.bloques,onChange:T,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:F.map(K=>u.jsx(yt.Fragment,{children:K.criteria.map((ne,J)=>u.jsxs("tr",{children:[J===0&&u.jsx("td",{rowSpan:K.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:K.domain}),u.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ne.name}),ne.levels.map((ce,Q)=>{const Z=Q+1,se=R.rubricaResultados[ne.name]===Z;return u.jsx("td",{onClick:()=>k(ne.name,Z),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${se?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ce},Z)})]},ne.name))},K.domain))})]})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),u.jsx("textarea",{name:"observacionesGenerales",value:R.observacionesGenerales,onChange:T,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentacin Consolidada"}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("textarea",{name:"retroalimentacionConsolidada",value:R.retroalimentacionConsolidada,onChange:T,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentacin aqu..."}),u.jsx("button",{type:"button",onClick:z,disabled:w,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:w?"...":"Consolidar"})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[u.jsx("button",{type:"button",onClick:M,disabled:!p||S,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:S?"...":"Exportar PDF"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompaamiento"})]})]})});return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompaamiento Docente"}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:A==="list"?ee():le()})]})},N4="mensajes_internos",bCe="usuarios",i9="mensajes_read_status",o9=t=>{var n,r;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fecha}},_Ce=(t,e)=>{const n=mn(zt(Ut,N4),fs("participants","array-contains",t),Pr("fecha","desc"));return jn(n,s=>{const a=s.docs.map(i=>o9(i));e(a)},s=>{console.error("Error al suscribirse a los mensajes:",s),e([])})},CCe=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:Nn.fromDate(new Date)};await la(zt(Ut,N4),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},ECe=async t=>{try{const e=On(Ut,N4,t);await ao(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},SCe=(t,e)=>{const n=On(Ut,i9,t);return jn(n,s=>{s.exists()?e(s.data()):e({announcements:[],messages:[]})},s=>{console.error("Error al suscribirse al estado de lectura:",s),e({announcements:[],messages:[]})})},TCe=async(t,e)=>{try{const n=On(Ut,i9,t);await Fo(n,{messages:hee(e)},{merge:!0})}catch(n){throw console.error("Error al marcar mensaje como ledo:",n),new Error("No se pudo actualizar el estado de lectura.")}},NCe=t=>{const e=mn(zt(Ut,bCe),Pr("nombreCompleto","asc"));return jn(e,r=>{const s=r.docs.map(a=>o9(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},BCe=({currentUser:t,refreshUnreadCount:e})=>{const[n,r]=W.useState("inbox"),[s,a]=W.useState([]),[i,o]=W.useState([]),[l,c]=W.useState(null),[A,h]=W.useState({announcements:[],messages:[]}),[p,g]=W.useState(!0),w={para:"",asunto:"",cuerpo:""},[x,S]=W.useState(w);W.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const E=_Ce(t.email,z=>{a(z),g(!1)}),T=NCe(o),k=SCe(t.id,z=>{h(z),e()});return()=>{E(),T(),k()}},[t.id,t.email,e]);const N=E=>{c(E),n==="inbox"&&!A.messages.includes(E.id)&&TCe(t.id,E.id).catch(T=>{console.error("Failed to mark message as read:",T)})},F=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const T={de:t.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await CCe(T),S(w),r("sent")}catch(k){console.error("Error sending message:",k),alert("No se pudo enviar el mensaje. Intntelo de nuevo.")}},D=async E=>{if(window.confirm("Est seguro de que desea eliminar este mensaje? Esta accin es irreversible."))try{await ECe(E),c(null)}catch(T){console.error("Error deleting message:",T),alert("No se pudo eliminar el mensaje.")}},R=E=>{S({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),r("compose")},j=W.useMemo(()=>s.filter(E=>E.para===t.email),[s,t.email]),P=W.useMemo(()=>s.filter(E=>E.de===t.email),[s,t.email]);return p?u.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajera..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[u.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[u.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:u.jsx("button",{onClick:()=>{r("compose"),c(null),S(w)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),u.jsxs("nav",{className:"p-2 space-y-1",children:[u.jsx("button",{onClick:()=>{r("inbox"),c(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),u.jsx("button",{onClick:()=>{r("sent"),c(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),n!=="compose"&&u.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(n==="inbox"?j:P).map(E=>{const T=n==="inbox"&&!A.messages.includes(E.id);return u.jsxs("div",{onClick:()=>N(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("p",{className:`font-bold truncate ${T?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:n==="inbox"?E.de:`Para: ${E.para}`}),T&&u.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),u.jsx("p",{className:`truncate text-sm ${T?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),u.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),u.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n==="compose"?u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),u.jsxs("select",{id:"para",value:x.para,onChange:E=>S({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==t.email).map(E=>u.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),u.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>S({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),u.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>S({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?u.jsxs("div",{children:[u.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[u.jsx("strong",{children:"De:"})," ",l.de," ",u.jsx("br",{}),u.jsx("strong",{children:"Para:"})," ",l.para," ",u.jsx("br",{}),u.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),u.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),u.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[n==="inbox"&&u.jsx("button",{onClick:()=>R(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),u.jsx("button",{onClick:()=>D(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):u.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:u.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v5=function(t,e){return v5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},v5(t,e)};function Zu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");v5(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var x5=function(){return x5=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x5.apply(this,arguments)};function Sl(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(A){try{c(r.next(A))}catch(h){i(h)}}function l(A){try{c(r.throw(A))}catch(h){i(h)}}function c(A){A.done?a(A.value):s(A.value).then(o,l)}c((r=r.apply(t,[])).next())})}function Yo(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(A){return l([c,A])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(A){c=[6,A],s=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ry(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||e)}var kA=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),S_=function(t,e){return kA.fromClientRect(t,e.getBoundingClientRect())},kCe=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new kA(0,0,r,s)},T_=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},ei=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},Q6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ICe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Py=0;Py<Q6.length;Py++)ICe[Q6.charCodeAt(Py)]=Py;var V6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",av=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var My=0;My<V6.length;My++)av[V6.charCodeAt(My)]=My;var FCe=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),A=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)a=av[t.charCodeAt(r)],i=av[t.charCodeAt(r+1)],o=av[t.charCodeAt(r+2)],l=av[t.charCodeAt(r+3)],A[s++]=a<<2|i>>4,A[s++]=(i&15)<<4|o>>2,A[s++]=(o&3)<<6|l&63;return c},DCe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},LCe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},t0=5,B4=11,uS=2,RCe=B4-t0,l9=65536>>t0,PCe=1<<t0,dS=PCe-1,MCe=1024>>t0,UCe=l9+MCe,OCe=UCe,jCe=32,HCe=OCe+jCe,QCe=65536>>B4,VCe=1<<RCe,zCe=VCe-1,z6=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},GCe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},qCe=function(t,e){var n=FCe(t),r=Array.isArray(n)?LCe(n):new Uint32Array(n),s=Array.isArray(n)?DCe(n):new Uint16Array(n),a=24,i=z6(s,a/2,r[4]/2),o=r[5]===2?z6(s,(a+r[4])/2):GCe(r,Math.ceil((a+r[4])/4));return new KCe(r[0],r[1],r[2],r[3],i,o)},KCe=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>t0],n=(n<<uS)+(e&dS),this.data[n];if(e<=65535)return n=this.index[l9+(e-55296>>t0)],n=(n<<uS)+(e&dS),this.data[n];if(e<this.highStart)return n=HCe-QCe+(e>>B4),n=this.index[n],n+=e>>t0&zCe,n=this.index[n],n=(n<<uS)+(e&dS),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),G6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$Ce=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uy=0;Uy<G6.length;Uy++)$Ce[G6.charCodeAt(Uy)]=Uy;var WCe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",q6=50,YCe=1,c9=2,u9=3,XCe=4,JCe=5,K6=7,d9=8,$6=9,Ff=10,y5=11,W6=12,w5=13,ZCe=14,iv=15,b5=16,Oy=17,Mg=18,eEe=19,Y6=20,_5=21,Ug=22,AS=23,fm=24,Nc=25,ov=26,lv=27,hm=28,tEe=29,jh=30,nEe=31,jy=32,Hy=33,C5=34,E5=35,S5=36,px=37,T5=38,jw=39,Hw=40,fS=41,A9=42,rEe=43,sEe=[9001,65288],f9="!",Vr="",Qy="",N5=qCe(WCe),cA=[jh,S5],B5=[YCe,c9,u9,JCe],h9=[Ff,d9],X6=[lv,ov],aEe=B5.concat(h9),J6=[T5,jw,Hw,C5,E5],iEe=[iv,w5],oEe=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(a,i){var o=N5.get(a);if(o>q6?(s.push(!0),o-=q6):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return r.push(i),n.push(b5);if(o===XCe||o===y5){if(i===0)return r.push(i),n.push(jh);var l=n[i-1];return aEe.indexOf(l)===-1?(r.push(r[i-1]),n.push(l)):(r.push(i),n.push(jh))}if(r.push(i),o===nEe)return n.push(e==="strict"?_5:px);if(o===A9||o===tEe)return n.push(jh);if(o===rEe)return a>=131072&&a<=196605||a>=196608&&a<=262141?n.push(px):n.push(jh);n.push(o)}),[r,n,s]},hS=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==Ff)break}if(s===Ff)for(var a=n;a>0;){a--;var o=r[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var i=r[l];if(i===e)return!0;if(i!==Ff)break}if(o!==Ff)break}return!1},Z6=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Ff)n--;else return r}return 0},lEe=function(t,e,n,r,s){if(n[r]===0)return Vr;var a=r-1;if(Array.isArray(s)&&s[a]===!0)return Vr;var i=a-1,o=a+1,l=e[a],c=i>=0?e[i]:0,A=e[o];if(l===c9&&A===u9)return Vr;if(B5.indexOf(l)!==-1)return f9;if(B5.indexOf(A)!==-1||h9.indexOf(A)!==-1)return Vr;if(Z6(a,e)===d9)return Qy;if(N5.get(t[a])===y5||(l===jy||l===Hy)&&N5.get(t[o])===y5||l===K6||A===K6||l===$6||[Ff,w5,iv].indexOf(l)===-1&&A===$6||[Oy,Mg,eEe,fm,hm].indexOf(A)!==-1||Z6(a,e)===Ug||hS(AS,Ug,a,e)||hS([Oy,Mg],_5,a,e)||hS(W6,W6,a,e))return Vr;if(l===Ff)return Qy;if(l===AS||A===AS)return Vr;if(A===b5||l===b5)return Qy;if([w5,iv,_5].indexOf(A)!==-1||l===ZCe||c===S5&&iEe.indexOf(l)!==-1||l===hm&&A===S5||A===Y6||cA.indexOf(A)!==-1&&l===Nc||cA.indexOf(l)!==-1&&A===Nc||l===lv&&[px,jy,Hy].indexOf(A)!==-1||[px,jy,Hy].indexOf(l)!==-1&&A===ov||cA.indexOf(l)!==-1&&X6.indexOf(A)!==-1||X6.indexOf(l)!==-1&&cA.indexOf(A)!==-1||[lv,ov].indexOf(l)!==-1&&(A===Nc||[Ug,iv].indexOf(A)!==-1&&e[o+1]===Nc)||[Ug,iv].indexOf(l)!==-1&&A===Nc||l===Nc&&[Nc,hm,fm].indexOf(A)!==-1)return Vr;if([Nc,hm,fm,Oy,Mg].indexOf(A)!==-1)for(var h=a;h>=0;){var p=e[h];if(p===Nc)return Vr;if([hm,fm].indexOf(p)!==-1)h--;else break}if([lv,ov].indexOf(A)!==-1)for(var h=[Oy,Mg].indexOf(l)!==-1?i:a;h>=0;){var p=e[h];if(p===Nc)return Vr;if([hm,fm].indexOf(p)!==-1)h--;else break}if(T5===l&&[T5,jw,C5,E5].indexOf(A)!==-1||[jw,C5].indexOf(l)!==-1&&[jw,Hw].indexOf(A)!==-1||[Hw,E5].indexOf(l)!==-1&&A===Hw||J6.indexOf(l)!==-1&&[Y6,ov].indexOf(A)!==-1||J6.indexOf(A)!==-1&&l===lv||cA.indexOf(l)!==-1&&cA.indexOf(A)!==-1||l===fm&&cA.indexOf(A)!==-1||cA.concat(Nc).indexOf(l)!==-1&&A===Ug&&sEe.indexOf(t[o])===-1||cA.concat(Nc).indexOf(A)!==-1&&l===Mg)return Vr;if(l===fS&&A===fS){for(var g=n[a],w=1;g>0&&(g--,e[g]===fS);)w++;if(w%2!==0)return Vr}return l===jy&&A===Hy?Vr:Qy},cEe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=oEe(t,e.lineBreak),r=n[0],s=n[1],a=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Nc,jh,A9].indexOf(o)!==-1?px:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,i]},uEe=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===f9,this.start=r,this.end=s}return t.prototype.slice=function(){return ei.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),dEe=function(t,e){var n=T_(t),r=cEe(n,e),s=r[0],a=r[1],i=r[2],o=n.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var A=Vr;c<o&&(A=lEe(n,a,s,++c,i))===Vr;);if(A!==Vr||c===o){var h=new uEe(n,A,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},AEe=1,fEe=2,i1=4,eP=8,nb=10,tP=47,Rv=92,hEe=9,mEe=32,Vy=34,Og=61,pEe=35,gEe=36,vEe=37,zy=39,Gy=40,jg=41,xEe=95,tc=45,yEe=33,wEe=60,bEe=62,_Ee=64,CEe=91,EEe=93,SEe=61,TEe=123,qy=63,NEe=125,nP=124,BEe=126,kEe=128,rP=65533,mS=42,zh=43,IEe=44,FEe=58,DEe=59,gx=46,LEe=0,REe=8,PEe=11,MEe=14,UEe=31,OEe=127,xd=-1,m9=48,p9=97,g9=101,jEe=102,HEe=117,QEe=122,v9=65,x9=69,y9=70,VEe=85,zEe=90,el=function(t){return t>=m9&&t<=57},GEe=function(t){return t>=55296&&t<=57343},mm=function(t){return el(t)||t>=v9&&t<=y9||t>=p9&&t<=jEe},qEe=function(t){return t>=p9&&t<=QEe},KEe=function(t){return t>=v9&&t<=zEe},$Ee=function(t){return qEe(t)||KEe(t)},WEe=function(t){return t>=kEe},Ky=function(t){return t===nb||t===hEe||t===mEe},rb=function(t){return $Ee(t)||WEe(t)||t===xEe},sP=function(t){return rb(t)||el(t)||t===tc},YEe=function(t){return t>=LEe&&t<=REe||t===PEe||t>=MEe&&t<=UEe||t===OEe},vf=function(t,e){return t!==Rv?!1:e!==nb},$y=function(t,e,n){return t===tc?rb(e)||vf(e,n):rb(t)?!0:!!(t===Rv&&vf(t,e))},pS=function(t,e,n){return t===zh||t===tc?el(e)?!0:e===gx&&el(n):el(t===gx?e:t)},XEe=function(t){var e=0,n=1;(t[e]===zh||t[e]===tc)&&(t[e]===tc&&(n=-1),e++);for(var r=[];el(t[e]);)r.push(t[e++]);var s=r.length?parseInt(ei.apply(void 0,r),10):0;t[e]===gx&&e++;for(var a=[];el(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(ei.apply(void 0,a),10):0;(t[e]===x9||t[e]===g9)&&e++;var l=1;(t[e]===zh||t[e]===tc)&&(t[e]===tc&&(l=-1),e++);for(var c=[];el(t[e]);)c.push(t[e++]);var A=c.length?parseInt(ei.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*A)},JEe={type:2},ZEe={type:3},eSe={type:4},tSe={type:13},nSe={type:8},rSe={type:21},sSe={type:9},aSe={type:10},iSe={type:11},oSe={type:12},lSe={type:14},Wy={type:23},cSe={type:1},uSe={type:25},dSe={type:24},ASe={type:26},fSe={type:27},hSe={type:28},mSe={type:29},pSe={type:31},k5={type:32},w9=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(T_(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==k5;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Vy:return this.consumeStringToken(Vy);case pEe:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(sP(n)||vf(r,s)){var a=$y(n,r,s)?fEe:AEe,i=this.consumeName();return{type:5,value:i,flags:a}}break;case gEe:if(this.peekCodePoint(0)===Og)return this.consumeCodePoint(),tSe;break;case zy:return this.consumeStringToken(zy);case Gy:return JEe;case jg:return ZEe;case mS:if(this.peekCodePoint(0)===Og)return this.consumeCodePoint(),lSe;break;case zh:if(pS(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case IEe:return eSe;case tc:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(pS(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if($y(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===tc&&c===bEe)return this.consumeCodePoint(),this.consumeCodePoint(),dSe;break;case gx:if(pS(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case tP:if(this.peekCodePoint(0)===mS)for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(A===mS&&(A=this.consumeCodePoint(),A===tP))return this.consumeToken();if(A===xd)return this.consumeToken()}break;case FEe:return ASe;case DEe:return fSe;case wEe:if(this.peekCodePoint(0)===yEe&&this.peekCodePoint(1)===tc&&this.peekCodePoint(2)===tc)return this.consumeCodePoint(),this.consumeCodePoint(),uSe;break;case _Ee:var h=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if($y(h,p,g)){var i=this.consumeName();return{type:7,value:i}}break;case CEe:return hSe;case Rv:if(vf(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case EEe:return mSe;case SEe:if(this.peekCodePoint(0)===Og)return this.consumeCodePoint(),nSe;break;case TEe:return iSe;case NEe:return oSe;case HEe:case VEe:var w=this.peekCodePoint(0),x=this.peekCodePoint(1);return w===zh&&(mm(x)||x===qy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case nP:if(this.peekCodePoint(0)===Og)return this.consumeCodePoint(),sSe;if(this.peekCodePoint(0)===nP)return this.consumeCodePoint(),rSe;break;case BEe:if(this.peekCodePoint(0)===Og)return this.consumeCodePoint(),aSe;break;case xd:return k5}return Ky(e)?(this.consumeWhiteSpace(),pSe):el(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):rb(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ei(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();mm(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===qy&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(ei.apply(void 0,e.map(function(l){return l===qy?m9:l})),16),a=parseInt(ei.apply(void 0,e.map(function(l){return l===qy?y9:l})),16);return{type:30,start:s,end:a}}var i=parseInt(ei.apply(void 0,e),16);if(this.peekCodePoint(0)===tc&&mm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];mm(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var a=parseInt(ei.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Gy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Gy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===xd)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===zy||n===Vy){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===xd||this.peekCodePoint(0)===jg)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Wy)}for(;;){var s=this.consumeCodePoint();if(s===xd||s===jg)return{type:22,value:ei.apply(void 0,e)};if(Ky(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===xd||this.peekCodePoint(0)===jg?(this.consumeCodePoint(),{type:22,value:ei.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Wy);if(s===Vy||s===zy||s===Gy||YEe(s))return this.consumeBadUrlRemnants(),Wy;if(s===Rv)if(vf(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Wy;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Ky(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===jg||e===xd)return;vf(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=ei.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===xd||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===nb)return this._value.splice(0,r),cSe;if(s===Rv){var a=this._value[r+1];a!==xd&&a!==void 0&&(a===nb?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):vf(s,a)&&(n+=this.consumeStringSlice(r),n+=ei(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=i1,r=this.peekCodePoint(0);for((r===zh||r===tc)&&e.push(this.consumeCodePoint());el(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===gx&&el(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=eP;el(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((r===x9||r===g9)&&((s===zh||s===tc)&&el(a)||el(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=eP;el(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[XEe(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if($y(s,a,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===vEe?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(mm(e)){for(var n=ei(e);mm(this.peekCodePoint(0))&&n.length<6;)n+=ei(this.consumeCodePoint());Ky(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||GEe(r)||r>1114111?rP:r}return e===xd?rP:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(sP(n))e+=ei(n);else if(vf(n,this.peekCodePoint(0)))e+=ei(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),b9=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new w9;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||vSe(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?k5:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),o1=function(t){return t.type===15},qp=function(t){return t.type===17},Rs=function(t){return t.type===20},gSe=function(t){return t.type===0},I5=function(t,e){return Rs(t)&&t.value===e},_9=function(t){return t.type!==31},Cp=function(t){return t.type!==31&&t.type!==4},qd=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},vSe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},oh=function(t){return t.type===17||t.type===15},wi=function(t){return t.type===16||oh(t)},C9=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ko={type:17,number:0,flags:i1},k4={type:16,number:50,flags:i1},Df={type:16,number:100,flags:i1},cv=function(t,e,n){var r=t[0],s=t[1];return[Ws(r,e),Ws(typeof s<"u"?s:r,n)]},Ws=function(t,e){if(t.type===16)return t.number/100*e;if(o1(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},E9="deg",S9="grad",T9="rad",N9="turn",N_={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case E9:return Math.PI*e.number/180;case S9:return Math.PI/200*e.number;case T9:return e.number;case N9:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},B9=function(t){return t.type===15&&(t.unit===E9||t.unit===S9||t.unit===T9||t.unit===N9)},k9=function(t){var e=t.filter(Rs).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ko,ko];case"to top":case"bottom":return pu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ko,Df];case"to right":case"left":return pu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Df,Df];case"to bottom":case"top":return pu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Df,ko];case"to left":case"right":return pu(270)}return 0},pu=function(t){return Math.PI*t/180},Qf={name:"color",parse:function(t,e){if(e.type===18){var n=xSe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return Lf(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return Lf(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return Lf(parseInt(r,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return Lf(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=wA[e.value.toUpperCase()];if(typeof o<"u")return o}return wA.TRANSPARENT}},Vf=function(t){return(255&t)===0},Ji=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},Lf=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},aP=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},iP=function(t,e){var n=e.filter(Cp);if(n.length===3){var r=n.map(aP),s=r[0],a=r[1],i=r[2];return Lf(s,a,i,1)}if(n.length===4){var o=n.map(aP),s=o[0],a=o[1],i=o[2],l=o[3];return Lf(s,a,i,l)}return 0};function gS(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var oP=function(t,e){var n=e.filter(Cp),r=n[0],s=n[1],a=n[2],i=n[3],o=(r.type===17?pu(r.number):N_.parse(t,r))/(Math.PI*2),l=wi(s)?s.number/100:0,c=wi(a)?a.number/100:0,A=typeof i<"u"&&wi(i)?Ws(i,1):1;if(l===0)return Lf(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,p=c*2-h,g=gS(p,h,o+1/3),w=gS(p,h,o),x=gS(p,h,o-1/3);return Lf(g*255,w*255,x*255,A)},xSe={hsl:oP,hsla:oP,rgb:iP,rgba:iP},Pv=function(t,e){return Qf.parse(t,b9.create(e).parseComponentValue())},wA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ySe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Rs(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wSe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B_=function(t,e){var n=Qf.parse(t,e[0]),r=e[1];return r&&wi(r)?{color:n,stop:r}:{color:n,stop:null}},lP=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=ko),r.stop===null&&(r.stop=Df);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=Ws(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var A=s[i];if(A===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,p=s[c-1],g=(A-p)/(h+1),w=1;w<=h;w++)s[c+w-1]=g*w;c=null}}return t.map(function(x,S){var N=x.color;return{color:N,stop:Math.max(Math.min(1,s[S]/e),0)}})},bSe=function(t,e,n){var r=e/2,s=n/2,a=Ws(t[0],e)-r,i=s-Ws(t[1],n);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},_Se=function(t,e,n){var r=typeof t=="number"?t:bSe(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),a=e/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,a-c,a+c,i-l,i+l]},ju=function(t,e){return Math.sqrt(t*t+e*e)},cP=function(t,e,n,r,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],c=o[1],A=ju(n-l,r-c);return(s?A<i.optimumDistance:A>i.optimumDistance)?{optimumCorner:o,optimumDistance:A}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},CSe=function(t,e,n,r,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)a=i=Math.min(ju(e,n),ju(e,n-s),ju(e-r,n),ju(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=cP(r,s,e,n,!0),c=l[0],A=l[1];a=ju(c-e,(A-n)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)a=i=Math.max(ju(e,n),ju(e,n-s),ju(e-r,n),ju(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=cP(r,s,e,n,!1),c=h[0],A=h[1];a=ju(c-e,(A-n)/o),i=o*a}break}return Array.isArray(t.size)&&(a=Ws(t.size[0],r),i=t.size.length===2?Ws(t.size[1],s):a),[a,i]},ESe=function(t,e){var n=pu(180),r=[];return qd(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){n=k9(s);return}else if(B9(i)){n=N_.parse(t,i);return}}var o=B_(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Yy=function(t,e){var n=pu(180),r=[];return qd(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=k9(s);return}else if(B9(i)){n=(N_.parse(t,i)+pu(270))%pu(360);return}}var o=B_(t,s);r.push(o)}),{angle:n,stops:r,type:1}},SSe=function(t,e){var n=pu(180),r=[],s=1,a=0,i=3,o=[];return qd(e).forEach(function(l,c){var A=l[0];if(c===0){if(Rs(A)&&A.value==="linear"){s=1;return}else if(Rs(A)&&A.value==="radial"){s=2;return}}if(A.type===18){if(A.name==="from"){var h=Qf.parse(t,A.values[0]);r.push({stop:ko,color:h})}else if(A.name==="to"){var h=Qf.parse(t,A.values[0]);r.push({stop:Df,color:h})}else if(A.name==="color-stop"){var p=A.values.filter(Cp);if(p.length===2){var h=Qf.parse(t,p[1]),g=p[0];qp(g)&&r.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),s===1?{angle:(n+pu(180))%pu(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}},I9="closest-side",F9="farthest-side",D9="closest-corner",L9="farthest-corner",R9="circle",P9="ellipse",M9="cover",U9="contain",TSe=function(t,e){var n=0,r=3,s=[],a=[];return qd(e).forEach(function(i,o){var l=!0;if(o===0){var c=!1;l=i.reduce(function(h,p){if(c)if(Rs(p))switch(p.value){case"center":return a.push(k4),h;case"top":case"left":return a.push(ko),h;case"right":case"bottom":return a.push(Df),h}else(wi(p)||oh(p))&&a.push(p);else if(Rs(p))switch(p.value){case R9:return n=0,!1;case P9:return n=1,!1;case"at":return c=!0,!1;case I9:return r=0,!1;case M9:case F9:return r=1,!1;case U9:case D9:return r=2,!1;case L9:return r=3,!1}else if(oh(p)||wi(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return h},l)}if(l){var A=B_(t,i);s.push(A)}}),{size:r,shape:n,stops:s,position:a,type:2}},Xy=function(t,e){var n=0,r=3,s=[],a=[];return qd(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(A,h){if(Rs(h))switch(h.value){case"center":return a.push(k4),!1;case"top":case"left":return a.push(ko),!1;case"right":case"bottom":return a.push(Df),!1}else if(wi(h)||oh(h))return a.push(h),!1;return A},l):o===1&&(l=i.reduce(function(A,h){if(Rs(h))switch(h.value){case R9:return n=0,!1;case P9:return n=1,!1;case U9:case I9:return r=0,!1;case F9:return r=1,!1;case D9:return r=2,!1;case M9:case L9:return r=3,!1}else if(oh(h)||wi(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return A},l)),l){var c=B_(t,i);s.push(c)}}),{size:r,shape:n,stops:s,position:a,type:2}},NSe=function(t){return t.type===1},BSe=function(t){return t.type===2},I4={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=O9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function kSe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!O9[t.name])}var O9={"linear-gradient":ESe,"-moz-linear-gradient":Yy,"-ms-linear-gradient":Yy,"-o-linear-gradient":Yy,"-webkit-linear-gradient":Yy,"radial-gradient":TSe,"-moz-radial-gradient":Xy,"-ms-radial-gradient":Xy,"-o-radial-gradient":Xy,"-webkit-radial-gradient":Xy,"-webkit-gradient":SSe},ISe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Cp(r)&&kSe(r)}).map(function(r){return I4.parse(t,r)})}},FSe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Rs(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},DSe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return qd(e).map(function(n){return n.filter(wi)}).map(C9)}},LSe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return qd(e).map(function(n){return n.filter(Rs).map(function(r){return r.value}).join(" ")}).map(RSe)}},RSe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ap;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ap||(ap={}));var PSe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return qd(e).map(function(n){return n.filter(MSe)})}},MSe=function(t){return Rs(t)||wi(t)},k_=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},USe=k_("top"),OSe=k_("right"),jSe=k_("bottom"),HSe=k_("left"),I_=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return C9(n.filter(wi))}}},QSe=I_("top-left"),VSe=I_("top-right"),zSe=I_("bottom-right"),GSe=I_("bottom-left"),F_=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},qSe=F_("top"),KSe=F_("right"),$Se=F_("bottom"),WSe=F_("left"),D_=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return o1(n)?n.number:0}}},YSe=D_("top"),XSe=D_("right"),JSe=D_("bottom"),ZSe=D_("left"),eTe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tTe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},nTe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Rs).reduce(function(n,r){return n|rTe(r.value)},0)}},rTe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},sTe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},aTe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},sb;(function(t){t.NORMAL="normal",t.STRICT="strict"})(sb||(sb={}));var iTe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return sb.STRICT;case"normal":default:return sb.NORMAL}}},oTe={name:"line-height",initialValue:"normal",prefix:!1,type:4},uP=function(t,e){return Rs(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:wi(t)?Ws(t,e):e},lTe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:I4.parse(t,e)}},cTe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},F5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},L_=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},uTe=L_("top"),dTe=L_("right"),ATe=L_("bottom"),fTe=L_("left"),hTe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Rs).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},mTe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},R_=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},pTe=R_("top"),gTe=R_("right"),vTe=R_("bottom"),xTe=R_("left"),yTe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},wTe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},bTe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&I5(e[0],"none")?[]:qd(e).map(function(n){for(var r={color:wA.TRANSPARENT,offsetX:ko,offsetY:ko,blur:ko},s=0,a=0;a<n.length;a++){var i=n[a];oh(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=Qf.parse(t,i)}return r})}},_Te={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},CTe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=TTe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},ETe=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},STe=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,a,i,o]:null},TTe={matrix:ETe,matrix3d:STe},dP={type:16,number:50,flags:i1},NTe=[dP,dP],BTe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(wi);return n.length!==2?NTe:[n[0],n[1]]}},kTe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Mv;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Mv||(Mv={}));var ITe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Mv.BREAK_ALL;case"keep-all":return Mv.KEEP_ALL;case"normal":default:return Mv.NORMAL}}},FTe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(qp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},j9={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},DTe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return qp(e)?e.number:1}},LTe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},RTe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Rs).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},PTe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},MTe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},UTe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(qp(e))return e.number;if(Rs(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},OTe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Rs).map(function(n){return n.value})}},jTe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Pi=function(t,e){return(t&e)!==0},HTe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},QTe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(_9),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&qp(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},VTe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(_9),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(Rs(a)&&a.value!=="none"){var o=i&&qp(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},zTe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(o1).map(function(n){return j9.parse(t,n)})}},GTe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(gSe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},AP=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},qTe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&I5(e[0],"none")?[]:qd(e).map(function(n){for(var r={color:255,offsetX:ko,offsetY:ko,blur:ko,spread:ko,inset:!1},s=0,a=0;a<n.length;a++){var i=n[a];I5(i,"inset")?r.inset=!0:oh(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=Qf.parse(t,i)}return r})}},KTe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Rs).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},$Te={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},WTe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return o1(e)?e.number:0}},YTe=function(){function t(e,n){var r,s;this.animationDuration=fn(e,zTe,n.animationDuration),this.backgroundClip=fn(e,ySe,n.backgroundClip),this.backgroundColor=fn(e,wSe,n.backgroundColor),this.backgroundImage=fn(e,ISe,n.backgroundImage),this.backgroundOrigin=fn(e,FSe,n.backgroundOrigin),this.backgroundPosition=fn(e,DSe,n.backgroundPosition),this.backgroundRepeat=fn(e,LSe,n.backgroundRepeat),this.backgroundSize=fn(e,PSe,n.backgroundSize),this.borderTopColor=fn(e,USe,n.borderTopColor),this.borderRightColor=fn(e,OSe,n.borderRightColor),this.borderBottomColor=fn(e,jSe,n.borderBottomColor),this.borderLeftColor=fn(e,HSe,n.borderLeftColor),this.borderTopLeftRadius=fn(e,QSe,n.borderTopLeftRadius),this.borderTopRightRadius=fn(e,VSe,n.borderTopRightRadius),this.borderBottomRightRadius=fn(e,zSe,n.borderBottomRightRadius),this.borderBottomLeftRadius=fn(e,GSe,n.borderBottomLeftRadius),this.borderTopStyle=fn(e,qSe,n.borderTopStyle),this.borderRightStyle=fn(e,KSe,n.borderRightStyle),this.borderBottomStyle=fn(e,$Se,n.borderBottomStyle),this.borderLeftStyle=fn(e,WSe,n.borderLeftStyle),this.borderTopWidth=fn(e,YSe,n.borderTopWidth),this.borderRightWidth=fn(e,XSe,n.borderRightWidth),this.borderBottomWidth=fn(e,JSe,n.borderBottomWidth),this.borderLeftWidth=fn(e,ZSe,n.borderLeftWidth),this.boxShadow=fn(e,qTe,n.boxShadow),this.color=fn(e,eTe,n.color),this.direction=fn(e,tTe,n.direction),this.display=fn(e,nTe,n.display),this.float=fn(e,sTe,n.cssFloat),this.fontFamily=fn(e,PTe,n.fontFamily),this.fontSize=fn(e,MTe,n.fontSize),this.fontStyle=fn(e,jTe,n.fontStyle),this.fontVariant=fn(e,OTe,n.fontVariant),this.fontWeight=fn(e,UTe,n.fontWeight),this.letterSpacing=fn(e,aTe,n.letterSpacing),this.lineBreak=fn(e,iTe,n.lineBreak),this.lineHeight=fn(e,oTe,n.lineHeight),this.listStyleImage=fn(e,lTe,n.listStyleImage),this.listStylePosition=fn(e,cTe,n.listStylePosition),this.listStyleType=fn(e,F5,n.listStyleType),this.marginTop=fn(e,uTe,n.marginTop),this.marginRight=fn(e,dTe,n.marginRight),this.marginBottom=fn(e,ATe,n.marginBottom),this.marginLeft=fn(e,fTe,n.marginLeft),this.opacity=fn(e,DTe,n.opacity);var a=fn(e,hTe,n.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=fn(e,mTe,n.overflowWrap),this.paddingTop=fn(e,pTe,n.paddingTop),this.paddingRight=fn(e,gTe,n.paddingRight),this.paddingBottom=fn(e,vTe,n.paddingBottom),this.paddingLeft=fn(e,xTe,n.paddingLeft),this.paintOrder=fn(e,KTe,n.paintOrder),this.position=fn(e,wTe,n.position),this.textAlign=fn(e,yTe,n.textAlign),this.textDecorationColor=fn(e,LTe,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=fn(e,RTe,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=fn(e,bTe,n.textShadow),this.textTransform=fn(e,_Te,n.textTransform),this.transform=fn(e,CTe,n.transform),this.transformOrigin=fn(e,BTe,n.transformOrigin),this.visibility=fn(e,kTe,n.visibility),this.webkitTextStrokeColor=fn(e,$Te,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=fn(e,WTe,n.webkitTextStrokeWidth),this.wordBreak=fn(e,ITe,n.wordBreak),this.zIndex=fn(e,FTe,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Vf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Pi(this.display,4)||Pi(this.display,33554432)||Pi(this.display,268435456)||Pi(this.display,536870912)||Pi(this.display,67108864)||Pi(this.display,134217728)},t}(),XTe=function(){function t(e,n){this.content=fn(e,HTe,n.content),this.quotes=fn(e,GTe,n.quotes)}return t}(),fP=function(){function t(e,n){this.counterIncrement=fn(e,QTe,n.counterIncrement),this.counterReset=fn(e,VTe,n.counterReset)}return t}(),fn=function(t,e,n){var r=new w9,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var a=new b9(r.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,Rs(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return N_.parse(t,a.parseComponentValue());case"color":return Qf.parse(t,a.parseComponentValue());case"image":return I4.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return oh(o)?o:ko;case"length-percentage":var l=a.parseComponentValue();return wi(l)?l:ko;case"time":return j9.parse(t,a.parseComponentValue())}break}},JTe="data-html2canvas-debug",ZTe=function(t){var e=t.getAttribute(JTe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},D5=function(t,e){var n=ZTe(t);return n===1||e===n},Kd=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,D5(n,3))debugger;this.styles=new YTe(e,window.getComputedStyle(n,null)),P5(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=S_(this.context,n),D5(n,4)&&(this.flags|=16)}return t}(),e5e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",hP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jy=0;Jy<hP.length;Jy++)uv[hP.charCodeAt(Jy)]=Jy;var t5e=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),A=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)a=uv[t.charCodeAt(r)],i=uv[t.charCodeAt(r+1)],o=uv[t.charCodeAt(r+2)],l=uv[t.charCodeAt(r+3)],A[s++]=a<<2|i>>4,A[s++]=(i&15)<<4|o>>2,A[s++]=(o&3)<<6|l&63;return c},n5e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},r5e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},n0=5,F4=11,vS=2,s5e=F4-n0,H9=65536>>n0,a5e=1<<n0,xS=a5e-1,i5e=1024>>n0,o5e=H9+i5e,l5e=o5e,c5e=32,u5e=l5e+c5e,d5e=65536>>F4,A5e=1<<s5e,f5e=A5e-1,mP=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},h5e=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},m5e=function(t,e){var n=t5e(t),r=Array.isArray(n)?r5e(n):new Uint32Array(n),s=Array.isArray(n)?n5e(n):new Uint16Array(n),a=24,i=mP(s,a/2,r[4]/2),o=r[5]===2?mP(s,(a+r[4])/2):h5e(r,Math.ceil((a+r[4])/4));return new p5e(r[0],r[1],r[2],r[3],i,o)},p5e=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>n0],n=(n<<vS)+(e&xS),this.data[n];if(e<=65535)return n=this.index[H9+(e-55296>>n0)],n=(n<<vS)+(e&xS),this.data[n];if(e<this.highStart)return n=u5e-d5e+(e>>F4),n=this.index[n],n+=e>>n0&f5e,n=this.index[n],n=(n<<vS)+(e&xS),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),pP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g5e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zy=0;Zy<pP.length;Zy++)g5e[pP.charCodeAt(Zy)]=Zy;var v5e=1,yS=2,wS=3,gP=4,vP=5,x5e=7,xP=8,bS=9,_S=10,yP=11,wP=12,bP=13,_P=14,CS=15,y5e=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},w5e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},b5e=m5e(e5e),cu="",ES="",_5e=function(t){return b5e.get(t)},C5e=function(t,e,n){var r=n-2,s=e[r],a=e[n-1],i=e[n];if(a===yS&&i===wS)return cu;if(a===yS||a===wS||a===gP||i===yS||i===wS||i===gP)return ES;if(a===xP&&[xP,bS,yP,wP].indexOf(i)!==-1||(a===yP||a===bS)&&(i===bS||i===_S)||(a===wP||a===_S)&&i===_S||i===bP||i===vP||i===x5e||a===v5e)return cu;if(a===bP&&i===_P){for(;s===vP;)s=e[--r];if(s===_P)return cu}if(a===CS&&i===CS){for(var o=0;s===CS;)o++,s=e[--r];if(o%2===0)return cu}return ES},E5e=function(t){var e=y5e(t),n=e.length,r=0,s=0,a=e.map(_5e);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=cu;r<n&&(i=C5e(e,a,++r))===cu;);if(i!==cu||r===n){var o=w5e.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},S5e=function(t){for(var e=E5e(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},T5e=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(r),a===e)return!0}}return!1},N5e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=T_(r.data).map(function(l){return ei(l)}),a=0,i={},o=s.every(function(l,c){n.setStart(r,a),n.setEnd(r,a+l.length);var A=n.getBoundingClientRect();a+=l.length;var h=A.x>i.x||A.y>i.y;return i=A,c===0?!0:h});return t.body.removeChild(e),o},B5e=function(){return typeof new Image().crossOrigin<"u"},k5e=function(){return typeof new XMLHttpRequest().responseType=="string"},I5e=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},CP=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},F5e=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=e.toDataURL();s.src=a;var i=L5(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),EP(i).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+a+")",c.style.height=n+"px",CP(l)?EP(L5(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),CP(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},L5=function(t,e,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},EP=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Eo={get SUPPORT_RANGE_BOUNDS(){var t=T5e(document);return Object.defineProperty(Eo,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Eo.SUPPORT_RANGE_BOUNDS&&N5e(document);return Object.defineProperty(Eo,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=I5e(document);return Object.defineProperty(Eo,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?F5e(document):Promise.resolve(!1);return Object.defineProperty(Eo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=B5e();return Object.defineProperty(Eo,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=k5e();return Object.defineProperty(Eo,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Eo,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Eo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Uv=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),D5e=function(t,e,n,r){var s=P5e(e,n),a=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(Eo.SUPPORT_RANGE_BOUNDS){var l=SP(r,i,o.length).getClientRects();if(l.length>1){var c=D4(o),A=0;c.forEach(function(p){a.push(new Uv(p,kA.fromDOMRectList(t,SP(r,A+i,p.length).getClientRects()))),A+=p.length})}else a.push(new Uv(o,kA.fromDOMRectList(t,l)))}else{var h=r.splitText(o.length);a.push(new Uv(o,L5e(t,r))),r=h}else Eo.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),a},L5e=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var a=S_(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return kA.EMPTY},SP=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},D4=function(t){if(Eo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return S5e(t)},R5e=function(t,e){if(Eo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return U5e(t,e)},P5e=function(t,e){return e.letterSpacing!==0?D4(t):R5e(t,e)},M5e=[32,160,4961,65792,65793,4153,4241],U5e=function(t,e){for(var n=dEe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,a=function(){if(s.value){var i=s.value.slice(),o=T_(i),l="";o.forEach(function(c){M5e.indexOf(c)===-1?l+=ei(c):(l.length&&r.push(l),r.push(ei(c)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)a();return r},O5e=function(){function t(e,n,r){this.text=j5e(n.data,r.textTransform),this.textBounds=D5e(e,this.text,r,n)}return t}(),j5e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(H5e,Q5e);case 2:return t.toUpperCase();default:return t}},H5e=/(^|\s|:|-|\(|\))([a-z])/g,Q5e=function(t,e,n){return t.length>0?e+n.toUpperCase():t},Q9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Kd),V9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(Kd),z9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=new XMLSerializer,i=S_(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Kd),G9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Kd),R5=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(Kd),V5e=[{type:15,flags:0,unit:"px",number:3}],z5e=[{type:16,flags:0,number:50}],G5e=function(t){return t.width>t.height?new kA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new kA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},q5e=function(t){var e=t.type===K5e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},ab="checkbox",ib="radio",K5e="password",TP=707406591,L4=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=q5e(r),(s.type===ab||s.type===ib)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=G5e(s.bounds)),s.type){case ab:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=V5e;break;case ib:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=z5e;break}return s}return e}(Kd),q9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=r.options[r.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(Kd),K9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Kd),$9=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=Y9(n,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?Pv(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):wA.TRANSPARENT,i=r.contentWindow.document.body?Pv(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):wA.TRANSPARENT;s.backgroundColor=Vf(a)?Vf(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(Kd),$5e=["OL","UL","MENU"],Qw=function(t,e,n,r){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,X9(s)&&s.data.trim().length>0)n.textNodes.push(new O5e(t,s,n.styles));else if(Om(s))if(tV(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Qw(t,o,n,r)});else{var i=W9(t,s);i.styles.isVisible()&&(W5e(s,i,r)?i.flags|=4:Y5e(i.styles)&&(i.flags|=2),$5e.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?Qw(t,s.shadowRoot,i,r):!ob(s)&&!J9(s)&&!lb(s)&&Qw(t,s,i,r))}},W9=function(t,e){return M5(e)?new Q9(t,e):Z9(e)?new V9(t,e):J9(e)?new z9(t,e):X5e(e)?new G9(t,e):J5e(e)?new R5(t,e):Z5e(e)?new L4(t,e):lb(e)?new q9(t,e):ob(e)?new K9(t,e):eV(e)?new $9(t,e):new Kd(t,e)},Y9=function(t,e){var n=W9(t,e);return n.flags|=4,Qw(t,e,n,n),n},W5e=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||R4(t)&&n.styles.isTransparent()},Y5e=function(t){return t.isPositioned()||t.isFloating()},X9=function(t){return t.nodeType===Node.TEXT_NODE},Om=function(t){return t.nodeType===Node.ELEMENT_NODE},P5=function(t){return Om(t)&&typeof t.style<"u"&&!Vw(t)},Vw=function(t){return typeof t.className=="object"},X5e=function(t){return t.tagName==="LI"},J5e=function(t){return t.tagName==="OL"},Z5e=function(t){return t.tagName==="INPUT"},eNe=function(t){return t.tagName==="HTML"},J9=function(t){return t.tagName==="svg"},R4=function(t){return t.tagName==="BODY"},Z9=function(t){return t.tagName==="CANVAS"},NP=function(t){return t.tagName==="VIDEO"},M5=function(t){return t.tagName==="IMG"},eV=function(t){return t.tagName==="IFRAME"},BP=function(t){return t.tagName==="STYLE"},tNe=function(t){return t.tagName==="SCRIPT"},ob=function(t){return t.tagName==="TEXTAREA"},lb=function(t){return t.tagName==="SELECT"},tV=function(t){return t.tagName==="SLOT"},kP=function(t){return t.tagName.indexOf("-")>0},nNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,a=!0;r!==null&&r.forEach(function(o){var l=n.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=n.counters[o.counter];i.push(o.counter),l||(l=n.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),IP={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},FP={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},rNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pm=function(t,e,n,r,s,a){return t<e||t>n?vx(t,s,a.length>0):r.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=r.values[l];return i},"")+a},nV=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Ja=function(t,e,n,r,s){var a=n-e+1;return(t<0?"-":"")+(nV(Math.abs(t),a,r,function(i){return ei(Math.floor(i%a)+e)})+s)},Dh=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return nV(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Dm=1,mf=2,pf=4,dv=8,uA=function(t,e,n,r,s,a){if(t<-9999||t>9999)return vx(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;c===0&&Pi(a,Dm)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&Pi(a,mf)||c===1&&l===1&&Pi(a,pf)&&t>100||c===1&&l>1&&Pi(a,dv)?o=e[c]+(l>0?n[l-1]:"")+o:c===1&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},DP="",LP="",RP="",SS="",vx=function(t,e,n){var r=n?". ":"",s=n?"":"",a=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Ja(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Dh(t,"",s);case 6:return pm(t,1,3999,IP,3,r).toLowerCase();case 7:return pm(t,1,3999,IP,3,r);case 8:return Ja(t,945,969,!1,r);case 9:return Ja(t,97,122,!1,r);case 10:return Ja(t,65,90,!1,r);case 11:return Ja(t,1632,1641,!0,r);case 12:case 49:return pm(t,1,9999,FP,3,r);case 35:return pm(t,1,9999,FP,3,r).toLowerCase();case 13:return Ja(t,2534,2543,!0,r);case 14:case 30:return Ja(t,6112,6121,!0,r);case 15:return Dh(t,"",s);case 16:return Dh(t,"",s);case 17:case 48:return uA(t,"",DP,"",s,mf|pf|dv);case 47:return uA(t,"",LP,"",s,Dm|mf|pf|dv);case 42:return uA(t,"",DP,"",s,mf|pf|dv);case 41:return uA(t,"",LP,"",s,Dm|mf|pf|dv);case 26:return uA(t,"","",RP,s,0);case 25:return uA(t,"","",RP,s,Dm|mf|pf);case 31:return uA(t,"","",SS,a,Dm|mf|pf);case 33:return uA(t,"","",SS,a,0);case 32:return uA(t,"","",SS,a,Dm|mf|pf);case 18:return Ja(t,2406,2415,!0,r);case 20:return pm(t,1,19999,sNe,3,r);case 21:return Ja(t,2790,2799,!0,r);case 22:return Ja(t,2662,2671,!0,r);case 22:return pm(t,1,10999,rNe,3,r);case 23:return Dh(t,"");case 24:return Dh(t,"");case 27:return Ja(t,3302,3311,!0,r);case 28:return Dh(t,"",s);case 29:return Dh(t,"",s);case 34:return Ja(t,3792,3801,!0,r);case 37:return Ja(t,6160,6169,!0,r);case 38:return Ja(t,4160,4169,!0,r);case 39:return Ja(t,2918,2927,!0,r);case 40:return Ja(t,1776,1785,!0,r);case 43:return Ja(t,3046,3055,!0,r);case 44:return Ja(t,3174,3183,!0,r);case 45:return Ja(t,3664,3673,!0,r);case 46:return Ja(t,3872,3881,!0,r);case 3:default:return Ja(t,48,57,!0,r)}},rV="data-html2canvas-ignore",PP=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new nNe,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=aNe(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,c=lNe(s).then(function(){return Sl(r,void 0,void 0,function(){var A,h;return Yo(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(ANe),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),A=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,oNe(l)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof A=="function"?[2,Promise.resolve().then(function(){return A(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(uNe(document.doctype)+"<html></html>"),dNe(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(D5(e,2))debugger;if(Z9(e))return this.createCanvasClone(e);if(NP(e))return this.createVideoClone(e);if(BP(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return M5(n)&&(M5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),kP(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return TS(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Om(n)||!tNe(n)&&!n.hasAttribute(rV)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Om(n)||!BP(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(Om(a)&&tV(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,a,r)},t.prototype.cloneNode=function(e,n){if(X9(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Om(e)&&(P5(e)||Vw(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&P5(s)&&(this.clonedReferenceElement=s),R4(s)&&mNe(s);var l=this.counters.parse(new fP(this.context,a)),c=this.resolvePseudoContent(e,s,i,Ov.BEFORE);kP(e)&&(n=!0),NP(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var A=this.resolvePseudoContent(e,s,o,Ov.AFTER);return A&&s.appendChild(A),this.counters.pop(l),(a&&(this.options.copyStyles||Vw(e))&&!eV(e)||n)&&TS(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(ob(e)||lb(e))&&(ob(s)||lb(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var a=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new fP(this.context,r));var l=new XTe(this.context,r),c=o.createElement("html2canvaspseudoelement");TS(r,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var p=o.createElement("img");p.src=h.value,p.style.opacity="1",c.appendChild(p)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(Rs);g.length&&c.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var w=h.values.filter(Cp),x=w[0],S=w[1];if(x&&Rs(x)){var N=a.counters.getCounterValue(x.value),F=S&&Rs(S)?F5.parse(a.context,S.value):3;c.appendChild(o.createTextNode(vx(N,F,!1)))}}else if(h.name==="counters"){var D=h.values.filter(Cp),x=D[0],R=D[1],S=D[2];if(x&&Rs(x)){var j=a.counters.getCounterValues(x.value),P=S&&Rs(S)?F5.parse(a.context,S.value):3,E=R&&R.type===0?R.value:"",T=j.map(function(M){return vx(M,P,!1)}).join(E);c.appendChild(o.createTextNode(T))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(AP(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(AP(l.quotes,--a.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=U5+" "+O5;var A=s===Ov.BEFORE?" "+U5:" "+O5;return Vw(n)?n.className.baseValue+=A:n.className+=A,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ov;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ov||(Ov={}));var aNe=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(rV,"true"),t.body.appendChild(n),n},iNe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},oNe=function(t){return Promise.all([].slice.call(t.images,0).map(iNe))},lNe=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},cNe=["all","d","content"],TS=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);cNe.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},uNe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},dNe=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},ANe=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},fNe=":before",hNe=":after",U5="___html2canvas___pseudoelement_before",O5="___html2canvas___pseudoelement_after",MP=`{
    content: "" !important;
    display: none !important;
}`,mNe=function(t){pNe(t,"."+U5+fNe+MP+`
         .`+O5+hNe+MP)},pNe=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},sV=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),gNe=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(BS(e)||wNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Sl(this,void 0,void 0,function(){var n,r,s,a,i=this;return Yo(this,function(o){switch(o.label){case 0:return n=sV.isSameOrigin(e),r=!NS(e)&&this._options.useCORS===!0&&Eo.SUPPORT_CORS_IMAGES&&!n,s=!NS(e)&&!n&&!BS(e)&&typeof this._options.proxy=="string"&&Eo.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!NS(e)&&!BS(e)&&!s&&!r?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var A=new Image;A.onload=function(){return l(A)},A.onerror=c,(bNe(a)||r)&&(A.crossOrigin="anonymous"),A.src=a,A.complete===!0&&setTimeout(function(){return l(A)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=Eo.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(p){return i(p)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),n._options.imageTimeout){var A=n._options.imageTimeout;l.timeout=A,l.ontimeout=function(){return i("Timed out ("+A+"ms) proxying "+s)}}l.send()})},t}(),vNe=/^data:image\/svg\+xml/i,xNe=/^data:image\/.*;base64,/i,yNe=/^data:image\/.*/i,wNe=function(t){return Eo.SUPPORT_SVG_DRAWING||!_Ne(t)},NS=function(t){return yNe.test(t)},bNe=function(t){return xNe.test(t)},BS=function(t){return t.substr(0,4)==="blob"},_Ne=function(t){return t.substr(-3).toLowerCase()==="svg"||vNe.test(t)},un=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),gm=function(t,e,n){return new un(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},ew=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=gm(this.start,this.startControl,e),s=gm(this.startControl,this.endControl,e),a=gm(this.endControl,this.end,e),i=gm(r,s,e),o=gm(s,a,e),l=gm(i,o,e);return n?new t(this.start,r,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),du=function(t){return t.type===1},CNe=function(){function t(e){var n=e.styles,r=e.bounds,s=cv(n.borderTopLeftRadius,r.width,r.height),a=s[0],i=s[1],o=cv(n.borderTopRightRadius,r.width,r.height),l=o[0],c=o[1],A=cv(n.borderBottomRightRadius,r.width,r.height),h=A[0],p=A[1],g=cv(n.borderBottomLeftRadius,r.width,r.height),w=g[0],x=g[1],S=[];S.push((a+l)/r.width),S.push((w+h)/r.width),S.push((i+x)/r.height),S.push((c+p)/r.height);var N=Math.max.apply(Math,S);N>1&&(a/=N,i/=N,l/=N,c/=N,h/=N,p/=N,w/=N,x/=N);var F=r.width-l,D=r.height-p,R=r.width-h,j=r.height-x,P=n.borderTopWidth,E=n.borderRightWidth,T=n.borderBottomWidth,k=n.borderLeftWidth,z=Ws(n.paddingTop,e.bounds.width),M=Ws(n.paddingRight,e.bounds.width),U=Ws(n.paddingBottom,e.bounds.width),G=Ws(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?da(r.left+k/3,r.top+P/3,a-k/3,i-P/3,xs.TOP_LEFT):new un(r.left+k/3,r.top+P/3),this.topRightBorderDoubleOuterBox=a>0||i>0?da(r.left+F,r.top+P/3,l-E/3,c-P/3,xs.TOP_RIGHT):new un(r.left+r.width-E/3,r.top+P/3),this.bottomRightBorderDoubleOuterBox=h>0||p>0?da(r.left+R,r.top+D,h-E/3,p-T/3,xs.BOTTOM_RIGHT):new un(r.left+r.width-E/3,r.top+r.height-T/3),this.bottomLeftBorderDoubleOuterBox=w>0||x>0?da(r.left+k/3,r.top+j,w-k/3,x-T/3,xs.BOTTOM_LEFT):new un(r.left+k/3,r.top+r.height-T/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?da(r.left+k*2/3,r.top+P*2/3,a-k*2/3,i-P*2/3,xs.TOP_LEFT):new un(r.left+k*2/3,r.top+P*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?da(r.left+F,r.top+P*2/3,l-E*2/3,c-P*2/3,xs.TOP_RIGHT):new un(r.left+r.width-E*2/3,r.top+P*2/3),this.bottomRightBorderDoubleInnerBox=h>0||p>0?da(r.left+R,r.top+D,h-E*2/3,p-T*2/3,xs.BOTTOM_RIGHT):new un(r.left+r.width-E*2/3,r.top+r.height-T*2/3),this.bottomLeftBorderDoubleInnerBox=w>0||x>0?da(r.left+k*2/3,r.top+j,w-k*2/3,x-T*2/3,xs.BOTTOM_LEFT):new un(r.left+k*2/3,r.top+r.height-T*2/3),this.topLeftBorderStroke=a>0||i>0?da(r.left+k/2,r.top+P/2,a-k/2,i-P/2,xs.TOP_LEFT):new un(r.left+k/2,r.top+P/2),this.topRightBorderStroke=a>0||i>0?da(r.left+F,r.top+P/2,l-E/2,c-P/2,xs.TOP_RIGHT):new un(r.left+r.width-E/2,r.top+P/2),this.bottomRightBorderStroke=h>0||p>0?da(r.left+R,r.top+D,h-E/2,p-T/2,xs.BOTTOM_RIGHT):new un(r.left+r.width-E/2,r.top+r.height-T/2),this.bottomLeftBorderStroke=w>0||x>0?da(r.left+k/2,r.top+j,w-k/2,x-T/2,xs.BOTTOM_LEFT):new un(r.left+k/2,r.top+r.height-T/2),this.topLeftBorderBox=a>0||i>0?da(r.left,r.top,a,i,xs.TOP_LEFT):new un(r.left,r.top),this.topRightBorderBox=l>0||c>0?da(r.left+F,r.top,l,c,xs.TOP_RIGHT):new un(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||p>0?da(r.left+R,r.top+D,h,p,xs.BOTTOM_RIGHT):new un(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=w>0||x>0?da(r.left,r.top+j,w,x,xs.BOTTOM_LEFT):new un(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||i>0?da(r.left+k,r.top+P,Math.max(0,a-k),Math.max(0,i-P),xs.TOP_LEFT):new un(r.left+k,r.top+P),this.topRightPaddingBox=l>0||c>0?da(r.left+Math.min(F,r.width-E),r.top+P,F>r.width+E?0:Math.max(0,l-E),Math.max(0,c-P),xs.TOP_RIGHT):new un(r.left+r.width-E,r.top+P),this.bottomRightPaddingBox=h>0||p>0?da(r.left+Math.min(R,r.width-k),r.top+Math.min(D,r.height-T),Math.max(0,h-E),Math.max(0,p-T),xs.BOTTOM_RIGHT):new un(r.left+r.width-E,r.top+r.height-T),this.bottomLeftPaddingBox=w>0||x>0?da(r.left+k,r.top+Math.min(j,r.height-T),Math.max(0,w-k),Math.max(0,x-T),xs.BOTTOM_LEFT):new un(r.left+k,r.top+r.height-T),this.topLeftContentBox=a>0||i>0?da(r.left+k+G,r.top+P+z,Math.max(0,a-(k+G)),Math.max(0,i-(P+z)),xs.TOP_LEFT):new un(r.left+k+G,r.top+P+z),this.topRightContentBox=l>0||c>0?da(r.left+Math.min(F,r.width+k+G),r.top+P+z,F>r.width+k+G?0:l-k+G,c-(P+z),xs.TOP_RIGHT):new un(r.left+r.width-(E+M),r.top+P+z),this.bottomRightContentBox=h>0||p>0?da(r.left+Math.min(R,r.width-(k+G)),r.top+Math.min(D,r.height+P+z),Math.max(0,h-(E+M)),p-(T+U),xs.BOTTOM_RIGHT):new un(r.left+r.width-(E+M),r.top+r.height-(T+U)),this.bottomLeftContentBox=w>0||x>0?da(r.left+k+G,r.top+j,Math.max(0,w-(k+G)),x-(T+U),xs.BOTTOM_LEFT):new un(r.left+k+G,r.top+r.height-(T+U))}return t}(),xs;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(xs||(xs={}));var da=function(t,e,n,r,s){var a=4*((Math.sqrt(2)-1)/3),i=n*a,o=r*a,l=t+n,c=e+r;switch(s){case xs.TOP_LEFT:return new ew(new un(t,c),new un(t,c-o),new un(l-i,e),new un(l,e));case xs.TOP_RIGHT:return new ew(new un(t,e),new un(t+i,e),new un(l,c-o),new un(l,c));case xs.BOTTOM_RIGHT:return new ew(new un(l,e),new un(l,e+o),new un(t+i,c),new un(t,c));case xs.BOTTOM_LEFT:default:return new ew(new un(l,c),new un(l-i,c),new un(t,e+o),new un(t,e))}},cb=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},ENe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},ub=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},SNe=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),tw=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),TNe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),NNe=function(t){return t.type===0},aV=function(t){return t.type===1},BNe=function(t){return t.type===2},UP=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},kNe=function(t,e,n,r,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,n);case 1:return a.add(e+r,n);case 2:return a.add(e+r,n+s);case 3:return a.add(e,n+s)}return a})},iV=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),oV=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new CNe(this.container),this.container.styles.opacity<1&&this.effects.push(new TNe(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new SNe(r,s,a))}if(this.container.styles.overflowX!==0){var i=cb(this.curves),o=ub(this.curves);UP(i,o)?this.effects.push(new tw(i,6)):(this.effects.push(new tw(i,2)),this.effects.push(new tw(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var a=r.effects.filter(function(l){return!aV(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,a),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=cb(r.curves),o=ub(r.curves);UP(i,o)||s.unshift(new tw(o,6))}}else s.unshift.apply(s,a);r=r.parent}return s.filter(function(l){return Pi(l.target,e)})},t}(),j5=function(t,e,n,r){t.container.elements.forEach(function(s){var a=Pi(s.flags,4),i=Pi(s.flags,2),o=new oV(s,t);Pi(s.styles.display,2048)&&r.push(o);var l=Pi(s.flags,8)?[]:r;if(a||i){var c=a||s.styles.isPositioned()?n:e,A=new iV(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var p=0;c.negativeZIndex.some(function(w,x){return h>w.element.container.styles.zIndex.order?(p=x,!1):p>0}),c.negativeZIndex.splice(p,0,A)}else if(h>0){var g=0;c.positiveZIndex.some(function(w,x){return h>=w.element.container.styles.zIndex.order?(g=x+1,!1):g>0}),c.positiveZIndex.splice(g,0,A)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(A)}else s.styles.isFloating()?c.nonPositionedFloats.push(A):c.nonPositionedInlineLevel.push(A);j5(o,A,a?A:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),j5(o,e,n,l);Pi(s.flags,8)&&lV(s,l)})},lV=function(t,e){for(var n=t instanceof R5?t.start:1,r=t instanceof R5?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof G9&&typeof a.container.value=="number"&&a.container.value!==0&&(n=a.container.value),a.listValue=vx(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},INe=function(t){var e=new oV(t,null),n=new iV(e),r=[];return j5(e,n,n,r),lV(e.container,r),n},OP=function(t,e){switch(e){case 0:return gu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return gu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return gu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return gu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},FNe=function(t,e){switch(e){case 0:return gu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return gu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return gu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return gu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},DNe=function(t,e){switch(e){case 0:return gu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return gu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return gu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return gu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},LNe=function(t,e){switch(e){case 0:return nw(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return nw(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return nw(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return nw(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},nw=function(t,e){var n=[];return du(t)?n.push(t.subdivide(.5,!1)):n.push(t),du(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},gu=function(t,e,n,r){var s=[];return du(t)?s.push(t.subdivide(.5,!1)):s.push(t),du(n)?s.push(n.subdivide(.5,!0)):s.push(n),du(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),du(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},cV=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},db=function(t){var e=t.styles,n=t.bounds,r=Ws(e.paddingLeft,n.width),s=Ws(e.paddingRight,n.width),a=Ws(e.paddingTop,n.width),i=Ws(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},RNe=function(t,e){return t===0?e.bounds:t===2?db(e):cV(e)},PNe=function(t,e){return t===0?e.bounds:t===2?db(e):cV(e)},kS=function(t,e,n){var r=RNe(Lm(t.styles.backgroundOrigin,e),t),s=PNe(Lm(t.styles.backgroundClip,e),t),a=MNe(Lm(t.styles.backgroundSize,e),n,r),i=a[0],o=a[1],l=cv(Lm(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=UNe(Lm(t.styles.backgroundRepeat,e),l,a,r,s),A=Math.round(r.left+l[0]),h=Math.round(r.top+l[1]);return[c,A,h,i,o]},vm=function(t){return Rs(t)&&t.value===ap.AUTO},rw=function(t){return typeof t=="number"},MNe=function(t,e,n){var r=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(wi(i)&&o&&wi(o))return[Ws(i,n.width),Ws(o,n.height)];var l=rw(a);if(Rs(i)&&(i.value===ap.CONTAIN||i.value===ap.COVER)){if(rw(a)){var c=n.width/n.height;return c<a!=(i.value===ap.COVER)?[n.width,n.width/a]:[n.height*a,n.height]}return[n.width,n.height]}var A=rw(r),h=rw(s),p=A||h;if(vm(i)&&(!o||vm(o))){if(A&&h)return[r,s];if(!l&&!p)return[n.width,n.height];if(p&&l){var g=A?r:s*a,w=h?s:r/a;return[g,w]}var x=A?r:n.width,S=h?s:n.height;return[x,S]}if(l){var N=0,F=0;return wi(i)?N=Ws(i,n.width):wi(o)&&(F=Ws(o,n.height)),vm(i)?N=F*a:(!o||vm(o))&&(F=N/a),[N,F]}var D=null,R=null;if(wi(i)?D=Ws(i,n.width):o&&wi(o)&&(R=Ws(o,n.height)),D!==null&&(!o||vm(o))&&(R=A&&h?D/r*s:n.height),R!==null&&vm(i)&&(D=A&&h?R/s*r:n.width),D!==null&&R!==null)return[D,R];throw new Error("Unable to calculate background-size for element")},Lm=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},UNe=function(t,e,n,r,s){var a=e[0],i=e[1],o=n[0],l=n[1];switch(t){case 2:return[new un(Math.round(r.left),Math.round(r.top+i)),new un(Math.round(r.left+r.width),Math.round(r.top+i)),new un(Math.round(r.left+r.width),Math.round(l+r.top+i)),new un(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new un(Math.round(r.left+a),Math.round(r.top)),new un(Math.round(r.left+a+o),Math.round(r.top)),new un(Math.round(r.left+a+o),Math.round(r.height+r.top)),new un(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new un(Math.round(r.left+a),Math.round(r.top+i)),new un(Math.round(r.left+a+o),Math.round(r.top+i)),new un(Math.round(r.left+a+o),Math.round(r.top+i+l)),new un(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new un(Math.round(s.left),Math.round(s.top)),new un(Math.round(s.left+s.width),Math.round(s.top)),new un(Math.round(s.left+s.width),Math.round(s.height+s.top)),new un(Math.round(s.left),Math.round(s.height+s.top))]}},ONe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jP="Hidden Text",jNe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=ONe,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(jP)),r.appendChild(a),r.appendChild(s);var o=s.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(jP)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),uV=function(){function t(e,n){this.context=e,this.options=n}return t}(),HNe=1e4,QNe=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new jNe(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),BNe(n)&&(this.ctx.globalAlpha=n.opacity),NNe(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),aV(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Sl(this,void 0,void 0,function(){var r;return Yo(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Sl(this,void 0,void 0,function(){return Yo(this,function(r){switch(r.label){case 0:if(Pi(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var a=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=D4(n.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,n.bounds.top+s),o+a.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=KNe(n.fontFamily).join(", "),a=o1(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(n,r){return Sl(this,void 0,void 0,function(){var s,a,i,o,l,c,A,h,p=this;return Yo(this,function(g){return s=this.createFontStyle(r),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),c=l.baseline,A=l.middle,h=r.paintOrder,n.textBounds.forEach(function(w){h.forEach(function(x){switch(x){case 0:p.ctx.fillStyle=Ji(r.color),p.renderTextWithLetterSpacing(w,r.letterSpacing,c);var S=r.textShadow;S.length&&w.text.trim().length&&(S.slice(0).reverse().forEach(function(N){p.ctx.shadowColor=Ji(N.color),p.ctx.shadowOffsetX=N.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=N.offsetY.number*p.options.scale,p.ctx.shadowBlur=N.blur.number,p.renderTextWithLetterSpacing(w,r.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),r.textDecorationLine.length&&(p.ctx.fillStyle=Ji(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(N){switch(N){case 1:p.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top+c),w.bounds.width,1);break;case 2:p.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top),w.bounds.width,1);break;case 3:p.ctx.fillRect(w.bounds.left,Math.ceil(w.bounds.top+A),w.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&w.text.trim().length&&(p.ctx.strokeStyle=Ji(r.webkitTextStrokeColor),p.ctx.lineWidth=r.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(w.text,w.bounds.left,w.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var a=db(n),i=ub(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Sl(this,void 0,void 0,function(){var r,s,a,i,o,l,F,F,c,A,h,p,R,g,w,j,x,S,N,F,D,R,j;return Yo(this,function(P){switch(P.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,a=r.styles,i=0,o=r.textNodes,P.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:P.sent(),P.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof Q9))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return F=P.sent(),this.renderReplacedElement(r,s,F),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof V9&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof z9))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return F=P.sent(),this.renderReplacedElement(r,s,F),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof $9&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:A=P.sent(),r.width&&r.height&&this.ctx.drawImage(A,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),P.label=14;case 14:if(r instanceof L4&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===ab?r.checked&&(this.ctx.save(),this.path([new un(r.bounds.left+h*.39363,r.bounds.top+h*.79),new un(r.bounds.left+h*.16,r.bounds.top+h*.5549),new un(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new un(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new un(r.bounds.left+h*.72983,r.bounds.top+h*.23),new un(r.bounds.left+h*.84,r.bounds.top+h*.34085),new un(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=Ji(TP),this.ctx.fill(),this.ctx.restore()):r.type===ib&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ji(TP),this.ctx.fill(),this.ctx.restore())),VNe(r)&&r.value.length){switch(p=this.createFontStyle(a),R=p[0],g=p[1],w=this.fontMetrics.getMetrics(R,g).baseline,this.ctx.font=R,this.ctx.fillStyle=Ji(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=GNe(r.styles.textAlign),j=db(r),x=0,r.styles.textAlign){case 1:x+=j.width/2;break;case 2:x+=j.width;break}S=j.add(x,0,0,-j.height/2+1),this.ctx.save(),this.path([new un(j.left,j.top),new un(j.left+j.width,j.top),new un(j.left+j.width,j.top+j.height),new un(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Uv(r.value,S),a.letterSpacing,w),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pi(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(N=r.styles.listStyleImage,N.type!==0)return[3,18];F=void 0,D=N.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(D)];case 16:return F=P.sent(),this.ctx.drawImage(F,r.bounds.left-(F.width+10),r.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+D),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(R=this.createFontStyle(a)[0],this.ctx.font=R,this.ctx.fillStyle=Ji(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new kA(r.bounds.left,r.bounds.top+Ws(r.styles.paddingTop,r.bounds.width),r.bounds.width,uP(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Uv(n.listValue,j),a.letterSpacing,uP(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Sl(this,void 0,void 0,function(){var r,s,N,a,i,N,o,l,N,c,A,N,h,p,N,g,w,N,x,S,N;return Yo(this,function(F){switch(F.label){case 0:if(Pi(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:F.sent(),r=0,s=n.negativeZIndex,F.label=2;case 2:return r<s.length?(N=s[r],[4,this.renderStack(N)]):[3,5];case 3:F.sent(),F.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:F.sent(),a=0,i=n.nonInlineLevel,F.label=7;case 7:return a<i.length?(N=i[a],[4,this.renderNode(N)]):[3,10];case 8:F.sent(),F.label=9;case 9:return a++,[3,7];case 10:o=0,l=n.nonPositionedFloats,F.label=11;case 11:return o<l.length?(N=l[o],[4,this.renderStack(N)]):[3,14];case 12:F.sent(),F.label=13;case 13:return o++,[3,11];case 14:c=0,A=n.nonPositionedInlineLevel,F.label=15;case 15:return c<A.length?(N=A[c],[4,this.renderStack(N)]):[3,18];case 16:F.sent(),F.label=17;case 17:return c++,[3,15];case 18:h=0,p=n.inlineLevel,F.label=19;case 19:return h<p.length?(N=p[h],[4,this.renderNode(N)]):[3,22];case 20:F.sent(),F.label=21;case 21:return h++,[3,19];case 22:g=0,w=n.zeroOrAutoZIndexOrTransformedOrOpacity,F.label=23;case 23:return g<w.length?(N=w[g],[4,this.renderStack(N)]):[3,26];case 24:F.sent(),F.label=25;case 25:return g++,[3,23];case 26:x=0,S=n.positiveZIndex,F.label=27;case 27:return x<S.length?(N=S[x],[4,this.renderStack(N)]):[3,30];case 28:F.sent(),F.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,a){var i=du(s)?s.start:s;a===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),du(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,a){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(n,r,s){var a;if(n.width===r&&n.height===s)return n;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Sl(this,void 0,void 0,function(){var r,s,a,i,o,l;return Yo(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(A){var h,p,g,z,ee,le,G,q,T,w,z,ee,le,G,q,x,S,N,F,D,R,j,P,E,T,k,z,M,U,G,q,oe,ee,le,K,ne,J,ce,Q,Z,se,ie;return Yo(this,function(fe){switch(fe.label){case 0:if(A.type!==0)return[3,5];h=void 0,p=A.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,a.context.cache.match(p)];case 2:return h=fe.sent(),[3,4];case 3:return fe.sent(),a.context.logger.error("Error loading background-image "+p),[3,4];case 4:return h&&(g=kS(n,r,[h.width,h.height,h.width/h.height]),z=g[0],ee=g[1],le=g[2],G=g[3],q=g[4],T=a.ctx.createPattern(a.resizeImage(h,G,q),"repeat"),a.renderRepeat(z,T,ee,le)),[3,6];case 5:NSe(A)?(w=kS(n,r,[null,null,null]),z=w[0],ee=w[1],le=w[2],G=w[3],q=w[4],x=_Se(A.angle,G,q),S=x[0],N=x[1],F=x[2],D=x[3],R=x[4],j=document.createElement("canvas"),j.width=G,j.height=q,P=j.getContext("2d"),E=P.createLinearGradient(N,D,F,R),lP(A.stops,S).forEach(function(Se){return E.addColorStop(Se.stop,Ji(Se.color))}),P.fillStyle=E,P.fillRect(0,0,G,q),G>0&&q>0&&(T=a.ctx.createPattern(j,"repeat"),a.renderRepeat(z,T,ee,le))):BSe(A)&&(k=kS(n,r,[null,null,null]),z=k[0],M=k[1],U=k[2],G=k[3],q=k[4],oe=A.position.length===0?[k4]:A.position,ee=Ws(oe[0],G),le=Ws(oe[oe.length-1],q),K=CSe(A,ee,le,G,q),ne=K[0],J=K[1],ne>0&&J>0&&(ce=a.ctx.createRadialGradient(M+ee,U+le,0,M+ee,U+le,ne),lP(A.stops,ne*2).forEach(function(Se){return ce.addColorStop(Se.stop,Ji(Se.color))}),a.path(z),a.ctx.fillStyle=ce,ne!==J?(Q=n.bounds.left+.5*n.bounds.width,Z=n.bounds.top+.5*n.bounds.height,se=J/ne,ie=1/se,a.ctx.save(),a.ctx.translate(Q,Z),a.ctx.transform(1,0,0,se,0,0),a.ctx.translate(-Q,-Z),a.ctx.fillRect(M,ie*(U-Z)+Z,G,q*ie),a.ctx.restore()):a.ctx.fill())),fe.label=6;case 6:return r--,[2]}})},a=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Sl(this,void 0,void 0,function(){return Yo(this,function(a){return this.path(OP(s,r)),this.ctx.fillStyle=Ji(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,a){return Sl(this,void 0,void 0,function(){var i,o;return Yo(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=FNe(a,s),this.path(i),this.ctx.fillStyle=Ji(n),this.ctx.fill(),o=DNe(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Sl(this,void 0,void 0,function(){var r,s,a,i,o,l,c,A,h=this;return Yo(this,function(p){switch(p.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Vf(r.backgroundColor)||r.backgroundImage.length,a=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=zNe(Lm(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Vf(r.backgroundColor)||(this.ctx.fillStyle=Ji(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var w=cb(n.curves),x=g.inset?0:HNe,S=kNe(w,-x+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(w),h.ctx.clip(),h.mask(S)):(h.mask(w),h.ctx.clip(),h.path(S)),h.ctx.shadowOffsetX=g.offsetX.number+x,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=Ji(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?Ji(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),p.label=2;case 2:o=0,l=0,c=a,p.label=3;case 3:return l<c.length?(A=c[l],A.style!==0&&!Vf(A.color)&&A.width>0?A.style!==2?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return A.style!==3?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,o,n.curves,3)];case 6:return p.sent(),[3,11];case 7:return A.style!==4?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,o,n.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,o,n.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,a,i){return Sl(this,void 0,void 0,function(){var o,l,c,A,h,p,g,w,x,S,N,F,D,R,j,P,j,P;return Yo(this,function(E){return this.ctx.save(),o=LNe(a,s),l=OP(a,s),i===2&&(this.path(l),this.ctx.clip()),du(l[0])?(c=l[0].start.x,A=l[0].start.y):(c=l[0].x,A=l[0].y),du(l[1])?(h=l[1].end.x,p=l[1].end.y):(h=l[1].x,p=l[1].y),s===0||s===2?g=Math.abs(c-h):g=Math.abs(A-p),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),w=r<3?r*3:r*2,x=r<3?r*2:r,i===3&&(w=r,x=r),S=!0,g<=w*2?S=!1:g<=w*2+x?(N=g/(2*w+x),w*=N,x*=N):(F=Math.floor((g+x)/(w+x)),D=(g-F*w)/(F-1),R=(g-(F+1)*w)/F,x=R<=0||Math.abs(x-D)<Math.abs(x-R)?D:R),S&&(i===3?this.ctx.setLineDash([0,w+x]):this.ctx.setLineDash([w,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Ji(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(du(l[0])&&(j=l[3],P=l[0],this.ctx.beginPath(),this.formatPath([new un(j.end.x,j.end.y),new un(P.start.x,P.start.y)]),this.ctx.stroke()),du(l[1])&&(j=l[1],P=l[2],this.ctx.beginPath(),this.formatPath([new un(j.end.x,j.end.y),new un(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Sl(this,void 0,void 0,function(){var r;return Yo(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ji(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=INe(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(uV),VNe=function(t){return t instanceof K9||t instanceof q9?!0:t instanceof L4&&t.type!==ib&&t.type!==ab},zNe=function(t,e){switch(t){case 0:return cb(e);case 2:return ENe(e);case 1:default:return ub(e)}},GNe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},qNe=["-apple-system","system-ui"],KNe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return qNe.indexOf(e)===-1}):t},$Ne=function(t){Zu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Sl(this,void 0,void 0,function(){var r,s;return Yo(this,function(a){switch(a.label){case 0:return r=L5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,WNe(r)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ji(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(uV),WNe=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},YNe=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ry([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ry([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ry([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ry([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),XNe=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new YNe({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new gNe(this,e)}return t.instanceCount=1,t}(),dV=function(t,e){return e===void 0&&(e={}),JNe(t,e)};typeof window<"u"&&sV.setContext(window);var JNe=function(t,e){return Sl(void 0,void 0,void 0,function(){var n,r,s,a,i,o,l,c,A,h,p,g,w,x,S,N,F,D,R,j,E,P,E,T,k,z,M,U,G,q,oe,ee,le,K,ne,J,ce,Q,Z,se;return Yo(this,function(ie){switch(ie.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(T=e.allowTaint)!==null&&T!==void 0?T:!1,imageTimeout:(k=e.imageTimeout)!==null&&k!==void 0?k:15e3,proxy:e.proxy,useCORS:(z=e.useCORS)!==null&&z!==void 0?z:!1},a=x5({logging:(M=e.logging)!==null&&M!==void 0?M:!0,cache:e.cache},s),i={windowWidth:(U=e.windowWidth)!==null&&U!==void 0?U:r.innerWidth,windowHeight:(G=e.windowHeight)!==null&&G!==void 0?G:r.innerHeight,scrollX:(q=e.scrollX)!==null&&q!==void 0?q:r.pageXOffset,scrollY:(oe=e.scrollY)!==null&&oe!==void 0?oe:r.pageYOffset},o=new kA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new XNe(a,o),c=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,A={allowTaint:(le=e.allowTaint)!==null&&le!==void 0?le:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new PP(l,t,A),p=h.clonedReferenceElement,p?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=ie.sent(),w=R4(p)||eNe(p)?kCe(p.ownerDocument):S_(l,p),x=w.width,S=w.height,N=w.left,F=w.top,D=ZNe(l,p,e.backgroundColor),R={canvas:e.canvas,backgroundColor:D,scale:(ne=(K=e.scale)!==null&&K!==void 0?K:r.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((J=e.x)!==null&&J!==void 0?J:0)+N,y:((ce=e.y)!==null&&ce!==void 0?ce:0)+F,width:(Q=e.width)!==null&&Q!==void 0?Q:Math.ceil(x),height:(Z=e.height)!==null&&Z!==void 0?Z:Math.ceil(S)},c?(l.logger.debug("Document cloned, using foreign object rendering"),E=new $Ne(l,R),[4,E.render(p)]):[3,3];case 2:return j=ie.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+N+","+F+" with size "+x+"x"+S+" using computed rendering"),l.logger.debug("Starting DOM parsing"),P=Y9(l,p),D===P.styles.backgroundColor&&(P.styles.backgroundColor=wA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),E=new QNe(l,R),[4,E.render(P)];case 4:j=ie.sent(),ie.label=5;case 5:return(!((se=e.removeContainer)!==null&&se!==void 0)||se)&&(PP.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,j]}})})},ZNe=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?Pv(t,getComputedStyle(r.documentElement).backgroundColor):wA.TRANSPARENT,a=r.body?Pv(t,getComputedStyle(r.body).backgroundColor):wA.TRANSPARENT,i=typeof n=="string"?Pv(t,n):n===null?wA.TRANSPARENT:4294967295;return e===r.documentElement?Vf(s)?Vf(a)?i:a:s:i};const eBe=Object.freeze(Object.defineProperty({__proto__:null,default:dV},Symbol.toStringTag,{value:"Module"})),P_="proyectos_interdisciplinarios",AV="entregas_interdisciplinarias",tBe="usuarios",P4=t=>{const e=t.data();return{id:t.id,...e}},nBe=t=>{const e=mn(zt(Ut,P_),Pr("nombreProyecto","asc"));return jn(e,r=>{const s=r.docs.map(a=>P4(a));t(s)},r=>{console.error("Error al suscribirse a las planificaciones:",r),t([])})},rBe=async t=>{try{return(await la(zt(Ut,P_),t)).id}catch(e){throw console.error("Error al crear la planificacin:",e),new Error("No se pudo crear la planificacin.")}},HP=async(t,e)=>{try{const{id:n,...r}=e,s=On(Ut,P_,t);await Fo(s,r)}catch(n){throw console.error("Error al actualizar la planificacin:",n),new Error("No se pudo actualizar la planificacin.")}},sBe=async t=>{try{const e=On(Ut,P_,t);await ao(e)}catch(e){throw console.error("Error al eliminar la planificacin:",e),new Error("No se pudo eliminar la planificacin.")}},aBe=(t,e)=>{const n=mn(zt(Ut,AV),fs("planificacionId","==",t));return jn(n,s=>{const a=s.docs.map(i=>P4(i));e(a)},s=>{console.error("Error al suscribirse a las entregas:",s),e([])})},QP=async(t,e)=>{try{const n=On(Ut,AV,t);await Fo(n,{feedbackProfesor:e,fechaFeedback:Nn.fromDate(new Date)},{merge:!0})}catch(n){throw console.error("Error al guardar la retroalimentacin:",n),new Error("No se pudo guardar la retroalimentacin.")}},iBe=t=>{const e=mn(zt(Ut,tBe));return jn(e,r=>{const s=r.docs.map(a=>P4(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},oBe=({planificaciones:t,onActivityUpdate:e})=>{const[n,r]=W.useState(null),s=W.useMemo(()=>{const l=[];return t.forEach(c=>{(c.actividades||[]).forEach(A=>l.push({...A,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(A=>l.push({id:A.id,planId:c.id,type:"keyDate",nombre:A.nombre,fechaInicio:A.fecha,fechaFin:A.fecha,responsables:c.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((c,A)=>new Date(c.fechaInicio).getTime()-new Date(A.fechaInicio).getTime())},[t]),a=W.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const c=new Date;c.setHours(0,0,0,0);const A=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<c?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:A<=c&&h>=c?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const c=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),A=g=>{let w=0;for(let x=0;x<g.length;x++)w=g.charCodeAt(x)+((w<<5)-w);return w},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],p=Math.abs(A(l))%h.length;return u.jsx("div",{className:`w-9 h-9 rounded-full ${h[p]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:c.slice(0,2)})},o=({data:l,onClose:c,onSave:A})=>{const[h,p]=W.useState(l.activity),g=x=>{p({...h,[x.target.name]:x.target.value})},w=()=>{A(l.planId,h),c()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),u.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),u.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),u.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),u.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[u.jsx("button",{onClick:c,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),u.jsx("button",{onClick:w,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificacin primero."})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),u.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const c=a(l),A=l.type==="activity";return u.jsxs("tr",{className:`${A?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>A&&r({planId:l.planId,activity:l}),children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${c.color}`,children:c.text})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),n&&u.jsx(o,{data:n,onClose:()=>r(null),onSave:e})]})},lBe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),cBe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),uBe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),u.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),dBe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),ABe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),fBe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),hBe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),mBe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),H5=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),ff=({icon:t,label:e,children:n,aiButton:r})=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,u.jsx("span",{children:e})]}),r]}),n]}),pBe=({initialPlan:t,onSave:e,onCancel:n})=>{const[r,s]=W.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,i]=W.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=W.useState({nombre:"",fecha:""}),[c,A]=W.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,p]=W.useState(!1),[g,w]=W.useState(!1),[x,S]=W.useState(!1);W.useEffect(()=>{s(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const N=async T=>{if(!r.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}T==="objetivos"?p(!0):w(!0);const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let z="";T==="objetivos"?z=`Basado en la siguiente descripcin de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripcin del Proyecto: "${r.descripcionProyecto}"`:z=`Basado en la siguiente descripcin y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripcin del Proyecto: "${r.descripcionProyecto}"
            Objetivos (si existen): "${r.objetivos||"An no definidos, genralos a partir de la descripcin."}"`;try{const oe=(await(await new Si(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text();s(ee=>({...ee,[T]:oe.replace(/(\*\*|\*)/g,"")}))}catch(M){console.error(`Error al generar ${T}`,M),alert(`Hubo un error al generar los ${T}. Intntelo de nuevo.`)}finally{T==="objetivos"?p(!1):w(!1)}},F=async()=>{if(!r.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}S(!0);const T="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=`
            Basado en la descripcin de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            Descripcin del proyecto: "${r.descripcionProyecto}"
            Docentes responsables: "${r.docentesResponsables}"
            Asignaturas involucradas: "${r.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lgicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const oe=(await(await new Si(T).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(oe);s(le=>{var K,ne,J;return{...le,actividades:((K=ee.actividades)==null?void 0:K.map(ce=>({...ce,id:crypto.randomUUID()})))||le.actividades,fechasClave:((ne=ee.fechasClave)==null?void 0:ne.map(ce=>({...ce,id:crypto.randomUUID()})))||le.fechasClave,tareas:((J=ee.tareas)==null?void 0:J.map((ce,Q)=>({...ce,id:crypto.randomUUID(),numero:Q+1})))||le.tareas}})}catch(z){console.error("Error al generar la estructura del proyecto:",z),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{S(!1)}},D=T=>{s(k=>({...k,[T.target.name]:T.target.value}))},R=(T,k)=>{s(z=>{const M=z[T],U=M.includes(k)?M.filter(G=>G!==k):[...M,k];return{...z,[T]:U}})},j=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(T=>({...T,actividades:[...T.actividades||[],{...a,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},P=()=>{!o.nombre||!o.fecha||(s(T=>({...T,fechasClave:[...T.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},E=()=>{var k;if(!c.instrucciones||!c.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const T={id:crypto.randomUUID(),numero:(((k=r.tareas)==null?void 0:k.length)||0)+1,...c};s(z=>({...z,tareas:[...z.tareas||[],T]})),A({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return u.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[u.jsx("div",{className:"text-center mb-12",children:u.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),u.jsxs("div",{className:"space-y-6",children:[u.jsx(ff,{icon:u.jsx(lBe,{}),label:"Nombre del Proyecto",children:u.jsx("input",{name:"nombreProyecto",value:r.nombreProyecto,onChange:D,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(ff,{icon:u.jsx(cBe,{}),label:"Profesores",children:u.jsx("input",{name:"docentesResponsables",value:r.docentesResponsables,onChange:D,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(ff,{icon:u.jsx(uBe,{}),label:"Cursos",children:u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:ai.map(T=>u.jsx("button",{type:"button",onClick:()=>R("cursos",T),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${r.cursos.includes(T)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:T},T))})}),u.jsx(ff,{icon:u.jsx(dBe,{}),label:"Asignaturas",children:u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:Uc.map(T=>u.jsx("button",{type:"button",onClick:()=>R("asignaturas",T),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${r.asignaturas.includes(T)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:T},T))})}),u.jsx(ff,{icon:u.jsx(ABe,{}),label:"Descripcin del Proyecto",children:u.jsx("textarea",{name:"descripcionProyecto",value:r.descripcionProyecto,onChange:D,placeholder:"Detalle aqu la metodologa, el producto final esperado y el propsito del proyecto. Esta informacin es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(ff,{icon:u.jsx(fBe,{}),label:"Objetivos",aiButton:u.jsx("button",{type:"button",onClick:()=>N("objetivos"),disabled:!r.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:u.jsx(H5,{})}),children:h?u.jsx("div",{className:"p-4 text-center",children:"Generando..."}):u.jsx("textarea",{name:"objetivos",value:r.objetivos,onChange:D,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(ff,{icon:u.jsx(hBe,{}),label:"Indicadores de xito",aiButton:u.jsx("button",{type:"button",onClick:()=>N("indicadoresLogro"),disabled:!r.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:u.jsx(H5,{})}),children:g?u.jsx("div",{className:"p-4 text-center",children:"Generando..."}):u.jsx("textarea",{name:"indicadoresLogro",value:r.indicadoresLogro,onChange:D,placeholder:"Liste los indicadores de logro o evaluacin...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),u.jsx(ff,{icon:u.jsx(mBe,{}),label:"Carta Gantt",children:u.jsxs("div",{className:"space-y-4 mt-2",children:[u.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:u.jsx("button",{type:"button",onClick:F,disabled:x||!r.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:x?"Generando...":" Sugerir Estructura con IA"})}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[u.jsx("input",{value:a.nombre,onChange:T=>i({...a,nombre:T.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),u.jsx("input",{type:"date",value:a.fechaInicio,onChange:T=>i({...a,fechaInicio:T.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("input",{type:"date",value:a.fechaFin,onChange:T=>i({...a,fechaFin:T.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:j,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:r.actividades.map(T=>u.jsx("li",{children:T.nombre},T.id))})]}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[u.jsx("input",{value:o.nombre,onChange:T=>l({...o,nombre:T.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),u.jsx("input",{type:"date",value:o.fecha,onChange:T=>l({...o,fecha:T.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:P,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:r.fechasClave.map(T=>u.jsxs("li",{children:[T.nombre," (",T.fecha,")"]},T.id))})]}),u.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[u.jsx("input",{value:c.instrucciones,onChange:T=>A({...c,instrucciones:T.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),u.jsx("input",{type:"date",value:c.fechaEntrega,onChange:T=>A({...c,fechaEntrega:T.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),u.jsx("ul",{className:"text-xs",children:(r.tareas||[]).map(T=>u.jsxs("li",{children:[T.numero,". ",T.instrucciones]},T.id))})]})]})}),u.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[u.jsx("button",{onClick:n,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),u.jsx("button",{onClick:()=>e(r),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},VP=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!0),[s,a]=W.useState("list"),[i,o]=W.useState(null),[l,c]=W.useState(null),[A,h]=W.useState(null);W.useEffect(()=>{r(!0);const D=nBe(R=>{e(R),r(!1)});return()=>D()},[]);const p=W.useCallback(async(D,R)=>{const j=t.find(P=>P.id===D);if(j){const P={...j,actividades:(j.actividades||[]).map(E=>E.id===R.id?R:E)};await HP(D,P)}},[t]),g=async D=>{try{"id"in D&&D.id?await HP(D.id,D):await rBe(D),a("list"),o(null)}catch(R){console.error("Error al guardar la planificacin:",R),alert("No se pudo guardar la planificacin.")}},w=D=>{o(D),a("form")},x=async D=>{if(console.log("ID recibido por handleDelete:",D),!D){console.error("handleDelete fue llamado con un ID invlido:",D),alert("Error: No se puede eliminar un proyecto sin un ID vlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await sBe(D)}catch(R){console.error("Error al eliminar la planificacin:",R),alert("No se pudo eliminar la planificacin.")}},S=()=>{o(null),a("form")},N=async D=>{c(D.id);const R=new En("p","mm","a4"),j=15,P=R.internal.pageSize.getWidth(),E=R.internal.pageSize.getHeight(),T=P-j*2;let k=j;const z=22,M=14,U=11,G=()=>{R.setFont("helvetica","normal"),R.setFontSize(9),R.setTextColor(150),R.text("Proyecto Interdisciplinario",j,12),R.text("Liceo Industrial de Recoleta",P-j,12,{align:"right"}),R.setDrawColor(220),R.line(j,15,P-j,15)},q=ne=>{k+ne>E-j&&(R.addPage(),G(),k=j+15)},oe=(ne,J)=>{if(!J||Array.isArray(J)&&J.length===0||typeof J=="string"&&!J.trim())return;const ce=10;R.setFontSize(U);const Q=Array.isArray(J)?J.join(", "):String(J),Z=R.splitTextToSize(Q,T),se=Z.length*(U*.35*1.15);q(ce+se+12),R.setFont("helvetica","bold"),R.setFontSize(M),R.setTextColor(40),R.text(ne,j,k),k+=6,R.setDrawColor(200),R.line(j,k,j+30,k),k+=8,R.setFont("helvetica","normal"),R.setFontSize(U),R.setTextColor(80),R.text(Z,j,k),k+=se+12};G(),k=j+20,R.setFont("helvetica","bold"),R.setFontSize(z),R.setTextColor(0);const ee=R.splitTextToSize(D.nombreProyecto,T);if(R.text(ee,j,k),k+=ee.length*(z*.4)+10,Pc(R,{startY:k,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},D.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},D.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},D.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:U,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),k=R.lastAutoTable.finalY+15,oe("Descripcin del Proyecto",D.descripcionProyecto),oe("Objetivos de Aprendizaje",D.objetivos),oe("Indicadores de Logro",D.indicadoresLogro),D.tareas&&D.tareas.length>0){const ne=D.tareas.map(ce=>[ce.numero.toString(),ce.instrucciones,ce.fechaEntrega]),J=(ne.length+1)*10+15;q(J+15),R.setFont("helvetica","bold"),R.setFontSize(M),R.setTextColor(40),R.text("Tareas para Estudiantes",j,k),k+=10,Pc(R,{startY:k,head:[["#","Instrucciones","Fecha de Entrega"]],body:ne,theme:"striped",headStyles:{fillColor:[52,73,94]}}),k=R.lastAutoTable.finalY+15}const le=document.getElementById("gantt-container-vertical");if(le)try{const J=(await dV(le,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");R.addPage(),G(),k=j+15,R.setFont("helvetica","bold"),R.setFontSize(M),R.setTextColor(40),R.text("Cronograma del Proyecto",j,k),k+=10;const ce=R.getImageProperties(J),Q=T,Z=ce.height*Q/ce.width;R.addImage(J,"PNG",j,k,Q,Z)}catch(ne){console.error("Error generating timeline image:",ne)}const K=R.internal.pages.length-1;for(let ne=1;ne<=K;ne++)R.setPage(ne),R.setFont("helvetica","normal"),R.setFontSize(9),R.setTextColor(150),R.text(`Pgina ${ne} de ${K}`,P-j,R.internal.pageSize.getHeight()-10,{align:"right"});R.save(`Proyecto_${D.nombreProyecto.replace(/\s/g,"_")}.pdf`),c(null)},F=({plan:D,onBack:R})=>{var oe,ee;const[j,P]=W.useState([]),[E,T]=W.useState([]),[k,z]=W.useState(((oe=D.tareas)==null?void 0:oe[0])||null),[M,U]=W.useState(null);W.useEffect(()=>{const le=iBe(P),K=aBe(D.id,T);return()=>{le(),K()}},[D.id]);const G=W.useMemo(()=>j.filter(le=>le.profile===tn.ESTUDIANTE&&D.cursos.includes(le.curso||"")).sort((le,K)=>le.nombreCompleto.localeCompare(K.nombreCompleto)),[j,D.cursos]),q=async le=>{var J;U(le.id);const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=`
                Eres un profesor asistente. Genera una retroalimentacin constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${k==null?void 0:k.instrucciones}"
                - Comentario del estudiante: "${le.observacionesEstudiante||"No dej comentarios."}"
                - Enlace entregado: "${le.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((J=le.archivoAdjunto)==null?void 0:J.nombre)||"No aplica"}"
                
                La retroalimentacin debe ser breve (2-3 frases), motivadora, y enfocada en cmo podra mejorar.
            `;try{const ie=(await(await new Si(K).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(ne)).response).text().replace(/(\*\*|\*)/g,"");await QP(le.id,ie)}catch(ce){console.error("Error al generar feedback con IA:",ce),alert("No se pudo generar la retroalimentacin.")}finally{U(null)}};return k?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",D.nombreProyecto]}),u.jsx("button",{onClick:R,className:"font-semibold",children:" Volver a Proyectos"})]}),u.jsx("select",{value:k.id,onChange:le=>{var K;return z(((K=D.tareas)==null?void 0:K.find(ne=>ne.id===le.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(ee=D.tareas)==null?void 0:ee.map(le=>u.jsxs("option",{value:le.id,children:["Tarea ",le.numero,": ",le.instrucciones]},le.id))}),u.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:G.map(le=>{const K=E.find(ne=>ne.tareaId===k.id&&ne.estudianteId===le.id);return u.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[u.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[le.nombreCompleto," - ",K!=null&&K.completada?u.jsx("span",{className:"text-green-600",children:"Entregado"}):u.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),K?u.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[K.observacionesEstudiante&&u.jsxs("p",{children:[u.jsx("strong",{children:"Comentario:"})," ",K.observacionesEstudiante]}),K.enlaceUrl&&u.jsxs("p",{children:[u.jsx("strong",{children:"Enlace:"})," ",u.jsx("a",{href:K.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:K.enlaceUrl})]}),K.archivoAdjunto&&u.jsxs("p",{children:[u.jsx("strong",{children:"Archivo:"})," ",u.jsx("a",{href:K.archivoAdjunto.url,download:K.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:K.archivoAdjunto.nombre})]}),u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:K.feedbackProfesor||"",onBlur:ne=>QP(K.id,ne.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},K.id),u.jsx("button",{onClick:()=>q(K),disabled:M===K.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:M===K.id?"...":u.jsx(H5,{})})]})]}):u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante an no ha realizado la entrega."})]},le.id)})})]}):u.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return n?u.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):A?u.jsx(F,{plan:A,onBack:()=>h(null)}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s==="list"?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),u.jsx("button",{onClick:S,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"space-y-4",children:t.map(D=>(console.log("Inspeccionando objeto plan:",D),u.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:D.nombreProyecto}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(D.cursos||[]).join(", ")]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("button",{onClick:()=>h(D),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),u.jsx("button",{onClick:()=>N(D),disabled:l===D.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===D.id?"Exportando...":"Exportar PDF"}),u.jsx("button",{onClick:()=>w(D),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),u.jsx("button",{onClick:()=>x(D.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]})},D.id)))})]}):u.jsx(pBe,{initialPlan:i,onSave:g,onCancel:()=>{a("list"),o(null)}}),t.length>0&&u.jsx("div",{id:"gantt-container-vertical",children:u.jsx(oBe,{planificaciones:t,onActivityUpdate:p})})]})},IS="paolMaquinas",zP="paolRegistros",gBe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=W.useState(s),[o,l]=W.useState(null),c={nombre:"",especialidad:"Industrial"},[A,h]=W.useState(c),[p,g]=W.useState(null),[w,x]=W.useState({maquinaId:"",curso:"",profesor:"",fecha:""});W.useEffect(()=>{try{const U=localStorage.getItem(IS);if(U&&JSON.parse(U).length>0)e(JSON.parse(U));else{const q=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidrulica",especialidad:"Automotriz"}];e(q),localStorage.setItem(IS,JSON.stringify(q))}const G=localStorage.getItem(zP);G&&r(JSON.parse(G))}catch(U){console.error("Error al cargar datos de Paol desde localStorage",U)}},[]);const S=W.useCallback(U=>{e(U),localStorage.setItem(IS,JSON.stringify(U))},[]),N=W.useCallback(U=>{r(U),localStorage.setItem(zP,JSON.stringify(U))},[]),F=U=>{U.preventDefault(),A.nombre.trim()&&(S(p?t.map(G=>G.id===p.id?{...p,...A}:G):[{...A,id:crypto.randomUUID()},...t]),h(c),g(null))},D=W.useCallback(U=>{if(n.some(G=>G.maquinaId===U)){alert("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");return}window.confirm("Eliminar esta mquina?")&&S(t.filter(G=>G.id!==U))},[t,n,S]),R=U=>{U.preventDefault();const G=o||a;if(!G.curso||!G.profesorResponsable.trim()||!G.maquinaId||G.totalHoras<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}N(o?n.map(q=>q.id===o.id?o:q):[{...a,id:crypto.randomUUID()},...n]),i(s),l(null)},j=W.useCallback(U=>{window.confirm("Eliminar este registro de uso?")&&N(n.filter(G=>G.id!==U))},[n,N]),P=W.useMemo(()=>n.filter(U=>(w.maquinaId===""||U.maquinaId===w.maquinaId)&&(w.curso===""||U.curso===w.curso)&&(w.profesor===""||U.profesorResponsable.toLowerCase().includes(w.profesor.toLowerCase()))&&(w.fecha===""||U.fecha===w.fecha)).sort((U,G)=>new Date(G.fecha).getTime()-new Date(U.fecha).getTime()),[n,w]),E=W.useMemo(()=>new Map(t.map(U=>[U.id,U])),[t]),T=()=>{const U=P.map(oe=>{var ee,le;return{Fecha:oe.fecha,Curso:oe.curso,Profesor:oe.profesorResponsable,Mquina:((ee=E.get(oe.maquinaId))==null?void 0:ee.nombre)||"N/A",Especialidad:((le=E.get(oe.maquinaId))==null?void 0:le.especialidad)||"N/A","Total Horas":oe.totalHoras,Observaciones:oe.observaciones}}),G=mu.json_to_sheet(U),q=mu.book_new();mu.book_append_sheet(q,G,"RegistrosPaol"),m4(q,"Registros_Paol.xlsx")},k=()=>{const U=new En;Pc(U,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:P.map(G=>{var q,oe;return[G.fecha,G.curso,G.profesorResponsable,((q=E.get(G.maquinaId))==null?void 0:q.nombre)||"N/A",((oe=E.get(G.maquinaId))==null?void 0:oe.especialidad)||"N/A",G.totalHoras,G.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:G=>{U.setFontSize(10),U.setFont("helvetica","bold"),U.text("LICEO INDUSTRIAL DE RECOLETA",G.settings.margin.left,15)}}),U.save("Registros_Paol.pdf")},z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",M=()=>{const U=o||a,G=o?l:i;return u.jsxs("form",{onSubmit:R,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),u.jsx("input",{name:"fecha",type:"date",value:U.fecha,onChange:q=>G({...U,fecha:q.target.value}),className:z,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Curso"}),u.jsxs("select",{name:"curso",value:U.curso,onChange:q=>G({...U,curso:q.target.value}),className:z,required:!0,children:[u.jsx("option",{value:"",children:"Curso"}),ai.map(q=>u.jsx("option",{children:q},q))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),u.jsxs("select",{name:"profesorResponsable",value:U.profesorResponsable,onChange:q=>G({...U,profesorResponsable:q.target.value}),className:z,required:!0,children:[u.jsx("option",{value:"",children:"Profesor Responsable"}),IT.map(q=>u.jsx("option",{value:q,children:q},q))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Mquina"}),u.jsxs("select",{name:"maquinaId",value:U.maquinaId,onChange:q=>G({...U,maquinaId:q.target.value}),className:z,required:!0,children:[u.jsx("option",{value:"",children:"Mquina"}),t.map(q=>u.jsx("option",{value:q.id,children:q.nombre},q.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),u.jsx("input",{name:"totalHoras",type:"number",value:U.totalHoras,onChange:q=>G({...U,totalHoras:Number(q.target.value)}),className:z,required:!0,min:"0.5",step:"0.5"})]}),u.jsxs("div",{className:"lg:col-span-3",children:[u.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),u.jsx("textarea",{name:"observaciones",value:U.observaciones,onChange:q=>G({...U,observaciones:q.target.value}),placeholder:"Observaciones...",className:`${z}`,rows:1})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&u.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Paol: Registro de Uso de Mquinas"}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),M()]}),u.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Mquinas"}),u.jsxs("form",{onSubmit:F,className:"flex gap-2 mb-4",children:[u.jsx("input",{value:A.nombre,onChange:U=>h({...A,nombre:U.target.value}),placeholder:"Nombre mquina",className:z}),u.jsxs("select",{value:A.especialidad,onChange:U=>h({...A,especialidad:U.target.value}),className:z,children:[u.jsx("option",{value:"Industrial",children:"Industrial"}),u.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),u.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:p?"":"+"})]}),u.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(U=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[u.jsxs("span",{children:[U.nombre," ",u.jsxs("span",{className:"text-xs text-slate-500",children:["(",U.especialidad,")"]})]}),u.jsxs("div",{className:"space-x-2",children:[u.jsx("button",{onClick:()=>{g(U),h(U)},className:"text-blue-500",children:""}),u.jsx("button",{onClick:()=>D(U.id),className:"text-red-500",children:""})]})]},U.id))})]}),u.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:T,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),u.jsx("button",{onClick:k,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[u.jsx("input",{type:"date",value:w.fecha,onChange:U=>x({...w,fecha:U.target.value}),className:z}),u.jsxs("select",{value:w.curso,onChange:U=>x({...w,curso:U.target.value}),className:z,children:[u.jsx("option",{value:"",children:"Todos los Cursos"}),ai.map(U=>u.jsx("option",{children:U},U))]}),u.jsxs("select",{value:w.maquinaId,onChange:U=>x({...w,maquinaId:U.target.value}),className:z,children:[u.jsx("option",{value:"",children:"Todas las Mquinas"}),t.map(U=>u.jsx("option",{value:U.id,children:U.nombre},U.id))]}),u.jsx("input",{value:w.profesor,onChange:U=>x({...w,profesor:U.target.value}),placeholder:"Buscar profesor...",className:z})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Mquina"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:P.map(U=>{var G;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:U.fecha}),u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((G=E.get(U.maquinaId))==null?void 0:G.nombre)||"N/A"}),u.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[U.profesorResponsable," (",U.curso,")"]}),u.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:U.totalHoras}),u.jsxs("td",{className:"px-3 py-2 text-center",children:[u.jsx("button",{onClick:()=>l(U),className:"text-blue-500",children:""}),u.jsx("button",{onClick:()=>j(U.id),className:"text-red-500 ml-2",children:""})]})]},U.id)})})]})})]})]})]})};function Fl(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Fl(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var FS={exports:{}},DS={},LS={exports:{}},RS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GP;function vBe(){if(GP)return RS;GP=1;var t=Bx();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,p){var g=p(),w=r({inst:{value:g,getSnapshot:p}}),x=w[0].inst,S=w[1];return a(function(){x.value=g,x.getSnapshot=p,l(x)&&S({inst:x})},[h,g,p]),s(function(){return l(x)&&S({inst:x}),h(function(){l(x)&&S({inst:x})})},[h]),i(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function c(h,p){return p()}var A=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return RS.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:A,RS}var qP;function xBe(){return qP||(qP=1,LS.exports=vBe()),LS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KP;function yBe(){if(KP)return DS;KP=1;var t=Bx(),e=xBe();function n(c,A){return c===A&&(c!==0||1/c===1/A)||c!==c&&A!==A}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return DS.useSyncExternalStoreWithSelector=function(c,A,h,p,g){var w=a(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=o(function(){function N(P){if(!F){if(F=!0,D=P,P=p(P),g!==void 0&&x.hasValue){var E=x.value;if(g(E,P))return R=E}return R=P}if(E=R,r(D,P))return E;var T=p(P);return g!==void 0&&g(E,T)?(D=P,E):(D=P,R=T)}var F=!1,D,R,j=h===void 0?null:h;return[function(){return N(A())},j===null?void 0:function(){return N(j())}]},[A,h,p,g]);var S=s(c,w[0],w[1]);return i(function(){x.hasValue=!0,x.value=S},[S]),l(S),S},DS}var $P;function wBe(){return $P||($P=1,FS.exports=yBe()),FS.exports}var bBe=wBe();const _Be=Nx(bBe),CBe={},WP=t=>{let e;const n=new Set,r=(A,h)=>{const p=typeof A=="function"?A(e):A;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(w=>w(e,g))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>c,subscribe:A=>(n.add(A),()=>n.delete(A)),destroy:()=>{(CBe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,s,l);return l},EBe=t=>t?WP(t):WP,{useDebugValue:SBe}=yt,{useSyncExternalStoreWithSelector:TBe}=_Be,NBe=t=>t;function fV(t,e=NBe,n){const r=TBe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return SBe(r),r}const YP=(t,e)=>{const n=EBe(t),r=(s,a=e)=>fV(n,s,a);return Object.assign(r,n),r},BBe=(t,e)=>t?YP(t,e):YP;function ul(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var kBe={value:()=>{}};function M_(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zw(n)}function zw(t){this._=t}function IBe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zw.prototype=M_.prototype={constructor:zw,on:function(t,e){var n=this._,r=IBe(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=FBe(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=XP(n[s],t.name,e);else if(e==null)for(s in n)n[s]=XP(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zw(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function FBe(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function XP(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=kBe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Q5="http://www.w3.org/1999/xhtml";const JP={svg:"http://www.w3.org/2000/svg",xhtml:Q5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function U_(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),JP.hasOwnProperty(e)?{space:JP[e],local:t}:t}function DBe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q5&&e.documentElement.namespaceURI===Q5?e.createElement(t):e.createElementNS(n,t)}}function LBe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hV(t){var e=U_(t);return(e.local?LBe:DBe)(e)}function RBe(){}function M4(t){return t==null?RBe:function(){return this.querySelector(t)}}function PBe(t){typeof t!="function"&&(t=M4(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=new Array(i),l,c,A=0;A<i;++A)(l=a[A])&&(c=t.call(l,l.__data__,A,a))&&("__data__"in l&&(c.__data__=l.__data__),o[A]=c);return new jc(r,this._parents)}function MBe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function UBe(){return[]}function mV(t){return t==null?UBe:function(){return this.querySelectorAll(t)}}function OBe(t){return function(){return MBe(t.apply(this,arguments))}}function jBe(t){typeof t=="function"?t=OBe(t):t=mV(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var i=e[a],o=i.length,l,c=0;c<o;++c)(l=i[c])&&(r.push(t.call(l,l.__data__,c,i)),s.push(l));return new jc(r,s)}function pV(t){return function(){return this.matches(t)}}function gV(t){return function(e){return e.matches(t)}}var HBe=Array.prototype.find;function QBe(t){return function(){return HBe.call(this.children,t)}}function VBe(){return this.firstElementChild}function zBe(t){return this.select(t==null?VBe:QBe(typeof t=="function"?t:gV(t)))}var GBe=Array.prototype.filter;function qBe(){return Array.from(this.children)}function KBe(t){return function(){return GBe.call(this.children,t)}}function $Be(t){return this.selectAll(t==null?qBe:KBe(typeof t=="function"?t:gV(t)))}function WBe(t){typeof t!="function"&&(t=pV(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,c=0;c<i;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new jc(r,this._parents)}function vV(t){return new Array(t.length)}function YBe(){return new jc(this._enter||this._groups.map(vV),this._parents)}function Ab(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ab.prototype={constructor:Ab,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function XBe(t){return function(){return t}}function JBe(t,e,n,r,s,a){for(var i=0,o,l=e.length,c=a.length;i<c;++i)(o=e[i])?(o.__data__=a[i],r[i]=o):n[i]=new Ab(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function ZBe(t,e,n,r,s,a,i){var o,l,c=new Map,A=e.length,h=a.length,p=new Array(A),g;for(o=0;o<A;++o)(l=e[o])&&(p[o]=g=i.call(l,l.__data__,o,e)+"",c.has(g)?s[o]=l:c.set(g,l));for(o=0;o<h;++o)g=i.call(t,a[o],o,a)+"",(l=c.get(g))?(r[o]=l,l.__data__=a[o],c.delete(g)):n[o]=new Ab(t,a[o]);for(o=0;o<A;++o)(l=e[o])&&c.get(p[o])===l&&(s[o]=l)}function e4e(t){return t.__data__}function t4e(t,e){if(!arguments.length)return Array.from(this,e4e);var n=e?ZBe:JBe,r=this._parents,s=this._groups;typeof t!="function"&&(t=XBe(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var A=r[c],h=s[c],p=h.length,g=n4e(t.call(A,A&&A.__data__,c,r)),w=g.length,x=o[c]=new Array(w),S=i[c]=new Array(w),N=l[c]=new Array(p);n(A,h,x,S,N,g,e);for(var F=0,D=0,R,j;F<w;++F)if(R=x[F]){for(F>=D&&(D=F+1);!(j=S[D])&&++D<w;);R._next=j||null}}return i=new jc(i,r),i._enter=o,i._exit=l,i}function n4e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function r4e(){return new jc(this._exit||this._groups.map(vV),this._parents)}function s4e(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function a4e(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var c=n[l],A=r[l],h=c.length,p=o[l]=new Array(h),g,w=0;w<h;++w)(g=c[w]||A[w])&&(p[w]=g);for(;l<s;++l)o[l]=n[l];return new jc(o,this._parents)}function i4e(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function o4e(t){t||(t=l4e);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],o=i.length,l=s[a]=new Array(o),c,A=0;A<o;++A)(c=i[A])&&(l[A]=c);l.sort(e)}return new jc(s,this._parents).order()}function l4e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function c4e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function u4e(){return Array.from(this)}function d4e(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function A4e(){let t=0;for(const e of this)++t;return t}function f4e(){return!this.node()}function h4e(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function m4e(t){return function(){this.removeAttribute(t)}}function p4e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function g4e(t,e){return function(){this.setAttribute(t,e)}}function v4e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function x4e(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function y4e(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function w4e(t,e){var n=U_(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?p4e:m4e:typeof e=="function"?n.local?y4e:x4e:n.local?v4e:g4e)(n,e))}function xV(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function b4e(t){return function(){this.style.removeProperty(t)}}function _4e(t,e,n){return function(){this.style.setProperty(t,e,n)}}function C4e(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function E4e(t,e,n){return arguments.length>1?this.each((e==null?b4e:typeof e=="function"?C4e:_4e)(t,e,n??"")):Ep(this.node(),t)}function Ep(t,e){return t.style.getPropertyValue(e)||xV(t).getComputedStyle(t,null).getPropertyValue(e)}function S4e(t){return function(){delete this[t]}}function T4e(t,e){return function(){this[t]=e}}function N4e(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function B4e(t,e){return arguments.length>1?this.each((e==null?S4e:typeof e=="function"?N4e:T4e)(t,e)):this.node()[t]}function yV(t){return t.trim().split(/^|\s+/)}function U4(t){return t.classList||new wV(t)}function wV(t){this._node=t,this._names=yV(t.getAttribute("class")||"")}wV.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bV(t,e){for(var n=U4(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function _V(t,e){for(var n=U4(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function k4e(t){return function(){bV(this,t)}}function I4e(t){return function(){_V(this,t)}}function F4e(t,e){return function(){(e.apply(this,arguments)?bV:_V)(this,t)}}function D4e(t,e){var n=yV(t+"");if(arguments.length<2){for(var r=U4(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?F4e:e?k4e:I4e)(n,e))}function L4e(){this.textContent=""}function R4e(t){return function(){this.textContent=t}}function P4e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function M4e(t){return arguments.length?this.each(t==null?L4e:(typeof t=="function"?P4e:R4e)(t)):this.node().textContent}function U4e(){this.innerHTML=""}function O4e(t){return function(){this.innerHTML=t}}function j4e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function H4e(t){return arguments.length?this.each(t==null?U4e:(typeof t=="function"?j4e:O4e)(t)):this.node().innerHTML}function Q4e(){this.nextSibling&&this.parentNode.appendChild(this)}function V4e(){return this.each(Q4e)}function z4e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G4e(){return this.each(z4e)}function q4e(t){var e=typeof t=="function"?t:hV(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function K4e(){return null}function $4e(t,e){var n=typeof t=="function"?t:hV(t),r=e==null?K4e:typeof e=="function"?e:M4(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function W4e(){var t=this.parentNode;t&&t.removeChild(this)}function Y4e(){return this.each(W4e)}function X4e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function J4e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z4e(t){return this.select(t?J4e:X4e)}function eke(t){return arguments.length?this.property("__data__",t):this.node().__data__}function tke(t){return function(e){t.call(this,e,this.__data__)}}function nke(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function rke(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function ske(t,e,n){return function(){var r=this.__on,s,a=tke(e);if(r){for(var i=0,o=r.length;i<o;++i)if((s=r[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function ake(t,e,n){var r=nke(t+""),s,a=r.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,A;l<c;++l)for(s=0,A=o[l];s<a;++s)if((i=r[s]).type===A.type&&i.name===A.name)return A.value}return}for(o=e?ske:rke,s=0;s<a;++s)this.each(o(r[s],e,n));return this}function CV(t,e,n){var r=xV(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function ike(t,e){return function(){return CV(this,t,e)}}function oke(t,e){return function(){return CV(this,t,e.apply(this,arguments))}}function lke(t,e){return this.each((typeof e=="function"?oke:ike)(t,e))}function*cke(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var EV=[null];function jc(t,e){this._groups=t,this._parents=e}function l1(){return new jc([[document.documentElement]],EV)}function uke(){return this}jc.prototype=l1.prototype={constructor:jc,select:PBe,selectAll:jBe,selectChild:zBe,selectChildren:$Be,filter:WBe,data:t4e,enter:YBe,exit:r4e,join:s4e,merge:a4e,selection:uke,order:i4e,sort:o4e,call:c4e,nodes:u4e,node:d4e,size:A4e,empty:f4e,each:h4e,attr:w4e,style:E4e,property:B4e,classed:D4e,text:M4e,html:H4e,raise:V4e,lower:G4e,append:q4e,insert:$4e,remove:Y4e,clone:Z4e,datum:eke,on:ake,dispatch:lke,[Symbol.iterator]:cke};function hu(t){return typeof t=="string"?new jc([[document.querySelector(t)]],[document.documentElement]):new jc([[t]],EV)}function dke(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Cd(t,e){if(t=dke(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ake={passive:!1},xx={capture:!0,passive:!1};function PS(t){t.stopImmediatePropagation()}function ip(t){t.preventDefault(),t.stopImmediatePropagation()}function SV(t){var e=t.document.documentElement,n=hu(t).on("dragstart.drag",ip,xx);"onselectstart"in e?n.on("selectstart.drag",ip,xx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function TV(t,e){var n=t.document.documentElement,r=hu(t).on("dragstart.drag",null);e&&(r.on("click.drag",ip,xx),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sw=t=>()=>t;function V5(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:i,y:o,dx:l,dy:c,dispatch:A}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:A}})}V5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function fke(t){return!t.ctrlKey&&!t.button}function hke(){return this.parentNode}function mke(t,e){return e??{x:t.x,y:t.y}}function pke(){return navigator.maxTouchPoints||"ontouchstart"in this}function gke(){var t=fke,e=hke,n=mke,r=pke,s={},a=M_("start","drag","end"),i=0,o,l,c,A,h=0;function p(R){R.on("mousedown.drag",g).filter(r).on("touchstart.drag",S).on("touchmove.drag",N,Ake).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(R,j){if(!(A||!t.call(this,R,j))){var P=D(this,e.call(this,R,j),R,j,"mouse");P&&(hu(R.view).on("mousemove.drag",w,xx).on("mouseup.drag",x,xx),SV(R.view),PS(R),c=!1,o=R.clientX,l=R.clientY,P("start",R))}}function w(R){if(ip(R),!c){var j=R.clientX-o,P=R.clientY-l;c=j*j+P*P>h}s.mouse("drag",R)}function x(R){hu(R.view).on("mousemove.drag mouseup.drag",null),TV(R.view,c),ip(R),s.mouse("end",R)}function S(R,j){if(t.call(this,R,j)){var P=R.changedTouches,E=e.call(this,R,j),T=P.length,k,z;for(k=0;k<T;++k)(z=D(this,E,R,j,P[k].identifier,P[k]))&&(PS(R),z("start",R,P[k]))}}function N(R){var j=R.changedTouches,P=j.length,E,T;for(E=0;E<P;++E)(T=s[j[E].identifier])&&(ip(R),T("drag",R,j[E]))}function F(R){var j=R.changedTouches,P=j.length,E,T;for(A&&clearTimeout(A),A=setTimeout(function(){A=null},500),E=0;E<P;++E)(T=s[j[E].identifier])&&(PS(R),T("end",R,j[E]))}function D(R,j,P,E,T,k){var z=a.copy(),M=Cd(k||P,j),U,G,q;if((q=n.call(R,new V5("beforestart",{sourceEvent:P,target:p,identifier:T,active:i,x:M[0],y:M[1],dx:0,dy:0,dispatch:z}),E))!=null)return U=q.x-M[0]||0,G=q.y-M[1]||0,function oe(ee,le,K){var ne=M,J;switch(ee){case"start":s[T]=oe,J=i++;break;case"end":delete s[T],--i;case"drag":M=Cd(K||le,j),J=i;break}z.call(ee,R,new V5(ee,{sourceEvent:le,subject:q,target:p,identifier:T,active:J,x:M[0]+U,y:M[1]+G,dx:M[0]-ne[0],dy:M[1]-ne[1],dispatch:z}),E)}}return p.filter=function(R){return arguments.length?(t=typeof R=="function"?R:sw(!!R),p):t},p.container=function(R){return arguments.length?(e=typeof R=="function"?R:sw(R),p):e},p.subject=function(R){return arguments.length?(n=typeof R=="function"?R:sw(R),p):n},p.touchable=function(R){return arguments.length?(r=typeof R=="function"?R:sw(!!R),p):r},p.on=function(){var R=a.on.apply(a,arguments);return R===a?p:R},p.clickDistance=function(R){return arguments.length?(h=(R=+R)*R,p):Math.sqrt(h)},p}function O4(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function NV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function c1(){}var yx=.7,fb=1/yx,op="\\s*([+-]?\\d+)\\s*",wx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ud="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vke=/^#([0-9a-f]{3,8})$/,xke=new RegExp(`^rgb\\(${op},${op},${op}\\)$`),yke=new RegExp(`^rgb\\(${Ud},${Ud},${Ud}\\)$`),wke=new RegExp(`^rgba\\(${op},${op},${op},${wx}\\)$`),bke=new RegExp(`^rgba\\(${Ud},${Ud},${Ud},${wx}\\)$`),_ke=new RegExp(`^hsl\\(${wx},${Ud},${Ud}\\)$`),Cke=new RegExp(`^hsla\\(${wx},${Ud},${Ud},${wx}\\)$`),ZP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};O4(c1,bx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:eM,formatHex:eM,formatHex8:Eke,formatHsl:Ske,formatRgb:tM,toString:tM});function eM(){return this.rgb().formatHex()}function Eke(){return this.rgb().formatHex8()}function Ske(){return BV(this).formatHsl()}function tM(){return this.rgb().formatRgb()}function bx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vke.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?nM(e):n===3?new sc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?aw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?aw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xke.exec(t))?new sc(e[1],e[2],e[3],1):(e=yke.exec(t))?new sc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wke.exec(t))?aw(e[1],e[2],e[3],e[4]):(e=bke.exec(t))?aw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_ke.exec(t))?aM(e[1],e[2]/100,e[3]/100,1):(e=Cke.exec(t))?aM(e[1],e[2]/100,e[3]/100,e[4]):ZP.hasOwnProperty(t)?nM(ZP[t]):t==="transparent"?new sc(NaN,NaN,NaN,0):null}function nM(t){return new sc(t>>16&255,t>>8&255,t&255,1)}function aw(t,e,n,r){return r<=0&&(t=e=n=NaN),new sc(t,e,n,r)}function Tke(t){return t instanceof c1||(t=bx(t)),t?(t=t.rgb(),new sc(t.r,t.g,t.b,t.opacity)):new sc}function z5(t,e,n,r){return arguments.length===1?Tke(t):new sc(t,e,n,r??1)}function sc(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}O4(sc,z5,NV(c1,{brighter(t){return t=t==null?fb:Math.pow(fb,t),new sc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yx:Math.pow(yx,t),new sc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sc(r0(this.r),r0(this.g),r0(this.b),hb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rM,formatHex:rM,formatHex8:Nke,formatRgb:sM,toString:sM}));function rM(){return`#${Gh(this.r)}${Gh(this.g)}${Gh(this.b)}`}function Nke(){return`#${Gh(this.r)}${Gh(this.g)}${Gh(this.b)}${Gh((isNaN(this.opacity)?1:this.opacity)*255)}`}function sM(){const t=hb(this.opacity);return`${t===1?"rgb(":"rgba("}${r0(this.r)}, ${r0(this.g)}, ${r0(this.b)}${t===1?")":`, ${t})`}`}function hb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function r0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gh(t){return t=r0(t),(t<16?"0":"")+t.toString(16)}function aM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qu(t,e,n,r)}function BV(t){if(t instanceof Qu)return new Qu(t.h,t.s,t.l,t.opacity);if(t instanceof c1||(t=bx(t)),!t)return new Qu;if(t instanceof Qu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Qu(i,o,l,t.opacity)}function Bke(t,e,n,r){return arguments.length===1?BV(t):new Qu(t,e,n,r??1)}function Qu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}O4(Qu,Bke,NV(c1,{brighter(t){return t=t==null?fb:Math.pow(fb,t),new Qu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yx:Math.pow(yx,t),new Qu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new sc(MS(t>=240?t-240:t+120,s,r),MS(t,s,r),MS(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Qu(iM(this.h),iw(this.s),iw(this.l),hb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=hb(this.opacity);return`${t===1?"hsl(":"hsla("}${iM(this.h)}, ${iw(this.s)*100}%, ${iw(this.l)*100}%${t===1?")":`, ${t})`}`}}));function iM(t){return t=(t||0)%360,t<0?t+360:t}function iw(t){return Math.max(0,Math.min(1,t||0))}function MS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const kV=t=>()=>t;function kke(t,e){return function(n){return t+n*e}}function Ike(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Fke(t){return(t=+t)==1?IV:function(e,n){return n-e?Ike(e,n,t):kV(isNaN(e)?n:e)}}function IV(t,e){var n=e-t;return n?kke(t,n):kV(isNaN(t)?e:t)}const oM=function t(e){var n=Fke(e);function r(s,a){var i=n((s=z5(s)).r,(a=z5(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),c=IV(s.opacity,a.opacity);return function(A){return s.r=i(A),s.g=o(A),s.b=l(A),s.opacity=c(A),s+""}}return r.gamma=t,r}(1);function xf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var G5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,US=new RegExp(G5.source,"g");function Dke(t){return function(){return t}}function Lke(t){return function(e){return t(e)+""}}function Rke(t,e){var n=G5.lastIndex=US.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=G5.exec(t))&&(s=US.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:xf(r,s)})),n=US.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?Lke(l[0].x):Dke(e):(e=l.length,function(c){for(var A=0,h;A<e;++A)o[(h=l[A]).i]=h.x(c);return o.join("")})}var lM=180/Math.PI,q5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function FV(t,e,n,r,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*lM,skewX:Math.atan(l)*lM,scaleX:i,scaleY:o}}var ow;function Pke(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?q5:FV(e.a,e.b,e.c,e.d,e.e,e.f)}function Mke(t){return t==null||(ow||(ow=document.createElementNS("http://www.w3.org/2000/svg","g")),ow.setAttribute("transform",t),!(t=ow.transform.baseVal.consolidate()))?q5:(t=t.matrix,FV(t.a,t.b,t.c,t.d,t.e,t.f))}function DV(t,e,n,r){function s(c){return c.length?c.pop()+" ":""}function a(c,A,h,p,g,w){if(c!==h||A!==p){var x=g.push("translate(",null,e,null,n);w.push({i:x-4,x:xf(c,h)},{i:x-2,x:xf(A,p)})}else(h||p)&&g.push("translate("+h+e+p+n)}function i(c,A,h,p){c!==A?(c-A>180?A+=360:A-c>180&&(c+=360),p.push({i:h.push(s(h)+"rotate(",null,r)-2,x:xf(c,A)})):A&&h.push(s(h)+"rotate("+A+r)}function o(c,A,h,p){c!==A?p.push({i:h.push(s(h)+"skewX(",null,r)-2,x:xf(c,A)}):A&&h.push(s(h)+"skewX("+A+r)}function l(c,A,h,p,g,w){if(c!==h||A!==p){var x=g.push(s(g)+"scale(",null,",",null,")");w.push({i:x-4,x:xf(c,h)},{i:x-2,x:xf(A,p)})}else(h!==1||p!==1)&&g.push(s(g)+"scale("+h+","+p+")")}return function(c,A){var h=[],p=[];return c=t(c),A=t(A),a(c.translateX,c.translateY,A.translateX,A.translateY,h,p),i(c.rotate,A.rotate,h,p),o(c.skewX,A.skewX,h,p),l(c.scaleX,c.scaleY,A.scaleX,A.scaleY,h,p),c=A=null,function(g){for(var w=-1,x=p.length,S;++w<x;)h[(S=p[w]).i]=S.x(g);return h.join("")}}}var Uke=DV(Pke,"px, ","px)","deg)"),Oke=DV(Mke,", ",")",")"),jke=1e-12;function cM(t){return((t=Math.exp(t))+1/t)/2}function Hke(t){return((t=Math.exp(t))-1/t)/2}function Qke(t){return((t=Math.exp(2*t))-1)/(t+1)}const Vke=function t(e,n,r){function s(a,i){var o=a[0],l=a[1],c=a[2],A=i[0],h=i[1],p=i[2],g=A-o,w=h-l,x=g*g+w*w,S,N;if(x<jke)N=Math.log(p/c)/e,S=function(E){return[o+E*g,l+E*w,c*Math.exp(e*E*N)]};else{var F=Math.sqrt(x),D=(p*p-c*c+r*x)/(2*c*n*F),R=(p*p-c*c-r*x)/(2*p*n*F),j=Math.log(Math.sqrt(D*D+1)-D),P=Math.log(Math.sqrt(R*R+1)-R);N=(P-j)/e,S=function(E){var T=E*N,k=cM(j),z=c/(n*F)*(k*Qke(e*T+j)-Hke(j));return[o+z*g,l+z*w,c*k/cM(e*T+j)]}}return S.duration=N*1e3*e/Math.SQRT2,S}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var Sp=0,Av=0,Hg=0,LV=1e3,mb,fv,pb=0,x0=0,O_=0,_x=typeof performance=="object"&&performance.now?performance:Date,RV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function j4(){return x0||(RV(zke),x0=_x.now()+O_)}function zke(){x0=0}function gb(){this._call=this._time=this._next=null}gb.prototype=PV.prototype={constructor:gb,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?j4():+n)+(e==null?0:+e),!this._next&&fv!==this&&(fv?fv._next=this:mb=this,fv=this),this._call=t,this._time=n,K5()},stop:function(){this._call&&(this._call=null,this._time=1/0,K5())}};function PV(t,e,n){var r=new gb;return r.restart(t,e,n),r}function Gke(){j4(),++Sp;for(var t=mb,e;t;)(e=x0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Sp}function uM(){x0=(pb=_x.now())+O_,Sp=Av=0;try{Gke()}finally{Sp=0,Kke(),x0=0}}function qke(){var t=_x.now(),e=t-pb;e>LV&&(O_-=e,pb=t)}function Kke(){for(var t,e=mb,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mb=n);fv=t,K5(r)}function K5(t){if(!Sp){Av&&(Av=clearTimeout(Av));var e=t-x0;e>24?(t<1/0&&(Av=setTimeout(uM,t-_x.now()-O_)),Hg&&(Hg=clearInterval(Hg))):(Hg||(pb=_x.now(),Hg=setInterval(qke,LV)),Sp=1,RV(uM))}}function dM(t,e,n){var r=new gb;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var $ke=M_("start","end","cancel","interrupt"),Wke=[],MV=0,AM=1,$5=2,Gw=3,fM=4,W5=5,qw=6;function j_(t,e,n,r,s,a){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;Yke(t,n,{name:e,index:r,group:s,on:$ke,tween:Wke,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:MV})}function H4(t,e){var n=ed(t,e);if(n.state>MV)throw new Error("too late; already scheduled");return n}function $d(t,e){var n=ed(t,e);if(n.state>Gw)throw new Error("too late; already running");return n}function ed(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Yke(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=PV(a,0,n.time);function a(c){n.state=AM,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var A,h,p,g;if(n.state!==AM)return l();for(A in r)if(g=r[A],g.name===n.name){if(g.state===Gw)return dM(i);g.state===fM?(g.state=qw,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[A]):+A<e&&(g.state=qw,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[A])}if(dM(function(){n.state===Gw&&(n.state=fM,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=$5,n.on.call("start",t,t.__data__,n.index,n.group),n.state===$5){for(n.state=Gw,s=new Array(p=n.tween.length),A=0,h=-1;A<p;++A)(g=n.tween[A].value.call(t,t.__data__,n.index,n.group))&&(s[++h]=g);s.length=h+1}}function o(c){for(var A=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=W5,1),h=-1,p=s.length;++h<p;)s[h].call(t,A);n.state===W5&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=qw,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Kw(t,e){var n=t.__transition,r,s,a=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((r=n[i]).name!==e){a=!1;continue}s=r.state>$5&&r.state<W5,r.state=qw,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[i]}a&&delete t.__transition}}function Xke(t){return this.each(function(){Kw(this,t)})}function Jke(t,e){var n,r;return function(){var s=$d(this,t),a=s.tween;if(a!==n){r=n=a;for(var i=0,o=r.length;i<o;++i)if(r[i].name===e){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function Zke(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=$d(this,t),i=a.tween;if(i!==r){s=(r=i).slice();for(var o={name:e,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===e){s[l]=o;break}l===c&&s.push(o)}a.tween=s}}function eIe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ed(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((e==null?Jke:Zke)(n,t,e))}function Q4(t,e,n){var r=t._id;return t.each(function(){var s=$d(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ed(s,r).value[e]}}function UV(t,e){var n;return(typeof e=="number"?xf:e instanceof bx?oM:(n=bx(e))?(e=n,oM):Rke)(t,e)}function tIe(t){return function(){this.removeAttribute(t)}}function nIe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rIe(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===r?a:a=e(r=i,n)}}function sIe(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===r?a:a=e(r=i,n)}}function aIe(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function iIe(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function oIe(t,e){var n=U_(t),r=n==="transform"?Oke:UV;return this.attrTween(t,typeof e=="function"?(n.local?iIe:aIe)(n,r,Q4(this,"attr."+t,e)):e==null?(n.local?nIe:tIe)(n):(n.local?sIe:rIe)(n,r,e))}function lIe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function cIe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function uIe(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&cIe(t,a)),n}return s._value=e,s}function dIe(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&lIe(t,a)),n}return s._value=e,s}function AIe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=U_(t);return this.tween(n,(r.local?uIe:dIe)(r,e))}function fIe(t,e){return function(){H4(this,t).delay=+e.apply(this,arguments)}}function hIe(t,e){return e=+e,function(){H4(this,t).delay=e}}function mIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fIe:hIe)(e,t)):ed(this.node(),e).delay}function pIe(t,e){return function(){$d(this,t).duration=+e.apply(this,arguments)}}function gIe(t,e){return e=+e,function(){$d(this,t).duration=e}}function vIe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pIe:gIe)(e,t)):ed(this.node(),e).duration}function xIe(t,e){if(typeof e!="function")throw new Error;return function(){$d(this,t).ease=e}}function yIe(t){var e=this._id;return arguments.length?this.each(xIe(e,t)):ed(this.node(),e).ease}function wIe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;$d(this,t).ease=n}}function bIe(t){if(typeof t!="function")throw new Error;return this.each(wIe(this._id,t))}function _Ie(t){typeof t!="function"&&(t=pV(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,c=0;c<i;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new IA(r,this._parents,this._name,this._id)}function CIe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),i=new Array(r),o=0;o<a;++o)for(var l=e[o],c=n[o],A=l.length,h=i[o]=new Array(A),p,g=0;g<A;++g)(p=l[g]||c[g])&&(h[g]=p);for(;o<r;++o)i[o]=e[o];return new IA(i,this._parents,this._name,this._id)}function EIe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function SIe(t,e,n){var r,s,a=EIe(e)?H4:$d;return function(){var i=a(this,t),o=i.on;o!==r&&(s=(r=o).copy()).on(e,n),i.on=s}}function TIe(t,e){var n=this._id;return arguments.length<2?ed(this.node(),n).on.on(t):this.each(SIe(n,t,e))}function NIe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function BIe(){return this.on("end.remove",NIe(this._id))}function kIe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=M4(t));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,c=a[i]=new Array(l),A,h,p=0;p<l;++p)(A=o[p])&&(h=t.call(A,A.__data__,p,o))&&("__data__"in A&&(h.__data__=A.__data__),c[p]=h,j_(c[p],e,n,p,c,ed(A,n)));return new IA(a,this._parents,e,n)}function IIe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mV(t));for(var r=this._groups,s=r.length,a=[],i=[],o=0;o<s;++o)for(var l=r[o],c=l.length,A,h=0;h<c;++h)if(A=l[h]){for(var p=t.call(A,A.__data__,h,l),g,w=ed(A,n),x=0,S=p.length;x<S;++x)(g=p[x])&&j_(g,e,n,x,p,w);a.push(p),i.push(A)}return new IA(a,i,e,n)}var FIe=l1.prototype.constructor;function DIe(){return new FIe(this._groups,this._parents)}function LIe(t,e){var n,r,s;return function(){var a=Ep(this,t),i=(this.style.removeProperty(t),Ep(this,t));return a===i?null:a===n&&i===r?s:s=e(n=a,r=i)}}function OV(t){return function(){this.style.removeProperty(t)}}function RIe(t,e,n){var r,s=n+"",a;return function(){var i=Ep(this,t);return i===s?null:i===r?a:a=e(r=i,n)}}function PIe(t,e,n){var r,s,a;return function(){var i=Ep(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Ep(this,t))),i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o))}}function MIe(t,e){var n,r,s,a="style."+e,i="end."+a,o;return function(){var l=$d(this,t),c=l.on,A=l.value[a]==null?o||(o=OV(e)):void 0;(c!==n||s!==A)&&(r=(n=c).copy()).on(i,s=A),l.on=r}}function UIe(t,e,n){var r=(t+="")=="transform"?Uke:UV;return e==null?this.styleTween(t,LIe(t,r)).on("end.style."+t,OV(t)):typeof e=="function"?this.styleTween(t,PIe(t,r,Q4(this,"style."+t,e))).each(MIe(this._id,t)):this.styleTween(t,RIe(t,r,e),n).on("end.style."+t,null)}function OIe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function jIe(t,e,n){var r,s;function a(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&OIe(t,i,n)),r}return a._value=e,a}function HIe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,jIe(t,e,n??""))}function QIe(t){return function(){this.textContent=t}}function VIe(t){return function(){var e=t(this);this.textContent=e??""}}function zIe(t){return this.tween("text",typeof t=="function"?VIe(Q4(this,"text",t)):QIe(t==null?"":t+""))}function GIe(t){return function(e){this.textContent=t.call(this,e)}}function qIe(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&GIe(s)),e}return r._value=t,r}function KIe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,qIe(t))}function $Ie(){for(var t=this._name,e=this._id,n=jV(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,c=0;c<o;++c)if(l=i[c]){var A=ed(l,e);j_(l,t,n,c,i,{time:A.time+A.delay+A.duration,delay:0,duration:A.duration,ease:A.ease})}return new IA(r,this._parents,t,n)}function WIe(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var c=$d(this,r),A=c.on;A!==t&&(e=(t=A).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),s===0&&a()})}var YIe=0;function IA(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function jV(){return++YIe}var dA=l1.prototype;IA.prototype={constructor:IA,select:kIe,selectAll:IIe,selectChild:dA.selectChild,selectChildren:dA.selectChildren,filter:_Ie,merge:CIe,selection:DIe,transition:$Ie,call:dA.call,nodes:dA.nodes,node:dA.node,size:dA.size,empty:dA.empty,each:dA.each,on:TIe,attr:oIe,attrTween:AIe,style:UIe,styleTween:HIe,text:zIe,textTween:KIe,remove:BIe,tween:eIe,delay:mIe,duration:vIe,ease:yIe,easeVarying:bIe,end:WIe,[Symbol.iterator]:dA[Symbol.iterator]};function XIe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var JIe={time:null,delay:0,duration:250,ease:XIe};function ZIe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function e3e(t){var e,n;t instanceof IA?(e=t._id,t=t._name):(e=jV(),(n=JIe).time=j4(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,c=0;c<o;++c)(l=i[c])&&j_(l,t,e,c,i,n||ZIe(l,e));return new IA(r,this._parents,t,e)}l1.prototype.interrupt=Xke;l1.prototype.transition=e3e;const lw=t=>()=>t;function t3e(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function pA(t,e,n){this.k=t,this.x=e,this.y=n}pA.prototype={constructor:pA,scale:function(t){return t===1?this:new pA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new pA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zf=new pA(1,0,0);pA.prototype;function OS(t){t.stopImmediatePropagation()}function Qg(t){t.preventDefault(),t.stopImmediatePropagation()}function n3e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function r3e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function hM(){return this.__zoom||zf}function s3e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function a3e(){return navigator.maxTouchPoints||"ontouchstart"in this}function i3e(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function o3e(){var t=n3e,e=r3e,n=i3e,r=s3e,s=a3e,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=Vke,c=M_("start","zoom","end"),A,h,p,g=500,w=150,x=0,S=10;function N(q){q.property("__zoom",hM).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(q,oe,ee,le){var K=q.selection?q.selection():q;K.property("__zoom",hM),q!==K?j(q,oe,ee,le):K.interrupt().each(function(){P(this,arguments).event(le).start().zoom(null,typeof oe=="function"?oe.apply(this,arguments):oe).end()})},N.scaleBy=function(q,oe,ee,le){N.scaleTo(q,function(){var K=this.__zoom.k,ne=typeof oe=="function"?oe.apply(this,arguments):oe;return K*ne},ee,le)},N.scaleTo=function(q,oe,ee,le){N.transform(q,function(){var K=e.apply(this,arguments),ne=this.__zoom,J=ee==null?R(K):typeof ee=="function"?ee.apply(this,arguments):ee,ce=ne.invert(J),Q=typeof oe=="function"?oe.apply(this,arguments):oe;return n(D(F(ne,Q),J,ce),K,i)},ee,le)},N.translateBy=function(q,oe,ee,le){N.transform(q,function(){return n(this.__zoom.translate(typeof oe=="function"?oe.apply(this,arguments):oe,typeof ee=="function"?ee.apply(this,arguments):ee),e.apply(this,arguments),i)},null,le)},N.translateTo=function(q,oe,ee,le,K){N.transform(q,function(){var ne=e.apply(this,arguments),J=this.__zoom,ce=le==null?R(ne):typeof le=="function"?le.apply(this,arguments):le;return n(zf.translate(ce[0],ce[1]).scale(J.k).translate(typeof oe=="function"?-oe.apply(this,arguments):-oe,typeof ee=="function"?-ee.apply(this,arguments):-ee),ne,i)},le,K)};function F(q,oe){return oe=Math.max(a[0],Math.min(a[1],oe)),oe===q.k?q:new pA(oe,q.x,q.y)}function D(q,oe,ee){var le=oe[0]-ee[0]*q.k,K=oe[1]-ee[1]*q.k;return le===q.x&&K===q.y?q:new pA(q.k,le,K)}function R(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function j(q,oe,ee,le){q.on("start.zoom",function(){P(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(le).end()}).tween("zoom",function(){var K=this,ne=arguments,J=P(K,ne).event(le),ce=e.apply(K,ne),Q=ee==null?R(ce):typeof ee=="function"?ee.apply(K,ne):ee,Z=Math.max(ce[1][0]-ce[0][0],ce[1][1]-ce[0][1]),se=K.__zoom,ie=typeof oe=="function"?oe.apply(K,ne):oe,fe=l(se.invert(Q).concat(Z/se.k),ie.invert(Q).concat(Z/ie.k));return function(Se){if(Se===1)Se=ie;else{var ge=fe(Se),xe=Z/ge[2];Se=new pA(xe,Q[0]-ge[0]*xe,Q[1]-ge[1]*xe)}J.zoom(null,Se)}})}function P(q,oe,ee){return!ee&&q.__zooming||new E(q,oe)}function E(q,oe){this.that=q,this.args=oe,this.active=0,this.sourceEvent=null,this.extent=e.apply(q,oe),this.taps=0}E.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,oe){return this.mouse&&q!=="mouse"&&(this.mouse[1]=oe.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=oe.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=oe.invert(this.touch1[0])),this.that.__zoom=oe,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var oe=hu(this.that).datum();c.call(q,this.that,new t3e(q,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:c}),oe)}};function T(q,...oe){if(!t.apply(this,arguments))return;var ee=P(this,oe).event(q),le=this.__zoom,K=Math.max(a[0],Math.min(a[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=Cd(q);if(ee.wheel)(ee.mouse[0][0]!==ne[0]||ee.mouse[0][1]!==ne[1])&&(ee.mouse[1]=le.invert(ee.mouse[0]=ne)),clearTimeout(ee.wheel);else{if(le.k===K)return;ee.mouse=[ne,le.invert(ne)],Kw(this),ee.start()}Qg(q),ee.wheel=setTimeout(J,w),ee.zoom("mouse",n(D(F(le,K),ee.mouse[0],ee.mouse[1]),ee.extent,i));function J(){ee.wheel=null,ee.end()}}function k(q,...oe){if(p||!t.apply(this,arguments))return;var ee=q.currentTarget,le=P(this,oe,!0).event(q),K=hu(q.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",Z,!0),ne=Cd(q,ee),J=q.clientX,ce=q.clientY;SV(q.view),OS(q),le.mouse=[ne,this.__zoom.invert(ne)],Kw(this),le.start();function Q(se){if(Qg(se),!le.moved){var ie=se.clientX-J,fe=se.clientY-ce;le.moved=ie*ie+fe*fe>x}le.event(se).zoom("mouse",n(D(le.that.__zoom,le.mouse[0]=Cd(se,ee),le.mouse[1]),le.extent,i))}function Z(se){K.on("mousemove.zoom mouseup.zoom",null),TV(se.view,le.moved),Qg(se),le.event(se).end()}}function z(q,...oe){if(t.apply(this,arguments)){var ee=this.__zoom,le=Cd(q.changedTouches?q.changedTouches[0]:q,this),K=ee.invert(le),ne=ee.k*(q.shiftKey?.5:2),J=n(D(F(ee,ne),le,K),e.apply(this,oe),i);Qg(q),o>0?hu(this).transition().duration(o).call(j,J,le,q):hu(this).call(N.transform,J,le,q)}}function M(q,...oe){if(t.apply(this,arguments)){var ee=q.touches,le=ee.length,K=P(this,oe,q.changedTouches.length===le).event(q),ne,J,ce,Q;for(OS(q),J=0;J<le;++J)ce=ee[J],Q=Cd(ce,this),Q=[Q,this.__zoom.invert(Q),ce.identifier],K.touch0?!K.touch1&&K.touch0[2]!==Q[2]&&(K.touch1=Q,K.taps=0):(K.touch0=Q,ne=!0,K.taps=1+!!A);A&&(A=clearTimeout(A)),ne&&(K.taps<2&&(h=Q[0],A=setTimeout(function(){A=null},g)),Kw(this),K.start())}}function U(q,...oe){if(this.__zooming){var ee=P(this,oe).event(q),le=q.changedTouches,K=le.length,ne,J,ce,Q;for(Qg(q),ne=0;ne<K;++ne)J=le[ne],ce=Cd(J,this),ee.touch0&&ee.touch0[2]===J.identifier?ee.touch0[0]=ce:ee.touch1&&ee.touch1[2]===J.identifier&&(ee.touch1[0]=ce);if(J=ee.that.__zoom,ee.touch1){var Z=ee.touch0[0],se=ee.touch0[1],ie=ee.touch1[0],fe=ee.touch1[1],Se=(Se=ie[0]-Z[0])*Se+(Se=ie[1]-Z[1])*Se,ge=(ge=fe[0]-se[0])*ge+(ge=fe[1]-se[1])*ge;J=F(J,Math.sqrt(Se/ge)),ce=[(Z[0]+ie[0])/2,(Z[1]+ie[1])/2],Q=[(se[0]+fe[0])/2,(se[1]+fe[1])/2]}else if(ee.touch0)ce=ee.touch0[0],Q=ee.touch0[1];else return;ee.zoom("touch",n(D(J,ce,Q),ee.extent,i))}}function G(q,...oe){if(this.__zooming){var ee=P(this,oe).event(q),le=q.changedTouches,K=le.length,ne,J;for(OS(q),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),ne=0;ne<K;++ne)J=le[ne],ee.touch0&&ee.touch0[2]===J.identifier?delete ee.touch0:ee.touch1&&ee.touch1[2]===J.identifier&&delete ee.touch1;if(ee.touch1&&!ee.touch0&&(ee.touch0=ee.touch1,delete ee.touch1),ee.touch0)ee.touch0[1]=this.__zoom.invert(ee.touch0[0]);else if(ee.end(),ee.taps===2&&(J=Cd(J,this),Math.hypot(h[0]-J[0],h[1]-J[1])<S)){var ce=hu(this).on("dblclick.zoom");ce&&ce.apply(this,arguments)}}}return N.wheelDelta=function(q){return arguments.length?(r=typeof q=="function"?q:lw(+q),N):r},N.filter=function(q){return arguments.length?(t=typeof q=="function"?q:lw(!!q),N):t},N.touchable=function(q){return arguments.length?(s=typeof q=="function"?q:lw(!!q),N):s},N.extent=function(q){return arguments.length?(e=typeof q=="function"?q:lw([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),N):e},N.scaleExtent=function(q){return arguments.length?(a[0]=+q[0],a[1]=+q[1],N):[a[0],a[1]]},N.translateExtent=function(q){return arguments.length?(i[0][0]=+q[0][0],i[1][0]=+q[1][0],i[0][1]=+q[0][1],i[1][1]=+q[1][1],N):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},N.constrain=function(q){return arguments.length?(n=q,N):n},N.duration=function(q){return arguments.length?(o=+q,N):o},N.interpolate=function(q){return arguments.length?(l=q,N):l},N.on=function(){var q=c.on.apply(c,arguments);return q===c?N:q},N.clickDistance=function(q){return arguments.length?(x=(q=+q)*q,N):Math.sqrt(x)},N.tapDistance=function(q){return arguments.length?(S=+q,N):S},N}var HV=VU();const H_=W.createContext(null),l3e=H_.Provider,FA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},QV=FA.error001();function Ea(t,e){const n=W.useContext(H_);if(n===null)throw new Error(QV);return fV(n,t,e)}const io=()=>{const t=W.useContext(H_);if(t===null)throw new Error(QV);return W.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},c3e=t=>t.userSelectionActive?"none":"all";function VV({position:t,children:e,className:n,style:r,...s}){const a=Ea(c3e),i=`${t}`.split("-");return yt.createElement("div",{className:Fl(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},e)}function u3e({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:yt.createElement(VV,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},yt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const d3e=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:c,...A})=>{const h=W.useRef(null),[p,g]=W.useState({x:0,y:0,width:0,height:0}),w=Fl(["react-flow__edge-textwrapper",c]);return W.useEffect(()=>{if(h.current){const x=h.current.getBBox();g({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:yt.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:w,visibility:p.width?"visible":"hidden",...A},s&&yt.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),yt.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:h,style:r},n),l)};var A3e=W.memo(d3e);const V4=t=>({width:t.offsetWidth,height:t.offsetHeight}),Tp=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),z4=(t={x:0,y:0},e)=>({x:Tp(t.x,e[0][0],e[1][0]),y:Tp(t.y,e[0][1],e[1][1])}),mM=(t,e,n)=>t<e?Tp(Math.abs(t-e),1,50)/50:t>n?-Tp(Math.abs(t-n),1,50)/50:0,zV=(t,e)=>{const n=mM(t.x,35,e.width-35)*20,r=mM(t.y,35,e.height-35)*20;return[n,r]},GV=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},f3e=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),G4=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),h3e=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),pM=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Y5=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},m3e=t=>vu(t.width)&&vu(t.height)&&vu(t.x)&&vu(t.y),vu=t=>!isNaN(t)&&isFinite(t),Qa=Symbol.for("internals"),qV=["Enter"," ","Escape"],p3e=(t,e)=>{},g3e=t=>"nativeEvent"in t;function X5(t){var s,a;const e=g3e(t)?t.nativeEvent:t,n=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const KV=t=>"clientX"in t,Gf=(t,e)=>{var a,i;const n=KV(t),r=n?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},vb=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},u1=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:A,markerEnd:h,markerStart:p,interactionWidth:g=20})=>yt.createElement(yt.Fragment,null,yt.createElement("path",{id:t,style:A,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:p}),g&&yt.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&vu(n)&&vu(r)?yt.createElement(A3e,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null);u1.displayName="BaseEdge";function Vg(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function $V({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,i=Math.abs(r-e)/2,o=r<e?r+i:r-i;return[a,o,s,i]}function WV({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+n*.125,c=e*.125+a*.375+o*.375+r*.125,A=Math.abs(l-t),h=Math.abs(c-e);return[l,c,A,h]}var y0;(function(t){t.Strict="strict",t.Loose="loose"})(y0||(y0={}));var qh;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(qh||(qh={}));var Cx;(function(t){t.Partial="partial",t.Full="full"})(Cx||(Cx={}));var Sf;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Sf||(Sf={}));var xb;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(xb||(xb={}));var Tn;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Tn||(Tn={}));function gM({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Tn.Left||t===Tn.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function YV({sourceX:t,sourceY:e,sourcePosition:n=Tn.Bottom,targetX:r,targetY:s,targetPosition:a=Tn.Top}){const[i,o]=gM({pos:n,x1:t,y1:e,x2:r,y2:s}),[l,c]=gM({pos:a,x1:r,y1:s,x2:t,y2:e}),[A,h,p,g]=WV({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:c});return[`M${t},${e} C${i},${o} ${l},${c} ${r},${s}`,A,h,p,g]}const q4=W.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Tn.Bottom,targetPosition:a=Tn.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:A,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:x})=>{const[S,N,F]=YV({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return yt.createElement(u1,{path:S,labelX:N,labelY:F,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:A,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:x})});q4.displayName="SimpleBezierEdge";const vM={[Tn.Left]:{x:-1,y:0},[Tn.Right]:{x:1,y:0},[Tn.Top]:{x:0,y:-1},[Tn.Bottom]:{x:0,y:1}},v3e=({source:t,sourcePosition:e=Tn.Bottom,target:n})=>e===Tn.Left||e===Tn.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},xM=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function x3e({source:t,sourcePosition:e=Tn.Bottom,target:n,targetPosition:r=Tn.Top,center:s,offset:a}){const i=vM[e],o=vM[r],l={x:t.x+i.x*a,y:t.y+i.y*a},c={x:n.x+o.x*a,y:n.y+o.y*a},A=v3e({source:l,sourcePosition:e,target:c}),h=A.x!==0?"x":"y",p=A[h];let g=[],w,x;const S={x:0,y:0},N={x:0,y:0},[F,D,R,j]=$V({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[h]*o[h]===-1){w=s.x??F,x=s.y??D;const E=[{x:w,y:l.y},{x:w,y:c.y}],T=[{x:l.x,y:x},{x:c.x,y:x}];i[h]===p?g=h==="x"?E:T:g=h==="x"?T:E}else{const E=[{x:l.x,y:c.y}],T=[{x:c.x,y:l.y}];if(h==="x"?g=i.x===p?T:E:g=i.y===p?E:T,e===r){const G=Math.abs(t[h]-n[h]);if(G<=a){const q=Math.min(a-1,a-G);i[h]===p?S[h]=(l[h]>t[h]?-1:1)*q:N[h]=(c[h]>n[h]?-1:1)*q}}if(e!==r){const G=h==="x"?"y":"x",q=i[h]===o[G],oe=l[G]>c[G],ee=l[G]<c[G];(i[h]===1&&(!q&&oe||q&&ee)||i[h]!==1&&(!q&&ee||q&&oe))&&(g=h==="x"?E:T)}const k={x:l.x+S.x,y:l.y+S.y},z={x:c.x+N.x,y:c.y+N.y},M=Math.max(Math.abs(k.x-g[0].x),Math.abs(z.x-g[0].x)),U=Math.max(Math.abs(k.y-g[0].y),Math.abs(z.y-g[0].y));M>=U?(w=(k.x+z.x)/2,x=g[0].y):(w=g[0].x,x=(k.y+z.y)/2)}return[[t,{x:l.x+S.x,y:l.y+S.y},...g,{x:c.x+N.x,y:c.y+N.y},n],w,x,R,j]}function y3e(t,e,n,r){const s=Math.min(xM(t,e)/2,xM(e,n)/2,r),{x:a,y:i}=e;if(t.x===a&&a===n.x||t.y===i&&i===n.y)return`L${a} ${i}`;if(t.y===i){const c=t.x<n.x?-1:1,A=t.y<n.y?1:-1;return`L ${a+s*c},${i}Q ${a},${i} ${a},${i+s*A}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function J5({sourceX:t,sourceY:e,sourcePosition:n=Tn.Bottom,targetX:r,targetY:s,targetPosition:a=Tn.Top,borderRadius:i=5,centerX:o,centerY:l,offset:c=20}){const[A,h,p,g,w]=x3e({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:o,y:l},offset:c});return[A.reduce((S,N,F)=>{let D="";return F>0&&F<A.length-1?D=y3e(A[F-1],N,A[F+1],i):D=`${F===0?"M":"L"}${N.x} ${N.y}`,S+=D,S},""),h,p,g,w]}const Q_=W.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:A,sourcePosition:h=Tn.Bottom,targetPosition:p=Tn.Top,markerEnd:g,markerStart:w,pathOptions:x,interactionWidth:S})=>{const[N,F,D]=J5({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:p,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return yt.createElement(u1,{path:N,labelX:F,labelY:D,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:A,markerEnd:g,markerStart:w,interactionWidth:S})});Q_.displayName="SmoothStepEdge";const K4=W.memo(t=>{var e;return yt.createElement(Q_,{...t,pathOptions:W.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});K4.displayName="StepEdge";function w3e({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,i,o]=$V({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,i,o]}const $4=W.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:A,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[w,x,S]=w3e({sourceX:t,sourceY:e,targetX:n,targetY:r});return yt.createElement(u1,{path:w,labelX:x,labelY:S,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,style:A,markerEnd:h,markerStart:p,interactionWidth:g})});$4.displayName="StraightEdge";function cw(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function yM({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case Tn.Left:return[e-cw(e-r,a),n];case Tn.Right:return[e+cw(r-e,a),n];case Tn.Top:return[e,n-cw(n-s,a)];case Tn.Bottom:return[e,n+cw(s-n,a)]}}function XV({sourceX:t,sourceY:e,sourcePosition:n=Tn.Bottom,targetX:r,targetY:s,targetPosition:a=Tn.Top,curvature:i=.25}){const[o,l]=yM({pos:n,x1:t,y1:e,x2:r,y2:s,c:i}),[c,A]=yM({pos:a,x1:r,y1:s,x2:t,y2:e,c:i}),[h,p,g,w]=WV({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:A});return[`M${t},${e} C${o},${l} ${c},${A} ${r},${s}`,h,p,g,w]}const yb=W.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Tn.Bottom,targetPosition:a=Tn.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:A,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,pathOptions:x,interactionWidth:S})=>{const[N,F,D]=XV({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:x==null?void 0:x.curvature});return yt.createElement(u1,{path:N,labelX:F,labelY:D,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:A,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:w,interactionWidth:S})});yb.displayName="BezierEdge";const W4=W.createContext(null),b3e=W4.Provider;W4.Consumer;const _3e=()=>W.useContext(W4),C3e=t=>"id"in t&&"source"in t&&"target"in t,E3e=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Z5=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,S3e=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),T3e=(t,e)=>{if(!t.source||!t.target)return e;let n;return C3e(t)?n={...t}:n={...t,id:E3e(t)},S3e(n,e)?e:e.concat(n)},eN=({x:t,y:e},[n,r,s],a,[i,o])=>{const l={x:(t-n)/s,y:(e-r)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},JV=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),lp=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},Y4=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:i}=lp(s,e).positionAbsolute;return f3e(r,G4({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return h3e(n)},ZV=(t,e,[n,r,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},c=[];return t.forEach(A=>{const{width:h,height:p,selectable:g=!0,hidden:w=!1}=A;if(i&&!g||w)return!1;const{positionAbsolute:x}=lp(A,o),S={x:x.x,y:x.y,width:h||0,height:p||0},N=Y5(l,S),F=typeof h>"u"||typeof p>"u"||h===null||p===null,D=a&&N>0,R=(h||0)*(p||0);(F||D||N>=R||A.dragging)&&c.push(A)}),c},ez=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},tz=(t,e,n,r,s,a=.1)=>{const i=e/(t.width*(1+a)),o=n/(t.height*(1+a)),l=Math.min(i,o),c=Tp(l,r,s),A=t.x+t.width/2,h=t.y+t.height/2,p=e/2-A*c,g=n/2-h*c;return{x:p,y:g,zoom:c}},Ph=(t,e=0)=>t.transition().duration(e);function wM(t,e,n,r){return(e[n]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function N3e(t,e,n,r,s,a){const{x:i,y:o}=Gf(t),c=e.elementsFromPoint(i,o).find(w=>w.classList.contains("react-flow__handle"));if(c){const w=c.getAttribute("data-nodeid");if(w){const x=X4(void 0,c),S=c.getAttribute("data-handleid"),N=a({nodeId:w,id:S,type:x});if(N){const F=s.find(D=>D.nodeId===w&&D.type===x&&D.id===S);return{handle:{id:S,type:x,nodeId:w,x:(F==null?void 0:F.x)||n.x,y:(F==null?void 0:F.y)||n.y},validHandleResult:N}}}}let A=[],h=1/0;if(s.forEach(w=>{const x=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(x<=r){const S=a(w);x<=h&&(x<h?A=[{handle:w,validHandleResult:S}]:x===h&&A.push({handle:w,validHandleResult:S}),h=x)}}),!A.length)return{handle:null,validHandleResult:nz()};if(A.length===1)return A[0];const p=A.some(({validHandleResult:w})=>w.isValid),g=A.some(({handle:w})=>w.type==="target");return A.find(({handle:w,validHandleResult:x})=>g?w.type==="target":p?x.isValid:!0)||A[0]}const B3e={source:null,target:null,sourceHandle:null,targetHandle:null},nz=()=>({handleDomNode:null,isValid:!1,connection:B3e,endHandle:null});function rz(t,e,n,r,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...nz(),handleDomNode:l};if(l){const A=X4(void 0,l),h=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),w=l.classList.contains("connectableend"),x={source:o?h:n,sourceHandle:o?p:r,target:o?n:h,targetHandle:o?r:p};c.connection=x,g&&w&&(e===y0.Strict?o&&A==="source"||!o&&A==="target":h!==n||p!==r)&&(c.endHandle={nodeId:h,handleId:p,type:A},c.isValid=a(x))}return c}function k3e({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Qa]){const{handleBounds:i}=a[Qa];let o=[],l=[];i&&(o=wM(a,i,"source",`${e}-${n}-${r}`),l=wM(a,i,"target",`${e}-${n}-${r}`)),s.push(...o,...l)}return s},[])}function X4(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function jS(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function I3e(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function sz({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:c}){const A=GV(t.target),{connectionMode:h,domNode:p,autoPanOnConnect:g,connectionRadius:w,onConnectStart:x,panBy:S,getNodes:N,cancelConnection:F}=a();let D=0,R;const{x:j,y:P}=Gf(t),E=A==null?void 0:A.elementFromPoint(j,P),T=X4(l,E),k=p==null?void 0:p.getBoundingClientRect();if(!k||!T)return;let z,M=Gf(t,k),U=!1,G=null,q=!1,oe=null;const ee=k3e({nodes:N(),nodeId:n,handleId:e,handleType:T}),le=()=>{if(!g)return;const[J,ce]=zV(M,k);S({x:J,y:ce}),D=requestAnimationFrame(le)};i({connectionPosition:M,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:e,type:T},connectionEndHandle:null}),x==null||x(t,{nodeId:n,handleId:e,handleType:T});function K(J){const{transform:ce}=a();M=Gf(J,k);const{handle:Q,validHandleResult:Z}=N3e(J,A,eN(M,ce,!1,[1,1]),w,ee,se=>rz(se,h,n,e,s?"target":"source",o,A));if(R=Q,U||(le(),U=!0),oe=Z.handleDomNode,G=Z.connection,q=Z.isValid,i({connectionPosition:R&&q?JV({x:R.x,y:R.y},ce):M,connectionStatus:I3e(!!R,q),connectionEndHandle:Z.endHandle}),!R&&!q&&!oe)return jS(z);G.source!==G.target&&oe&&(jS(z),z=oe,oe.classList.add("connecting","react-flow__handle-connecting"),oe.classList.toggle("valid",q),oe.classList.toggle("react-flow__handle-valid",q))}function ne(J){var ce,Q;(R||oe)&&G&&q&&(r==null||r(G)),(Q=(ce=a()).onConnectEnd)==null||Q.call(ce,J),l&&(c==null||c(J)),jS(z),F(),cancelAnimationFrame(D),U=!1,q=!1,G=null,oe=null,A.removeEventListener("mousemove",K),A.removeEventListener("mouseup",ne),A.removeEventListener("touchmove",K),A.removeEventListener("touchend",ne)}A.addEventListener("mousemove",K),A.addEventListener("mouseup",ne),A.addEventListener("touchmove",K),A.addEventListener("touchend",ne)}const bM=()=>!0,F3e=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),D3e=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},az=W.forwardRef(({type:t="source",position:e=Tn.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:c,onMouseDown:A,onTouchStart:h,...p},g)=>{var k,z;const w=i||null,x=t==="target",S=io(),N=_3e(),{connectOnClick:F,noPanClassName:D}=Ea(F3e,ul),{connecting:R,clickConnecting:j}=Ea(D3e(N,w,t),ul);N||(z=(k=S.getState()).onError)==null||z.call(k,"010",FA.error010());const P=M=>{const{defaultEdgeOptions:U,onConnect:G,hasDefaultEdges:q}=S.getState(),oe={...U,...M};if(q){const{edges:ee,setEdges:le}=S.getState();le(T3e(oe,ee))}G==null||G(oe),o==null||o(oe)},E=M=>{if(!N)return;const U=KV(M);s&&(U&&M.button===0||!U)&&sz({event:M,handleId:w,nodeId:N,onConnect:P,isTarget:x,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||bM}),U?A==null||A(M):h==null||h(M)},T=M=>{const{onClickConnectStart:U,onClickConnectEnd:G,connectionClickStartHandle:q,connectionMode:oe,isValidConnection:ee}=S.getState();if(!N||!q&&!s)return;if(!q){U==null||U(M,{nodeId:N,handleId:w,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:w}});return}const le=GV(M.target),K=n||ee||bM,{connection:ne,isValid:J}=rz({nodeId:N,id:w,type:t},oe,q.nodeId,q.handleId||null,q.type,K,le);J&&P(ne),G==null||G(M),S.setState({connectionClickStartHandle:null})};return yt.createElement("div",{"data-handleid":w,"data-nodeid":N,"data-handlepos":e,"data-id":`${N}-${w}-${t}`,className:Fl(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",D,c,{source:!x,target:x,connectable:r,connectablestart:s,connectableend:a,connecting:j,connectionindicator:r&&(s&&!R||a&&R)}]),onMouseDown:E,onTouchStart:E,onClick:F?T:void 0,ref:g,...p},l)});az.displayName="Handle";var Np=W.memo(az);const iz=({data:t,isConnectable:e,targetPosition:n=Tn.Top,sourcePosition:r=Tn.Bottom})=>yt.createElement(yt.Fragment,null,yt.createElement(Np,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,yt.createElement(Np,{type:"source",position:r,isConnectable:e}));iz.displayName="DefaultNode";var tN=W.memo(iz);const oz=({data:t,isConnectable:e,sourcePosition:n=Tn.Bottom})=>yt.createElement(yt.Fragment,null,t==null?void 0:t.label,yt.createElement(Np,{type:"source",position:n,isConnectable:e}));oz.displayName="InputNode";var lz=W.memo(oz);const cz=({data:t,isConnectable:e,targetPosition:n=Tn.Top})=>yt.createElement(yt.Fragment,null,yt.createElement(Np,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);cz.displayName="OutputNode";var uz=W.memo(cz);const J4=()=>null;J4.displayName="GroupNode";const L3e=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),uw=t=>t.id;function R3e(t,e){return ul(t.selectedNodes.map(uw),e.selectedNodes.map(uw))&&ul(t.selectedEdges.map(uw),e.selectedEdges.map(uw))}const dz=W.memo(({onSelectionChange:t})=>{const e=io(),{selectedNodes:n,selectedEdges:r}=Ea(L3e,R3e);return W.useEffect(()=>{const s={nodes:n,edges:r};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});dz.displayName="SelectionListener";const P3e=t=>!!t.onSelectionChange;function M3e({onSelectionChange:t}){const e=Ea(P3e);return t||e?yt.createElement(dz,{onSelectionChange:t}):null}const U3e=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function xm(t,e){W.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Lr(t,e,n){W.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const O3e=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:A,nodesFocusable:h,edgesFocusable:p,edgesUpdatable:g,elevateNodesOnSelect:w,minZoom:x,maxZoom:S,nodeExtent:N,onNodesChange:F,onEdgesChange:D,elementsSelectable:R,connectionMode:j,snapGrid:P,snapToGrid:E,translateExtent:T,connectOnClick:k,defaultEdgeOptions:z,fitView:M,fitViewOptions:U,onNodesDelete:G,onEdgesDelete:q,onNodeDrag:oe,onNodeDragStart:ee,onNodeDragStop:le,onSelectionDrag:K,onSelectionDragStart:ne,onSelectionDragStop:J,noPanClassName:ce,nodeOrigin:Q,rfId:Z,autoPanOnConnect:se,autoPanOnNodeDrag:ie,onError:fe,connectionRadius:Se,isValidConnection:ge,nodeDragThreshold:xe})=>{const{setNodes:ve,setEdges:me,setDefaultNodesAndEdges:he,setMinZoom:He,setMaxZoom:et,setTranslateExtent:Ue,setNodeExtent:Ie,reset:je}=Ea(U3e,ul),Ke=io();return W.useEffect(()=>{const rt=r==null?void 0:r.map(xt=>({...xt,...z}));return he(n,rt),()=>{je()}},[]),Lr("defaultEdgeOptions",z,Ke.setState),Lr("connectionMode",j,Ke.setState),Lr("onConnect",s,Ke.setState),Lr("onConnectStart",a,Ke.setState),Lr("onConnectEnd",i,Ke.setState),Lr("onClickConnectStart",o,Ke.setState),Lr("onClickConnectEnd",l,Ke.setState),Lr("nodesDraggable",c,Ke.setState),Lr("nodesConnectable",A,Ke.setState),Lr("nodesFocusable",h,Ke.setState),Lr("edgesFocusable",p,Ke.setState),Lr("edgesUpdatable",g,Ke.setState),Lr("elementsSelectable",R,Ke.setState),Lr("elevateNodesOnSelect",w,Ke.setState),Lr("snapToGrid",E,Ke.setState),Lr("snapGrid",P,Ke.setState),Lr("onNodesChange",F,Ke.setState),Lr("onEdgesChange",D,Ke.setState),Lr("connectOnClick",k,Ke.setState),Lr("fitViewOnInit",M,Ke.setState),Lr("fitViewOnInitOptions",U,Ke.setState),Lr("onNodesDelete",G,Ke.setState),Lr("onEdgesDelete",q,Ke.setState),Lr("onNodeDrag",oe,Ke.setState),Lr("onNodeDragStart",ee,Ke.setState),Lr("onNodeDragStop",le,Ke.setState),Lr("onSelectionDrag",K,Ke.setState),Lr("onSelectionDragStart",ne,Ke.setState),Lr("onSelectionDragStop",J,Ke.setState),Lr("noPanClassName",ce,Ke.setState),Lr("nodeOrigin",Q,Ke.setState),Lr("rfId",Z,Ke.setState),Lr("autoPanOnConnect",se,Ke.setState),Lr("autoPanOnNodeDrag",ie,Ke.setState),Lr("onError",fe,Ke.setState),Lr("connectionRadius",Se,Ke.setState),Lr("isValidConnection",ge,Ke.setState),Lr("nodeDragThreshold",xe,Ke.setState),xm(t,ve),xm(e,me),xm(x,He),xm(S,et),xm(T,Ue),xm(N,Ie),null},_M={display:"none"},j3e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Az="react-flow__node-desc",fz="react-flow__edge-desc",H3e="react-flow__aria-live",Q3e=t=>t.ariaLiveMessage;function V3e({rfId:t}){const e=Ea(Q3e);return yt.createElement("div",{id:`${H3e}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:j3e},e)}function z3e({rfId:t,disableKeyboardA11y:e}){return yt.createElement(yt.Fragment,null,yt.createElement("div",{id:`${Az}-${t}`,style:_M},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),yt.createElement("div",{id:`${fz}-${t}`,style:_M},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&yt.createElement(V3e,{rfId:t}))}var Ex=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=W.useState(!1),s=W.useRef(!1),a=W.useRef(new Set([])),[i,o]=W.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),A=c.reduce((h,p)=>h.concat(...p),[]);return[c,A]}return[[],[]]},[t]);return W.useEffect(()=>{const l=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||l;if(t!==null){const A=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&X5(g))return!1;const x=EM(g.code,o);a.current.add(g[x]),CM(i,a.current,!1)&&(g.preventDefault(),r(!0))},h=g=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&X5(g))return!1;const x=EM(g.code,o);CM(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(g[x]),g.key==="Meta"&&a.current.clear(),s.current=!1},p=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",A),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",p),()=>{c==null||c.removeEventListener("keydown",A),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",p)}}},[t,r]),n};function CM(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function EM(t,e){return e.includes(t)?"code":"key"}function hz(t,e,n,r){var o,l;const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),i=lp(a,r);return hz(a,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=a[Qa])==null?void 0:o.z)??0)>(n.z??0)?((l=a[Qa])==null?void 0:l.z)??0:n.z??0},r)}function mz(t,e,n){t.forEach(r=>{var a;const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:o,z:l}=hz(r,t,{...r.position,z:((a=r[Qa])==null?void 0:a.z)??0},e);r.positionAbsolute={x:i,y:o},r[Qa].z=l,n!=null&&n[r.id]&&(r[Qa].isParent=!0)}})}function HS(t,e,n,r){const s=new Map,a={},i=r?1e3:0;return t.forEach(o=>{var g;const l=(vu(o.zIndex)?o.zIndex:0)+(o.selected?i:0),c=e.get(o.id),A={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const p=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==o.type;Object.defineProperty(A,Qa,{enumerable:!1,value:{handleBounds:p||(g=c==null?void 0:c[Qa])==null?void 0:g.handleBounds,z:l}}),s.set(o.id,A)}),mz(s,n,a),s}function pz(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:A,nodeOrigin:h}=t(),p=e.initial&&!c&&A;if(o&&l&&(p||!e.initial)){const w=n().filter(S=>{var F;const N=e.includeHiddenNodes?S.width&&S.height:!S.hidden;return(F=e.nodes)!=null&&F.length?N&&e.nodes.some(D=>D.id===S.id):N}),x=w.every(S=>S.width&&S.height);if(w.length>0&&x){const S=Y4(w,h),{x:N,y:F,zoom:D}=tz(S,r,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),R=zf.translate(N,F).scale(D);return typeof e.duration=="number"&&e.duration>0?o.transform(Ph(l,e.duration),R):o.transform(l,R),!0}}return!1}function G3e(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Qa]:r[Qa],selected:n.selected})}),new Map(e)}function q3e(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function dw({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:c}=n();t!=null&&t.length&&(l&&r({nodeInternals:G3e(t,s)}),i==null||i(t)),e!=null&&e.length&&(c&&r({edges:q3e(e,a)}),o==null||o(e))}const ym=()=>{},K3e={zoomIn:ym,zoomOut:ym,zoomTo:ym,getZoom:()=>1,setViewport:ym,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ym,fitBounds:ym,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},$3e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),W3e=()=>{const t=io(),{d3Zoom:e,d3Selection:n}=Ea($3e,ul);return W.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Ph(n,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(Ph(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(Ph(n,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,c=zf.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(Ph(n,a==null?void 0:a.duration),c)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>pz(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:c}=t.getState(),A=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,h=o/2-s*A,p=l/2-a*A,g=zf.translate(h,p).scale(A);e.transform(Ph(n,i==null?void 0:i.duration),g)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:c}=t.getState(),{x:A,y:h,zoom:p}=tz(s,i,o,l,c,(a==null?void 0:a.padding)??.1),g=zf.translate(A,h).scale(p);e.transform(Ph(n,a==null?void 0:a.duration),g)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),eN(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:c,y:A}=l.getBoundingClientRect(),h={x:s.x-c,y:s.y-A};return eN(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),c=JV(s,a);return{x:c.x+o,y:c.y+l}},viewportInitialized:!0}:K3e,[e,n])};function V_(){const t=W3e(),e=io(),n=W.useCallback(()=>e.getState().getNodes().map(x=>({...x})),[]),r=W.useCallback(x=>e.getState().nodeInternals.get(x),[]),s=W.useCallback(()=>{const{edges:x=[]}=e.getState();return x.map(S=>({...S}))},[]),a=W.useCallback(x=>{const{edges:S=[]}=e.getState();return S.find(N=>N.id===x)},[]),i=W.useCallback(x=>{const{getNodes:S,setNodes:N,hasDefaultNodes:F,onNodesChange:D}=e.getState(),R=S(),j=typeof x=="function"?x(R):x;if(F)N(j);else if(D){const P=j.length===0?R.map(E=>({type:"remove",id:E.id})):j.map(E=>({item:E,type:"reset"}));D(P)}},[]),o=W.useCallback(x=>{const{edges:S=[],setEdges:N,hasDefaultEdges:F,onEdgesChange:D}=e.getState(),R=typeof x=="function"?x(S):x;if(F)N(R);else if(D){const j=R.length===0?S.map(P=>({type:"remove",id:P.id})):R.map(P=>({item:P,type:"reset"}));D(j)}},[]),l=W.useCallback(x=>{const S=Array.isArray(x)?x:[x],{getNodes:N,setNodes:F,hasDefaultNodes:D,onNodesChange:R}=e.getState();if(D){const P=[...N(),...S];F(P)}else if(R){const j=S.map(P=>({item:P,type:"add"}));R(j)}},[]),c=W.useCallback(x=>{const S=Array.isArray(x)?x:[x],{edges:N=[],setEdges:F,hasDefaultEdges:D,onEdgesChange:R}=e.getState();if(D)F([...N,...S]);else if(R){const j=S.map(P=>({item:P,type:"add"}));R(j)}},[]),A=W.useCallback(()=>{const{getNodes:x,edges:S=[],transform:N}=e.getState(),[F,D,R]=N;return{nodes:x().map(j=>({...j})),edges:S.map(j=>({...j})),viewport:{x:F,y:D,zoom:R}}},[]),h=W.useCallback(({nodes:x,edges:S})=>{const{nodeInternals:N,getNodes:F,edges:D,hasDefaultNodes:R,hasDefaultEdges:j,onNodesDelete:P,onEdgesDelete:E,onNodesChange:T,onEdgesChange:k}=e.getState(),z=(x||[]).map(oe=>oe.id),M=(S||[]).map(oe=>oe.id),U=F().reduce((oe,ee)=>{const le=ee.parentNode||ee.parentId,K=!z.includes(ee.id)&&le&&oe.find(J=>J.id===le);return(typeof ee.deletable=="boolean"?ee.deletable:!0)&&(z.includes(ee.id)||K)&&oe.push(ee),oe},[]),G=D.filter(oe=>typeof oe.deletable=="boolean"?oe.deletable:!0),q=G.filter(oe=>M.includes(oe.id));if(U||q){const oe=ez(U,G),ee=[...q,...oe],le=ee.reduce((K,ne)=>(K.includes(ne.id)||K.push(ne.id),K),[]);if((j||R)&&(j&&e.setState({edges:D.filter(K=>!le.includes(K.id))}),R&&(U.forEach(K=>{N.delete(K.id)}),e.setState({nodeInternals:new Map(N)}))),le.length>0&&(E==null||E(ee),k&&k(le.map(K=>({id:K,type:"remove"})))),U.length>0&&(P==null||P(U),T)){const K=U.map(ne=>({id:ne.id,type:"remove"}));T(K)}}},[]),p=W.useCallback(x=>{const S=m3e(x),N=S?null:e.getState().nodeInternals.get(x.id);return!S&&!N?[null,null,S]:[S?x:pM(N),N,S]},[]),g=W.useCallback((x,S=!0,N)=>{const[F,D,R]=p(x);return F?(N||e.getState().getNodes()).filter(j=>{if(!R&&(j.id===D.id||!j.positionAbsolute))return!1;const P=pM(j),E=Y5(P,F);return S&&E>0||E>=F.width*F.height}):[]},[]),w=W.useCallback((x,S,N=!0)=>{const[F]=p(x);if(!F)return!1;const D=Y5(F,S);return N&&D>0||D>=F.width*F.height},[]);return W.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:c,toObject:A,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:w}),[t,n,r,s,a,i,o,l,c,A,h,g,w])}const Y3e={actInsideInputWithModifier:!1};var X3e=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=io(),{deleteElements:r}=V_(),s=Ex(t,Y3e),a=Ex(e);W.useEffect(()=>{if(s){const{edges:i,getNodes:o}=n.getState(),l=o().filter(A=>A.selected),c=i.filter(A=>A.selected);r({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[s]),W.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function J3e(t){const e=io();W.useEffect(()=>{let n;const r=()=>{var a,i;if(!t.current)return;const s=V4(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",FA.error004())),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Z4={position:"absolute",width:"100%",height:"100%",top:0,left:0},Z3e=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Aw=t=>({x:t.x,y:t.y,zoom:t.k}),wm=(t,e)=>t.target.closest(`.${e}`),SM=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),TM=t=>{const e=t.ctrlKey&&vb()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},eFe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),tFe=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=qh.Free,zoomOnDoubleClick:c=!0,elementsSelectable:A,panOnDrag:h=!0,defaultViewport:p,translateExtent:g,minZoom:w,maxZoom:x,zoomActivationKeyCode:S,preventScrolling:N=!0,children:F,noWheelClassName:D,noPanClassName:R})=>{const j=W.useRef(),P=io(),E=W.useRef(!1),T=W.useRef(!1),k=W.useRef(null),z=W.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:U,d3ZoomHandler:G,userSelectionActive:q}=Ea(eFe,ul),oe=Ex(S),ee=W.useRef(0),le=W.useRef(!1),K=W.useRef();return J3e(k),W.useEffect(()=>{if(k.current){const ne=k.current.getBoundingClientRect(),J=o3e().scaleExtent([w,x]).translateExtent(g),ce=hu(k.current).call(J),Q=zf.translate(p.x,p.y).scale(Tp(p.zoom,w,x)),Z=[[0,0],[ne.width,ne.height]],se=J.constrain()(Q,Z,g);J.transform(ce,se),J.wheelDelta(TM),P.setState({d3Zoom:J,d3Selection:ce,d3ZoomHandler:ce.on("wheel.zoom"),transform:[se.x,se.y,se.k],domNode:k.current.closest(".react-flow")})}},[]),W.useEffect(()=>{U&&M&&(i&&!oe&&!q?U.on("wheel.zoom",ne=>{if(wm(ne,D))return!1;ne.preventDefault(),ne.stopImmediatePropagation();const J=U.property("__zoom").k||1;if(ne.ctrlKey&&a){const ge=Cd(ne),xe=TM(ne),ve=J*Math.pow(2,xe);M.scaleTo(U,ve,ge,ne);return}const ce=ne.deltaMode===1?20:1;let Q=l===qh.Vertical?0:ne.deltaX*ce,Z=l===qh.Horizontal?0:ne.deltaY*ce;!vb()&&ne.shiftKey&&l!==qh.Vertical&&(Q=ne.deltaY*ce,Z=0),M.translateBy(U,-(Q/J)*o,-(Z/J)*o,{internal:!0});const se=Aw(U.property("__zoom")),{onViewportChangeStart:ie,onViewportChange:fe,onViewportChangeEnd:Se}=P.getState();clearTimeout(K.current),le.current||(le.current=!0,e==null||e(ne,se),ie==null||ie(se)),le.current&&(t==null||t(ne,se),fe==null||fe(se),K.current=setTimeout(()=>{n==null||n(ne,se),Se==null||Se(se),le.current=!1},150))},{passive:!1}):typeof G<"u"&&U.on("wheel.zoom",function(ne,J){if(!N&&ne.type==="wheel"&&!ne.ctrlKey||wm(ne,D))return null;ne.preventDefault(),G.call(this,ne,J)},{passive:!1}))},[q,i,l,U,M,G,oe,a,N,D,e,t,n]),W.useEffect(()=>{M&&M.on("start",ne=>{var Q,Z;if(!ne.sourceEvent||ne.sourceEvent.internal)return null;ee.current=(Q=ne.sourceEvent)==null?void 0:Q.button;const{onViewportChangeStart:J}=P.getState(),ce=Aw(ne.transform);E.current=!0,z.current=ce,((Z=ne.sourceEvent)==null?void 0:Z.type)==="mousedown"&&P.setState({paneDragging:!0}),J==null||J(ce),e==null||e(ne.sourceEvent,ce)})},[M,e]),W.useEffect(()=>{M&&(q&&!E.current?M.on("zoom",null):q||M.on("zoom",ne=>{var ce;const{onViewportChange:J}=P.getState();if(P.setState({transform:[ne.transform.x,ne.transform.y,ne.transform.k]}),T.current=!!(r&&SM(h,ee.current??0)),(t||J)&&!((ce=ne.sourceEvent)!=null&&ce.internal)){const Q=Aw(ne.transform);J==null||J(Q),t==null||t(ne.sourceEvent,Q)}}))},[q,M,t,h,r]),W.useEffect(()=>{M&&M.on("end",ne=>{if(!ne.sourceEvent||ne.sourceEvent.internal)return null;const{onViewportChangeEnd:J}=P.getState();if(E.current=!1,P.setState({paneDragging:!1}),r&&SM(h,ee.current??0)&&!T.current&&r(ne.sourceEvent),T.current=!1,(n||J)&&Z3e(z.current,ne.transform)){const ce=Aw(ne.transform);z.current=ce,clearTimeout(j.current),j.current=setTimeout(()=>{J==null||J(ce),n==null||n(ne.sourceEvent,ce)},i?150:0)}})},[M,i,h,n,r]),W.useEffect(()=>{M&&M.filter(ne=>{const J=oe||s,ce=a&&ne.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&ne.button===1&&ne.type==="mousedown"&&(wm(ne,"react-flow__node")||wm(ne,"react-flow__edge")))return!0;if(!h&&!J&&!i&&!c&&!a||q||!c&&ne.type==="dblclick"||wm(ne,D)&&ne.type==="wheel"||wm(ne,R)&&(ne.type!=="wheel"||i&&ne.type==="wheel"&&!oe)||!a&&ne.ctrlKey&&ne.type==="wheel"||!J&&!i&&!ce&&ne.type==="wheel"||!h&&(ne.type==="mousedown"||ne.type==="touchstart")||Array.isArray(h)&&!h.includes(ne.button)&&ne.type==="mousedown")return!1;const Q=Array.isArray(h)&&h.includes(ne.button)||!ne.button||ne.button<=1;return(!ne.ctrlKey||ne.type==="wheel")&&Q})},[q,M,s,a,i,c,h,A,oe]),yt.createElement("div",{className:"react-flow__renderer",ref:k,style:Z4},F)},nFe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function rFe(){const{userSelectionActive:t,userSelectionRect:e}=Ea(nFe,ul);return t&&e?yt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function NM(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);r.position.x=r.position.x-i,r.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);r.position.y=r.position.y-i,r.style.height+=i,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function gz(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&NM(r,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&NM(r,i);break}case"remove":return r}return r.push(i),r},n)}function vz(t,e){return gz(t,e)}function sFe(t,e){return gz(t,e)}const yf=(t,e)=>({id:t,type:"select",selected:e});function jm(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(yf(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(yf(r.id,!1))),n},[])}const QS=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},aFe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),xz=W.memo(({isSelecting:t,selectionMode:e=Cx.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:A,children:h})=>{const p=W.useRef(null),g=io(),w=W.useRef(0),x=W.useRef(0),S=W.useRef(),{userSelectionActive:N,elementsSelectable:F,dragging:D}=Ea(aFe,ul),R=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,x.current=0},j=G=>{a==null||a(G),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},P=G=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){G.preventDefault();return}i==null||i(G)},E=o?G=>o(G):void 0,T=G=>{const{resetSelectedElements:q,domNode:oe}=g.getState();if(S.current=oe==null?void 0:oe.getBoundingClientRect(),!F||!t||G.button!==0||G.target!==p.current||!S.current)return;const{x:ee,y:le}=Gf(G,S.current);q(),g.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:le,x:ee,y:le}}),r==null||r(G)},k=G=>{const{userSelectionRect:q,nodeInternals:oe,edges:ee,transform:le,onNodesChange:K,onEdgesChange:ne,nodeOrigin:J,getNodes:ce}=g.getState();if(!t||!S.current||!q)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Q=Gf(G,S.current),Z=q.startX??0,se=q.startY??0,ie={...q,x:Q.x<Z?Q.x:Z,y:Q.y<se?Q.y:se,width:Math.abs(Q.x-Z),height:Math.abs(Q.y-se)},fe=ce(),Se=ZV(oe,ie,le,e===Cx.Partial,!0,J),ge=ez(Se,ee).map(ve=>ve.id),xe=Se.map(ve=>ve.id);if(w.current!==xe.length){w.current=xe.length;const ve=jm(fe,xe);ve.length&&(K==null||K(ve))}if(x.current!==ge.length){x.current=ge.length;const ve=jm(ee,ge);ve.length&&(ne==null||ne(ve))}g.setState({userSelectionRect:ie})},z=G=>{if(G.button!==0)return;const{userSelectionRect:q}=g.getState();!N&&q&&G.target===p.current&&(j==null||j(G)),g.setState({nodesSelectionActive:w.current>0}),R(),s==null||s(G)},M=G=>{N&&(g.setState({nodesSelectionActive:w.current>0}),s==null||s(G)),R()},U=F&&(t||N);return yt.createElement("div",{className:Fl(["react-flow__pane",{dragging:D,selection:t}]),onClick:U?void 0:QS(j,p),onContextMenu:QS(P,p),onWheel:QS(E,p),onMouseEnter:U?void 0:l,onMouseDown:U?T:void 0,onMouseMove:U?k:c,onMouseUp:U?z:void 0,onMouseLeave:U?M:A,ref:p,style:Z4},h,yt.createElement(rFe,null))});xz.displayName="Pane";function yz(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:yz(r,e):!1}function BM(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function iFe(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!yz(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function oFe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function wz(t,e,n,r,s=[0,0],a){const i=oFe(t,t.extent||r);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:p,y:g}=lp(h,s).positionAbsolute;o=h&&vu(p)&&vu(g)&&vu(h.width)&&vu(h.height)?[[p+t.width*s[0],g+t.height*s[1]],[p+h.width-t.width+t.width*s[0],g+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",FA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:p,y:g}=lp(h,s).positionAbsolute;o=[[t.extent[0][0]+p,t.extent[0][1]+g],[t.extent[1][0]+p,t.extent[1][1]+g]]}let c={x:0,y:0};if(l){const h=n.get(l);c=lp(h,s).positionAbsolute}const A=o&&o!=="parent"?z4(e,o):e;return{position:{x:A.x-c.x,y:A.y-c.y},positionAbsolute:A}}function VS({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const kM=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-i.left-o.x)/n,y:(c.top-i.top-o.y)/n,...V4(l)}})};function zg(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function nN({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),c=o.get(t);if(!c){l==null||l("012",FA.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var A;return(A=r==null?void 0:r.current)==null?void 0:A.blur()})):s([t])}function lFe(){const t=io();return W.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function zS(t){return(e,n,r)=>t==null?void 0:t(e,r)}function bz({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=io(),[l,c]=W.useState(!1),A=W.useRef([]),h=W.useRef({x:null,y:null}),p=W.useRef(0),g=W.useRef(null),w=W.useRef({x:0,y:0}),x=W.useRef(null),S=W.useRef(!1),N=W.useRef(!1),F=W.useRef(!1),D=lFe();return W.useEffect(()=>{if(t!=null&&t.current){const R=hu(t.current),j=({x:T,y:k})=>{const{nodeInternals:z,onNodeDrag:M,onSelectionDrag:U,updateNodePositions:G,nodeExtent:q,snapGrid:oe,snapToGrid:ee,nodeOrigin:le,onError:K}=o.getState();h.current={x:T,y:k};let ne=!1,J={x:0,y:0,x2:0,y2:0};if(A.current.length>1&&q){const Q=Y4(A.current,le);J=G4(Q)}if(A.current=A.current.map(Q=>{const Z={x:T-Q.distance.x,y:k-Q.distance.y};ee&&(Z.x=oe[0]*Math.round(Z.x/oe[0]),Z.y=oe[1]*Math.round(Z.y/oe[1]));const se=[[q[0][0],q[0][1]],[q[1][0],q[1][1]]];A.current.length>1&&q&&!Q.extent&&(se[0][0]=Q.positionAbsolute.x-J.x+q[0][0],se[1][0]=Q.positionAbsolute.x+(Q.width??0)-J.x2+q[1][0],se[0][1]=Q.positionAbsolute.y-J.y+q[0][1],se[1][1]=Q.positionAbsolute.y+(Q.height??0)-J.y2+q[1][1]);const ie=wz(Q,Z,z,se,le,K);return ne=ne||Q.position.x!==ie.position.x||Q.position.y!==ie.position.y,Q.position=ie.position,Q.positionAbsolute=ie.positionAbsolute,Q}),!ne)return;G(A.current,!0,!0),c(!0);const ce=s?M:zS(U);if(ce&&x.current){const[Q,Z]=VS({nodeId:s,dragItems:A.current,nodeInternals:z});ce(x.current,Q,Z)}},P=()=>{if(!g.current)return;const[T,k]=zV(w.current,g.current);if(T!==0||k!==0){const{transform:z,panBy:M}=o.getState();h.current.x=(h.current.x??0)-T/z[2],h.current.y=(h.current.y??0)-k/z[2],M({x:T,y:k})&&j(h.current)}p.current=requestAnimationFrame(P)},E=T=>{var le;const{nodeInternals:k,multiSelectionActive:z,nodesDraggable:M,unselectNodesAndEdges:U,onNodeDragStart:G,onSelectionDragStart:q}=o.getState();N.current=!0;const oe=s?G:zS(q);(!i||!a)&&!z&&s&&((le=k.get(s))!=null&&le.selected||U()),s&&a&&i&&nN({id:s,store:o,nodeRef:t});const ee=D(T);if(h.current=ee,A.current=iFe(k,M,ee,s),oe&&A.current){const[K,ne]=VS({nodeId:s,dragItems:A.current,nodeInternals:k});oe(T.sourceEvent,K,ne)}};if(e)R.on(".drag",null);else{const T=gke().on("start",k=>{const{domNode:z,nodeDragThreshold:M}=o.getState();M===0&&E(k),F.current=!1;const U=D(k);h.current=U,g.current=(z==null?void 0:z.getBoundingClientRect())||null,w.current=Gf(k.sourceEvent,g.current)}).on("drag",k=>{var G,q;const z=D(k),{autoPanOnNodeDrag:M,nodeDragThreshold:U}=o.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!S.current&&N.current&&M&&(S.current=!0,P()),!N.current){const oe=z.xSnapped-(((G=h==null?void 0:h.current)==null?void 0:G.x)??0),ee=z.ySnapped-(((q=h==null?void 0:h.current)==null?void 0:q.y)??0);Math.sqrt(oe*oe+ee*ee)>U&&E(k)}(h.current.x!==z.xSnapped||h.current.y!==z.ySnapped)&&A.current&&N.current&&(x.current=k.sourceEvent,w.current=Gf(k.sourceEvent,g.current),j(z))}}).on("end",k=>{if(!(!N.current||F.current)&&(c(!1),S.current=!1,N.current=!1,cancelAnimationFrame(p.current),A.current)){const{updateNodePositions:z,nodeInternals:M,onNodeDragStop:U,onSelectionDragStop:G}=o.getState(),q=s?U:zS(G);if(z(A.current,!1,!1),q){const[oe,ee]=VS({nodeId:s,dragItems:A.current,nodeInternals:M});q(k.sourceEvent,oe,ee)}}}).filter(k=>{const z=k.target;return!k.button&&(!n||!BM(z,`.${n}`,t))&&(!r||BM(z,r,t))});return R.call(T),()=>{R.on(".drag",null)}}}},[t,e,n,r,a,o,s,i,D]),l}function _z(){const t=io();return W.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:c,nodesDraggable:A}=t.getState(),h=i().filter(F=>F.selected&&(F.draggable||A&&typeof F.draggable>"u")),p=o?l[0]:5,g=o?l[1]:5,w=n.isShiftPressed?4:1,x=n.x*p*w,S=n.y*g*w,N=h.map(F=>{if(F.positionAbsolute){const D={x:F.positionAbsolute.x+x,y:F.positionAbsolute.y+S};o&&(D.x=l[0]*Math.round(D.x/l[0]),D.y=l[1]*Math.round(D.y/l[1]));const{positionAbsolute:R,position:j}=wz(F,D,r,s,void 0,c);F.position=j,F.positionAbsolute=R}return F});a(N,!0,!1)},[])}const cp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Gg=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:c,onClick:A,onMouseEnter:h,onMouseMove:p,onMouseLeave:g,onContextMenu:w,onDoubleClick:x,style:S,className:N,isDraggable:F,isSelectable:D,isConnectable:R,isFocusable:j,selectNodesOnDrag:P,sourcePosition:E,targetPosition:T,hidden:k,resizeObserver:z,dragHandle:M,zIndex:U,isParent:G,noDragClassName:q,noPanClassName:oe,initialized:ee,disableKeyboardA11y:le,ariaLabel:K,rfId:ne,hasHandleBounds:J})=>{const ce=io(),Q=W.useRef(null),Z=W.useRef(null),se=W.useRef(E),ie=W.useRef(T),fe=W.useRef(r),Se=D||F||A||h||p||g,ge=_z(),xe=zg(n,ce.getState,h),ve=zg(n,ce.getState,p),me=zg(n,ce.getState,g),he=zg(n,ce.getState,w),He=zg(n,ce.getState,x),et=je=>{const{nodeDragThreshold:Ke}=ce.getState();if(D&&(!P||!F||Ke>0)&&nN({id:n,store:ce,nodeRef:Q}),A){const rt=ce.getState().nodeInternals.get(n);rt&&A(je,{...rt})}},Ue=je=>{if(!X5(je)&&!le)if(qV.includes(je.key)&&D){const Ke=je.key==="Escape";nN({id:n,store:ce,unselect:Ke,nodeRef:Q})}else F&&c&&Object.prototype.hasOwnProperty.call(cp,je.key)&&(ce.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),ge({x:cp[je.key].x,y:cp[je.key].y,isShiftPressed:je.shiftKey}))};W.useEffect(()=>()=>{Z.current&&(z==null||z.unobserve(Z.current),Z.current=null)},[]),W.useEffect(()=>{if(Q.current&&!k){const je=Q.current;(!ee||!J||Z.current!==je)&&(Z.current&&(z==null||z.unobserve(Z.current)),z==null||z.observe(je),Z.current=je)}},[k,ee,J]),W.useEffect(()=>{const je=fe.current!==r,Ke=se.current!==E,rt=ie.current!==T;Q.current&&(je||Ke||rt)&&(je&&(fe.current=r),Ke&&(se.current=E),rt&&(ie.current=T),ce.getState().updateNodeDimensions([{id:n,nodeElement:Q.current,forceUpdate:!0}]))},[n,r,E,T]);const Ie=bz({nodeRef:Q,disabled:k||!F,noDragClassName:q,handleSelector:M,nodeId:n,isSelectable:D,selectNodesOnDrag:P});return k?null:yt.createElement("div",{className:Fl(["react-flow__node",`react-flow__node-${r}`,{[oe]:F},N,{selected:c,selectable:D,parent:G,dragging:Ie}]),ref:Q,style:{zIndex:U,transform:`translate(${o}px,${l}px)`,pointerEvents:Se?"all":"none",visibility:ee?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:xe,onMouseMove:ve,onMouseLeave:me,onContextMenu:he,onClick:et,onDoubleClick:He,onKeyDown:j?Ue:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":le?void 0:`${Az}-${ne}`,"aria-label":K},yt.createElement(b3e,{value:n},yt.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:i,selected:c,isConnectable:R,sourcePosition:E,targetPosition:T,dragging:Ie,dragHandle:M,zIndex:U})))};return e.displayName="NodeWrapper",W.memo(e)};const cFe=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Y4(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function uFe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=io(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:c}=Ea(cFe,ul),A=_z(),h=W.useRef(null);if(W.useEffect(()=>{var w;n||(w=h.current)==null||w.focus({preventScroll:!0})},[n]),bz({nodeRef:h}),c||!s||!a)return null;const p=t?w=>{const x=r.getState().getNodes().filter(S=>S.selected);t(w,x)}:void 0,g=w=>{Object.prototype.hasOwnProperty.call(cp,w.key)&&A({x:cp[w.key].x,y:cp[w.key].y,isShiftPressed:w.shiftKey})};return yt.createElement("div",{className:Fl(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},yt.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:a,top:o,left:i}}))}var dFe=W.memo(uFe);const AFe=t=>t.nodesSelectionActive,Cz=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:c,onMoveEnd:A,selectionKeyCode:h,selectionOnDrag:p,selectionMode:g,onSelectionStart:w,onSelectionEnd:x,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:F,elementsSelectable:D,zoomOnScroll:R,zoomOnPinch:j,panOnScroll:P,panOnScrollSpeed:E,panOnScrollMode:T,zoomOnDoubleClick:k,panOnDrag:z,defaultViewport:M,translateExtent:U,minZoom:G,maxZoom:q,preventScrolling:oe,onSelectionContextMenu:ee,noWheelClassName:le,noPanClassName:K,disableKeyboardA11y:ne})=>{const J=Ea(AFe),ce=Ex(h),Q=Ex(N),Z=Q||z,se=Q||P,ie=ce||p&&Z!==!0;return X3e({deleteKeyCode:o,multiSelectionKeyCode:S}),yt.createElement(tFe,{onMove:l,onMoveStart:c,onMoveEnd:A,onPaneContextMenu:a,elementsSelectable:D,zoomOnScroll:R,zoomOnPinch:j,panOnScroll:se,panOnScrollSpeed:E,panOnScrollMode:T,zoomOnDoubleClick:k,panOnDrag:!ce&&Z,defaultViewport:M,translateExtent:U,minZoom:G,maxZoom:q,zoomActivationKeyCode:F,preventScrolling:oe,noWheelClassName:le,noPanClassName:K},yt.createElement(xz,{onSelectionStart:w,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:Z,isSelecting:!!ie,selectionMode:g},t,J&&yt.createElement(dFe,{onSelectionContextMenu:ee,noPanClassName:K,disableKeyboardA11y:ne})))};Cz.displayName="FlowRenderer";var fFe=W.memo(Cz);function hFe(t){return Ea(W.useCallback(n=>t?ZV(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function mFe(t){const e={input:Gg(t.input||lz),default:Gg(t.default||tN),output:Gg(t.output||uz),group:Gg(t.group||J4)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Gg(t[a]||tN),s),n);return{...e,...r}}const pFe=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},gFe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Ez=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=Ea(gFe,ul),o=hFe(t.onlyRenderVisibleElements),l=W.useRef(),c=W.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const A=new ResizeObserver(h=>{const p=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(p)});return l.current=A,A},[]);return W.useEffect(()=>()=>{var A;(A=l==null?void 0:l.current)==null||A.disconnect()},[]),yt.createElement("div",{className:"react-flow__nodes",style:Z4},o.map(A=>{var j,P,E;let h=A.type||"default";t.nodeTypes[h]||(i==null||i("003",FA.error003(h)),h="default");const p=t.nodeTypes[h]||t.nodeTypes.default,g=!!(A.draggable||e&&typeof A.draggable>"u"),w=!!(A.selectable||s&&typeof A.selectable>"u"),x=!!(A.connectable||n&&typeof A.connectable>"u"),S=!!(A.focusable||r&&typeof A.focusable>"u"),N=t.nodeExtent?z4(A.positionAbsolute,t.nodeExtent):A.positionAbsolute,F=(N==null?void 0:N.x)??0,D=(N==null?void 0:N.y)??0,R=pFe({x:F,y:D,width:A.width??0,height:A.height??0,origin:t.nodeOrigin});return yt.createElement(p,{key:A.id,id:A.id,className:A.className,style:A.style,type:h,data:A.data,sourcePosition:A.sourcePosition||Tn.Bottom,targetPosition:A.targetPosition||Tn.Top,hidden:A.hidden,xPos:F,yPos:D,xPosOrigin:R.x,yPosOrigin:R.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!A.selected,isDraggable:g,isSelectable:w,isConnectable:x,isFocusable:S,resizeObserver:c,dragHandle:A.dragHandle,zIndex:((j=A[Qa])==null?void 0:j.z)??0,isParent:!!((P=A[Qa])!=null&&P.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!A.width&&!!A.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:A.ariaLabel,hasHandleBounds:!!((E=A[Qa])!=null&&E.handleBounds)})}))};Ez.displayName="NodeRenderer";var vFe=W.memo(Ez);const xFe=(t,e,n)=>n===Tn.Left?t-e:n===Tn.Right?t+e:t,yFe=(t,e,n)=>n===Tn.Top?t-e:n===Tn.Bottom?t+e:t,IM="react-flow__edgeupdater",FM=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>yt.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:Fl([IM,`${IM}-${o}`]),cx:xFe(e,r,t),cy:yFe(n,r,t),r,stroke:"transparent",fill:"transparent"}),wFe=()=>!0;var bm=t=>{const e=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:c,label:A,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:w,labelBgBorderRadius:x,style:S,source:N,target:F,sourceX:D,sourceY:R,targetX:j,targetY:P,sourcePosition:E,targetPosition:T,elementsSelectable:k,hidden:z,sourceHandleId:M,targetHandleId:U,onContextMenu:G,onMouseEnter:q,onMouseMove:oe,onMouseLeave:ee,reconnectRadius:le,onReconnect:K,onReconnectStart:ne,onReconnectEnd:J,markerEnd:ce,markerStart:Q,rfId:Z,ariaLabel:se,isFocusable:ie,isReconnectable:fe,pathOptions:Se,interactionWidth:ge,disableKeyboardA11y:xe})=>{const ve=W.useRef(null),[me,he]=W.useState(!1),[He,et]=W.useState(!1),Ue=io(),Ie=W.useMemo(()=>`url('#${Z5(Q,Z)}')`,[Q,Z]),je=W.useMemo(()=>`url('#${Z5(ce,Z)}')`,[ce,Z]);if(z)return null;const Ke=_t=>{var Mr;const{edges:Hn,addSelectedEdges:dn,unselectNodesAndEdges:kr,multiSelectionActive:Fn}=Ue.getState(),ar=Hn.find(nr=>nr.id===n);ar&&(k&&(Ue.setState({nodesSelectionActive:!1}),ar.selected&&Fn?(kr({nodes:[],edges:[ar]}),(Mr=ve.current)==null||Mr.blur()):dn([n])),i&&i(_t,ar))},rt=Vg(n,Ue.getState,o),xt=Vg(n,Ue.getState,G),Tt=Vg(n,Ue.getState,q),vt=Vg(n,Ue.getState,oe),Vt=Vg(n,Ue.getState,ee),Kt=(_t,Hn)=>{if(_t.button!==0)return;const{edges:dn,isValidConnection:kr}=Ue.getState(),Fn=Hn?F:N,ar=(Hn?U:M)||null,Mr=Hn?"target":"source",nr=kr||wFe,Sa=Hn,Cr=dn.find(dr=>dr.id===n);et(!0),ne==null||ne(_t,Cr,Mr);const hs=dr=>{et(!1),J==null||J(dr,Cr,Mr)};sz({event:_t,handleId:ar,nodeId:Fn,onConnect:dr=>K==null?void 0:K(Cr,dr),isTarget:Sa,getState:Ue.getState,setState:Ue.setState,isValidConnection:nr,edgeUpdaterType:Mr,onReconnectEnd:hs})},cn=_t=>Kt(_t,!0),Gt=_t=>Kt(_t,!1),Wt=()=>he(!0),sn=()=>he(!1),Ht=!k&&!i,Qt=_t=>{var Hn;if(!xe&&qV.includes(_t.key)&&k){const{unselectNodesAndEdges:dn,addSelectedEdges:kr,edges:Fn}=Ue.getState();_t.key==="Escape"?((Hn=ve.current)==null||Hn.blur(),dn({edges:[Fn.find(Mr=>Mr.id===n)]})):kr([n])}};return yt.createElement("g",{className:Fl(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:c,inactive:Ht,updating:me}]),onClick:Ke,onDoubleClick:rt,onContextMenu:xt,onMouseEnter:Tt,onMouseMove:vt,onMouseLeave:Vt,onKeyDown:ie?Qt:void 0,tabIndex:ie?0:void 0,role:ie?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":se===null?void 0:se||`Edge from ${N} to ${F}`,"aria-describedby":ie?`${fz}-${Z}`:void 0,ref:ve},!He&&yt.createElement(t,{id:n,source:N,target:F,selected:l,animated:c,label:A,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:w,labelBgBorderRadius:x,data:a,style:S,sourceX:D,sourceY:R,targetX:j,targetY:P,sourcePosition:E,targetPosition:T,sourceHandleId:M,targetHandleId:U,markerStart:Ie,markerEnd:je,pathOptions:Se,interactionWidth:ge}),fe&&yt.createElement(yt.Fragment,null,(fe==="source"||fe===!0)&&yt.createElement(FM,{position:E,centerX:D,centerY:R,radius:le,onMouseDown:cn,onMouseEnter:Wt,onMouseOut:sn,type:"source"}),(fe==="target"||fe===!0)&&yt.createElement(FM,{position:T,centerX:j,centerY:P,radius:le,onMouseDown:Gt,onMouseEnter:Wt,onMouseOut:sn,type:"target"})))};return e.displayName="EdgeWrapper",W.memo(e)};function bFe(t){const e={default:bm(t.default||yb),straight:bm(t.bezier||$4),step:bm(t.step||K4),smoothstep:bm(t.step||Q_),simplebezier:bm(t.simplebezier||q4)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=bm(t[a]||yb),s),n);return{...e,...r}}function DM(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,s=((n==null?void 0:n.y)||0)+e.y,a=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case Tn.Top:return{x:r+a/2,y:s};case Tn.Right:return{x:r+a,y:s+i/2};case Tn.Bottom:return{x:r+a/2,y:s+i};case Tn.Left:return{x:r,y:s+i/2}}}function LM(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const _Fe=(t,e,n,r,s,a)=>{const i=DM(n,t,e),o=DM(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function CFe({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const A=G4({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(A.x2,c.x2)-Math.max(A.x,c.x)),p=Math.max(0,Math.min(A.y2,c.y2)-Math.max(A.y,c.y));return Math.ceil(h*p)>0}function RM(t){var r,s,a,i,o;const e=((r=t==null?void 0:t[Qa])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const EFe=[{level:0,isMaxLevel:!0,edges:[]}];function SFe(t,e,n=!1){let r=-1;const s=t.reduce((i,o)=>{var A,h;const l=vu(o.zIndex);let c=l?o.zIndex:0;if(n){const p=e.get(o.target),g=e.get(o.source),w=o.selected||(p==null?void 0:p.selected)||(g==null?void 0:g.selected),x=Math.max(((A=g==null?void 0:g[Qa])==null?void 0:A.z)||0,((h=p==null?void 0:p[Qa])==null?void 0:h.z)||0,1e3);c=(l?o.zIndex:0)+(w?x:0)}return i[c]?i[c].push(o):i[c]=[o],r=c>r?c:r,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===r}});return a.length===0?EFe:a}function TFe(t,e,n){const r=Ea(W.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&CFe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return SFe(r,e,n)}const NFe=({color:t="none",strokeWidth:e=1})=>yt.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),BFe=({color:t="none",strokeWidth:e=1})=>yt.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),PM={[xb.Arrow]:NFe,[xb.ArrowClosed]:BFe};function kFe(t){const e=io();return W.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(PM,t)?PM[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",FA.error009(t)),null)},[t])}const IFe=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=kFe(e);return l?yt.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},yt.createElement(l,{color:n,strokeWidth:i})):null},FFe=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=Z5(i,e);r.includes(o)||(s.push({id:o,color:i.color||t,...i}),r.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},Sz=({defaultColor:t,rfId:e})=>{const n=Ea(W.useCallback(FFe({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return yt.createElement("defs",null,n.map(r=>yt.createElement(IFe,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Sz.displayName="MarkerDefinitions";var DFe=W.memo(Sz);const LFe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Tz=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:A,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:w,reconnectRadius:x,children:S,disableKeyboardA11y:N})=>{const{edgesFocusable:F,edgesUpdatable:D,elementsSelectable:R,width:j,height:P,connectionMode:E,nodeInternals:T,onError:k}=Ea(LFe,ul),z=TFe(e,T,n);return j?yt.createElement(yt.Fragment,null,z.map(({level:M,edges:U,isMaxLevel:G})=>yt.createElement("svg",{key:M,style:{zIndex:M},width:j,height:P,className:"react-flow__edges react-flow__container"},G&&yt.createElement(DFe,{defaultColor:t,rfId:r}),yt.createElement("g",null,U.map(q=>{const[oe,ee,le]=RM(T.get(q.source)),[K,ne,J]=RM(T.get(q.target));if(!le||!J)return null;let ce=q.type||"default";s[ce]||(k==null||k("011",FA.error011(ce)),ce="default");const Q=s[ce]||s.default,Z=E===y0.Strict?ne.target:(ne.target??[]).concat(ne.source??[]),se=LM(ee.source,q.sourceHandle),ie=LM(Z,q.targetHandle),fe=(se==null?void 0:se.position)||Tn.Bottom,Se=(ie==null?void 0:ie.position)||Tn.Top,ge=!!(q.focusable||F&&typeof q.focusable>"u"),xe=q.reconnectable||q.updatable,ve=typeof p<"u"&&(xe||D&&typeof xe>"u");if(!se||!ie)return k==null||k("008",FA.error008(se,q)),null;const{sourceX:me,sourceY:he,targetX:He,targetY:et}=_Fe(oe,se,fe,K,ie,Se);return yt.createElement(Q,{key:q.id,id:q.id,className:Fl([q.className,a]),type:ce,data:q.data,selected:!!q.selected,animated:!!q.animated,hidden:!!q.hidden,label:q.label,labelStyle:q.labelStyle,labelShowBg:q.labelShowBg,labelBgStyle:q.labelBgStyle,labelBgPadding:q.labelBgPadding,labelBgBorderRadius:q.labelBgBorderRadius,style:q.style,source:q.source,target:q.target,sourceHandleId:q.sourceHandle,targetHandleId:q.targetHandle,markerEnd:q.markerEnd,markerStart:q.markerStart,sourceX:me,sourceY:he,targetX:He,targetY:et,sourcePosition:fe,targetPosition:Se,elementsSelectable:R,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:c,onClick:A,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:w,reconnectRadius:x,rfId:r,ariaLabel:q.ariaLabel,isFocusable:ge,isReconnectable:ve,pathOptions:"pathOptions"in q?q.pathOptions:void 0,interactionWidth:q.interactionWidth,disableKeyboardA11y:N})})))),S):null};Tz.displayName="EdgeRenderer";var RFe=W.memo(Tz);const PFe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function MFe({children:t}){const e=Ea(PFe);return yt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function UFe(t){const e=V_(),n=W.useRef(!1);W.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const OFe={[Tn.Left]:Tn.Right,[Tn.Right]:Tn.Left,[Tn.Top]:Tn.Bottom,[Tn.Bottom]:Tn.Top},Nz=({nodeId:t,handleType:e,style:n,type:r=Sf.Bezier,CustomComponent:s,connectionStatus:a})=>{var P,E,T;const{fromNode:i,handleId:o,toX:l,toY:c,connectionMode:A}=Ea(W.useCallback(k=>({fromNode:k.nodeInternals.get(t),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[t]),ul),h=(P=i==null?void 0:i[Qa])==null?void 0:P.handleBounds;let p=h==null?void 0:h[e];if(A===y0.Loose&&(p=p||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!p)return null;const g=o?p.find(k=>k.id===o):p[0],w=g?g.x+g.width/2:(i.width??0)/2,x=g?g.y+g.height/2:i.height??0,S=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+w,N=(((T=i.positionAbsolute)==null?void 0:T.y)??0)+x,F=g==null?void 0:g.position,D=F?OFe[F]:null;if(!F||!D)return null;if(s)return yt.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:S,fromY:N,toX:l,toY:c,fromPosition:F,toPosition:D,connectionStatus:a});let R="";const j={sourceX:S,sourceY:N,sourcePosition:F,targetX:l,targetY:c,targetPosition:D};return r===Sf.Bezier?[R]=XV(j):r===Sf.Step?[R]=J5({...j,borderRadius:0}):r===Sf.SmoothStep?[R]=J5(j):r===Sf.SimpleBezier?[R]=YV(j):R=`M${S},${N} ${l},${c}`,yt.createElement("path",{d:R,fill:"none",className:"react-flow__connection-path",style:n})};Nz.displayName="ConnectionLine";const jFe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function HFe({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:c}=Ea(jFe,ul);return!(s&&a&&o&&i)?null:yt.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},yt.createElement("g",{className:Fl(["react-flow__connection",c])},yt.createElement(Nz,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:c})))}function MM(t,e){return W.useRef(null),io(),W.useMemo(()=>e(t),[t])}const Bz=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:A,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:g,onSelectionContextMenu:w,onSelectionStart:x,onSelectionEnd:S,connectionLineType:N,connectionLineStyle:F,connectionLineComponent:D,connectionLineContainerStyle:R,selectionKeyCode:j,selectionOnDrag:P,selectionMode:E,multiSelectionKeyCode:T,panActivationKeyCode:k,zoomActivationKeyCode:z,deleteKeyCode:M,onlyRenderVisibleElements:U,elementsSelectable:G,selectNodesOnDrag:q,defaultViewport:oe,translateExtent:ee,minZoom:le,maxZoom:K,preventScrolling:ne,defaultMarkerColor:J,zoomOnScroll:ce,zoomOnPinch:Q,panOnScroll:Z,panOnScrollSpeed:se,panOnScrollMode:ie,zoomOnDoubleClick:fe,panOnDrag:Se,onPaneClick:ge,onPaneMouseEnter:xe,onPaneMouseMove:ve,onPaneMouseLeave:me,onPaneScroll:he,onPaneContextMenu:He,onEdgeContextMenu:et,onEdgeMouseEnter:Ue,onEdgeMouseMove:Ie,onEdgeMouseLeave:je,onReconnect:Ke,onReconnectStart:rt,onReconnectEnd:xt,reconnectRadius:Tt,noDragClassName:vt,noWheelClassName:Vt,noPanClassName:Kt,elevateEdgesOnSelect:cn,disableKeyboardA11y:Gt,nodeOrigin:Wt,nodeExtent:sn,rfId:Ht})=>{const Qt=MM(t,mFe),_t=MM(e,bFe);return UFe(a),yt.createElement(fFe,{onPaneClick:ge,onPaneMouseEnter:xe,onPaneMouseMove:ve,onPaneMouseLeave:me,onPaneContextMenu:He,onPaneScroll:he,deleteKeyCode:M,selectionKeyCode:j,selectionOnDrag:P,selectionMode:E,onSelectionStart:x,onSelectionEnd:S,multiSelectionKeyCode:T,panActivationKeyCode:k,zoomActivationKeyCode:z,elementsSelectable:G,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:ce,zoomOnPinch:Q,zoomOnDoubleClick:fe,panOnScroll:Z,panOnScrollSpeed:se,panOnScrollMode:ie,panOnDrag:Se,defaultViewport:oe,translateExtent:ee,minZoom:le,maxZoom:K,onSelectionContextMenu:w,preventScrolling:ne,noDragClassName:vt,noWheelClassName:Vt,noPanClassName:Kt,disableKeyboardA11y:Gt},yt.createElement(MFe,null,yt.createElement(RFe,{edgeTypes:_t,onEdgeClick:o,onEdgeDoubleClick:c,onlyRenderVisibleElements:U,onEdgeContextMenu:et,onEdgeMouseEnter:Ue,onEdgeMouseMove:Ie,onEdgeMouseLeave:je,onReconnect:Ke,onReconnectStart:rt,onReconnectEnd:xt,reconnectRadius:Tt,defaultMarkerColor:J,noPanClassName:Kt,elevateEdgesOnSelect:!!cn,disableKeyboardA11y:Gt,rfId:Ht},yt.createElement(HFe,{style:F,type:N,component:D,containerStyle:R})),yt.createElement("div",{className:"react-flow__edgelabel-renderer"}),yt.createElement(vFe,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:A,onNodeMouseMove:h,onNodeMouseLeave:p,onNodeContextMenu:g,selectNodesOnDrag:q,onlyRenderVisibleElements:U,noPanClassName:Kt,noDragClassName:vt,disableKeyboardA11y:Gt,nodeOrigin:Wt,nodeExtent:sn,rfId:Ht})))};Bz.displayName="GraphView";var QFe=W.memo(Bz);const rN=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],hf={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:rN,nodeExtent:rN,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:y0.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:p3e,isValidConnection:void 0},VFe=()=>BBe((t,e)=>({...hf,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:HS(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?HS(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:c}=e(),A=l==null?void 0:l.querySelector(".react-flow__viewport");if(!A)return;const h=window.getComputedStyle(A),{m22:p}=new window.DOMMatrixReadOnly(h.transform),g=n.reduce((x,S)=>{const N=s.get(S.id);if(N!=null&&N.hidden)s.set(N.id,{...N,[Qa]:{...N[Qa],handleBounds:void 0}});else if(N){const F=V4(S.nodeElement);!!(F.width&&F.height&&(N.width!==F.width||N.height!==F.height||S.forceUpdate))&&(s.set(N.id,{...N,[Qa]:{...N[Qa],handleBounds:{source:kM(".source",S.nodeElement,p,c),target:kM(".target",S.nodeElement,p,c)}},...F}),x.push({id:N.id,type:"dimensions",dimensions:F}))}return x},[]);mz(s,c);const w=i||a&&!i&&pz(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:w}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=n.map(o=>{const l={id:o.id,type:"position",dragging:s};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(a){const c=vz(n,o()),A=HS(c,s,i,l);t({nodeInternals:A})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>yf(l,!0)):(i=jm(a(),n),o=jm(s,[])),dw({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>yf(l,!0)):(i=jm(s,n),o=jm(a(),[])),dw({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),i=n||a(),o=r||s,l=i.map(A=>(A.selected=!1,yf(A.id,!1))),c=o.map(A=>yf(A.id,!1));dw({changedNodes:l,changedEdges:c,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r==null||r.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r==null||r.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(o=>o.selected).map(o=>yf(o.id,!1)),i=n.filter(o=>o.selected).map(o=>yf(o.id,!1));dw({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=z4(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!n.x&&!n.y)return!1;const c=zf.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),A=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(c,A,l);return i.transform(o,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:hf.connectionNodeId,connectionHandleId:hf.connectionHandleId,connectionHandleType:hf.connectionHandleType,connectionStatus:hf.connectionStatus,connectionStartHandle:hf.connectionStartHandle,connectionEndHandle:hf.connectionEndHandle}),reset:()=>t({...hf})}),Object.is),ek=({children:t})=>{const e=W.useRef(null);return e.current||(e.current=VFe()),yt.createElement(l3e,{value:e.current},t)};ek.displayName="ReactFlowProvider";const kz=({children:t})=>W.useContext(H_)?yt.createElement(yt.Fragment,null,t):yt.createElement(ek,null,t);kz.displayName="ReactFlowWrapper";const zFe={input:lz,default:tN,output:uz,group:J4},GFe={default:yb,straight:$4,step:K4,smoothstep:Q_,simplebezier:q4},qFe=[0,0],KFe=[15,15],$Fe={x:0,y:0,zoom:1},WFe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Iz=W.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=zFe,edgeTypes:i=GFe,onNodeClick:o,onEdgeClick:l,onInit:c,onMove:A,onMoveStart:h,onMoveEnd:p,onConnect:g,onConnectStart:w,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:N,onNodeMouseEnter:F,onNodeMouseMove:D,onNodeMouseLeave:R,onNodeContextMenu:j,onNodeDoubleClick:P,onNodeDragStart:E,onNodeDrag:T,onNodeDragStop:k,onNodesDelete:z,onEdgesDelete:M,onSelectionChange:U,onSelectionDragStart:G,onSelectionDrag:q,onSelectionDragStop:oe,onSelectionContextMenu:ee,onSelectionStart:le,onSelectionEnd:K,connectionMode:ne=y0.Strict,connectionLineType:J=Sf.Bezier,connectionLineStyle:ce,connectionLineComponent:Q,connectionLineContainerStyle:Z,deleteKeyCode:se="Backspace",selectionKeyCode:ie="Shift",selectionOnDrag:fe=!1,selectionMode:Se=Cx.Full,panActivationKeyCode:ge="Space",multiSelectionKeyCode:xe=vb()?"Meta":"Control",zoomActivationKeyCode:ve=vb()?"Meta":"Control",snapToGrid:me=!1,snapGrid:he=KFe,onlyRenderVisibleElements:He=!1,selectNodesOnDrag:et=!0,nodesDraggable:Ue,nodesConnectable:Ie,nodesFocusable:je,nodeOrigin:Ke=qFe,edgesFocusable:rt,edgesUpdatable:xt,elementsSelectable:Tt,defaultViewport:vt=$Fe,minZoom:Vt=.5,maxZoom:Kt=2,translateExtent:cn=rN,preventScrolling:Gt=!0,nodeExtent:Wt,defaultMarkerColor:sn="#b1b1b7",zoomOnScroll:Ht=!0,zoomOnPinch:Qt=!0,panOnScroll:_t=!1,panOnScrollSpeed:Hn=.5,panOnScrollMode:dn=qh.Free,zoomOnDoubleClick:kr=!0,panOnDrag:Fn=!0,onPaneClick:ar,onPaneMouseEnter:Mr,onPaneMouseMove:nr,onPaneMouseLeave:Sa,onPaneScroll:Cr,onPaneContextMenu:hs,children:Ms,onEdgeContextMenu:dr,onEdgeDoubleClick:xn,onEdgeMouseEnter:hr,onEdgeMouseMove:Ta,onEdgeMouseLeave:ms,onEdgeUpdate:Ys,onEdgeUpdateStart:fa,onEdgeUpdateEnd:rn,onReconnect:Ur,onReconnectStart:Ir,onReconnectEnd:es,reconnectRadius:Er=10,edgeUpdaterRadius:Yt=10,onNodesChange:be,onEdgesChange:Pe,noDragClassName:Fe="nodrag",noWheelClassName:De="nowheel",noPanClassName:Le="nopan",fitView:Me=!1,fitViewOptions:tt,connectOnClick:At=!0,attributionPosition:Je,proOptions:at,defaultEdgeOptions:ct,elevateNodesOnSelect:Bt=!0,elevateEdgesOnSelect:jt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ot=!0,autoPanOnNodeDrag:$t=!0,connectionRadius:Cn=20,isValidConnection:Ar,onError:fr,style:mr,id:Hs,nodeDragThreshold:Na,...Xs},ha)=>{const Us=Hs||"1";return yt.createElement("div",{...Xs,style:{...mr,...WFe},ref:ha,className:Fl(["react-flow",s]),"data-testid":"rf__wrapper",id:Hs},yt.createElement(kz,null,yt.createElement(QFe,{onInit:c,onMove:A,onMoveStart:h,onMoveEnd:p,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:F,onNodeMouseMove:D,onNodeMouseLeave:R,onNodeContextMenu:j,onNodeDoubleClick:P,nodeTypes:a,edgeTypes:i,connectionLineType:J,connectionLineStyle:ce,connectionLineComponent:Q,connectionLineContainerStyle:Z,selectionKeyCode:ie,selectionOnDrag:fe,selectionMode:Se,deleteKeyCode:se,multiSelectionKeyCode:xe,panActivationKeyCode:ge,zoomActivationKeyCode:ve,onlyRenderVisibleElements:He,selectNodesOnDrag:et,defaultViewport:vt,translateExtent:cn,minZoom:Vt,maxZoom:Kt,preventScrolling:Gt,zoomOnScroll:Ht,zoomOnPinch:Qt,zoomOnDoubleClick:kr,panOnScroll:_t,panOnScrollSpeed:Hn,panOnScrollMode:dn,panOnDrag:Fn,onPaneClick:ar,onPaneMouseEnter:Mr,onPaneMouseMove:nr,onPaneMouseLeave:Sa,onPaneScroll:Cr,onPaneContextMenu:hs,onSelectionContextMenu:ee,onSelectionStart:le,onSelectionEnd:K,onEdgeContextMenu:dr,onEdgeDoubleClick:xn,onEdgeMouseEnter:hr,onEdgeMouseMove:Ta,onEdgeMouseLeave:ms,onReconnect:Ur??Ys,onReconnectStart:Ir??fa,onReconnectEnd:es??rn,reconnectRadius:Er??Yt,defaultMarkerColor:sn,noDragClassName:Fe,noWheelClassName:De,noPanClassName:Le,elevateEdgesOnSelect:jt,rfId:Us,disableKeyboardA11y:Jt,nodeOrigin:Ke,nodeExtent:Wt}),yt.createElement(O3e,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:w,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:N,nodesDraggable:Ue,nodesConnectable:Ie,nodesFocusable:je,edgesFocusable:rt,edgesUpdatable:xt,elementsSelectable:Tt,elevateNodesOnSelect:Bt,minZoom:Vt,maxZoom:Kt,nodeExtent:Wt,onNodesChange:be,onEdgesChange:Pe,snapToGrid:me,snapGrid:he,connectionMode:ne,translateExtent:cn,connectOnClick:At,defaultEdgeOptions:ct,fitView:Me,fitViewOptions:tt,onNodesDelete:z,onEdgesDelete:M,onNodeDragStart:E,onNodeDrag:T,onNodeDragStop:k,onSelectionDrag:q,onSelectionDragStart:G,onSelectionDragStop:oe,noPanClassName:Le,nodeOrigin:Ke,rfId:Us,autoPanOnConnect:Ot,autoPanOnNodeDrag:$t,onError:fr,connectionRadius:Cn,isValidConnection:Ar,nodeDragThreshold:Na}),yt.createElement(M3e,{onSelectionChange:U}),Ms,yt.createElement(u3e,{proOptions:at,position:Je}),yt.createElement(z3e,{rfId:Us,disableKeyboardA11y:Jt})))});Iz.displayName="ReactFlow";function Fz(t){return e=>{const[n,r]=W.useState(e),s=W.useCallback(a=>r(i=>t(a,i)),[]);return[n,r,s]}}const YFe=Fz(vz),XFe=Fz(sFe);function JFe(){return yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},yt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function ZFe(){return yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},yt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function eDe(){return yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},yt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function tDe(){return yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},yt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function nDe(){return yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},yt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const hv=({children:t,className:e,...n})=>yt.createElement("button",{type:"button",className:Fl(["react-flow__controls-button",e]),...n},t);hv.displayName="ControlButton";const rDe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Dz=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:c,children:A,position:h="bottom-left"})=>{const p=io(),[g,w]=W.useState(!1),{isInteractive:x,minZoomReached:S,maxZoomReached:N}=Ea(rDe,ul),{zoomIn:F,zoomOut:D,fitView:R}=V_();if(W.useEffect(()=>{w(!0)},[]),!g)return null;const j=()=>{F(),a==null||a()},P=()=>{D(),i==null||i()},E=()=>{R(s),o==null||o()},T=()=>{p.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l==null||l(!x)};return yt.createElement(VV,{className:Fl(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&yt.createElement(yt.Fragment,null,yt.createElement(hv,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},yt.createElement(JFe,null)),yt.createElement(hv,{onClick:P,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},yt.createElement(ZFe,null))),n&&yt.createElement(hv,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},yt.createElement(eDe,null)),r&&yt.createElement(hv,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},x?yt.createElement(nDe,null):yt.createElement(tDe,null)),A)};Dz.displayName="Controls";var sDe=W.memo(Dz),$u;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})($u||($u={}));function aDe({color:t,dimensions:e,lineWidth:n}){return yt.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function iDe({color:t,radius:e}){return yt.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const oDe={[$u.Dots]:"#91919a",[$u.Lines]:"#eee",[$u.Cross]:"#e2e2e2"},lDe={[$u.Dots]:1,[$u.Lines]:1,[$u.Cross]:6},cDe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Lz({id:t,variant:e=$u.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const c=W.useRef(null),{transform:A,patternId:h}=Ea(cDe,ul),p=i||oDe[e],g=r||lDe[e],w=e===$u.Dots,x=e===$u.Cross,S=Array.isArray(n)?n:[n,n],N=[S[0]*A[2]||1,S[1]*A[2]||1],F=g*A[2],D=x?[F,F]:N,R=w?[F/a,F/a]:[D[0]/a,D[1]/a];return yt.createElement("svg",{className:Fl(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},yt.createElement("pattern",{id:h+t,x:A[0]%N[0],y:A[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`},w?yt.createElement(iDe,{color:p,radius:F/a}):yt.createElement(aDe,{dimensions:D,color:p,lineWidth:s})),yt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}Lz.displayName="Background";var uDe=W.memo(Lz);function dDe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),e&&(r.href=e),s.href=t,s.href}const ADe=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function qf(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let _m=null;function Rz(t={}){return _m||(t.includeStyleProperties?(_m=t.includeStyleProperties,_m):(_m=qf(window.getComputedStyle(document.documentElement)),_m))}function wb(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function fDe(t){const e=wb(t,"border-left-width"),n=wb(t,"border-right-width");return t.clientWidth+e+n}function hDe(t){const e=wb(t,"border-top-width"),n=wb(t,"border-bottom-width");return t.clientHeight+e+n}function Pz(t,e={}){const n=e.width||fDe(t),r=e.height||hDe(t);return{width:n,height:r}}function mDe(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Tc=16384;function pDe(t){(t.width>Tc||t.height>Tc)&&(t.width>Tc&&t.height>Tc?t.width>t.height?(t.height*=Tc/t.width,t.width=Tc):(t.width*=Tc/t.height,t.height=Tc):t.width>Tc?(t.height*=Tc/t.width,t.width=Tc):(t.width*=Tc/t.height,t.height=Tc))}function bb(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function gDe(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function vDe(t,e,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),gDe(s)}const ic=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||ic(n,e)};function xDe(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function yDe(t,e){return Rz(e).map(n=>{const r=t.getPropertyValue(n),s=t.getPropertyPriority(n);return`${n}: ${r}${s?" !important":""};`}).join(" ")}function wDe(t,e,n,r){const s=`.${t}:${e}`,a=n.cssText?xDe(n):yDe(n,r);return document.createTextNode(`${s}{${a}}`)}function UM(t,e,n,r){const s=window.getComputedStyle(t,n),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=ADe();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(wDe(i,n,s,r)),e.appendChild(o)}function bDe(t,e,n){UM(t,e,":before",n),UM(t,e,":after",n)}const OM="application/font-woff",jM="image/jpeg",_De={woff:OM,woff2:OM,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:jM,jpeg:jM,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function CDe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function tk(t){const e=CDe(t).toLowerCase();return _De[e]||""}function EDe(t){return t.split(/,/)[1]}function sN(t){return t.search(/^(data:)/)!==-1}function SDe(t,e){return`data:${e};base64,${t}`}async function Mz(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(n({res:r,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const GS={};function TDe(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function nk(t,e,n){const r=TDe(t,e,n.includeQueryParams);if(GS[r]!=null)return GS[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await Mz(t,n.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),EDe(o)));s=SDe(a,e)}catch(a){s=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return GS[r]=s,s}async function NDe(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):bb(e)}async function BDe(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return bb(o)}const n=t.poster,r=tk(n),s=await nk(n,r,e);return bb(s)}async function kDe(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await z_(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function IDe(t,e){return ic(t,HTMLCanvasElement)?NDe(t):ic(t,HTMLVideoElement)?BDe(t,e):ic(t,HTMLIFrameElement)?kDe(t,e):t.cloneNode(Uz(t))}const FDe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",Uz=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function DDe(t,e,n){var r,s;if(Uz(e))return e;let a=[];return FDe(t)&&t.assignedNodes?a=qf(t.assignedNodes()):ic(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=qf(t.contentDocument.body.childNodes):a=qf(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||ic(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>z_(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function LDe(t,e,n){const r=e.style;if(!r)return;const s=window.getComputedStyle(t);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):Rz(n).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),ic(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),r.setProperty(a,i,s.getPropertyPriority(a))})}function RDe(t,e){ic(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ic(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function PDe(t,e){if(ic(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(s=>t.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function MDe(t,e,n){return ic(e,Element)&&(LDe(t,e,n),bDe(t,e,n),RDe(t,e),PDe(t,e)),e}async function UDe(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const o=n[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),c=document.querySelector(o);!l&&c&&!r[o]&&(r[o]=await z_(c,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function z_(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>IDe(r,e)).then(r=>DDe(t,r,e)).then(r=>MDe(t,r,e)).then(r=>UDe(r,e))}const Oz=/url\((['"]?)([^'"]+?)\1\)/g,ODe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,jDe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function HDe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function QDe(t){const e=[];return t.replace(Oz,(n,r,s)=>(e.push(s),n)),e.filter(n=>!sN(n))}async function VDe(t,e,n,r,s){try{const a=n?dDe(e,n):e,i=tk(e);let o;return s||(o=await nk(a,i,r)),t.replace(HDe(e),`$1${o}$3`)}catch{}return t}function zDe(t,{preferredFontFormat:e}){return e?t.replace(jDe,n=>{for(;;){const[r,,s]=ODe.exec(n)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):t}function jz(t){return t.search(Oz)!==-1}async function Hz(t,e,n){if(!jz(t))return t;const r=zDe(t,n);return QDe(r).reduce((a,i)=>a.then(o=>VDe(o,i,e,n)),Promise.resolve(r))}async function Cm(t,e,n){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(s){const a=await Hz(s,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function GDe(t,e){await Cm("background",t,e)||await Cm("background-image",t,e),await Cm("mask",t,e)||await Cm("-webkit-mask",t,e)||await Cm("mask-image",t,e)||await Cm("-webkit-mask-image",t,e)}async function qDe(t,e){const n=ic(t,HTMLImageElement);if(!(n&&!sN(t.src))&&!(ic(t,SVGImageElement)&&!sN(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,s=await nk(r,tk(r),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(c){i(c)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=s):t.href.baseVal=s})}async function KDe(t,e){const r=qf(t.childNodes).map(s=>Qz(s,e));await Promise.all(r).then(()=>t)}async function Qz(t,e){ic(t,Element)&&(await GDe(t,e),await qDe(t,e),await KDe(t,e))}function $De(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),t}const HM={};async function QM(t){let e=HM[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},HM[t]=e,e}async function VM(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),Mz(o,e.fetchRequestInit,({result:l})=>(n=n.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>n)}function zM(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=o.exec(r),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function WDe(t,e){const n=[],r=[];return t.forEach(s=>{if("cssRules"in s)try{qf(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,c=QM(l).then(A=>VM(A,e)).then(A=>zM(A).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:h,error:p})}})).catch(A=>{console.error("Error loading remote css",A.toString())});r.push(c)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&r.push(QM(s.href).then(o=>VM(o,e)).then(o=>zM(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(s=>{if("cssRules"in s)try{qf(s.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),n))}function YDe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>jz(e.style.getPropertyValue("src")))}async function XDe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=qf(t.ownerDocument.styleSheets),r=await WDe(n,e);return YDe(r)}function Vz(t){return t.trim().replace(/["']/g,"")}function JDe(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(Vz(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function ZDe(t,e){const n=await XDe(t,e),r=JDe(t);return(await Promise.all(n.filter(a=>r.has(Vz(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return Hz(a.cssText,i,e)}))).join(`
`)}async function eLe(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await ZDe(t,e);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function tLe(t,e={}){const{width:n,height:r}=Pz(t,e),s=await z_(t,e,!0);return await eLe(s,e),await Qz(s,e),$De(s,e),await vDe(s,n,r)}async function nLe(t,e={}){const{width:n,height:r}=Pz(t,e),s=await tLe(t,e),a=await bb(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||mDe(),c=e.canvasWidth||n,A=e.canvasHeight||r;return i.width=c*l,i.height=A*l,e.skipAutoScale||pDe(i),i.style.width=`${c}`,i.style.height=`${A}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function G_(t,e={}){return(await nLe(t,e)).toDataURL()}const zz="recursos_crucigramas",q_="recursos_lineas_de_tiempo",K_="recursos_mapas_mentales",Gz="recursos_sopas_de_letras",$_=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,createdAt:((a=(s=e.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.createdAt}},rLe=t=>{const e=mn(zt(Ut,zz),Pr("fechaCreacion","desc"));return jn(e,n=>{const r=n.docs.map(s=>$_(s));t(r)},n=>{console.error("Error al suscribirse a los crucigramas:",n),t([])})},sLe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Nn.fromDate(new Date)};return(await la(zt(Ut,zz),n)).id}catch(n){throw console.error("Error al guardar el crucigrama:",n),new Error("No se pudo guardar el crucigrama.")}},aLe=t=>{const e=mn(zt(Ut,q_),Pr("createdAt","desc"));return jn(e,n=>{const r=n.docs.map(s=>$_(s));t(r)},n=>{console.error("Error al suscribirse a las lneas de tiempo:",n),t([])})},iLe=async(t,e)=>{try{const{id:n,...r}=t,s=On(Ut,q_,n);await Fo(s,{...r,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Nn.fromDate(new Date(r.createdAt||Date.now()))},{merge:!0})}catch(n){throw console.error("Error al guardar la lnea de tiempo:",n),new Error("No se pudo guardar la lnea de tiempo.")}},oLe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Nn.fromDate(new Date)};return(await la(zt(Ut,q_),n)).id}catch(n){throw console.error("Error al crear la lnea de tiempo:",n),new Error("No se pudo crear la lnea de tiempo.")}},lLe=async t=>{try{const e=On(Ut,q_,t);await ao(e)}catch(e){throw console.error("Error al eliminar la lnea de tiempo:",e),new Error("No se pudo eliminar la lnea de tiempo.")}},cLe=t=>{const e=mn(zt(Ut,K_),Pr("createdAt","desc"));return jn(e,n=>{const r=n.docs.map(s=>$_(s));t(r)},n=>{console.error("Error al suscribirse a los mapas mentales:",n),t([])})},uLe=async(t,e)=>{try{const{id:n,...r}=t,s=On(Ut,K_,n);await Fo(s,{...r,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Nn.fromDate(new Date(r.createdAt||Date.now()))},{merge:!0})}catch(n){throw console.error("Error al guardar el mapa mental:",n),new Error("No se pudo guardar el mapa mental.")}},dLe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Nn.fromDate(new Date)};return(await la(zt(Ut,K_),n)).id}catch(n){throw console.error("Error al crear el mapa mental:",n),new Error("No se pudo crear el mapa mental.")}},ALe=async t=>{try{const e=On(Ut,K_,t);await ao(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},fLe=t=>{const e=mn(zt(Ut,Gz),Pr("createdAt","desc"));return jn(e,n=>{const r=n.docs.map(s=>$_(s));t(r)},n=>{console.error("Error al suscribirse a las sopas de letras:",n),t([])})},hLe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Nn.fromDate(new Date)};return(await la(zt(Ut,Gz),n)).id}catch(n){throw console.error("Error al guardar la sopa de letras:",n),new Error("No se pudo guardar la sopa de letras.")}},mLe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),pLe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),gLe=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),vLe=({data:t})=>{const e={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},n=e[t.type||"default"]||e.default;return u.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${n} flex items-center gap-3 min-w-[180px]`,children:[u.jsx(Np,{type:"target",position:Tn.Left,className:"w-2 h-2 !bg-slate-400"}),u.jsx("span",{className:"text-xl",children:t.icon||""}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:t.label}),t.type&&u.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.type})]}),u.jsx(Np,{type:"source",position:Tn.Right,className:"w-2 h-2 !bg-slate-400"})]})},aN=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((n,r)=>n+aN(r,e),0),iN=(t,e="tree")=>{const n=[],r=[];if(e==="tree"){const i=(o,l,c)=>{n.push({id:o.id,position:{x:l*280,y:c},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const A=aN(o,100);let h=c-A/2+100/2;(o.children||[]).forEach(p=>{const g=aN(p,100),w=h+g/2-100/2;r.push({id:`e-${o.id}-${p.id}`,source:o.id,target:p.id,type:"smoothstep",animated:!0}),i(p,l+1,w),h+=g})};i(t,0,0)}else{n.push({id:t.id,position:{x:0,y:0},data:{label:t.label,icon:t.icon,type:t.type},type:"custom"});const i=300,o=500;(t.children||[]).forEach((l,c)=>{const A=c/t.children.length*2*Math.PI;n.push({id:l.id,position:{x:i*Math.cos(A),y:i*Math.sin(A)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),r.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((h,p)=>{const g=A+(p-(l.children.length-1)/2)*.25;n.push({id:h.id,position:{x:o*Math.cos(g),y:o*Math.sin(g)},data:{label:h.label,icon:h.icon,type:h.type},type:"custom"}),r.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep"})})})}return{nodes:n,edges:r}},qz=({node:t,onUpdate:e,onAddChild:n,onDelete:r,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return u.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[u.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),u.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),s>0&&u.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(t.children||[]).map(o=>u.jsx(qz,{node:o,onUpdate:e,onAddChild:n,onDelete:r,level:s+1},o.id))]})},xLe={custom:vLe},yLe=({mapData:t,onBack:e,onSave:n})=>{const[r,s]=W.useState(t.treeData),[a,i]=W.useState("tree"),[o,l]=W.useState(!1),[c,A,h]=YFe([]),[p,g,w]=XFe([]),{fitView:x}=V_();W.useEffect(()=>{const{nodes:j,edges:P}=iN(r,a);A(j),g(P),setTimeout(()=>x({duration:300}),50)},[r,a,A,g,x]);const S=(j,P)=>{const E=JSON.parse(JSON.stringify(r)),T=k=>k.id===j?(k.label=P,!0):(k.children||[]).some(T);T(E),s(E)},N=j=>{const P=JSON.parse(JSON.stringify(r)),E=T=>T.id===j?(T.children||(T.children=[]),T.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(T.children||[]).some(E);E(P),s(P)},F=j=>{const P=JSON.parse(JSON.stringify(r)),E=T=>{const k=(T.children||[]).findIndex(z=>z.id===j);return k!==-1?(T.children.splice(k,1),!0):(T.children||[]).some(E)};E(P),s(P)},D=()=>{l(!0);const{nodes:j,edges:P}=iN(r,a);n({...t,treeData:r,nodes:j,edges:P}),setTimeout(()=>l(!1),1e3)},R=async j=>{const P=document.querySelector(".react-flow");P&&G_(P,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const T=document.createElement("a");T.download=`${t.tema}.png`,T.href=E,T.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),u.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:u.jsxs(Iz,{nodes:c,edges:p,onNodesChange:h,onEdgesChange:w,fitView:!0,nodeTypes:xLe,children:[u.jsx(sDe,{}),u.jsx(uDe,{})]})}),u.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),u.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[u.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[u.jsx(pLe,{})," Vista en rbol"]}),u.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[u.jsx(gLe,{})," Vista central"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:u.jsx(qz,{node:r,onUpdate:S,onAddChild:N,onDelete:F})}),u.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>R(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),u.jsx("button",{onClick:D,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},wLe=({onBack:t,currentUser:e})=>{const[n,r]=W.useState("list"),[s,a]=W.useState([]),[i,o]=W.useState(null),[l,c]=W.useState(!1),[A,h]=W.useState(!0),[p,g]=W.useState(""),[w,x]=W.useState(""),[S,N]=W.useState("");W.useEffect(()=>{h(!0);const E=cLe(T=>{a(T),h(!1)});return()=>E()},[]);const F=async E=>{if(E.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}c(!0);const T="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=`
            Basado en el tema central "${p}", y considerando el contenido adicional "${S}", genera una estructura jerrquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raz con las siguientes claves:
            - "label": El tema central ("${p}").
            - "icon": Un emoji que represente el tema.
            - "type": La categora, que para el nodo raz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categora descriptiva (ej: "Concepto Clave", "Ejemplo Prctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vaco si es un nodo final.
        `;try{const oe=(await(await new Si(T).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(oe),le=Z=>({id:crypto.randomUUID(),label:Z.label||"Sin etiqueta",icon:Z.icon||"",type:Z.type||"default",children:(Z.children||[]).map(le)}),K=le(ee),{nodes:ne,edges:J}=iN(K),ce={tema:p,nivel:w,treeData:K,nodes:ne,edges:J},Q=await dLe(ce,e);o({...ce,id:Q,createdAt:new Date().toISOString()}),r("editor")}catch(z){console.error("AI Generation Error:",z),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{c(!1)}},D=async E=>{try{await uLe(E,e)}catch(T){console.error("Error saving mind map:",T),alert("No se pudo guardar el mapa mental.")}},R=E=>{o(E),r("editor")},j=async E=>{if(window.confirm("Eliminar este mapa mental?"))try{await ALe(E)}catch(T){console.error("Error deleting mind map:",T),alert("No se pudo eliminar el mapa mental.")}},P=()=>{switch(n){case"editor":return i?u.jsx(ek,{children:u.jsx(yLe,{mapData:i,onBack:()=>r("list"),onSave:D})}):null;case"config":return u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),u.jsx("button",{onClick:()=>r("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"tema",value:p,onChange:E=>g(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),u.jsx("textarea",{id:"contenido",value:S,onChange:E=>N(E.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsx("div",{className:"flex justify-end pt-4",children:u.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?u.jsx(mLe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),u.jsx("button",{onClick:()=>r("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(E=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[u.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("button",{onClick:()=>R(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),u.jsx("button",{onClick:()=>j(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):u.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return A?u.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("span",{className:"text-4xl",children:""}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),P()]})},bLe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_Le=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),CLe=({onBack:t,currentUser:e})=>{const[n,r]=W.useState([]),[s,a]=W.useState("Media"),[i,o]=W.useState(10),[l,c]=W.useState(!1),[A,h]=W.useState(Array(10).fill("")),[p,g]=W.useState(""),[w,x]=W.useState(null),[S,N]=W.useState({ai:!1,puzzle:!1,data:!0}),F=W.useRef(null);W.useEffect(()=>{N(M=>({...M,data:!0}));const z=fLe(M=>{r(M),N(U=>({...U,data:!1}))});return()=>z()},[]),W.useEffect(()=>{h(z=>{const M=Array(i).fill("");for(let U=0;U<Math.min(z.length,i);U++)M[U]=z[U];return M})},[i]);const D=(z,M)=>{const U=[...A];U[z]=M,h(U)},R=async()=>{if(p.trim()){N(z=>({...z,ai:!0}));try{const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=new Si(z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=`
                Genera una lista de ${i} palabras clave en espaol, estrictamente relacionadas con el tema "${p}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,le=(await(await U.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(le);if(!K.palabras||!Array.isArray(K.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const J=[...K.palabras.map(ce=>ce.toUpperCase().replace(/[^A-Z]/g,"")).slice(0,i)];for(;J.length<i;)J.push("");h(J)}catch(z){console.error("Error generating words with AI:",z),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{N(z=>({...z,ai:!1}))}}},j=(z,M,U,G,q,oe)=>{for(let ee=0;ee<z.length;ee++){const le=U+ee*q.y,K=G+ee*q.x;if(le<0||le>=oe||K<0||K>=oe||M[le][K]&&M[le][K]!==z[ee])return!1}return!0},P=(z,M,U,G,q)=>{for(let oe=0;oe<z.length;oe++)M[U+oe*q.y][G+oe*q.x]=z[oe]},E=async()=>{N(le=>({...le,puzzle:!0})),x(null),await new Promise(le=>setTimeout(le,100));const z=A.map(le=>le.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(z.length===0){alert("Por favor, ingrese al menos una palabra vlida."),N(le=>({...le,puzzle:!1}));return}const M=Math.max(...z.map(le=>le.length));let U=Math.max(M,z.length)+2;s==="Media"&&(U+=3),s==="Difcil"&&(U+=5),U=Math.min(Math.max(U,10),25);const G=Array(U).fill(null).map(()=>Array(U).fill(null)),q=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];s!=="Fcil"&&q.push({x:1,y:-1}),s==="Difcil"&&q.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const le of z.sort((K,ne)=>ne.length-K.length)){let K=!1;for(let ne=0;ne<100;ne++){const J=q[Math.floor(Math.random()*q.length)],ce=Math.floor(Math.random()*U),Q=Math.floor(Math.random()*U);if(j(le,G,ce,Q,J,U)){P(le,G,ce,Q,J),K=!0;break}}K||console.warn(`No se pudo colocar la palabra: ${le}`)}const oe=G.map(le=>le.map(K=>K||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),ee={tema:p||"Personalizado",grid:oe.map(le=>le.join("")),words:z.sort()};try{const le=await hLe(ee,e);x({...ee,id:le,createdAt:new Date().toISOString()})}catch(le){console.error("Error saving puzzle:",le),alert("No se pudo guardar la sopa de letras.")}finally{N(le=>({...le,puzzle:!1}))}},T=()=>{F.current&&G_(F.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(z=>{const M=document.createElement("a");M.download="sopa-de-letras.png",M.href=z,M.click()}).catch(z=>{console.error("oops, something went wrong!",z),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},k=()=>{var U;if(!w)return null;const z=((U=w.grid[0])==null?void 0:U.length)||1,M=w.grid.join("").split("");return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{ref:F,className:"p-6 bg-white",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${z}, minmax(0, 1fr))`},children:M.map((G,q)=>u.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:G},q))})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),u.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:w.words.map(G=>u.jsx("li",{children:G},G))})]})]})}),u.jsxs("div",{className:"flex justify-end gap-4",children:[u.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),u.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return S.data?u.jsx("div",{className:"text-center py-10",children:"Cargando..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:""}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!w&&u.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),u.jsxs("select",{value:s,onChange:z=>a(z.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[u.jsx("option",{children:"Fcil"}),u.jsx("option",{children:"Media"}),u.jsx("option",{children:"Difcil"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(z=>u.jsx("button",{onClick:()=>{o(z),c(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===z?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:z},z)),u.jsx("button",{onClick:()=>c(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&u.jsx("input",{type:"number",value:i,onChange:z=>o(parseInt(z.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:z=>g(z.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:R,disabled:S.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:S.ai?u.jsx(bLe,{}):u.jsxs(u.Fragment,{children:[u.jsx(_Le,{}),u.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:A.map((z,M)=>u.jsx("input",{type:"text",value:z,onChange:U=>D(M,U.target.value),placeholder:`Palabra ${M+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},M))})]}),u.jsx("div",{className:"text-right pt-4",children:u.jsx("button",{onClick:E,disabled:S.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:S.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),w&&k()]})},ELe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),SLe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),TLe=({timeline:t,onSave:e,onBack:n})=>{const[r,s]=W.useState(t),[a,i]=W.useState(null),o=W.useRef(null),l=(g,w,x)=>{s(S=>({...S,events:S.events.map(N=>N.id===g?{...N,[w]:x}:N)}))},c=()=>{const g={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},w=[...r.events,g].sort((x,S)=>parseInt(x.date)-parseInt(S.date));s(x=>({...x,events:w}))},A=g=>{s(w=>({...w,events:w.events.filter(x=>x.id!==g)}))},h=async g=>{if(!g.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}i(g.id);const w="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una lnea de tiempo sobre "${r.tema}", toma la siguiente idea para un hito y mejrala.
            Idea del usuario: "${g.description}"

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional, con tres claves:
            1. "date": El ao o fecha ms precisa y relevante para esta idea.
            2. "description": Una descripcin concisa (mximo 15 palabras) para la lnea de tiempo.
            3. "icon": Un nico emoji que represente el hito.
        `;try{const j=(await(await new Si(w).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),P=JSON.parse(j);s(E=>({...E,events:E.events.map(T=>T.id===g.id?{...T,date:P.date,description:P.description,icon:P.icon}:T).sort((T,k)=>parseInt(T.date)-parseInt(k.date))}))}catch(S){console.error("Error al generar descripcin del hito:",S),alert("No se pudo autocompletar el hito.")}finally{i(null)}},p=()=>{o.current&&G_(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(g=>{const w=document.createElement("a");w.download=`linea-tiempo-${r.tema.replace(/\s+/g,"_")}.png`,w.href=g,w.click()}).catch(g=>{console.error("Error al generar la imagen:",g),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.tema}),u.jsx("button",{onClick:n,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:u.jsxs("div",{ref:o,className:"relative p-10",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),u.jsx("div",{className:"relative",children:r.events.sort((g,w)=>parseInt(g.date)-parseInt(w.date)).map((g,w)=>{const x=w%2===0;return u.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[u.jsx("div",{className:"w-1/2",children:x&&u.jsx("div",{className:"text-right pr-8",children:u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[u.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:g.icon}),u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:g.date}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:g.description})]})})}),u.jsx("div",{className:"z-10 flex-shrink-0",children:u.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),u.jsx("div",{className:"w-1/2",children:!x&&u.jsx("div",{className:"text-left pl-8",children:u.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[u.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:g.icon}),u.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:g.date}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:g.description})]})})})]},g.id)})})]})}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:r.events.map(g=>u.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[u.jsx("input",{type:"text",value:g.date,onChange:w=>l(g.id,"date",w.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("textarea",{value:g.description,onChange:w=>l(g.id,"description",w.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),u.jsx("button",{onClick:()=>h(g),disabled:a===g.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:a===g.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):u.jsx(SLe,{})})]}),u.jsx("button",{onClick:()=>A(g.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},g.id))}),u.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[u.jsx("button",{onClick:c,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:p,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),u.jsx("button",{onClick:()=>e(r),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},NLe=({onBack:t,currentUser:e})=>{const[n,r]=W.useState("list"),[s,a]=W.useState([]),[i,o]=W.useState(null),[l,c]=W.useState(!1),[A,h]=W.useState(!0),[p,g]=W.useState(""),[w,x]=W.useState(""),[S,N]=W.useState("");W.useEffect(()=>{h(!0);const j=aLe(P=>{a(P),h(!1)});return()=>j()},[]);const F=async j=>{if(j.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}c(!0);const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=w&&S?`entre ${w} y ${S}`:w?`a partir de ${w}`:S?`hasta ${S}`:"",T=`
            Genera una lnea de tiempo sobre el tema "${p}" ${E}.
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el ao del hito.
            2. "description": Un string con la descripcin breve del hito (mximo 15 palabras).
            3. "icon": Un string con un nico emoji que represente el hito.
            Ordena los eventos cronolgicamente.
        `;try{const q=(await(await new Si(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(T)).response).text().replace(/^```json\s*|```\s*$/g,""),oe=JSON.parse(q);if(!oe.events||!Array.isArray(oe.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const ee={tema:p,fechaInicio:w,fechaFin:S,events:oe.events.map(K=>({id:crypto.randomUUID(),date:K.date||"Sin fecha",description:K.description||"Sin descripcin",icon:K.icon||""}))},le=await oLe(ee,e);o({...ee,id:le,createdAt:new Date().toISOString()}),r("editor")}catch(k){console.error("AI Generation Error:",k),alert("Hubo un error al generar la lnea de tiempo. Por favor, revisa el formato del tema o intntalo de nuevo.")}finally{c(!1)}},D=async j=>{try{await iLe(j,e),r("list"),o(null)}catch(P){console.error("Error saving timeline:",P),alert("No se pudo guardar la lnea de tiempo.")}},R=async j=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await lLe(j)}catch(P){console.error("Error deleting timeline:",P),alert("No se pudo eliminar la lnea de tiempo.")}};return n==="editor"&&i?u.jsx(TLe,{timeline:i,onSave:D,onBack:()=>r("list")}):A?u.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:""}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),u.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"tema",value:p,onChange:j=>g(j.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),u.jsx("input",{type:"text",id:"fechaInicio",value:w,onChange:j=>x(j.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),u.jsx("input",{type:"text",id:"fechaFin",value:S,onChange:j=>N(j.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?u.jsx(ELe,{}):"Generar con IA"})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),s.length>0?s.map(j=>u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.tema}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(j.createdAt).toLocaleDateString("es-CL")]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{o(j),r("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),u.jsx("button",{onClick:()=>R(j.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},j.id)):u.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},BLe=()=>u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),GM=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),kLe=({onBack:t,currentUser:e})=>{const[n,r]=W.useState([]),[s,a]=W.useState(10),[i,o]=W.useState(!1),[l,c]=W.useState(Array(10).fill("")),[A,h]=W.useState(Array(10).fill("")),[p,g]=W.useState(""),[w,x]=W.useState(null),[S,N]=W.useState(!1),[F,D]=W.useState({ai:!1,puzzle:!1,data:!0}),[R,j]=W.useState(null),P=W.useRef(null);W.useEffect(()=>{D(oe=>({...oe,data:!0}));const q=rLe(oe=>{const ee=oe.map(le=>{const{grid_flat:K,grid_width:ne,...J}=le,ce=[];if(K&&ne>0)for(let Q=0;Q<K.length;Q+=ne)ce.push(K.slice(Q,Q+ne));return{...J,grid:ce}});r(ee),D(le=>({...le,data:!1}))});return()=>q()},[]),W.useEffect(()=>{const q=s;c(oe=>Array.from({length:q},(ee,le)=>oe[le]||"")),h(oe=>Array.from({length:q},(ee,le)=>oe[le]||""))},[s]);const E=(q,oe)=>{const ee=[...l];ee[q]=oe,c(ee)},T=(q,oe)=>{const ee=[...A];ee[q]=oe,h(ee)},k=async()=>{if(p.trim()){D(q=>({...q,ai:!0}));try{const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ee=new Si(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),le=`
                Genera una lista de ${s} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${p}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${s} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en maysculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ce=(await(await ee.generateContent(le)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const Q=ce.indexOf("{"),Z=ce.lastIndexOf("}");Q!==-1&&Z!==-1&&(ce=ce.substring(Q,Z+1)),ce=ce.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ce.includes("__SPLIT__")&&(ce=ce.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(Se,ge,xe,ve)=>{const me=xe.split("__SPLIT__").map(he=>he.trim().replace(/,$/,""));return ge+me.join(",")+ve})),ce=ce.replace(/,\s*]/g,"]");let se;try{se=JSON.parse(ce)}catch{console.error("Respuesta IA no es JSON vlido:",ce),alert("La respuesta de la IA no es un JSON vlido. Intenta de nuevo o ajusta el tema."),D(ge=>({...ge,ai:!1}));return}if(!se.items||!Array.isArray(se.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const ie=se.items.map(Se=>(Se.word||"").toUpperCase().replace(/\s/g,"")),fe=se.items.map(Se=>Se.clue||"");c(Array.from({length:s},(Se,ge)=>ie[ge]||"")),h(Array.from({length:s},(Se,ge)=>fe[ge]||""))}catch(q){console.error("Error generating words/clues with AI:",q),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{D(q=>({...q,ai:!1}))}}},z=async q=>{const oe=l[q];if(!oe||!oe.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}j(q);try{const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new Si(ee).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne=`Para un crucigrama con el tema "${p||"general"}", genera una pista concisa y creativa para la palabra "${oe}". La respuesta debe ser un nico objeto JSON vlido sin texto adicional, con una sola clave: "clue".`,Z=(await(await K.generateContent(ne)).response).text().replace(/^```json\s*|```\s*$/g,""),se=JSON.parse(Z);se.clue&&T(q,se.clue)}catch(ee){console.error("Error generating clue with AI:",ee),alert("No se pudo generar la pista.")}finally{j(null)}},M=W.useCallback(()=>{try{const q=l.map((je,Ke)=>({word:je.toUpperCase().replace(/[^A-Z]/g,""),clue:A[Ke]})).filter(je=>je.word.length>0);if(q.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;q.sort((je,Ke)=>Ke.word.length-je.word.length);const oe=q[0].word.length,ee=Math.max(oe,q.length)*2;let le=Array.from({length:ee},()=>Array(ee).fill(null));const K=[],ne=q.shift(),J=Math.floor(ee/2),ce=Math.floor((ee-ne.word.length)/2);for(let je=0;je<ne.word.length;je++)le[J][ce+je]=ne.word[je];K.push({word:ne.word,clue:ne.clue,direction:"across",row:J,col:ce});for(const je of q){let Ke={score:-1,row:-1,col:-1,direction:"across"};for(const rt of K)for(let xt=0;xt<rt.word.length;xt++)for(let Tt=0;Tt<je.word.length;Tt++)if(rt.word[xt]===je.word[Tt]){let vt=0,Vt,Kt,cn;rt.direction==="across"?(cn="down",Vt=rt.row-Tt,Kt=rt.col+xt):(cn="across",Vt=rt.row+xt,Kt=rt.col-Tt);let Gt=!0;for(let Wt=0;Wt<je.word.length;Wt++){const sn=Vt+(cn==="down"?Wt:0),Ht=Kt+(cn==="across"?Wt:0);if(sn<0||sn>=ee||Ht<0||Ht>=ee){Gt=!1;break}const Qt=le[sn][Ht],_t=sn===rt.row+(rt.direction==="down"?xt:0)&&Ht===rt.col+(rt.direction==="across"?xt:0);if(Qt&&!_t){Gt=!1;break}if(Qt&&_t&&Qt!==je.word[Tt]){Gt=!1;break}if(!_t){if(cn==="across"&&(sn>0&&le[sn-1][Ht]||sn<ee-1&&le[sn+1][Ht])){Gt=!1;break}if(cn==="down"&&(Ht>0&&le[sn][Ht-1]||Ht<ee-1&&le[sn][Ht+1])){Gt=!1;break}}Qt&&vt++}Gt&&vt>Ke.score&&(Ke={score:vt,row:Vt,col:Kt,direction:cn})}if(Ke.score>-1){for(let rt=0;rt<je.word.length;rt++){const xt=Ke.row+(Ke.direction==="down"?rt:0),Tt=Ke.col+(Ke.direction==="across"?rt:0);le[xt][Tt]=je.word[rt]}K.push({word:je.word,clue:je.clue,direction:Ke.direction,row:Ke.row,col:Ke.col})}}let Q=ee,Z=-1,se=ee,ie=-1;K.forEach(je=>{Q=Math.min(Q,je.row),Z=Math.max(Z,je.row+(je.direction==="down"?je.word.length-1:0)),se=Math.min(se,je.col),ie=Math.max(ie,je.col+(je.direction==="across"?je.word.length-1:0))}),Z===-1&&(Q=K[0].row,Z=K[0].row,se=K[0].col,ie=K[0].col+K[0].word.length-1);const fe=1,Se=Math.max(0,Q-fe),ge=Math.min(ee,Z+1+fe),xe=Math.max(0,se-fe),ve=Math.min(ee,ie+1+fe),me=le.slice(Se,ge).map(je=>je.slice(xe,ve)),he=K.map(je=>({...je,row:je.row-Se,col:je.col-xe})).sort((je,Ke)=>je.row-Ke.row||je.col-Ke.col);let He=1;const et=[],Ue=new Map;he.forEach(je=>{const Ke=`${je.row},${je.col}`;Ue.has(Ke)||Ue.set(Ke,He++),et.push({...je,number:Ue.get(Ke)})});const Ie=me.map(je=>je.map(Ke=>({char:Ke,number:null})));return et.forEach(je=>{const Ke=`${je.row},${je.col}`;Ie[je.row]&&Ie[je.row][je.col]!==void 0&&(Ie[je.row][je.col].number=Ue.get(Ke))}),{grid:Ie,clues:{across:et.filter(je=>je.direction==="across").sort((je,Ke)=>je.number-Ke.number),down:et.filter(je=>je.direction==="down").sort((je,Ke)=>je.number-Ke.number)}}}catch(q){return console.error("Error generating crossword grid:",q),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,A]),U=async()=>{var oe;D(ee=>({...ee,puzzle:!0})),x(null),await new Promise(ee=>setTimeout(ee,100));const q=M();if(q){const ee={creadorId:e.id,creadorNombre:e.nombreCompleto,tema:p||"Personalizado",grid:q.grid,clues:q.clues},{grid:le,...K}=ee,ne={...K,grid_flat:le.flat().map(J=>J.char||""),grid_width:((oe=le[0])==null?void 0:oe.length)||0};try{const J=await sLe(ne,e);x({...ee,id:J,fechaCreacion:new Date().toISOString()})}catch(J){console.error("Error saving puzzle:",J),alert("No se pudo guardar el crucigrama en la base de datos.")}}D(ee=>({...ee,puzzle:!1}))},G=()=>{P.current&&(N(!1),setTimeout(()=>{G_(P.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(q=>{const oe=document.createElement("a");oe.download="crucigrama.png",oe.href=q,oe.click()}).catch(q=>console.error("Error generating image",q))},100))};return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"text-4xl",children:""}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),u.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),w?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{ref:P,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsx("div",{children:u.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${w.grid[0].length}, 2rem)`},children:w.grid.flat().map((q,oe)=>u.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:q.char?"white":"black"},children:[q.number&&u.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:q.number}),S&&q.char&&u.jsx("span",{children:q.char})]},oe))})}),u.jsxs("div",{className:"text-sm",children:[u.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),u.jsx("ul",{className:"space-y-1",children:w.clues.across.map(q=>u.jsxs("li",{children:[u.jsxs("strong",{children:[q.number,"."]})," ",q.clue]},`${q.word}-${q.clue}`))}),u.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),u.jsx("ul",{className:"space-y-1",children:w.clues.down.map(q=>u.jsxs("li",{children:[u.jsxs("strong",{children:[q.number,"."]})," ",q.clue]},`${q.word}-${q.clue}`))})]})]})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:S,onChange:()=>N(!S),className:"h-5 w-5 rounded"}),u.jsx("span",{children:"Mostrar Solucin"})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),u.jsx("button",{onClick:G,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):u.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(q=>u.jsx("button",{onClick:()=>{a(q),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&s===q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:q},q)),u.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&u.jsx("input",{type:"number",value:s,onChange:q=>a(parseInt(q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:q=>g(q.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:k,disabled:F.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:F.ai?u.jsx(BLe,{}):u.jsxs(u.Fragment,{children:[u.jsx(GM,{}),u.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),u.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((q,oe)=>u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsx("input",{type:"text",value:l[oe],onChange:ee=>E(oe,ee.target.value),placeholder:`Palabra ${oe+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[u.jsx("textarea",{value:A[oe],onChange:ee=>T(oe,ee.target.value),placeholder:`Pista ${oe+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),u.jsx("button",{onClick:()=>z(oe),disabled:R===oe,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:R===oe?u.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):u.jsx(GM,{})})]})]},oe))}),u.jsx("div",{className:"text-right pt-4",children:u.jsx("button",{onClick:U,disabled:F.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:F.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},ILe=()=>{const[t,e]=W.useState(null),[n,r]=W.useState(!0);return W.useEffect(()=>{const s=C8(qee,async a=>{if(a&&a.email)try{const i=await hj(a.email);e(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),e(null)}else e(null);r(!1)});return()=>s()},[]),{currentUser:t,loading:n}},FLe=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],DLe=({recurso:t,onClick:e})=>u.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[u.jsx("div",{className:"text-6xl mb-4",children:t.icon}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),LLe=()=>{const[t,e]=W.useState("menu"),{currentUser:n}=ILe(),r=()=>t!=="menu"&&!n?u.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):t==="mapasMentales"?u.jsx(wLe,{onBack:()=>e("menu"),currentUser:n}):t==="sopaDeLetras"?u.jsx(CLe,{onBack:()=>e("menu"),currentUser:n}):t==="lineasDeTiempo"?u.jsx(NLe,{onBack:()=>e("menu"),currentUser:n}):t==="crucigramas"?u.jsx(kLe,{onBack:()=>e("menu"),currentUser:n}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:FLe.map(s=>u.jsx(DLe,{recurso:s,onClick:()=>e(s.id)},s.id))})]});return u.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},RLe="evaluaciones_formativas",PLe="calificaciones_formativas",Kz="trabajos_grupales_formativos",$z=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},MLe=(t,e)=>{const n=mn(zt(Ut,RLe),fs("curso","==",t));return jn(n,r=>{e(r.docs.map(s=>$z(s)))},r=>{console.error("Error subscribing to student evaluations:",r),e([])})},ULe=t=>{const e=mn(zt(Ut,PLe));return jn(e,n=>{const r={};n.forEach(s=>{r[s.id]=s.data()}),t(r)},n=>{console.error("Error subscribing to grades:",n),t({})})},OLe=(t,e)=>{const n=mn(zt(Ut,Kz),fs("curso","==",t));return jn(n,r=>{e(r.docs.map(s=>$z(s)))},r=>{console.error("Error subscribing to group projects:",r),e([])})},jLe=async t=>{try{const{id:e,...n}=t,r=On(Ut,Kz,e);await Fo(r,n)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},HLe=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState({}),[a,i]=W.useState([]),[o,l]=W.useState(!0),[c,A]=W.useState(null),[h,p]=W.useState(!1),[g,w]=W.useState(null),x=W.useRef(null);W.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const R=MLe(t.curso,n),j=ULe(s),P=OLe(t.curso,E=>{i(E),l(!1)});return()=>{R(),j(),P()}},[t.curso]);const S=W.useMemo(()=>{if(!t.curso)return[];const j=e.filter(P=>P.curso===t.curso).reduce((P,E)=>((P[E.asignatura]=P[E.asignatura]||[]).push(E),P),{});return Object.entries(j).map(([P,E])=>{let T=0,k=0;const z=E.map(U=>{var oe;const G=(oe=r[U.id])==null?void 0:oe[t.nombreCompleto];let q="No Trabajado";return G==="trabajado"?(T+=7,k++,q="Trabajado"):G==="no trabajado"&&(T+=2,k++,q="No Trabajado"),{id:U.id,nombreActividad:U.nombreActividad,fecha:U.fecha,estado:q}}).filter(U=>{var G;return(G=r[U.id])==null?void 0:G[t.nombreCompleto]}),M=k>0?(T/k).toFixed(1):"N/A";return{asignatura:P,promedio:M,actividades:z.sort((U,G)=>new Date(G.fecha).getTime()-new Date(U.fecha).getTime())}}).filter(P=>P.actividades.length>0).sort((P,E)=>P.asignatura.localeCompare(E.asignatura))},[e,r,t]);W.useEffect(()=>{if(S.reduce((k,z)=>k+z.actividades.length,0)===0){A(null);return}const j=S.reduce((k,z)=>{const M=parseFloat(z.promedio);return isNaN(M)?k:k+M},0),P=S.length>0?j/S.length:0,E=py.find(k=>P>=k.promedioMin&&P<=k.promedioMax)||null,T=py.filter(k=>P>=k.promedioMin);if(A({puntajeTotal:0,promedio:P,rangoActual:E,insigniasGanadas:T}),x.current!==null){const k=py.find(z=>x.current>=z.promedioMin&&x.current<=z.promedioMax)||null;E&&(!k||E.nombre!==k.nombre)&&w(E)}x.current=P},[S]);const N=W.useMemo(()=>t.curso?a.filter(R=>R.curso===t.curso).map(R=>{const j=R.grupos.find(P=>P.integrantes.some(E=>E.nombre===t.nombreCompleto));return j?{...R,miGrupo:j}:null}).filter(R=>R!==null).sort((R,j)=>new Date(j.fechaPresentacion).getTime()-new Date(R.fechaPresentacion).getTime()):[],[a,t]),F=async(R,j)=>{const P=a.find(T=>T.id===R);if(!P)return;const E={...P,grupos:P.grupos.map(T=>T.integrantes.some(z=>z.nombre===t.nombreCompleto)?{...T,integrantes:T.integrantes.map(z=>z.nombre===t.nombreCompleto?{...z,rol:j||void 0}:z)}:T)};try{await jLe(E)}catch(T){console.error("Error updating role:",T),alert("No se pudo actualizar el rol.")}},D=R=>{const j=parseFloat(R);return isNaN(j)?"bg-slate-400":j<4?"bg-red-500":j<5.5?"bg-yellow-500":"bg-green-500"};return o?u.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>w(null),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:R=>R.stopPropagation(),children:[u.jsx("div",{className:"text-8xl animate-bounce",children:g.emoji}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),u.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:g.nombre}),u.jsx("p",{className:"text-slate-600 mt-4",children:g.mensaje}),u.jsx("button",{onClick:()=>w(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),h&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:R=>R.stopPropagation(),children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),u.jsx("div",{className:"overflow-y-auto space-y-3",children:py.map(R=>{const j=c==null?void 0:c.insigniasGanadas.some(P=>P.nombre===R.nombre);return u.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${j?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[u.jsx("div",{className:"text-5xl",children:R.emoji}),u.jsxs("div",{children:[u.jsx("h3",{className:`font-bold ${j?"text-amber-700":"text-slate-600"}`,children:R.nombre}),u.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",R.promedioMin," y ",R.promedioMax]})]})]},R.nombre)})})]})}),u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),u.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),c&&c.rangoActual&&u.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),u.jsx("h2",{className:"text-3xl font-bold",children:c.rangoActual.nombre}),u.jsx("button",{onClick:()=>p(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-7xl",children:c.rangoActual.emoji}),u.jsx("p",{className:"font-bold text-2xl mt-2",children:c.promedio.toFixed(1)}),u.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),S.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(R=>u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800",children:R.asignatura}),u.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${D(R.promedio)}`,children:R.promedio})]}),u.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[u.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),R.actividades.map(j=>u.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-slate-700",children:j.nombreActividad}),u.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),u.jsx("span",{className:`font-semibold ${j.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:j.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},j.id))]})]},R.asignatura))}):u.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[u.jsx("span",{className:"text-5xl",children:""}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),N.length>0&&u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),u.jsx("div",{className:"space-y-4",children:N.map(R=>{const j=R.miGrupo.integrantes.filter(E=>E.nombre!==t.nombreCompleto&&E.rol).map(E=>E.rol),P=pj.filter(E=>!j.includes(E));return u.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[u.jsx("h3",{className:"font-bold text-slate-800",children:R.nombreActividad}),u.jsxs("p",{className:"text-sm text-slate-500",children:[R.asignatura," - Presentacin: ",new Date(R.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),u.jsxs("div",{className:"mt-3 pt-3 border-t",children:[u.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",R.miGrupo.numero]}),u.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:R.miGrupo.integrantes.map(E=>u.jsxs("li",{className:"grid grid-cols-2 items-center",children:[u.jsx("span",{className:E.nombre===t.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===t.nombreCompleto?u.jsxs("select",{value:E.rol||"",onChange:T=>F(R.id,T.target.value),className:"text-sm p-1 border rounded w-full",children:[u.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!P.includes(E.rol)&&u.jsx("option",{value:E.rol,children:E.rol}),P.map(T=>u.jsx("option",{value:T,children:T},T))]}):u.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},R.id)})})]})]})},QLe="proyectos_interdisciplinarios",Wz="entregas_interdisciplinarias",Yz=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,fechaCompletado:((a=(s=e.fechaCompletado)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaCompletado}},VLe=(t,e)=>{const n=mn(zt(Ut,QLe),fs("cursos","array-contains",t));return jn(n,r=>{const s=r.docs.map(a=>Yz(a));e(s)},r=>{console.error("Error al suscribirse a los proyectos:",r),e([])})},zLe=(t,e)=>{const n=mn(zt(Ut,Wz),fs("estudianteId","==",t));return jn(n,r=>{const s=r.docs.map(a=>Yz(a));e(s)},r=>{console.error("Error al suscribirse a las entregas:",r),e([])})},GLe=async t=>{try{const{id:e,...n}=t,r=On(Ut,Wz,e),s={...n,fechaCompletado:Nn.fromDate(new Date(n.fechaCompletado||Date.now()))};await Fo(r,s,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},qLe=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState([]),[a,i]=W.useState(null),[o,l]=W.useState(!0);W.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const h=VLe(t.curso,n),p=zLe(t.id,g=>{s(g),l(!1)});return()=>{h(),p()}},[t.curso,t.id]);const c=async h=>{try{await GLe(h)}catch(p){console.error("Failed to update submission:",p),alert("Hubo un error al guardar tu entrega.")}},A=({plan:h,tarea:p})=>{const g=W.useMemo(()=>{const j=r.find(P=>P.planificacionId===h.id&&P.tareaId===p.id);return j||{id:`${h.id}_${p.id}_${t.id}`,planificacionId:h.id,tareaId:p.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[h.id,p.id,r]),[w,x]=W.useState(!1),[S,N]=W.useState({observaciones:g.observacionesEstudiante||"",enlace:g.enlaceUrl||""}),F=j=>{var E;const P=(E=j.target.files)==null?void 0:E[0];P&&(alert(`Simulacin: Archivo "${P.name}" listo para subir.`),c({...g,archivoAdjunto:{nombre:P.name,url:`simulated/path/${P.name}`},fechaCompletado:new Date().toISOString()}))},D=()=>{c({...g,observacionesEstudiante:S.observaciones,enlaceUrl:S.enlace,fechaCompletado:new Date().toISOString()})},R=()=>{c({...g,completada:!g.completada,fechaCompletado:new Date().toISOString()})};return u.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:g.completada,onChange:R,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("p",{className:`font-semibold ${g.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",p.numero,": ",p.instrucciones]}),u.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",p.fechaEntrega]}),p.recursoUrl&&u.jsx("a",{href:p.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),u.jsx("button",{onClick:()=>x(!w),className:"text-sm font-semibold",children:w?"Ocultar":"Entregar"})]}),w&&u.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[u.jsx("textarea",{value:S.observaciones,onChange:j=>N({...S,observaciones:j.target.value}),onBlur:D,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),u.jsx("input",{type:"url",value:S.enlace,onChange:j=>N({...S,enlace:j.target.value}),onBlur:D,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),u.jsx("input",{type:"file",onChange:F,className:"text-sm"}),g.archivoAdjunto&&u.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",g.archivoAdjunto.nombre]})]}),g.feedbackProfesor&&u.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[u.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),u.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:g.feedbackProfesor})]})]})};return o?u.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(h=>{const p=h.tareas||[],w=r.filter(S=>S.planificacionId===h.id).filter(S=>S.completada).length,x=p.length>0?w/p.length*100:0;return u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[u.jsxs("button",{onClick:()=>i(a===h.id?null:h.id),className:"w-full text-left",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),u.jsxs("div",{className:"mt-2 space-y-1",children:[u.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[u.jsx("span",{children:"Progreso"}),u.jsxs("span",{children:[Math.round(x),"%"]})]}),u.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:u.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),a===h.id&&u.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:p.length>0?p.map(S=>u.jsx(A,{plan:h,tarea:S},S.id)):u.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},h.id)}):u.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[u.jsx("span",{className:"text-5xl",children:""}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),u.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},KLe=({data:t})=>u.jsx("div",{className:"space-y-4",children:t.map((n,r)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),u.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[n.value.toFixed(2)," / 4.00"]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:u.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${n.value/4*100}%`}})})]},n.label+r))}),$Le=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState(!1),[a,i]=W.useState(null),[o,l]=W.useState(null),[c,A]=W.useState(bv),h=W.useCallback(async()=>{s(!0);try{const S=(await xCe(t.nombreCompleto)).sort((N,F)=>new Date(F.fecha).getTime()-new Date(N.fecha).getTime());n(S),i(null)}catch(x){console.error("Error al cargar acompaamientos desde Firestore",x),i("No se pudieron cargar tus acompaamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),p=W.useCallback(async()=>{try{const x=await yCe();x&&A(x)}catch(x){console.error("Error al cargar rbrica personalizada",x)}},[]);W.useEffect(()=>{h(),p()},[h,p]);const g=W.useMemo(()=>{if(!o)return[];const x={};return c.forEach(S=>{x[S.domain]={total:0,count:0},S.criteria.forEach(N=>{const F=o.rubricaResultados[N.name];F&&(x[S.domain].total+=F,x[S.domain].count++)})}),Object.entries(x).map(([S,N])=>({label:S,value:N.count>0?N.total/N.count:0}))},[o,c]),w=x=>{const S=new En;S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(100),S.text("LICEO INDUSTRIAL DE RECOLETA",S.internal.pageSize.getWidth()/2,15,{align:"center"}),S.setFont("helvetica","bold"),S.setFontSize(16),S.setTextColor(40),S.text("Informe de Acompaamiento Docente",S.internal.pageSize.getWidth()/2,25,{align:"center"}),S.setFontSize(12),S.setFont("helvetica","normal"),Pc(S,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let N=S.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const R=[],j=["Dbil","Incipiente","Satisfactorio","Avanzado"];c.forEach(P=>{R.push([{content:P.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),P.criteria.forEach(E=>{const T=x.rubricaResultados[E.name],k=T?j[T-1]:"No evaluado";R.push([E.name,k])})}),Pc(S,{startY:N,head:[["Indicador","Nivel de Logro"]],body:R,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),N=S.lastAutoTable.finalY+15}const F=(R,j)=>{if(!j)return;N>250&&(S.addPage(),N=20,S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(100),S.text("LICEO INDUSTRIAL DE RECOLETA",S.internal.pageSize.getWidth()/2,15,{align:"center"}),N=25),S.setFont("helvetica","bold"),S.setFontSize(14),S.setTextColor(40),S.text(R,14,N),N+=8,S.setFont("helvetica","normal"),S.setFontSize(11),S.setTextColor(60);const P=S.splitTextToSize(j.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);S.text(P,14,N),N+=P.length*5+10};F("Observaciones Generales",x.observacionesGenerales),F("Retroalimentacin Consolidada",x.retroalimentacionConsolidada);const D=S.getNumberOfPages();for(let R=1;R<=D;R++)S.setPage(R),S.setFontSize(8),S.setTextColor(128),S.text(`Pgina ${R} de ${D}`,S.internal.pageSize.getWidth()/2,S.internal.pageSize.getHeight()-10,{align:"center"});S.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),u.jsxs("button",{onClick:()=>w(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[u.jsx(mj,{})," Exportar PDF"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:u.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[u.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),u.jsx("h3",{children:"Observaciones Generales"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),u.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:u.jsx(KLe,{data:g})})]})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),r&&u.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),a&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!r&&e.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),u.jsx("div",{className:"space-y-4",children:!r&&e.length>0?e.map(x=>u.jsx("button",{onClick:()=>l(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&u.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),u.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!r&&u.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("span",{className:"text-5xl",children:""}),u.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},WLe=t=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const e=zt(Br,"planificaciones"),n=mn(e,Pr("fechaCreacion","desc"));return jn(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log(" Todas las planificaciones cargadas:",a.length),t(a)},s=>{throw console.error(" Error al cargar todas las planificaciones:",s),s})}catch(e){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",e),e}},YLe=(t,e)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",t),!t)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const n=zt(Br,"planificaciones"),r=mn(n,fs("userId","==",t),Pr("fechaCreacion","desc"));return jn(r,a=>{const i=[];a.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log(" Planificaciones del usuario cargadas:",i.length),e(i)},a=>{throw console.error(" Error al cargar planificaciones del usuario:",a),a})}catch(n){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",n),n}};class qM extends Map{constructor(e,n=ZLe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(KM(this,e))}has(e){return super.has(KM(this,e))}set(e,n){return super.set(XLe(this,e),n)}delete(e){return super.delete(JLe(this,e))}}function KM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function XLe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function JLe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ZLe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function eRe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const $M=Symbol("implicit");function Xz(){var t=new qM,e=[],n=[],r=$M;function s(a){let i=t.get(a);if(i===void 0){if(r!==$M)return r;t.set(a,i=e.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new qM;for(const i of a)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return Xz(e,n).unknown(r)},eRe.apply(s,arguments),s}function tRe(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const nRe=tRe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var rRe={value:function(){}};function Jz(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $w(n)}function $w(t){this._=t}function sRe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$w.prototype=Jz.prototype={constructor:$w,on:function(t,e){var n=this._,r=sRe(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=aRe(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=WM(n[s],t.name,e);else if(e==null)for(s in n)n[s]=WM(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $w(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function aRe(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function WM(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=rRe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const iRe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Jz},Symbol.toStringTag,{value:"Module"})),oRe=Wq(iRe);var qS,YM;function lRe(){if(YM)return qS;YM=1;const t=oRe.dispatch,e=Math.PI/180,n={archimedean:x,rectangular:S},r=64,s=2048;qS=function(){var R=[256,256],j=a,P=i,E=l,T=o,k=o,z=c,M=A,U=x,G=[],q=1/0,oe=t("word","end"),ee=null,le=Math.random,K={},ne=F;K.canvas=function(Q){return arguments.length?(ne=D(Q),K):ne},K.start=function(){var Q=J(ne()),Z=N((R[0]>>5)*R[1]),se=null,ie=G.length,fe=-1,Se=[],ge=G.map(function(ve,me){return ve.text=j.call(this,ve,me),ve.font=P.call(this,ve,me),ve.style=T.call(this,ve,me),ve.weight=k.call(this,ve,me),ve.rotate=z.call(this,ve,me),ve.size=~~E.call(this,ve,me),ve.padding=M.call(this,ve,me),ve}).sort(function(ve,me){return me.size-ve.size});return ee&&clearInterval(ee),ee=setInterval(xe,0),xe(),K;function xe(){for(var ve=Date.now();Date.now()-ve<q&&++fe<ie&&ee;){var me=ge[fe];me.x=R[0]*(le()+.5)>>1,me.y=R[1]*(le()+.5)>>1,h(Q,me,ge,fe),me.hasText&&ce(Z,me,se)&&(Se.push(me),oe.call("word",K,me),se?g(se,me):se=[{x:me.x+me.x0,y:me.y+me.y0},{x:me.x+me.x1,y:me.y+me.y1}],me.x-=R[0]>>1,me.y-=R[1]>>1)}fe>=ie&&(K.stop(),oe.call("end",K,Se,se))}},K.stop=function(){ee&&(clearInterval(ee),ee=null);for(const Q of G)delete Q.sprite;return K};function J(Q){const Z=Q.getContext("2d",{willReadFrequently:!0});Q.width=Q.height=1;const se=Math.sqrt(Z.getImageData(0,0,1,1).data.length>>2);return Q.width=(r<<5)/se,Q.height=s/se,Z.fillStyle=Z.strokeStyle="red",{context:Z,ratio:se}}function ce(Q,Z,se){R[0],R[1];for(var ie=Z.x,fe=Z.y,Se=Math.sqrt(R[0]*R[0]+R[1]*R[1]),ge=U(R),xe=le()<.5?1:-1,ve=-xe,me,he,He;(me=ge(ve+=xe))&&(he=~~me[0],He=~~me[1],!(Math.min(Math.abs(he),Math.abs(He))>=Se));)if(Z.x=ie+he,Z.y=fe+He,!(Z.x+Z.x0<0||Z.y+Z.y0<0||Z.x+Z.x1>R[0]||Z.y+Z.y1>R[1])&&(!se||w(Z,se))&&!p(Z,Q,R[0])){for(var et=Z.sprite,Ue=Z.width>>5,Ie=R[0]>>5,je=Z.x-(Ue<<4),Ke=je&127,rt=32-Ke,xt=Z.y1-Z.y0,Tt=(Z.y+Z.y0)*Ie+(je>>5),vt,Vt=0;Vt<xt;Vt++){vt=0;for(var Kt=0;Kt<=Ue;Kt++)Q[Tt+Kt]|=vt<<rt|(Kt<Ue?(vt=et[Vt*Ue+Kt])>>>Ke:0);Tt+=Ie}return!0}return!1}return K.timeInterval=function(Q){return arguments.length?(q=Q??1/0,K):q},K.words=function(Q){return arguments.length?(G=Q,K):G},K.size=function(Q){return arguments.length?(R=[+Q[0],+Q[1]],K):R},K.font=function(Q){return arguments.length?(P=D(Q),K):P},K.fontStyle=function(Q){return arguments.length?(T=D(Q),K):T},K.fontWeight=function(Q){return arguments.length?(k=D(Q),K):k},K.rotate=function(Q){return arguments.length?(z=D(Q),K):z},K.text=function(Q){return arguments.length?(j=D(Q),K):j},K.spiral=function(Q){return arguments.length?(U=n[Q]||Q,K):U},K.fontSize=function(Q){return arguments.length?(E=D(Q),K):E},K.padding=function(Q){return arguments.length?(M=D(Q),K):M},K.random=function(Q){return arguments.length?(le=Q,K):le},K.on=function(){var Q=oe.on.apply(oe,arguments);return Q===oe?K:Q},K};function a(R){return R.text}function i(){return"serif"}function o(){return"normal"}function l(R){return Math.sqrt(R.value)}function c(){return(~~(random()*6)-3)*30}function A(){return 1}function h(R,j,P,E){if(!j.sprite){var T=R.context,k=R.ratio;T.clearRect(0,0,(r<<5)/k,s/k);var z=0,M=0,U=0,G=P.length;for(--E;++E<G;){j=P[E],T.save(),T.font=j.style+" "+j.weight+" "+~~((j.size+1)/k)+"px "+j.font;const me=T.measureText(j.text),he=-Math.floor(me.width/2);let He=(me.width+1)*k,et=j.size<<1;if(j.rotate){var q=Math.sin(j.rotate*e),oe=Math.cos(j.rotate*e),ee=He*oe,le=He*q,K=et*oe,ne=et*q;He=Math.max(Math.abs(ee+ne),Math.abs(ee-ne))+31>>5<<5,et=~~Math.max(Math.abs(le+K),Math.abs(le-K))}else He=He+31>>5<<5;if(et>U&&(U=et),z+He>=r<<5&&(z=0,M+=U,U=0),M+et>=s)break;T.translate((z+(He>>1))/k,(M+(et>>1))/k),j.rotate&&T.rotate(j.rotate*e),T.fillText(j.text,he,0),j.padding&&(T.lineWidth=2*j.padding,T.strokeText(j.text,he,0)),T.restore(),j.width=He,j.height=et,j.xoff=z,j.yoff=M,j.x1=He>>1,j.y1=et>>1,j.x0=-j.x1,j.y0=-j.y1,j.hasText=!0,z+=He}for(var J=T.getImageData(0,0,(r<<5)/k,s/k).data,ce=[];--E>=0;)if(j=P[E],!!j.hasText){for(var Q=j.width,Z=Q>>5,se=j.y1-j.y0,ie=0;ie<se*Z;ie++)ce[ie]=0;if(z=j.xoff,z==null)return;M=j.yoff;for(var fe=0,Se=-1,ge=0;ge<se;ge++){for(var ie=0;ie<Q;ie++){var xe=Z*ge+(ie>>5),ve=J[(M+ge)*(r<<5)+(z+ie)<<2]?1<<31-ie%32:0;ce[xe]|=ve,fe|=ve}fe?Se=ge:(j.y0++,se--,ge--,M++)}j.y1=j.y0+Se,j.sprite=ce.slice(0,(j.y1-j.y0)*Z)}}}function p(R,j,P){P>>=5;for(var E=R.sprite,T=R.width>>5,k=R.x-(T<<4),z=k&127,M=32-z,U=R.y1-R.y0,G=(R.y+R.y0)*P+(k>>5),q,oe=0;oe<U;oe++){q=0;for(var ee=0;ee<=T;ee++)if((q<<M|(ee<T?(q=E[oe*T+ee])>>>z:0))&j[G+ee])return!0;G+=P}return!1}function g(R,j){var P=R[0],E=R[1];j.x+j.x0<P.x&&(P.x=j.x+j.x0),j.y+j.y0<P.y&&(P.y=j.y+j.y0),j.x+j.x1>E.x&&(E.x=j.x+j.x1),j.y+j.y1>E.y&&(E.y=j.y+j.y1)}function w(R,j){return R.x+R.x1>j[0].x&&R.x+R.x0<j[1].x&&R.y+R.y1>j[0].y&&R.y+R.y0<j[1].y}function x(R){var j=R[0]/R[1];return function(P){return[j*(P*=.1)*Math.cos(P),P*Math.sin(P)]}}function S(R){var j=4,P=j*R[0]/R[1],E=0,T=0;return function(k){var z=k<0?-1:1;switch(Math.sqrt(1+4*z*k)-z&3){case 0:E+=P;break;case 1:T+=j;break;case 2:E-=P;break;default:T-=j;break}return[E,T]}}function N(R){for(var j=[],P=-1;++P<R;)j[P]=0;return j}function F(){return document.createElement("canvas")}function D(R){return typeof R=="function"?R:function(){return R}}return qS}var cRe=lRe();const uRe=Nx(cRe),dRe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),ARe=()=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),fRe=()=>u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hRe=t=>{const[e,n]=W.useState([]),[r,s]=W.useState(!0),[a,i]=W.useState(null),o=W.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return W.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),s(!1);return}try{let l;const c=A=>{n(A),s(!1),i(null)};if(o)l=WLe(c);else{const A=t.email||t.id||"";l=YLe(c,A)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),s(!1)}},[t,o]),{planificaciones:e,loading:r,error:a,canViewAllPlans:o}},mRe=({plan:t,onClose:e})=>u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:n=>n.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),u.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:u.jsx(ARe,{})})]}),u.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[u.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),u.jsxs("p",{className:"mt-2",children:[u.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",t.indicadoresEvaluacion]}),u.jsx("div",{className:"mt-3",children:u.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof t.progreso=="number"?`${t.progreso}%`:"No registrado"]})})]}),u.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",t.detallesLeccion.length,")"]}),u.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:t.detallesLeccion.map((n,r)=>u.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[u.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",r+1,": ",n.actividades]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[u.jsxs("span",{children:[u.jsx("strong",{children:"Objetivo:"})," ",n.objetivosAprendizaje]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Contenidos:"})," ",n.contenidosConceptuales]})]})]},r))}),t.reflexionUnidad&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),t.reflexionUnidad.ordenHabilidades&&t.reflexionUnidad.ordenHabilidades.length>0?u.jsx("ul",{className:"space-y-2",children:t.reflexionUnidad.ordenHabilidades.map((n,r)=>u.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[u.jsxs("span",{className:"font-bold text-amber-500",children:[r+1,"."]})," ",n]},n))}):u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.fortalezas||"N/A"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.mejoras||"N/A"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),XM=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],pRe=["1 Medio","2 Medio","3 Medio","4 Medio"],gRe=({words:t})=>{const e=W.useRef(null);return W.useEffect(()=>{if(!t.length||!e.current)return;const n=hu(e.current);n.selectAll("*").remove();const r=uRe().size([500,350]).words(t.map(a=>({...a}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(a=>Math.sqrt(a.value)*12).on("end",s);r.start();function s(a){n.attr("width",r.size()[0]).attr("height",r.size()[1]).append("g").attr("transform",`translate(${r.size()[0]/2},${r.size()[1]/2})`).selectAll("text").data(a).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>Xz(nRe)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[t]),u.jsx("svg",{ref:e})},vRe=({planificaciones:t})=>{const[e,n]=W.useState("todos"),[r,s]=W.useState("todos"),a=W.useMemo(()=>["todos",...Array.from(new Set(t.map(A=>A.asignatura)))],[t]),i=W.useMemo(()=>t.filter(A=>(e==="todos"||A.nivel===e)&&(r==="todos"||A.asignatura===r)&&A.reflexionUnidad),[t,e,r]),o=W.useMemo(()=>{const A=XM.reduce((h,p)=>({...h,[p]:0}),{});return i.forEach(h=>{var p,g;return(g=(p=h.reflexionUnidad)==null?void 0:p.ordenHabilidades)==null?void 0:g.forEach((w,x)=>{A[w]!==void 0&&(A[w]+=XM.length-x)})}),Object.entries(A).map(([h,p])=>({text:h,value:p})).sort((h,p)=>p.value-h.value)},[i]),l=W.useMemo(()=>{const A=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),p=(i.map(g=>{var w,x;return`${((w=g.reflexionUnidad)==null?void 0:w.fortalezas)||""} ${((x=g.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((g,w)=>(A.has(w)||(g[w]=(g[w]||0)+1),g),{});return Object.entries(p).map(([g,w])=>({text:g,value:w})).sort((g,w)=>w.value-g.value).slice(0,50)},[i]),c="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return u.jsxs("div",{className:"animate-fade-in",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),u.jsxs("select",{value:e,onChange:A=>n(A.target.value),className:c,children:[u.jsx("option",{value:"todos",children:"Todos los Niveles"}),pRe.map(A=>u.jsx("option",{value:A,children:A},A))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),u.jsx("select",{value:r,onChange:A=>s(A.target.value),className:c,children:a.map(A=>u.jsx("option",{value:A,children:A==="todos"?"Todas las Asignaturas":A},A))})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(A=>A.value===0)?u.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):u.jsx("ul",{className:"space-y-3",children:o.map((A,h)=>u.jsxs("li",{className:"flex items-center gap-4",children:[u.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:h+1}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:A.text}),u.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:u.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${A.value/(o[0].value||1)*100}%`}})})]})]},A.text))})]}),u.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?u.jsx(gRe,{words:l}):u.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},xRe=({currentUser:t})=>{const{planificaciones:e,loading:n,error:r,canViewAllPlans:s}=hRe(t),[a,i]=W.useState("seguimiento"),[o,l]=W.useState("1"),[c,A]=W.useState(null),[h,p]=W.useState(null),g=W.useMemo(()=>{const S={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return e.filter(N=>N.nivel===S[o]&&N.tipo==="Unidad")},[e,o]),w=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(t!=null&&t.id))return u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{children:"Usuario no autenticado."})});if(n)return u.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[u.jsx(fRe,{}),u.jsx("span",{children:"Cargando planificaciones..."})]});if(r)return u.jsx("div",{className:"text-center py-8",children:u.jsxs("p",{className:"text-red-500",children:["Error: ",r]})});const x=()=>u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:w.map(S=>u.jsx("button",{onClick:()=>l(S.key),className:`${o===S.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:S.label},S.key))})}),g.length===0?u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):u.jsx("div",{className:"space-y-4",children:Uc.map(S=>{const N=g.filter(D=>D.asignatura===S);if(N.length===0)return null;const F=c===S;return u.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[u.jsxs("button",{onClick:()=>A(F?null:S),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:S}),u.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[N.length," unidad",N.length>1?"es":""]})]}),u.jsx("span",{className:`transform transition-transform ${F?"rotate-180":""}`,children:u.jsx(dRe,{})})]}),F&&u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:u.jsx("ul",{className:"space-y-3",children:N.map(D=>u.jsx("li",{children:u.jsxs("button",{onClick:()=>p(D),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[u.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:D.nombreUnidad}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",D.autor||"N/A"]})]})},D.id))})})]},S)})})]});return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),s&&u.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),u.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:u.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[u.jsx("button",{onClick:()=>i("seguimiento"),className:`${a==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),u.jsx("button",{onClick:()=>i("analisis"),className:`${a==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),a==="seguimiento"&&x(),a==="analisis"&&u.jsx(vRe,{planificaciones:e.filter(S=>S.tipo==="Unidad")})]}),h&&u.jsx(mRe,{plan:h,onClose:()=>p(null)})]})},W_="analisisTaxonomicos",yRe=async()=>{try{const t=mn(zt(Br,W_),Pr("uploadDate","desc"));return(await Ei(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener todos los anlisis:",t),new Error("No se pudieron cargar los anlisis taxonmicos")}},wRe=async t=>{if(!t)return[];try{const e=mn(zt(Br,W_),fs("userId","==",t),Pr("uploadDate","desc"));return(await Ei(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anlisis por usuario:",e),new Error("No se pudieron cargar los anlisis del usuario")}},bRe=async t=>{try{return{id:(await la(zt(Br,W_),t)).id,...t}}catch(e){throw console.error("Error al crear anlisis:",e),new Error("No se pudo crear el anlisis taxonmico")}},_Re=async t=>{try{const e=On(Br,W_,t);await ao(e)}catch(e){throw console.error("Error al eliminar anlisis:",e,"ID:",t),new Error("No se pudo eliminar el anlisis taxonmico")}},KS=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],JM={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},CRe=()=>u.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ZM=({currentUser:t})=>{const[e,n]=W.useState([]),[r,s]=W.useState(!1),[a,i]=W.useState(null),[o,l]=W.useState(null),[c,A]=W.useState(""),[h,p]=W.useState(!1),[g,w]=W.useState(null),[x,S]=W.useState(null),N=W.useCallback(async()=>{if(t!=null&&t.id){s(!0);try{const P=t.profile==="SUBDIRECCION"?await yRe():await wRe(t.id);n(P),i(null)}catch(P){console.error("Error al cargar anlisis:",P),i("No se pudieron cargar los anlisis.")}finally{s(!1)}}},[t]);W.useEffect(()=>{N()},[N]);const F=async P=>{var T;const E=(T=P.target.files)==null?void 0:T[0];if(E){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(E.type)){i("Por favor, suba un archivo PDF o DOCX vlido.");return}w(E),A(E.name),i(null);const z=new FileReader;z.onloadend=()=>{var U;const M=(U=z.result)==null?void 0:U.split(",")[1];if(!M){i("No se pudo procesar el archivo. Puede que est vaco o corrupto."),S(null);return}S({mimeType:E.type,data:M})},z.onerror=()=>i("Error al leer el archivo."),z.readAsDataURL(E)}},D=async()=>{if(!c.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}p(!0),i(null);const P=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido.
        `,E={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:KS}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:KS.reduce((T,k)=>({...T,[k]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{TA("Anlisis Taxonmico",t);const T="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new Si(T).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:E}}),M={inlineData:{mimeType:x.mimeType,data:x.data}},G=(await z.generateContent([P,M])).response.text();let q;try{q=JSON.parse(G)}catch(le){throw console.error("Error al parsear JSON:",le),console.error("Respuesta recibida (no es JSON vlido):",G),new Error("La respuesta de la IA no tuvo un formato vlido. Intente de nuevo.")}const oe={documentName:c,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:q.analysisResults,summary:q.summary},ee=await bRe(oe);await N(),l(ee),A(""),w(null),S(null)}catch(T){console.error(T);const k=T instanceof Error?T.message:"Hubo un error al analizar el documento.";i(k)}finally{p(!1)}},R=async P=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await _Re(P),await N(),(o==null?void 0:o.id)===P&&l(null)}catch{i("No se pudo eliminar el anlisis.")}},j=W.useMemo(()=>o?Object.values(o.summary).reduce((P,E)=>P+(E||0),0):0,[o]);return u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonmico de Evaluaciones"}),a&&u.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),u.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:u.jsxs("div",{className:"space-y-1 text-center",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:u.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),u.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[u.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[u.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:F,accept:".pdf,.doc,.docx"}),u.jsx("span",{children:"Cargue un archivo"})]}),u.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),u.jsx("p",{className:"text-xs text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),u.jsx("input",{type:"text",id:"documentName",value:c,onChange:P=>A(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),u.jsx("button",{onClick:D,disabled:h||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?u.jsx(CRe,{}):"Analizar con IA"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),r?u.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):e.length===0?u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:e.map(P=>u.jsxs("button",{onClick:()=>l(P),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===P.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[u.jsx("p",{className:"font-semibold truncate",children:P.documentName}),u.jsx("p",{className:"text-xs text-slate-500",children:new Date(P.uploadDate).toLocaleString("es-CL")})]},P.id))})]})]}),u.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),u.jsx("button",{onClick:()=>R(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonmico (",j," preguntas)"]}),u.jsx("div",{className:"space-y-3",children:KS.map(P=>{const E=o.summary[P]||0,T=j>0?E/j*100:0;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[u.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:P}),u.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[E," (",T.toFixed(0),"%)"]})]}),u.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:u.jsx("div",{className:`${JM[P]} h-4 rounded-full`,style:{width:`${T}%`}})})]},P)})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),u.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:u.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[u.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((P,E)=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:P.question}),u.jsx("td",{className:"px-4 py-3 text-sm",children:u.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${JM[P.habilidadBloom]}`,children:P.habilidadBloom})})]},E))})]})})]})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[u.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),u.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})},_b="empresas_practicas",ERe="usuarios",Zz=t=>{const e=t.data();return{id:t.id,...e}};async function SRe(t){const n=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const s=await(await fetch(n)).json();return s.status==="OK"&&s.results[0]?s.results[0].geometry.location:(console.warn("Geocodificacin no exitosa:",s.status),null)}catch(r){return console.error("Error en la llamada a la API de Geocodificacin:",r),null}}const TRe=t=>{const e=mn(zt(Ut,_b),Pr("nombre","asc"));return jn(e,n=>{const r=n.docs.map(s=>Zz(s));t(r)},n=>console.error("Error al suscribirse a empresas:",n))},NRe=async t=>{const e=t.calificaciones.reduce((r,s)=>r+(s.score||0),0),n={...t,puntajeTotal:e};if(t.direccion){const r=await SRe(t.direccion);r&&(n.coordenadas=r)}if("id"in t&&t.id){const{id:r,...s}=n,a=On(Ut,_b,r);return await Fo(a,s,{merge:!0}),r}else return(await la(zt(Ut,_b),{...n,createdAt:fee()})).id},BRe=async t=>{const e=On(Ut,_b,t);await ao(e)},kRe=t=>{const e=mn(zt(Ut,ERe),fs("profile","==",tn.ESTUDIANTE),Pr("nombreCompleto","asc"));return jn(e,n=>{const r=n.docs.map(s=>Zz(s));t(r)},n=>console.error("Error al suscribirse a estudiantes:",n))};function eG(t,e){const n=W.useRef(e);W.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const IRe=1;function FRe(t){return Object.freeze({__version:IRe,map:t})}function DRe(t,e){return Object.freeze({...t,...e})}const rk=W.createContext(null);function tG(){const t=W.use(rk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function LRe(t){function e(n,r){const{instance:s,context:a}=t(n).current;W.useImperativeHandle(r,()=>s);const{children:i}=n;return i==null?null:yt.createElement(rk,{value:a},i)}return W.forwardRef(e)}function RRe(t){function e(n,r){const[s,a]=W.useState(!1),{instance:i}=t(n,a).current;W.useImperativeHandle(r,()=>i),W.useEffect(function(){s&&i.update()},[i,s,n.children]);const o=i._contentNode;return o?HV.createPortal(n.children,o):null}return W.forwardRef(e)}function PRe(t){function e(n,r){const{instance:s}=t(n).current;return W.useImperativeHandle(r,()=>s),null}return W.forwardRef(e)}function nG(t,e){const n=W.useRef(void 0);W.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function sk(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function MRe(t,e){return function(r,s){const a=tG(),i=t(sk(r,a),a);return eG(a.map,r.attribution),nG(i.current,r.eventHandlers),e(i.current,a,r,s),i}}var mv={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var URe=mv.exports,eU;function ORe(){return eU||(eU=1,function(t,e){(function(n,r){r(e)})(URe,function(n){var r="1.9.4";function s(m){var b,O,te,de;for(O=1,te=arguments.length;O<te;O++){de=arguments[O];for(b in de)m[b]=de[b]}return m}var a=Object.create||function(){function m(){}return function(b){return m.prototype=b,new m}}();function i(m,b){var O=Array.prototype.slice;if(m.bind)return m.bind.apply(m,O.call(arguments,1));var te=O.call(arguments,2);return function(){return m.apply(b,te.length?te.concat(O.call(arguments)):arguments)}}var o=0;function l(m){return"_leaflet_id"in m||(m._leaflet_id=++o),m._leaflet_id}function c(m,b,O){var te,de,Ce,Qe;return Qe=function(){te=!1,de&&(Ce.apply(O,de),de=!1)},Ce=function(){te?de=arguments:(m.apply(O,arguments),setTimeout(Qe,b),te=!0)},Ce}function A(m,b,O){var te=b[1],de=b[0],Ce=te-de;return m===te&&O?m:((m-de)%Ce+Ce)%Ce+de}function h(){return!1}function p(m,b){if(b===!1)return m;var O=Math.pow(10,b===void 0?6:b);return Math.round(m*O)/O}function g(m){return m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")}function w(m){return g(m).split(/\s+/)}function x(m,b){Object.prototype.hasOwnProperty.call(m,"options")||(m.options=m.options?a(m.options):{});for(var O in b)m.options[O]=b[O];return m.options}function S(m,b,O){var te=[];for(var de in m)te.push(encodeURIComponent(O?de.toUpperCase():de)+"="+encodeURIComponent(m[de]));return(!b||b.indexOf("?")===-1?"?":"&")+te.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function F(m,b){return m.replace(N,function(O,te){var de=b[te];if(de===void 0)throw new Error("No value provided for variable "+O);return typeof de=="function"&&(de=de(b)),de})}var D=Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"};function R(m,b){for(var O=0;O<m.length;O++)if(m[O]===b)return O;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(m){return window["webkit"+m]||window["moz"+m]||window["ms"+m]}var E=0;function T(m){var b=+new Date,O=Math.max(0,16-(b-E));return E=b+O,window.setTimeout(m,O)}var k=window.requestAnimationFrame||P("RequestAnimationFrame")||T,z=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(m){window.clearTimeout(m)};function M(m,b,O){if(O&&k===T)m.call(b);else return k.call(window,i(m,b))}function U(m){m&&z.call(window,m)}var G={__proto__:null,extend:s,create:a,bind:i,get lastId(){return o},stamp:l,throttle:c,wrapNum:A,falseFn:h,formatNum:p,trim:g,splitWords:w,setOptions:x,getParamString:S,template:F,isArray:D,indexOf:R,emptyImageUrl:j,requestFn:k,cancelFn:z,requestAnimFrame:M,cancelAnimFrame:U};function q(){}q.extend=function(m){var b=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},O=b.__super__=this.prototype,te=a(O);te.constructor=b,b.prototype=te;for(var de in this)Object.prototype.hasOwnProperty.call(this,de)&&de!=="prototype"&&de!=="__super__"&&(b[de]=this[de]);return m.statics&&s(b,m.statics),m.includes&&(oe(m.includes),s.apply(null,[te].concat(m.includes))),s(te,m),delete te.statics,delete te.includes,te.options&&(te.options=O.options?a(O.options):{},s(te.options,m.options)),te._initHooks=[],te.callInitHooks=function(){if(!this._initHooksCalled){O.callInitHooks&&O.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ce=0,Qe=te._initHooks.length;Ce<Qe;Ce++)te._initHooks[Ce].call(this)}},b},q.include=function(m){var b=this.prototype.options;return s(this.prototype,m),m.options&&(this.prototype.options=b,this.mergeOptions(m.options)),this},q.mergeOptions=function(m){return s(this.prototype.options,m),this},q.addInitHook=function(m){var b=Array.prototype.slice.call(arguments,1),O=typeof m=="function"?m:function(){this[m].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(O),this};function oe(m){if(!(typeof L>"u"||!L||!L.Mixin)){m=D(m)?m:[m];for(var b=0;b<m.length;b++)m[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(m,b,O){if(typeof m=="object")for(var te in m)this._on(te,m[te],b);else{m=w(m);for(var de=0,Ce=m.length;de<Ce;de++)this._on(m[de],b,O)}return this},off:function(m,b,O){if(!arguments.length)delete this._events;else if(typeof m=="object")for(var te in m)this._off(te,m[te],b);else{m=w(m);for(var de=arguments.length===1,Ce=0,Qe=m.length;Ce<Qe;Ce++)de?this._off(m[Ce]):this._off(m[Ce],b,O)}return this},_on:function(m,b,O,te){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(m,b,O)===!1){O===this&&(O=void 0);var de={fn:b,ctx:O};te&&(de.once=!0),this._events=this._events||{},this._events[m]=this._events[m]||[],this._events[m].push(de)}},_off:function(m,b,O){var te,de,Ce;if(this._events&&(te=this._events[m],!!te)){if(arguments.length===1){if(this._firingCount)for(de=0,Ce=te.length;de<Ce;de++)te[de].fn=h;delete this._events[m];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var Qe=this._listens(m,b,O);if(Qe!==!1){var st=te[Qe];this._firingCount&&(st.fn=h,this._events[m]=te=te.slice()),te.splice(Qe,1)}}},fire:function(m,b,O){if(!this.listens(m,O))return this;var te=s({},b,{type:m,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var de=this._events[m];if(de){this._firingCount=this._firingCount+1||1;for(var Ce=0,Qe=de.length;Ce<Qe;Ce++){var st=de[Ce],ht=st.fn;st.once&&this.off(m,ht,st.ctx),ht.call(st.ctx||this,te)}this._firingCount--}}return O&&this._propagateEvent(te),this},listens:function(m,b,O,te){typeof m!="string"&&console.warn('"string" type argument expected');var de=b;typeof b!="function"&&(te=!!b,de=void 0,O=void 0);var Ce=this._events&&this._events[m];if(Ce&&Ce.length&&this._listens(m,de,O)!==!1)return!0;if(te){for(var Qe in this._eventParents)if(this._eventParents[Qe].listens(m,b,O,te))return!0}return!1},_listens:function(m,b,O){if(!this._events)return!1;var te=this._events[m]||[];if(!b)return!!te.length;O===this&&(O=void 0);for(var de=0,Ce=te.length;de<Ce;de++)if(te[de].fn===b&&te[de].ctx===O)return de;return!1},once:function(m,b,O){if(typeof m=="object")for(var te in m)this._on(te,m[te],b,!0);else{m=w(m);for(var de=0,Ce=m.length;de<Ce;de++)this._on(m[de],b,O,!0)}return this},addEventParent:function(m){return this._eventParents=this._eventParents||{},this._eventParents[l(m)]=m,this},removeEventParent:function(m){return this._eventParents&&delete this._eventParents[l(m)],this},_propagateEvent:function(m){for(var b in this._eventParents)this._eventParents[b].fire(m.type,s({layer:m.target,propagatedFrom:m.target},m),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var le=q.extend(ee);function K(m,b,O){this.x=O?Math.round(m):m,this.y=O?Math.round(b):b}var ne=Math.trunc||function(m){return m>0?Math.floor(m):Math.ceil(m)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(m){return this.clone()._add(J(m))},_add:function(m){return this.x+=m.x,this.y+=m.y,this},subtract:function(m){return this.clone()._subtract(J(m))},_subtract:function(m){return this.x-=m.x,this.y-=m.y,this},divideBy:function(m){return this.clone()._divideBy(m)},_divideBy:function(m){return this.x/=m,this.y/=m,this},multiplyBy:function(m){return this.clone()._multiplyBy(m)},_multiplyBy:function(m){return this.x*=m,this.y*=m,this},scaleBy:function(m){return new K(this.x*m.x,this.y*m.y)},unscaleBy:function(m){return new K(this.x/m.x,this.y/m.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(m){m=J(m);var b=m.x-this.x,O=m.y-this.y;return Math.sqrt(b*b+O*O)},equals:function(m){return m=J(m),m.x===this.x&&m.y===this.y},contains:function(m){return m=J(m),Math.abs(m.x)<=Math.abs(this.x)&&Math.abs(m.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function J(m,b,O){return m instanceof K?m:D(m)?new K(m[0],m[1]):m==null?m:typeof m=="object"&&"x"in m&&"y"in m?new K(m.x,m.y):new K(m,b,O)}function ce(m,b){if(m)for(var O=b?[m,b]:m,te=0,de=O.length;te<de;te++)this.extend(O[te])}ce.prototype={extend:function(m){var b,O;if(!m)return this;if(m instanceof K||typeof m[0]=="number"||"x"in m)b=O=J(m);else if(m=Q(m),b=m.min,O=m.max,!b||!O)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=O.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(O.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(O.y,this.max.y)),this},getCenter:function(m){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,m)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(m){var b,O;return typeof m[0]=="number"||m instanceof K?m=J(m):m=Q(m),m instanceof ce?(b=m.min,O=m.max):b=O=m,b.x>=this.min.x&&O.x<=this.max.x&&b.y>=this.min.y&&O.y<=this.max.y},intersects:function(m){m=Q(m);var b=this.min,O=this.max,te=m.min,de=m.max,Ce=de.x>=b.x&&te.x<=O.x,Qe=de.y>=b.y&&te.y<=O.y;return Ce&&Qe},overlaps:function(m){m=Q(m);var b=this.min,O=this.max,te=m.min,de=m.max,Ce=de.x>b.x&&te.x<O.x,Qe=de.y>b.y&&te.y<O.y;return Ce&&Qe},isValid:function(){return!!(this.min&&this.max)},pad:function(m){var b=this.min,O=this.max,te=Math.abs(b.x-O.x)*m,de=Math.abs(b.y-O.y)*m;return Q(J(b.x-te,b.y-de),J(O.x+te,O.y+de))},equals:function(m){return m?(m=Q(m),this.min.equals(m.getTopLeft())&&this.max.equals(m.getBottomRight())):!1}};function Q(m,b){return!m||m instanceof ce?m:new ce(m,b)}function Z(m,b){if(m)for(var O=b?[m,b]:m,te=0,de=O.length;te<de;te++)this.extend(O[te])}Z.prototype={extend:function(m){var b=this._southWest,O=this._northEast,te,de;if(m instanceof ie)te=m,de=m;else if(m instanceof Z){if(te=m._southWest,de=m._northEast,!te||!de)return this}else return m?this.extend(fe(m)||se(m)):this;return!b&&!O?(this._southWest=new ie(te.lat,te.lng),this._northEast=new ie(de.lat,de.lng)):(b.lat=Math.min(te.lat,b.lat),b.lng=Math.min(te.lng,b.lng),O.lat=Math.max(de.lat,O.lat),O.lng=Math.max(de.lng,O.lng)),this},pad:function(m){var b=this._southWest,O=this._northEast,te=Math.abs(b.lat-O.lat)*m,de=Math.abs(b.lng-O.lng)*m;return new Z(new ie(b.lat-te,b.lng-de),new ie(O.lat+te,O.lng+de))},getCenter:function(){return new ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(m){typeof m[0]=="number"||m instanceof ie||"lat"in m?m=fe(m):m=se(m);var b=this._southWest,O=this._northEast,te,de;return m instanceof Z?(te=m.getSouthWest(),de=m.getNorthEast()):te=de=m,te.lat>=b.lat&&de.lat<=O.lat&&te.lng>=b.lng&&de.lng<=O.lng},intersects:function(m){m=se(m);var b=this._southWest,O=this._northEast,te=m.getSouthWest(),de=m.getNorthEast(),Ce=de.lat>=b.lat&&te.lat<=O.lat,Qe=de.lng>=b.lng&&te.lng<=O.lng;return Ce&&Qe},overlaps:function(m){m=se(m);var b=this._southWest,O=this._northEast,te=m.getSouthWest(),de=m.getNorthEast(),Ce=de.lat>b.lat&&te.lat<O.lat,Qe=de.lng>b.lng&&te.lng<O.lng;return Ce&&Qe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(m,b){return m?(m=se(m),this._southWest.equals(m.getSouthWest(),b)&&this._northEast.equals(m.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(m,b){return m instanceof Z?m:new Z(m,b)}function ie(m,b,O){if(isNaN(m)||isNaN(b))throw new Error("Invalid LatLng object: ("+m+", "+b+")");this.lat=+m,this.lng=+b,O!==void 0&&(this.alt=+O)}ie.prototype={equals:function(m,b){if(!m)return!1;m=fe(m);var O=Math.max(Math.abs(this.lat-m.lat),Math.abs(this.lng-m.lng));return O<=(b===void 0?1e-9:b)},toString:function(m){return"LatLng("+p(this.lat,m)+", "+p(this.lng,m)+")"},distanceTo:function(m){return ge.distance(this,fe(m))},wrap:function(){return ge.wrapLatLng(this)},toBounds:function(m){var b=180*m/40075017,O=b/Math.cos(Math.PI/180*this.lat);return se([this.lat-b,this.lng-O],[this.lat+b,this.lng+O])},clone:function(){return new ie(this.lat,this.lng,this.alt)}};function fe(m,b,O){return m instanceof ie?m:D(m)&&typeof m[0]!="object"?m.length===3?new ie(m[0],m[1],m[2]):m.length===2?new ie(m[0],m[1]):null:m==null?m:typeof m=="object"&&"lat"in m?new ie(m.lat,"lng"in m?m.lng:m.lon,m.alt):b===void 0?null:new ie(m,b,O)}var Se={latLngToPoint:function(m,b){var O=this.projection.project(m),te=this.scale(b);return this.transformation._transform(O,te)},pointToLatLng:function(m,b){var O=this.scale(b),te=this.transformation.untransform(m,O);return this.projection.unproject(te)},project:function(m){return this.projection.project(m)},unproject:function(m){return this.projection.unproject(m)},scale:function(m){return 256*Math.pow(2,m)},zoom:function(m){return Math.log(m/256)/Math.LN2},getProjectedBounds:function(m){if(this.infinite)return null;var b=this.projection.bounds,O=this.scale(m),te=this.transformation.transform(b.min,O),de=this.transformation.transform(b.max,O);return new ce(te,de)},infinite:!1,wrapLatLng:function(m){var b=this.wrapLng?A(m.lng,this.wrapLng,!0):m.lng,O=this.wrapLat?A(m.lat,this.wrapLat,!0):m.lat,te=m.alt;return new ie(O,b,te)},wrapLatLngBounds:function(m){var b=m.getCenter(),O=this.wrapLatLng(b),te=b.lat-O.lat,de=b.lng-O.lng;if(te===0&&de===0)return m;var Ce=m.getSouthWest(),Qe=m.getNorthEast(),st=new ie(Ce.lat-te,Ce.lng-de),ht=new ie(Qe.lat-te,Qe.lng-de);return new Z(st,ht)}},ge=s({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(m,b){var O=Math.PI/180,te=m.lat*O,de=b.lat*O,Ce=Math.sin((b.lat-m.lat)*O/2),Qe=Math.sin((b.lng-m.lng)*O/2),st=Ce*Ce+Math.cos(te)*Math.cos(de)*Qe*Qe,ht=2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st));return this.R*ht}}),xe=6378137,ve={R:xe,MAX_LATITUDE:85.0511287798,project:function(m){var b=Math.PI/180,O=this.MAX_LATITUDE,te=Math.max(Math.min(O,m.lat),-O),de=Math.sin(te*b);return new K(this.R*m.lng*b,this.R*Math.log((1+de)/(1-de))/2)},unproject:function(m){var b=180/Math.PI;return new ie((2*Math.atan(Math.exp(m.y/this.R))-Math.PI/2)*b,m.x*b/this.R)},bounds:function(){var m=xe*Math.PI;return new ce([-m,-m],[m,m])}()};function me(m,b,O,te){if(D(m)){this._a=m[0],this._b=m[1],this._c=m[2],this._d=m[3];return}this._a=m,this._b=b,this._c=O,this._d=te}me.prototype={transform:function(m,b){return this._transform(m.clone(),b)},_transform:function(m,b){return b=b||1,m.x=b*(this._a*m.x+this._b),m.y=b*(this._c*m.y+this._d),m},untransform:function(m,b){return b=b||1,new K((m.x/b-this._b)/this._a,(m.y/b-this._d)/this._c)}};function he(m,b,O,te){return new me(m,b,O,te)}var He=s({},ge,{code:"EPSG:3857",projection:ve,transformation:function(){var m=.5/(Math.PI*ve.R);return he(m,.5,-m,.5)}()}),et=s({},He,{code:"EPSG:900913"});function Ue(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function Ie(m,b){var O="",te,de,Ce,Qe,st,ht;for(te=0,Ce=m.length;te<Ce;te++){for(st=m[te],de=0,Qe=st.length;de<Qe;de++)ht=st[de],O+=(de?"L":"M")+ht.x+" "+ht.y;O+=b?Yt.svg?"z":"x":""}return O||"M0 0"}var je=document.documentElement.style,Ke="ActiveXObject"in window,rt=Ke&&!document.addEventListener,xt="msLaunchUri"in navigator&&!("documentMode"in document),Tt=Er("webkit"),vt=Er("android"),Vt=Er("android 2")||Er("android 3"),Kt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),cn=vt&&Er("Google")&&Kt<537&&!("AudioNode"in window),Gt=!!window.opera,Wt=!xt&&Er("chrome"),sn=Er("gecko")&&!Tt&&!Gt&&!Ke,Ht=!Wt&&Er("safari"),Qt=Er("phantom"),_t="OTransition"in je,Hn=navigator.platform.indexOf("Win")===0,dn=Ke&&"transition"in je,kr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vt,Fn="MozPerspective"in je,ar=!window.L_DISABLE_3D&&(dn||kr||Fn)&&!_t&&!Qt,Mr=typeof orientation<"u"||Er("mobile"),nr=Mr&&Tt,Sa=Mr&&kr,Cr=!window.PointerEvent&&window.MSPointerEvent,hs=!!(window.PointerEvent||Cr),Ms="ontouchstart"in window||!!window.TouchEvent,dr=!window.L_NO_TOUCH&&(Ms||hs),xn=Mr&&Gt,hr=Mr&&sn,Ta=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ms=function(){var m=!1;try{var b=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("testPassiveEventSupport",h,b),window.removeEventListener("testPassiveEventSupport",h,b)}catch{}return m}(),Ys=function(){return!!document.createElement("canvas").getContext}(),fa=!!(document.createElementNS&&Ue("svg").createSVGRect),rn=!!fa&&function(){var m=document.createElement("div");return m.innerHTML="<svg/>",(m.firstChild&&m.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ur=!fa&&function(){try{var m=document.createElement("div");m.innerHTML='<v:shape adj="1"/>';var b=m.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}}(),Ir=navigator.platform.indexOf("Mac")===0,es=navigator.platform.indexOf("Linux")===0;function Er(m){return navigator.userAgent.toLowerCase().indexOf(m)>=0}var Yt={ie:Ke,ielt9:rt,edge:xt,webkit:Tt,android:vt,android23:Vt,androidStock:cn,opera:Gt,chrome:Wt,gecko:sn,safari:Ht,phantom:Qt,opera12:_t,win:Hn,ie3d:dn,webkit3d:kr,gecko3d:Fn,any3d:ar,mobile:Mr,mobileWebkit:nr,mobileWebkit3d:Sa,msPointer:Cr,pointer:hs,touch:dr,touchNative:Ms,mobileOpera:xn,mobileGecko:hr,retina:Ta,passiveEvents:ms,canvas:Ys,svg:fa,vml:Ur,inlineSvg:rn,mac:Ir,linux:es},be=Yt.msPointer?"MSPointerDown":"pointerdown",Pe=Yt.msPointer?"MSPointerMove":"pointermove",Fe=Yt.msPointer?"MSPointerUp":"pointerup",De=Yt.msPointer?"MSPointerCancel":"pointercancel",Le={touchstart:be,touchmove:Pe,touchend:Fe,touchcancel:De},Me={touchstart:$t,touchmove:Ot,touchend:Ot,touchcancel:Ot},tt={},At=!1;function Je(m,b,O){return b==="touchstart"&&Jt(),Me[b]?(O=Me[b].bind(this,O),m.addEventListener(Le[b],O,!1),O):(console.warn("wrong event specified:",b),h)}function at(m,b,O){if(!Le[b]){console.warn("wrong event specified:",b);return}m.removeEventListener(Le[b],O,!1)}function ct(m){tt[m.pointerId]=m}function Bt(m){tt[m.pointerId]&&(tt[m.pointerId]=m)}function jt(m){delete tt[m.pointerId]}function Jt(){At||(document.addEventListener(be,ct,!0),document.addEventListener(Pe,Bt,!0),document.addEventListener(Fe,jt,!0),document.addEventListener(De,jt,!0),At=!0)}function Ot(m,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var O in tt)b.touches.push(tt[O]);b.changedTouches=[b],m(b)}}function $t(m,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&Wr(b),Ot(m,b)}function Cn(m){var b={},O,te;for(te in m)O=m[te],b[te]=O&&O.bind?O.bind(m):O;return m=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var Ar=200;function fr(m,b){m.addEventListener("dblclick",b);var O=0,te;function de(Ce){if(Ce.detail!==1){te=Ce.detail;return}if(!(Ce.pointerType==="mouse"||Ce.sourceCapabilities&&!Ce.sourceCapabilities.firesTouchEvents)){var Qe=ho(Ce);if(!(Qe.some(function(ht){return ht instanceof HTMLLabelElement&&ht.attributes.for})&&!Qe.some(function(ht){return ht instanceof HTMLInputElement||ht instanceof HTMLSelectElement}))){var st=Date.now();st-O<=Ar?(te++,te===2&&b(Cn(Ce))):te=1,O=st}}}return m.addEventListener("click",de),{dblclick:b,simDblclick:de}}function mr(m,b){m.removeEventListener("dblclick",b.dblclick),m.removeEventListener("click",b.simDblclick)}var Hs=co(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Na=co(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xs=Na==="webkitTransition"||Na==="OTransition"?Na+"End":"transitionend";function ha(m){return typeof m=="string"?document.getElementById(m):m}function Us(m,b){var O=m.style[b]||m.currentStyle&&m.currentStyle[b];if((!O||O==="auto")&&document.defaultView){var te=document.defaultView.getComputedStyle(m,null);O=te?te[b]:null}return O==="auto"?null:O}function Mn(m,b,O){var te=document.createElement(m);return te.className=b||"",O&&O.appendChild(te),te}function Un(m){var b=m.parentNode;b&&b.removeChild(m)}function Js(m){for(;m.firstChild;)m.removeChild(m.firstChild)}function lo(m){var b=m.parentNode;b&&b.lastChild!==m&&b.appendChild(m)}function Al(m){var b=m.parentNode;b&&b.firstChild!==m&&b.insertBefore(m,b.firstChild)}function Do(m,b){if(m.classList!==void 0)return m.classList.contains(b);var O=Sr(m);return O.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(O)}function Vn(m,b){if(m.classList!==void 0)for(var O=w(b),te=0,de=O.length;te<de;te++)m.classList.add(O[te]);else if(!Do(m,b)){var Ce=Sr(m);Dl(m,(Ce?Ce+" ":"")+b)}}function xr(m,b){m.classList!==void 0?m.classList.remove(b):Dl(m,g((" "+Sr(m)+" ").replace(" "+b+" "," ")))}function Dl(m,b){m.className.baseVal===void 0?m.className=b:m.className.baseVal=b}function Sr(m){return m.correspondingElement&&(m=m.correspondingElement),m.className.baseVal===void 0?m.className:m.className.baseVal}function is(m,b){"opacity"in m.style?m.style.opacity=b:"filter"in m.style&&Ll(m,b)}function Ll(m,b){var O=!1,te="DXImageTransform.Microsoft.Alpha";try{O=m.filters.item(te)}catch{if(b===1)return}b=Math.round(b*100),O?(O.Enabled=b!==100,O.Opacity=b):m.style.filter+=" progid:"+te+"(opacity="+b+")"}function co(m){for(var b=document.documentElement.style,O=0;O<m.length;O++)if(m[O]in b)return m[O];return!1}function Ba(m,b,O){var te=b||new K(0,0);m.style[Hs]=(Yt.ie3d?"translate("+te.x+"px,"+te.y+"px)":"translate3d("+te.x+"px,"+te.y+"px,0)")+(O?" scale("+O+")":"")}function Dn(m,b){m._leaflet_pos=b,Yt.any3d?Ba(m,b):(m.style.left=b.x+"px",m.style.top=b.y+"px")}function li(m){return m._leaflet_pos||new K(0,0)}var ka,Ni,Hc;if("onselectstart"in document)ka=function(){bn(window,"selectstart",Wr)},Ni=function(){ir(window,"selectstart",Wr)};else{var fl=co(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ka=function(){if(fl){var m=document.documentElement.style;Hc=m[fl],m[fl]="none"}},Ni=function(){fl&&(document.documentElement.style[fl]=Hc,Hc=void 0)}}function uc(){bn(window,"dragstart",Wr)}function uo(){ir(window,"dragstart",Wr)}var hl,Ao;function ji(m){for(;m.tabIndex===-1;)m=m.parentNode;m.style&&($r(),hl=m,Ao=m.style.outlineStyle,m.style.outlineStyle="none",bn(window,"keydown",$r))}function $r(){hl&&(hl.style.outlineStyle=Ao,hl=void 0,Ao=void 0,ir(window,"keydown",$r))}function Lo(m){do m=m.parentNode;while((!m.offsetWidth||!m.offsetHeight)&&m!==document.body);return m}function Hi(m){var b=m.getBoundingClientRect();return{x:b.width/m.offsetWidth||1,y:b.height/m.offsetHeight||1,boundingClientRect:b}}var Ln={__proto__:null,TRANSFORM:Hs,TRANSITION:Na,TRANSITION_END:Xs,get:ha,getStyle:Us,create:Mn,remove:Un,empty:Js,toFront:lo,toBack:Al,hasClass:Do,addClass:Vn,removeClass:xr,setClass:Dl,getClass:Sr,setOpacity:is,testProp:co,setTransform:Ba,setPosition:Dn,getPosition:li,get disableTextSelection(){return ka},get enableTextSelection(){return Ni},disableImageDrag:uc,enableImageDrag:uo,preventOutline:ji,restoreOutline:$r,getSizedParentNode:Lo,getScale:Hi};function bn(m,b,O,te){if(b&&typeof b=="object")for(var de in b)Qi(m,de,b[de],O);else{b=w(b);for(var Ce=0,Qe=b.length;Ce<Qe;Ce++)Qi(m,b[Ce],O,te)}return this}var Bi="_leaflet_events";function ir(m,b,O,te){if(arguments.length===1)ki(m),delete m[Bi];else if(b&&typeof b=="object")for(var de in b)ci(m,de,b[de],O);else if(b=w(b),arguments.length===2)ki(m,function(st){return R(b,st)!==-1});else for(var Ce=0,Qe=b.length;Ce<Qe;Ce++)ci(m,b[Ce],O,te);return this}function ki(m,b){for(var O in m[Bi]){var te=O.split(/\d/)[0];(!b||b(te))&&ci(m,te,null,null,O)}}var Ga={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qi(m,b,O,te){var de=b+l(O)+(te?"_"+l(te):"");if(m[Bi]&&m[Bi][de])return this;var Ce=function(st){return O.call(te||m,st||window.event)},Qe=Ce;!Yt.touchNative&&Yt.pointer&&b.indexOf("touch")===0?Ce=Je(m,b,Ce):Yt.touch&&b==="dblclick"?Ce=fr(m,Ce):"addEventListener"in m?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?m.addEventListener(Ga[b]||b,Ce,Yt.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(Ce=function(st){st=st||window.event,Vi(m,st)&&Qe(st)},m.addEventListener(Ga[b],Ce,!1)):m.addEventListener(b,Qe,!1):m.attachEvent("on"+b,Ce),m[Bi]=m[Bi]||{},m[Bi][de]=Ce}function ci(m,b,O,te,de){de=de||b+l(O)+(te?"_"+l(te):"");var Ce=m[Bi]&&m[Bi][de];if(!Ce)return this;!Yt.touchNative&&Yt.pointer&&b.indexOf("touch")===0?at(m,b,Ce):Yt.touch&&b==="dblclick"?mr(m,Ce):"removeEventListener"in m?m.removeEventListener(Ga[b]||b,Ce,!1):m.detachEvent("on"+b,Ce),m[Bi][de]=null}function ui(m){return m.stopPropagation?m.stopPropagation():m.originalEvent?m.originalEvent._stopped=!0:m.cancelBubble=!0,this}function fo(m){return Qi(m,"wheel",ui),this}function ml(m){return bn(m,"mousedown touchstart dblclick contextmenu",ui),m._leaflet_disable_click=!0,this}function Wr(m){return m.preventDefault?m.preventDefault():m.returnValue=!1,this}function Qs(m){return Wr(m),ui(m),this}function ho(m){if(m.composedPath)return m.composedPath();for(var b=[],O=m.target;O;)b.push(O),O=O.parentNode;return b}function Zs(m,b){if(!b)return new K(m.clientX,m.clientY);var O=Hi(b),te=O.boundingClientRect;return new K((m.clientX-te.left)/O.x-b.clientLeft,(m.clientY-te.top)/O.y-b.clientTop)}var Tr=Yt.linux&&Yt.chrome?window.devicePixelRatio:Yt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pl(m){return Yt.edge?m.wheelDeltaY/2:m.deltaY&&m.deltaMode===0?-m.deltaY/Tr:m.deltaY&&m.deltaMode===1?-m.deltaY*20:m.deltaY&&m.deltaMode===2?-m.deltaY*60:m.deltaX||m.deltaZ?0:m.wheelDelta?(m.wheelDeltaY||m.wheelDelta)/2:m.detail&&Math.abs(m.detail)<32765?-m.detail*20:m.detail?m.detail/-32765*60:0}function Vi(m,b){var O=b.relatedTarget;if(!O)return!0;try{for(;O&&O!==m;)O=O.parentNode}catch{return!1}return O!==m}var _u={__proto__:null,on:bn,off:ir,stopPropagation:ui,disableScrollPropagation:fo,disableClickPropagation:ml,preventDefault:Wr,stop:Qs,getPropagationPath:ho,getMousePosition:Zs,getWheelDelta:pl,isExternalTarget:Vi,addListener:bn,removeListener:ir},Rl=le.extend({run:function(m,b,O,te){this.stop(),this._el=m,this._inProgress=!0,this._duration=O||.25,this._easeOutPower=1/Math.max(te||.5,.2),this._startPos=li(m),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(m){var b=+new Date-this._startTime,O=this._duration*1e3;b<O?this._runFrame(this._easeOut(b/O),m):(this._runFrame(1),this._complete())},_runFrame:function(m,b){var O=this._startPos.add(this._offset.multiplyBy(m));b&&O._round(),Dn(this._el,O),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(m){return 1-Math.pow(1-m,this._easeOutPower)}}),rr=le.extend({options:{crs:He,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(m,b){b=x(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(m),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(fe(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Na&&Yt.any3d&&!Yt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bn(this._proxy,Xs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(m,b,O){if(b=b===void 0?this._zoom:this._limitZoom(b),m=this._limitCenter(fe(m),b,this.options.maxBounds),O=O||{},this._stop(),this._loaded&&!O.reset&&O!==!0){O.animate!==void 0&&(O.zoom=s({animate:O.animate},O.zoom),O.pan=s({animate:O.animate,duration:O.duration},O.pan));var te=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(m,b,O.zoom):this._tryAnimatedPan(m,O.pan);if(te)return clearTimeout(this._sizeTimer),this}return this._resetView(m,b,O.pan&&O.pan.noMoveStart),this},setZoom:function(m,b){return this._loaded?this.setView(this.getCenter(),m,{zoom:b}):(this._zoom=m,this)},zoomIn:function(m,b){return m=m||(Yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+m,b)},zoomOut:function(m,b){return m=m||(Yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-m,b)},setZoomAround:function(m,b,O){var te=this.getZoomScale(b),de=this.getSize().divideBy(2),Ce=m instanceof K?m:this.latLngToContainerPoint(m),Qe=Ce.subtract(de).multiplyBy(1-1/te),st=this.containerPointToLatLng(de.add(Qe));return this.setView(st,b,{zoom:O})},_getBoundsCenterZoom:function(m,b){b=b||{},m=m.getBounds?m.getBounds():se(m);var O=J(b.paddingTopLeft||b.padding||[0,0]),te=J(b.paddingBottomRight||b.padding||[0,0]),de=this.getBoundsZoom(m,!1,O.add(te));if(de=typeof b.maxZoom=="number"?Math.min(b.maxZoom,de):de,de===1/0)return{center:m.getCenter(),zoom:de};var Ce=te.subtract(O).divideBy(2),Qe=this.project(m.getSouthWest(),de),st=this.project(m.getNorthEast(),de),ht=this.unproject(Qe.add(st).divideBy(2).add(Ce),de);return{center:ht,zoom:de}},fitBounds:function(m,b){if(m=se(m),!m.isValid())throw new Error("Bounds are not valid.");var O=this._getBoundsCenterZoom(m,b);return this.setView(O.center,O.zoom,b)},fitWorld:function(m){return this.fitBounds([[-90,-180],[90,180]],m)},panTo:function(m,b){return this.setView(m,this._zoom,{pan:b})},panBy:function(m,b){if(m=J(m).round(),b=b||{},!m.x&&!m.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(m))return this._resetView(this.unproject(this.project(this.getCenter()).add(m)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Rl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){Vn(this._mapPane,"leaflet-pan-anim");var O=this._getMapPanePos().subtract(m).round();this._panAnim.run(this._mapPane,O,b.duration||.25,b.easeLinearity)}else this._rawPanBy(m),this.fire("move").fire("moveend");return this},flyTo:function(m,b,O){if(O=O||{},O.animate===!1||!Yt.any3d)return this.setView(m,b,O);this._stop();var te=this.project(this.getCenter()),de=this.project(m),Ce=this.getSize(),Qe=this._zoom;m=fe(m),b=b===void 0?Qe:b;var st=Math.max(Ce.x,Ce.y),ht=st*this.getZoomScale(Qe,b),Ft=de.distanceTo(te)||1,an=1.42,An=an*an;function vn(rs){var ta=rs?-1:1,xc=rs?ht:st,Xc=ht*ht-st*st+ta*An*An*Ft*Ft,Wl=2*xc*An*Ft,id=Xc/Wl,Wd=Math.sqrt(id*id+1)-id,od=Wd<1e-9?-18:Math.log(Wd);return od}function Kn(rs){return(Math.exp(rs)-Math.exp(-rs))/2}function _s(rs){return(Math.exp(rs)+Math.exp(-rs))/2}function ea(rs){return Kn(rs)/_s(rs)}var mi=vn(0);function jo(rs){return st*(_s(mi)/_s(mi+an*rs))}function L0(rs){return st*(_s(mi)*ea(mi+an*rs)-Kn(mi))/An}function vc(rs){return 1-Math.pow(1-rs,1.5)}var Li=Date.now(),$i=(vn(1)-mi)/an,R0=O.duration?1e3*O.duration:1e3*$i*.8;function Bu(){var rs=(Date.now()-Li)/R0,ta=vc(rs)*$i;rs<=1?(this._flyToFrame=M(Bu,this),this._move(this.unproject(te.add(de.subtract(te).multiplyBy(L0(ta)/Ft)),Qe),this.getScaleZoom(st/jo(ta),Qe),{flyTo:!0})):this._move(m,b)._moveEnd(!0)}return this._moveStart(!0,O.noMoveStart),Bu.call(this),this},flyToBounds:function(m,b){var O=this._getBoundsCenterZoom(m,b);return this.flyTo(O.center,O.zoom,b)},setMaxBounds:function(m){return m=se(m),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),m.isValid()?(this.options.maxBounds=m,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(m){var b=this.options.minZoom;return this.options.minZoom=m,this._loaded&&b!==m&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(m):this},setMaxZoom:function(m){var b=this.options.maxZoom;return this.options.maxZoom=m,this._loaded&&b!==m&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(m):this},panInsideBounds:function(m,b){this._enforcingBounds=!0;var O=this.getCenter(),te=this._limitCenter(O,this._zoom,se(m));return O.equals(te)||this.panTo(te,b),this._enforcingBounds=!1,this},panInside:function(m,b){b=b||{};var O=J(b.paddingTopLeft||b.padding||[0,0]),te=J(b.paddingBottomRight||b.padding||[0,0]),de=this.project(this.getCenter()),Ce=this.project(m),Qe=this.getPixelBounds(),st=Q([Qe.min.add(O),Qe.max.subtract(te)]),ht=st.getSize();if(!st.contains(Ce)){this._enforcingBounds=!0;var Ft=Ce.subtract(st.getCenter()),an=st.extend(Ce).getSize().subtract(ht);de.x+=Ft.x<0?-an.x:an.x,de.y+=Ft.y<0?-an.y:an.y,this.panTo(this.unproject(de),b),this._enforcingBounds=!1}return this},invalidateSize:function(m){if(!this._loaded)return this;m=s({animate:!1,pan:!0},m===!0?{animate:!0}:m);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var O=this.getSize(),te=b.divideBy(2).round(),de=O.divideBy(2).round(),Ce=te.subtract(de);return!Ce.x&&!Ce.y?this:(m.animate&&m.pan?this.panBy(Ce):(m.pan&&this._rawPanBy(Ce),this.fire("move"),m.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:O}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(m){if(m=this._locateOptions=s({timeout:1e4,watch:!1},m),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=i(this._handleGeolocationResponse,this),O=i(this._handleGeolocationError,this);return m.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,O,m):navigator.geolocation.getCurrentPosition(b,O,m),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(m){if(this._container._leaflet_id){var b=m.code,O=m.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+O+"."})}},_handleGeolocationResponse:function(m){if(this._container._leaflet_id){var b=m.coords.latitude,O=m.coords.longitude,te=new ie(b,O),de=te.toBounds(m.coords.accuracy*2),Ce=this._locateOptions;if(Ce.setView){var Qe=this.getBoundsZoom(de);this.setView(te,Ce.maxZoom?Math.min(Qe,Ce.maxZoom):Qe)}var st={latlng:te,bounds:de,timestamp:m.timestamp};for(var ht in m.coords)typeof m.coords[ht]=="number"&&(st[ht]=m.coords[ht]);this.fire("locationfound",st)}},addHandler:function(m,b){if(!b)return this;var O=this[m]=new b(this);return this._handlers.push(O),this.options[m]&&O.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Un(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var m;for(m in this._layers)this._layers[m].remove();for(m in this._panes)Un(this._panes[m]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(m,b){var O="leaflet-pane"+(m?" leaflet-"+m.replace("Pane","")+"-pane":""),te=Mn("div",O,b||this._mapPane);return m&&(this._panes[m]=te),te},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var m=this.getPixelBounds(),b=this.unproject(m.getBottomLeft()),O=this.unproject(m.getTopRight());return new Z(b,O)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(m,b,O){m=se(m),O=J(O||[0,0]);var te=this.getZoom()||0,de=this.getMinZoom(),Ce=this.getMaxZoom(),Qe=m.getNorthWest(),st=m.getSouthEast(),ht=this.getSize().subtract(O),Ft=Q(this.project(st,te),this.project(Qe,te)).getSize(),an=Yt.any3d?this.options.zoomSnap:1,An=ht.x/Ft.x,vn=ht.y/Ft.y,Kn=b?Math.max(An,vn):Math.min(An,vn);return te=this.getScaleZoom(Kn,te),an&&(te=Math.round(te/(an/100))*(an/100),te=b?Math.ceil(te/an)*an:Math.floor(te/an)*an),Math.max(de,Math.min(Ce,te))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(m,b){var O=this._getTopLeftPoint(m,b);return new ce(O,O.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(m){return this.options.crs.getProjectedBounds(m===void 0?this.getZoom():m)},getPane:function(m){return typeof m=="string"?this._panes[m]:m},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(m,b){var O=this.options.crs;return b=b===void 0?this._zoom:b,O.scale(m)/O.scale(b)},getScaleZoom:function(m,b){var O=this.options.crs;b=b===void 0?this._zoom:b;var te=O.zoom(m*O.scale(b));return isNaN(te)?1/0:te},project:function(m,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(fe(m),b)},unproject:function(m,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(J(m),b)},layerPointToLatLng:function(m){var b=J(m).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(m){var b=this.project(fe(m))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(m){return this.options.crs.wrapLatLng(fe(m))},wrapLatLngBounds:function(m){return this.options.crs.wrapLatLngBounds(se(m))},distance:function(m,b){return this.options.crs.distance(fe(m),fe(b))},containerPointToLayerPoint:function(m){return J(m).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(m){return J(m).add(this._getMapPanePos())},containerPointToLatLng:function(m){var b=this.containerPointToLayerPoint(J(m));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(m){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(m)))},mouseEventToContainerPoint:function(m){return Zs(m,this._container)},mouseEventToLayerPoint:function(m){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(m))},mouseEventToLatLng:function(m){return this.layerPointToLatLng(this.mouseEventToLayerPoint(m))},_initContainer:function(m){var b=this._container=ha(m);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bn(b,"scroll",this._onScroll,this),this._containerId=l(b)},_initLayout:function(){var m=this._container;this._fadeAnimated=this.options.fadeAnimation&&Yt.any3d,Vn(m,"leaflet-container"+(Yt.touch?" leaflet-touch":"")+(Yt.retina?" leaflet-retina":"")+(Yt.ielt9?" leaflet-oldie":"")+(Yt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=Us(m,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(m.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var m=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Dn(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Vn(m.markerPane,"leaflet-zoom-hide"),Vn(m.shadowPane,"leaflet-zoom-hide"))},_resetView:function(m,b,O){Dn(this._mapPane,new K(0,0));var te=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var de=this._zoom!==b;this._moveStart(de,O)._move(m,b)._moveEnd(de),this.fire("viewreset"),te&&this.fire("load")},_moveStart:function(m,b){return m&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(m,b,O,te){b===void 0&&(b=this._zoom);var de=this._zoom!==b;return this._zoom=b,this._lastCenter=m,this._pixelOrigin=this._getNewPixelOrigin(m),te?O&&O.pinch&&this.fire("zoom",O):((de||O&&O.pinch)&&this.fire("zoom",O),this.fire("move",O)),this},_moveEnd:function(m){return m&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(m){Dn(this._mapPane,this._getMapPanePos().subtract(m))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(m){this._targets={},this._targets[l(this._container)]=this;var b=m?ir:bn;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),Yt.any3d&&this.options.transform3DLimit&&(m?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var m=this._getMapPanePos();Math.max(Math.abs(m.x),Math.abs(m.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(m,b){for(var O=[],te,de=b==="mouseout"||b==="mouseover",Ce=m.target||m.srcElement,Qe=!1;Ce;){if(te=this._targets[l(Ce)],te&&(b==="click"||b==="preclick")&&this._draggableMoved(te)){Qe=!0;break}if(te&&te.listens(b,!0)&&(de&&!Vi(Ce,m)||(O.push(te),de))||Ce===this._container)break;Ce=Ce.parentNode}return!O.length&&!Qe&&!de&&this.listens(b,!0)&&(O=[this]),O},_isClickDisabled:function(m){for(;m&&m!==this._container;){if(m._leaflet_disable_click)return!0;m=m.parentNode}},_handleDOMEvent:function(m){var b=m.target||m.srcElement;if(!(!this._loaded||b._leaflet_disable_events||m.type==="click"&&this._isClickDisabled(b))){var O=m.type;O==="mousedown"&&ji(b),this._fireDOMEvent(m,O)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(m,b,O){if(m.type==="click"){var te=s({},m);te.type="preclick",this._fireDOMEvent(te,te.type,O)}var de=this._findEventTargets(m,b);if(O){for(var Ce=[],Qe=0;Qe<O.length;Qe++)O[Qe].listens(b,!0)&&Ce.push(O[Qe]);de=Ce.concat(de)}if(de.length){b==="contextmenu"&&Wr(m);var st=de[0],ht={originalEvent:m};if(m.type!=="keypress"&&m.type!=="keydown"&&m.type!=="keyup"){var Ft=st.getLatLng&&(!st._radius||st._radius<=10);ht.containerPoint=Ft?this.latLngToContainerPoint(st.getLatLng()):this.mouseEventToContainerPoint(m),ht.layerPoint=this.containerPointToLayerPoint(ht.containerPoint),ht.latlng=Ft?st.getLatLng():this.layerPointToLatLng(ht.layerPoint)}for(Qe=0;Qe<de.length;Qe++)if(de[Qe].fire(b,ht,!0),ht.originalEvent._stopped||de[Qe].options.bubblingMouseEvents===!1&&R(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(m){return m=m.dragging&&m.dragging.enabled()?m:this,m.dragging&&m.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var m=0,b=this._handlers.length;m<b;m++)this._handlers[m].disable()},whenReady:function(m,b){return this._loaded?m.call(b||this,{target:this}):this.on("load",m,b),this},_getMapPanePos:function(){return li(this._mapPane)||new K(0,0)},_moved:function(){var m=this._getMapPanePos();return m&&!m.equals([0,0])},_getTopLeftPoint:function(m,b){var O=m&&b!==void 0?this._getNewPixelOrigin(m,b):this.getPixelOrigin();return O.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(m,b){var O=this.getSize()._divideBy(2);return this.project(m,b)._subtract(O)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(m,b,O){var te=this._getNewPixelOrigin(O,b);return this.project(m,b)._subtract(te)},_latLngBoundsToNewLayerBounds:function(m,b,O){var te=this._getNewPixelOrigin(O,b);return Q([this.project(m.getSouthWest(),b)._subtract(te),this.project(m.getNorthWest(),b)._subtract(te),this.project(m.getSouthEast(),b)._subtract(te),this.project(m.getNorthEast(),b)._subtract(te)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(m){return this.latLngToLayerPoint(m).subtract(this._getCenterLayerPoint())},_limitCenter:function(m,b,O){if(!O)return m;var te=this.project(m,b),de=this.getSize().divideBy(2),Ce=new ce(te.subtract(de),te.add(de)),Qe=this._getBoundsOffset(Ce,O,b);return Math.abs(Qe.x)<=1&&Math.abs(Qe.y)<=1?m:this.unproject(te.add(Qe),b)},_limitOffset:function(m,b){if(!b)return m;var O=this.getPixelBounds(),te=new ce(O.min.add(m),O.max.add(m));return m.add(this._getBoundsOffset(te,b))},_getBoundsOffset:function(m,b,O){var te=Q(this.project(b.getNorthEast(),O),this.project(b.getSouthWest(),O)),de=te.min.subtract(m.min),Ce=te.max.subtract(m.max),Qe=this._rebound(de.x,-Ce.x),st=this._rebound(de.y,-Ce.y);return new K(Qe,st)},_rebound:function(m,b){return m+b>0?Math.round(m-b)/2:Math.max(0,Math.ceil(m))-Math.max(0,Math.floor(b))},_limitZoom:function(m){var b=this.getMinZoom(),O=this.getMaxZoom(),te=Yt.any3d?this.options.zoomSnap:1;return te&&(m=Math.round(m/te)*te),Math.max(b,Math.min(O,m))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(m,b){var O=this._getCenterOffset(m)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(O)?!1:(this.panBy(O,b),!0)},_createAnimProxy:function(){var m=this._proxy=Mn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(m),this.on("zoomanim",function(b){var O=Hs,te=this._proxy.style[O];Ba(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),te===this._proxy.style[O]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Un(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var m=this.getCenter(),b=this.getZoom();Ba(this._proxy,this.project(m,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(m){this._animatingZoom&&m.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(m,b,O){if(this._animatingZoom)return!0;if(O=O||{},!this._zoomAnimated||O.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var te=this.getZoomScale(b),de=this._getCenterOffset(m)._divideBy(1-1/te);return O.animate!==!0&&!this.getSize().contains(de)?!1:(M(function(){this._moveStart(!0,O.noMoveStart||!1)._animateZoom(m,b,!0)},this),!0)},_animateZoom:function(m,b,O,te){this._mapPane&&(O&&(this._animatingZoom=!0,this._animateToCenter=m,this._animateToZoom=b,Vn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:m,zoom:b,noUpdate:te}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mo(m,b){return new rr(m,b)}var ps=q.extend({options:{position:"topright"},initialize:function(m){x(this,m)},getPosition:function(){return this.options.position},setPosition:function(m){var b=this._map;return b&&b.removeControl(this),this.options.position=m,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(m){this.remove(),this._map=m;var b=this._container=this.onAdd(m),O=this.getPosition(),te=m._controlCorners[O];return Vn(b,"leaflet-control"),O.indexOf("bottom")!==-1?te.insertBefore(b,te.firstChild):te.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Un(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(m){this._map&&m&&m.screenX>0&&m.screenY>0&&this._map.getContainer().focus()}}),Fs=function(m){return new ps(m)};rr.include({addControl:function(m){return m.addTo(this),this},removeControl:function(m){return m.remove(),this},_initControlPos:function(){var m=this._controlCorners={},b="leaflet-",O=this._controlContainer=Mn("div",b+"control-container",this._container);function te(de,Ce){var Qe=b+de+" "+b+Ce;m[de+Ce]=Mn("div",Qe,O)}te("top","left"),te("top","right"),te("bottom","left"),te("bottom","right")},_clearControlPos:function(){for(var m in this._controlCorners)Un(this._controlCorners[m]);Un(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Cu=ps.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(m,b,O,te){return O<te?-1:te<O?1:0}},initialize:function(m,b,O){x(this,O),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var te in m)this._addLayer(m[te],te);for(te in b)this._addLayer(b[te],te,!0)},onAdd:function(m){this._initLayout(),this._update(),this._map=m,m.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(m){return ps.prototype.addTo.call(this,m),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(m,b){return this._addLayer(m,b),this._map?this._update():this},addOverlay:function(m,b){return this._addLayer(m,b,!0),this._map?this._update():this},removeLayer:function(m){m.off("add remove",this._onLayerChange,this);var b=this._getLayer(l(m));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){Vn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var m=this._map.getSize().y-(this._container.offsetTop+50);return m<this._section.clientHeight?(Vn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=m+"px"):xr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var m="leaflet-control-layers",b=this._container=Mn("div",m),O=this.options.collapsed;b.setAttribute("aria-haspopup",!0),ml(b),fo(b);var te=this._section=Mn("section",m+"-list");O&&(this._map.on("click",this.collapse,this),bn(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var de=this._layersLink=Mn("a",m+"-toggle",b);de.href="#",de.title="Layers",de.setAttribute("role","button"),bn(de,{keydown:function(Ce){Ce.keyCode===13&&this._expandSafely()},click:function(Ce){Wr(Ce),this._expandSafely()}},this),O||this.expand(),this._baseLayersList=Mn("div",m+"-base",te),this._separator=Mn("div",m+"-separator",te),this._overlaysList=Mn("div",m+"-overlays",te),b.appendChild(te)},_getLayer:function(m){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&l(this._layers[b].layer)===m)return this._layers[b]},_addLayer:function(m,b,O){this._map&&m.on("add remove",this._onLayerChange,this),this._layers.push({layer:m,name:b,overlay:O}),this.options.sortLayers&&this._layers.sort(i(function(te,de){return this.options.sortFunction(te.layer,de.layer,te.name,de.name)},this)),this.options.autoZIndex&&m.setZIndex&&(this._lastZIndex++,m.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Js(this._baseLayersList),Js(this._overlaysList),this._layerControlInputs=[];var m,b,O,te,de=0;for(O=0;O<this._layers.length;O++)te=this._layers[O],this._addItem(te),b=b||te.overlay,m=m||!te.overlay,de+=te.overlay?0:1;return this.options.hideSingleBase&&(m=m&&de>1,this._baseLayersList.style.display=m?"":"none"),this._separator.style.display=b&&m?"":"none",this},_onLayerChange:function(m){this._handlingClick||this._update();var b=this._getLayer(l(m.target)),O=b.overlay?m.type==="add"?"overlayadd":"overlayremove":m.type==="add"?"baselayerchange":null;O&&this._map.fire(O,b)},_createRadioElement:function(m,b){var O='<input type="radio" class="leaflet-control-layers-selector" name="'+m+'"'+(b?' checked="checked"':"")+"/>",te=document.createElement("div");return te.innerHTML=O,te.firstChild},_addItem:function(m){var b=document.createElement("label"),O=this._map.hasLayer(m.layer),te;m.overlay?(te=document.createElement("input"),te.type="checkbox",te.className="leaflet-control-layers-selector",te.defaultChecked=O):te=this._createRadioElement("leaflet-base-layers_"+l(this),O),this._layerControlInputs.push(te),te.layerId=l(m.layer),bn(te,"click",this._onInputClick,this);var de=document.createElement("span");de.innerHTML=" "+m.name;var Ce=document.createElement("span");b.appendChild(Ce),Ce.appendChild(te),Ce.appendChild(de);var Qe=m.overlay?this._overlaysList:this._baseLayersList;return Qe.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var m=this._layerControlInputs,b,O,te=[],de=[];this._handlingClick=!0;for(var Ce=m.length-1;Ce>=0;Ce--)b=m[Ce],O=this._getLayer(b.layerId).layer,b.checked?te.push(O):b.checked||de.push(O);for(Ce=0;Ce<de.length;Ce++)this._map.hasLayer(de[Ce])&&this._map.removeLayer(de[Ce]);for(Ce=0;Ce<te.length;Ce++)this._map.hasLayer(te[Ce])||this._map.addLayer(te[Ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var m=this._layerControlInputs,b,O,te=this._map.getZoom(),de=m.length-1;de>=0;de--)b=m[de],O=this._getLayer(b.layerId).layer,b.disabled=O.options.minZoom!==void 0&&te<O.options.minZoom||O.options.maxZoom!==void 0&&te>O.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var m=this._section;this._preventClick=!0,bn(m,"click",Wr),this.expand();var b=this;setTimeout(function(){ir(m,"click",Wr),b._preventClick=!1})}}),Pl=function(m,b,O){return new Cu(m,b,O)},ma=ps.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(m){var b="leaflet-control-zoom",O=Mn("div",b+" leaflet-bar"),te=this.options;return this._zoomInButton=this._createButton(te.zoomInText,te.zoomInTitle,b+"-in",O,this._zoomIn),this._zoomOutButton=this._createButton(te.zoomOutText,te.zoomOutTitle,b+"-out",O,this._zoomOut),this._updateDisabled(),m.on("zoomend zoomlevelschange",this._updateDisabled,this),O},onRemove:function(m){m.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(m){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(m.shiftKey?3:1))},_zoomOut:function(m){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(m.shiftKey?3:1))},_createButton:function(m,b,O,te,de){var Ce=Mn("a",O,te);return Ce.innerHTML=m,Ce.href="#",Ce.title=b,Ce.setAttribute("role","button"),Ce.setAttribute("aria-label",b),ml(Ce),bn(Ce,"click",Qs),bn(Ce,"click",de,this),bn(Ce,"click",this._refocusOnMap,this),Ce},_updateDisabled:function(){var m=this._map,b="leaflet-disabled";xr(this._zoomInButton,b),xr(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||m._zoom===m.getMinZoom())&&(Vn(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||m._zoom===m.getMaxZoom())&&(Vn(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});rr.mergeOptions({zoomControl:!0}),rr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ma,this.addControl(this.zoomControl))});var Ml=function(m){return new ma(m)},Ro=ps.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(m){var b="leaflet-control-scale",O=Mn("div",b),te=this.options;return this._addScales(te,b+"-line",O),m.on(te.updateWhenIdle?"moveend":"move",this._update,this),m.whenReady(this._update,this),O},onRemove:function(m){m.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(m,b,O){m.metric&&(this._mScale=Mn("div",b,O)),m.imperial&&(this._iScale=Mn("div",b,O))},_update:function(){var m=this._map,b=m.getSize().y/2,O=m.distance(m.containerPointToLatLng([0,b]),m.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(O)},_updateScales:function(m){this.options.metric&&m&&this._updateMetric(m),this.options.imperial&&m&&this._updateImperial(m)},_updateMetric:function(m){var b=this._getRoundNum(m),O=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,O,b/m)},_updateImperial:function(m){var b=m*3.2808399,O,te,de;b>5280?(O=b/5280,te=this._getRoundNum(O),this._updateScale(this._iScale,te+" mi",te/O)):(de=this._getRoundNum(b),this._updateScale(this._iScale,de+" ft",de/b))},_updateScale:function(m,b,O){m.style.width=Math.round(this.options.maxWidth*O)+"px",m.innerHTML=b},_getRoundNum:function(m){var b=Math.pow(10,(Math.floor(m)+"").length-1),O=m/b;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:1,b*O}}),Qc=function(m){return new Ro(m)},dc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ul=ps.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Yt.inlineSvg?dc+" ":"")+"Leaflet</a>"},initialize:function(m){x(this,m),this._attributions={}},onAdd:function(m){m.attributionControl=this,this._container=Mn("div","leaflet-control-attribution"),ml(this._container);for(var b in m._layers)m._layers[b].getAttribution&&this.addAttribution(m._layers[b].getAttribution());return this._update(),m.on("layeradd",this._addAttribution,this),this._container},onRemove:function(m){m.off("layeradd",this._addAttribution,this)},_addAttribution:function(m){m.layer.getAttribution&&(this.addAttribution(m.layer.getAttribution()),m.layer.once("remove",function(){this.removeAttribution(m.layer.getAttribution())},this))},setPrefix:function(m){return this.options.prefix=m,this._update(),this},addAttribution:function(m){return m?(this._attributions[m]||(this._attributions[m]=0),this._attributions[m]++,this._update(),this):this},removeAttribution:function(m){return m?(this._attributions[m]&&(this._attributions[m]--,this._update()),this):this},_update:function(){if(this._map){var m=[];for(var b in this._attributions)this._attributions[b]&&m.push(b);var O=[];this.options.prefix&&O.push(this.options.prefix),m.length&&O.push(m.join(", ")),this._container.innerHTML=O.join(' <span aria-hidden="true">|</span> ')}}});rr.mergeOptions({attributionControl:!0}),rr.addInitHook(function(){this.options.attributionControl&&new Ul().addTo(this)});var Eu=function(m){return new Ul(m)};ps.Layers=Cu,ps.Zoom=ma,ps.Scale=Ro,ps.Attribution=Ul,Fs.layers=Pl,Fs.zoom=Ml,Fs.scale=Qc,Fs.attribution=Eu;var Ia=q.extend({initialize:function(m){this._map=m},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ia.addTo=function(m,b){return m.addHandler(b,this),this};var Ol={Events:ee},jl=Yt.touch?"touchstart mousedown":"mousedown",Ii=le.extend({options:{clickTolerance:3},initialize:function(m,b,O,te){x(this,te),this._element=m,this._dragStartTarget=b||m,this._preventOutline=O},enable:function(){this._enabled||(bn(this._dragStartTarget,jl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ii._dragging===this&&this.finishDrag(!0),ir(this._dragStartTarget,jl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(m){if(this._enabled&&(this._moved=!1,!Do(this._element,"leaflet-zoom-anim"))){if(m.touches&&m.touches.length!==1){Ii._dragging===this&&this.finishDrag();return}if(!(Ii._dragging||m.shiftKey||m.which!==1&&m.button!==1&&!m.touches)&&(Ii._dragging=this,this._preventOutline&&ji(this._element),uc(),ka(),!this._moving)){this.fire("down");var b=m.touches?m.touches[0]:m,O=Lo(this._element);this._startPoint=new K(b.clientX,b.clientY),this._startPos=li(this._element),this._parentScale=Hi(O);var te=m.type==="mousedown";bn(document,te?"mousemove":"touchmove",this._onMove,this),bn(document,te?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(m){if(this._enabled){if(m.touches&&m.touches.length>1){this._moved=!0;return}var b=m.touches&&m.touches.length===1?m.touches[0]:m,O=new K(b.clientX,b.clientY)._subtract(this._startPoint);!O.x&&!O.y||Math.abs(O.x)+Math.abs(O.y)<this.options.clickTolerance||(O.x/=this._parentScale.x,O.y/=this._parentScale.y,Wr(m),this._moved||(this.fire("dragstart"),this._moved=!0,Vn(document.body,"leaflet-dragging"),this._lastTarget=m.target||m.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Vn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(O),this._moving=!0,this._lastEvent=m,this._updatePosition())}},_updatePosition:function(){var m={originalEvent:this._lastEvent};this.fire("predrag",m),Dn(this._element,this._newPos),this.fire("drag",m)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(m){xr(document.body,"leaflet-dragging"),this._lastTarget&&(xr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ir(document,"mousemove touchmove",this._onMove,this),ir(document,"mouseup touchend touchcancel",this._onUp,this),uo(),Ni();var b=this._moved&&this._moving;this._moving=!1,Ii._dragging=!1,b&&this.fire("dragend",{noInertia:m,distance:this._newPos.distanceTo(this._startPos)})}});function Hl(m,b,O){var te,de=[1,4,2,8],Ce,Qe,st,ht,Ft,an,An,vn;for(Ce=0,an=m.length;Ce<an;Ce++)m[Ce]._code=gt(m[Ce],b);for(st=0;st<4;st++){for(An=de[st],te=[],Ce=0,an=m.length,Qe=an-1;Ce<an;Qe=Ce++)ht=m[Ce],Ft=m[Qe],ht._code&An?Ft._code&An||(vn=Xe(Ft,ht,An,b,O),vn._code=gt(vn,b),te.push(vn)):(Ft._code&An&&(vn=Xe(Ft,ht,An,b,O),vn._code=gt(vn,b),te.push(vn)),te.push(ht));m=te}return m}function gl(m,b){var O,te,de,Ce,Qe,st,ht,Ft,an;if(!m||m.length===0)throw new Error("latlngs not passed");I(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var An=fe([0,0]),vn=se(m),Kn=vn.getNorthWest().distanceTo(vn.getSouthWest())*vn.getNorthEast().distanceTo(vn.getNorthWest());Kn<1700&&(An=Vc(m));var _s=m.length,ea=[];for(O=0;O<_s;O++){var mi=fe(m[O]);ea.push(b.project(fe([mi.lat-An.lat,mi.lng-An.lng])))}for(st=ht=Ft=0,O=0,te=_s-1;O<_s;te=O++)de=ea[O],Ce=ea[te],Qe=de.y*Ce.x-Ce.y*de.x,ht+=(de.x+Ce.x)*Qe,Ft+=(de.y+Ce.y)*Qe,st+=Qe*3;st===0?an=ea[0]:an=[ht/st,Ft/st];var jo=b.unproject(J(an));return fe([jo.lat+An.lat,jo.lng+An.lng])}function Vc(m){for(var b=0,O=0,te=0,de=0;de<m.length;de++){var Ce=fe(m[de]);b+=Ce.lat,O+=Ce.lng,te++}return fe([b/te,O/te])}var vl={__proto__:null,clipPolygon:Hl,polygonCenter:gl,centroid:Vc};function xl(m,b){if(!b||!m.length)return m.slice();var O=b*b;return m=ye(m,O),m=zc(m,O),m}function Ql(m,b,O){return Math.sqrt(qt(m,b,O,!0))}function di(m,b,O){return qt(m,b,O)}function zc(m,b){var O=m.length,te=typeof Uint8Array<"u"?Uint8Array:Array,de=new te(O);de[0]=de[O-1]=1,X(m,de,b,0,O-1);var Ce,Qe=[];for(Ce=0;Ce<O;Ce++)de[Ce]&&Qe.push(m[Ce]);return Qe}function X(m,b,O,te,de){var Ce=0,Qe,st,ht;for(st=te+1;st<=de-1;st++)ht=qt(m[st],m[te],m[de],!0),ht>Ce&&(Qe=st,Ce=ht);Ce>O&&(b[Qe]=1,X(m,b,O,te,Qe),X(m,b,O,Qe,de))}function ye(m,b){for(var O=[m[0]],te=1,de=0,Ce=m.length;te<Ce;te++)Rt(m[te],m[de])>b&&(O.push(m[te]),de=te);return de<Ce-1&&O.push(m[Ce-1]),O}var Oe;function ze(m,b,O,te,de){var Ce=te?Oe:gt(m,O),Qe=gt(b,O),st,ht,Ft;for(Oe=Qe;;){if(!(Ce|Qe))return[m,b];if(Ce&Qe)return!1;st=Ce||Qe,ht=Xe(m,b,st,O,de),Ft=gt(ht,O),st===Ce?(m=ht,Ce=Ft):(b=ht,Qe=Ft)}}function Xe(m,b,O,te,de){var Ce=b.x-m.x,Qe=b.y-m.y,st=te.min,ht=te.max,Ft,an;return O&8?(Ft=m.x+Ce*(ht.y-m.y)/Qe,an=ht.y):O&4?(Ft=m.x+Ce*(st.y-m.y)/Qe,an=st.y):O&2?(Ft=ht.x,an=m.y+Qe*(ht.x-m.x)/Ce):O&1&&(Ft=st.x,an=m.y+Qe*(st.x-m.x)/Ce),new K(Ft,an,de)}function gt(m,b){var O=0;return m.x<b.min.x?O|=1:m.x>b.max.x&&(O|=2),m.y<b.min.y?O|=4:m.y>b.max.y&&(O|=8),O}function Rt(m,b){var O=b.x-m.x,te=b.y-m.y;return O*O+te*te}function qt(m,b,O,te){var de=b.x,Ce=b.y,Qe=O.x-de,st=O.y-Ce,ht=Qe*Qe+st*st,Ft;return ht>0&&(Ft=((m.x-de)*Qe+(m.y-Ce)*st)/ht,Ft>1?(de=O.x,Ce=O.y):Ft>0&&(de+=Qe*Ft,Ce+=st*Ft)),Qe=m.x-de,st=m.y-Ce,te?Qe*Qe+st*st:new K(de,Ce)}function I(m){return!D(m[0])||typeof m[0][0]!="object"&&typeof m[0][0]<"u"}function ae(m){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),I(m)}function Ae(m,b){var O,te,de,Ce,Qe,st,ht,Ft;if(!m||m.length===0)throw new Error("latlngs not passed");I(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var an=fe([0,0]),An=se(m),vn=An.getNorthWest().distanceTo(An.getSouthWest())*An.getNorthEast().distanceTo(An.getNorthWest());vn<1700&&(an=Vc(m));var Kn=m.length,_s=[];for(O=0;O<Kn;O++){var ea=fe(m[O]);_s.push(b.project(fe([ea.lat-an.lat,ea.lng-an.lng])))}for(O=0,te=0;O<Kn-1;O++)te+=_s[O].distanceTo(_s[O+1])/2;if(te===0)Ft=_s[0];else for(O=0,Ce=0;O<Kn-1;O++)if(Qe=_s[O],st=_s[O+1],de=Qe.distanceTo(st),Ce+=de,Ce>te){ht=(Ce-te)/de,Ft=[st.x-ht*(st.x-Qe.x),st.y-ht*(st.y-Qe.y)];break}var mi=b.unproject(J(Ft));return fe([mi.lat+an.lat,mi.lng+an.lng])}var Te={__proto__:null,simplify:xl,pointToSegmentDistance:Ql,closestPointOnSegment:di,clipSegment:ze,_getEdgeIntersection:Xe,_getBitCode:gt,_sqClosestPointOnSegment:qt,isFlat:I,_flat:ae,polylineCenter:Ae},We={project:function(m){return new K(m.lng,m.lat)},unproject:function(m){return new ie(m.y,m.x)},bounds:new ce([-180,-90],[180,90])},ot={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(m){var b=Math.PI/180,O=this.R,te=m.lat*b,de=this.R_MINOR/O,Ce=Math.sqrt(1-de*de),Qe=Ce*Math.sin(te),st=Math.tan(Math.PI/4-te/2)/Math.pow((1-Qe)/(1+Qe),Ce/2);return te=-O*Math.log(Math.max(st,1e-10)),new K(m.lng*b*O,te)},unproject:function(m){for(var b=180/Math.PI,O=this.R,te=this.R_MINOR/O,de=Math.sqrt(1-te*te),Ce=Math.exp(-m.y/O),Qe=Math.PI/2-2*Math.atan(Ce),st=0,ht=.1,Ft;st<15&&Math.abs(ht)>1e-7;st++)Ft=de*Math.sin(Qe),Ft=Math.pow((1-Ft)/(1+Ft),de/2),ht=Math.PI/2-2*Math.atan(Ce*Ft)-Qe,Qe+=ht;return new ie(Qe*b,m.x*b/O)}},Pt={__proto__:null,LonLat:We,Mercator:ot,SphericalMercator:ve},Rn=s({},ge,{code:"EPSG:3395",projection:ot,transformation:function(){var m=.5/(Math.PI*ot.R);return he(m,.5,-m,.5)}()}),yr=s({},ge,{code:"EPSG:4326",projection:We,transformation:he(1/180,1,-1/180,.5)}),Zn=s({},Se,{projection:We,transformation:he(1,0,-1,0),scale:function(m){return Math.pow(2,m)},zoom:function(m){return Math.log(m)/Math.LN2},distance:function(m,b){var O=b.lng-m.lng,te=b.lat-m.lat;return Math.sqrt(O*O+te*te)},infinite:!0});Se.Earth=ge,Se.EPSG3395=Rn,Se.EPSG3857=He,Se.EPSG900913=et,Se.EPSG4326=yr,Se.Simple=Zn;var lr=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(m){return m.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(m){return m&&m.removeLayer(this),this},getPane:function(m){return this._map.getPane(m?this.options[m]||m:this.options.pane)},addInteractiveTarget:function(m){return this._map._targets[l(m)]=this,this},removeInteractiveTarget:function(m){return delete this._map._targets[l(m)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(m){var b=m.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var O=this.getEvents();b.on(O,this),this.once("remove",function(){b.off(O,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});rr.include({addLayer:function(m){if(!m._layerAdd)throw new Error("The provided object is not a Layer.");var b=l(m);return this._layers[b]?this:(this._layers[b]=m,m._mapToAdd=this,m.beforeAdd&&m.beforeAdd(this),this.whenReady(m._layerAdd,m),this)},removeLayer:function(m){var b=l(m);return this._layers[b]?(this._loaded&&m.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:m}),m.fire("remove")),m._map=m._mapToAdd=null,this):this},hasLayer:function(m){return l(m)in this._layers},eachLayer:function(m,b){for(var O in this._layers)m.call(b,this._layers[O]);return this},_addLayers:function(m){m=m?D(m)?m:[m]:[];for(var b=0,O=m.length;b<O;b++)this.addLayer(m[b])},_addZoomLimit:function(m){(!isNaN(m.options.maxZoom)||!isNaN(m.options.minZoom))&&(this._zoomBoundLayers[l(m)]=m,this._updateZoomLevels())},_removeZoomLimit:function(m){var b=l(m);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var m=1/0,b=-1/0,O=this._getZoomSpan();for(var te in this._zoomBoundLayers){var de=this._zoomBoundLayers[te].options;m=de.minZoom===void 0?m:Math.min(m,de.minZoom),b=de.maxZoom===void 0?b:Math.max(b,de.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=m===1/0?void 0:m,O!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Or=lr.extend({initialize:function(m,b){x(this,b),this._layers={};var O,te;if(m)for(O=0,te=m.length;O<te;O++)this.addLayer(m[O])},addLayer:function(m){var b=this.getLayerId(m);return this._layers[b]=m,this._map&&this._map.addLayer(m),this},removeLayer:function(m){var b=m in this._layers?m:this.getLayerId(m);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(m){var b=typeof m=="number"?m:this.getLayerId(m);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(m){var b=Array.prototype.slice.call(arguments,1),O,te;for(O in this._layers)te=this._layers[O],te[m]&&te[m].apply(te,b);return this},onAdd:function(m){this.eachLayer(m.addLayer,m)},onRemove:function(m){this.eachLayer(m.removeLayer,m)},eachLayer:function(m,b){for(var O in this._layers)m.call(b,this._layers[O]);return this},getLayer:function(m){return this._layers[m]},getLayers:function(){var m=[];return this.eachLayer(m.push,m),m},setZIndex:function(m){return this.invoke("setZIndex",m)},getLayerId:function(m){return l(m)}}),Po=function(m,b){return new Or(m,b)},ts=Or.extend({addLayer:function(m){return this.hasLayer(m)?this:(m.addEventParent(this),Or.prototype.addLayer.call(this,m),this.fire("layeradd",{layer:m}))},removeLayer:function(m){return this.hasLayer(m)?(m in this._layers&&(m=this._layers[m]),m.removeEventParent(this),Or.prototype.removeLayer.call(this,m),this.fire("layerremove",{layer:m})):this},setStyle:function(m){return this.invoke("setStyle",m)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var m=new Z;for(var b in this._layers){var O=this._layers[b];m.extend(O.getBounds?O.getBounds():O.getLatLng())}return m}}),zi=function(m,b){return new ts(m,b)},Fi=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(m){x(this,m)},createIcon:function(m){return this._createIcon("icon",m)},createShadow:function(m){return this._createIcon("shadow",m)},_createIcon:function(m,b){var O=this._getIconUrl(m);if(!O){if(m==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var te=this._createImg(O,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(te,m),(this.options.crossOrigin||this.options.crossOrigin==="")&&(te.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),te},_setIconStyles:function(m,b){var O=this.options,te=O[b+"Size"];typeof te=="number"&&(te=[te,te]);var de=J(te),Ce=J(b==="shadow"&&O.shadowAnchor||O.iconAnchor||de&&de.divideBy(2,!0));m.className="leaflet-marker-"+b+" "+(O.className||""),Ce&&(m.style.marginLeft=-Ce.x+"px",m.style.marginTop=-Ce.y+"px"),de&&(m.style.width=de.x+"px",m.style.height=de.y+"px")},_createImg:function(m,b){return b=b||document.createElement("img"),b.src=m,b},_getIconUrl:function(m){return Yt.retina&&this.options[m+"RetinaUrl"]||this.options[m+"Url"]}});function Gc(m){return new Fi(m)}var Vl=Fi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(m){return typeof Vl.imagePath!="string"&&(Vl.imagePath=this._detectIconPath()),(this.options.imagePath||Vl.imagePath)+Fi.prototype._getIconUrl.call(this,m)},_stripUrl:function(m){var b=function(O,te,de){var Ce=te.exec(O);return Ce&&Ce[de]};return m=b(m,/^url\((['"])?(.+)\1\)$/,2),m&&b(m,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var m=Mn("div","leaflet-default-icon-path",document.body),b=Us(m,"background-image")||Us(m,"backgroundImage");if(document.body.removeChild(m),b=this._stripUrl(b),b)return b;var O=document.querySelector('link[href$="leaflet.css"]');return O?O.href.substring(0,O.href.length-11-1):""}}),qc=Ia.extend({initialize:function(m){this._marker=m},addHooks:function(){var m=this._marker._icon;this._draggable||(this._draggable=new Ii(m,m,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Vn(m,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(m){var b=this._marker,O=b._map,te=this._marker.options.autoPanSpeed,de=this._marker.options.autoPanPadding,Ce=li(b._icon),Qe=O.getPixelBounds(),st=O.getPixelOrigin(),ht=Q(Qe.min._subtract(st).add(de),Qe.max._subtract(st).subtract(de));if(!ht.contains(Ce)){var Ft=J((Math.max(ht.max.x,Ce.x)-ht.max.x)/(Qe.max.x-ht.max.x)-(Math.min(ht.min.x,Ce.x)-ht.min.x)/(Qe.min.x-ht.min.x),(Math.max(ht.max.y,Ce.y)-ht.max.y)/(Qe.max.y-ht.max.y)-(Math.min(ht.min.y,Ce.y)-ht.min.y)/(Qe.min.y-ht.min.y)).multiplyBy(te);O.panBy(Ft,{animate:!1}),this._draggable._newPos._add(Ft),this._draggable._startPos._add(Ft),Dn(b._icon,this._draggable._newPos),this._onDrag(m),this._panRequest=M(this._adjustPan.bind(this,m))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(m){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,m)))},_onDrag:function(m){var b=this._marker,O=b._shadow,te=li(b._icon),de=b._map.layerPointToLatLng(te);O&&Dn(O,te),b._latlng=de,m.latlng=de,m.oldLatLng=this._oldLatLng,b.fire("move",m).fire("drag",m)},_onDragEnd:function(m){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",m)}}),Vs=lr.extend({options:{icon:new Vl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(m,b){x(this,b),this._latlng=fe(m)},onAdd:function(m){this._zoomAnimated=this._zoomAnimated&&m.options.markerZoomAnimation,this._zoomAnimated&&m.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(m){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&m.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(m){var b=this._latlng;return this._latlng=fe(m),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(m){return this.options.zIndexOffset=m,this.update()},getIcon:function(){return this.options.icon},setIcon:function(m){return this.options.icon=m,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var m=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(m)}return this},_initIcon:function(){var m=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),O=m.icon.createIcon(this._icon),te=!1;O!==this._icon&&(this._icon&&this._removeIcon(),te=!0,m.title&&(O.title=m.title),O.tagName==="IMG"&&(O.alt=m.alt||"")),Vn(O,b),m.keyboard&&(O.tabIndex="0",O.setAttribute("role","button")),this._icon=O,m.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bn(O,"focus",this._panOnFocus,this);var de=m.icon.createShadow(this._shadow),Ce=!1;de!==this._shadow&&(this._removeShadow(),Ce=!0),de&&(Vn(de,b),de.alt=""),this._shadow=de,m.opacity<1&&this._updateOpacity(),te&&this.getPane().appendChild(this._icon),this._initInteraction(),de&&Ce&&this.getPane(m.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ir(this._icon,"focus",this._panOnFocus,this),Un(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Un(this._shadow),this._shadow=null},_setPos:function(m){this._icon&&Dn(this._icon,m),this._shadow&&Dn(this._shadow,m),this._zIndex=m.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(m){this._icon&&(this._icon.style.zIndex=this._zIndex+m)},_animateZoom:function(m){var b=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(Vn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qc)){var m=this.options.draggable;this.dragging&&(m=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qc(this),m&&this.dragging.enable()}},setOpacity:function(m){return this.options.opacity=m,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var m=this.options.opacity;this._icon&&is(this._icon,m),this._shadow&&is(this._shadow,m)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var m=this._map;if(m){var b=this.options.icon.options,O=b.iconSize?J(b.iconSize):J(0,0),te=b.iconAnchor?J(b.iconAnchor):J(0,0);m.panInside(this._latlng,{paddingTopLeft:te,paddingBottomRight:O.subtract(te)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Kc(m,b){return new Vs(m,b)}var Gi=lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(m){this._renderer=m.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(m){return x(this,m),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&m&&Object.prototype.hasOwnProperty.call(m,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zl=Gi.extend({options:{fill:!0,radius:10},initialize:function(m,b){x(this,b),this._latlng=fe(m),this._radius=this.options.radius},setLatLng:function(m){var b=this._latlng;return this._latlng=fe(m),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(m){return this.options.radius=this._radius=m,this.redraw()},getRadius:function(){return this._radius},setStyle:function(m){var b=m&&m.radius||this._radius;return Gi.prototype.setStyle.call(this,m),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var m=this._radius,b=this._radiusY||m,O=this._clickTolerance(),te=[m+O,b+O];this._pxBounds=new ce(this._point.subtract(te),this._point.add(te))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(m){return m.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function td(m,b){return new zl(m,b)}var Ai=zl.extend({initialize:function(m,b,O){if(typeof b=="number"&&(b=s({},O,{radius:b})),x(this,b),this._latlng=fe(m),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(m){return this._mRadius=m,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var m=[this._radius,this._radiusY||this._radius];return new Z(this._map.layerPointToLatLng(this._point.subtract(m)),this._map.layerPointToLatLng(this._point.add(m)))},setStyle:Gi.prototype.setStyle,_project:function(){var m=this._latlng.lng,b=this._latlng.lat,O=this._map,te=O.options.crs;if(te.distance===ge.distance){var de=Math.PI/180,Ce=this._mRadius/ge.R/de,Qe=O.project([b+Ce,m]),st=O.project([b-Ce,m]),ht=Qe.add(st).divideBy(2),Ft=O.unproject(ht).lat,an=Math.acos((Math.cos(Ce*de)-Math.sin(b*de)*Math.sin(Ft*de))/(Math.cos(b*de)*Math.cos(Ft*de)))/de;(isNaN(an)||an===0)&&(an=Ce/Math.cos(Math.PI/180*b)),this._point=ht.subtract(O.getPixelOrigin()),this._radius=isNaN(an)?0:ht.x-O.project([Ft,m-an]).x,this._radiusY=ht.y-Qe.y}else{var An=te.unproject(te.project(this._latlng).subtract([this._mRadius,0]));this._point=O.latLngToLayerPoint(this._latlng),this._radius=this._point.x-O.latLngToLayerPoint(An).x}this._updateBounds()}});function hh(m,b,O){return new Ai(m,b,O)}var po=Gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(m,b){x(this,b),this._setLatLngs(m)},getLatLngs:function(){return this._latlngs},setLatLngs:function(m){return this._setLatLngs(m),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(m){for(var b=1/0,O=null,te=qt,de,Ce,Qe=0,st=this._parts.length;Qe<st;Qe++)for(var ht=this._parts[Qe],Ft=1,an=ht.length;Ft<an;Ft++){de=ht[Ft-1],Ce=ht[Ft];var An=te(m,de,Ce,!0);An<b&&(b=An,O=te(m,de,Ce))}return O&&(O.distance=Math.sqrt(b)),O},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ae(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(m,b){return b=b||this._defaultShape(),m=fe(m),b.push(m),this._bounds.extend(m),this.redraw()},_setLatLngs:function(m){this._bounds=new Z,this._latlngs=this._convertLatLngs(m)},_defaultShape:function(){return I(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(m){for(var b=[],O=I(m),te=0,de=m.length;te<de;te++)O?(b[te]=fe(m[te]),this._bounds.extend(b[te])):b[te]=this._convertLatLngs(m[te]);return b},_project:function(){var m=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,m),this._bounds.isValid()&&m.isValid()&&(this._rawPxBounds=m,this._updateBounds())},_updateBounds:function(){var m=this._clickTolerance(),b=new K(m,m);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(m,b,O){var te=m[0]instanceof ie,de=m.length,Ce,Qe;if(te){for(Qe=[],Ce=0;Ce<de;Ce++)Qe[Ce]=this._map.latLngToLayerPoint(m[Ce]),O.extend(Qe[Ce]);b.push(Qe)}else for(Ce=0;Ce<de;Ce++)this._projectLatlngs(m[Ce],b,O)},_clipPoints:function(){var m=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(m))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,O,te,de,Ce,Qe,st,ht;for(O=0,de=0,Ce=this._rings.length;O<Ce;O++)for(ht=this._rings[O],te=0,Qe=ht.length;te<Qe-1;te++)st=ze(ht[te],ht[te+1],m,te,!0),st&&(b[de]=b[de]||[],b[de].push(st[0]),(st[1]!==ht[te+1]||te===Qe-2)&&(b[de].push(st[1]),de++))}},_simplifyPoints:function(){for(var m=this._parts,b=this.options.smoothFactor,O=0,te=m.length;O<te;O++)m[O]=xl(m[O],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(m,b){var O,te,de,Ce,Qe,st,ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(O=0,Ce=this._parts.length;O<Ce;O++)for(st=this._parts[O],te=0,Qe=st.length,de=Qe-1;te<Qe;de=te++)if(!(!b&&te===0)&&Ql(m,st[de],st[te])<=ht)return!0;return!1}});function OA(m,b){return new po(m,b)}po._flat=ae;var qa=po.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(m){var b=po.prototype._convertLatLngs.call(this,m),O=b.length;return O>=2&&b[0]instanceof ie&&b[0].equals(b[O-1])&&b.pop(),b},_setLatLngs:function(m){po.prototype._setLatLngs.call(this,m),I(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return I(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var m=this._renderer._bounds,b=this.options.weight,O=new K(b,b);if(m=new ce(m.min.subtract(O),m.max.add(O)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(m))){if(this.options.noClip){this._parts=this._rings;return}for(var te=0,de=this._rings.length,Ce;te<de;te++)Ce=Hl(this._rings[te],m,!0),Ce.length&&this._parts.push(Ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(m){var b=!1,O,te,de,Ce,Qe,st,ht,Ft;if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(Ce=0,ht=this._parts.length;Ce<ht;Ce++)for(O=this._parts[Ce],Qe=0,Ft=O.length,st=Ft-1;Qe<Ft;st=Qe++)te=O[Qe],de=O[st],te.y>m.y!=de.y>m.y&&m.x<(de.x-te.x)*(m.y-te.y)/(de.y-te.y)+te.x&&(b=!b);return b||po.prototype._containsPoint.call(this,m,!0)}});function Fa(m,b){return new qa(m,b)}var fi=ts.extend({initialize:function(m,b){x(this,b),this._layers={},m&&this.addData(m)},addData:function(m){var b=D(m)?m:m.features,O,te,de;if(b){for(O=0,te=b.length;O<te;O++)de=b[O],(de.geometries||de.geometry||de.features||de.coordinates)&&this.addData(de);return this}var Ce=this.options;if(Ce.filter&&!Ce.filter(m))return this;var Qe=$c(m,Ce);return Qe?(Qe.feature=qi(m),Qe.defaultOptions=Qe.options,this.resetStyle(Qe),Ce.onEachFeature&&Ce.onEachFeature(m,Qe),this.addLayer(Qe)):this},resetStyle:function(m){return m===void 0?this.eachLayer(this.resetStyle,this):(m.options=s({},m.defaultOptions),this._setLayerStyle(m,this.options.style),this)},setStyle:function(m){return this.eachLayer(function(b){this._setLayerStyle(b,m)},this)},_setLayerStyle:function(m,b){m.setStyle&&(typeof b=="function"&&(b=b(m.feature)),m.setStyle(b))}});function $c(m,b){var O=m.type==="Feature"?m.geometry:m,te=O?O.coordinates:null,de=[],Ce=b&&b.pointToLayer,Qe=b&&b.coordsToLatLng||ql,st,ht,Ft,an;if(!te&&!O)return null;switch(O.type){case"Point":return st=Qe(te),Gl(Ce,m,st,b);case"MultiPoint":for(Ft=0,an=te.length;Ft<an;Ft++)st=Qe(te[Ft]),de.push(Gl(Ce,m,st,b));return new ts(de);case"LineString":case"MultiLineString":return ht=Da(te,O.type==="LineString"?0:1,Qe),new po(ht,b);case"Polygon":case"MultiPolygon":return ht=Da(te,O.type==="Polygon"?1:2,Qe),new qa(ht,b);case"GeometryCollection":for(Ft=0,an=O.geometries.length;Ft<an;Ft++){var An=$c({geometry:O.geometries[Ft],type:"Feature",properties:m.properties},b);An&&de.push(An)}return new ts(de);case"FeatureCollection":for(Ft=0,an=O.features.length;Ft<an;Ft++){var vn=$c(O.features[Ft],b);vn&&de.push(vn)}return new ts(de);default:throw new Error("Invalid GeoJSON object.")}}function Gl(m,b,O,te){return m?m(b,O):new Vs(O,te&&te.markersInheritOptions&&te)}function ql(m){return new ie(m[1],m[0],m[2])}function Da(m,b,O){for(var te=[],de=0,Ce=m.length,Qe;de<Ce;de++)Qe=b?Da(m[de],b-1,O):(O||ql)(m[de]),te.push(Qe);return te}function pa(m,b){return m=fe(m),m.alt!==void 0?[p(m.lng,b),p(m.lat,b),p(m.alt,b)]:[p(m.lng,b),p(m.lat,b)]}function yl(m,b,O,te){for(var de=[],Ce=0,Qe=m.length;Ce<Qe;Ce++)de.push(b?yl(m[Ce],I(m[Ce])?0:b-1,O,te):pa(m[Ce],te));return!b&&O&&de.length>0&&de.push(de[0].slice()),de}function ga(m,b){return m.feature?s({},m.feature,{geometry:b}):qi(b)}function qi(m){return m.type==="Feature"||m.type==="FeatureCollection"?m:{type:"Feature",properties:{},geometry:m}}var Mo={toGeoJSON:function(m){return ga(this,{type:"Point",coordinates:pa(this.getLatLng(),m)})}};Vs.include(Mo),Ai.include(Mo),zl.include(Mo),po.include({toGeoJSON:function(m){var b=!I(this._latlngs),O=yl(this._latlngs,b?1:0,!1,m);return ga(this,{type:(b?"Multi":"")+"LineString",coordinates:O})}}),qa.include({toGeoJSON:function(m){var b=!I(this._latlngs),O=b&&!I(this._latlngs[0]),te=yl(this._latlngs,O?2:b?1:0,!0,m);return b||(te=[te]),ga(this,{type:(O?"Multi":"")+"Polygon",coordinates:te})}}),Or.include({toMultiPoint:function(m){var b=[];return this.eachLayer(function(O){b.push(O.toGeoJSON(m).geometry.coordinates)}),ga(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(m){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(m);var O=b==="GeometryCollection",te=[];return this.eachLayer(function(de){if(de.toGeoJSON){var Ce=de.toGeoJSON(m);if(O)te.push(Ce.geometry);else{var Qe=qi(Ce);Qe.type==="FeatureCollection"?te.push.apply(te,Qe.features):te.push(Qe)}}}),O?ga(this,{geometries:te,type:"GeometryCollection"}):{type:"FeatureCollection",features:te}}});function Uo(m,b){return new fi(m,b)}var zs=Uo,Ki=lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(m,b,O){this._url=m,this._bounds=se(b),x(this,O)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Vn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Un(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(m){return this.options.opacity=m,this._image&&this._updateOpacity(),this},setStyle:function(m){return m.opacity&&this.setOpacity(m.opacity),this},bringToFront:function(){return this._map&&lo(this._image),this},bringToBack:function(){return this._map&&Al(this._image),this},setUrl:function(m){return this._url=m,this._image&&(this._image.src=m),this},setBounds:function(m){return this._bounds=se(m),this._map&&this._reset(),this},getEvents:function(){var m={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var m=this._url.tagName==="IMG",b=this._image=m?this._url:Mn("img");if(Vn(b,"leaflet-image-layer"),this._zoomAnimated&&Vn(b,"leaflet-zoom-animated"),this.options.className&&Vn(b,this.options.className),b.onselectstart=h,b.onmousemove=h,b.onload=i(this.fire,this,"load"),b.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),m){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(m){var b=this._map.getZoomScale(m.zoom),O=this._map._latLngBoundsToNewLayerBounds(this._bounds,m.zoom,m.center).min;Ba(this._image,O,b)},_reset:function(){var m=this._image,b=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),O=b.getSize();Dn(m,b.min),m.style.width=O.x+"px",m.style.height=O.y+"px"},_updateOpacity:function(){is(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var m=this.options.errorOverlayUrl;m&&this._url!==m&&(this._url=m,this._image.src=m)},getCenter:function(){return this._bounds.getCenter()}}),ca=function(m,b,O){return new Ki(m,b,O)},Di=Ki.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var m=this._url.tagName==="VIDEO",b=this._image=m?this._url:Mn("video");if(Vn(b,"leaflet-image-layer"),this._zoomAnimated&&Vn(b,"leaflet-zoom-animated"),this.options.className&&Vn(b,this.options.className),b.onselectstart=h,b.onmousemove=h,b.onloadeddata=i(this.fire,this,"load"),m){for(var O=b.getElementsByTagName("source"),te=[],de=0;de<O.length;de++)te.push(O[de].src);this._url=O.length>0?te:[b.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var Ce=0;Ce<this._url.length;Ce++){var Qe=Mn("source");Qe.src=this._url[Ce],b.appendChild(Qe)}}});function Su(m,b,O){return new Di(m,b,O)}var wl=Ki.extend({_initImage:function(){var m=this._image=this._url;Vn(m,"leaflet-image-layer"),this._zoomAnimated&&Vn(m,"leaflet-zoom-animated"),this.options.className&&Vn(m,this.options.className),m.onselectstart=h,m.onmousemove=h}});function nd(m,b,O){return new wl(m,b,O)}var Ka=lr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(m,b){m&&(m instanceof ie||D(m))?(this._latlng=fe(m),x(this,b)):(x(this,m),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(m){return m=arguments.length?m:this._source._map,m.hasLayer(this)||m.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(m){return this._map?this.close():(arguments.length?this._source=m:m=this._source,this._prepareOpen(),this.openOn(m._map)),this},onAdd:function(m){this._zoomAnimated=m._zoomAnimated,this._container||this._initLayout(),m._fadeAnimated&&is(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),m._fadeAnimated&&is(this._container,1),this.bringToFront(),this.options.interactive&&(Vn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(m){m._fadeAnimated?(is(this._container,0),this._removeTimeout=setTimeout(i(Un,void 0,this._container),200)):Un(this._container),this.options.interactive&&(xr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(m){return this._latlng=fe(m),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(m){return this._content=m,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var m={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lo(this._container),this},bringToBack:function(){return this._map&&Al(this._container),this},_prepareOpen:function(m){var b=this._source;if(!b._map)return!1;if(b instanceof ts){b=null;var O=this._source._layers;for(var te in O)if(O[te]._map){b=O[te];break}if(!b)return!1;this._source=b}if(!m)if(b.getCenter)m=b.getCenter();else if(b.getLatLng)m=b.getLatLng();else if(b.getBounds)m=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(m),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var m=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")m.innerHTML=b;else{for(;m.hasChildNodes();)m.removeChild(m.firstChild);m.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var m=this._map.latLngToLayerPoint(this._latlng),b=J(this.options.offset),O=this._getAnchor();this._zoomAnimated?Dn(this._container,m.add(O)):b=b.add(m).add(O);var te=this._containerBottom=-b.y,de=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=te+"px",this._container.style.left=de+"px"}},_getAnchor:function(){return[0,0]}});rr.include({_initOverlay:function(m,b,O,te){var de=b;return de instanceof m||(de=new m(te).setContent(b)),O&&de.setLatLng(O),de}}),lr.include({_initOverlay:function(m,b,O,te){var de=O;return de instanceof m?(x(de,te),de._source=this):(de=b&&!te?b:new m(te,this),de.setContent(O)),de}});var bl=Ka.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(m){return m=arguments.length?m:this._source._map,!m.hasLayer(this)&&m._popup&&m._popup.options.autoClose&&m.removeLayer(m._popup),m._popup=this,Ka.prototype.openOn.call(this,m)},onAdd:function(m){Ka.prototype.onAdd.call(this,m),m.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gi||this._source.on("preclick",ui))},onRemove:function(m){Ka.prototype.onRemove.call(this,m),m.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gi||this._source.off("preclick",ui))},getEvents:function(){var m=Ka.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(m.preclick=this.close),this.options.keepInView&&(m.moveend=this._adjustPan),m},_initLayout:function(){var m="leaflet-popup",b=this._container=Mn("div",m+" "+(this.options.className||"")+" leaflet-zoom-animated"),O=this._wrapper=Mn("div",m+"-content-wrapper",b);if(this._contentNode=Mn("div",m+"-content",O),ml(b),fo(this._contentNode),bn(b,"contextmenu",ui),this._tipContainer=Mn("div",m+"-tip-container",b),this._tip=Mn("div",m+"-tip",this._tipContainer),this.options.closeButton){var te=this._closeButton=Mn("a",m+"-close-button",b);te.setAttribute("role","button"),te.setAttribute("aria-label","Close popup"),te.href="#close",te.innerHTML='<span aria-hidden="true">&#215;</span>',bn(te,"click",function(de){Wr(de),this.close()},this)}},_updateLayout:function(){var m=this._contentNode,b=m.style;b.width="",b.whiteSpace="nowrap";var O=m.offsetWidth;O=Math.min(O,this.options.maxWidth),O=Math.max(O,this.options.minWidth),b.width=O+1+"px",b.whiteSpace="",b.height="";var te=m.offsetHeight,de=this.options.maxHeight,Ce="leaflet-popup-scrolled";de&&te>de?(b.height=de+"px",Vn(m,Ce)):xr(m,Ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(m){var b=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center),O=this._getAnchor();Dn(this._container,b.add(O))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var m=this._map,b=parseInt(Us(this._container,"marginBottom"),10)||0,O=this._container.offsetHeight+b,te=this._containerWidth,de=new K(this._containerLeft,-O-this._containerBottom);de._add(li(this._container));var Ce=m.layerPointToContainerPoint(de),Qe=J(this.options.autoPanPadding),st=J(this.options.autoPanPaddingTopLeft||Qe),ht=J(this.options.autoPanPaddingBottomRight||Qe),Ft=m.getSize(),an=0,An=0;Ce.x+te+ht.x>Ft.x&&(an=Ce.x+te-Ft.x+ht.x),Ce.x-an-st.x<0&&(an=Ce.x-st.x),Ce.y+O+ht.y>Ft.y&&(An=Ce.y+O-Ft.y+ht.y),Ce.y-An-st.y<0&&(An=Ce.y-st.y),(an||An)&&(this.options.keepInView&&(this._autopanning=!0),m.fire("autopanstart").panBy([an,An]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Wc=function(m,b){return new bl(m,b)};rr.mergeOptions({closePopupOnClick:!0}),rr.include({openPopup:function(m,b,O){return this._initOverlay(bl,m,b,O).openOn(this),this},closePopup:function(m){return m=arguments.length?m:this._popup,m&&m.close(),this}}),lr.include({bindPopup:function(m,b){return this._popup=this._initOverlay(bl,this._popup,m,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(m){return this._popup&&(this instanceof ts||(this._popup._source=this),this._popup._prepareOpen(m||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(m){return this._popup&&this._popup.setContent(m),this},getPopup:function(){return this._popup},_openPopup:function(m){if(!(!this._popup||!this._map)){Qs(m);var b=m.layer||m.target;if(this._popup._source===b&&!(b instanceof Gi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(m.latlng);return}this._popup._source=b,this.openPopup(m.latlng)}},_movePopup:function(m){this._popup.setLatLng(m.latlng)},_onKeyPress:function(m){m.originalEvent.keyCode===13&&this._openPopup(m)}});var Kl=Ka.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(m){Ka.prototype.onAdd.call(this,m),this.setOpacity(this.options.opacity),m.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(m){Ka.prototype.onRemove.call(this,m),m.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var m=Ka.prototype.getEvents.call(this);return this.options.permanent||(m.preclick=this.close),m},_initLayout:function(){var m="leaflet-tooltip",b=m+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Mn("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(m){var b,O,te=this._map,de=this._container,Ce=te.latLngToContainerPoint(te.getCenter()),Qe=te.layerPointToContainerPoint(m),st=this.options.direction,ht=de.offsetWidth,Ft=de.offsetHeight,an=J(this.options.offset),An=this._getAnchor();st==="top"?(b=ht/2,O=Ft):st==="bottom"?(b=ht/2,O=0):st==="center"?(b=ht/2,O=Ft/2):st==="right"?(b=0,O=Ft/2):st==="left"?(b=ht,O=Ft/2):Qe.x<Ce.x?(st="right",b=0,O=Ft/2):(st="left",b=ht+(an.x+An.x)*2,O=Ft/2),m=m.subtract(J(b,O,!0)).add(an).add(An),xr(de,"leaflet-tooltip-right"),xr(de,"leaflet-tooltip-left"),xr(de,"leaflet-tooltip-top"),xr(de,"leaflet-tooltip-bottom"),Vn(de,"leaflet-tooltip-"+st),Dn(de,m)},_updatePosition:function(){var m=this._map.latLngToLayerPoint(this._latlng);this._setPosition(m)},setOpacity:function(m){this.options.opacity=m,this._container&&is(this._container,m)},_animateZoom:function(m){var b=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center);this._setPosition(b)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),rd=function(m,b){return new Kl(m,b)};rr.include({openTooltip:function(m,b,O){return this._initOverlay(Kl,m,b,O).openOn(this),this},closeTooltip:function(m){return m.close(),this}}),lr.include({bindTooltip:function(m,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Kl,this._tooltip,m,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(m){if(!(!m&&this._tooltipHandlersAdded)){var b=m?"off":"on",O={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?O.add=this._openTooltip:(O.mouseover=this._openTooltip,O.mouseout=this.closeTooltip,O.click=this._openTooltip,this._map?this._addFocusListeners():O.add=this._addFocusListeners),this._tooltip.options.sticky&&(O.mousemove=this._moveTooltip),this[b](O),this._tooltipHandlersAdded=!m}},openTooltip:function(m){return this._tooltip&&(this instanceof ts||(this._tooltip._source=this),this._tooltip._prepareOpen(m)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(m){return this._tooltip&&this._tooltip.setContent(m),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(m){var b=typeof m.getElement=="function"&&m.getElement();b&&(bn(b,"focus",function(){this._tooltip._source=m,this.openTooltip()},this),bn(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(m){var b=typeof m.getElement=="function"&&m.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(m){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(m)});return}this._tooltip._source=m.layer||m.target,this.openTooltip(this._tooltip.options.sticky?m.latlng:void 0)}},_moveTooltip:function(m){var b=m.latlng,O,te;this._tooltip.options.sticky&&m.originalEvent&&(O=this._map.mouseEventToContainerPoint(m.originalEvent),te=this._map.containerPointToLayerPoint(O),b=this._map.layerPointToLatLng(te)),this._tooltip.setLatLng(b)}});var Ac=Fi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(m){var b=m&&m.tagName==="DIV"?m:document.createElement("div"),O=this.options;if(O.html instanceof Element?(Js(b),b.appendChild(O.html)):b.innerHTML=O.html!==!1?O.html:"",O.bgPos){var te=J(O.bgPos);b.style.backgroundPosition=-te.x+"px "+-te.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function fc(m){return new Ac(m)}Fi.Default=Vl;var _l=lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Yt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(m){x(this,m)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(m){m._addZoomLimit(this)},onRemove:function(m){this._removeAllTiles(),Un(this._container),m._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Al(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(m){return this.options.opacity=m,this._updateOpacity(),this},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var m=this._clampZoom(this._map.getZoom());m!==this._tileZoom&&(this._tileZoom=m,this._updateLevels()),this._update()}return this},getEvents:function(){var m={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),m.move=this._onMove),this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},createTile:function(){return document.createElement("div")},getTileSize:function(){var m=this.options.tileSize;return m instanceof K?m:new K(m,m)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(m){for(var b=this.getPane().children,O=-m(-1/0,1/0),te=0,de=b.length,Ce;te<de;te++)Ce=b[te].style.zIndex,b[te]!==this._container&&Ce&&(O=m(O,+Ce));isFinite(O)&&(this.options.zIndex=O+m(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Yt.ielt9){is(this._container,this.options.opacity);var m=+new Date,b=!1,O=!1;for(var te in this._tiles){var de=this._tiles[te];if(!(!de.current||!de.loaded)){var Ce=Math.min(1,(m-de.loaded)/200);is(de.el,Ce),Ce<1?b=!0:(de.active?O=!0:this._onOpaqueTile(de),de.active=!0)}}O&&!this._noPrune&&this._pruneTiles(),b&&(U(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Mn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var m=this._tileZoom,b=this.options.maxZoom;if(m!==void 0){for(var O in this._levels)O=Number(O),this._levels[O].el.children.length||O===m?(this._levels[O].el.style.zIndex=b-Math.abs(m-O),this._onUpdateLevel(O)):(Un(this._levels[O].el),this._removeTilesAtZoom(O),this._onRemoveLevel(O),delete this._levels[O]);var te=this._levels[m],de=this._map;return te||(te=this._levels[m]={},te.el=Mn("div","leaflet-tile-container leaflet-zoom-animated",this._container),te.el.style.zIndex=b,te.origin=de.project(de.unproject(de.getPixelOrigin()),m).round(),te.zoom=m,this._setZoomTransform(te,de.getCenter(),de.getZoom()),h(te.el.offsetWidth),this._onCreateLevel(te)),this._level=te,te}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var m,b,O=this._map.getZoom();if(O>this.options.maxZoom||O<this.options.minZoom){this._removeAllTiles();return}for(m in this._tiles)b=this._tiles[m],b.retain=b.current;for(m in this._tiles)if(b=this._tiles[m],b.current&&!b.active){var te=b.coords;this._retainParent(te.x,te.y,te.z,te.z-5)||this._retainChildren(te.x,te.y,te.z,te.z+2)}for(m in this._tiles)this._tiles[m].retain||this._removeTile(m)}},_removeTilesAtZoom:function(m){for(var b in this._tiles)this._tiles[b].coords.z===m&&this._removeTile(b)},_removeAllTiles:function(){for(var m in this._tiles)this._removeTile(m)},_invalidateAll:function(){for(var m in this._levels)Un(this._levels[m].el),this._onRemoveLevel(Number(m)),delete this._levels[m];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(m,b,O,te){var de=Math.floor(m/2),Ce=Math.floor(b/2),Qe=O-1,st=new K(+de,+Ce);st.z=+Qe;var ht=this._tileCoordsToKey(st),Ft=this._tiles[ht];return Ft&&Ft.active?(Ft.retain=!0,!0):(Ft&&Ft.loaded&&(Ft.retain=!0),Qe>te?this._retainParent(de,Ce,Qe,te):!1)},_retainChildren:function(m,b,O,te){for(var de=2*m;de<2*m+2;de++)for(var Ce=2*b;Ce<2*b+2;Ce++){var Qe=new K(de,Ce);Qe.z=O+1;var st=this._tileCoordsToKey(Qe),ht=this._tiles[st];if(ht&&ht.active){ht.retain=!0;continue}else ht&&ht.loaded&&(ht.retain=!0);O+1<te&&this._retainChildren(de,Ce,O+1,te)}},_resetView:function(m){var b=m&&(m.pinch||m.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(m){this._setView(m.center,m.zoom,!0,m.noUpdate)},_clampZoom:function(m){var b=this.options;return b.minNativeZoom!==void 0&&m<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<m?b.maxNativeZoom:m},_setView:function(m,b,O,te){var de=Math.round(b);this.options.maxZoom!==void 0&&de>this.options.maxZoom||this.options.minZoom!==void 0&&de<this.options.minZoom?de=void 0:de=this._clampZoom(de);var Ce=this.options.updateWhenZooming&&de!==this._tileZoom;(!te||Ce)&&(this._tileZoom=de,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),de!==void 0&&this._update(m),O||this._pruneTiles(),this._noPrune=!!O),this._setZoomTransforms(m,b)},_setZoomTransforms:function(m,b){for(var O in this._levels)this._setZoomTransform(this._levels[O],m,b)},_setZoomTransform:function(m,b,O){var te=this._map.getZoomScale(O,m.zoom),de=m.origin.multiplyBy(te).subtract(this._map._getNewPixelOrigin(b,O)).round();Yt.any3d?Ba(m.el,de,te):Dn(m.el,de)},_resetGrid:function(){var m=this._map,b=m.options.crs,O=this._tileSize=this.getTileSize(),te=this._tileZoom,de=this._map.getPixelWorldBounds(this._tileZoom);de&&(this._globalTileRange=this._pxBoundsToTileRange(de)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(m.project([0,b.wrapLng[0]],te).x/O.x),Math.ceil(m.project([0,b.wrapLng[1]],te).x/O.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(m.project([b.wrapLat[0],0],te).y/O.x),Math.ceil(m.project([b.wrapLat[1],0],te).y/O.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(m){var b=this._map,O=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),te=b.getZoomScale(O,this._tileZoom),de=b.project(m,this._tileZoom).floor(),Ce=b.getSize().divideBy(te*2);return new ce(de.subtract(Ce),de.add(Ce))},_update:function(m){var b=this._map;if(b){var O=this._clampZoom(b.getZoom());if(m===void 0&&(m=b.getCenter()),this._tileZoom!==void 0){var te=this._getTiledPixelBounds(m),de=this._pxBoundsToTileRange(te),Ce=de.getCenter(),Qe=[],st=this.options.keepBuffer,ht=new ce(de.getBottomLeft().subtract([st,-st]),de.getTopRight().add([st,-st]));if(!(isFinite(de.min.x)&&isFinite(de.min.y)&&isFinite(de.max.x)&&isFinite(de.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ft in this._tiles){var an=this._tiles[Ft].coords;(an.z!==this._tileZoom||!ht.contains(new K(an.x,an.y)))&&(this._tiles[Ft].current=!1)}if(Math.abs(O-this._tileZoom)>1){this._setView(m,O);return}for(var An=de.min.y;An<=de.max.y;An++)for(var vn=de.min.x;vn<=de.max.x;vn++){var Kn=new K(vn,An);if(Kn.z=this._tileZoom,!!this._isValidTile(Kn)){var _s=this._tiles[this._tileCoordsToKey(Kn)];_s?_s.current=!0:Qe.push(Kn)}}if(Qe.sort(function(mi,jo){return mi.distanceTo(Ce)-jo.distanceTo(Ce)}),Qe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ea=document.createDocumentFragment();for(vn=0;vn<Qe.length;vn++)this._addTile(Qe[vn],ea);this._level.el.appendChild(ea)}}}},_isValidTile:function(m){var b=this._map.options.crs;if(!b.infinite){var O=this._globalTileRange;if(!b.wrapLng&&(m.x<O.min.x||m.x>O.max.x)||!b.wrapLat&&(m.y<O.min.y||m.y>O.max.y))return!1}if(!this.options.bounds)return!0;var te=this._tileCoordsToBounds(m);return se(this.options.bounds).overlaps(te)},_keyToBounds:function(m){return this._tileCoordsToBounds(this._keyToTileCoords(m))},_tileCoordsToNwSe:function(m){var b=this._map,O=this.getTileSize(),te=m.scaleBy(O),de=te.add(O),Ce=b.unproject(te,m.z),Qe=b.unproject(de,m.z);return[Ce,Qe]},_tileCoordsToBounds:function(m){var b=this._tileCoordsToNwSe(m),O=new Z(b[0],b[1]);return this.options.noWrap||(O=this._map.wrapLatLngBounds(O)),O},_tileCoordsToKey:function(m){return m.x+":"+m.y+":"+m.z},_keyToTileCoords:function(m){var b=m.split(":"),O=new K(+b[0],+b[1]);return O.z=+b[2],O},_removeTile:function(m){var b=this._tiles[m];b&&(Un(b.el),delete this._tiles[m],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(m)}))},_initTile:function(m){Vn(m,"leaflet-tile");var b=this.getTileSize();m.style.width=b.x+"px",m.style.height=b.y+"px",m.onselectstart=h,m.onmousemove=h,Yt.ielt9&&this.options.opacity<1&&is(m,this.options.opacity)},_addTile:function(m,b){var O=this._getTilePos(m),te=this._tileCoordsToKey(m),de=this.createTile(this._wrapCoords(m),i(this._tileReady,this,m));this._initTile(de),this.createTile.length<2&&M(i(this._tileReady,this,m,null,de)),Dn(de,O),this._tiles[te]={el:de,coords:m,current:!0},b.appendChild(de),this.fire("tileloadstart",{tile:de,coords:m})},_tileReady:function(m,b,O){b&&this.fire("tileerror",{error:b,tile:O,coords:m});var te=this._tileCoordsToKey(m);O=this._tiles[te],O&&(O.loaded=+new Date,this._map._fadeAnimated?(is(O.el,0),U(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(O.active=!0,this._pruneTiles()),b||(Vn(O.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:O.el,coords:m})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Yt.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(m){return m.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(m){var b=new K(this._wrapX?A(m.x,this._wrapX):m.x,this._wrapY?A(m.y,this._wrapY):m.y);return b.z=m.z,b},_pxBoundsToTileRange:function(m){var b=this.getTileSize();return new ce(m.min.unscaleBy(b).floor(),m.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var m in this._tiles)if(!this._tiles[m].loaded)return!1;return!0}});function Gs(m){return new _l(m)}var La=_l.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(m,b){this._url=m,b=x(this,b),b.detectRetina&&Yt.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(m,b){return this._url===m&&b===void 0&&(b=!0),this._url=m,b||this.redraw(),this},createTile:function(m,b){var O=document.createElement("img");return bn(O,"load",i(this._tileOnLoad,this,b,O)),bn(O,"error",i(this._tileOnError,this,b,O)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(O.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(O.referrerPolicy=this.options.referrerPolicy),O.alt="",O.src=this.getTileUrl(m),O},getTileUrl:function(m){var b={r:Yt.retina?"@2x":"",s:this._getSubdomain(m),x:m.x,y:m.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var O=this._globalTileRange.max.y-m.y;this.options.tms&&(b.y=O),b["-y"]=O}return F(this._url,s(b,this.options))},_tileOnLoad:function(m,b){Yt.ielt9?setTimeout(i(m,this,null,b),0):m(null,b)},_tileOnError:function(m,b,O){var te=this.options.errorTileUrl;te&&b.getAttribute("src")!==te&&(b.src=te),m(O,b)},_onTileRemove:function(m){m.tile.onload=null},_getZoomForUrl:function(){var m=this._tileZoom,b=this.options.maxZoom,O=this.options.zoomReverse,te=this.options.zoomOffset;return O&&(m=b-m),m+te},_getSubdomain:function(m){var b=Math.abs(m.x+m.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var m,b;for(m in this._tiles)if(this._tiles[m].coords.z!==this._tileZoom&&(b=this._tiles[m].el,b.onload=h,b.onerror=h,!b.complete)){b.src=j;var O=this._tiles[m].coords;Un(b),delete this._tiles[m],this.fire("tileabort",{tile:b,coords:O})}},_removeTile:function(m){var b=this._tiles[m];if(b)return b.el.setAttribute("src",j),_l.prototype._removeTile.call(this,m)},_tileReady:function(m,b,O){if(!(!this._map||O&&O.getAttribute("src")===j))return _l.prototype._tileReady.call(this,m,b,O)}});function pr(m,b){return new La(m,b)}var gr=La.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(m,b){this._url=m;var O=s({},this.defaultWmsParams);for(var te in b)te in this.options||(O[te]=b[te]);b=x(this,b);var de=b.detectRetina&&Yt.retina?2:1,Ce=this.getTileSize();O.width=Ce.x*de,O.height=Ce.y*de,this.wmsParams=O},onAdd:function(m){this._crs=this.options.crs||m.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,La.prototype.onAdd.call(this,m)},getTileUrl:function(m){var b=this._tileCoordsToNwSe(m),O=this._crs,te=Q(O.project(b[0]),O.project(b[1])),de=te.min,Ce=te.max,Qe=(this._wmsVersion>=1.3&&this._crs===yr?[de.y,de.x,Ce.y,Ce.x]:[de.x,de.y,Ce.x,Ce.y]).join(","),st=La.prototype.getTileUrl.call(this,m);return st+S(this.wmsParams,st,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Qe},setParams:function(m,b){return s(this.wmsParams,m),b||this.redraw(),this}});function gs(m,b){return new gr(m,b)}La.WMS=gr,pr.wms=gs;var ns=lr.extend({options:{padding:.1},initialize:function(m){x(this,m),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Vn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var m={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(m.zoomanim=this._onAnimZoom),m},_onAnimZoom:function(m){this._updateTransform(m.center,m.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(m,b){var O=this._map.getZoomScale(b,this._zoom),te=this._map.getSize().multiplyBy(.5+this.options.padding),de=this._map.project(this._center,b),Ce=te.multiplyBy(-O).add(de).subtract(this._map._getNewPixelOrigin(m,b));Yt.any3d?Ba(this._container,Ce,O):Dn(this._container,Ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var m in this._layers)this._layers[m]._reset()},_onZoomEnd:function(){for(var m in this._layers)this._layers[m]._project()},_updatePaths:function(){for(var m in this._layers)this._layers[m]._update()},_update:function(){var m=this.options.padding,b=this._map.getSize(),O=this._map.containerPointToLayerPoint(b.multiplyBy(-m)).round();this._bounds=new ce(O,O.add(b.multiplyBy(1+m*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),go=ns.extend({options:{tolerance:0},getEvents:function(){var m=ns.prototype.getEvents.call(this);return m.viewprereset=this._onViewPreReset,m},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ns.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var m=this._container=document.createElement("canvas");bn(m,"mousemove",this._onMouseMove,this),bn(m,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bn(m,"mouseout",this._handleMouseOut,this),m._leaflet_disable_events=!0,this._ctx=m.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,Un(this._container),ir(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var m;this._redrawBounds=null;for(var b in this._layers)m=this._layers[b],m._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ns.prototype._update.call(this);var m=this._bounds,b=this._container,O=m.getSize(),te=Yt.retina?2:1;Dn(b,m.min),b.width=te*O.x,b.height=te*O.y,b.style.width=O.x+"px",b.style.height=O.y+"px",Yt.retina&&this._ctx.scale(2,2),this._ctx.translate(-m.min.x,-m.min.y),this.fire("update")}},_reset:function(){ns.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(m){this._updateDashArray(m),this._layers[l(m)]=m;var b=m._order={layer:m,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(m){this._requestRedraw(m)},_removePath:function(m){var b=m._order,O=b.next,te=b.prev;O?O.prev=te:this._drawLast=te,te?te.next=O:this._drawFirst=O,delete m._order,delete this._layers[l(m)],this._requestRedraw(m)},_updatePath:function(m){this._extendRedrawBounds(m),m._project(),m._update(),this._requestRedraw(m)},_updateStyle:function(m){this._updateDashArray(m),this._requestRedraw(m)},_updateDashArray:function(m){if(typeof m.options.dashArray=="string"){var b=m.options.dashArray.split(/[, ]+/),O=[],te,de;for(de=0;de<b.length;de++){if(te=Number(b[de]),isNaN(te))return;O.push(te)}m.options._dashArray=O}else m.options._dashArray=m.options.dashArray},_requestRedraw:function(m){this._map&&(this._extendRedrawBounds(m),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(m){if(m._pxBounds){var b=(m.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(m._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(m._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var m=this._redrawBounds;if(m){var b=m.getSize();this._ctx.clearRect(m.min.x,m.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var m,b=this._redrawBounds;if(this._ctx.save(),b){var O=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,O.x,O.y),this._ctx.clip()}this._drawing=!0;for(var te=this._drawFirst;te;te=te.next)m=te.layer,(!b||m._pxBounds&&m._pxBounds.intersects(b))&&m._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(m,b){if(this._drawing){var O,te,de,Ce,Qe=m._parts,st=Qe.length,ht=this._ctx;if(st){for(ht.beginPath(),O=0;O<st;O++){for(te=0,de=Qe[O].length;te<de;te++)Ce=Qe[O][te],ht[te?"lineTo":"moveTo"](Ce.x,Ce.y);b&&ht.closePath()}this._fillStroke(ht,m)}}},_updateCircle:function(m){if(!(!this._drawing||m._empty())){var b=m._point,O=this._ctx,te=Math.max(Math.round(m._radius),1),de=(Math.max(Math.round(m._radiusY),1)||te)/te;de!==1&&(O.save(),O.scale(1,de)),O.beginPath(),O.arc(b.x,b.y/de,te,0,Math.PI*2,!1),de!==1&&O.restore(),this._fillStroke(O,m)}},_fillStroke:function(m,b){var O=b.options;O.fill&&(m.globalAlpha=O.fillOpacity,m.fillStyle=O.fillColor||O.color,m.fill(O.fillRule||"evenodd")),O.stroke&&O.weight!==0&&(m.setLineDash&&m.setLineDash(b.options&&b.options._dashArray||[]),m.globalAlpha=O.opacity,m.lineWidth=O.weight,m.strokeStyle=O.color,m.lineCap=O.lineCap,m.lineJoin=O.lineJoin,m.stroke())},_onClick:function(m){for(var b=this._map.mouseEventToLayerPoint(m),O,te,de=this._drawFirst;de;de=de.next)O=de.layer,O.options.interactive&&O._containsPoint(b)&&(!(m.type==="click"||m.type==="preclick")||!this._map._draggableMoved(O))&&(te=O);this._fireEvent(te?[te]:!1,m)},_onMouseMove:function(m){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(m);this._handleMouseHover(m,b)}},_handleMouseOut:function(m){var b=this._hoveredLayer;b&&(xr(this._container,"leaflet-interactive"),this._fireEvent([b],m,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(m,b){if(!this._mouseHoverThrottled){for(var O,te,de=this._drawFirst;de;de=de.next)O=de.layer,O.options.interactive&&O._containsPoint(b)&&(te=O);te!==this._hoveredLayer&&(this._handleMouseOut(m),te&&(Vn(this._container,"leaflet-interactive"),this._fireEvent([te],m,"mouseover"),this._hoveredLayer=te)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,m),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(m,b,O){this._map._fireDOMEvent(b,O||b.type,m)},_bringToFront:function(m){var b=m._order;if(b){var O=b.next,te=b.prev;if(O)O.prev=te;else return;te?te.next=O:O&&(this._drawFirst=O),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(m)}},_bringToBack:function(m){var b=m._order;if(b){var O=b.next,te=b.prev;if(te)te.next=O;else return;O?O.prev=te:te&&(this._drawLast=te),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(m)}}});function hc(m){return Yt.canvas?new go(m):null}var Oo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(m){return document.createElement("<lvml:"+m+' class="lvml">')}}catch{}return function(m){return document.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),mc={_initContainer:function(){this._container=Mn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ns.prototype._update.call(this),this.fire("update"))},_initPath:function(m){var b=m._container=Oo("shape");Vn(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",m._path=Oo("path"),b.appendChild(m._path),this._updateStyle(m),this._layers[l(m)]=m},_addPath:function(m){var b=m._container;this._container.appendChild(b),m.options.interactive&&m.addInteractiveTarget(b)},_removePath:function(m){var b=m._container;Un(b),m.removeInteractiveTarget(b),delete this._layers[l(m)]},_updateStyle:function(m){var b=m._stroke,O=m._fill,te=m.options,de=m._container;de.stroked=!!te.stroke,de.filled=!!te.fill,te.stroke?(b||(b=m._stroke=Oo("stroke")),de.appendChild(b),b.weight=te.weight+"px",b.color=te.color,b.opacity=te.opacity,te.dashArray?b.dashStyle=D(te.dashArray)?te.dashArray.join(" "):te.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=te.lineCap.replace("butt","flat"),b.joinstyle=te.lineJoin):b&&(de.removeChild(b),m._stroke=null),te.fill?(O||(O=m._fill=Oo("fill")),de.appendChild(O),O.color=te.fillColor||te.color,O.opacity=te.fillOpacity):O&&(de.removeChild(O),m._fill=null)},_updateCircle:function(m){var b=m._point.round(),O=Math.round(m._radius),te=Math.round(m._radiusY||O);this._setPath(m,m._empty()?"M0 0":"AL "+b.x+","+b.y+" "+O+","+te+" 0,"+65535*360)},_setPath:function(m,b){m._path.v=b},_bringToFront:function(m){lo(m._container)},_bringToBack:function(m){Al(m._container)}},Tu=Yt.vml?Oo:Ue,Cl=ns.extend({_initContainer:function(){this._container=Tu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Tu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Un(this._container),ir(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ns.prototype._update.call(this);var m=this._bounds,b=m.getSize(),O=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,O.setAttribute("width",b.x),O.setAttribute("height",b.y)),Dn(O,m.min),O.setAttribute("viewBox",[m.min.x,m.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(m){var b=m._path=Tu("path");m.options.className&&Vn(b,m.options.className),m.options.interactive&&Vn(b,"leaflet-interactive"),this._updateStyle(m),this._layers[l(m)]=m},_addPath:function(m){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(m._path),m.addInteractiveTarget(m._path)},_removePath:function(m){Un(m._path),m.removeInteractiveTarget(m._path),delete this._layers[l(m)]},_updatePath:function(m){m._project(),m._update()},_updateStyle:function(m){var b=m._path,O=m.options;b&&(O.stroke?(b.setAttribute("stroke",O.color),b.setAttribute("stroke-opacity",O.opacity),b.setAttribute("stroke-width",O.weight),b.setAttribute("stroke-linecap",O.lineCap),b.setAttribute("stroke-linejoin",O.lineJoin),O.dashArray?b.setAttribute("stroke-dasharray",O.dashArray):b.removeAttribute("stroke-dasharray"),O.dashOffset?b.setAttribute("stroke-dashoffset",O.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),O.fill?(b.setAttribute("fill",O.fillColor||O.color),b.setAttribute("fill-opacity",O.fillOpacity),b.setAttribute("fill-rule",O.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(m,b){this._setPath(m,Ie(m._parts,b))},_updateCircle:function(m){var b=m._point,O=Math.max(Math.round(m._radius),1),te=Math.max(Math.round(m._radiusY),1)||O,de="a"+O+","+te+" 0 1,0 ",Ce=m._empty()?"M0 0":"M"+(b.x-O)+","+b.y+de+O*2+",0 "+de+-O*2+",0 ";this._setPath(m,Ce)},_setPath:function(m,b){m._path.setAttribute("d",b)},_bringToFront:function(m){lo(m._path)},_bringToBack:function(m){Al(m._path)}});Yt.vml&&Cl.include(mc);function va(m){return Yt.svg||Yt.vml?new Cl(m):null}rr.include({getRenderer:function(m){var b=m.options.renderer||this._getPaneRenderer(m.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(m){if(m==="overlayPane"||m===void 0)return!1;var b=this._paneRenderers[m];return b===void 0&&(b=this._createRenderer({pane:m}),this._paneRenderers[m]=b),b},_createRenderer:function(m){return this.options.preferCanvas&&hc(m)||va(m)}});var vo=qa.extend({initialize:function(m,b){qa.prototype.initialize.call(this,this._boundsToLatLngs(m),b)},setBounds:function(m){return this.setLatLngs(this._boundsToLatLngs(m))},_boundsToLatLngs:function(m){return m=se(m),[m.getSouthWest(),m.getNorthWest(),m.getNorthEast(),m.getSouthEast()]}});function hi(m,b){return new vo(m,b)}Cl.create=Tu,Cl.pointsToPath=Ie,fi.geometryToLayer=$c,fi.coordsToLatLng=ql,fi.coordsToLatLngs=Da,fi.latLngToCoords=pa,fi.latLngsToCoords=yl,fi.getFeature=ga,fi.asFeature=qi,rr.mergeOptions({boxZoom:!0});var Nu=Ia.extend({initialize:function(m){this._map=m,this._container=m._container,this._pane=m._panes.overlayPane,this._resetStateTimeout=0,m.on("unload",this._destroy,this)},addHooks:function(){bn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ir(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Un(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(m){if(!m.shiftKey||m.which!==1&&m.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ka(),uc(),this._startPoint=this._map.mouseEventToContainerPoint(m),bn(document,{contextmenu:Qs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(m){this._moved||(this._moved=!0,this._box=Mn("div","leaflet-zoom-box",this._container),Vn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(m);var b=new ce(this._point,this._startPoint),O=b.getSize();Dn(this._box,b.min),this._box.style.width=O.x+"px",this._box.style.height=O.y+"px"},_finish:function(){this._moved&&(Un(this._box),xr(this._container,"leaflet-crosshair")),Ni(),uo(),ir(document,{contextmenu:Qs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(m){if(!(m.which!==1&&m.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var b=new Z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(m){m.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});rr.addInitHook("addHandler","boxZoom",Nu),rr.mergeOptions({doubleClickZoom:!0});var El=Ia.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(m){var b=this._map,O=b.getZoom(),te=b.options.zoomDelta,de=m.originalEvent.shiftKey?O-te:O+te;b.options.doubleClickZoom==="center"?b.setZoom(de):b.setZoomAround(m.containerPoint,de)}});rr.addInitHook("addHandler","doubleClickZoom",El),rr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sd=Ia.extend({addHooks:function(){if(!this._draggable){var m=this._map;this._draggable=new Ii(m._mapPane,m._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),m.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),m.on("zoomend",this._onZoomEnd,this),m.whenReady(this._onZoomEnd,this))}Vn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xr(this._map._container,"leaflet-grab"),xr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var m=this._map;if(m._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=se(this._map.options.maxBounds);this._offsetLimit=Q(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;m.fire("movestart").fire("dragstart"),m.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(m){if(this._map.options.inertia){var b=this._lastTime=+new Date,O=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(O),this._times.push(b),this._prunePositions(b)}this._map.fire("move",m).fire("drag",m)},_prunePositions:function(m){for(;this._positions.length>1&&m-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var m=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(m).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(m,b){return m-(m-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var m=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;m.x<b.min.x&&(m.x=this._viscousLimit(m.x,b.min.x)),m.y<b.min.y&&(m.y=this._viscousLimit(m.y,b.min.y)),m.x>b.max.x&&(m.x=this._viscousLimit(m.x,b.max.x)),m.y>b.max.y&&(m.y=this._viscousLimit(m.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(m)}},_onPreDragWrap:function(){var m=this._worldWidth,b=Math.round(m/2),O=this._initialWorldOffset,te=this._draggable._newPos.x,de=(te-b+O)%m+b-O,Ce=(te+b+O)%m-b-O,Qe=Math.abs(de+O)<Math.abs(Ce+O)?de:Ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Qe},_onDragEnd:function(m){var b=this._map,O=b.options,te=!O.inertia||m.noInertia||this._times.length<2;if(b.fire("dragend",m),te)b.fire("moveend");else{this._prunePositions(+new Date);var de=this._lastPos.subtract(this._positions[0]),Ce=(this._lastTime-this._times[0])/1e3,Qe=O.easeLinearity,st=de.multiplyBy(Qe/Ce),ht=st.distanceTo([0,0]),Ft=Math.min(O.inertiaMaxSpeed,ht),an=st.multiplyBy(Ft/ht),An=Ft/(O.inertiaDeceleration*Qe),vn=an.multiplyBy(-An/2).round();!vn.x&&!vn.y?b.fire("moveend"):(vn=b._limitOffset(vn,b.options.maxBounds),M(function(){b.panBy(vn,{duration:An,easeLinearity:Qe,noMoveStart:!0,animate:!0})}))}}});rr.addInitHook("addHandler","dragging",sd),rr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yc=Ia.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(m){this._map=m,this._setPanDelta(m.options.keyboardPanDelta),this._setZoomDelta(m.options.zoomDelta)},addHooks:function(){var m=this._map._container;m.tabIndex<=0&&(m.tabIndex="0"),bn(m,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ir(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var m=document.body,b=document.documentElement,O=m.scrollTop||b.scrollTop,te=m.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(te,O)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(m){var b=this._panKeys={},O=this.keyCodes,te,de;for(te=0,de=O.left.length;te<de;te++)b[O.left[te]]=[-1*m,0];for(te=0,de=O.right.length;te<de;te++)b[O.right[te]]=[m,0];for(te=0,de=O.down.length;te<de;te++)b[O.down[te]]=[0,m];for(te=0,de=O.up.length;te<de;te++)b[O.up[te]]=[0,-1*m]},_setZoomDelta:function(m){var b=this._zoomKeys={},O=this.keyCodes,te,de;for(te=0,de=O.zoomIn.length;te<de;te++)b[O.zoomIn[te]]=m;for(te=0,de=O.zoomOut.length;te<de;te++)b[O.zoomOut[te]]=-m},_addHooks:function(){bn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ir(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(m){if(!(m.altKey||m.ctrlKey||m.metaKey)){var b=m.keyCode,O=this._map,te;if(b in this._panKeys){if(!O._panAnim||!O._panAnim._inProgress)if(te=this._panKeys[b],m.shiftKey&&(te=J(te).multiplyBy(3)),O.options.maxBounds&&(te=O._limitOffset(J(te),O.options.maxBounds)),O.options.worldCopyJump){var de=O.wrapLatLng(O.unproject(O.project(O.getCenter()).add(te)));O.panTo(de)}else O.panBy(te)}else if(b in this._zoomKeys)O.setZoom(O.getZoom()+(m.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&O._popup&&O._popup.options.closeOnEscapeKey)O.closePopup();else return;Qs(m)}}});rr.addInitHook("addHandler","keyboard",Yc),rr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $l=Ia.extend({addHooks:function(){bn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ir(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(m){var b=pl(m),O=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(m),this._startTime||(this._startTime=+new Date);var te=Math.max(O-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),te),Qs(m)},_performZoom:function(){var m=this._map,b=m.getZoom(),O=this._map.options.zoomSnap||0;m._stop();var te=this._delta/(this._map.options.wheelPxPerZoomLevel*4),de=4*Math.log(2/(1+Math.exp(-Math.abs(te))))/Math.LN2,Ce=O?Math.ceil(de/O)*O:de,Qe=m._limitZoom(b+(this._delta>0?Ce:-Ce))-b;this._delta=0,this._startTime=null,Qe&&(m.options.scrollWheelZoom==="center"?m.setZoom(b+Qe):m.setZoomAround(this._lastMousePos,b+Qe))}});rr.addInitHook("addHandler","scrollWheelZoom",$l);var jA=600;rr.mergeOptions({tapHold:Yt.touchNative&&Yt.safari&&Yt.mobile,tapTolerance:15});var ad=Ia.extend({addHooks:function(){bn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ir(this._map._container,"touchstart",this._onDown,this)},_onDown:function(m){if(clearTimeout(this._holdTimeout),m.touches.length===1){var b=m.touches[0];this._startPos=this._newPos=new K(b.clientX,b.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(bn(document,"touchend",Wr),bn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),jA),bn(document,"touchend touchcancel contextmenu",this._cancel,this),bn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function m(){ir(document,"touchend",Wr),ir(document,"touchend touchcancel",m)},_cancel:function(){clearTimeout(this._holdTimeout),ir(document,"touchend touchcancel contextmenu",this._cancel,this),ir(document,"touchmove",this._onMove,this)},_onMove:function(m){var b=m.touches[0];this._newPos=new K(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(m,b){var O=new MouseEvent(m,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});O._simulated=!0,b.target.dispatchEvent(O)}});rr.addInitHook("addHandler","tapHold",ad),rr.mergeOptions({touchZoom:Yt.touch,bounceAtZoomLimits:!0});var pc=Ia.extend({addHooks:function(){Vn(this._map._container,"leaflet-touch-zoom"),bn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xr(this._map._container,"leaflet-touch-zoom"),ir(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(m){var b=this._map;if(!(!m.touches||m.touches.length!==2||b._animatingZoom||this._zooming)){var O=b.mouseEventToContainerPoint(m.touches[0]),te=b.mouseEventToContainerPoint(m.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(O.add(te)._divideBy(2))),this._startDist=O.distanceTo(te),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),bn(document,"touchmove",this._onTouchMove,this),bn(document,"touchend touchcancel",this._onTouchEnd,this),Wr(m)}},_onTouchMove:function(m){if(!(!m.touches||m.touches.length!==2||!this._zooming)){var b=this._map,O=b.mouseEventToContainerPoint(m.touches[0]),te=b.mouseEventToContainerPoint(m.touches[1]),de=O.distanceTo(te)/this._startDist;if(this._zoom=b.getScaleZoom(de,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&de<1||this._zoom>b.getMaxZoom()&&de>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,de===1)return}else{var Ce=O._add(te)._divideBy(2)._subtract(this._centerPoint);if(de===1&&Ce.x===0&&Ce.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(Ce),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var Qe=i(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(Qe,this,!0),Wr(m)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),ir(document,"touchmove",this._onTouchMove,this),ir(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});rr.addInitHook("addHandler","touchZoom",pc),rr.BoxZoom=Nu,rr.DoubleClickZoom=El,rr.Drag=sd,rr.Keyboard=Yc,rr.ScrollWheelZoom=$l,rr.TapHold=ad,rr.TouchZoom=pc,n.Bounds=ce,n.Browser=Yt,n.CRS=Se,n.Canvas=go,n.Circle=Ai,n.CircleMarker=zl,n.Class=q,n.Control=ps,n.DivIcon=Ac,n.DivOverlay=Ka,n.DomEvent=_u,n.DomUtil=Ln,n.Draggable=Ii,n.Evented=le,n.FeatureGroup=ts,n.GeoJSON=fi,n.GridLayer=_l,n.Handler=Ia,n.Icon=Fi,n.ImageOverlay=Ki,n.LatLng=ie,n.LatLngBounds=Z,n.Layer=lr,n.LayerGroup=Or,n.LineUtil=Te,n.Map=rr,n.Marker=Vs,n.Mixin=Ol,n.Path=Gi,n.Point=K,n.PolyUtil=vl,n.Polygon=qa,n.Polyline=po,n.Popup=bl,n.PosAnimation=Rl,n.Projection=Pt,n.Rectangle=vo,n.Renderer=ns,n.SVG=Cl,n.SVGOverlay=wl,n.TileLayer=La,n.Tooltip=Kl,n.Transformation=me,n.Util=G,n.VideoOverlay=Di,n.bind=i,n.bounds=Q,n.canvas=hc,n.circle=hh,n.circleMarker=td,n.control=Fs,n.divIcon=fc,n.extend=s,n.featureGroup=zi,n.geoJSON=Uo,n.geoJson=zs,n.gridLayer=Gs,n.icon=Gc,n.imageOverlay=ca,n.latLng=fe,n.latLngBounds=se,n.layerGroup=Po,n.map=mo,n.marker=Kc,n.point=J,n.polygon=Fa,n.polyline=OA,n.popup=Wc,n.rectangle=hi,n.setOptions=x,n.stamp=l,n.svg=va,n.svgOverlay=nd,n.tileLayer=pr,n.tooltip=rd,n.transformation=he,n.version=r,n.videoOverlay=Su;var gc=window.L;n.noConflict=function(){return window.L=gc,this},window.L=n})}(mv,mv.exports)),mv.exports}var d1=ORe();const rG=Nx(d1);function ak(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function ik(t,e){return e==null?function(r,s){const a=W.useRef(void 0);return a.current||(a.current=t(r,s)),a}:function(r,s){const a=W.useRef(void 0);a.current||(a.current=t(r,s));const i=W.useRef(r),{instance:o}=a.current;return W.useEffect(function(){i.current!==r&&(e(o,r,i.current),i.current=r)},[o,r,e]),a}}function jRe(t,e){W.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function sG(t){return function(n){const r=tG(),s=t(sk(n,r),r);return eG(r.map,n.attribution),nG(s.current,n.eventHandlers),jRe(s.current,r),s}}function HRe(t,e){const n=ik(t,e),r=sG(n);return LRe(r)}function QRe(t,e){const n=ik(t),r=MRe(n,e);return RRe(r)}function VRe(t,e){const n=ik(t,e),r=sG(n);return PRe(r)}function zRe(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function GRe({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:i,style:o,whenReady:l,zoom:c,...A},h){const[p]=W.useState({className:s,id:a,style:o}),[g,w]=W.useState(null),x=W.useRef(void 0);W.useImperativeHandle(h,()=>(g==null?void 0:g.map)??null,[g]);const S=W.useCallback(F=>{if(F!==null&&!x.current){const D=new d1.Map(F,A);x.current=D,n!=null&&c!=null?D.setView(n,c):t!=null&&D.fitBounds(t,e),l!=null&&D.whenReady(l),w(FRe(D))}},[]);W.useEffect(()=>()=>{g==null||g.map.remove()},[g]);const N=g?yt.createElement(rk,{value:g},r):i??null;return yt.createElement("div",{...p,ref:S},N)}const qRe=W.forwardRef(GRe),KRe=HRe(function({position:e,...n},r){const s=new d1.Marker(e,n);return ak(s,DRe(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),$Re=QRe(function(e,n){const r=new d1.Popup(e,n.overlayContainer);return ak(r,n)},function(e,n,{position:r},s){W.useEffect(function(){const{instance:i}=e;function o(c){c.popup===i&&(i.update(),s(!0))}function l(c){c.popup===i&&s(!1)}return n.map.on({popupopen:o,popupclose:l}),n.overlayContainer==null?(r!=null&&i.setLatLng(r),i.openOn(n.map)):n.overlayContainer.bindPopup(i),function(){var A;n.map.off({popupopen:o,popupclose:l}),(A=n.overlayContainer)==null||A.unbindPopup(),n.map.removeLayer(i)}},[e,n,s,r])}),WRe=VRe(function({url:e,...n},r){const s=new d1.TileLayer(e,sk(n,r));return ak(s,r)},function(e,n,r){zRe(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s0=function(){return s0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},s0.apply(this,arguments)};function YRe(t,e,n,r){return new(n||(n=Promise))(function(s,a){function i(c){try{l(r.next(c))}catch(A){a(A)}}function o(c){try{l(r.throw(c))}catch(A){a(A)}}function l(c){var A;c.done?s(c.value):(A=c.value,A instanceof n?A:new n(function(h){h(A)})).then(i,o)}l((r=r.apply(t,[])).next())})}function XRe(t,e){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(c){return function(A){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&A[0]?r.return:A[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,A[1])).done)return s;switch(r=0,s&&(A=[2&A[0],s.value]),A[0]){case 0:case 1:s=A;break;case 4:return i.label++,{value:A[1],done:!1};case 5:i.label++,r=A[1],A=[0];continue;case 7:A=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!((s=s.length>0&&s[s.length-1])||A[0]!==6&&A[0]!==2)){i=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){i.label=A[1];break}if(A[0]===6&&i.label<s[1]){i.label=s[1],s=A;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(A);break}s[2]&&i.ops.pop(),i.trys.pop();continue}A=e.call(t,i)}catch(h){A=[6,h],r=0}finally{n=s=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([l,c])}}}function Gn(){return Gn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gn.apply(this,arguments)}function a0(t){return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a0(t)}function aG(t){var e=function(n,r){if(a0(n)!=="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if(a0(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return a0(e)==="symbol"?e:String(e)}function Hm(t,e,n){return(e=aG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(n),!0).forEach(function(r){Hm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aG(r.key),r)}}function oN(t,e){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oN(t,e)}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cb(t)}function JRe(t,e){if(e&&(a0(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function ZRe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Cb(t);if(e){var s=Cb(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return JRe(this,n)}}function lN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iG(t,e){if(t){if(typeof t=="string")return lN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lN(t,e):void 0}}function ok(t){return function(e){if(Array.isArray(e))return lN(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||iG(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var e6e=function(){function t(n){var r=this;this._insertTag=function(s){var a;a=r.tags.length===0?r.insertionPoint?r.insertionPoint.nextSibling:r.prepend?r.container.firstChild:r.before:r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(a){var i=document.createElement("style");return i.setAttribute("data-emotion",a.key),a.nonce!==void 0&&i.setAttribute("nonce",a.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=function(a){if(a.sheet)return a.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===a)return document.styleSheets[i]}(r);try{s.insertRule(n,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},t}(),su="-ms-",rU="-moz-",As="-webkit-",lk="decl",oG="@keyframes",t6e=Math.abs,Y_=String.fromCharCode,n6e=Object.assign;function lG(t){return t.trim()}function ys(t,e,n){return t.replace(e,n)}function cN(t,e){return t.indexOf(e)}function Co(t,e){return 0|t.charCodeAt(e)}function Sx(t,e,n){return t.slice(e,n)}function Ed(t){return t.length}function ck(t){return t.length}function fw(t,e){return e.push(t),t}var X_=1,Bp=1,cG=0,lc=0,bi=0,Kp="";function J_(t,e,n,r,s,a,i){return{value:t,root:e,parent:n,type:r,props:s,children:a,line:X_,column:Bp,length:i,return:""}}function qg(t,e){return n6e(J_("",null,null,"",null,null,0),t,{length:-t.length},e)}function Mc(){return bi=lc<cG?Co(Kp,lc++):0,Bp++,bi===10&&(Bp=1,X_++),bi}function Od(){return Co(Kp,lc)}function Ww(){return lc}function A1(t,e){return Sx(Kp,t,e)}function Tx(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uG(t){return X_=Bp=1,cG=Ed(Kp=t),lc=0,[]}function dG(t){return Kp="",t}function Yw(t){return lG(A1(lc-1,uN(t===91?t+2:t===40?t+1:t)))}function r6e(t){for(;(bi=Od())&&bi<33;)Mc();return Tx(t)>2||Tx(bi)>3?"":" "}function s6e(t,e){for(;--e&&Mc()&&!(bi<48||bi>102||bi>57&&bi<65||bi>70&&bi<97););return A1(t,Ww()+(e<6&&Od()==32&&Mc()==32))}function uN(t){for(;Mc();)switch(bi){case t:return lc;case 34:case 39:t!==34&&t!==39&&uN(bi);break;case 40:t===41&&uN(t);break;case 92:Mc()}return lc}function a6e(t,e){for(;Mc()&&t+bi!==57&&(t+bi!==84||Od()!==47););return"/*"+A1(e,lc-1)+"*"+Y_(t===47?t:Mc())}function i6e(t){for(;!Tx(Od());)Mc();return A1(t,lc)}function sU(t){return dG(Xw("",null,null,null,[""],t=uG(t),0,[0],t))}function Xw(t,e,n,r,s,a,i,o,l){for(var c=0,A=0,h=i,p=0,g=0,w=0,x=1,S=1,N=1,F=0,D="",R=s,j=a,P=r,E=D;S;)switch(w=F,F=Mc()){case 40:if(w!=108&&Co(E,h-1)==58){cN(E+=ys(Yw(F),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:E+=Yw(F);break;case 9:case 10:case 13:case 32:E+=r6e(w);break;case 92:E+=s6e(Ww()-1,7);continue;case 47:switch(Od()){case 42:case 47:fw(o6e(a6e(Mc(),Ww()),e,n),l);break;default:E+="/"}break;case 123*x:o[c++]=Ed(E)*N;case 125*x:case 59:case 0:switch(F){case 0:case 125:S=0;case 59+A:g>0&&Ed(E)-h&&fw(g>32?iU(E+";",r,n,h-1):iU(ys(E," ","")+";",r,n,h-2),l);break;case 59:E+=";";default:if(fw(P=aU(E,e,n,c,A,s,o,D,R=[],j=[],h),a),F===123)if(A===0)Xw(E,e,P,P,R,a,h,o,j);else switch(p===99&&Co(E,3)===110?100:p){case 100:case 109:case 115:Xw(t,P,P,r&&fw(aU(t,P,P,0,0,s,o,D,s,R=[],h),j),s,j,h,o,r?R:j);break;default:Xw(E,P,P,P,[""],j,0,o,j)}}c=A=g=0,x=N=1,D=E="",h=i;break;case 58:h=1+Ed(E),g=w;default:if(x<1){if(F==123)--x;else if(F==125&&x++==0&&(bi=lc>0?Co(Kp,--lc):0,Bp--,bi===10&&(Bp=1,X_--),bi==125))continue}switch(E+=Y_(F),F*x){case 38:N=A>0?1:(E+="\f",-1);break;case 44:o[c++]=(Ed(E)-1)*N,N=1;break;case 64:Od()===45&&(E+=Yw(Mc())),p=Od(),A=h=Ed(D=E+=i6e(Ww())),F++;break;case 45:w===45&&Ed(E)==2&&(x=0)}}return a}function aU(t,e,n,r,s,a,i,o,l,c,A){for(var h=s-1,p=s===0?a:[""],g=ck(p),w=0,x=0,S=0;w<r;++w)for(var N=0,F=Sx(t,h+1,h=t6e(x=i[w])),D=t;N<g;++N)(D=lG(x>0?p[N]+" "+F:ys(F,/&\f/g,p[N])))&&(l[S++]=D);return J_(t,e,n,s===0?"rule":o,l,c,A)}function o6e(t,e,n){return J_(t,e,n,"comm",Y_(bi),Sx(t,2,-2),0)}function iU(t,e,n,r){return J_(t,e,n,lk,Sx(t,0,r),Sx(t,r+1,-1),r)}function i0(t,e){for(var n="",r=ck(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function oU(t,e,n,r){switch(t.type){case"@import":case lk:return t.return=t.return||t.value;case"comm":return"";case oG:return t.return=t.value+"{"+i0(t.children,r)+"}";case"rule":t.value=t.props.join(",")}return Ed(n=i0(t.children,r))?t.return=t.value+"{"+n+"}":""}function lU(t){var e=ck(t);return function(n,r,s,a){for(var i="",o=0;o<e;o++)i+=t[o](n,r,s,a)||"";return i}}function l6e(t){return function(e){e.root||(e=e.return)&&t(e)}}function AG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var c6e=function(t,e,n){for(var r=0,s=0;r=s,s=Od(),r===38&&s===12&&(e[n]=1),!Tx(s);)Mc();return A1(t,lc)},u6e=function(t,e){return dG(function(n,r){var s=-1,a=44;do switch(Tx(a)){case 0:a===38&&Od()===12&&(r[s]=1),n[s]+=c6e(lc-1,r,s);break;case 2:n[s]+=Yw(a);break;case 4:if(a===44){n[++s]=Od()===58?"&\f":"",r[s]=n[s].length;break}default:n[s]+=Y_(a)}while(a=Mc());return n}(uG(t),e))},cU=new WeakMap,d6e=function(t){if(t.type==="rule"&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(!(n=n.parent))return;if((t.props.length!==1||e.charCodeAt(0)===58||cU.get(n))&&!r){cU.set(t,!0);for(var s=[],a=u6e(e,s),i=n.props,o=0,l=0;o<a.length;o++)for(var c=0;c<i.length;c++,l++)t.props[l]=s[o]?a[o].replace(/&\f/g,i[c]):i[c]+" "+a[o]}}},A6e=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function fG(t,e){switch(function(n,r){return 45^Co(n,0)?(((r<<2^Co(n,0))<<2^Co(n,1))<<2^Co(n,2))<<2^Co(n,3):0}(t,e)){case 5103:return As+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return As+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return As+t+rU+t+su+t+t;case 6828:case 4268:return As+t+su+t+t;case 6165:return As+t+su+"flex-"+t+t;case 5187:return As+t+ys(t,/(\w+).+(:[^]+)/,As+"box-$1$2-ms-flex-$1$2")+t;case 5443:return As+t+su+"flex-item-"+ys(t,/flex-|-self/,"")+t;case 4675:return As+t+su+"flex-line-pack"+ys(t,/align-content|flex-|-self/,"")+t;case 5548:return As+t+su+ys(t,"shrink","negative")+t;case 5292:return As+t+su+ys(t,"basis","preferred-size")+t;case 6060:return As+"box-"+ys(t,"-grow","")+As+t+su+ys(t,"grow","positive")+t;case 4554:return As+ys(t,/([^-])(transform)/g,"$1"+As+"$2")+t;case 6187:return ys(ys(ys(t,/(zoom-|grab)/,As+"$1"),/(image-set)/,As+"$1"),t,"")+t;case 5495:case 3959:return ys(t,/(image-set\([^]*)/,As+"$1$`$1");case 4968:return ys(ys(t,/(.+:)(flex-)?(.*)/,As+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+As+t+t;case 4095:case 3583:case 4068:case 2532:return ys(t,/(.+)-inline(.+)/,As+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ed(t)-1-e>6)switch(Co(t,e+1)){case 109:if(Co(t,e+4)!==45)break;case 102:return ys(t,/(.+:)(.+)-([^]+)/,"$1"+As+"$2-$3$1"+rU+(Co(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~cN(t,"stretch")?fG(ys(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Co(t,e+1)!==115)break;case 6444:switch(Co(t,Ed(t)-3-(~cN(t,"!important")&&10))){case 107:return ys(t,":",":"+As)+t;case 101:return ys(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+As+(Co(t,14)===45?"inline-":"")+"box$3$1"+As+"$2$3$1-ms-$2box$3")+t}break;case 5936:switch(Co(t,e+11)){case 114:return As+t+su+ys(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return As+t+su+ys(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return As+t+su+ys(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return As+t+su+t+t}return t}var uU,hw,Jw=typeof document<"u",f6e=Jw?void 0:(uU=function(){return AG(function(){var t={};return function(e){return t[e]}})},hw=new WeakMap,function(t){if(hw.has(t))return hw.get(t);var e=uU(t);return hw.set(t,e),e}),h6e=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case lk:t.return=fG(t.value,t.length);break;case oG:return i0([qg(t,{value:ys(t.value,"@","@"+As)})],r);case"rule":if(t.length)return function(s,a){return s.map(a).join("")}(t.props,function(s){switch(function(a,i){return(a=i.exec(a))?a[0]:a}(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return i0([qg(t,{props:[ys(s,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return i0([qg(t,{props:[ys(s,/:(plac\w+)/,":"+As+"input-$1")]}),qg(t,{props:[ys(s,/:(plac\w+)/,":-moz-$1")]}),qg(t,{props:[ys(s,/:(plac\w+)/,"-ms-input-$1")]})],r)}return""})}}],hG=function(t){var e=t.key;if(Jw&&e==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(N){N.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||h6e,s,a,i={},o=[];Jw&&(s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(N){for(var F=N.getAttribute("data-emotion").split(" "),D=1;D<F.length;D++)i[F[D]]=!0;o.push(N)}));var l=[d6e,A6e];if(Jw){var c,A=[oU,l6e(function(N){c.insert(N)})],h=lU(l.concat(r,A));a=function(N,F,D,R){c=D,i0(sU(N?N+"{"+F.styles+"}":F.styles),h),R&&(S.inserted[F.name]=!0)}}else{var p=[oU],g=lU(l.concat(r,p)),w=f6e(r)(e),x=function(N,F){var D=F.name;return w[D]===void 0&&(w[D]=i0(sU(N?N+"{"+F.styles+"}":F.styles),g)),w[D]};a=function(N,F,D,R){var j=F.name,P=x(N,F);return S.compat===void 0?(R&&(S.inserted[j]=!0),P):R?void(S.inserted[j]=P):P}}var S={key:e,sheet:new e6e({key:e,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:a};return S.sheet.hydrate(o),S};function bs(t,e,n){return t(n={path:e,exports:{},require:function(r,s){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(s==null&&n.path)}},n.exports),n.exports}var oo=typeof Symbol=="function"&&Symbol.for,dN=oo?Symbol.for("react.element"):60103,AN=oo?Symbol.for("react.portal"):60106,Zw=oo?Symbol.for("react.fragment"):60107,e2=oo?Symbol.for("react.strict_mode"):60108,t2=oo?Symbol.for("react.profiler"):60114,n2=oo?Symbol.for("react.provider"):60109,r2=oo?Symbol.for("react.context"):60110,fN=oo?Symbol.for("react.async_mode"):60111,Eb=oo?Symbol.for("react.concurrent_mode"):60111,s2=oo?Symbol.for("react.forward_ref"):60112,a2=oo?Symbol.for("react.suspense"):60113,m6e=oo?Symbol.for("react.suspense_list"):60120,i2=oo?Symbol.for("react.memo"):60115,o2=oo?Symbol.for("react.lazy"):60116,p6e=oo?Symbol.for("react.block"):60121,g6e=oo?Symbol.for("react.fundamental"):60117,v6e=oo?Symbol.for("react.responder"):60118,x6e=oo?Symbol.for("react.scope"):60119;function Bc(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dN:switch(t=t.type){case fN:case Eb:case Zw:case t2:case e2:case a2:return t;default:switch(t=t&&t.$$typeof){case r2:case s2:case o2:case i2:case n2:return t;default:return e}}case AN:return e}}}function dU(t){return Bc(t)===Eb}var y6e={AsyncMode:fN,ConcurrentMode:Eb,ContextConsumer:r2,ContextProvider:n2,Element:dN,ForwardRef:s2,Fragment:Zw,Lazy:o2,Memo:i2,Portal:AN,Profiler:t2,StrictMode:e2,Suspense:a2,isAsyncMode:function(t){return dU(t)||Bc(t)===fN},isConcurrentMode:dU,isContextConsumer:function(t){return Bc(t)===r2},isContextProvider:function(t){return Bc(t)===n2},isElement:function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dN},isForwardRef:function(t){return Bc(t)===s2},isFragment:function(t){return Bc(t)===Zw},isLazy:function(t){return Bc(t)===o2},isMemo:function(t){return Bc(t)===i2},isPortal:function(t){return Bc(t)===AN},isProfiler:function(t){return Bc(t)===t2},isStrictMode:function(t){return Bc(t)===e2},isSuspense:function(t){return Bc(t)===a2},isValidElementType:function(t){return typeof t=="string"||typeof t=="function"||t===Zw||t===Eb||t===t2||t===e2||t===a2||t===m6e||typeof t=="object"&&t!==null&&(t.$$typeof===o2||t.$$typeof===i2||t.$$typeof===n2||t.$$typeof===r2||t.$$typeof===s2||t.$$typeof===g6e||t.$$typeof===v6e||t.$$typeof===x6e||t.$$typeof===p6e)},typeOf:Bc};bs(function(t,e){});var AU=bs(function(t){t.exports=y6e}),fU={};fU[AU.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fU[AU.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var hN=typeof document<"u";function mG(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):r+=s+" "}),r}var uk=function(t,e,n){var r=t.key+"-"+e.name;(n===!1||hN===!1&&t.compat!==void 0)&&t.registered[r]===void 0&&(t.registered[r]=e.styles)},dk=function(t,e,n){uk(t,e,n);var r=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var s="",a=e;do{var i=t.insert(e===a?"."+r:"",a,t.sheet,!0);hN||i===void 0||(s+=i),a=a.next}while(a!==void 0);if(!hN&&s.length!==0)return s}},w6e={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},b6e=/[A-Z]|^ms/g,_6e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,pG=function(t){return t.charCodeAt(1)===45},hU=function(t){return t!=null&&typeof t!="boolean"},$S=AG(function(t){return pG(t)?t:t.replace(b6e,"-$&").toLowerCase()}),mU=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(_6e,function(n,r,s){return Sd={name:r,styles:s,next:Sd},r})}return w6e[t]===1||pG(t)||typeof e!="number"||e===0?e:e+"px"};function jv(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":if(n.anim===1)return Sd={name:n.name,styles:n.styles,next:Sd},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Sd={name:r.name,styles:r.styles,next:Sd},r=r.next;var s=n.styles+";";return s}return function(l,c,A){var h="";if(Array.isArray(A))for(var p=0;p<A.length;p++)h+=jv(l,c,A[p])+";";else for(var g in A){var w=A[g];if(typeof w!="object")c!=null&&c[w]!==void 0?h+=g+"{"+c[w]+"}":hU(w)&&(h+=$S(g)+":"+mU(g,w)+";");else if(!Array.isArray(w)||typeof w[0]!="string"||c!=null&&c[w[0]]!==void 0){var x=jv(l,c,w);switch(g){case"animation":case"animationName":h+=$S(g)+":"+x+";";break;default:h+=g+"{"+x+"}"}}else for(var S=0;S<w.length;S++)hU(w[S])&&(h+=$S(g)+":"+mU(g,w[S])+";")}return h}(t,e,n);case"function":if(t!==void 0){var a=Sd,i=n(t);return Sd=a,jv(t,e,i)}break}if(e==null)return n;var o=e[n];return o!==void 0?o:n}var Sd,pU=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Z_=function(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";Sd=void 0;var a=t[0];a==null||a.raw===void 0?(r=!1,s+=jv(n,e,a)):s+=a[0];for(var i=1;i<t.length;i++)s+=jv(n,e,t[i]),r&&(s+=a[i]);pU.lastIndex=0;for(var o,l="";(o=pU.exec(s))!==null;)l+="-"+o[1];var c=function(A){for(var h,p=0,g=0,w=A.length;w>=4;++g,w-=4)h=1540483477*(65535&(h=255&A.charCodeAt(g)|(255&A.charCodeAt(++g))<<8|(255&A.charCodeAt(++g))<<16|(255&A.charCodeAt(++g))<<24))+(59797*(h>>>16)<<16),p=1540483477*(65535&(h^=h>>>24))+(59797*(h>>>16)<<16)^1540483477*(65535&p)+(59797*(p>>>16)<<16);switch(w){case 3:p^=(255&A.charCodeAt(g+2))<<16;case 2:p^=(255&A.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&A.charCodeAt(g)))+(59797*(p>>>16)<<16)}return(((p=1540483477*(65535&(p^=p>>>13))+(59797*(p>>>16)<<16))^p>>>15)>>>0).toString(36)}(s)+l;return{name:c,styles:s,next:Sd}},C6e=typeof document<"u",E6e=function(t){return t()},gG=!!W.useInsertionEffect&&W.useInsertionEffect,vG=C6e&&gG||E6e,gU=gG||W.useLayoutEffect,up=typeof document<"u",Ak={}.hasOwnProperty,Sb=W.createContext(typeof HTMLElement<"u"?hG({key:"css"}):null);Sb.Provider;var eC=function(t){return W.forwardRef(function(e,n){var r=W.useContext(Sb);return t(e,r,n)})};up||(eC=function(t){return function(e){var n=W.useContext(Sb);return n===null?(n=hG({key:"css"}),W.createElement(Sb.Provider,{value:n},t(e,n))):t(e,n)}});var fk=W.createContext({}),mN="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",S6e=function(t,e){var n={};for(var r in e)Ak.call(e,r)&&(n[r]=e[r]);return n[mN]=t,n},T6e=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;uk(e,n,r);var s=vG(function(){return dk(e,n,r)});if(!up&&s!==void 0){for(var a,i=n.name,o=n.next;o!==void 0;)i+=" "+o.name,o=o.next;return W.createElement("style",((a={})["data-emotion"]=e.key+" "+i,a.dangerouslySetInnerHTML={__html:s},a.nonce=e.sheet.nonce,a))}return null},N6e=eC(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[mN],a=[r],i="";typeof t.className=="string"?i=mG(e.registered,a,t.className):t.className!=null&&(i=t.className+" ");var o=Z_(a,void 0,W.useContext(fk));i+=e.key+"-"+o.name;var l={};for(var c in t)!Ak.call(t,c)||c==="css"||c===mN||(l[c]=t[c]);return l.ref=n,l.className=i,W.createElement(W.Fragment,null,W.createElement(T6e,{cache:e,serialized:o,isStringTag:typeof s=="string"}),W.createElement(s,l))});bs(function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports});var Pn=function(t,e){var n=arguments;if(e==null||!Ak.call(e,"css"))return W.createElement.apply(void 0,n);var r=n.length,s=new Array(r);s[0]=N6e,s[1]=S6e(t,e);for(var a=2;a<r;a++)s[a]=n[a];return W.createElement.apply(null,s)};eC(function(t,e){var n=t.styles,r=Z_([n],void 0,W.useContext(fk));if(!up){for(var s,a=r.name,i=r.styles,o=r.next;o!==void 0;)a+=" "+o.name,i+=o.styles,o=o.next;var l=e.compat===!0,c=e.insert("",{name:a,styles:i},e.sheet,l);return l?null:W.createElement("style",((s={})["data-emotion"]=e.key+"-global "+a,s.dangerouslySetInnerHTML={__html:c},s.nonce=e.sheet.nonce,s))}var A=W.useRef();return gU(function(){var h=e.key+"-global",p=new e.sheet.constructor({key:h,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),g=!1,w=document.querySelector('style[data-emotion="'+h+" "+r.name+'"]');return e.sheet.tags.length&&(p.before=e.sheet.tags[0]),w!==null&&(g=!0,w.setAttribute("data-emotion",h),p.hydrate([w])),A.current=[p,g],function(){p.flush()}},[e]),gU(function(){var h=A.current,p=h[0];if(h[1])h[1]=!1;else{if(r.next!==void 0&&dk(e,r.next,!0),p.tags.length){var g=p.tags[p.tags.length-1].nextElementSibling;p.before=g,p.flush()}e.insert("",r,p,!1)}},[e,r.name]),null});function hk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Z_(e)}var B6e=function t(e){for(var n=e.length,r=0,s="";r<n;r++){var a=e[r];if(a!=null){var i=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))i=t(a);else for(var o in i="",a)a[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=a}i&&(s&&(s+=" "),s+=i)}}return s};function k6e(t,e,n){var r=[],s=mG(t,r,n);return r.length<2?n:s+e(r)}var I6e=function(t){var e,n=t.cache,r=t.serializedArr,s=vG(function(){for(var a="",i=0;i<r.length;i++){var o=dk(n,r[i],!1);up||o===void 0||(a+=o)}if(!up)return a});return up||s.length===0?null:W.createElement("style",((e={})["data-emotion"]=n.key+" "+r.map(function(a){return a.name}).join(" "),e.dangerouslySetInnerHTML={__html:s},e.nonce=n.sheet.nonce,e))};eC(function(t,e){var n=[],r=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var c=Z_(o,e.registered);return n.push(c),uk(e,c,!1),e.key+"-"+c.name},s={css:r,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return k6e(e.registered,r,B6e(o))},theme:W.useContext(fk)},a=t.children(s);return W.createElement(W.Fragment,null,W.createElement(I6e,{cache:e,serializedArr:n}),a)});function Zi(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,i,o,l,c=[],A=!0,h=!1;try{if(o=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;A=!1}else for(;!(A=(a=o.call(s)).done)&&(c.push(a.value),c.length!==r);A=!0);}catch(p){h=!0,i=p}finally{try{if(!A&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(h)throw i}}return c}}(t,e)||iG(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Td(t,e){if(t==null)return{};var n,r,s=function(i,o){if(i==null)return{};var l,c,A={},h=Object.keys(i);for(c=0;c<h.length;c++)l=h[c],o.indexOf(l)>=0||(A[l]=i[l]);return A}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function bA(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xG(t){return bA(t).getComputedStyle(t)}const mw=Math.round;function yG(t){return bG(t)?(t.nodeName||"").toLowerCase():""}let pw;function wG(t){return t instanceof bA(t).HTMLElement}function l2(t){return t instanceof bA(t).Element}function bG(t){return t instanceof bA(t).Node}function vU(t){return typeof ShadowRoot>"u"?!1:t instanceof bA(t).ShadowRoot||t instanceof ShadowRoot}function _G(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xG(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function F6e(){return/^((?!chrome|android).)*safari/i.test(function(){if(pw)return pw;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(pw=t.brands.map(e=>e.brand+"/"+e.version).join(" "),pw):navigator.userAgent}())}function CG(t){return l2(t)?t:t.contextElement}const EG={x:1,y:1};function xU(t){const e=CG(t);if(!wG(e))return EG;const n=e.getBoundingClientRect(),{width:r,height:s,fallback:a}=function(l){const c=xG(l);let A=parseFloat(c.width),h=parseFloat(c.height);const p=l.offsetWidth,g=l.offsetHeight,w=mw(A)!==p||mw(h)!==g;return w&&(A=p,h=g),{width:A,height:h,fallback:w}}(e);let i=(a?mw(n.width):n.width)/r,o=(a?mw(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function yU(t,e,n,r){var s,a;e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=CG(t);let l=EG;e&&(l=xU(t));const c=o?bA(o):window,A=F6e()&&n;let h=(i.left+(A&&((s=c.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,p=(i.top+(A&&((a=c.visualViewport)==null?void 0:a.offsetTop)||0))/l.y,g=i.width/l.x,w=i.height/l.y;if(o){const x=bA(o),S=r;let N=x.frameElement;for(;N&&r&&S!==x;){const F=xU(N),D=N.getBoundingClientRect(),R=getComputedStyle(N);D.x+=(N.clientLeft+parseFloat(R.paddingLeft))*F.x,D.y+=(N.clientTop+parseFloat(R.paddingTop))*F.y,h*=F.x,p*=F.y,g*=F.x,w*=F.y,h+=D.x,p+=D.y,N=bA(N).frameElement}}return{width:g,height:w,top:p,right:h+g,bottom:p+w,left:h,x:h,y:p}}function D6e(t){if(yG(t)==="html")return t;const e=t.assignedSlot||t.parentNode||vU(t)&&t.host||function(n){return((bG(n)?n.ownerDocument:n.document)||window.document).documentElement}(t);return vU(e)?e.host:e}function SG(t){const e=D6e(t);return function(n){return["html","body","#document"].includes(yG(n))}(e)?e.ownerDocument.body:wG(e)&&_G(e)?e:SG(e)}function c2(t,e){var n;e===void 0&&(e=[]);const r=SG(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),a=bA(r);return s?e.concat(a,a.visualViewport||[],_G(r)?r:[]):e.concat(r,c2(r))}var pN=typeof document<"u"?W.useLayoutEffect:W.useEffect,L6e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Tb=function(){};function R6e(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function P6e(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=[].concat(r);if(e&&t)for(var i in e)e.hasOwnProperty(i)&&e[i]&&a.push("".concat(R6e(t,i)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var wU=function(t){return e=t,Array.isArray(e)?t.filter(Boolean):a0(t)==="object"&&t!==null?[t]:[];var e},bU=function(t){return t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme,Sn({},Td(t,L6e))},Ua=function(t,e,n){var r=t.cx,s=t.getStyles,a=t.getClassNames,i=t.className;return{css:s(e,t),className:r(n??{},a(e,t),i)}};function tC(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function TG(t){return tC(t)?window.pageYOffset:t.scrollTop}function Nb(t,e){tC(t)?window.scrollTo(0,e):t.scrollTop=e}function M6e(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function gw(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Tb,s=TG(t),a=e-s,i=10,o=0;function l(){var c=M6e(o+=i,s,a,n);Nb(t,c),o<n?window.requestAnimationFrame(l):r(t)}l()}function _U(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>n.bottom?Nb(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+s,t.scrollHeight)):r.top-s<n.top&&Nb(t,Math.max(e.offsetTop-s,0))}function CU(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var NG=!1,U6e={get passive(){return NG=!0}},vw=typeof window<"u"?window:{};vw.addEventListener&&vw.removeEventListener&&(vw.addEventListener("p",Tb,U6e),vw.removeEventListener("p",Tb,!1));var O6e=NG;function j6e(t){return t!=null}function xw(t,e,n){return t?e:n}var H6e=["children","innerProps"],Q6e=["children","innerProps"];function V6e(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,s=t.placement,a=t.shouldScroll,i=t.isFixedPosition,o=t.controlHeight,l=function(oe){var ee=getComputedStyle(oe),le=ee.position==="absolute",K=/(auto|scroll)/;if(ee.position==="fixed")return document.documentElement;for(var ne=oe;ne=ne.parentElement;)if(ee=getComputedStyle(ne),(!le||ee.position!=="static")&&K.test(ee.overflow+ee.overflowY+ee.overflowX))return ne;return document.documentElement}(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var A,h=l.getBoundingClientRect().height,p=n.getBoundingClientRect(),g=p.bottom,w=p.height,x=p.top,S=n.offsetParent.getBoundingClientRect().top,N=i||tC(A=l)?window.innerHeight:A.clientHeight,F=TG(l),D=parseInt(getComputedStyle(n).marginBottom,10),R=parseInt(getComputedStyle(n).marginTop,10),j=S-R,P=N-x,E=j+F,T=h-F-x,k=g-N+F+D,z=F+x-R,M=160;switch(s){case"auto":case"bottom":if(P>=w)return{placement:"bottom",maxHeight:e};if(T>=w&&!i)return a&&gw(l,k,M),{placement:"bottom",maxHeight:e};if(!i&&T>=r||i&&P>=r)return a&&gw(l,k,M),{placement:"bottom",maxHeight:i?P-D:T-D};if(s==="auto"||i){var U=e,G=i?j:E;return G>=r&&(U=Math.min(G-D-o,e)),{placement:"top",maxHeight:U}}if(s==="bottom")return a&&Nb(l,k),{placement:"bottom",maxHeight:e};break;case"top":if(j>=w)return{placement:"top",maxHeight:e};if(E>=w&&!i)return a&&gw(l,z,M),{placement:"top",maxHeight:e};if(!i&&E>=r||i&&j>=r){var q=e;return(!i&&E>=r||i&&j>=r)&&(q=i?j-R:E-R),a&&gw(l,z,M),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return c}var EU,BG=function(t){return t==="auto"?"bottom":t},kG=W.createContext(null),z6e=function(t){var e=t.children,n=t.minMenuHeight,r=t.maxMenuHeight,s=t.menuPlacement,a=t.menuPosition,i=t.menuShouldScrollIntoView,o=t.theme,l=(W.useContext(kG)||{}).setPortalPlacement,c=W.useRef(null),A=Zi(W.useState(r),2),h=A[0],p=A[1],g=Zi(W.useState(null),2),w=g[0],x=g[1],S=o.spacing.controlHeight;return pN(function(){var N=c.current;if(N){var F=a==="fixed",D=V6e({maxHeight:r,menuEl:N,minHeight:n,placement:s,shouldScroll:i&&!F,isFixedPosition:F,controlHeight:S});p(D.maxHeight),x(D.placement),l==null||l(D.placement)}},[r,s,a,i,n,l,S]),e({ref:c,placerProps:Sn(Sn({},t),{},{placement:w||BG(s),maxHeight:h})})},G6e=function(t){var e=t.children,n=t.innerRef,r=t.innerProps;return Pn("div",Gn({},Ua(t,"menu",{menu:!0}),{ref:n},r),e)},IG=function(t,e){var n=t.theme,r=n.spacing.baseUnit,s=n.colors;return Sn({textAlign:"center"},e?{}:{color:s.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},q6e=IG,K6e=IG,$6e=["size"],W6e=["innerProps","isRtl","size"],WS,YS,Y6e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},FG=function(t){var e=t.size,n=Td(t,$6e);return Pn("svg",Gn({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Y6e},n))},XS=function(t){return Pn(FG,Gn({size:20},t),Pn("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},SU=function(t){return Pn(FG,Gn({size:20},t),Pn("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},DG=function(t,e){var n=t.isFocused,r=t.theme,s=r.spacing.baseUnit,a=r.colors;return Sn({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:n?a.neutral60:a.neutral20,padding:2*s,":hover":{color:n?a.neutral80:a.neutral40}})},X6e=DG,J6e=DG,Z6e=function(){var t=hk.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(EU||(WS=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],YS||(YS=WS.slice(0)),EU=Object.freeze(Object.defineProperties(WS,{raw:{value:Object.freeze(YS)}})))),JS=function(t){var e=t.delay,n=t.offset;return Pn("span",{css:hk({animation:"".concat(Z6e," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ePe=function(t){var e=t.children,n=t.isDisabled,r=t.isFocused,s=t.innerRef,a=t.innerProps,i=t.menuIsOpen;return Pn("div",Gn({ref:s},Ua(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":i}),a,{"aria-disabled":n||void 0}),e)},tPe=["data"],nPe=function(t){var e=t.children,n=t.cx,r=t.getStyles,s=t.getClassNames,a=t.Heading,i=t.headingProps,o=t.innerProps,l=t.label,c=t.theme,A=t.selectProps;return Pn("div",Gn({},Ua(t,"group",{group:!0}),o),Pn(a,Gn({},i,{selectProps:A,theme:c,getStyles:r,getClassNames:s,cx:n}),l),Pn("div",null,e))},rPe=["innerRef","isDisabled","isHidden","inputClassName"],LG={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},sPe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Sn({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},LG)},aPe=function(t){return Sn({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},LG)},TU=function(t){var e=t.children,n=t.innerProps;return Pn("div",n,e)},iPe=function(t){var e=t.children,n=t.components,r=t.data,s=t.innerProps,a=t.isDisabled,i=t.removeProps,o=t.selectProps,l=n.Container,c=n.Label,A=n.Remove;return Pn(l,{data:r,innerProps:Sn(Sn({},Ua(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:o},Pn(c,{data:r,innerProps:Sn({},Ua(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},e),Pn(A,{data:r,innerProps:Sn(Sn({},Ua(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},i),selectProps:o}))},oPe={ClearIndicator:function(t){var e=t.children,n=t.innerProps;return Pn("div",Gn({},Ua(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),e||Pn(XS,null))},Control:ePe,DropdownIndicator:function(t){var e=t.children,n=t.innerProps;return Pn("div",Gn({},Ua(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),e||Pn(SU,null))},DownChevron:SU,CrossIcon:XS,Group:nPe,GroupHeading:function(t){var e=bU(t);e.data;var n=Td(e,tPe);return Pn("div",Gn({},Ua(t,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(t){var e=t.children,n=t.innerProps;return Pn("div",Gn({},Ua(t,"indicatorsContainer",{indicators:!0}),n),e)},IndicatorSeparator:function(t){var e=t.innerProps;return Pn("span",Gn({},e,Ua(t,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(t){var e=t.cx,n=t.value,r=bU(t),s=r.innerRef,a=r.isDisabled,i=r.isHidden,o=r.inputClassName,l=Td(r,rPe);return Pn("div",Gn({},Ua(t,"input",{"input-container":!0}),{"data-value":n||""}),Pn("input",Gn({className:e({input:!0},o),ref:s,style:aPe(i),disabled:a},l)))},LoadingIndicator:function(t){var e=t.innerProps,n=t.isRtl,r=t.size,s=r===void 0?4:r,a=Td(t,W6e);return Pn("div",Gn({},Ua(Sn(Sn({},a),{},{innerProps:e,isRtl:n,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),Pn(JS,{delay:0,offset:n}),Pn(JS,{delay:160,offset:!0}),Pn(JS,{delay:320,offset:!n}))},Menu:G6e,MenuList:function(t){var e=t.children,n=t.innerProps,r=t.innerRef,s=t.isMulti;return Pn("div",Gn({},Ua(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},n),e)},MenuPortal:function(t){var e=t.appendTo,n=t.children,r=t.controlElement,s=t.innerProps,a=t.menuPlacement,i=t.menuPosition,o=W.useRef(null),l=W.useRef(null),c=Zi(W.useState(BG(a)),2),A=c[0],h=c[1],p=W.useMemo(function(){return{setPortalPlacement:h}},[]),g=Zi(W.useState(null),2),w=g[0],x=g[1],S=W.useCallback(function(){if(r){var R=function(E){var T=E.getBoundingClientRect();return{bottom:T.bottom,height:T.height,left:T.left,right:T.right,top:T.top,width:T.width}}(r),j=i==="fixed"?0:window.pageYOffset,P=R[A]+j;P===(w==null?void 0:w.offset)&&R.left===(w==null?void 0:w.rect.left)&&R.width===(w==null?void 0:w.rect.width)||x({offset:P,rect:R})}},[r,i,A,w==null?void 0:w.offset,w==null?void 0:w.rect.left,w==null?void 0:w.rect.width]);pN(function(){S()},[S]);var N=W.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),r&&o.current&&(l.current=function(R,j,P,E){E===void 0&&(E={});const{ancestorScroll:T=!0,ancestorResize:k=!0,elementResize:z=!0,animationFrame:M=!1}=E,U=T&&!M,G=U||k?[...l2(R)?c2(R):R.contextElement?c2(R.contextElement):[],...c2(j)]:[];G.forEach(le=>{U&&le.addEventListener("scroll",P,{passive:!0}),k&&le.addEventListener("resize",P)});let q,oe=null;if(z){let le=!0;oe=new ResizeObserver(()=>{le||P(),le=!1}),l2(R)&&!M&&oe.observe(R),l2(R)||!R.contextElement||M||oe.observe(R.contextElement),oe.observe(j)}let ee=M?yU(R):null;return M&&function le(){const K=yU(R);!ee||K.x===ee.x&&K.y===ee.y&&K.width===ee.width&&K.height===ee.height||P(),ee=K,q=requestAnimationFrame(le)}(),P(),()=>{var le;G.forEach(K=>{U&&K.removeEventListener("scroll",P),k&&K.removeEventListener("resize",P)}),(le=oe)==null||le.disconnect(),oe=null,M&&cancelAnimationFrame(q)}}(r,o.current,S,{elementResize:"ResizeObserver"in window}))},[r,S]);pN(function(){N()},[N]);var F=W.useCallback(function(R){o.current=R,N()},[N]);if(!e&&i!=="fixed"||!w)return null;var D=Pn("div",Gn({ref:F},Ua(Sn(Sn({},t),{},{offset:w.offset,position:i,rect:w.rect}),"menuPortal",{"menu-portal":!0}),s),n);return Pn(kG.Provider,{value:p},e?HV.createPortal(D,e):D)},LoadingMessage:function(t){var e=t.children,n=e===void 0?"Loading...":e,r=t.innerProps,s=Td(t,Q6e);return Pn("div",Gn({},Ua(Sn(Sn({},s),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(t){var e=t.children,n=e===void 0?"No options":e,r=t.innerProps,s=Td(t,H6e);return Pn("div",Gn({},Ua(Sn(Sn({},s),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:iPe,MultiValueContainer:TU,MultiValueLabel:TU,MultiValueRemove:function(t){var e=t.children,n=t.innerProps;return Pn("div",Gn({role:"button"},n),e||Pn(XS,{size:14}))},Option:function(t){var e=t.children,n=t.isDisabled,r=t.isFocused,s=t.isSelected,a=t.innerRef,i=t.innerProps;return Pn("div",Gn({},Ua(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":s}),{ref:a,"aria-disabled":n},i),e)},Placeholder:function(t){var e=t.children,n=t.innerProps;return Pn("div",Gn({},Ua(t,"placeholder",{placeholder:!0}),n),e)},SelectContainer:function(t){var e=t.children,n=t.innerProps,r=t.isDisabled,s=t.isRtl;return Pn("div",Gn({},Ua(t,"container",{"--is-disabled":r,"--is-rtl":s}),n),e)},SingleValue:function(t){var e=t.children,n=t.isDisabled,r=t.innerProps;return Pn("div",Gn({},Ua(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),e)},ValueContainer:function(t){var e=t.children,n=t.innerProps,r=t.isMulti,s=t.hasValue;return Pn("div",Gn({},Ua(t,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),n),e)}},NU=Number.isNaN||function(t){return typeof t=="number"&&t!=t};function lPe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(r=t[n],s=e[n],!(r===s||NU(r)&&NU(s)))return!1;var r,s;return!0}for(var cPe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},BU=function(t){return Pn("span",Gn({css:cPe},t))},uPe={guidance:function(t){var e=t.isSearchable,n=t.isMulti,r=t.tabSelectsValue,s=t.context,a=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(t["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var e=t.action,n=t.label,r=n===void 0?"":n,s=t.labels,a=t.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return"option ".concat(r,a?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(t){var e=t.context,n=t.focused,r=t.options,s=t.label,a=s===void 0?"":s,i=t.selectValue,o=t.isDisabled,l=t.isSelected,c=t.isAppleDevice,A=function(g,w){return g&&g.length?"".concat(g.indexOf(w)+1," of ").concat(g.length):""};if(e==="value"&&i)return"value ".concat(a," focused, ").concat(A(i,n),".");if(e==="menu"&&c){var h=o?" disabled":"",p="".concat(l?" selected":"").concat(h);return"".concat(a).concat(p,", ").concat(A(r,n),".")}return""},onFilter:function(t){var e=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}},dPe=function(t){var e=t.ariaSelection,n=t.focusedOption,r=t.focusedValue,s=t.focusableOptions,a=t.isFocused,i=t.selectValue,o=t.selectProps,l=t.id,c=t.isAppleDevice,A=o.ariaLiveMessages,h=o.getOptionLabel,p=o.inputValue,g=o.isMulti,w=o.isOptionDisabled,x=o.isSearchable,S=o.menuIsOpen,N=o.options,F=o.screenReaderStatus,D=o.tabSelectsValue,R=o.isLoading,j=o["aria-label"],P=o["aria-live"],E=W.useMemo(function(){return Sn(Sn({},uPe),A||{})},[A]),T=W.useMemo(function(){var q,oe="";if(e&&E.onChange){var ee=e.option,le=e.options,K=e.removedValue,ne=e.removedValues,J=e.value,ce=K||ee||(q=J,Array.isArray(q)?null:q),Q=ce?h(ce):"",Z=le||ne||void 0,se=Z?Z.map(h):[],ie=Sn({isDisabled:ce&&w(ce,i),label:Q,labels:se},e);oe=E.onChange(ie)}return oe},[e,E,w,i,h]),k=W.useMemo(function(){var q="",oe=n||r,ee=!!(n&&i&&i.includes(n));if(oe&&E.onFocus){var le={focused:oe,label:h(oe),isDisabled:w(oe,i),isSelected:ee,options:s,context:oe===n?"menu":"value",selectValue:i,isAppleDevice:c};q=E.onFocus(le)}return q},[n,r,h,w,E,s,i,c]),z=W.useMemo(function(){var q="";if(S&&N.length&&!R&&E.onFilter){var oe=F({count:s.length});q=E.onFilter({inputValue:p,resultsMessage:oe})}return q},[s,p,S,E,N,F,R]),M=(e==null?void 0:e.action)==="initial-input-focus",U=W.useMemo(function(){var q="";if(E.guidance){var oe=r?"value":S?"menu":"input";q=E.guidance({"aria-label":j,context:oe,isDisabled:n&&w(n,i),isMulti:g,isSearchable:x,tabSelectsValue:D,isInitialFocus:M})}return q},[j,n,r,g,w,x,S,E,i,D,M]),G=Pn(W.Fragment,null,Pn("span",{id:"aria-selection"},T),Pn("span",{id:"aria-focused"},k),Pn("span",{id:"aria-results"},z),Pn("span",{id:"aria-guidance"},U));return Pn(W.Fragment,null,Pn(BU,{id:l},M&&G),Pn(BU,{"aria-live":P,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!M&&G))},ZS=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],APe=new RegExp("["+ZS.map(function(t){return t.letters}).join("")+"]","g"),RG={},eT=0;eT<ZS.length;eT++)for(var tT=ZS[eT],nT=0;nT<tT.letters.length;nT++)RG[tT.letters[nT]]=tT.base;var PG=function(t){return t.replace(APe,function(e){return RG[e]})},fPe=function(t,e){e===void 0&&(e=lPe);var n=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;var i=t.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}(PG),kU=function(t){return t.replace(/^\s+|\s+$/g,"")},hPe=function(t){return"".concat(t.label," ").concat(t.value)},mPe=["innerRef"];function pPe(t){var e=t.innerRef,n=function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];var o=Object.entries(r).filter(function(l){var c=Zi(l,1)[0];return!a.includes(c)});return o.reduce(function(l,c){var A=Zi(c,2),h=A[0],p=A[1];return l[h]=p,l},{})}(Td(t,mPe),"onExited","in","enter","exit","appear");return Pn("input",Gn({ref:e},n,{css:hk({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var IU=["boxSizing","height","overflow","paddingRight","position"],FU={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function DU(t){t.preventDefault()}function LU(t){t.stopPropagation()}function RU(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function PU(){return"ontouchstart"in window||navigator.maxTouchPoints}var MU=!(typeof window>"u"||!window.document||!window.document.createElement),Kg=0,Em={capture:!1,passive:!1},gPe=function(t){var e=t.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},vPe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function xPe(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,s=function(i){var o=i.isEnabled,l=i.onBottomArrive,c=i.onBottomLeave,A=i.onTopArrive,h=i.onTopLeave,p=W.useRef(!1),g=W.useRef(!1),w=W.useRef(0),x=W.useRef(null),S=W.useCallback(function(P,E){if(x.current!==null){var T=x.current,k=T.scrollTop,z=T.scrollHeight,M=T.clientHeight,U=x.current,G=E>0,q=z-M-k,oe=!1;q>E&&p.current&&(c&&c(P),p.current=!1),G&&g.current&&(h&&h(P),g.current=!1),G&&E>q?(l&&!p.current&&l(P),U.scrollTop=z,oe=!0,p.current=!0):!G&&-E>k&&(A&&!g.current&&A(P),U.scrollTop=0,oe=!0,g.current=!0),oe&&function(ee){ee.cancelable&&ee.preventDefault(),ee.stopPropagation()}(P)}},[l,c,A,h]),N=W.useCallback(function(P){S(P,P.deltaY)},[S]),F=W.useCallback(function(P){w.current=P.changedTouches[0].clientY},[]),D=W.useCallback(function(P){var E=w.current-P.changedTouches[0].clientY;S(P,E)},[S]),R=W.useCallback(function(P){if(P){var E=!!O6e&&{passive:!1};P.addEventListener("wheel",N,E),P.addEventListener("touchstart",F,E),P.addEventListener("touchmove",D,E)}},[D,F,N]),j=W.useCallback(function(P){P&&(P.removeEventListener("wheel",N,!1),P.removeEventListener("touchstart",F,!1),P.removeEventListener("touchmove",D,!1))},[D,F,N]);return W.useEffect(function(){if(o){var P=x.current;return R(P),function(){j(P)}}},[o,R,j]),function(P){x.current=P}}({isEnabled:r===void 0||r,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),a=function(i){var o=i.isEnabled,l=i.accountForScrollbars,c=l===void 0||l,A=W.useRef({}),h=W.useRef(null),p=W.useCallback(function(w){if(MU){var x=document.body,S=x&&x.style;if(c&&IU.forEach(function(R){var j=S&&S[R];A.current[R]=j}),c&&Kg<1){var N=parseInt(A.current.paddingRight,10)||0,F=document.body?document.body.clientWidth:0,D=window.innerWidth-F+N||0;Object.keys(FU).forEach(function(R){var j=FU[R];S&&(S[R]=j)}),S&&(S.paddingRight="".concat(D,"px"))}x&&PU()&&(x.addEventListener("touchmove",DU,Em),w&&(w.addEventListener("touchstart",RU,Em),w.addEventListener("touchmove",LU,Em))),Kg+=1}},[c]),g=W.useCallback(function(w){if(MU){var x=document.body,S=x&&x.style;Kg=Math.max(Kg-1,0),c&&Kg<1&&IU.forEach(function(N){var F=A.current[N];S&&(S[N]=F)}),x&&PU()&&(x.removeEventListener("touchmove",DU,Em),w&&(w.removeEventListener("touchstart",RU,Em),w.removeEventListener("touchmove",LU,Em)))}},[c]);return W.useEffect(function(){if(o){var w=h.current;return p(w),function(){g(w)}}},[o,p,g]),function(w){h.current=w}}({isEnabled:n});return Pn(W.Fragment,null,n&&Pn("div",{onClick:gPe,css:vPe}),e(function(i){s(i),a(i)}))}var yPe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},wPe=function(t){var e=t.name,n=t.onFocus;return Pn("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:yPe,value:"",onChange:function(){}})};function gN(t){var e;return typeof window<"u"&&window.navigator!=null&&t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform)}function MG(){return gN(/^Mac/i)}function bPe(){return gN(/^iPhone/i)||gN(/^iPad/i)||MG()&&navigator.maxTouchPoints>1}var _Pe,CPe={clearIndicator:J6e,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},control:function(t,e){var n=t.isDisabled,r=t.isFocused,s=t.theme,a=s.colors,i=s.borderRadius;return Sn({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:r?a.primary:a.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:r?a.primary:a.neutral30}})},dropdownIndicator:X6e,group:function(t,e){var n=t.theme.spacing;return e?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(t,e){var n=t.theme,r=n.colors,s=n.spacing;return Sn({label:"group",cursor:"default",display:"block"},e?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*s.baseUnit,paddingRight:3*s.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t,e){var n=t.isDisabled,r=t.theme,s=r.spacing.baseUnit,a=r.colors;return Sn({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:2*s,marginTop:2*s})},input:function(t,e){var n=t.isDisabled,r=t.value,s=t.theme,a=s.spacing,i=s.colors;return Sn(Sn({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},sPe),e?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:i.neutral80})},loadingIndicator:function(t,e){var n=t.isFocused,r=t.size,s=t.theme,a=s.colors,i=s.spacing.baseUnit;return Sn({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},e?{}:{color:n?a.neutral60:a.neutral20,padding:2*i})},loadingMessage:K6e,menu:function(t,e){var n,r=t.placement,s=t.theme,a=s.borderRadius,i=s.spacing,o=s.colors;return Sn((Hm(n={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(r),"100%"),Hm(n,"position","absolute"),Hm(n,"width","100%"),Hm(n,"zIndex",1),n),e?{}:{backgroundColor:o.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(t,e){var n=t.maxHeight,r=t.theme.spacing.baseUnit;return Sn({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}},multiValue:function(t,e){var n=t.theme,r=n.spacing,s=n.borderRadius,a=n.colors;return Sn({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},multiValueLabel:function(t,e){var n=t.theme,r=n.borderRadius,s=n.colors,a=t.cropWithEllipsis;return Sn({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(t,e){var n=t.theme,r=n.spacing,s=n.borderRadius,a=n.colors,i=t.isFocused;return Sn({alignItems:"center",display:"flex"},e?{}:{borderRadius:s/2,backgroundColor:i?a.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:q6e,option:function(t,e){var n=t.isDisabled,r=t.isFocused,s=t.isSelected,a=t.theme,i=a.spacing,o=a.colors;return Sn({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:s?o.primary:r?o.primary25:"transparent",color:n?o.neutral20:s?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:n?void 0:s?o.primary:o.primary50}})},placeholder:function(t,e){var n=t.theme,r=n.spacing,s=n.colors;return Sn({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(t,e){var n=t.isDisabled,r=t.theme,s=r.spacing,a=r.colors;return Sn({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:n?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},valueContainer:function(t,e){var n=t.theme.spacing,r=t.isMulti,s=t.hasValue,a=t.selectProps.controlShouldRenderValue;return Sn({alignItems:"center",display:r&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}},rT={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},EPe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:CU(),captureMenuScroll:!CU(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t,e){if(t.data.__isNew__)return!0;var n=Sn({ignoreCase:!0,ignoreAccents:!0,stringify:hPe,trim:!0,matchFrom:"any"},_Pe),r=n.ignoreCase,s=n.ignoreAccents,a=n.stringify,i=n.trim,o=n.matchFrom,l=i?kU(e):e,c=i?kU(a(t)):a(t);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),s&&(l=fPe(l),c=PG(c)),o==="start"?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(t){return!!t.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(e!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function UU(t,e,n,r){return{type:"option",data:e,isDisabled:OG(t,e,n),isSelected:jG(t,e,n),label:UG(t,e),value:Bb(t,e),index:r}}function yw(t,e){return t.options.map(function(n,r){if("options"in n){var s=n.options.map(function(i,o){return UU(t,i,e,o)}).filter(function(i){return HU(t,i)});return s.length>0?{type:"group",data:n,options:s,index:r}:void 0}var a=UU(t,n,e,r);return HU(t,a)?a:void 0}).filter(j6e)}function OU(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,ok(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function jU(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,ok(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function HU(t,e){var n=t.inputValue,r=n===void 0?"":n,s=e.data,a=e.isSelected,i=e.label,o=e.value;return(!QG(t)||!a)&&HG(t,{label:i,value:o,data:s},r)}var sT=function(t,e){var n;return((n=t.find(function(r){return r.data===e}))===null||n===void 0?void 0:n.id)||null},UG=function(t,e){return t.getOptionLabel(e)},Bb=function(t,e){return t.getOptionValue(e)};function OG(t,e,n){return typeof t.isOptionDisabled=="function"&&t.isOptionDisabled(e,n)}function jG(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=Bb(t,e);return n.some(function(s){return Bb(t,s)===r})}function HG(t,e,n){return!t.filterOption||t.filterOption(e,n)}var QG=function(t){var e=t.hideSelectedOptions,n=t.isMulti;return e===void 0?n:e},SPe=1,VG=function(t){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&oN(i,o)})(a,W.Component);var e,n,r,s=ZRe(a);function a(i){var o;if(function(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=MG()||bPe(),o.controlRef=null,o.getControlRef=function(h){o.controlRef=h},o.focusedOptionRef=null,o.getFocusedOptionRef=function(h){o.focusedOptionRef=h},o.menuListRef=null,o.getMenuListRef=function(h){o.menuListRef=h},o.inputRef=null,o.getInputRef=function(h){o.inputRef=h},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(h,p){var g=o.props,w=g.onChange,x=g.name;p.name=x,o.ariaOnChange(h,p),w(h,p)},o.setValue=function(h,p,g){var w=o.props,x=w.closeMenuOnSelect,S=w.isMulti,N=w.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:N}),x&&(o.setState({inputIsHiddenAfterUpdate:!S}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(h,{action:p,option:g})},o.selectOption=function(h){var p=o.props,g=p.blurInputOnSelect,w=p.isMulti,x=p.name,S=o.state.selectValue,N=w&&o.isOptionSelected(h,S),F=o.isOptionDisabled(h,S);if(N){var D=o.getOptionValue(h);o.setValue(S.filter(function(R){return o.getOptionValue(R)!==D}),"deselect-option",h)}else{if(F)return void o.ariaOnChange(h,{action:"select-option",option:h,name:x});w?o.setValue([].concat(ok(S),[h]),"select-option",h):o.setValue(h,"select-option")}g&&o.blurInput()},o.removeValue=function(h){var p=o.props.isMulti,g=o.state.selectValue,w=o.getOptionValue(h),x=g.filter(function(N){return o.getOptionValue(N)!==w}),S=xw(p,x,x[0]||null);o.onChange(S,{action:"remove-value",removedValue:h}),o.focusInput()},o.clearValue=function(){var h=o.state.selectValue;o.onChange(xw(o.props.isMulti,[],null),{action:"clear",removedValues:h})},o.popValue=function(){var h=o.props.isMulti,p=o.state.selectValue,g=p[p.length-1],w=p.slice(0,p.length-1),x=xw(h,w,w[0]||null);o.onChange(x,{action:"pop-value",removedValue:g})},o.getFocusedOptionId=function(h){return sT(o.state.focusableOptionsWithIds,h)},o.getFocusableOptionsWithIds=function(){return jU(yw(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return P6e.apply(void 0,[o.props.classNamePrefix].concat(p))},o.getOptionLabel=function(h){return UG(o.props,h)},o.getOptionValue=function(h){return Bb(o.props,h)},o.getStyles=function(h,p){var g=o.props.unstyled,w=CPe[h](p,g);w.boxSizing="border-box";var x=o.props.styles[h];return x?x(w,p):w},o.getClassNames=function(h,p){var g,w;return(g=(w=o.props.classNames)[h])===null||g===void 0?void 0:g.call(w,p)},o.getElementId=function(h){return"".concat(o.state.instancePrefix,"-").concat(h)},o.getComponents=function(){return h=o.props,Sn(Sn({},oPe),h.components);var h},o.buildCategorizedOptions=function(){return yw(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return OU(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(h,p){o.setState({ariaSelection:Sn({value:h},p)})},o.onMenuMouseDown=function(h){h.button===0&&(h.stopPropagation(),h.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(h){o.blockOptionHover=!1},o.onControlMouseDown=function(h){if(!h.defaultPrevented){var p=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&o.onMenuClose():p&&o.openMenu("first"):(p&&(o.openAfterFocus=!0),o.focusInput()),h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&h.preventDefault()}},o.onDropdownIndicatorMouseDown=function(h){if(!(h&&h.type==="mousedown"&&h.button!==0||o.props.isDisabled)){var p=o.props,g=p.isMulti,w=p.menuIsOpen;o.focusInput(),w?(o.setState({inputIsHiddenAfterUpdate:!g}),o.onMenuClose()):o.openMenu("first"),h.preventDefault()}},o.onClearIndicatorMouseDown=function(h){h&&h.type==="mousedown"&&h.button!==0||(o.clearValue(),h.preventDefault(),o.openAfterFocus=!1,h.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(h){typeof o.props.closeMenuOnScroll=="boolean"?h.target instanceof HTMLElement&&tC(h.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(h)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(h){var p=h.touches,g=p&&p.item(0);g&&(o.initialTouchX=g.clientX,o.initialTouchY=g.clientY,o.userIsDragging=!1)},o.onTouchMove=function(h){var p=h.touches,g=p&&p.item(0);if(g){var w=Math.abs(g.clientX-o.initialTouchX),x=Math.abs(g.clientY-o.initialTouchY);o.userIsDragging=w>5||x>5}},o.onTouchEnd=function(h){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(h.target)&&o.menuListRef&&!o.menuListRef.contains(h.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(h){o.userIsDragging||o.onControlMouseDown(h)},o.onClearIndicatorTouchEnd=function(h){o.userIsDragging||o.onClearIndicatorMouseDown(h)},o.onDropdownIndicatorTouchEnd=function(h){o.userIsDragging||o.onDropdownIndicatorMouseDown(h)},o.handleInputChange=function(h){var p=o.props.inputValue,g=h.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(g,{action:"input-change",prevInputValue:p}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(h){o.props.onFocus&&o.props.onFocus(h),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(h){var p=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(h),o.onInputChange("",{action:"input-blur",prevInputValue:p}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(h){if(!o.blockOptionHover&&o.state.focusedOption!==h){var p=o.getFocusableOptions().indexOf(h);o.setState({focusedOption:h,focusedOptionId:p>-1?o.getFocusedOptionId(h):null})}},o.shouldHideSelectedOptions=function(){return QG(o.props)},o.onValueInputFocus=function(h){h.preventDefault(),h.stopPropagation(),o.focus()},o.onKeyDown=function(h){var p=o.props,g=p.isMulti,w=p.backspaceRemovesValue,x=p.escapeClearsValue,S=p.inputValue,N=p.isClearable,F=p.isDisabled,D=p.menuIsOpen,R=p.onKeyDown,j=p.tabSelectsValue,P=p.openMenuOnFocus,E=o.state,T=E.focusedOption,k=E.focusedValue,z=E.selectValue;if(!(F||typeof R=="function"&&(R(h),h.defaultPrevented))){switch(o.blockOptionHover=!0,h.key){case"ArrowLeft":if(!g||S)return;o.focusValue("previous");break;case"ArrowRight":if(!g||S)return;o.focusValue("next");break;case"Delete":case"Backspace":if(S)return;if(k)o.removeValue(k);else{if(!w)return;g?o.popValue():N&&o.clearValue()}break;case"Tab":if(o.isComposing||h.shiftKey||!D||!j||!T||P&&o.isOptionSelected(T,z))return;o.selectOption(T);break;case"Enter":if(h.keyCode===229)break;if(D){if(!T||o.isComposing)return;o.selectOption(T);break}return;case"Escape":D?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:S}),o.onMenuClose()):N&&x&&o.clearValue();break;case" ":if(S)return;if(!D){o.openMenu("first");break}if(!T)return;o.selectOption(T);break;case"ArrowUp":D?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":D?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!D)return;o.focusOption("pageup");break;case"PageDown":if(!D)return;o.focusOption("pagedown");break;case"Home":if(!D)return;o.focusOption("first");break;case"End":if(!D)return;o.focusOption("last");break;default:return}h.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++SPe),o.state.selectValue=wU(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),c=o.buildFocusableOptions(),A=c.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=c[A],o.state.focusedOptionId=sT(l,c[A])}return o}return e=a,n=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&_U(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,c=o.menuIsOpen,A=this.state.isFocused;(A&&!l&&i.isDisabled||A&&c&&!i.menuIsOpen)&&this.focusInput(),A&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):A||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(_U(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,c=l.selectValue,A=l.isFocused,h=this.buildFocusableOptions(),p=i==="first"?0:h.length-1;if(!this.props.isMulti){var g=h.indexOf(c[0]);g>-1&&(p=g)}this.scrollToFocusedOptionOnUpdate=!(A&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[p],focusedOptionId:this.getFocusedOptionId(h[p])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,c=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var A=l.indexOf(c);c||(A=-1);var h=l.length-1,p=-1;if(l.length){switch(i){case"previous":p=A===0?0:A===-1?h:A-1;break;case"next":A>-1&&A<h&&(p=A+1)}this.setState({inputIsHidden:p!==-1,focusedValue:l[p]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var A=0,h=c.indexOf(l);l||(h=-1),i==="up"?A=h>0?h-1:c.length-1:i==="down"?A=(h+1)%c.length:i==="pageup"?(A=h-o)<0&&(A=0):i==="pagedown"?(A=h+o)>c.length-1&&(A=c.length-1):i==="last"&&(A=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[A],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[A])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(rT):Sn(Sn({},rT),this.props.theme):rT}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,c=this.getClassNames,A=this.getValue,h=this.selectOption,p=this.setValue,g=this.props,w=g.isMulti,x=g.isRtl,S=g.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:c,getValue:A,hasValue:this.hasValue(),isMulti:w,isRtl:x,options:S,selectOption:h,selectProps:g,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return OG(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return jG(this.props,i,o)}},{key:"filterOption",value:function(i,o){return HG(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:c})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,c=i.inputId,A=i.inputValue,h=i.tabIndex,p=i.form,g=i.menuIsOpen,w=i.required,x=this.getComponents().Input,S=this.state,N=S.inputIsHidden,F=S.ariaSelection,D=this.commonProps,R=c||this.getElementId("input"),j=Sn(Sn(Sn({"aria-autocomplete":"list","aria-expanded":g,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},g&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(F==null?void 0:F.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?W.createElement(x,Gn({},D,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:R,innerRef:this.getInputRef,isDisabled:o,isHidden:N,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:p,type:"text",value:A},j)):W.createElement(pPe,Gn({id:R,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Tb,onFocus:this.onInputFocus,disabled:o,tabIndex:h,inputMode:"none",form:p,value:""},j))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,c=o.MultiValueContainer,A=o.MultiValueLabel,h=o.MultiValueRemove,p=o.SingleValue,g=o.Placeholder,w=this.commonProps,x=this.props,S=x.controlShouldRenderValue,N=x.isDisabled,F=x.isMulti,D=x.inputValue,R=x.placeholder,j=this.state,P=j.selectValue,E=j.focusedValue,T=j.isFocused;if(!this.hasValue()||!S)return D?null:W.createElement(g,Gn({},w,{key:"placeholder",isDisabled:N,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),R);if(F)return P.map(function(z,M){var U=z===E,G="".concat(i.getOptionLabel(z),"-").concat(i.getOptionValue(z));return W.createElement(l,Gn({},w,{components:{Container:c,Label:A,Remove:h},isFocused:U,isDisabled:N,key:G,index:M,removeProps:{onClick:function(){return i.removeValue(z)},onTouchEnd:function(){return i.removeValue(z)},onMouseDown:function(q){q.preventDefault()}},data:z}),i.formatOptionLabel(z,"value"))});if(D)return null;var k=P[0];return W.createElement(p,Gn({},w,{data:k,isDisabled:N}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,A=l.isLoading,h=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||A)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return W.createElement(i,Gn({},o,{innerProps:p,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,A=l.isLoading,h=this.state.isFocused;return i&&A?W.createElement(i,Gn({},o,{innerProps:{"aria-hidden":"true"},isDisabled:c,isFocused:h})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var c=this.commonProps,A=this.props.isDisabled,h=this.state.isFocused;return W.createElement(l,Gn({},c,{isDisabled:A,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,A={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return W.createElement(i,Gn({},o,{innerProps:A,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,c=o.GroupHeading,A=o.Menu,h=o.MenuList,p=o.MenuPortal,g=o.LoadingMessage,w=o.NoOptionsMessage,x=o.Option,S=this.commonProps,N=this.state.focusedOption,F=this.props,D=F.captureMenuScroll,R=F.inputValue,j=F.isLoading,P=F.loadingMessage,E=F.minMenuHeight,T=F.maxMenuHeight,k=F.menuIsOpen,z=F.menuPlacement,M=F.menuPosition,U=F.menuPortalTarget,G=F.menuShouldBlockScroll,q=F.menuShouldScrollIntoView,oe=F.noOptionsMessage,ee=F.onMenuScrollToTop,le=F.onMenuScrollToBottom;if(!k)return null;var K,ne=function(se,ie){var fe=se.type,Se=se.data,ge=se.isDisabled,xe=se.isSelected,ve=se.label,me=se.value,he=N===Se,He=ge?void 0:function(){return i.onOptionHover(Se)},et=ge?void 0:function(){return i.selectOption(Se)},Ue="".concat(i.getElementId("option"),"-").concat(ie),Ie={id:Ue,onClick:et,onMouseMove:He,onMouseOver:He,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:xe};return W.createElement(x,Gn({},S,{innerProps:Ie,data:Se,isDisabled:ge,isSelected:xe,key:Ue,label:ve,type:fe,value:me,isFocused:he,innerRef:he?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(se.data,"menu"))};if(this.hasOptions())K=this.getCategorizedOptions().map(function(se){if(se.type==="group"){var ie=se.data,fe=se.options,Se=se.index,ge="".concat(i.getElementId("group"),"-").concat(Se),xe="".concat(ge,"-heading");return W.createElement(l,Gn({},S,{key:ge,data:ie,options:fe,Heading:c,headingProps:{id:xe,data:se.data},label:i.formatGroupLabel(se.data)}),se.options.map(function(ve){return ne(ve,"".concat(Se,"-").concat(ve.index))}))}if(se.type==="option")return ne(se,"".concat(se.index))});else if(j){var J=P({inputValue:R});if(J===null)return null;K=W.createElement(g,S,J)}else{var ce=oe({inputValue:R});if(ce===null)return null;K=W.createElement(w,S,ce)}var Q={minMenuHeight:E,maxMenuHeight:T,menuPlacement:z,menuPosition:M,menuShouldScrollIntoView:q},Z=W.createElement(z6e,Gn({},S,Q),function(se){var ie=se.ref,fe=se.placerProps,Se=fe.placement,ge=fe.maxHeight;return W.createElement(A,Gn({},S,Q,{innerRef:ie,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:j,placement:Se}),W.createElement(xPe,{captureEnabled:D,onTopArrive:ee,onBottomArrive:le,lockEnabled:G},function(xe){return W.createElement(h,Gn({},S,{innerRef:function(ve){i.getMenuListRef(ve),xe(ve)},innerProps:{role:"listbox","aria-multiselectable":S.isMulti,id:i.getElementId("listbox")},isLoading:j,maxHeight:ge,focusedOption:N}),K)}))});return U||M==="fixed"?W.createElement(p,Gn({},S,{appendTo:U,controlElement:this.controlRef,menuPlacement:z,menuPosition:M}),Z):Z}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,c=o.isDisabled,A=o.isMulti,h=o.name,p=o.required,g=this.state.selectValue;if(p&&!this.hasValue()&&!c)return W.createElement(wPe,{name:h,onFocus:this.onValueInputFocus});if(h&&!c){if(A){if(l){var w=g.map(function(N){return i.getOptionValue(N)}).join(l);return W.createElement("input",{name:h,type:"hidden",value:w})}var x=g.length>0?g.map(function(N,F){return W.createElement("input",{key:"i-".concat(F),name:h,type:"hidden",value:i.getOptionValue(N)})}):W.createElement("input",{name:h,type:"hidden",value:""});return W.createElement("div",null,x)}var S=g[0]?this.getOptionValue(g[0]):"";return W.createElement("input",{name:h,type:"hidden",value:S})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,c=o.focusedOption,A=o.focusedValue,h=o.isFocused,p=o.selectValue,g=this.getFocusableOptions();return W.createElement(dPe,Gn({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:c,focusedValue:A,isFocused:h,selectValue:p,focusableOptions:g,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,c=i.SelectContainer,A=i.ValueContainer,h=this.props,p=h.className,g=h.id,w=h.isDisabled,x=h.menuIsOpen,S=this.state.isFocused,N=this.commonProps=this.getCommonProps();return W.createElement(c,Gn({},N,{className:p,innerProps:{id:g,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:S}),this.renderLiveRegion(),W.createElement(o,Gn({},N,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:S,menuIsOpen:x}),W.createElement(A,Gn({},N,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),W.createElement(l,Gn({},N,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],r=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,c=o.clearFocusValueOnUpdate,A=o.inputIsHiddenAfterUpdate,h=o.ariaSelection,p=o.isFocused,g=o.prevWasFocused,w=o.instancePrefix,x=i.options,S=i.value,N=i.menuIsOpen,F=i.inputValue,D=i.isMulti,R=wU(S),j={};if(l&&(S!==l.value||x!==l.options||N!==l.menuIsOpen||F!==l.inputValue)){var P=N?function(G,q){return OU(yw(G,q))}(i,R):[],E=N?jU(yw(i,R),"".concat(w,"-option")):[],T=c?function(G,q){var oe=G.focusedValue,ee=G.selectValue.indexOf(oe);if(ee>-1){if(q.indexOf(oe)>-1)return oe;if(ee<q.length)return q[ee]}return null}(o,R):null,k=function(G,q){var oe=G.focusedOption;return oe&&q.indexOf(oe)>-1?oe:q[0]}(o,P);j={selectValue:R,focusedOption:k,focusedOptionId:sT(E,k),focusableOptionsWithIds:E,focusedValue:T,clearFocusValueOnUpdate:!1}}var z=A!=null&&i!==l?{inputIsHidden:A,inputIsHiddenAfterUpdate:void 0}:{},M=h,U=p&&g;return p&&!U&&(M={value:xw(D,R,R[0]||null),options:R,action:"initial-input-focus"},U=!g),(h==null?void 0:h.action)==="initial-input-focus"&&(M=null),Sn(Sn(Sn({},j),z),{},{prevProps:i,ariaSelection:M,prevWasFocused:U})}}],n&&nU(e.prototype,n),r&&nU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}();VG.defaultProps=EPe;var TPe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],NPe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],mk=bs(function(t){function e(n){return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}),BPe=bs(function(t){var e=mk.default;t.exports=function(n,r){if(e(n)!=="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r||"default");if(e(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)},t.exports.__esModule=!0,t.exports.default=t.exports}),zG=bs(function(t){var e=mk.default;t.exports=function(n){var r=BPe(n,"string");return e(r)==="symbol"?r:String(r)},t.exports.__esModule=!0,t.exports.default=t.exports}),kPe=bs(function(t){t.exports=function(e,n,r){return(n=zG(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports});bs(function(t){function e(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),s.push.apply(s,a)}return s}t.exports=function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?e(Object(s),!0).forEach(function(a){kPe(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n},t.exports.__esModule=!0,t.exports.default=t.exports}),bs(function(t){t.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}),bs(function(t){function e(n,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,zG(a.key),a)}}t.exports=function(n,r,s){return r&&e(n.prototype,r),s&&e(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n},t.exports.__esModule=!0,t.exports.default=t.exports});var IPe=bs(function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports});bs(function(t){t.exports=function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&IPe(e,n)},t.exports.__esModule=!0,t.exports.default=t.exports});var QU=bs(function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}),FPe=bs(function(t){t.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}),DPe=bs(function(t){t.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports}),LPe=bs(function(t){var e=mk.default;t.exports=function(n,r){if(r&&(e(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DPe(n)},t.exports.__esModule=!0,t.exports.default=t.exports});bs(function(t){t.exports=function(e){var n=FPe();return function(){var r,s=QU(e);if(n){var a=QU(this).constructor;r=Reflect.construct(s,arguments,a)}else r=s.apply(this,arguments);return LPe(this,r)}},t.exports.__esModule=!0,t.exports.default=t.exports});var vN=bs(function(t){t.exports=function(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s},t.exports.__esModule=!0,t.exports.default=t.exports}),RPe=bs(function(t){t.exports=function(e){if(Array.isArray(e))return vN(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),PPe=bs(function(t){t.exports=function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),GG=bs(function(t){t.exports=function(e,n){if(e){if(typeof e=="string")return vN(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vN(e,n):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}),MPe=bs(function(t){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports});bs(function(t){t.exports=function(e){return RPe(e)||PPe(e)||GG(e)||MPe()},t.exports.__esModule=!0,t.exports.default=t.exports});var UPe=bs(function(t){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports}),OPe=bs(function(t){t.exports=function(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,A=!1;try{if(i=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==n);c=!0);}catch(h){A=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(A)throw a}}return l}},t.exports.__esModule=!0,t.exports.default=t.exports}),jPe=bs(function(t){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports});bs(function(t){t.exports=function(e,n){return UPe(e)||OPe(e,n)||GG(e,n)||jPe()},t.exports.__esModule=!0,t.exports.default=t.exports});var HPe=bs(function(t){t.exports=function(e,n){if(e==null)return{};var r,s,a={},i=Object.keys(e);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)>=0||(a[r]=e[r]);return a},t.exports.__esModule=!0,t.exports.default=t.exports});bs(function(t){t.exports=function(e,n){if(e==null)return{};var r,s,a=HPe(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},t.exports.__esModule=!0,t.exports.default=t.exports}),bs(function(t){t.exports=function(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))},t.exports.__esModule=!0,t.exports.default=t.exports});var QPe=W.forwardRef(function(t,e){var n=function(s){var a=s.defaultOptions,i=a!==void 0&&a,o=s.cacheOptions,l=o!==void 0&&o,c=s.loadOptions;s.options;var A=s.isLoading,h=A!==void 0&&A,p=s.onInputChange,g=s.filterOption,w=g===void 0?null:g,x=Td(s,NPe),S=x.inputValue,N=W.useRef(void 0),F=W.useRef(!1),D=Zi(W.useState(Array.isArray(i)?i:void 0),2),R=D[0],j=D[1],P=Zi(W.useState(S!==void 0?S:""),2),E=P[0],T=P[1],k=Zi(W.useState(i===!0),2),z=k[0],M=k[1],U=Zi(W.useState(void 0),2),G=U[0],q=U[1],oe=Zi(W.useState([]),2),ee=oe[0],le=oe[1],K=Zi(W.useState(!1),2),ne=K[0],J=K[1],ce=Zi(W.useState({}),2),Q=ce[0],Z=ce[1],se=Zi(W.useState(void 0),2),ie=se[0],fe=se[1],Se=Zi(W.useState(void 0),2),ge=Se[0],xe=Se[1];l!==ge&&(Z({}),xe(l)),i!==ie&&(j(Array.isArray(i)?i:void 0),fe(i)),W.useEffect(function(){return F.current=!0,function(){F.current=!1}},[]);var ve=W.useCallback(function(He,et){if(!c)return et();var Ue=c(He,et);Ue&&typeof Ue.then=="function"&&Ue.then(et,function(){return et()})},[c]);W.useEffect(function(){i===!0&&ve(E,function(He){F.current&&(j(He||[]),M(!!N.current))})},[]);var me=W.useCallback(function(He,et){var Ue=function(je,Ke,rt){if(rt){var xt=rt(je,Ke);if(typeof xt=="string")return xt}return je}(He,et,p);if(!Ue)return N.current=void 0,T(""),q(""),le([]),M(!1),void J(!1);if(l&&Q[Ue])T(Ue),q(Ue),le(Q[Ue]),M(!1),J(!1);else{var Ie=N.current={};T(Ue),M(!0),J(!G),ve(Ue,function(je){F&&Ie===N.current&&(N.current=void 0,M(!1),q(Ue),le(je||[]),J(!1),Z(je?Sn(Sn({},Q),{},Hm({},Ue,je)):Q))})}},[l,ve,G,Q,p]),he=ne?[]:E&&G?ee:R||[];return Sn(Sn({},x),{},{options:he,isLoading:z||h,onInputChange:me,filterOption:w})}(t),r=function(s){var a=s.defaultInputValue,i=a===void 0?"":a,o=s.defaultMenuIsOpen,l=o!==void 0&&o,c=s.defaultValue,A=c===void 0?null:c,h=s.inputValue,p=s.menuIsOpen,g=s.onChange,w=s.onInputChange,x=s.onMenuClose,S=s.onMenuOpen,N=s.value,F=Td(s,TPe),D=Zi(W.useState(h!==void 0?h:i),2),R=D[0],j=D[1],P=Zi(W.useState(p!==void 0?p:l),2),E=P[0],T=P[1],k=Zi(W.useState(N!==void 0?N:A),2),z=k[0],M=k[1],U=W.useCallback(function(ne,J){typeof g=="function"&&g(ne,J),M(ne)},[g]),G=W.useCallback(function(ne,J){var ce;typeof w=="function"&&(ce=w(ne,J)),j(ce!==void 0?ce:ne)},[w]),q=W.useCallback(function(){typeof S=="function"&&S(),T(!0)},[S]),oe=W.useCallback(function(){typeof x=="function"&&x(),T(!1)},[x]),ee=h!==void 0?h:R,le=p!==void 0?p:E,K=N!==void 0?N:z;return Sn(Sn({},F),{},{inputValue:ee,menuIsOpen:le,onChange:U,onInputChange:G,onMenuClose:oe,onMenuOpen:q,value:K})}(n);return W.createElement(VG,Gn({ref:e},r))}),VPe=QPe,zPe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(s=r;s--!=0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(a=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(s=r;s--!=0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!=0;){var i=a[s];if(!t(e[i],n[i]))return!1}return!0}return e!=e&&n!=n},Qm;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Qm||(Qm={}));class Hh{constructor({apiKey:e,authReferrerPolicy:n,channel:r,client:s,id:a="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:c,region:A,retries:h=3,url:p="https://maps.googleapis.com/maps/api/js",version:g}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=n,this.channel=r,this.client=s,this.id=a||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=c,this.region=A,this.retries=h,this.url=p,this.version=g,Hh.instance){if(!zPe(this.options,Hh.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Hh.instance.options)}`);return Hh.instance}Hh.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Qm.FAILURE:this.done?Qm.SUCCESS:this.loading?Qm.LOADING:Qm.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(r=>{r?n(r.error):e(window.google)})})}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),n=document.createElement("script");n.id=this.id,n.type="text/javascript",n.src=e,n.onerror=this.loadErrorCallback.bind(this),n.defer=!0,n.async=!0,this.nonce&&(n.nonce=this.nonce),document.head.appendChild(n)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const n=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${n} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var GPe=function(t,e,n){var r,s=t.bounds,a=t.location,i=function(l,c){var A={};for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&c.indexOf(h)<0&&(A[h]=l[h]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(l);p<h.length;p++)c.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(l,h[p])&&(A[h[p]]=l[h[p]])}return A}(t,["bounds","location"]),o=s0({input:e},i);return n&&(o.sessionToken=n),s&&(o.bounds=new((r=google.maps.LatLngBounds).bind.apply(r,function(){for(var l=0,c=0,A=arguments.length;c<A;c++)l+=arguments[c].length;var h=Array(l),p=0;for(c=0;c<A;c++)for(var g=arguments[c],w=0,x=g.length;w<x;w++,p++)h[p]=g[w];return h}([void 0],s)))),a&&(o.location=new google.maps.LatLng(a)),o},qPe=function(t){var e=t.autocompletionRequest,n=t.debounce,r=t.minLengthAutocomplete,s=t.placesService,a=t.sessionToken,i=t.withSessionToken,o=function(l,c,A){A===void 0&&(A={});var h=A.maxWait,p=W.useRef(null),g=W.useRef([]),w=A.leading,x=A.trailing===void 0||A.trailing,S=W.useRef(!1),N=W.useRef(null),F=W.useRef(!1),D=W.useRef(l);D.current=l;var R=W.useCallback(function(){clearTimeout(N.current),clearTimeout(p.current),p.current=null,g.current=[],N.current=null,S.current=!1},[]);W.useEffect(function(){return F.current=!1,function(){F.current=!0}},[]);var j=W.useCallback(function(){for(var E=[],T=0;T<arguments.length;T++)E[T]=arguments[T];g.current=E,clearTimeout(N.current),S.current&&(S.current=!1),N.current||!w||S.current||(D.current.apply(D,E),S.current=!0),N.current=setTimeout(function(){var k=!0;w&&S.current&&(k=!1),R(),!F.current&&x&&k&&D.current.apply(D,E)},c),h&&!p.current&&x&&(p.current=setTimeout(function(){var k=g.current;R(),F.current||D.current.apply(null,k)},h))},[h,c,R,w,x]),P=W.useCallback(function(){N.current&&(D.current.apply(null,g.current),R())},[R]);return[j,R,P]}(function(l,c){if(!s)return c([]);if(l.length<r)return c([]);var A=s0({},e);s.getPlacePredictions(GPe(A,l,i&&a),function(h){c((h||[]).map(function(p){return{label:p.description,value:p}}))})},n)[0];return o},KPe=W.forwardRef(function(t,e){var n,r,s,a,i,o,l,c,A=function(x){var S=x.apiKey,N=x.apiOptions,F=x.onLoadFailed,D=W.useState(void 0),R=D[0],j=D[1],P=W.useState(void 0),E=P[0],T=P[1],k=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");j(new window.google.maps.places.AutocompleteService),T(new google.maps.places.AutocompleteSessionToken)};return W.useEffect(function(){S?YRe(void 0,void 0,void 0,function(){var z;return XRe(this,function(M){switch(M.label){case 0:if(!S)return[2];M.label=1;case 1:return M.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Hh(s0({apiKey:S},s0({libraries:["places"]},N))).load()];case 2:M.sent(),M.label=3;case 3:return k(),[3,5];case 4:return z=M.sent(),typeof F=="function"&&F(z),[3,5];case 5:return[2]}})}):k()},[]),{placesService:R,sessionToken:E,setSessionToken:T}}({apiKey:(n=t.apiKey)!==null&&n!==void 0?n:"",apiOptions:(r=t.apiOptions)!==null&&r!==void 0?r:{},onLoadFailed:(s=t.onLoadFailed)!==null&&s!==void 0?s:console.error}),h=A.placesService,p=A.sessionToken,g=A.setSessionToken,w=qPe({autocompletionRequest:(a=t.autocompletionRequest)!==null&&a!==void 0?a:{},debounce:(i=t.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=t.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:h,sessionToken:p,withSessionToken:(l=t.withSessionToken)!==null&&l!==void 0&&l});return W.useImperativeHandle(e,function(){return{getSessionToken:function(){return p},refreshSessionToken:function(){g(new google.maps.places.AutocompleteSessionToken)}}},[p]),yt.createElement(VPe,s0({},(c=t.selectProps)!==null&&c!==void 0?c:{},{loadOptions:w,getOptionValue:function(x){return x.value.place_id}}))});delete rG.Icon.Default.prototype._getIconUrl;rG.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const $Pe=t=>{const[e,n]=W.useState(!1),[r,s]=W.useState(null);return W.useEffect(()=>{const a="google-maps-script";if(document.getElementById(a)||window.google){n(!0);return}const i=document.createElement("script");i.id=a,i.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places`,i.async=!0,i.defer=!0,i.onload=()=>n(!0),i.onerror=()=>s(new Error("No se pudo cargar el script de Google Maps.")),document.head.appendChild(i)},[t]),{isLoaded:e,error:r}},WPe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"}],YPe=()=>({nombre:"",rut:"",direccion:"",contacto:"",cupos:1,calificaciones:WPe.map(t=>({...t,score:null})),estudiantesAsignados:[]}),XPe=({empresas:t})=>{const e=t.filter(r=>{var s,a;return((s=r.coordenadas)==null?void 0:s.lat)&&((a=r.coordenadas)==null?void 0:a.lng)}),n=[-33.4489,-70.6693];return u.jsx("div",{className:"h-[600px] w-full rounded-lg overflow-hidden border dark:border-slate-700",children:u.jsxs(qRe,{center:n,zoom:11,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[u.jsx(WRe,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.map(r=>u.jsx(KRe,{position:[r.coordenadas.lat,r.coordenadas.lng],children:u.jsxs($Re,{children:[u.jsx("strong",{children:r.nombre}),u.jsx("br",{}),r.direccion]})},r.id))]})})},JPe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[s,a]=W.useState("list"),[i,o]=W.useState(null),[l,c]=W.useState(!0),[A,h]=W.useState(null),p="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:g,error:w}=$Pe(p);W.useEffect(()=>{const D=TRe(e),R=kRe(j=>{r(j),c(!1)});return()=>{D(),R()}},[]);const x=async()=>{if(i)try{await NRe(i),a("list"),o(null),h(null)}catch(D){console.error("Error al guardar la empresa:",D),alert("No se pudo guardar la empresa.")}},S=async D=>{window.confirm("Est seguro de eliminar esta empresa?")&&await BRe(D)},N=(D,R)=>{o(j=>j?{...j,[D]:R}:null)},F=D=>{o(JSON.parse(JSON.stringify(D))),D.direccion&&h({label:D.direccion,value:{description:D.direccion}}),a("form")};return l?u.jsx("div",{className:"text-center p-8",children:"Cargando..."}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),u.jsxs("div",{className:"flex items-center gap-4",children:[s!=="list"&&u.jsx("button",{onClick:()=>{a("list"),h(null)},className:"font-semibold",children:" Volver"}),s==="list"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>a("map"),title:"Vista de Mapa",className:"bg-slate-200 p-2 rounded-lg",children:""}),u.jsx("button",{onClick:()=>{o(YPe()),a("form")},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg",children:"Crear Empresa"})]})]})]}),s==="map"&&u.jsx(XPe,{empresas:t}),s==="list"&&u.jsx("div",{className:"space-y-3",children:t.map(D=>u.jsx("div",{className:"p-4 border rounded-lg bg-slate-50",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg",children:D.nombre}),u.jsxs("p",{className:"text-sm text-slate-500",children:[D.rut," | ",D.direccion]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>F(D),className:"text-sm font-semibold",children:"Editar"}),u.jsx("button",{onClick:()=>S(D.id),className:"text-sm text-red-500",children:"Eliminar"})]})]})},D.id))}),s==="form"&&i&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("input",{value:i.nombre,onChange:D=>N("nombre",D.target.value),placeholder:"Nombre Empresa",className:"input-style"}),u.jsx("input",{value:i.rut,onChange:D=>N("rut",D.target.value),placeholder:"RUT Empresa",className:"input-style"}),u.jsx("div",{className:"md:col-span-2",children:w?u.jsx("p",{className:"text-red-500",children:"Error al cargar la API de Google Maps."}):g?u.jsx(KPe,{apiKey:p,selectProps:{value:A,onChange:D=>{h(D),N("direccion",(D==null?void 0:D.label)||"")},placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}}):u.jsx("input",{disabled:!0,className:"input-style w-full",placeholder:"Cargando autocompletado..."})}),u.jsx("input",{value:i.contacto,onChange:D=>N("contacto",D.target.value),placeholder:"Contacto",className:"input-style"})]}),u.jsx("button",{onClick:x,className:"w-full bg-amber-500 text-white font-bold py-2 rounded-lg",children:"Guardar Empresa"})]})]})},ZPe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},eMe=({currentUser:t,onLogout:e,onUserUpdate:n,onChangeProfile:r,canChangeProfile:s,unreadMessagesCount:a,refreshUnreadCount:i})=>{const o=t.profile,l=W.useMemo(()=>{const N=Pee[o];return o!==tn.ESTUDIANTE?N:N.filter(F=>{if(F.name==="Asistencia a Empresa"){const D=ZPe(t.curso||"");return D.startsWith("3")||D.startsWith("4")}return!0})},[o,t.curso]),[c,A]=W.useState(null),[h,p]=W.useState(!1);W.useEffect(()=>{l&&l.length>0?A(l[0]):A(null)},[o,l]);const g=W.useCallback(N=>{A(N),window.innerWidth<768&&p(!1)},[]),w=W.useCallback(N=>{const F=l.find(D=>D.name===N);F&&g(F)},[l,g]),x=()=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[u.jsx(yee,{}),u.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestin LIR"})]}),u.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(N=>u.jsxs("button",{onClick:()=>g(N),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(c==null?void 0:c.name)===N.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[N.icon,u.jsx("span",{className:"ml-4",children:N.name})]},N.name))})]}),S=()=>{if(!c)return u.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un mdulo del men para comenzar."})});if(c.name==="Calendario Acadmico")return u.jsx(yne,{profile:o});if(c.name==="Muro de Anuncios")return u.jsx(Ene,{currentUser:t});if(c.name==="Mensajera Interna")return u.jsx(BCe,{currentUser:t,refreshUnreadCount:i});if(c.name==="Generador de Actas")return u.jsx(Dne,{});if(o===tn.SUBDIRECCION){if(c.name==="Dashboard")return u.jsx(dte,{currentUser:t});if(c.name==="Administracin")return u.jsx(rpe,{});if(c.name==="Seguimiento Curricular")return u.jsx(xRe,{currentUser:t});if(c.name==="Acompaamiento docente")return u.jsx(wCe,{currentUser:t});if(c.name==="Anlisis Taxonmico")return u.jsx(ZM,{currentUser:t});if(c.name==="Interdisciplinario")return u.jsx(VP,{});if(c.name==="Registro de inasistencias y reemplazos docentes")return u.jsx(ite,{currentUser:t});if(c.name==="Crear horarios")return u.jsx($te,{});if(c.name==="Seguimiento de acciones pedaggicas")return u.jsx(Zte,{});if(c.name==="Inclusin")return u.jsx(ER,{currentUser:t})}if(o===tn.PROFESORADO){if(c.name==="Planificacin")return u.jsx(Ane,{currentUser:t});if(c.name==="Mis Acompaamientos")return u.jsx($Le,{currentUser:t});if(c.name==="Recursos de Aprendizaje")return u.jsx(LLe,{});if(c.name==="Anlisis Taxonmico")return u.jsx(ZM,{currentUser:t});if(c.name==="Interdisciplinario")return u.jsx(VP,{});if(c.name==="Inclusin")return u.jsx(ER,{currentUser:t});if(c.name==="Actividades Remotas")return u.jsx(wpe,{});if(c.name==="Evaluacin de Aprendizajes")return u.jsx(Lse,{});if(c.name==="Evaluaciones Formativas")return u.jsx(fge,{currentUser:t})}if(o===tn.COORDINACION_TP){if(c.name==="Seguimiento Dual")return u.jsx(fpe,{});if(c.name==="Asistencia Dual")return u.jsx(Xpe,{});if(c.name==="Paol")return u.jsx(gBe,{});if(c.name==="Gestin de Empresas")return u.jsx(JPe,{})}if(o===tn.ESTUDIANTE){if(c.name==="Auto-aprendizaje")return u.jsx(Bpe,{currentUser:t});if(c.name==="Evaluacin Formativa")return u.jsx(HLe,{currentUser:t});if(c.name==="Tareas Interdisciplinarias")return u.jsx(qLe,{currentUser:t});if(c.name==="Asistencia a Empresa")return u.jsx(Vpe,{currentUser:t})}return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[u.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:c.name}),u.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:u.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",u.jsx("span",{className:"font-semibold",children:c.name}),"."]})})]})};return u.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[u.jsx(zee,{currentUser:t,onLogout:e,onNavigate:w,onUserUpdate:n,onChangeProfile:r,canChangeProfile:s,toggleSidebar:()=>p(!h),unreadMessagesCount:a,refreshUnreadCount:i}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&u.jsx("div",{onClick:()=>p(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),u.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:u.jsx(x,{})}),u.jsx("main",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"p-6 md:p-8",children:S()})})]})]})},tMe=({onSelectProfile:t,isAdminView:e=!1})=>u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(yB,{})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:Ree.map(n=>u.jsxs("button",{onClick:()=>t(n.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[u.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:n.icon}),u.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:n.label})]},n.id))}),u.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),nMe=()=>{const[t,e]=W.useState(null),[n,r]=W.useState(null),[s,a]=W.useState(!0),[i,o]=W.useState(null),[l,c]=W.useState(!1),[A,h]=W.useState(null);W.useEffect(()=>{const F=C8(Kx,async D=>{if(e(D),D)try{const R=await hj(D.email);R?(r(R),R.profile===tn.SUBDIRECCION&&c(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await SE())}catch{o("Error al conectar con la base de datos."),await SE()}else r(null),h(null),c(!1),o(null);a(!1)});return()=>F()},[]);const p=async(F,D)=>{if(o(null),!F.trim()||!D.trim()){o("Por favor ingrese email y contrasea");return}try{await gee(F.trim(),D)}catch(R){switch(R.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":o("Error de conexin. Verifique su internet.");break;default:o("Ocurri un error al intentar iniciar sesin.")}}},g=async F=>{try{await vee(F)}catch(D){console.error("Error al enviar email de recuperacin:",D)}},w=F=>{h(F),c(!1)},x=()=>{c(!0),h(null)},S=async()=>{try{await SE()}catch(F){console.error("Error al cerrar sesin:",F)}};if(s)return u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mb-4 flex justify-center items-center",children:u.jsx(yB,{})}),u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!t||!n)return u.jsx(jee,{onLoginAttempt:p,onForgotPasswordRequest:g,error:i});if(l&&n.profile===tn.SUBDIRECCION)return u.jsx(tMe,{onSelectProfile:w,isAdminView:!0});const N=A||n.profile;return u.jsx(eMe,{currentUser:{...n,profile:N},onLogout:S,onChangeProfile:n.profile===tn.SUBDIRECCION?x:void 0,canChangeProfile:n.profile===tn.SUBDIRECCION})},qG=document.getElementById("root");if(!qG)throw new Error("Could not find root element to mount to");const rMe=aK.createRoot(qG);rMe.render(u.jsx(yt.StrictMode,{children:u.jsx(nMe,{})}));export{Bs as _,sMe as c,Nx as g};
