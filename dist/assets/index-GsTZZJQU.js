(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var mBe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sC={exports:{}},Pp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mN;function D9(){if(mN)return Pp;mN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:t,type:r,key:i,ref:a!==void 0?a:null,props:s}}return Pp.Fragment=e,Pp.jsx=n,Pp.jsxs=n,Pp}var pN;function L9(){return pN||(pN=1,sC.exports=D9()),sC.exports}var A=L9(),iC={exports:{}},Pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gN;function U9(){if(gN)return Pn;gN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(Y){return Y===null||typeof Y!="object"?null:(Y=h&&Y[h]||Y["@@iterator"],typeof Y=="function"?Y:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function E(Y,Ae,j){this.props=Y,this.context=Ae,this.refs=w,this.updater=j||g}E.prototype.isReactComponent={},E.prototype.setState=function(Y,Ae){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,Ae,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function N(){}N.prototype=E.prototype;function I(Y,Ae,j){this.props=Y,this.context=Ae,this.refs=w,this.updater=j||g}var k=I.prototype=new N;k.constructor=I,b(k,E.prototype),k.isPureReactComponent=!0;var U=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function _(Y,Ae,j,K,X,te){return j=te.ref,{$$typeof:t,type:Y,key:Ae,ref:j!==void 0?j:null,props:te}}function B(Y,Ae){return _(Y.type,Ae,void 0,void 0,void 0,Y.props)}function T(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function O(Y){var Ae={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(j){return Ae[j]})}var R=/\/+/g;function L(Y,Ae){return typeof Y=="object"&&Y!==null&&Y.key!=null?O(""+Y.key):Ae.toString(36)}function Q(){}function z(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(Q,Q):(Y.status="pending",Y.then(function(Ae){Y.status==="pending"&&(Y.status="fulfilled",Y.value=Ae)},function(Ae){Y.status==="pending"&&(Y.status="rejected",Y.reason=Ae)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function ie(Y,Ae,j,K,X){var te=typeof Y;(te==="undefined"||te==="boolean")&&(Y=null);var le=!1;if(Y===null)le=!0;else switch(te){case"bigint":case"string":case"number":le=!0;break;case"object":switch(Y.$$typeof){case t:case e:le=!0;break;case d:return le=Y._init,ie(le(Y._payload),Ae,j,K,X)}}if(le)return X=X(Y),le=K===""?"."+L(Y,0):K,U(X)?(j="",le!=null&&(j=le.replace(R,"$&/")+"/"),ie(X,Ae,j,"",function(_e){return _e})):X!=null&&(T(X)&&(X=B(X,j+(X.key==null||Y&&Y.key===X.key?"":(""+X.key).replace(R,"$&/")+"/")+le)),Ae.push(X)),1;le=0;var ye=K===""?".":K+":";if(U(Y))for(var Ce=0;Ce<Y.length;Ce++)K=Y[Ce],te=ye+L(K,Ce),le+=ie(K,Ae,j,te,X);else if(Ce=m(Y),typeof Ce=="function")for(Y=Ce.call(Y),Ce=0;!(K=Y.next()).done;)K=K.value,te=ye+L(K,Ce++),le+=ie(K,Ae,j,te,X);else if(te==="object"){if(typeof Y.then=="function")return ie(z(Y),Ae,j,K,X);throw Ae=String(Y),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return le}function J(Y,Ae,j){if(Y==null)return Y;var K=[],X=0;return ie(Y,K,"","",function(te){return Ae.call(j,te,X++)}),K}function ee(Y){if(Y._status===-1){var Ae=Y._result;Ae=Ae(),Ae.then(function(j){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=j)},function(j){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=j)}),Y._status===-1&&(Y._status=0,Y._result=Ae)}if(Y._status===1)return Y._result.default;throw Y._result}var ae=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function q(){}return Pn.Children={map:J,forEach:function(Y,Ae,j){J(Y,function(){Ae.apply(this,arguments)},j)},count:function(Y){var Ae=0;return J(Y,function(){Ae++}),Ae},toArray:function(Y){return J(Y,function(Ae){return Ae})||[]},only:function(Y){if(!T(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Pn.Component=E,Pn.Fragment=n,Pn.Profiler=a,Pn.PureComponent=I,Pn.StrictMode=r,Pn.Suspense=l,Pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Pn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return P.H.useMemoCache(Y)}},Pn.cache=function(Y){return function(){return Y.apply(null,arguments)}},Pn.cloneElement=function(Y,Ae,j){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var K=b({},Y.props),X=Y.key,te=void 0;if(Ae!=null)for(le in Ae.ref!==void 0&&(te=void 0),Ae.key!==void 0&&(X=""+Ae.key),Ae)!D.call(Ae,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Ae.ref===void 0||(K[le]=Ae[le]);var le=arguments.length-2;if(le===1)K.children=j;else if(1<le){for(var ye=Array(le),Ce=0;Ce<le;Ce++)ye[Ce]=arguments[Ce+2];K.children=ye}return _(Y.type,X,void 0,void 0,te,K)},Pn.createContext=function(Y){return Y={$$typeof:i,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:s,_context:Y},Y},Pn.createElement=function(Y,Ae,j){var K,X={},te=null;if(Ae!=null)for(K in Ae.key!==void 0&&(te=""+Ae.key),Ae)D.call(Ae,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(X[K]=Ae[K]);var le=arguments.length-2;if(le===1)X.children=j;else if(1<le){for(var ye=Array(le),Ce=0;Ce<le;Ce++)ye[Ce]=arguments[Ce+2];X.children=ye}if(Y&&Y.defaultProps)for(K in le=Y.defaultProps,le)X[K]===void 0&&(X[K]=le[K]);return _(Y,te,void 0,void 0,null,X)},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(Y){return{$$typeof:o,render:Y}},Pn.isValidElement=T,Pn.lazy=function(Y){return{$$typeof:d,_payload:{_status:-1,_result:Y},_init:ee}},Pn.memo=function(Y,Ae){return{$$typeof:u,type:Y,compare:Ae===void 0?null:Ae}},Pn.startTransition=function(Y){var Ae=P.T,j={};P.T=j;try{var K=Y(),X=P.S;X!==null&&X(j,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(q,ae)}catch(te){ae(te)}finally{P.T=Ae}},Pn.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Pn.use=function(Y){return P.H.use(Y)},Pn.useActionState=function(Y,Ae,j){return P.H.useActionState(Y,Ae,j)},Pn.useCallback=function(Y,Ae){return P.H.useCallback(Y,Ae)},Pn.useContext=function(Y){return P.H.useContext(Y)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(Y,Ae){return P.H.useDeferredValue(Y,Ae)},Pn.useEffect=function(Y,Ae,j){var K=P.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(Y,Ae)},Pn.useId=function(){return P.H.useId()},Pn.useImperativeHandle=function(Y,Ae,j){return P.H.useImperativeHandle(Y,Ae,j)},Pn.useInsertionEffect=function(Y,Ae){return P.H.useInsertionEffect(Y,Ae)},Pn.useLayoutEffect=function(Y,Ae){return P.H.useLayoutEffect(Y,Ae)},Pn.useMemo=function(Y,Ae){return P.H.useMemo(Y,Ae)},Pn.useOptimistic=function(Y,Ae){return P.H.useOptimistic(Y,Ae)},Pn.useReducer=function(Y,Ae,j){return P.H.useReducer(Y,Ae,j)},Pn.useRef=function(Y){return P.H.useRef(Y)},Pn.useState=function(Y){return P.H.useState(Y)},Pn.useSyncExternalStore=function(Y,Ae,j){return P.H.useSyncExternalStore(Y,Ae,j)},Pn.useTransition=function(){return P.H.useTransition()},Pn.version="19.1.1",Pn}var xN;function Bx(){return xN||(xN=1,iC.exports=U9()),iC.exports}var Z=Bx();const At=W5(Z);var oC={exports:{}},jp={},lC={exports:{}},cC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vN;function M9(){return vN||(vN=1,function(t){function e(J,ee){var ae=J.length;J.push(ee);e:for(;0<ae;){var q=ae-1>>>1,Y=J[q];if(0<a(Y,ee))J[q]=ee,J[ae]=Y,ae=q;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ee=J[0],ae=J.pop();if(ae!==ee){J[0]=ae;e:for(var q=0,Y=J.length,Ae=Y>>>1;q<Ae;){var j=2*(q+1)-1,K=J[j],X=j+1,te=J[X];if(0>a(K,ae))X<Y&&0>a(te,K)?(J[q]=te,J[X]=ae,q=X):(J[q]=K,J[j]=ae,q=j);else if(X<Y&&0>a(te,ae))J[q]=te,J[X]=ae,q=X;else break e}}return ee}function a(J,ee){var ae=J.sortIndex-ee.sortIndex;return ae!==0?ae:J.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,b=!1,w=!1,E=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function U(J){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=J)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function P(J){if(w=!1,U(J),!b)if(n(l)!==null)b=!0,D||(D=!0,L());else{var ee=n(u);ee!==null&&ie(P,ee.startTime-J)}}var D=!1,_=-1,B=5,T=-1;function O(){return E?!0:!(t.unstable_now()-T<B)}function R(){if(E=!1,D){var J=t.unstable_now();T=J;var ee=!0;try{e:{b=!1,w&&(w=!1,I(_),_=-1),g=!0;var ae=m;try{t:{for(U(J),h=n(l);h!==null&&!(h.expirationTime>J&&O());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var Y=q(h.expirationTime<=J);if(J=t.unstable_now(),typeof Y=="function"){h.callback=Y,U(J),ee=!0;break t}h===n(l)&&r(l),U(J)}else r(l);h=n(l)}if(h!==null)ee=!0;else{var Ae=n(u);Ae!==null&&ie(P,Ae.startTime-J),ee=!1}}break e}finally{h=null,m=ae,g=!1}ee=void 0}}finally{ee?L():D=!1}}}var L;if(typeof k=="function")L=function(){k(R)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,z=Q.port2;Q.port1.onmessage=R,L=function(){z.postMessage(null)}}else L=function(){N(R,0)};function ie(J,ee){_=N(function(){J(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(J){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ae=m;m=ee;try{return J()}finally{m=ae}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ae=m;m=J;try{return ee()}finally{m=ae}},t.unstable_scheduleCallback=function(J,ee,ae){var q=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?q+ae:q):ae=q,J){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ae+Y,J={id:d++,callback:ee,priorityLevel:J,startTime:ae,expirationTime:Y,sortIndex:-1},ae>q?(J.sortIndex=ae,e(u,J),n(l)===null&&J===n(u)&&(w?(I(_),_=-1):w=!0,ie(P,ae-q))):(J.sortIndex=Y,e(l,J),b||g||(b=!0,D||(D=!0,L()))),J},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(J){var ee=m;return function(){var ae=m;m=ee;try{return J.apply(this,arguments)}finally{m=ae}}}}(cC)),cC}var yN;function P9(){return yN||(yN=1,lC.exports=M9()),lC.exports}var uC={exports:{}},bi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN;function j9(){if(wN)return bi;wN=1;var t=Bx();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,bi.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,d)},bi.flushSync=function(l){var u=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=u,r.p=d,r.d.f()}},bi.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},bi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},bi.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},bi.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},bi.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},bi.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},bi.requestFormReset=function(l){r.d.r(l)},bi.unstable_batchedUpdates=function(l,u){return l(u)},bi.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},bi.useFormStatus=function(){return i.H.useHostTransitionStatus()},bi.version="19.1.1",bi}var bN;function KD(){if(bN)return uC.exports;bN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uC.exports=j9(),uC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CN;function O9(){if(CN)return jp;CN=1;var t=P9(),e=Bx(),n=KD();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var f=c,p=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(p=f.return),c=f.return;while(c)}return f.tag===3?p:null}function i(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(s(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=s(c),f===null)throw Error(r(188));return f!==c?null:c}for(var p=c,y=f;;){var F=p.return;if(F===null)break;var H=F.alternate;if(H===null){if(y=F.return,y!==null){p=y;continue}break}if(F.child===H.child){for(H=F.child;H;){if(H===p)return o(F),c;if(H===y)return o(F),f;H=H.sibling}throw Error(r(188))}if(p.return!==y.return)p=F,y=H;else{for(var oe=!1,ge=F.child;ge;){if(ge===p){oe=!0,p=F,y=H;break}if(ge===y){oe=!0,y=F,p=H;break}ge=ge.sibling}if(!oe){for(ge=H.child;ge;){if(ge===p){oe=!0,p=H,y=F;break}if(ge===y){oe=!0,y=H,p=F;break}ge=ge.sibling}if(!oe)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),k=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(c){return c===null||typeof c!="object"?null:(c=R&&c[R]||c["@@iterator"],typeof c=="function"?c:null)}var Q=Symbol.for("react.client.reference");function z(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Q?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList";case T:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case k:return(c.displayName||"Context")+".Provider";case I:return(c._context.displayName||"Context")+".Consumer";case U:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _:return f=c.displayName||null,f!==null?f:z(c.type)||"Memo";case B:f=c._payload,c=c._init;try{return z(c(f))}catch{}}return null}var ie=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},q=[],Y=-1;function Ae(c){return{current:c}}function j(c){0>Y||(c.current=q[Y],q[Y]=null,Y--)}function K(c,f){Y++,q[Y]=c.current,c.current=f}var X=Ae(null),te=Ae(null),le=Ae(null),ye=Ae(null);function Ce(c,f){switch(K(le,f),K(te,c),K(X,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?VB(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=VB(f),c=zB(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}j(X),K(X,c)}function _e(){j(X),j(te),j(le)}function Ie(c){c.memoizedState!==null&&K(ye,c);var f=X.current,p=zB(f,c.type);f!==p&&(K(te,c),K(X,p))}function xe(c){te.current===c&&(j(X),j(te)),ye.current===c&&(j(ye),Rp._currentValue=ae)}var se=Object.prototype.hasOwnProperty,Re=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,De=t.unstable_shouldYield,we=t.unstable_requestPaint,ze=t.unstable_now,nt=t.unstable_getCurrentPriorityLevel,it=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,ut=t.unstable_LowPriority,Nt=t.unstable_IdlePriority,It=t.log,Wt=t.unstable_setDisableYieldValue,Ut=null,Ht=null;function Yt(c){if(typeof It=="function"&&Wt(c),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Ut,c)}catch{}}var Mt=Math.clz32?Math.clz32:xn,kt=Math.log,xt=Math.LN2;function xn(c){return c>>>=0,c===0?32:31-(kt(c)/xt|0)|0}var $t=256,ir=4194304;function mn(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Fn(c,f,p){var y=c.pendingLanes;if(y===0)return 0;var F=0,H=c.suspendedLanes,oe=c.pingedLanes;c=c.warmLanes;var ge=y&134217727;return ge!==0?(y=ge&~H,y!==0?F=mn(y):(oe&=ge,oe!==0?F=mn(oe):p||(p=ge&~c,p!==0&&(F=mn(p))))):(ge=y&~H,ge!==0?F=mn(ge):oe!==0?F=mn(oe):p||(p=y&~c,p!==0&&(F=mn(p)))),F===0?0:f!==0&&f!==F&&(f&H)===0&&(H=F&-F,p=f&-f,H>=p||H===32&&(p&4194048)!==0)?f:F}function Tr(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function Bn(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(){var c=$t;return $t<<=1,($t&4194048)===0&&($t=256),c}function Xn(){var c=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),c}function Yr(c){for(var f=[],p=0;31>p;p++)f.push(c);return f}function ua(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Dn(c,f,p,y,F,H){var oe=c.pendingLanes;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=p,c.entangledLanes&=p,c.errorRecoveryDisabledLanes&=p,c.shellSuspendCounter=0;var ge=c.entanglements,Fe=c.expirationTimes,Ze=c.hiddenUpdates;for(p=oe&~p;0<p;){var ft=31-Mt(p),wt=1<<ft;ge[ft]=0,Fe[ft]=-1;var rt=Ze[ft];if(rt!==null)for(Ze[ft]=null,ft=0;ft<rt.length;ft++){var at=rt[ft];at!==null&&(at.lane&=-536870913)}p&=~wt}y!==0&&en(c,y,0),H!==0&&F===0&&c.tag!==0&&(c.suspendedLanes|=H&~(oe&~f))}function en(c,f,p){c.pendingLanes|=f,c.suspendedLanes&=~f;var y=31-Mt(f);c.entangledLanes|=f,c.entanglements[y]=c.entanglements[y]|1073741824|p&4194090}function On(c,f){var p=c.entangledLanes|=f;for(c=c.entanglements;p;){var y=31-Mt(p),F=1<<y;F&f|c[y]&f&&(c[y]|=f),p&=~F}}function as(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Vr(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function pa(){var c=ee.p;return c!==0?c:(c=window.event,c===void 0?32:cN(c.type))}function ws(c,f){var p=ee.p;try{return ee.p=c,f()}finally{ee.p=p}}var Qt=Math.random().toString(36).slice(2),or="__reactFiber$"+Qt,Zn="__reactProps$"+Qt,Br="__reactContainer$"+Qt,Rr="__reactEvents$"+Qt,zr="__reactListeners$"+Qt,de="__reactHandles$"+Qt,Be="__reactResources$"+Qt,be="__reactMarker$"+Qt;function Ee(c){delete c[or],delete c[Zn],delete c[Rr],delete c[zr],delete c[de]}function Se(c){var f=c[or];if(f)return f;for(var p=c.parentNode;p;){if(f=p[Br]||p[or]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(c=WB(c);c!==null;){if(p=c[or])return p;c=WB(c)}return f}c=p,p=c.parentNode}return null}function Ne(c){if(c=c[or]||c[Br]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function qe(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function tt(c){var f=c[Be];return f||(f=c[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Qe(c){c[be]=!0}var We=new Set,Ye={};function yt(c,f){Bt(c,f),Bt(c+"Capture",f)}function Bt(c,f){for(Ye[c]=f,c=0;c<f.length;c++)We.add(f[c])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Ft={};function un(c){return se.call(Ft,c)?!0:se.call(Tt,c)?!1:Pt.test(c)?Ft[c]=!0:(Tt[c]=!0,!1)}function Ln(c,f,p){if(un(f))if(p===null)c.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var y=f.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+p)}}function Un(c,f,p){if(p===null)c.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+p)}}function Qn(c,f,p,y){if(y===null)c.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(p);return}c.setAttributeNS(f,p,""+y)}}var Sa,Ai;function Ta(c){if(Sa===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Sa=f&&f[1]||"",Ai=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sa+c+Ai}var ss=!1;function Oa(c,f){if(!c||ss)return"";ss=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(at){var rt=at}Reflect.construct(c,[],wt)}else{try{wt.call()}catch(at){rt=at}c.call(wt.prototype)}}else{try{throw Error()}catch(at){rt=at}(wt=c())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(at){if(at&&rt&&typeof at.stack=="string")return[at.stack,rt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=y.DetermineComponentFrameRoot(),oe=H[0],ge=H[1];if(oe&&ge){var Fe=oe.split(`
`),Ze=ge.split(`
`);for(F=y=0;y<Fe.length&&!Fe[y].includes("DetermineComponentFrameRoot");)y++;for(;F<Ze.length&&!Ze[F].includes("DetermineComponentFrameRoot");)F++;if(y===Fe.length||F===Ze.length)for(y=Fe.length-1,F=Ze.length-1;1<=y&&0<=F&&Fe[y]!==Ze[F];)F--;for(;1<=y&&0<=F;y--,F--)if(Fe[y]!==Ze[F]){if(y!==1||F!==1)do if(y--,F--,0>F||Fe[y]!==Ze[F]){var ft=`
`+Fe[y].replace(" at new "," at ");return c.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",c.displayName)),ft}while(1<=y&&0<=F);break}}}finally{ss=!1,Error.prepareStackTrace=p}return(p=c?c.displayName||c.name:"")?Ta(p):""}function bs(c){switch(c.tag){case 26:case 27:case 5:return Ta(c.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 15:return Oa(c.type,!1);case 11:return Oa(c.type.render,!1);case 1:return Oa(c.type,!0);case 31:return Ta("Activity");default:return""}}function Gr(c){try{var f="";do f+=bs(c),c=c.return;while(c);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function is(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Dc(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function VA(c){var f=Dc(c)?"checked":"value",p=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),y=""+c[f];if(!c.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var F=p.get,H=p.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return F.call(this)},set:function(oe){y=""+oe,H.call(this,oe)}}),Object.defineProperty(c,f,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(oe){y=""+oe},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function rl(c){c._valueTracker||(c._valueTracker=VA(c))}function Lu(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var p=f.getValue(),y="";return c&&(y=Dc(c)?c.checked?"true":"false":c.value),c=y,c!==p?(f.setValue(c),!0):!1}function Cs(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Lc=/[\n"\\]/g;function lr(c){return c.replace(Lc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Es(c,f,p,y,F,H,oe,ge){c.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?c.type=oe:c.removeAttribute("type"),f!=null?oe==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+is(f)):c.value!==""+is(f)&&(c.value=""+is(f)):oe!=="submit"&&oe!=="reset"||c.removeAttribute("value"),f!=null?sl(c,oe,is(f)):p!=null?sl(c,oe,is(p)):y!=null&&c.removeAttribute("value"),F==null&&H!=null&&(c.defaultChecked=!!H),F!=null&&(c.checked=F&&typeof F!="function"&&typeof F!="symbol"),ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&typeof ge!="boolean"?c.name=""+is(ge):c.removeAttribute("name")}function al(c,f,p,y,F,H,oe,ge){if(H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(c.type=H),f!=null||p!=null){if(!(H!=="submit"&&H!=="reset"||f!=null))return;p=p!=null?""+is(p):"",f=f!=null?""+is(f):p,ge||f===c.value||(c.value=f),c.defaultValue=f}y=y??F,y=typeof y!="function"&&typeof y!="symbol"&&!!y,c.checked=ge?c.checked:!!y,c.defaultChecked=!!y,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(c.name=oe)}function sl(c,f,p){f==="number"&&Cs(c.ownerDocument)===c||c.defaultValue===""+p||(c.defaultValue=""+p)}function eo(c,f,p,y){if(c=c.options,f){f={};for(var F=0;F<p.length;F++)f["$"+p[F]]=!0;for(p=0;p<c.length;p++)F=f.hasOwnProperty("$"+c[p].value),c[p].selected!==F&&(c[p].selected=F),F&&y&&(c[p].defaultSelected=!0)}else{for(p=""+is(p),f=null,F=0;F<c.length;F++){if(c[F].value===p){c[F].selected=!0,y&&(c[F].defaultSelected=!0);return}f!==null||c[F].disabled||(f=c[F])}f!==null&&(f.selected=!0)}}function yr(c,f,p){if(f!=null&&(f=""+is(f),f!==c.value&&(c.value=f),p==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=p!=null?""+is(p):""}function il(c,f,p,y){if(f==null){if(y!=null){if(p!=null)throw Error(r(92));if(ie(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),f=p}p=is(f),c.defaultValue=p,y=c.textContent,y===p&&y!==""&&y!==null&&(c.value=y)}function di(c,f){if(f){var p=c.firstChild;if(p&&p===c.lastChild&&p.nodeType===3){p.nodeValue=f;return}}c.textContent=f}var Bo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zA(c,f,p){var y=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":y?c.setProperty(f,p):typeof p!="number"||p===0||Bo.has(f)?f==="float"?c.cssFloat=p:c[f]=(""+p).trim():c[f]=p+"px"}function Uu(c,f,p){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||f!=null&&f.hasOwnProperty(y)||(y.indexOf("--")===0?c.setProperty(y,""):y==="float"?c.cssFloat="":c[y]="");for(var F in f)y=f[F],f.hasOwnProperty(F)&&p[F]!==y&&zA(c,F,y)}else for(var H in f)f.hasOwnProperty(H)&&zA(c,H,f[H])}function Mu(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var No=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(c){return Uc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var to=null;function Dr(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Io=null,no=null;function dn(c){var f=Ne(c);if(f&&(c=f.stateNode)){var p=c[Zn]||null;e:switch(c=f.stateNode,f.type){case"input":if(Es(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=c;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+lr(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var y=p[f];if(y!==c&&y.form===c.form){var F=y[Zn]||null;if(!F)throw Error(r(90));Es(y,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(f=0;f<p.length;f++)y=p[f],y.form===c.form&&Lu(y)}break e;case"textarea":yr(c,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&eo(c,!!p.multiple,f,!1)}}}var ro=!1;function GA(c,f,p){if(ro)return c(f,p);ro=!0;try{var y=c(f);return y}finally{if(ro=!1,(Io!==null||no!==null)&&(F1(),Io&&(f=Io,c=no,no=Io=null,dn(f),c)))for(f=0;f<c.length;f++)dn(c[f])}}function Rs(c,f){var p=c.stateNode;if(p===null)return null;var y=p[Zn]||null;if(y===null)return null;p=y[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(p&&typeof p!="function")throw Error(r(231,f,typeof p));return p}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Js=!1;if(fi)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){Js=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{Js=!1}var hi=null,ol=null,Fo=null;function Pu(){if(Fo)return Fo;var c,f=ol,p=f.length,y,F="value"in hi?hi.value:hi.textContent,H=F.length;for(c=0;c<p&&f[c]===F[c];c++);var oe=p-c;for(y=1;y<=oe&&f[p-y]===F[H-y];y++);return Fo=F.slice(c,1<y?1-y:void 0)}function mi(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ds(){return!0}function so(){return!1}function Ba(c){function f(p,y,F,H,oe){this._reactName=p,this._targetInst=F,this.type=y,this.nativeEvent=H,this.target=oe,this.currentTarget=null;for(var ge in c)c.hasOwnProperty(ge)&&(p=c[ge],this[ge]=p?p(H):H[ge]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Ds:so,this.isPropagationStopped=so,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),f}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ll=Ba(Kn),io=d({},Kn,{view:0,detail:0}),ju=Ba(io),Gl,ql,zi,Ls=d({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zi&&(zi&&c.type==="mousemove"?(Gl=c.screenX-zi.screenX,ql=c.screenY-zi.screenY):ql=Gl=0,zi=c),Gl)},movementY:function(c){return"movementY"in c?c.movementY:ql}}),Na=Ba(Ls),qA=d({},Ls,{dataTransfer:0}),cl=Ba(qA),_s=d({},io,{relatedTarget:0}),ul=Ba(_s),Ro=d({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Mc=Ba(Ro),Kl=d({},Kn,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Pc=Ba(Kl),Ou=d({},Kn,{data:0}),Wl=Ba(Ou),Al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$l={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=jc[c])?!!f[c]:!1}function dl(){return Jl}var KA=d({},io,{key:function(c){if(c.key){var f=Al[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=mi(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?$l[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(c){return c.type==="keypress"?mi(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?mi(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Do=Ba(KA),fl=d({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yl=Ba(fl),Us=d({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),Oc=Ba(Us),V=d({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ue=Ba(V),ke=d({},Ls,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ba(ke),He=d({},Kn,{newState:0,oldState:0}),ot=Ba(He),_t=[9,13,27,32],jt=fi&&"CompositionEvent"in window,S=null;fi&&"documentMode"in document&&(S=document.documentMode);var W=fi&&"TextEvent"in window&&!S,re=fi&&(!jt||S&&8<S&&11>=S),pe=" ",Oe=!1;function Xe(c,f){switch(c){case"keyup":return _t.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var fn=!1;function Wn(c,f){switch(c){case"compositionend":return St(f);case"keypress":return f.which!==32?null:(Oe=!0,pe);case"textInput":return c=f.data,c===pe&&Oe?null:c;default:return null}}function Sn(c,f){if(fn)return c==="compositionend"||!jt&&Xe(c,f)?(c=Pu(),Fo=ol=hi=null,fn=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return re&&f.locale!=="ko"?null:f.data;default:return null}}var wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nr(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!wr[c.type]:f==="textarea"}function oo(c,f,p,y){Io?no?no.push(y):no=[y]:Io=y,f=P1(f,"onChange"),0<f.length&&(p=new ll("onChange","change",null,p,y),c.push({event:p,listeners:f}))}var ga=null,pi=null;function hl(c){PB(c,0)}function Qc(c){var f=qe(c);if(Lu(f))return c}function WA(c,f){if(c==="change")return f}var Qu=!1;if(fi){var Qa;if(fi){var Hc="oninput"in document;if(!Hc){var Hu=document.createElement("div");Hu.setAttribute("oninput","return;"),Hc=typeof Hu.oninput=="function"}Qa=Hc}else Qa=!1;Qu=Qa&&(!document.documentMode||9<document.documentMode)}function Vu(){ga&&(ga.detachEvent("onpropertychange",$A),pi=ga=null)}function $A(c){if(c.propertyName==="value"&&Qc(pi)){var f=[];oo(f,pi,c,Dr(c)),GA(hl,f)}}function gi(c,f,p){c==="focusin"?(Vu(),ga=f,pi=p,ga.attachEvent("onpropertychange",$A)):c==="focusout"&&Vu()}function ep(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Qc(pi)}function _f(c,f){if(c==="click")return Qc(f)}function Gh(c,f){if(c==="input"||c==="change")return Qc(f)}function lo(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var os=typeof Object.is=="function"?Object.is:lo;function Vc(c,f){if(os(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var p=Object.keys(c),y=Object.keys(f);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var F=p[y];if(!se.call(f,F)||!os(c[F],f[F]))return!1}return!0}function Sf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Xl(c,f){var p=Sf(c);c=0;for(var y;p;){if(p.nodeType===3){if(y=c+p.textContent.length,c<=f&&y>=f)return{node:p,offset:f-c};c=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Sf(p)}}function zc(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?zc(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function Ys(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Cs(c.document);f instanceof c.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)c=f.contentWindow;else break;f=Cs(c.document)}return f}function Ss(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Gc=fi&&"documentMode"in document&&11>=document.documentMode,xi=null,Lo=null,ml=null,Uo=!1;function Aa(c,f,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Uo||xi==null||xi!==Cs(y)||(y=xi,"selectionStart"in y&&Ss(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),ml&&Vc(ml,y)||(ml=y,y=P1(Lo,"onSelect"),0<y.length&&(f=new ll("onSelect","select",null,f,p),c.push({event:f,listeners:y}),f.target=xi)))}function Mo(c,f){var p={};return p[c.toLowerCase()]=f.toLowerCase(),p["Webkit"+c]="webkit"+f,p["Moz"+c]="moz"+f,p}var ka={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionrun:Mo("Transition","TransitionRun"),transitionstart:Mo("Transition","TransitionStart"),transitioncancel:Mo("Transition","TransitionCancel"),transitionend:Mo("Transition","TransitionEnd")},vi={},zu={};fi&&(zu=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function pl(c){if(vi[c])return vi[c];if(!ka[c])return c;var f=ka[c],p;for(p in f)if(f.hasOwnProperty(p)&&p in zu)return vi[c]=f[p];return c}var JA=pl("animationend"),qc=pl("animationiteration"),Kc=pl("animationstart"),Wc=pl("transitionrun"),Gu=pl("transitionstart"),YA=pl("transitioncancel"),$c=pl("transitionend"),Zl=new Map,qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qu.push("scrollEnd");function da(c,f){Zl.set(c,f),yt(f,[c])}var Gi=new WeakMap;function Vn(c,f){if(typeof c=="object"&&c!==null){var p=Gi.get(c);return p!==void 0?p:(f={value:c,source:f,stack:Gr(f)},Gi.set(c,f),f)}return{value:c,source:f,stack:Gr(f)}}var zn=[],qr=0,xa=0;function co(){for(var c=qr,f=xa=qr=0;f<c;){var p=zn[f];zn[f++]=null;var y=zn[f];zn[f++]=null;var F=zn[f];zn[f++]=null;var H=zn[f];if(zn[f++]=null,y!==null&&F!==null){var oe=y.pending;oe===null?F.next=F:(F.next=oe.next,oe.next=F),y.pending=F}H!==0&&qh(p,F,H)}}function Jc(c,f,p,y){zn[qr++]=c,zn[qr++]=f,zn[qr++]=p,zn[qr++]=y,xa|=y,c.lanes|=y,c=c.alternate,c!==null&&(c.lanes|=y)}function Yc(c,f,p,y){return Jc(c,f,p,y),Ku(c)}function ec(c,f){return Jc(c,null,null,f),Ku(c)}function qh(c,f,p){c.lanes|=p;var y=c.alternate;y!==null&&(y.lanes|=p);for(var F=!1,H=c.return;H!==null;)H.childLanes|=p,y=H.alternate,y!==null&&(y.childLanes|=p),H.tag===22&&(c=H.stateNode,c===null||c._visibility&1||(F=!0)),c=H,H=H.return;return c.tag===3?(H=c.stateNode,F&&f!==null&&(F=31-Mt(p),c=H.hiddenUpdates,y=c[F],y===null?c[F]=[f]:y.push(f),f.lane=p|536870912),H):null}function Ku(c){if(50<_p)throw _p=0,Nb=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var ls={};function uo(c,f,p,y){this.tag=c,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(c,f,p,y){return new uo(c,f,p,y)}function XA(c){return c=c.prototype,!(!c||!c.isReactComponent)}function gl(c,f){var p=c.alternate;return p===null?(p=Ms(c.tag,f,c.key,c.mode),p.elementType=c.elementType,p.type=c.type,p.stateNode=c.stateNode,p.alternate=c,c.alternate=p):(p.pendingProps=f,p.type=c.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=c.flags&65011712,p.childLanes=c.childLanes,p.lanes=c.lanes,p.child=c.child,p.memoizedProps=c.memoizedProps,p.memoizedState=c.memoizedState,p.updateQueue=c.updateQueue,f=c.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=c.sibling,p.index=c.index,p.ref=c.ref,p.refCleanup=c.refCleanup,p}function Tf(c,f){c.flags&=65011714;var p=c.alternate;return p===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=p.childLanes,c.lanes=p.lanes,c.child=p.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=p.memoizedProps,c.memoizedState=p.memoizedState,c.updateQueue=p.updateQueue,c.type=p.type,f=p.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Wu(c,f,p,y,F,H){var oe=0;if(y=c,typeof c=="function")XA(c)&&(oe=1);else if(typeof c=="string")oe=w9(c,p,X.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case T:return c=Ms(31,p,f,F),c.elementType=T,c.lanes=H,c;case b:return tc(p.children,F,H,f);case w:oe=8,F|=24;break;case E:return c=Ms(12,p,f,F|2),c.elementType=E,c.lanes=H,c;case P:return c=Ms(13,p,f,F),c.elementType=P,c.lanes=H,c;case D:return c=Ms(19,p,f,F),c.elementType=D,c.lanes=H,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case N:case k:oe=10;break e;case I:oe=9;break e;case U:oe=11;break e;case _:oe=14;break e;case B:oe=16,y=null;break e}oe=29,p=Error(r(130,c===null?"null":typeof c,"")),y=null}return f=Ms(oe,p,f,F),f.elementType=c,f.type=y,f.lanes=H,f}function tc(c,f,p,y){return c=Ms(7,c,y,f),c.lanes=p,c}function Kh(c,f,p){return c=Ms(6,c,null,f),c.lanes=p,c}function Bf(c,f,p){return f=Ms(4,c.children!==null?c.children:[],c.key,f),f.lanes=p,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Xc=[],nc=0,ZA=null,Wh=0,Ao=[],qi=0,$u=null,rc=1,ac="";function Ju(c,f){Xc[nc++]=Wh,Xc[nc++]=ZA,ZA=c,Wh=f}function n1(c,f,p){Ao[qi++]=rc,Ao[qi++]=ac,Ao[qi++]=$u,$u=c;var y=rc;c=ac;var F=32-Mt(y)-1;y&=~(1<<F),p+=1;var H=32-Mt(f)+F;if(30<H){var oe=F-F%5;H=(y&(1<<oe)-1).toString(32),y>>=oe,F-=oe,rc=1<<32-Mt(f)+F|p<<F|y,ac=H+c}else rc=1<<H|p<<F|y,ac=c}function Nf(c){c.return!==null&&(Ju(c,1),n1(c,1,0))}function kf(c){for(;c===ZA;)ZA=Xc[--nc],Xc[nc]=null,Wh=Xc[--nc],Xc[nc]=null;for(;c===$u;)$u=Ao[--qi],Ao[qi]=null,ac=Ao[--qi],Ao[qi]=null,rc=Ao[--qi],Ao[qi]=null}var Ha=null,fa=null,mr=!1,Zc=null,xl=!1,tp=Error(r(519));function Yu(c){var f=Error(r(418,""));throw ed(Vn(f,c)),tp}function r1(c){var f=c.stateNode,p=c.type,y=c.memoizedProps;switch(f[or]=c,f[Zn]=y,p){case"dialog":tr("cancel",f),tr("close",f);break;case"iframe":case"object":case"embed":tr("load",f);break;case"video":case"audio":for(p=0;p<Tp.length;p++)tr(Tp[p],f);break;case"source":tr("error",f);break;case"img":case"image":case"link":tr("error",f),tr("load",f);break;case"details":tr("toggle",f);break;case"input":tr("invalid",f),al(f,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),rl(f);break;case"select":tr("invalid",f);break;case"textarea":tr("invalid",f),il(f,y.value,y.defaultValue,y.children),rl(f)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||y.suppressHydrationWarning===!0||HB(f.textContent,p)?(y.popover!=null&&(tr("beforetoggle",f),tr("toggle",f)),y.onScroll!=null&&tr("scroll",f),y.onScrollEnd!=null&&tr("scrollend",f),y.onClick!=null&&(f.onclick=j1),f=!0):f=!1,f||Yu(c)}function sc(c){for(Ha=c.return;Ha;)switch(Ha.tag){case 5:case 13:xl=!1;return;case 27:case 3:xl=!0;return;default:Ha=Ha.return}}function Xs(c){if(c!==Ha)return!1;if(!mr)return sc(c),mr=!0,!1;var f=c.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=c.type,p=!(p!=="form"&&p!=="button")||Gb(c.type,c.memoizedProps)),p=!p),p&&fa&&Yu(c),sc(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(p=c.data,p==="/$"){if(f===0){fa=fc(c.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;c=c.nextSibling}fa=null}}else f===27?(f=fa,gd(c.type)?(c=$b,$b=null,fa=c):fa=f):fa=Ha?fc(c.stateNode.nextSibling):null;return!0}function Ki(){fa=Ha=null,mr=!1}function a1(){var c=Zc;return c!==null&&(mo===null?mo=c:mo.push.apply(mo,c),Zc=null),c}function ed(c){Zc===null?Zc=[c]:Zc.push(c)}var vl=Ae(null),cs=null,ic=null;function eu(c,f,p){K(vl,f._currentValue),f._currentValue=p}function yl(c){c._currentValue=vl.current,j(vl)}function $h(c,f,p){for(;c!==null;){var y=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,y!==null&&(y.childLanes|=f)):y!==null&&(y.childLanes&f)!==f&&(y.childLanes|=f),c===p)break;c=c.return}}function Jh(c,f,p,y){var F=c.child;for(F!==null&&(F.return=c);F!==null;){var H=F.dependencies;if(H!==null){var oe=F.child;H=H.firstContext;e:for(;H!==null;){var ge=H;H=F;for(var Fe=0;Fe<f.length;Fe++)if(ge.context===f[Fe]){H.lanes|=p,ge=H.alternate,ge!==null&&(ge.lanes|=p),$h(H.return,p,c),y||(oe=null);break e}H=ge.next}}else if(F.tag===18){if(oe=F.return,oe===null)throw Error(r(341));oe.lanes|=p,H=oe.alternate,H!==null&&(H.lanes|=p),$h(oe,p,c),oe=null}else oe=F.child;if(oe!==null)oe.return=F;else for(oe=F;oe!==null;){if(oe===c){oe=null;break}if(F=oe.sibling,F!==null){F.return=oe.return,oe=F;break}oe=oe.return}F=oe}}function td(c,f,p,y){c=null;for(var F=f,H=!1;F!==null;){if(!H){if((F.flags&524288)!==0)H=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var oe=F.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var ge=F.type;os(F.pendingProps.value,oe.value)||(c!==null?c.push(ge):c=[ge])}}else if(F===ye.current){if(oe=F.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(c!==null?c.push(Rp):c=[Rp])}F=F.return}c!==null&&Jh(f,c,p,y),f.flags|=262144}function Yh(c){for(c=c.firstContext;c!==null;){if(!os(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function wl(c){cs=c,ic=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Va(c){return Xh(cs,c)}function tu(c,f){return cs===null&&wl(c),Xh(c,f)}function Xh(c,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},ic===null){if(c===null)throw Error(r(308));ic=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else ic=ic.next=f;return p}var eb=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(p,y){c.push(y)}};this.abort=function(){f.aborted=!0,c.forEach(function(p){return p()})}},s1=t.unstable_scheduleCallback,tb=t.unstable_NormalPriority,za={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function np(){return{controller:new eb,data:new Map,refCount:0}}function If(c){c.refCount--,c.refCount===0&&s1(tb,function(){c.controller.abort()})}var Ff=null,rp=0,Xu=0,oc=null;function nb(c,f){if(Ff===null){var p=Ff=[];rp=0,Xu=Ub(),oc={status:"pending",value:void 0,then:function(y){p.push(y)}}}return rp++,f.then(i1,i1),f}function i1(){if(--rp===0&&Ff!==null){oc!==null&&(oc.status="fulfilled");var c=Ff;Ff=null,Xu=0,oc=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function o1(c,f){var p=[],y={status:"pending",value:null,reason:null,then:function(F){p.push(F)}};return c.then(function(){y.status="fulfilled",y.value=f;for(var F=0;F<p.length;F++)(0,p[F])(f)},function(F){for(y.status="rejected",y.reason=F,F=0;F<p.length;F++)(0,p[F])(void 0)}),y}var C=J.S;J.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&nb(c,f),C!==null&&C(c,f)};var M=Ae(null);function G(){var c=M.current;return c!==null?c:ta.pooledCache}function ne(c,f){f===null?K(M,M.current):K(M,f.pool)}function ce(){var c=G();return c===null?null:{parent:za._currentValue,pool:c}}var fe=Error(r(460)),he=Error(r(474)),me=Error(r(542)),ve={then:function(){}};function Te(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Ue(){}function Je(c,f,p){switch(p=c[p],p===void 0?c.push(f):p!==f&&(f.then(Ue,Ue),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,gt(c),c;default:if(typeof f.status=="string")f.then(Ue,Ue);else{if(c=ta,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(y){if(f.status==="pending"){var F=f;F.status="fulfilled",F.value=y}},function(y){if(f.status==="pending"){var F=f;F.status="rejected",F.reason=y}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,gt(c),c}throw Ke=f,fe}}var Ke=null;function Ve(){if(Ke===null)throw Error(r(459));var c=Ke;return Ke=null,c}function gt(c){if(c===fe||c===me)throw Error(r(483))}var st=!1;function Me(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function je(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ct(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function vt(c,f,p){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(Ur&2)!==0){var F=y.pending;return F===null?f.next=f:(f.next=F.next,F.next=f),y.pending=f,f=Ku(c),qh(c,null,p),f}return Jc(c,y,f,p),Ku(c)}function ht(c,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var y=f.lanes;y&=c.pendingLanes,p|=y,f.lanes=p,On(c,p)}}function Vt(c,f){var p=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var F=null,H=null;if(p=p.firstBaseUpdate,p!==null){do{var oe={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};H===null?F=H=oe:H=H.next=oe,p=p.next}while(p!==null);H===null?F=H=f:H=H.next=f}else F=H=f;p={baseState:y.baseState,firstBaseUpdate:F,lastBaseUpdate:H,shared:y.shared,callbacks:y.callbacks},c.updateQueue=p;return}c=p.lastBaseUpdate,c===null?p.firstBaseUpdate=f:c.next=f,p.lastBaseUpdate=f}var Lt=!1;function tn(){if(Lt){var c=oc;if(c!==null)throw c}}function Ot(c,f,p,y){Lt=!1;var F=c.updateQueue;st=!1;var H=F.firstBaseUpdate,oe=F.lastBaseUpdate,ge=F.shared.pending;if(ge!==null){F.shared.pending=null;var Fe=ge,Ze=Fe.next;Fe.next=null,oe===null?H=Ze:oe.next=Ze,oe=Fe;var ft=c.alternate;ft!==null&&(ft=ft.updateQueue,ge=ft.lastBaseUpdate,ge!==oe&&(ge===null?ft.firstBaseUpdate=Ze:ge.next=Ze,ft.lastBaseUpdate=Fe))}if(H!==null){var wt=F.baseState;oe=0,ft=Ze=Fe=null,ge=H;do{var rt=ge.lane&-536870913,at=rt!==ge.lane;if(at?(dr&rt)===rt:(y&rt)===rt){rt!==0&&rt===Xu&&(Lt=!0),ft!==null&&(ft=ft.next={lane:0,tag:ge.tag,payload:ge.payload,callback:null,next:null});e:{var En=c,hn=ge;rt=f;var Wr=p;switch(hn.tag){case 1:if(En=hn.payload,typeof En=="function"){wt=En.call(Wr,wt,rt);break e}wt=En;break e;case 3:En.flags=En.flags&-65537|128;case 0:if(En=hn.payload,rt=typeof En=="function"?En.call(Wr,wt,rt):En,rt==null)break e;wt=d({},wt,rt);break e;case 2:st=!0}}rt=ge.callback,rt!==null&&(c.flags|=64,at&&(c.flags|=8192),at=F.callbacks,at===null?F.callbacks=[rt]:at.push(rt))}else at={lane:rt,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ft===null?(Ze=ft=at,Fe=wt):ft=ft.next=at,oe|=rt;if(ge=ge.next,ge===null){if(ge=F.shared.pending,ge===null)break;at=ge,ge=at.next,at.next=null,F.lastBaseUpdate=at,F.shared.pending=null}}while(!0);ft===null&&(Fe=wt),F.baseState=Fe,F.firstBaseUpdate=Ze,F.lastBaseUpdate=ft,H===null&&(F.shared.lanes=0),fd|=oe,c.lanes=oe,c.memoizedState=wt}}function ur(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function br(c,f){var p=c.callbacks;if(p!==null)for(c.callbacks=null,c=0;c<p.length;c++)ur(p[c],f)}var Hn=Ae(null),Mn=Ae(0);function kr(c,f){c=lA,K(Mn,c),K(Hn,f),lA=c|f.baseLanes}function Cr(){K(Mn,lA),K(Hn,Hn.current)}function Tn(){lA=Mn.current,j(Hn),j(Mn)}var Lr=0,An=null,vn=null,cr=null,Ar=!1,us=!1,Ga=!1,va=0,ya=0,Ia=null,fo=0;function Er(){throw Error(r(321))}function Fa(c,f){if(f===null)return!1;for(var p=0;p<f.length&&p<c.length;p++)if(!os(c[p],f[p]))return!1;return!0}function Po(c,f,p,y,F,H){return Lr=H,An=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,J.H=c===null||c.memoizedState===null?bT:CT,Ga=!1,H=p(y,F),Ga=!1,us&&(H=Zu(f,p,y,F)),nu(c),H}function nu(c){J.H=v1;var f=vn!==null&&vn.next!==null;if(Lr=0,cr=vn=An=null,Ar=!1,ya=0,Ia=null,f)throw Error(r(300));c===null||Ps||(c=c.dependencies,c!==null&&Yh(c)&&(Ps=!0))}function Zu(c,f,p,y){An=c;var F=0;do{if(us&&(Ia=null),ya=0,us=!1,25<=F)throw Error(r(301));if(F+=1,cr=vn=null,c.updateQueue!=null){var H=c.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}J.H=FQ,H=f(p,y)}while(us);return H}function ru(){var c=J.H,f=c.useState()[0];return f=typeof f.then=="function"?au(f):f,c=c.useState()[0],(vn!==null?vn.memoizedState:null)!==c&&(An.flags|=1024),f}function ea(){var c=va!==0;return va=0,c}function Rf(c,f,p){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~p}function Zh(c){if(Ar){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ar=!1}Lr=0,cr=vn=An=null,us=!1,ya=va=0,Ia=null}function Zs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cr===null?An.memoizedState=cr=c:cr=cr.next=c,cr}function aa(){if(vn===null){var c=An.alternate;c=c!==null?c.memoizedState:null}else c=vn.next;var f=cr===null?An.memoizedState:cr.next;if(f!==null)cr=f,vn=c;else{if(c===null)throw An.alternate===null?Error(r(467)):Error(r(310));vn=c,c={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},cr===null?An.memoizedState=cr=c:cr=cr.next=c}return cr}function eA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(c){var f=ya;return ya+=1,Ia===null&&(Ia=[]),c=Je(Ia,c,f),f=An,(cr===null?f.memoizedState:cr.next)===null&&(f=f.alternate,J.H=f===null||f.memoizedState===null?bT:CT),c}function yi(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return au(c);if(c.$$typeof===k)return Va(c)}throw Error(r(438,String(c)))}function su(c){var f=null,p=An.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var y=An.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(f={data:y.data.map(function(F){return F.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=eA(),An.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(c),y=0;y<c;y++)p[y]=O;return f.index++,p}function wi(c,f){return typeof f=="function"?f(c):f}function Df(c){var f=aa();return nd(f,vn,c)}function nd(c,f,p){var y=c.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var F=c.baseQueue,H=y.pending;if(H!==null){if(F!==null){var oe=F.next;F.next=H.next,H.next=oe}f.baseQueue=F=H,y.pending=null}if(H=c.baseState,F===null)c.memoizedState=H;else{f=F.next;var ge=oe=null,Fe=null,Ze=f,ft=!1;do{var wt=Ze.lane&-536870913;if(wt!==Ze.lane?(dr&wt)===wt:(Lr&wt)===wt){var rt=Ze.revertLane;if(rt===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),wt===Xu&&(ft=!0);else if((Lr&rt)===rt){Ze=Ze.next,rt===Xu&&(ft=!0);continue}else wt={lane:0,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Fe===null?(ge=Fe=wt,oe=H):Fe=Fe.next=wt,An.lanes|=rt,fd|=rt;wt=Ze.action,Ga&&p(H,wt),H=Ze.hasEagerState?Ze.eagerState:p(H,wt)}else rt={lane:wt,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Fe===null?(ge=Fe=rt,oe=H):Fe=Fe.next=rt,An.lanes|=wt,fd|=wt;Ze=Ze.next}while(Ze!==null&&Ze!==f);if(Fe===null?oe=H:Fe.next=ge,!os(H,c.memoizedState)&&(Ps=!0,ft&&(p=oc,p!==null)))throw p;c.memoizedState=H,c.baseState=oe,c.baseQueue=Fe,y.lastRenderedState=H}return F===null&&(y.lanes=0),[c.memoizedState,y.dispatch]}function e0(c){var f=aa(),p=f.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=c;var y=p.dispatch,F=p.pending,H=f.memoizedState;if(F!==null){p.pending=null;var oe=F=F.next;do H=c(H,oe.action),oe=oe.next;while(oe!==F);os(H,f.memoizedState)||(Ps=!0),f.memoizedState=H,f.baseQueue===null&&(f.baseState=H),p.lastRenderedState=H}return[H,y]}function Lf(c,f,p){var y=An,F=aa(),H=mr;if(H){if(p===void 0)throw Error(r(407));p=p()}else p=f();var oe=!os((vn||F).memoizedState,p);oe&&(F.memoizedState=p,Ps=!0),F=F.queue;var ge=rd.bind(null,y,F,c);if(id(2048,8,ge,[c]),F.getSnapshot!==f||oe||cr!==null&&cr.memoizedState.tag&1){if(y.flags|=2048,cc(9,jf(),Uf.bind(null,y,F,p,f),null),ta===null)throw Error(r(349));H||(Lr&124)!==0||t0(y,f,p)}return p}function t0(c,f,p){c.flags|=16384,c={getSnapshot:f,value:p},f=An.updateQueue,f===null?(f=eA(),An.updateQueue=f,f.stores=[c]):(p=f.stores,p===null?f.stores=[c]:p.push(c))}function Uf(c,f,p,y){f.value=p,f.getSnapshot=y,l1(f)&&c1(c)}function rd(c,f,p){return p(function(){l1(f)&&c1(c)})}function l1(c){var f=c.getSnapshot;c=c.value;try{var p=f();return!os(c,p)}catch{return!0}}function c1(c){var f=ec(c,2);f!==null&&zo(f,c,2)}function Mf(c){var f=Zs();if(typeof c=="function"){var p=c;if(c=p(),Ga){Yt(!0);try{p()}finally{Yt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:c},f}function lc(c,f,p,y){return c.baseState=p,nd(c,vn,typeof y=="function"?y:wi)}function rb(c,f,p,y,F){if(x1(c))throw Error(r(485));if(c=f.action,c!==null){var H={payload:F,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){H.listeners.push(oe)}};J.T!==null?p(!0):H.isTransition=!1,y(H),p=f.pending,p===null?(H.next=f.pending=H,u1(f,H)):(H.next=p.next,f.pending=p.next=H)}}function u1(c,f){var p=f.action,y=f.payload,F=c.state;if(f.isTransition){var H=J.T,oe={};J.T=oe;try{var ge=p(F,y),Fe=J.S;Fe!==null&&Fe(oe,ge),A1(c,f,ge)}catch(Ze){ad(c,f,Ze)}finally{J.T=H}}else try{H=p(F,y),A1(c,f,H)}catch(Ze){ad(c,f,Ze)}}function A1(c,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){ap(c,f,y)},function(y){return ad(c,f,y)}):ap(c,f,p)}function ap(c,f,p){f.status="fulfilled",f.value=p,sp(f),c.state=p,f=c.pending,f!==null&&(p=f.next,p===f?c.pending=null:(p=p.next,f.next=p,u1(c,p)))}function ad(c,f,p){var y=c.pending;if(c.pending=null,y!==null){y=y.next;do f.status="rejected",f.reason=p,sp(f),f=f.next;while(f!==y)}c.action=null}function sp(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function ip(c,f){return f}function Pf(c,f){if(mr){var p=ta.formState;if(p!==null){e:{var y=An;if(mr){if(fa){t:{for(var F=fa,H=xl;F.nodeType!==8;){if(!H){F=null;break t}if(F=fc(F.nextSibling),F===null){F=null;break t}}H=F.data,F=H==="F!"||H==="F"?F:null}if(F){fa=fc(F.nextSibling),y=F.data==="F!";break e}}Yu(y)}y=!1}y&&(f=p[0])}}return p=Zs(),p.memoizedState=p.baseState=f,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:f},p.queue=y,p=vT.bind(null,An,y),y.dispatch=p,y=Mf(!1),H=ab.bind(null,An,!1,y.queue),y=Zs(),F={state:f,dispatch:null,action:c,pending:null},y.queue=F,p=rb.bind(null,An,F,H,p),F.dispatch=p,y.memoizedState=c,[f,p,!1]}function n0(c){var f=aa();return sd(f,vn,c)}function sd(c,f,p){if(f=nd(c,f,ip)[0],c=Df(wi)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var y=au(f)}catch(oe){throw oe===fe?me:oe}else y=f;f=aa();var F=f.queue,H=F.dispatch;return p!==f.memoizedState&&(An.flags|=2048,cc(9,jf(),d1.bind(null,F,p),null)),[y,H,c]}function d1(c,f){c.action=f}function f1(c){var f=aa(),p=vn;if(p!==null)return sd(f,p,c);aa(),f=f.memoizedState,p=aa();var y=p.queue.dispatch;return p.memoizedState=c,[f,y,!1]}function cc(c,f,p,y){return c={tag:c,create:p,deps:y,inst:f,next:null},f=An.updateQueue,f===null&&(f=eA(),An.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=c.next=c:(y=p.next,p.next=c,c.next=y,f.lastEffect=c),c}function jf(){return{destroy:void 0,resource:void 0}}function r0(){return aa().memoizedState}function jo(c,f,p,y){var F=Zs();y=y===void 0?null:y,An.flags|=c,F.memoizedState=cc(1|f,jf(),p,y)}function id(c,f,p,y){var F=aa();y=y===void 0?null:y;var H=F.memoizedState.inst;vn!==null&&y!==null&&Fa(y,vn.memoizedState.deps)?F.memoizedState=cc(f,H,p,y):(An.flags|=c,F.memoizedState=cc(1|f,H,p,y))}function op(c,f){jo(8390656,8,c,f)}function h1(c,f){id(2048,8,c,f)}function lp(c,f){return id(4,2,c,f)}function tA(c,f){return id(4,4,c,f)}function m1(c,f){if(typeof f=="function"){c=c();var p=f(c);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function cp(c,f,p){p=p!=null?p.concat([c]):null,id(4,4,m1.bind(null,f,c),p)}function up(){}function Ap(c,f){var p=aa();f=f===void 0?null:f;var y=p.memoizedState;return f!==null&&Fa(f,y[1])?y[0]:(p.memoizedState=[c,f],c)}function p1(c,f){var p=aa();f=f===void 0?null:f;var y=p.memoizedState;if(f!==null&&Fa(f,y[1]))return y[0];if(y=c(),Ga){Yt(!0);try{c()}finally{Yt(!1)}}return p.memoizedState=[y,f],y}function nA(c,f,p){return p===void 0||(Lr&1073741824)!==0?c.memoizedState=f:(c.memoizedState=p,c=mB(),An.lanes|=c,fd|=c,p)}function a0(c,f,p,y){return os(p,f)?p:Hn.current!==null?(c=nA(c,p,y),os(c,f)||(Ps=!0),c):(Lr&42)===0?(Ps=!0,c.memoizedState=p):(c=mB(),An.lanes|=c,fd|=c,f)}function Of(c,f,p,y,F){var H=ee.p;ee.p=H!==0&&8>H?H:8;var oe=J.T,ge={};J.T=ge,ab(c,!1,f,p);try{var Fe=F(),Ze=J.S;if(Ze!==null&&Ze(ge,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var ft=o1(Fe,y);mp(c,f,ft,Vo(c))}else mp(c,f,y,Vo(c))}catch(wt){mp(c,f,{then:function(){},status:"rejected",reason:wt},Vo())}finally{ee.p=H,J.T=oe}}function uc(){}function bl(c,f,p,y){if(c.tag!==5)throw Error(r(476));var F=Ac(c).queue;Of(c,F,f,ae,p===null?uc:function(){return Qf(c),p(y)})}function Ac(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:ae},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:p},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function Qf(c){var f=Ac(c).next.queue;mp(c,f,{},Vo())}function Hf(){return Va(Rp)}function dp(){return aa().memoizedState}function g1(){return aa().memoizedState}function fp(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var p=Vo();c=ct(p);var y=vt(f,c,p);y!==null&&(zo(y,f,p),ht(y,f,p)),f={cache:np()},c.payload=f;return}f=f.return}}function hp(c,f,p){var y=Vo();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},x1(c)?yT(f,p):(p=Yc(c,f,p,y),p!==null&&(zo(p,c,y),wT(p,f,y)))}function vT(c,f,p){var y=Vo();mp(c,f,p,y)}function mp(c,f,p,y){var F={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(x1(c))yT(f,F);else{var H=c.alternate;if(c.lanes===0&&(H===null||H.lanes===0)&&(H=f.lastRenderedReducer,H!==null))try{var oe=f.lastRenderedState,ge=H(oe,p);if(F.hasEagerState=!0,F.eagerState=ge,os(ge,oe))return Jc(c,f,F,0),ta===null&&co(),!1}catch{}finally{}if(p=Yc(c,f,F,y),p!==null)return zo(p,c,y),wT(p,f,y),!0}return!1}function ab(c,f,p,y){if(y={lane:2,revertLane:Ub(),action:y,hasEagerState:!1,eagerState:null,next:null},x1(c)){if(f)throw Error(r(479))}else f=Yc(c,p,y,2),f!==null&&zo(f,c,2)}function x1(c){var f=c.alternate;return c===An||f!==null&&f===An}function yT(c,f){us=Ar=!0;var p=c.pending;p===null?f.next=f:(f.next=p.next,p.next=f),c.pending=f}function wT(c,f,p){if((p&4194048)!==0){var y=f.lanes;y&=c.pendingLanes,p|=y,f.lanes=p,On(c,p)}}var v1={readContext:Va,use:yi,useCallback:Er,useContext:Er,useEffect:Er,useImperativeHandle:Er,useLayoutEffect:Er,useInsertionEffect:Er,useMemo:Er,useReducer:Er,useRef:Er,useState:Er,useDebugValue:Er,useDeferredValue:Er,useTransition:Er,useSyncExternalStore:Er,useId:Er,useHostTransitionStatus:Er,useFormState:Er,useActionState:Er,useOptimistic:Er,useMemoCache:Er,useCacheRefresh:Er},bT={readContext:Va,use:yi,useCallback:function(c,f){return Zs().memoizedState=[c,f===void 0?null:f],c},useContext:Va,useEffect:op,useImperativeHandle:function(c,f,p){p=p!=null?p.concat([c]):null,jo(4194308,4,m1.bind(null,f,c),p)},useLayoutEffect:function(c,f){return jo(4194308,4,c,f)},useInsertionEffect:function(c,f){jo(4,2,c,f)},useMemo:function(c,f){var p=Zs();f=f===void 0?null:f;var y=c();if(Ga){Yt(!0);try{c()}finally{Yt(!1)}}return p.memoizedState=[y,f],y},useReducer:function(c,f,p){var y=Zs();if(p!==void 0){var F=p(f);if(Ga){Yt(!0);try{p(f)}finally{Yt(!1)}}}else F=f;return y.memoizedState=y.baseState=F,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:F},y.queue=c,c=c.dispatch=hp.bind(null,An,c),[y.memoizedState,c]},useRef:function(c){var f=Zs();return c={current:c},f.memoizedState=c},useState:function(c){c=Mf(c);var f=c.queue,p=vT.bind(null,An,f);return f.dispatch=p,[c.memoizedState,p]},useDebugValue:up,useDeferredValue:function(c,f){var p=Zs();return nA(p,c,f)},useTransition:function(){var c=Mf(!1);return c=Of.bind(null,An,c.queue,!0,!1),Zs().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,p){var y=An,F=Zs();if(mr){if(p===void 0)throw Error(r(407));p=p()}else{if(p=f(),ta===null)throw Error(r(349));(dr&124)!==0||t0(y,f,p)}F.memoizedState=p;var H={value:p,getSnapshot:f};return F.queue=H,op(rd.bind(null,y,H,c),[c]),y.flags|=2048,cc(9,jf(),Uf.bind(null,y,H,p,f),null),p},useId:function(){var c=Zs(),f=ta.identifierPrefix;if(mr){var p=ac,y=rc;p=(y&~(1<<32-Mt(y)-1)).toString(32)+p,f=""+f+"R"+p,p=va++,0<p&&(f+="H"+p.toString(32)),f+=""}else p=fo++,f=""+f+"r"+p.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:Hf,useFormState:Pf,useActionState:Pf,useOptimistic:function(c){var f=Zs();f.memoizedState=f.baseState=c;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=ab.bind(null,An,!0,p),p.dispatch=f,[c,f]},useMemoCache:su,useCacheRefresh:function(){return Zs().memoizedState=fp.bind(null,An)}},CT={readContext:Va,use:yi,useCallback:Ap,useContext:Va,useEffect:h1,useImperativeHandle:cp,useInsertionEffect:lp,useLayoutEffect:tA,useMemo:p1,useReducer:Df,useRef:r0,useState:function(){return Df(wi)},useDebugValue:up,useDeferredValue:function(c,f){var p=aa();return a0(p,vn.memoizedState,c,f)},useTransition:function(){var c=Df(wi)[0],f=aa().memoizedState;return[typeof c=="boolean"?c:au(c),f]},useSyncExternalStore:Lf,useId:dp,useHostTransitionStatus:Hf,useFormState:n0,useActionState:n0,useOptimistic:function(c,f){var p=aa();return lc(p,vn,c,f)},useMemoCache:su,useCacheRefresh:g1},FQ={readContext:Va,use:yi,useCallback:Ap,useContext:Va,useEffect:h1,useImperativeHandle:cp,useInsertionEffect:lp,useLayoutEffect:tA,useMemo:p1,useReducer:e0,useRef:r0,useState:function(){return e0(wi)},useDebugValue:up,useDeferredValue:function(c,f){var p=aa();return vn===null?nA(p,c,f):a0(p,vn.memoizedState,c,f)},useTransition:function(){var c=e0(wi)[0],f=aa().memoizedState;return[typeof c=="boolean"?c:au(c),f]},useSyncExternalStore:Lf,useId:dp,useHostTransitionStatus:Hf,useFormState:f1,useActionState:f1,useOptimistic:function(c,f){var p=aa();return vn!==null?lc(p,vn,c,f):(p.baseState=c,[c,p.queue.dispatch])},useMemoCache:su,useCacheRefresh:g1},s0=null,pp=0;function y1(c){var f=pp;return pp+=1,s0===null&&(s0=[]),Je(s0,c,f)}function gp(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function w1(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function ET(c){var f=c._init;return f(c._payload)}function _T(c){function f(Ge,Pe){if(c){var $e=Ge.deletions;$e===null?(Ge.deletions=[Pe],Ge.flags|=16):$e.push(Pe)}}function p(Ge,Pe){if(!c)return null;for(;Pe!==null;)f(Ge,Pe),Pe=Pe.sibling;return null}function y(Ge){for(var Pe=new Map;Ge!==null;)Ge.key!==null?Pe.set(Ge.key,Ge):Pe.set(Ge.index,Ge),Ge=Ge.sibling;return Pe}function F(Ge,Pe){return Ge=gl(Ge,Pe),Ge.index=0,Ge.sibling=null,Ge}function H(Ge,Pe,$e){return Ge.index=$e,c?($e=Ge.alternate,$e!==null?($e=$e.index,$e<Pe?(Ge.flags|=67108866,Pe):$e):(Ge.flags|=67108866,Pe)):(Ge.flags|=1048576,Pe)}function oe(Ge){return c&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function ge(Ge,Pe,$e,pt){return Pe===null||Pe.tag!==6?(Pe=Kh($e,Ge.mode,pt),Pe.return=Ge,Pe):(Pe=F(Pe,$e),Pe.return=Ge,Pe)}function Fe(Ge,Pe,$e,pt){var Xt=$e.type;return Xt===b?ft(Ge,Pe,$e.props.children,pt,$e.key):Pe!==null&&(Pe.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===B&&ET(Xt)===Pe.type)?(Pe=F(Pe,$e.props),gp(Pe,$e),Pe.return=Ge,Pe):(Pe=Wu($e.type,$e.key,$e.props,null,Ge.mode,pt),gp(Pe,$e),Pe.return=Ge,Pe)}function Ze(Ge,Pe,$e,pt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==$e.containerInfo||Pe.stateNode.implementation!==$e.implementation?(Pe=Bf($e,Ge.mode,pt),Pe.return=Ge,Pe):(Pe=F(Pe,$e.children||[]),Pe.return=Ge,Pe)}function ft(Ge,Pe,$e,pt,Xt){return Pe===null||Pe.tag!==7?(Pe=tc($e,Ge.mode,pt,Xt),Pe.return=Ge,Pe):(Pe=F(Pe,$e),Pe.return=Ge,Pe)}function wt(Ge,Pe,$e){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Kh(""+Pe,Ge.mode,$e),Pe.return=Ge,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case m:return $e=Wu(Pe.type,Pe.key,Pe.props,null,Ge.mode,$e),gp($e,Pe),$e.return=Ge,$e;case g:return Pe=Bf(Pe,Ge.mode,$e),Pe.return=Ge,Pe;case B:var pt=Pe._init;return Pe=pt(Pe._payload),wt(Ge,Pe,$e)}if(ie(Pe)||L(Pe))return Pe=tc(Pe,Ge.mode,$e,null),Pe.return=Ge,Pe;if(typeof Pe.then=="function")return wt(Ge,y1(Pe),$e);if(Pe.$$typeof===k)return wt(Ge,tu(Ge,Pe),$e);w1(Ge,Pe)}return null}function rt(Ge,Pe,$e,pt){var Xt=Pe!==null?Pe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Xt!==null?null:ge(Ge,Pe,""+$e,pt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case m:return $e.key===Xt?Fe(Ge,Pe,$e,pt):null;case g:return $e.key===Xt?Ze(Ge,Pe,$e,pt):null;case B:return Xt=$e._init,$e=Xt($e._payload),rt(Ge,Pe,$e,pt)}if(ie($e)||L($e))return Xt!==null?null:ft(Ge,Pe,$e,pt,null);if(typeof $e.then=="function")return rt(Ge,Pe,y1($e),pt);if($e.$$typeof===k)return rt(Ge,Pe,tu(Ge,$e),pt);w1(Ge,$e)}return null}function at(Ge,Pe,$e,pt,Xt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ge=Ge.get($e)||null,ge(Pe,Ge,""+pt,Xt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case m:return Ge=Ge.get(pt.key===null?$e:pt.key)||null,Fe(Pe,Ge,pt,Xt);case g:return Ge=Ge.get(pt.key===null?$e:pt.key)||null,Ze(Pe,Ge,pt,Xt);case B:var $n=pt._init;return pt=$n(pt._payload),at(Ge,Pe,$e,pt,Xt)}if(ie(pt)||L(pt))return Ge=Ge.get($e)||null,ft(Pe,Ge,pt,Xt,null);if(typeof pt.then=="function")return at(Ge,Pe,$e,y1(pt),Xt);if(pt.$$typeof===k)return at(Ge,Pe,$e,tu(Pe,pt),Xt);w1(Pe,pt)}return null}function En(Ge,Pe,$e,pt){for(var Xt=null,$n=null,an=Pe,pn=Pe=0,Os=null;an!==null&&pn<$e.length;pn++){an.index>pn?(Os=an,an=null):Os=an.sibling;var _r=rt(Ge,an,$e[pn],pt);if(_r===null){an===null&&(an=Os);break}c&&an&&_r.alternate===null&&f(Ge,an),Pe=H(_r,Pe,pn),$n===null?Xt=_r:$n.sibling=_r,$n=_r,an=Os}if(pn===$e.length)return p(Ge,an),mr&&Ju(Ge,pn),Xt;if(an===null){for(;pn<$e.length;pn++)an=wt(Ge,$e[pn],pt),an!==null&&(Pe=H(an,Pe,pn),$n===null?Xt=an:$n.sibling=an,$n=an);return mr&&Ju(Ge,pn),Xt}for(an=y(an);pn<$e.length;pn++)Os=at(an,Ge,pn,$e[pn],pt),Os!==null&&(c&&Os.alternate!==null&&an.delete(Os.key===null?pn:Os.key),Pe=H(Os,Pe,pn),$n===null?Xt=Os:$n.sibling=Os,$n=Os);return c&&an.forEach(function(bd){return f(Ge,bd)}),mr&&Ju(Ge,pn),Xt}function hn(Ge,Pe,$e,pt){if($e==null)throw Error(r(151));for(var Xt=null,$n=null,an=Pe,pn=Pe=0,Os=null,_r=$e.next();an!==null&&!_r.done;pn++,_r=$e.next()){an.index>pn?(Os=an,an=null):Os=an.sibling;var bd=rt(Ge,an,_r.value,pt);if(bd===null){an===null&&(an=Os);break}c&&an&&bd.alternate===null&&f(Ge,an),Pe=H(bd,Pe,pn),$n===null?Xt=bd:$n.sibling=bd,$n=bd,an=Os}if(_r.done)return p(Ge,an),mr&&Ju(Ge,pn),Xt;if(an===null){for(;!_r.done;pn++,_r=$e.next())_r=wt(Ge,_r.value,pt),_r!==null&&(Pe=H(_r,Pe,pn),$n===null?Xt=_r:$n.sibling=_r,$n=_r);return mr&&Ju(Ge,pn),Xt}for(an=y(an);!_r.done;pn++,_r=$e.next())_r=at(an,Ge,pn,_r.value,pt),_r!==null&&(c&&_r.alternate!==null&&an.delete(_r.key===null?pn:_r.key),Pe=H(_r,Pe,pn),$n===null?Xt=_r:$n.sibling=_r,$n=_r);return c&&an.forEach(function(R9){return f(Ge,R9)}),mr&&Ju(Ge,pn),Xt}function Wr(Ge,Pe,$e,pt){if(typeof $e=="object"&&$e!==null&&$e.type===b&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case m:e:{for(var Xt=$e.key;Pe!==null;){if(Pe.key===Xt){if(Xt=$e.type,Xt===b){if(Pe.tag===7){p(Ge,Pe.sibling),pt=F(Pe,$e.props.children),pt.return=Ge,Ge=pt;break e}}else if(Pe.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===B&&ET(Xt)===Pe.type){p(Ge,Pe.sibling),pt=F(Pe,$e.props),gp(pt,$e),pt.return=Ge,Ge=pt;break e}p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}$e.type===b?(pt=tc($e.props.children,Ge.mode,pt,$e.key),pt.return=Ge,Ge=pt):(pt=Wu($e.type,$e.key,$e.props,null,Ge.mode,pt),gp(pt,$e),pt.return=Ge,Ge=pt)}return oe(Ge);case g:e:{for(Xt=$e.key;Pe!==null;){if(Pe.key===Xt)if(Pe.tag===4&&Pe.stateNode.containerInfo===$e.containerInfo&&Pe.stateNode.implementation===$e.implementation){p(Ge,Pe.sibling),pt=F(Pe,$e.children||[]),pt.return=Ge,Ge=pt;break e}else{p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}pt=Bf($e,Ge.mode,pt),pt.return=Ge,Ge=pt}return oe(Ge);case B:return Xt=$e._init,$e=Xt($e._payload),Wr(Ge,Pe,$e,pt)}if(ie($e))return En(Ge,Pe,$e,pt);if(L($e)){if(Xt=L($e),typeof Xt!="function")throw Error(r(150));return $e=Xt.call($e),hn(Ge,Pe,$e,pt)}if(typeof $e.then=="function")return Wr(Ge,Pe,y1($e),pt);if($e.$$typeof===k)return Wr(Ge,Pe,tu(Ge,$e),pt);w1(Ge,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Pe!==null&&Pe.tag===6?(p(Ge,Pe.sibling),pt=F(Pe,$e),pt.return=Ge,Ge=pt):(p(Ge,Pe),pt=Kh($e,Ge.mode,pt),pt.return=Ge,Ge=pt),oe(Ge)):p(Ge,Pe)}return function(Ge,Pe,$e,pt){try{pp=0;var Xt=Wr(Ge,Pe,$e,pt);return s0=null,Xt}catch(an){if(an===fe||an===me)throw an;var $n=Ms(29,an,null,Ge.mode);return $n.lanes=pt,$n.return=Ge,$n}finally{}}}var i0=_T(!0),ST=_T(!1),Cl=Ae(null),iu=null;function od(c){var f=c.alternate;K(Ts,Ts.current&1),K(Cl,c),iu===null&&(f===null||Hn.current!==null||f.memoizedState!==null)&&(iu=c)}function TT(c){if(c.tag===22){if(K(Ts,Ts.current),K(Cl,c),iu===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(iu=c)}}else ld()}function ld(){K(Ts,Ts.current),K(Cl,Cl.current)}function rA(c){j(Cl),iu===c&&(iu=null),j(Ts)}var Ts=Ae(0);function b1(c){for(var f=c;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Wb(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function sb(c,f,p,y){f=c.memoizedState,p=p(y,f),p=p==null?f:d({},f,p),c.memoizedState=p,c.lanes===0&&(c.updateQueue.baseState=p)}var ib={enqueueSetState:function(c,f,p){c=c._reactInternals;var y=Vo(),F=ct(y);F.payload=f,p!=null&&(F.callback=p),f=vt(c,F,y),f!==null&&(zo(f,c,y),ht(f,c,y))},enqueueReplaceState:function(c,f,p){c=c._reactInternals;var y=Vo(),F=ct(y);F.tag=1,F.payload=f,p!=null&&(F.callback=p),f=vt(c,F,y),f!==null&&(zo(f,c,y),ht(f,c,y))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var p=Vo(),y=ct(p);y.tag=2,f!=null&&(y.callback=f),f=vt(c,y,p),f!==null&&(zo(f,c,p),ht(f,c,p))}};function BT(c,f,p,y,F,H,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,H,oe):f.prototype&&f.prototype.isPureReactComponent?!Vc(p,y)||!Vc(F,H):!0}function NT(c,f,p,y){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,y),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,y),f.state!==c&&ib.enqueueReplaceState(f,f.state,null)}function Vf(c,f){var p=f;if("ref"in f){p={};for(var y in f)y!=="ref"&&(p[y]=f[y])}if(c=c.defaultProps){p===f&&(p=d({},p));for(var F in c)p[F]===void 0&&(p[F]=c[F])}return p}var C1=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function kT(c){C1(c)}function IT(c){console.error(c)}function FT(c){C1(c)}function E1(c,f){try{var p=c.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(y){setTimeout(function(){throw y})}}function RT(c,f,p){try{var y=c.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function ob(c,f,p){return p=ct(p),p.tag=3,p.payload={element:null},p.callback=function(){E1(c,f)},p}function DT(c){return c=ct(c),c.tag=3,c}function LT(c,f,p,y){var F=p.type.getDerivedStateFromError;if(typeof F=="function"){var H=y.value;c.payload=function(){return F(H)},c.callback=function(){RT(f,p,y)}}var oe=p.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(c.callback=function(){RT(f,p,y),typeof F!="function"&&(hd===null?hd=new Set([this]):hd.add(this));var ge=y.stack;this.componentDidCatch(y.value,{componentStack:ge!==null?ge:""})})}function RQ(c,f,p,y,F){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(f=p.alternate,f!==null&&td(f,p,F,!0),p=Cl.current,p!==null){switch(p.tag){case 13:return iu===null?Ib():p.alternate===null&&Ra===0&&(Ra=3),p.flags&=-257,p.flags|=65536,p.lanes=F,y===ve?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([y]):f.add(y),Rb(c,y,F)),!1;case 22:return p.flags|=65536,y===ve?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([y]):p.add(y)),Rb(c,y,F)),!1}throw Error(r(435,p.tag))}return Rb(c,y,F),Ib(),!1}if(mr)return f=Cl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=F,y!==tp&&(c=Error(r(422),{cause:y}),ed(Vn(c,p)))):(y!==tp&&(f=Error(r(423),{cause:y}),ed(Vn(f,p))),c=c.current.alternate,c.flags|=65536,F&=-F,c.lanes|=F,y=Vn(y,p),F=ob(c.stateNode,y,F),Vt(c,F),Ra!==4&&(Ra=2)),!1;var H=Error(r(520),{cause:y});if(H=Vn(H,p),Ep===null?Ep=[H]:Ep.push(H),Ra!==4&&(Ra=2),f===null)return!0;y=Vn(y,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,c=F&-F,p.lanes|=c,c=ob(p.stateNode,y,c),Vt(p,c),!1;case 1:if(f=p.type,H=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(hd===null||!hd.has(H))))return p.flags|=65536,F&=-F,p.lanes|=F,F=DT(F),LT(F,c,p,y),Vt(p,F),!1}p=p.return}while(p!==null);return!1}var UT=Error(r(461)),Ps=!1;function ei(c,f,p,y){f.child=c===null?ST(f,null,p,y):i0(f,c.child,p,y)}function MT(c,f,p,y,F){p=p.render;var H=f.ref;if("ref"in y){var oe={};for(var ge in y)ge!=="ref"&&(oe[ge]=y[ge])}else oe=y;return wl(f),y=Po(c,f,p,oe,H,F),ge=ea(),c!==null&&!Ps?(Rf(c,f,F),aA(c,f,F)):(mr&&ge&&Nf(f),f.flags|=1,ei(c,f,y,F),f.child)}function PT(c,f,p,y,F){if(c===null){var H=p.type;return typeof H=="function"&&!XA(H)&&H.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=H,jT(c,f,H,y,F)):(c=Wu(p.type,null,y,f,f.mode,F),c.ref=f.ref,c.return=f,f.child=c)}if(H=c.child,!mb(c,F)){var oe=H.memoizedProps;if(p=p.compare,p=p!==null?p:Vc,p(oe,y)&&c.ref===f.ref)return aA(c,f,F)}return f.flags|=1,c=gl(H,y),c.ref=f.ref,c.return=f,f.child=c}function jT(c,f,p,y,F){if(c!==null){var H=c.memoizedProps;if(Vc(H,y)&&c.ref===f.ref)if(Ps=!1,f.pendingProps=y=H,mb(c,F))(c.flags&131072)!==0&&(Ps=!0);else return f.lanes=c.lanes,aA(c,f,F)}return lb(c,f,p,y,F)}function OT(c,f,p){var y=f.pendingProps,F=y.children,H=c!==null?c.memoizedState:null;if(y.mode==="hidden"){if((f.flags&128)!==0){if(y=H!==null?H.baseLanes|p:p,c!==null){for(F=f.child=c.child,H=0;F!==null;)H=H|F.lanes|F.childLanes,F=F.sibling;f.childLanes=H&~y}else f.childLanes=0,f.child=null;return QT(c,f,y,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&ne(f,H!==null?H.cachePool:null),H!==null?kr(f,H):Cr(),TT(f);else return f.lanes=f.childLanes=536870912,QT(c,f,H!==null?H.baseLanes|p:p,p)}else H!==null?(ne(f,H.cachePool),kr(f,H),ld(),f.memoizedState=null):(c!==null&&ne(f,null),Cr(),ld());return ei(c,f,F,p),f.child}function QT(c,f,p,y){var F=G();return F=F===null?null:{parent:za._currentValue,pool:F},f.memoizedState={baseLanes:p,cachePool:F},c!==null&&ne(f,null),Cr(),TT(f),c!==null&&td(c,f,y,!0),null}function _1(c,f){var p=f.ref;if(p===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(c===null||c.ref!==p)&&(f.flags|=4194816)}}function lb(c,f,p,y,F){return wl(f),p=Po(c,f,p,y,void 0,F),y=ea(),c!==null&&!Ps?(Rf(c,f,F),aA(c,f,F)):(mr&&y&&Nf(f),f.flags|=1,ei(c,f,p,F),f.child)}function HT(c,f,p,y,F,H){return wl(f),f.updateQueue=null,p=Zu(f,y,p,F),nu(c),y=ea(),c!==null&&!Ps?(Rf(c,f,H),aA(c,f,H)):(mr&&y&&Nf(f),f.flags|=1,ei(c,f,p,H),f.child)}function VT(c,f,p,y,F){if(wl(f),f.stateNode===null){var H=ls,oe=p.contextType;typeof oe=="object"&&oe!==null&&(H=Va(oe)),H=new p(y,H),f.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=ib,f.stateNode=H,H._reactInternals=f,H=f.stateNode,H.props=y,H.state=f.memoizedState,H.refs={},Me(f),oe=p.contextType,H.context=typeof oe=="object"&&oe!==null?Va(oe):ls,H.state=f.memoizedState,oe=p.getDerivedStateFromProps,typeof oe=="function"&&(sb(f,p,oe,y),H.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(oe=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),oe!==H.state&&ib.enqueueReplaceState(H,H.state,null),Ot(f,y,H,F),tn(),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308),y=!0}else if(c===null){H=f.stateNode;var ge=f.memoizedProps,Fe=Vf(p,ge);H.props=Fe;var Ze=H.context,ft=p.contextType;oe=ls,typeof ft=="object"&&ft!==null&&(oe=Va(ft));var wt=p.getDerivedStateFromProps;ft=typeof wt=="function"||typeof H.getSnapshotBeforeUpdate=="function",ge=f.pendingProps!==ge,ft||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ge||Ze!==oe)&&NT(f,H,y,oe),st=!1;var rt=f.memoizedState;H.state=rt,Ot(f,y,H,F),tn(),Ze=f.memoizedState,ge||rt!==Ze||st?(typeof wt=="function"&&(sb(f,p,wt,y),Ze=f.memoizedState),(Fe=st||BT(f,p,Fe,y,rt,Ze,oe))?(ft||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(f.flags|=4194308)):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=y,f.memoizedState=Ze),H.props=y,H.state=Ze,H.context=oe,y=Fe):(typeof H.componentDidMount=="function"&&(f.flags|=4194308),y=!1)}else{H=f.stateNode,je(c,f),oe=f.memoizedProps,ft=Vf(p,oe),H.props=ft,wt=f.pendingProps,rt=H.context,Ze=p.contextType,Fe=ls,typeof Ze=="object"&&Ze!==null&&(Fe=Va(Ze)),ge=p.getDerivedStateFromProps,(Ze=typeof ge=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(oe!==wt||rt!==Fe)&&NT(f,H,y,Fe),st=!1,rt=f.memoizedState,H.state=rt,Ot(f,y,H,F),tn();var at=f.memoizedState;oe!==wt||rt!==at||st||c!==null&&c.dependencies!==null&&Yh(c.dependencies)?(typeof ge=="function"&&(sb(f,p,ge,y),at=f.memoizedState),(ft=st||BT(f,p,ft,y,rt,at,Fe)||c!==null&&c.dependencies!==null&&Yh(c.dependencies))?(Ze||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(y,at,Fe),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(y,at,Fe)),typeof H.componentDidUpdate=="function"&&(f.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof H.componentDidUpdate!="function"||oe===c.memoizedProps&&rt===c.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&rt===c.memoizedState||(f.flags|=1024),f.memoizedProps=y,f.memoizedState=at),H.props=y,H.state=at,H.context=Fe,y=ft):(typeof H.componentDidUpdate!="function"||oe===c.memoizedProps&&rt===c.memoizedState||(f.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&rt===c.memoizedState||(f.flags|=1024),y=!1)}return H=y,_1(c,f),y=(f.flags&128)!==0,H||y?(H=f.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:H.render(),f.flags|=1,c!==null&&y?(f.child=i0(f,c.child,null,F),f.child=i0(f,null,p,F)):ei(c,f,p,F),f.memoizedState=H.state,c=f.child):c=aA(c,f,F),c}function zT(c,f,p,y){return Ki(),f.flags|=256,ei(c,f,p,y),f.child}var cb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ub(c){return{baseLanes:c,cachePool:ce()}}function Ab(c,f,p){return c=c!==null?c.childLanes&~p:0,f&&(c|=El),c}function GT(c,f,p){var y=f.pendingProps,F=!1,H=(f.flags&128)!==0,oe;if((oe=H)||(oe=c!==null&&c.memoizedState===null?!1:(Ts.current&2)!==0),oe&&(F=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,c===null){if(mr){if(F?od(f):ld(),mr){var ge=fa,Fe;if(Fe=ge){e:{for(Fe=ge,ge=xl;Fe.nodeType!==8;){if(!ge){ge=null;break e}if(Fe=fc(Fe.nextSibling),Fe===null){ge=null;break e}}ge=Fe}ge!==null?(f.memoizedState={dehydrated:ge,treeContext:$u!==null?{id:rc,overflow:ac}:null,retryLane:536870912,hydrationErrors:null},Fe=Ms(18,null,null,0),Fe.stateNode=ge,Fe.return=f,f.child=Fe,Ha=f,fa=null,Fe=!0):Fe=!1}Fe||Yu(f)}if(ge=f.memoizedState,ge!==null&&(ge=ge.dehydrated,ge!==null))return Wb(ge)?f.lanes=32:f.lanes=536870912,null;rA(f)}return ge=y.children,y=y.fallback,F?(ld(),F=f.mode,ge=S1({mode:"hidden",children:ge},F),y=tc(y,F,p,null),ge.return=f,y.return=f,ge.sibling=y,f.child=ge,F=f.child,F.memoizedState=ub(p),F.childLanes=Ab(c,oe,p),f.memoizedState=cb,y):(od(f),db(f,ge))}if(Fe=c.memoizedState,Fe!==null&&(ge=Fe.dehydrated,ge!==null)){if(H)f.flags&256?(od(f),f.flags&=-257,f=fb(c,f,p)):f.memoizedState!==null?(ld(),f.child=c.child,f.flags|=128,f=null):(ld(),F=y.fallback,ge=f.mode,y=S1({mode:"visible",children:y.children},ge),F=tc(F,ge,p,null),F.flags|=2,y.return=f,F.return=f,y.sibling=F,f.child=y,i0(f,c.child,null,p),y=f.child,y.memoizedState=ub(p),y.childLanes=Ab(c,oe,p),f.memoizedState=cb,f=F);else if(od(f),Wb(ge)){if(oe=ge.nextSibling&&ge.nextSibling.dataset,oe)var Ze=oe.dgst;oe=Ze,y=Error(r(419)),y.stack="",y.digest=oe,ed({value:y,source:null,stack:null}),f=fb(c,f,p)}else if(Ps||td(c,f,p,!1),oe=(p&c.childLanes)!==0,Ps||oe){if(oe=ta,oe!==null&&(y=p&-p,y=(y&42)!==0?1:as(y),y=(y&(oe.suspendedLanes|p))!==0?0:y,y!==0&&y!==Fe.retryLane))throw Fe.retryLane=y,ec(c,y),zo(oe,c,y),UT;ge.data==="$?"||Ib(),f=fb(c,f,p)}else ge.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=Fe.treeContext,fa=fc(ge.nextSibling),Ha=f,mr=!0,Zc=null,xl=!1,c!==null&&(Ao[qi++]=rc,Ao[qi++]=ac,Ao[qi++]=$u,rc=c.id,ac=c.overflow,$u=f),f=db(f,y.children),f.flags|=4096);return f}return F?(ld(),F=y.fallback,ge=f.mode,Fe=c.child,Ze=Fe.sibling,y=gl(Fe,{mode:"hidden",children:y.children}),y.subtreeFlags=Fe.subtreeFlags&65011712,Ze!==null?F=gl(Ze,F):(F=tc(F,ge,p,null),F.flags|=2),F.return=f,y.return=f,y.sibling=F,f.child=y,y=F,F=f.child,ge=c.child.memoizedState,ge===null?ge=ub(p):(Fe=ge.cachePool,Fe!==null?(Ze=za._currentValue,Fe=Fe.parent!==Ze?{parent:Ze,pool:Ze}:Fe):Fe=ce(),ge={baseLanes:ge.baseLanes|p,cachePool:Fe}),F.memoizedState=ge,F.childLanes=Ab(c,oe,p),f.memoizedState=cb,y):(od(f),p=c.child,c=p.sibling,p=gl(p,{mode:"visible",children:y.children}),p.return=f,p.sibling=null,c!==null&&(oe=f.deletions,oe===null?(f.deletions=[c],f.flags|=16):oe.push(c)),f.child=p,f.memoizedState=null,p)}function db(c,f){return f=S1({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function S1(c,f){return c=Ms(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function fb(c,f,p){return i0(f,c.child,null,p),c=db(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function qT(c,f,p){c.lanes|=f;var y=c.alternate;y!==null&&(y.lanes|=f),$h(c.return,f,p)}function hb(c,f,p,y,F){var H=c.memoizedState;H===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:F}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=y,H.tail=p,H.tailMode=F)}function KT(c,f,p){var y=f.pendingProps,F=y.revealOrder,H=y.tail;if(ei(c,f,y.children,p),y=Ts.current,(y&2)!==0)y=y&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&qT(c,p,f);else if(c.tag===19)qT(c,p,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}switch(K(Ts,y),F){case"forwards":for(p=f.child,F=null;p!==null;)c=p.alternate,c!==null&&b1(c)===null&&(F=p),p=p.sibling;p=F,p===null?(F=f.child,f.child=null):(F=p.sibling,p.sibling=null),hb(f,!1,F,p,H);break;case"backwards":for(p=null,F=f.child,f.child=null;F!==null;){if(c=F.alternate,c!==null&&b1(c)===null){f.child=F;break}c=F.sibling,F.sibling=p,p=F,F=c}hb(f,!0,p,null,H);break;case"together":hb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function aA(c,f,p){if(c!==null&&(f.dependencies=c.dependencies),fd|=f.lanes,(p&f.childLanes)===0)if(c!==null){if(td(c,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,p=gl(c,c.pendingProps),f.child=p,p.return=f;c.sibling!==null;)c=c.sibling,p=p.sibling=gl(c,c.pendingProps),p.return=f;p.sibling=null}return f.child}function mb(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Yh(c)))}function DQ(c,f,p){switch(f.tag){case 3:Ce(f,f.stateNode.containerInfo),eu(f,za,c.memoizedState.cache),Ki();break;case 27:case 5:Ie(f);break;case 4:Ce(f,f.stateNode.containerInfo);break;case 10:eu(f,f.type,f.memoizedProps.value);break;case 13:var y=f.memoizedState;if(y!==null)return y.dehydrated!==null?(od(f),f.flags|=128,null):(p&f.child.childLanes)!==0?GT(c,f,p):(od(f),c=aA(c,f,p),c!==null?c.sibling:null);od(f);break;case 19:var F=(c.flags&128)!==0;if(y=(p&f.childLanes)!==0,y||(td(c,f,p,!1),y=(p&f.childLanes)!==0),F){if(y)return KT(c,f,p);f.flags|=128}if(F=f.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),K(Ts,Ts.current),y)break;return null;case 22:case 23:return f.lanes=0,OT(c,f,p);case 24:eu(f,za,c.memoizedState.cache)}return aA(c,f,p)}function WT(c,f,p){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ps=!0;else{if(!mb(c,p)&&(f.flags&128)===0)return Ps=!1,DQ(c,f,p);Ps=(c.flags&131072)!==0}else Ps=!1,mr&&(f.flags&1048576)!==0&&n1(f,Wh,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var y=f.elementType,F=y._init;if(y=F(y._payload),f.type=y,typeof y=="function")XA(y)?(c=Vf(y,c),f.tag=1,f=VT(null,f,y,c,p)):(f.tag=0,f=lb(null,f,y,c,p));else{if(y!=null){if(F=y.$$typeof,F===U){f.tag=11,f=MT(null,f,y,c,p);break e}else if(F===_){f.tag=14,f=PT(null,f,y,c,p);break e}}throw f=z(y)||y,Error(r(306,f,""))}}return f;case 0:return lb(c,f,f.type,f.pendingProps,p);case 1:return y=f.type,F=Vf(y,f.pendingProps),VT(c,f,y,F,p);case 3:e:{if(Ce(f,f.stateNode.containerInfo),c===null)throw Error(r(387));y=f.pendingProps;var H=f.memoizedState;F=H.element,je(c,f),Ot(f,y,null,p);var oe=f.memoizedState;if(y=oe.cache,eu(f,za,y),y!==H.cache&&Jh(f,[za],p,!0),tn(),y=oe.element,H.isDehydrated)if(H={element:y,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=H,f.memoizedState=H,f.flags&256){f=zT(c,f,y,p);break e}else if(y!==F){F=Vn(Error(r(424)),f),ed(F),f=zT(c,f,y,p);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(fa=fc(c.firstChild),Ha=f,mr=!0,Zc=null,xl=!0,p=ST(f,null,y,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Ki(),y===F){f=aA(c,f,p);break e}ei(c,f,y,p)}f=f.child}return f;case 26:return _1(c,f),c===null?(p=XB(f.type,null,f.pendingProps,null))?f.memoizedState=p:mr||(p=f.type,c=f.pendingProps,y=O1(le.current).createElement(p),y[or]=f,y[Zn]=c,ni(y,p,c),Qe(y),f.stateNode=y):f.memoizedState=XB(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Ie(f),c===null&&mr&&(y=f.stateNode=$B(f.type,f.pendingProps,le.current),Ha=f,xl=!0,F=fa,gd(f.type)?($b=F,fa=fc(y.firstChild)):fa=F),ei(c,f,f.pendingProps.children,p),_1(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&mr&&((F=y=fa)&&(y=l9(y,f.type,f.pendingProps,xl),y!==null?(f.stateNode=y,Ha=f,fa=fc(y.firstChild),xl=!1,F=!0):F=!1),F||Yu(f)),Ie(f),F=f.type,H=f.pendingProps,oe=c!==null?c.memoizedProps:null,y=H.children,Gb(F,H)?y=null:oe!==null&&Gb(F,oe)&&(f.flags|=32),f.memoizedState!==null&&(F=Po(c,f,ru,null,null,p),Rp._currentValue=F),_1(c,f),ei(c,f,y,p),f.child;case 6:return c===null&&mr&&((c=p=fa)&&(p=c9(p,f.pendingProps,xl),p!==null?(f.stateNode=p,Ha=f,fa=null,c=!0):c=!1),c||Yu(f)),null;case 13:return GT(c,f,p);case 4:return Ce(f,f.stateNode.containerInfo),y=f.pendingProps,c===null?f.child=i0(f,null,y,p):ei(c,f,y,p),f.child;case 11:return MT(c,f,f.type,f.pendingProps,p);case 7:return ei(c,f,f.pendingProps,p),f.child;case 8:return ei(c,f,f.pendingProps.children,p),f.child;case 12:return ei(c,f,f.pendingProps.children,p),f.child;case 10:return y=f.pendingProps,eu(f,f.type,y.value),ei(c,f,y.children,p),f.child;case 9:return F=f.type._context,y=f.pendingProps.children,wl(f),F=Va(F),y=y(F),f.flags|=1,ei(c,f,y,p),f.child;case 14:return PT(c,f,f.type,f.pendingProps,p);case 15:return jT(c,f,f.type,f.pendingProps,p);case 19:return KT(c,f,p);case 31:return y=f.pendingProps,p=f.mode,y={mode:y.mode,children:y.children},c===null?(p=S1(y,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=gl(c.child,y),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return OT(c,f,p);case 24:return wl(f),y=Va(za),c===null?(F=G(),F===null&&(F=ta,H=np(),F.pooledCache=H,H.refCount++,H!==null&&(F.pooledCacheLanes|=p),F=H),f.memoizedState={parent:y,cache:F},Me(f),eu(f,za,F)):((c.lanes&p)!==0&&(je(c,f),Ot(f,null,null,p),tn()),F=c.memoizedState,H=f.memoizedState,F.parent!==y?(F={parent:y,cache:y},f.memoizedState=F,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=F),eu(f,za,y)):(y=H.cache,eu(f,za,y),y!==F.cache&&Jh(f,[za],p,!0))),ei(c,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function sA(c){c.flags|=4}function $T(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!rN(f)){if(f=Cl.current,f!==null&&((dr&4194048)===dr?iu!==null:(dr&62914560)!==dr&&(dr&536870912)===0||f!==iu))throw Ke=ve,he;c.flags|=8192}}function T1(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?Xn():536870912,c.lanes|=f,u0|=f)}function xp(c,f){if(!mr)switch(c.tailMode){case"hidden":f=c.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?c.tail=null:p.sibling=null;break;case"collapsed":p=c.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function wa(c){var f=c.alternate!==null&&c.alternate.child===c.child,p=0,y=0;if(f)for(var F=c.child;F!==null;)p|=F.lanes|F.childLanes,y|=F.subtreeFlags&65011712,y|=F.flags&65011712,F.return=c,F=F.sibling;else for(F=c.child;F!==null;)p|=F.lanes|F.childLanes,y|=F.subtreeFlags,y|=F.flags,F.return=c,F=F.sibling;return c.subtreeFlags|=y,c.childLanes=p,f}function LQ(c,f,p){var y=f.pendingProps;switch(kf(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(f),null;case 1:return wa(f),null;case 3:return p=f.stateNode,y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),yl(za),_e(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(c===null||c.child===null)&&(Xs(f)?sA(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,a1())),wa(f),null;case 26:return p=f.memoizedState,c===null?(sA(f),p!==null?(wa(f),$T(f,p)):(wa(f),f.flags&=-16777217)):p?p!==c.memoizedState?(sA(f),wa(f),$T(f,p)):(wa(f),f.flags&=-16777217):(c.memoizedProps!==y&&sA(f),wa(f),f.flags&=-16777217),null;case 27:xe(f),p=le.current;var F=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==y&&sA(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return wa(f),null}c=X.current,Xs(f)?r1(f):(c=$B(F,y,p),f.stateNode=c,sA(f))}return wa(f),null;case 5:if(xe(f),p=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==y&&sA(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return wa(f),null}if(c=X.current,Xs(f))r1(f);else{switch(F=O1(le.current),c){case 1:c=F.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:c=F.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":c=F.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":c=F.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":c=F.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof y.is=="string"?F.createElement("select",{is:y.is}):F.createElement("select"),y.multiple?c.multiple=!0:y.size&&(c.size=y.size);break;default:c=typeof y.is=="string"?F.createElement(p,{is:y.is}):F.createElement(p)}}c[or]=f,c[Zn]=y;e:for(F=f.child;F!==null;){if(F.tag===5||F.tag===6)c.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===f)break e;for(;F.sibling===null;){if(F.return===null||F.return===f)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}f.stateNode=c;e:switch(ni(c,p,y),p){case"button":case"input":case"select":case"textarea":c=!!y.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&sA(f)}}return wa(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==y&&sA(f);else{if(typeof y!="string"&&f.stateNode===null)throw Error(r(166));if(c=le.current,Xs(f)){if(c=f.stateNode,p=f.memoizedProps,y=null,F=Ha,F!==null)switch(F.tag){case 27:case 5:y=F.memoizedProps}c[or]=f,c=!!(c.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||HB(c.nodeValue,p)),c||Yu(f)}else c=O1(c).createTextNode(y),c[or]=f,f.stateNode=c}return wa(f),null;case 13:if(y=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(F=Xs(f),y!==null&&y.dehydrated!==null){if(c===null){if(!F)throw Error(r(318));if(F=f.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[or]=f}else Ki(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;wa(f),F=!1}else F=a1(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=F),F=!0;if(!F)return f.flags&256?(rA(f),f):(rA(f),null)}if(rA(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=y!==null,c=c!==null&&c.memoizedState!==null,p){y=f.child,F=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(F=y.alternate.memoizedState.cachePool.pool);var H=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(H=y.memoizedState.cachePool.pool),H!==F&&(y.flags|=2048)}return p!==c&&p&&(f.child.flags|=8192),T1(f,f.updateQueue),wa(f),null;case 4:return _e(),c===null&&Ob(f.stateNode.containerInfo),wa(f),null;case 10:return yl(f.type),wa(f),null;case 19:if(j(Ts),F=f.memoizedState,F===null)return wa(f),null;if(y=(f.flags&128)!==0,H=F.rendering,H===null)if(y)xp(F,!1);else{if(Ra!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(H=b1(c),H!==null){for(f.flags|=128,xp(F,!1),c=H.updateQueue,f.updateQueue=c,T1(f,c),f.subtreeFlags=0,c=p,p=f.child;p!==null;)Tf(p,c),p=p.sibling;return K(Ts,Ts.current&1|2),f.child}c=c.sibling}F.tail!==null&&ze()>k1&&(f.flags|=128,y=!0,xp(F,!1),f.lanes=4194304)}else{if(!y)if(c=b1(H),c!==null){if(f.flags|=128,y=!0,c=c.updateQueue,f.updateQueue=c,T1(f,c),xp(F,!0),F.tail===null&&F.tailMode==="hidden"&&!H.alternate&&!mr)return wa(f),null}else 2*ze()-F.renderingStartTime>k1&&p!==536870912&&(f.flags|=128,y=!0,xp(F,!1),f.lanes=4194304);F.isBackwards?(H.sibling=f.child,f.child=H):(c=F.last,c!==null?c.sibling=H:f.child=H,F.last=H)}return F.tail!==null?(f=F.tail,F.rendering=f,F.tail=f.sibling,F.renderingStartTime=ze(),f.sibling=null,c=Ts.current,K(Ts,y?c&1|2:c&1),f):(wa(f),null);case 22:case 23:return rA(f),Tn(),y=f.memoizedState!==null,c!==null?c.memoizedState!==null!==y&&(f.flags|=8192):y&&(f.flags|=8192),y?(p&536870912)!==0&&(f.flags&128)===0&&(wa(f),f.subtreeFlags&6&&(f.flags|=8192)):wa(f),p=f.updateQueue,p!==null&&T1(f,p.retryQueue),p=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==p&&(f.flags|=2048),c!==null&&j(M),null;case 24:return p=null,c!==null&&(p=c.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),yl(za),wa(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function UQ(c,f){switch(kf(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return yl(za),_e(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return xe(f),null;case 13:if(rA(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Ki()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return j(Ts),null;case 4:return _e(),null;case 10:return yl(f.type),null;case 22:case 23:return rA(f),Tn(),c!==null&&j(M),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return yl(za),null;case 25:return null;default:return null}}function JT(c,f){switch(kf(f),f.tag){case 3:yl(za),_e();break;case 26:case 27:case 5:xe(f);break;case 4:_e();break;case 13:rA(f);break;case 19:j(Ts);break;case 10:yl(f.type);break;case 22:case 23:rA(f),Tn(),c!==null&&j(M);break;case 24:yl(za)}}function vp(c,f){try{var p=f.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var F=y.next;p=F;do{if((p.tag&c)===c){y=void 0;var H=p.create,oe=p.inst;y=H(),oe.destroy=y}p=p.next}while(p!==F)}}catch(ge){Xr(f,f.return,ge)}}function cd(c,f,p){try{var y=f.updateQueue,F=y!==null?y.lastEffect:null;if(F!==null){var H=F.next;y=H;do{if((y.tag&c)===c){var oe=y.inst,ge=oe.destroy;if(ge!==void 0){oe.destroy=void 0,F=f;var Fe=p,Ze=ge;try{Ze()}catch(ft){Xr(F,Fe,ft)}}}y=y.next}while(y!==H)}}catch(ft){Xr(f,f.return,ft)}}function YT(c){var f=c.updateQueue;if(f!==null){var p=c.stateNode;try{br(f,p)}catch(y){Xr(c,c.return,y)}}}function XT(c,f,p){p.props=Vf(c.type,c.memoizedProps),p.state=c.memoizedState;try{p.componentWillUnmount()}catch(y){Xr(c,f,y)}}function yp(c,f){try{var p=c.ref;if(p!==null){switch(c.tag){case 26:case 27:case 5:var y=c.stateNode;break;case 30:y=c.stateNode;break;default:y=c.stateNode}typeof p=="function"?c.refCleanup=p(y):p.current=y}}catch(F){Xr(c,f,F)}}function ou(c,f){var p=c.ref,y=c.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(F){Xr(c,f,F)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(F){Xr(c,f,F)}else p.current=null}function ZT(c){var f=c.type,p=c.memoizedProps,y=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(F){Xr(c,c.return,F)}}function pb(c,f,p){try{var y=c.stateNode;r9(y,c.type,p,f),y[Zn]=f}catch(F){Xr(c,c.return,F)}}function eB(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&gd(c.type)||c.tag===4}function gb(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||eB(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&gd(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function xb(c,f,p){var y=c.tag;if(y===5||y===6)c=c.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(c,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(c),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=j1));else if(y!==4&&(y===27&&gd(c.type)&&(p=c.stateNode,f=null),c=c.child,c!==null))for(xb(c,f,p),c=c.sibling;c!==null;)xb(c,f,p),c=c.sibling}function B1(c,f,p){var y=c.tag;if(y===5||y===6)c=c.stateNode,f?p.insertBefore(c,f):p.appendChild(c);else if(y!==4&&(y===27&&gd(c.type)&&(p=c.stateNode),c=c.child,c!==null))for(B1(c,f,p),c=c.sibling;c!==null;)B1(c,f,p),c=c.sibling}function tB(c){var f=c.stateNode,p=c.memoizedProps;try{for(var y=c.type,F=f.attributes;F.length;)f.removeAttributeNode(F[0]);ni(f,y,p),f[or]=c,f[Zn]=p}catch(H){Xr(c,c.return,H)}}var iA=!1,qa=!1,vb=!1,nB=typeof WeakSet=="function"?WeakSet:Set,js=null;function MQ(c,f){if(c=c.containerInfo,Vb=q1,c=Ys(c),Ss(c)){if("selectionStart"in c)var p={start:c.selectionStart,end:c.selectionEnd};else e:{p=(p=c.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var F=y.anchorOffset,H=y.focusNode;y=y.focusOffset;try{p.nodeType,H.nodeType}catch{p=null;break e}var oe=0,ge=-1,Fe=-1,Ze=0,ft=0,wt=c,rt=null;t:for(;;){for(var at;wt!==p||F!==0&&wt.nodeType!==3||(ge=oe+F),wt!==H||y!==0&&wt.nodeType!==3||(Fe=oe+y),wt.nodeType===3&&(oe+=wt.nodeValue.length),(at=wt.firstChild)!==null;)rt=wt,wt=at;for(;;){if(wt===c)break t;if(rt===p&&++Ze===F&&(ge=oe),rt===H&&++ft===y&&(Fe=oe),(at=wt.nextSibling)!==null)break;wt=rt,rt=wt.parentNode}wt=at}p=ge===-1||Fe===-1?null:{start:ge,end:Fe}}else p=null}p=p||{start:0,end:0}}else p=null;for(zb={focusedElem:c,selectionRange:p},q1=!1,js=f;js!==null;)if(f=js,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,js=c;else for(;js!==null;){switch(f=js,H=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&H!==null){c=void 0,p=f,F=H.memoizedProps,H=H.memoizedState,y=p.stateNode;try{var En=Vf(p.type,F,p.elementType===p.type);c=y.getSnapshotBeforeUpdate(En,H),y.__reactInternalSnapshotBeforeUpdate=c}catch(hn){Xr(p,p.return,hn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,p=c.nodeType,p===9)Kb(c);else if(p===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Kb(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,js=c;break}js=f.return}}function rB(c,f,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:ud(c,p),y&4&&vp(5,p);break;case 1:if(ud(c,p),y&4)if(c=p.stateNode,f===null)try{c.componentDidMount()}catch(oe){Xr(p,p.return,oe)}else{var F=Vf(p.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(F,f,c.__reactInternalSnapshotBeforeUpdate)}catch(oe){Xr(p,p.return,oe)}}y&64&&YT(p),y&512&&yp(p,p.return);break;case 3:if(ud(c,p),y&64&&(c=p.updateQueue,c!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{br(c,f)}catch(oe){Xr(p,p.return,oe)}}break;case 27:f===null&&y&4&&tB(p);case 26:case 5:ud(c,p),f===null&&y&4&&ZT(p),y&512&&yp(p,p.return);break;case 12:ud(c,p);break;case 13:ud(c,p),y&4&&iB(c,p),y&64&&(c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(p=qQ.bind(null,p),u9(c,p))));break;case 22:if(y=p.memoizedState!==null||iA,!y){f=f!==null&&f.memoizedState!==null||qa,F=iA;var H=qa;iA=y,(qa=f)&&!H?Ad(c,p,(p.subtreeFlags&8772)!==0):ud(c,p),iA=F,qa=H}break;case 30:break;default:ud(c,p)}}function aB(c){var f=c.alternate;f!==null&&(c.alternate=null,aB(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Ee(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var ha=null,ho=!1;function oA(c,f,p){for(p=p.child;p!==null;)sB(c,f,p),p=p.sibling}function sB(c,f,p){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Ut,p)}catch{}switch(p.tag){case 26:qa||ou(p,f),oA(c,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:qa||ou(p,f);var y=ha,F=ho;gd(p.type)&&(ha=p.stateNode,ho=!1),oA(c,f,p),Np(p.stateNode),ha=y,ho=F;break;case 5:qa||ou(p,f);case 6:if(y=ha,F=ho,ha=null,oA(c,f,p),ha=y,ho=F,ha!==null)if(ho)try{(ha.nodeType===9?ha.body:ha.nodeName==="HTML"?ha.ownerDocument.body:ha).removeChild(p.stateNode)}catch(H){Xr(p,f,H)}else try{ha.removeChild(p.stateNode)}catch(H){Xr(p,f,H)}break;case 18:ha!==null&&(ho?(c=ha,KB(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,p.stateNode),Mp(c)):KB(ha,p.stateNode));break;case 4:y=ha,F=ho,ha=p.stateNode.containerInfo,ho=!0,oA(c,f,p),ha=y,ho=F;break;case 0:case 11:case 14:case 15:qa||cd(2,p,f),qa||cd(4,p,f),oA(c,f,p);break;case 1:qa||(ou(p,f),y=p.stateNode,typeof y.componentWillUnmount=="function"&&XT(p,f,y)),oA(c,f,p);break;case 21:oA(c,f,p);break;case 22:qa=(y=qa)||p.memoizedState!==null,oA(c,f,p),qa=y;break;default:oA(c,f,p)}}function iB(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Mp(c)}catch(p){Xr(f,f.return,p)}}function PQ(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new nB),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new nB),f;default:throw Error(r(435,c.tag))}}function yb(c,f){var p=PQ(c);f.forEach(function(y){var F=KQ.bind(null,c,y);p.has(y)||(p.add(y),y.then(F,F))})}function Oo(c,f){var p=f.deletions;if(p!==null)for(var y=0;y<p.length;y++){var F=p[y],H=c,oe=f,ge=oe;e:for(;ge!==null;){switch(ge.tag){case 27:if(gd(ge.type)){ha=ge.stateNode,ho=!1;break e}break;case 5:ha=ge.stateNode,ho=!1;break e;case 3:case 4:ha=ge.stateNode.containerInfo,ho=!0;break e}ge=ge.return}if(ha===null)throw Error(r(160));sB(H,oe,F),ha=null,ho=!1,H=F.alternate,H!==null&&(H.return=null),F.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)oB(f,c),f=f.sibling}var dc=null;function oB(c,f){var p=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Oo(f,c),Qo(c),y&4&&(cd(3,c,c.return),vp(3,c),cd(5,c,c.return));break;case 1:Oo(f,c),Qo(c),y&512&&(qa||p===null||ou(p,p.return)),y&64&&iA&&(c=c.updateQueue,c!==null&&(y=c.callbacks,y!==null&&(p=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var F=dc;if(Oo(f,c),Qo(c),y&512&&(qa||p===null||ou(p,p.return)),y&4){var H=p!==null?p.memoizedState:null;if(y=c.memoizedState,p===null)if(y===null)if(c.stateNode===null){e:{y=c.type,p=c.memoizedProps,F=F.ownerDocument||F;t:switch(y){case"title":H=F.getElementsByTagName("title")[0],(!H||H[be]||H[or]||H.namespaceURI==="http://www.w3.org/2000/svg"||H.hasAttribute("itemprop"))&&(H=F.createElement(y),F.head.insertBefore(H,F.querySelector("head > title"))),ni(H,y,p),H[or]=c,Qe(H),y=H;break e;case"link":var oe=tN("link","href",F).get(y+(p.href||""));if(oe){for(var ge=0;ge<oe.length;ge++)if(H=oe[ge],H.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&H.getAttribute("rel")===(p.rel==null?null:p.rel)&&H.getAttribute("title")===(p.title==null?null:p.title)&&H.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){oe.splice(ge,1);break t}}H=F.createElement(y),ni(H,y,p),F.head.appendChild(H);break;case"meta":if(oe=tN("meta","content",F).get(y+(p.content||""))){for(ge=0;ge<oe.length;ge++)if(H=oe[ge],H.getAttribute("content")===(p.content==null?null:""+p.content)&&H.getAttribute("name")===(p.name==null?null:p.name)&&H.getAttribute("property")===(p.property==null?null:p.property)&&H.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&H.getAttribute("charset")===(p.charSet==null?null:p.charSet)){oe.splice(ge,1);break t}}H=F.createElement(y),ni(H,y,p),F.head.appendChild(H);break;default:throw Error(r(468,y))}H[or]=c,Qe(H),y=H}c.stateNode=y}else nN(F,c.type,c.stateNode);else c.stateNode=eN(F,y,c.memoizedProps);else H!==y?(H===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):H.count--,y===null?nN(F,c.type,c.stateNode):eN(F,y,c.memoizedProps)):y===null&&c.stateNode!==null&&pb(c,c.memoizedProps,p.memoizedProps)}break;case 27:Oo(f,c),Qo(c),y&512&&(qa||p===null||ou(p,p.return)),p!==null&&y&4&&pb(c,c.memoizedProps,p.memoizedProps);break;case 5:if(Oo(f,c),Qo(c),y&512&&(qa||p===null||ou(p,p.return)),c.flags&32){F=c.stateNode;try{di(F,"")}catch(at){Xr(c,c.return,at)}}y&4&&c.stateNode!=null&&(F=c.memoizedProps,pb(c,F,p!==null?p.memoizedProps:F)),y&1024&&(vb=!0);break;case 6:if(Oo(f,c),Qo(c),y&4){if(c.stateNode===null)throw Error(r(162));y=c.memoizedProps,p=c.stateNode;try{p.nodeValue=y}catch(at){Xr(c,c.return,at)}}break;case 3:if(V1=null,F=dc,dc=Q1(f.containerInfo),Oo(f,c),dc=F,Qo(c),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Mp(f.containerInfo)}catch(at){Xr(c,c.return,at)}vb&&(vb=!1,lB(c));break;case 4:y=dc,dc=Q1(c.stateNode.containerInfo),Oo(f,c),Qo(c),dc=y;break;case 12:Oo(f,c),Qo(c);break;case 13:Oo(f,c),Qo(c),c.child.flags&8192&&c.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Sb=ze()),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,yb(c,y)));break;case 22:F=c.memoizedState!==null;var Fe=p!==null&&p.memoizedState!==null,Ze=iA,ft=qa;if(iA=Ze||F,qa=ft||Fe,Oo(f,c),qa=ft,iA=Ze,Qo(c),y&8192)e:for(f=c.stateNode,f._visibility=F?f._visibility&-2:f._visibility|1,F&&(p===null||Fe||iA||qa||zf(c)),p=null,f=c;;){if(f.tag===5||f.tag===26){if(p===null){Fe=p=f;try{if(H=Fe.stateNode,F)oe=H.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{ge=Fe.stateNode;var wt=Fe.memoizedProps.style,rt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;ge.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(at){Xr(Fe,Fe.return,at)}}}else if(f.tag===6){if(p===null){Fe=f;try{Fe.stateNode.nodeValue=F?"":Fe.memoizedProps}catch(at){Xr(Fe,Fe.return,at)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}y&4&&(y=c.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,yb(c,p))));break;case 19:Oo(f,c),Qo(c),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,yb(c,y)));break;case 30:break;case 21:break;default:Oo(f,c),Qo(c)}}function Qo(c){var f=c.flags;if(f&2){try{for(var p,y=c.return;y!==null;){if(eB(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var F=p.stateNode,H=gb(c);B1(c,H,F);break;case 5:var oe=p.stateNode;p.flags&32&&(di(oe,""),p.flags&=-33);var ge=gb(c);B1(c,ge,oe);break;case 3:case 4:var Fe=p.stateNode.containerInfo,Ze=gb(c);xb(c,Ze,Fe);break;default:throw Error(r(161))}}catch(ft){Xr(c,c.return,ft)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function lB(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;lB(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function ud(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)rB(c,f.alternate,f),f=f.sibling}function zf(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:cd(4,f,f.return),zf(f);break;case 1:ou(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&XT(f,f.return,p),zf(f);break;case 27:Np(f.stateNode);case 26:case 5:ou(f,f.return),zf(f);break;case 22:f.memoizedState===null&&zf(f);break;case 30:zf(f);break;default:zf(f)}c=c.sibling}}function Ad(c,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var y=f.alternate,F=c,H=f,oe=H.flags;switch(H.tag){case 0:case 11:case 15:Ad(F,H,p),vp(4,H);break;case 1:if(Ad(F,H,p),y=H,F=y.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(Ze){Xr(y,y.return,Ze)}if(y=H,F=y.updateQueue,F!==null){var ge=y.stateNode;try{var Fe=F.shared.hiddenCallbacks;if(Fe!==null)for(F.shared.hiddenCallbacks=null,F=0;F<Fe.length;F++)ur(Fe[F],ge)}catch(Ze){Xr(y,y.return,Ze)}}p&&oe&64&&YT(H),yp(H,H.return);break;case 27:tB(H);case 26:case 5:Ad(F,H,p),p&&y===null&&oe&4&&ZT(H),yp(H,H.return);break;case 12:Ad(F,H,p);break;case 13:Ad(F,H,p),p&&oe&4&&iB(F,H);break;case 22:H.memoizedState===null&&Ad(F,H,p),yp(H,H.return);break;case 30:break;default:Ad(F,H,p)}f=f.sibling}}function wb(c,f){var p=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==p&&(c!=null&&c.refCount++,p!=null&&If(p))}function bb(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&If(c))}function lu(c,f,p,y){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)cB(c,f,p,y),f=f.sibling}function cB(c,f,p,y){var F=f.flags;switch(f.tag){case 0:case 11:case 15:lu(c,f,p,y),F&2048&&vp(9,f);break;case 1:lu(c,f,p,y);break;case 3:lu(c,f,p,y),F&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&If(c)));break;case 12:if(F&2048){lu(c,f,p,y),c=f.stateNode;try{var H=f.memoizedProps,oe=H.id,ge=H.onPostCommit;typeof ge=="function"&&ge(oe,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Fe){Xr(f,f.return,Fe)}}else lu(c,f,p,y);break;case 13:lu(c,f,p,y);break;case 23:break;case 22:H=f.stateNode,oe=f.alternate,f.memoizedState!==null?H._visibility&2?lu(c,f,p,y):wp(c,f):H._visibility&2?lu(c,f,p,y):(H._visibility|=2,o0(c,f,p,y,(f.subtreeFlags&10256)!==0)),F&2048&&wb(oe,f);break;case 24:lu(c,f,p,y),F&2048&&bb(f.alternate,f);break;default:lu(c,f,p,y)}}function o0(c,f,p,y,F){for(F=F&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var H=c,oe=f,ge=p,Fe=y,Ze=oe.flags;switch(oe.tag){case 0:case 11:case 15:o0(H,oe,ge,Fe,F),vp(8,oe);break;case 23:break;case 22:var ft=oe.stateNode;oe.memoizedState!==null?ft._visibility&2?o0(H,oe,ge,Fe,F):wp(H,oe):(ft._visibility|=2,o0(H,oe,ge,Fe,F)),F&&Ze&2048&&wb(oe.alternate,oe);break;case 24:o0(H,oe,ge,Fe,F),F&&Ze&2048&&bb(oe.alternate,oe);break;default:o0(H,oe,ge,Fe,F)}f=f.sibling}}function wp(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=c,y=f,F=y.flags;switch(y.tag){case 22:wp(p,y),F&2048&&wb(y.alternate,y);break;case 24:wp(p,y),F&2048&&bb(y.alternate,y);break;default:wp(p,y)}f=f.sibling}}var bp=8192;function l0(c){if(c.subtreeFlags&bp)for(c=c.child;c!==null;)uB(c),c=c.sibling}function uB(c){switch(c.tag){case 26:l0(c),c.flags&bp&&c.memoizedState!==null&&C9(dc,c.memoizedState,c.memoizedProps);break;case 5:l0(c);break;case 3:case 4:var f=dc;dc=Q1(c.stateNode.containerInfo),l0(c),dc=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=bp,bp=16777216,l0(c),bp=f):l0(c));break;default:l0(c)}}function AB(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function Cp(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];js=y,fB(y,c)}AB(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)dB(c),c=c.sibling}function dB(c){switch(c.tag){case 0:case 11:case 15:Cp(c),c.flags&2048&&cd(9,c,c.return);break;case 3:Cp(c);break;case 12:Cp(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,N1(c)):Cp(c);break;default:Cp(c)}}function N1(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];js=y,fB(y,c)}AB(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:cd(8,f,f.return),N1(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,N1(f));break;default:N1(f)}c=c.sibling}}function fB(c,f){for(;js!==null;){var p=js;switch(p.tag){case 0:case 11:case 15:cd(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:If(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,js=y;else e:for(p=c;js!==null;){y=js;var F=y.sibling,H=y.return;if(aB(y),y===p){js=null;break e}if(F!==null){F.return=H,js=F;break e}js=H}}}var jQ={getCacheForType:function(c){var f=Va(za),p=f.data.get(c);return p===void 0&&(p=c(),f.data.set(c,p)),p}},OQ=typeof WeakMap=="function"?WeakMap:Map,Ur=0,ta=null,er=null,dr=0,Mr=0,Ho=null,dd=!1,c0=!1,Cb=!1,lA=0,Ra=0,fd=0,Gf=0,Eb=0,El=0,u0=0,Ep=null,mo=null,_b=!1,Sb=0,k1=1/0,I1=null,hd=null,ti=0,md=null,A0=null,d0=0,Tb=0,Bb=null,hB=null,_p=0,Nb=null;function Vo(){if((Ur&2)!==0&&dr!==0)return dr&-dr;if(J.T!==null){var c=Xu;return c!==0?c:Ub()}return pa()}function mB(){El===0&&(El=(dr&536870912)===0||mr?rs():536870912);var c=Cl.current;return c!==null&&(c.flags|=32),El}function zo(c,f,p){(c===ta&&(Mr===2||Mr===9)||c.cancelPendingCommit!==null)&&(f0(c,0),pd(c,dr,El,!1)),ua(c,p),((Ur&2)===0||c!==ta)&&(c===ta&&((Ur&2)===0&&(Gf|=p),Ra===4&&pd(c,dr,El,!1)),cu(c))}function pB(c,f,p){if((Ur&6)!==0)throw Error(r(327));var y=!p&&(f&124)===0&&(f&c.expiredLanes)===0||Tr(c,f),F=y?VQ(c,f):Fb(c,f,!0),H=y;do{if(F===0){c0&&!y&&pd(c,f,0,!1);break}else{if(p=c.current.alternate,H&&!QQ(p)){F=Fb(c,f,!1),H=!1;continue}if(F===2){if(H=f,c.errorRecoveryDisabledLanes&H)var oe=0;else oe=c.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var ge=c;F=Ep;var Fe=ge.current.memoizedState.isDehydrated;if(Fe&&(f0(ge,oe).flags|=256),oe=Fb(ge,oe,!1),oe!==2){if(Cb&&!Fe){ge.errorRecoveryDisabledLanes|=H,Gf|=H,F=4;break e}H=mo,mo=F,H!==null&&(mo===null?mo=H:mo.push.apply(mo,H))}F=oe}if(H=!1,F!==2)continue}}if(F===1){f0(c,0),pd(c,f,0,!0);break}e:{switch(y=c,H=F,H){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:pd(y,f,El,!dd);break e;case 2:mo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(F=Sb+300-ze(),10<F)){if(pd(y,f,El,!dd),Fn(y,0,!0)!==0)break e;y.timeoutHandle=GB(gB.bind(null,y,p,mo,I1,_b,f,El,Gf,u0,dd,H,2,-0,0),F);break e}gB(y,p,mo,I1,_b,f,El,Gf,u0,dd,H,0,-0,0)}}break}while(!0);cu(c)}function gB(c,f,p,y,F,H,oe,ge,Fe,Ze,ft,wt,rt,at){if(c.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Fp={stylesheets:null,count:0,unsuspend:b9},uB(f),wt=E9(),wt!==null)){c.cancelPendingCommit=wt(EB.bind(null,c,f,H,p,y,F,oe,ge,Fe,ft,1,rt,at)),pd(c,H,oe,!Ze);return}EB(c,f,H,p,y,F,oe,ge,Fe)}function QQ(c){for(var f=c;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var F=p[y],H=F.getSnapshot;F=F.value;try{if(!os(H(),F))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function pd(c,f,p,y){f&=~Eb,f&=~Gf,c.suspendedLanes|=f,c.pingedLanes&=~f,y&&(c.warmLanes|=f),y=c.expirationTimes;for(var F=f;0<F;){var H=31-Mt(F),oe=1<<H;y[H]=-1,F&=~oe}p!==0&&en(c,p,f)}function F1(){return(Ur&6)===0?(Sp(0),!1):!0}function kb(){if(er!==null){if(Mr===0)var c=er.return;else c=er,ic=cs=null,Zh(c),s0=null,pp=0,c=er;for(;c!==null;)JT(c.alternate,c),c=c.return;er=null}}function f0(c,f){var p=c.timeoutHandle;p!==-1&&(c.timeoutHandle=-1,s9(p)),p=c.cancelPendingCommit,p!==null&&(c.cancelPendingCommit=null,p()),kb(),ta=c,er=p=gl(c.current,null),dr=f,Mr=0,Ho=null,dd=!1,c0=Tr(c,f),Cb=!1,u0=El=Eb=Gf=fd=Ra=0,mo=Ep=null,_b=!1,(f&8)!==0&&(f|=f&32);var y=c.entangledLanes;if(y!==0)for(c=c.entanglements,y&=f;0<y;){var F=31-Mt(y),H=1<<F;f|=c[F],y&=~H}return lA=f,co(),p}function xB(c,f){An=null,J.H=v1,f===fe||f===me?(f=Ve(),Mr=3):f===he?(f=Ve(),Mr=4):Mr=f===UT?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ho=f,er===null&&(Ra=1,E1(c,Vn(f,c.current)))}function vB(){var c=J.H;return J.H=v1,c===null?v1:c}function yB(){var c=J.A;return J.A=jQ,c}function Ib(){Ra=4,dd||(dr&4194048)!==dr&&Cl.current!==null||(c0=!0),(fd&134217727)===0&&(Gf&134217727)===0||ta===null||pd(ta,dr,El,!1)}function Fb(c,f,p){var y=Ur;Ur|=2;var F=vB(),H=yB();(ta!==c||dr!==f)&&(I1=null,f0(c,f)),f=!1;var oe=Ra;e:do try{if(Mr!==0&&er!==null){var ge=er,Fe=Ho;switch(Mr){case 8:kb(),oe=6;break e;case 3:case 2:case 9:case 6:Cl.current===null&&(f=!0);var Ze=Mr;if(Mr=0,Ho=null,h0(c,ge,Fe,Ze),p&&c0){oe=0;break e}break;default:Ze=Mr,Mr=0,Ho=null,h0(c,ge,Fe,Ze)}}HQ(),oe=Ra;break}catch(ft){xB(c,ft)}while(!0);return f&&c.shellSuspendCounter++,ic=cs=null,Ur=y,J.H=F,J.A=H,er===null&&(ta=null,dr=0,co()),oe}function HQ(){for(;er!==null;)wB(er)}function VQ(c,f){var p=Ur;Ur|=2;var y=vB(),F=yB();ta!==c||dr!==f?(I1=null,k1=ze()+500,f0(c,f)):c0=Tr(c,f);e:do try{if(Mr!==0&&er!==null){f=er;var H=Ho;t:switch(Mr){case 1:Mr=0,Ho=null,h0(c,f,H,1);break;case 2:case 9:if(Te(H)){Mr=0,Ho=null,bB(f);break}f=function(){Mr!==2&&Mr!==9||ta!==c||(Mr=7),cu(c)},H.then(f,f);break e;case 3:Mr=7;break e;case 4:Mr=5;break e;case 7:Te(H)?(Mr=0,Ho=null,bB(f)):(Mr=0,Ho=null,h0(c,f,H,7));break;case 5:var oe=null;switch(er.tag){case 26:oe=er.memoizedState;case 5:case 27:var ge=er;if(!oe||rN(oe)){Mr=0,Ho=null;var Fe=ge.sibling;if(Fe!==null)er=Fe;else{var Ze=ge.return;Ze!==null?(er=Ze,R1(Ze)):er=null}break t}}Mr=0,Ho=null,h0(c,f,H,5);break;case 6:Mr=0,Ho=null,h0(c,f,H,6);break;case 8:kb(),Ra=6;break e;default:throw Error(r(462))}}zQ();break}catch(ft){xB(c,ft)}while(!0);return ic=cs=null,J.H=y,J.A=F,Ur=p,er!==null?0:(ta=null,dr=0,co(),Ra)}function zQ(){for(;er!==null&&!De();)wB(er)}function wB(c){var f=WT(c.alternate,c,lA);c.memoizedProps=c.pendingProps,f===null?R1(c):er=f}function bB(c){var f=c,p=f.alternate;switch(f.tag){case 15:case 0:f=HT(p,f,f.pendingProps,f.type,void 0,dr);break;case 11:f=HT(p,f,f.pendingProps,f.type.render,f.ref,dr);break;case 5:Zh(f);default:JT(p,f),f=er=Tf(f,lA),f=WT(p,f,lA)}c.memoizedProps=c.pendingProps,f===null?R1(c):er=f}function h0(c,f,p,y){ic=cs=null,Zh(f),s0=null,pp=0;var F=f.return;try{if(RQ(c,F,f,p,dr)){Ra=1,E1(c,Vn(p,c.current)),er=null;return}}catch(H){if(F!==null)throw er=F,H;Ra=1,E1(c,Vn(p,c.current)),er=null;return}f.flags&32768?(mr||y===1?c=!0:c0||(dr&536870912)!==0?c=!1:(dd=c=!0,(y===2||y===9||y===3||y===6)&&(y=Cl.current,y!==null&&y.tag===13&&(y.flags|=16384))),CB(f,c)):R1(f)}function R1(c){var f=c;do{if((f.flags&32768)!==0){CB(f,dd);return}c=f.return;var p=LQ(f.alternate,f,lA);if(p!==null){er=p;return}if(f=f.sibling,f!==null){er=f;return}er=f=c}while(f!==null);Ra===0&&(Ra=5)}function CB(c,f){do{var p=UQ(c.alternate,c);if(p!==null){p.flags&=32767,er=p;return}if(p=c.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(c=c.sibling,c!==null)){er=c;return}er=c=p}while(c!==null);Ra=6,er=null}function EB(c,f,p,y,F,H,oe,ge,Fe){c.cancelPendingCommit=null;do D1();while(ti!==0);if((Ur&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(H=f.lanes|f.childLanes,H|=xa,Dn(c,p,H,oe,ge,Fe),c===ta&&(er=ta=null,dr=0),A0=f,md=c,d0=p,Tb=H,Bb=F,hB=y,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,WQ(Ct,function(){return NB(),null})):(c.callbackNode=null,c.callbackPriority=0),y=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||y){y=J.T,J.T=null,F=ee.p,ee.p=2,oe=Ur,Ur|=4;try{MQ(c,f,p)}finally{Ur=oe,ee.p=F,J.T=y}}ti=1,_B(),SB(),TB()}}function _B(){if(ti===1){ti=0;var c=md,f=A0,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=J.T,J.T=null;var y=ee.p;ee.p=2;var F=Ur;Ur|=4;try{oB(f,c);var H=zb,oe=Ys(c.containerInfo),ge=H.focusedElem,Fe=H.selectionRange;if(oe!==ge&&ge&&ge.ownerDocument&&zc(ge.ownerDocument.documentElement,ge)){if(Fe!==null&&Ss(ge)){var Ze=Fe.start,ft=Fe.end;if(ft===void 0&&(ft=Ze),"selectionStart"in ge)ge.selectionStart=Ze,ge.selectionEnd=Math.min(ft,ge.value.length);else{var wt=ge.ownerDocument||document,rt=wt&&wt.defaultView||window;if(rt.getSelection){var at=rt.getSelection(),En=ge.textContent.length,hn=Math.min(Fe.start,En),Wr=Fe.end===void 0?hn:Math.min(Fe.end,En);!at.extend&&hn>Wr&&(oe=Wr,Wr=hn,hn=oe);var Ge=Xl(ge,hn),Pe=Xl(ge,Wr);if(Ge&&Pe&&(at.rangeCount!==1||at.anchorNode!==Ge.node||at.anchorOffset!==Ge.offset||at.focusNode!==Pe.node||at.focusOffset!==Pe.offset)){var $e=wt.createRange();$e.setStart(Ge.node,Ge.offset),at.removeAllRanges(),hn>Wr?(at.addRange($e),at.extend(Pe.node,Pe.offset)):($e.setEnd(Pe.node,Pe.offset),at.addRange($e))}}}}for(wt=[],at=ge;at=at.parentNode;)at.nodeType===1&&wt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof ge.focus=="function"&&ge.focus(),ge=0;ge<wt.length;ge++){var pt=wt[ge];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}q1=!!Vb,zb=Vb=null}finally{Ur=F,ee.p=y,J.T=p}}c.current=f,ti=2}}function SB(){if(ti===2){ti=0;var c=md,f=A0,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=J.T,J.T=null;var y=ee.p;ee.p=2;var F=Ur;Ur|=4;try{rB(c,f.alternate,f)}finally{Ur=F,ee.p=y,J.T=p}}ti=3}}function TB(){if(ti===4||ti===3){ti=0,we();var c=md,f=A0,p=d0,y=hB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ti=5:(ti=0,A0=md=null,BB(c,c.pendingLanes));var F=c.pendingLanes;if(F===0&&(hd=null),Vr(p),f=f.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Ut,f,void 0,(f.current.flags&128)===128)}catch{}if(y!==null){f=J.T,F=ee.p,ee.p=2,J.T=null;try{for(var H=c.onRecoverableError,oe=0;oe<y.length;oe++){var ge=y[oe];H(ge.value,{componentStack:ge.stack})}}finally{J.T=f,ee.p=F}}(d0&3)!==0&&D1(),cu(c),F=c.pendingLanes,(p&4194090)!==0&&(F&42)!==0?c===Nb?_p++:(_p=0,Nb=c):_p=0,Sp(0)}}function BB(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,If(f)))}function D1(c){return _B(),SB(),TB(),NB()}function NB(){if(ti!==5)return!1;var c=md,f=Tb;Tb=0;var p=Vr(d0),y=J.T,F=ee.p;try{ee.p=32>p?32:p,J.T=null,p=Bb,Bb=null;var H=md,oe=d0;if(ti=0,A0=md=null,d0=0,(Ur&6)!==0)throw Error(r(331));var ge=Ur;if(Ur|=4,dB(H.current),cB(H,H.current,oe,p),Ur=ge,Sp(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Ut,H)}catch{}return!0}finally{ee.p=F,J.T=y,BB(c,f)}}function kB(c,f,p){f=Vn(p,f),f=ob(c.stateNode,f,2),c=vt(c,f,2),c!==null&&(ua(c,2),cu(c))}function Xr(c,f,p){if(c.tag===3)kB(c,c,p);else for(;f!==null;){if(f.tag===3){kB(f,c,p);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(hd===null||!hd.has(y))){c=Vn(p,c),p=DT(2),y=vt(f,p,2),y!==null&&(LT(p,y,f,c),ua(y,2),cu(y));break}}f=f.return}}function Rb(c,f,p){var y=c.pingCache;if(y===null){y=c.pingCache=new OQ;var F=new Set;y.set(f,F)}else F=y.get(f),F===void 0&&(F=new Set,y.set(f,F));F.has(p)||(Cb=!0,F.add(p),c=GQ.bind(null,c,f,p),f.then(c,c))}function GQ(c,f,p){var y=c.pingCache;y!==null&&y.delete(f),c.pingedLanes|=c.suspendedLanes&p,c.warmLanes&=~p,ta===c&&(dr&p)===p&&(Ra===4||Ra===3&&(dr&62914560)===dr&&300>ze()-Sb?(Ur&2)===0&&f0(c,0):Eb|=p,u0===dr&&(u0=0)),cu(c)}function IB(c,f){f===0&&(f=Xn()),c=ec(c,f),c!==null&&(ua(c,f),cu(c))}function qQ(c){var f=c.memoizedState,p=0;f!==null&&(p=f.retryLane),IB(c,p)}function KQ(c,f){var p=0;switch(c.tag){case 13:var y=c.stateNode,F=c.memoizedState;F!==null&&(p=F.retryLane);break;case 19:y=c.stateNode;break;case 22:y=c.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(f),IB(c,p)}function WQ(c,f){return Re(c,f)}var L1=null,m0=null,Db=!1,U1=!1,Lb=!1,qf=0;function cu(c){c!==m0&&c.next===null&&(m0===null?L1=m0=c:m0=m0.next=c),U1=!0,Db||(Db=!0,JQ())}function Sp(c,f){if(!Lb&&U1){Lb=!0;do for(var p=!1,y=L1;y!==null;){if(c!==0){var F=y.pendingLanes;if(F===0)var H=0;else{var oe=y.suspendedLanes,ge=y.pingedLanes;H=(1<<31-Mt(42|c)+1)-1,H&=F&~(oe&~ge),H=H&201326741?H&201326741|1:H?H|2:0}H!==0&&(p=!0,LB(y,H))}else H=dr,H=Fn(y,y===ta?H:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(H&3)===0||Tr(y,H)||(p=!0,LB(y,H));y=y.next}while(p);Lb=!1}}function $Q(){FB()}function FB(){U1=Db=!1;var c=0;qf!==0&&(a9()&&(c=qf),qf=0);for(var f=ze(),p=null,y=L1;y!==null;){var F=y.next,H=RB(y,f);H===0?(y.next=null,p===null?L1=F:p.next=F,F===null&&(m0=p)):(p=y,(c!==0||(H&3)!==0)&&(U1=!0)),y=F}Sp(c)}function RB(c,f){for(var p=c.suspendedLanes,y=c.pingedLanes,F=c.expirationTimes,H=c.pendingLanes&-62914561;0<H;){var oe=31-Mt(H),ge=1<<oe,Fe=F[oe];Fe===-1?((ge&p)===0||(ge&y)!==0)&&(F[oe]=Bn(ge,f)):Fe<=f&&(c.expiredLanes|=ge),H&=~ge}if(f=ta,p=dr,p=Fn(c,c===f?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y=c.callbackNode,p===0||c===f&&(Mr===2||Mr===9)||c.cancelPendingCommit!==null)return y!==null&&y!==null&&et(y),c.callbackNode=null,c.callbackPriority=0;if((p&3)===0||Tr(c,p)){if(f=p&-p,f===c.callbackPriority)return f;switch(y!==null&&et(y),Vr(p)){case 2:case 8:p=dt;break;case 32:p=Ct;break;case 268435456:p=Nt;break;default:p=Ct}return y=DB.bind(null,c),p=Re(p,y),c.callbackPriority=f,c.callbackNode=p,f}return y!==null&&y!==null&&et(y),c.callbackPriority=2,c.callbackNode=null,2}function DB(c,f){if(ti!==0&&ti!==5)return c.callbackNode=null,c.callbackPriority=0,null;var p=c.callbackNode;if(D1()&&c.callbackNode!==p)return null;var y=dr;return y=Fn(c,c===ta?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y===0?null:(pB(c,y,f),RB(c,ze()),c.callbackNode!=null&&c.callbackNode===p?DB.bind(null,c):null)}function LB(c,f){if(D1())return null;pB(c,f,!0)}function JQ(){i9(function(){(Ur&6)!==0?Re(it,$Q):FB()})}function Ub(){return qf===0&&(qf=rs()),qf}function UB(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ko(""+c)}function MB(c,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,c.id&&p.setAttribute("form",c.id),f.parentNode.insertBefore(p,f),c=new FormData(c),p.parentNode.removeChild(p),c}function YQ(c,f,p,y,F){if(f==="submit"&&p&&p.stateNode===F){var H=UB((F[Zn]||null).action),oe=y.submitter;oe&&(f=(f=oe[Zn]||null)?UB(f.formAction):oe.getAttribute("formAction"),f!==null&&(H=f,oe=null));var ge=new ll("action","action",null,y,F);c.push({event:ge,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(qf!==0){var Fe=oe?MB(F,oe):new FormData(F);bl(p,{pending:!0,data:Fe,method:F.method,action:H},null,Fe)}}else typeof H=="function"&&(ge.preventDefault(),Fe=oe?MB(F,oe):new FormData(F),bl(p,{pending:!0,data:Fe,method:F.method,action:H},H,Fe))},currentTarget:F}]})}}for(var Mb=0;Mb<qu.length;Mb++){var Pb=qu[Mb],XQ=Pb.toLowerCase(),ZQ=Pb[0].toUpperCase()+Pb.slice(1);da(XQ,"on"+ZQ)}da(JA,"onAnimationEnd"),da(qc,"onAnimationIteration"),da(Kc,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(Wc,"onTransitionRun"),da(Gu,"onTransitionStart"),da(YA,"onTransitionCancel"),da($c,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tp));function PB(c,f){f=(f&4)!==0;for(var p=0;p<c.length;p++){var y=c[p],F=y.event;y=y.listeners;e:{var H=void 0;if(f)for(var oe=y.length-1;0<=oe;oe--){var ge=y[oe],Fe=ge.instance,Ze=ge.currentTarget;if(ge=ge.listener,Fe!==H&&F.isPropagationStopped())break e;H=ge,F.currentTarget=Ze;try{H(F)}catch(ft){C1(ft)}F.currentTarget=null,H=Fe}else for(oe=0;oe<y.length;oe++){if(ge=y[oe],Fe=ge.instance,Ze=ge.currentTarget,ge=ge.listener,Fe!==H&&F.isPropagationStopped())break e;H=ge,F.currentTarget=Ze;try{H(F)}catch(ft){C1(ft)}F.currentTarget=null,H=Fe}}}}function tr(c,f){var p=f[Rr];p===void 0&&(p=f[Rr]=new Set);var y=c+"__bubble";p.has(y)||(jB(f,c,2,!1),p.add(y))}function jb(c,f,p){var y=0;f&&(y|=4),jB(p,c,y,f)}var M1="_reactListening"+Math.random().toString(36).slice(2);function Ob(c){if(!c[M1]){c[M1]=!0,We.forEach(function(p){p!=="selectionchange"&&(e9.has(p)||jb(p,!1,c),jb(p,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[M1]||(f[M1]=!0,jb("selectionchange",!1,f))}}function jB(c,f,p,y){switch(cN(f)){case 2:var F=T9;break;case 8:F=B9;break;default:F=eC}p=F.bind(null,f,p,c),F=void 0,!Js||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(F=!0),y?F!==void 0?c.addEventListener(f,p,{capture:!0,passive:F}):c.addEventListener(f,p,!0):F!==void 0?c.addEventListener(f,p,{passive:F}):c.addEventListener(f,p,!1)}function Qb(c,f,p,y,F){var H=y;if((f&1)===0&&(f&2)===0&&y!==null)e:for(;;){if(y===null)return;var oe=y.tag;if(oe===3||oe===4){var ge=y.stateNode.containerInfo;if(ge===F)break;if(oe===4)for(oe=y.return;oe!==null;){var Fe=oe.tag;if((Fe===3||Fe===4)&&oe.stateNode.containerInfo===F)return;oe=oe.return}for(;ge!==null;){if(oe=Se(ge),oe===null)return;if(Fe=oe.tag,Fe===5||Fe===6||Fe===26||Fe===27){y=H=oe;continue e}ge=ge.parentNode}}y=y.return}GA(function(){var Ze=H,ft=Dr(p),wt=[];e:{var rt=Zl.get(c);if(rt!==void 0){var at=ll,En=c;switch(c){case"keypress":if(mi(p)===0)break e;case"keydown":case"keyup":at=Do;break;case"focusin":En="focus",at=ul;break;case"focusout":En="blur",at=ul;break;case"beforeblur":case"afterblur":at=ul;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=cl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Oc;break;case JA:case qc:case Kc:at=Mc;break;case $c:at=ue;break;case"scroll":case"scrollend":at=ju;break;case"wheel":at=Le;break;case"copy":case"cut":case"paste":at=Pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Yl;break;case"toggle":case"beforetoggle":at=ot}var hn=(f&4)!==0,Wr=!hn&&(c==="scroll"||c==="scrollend"),Ge=hn?rt!==null?rt+"Capture":null:rt;hn=[];for(var Pe=Ze,$e;Pe!==null;){var pt=Pe;if($e=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||$e===null||Ge===null||(pt=Rs(Pe,Ge),pt!=null&&hn.push(Bp(Pe,pt,$e))),Wr)break;Pe=Pe.return}0<hn.length&&(rt=new at(rt,En,null,p,ft),wt.push({event:rt,listeners:hn}))}}if((f&7)===0){e:{if(rt=c==="mouseover"||c==="pointerover",at=c==="mouseout"||c==="pointerout",rt&&p!==to&&(En=p.relatedTarget||p.fromElement)&&(Se(En)||En[Br]))break e;if((at||rt)&&(rt=ft.window===ft?ft:(rt=ft.ownerDocument)?rt.defaultView||rt.parentWindow:window,at?(En=p.relatedTarget||p.toElement,at=Ze,En=En?Se(En):null,En!==null&&(Wr=s(En),hn=En.tag,En!==Wr||hn!==5&&hn!==27&&hn!==6)&&(En=null)):(at=null,En=Ze),at!==En)){if(hn=Na,pt="onMouseLeave",Ge="onMouseEnter",Pe="mouse",(c==="pointerout"||c==="pointerover")&&(hn=Yl,pt="onPointerLeave",Ge="onPointerEnter",Pe="pointer"),Wr=at==null?rt:qe(at),$e=En==null?rt:qe(En),rt=new hn(pt,Pe+"leave",at,p,ft),rt.target=Wr,rt.relatedTarget=$e,pt=null,Se(ft)===Ze&&(hn=new hn(Ge,Pe+"enter",En,p,ft),hn.target=$e,hn.relatedTarget=Wr,pt=hn),Wr=pt,at&&En)t:{for(hn=at,Ge=En,Pe=0,$e=hn;$e;$e=p0($e))Pe++;for($e=0,pt=Ge;pt;pt=p0(pt))$e++;for(;0<Pe-$e;)hn=p0(hn),Pe--;for(;0<$e-Pe;)Ge=p0(Ge),$e--;for(;Pe--;){if(hn===Ge||Ge!==null&&hn===Ge.alternate)break t;hn=p0(hn),Ge=p0(Ge)}hn=null}else hn=null;at!==null&&OB(wt,rt,at,hn,!1),En!==null&&Wr!==null&&OB(wt,Wr,En,hn,!0)}}e:{if(rt=Ze?qe(Ze):window,at=rt.nodeName&&rt.nodeName.toLowerCase(),at==="select"||at==="input"&&rt.type==="file")var Xt=WA;else if(Nr(rt))if(Qu)Xt=Gh;else{Xt=ep;var $n=gi}else at=rt.nodeName,!at||at.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?Ze&&Mu(Ze.elementType)&&(Xt=WA):Xt=_f;if(Xt&&(Xt=Xt(c,Ze))){oo(wt,Xt,p,ft);break e}$n&&$n(c,rt,Ze),c==="focusout"&&Ze&&rt.type==="number"&&Ze.memoizedProps.value!=null&&sl(rt,"number",rt.value)}switch($n=Ze?qe(Ze):window,c){case"focusin":(Nr($n)||$n.contentEditable==="true")&&(xi=$n,Lo=Ze,ml=null);break;case"focusout":ml=Lo=xi=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,Aa(wt,p,ft);break;case"selectionchange":if(Gc)break;case"keydown":case"keyup":Aa(wt,p,ft)}var an;if(jt)e:{switch(c){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else fn?Xe(c,p)&&(pn="onCompositionEnd"):c==="keydown"&&p.keyCode===229&&(pn="onCompositionStart");pn&&(re&&p.locale!=="ko"&&(fn||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&fn&&(an=Pu()):(hi=ft,ol="value"in hi?hi.value:hi.textContent,fn=!0)),$n=P1(Ze,pn),0<$n.length&&(pn=new Wl(pn,c,null,p,ft),wt.push({event:pn,listeners:$n}),an?pn.data=an:(an=St(p),an!==null&&(pn.data=an)))),(an=W?Wn(c,p):Sn(c,p))&&(pn=P1(Ze,"onBeforeInput"),0<pn.length&&($n=new Wl("onBeforeInput","beforeinput",null,p,ft),wt.push({event:$n,listeners:pn}),$n.data=an)),YQ(wt,c,Ze,p,ft)}PB(wt,f)})}function Bp(c,f,p){return{instance:c,listener:f,currentTarget:p}}function P1(c,f){for(var p=f+"Capture",y=[];c!==null;){var F=c,H=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||H===null||(F=Rs(c,p),F!=null&&y.unshift(Bp(c,F,H)),F=Rs(c,f),F!=null&&y.push(Bp(c,F,H))),c.tag===3)return y;c=c.return}return[]}function p0(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function OB(c,f,p,y,F){for(var H=f._reactName,oe=[];p!==null&&p!==y;){var ge=p,Fe=ge.alternate,Ze=ge.stateNode;if(ge=ge.tag,Fe!==null&&Fe===y)break;ge!==5&&ge!==26&&ge!==27||Ze===null||(Fe=Ze,F?(Ze=Rs(p,H),Ze!=null&&oe.unshift(Bp(p,Ze,Fe))):F||(Ze=Rs(p,H),Ze!=null&&oe.push(Bp(p,Ze,Fe)))),p=p.return}oe.length!==0&&c.push({event:f,listeners:oe})}var t9=/\r\n?/g,n9=/\u0000|\uFFFD/g;function QB(c){return(typeof c=="string"?c:""+c).replace(t9,`
`).replace(n9,"")}function HB(c,f){return f=QB(f),QB(c)===f}function j1(){}function Kr(c,f,p,y,F,H){switch(p){case"children":typeof y=="string"?f==="body"||f==="textarea"&&y===""||di(c,y):(typeof y=="number"||typeof y=="bigint")&&f!=="body"&&di(c,""+y);break;case"className":Un(c,"class",y);break;case"tabIndex":Un(c,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Un(c,p,y);break;case"style":Uu(c,y,H);break;case"data":if(f!=="object"){Un(c,"data",y);break}case"src":case"href":if(y===""&&(f!=="a"||p!=="href")){c.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(p);break}y=ko(""+y),c.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){c.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof H=="function"&&(p==="formAction"?(f!=="input"&&Kr(c,f,"name",F.name,F,null),Kr(c,f,"formEncType",F.formEncType,F,null),Kr(c,f,"formMethod",F.formMethod,F,null),Kr(c,f,"formTarget",F.formTarget,F,null)):(Kr(c,f,"encType",F.encType,F,null),Kr(c,f,"method",F.method,F,null),Kr(c,f,"target",F.target,F,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(p);break}y=ko(""+y),c.setAttribute(p,y);break;case"onClick":y!=null&&(c.onclick=j1);break;case"onScroll":y!=null&&tr("scroll",c);break;case"onScrollEnd":y!=null&&tr("scrollend",c);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(F.children!=null)throw Error(r(60));c.innerHTML=p}}break;case"multiple":c.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":c.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){c.removeAttribute("xlink:href");break}p=ko(""+y),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(p,""+y):c.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(p,""):c.removeAttribute(p);break;case"capture":case"download":y===!0?c.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(p,y):c.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?c.setAttribute(p,y):c.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?c.removeAttribute(p):c.setAttribute(p,y);break;case"popover":tr("beforetoggle",c),tr("toggle",c),Ln(c,"popover",y);break;case"xlinkActuate":Qn(c,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Qn(c,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Qn(c,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Qn(c,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Qn(c,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Qn(c,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Qn(c,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Qn(c,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Qn(c,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ln(c,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=No.get(p)||p,Ln(c,p,y))}}function Hb(c,f,p,y,F,H){switch(p){case"style":Uu(c,y,H);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(F.children!=null)throw Error(r(60));c.innerHTML=p}}break;case"children":typeof y=="string"?di(c,y):(typeof y=="number"||typeof y=="bigint")&&di(c,""+y);break;case"onScroll":y!=null&&tr("scroll",c);break;case"onScrollEnd":y!=null&&tr("scrollend",c);break;case"onClick":y!=null&&(c.onclick=j1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ye.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(F=p.endsWith("Capture"),f=p.slice(2,F?p.length-7:void 0),H=c[Zn]||null,H=H!=null?H[p]:null,typeof H=="function"&&c.removeEventListener(f,H,F),typeof y=="function")){typeof H!="function"&&H!==null&&(p in c?c[p]=null:c.hasAttribute(p)&&c.removeAttribute(p)),c.addEventListener(f,y,F);break e}p in c?c[p]=y:y===!0?c.setAttribute(p,""):Ln(c,p,y)}}}function ni(c,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tr("error",c),tr("load",c);var y=!1,F=!1,H;for(H in p)if(p.hasOwnProperty(H)){var oe=p[H];if(oe!=null)switch(H){case"src":y=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Kr(c,f,H,oe,p,null)}}F&&Kr(c,f,"srcSet",p.srcSet,p,null),y&&Kr(c,f,"src",p.src,p,null);return;case"input":tr("invalid",c);var ge=H=oe=F=null,Fe=null,Ze=null;for(y in p)if(p.hasOwnProperty(y)){var ft=p[y];if(ft!=null)switch(y){case"name":F=ft;break;case"type":oe=ft;break;case"checked":Fe=ft;break;case"defaultChecked":Ze=ft;break;case"value":H=ft;break;case"defaultValue":ge=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,f));break;default:Kr(c,f,y,ft,p,null)}}al(c,H,ge,Fe,Ze,oe,F,!1),rl(c);return;case"select":tr("invalid",c),y=oe=H=null;for(F in p)if(p.hasOwnProperty(F)&&(ge=p[F],ge!=null))switch(F){case"value":H=ge;break;case"defaultValue":oe=ge;break;case"multiple":y=ge;default:Kr(c,f,F,ge,p,null)}f=H,p=oe,c.multiple=!!y,f!=null?eo(c,!!y,f,!1):p!=null&&eo(c,!!y,p,!0);return;case"textarea":tr("invalid",c),H=F=y=null;for(oe in p)if(p.hasOwnProperty(oe)&&(ge=p[oe],ge!=null))switch(oe){case"value":y=ge;break;case"defaultValue":F=ge;break;case"children":H=ge;break;case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(91));break;default:Kr(c,f,oe,ge,p,null)}il(c,y,F,H),rl(c);return;case"option":for(Fe in p)if(p.hasOwnProperty(Fe)&&(y=p[Fe],y!=null))switch(Fe){case"selected":c.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Kr(c,f,Fe,y,p,null)}return;case"dialog":tr("beforetoggle",c),tr("toggle",c),tr("cancel",c),tr("close",c);break;case"iframe":case"object":tr("load",c);break;case"video":case"audio":for(y=0;y<Tp.length;y++)tr(Tp[y],c);break;case"image":tr("error",c),tr("load",c);break;case"details":tr("toggle",c);break;case"embed":case"source":case"link":tr("error",c),tr("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in p)if(p.hasOwnProperty(Ze)&&(y=p[Ze],y!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Kr(c,f,Ze,y,p,null)}return;default:if(Mu(f)){for(ft in p)p.hasOwnProperty(ft)&&(y=p[ft],y!==void 0&&Hb(c,f,ft,y,p,void 0));return}}for(ge in p)p.hasOwnProperty(ge)&&(y=p[ge],y!=null&&Kr(c,f,ge,y,p,null))}function r9(c,f,p,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,H=null,oe=null,ge=null,Fe=null,Ze=null,ft=null;for(at in p){var wt=p[at];if(p.hasOwnProperty(at)&&wt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Fe=wt;default:y.hasOwnProperty(at)||Kr(c,f,at,null,y,wt)}}for(var rt in y){var at=y[rt];if(wt=p[rt],y.hasOwnProperty(rt)&&(at!=null||wt!=null))switch(rt){case"type":H=at;break;case"name":F=at;break;case"checked":Ze=at;break;case"defaultChecked":ft=at;break;case"value":oe=at;break;case"defaultValue":ge=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,f));break;default:at!==wt&&Kr(c,f,rt,at,y,wt)}}Es(c,oe,ge,Fe,Ze,ft,H,F);return;case"select":at=oe=ge=rt=null;for(H in p)if(Fe=p[H],p.hasOwnProperty(H)&&Fe!=null)switch(H){case"value":break;case"multiple":at=Fe;default:y.hasOwnProperty(H)||Kr(c,f,H,null,y,Fe)}for(F in y)if(H=y[F],Fe=p[F],y.hasOwnProperty(F)&&(H!=null||Fe!=null))switch(F){case"value":rt=H;break;case"defaultValue":ge=H;break;case"multiple":oe=H;default:H!==Fe&&Kr(c,f,F,H,y,Fe)}f=ge,p=oe,y=at,rt!=null?eo(c,!!p,rt,!1):!!y!=!!p&&(f!=null?eo(c,!!p,f,!0):eo(c,!!p,p?[]:"",!1));return;case"textarea":at=rt=null;for(ge in p)if(F=p[ge],p.hasOwnProperty(ge)&&F!=null&&!y.hasOwnProperty(ge))switch(ge){case"value":break;case"children":break;default:Kr(c,f,ge,null,y,F)}for(oe in y)if(F=y[oe],H=p[oe],y.hasOwnProperty(oe)&&(F!=null||H!=null))switch(oe){case"value":rt=F;break;case"defaultValue":at=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:F!==H&&Kr(c,f,oe,F,y,H)}yr(c,rt,at);return;case"option":for(var En in p)if(rt=p[En],p.hasOwnProperty(En)&&rt!=null&&!y.hasOwnProperty(En))switch(En){case"selected":c.selected=!1;break;default:Kr(c,f,En,null,y,rt)}for(Fe in y)if(rt=y[Fe],at=p[Fe],y.hasOwnProperty(Fe)&&rt!==at&&(rt!=null||at!=null))switch(Fe){case"selected":c.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Kr(c,f,Fe,rt,y,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in p)rt=p[hn],p.hasOwnProperty(hn)&&rt!=null&&!y.hasOwnProperty(hn)&&Kr(c,f,hn,null,y,rt);for(Ze in y)if(rt=y[Ze],at=p[Ze],y.hasOwnProperty(Ze)&&rt!==at&&(rt!=null||at!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,f));break;default:Kr(c,f,Ze,rt,y,at)}return;default:if(Mu(f)){for(var Wr in p)rt=p[Wr],p.hasOwnProperty(Wr)&&rt!==void 0&&!y.hasOwnProperty(Wr)&&Hb(c,f,Wr,void 0,y,rt);for(ft in y)rt=y[ft],at=p[ft],!y.hasOwnProperty(ft)||rt===at||rt===void 0&&at===void 0||Hb(c,f,ft,rt,y,at);return}}for(var Ge in p)rt=p[Ge],p.hasOwnProperty(Ge)&&rt!=null&&!y.hasOwnProperty(Ge)&&Kr(c,f,Ge,null,y,rt);for(wt in y)rt=y[wt],at=p[wt],!y.hasOwnProperty(wt)||rt===at||rt==null&&at==null||Kr(c,f,wt,rt,y,at)}var Vb=null,zb=null;function O1(c){return c.nodeType===9?c:c.ownerDocument}function VB(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zB(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function Gb(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var qb=null;function a9(){var c=window.event;return c&&c.type==="popstate"?c===qb?!1:(qb=c,!0):(qb=null,!1)}var GB=typeof setTimeout=="function"?setTimeout:void 0,s9=typeof clearTimeout=="function"?clearTimeout:void 0,qB=typeof Promise=="function"?Promise:void 0,i9=typeof queueMicrotask=="function"?queueMicrotask:typeof qB<"u"?function(c){return qB.resolve(null).then(c).catch(o9)}:GB;function o9(c){setTimeout(function(){throw c})}function gd(c){return c==="head"}function KB(c,f){var p=f,y=0,F=0;do{var H=p.nextSibling;if(c.removeChild(p),H&&H.nodeType===8)if(p=H.data,p==="/$"){if(0<y&&8>y){p=y;var oe=c.ownerDocument;if(p&1&&Np(oe.documentElement),p&2&&Np(oe.body),p&4)for(p=oe.head,Np(p),oe=p.firstChild;oe;){var ge=oe.nextSibling,Fe=oe.nodeName;oe[be]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||p.removeChild(oe),oe=ge}}if(F===0){c.removeChild(H),Mp(f);return}F--}else p==="$"||p==="$?"||p==="$!"?F++:y=p.charCodeAt(0)-48;else y=0;p=H}while(p);Mp(f)}function Kb(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Kb(p),Ee(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}c.removeChild(p)}}function l9(c,f,p,y){for(;c.nodeType===1;){var F=p;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!y&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(y){if(!c[be])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(H=c.getAttribute("rel"),H==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(H!==F.rel||c.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||c.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||c.getAttribute("title")!==(F.title==null?null:F.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(H=c.getAttribute("src"),(H!==(F.src==null?null:F.src)||c.getAttribute("type")!==(F.type==null?null:F.type)||c.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&H&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var H=F.name==null?null:""+F.name;if(F.type==="hidden"&&c.getAttribute("name")===H)return c}else return c;if(c=fc(c.nextSibling),c===null)break}return null}function c9(c,f,p){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!p||(c=fc(c.nextSibling),c===null))return null;return c}function Wb(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function u9(c,f){var p=c.ownerDocument;if(c.data!=="$?"||p.readyState==="complete")f();else{var y=function(){f(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),c._reactRetry=y}}function fc(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var $b=null;function WB(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var p=c.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return c;f--}else p==="/$"&&f++}c=c.previousSibling}return null}function $B(c,f,p){switch(f=O1(p),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Np(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);Ee(c)}var _l=new Map,JB=new Set;function Q1(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var cA=ee.d;ee.d={f:A9,r:d9,D:f9,C:h9,L:m9,m:p9,X:x9,S:g9,M:v9};function A9(){var c=cA.f(),f=F1();return c||f}function d9(c){var f=Ne(c);f!==null&&f.tag===5&&f.type==="form"?Qf(f):cA.r(c)}var g0=typeof document>"u"?null:document;function YB(c,f,p){var y=g0;if(y&&typeof f=="string"&&f){var F=lr(f);F='link[rel="'+c+'"][href="'+F+'"]',typeof p=="string"&&(F+='[crossorigin="'+p+'"]'),JB.has(F)||(JB.add(F),c={rel:c,crossOrigin:p,href:f},y.querySelector(F)===null&&(f=y.createElement("link"),ni(f,"link",c),Qe(f),y.head.appendChild(f)))}}function f9(c){cA.D(c),YB("dns-prefetch",c,null)}function h9(c,f){cA.C(c,f),YB("preconnect",c,f)}function m9(c,f,p){cA.L(c,f,p);var y=g0;if(y&&c&&f){var F='link[rel="preload"][as="'+lr(f)+'"]';f==="image"&&p&&p.imageSrcSet?(F+='[imagesrcset="'+lr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(F+='[imagesizes="'+lr(p.imageSizes)+'"]')):F+='[href="'+lr(c)+'"]';var H=F;switch(f){case"style":H=x0(c);break;case"script":H=v0(c)}_l.has(H)||(c=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:c,as:f},p),_l.set(H,c),y.querySelector(F)!==null||f==="style"&&y.querySelector(kp(H))||f==="script"&&y.querySelector(Ip(H))||(f=y.createElement("link"),ni(f,"link",c),Qe(f),y.head.appendChild(f)))}}function p9(c,f){cA.m(c,f);var p=g0;if(p&&c){var y=f&&typeof f.as=="string"?f.as:"script",F='link[rel="modulepreload"][as="'+lr(y)+'"][href="'+lr(c)+'"]',H=F;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":H=v0(c)}if(!_l.has(H)&&(c=d({rel:"modulepreload",href:c},f),_l.set(H,c),p.querySelector(F)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Ip(H)))return}y=p.createElement("link"),ni(y,"link",c),Qe(y),p.head.appendChild(y)}}}function g9(c,f,p){cA.S(c,f,p);var y=g0;if(y&&c){var F=tt(y).hoistableStyles,H=x0(c);f=f||"default";var oe=F.get(H);if(!oe){var ge={loading:0,preload:null};if(oe=y.querySelector(kp(H)))ge.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},p),(p=_l.get(H))&&Jb(c,p);var Fe=oe=y.createElement("link");Qe(Fe),ni(Fe,"link",c),Fe._p=new Promise(function(Ze,ft){Fe.onload=Ze,Fe.onerror=ft}),Fe.addEventListener("load",function(){ge.loading|=1}),Fe.addEventListener("error",function(){ge.loading|=2}),ge.loading|=4,H1(oe,f,y)}oe={type:"stylesheet",instance:oe,count:1,state:ge},F.set(H,oe)}}}function x9(c,f){cA.X(c,f);var p=g0;if(p&&c){var y=tt(p).hoistableScripts,F=v0(c),H=y.get(F);H||(H=p.querySelector(Ip(F)),H||(c=d({src:c,async:!0},f),(f=_l.get(F))&&Yb(c,f),H=p.createElement("script"),Qe(H),ni(H,"link",c),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},y.set(F,H))}}function v9(c,f){cA.M(c,f);var p=g0;if(p&&c){var y=tt(p).hoistableScripts,F=v0(c),H=y.get(F);H||(H=p.querySelector(Ip(F)),H||(c=d({src:c,async:!0,type:"module"},f),(f=_l.get(F))&&Yb(c,f),H=p.createElement("script"),Qe(H),ni(H,"link",c),p.head.appendChild(H)),H={type:"script",instance:H,count:1,state:null},y.set(F,H))}}function XB(c,f,p,y){var F=(F=le.current)?Q1(F):null;if(!F)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=x0(p.href),p=tt(F).hoistableStyles,y=p.get(f),y||(y={type:"style",instance:null,count:0,state:null},p.set(f,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){c=x0(p.href);var H=tt(F).hoistableStyles,oe=H.get(c);if(oe||(F=F.ownerDocument||F,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},H.set(c,oe),(H=F.querySelector(kp(c)))&&!H._p&&(oe.instance=H,oe.state.loading=5),_l.has(c)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},_l.set(c,p),H||y9(F,c,p,oe.state))),f&&y===null)throw Error(r(528,""));return oe}if(f&&y!==null)throw Error(r(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=v0(p),p=tt(F).hoistableScripts,y=p.get(f),y||(y={type:"script",instance:null,count:0,state:null},p.set(f,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function x0(c){return'href="'+lr(c)+'"'}function kp(c){return'link[rel="stylesheet"]['+c+"]"}function ZB(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function y9(c,f,p,y){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?y.loading=1:(f=c.createElement("link"),y.preload=f,f.addEventListener("load",function(){return y.loading|=1}),f.addEventListener("error",function(){return y.loading|=2}),ni(f,"link",p),Qe(f),c.head.appendChild(f))}function v0(c){return'[src="'+lr(c)+'"]'}function Ip(c){return"script[async]"+c}function eN(c,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var y=c.querySelector('style[data-href~="'+lr(p.href)+'"]');if(y)return f.instance=y,Qe(y),y;var F=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(c.ownerDocument||c).createElement("style"),Qe(y),ni(y,"style",F),H1(y,p.precedence,c),f.instance=y;case"stylesheet":F=x0(p.href);var H=c.querySelector(kp(F));if(H)return f.state.loading|=4,f.instance=H,Qe(H),H;y=ZB(p),(F=_l.get(F))&&Jb(y,F),H=(c.ownerDocument||c).createElement("link"),Qe(H);var oe=H;return oe._p=new Promise(function(ge,Fe){oe.onload=ge,oe.onerror=Fe}),ni(H,"link",y),f.state.loading|=4,H1(H,p.precedence,c),f.instance=H;case"script":return H=v0(p.src),(F=c.querySelector(Ip(H)))?(f.instance=F,Qe(F),F):(y=p,(F=_l.get(H))&&(y=d({},p),Yb(y,F)),c=c.ownerDocument||c,F=c.createElement("script"),Qe(F),ni(F,"link",y),c.head.appendChild(F),f.instance=F);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(y=f.instance,f.state.loading|=4,H1(y,p.precedence,c));return f.instance}function H1(c,f,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=y.length?y[y.length-1]:null,H=F,oe=0;oe<y.length;oe++){var ge=y[oe];if(ge.dataset.precedence===f)H=ge;else if(H!==F)break}H?H.parentNode.insertBefore(c,H.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(c,f.firstChild))}function Jb(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function Yb(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var V1=null;function tN(c,f,p){if(V1===null){var y=new Map,F=V1=new Map;F.set(p,y)}else F=V1,y=F.get(p),y||(y=new Map,F.set(p,y));if(y.has(c))return y;for(y.set(c,null),p=p.getElementsByTagName(c),F=0;F<p.length;F++){var H=p[F];if(!(H[be]||H[or]||c==="link"&&H.getAttribute("rel")==="stylesheet")&&H.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=H.getAttribute(f)||"";oe=c+oe;var ge=y.get(oe);ge?ge.push(H):y.set(oe,[H])}}return y}function nN(c,f,p){c=c.ownerDocument||c,c.head.insertBefore(p,f==="title"?c.querySelector("head > title"):null)}function w9(c,f,p){if(p===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function rN(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Fp=null;function b9(){}function C9(c,f,p){if(Fp===null)throw Error(r(475));var y=Fp;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var F=x0(p.href),H=c.querySelector(kp(F));if(H){c=H._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(y.count++,y=z1.bind(y),c.then(y,y)),f.state.loading|=4,f.instance=H,Qe(H);return}H=c.ownerDocument||c,p=ZB(p),(F=_l.get(F))&&Jb(p,F),H=H.createElement("link"),Qe(H);var oe=H;oe._p=new Promise(function(ge,Fe){oe.onload=ge,oe.onerror=Fe}),ni(H,"link",p),f.instance=H}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(y.count++,f=z1.bind(y),c.addEventListener("load",f),c.addEventListener("error",f))}}function E9(){if(Fp===null)throw Error(r(475));var c=Fp;return c.stylesheets&&c.count===0&&Xb(c,c.stylesheets),0<c.count?function(f){var p=setTimeout(function(){if(c.stylesheets&&Xb(c,c.stylesheets),c.unsuspend){var y=c.unsuspend;c.unsuspend=null,y()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(p)}}:null}function z1(){if(this.count--,this.count===0){if(this.stylesheets)Xb(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var G1=null;function Xb(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,G1=new Map,f.forEach(_9,c),G1=null,z1.call(c))}function _9(c,f){if(!(f.state.loading&4)){var p=G1.get(c);if(p)var y=p.get(null);else{p=new Map,G1.set(c,p);for(var F=c.querySelectorAll("link[data-precedence],style[data-precedence]"),H=0;H<F.length;H++){var oe=F[H];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(p.set(oe.dataset.precedence,oe),y=oe)}y&&p.set(null,y)}F=f.instance,oe=F.getAttribute("data-precedence"),H=p.get(oe)||y,H===y&&p.set(null,F),p.set(oe,F),this.count++,y=z1.bind(this),F.addEventListener("load",y),F.addEventListener("error",y),H?H.parentNode.insertBefore(F,H.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(F,c.firstChild)),f.state.loading|=4}}var Rp={$$typeof:k,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function S9(c,f,p,y,F,H,oe,ge){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=y,this.onUncaughtError=F,this.onCaughtError=H,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function aN(c,f,p,y,F,H,oe,ge,Fe,Ze,ft,wt){return c=new S9(c,f,p,oe,ge,Fe,Ze,wt),f=1,H===!0&&(f|=24),H=Ms(3,null,null,f),c.current=H,H.stateNode=c,f=np(),f.refCount++,c.pooledCache=f,f.refCount++,H.memoizedState={element:y,isDehydrated:p,cache:f},Me(H),c}function sN(c){return c?(c=ls,c):ls}function iN(c,f,p,y,F,H){F=sN(F),y.context===null?y.context=F:y.pendingContext=F,y=ct(f),y.payload={element:p},H=H===void 0?null:H,H!==null&&(y.callback=H),p=vt(c,y,f),p!==null&&(zo(p,c,f),ht(p,c,f))}function oN(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var p=c.retryLane;c.retryLane=p!==0&&p<f?p:f}}function Zb(c,f){oN(c,f),(c=c.alternate)&&oN(c,f)}function lN(c){if(c.tag===13){var f=ec(c,67108864);f!==null&&zo(f,c,67108864),Zb(c,67108864)}}var q1=!0;function T9(c,f,p,y){var F=J.T;J.T=null;var H=ee.p;try{ee.p=2,eC(c,f,p,y)}finally{ee.p=H,J.T=F}}function B9(c,f,p,y){var F=J.T;J.T=null;var H=ee.p;try{ee.p=8,eC(c,f,p,y)}finally{ee.p=H,J.T=F}}function eC(c,f,p,y){if(q1){var F=tC(y);if(F===null)Qb(c,f,y,K1,p),uN(c,y);else if(k9(F,c,f,p,y))y.stopPropagation();else if(uN(c,y),f&4&&-1<N9.indexOf(c)){for(;F!==null;){var H=Ne(F);if(H!==null)switch(H.tag){case 3:if(H=H.stateNode,H.current.memoizedState.isDehydrated){var oe=mn(H.pendingLanes);if(oe!==0){var ge=H;for(ge.pendingLanes|=2,ge.entangledLanes|=2;oe;){var Fe=1<<31-Mt(oe);ge.entanglements[1]|=Fe,oe&=~Fe}cu(H),(Ur&6)===0&&(k1=ze()+500,Sp(0))}}break;case 13:ge=ec(H,2),ge!==null&&zo(ge,H,2),F1(),Zb(H,2)}if(H=tC(y),H===null&&Qb(c,f,y,K1,p),H===F)break;F=H}F!==null&&y.stopPropagation()}else Qb(c,f,y,null,p)}}function tC(c){return c=Dr(c),nC(c)}var K1=null;function nC(c){if(K1=null,c=Se(c),c!==null){var f=s(c);if(f===null)c=null;else{var p=f.tag;if(p===13){if(c=i(f),c!==null)return c;c=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return K1=c,null}function cN(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case it:return 2;case dt:return 8;case Ct:case ut:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var rC=!1,xd=null,vd=null,yd=null,Dp=new Map,Lp=new Map,wd=[],N9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uN(c,f){switch(c){case"focusin":case"focusout":xd=null;break;case"dragenter":case"dragleave":vd=null;break;case"mouseover":case"mouseout":yd=null;break;case"pointerover":case"pointerout":Dp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lp.delete(f.pointerId)}}function Up(c,f,p,y,F,H){return c===null||c.nativeEvent!==H?(c={blockedOn:f,domEventName:p,eventSystemFlags:y,nativeEvent:H,targetContainers:[F]},f!==null&&(f=Ne(f),f!==null&&lN(f)),c):(c.eventSystemFlags|=y,f=c.targetContainers,F!==null&&f.indexOf(F)===-1&&f.push(F),c)}function k9(c,f,p,y,F){switch(f){case"focusin":return xd=Up(xd,c,f,p,y,F),!0;case"dragenter":return vd=Up(vd,c,f,p,y,F),!0;case"mouseover":return yd=Up(yd,c,f,p,y,F),!0;case"pointerover":var H=F.pointerId;return Dp.set(H,Up(Dp.get(H)||null,c,f,p,y,F)),!0;case"gotpointercapture":return H=F.pointerId,Lp.set(H,Up(Lp.get(H)||null,c,f,p,y,F)),!0}return!1}function AN(c){var f=Se(c.target);if(f!==null){var p=s(f);if(p!==null){if(f=p.tag,f===13){if(f=i(p),f!==null){c.blockedOn=f,ws(c.priority,function(){if(p.tag===13){var y=Vo();y=as(y);var F=ec(p,y);F!==null&&zo(F,p,y),Zb(p,y)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){c.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}c.blockedOn=null}function W1(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var p=tC(c.nativeEvent);if(p===null){p=c.nativeEvent;var y=new p.constructor(p.type,p);to=y,p.target.dispatchEvent(y),to=null}else return f=Ne(p),f!==null&&lN(f),c.blockedOn=p,!1;f.shift()}return!0}function dN(c,f,p){W1(c)&&p.delete(f)}function I9(){rC=!1,xd!==null&&W1(xd)&&(xd=null),vd!==null&&W1(vd)&&(vd=null),yd!==null&&W1(yd)&&(yd=null),Dp.forEach(dN),Lp.forEach(dN)}function $1(c,f){c.blockedOn===f&&(c.blockedOn=null,rC||(rC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,I9)))}var J1=null;function fN(c){J1!==c&&(J1=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){J1===c&&(J1=null);for(var f=0;f<c.length;f+=3){var p=c[f],y=c[f+1],F=c[f+2];if(typeof y!="function"){if(nC(y||p)===null)continue;break}var H=Ne(p);H!==null&&(c.splice(f,3),f-=3,bl(H,{pending:!0,data:F,method:p.method,action:y},y,F))}}))}function Mp(c){function f(Fe){return $1(Fe,c)}xd!==null&&$1(xd,c),vd!==null&&$1(vd,c),yd!==null&&$1(yd,c),Dp.forEach(f),Lp.forEach(f);for(var p=0;p<wd.length;p++){var y=wd[p];y.blockedOn===c&&(y.blockedOn=null)}for(;0<wd.length&&(p=wd[0],p.blockedOn===null);)AN(p),p.blockedOn===null&&wd.shift();if(p=(c.ownerDocument||c).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var F=p[y],H=p[y+1],oe=F[Zn]||null;if(typeof H=="function")oe||fN(p);else if(oe){var ge=null;if(H&&H.hasAttribute("formAction")){if(F=H,oe=H[Zn]||null)ge=oe.formAction;else if(nC(F)!==null)continue}else ge=oe.action;typeof ge=="function"?p[y+1]=ge:(p.splice(y,3),y-=3),fN(p)}}}function aC(c){this._internalRoot=c}Y1.prototype.render=aC.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var p=f.current,y=Vo();iN(p,y,c,f,null,null)},Y1.prototype.unmount=aC.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;iN(c.current,2,null,c,null,null),F1(),f[Br]=null}};function Y1(c){this._internalRoot=c}Y1.prototype.unstable_scheduleHydration=function(c){if(c){var f=pa();c={blockedOn:null,target:c,priority:f};for(var p=0;p<wd.length&&f!==0&&f<wd[p].priority;p++);wd.splice(p,0,c),p===0&&AN(c)}};var hN=e.version;if(hN!=="19.1.1")throw Error(r(527,hN,"19.1.1"));ee.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var F9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X1.isDisabled&&X1.supportsFiber)try{Ut=X1.inject(F9),Ht=X1}catch{}}return jp.createRoot=function(c,f){if(!a(c))throw Error(r(299));var p=!1,y="",F=kT,H=IT,oe=FT,ge=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(F=f.onUncaughtError),f.onCaughtError!==void 0&&(H=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ge=f.unstable_transitionCallbacks)),f=aN(c,1,!1,null,null,p,y,F,H,oe,ge,null),c[Br]=f.current,Ob(c),new aC(f)},jp.hydrateRoot=function(c,f,p){if(!a(c))throw Error(r(299));var y=!1,F="",H=kT,oe=IT,ge=FT,Fe=null,Ze=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(F=p.identifierPrefix),p.onUncaughtError!==void 0&&(H=p.onUncaughtError),p.onCaughtError!==void 0&&(oe=p.onCaughtError),p.onRecoverableError!==void 0&&(ge=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Fe=p.unstable_transitionCallbacks),p.formState!==void 0&&(Ze=p.formState)),f=aN(c,1,!0,f,p??null,y,F,H,oe,ge,Fe,Ze),f.context=sN(null),p=f.current,y=Vo(),y=as(y),F=ct(y),F.callback=null,vt(p,F,y),p=y,f.current.lanes=p,ua(f,p),cu(f),c[Br]=f.current,Ob(c),new Y1(f)},jp.version="19.1.1",jp}var EN;function Q9(){if(EN)return oC.exports;EN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oC.exports=O9(),oC.exports}var H9=Q9();const V9=W5(H9),z9=()=>{};var _N={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},G9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[n++];e[r++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[n++],i=t[n++],o=t[n++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},$D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,o=i?t[a+1]:0,l=a+2<t.length,u=l?t[a+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|u>>6,g=u&63;l||(g=64,i||(m=64)),r.push(n[d],n[h],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const s=n[t.charAt(a++)],o=a<t.length?n[t.charAt(a)]:0;++a;const u=a<t.length?n[t.charAt(a)]:64;++a;const h=a<t.length?n[t.charAt(a)]:64;if(++a,s==null||o==null||u==null||h==null)throw new q9;const m=s<<2|o>>4;if(r.push(m),u!==64){const g=o<<4&240|u>>2;if(r.push(g),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class q9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K9=function(t){const e=WD(t);return $D.encodeByteArray(e,!0)},k2=function(t){return K9(t).replace(/\./g,"")},JD=function(t){try{return $D.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=()=>W9().__FIREBASE_DEFAULTS__,J9=()=>{if(typeof process>"u"||typeof _N>"u")return;const t=_N.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JD(t[1]);return e&&JSON.parse(e)},Oy=()=>{try{return z9()||$9()||J9()||Y9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YD=t=>{var e,n;return(n=(e=Oy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},X9=t=>{const e=YD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XD=()=>{var t;return(t=Oy())==null?void 0:t.config},ZD=t=>{var e;return(e=Oy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eL(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[k2(JSON.stringify(n)),k2(JSON.stringify(i)),""].join(".")}const bg={};function tH(){const t={prod:[],emulator:[]};for(const e of Object.keys(bg))bg[e]?t.emulator.push(e):t.prod.push(e);return t}function nH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let SN=!1;function tL(t,e){if(typeof window>"u"||typeof document>"u"||!Um(window.location.host)||bg[t]===e||bg[t]||SN)return;bg[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=tH().prod.length>0;function i(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{SN=!0,i()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=nH(r),g=n("text"),b=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),E=document.getElementById(w)||document.createElement("a"),N=n("preprendIcon"),I=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const k=m.element;o(k),d(E,w);const U=u();l(I,N),k.append(I,b,E,U),document.body.appendChild(k)}s?(b.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oi())}function aH(){var e;const t=(e=Oy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lH(){const t=Oi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cH(){return!aH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uH(){try{return typeof indexedDB=="object"}catch{return!1}}function AH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH="FirebaseError";class DA extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dH,Object.setPrototypeOf(this,DA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nx.prototype.create)}}class Nx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?fH(s,r):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new DA(a,o,r)}}function fH(t,e){return t.replace(hH,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const hH=/\{\$([^}]+)}/g;function mH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const s=t[a],i=e[a];if(TN(s)&&TN(i)){if(!vh(s,i))return!1}else if(s!==i)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function TN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,s]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function ng(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pH(t,e){const n=new gH(t,e);return n.subscribe.bind(n)}class gH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xH(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=AC),a.error===void 0&&(a.error=AC),a.complete===void 0&&(a.complete=AC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function AC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){return t&&t._delegate?t._delegate:t}class yh{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vH=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Z9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wH(e))try{this.getOrInitializeService({instanceIdentifier:Jf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:a});r.resolve(s)}catch{}}}}clearInstance(e=Jf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jf){return this.instances.has(e)}getOptions(e=Jf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jf){return this.component?this.component.multipleInstances?e:Jf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yH(t){return t===Jf?void 0:t}function wH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rr||(rr={}));const CH={debug:rr.DEBUG,verbose:rr.VERBOSE,info:rr.INFO,warn:rr.WARN,error:rr.ERROR,silent:rr.SILENT},EH=rr.INFO,_H={[rr.DEBUG]:"log",[rr.VERBOSE]:"log",[rr.INFO]:"info",[rr.WARN]:"warn",[rr.ERROR]:"error"},SH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=_H[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let $5=class{constructor(e){this.name=e,this._logLevel=EH,this._logHandler=SH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rr.DEBUG,...e),this._logHandler(this,rr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rr.VERBOSE,...e),this._logHandler(this,rr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rr.INFO,...e),this._logHandler(this,rr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rr.WARN,...e),this._logHandler(this,rr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rr.ERROR,...e),this._logHandler(this,rr.ERROR,...e)}};const TH=(t,e)=>e.some(n=>t instanceof n);let BN,NN;function BH(){return BN||(BN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NH(){return NN||(NN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nL=new WeakMap,KE=new WeakMap,rL=new WeakMap,dC=new WeakMap,J5=new WeakMap;function kH(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(Kd(t.result)),a()},i=()=>{r(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&nL.set(n,t)}).catch(()=>{}),J5.set(e,t),e}function IH(t){if(KE.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),a()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});KE.set(t,e)}let WE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return KE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FH(t){WE=t(WE)}function RH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fC(this),e,...n);return rL.set(r,e.sort?e.sort():[e]),Kd(r)}:NH().includes(t)?function(...e){return t.apply(fC(this),e),Kd(nL.get(this))}:function(...e){return Kd(t.apply(fC(this),e))}}function DH(t){return typeof t=="function"?RH(t):(t instanceof IDBTransaction&&IH(t),TH(t,BH())?new Proxy(t,WE):t)}function Kd(t){if(t instanceof IDBRequest)return kH(t);if(dC.has(t))return dC.get(t);const e=DH(t);return e!==t&&(dC.set(t,e),J5.set(e,t)),e}const fC=t=>J5.get(t);function LH(t,e,{blocked:n,upgrade:r,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),o=Kd(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Kd(i.result),l.oldVersion,l.newVersion,Kd(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const UH=["get","getKey","getAll","getAllKeys","count"],MH=["put","add","delete","clear"],hC=new Map;function kN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hC.get(e))return hC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=MH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||UH.includes(n)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),a&&l.done]))[0]};return hC.set(e,s),s}FH(t=>({...t,get:(e,n,r)=>kN(e,n)||t.get(e,n,r),has:(e,n)=>!!kN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $E="@firebase/app",IN="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new $5("@firebase/app"),OH="@firebase/app-compat",QH="@firebase/analytics-compat",HH="@firebase/analytics",VH="@firebase/app-check-compat",zH="@firebase/app-check",GH="@firebase/auth",qH="@firebase/auth-compat",KH="@firebase/database",WH="@firebase/data-connect",$H="@firebase/database-compat",JH="@firebase/functions",YH="@firebase/functions-compat",XH="@firebase/installations",ZH="@firebase/installations-compat",eV="@firebase/messaging",tV="@firebase/messaging-compat",nV="@firebase/performance",rV="@firebase/performance-compat",aV="@firebase/remote-config",sV="@firebase/remote-config-compat",iV="@firebase/storage",oV="@firebase/storage-compat",lV="@firebase/firestore",cV="@firebase/ai",uV="@firebase/firestore-compat",AV="firebase",dV="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="[DEFAULT]",fV={[$E]:"fire-core",[OH]:"fire-core-compat",[HH]:"fire-analytics",[QH]:"fire-analytics-compat",[zH]:"fire-app-check",[VH]:"fire-app-check-compat",[GH]:"fire-auth",[qH]:"fire-auth-compat",[KH]:"fire-rtdb",[WH]:"fire-data-connect",[$H]:"fire-rtdb-compat",[JH]:"fire-fn",[YH]:"fire-fn-compat",[XH]:"fire-iid",[ZH]:"fire-iid-compat",[eV]:"fire-fcm",[tV]:"fire-fcm-compat",[nV]:"fire-perf",[rV]:"fire-perf-compat",[aV]:"fire-rc",[sV]:"fire-rc-compat",[iV]:"fire-gcs",[oV]:"fire-gcs-compat",[lV]:"fire-fst",[uV]:"fire-fst-compat",[cV]:"fire-vertex","fire-js":"fire-js",[AV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map,hV=new Map,YE=new Map;function FN(t,e){try{t.container.addComponent(e)}catch(n){EA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ym(t){const e=t.name;if(YE.has(e))return EA.debug(`There were multiple attempts to register component ${e}.`),!1;YE.set(e,t);for(const n of Gg.values())FN(n,t);for(const n of hV.values())FN(n,t);return!0}function Y5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wd=new Nx("app","Firebase",mV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=dV;function X5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:JE,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Wd.create("bad-app-name",{appName:String(a)});if(n||(n=XD()),!n)throw Wd.create("no-options");const s=Gg.get(a);if(s){if(vh(n,s.options)&&vh(r,s.config))return s;throw Wd.create("duplicate-app",{appName:a})}const i=new bH(a);for(const l of YE.values())i.addComponent(l);const o=new pV(n,r,i);return Gg.set(a,o),o}function aL(t=JE){const e=Gg.get(t);if(!e&&t===JE&&XD())return X5();if(!e)throw Wd.create("no-app",{appName:t});return e}function RN(){return Array.from(Gg.values())}function $d(t,e,n){let r=fV[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const i=[`Unable to register library "${r}" with version "${e}":`];a&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),EA.warn(i.join(" "));return}ym(new yh(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="firebase-heartbeat-database",xV=1,qg="firebase-heartbeat-store";let mC=null;function sL(){return mC||(mC=LH(gV,xV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qg)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wd.create("idb-open",{originalErrorMessage:t.message})})),mC}async function vV(t){try{const n=(await sL()).transaction(qg),r=await n.objectStore(qg).get(iL(t));return await n.done,r}catch(e){if(e instanceof DA)EA.warn(e.message);else{const n=Wd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});EA.warn(n.message)}}}async function DN(t,e){try{const r=(await sL()).transaction(qg,"readwrite");await r.objectStore(qg).put(e,iL(t)),await r.done}catch(n){if(n instanceof DA)EA.warn(n.message);else{const r=Wd.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});EA.warn(r.message)}}}function iL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1024,wV=30;class bV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=LN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>wV){const i=_V(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){EA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=LN(),{heartbeatsToSend:r,unsentEntries:a}=CV(this._heartbeatsCache.heartbeats),s=k2(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return EA.warn(n),""}}}function LN(){return new Date().toISOString().substring(0,10)}function CV(t,e=yV){const n=[];let r=t.slice();for(const a of t){const s=n.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),UN(n)>e){s.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),UN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uH()?AH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return DN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return DN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function UN(t){return k2(JSON.stringify({version:2,heartbeats:t})).length}function _V(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){ym(new yh("platform-logger",e=>new PH(e),"PRIVATE")),ym(new yh("heartbeat",e=>new bV(e),"PRIVATE")),$d($E,IN,t),$d($E,IN,"esm2020"),$d("fire-js","")}SV("");function oL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TV=oL,lL=new Nx("auth","Firebase",oL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new $5("@firebase/auth");function BV(t,...e){I2.logLevel<=rr.WARN&&I2.warn(`Auth (${Mm}): ${t}`,...e)}function a2(t,...e){I2.logLevel<=rr.ERROR&&I2.error(`Auth (${Mm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,...e){throw Z5(t,...e)}function yu(t,...e){return Z5(t,...e)}function cL(t,e,n){const r={...TV(),[e]:n};return new Nx("auth","Firebase",r).create(e,{appName:t.name})}function Jd(t){return cL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z5(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lL.create(t,...e)}function bn(t,e,...n){if(!t)throw Z5(e,...n)}function hA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw a2(e),new Error(e)}function _A(t,e){t||hA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function NV(){return MN()==="http:"||MN()==="https:"}function MN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NV()||iH()||"connection"in navigator)?navigator.onLine:!0}function IV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n){this.shortDelay=e,this.longDelay=n,_A(n>e,"Short delay should be less than long delay!"),this.isMobile=rH()||oH()}get(){return kV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e){_A(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DV=new Ix(3e4,6e4);function xf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function LA(t,e,n,r,a={}){return AL(t,a,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=kx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return sH()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Um(t.emulatorConfig.host)&&(u.credentials="include"),uL.fetch()(await dL(t,t.config.apiHost,n,o),u)})}async function AL(t,e,n){t._canInitEmulator=!1;const r={...FV,...e};try{const a=new UV(t),s=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Z1(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Z1(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw Z1(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw Z1(t,"user-disabled",i);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cL(t,d,u);Bc(t,d)}}catch(a){if(a instanceof DA)throw a;Bc(t,"network-request-failed",{message:String(a)})}}async function Qy(t,e,n,r,a={}){const s=await LA(t,e,n,r,a);return"mfaPendingCredential"in s&&Bc(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function dL(t,e,n,r){const a=`${e}${n}?${r}`,s=t,i=s.config.emulator?eS(t.config,a):`${t.config.apiScheme}://${a}`;return RV.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function LV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yu(this.auth,"network-request-failed")),DV.get())})}}function Z1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=yu(t,e,r);return a.customData._tokenResponse=n,a}function PN(t){return t!==void 0&&t.enterprise!==void 0}class MV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PV(t,e){return LA(t,"GET","/v2/recaptchaConfig",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return LA(t,"POST","/v1/accounts:delete",e)}async function F2(t,e){return LA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OV(t,e=!1){const n=Is(t),r=await n.getIdToken(e),a=tS(r);bn(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:r,authTime:Cg(pC(a.auth_time)),issuedAtTime:Cg(pC(a.iat)),expirationTime:Cg(pC(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pC(t){return Number(t)*1e3}function tS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return a2("JWT malformed, contained fewer than 3 sections"),null;try{const a=JD(n);return a?JSON.parse(a):(a2("Failed to decode base64 JWT payload"),null)}catch(a){return a2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function jN(t){const e=tS(t);return bn(e,"internal-error"),bn(typeof e.exp<"u","internal-error"),bn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kg(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof DA&&QV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cg(this.lastLoginAt),this.creationTime=Cg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Kg(t,F2(e,{idToken:n}));bn(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?fL(a.providerUserInfo):[],i=zV(t.providerData,s),o=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new ZE(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function VV(t){const e=Is(t);await R2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zV(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function fL(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){const n=await AL(t,{},async()=>{const r=kx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=await dL(t,a,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Um(t.emulatorConfig.host)&&(l.credentials="include"),uL.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qV(t,e){return LA(t,"POST","/v2/accounts:revokeToken",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bn(e.idToken,"internal-error"),bn(typeof e.idToken<"u","internal-error"),bn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){bn(e.length!==0,"internal-error");const n=jN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:s}=await GV(e,n);this.updateTokensAndExpiration(r,a,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:s}=n,i=new Z0;return r&&(bn(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),a&&(bn(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(bn(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Z0,this.toJSON())}_performRefresh(){return hA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t,e){bn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bc{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new HV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ZE(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Kg(this,this.stsTokenManager.getToken(this.auth,e));return bn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OV(this,e)}reload(){return VV(this)}_assign(e){this!==e&&(bn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){bn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await R2(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vc(this.auth.app))return Promise.reject(Jd(this.auth));const e=await this.getIdToken();return await Kg(this,jV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,s=n.phoneNumber??void 0,i=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:w}=n;bn(h&&w,e,"internal-error");const E=Z0.fromJSON(this.name,w);bn(typeof h=="string",e,"internal-error"),Cd(r,e.name),Cd(a,e.name),bn(typeof m=="boolean",e,"internal-error"),bn(typeof g=="boolean",e,"internal-error"),Cd(s,e.name),Cd(i,e.name),Cd(o,e.name),Cd(l,e.name),Cd(u,e.name),Cd(d,e.name);const N=new bc({uid:h,auth:e,email:a,emailVerified:m,displayName:r,isAnonymous:g,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(N.providerData=b.map(I=>({...I}))),l&&(N._redirectEventId=l),N}static async _fromIdTokenResponse(e,n,r=!1){const a=new Z0;a.updateFromServerResponse(n);const s=new bc({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await R2(s),s}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];bn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?fL(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new Z0;o.updateFromIdToken(r);const l=new bc({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new ZE(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new Map;function mA(t){_A(t instanceof Function,"Expected a class definition");let e=ON.get(t);return e?(_A(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ON.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hL.type="NONE";const QN=hL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t,e,n){return`firebase:${t}:${e}:${n}`}class em{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:s}=this.auth;this.fullUserKey=s2(this.userKey,a.apiKey,s),this.fullPersistenceKey=s2("persistence",a.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await F2(this.auth,{idToken:e}).catch(()=>{});return n?bc._fromGetAccountInfoResponse(this.auth,n,e):null}return bc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new em(mA(QN),e,r);const a=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||mA(QN);const i=s2(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const m=await F2(e,{idToken:d}).catch(()=>{});if(!m)break;h=await bc._fromGetAccountInfoResponse(e,m,d)}else h=bc._fromJSON(e,d);u!==s&&(o=h),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new em(s,e,r):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new em(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yL(e))return"Blackberry";if(wL(e))return"Webos";if(pL(e))return"Safari";if((e.includes("chrome/")||gL(e))&&!e.includes("edge/"))return"Chrome";if(vL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mL(t=Oi()){return/firefox\//i.test(t)}function pL(t=Oi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gL(t=Oi()){return/crios\//i.test(t)}function xL(t=Oi()){return/iemobile/i.test(t)}function vL(t=Oi()){return/android/i.test(t)}function yL(t=Oi()){return/blackberry/i.test(t)}function wL(t=Oi()){return/webos/i.test(t)}function nS(t=Oi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KV(t=Oi()){var e;return nS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function WV(){return lH()&&document.documentMode===10}function bL(t=Oi()){return nS(t)||vL(t)||wL(t)||yL(t)||/windows phone/i.test(t)||xL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t,e=[]){let n;switch(t){case"Browser":n=HN(Oi());break;case"Worker":n=`${HN(Oi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,o)=>{try{const l=e(s);i(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e={}){return LA(t,"GET","/v2/passwordPolicy",xf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=6;class XV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??YV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VN(this),this.idTokenSubscription=new VN(this),this.beforeStateQueue=new $V(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mA(n)),this._initializationPromise=this.queue(async()=>{var r,a,s;if(!this._deleted&&(this.persistenceManager=await em.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await F2(this,{idToken:e}),r=await bc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(vc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(r=l.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await R2(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vc(this.app))return Promise.reject(Jd(this));const n=e?Is(e):null;return n&&bn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&bn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vc(this.app)?Promise.reject(Jd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vc(this.app)?Promise.reject(Jd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JV(this),n=new XV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mA(e)||this._popupRedirectResolver;bn(n,this,"argument-error"),this.redirectPersistenceManager=await em.create(this,[mA(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(bn(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,a);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(vc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&BV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rh(t){return Is(t)}class VN{constructor(e){this.auth=e,this.observer=null,this.addObserver=pH(n=>this.observer=n)}get next(){return bn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ez(t){Hy=t}function EL(t){return Hy.loadJS(t)}function tz(){return Hy.recaptchaEnterpriseScript}function nz(){return Hy.gapiScript}function rz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class az{constructor(){this.enterprise=new sz}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sz{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const iz="recaptcha-enterprise",_L="NO_RECAPTCHA";class oz{constructor(e){this.type=iz,this.auth=Rh(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{PV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new MV(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;PN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(_L)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new az().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{r(this.auth).then(o=>{if(!n&&PN(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=tz();l.length!==0&&(l+=o),EL(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function zN(t,e,n,r=!1,a=!1){const s=new oz(t);let i;if(a)i=_L;else try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function e_(t,e,n,r,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await zN(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await zN(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(t,e){const n=Y5(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),s=n.getOptions();if(vh(s,e??{}))return a;Bc(a,"already-initialized")}return n.initialize({options:e})}function cz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uz(t,e,n){const r=Rh(t);bn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,s=SL(e),{host:i,port:o}=Az(e),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){bn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bn(vh(u,r.config.emulator)&&vh(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Um(i)?(eL(`${s}//${i}${l}`),tL("Auth",!0)):dz()}function SL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Az(t){const e=SL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const s=a[1];return{host:s,port:GN(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:GN(i)}}}function GN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hA("not implemented")}_getIdTokenResponse(e){return hA("not implemented")}_linkToIdToken(e,n){return hA("not implemented")}_getReauthenticationResolver(e){return hA("not implemented")}}async function fz(t,e){return LA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz(t,e){return Qy(t,"POST","/v1/accounts:signInWithPassword",xf(t,e))}async function mz(t,e){return LA(t,"POST","/v1/accounts:sendOobCode",xf(t,e))}async function pz(t,e){return mz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gz(t,e){return Qy(t,"POST","/v1/accounts:signInWithEmailLink",xf(t,e))}async function xz(t,e){return Qy(t,"POST","/v1/accounts:signInWithEmailLink",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends rS{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Wg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e_(e,n,"signInWithPassword",hz);case"emailLink":return gz(e,{email:this._email,oobCode:this._password});default:Bc(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e_(e,r,"signUpPassword",fz);case"emailLink":return xz(e,{idToken:n,email:this._email,oobCode:this._password});default:Bc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tm(t,e){return Qy(t,"POST","/v1/accounts:signInWithIdp",xf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz="http://localhost";class wh extends rS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...s}=n;if(!r||!a)return null;const i=new wh(r,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return tm(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,tm(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,tm(e,n)}buildRequest(){const e={requestUri:vz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kx(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wz(t){const e=tg(ng(t)).link,n=e?tg(ng(e)).deep_link_id:null,r=tg(ng(t)).deep_link_id;return(r?tg(ng(r)).link:null)||r||n||e||t}class aS{constructor(e){const n=tg(ng(e)),r=n.apiKey??null,a=n.oobCode??null,s=yz(n.mode??null);bn(r&&a&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wz(e);try{return new aS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.providerId=Pm.PROVIDER_ID}static credential(e,n){return Wg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=aS.parseLink(n);return bn(r,"argument-error"),Wg._fromEmailAndCode(e,r.code,r.tenantId)}}Pm.PROVIDER_ID="password";Pm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx extends TL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Fx{constructor(){super("facebook.com")}static credential(e){return wh._fromParams({providerId:Dd.PROVIDER_ID,signInMethod:Dd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dd.credentialFromTaggedObject(e)}static credentialFromError(e){return Dd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dd.credential(e.oauthAccessToken)}catch{return null}}}Dd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends Fx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wh._fromParams({providerId:Ld.PROVIDER_ID,signInMethod:Ld.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ld.credentialFromTaggedObject(e)}static credentialFromError(e){return Ld.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ld.credential(n,r)}catch{return null}}}Ld.GOOGLE_SIGN_IN_METHOD="google.com";Ld.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Fx{constructor(){super("github.com")}static credential(e){return wh._fromParams({providerId:Ud.PROVIDER_ID,signInMethod:Ud.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ud.credentialFromTaggedObject(e)}static credentialFromError(e){return Ud.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ud.credential(e.oauthAccessToken)}catch{return null}}}Ud.GITHUB_SIGN_IN_METHOD="github.com";Ud.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Fx{constructor(){super("twitter.com")}static credential(e,n){return wh._fromParams({providerId:Md.PROVIDER_ID,signInMethod:Md.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Md.credentialFromTaggedObject(e)}static credentialFromError(e){return Md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Md.credential(n,r)}catch{return null}}}Md.TWITTER_SIGN_IN_METHOD="twitter.com";Md.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const s=await bc._fromIdTokenResponse(e,r,a),i=qN(r);return new wm({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=qN(r);return new wm({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function qN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2 extends DA{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,D2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new D2(e,n,r,a)}}function BL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?D2._fromErrorAndOperation(t,s,e,r):s})}async function bz(t,e,n=!1){const r=await Kg(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wm._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(t,e,n=!1){const{auth:r}=t;if(vc(r.app))return Promise.reject(Jd(r));const a="reauthenticate";try{const s=await Kg(t,BL(r,a,e,t),n);bn(s.idToken,r,"internal-error");const i=tS(s.idToken);bn(i,r,"internal-error");const{sub:o}=i;return bn(t.uid===o,r,"user-mismatch"),wm._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bc(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e,n=!1){if(vc(t.app))return Promise.reject(Jd(t));const r="signIn",a=await BL(t,r,e),s=await wm._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(s.user),s}async function Ez(t,e){return NL(Rh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(t){const e=Rh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Sz(t,e,n){const r=Rh(t);await e_(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pz)}function Tz(t,e,n){return vc(t.app)?Promise.reject(Jd(t)):Ez(Is(t),Pm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_z(t),r})}function Bz(t,e,n,r){return Is(t).onIdTokenChanged(e,n,r)}function Nz(t,e,n){return Is(t).beforeAuthStateChanged(e,n)}function kz(t,e,n,r){return Is(t).onAuthStateChanged(e,n,r)}function KN(t){return Is(t).signOut()}const L2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(L2,"1"),this.storage.removeItem(L2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=1e3,Fz=10;class IL extends kL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);WV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Fz):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Iz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IL.type="LOCAL";const Rz=IL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL extends kL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FL.type="SESSION";const RL=FL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new Vy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:s}=n.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const o=Array.from(i).map(async u=>u(n.origin,s)),l=await Dz(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=sS("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:a,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(){return window}function Uz(t){wu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(){return typeof wu().WorkerGlobalScope<"u"&&typeof wu().importScripts=="function"}async function Mz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function jz(){return DL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="firebaseLocalStorageDb",Oz=1,U2="firebaseLocalStorage",UL="fbase_key";class Rx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zy(t,e){return t.transaction([U2],e?"readwrite":"readonly").objectStore(U2)}function Qz(){const t=indexedDB.deleteDatabase(LL);return new Rx(t).toPromise()}function t_(){const t=indexedDB.open(LL,Oz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(U2,{keyPath:UL})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(U2)?e(r):(r.close(),await Qz(),e(await t_()))})})}async function WN(t,e,n){const r=zy(t,!0).put({[UL]:e,value:n});return new Rx(r).toPromise()}async function Hz(t,e){const n=zy(t,!1).get(e),r=await new Rx(n).toPromise();return r===void 0?null:r.value}function $N(t,e){const n=zy(t,!0).delete(e);return new Rx(n).toPromise()}const Vz=800,zz=3;class ML{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await t_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vy._getInstance(jz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Mz(),!this.activeServiceWorker)return;this.sender=new Lz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await t_();return await WN(e,L2,"1"),await $N(e,L2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Hz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$N(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=zy(a,!1).getAll();return new Rx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ML.type="LOCAL";const Gz=ML;new Ix(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t,e){return e?mA(e):(bn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS extends rS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Kz(t){return NL(t.auth,new iS(t),t.bypassAuthState)}function Wz(t){const{auth:e,user:n}=t;return bn(n,e,"internal-error"),Cz(n,new iS(t),t.bypassAuthState)}async function $z(t){const{auth:e,user:n}=t;return bn(n,e,"internal-error"),bz(n,new iS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n,r,a,s=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kz;case"linkViaPopup":case"linkViaRedirect":return $z;case"reauthViaPopup":case"reauthViaRedirect":return Wz;default:Bc(this.auth,"internal-error")}}resolve(e){_A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=new Ix(2e3,1e4);class K0 extends PL{constructor(e,n,r,a,s){super(e,n,a,s),this.provider=r,this.authWindow=null,this.pollId=null,K0.currentPopupAction&&K0.currentPopupAction.cancel(),K0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bn(e,this.auth,"internal-error"),e}async onExecution(){_A(this.filter.length===1,"Popup operations only handle one event");const e=sS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,K0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jz.get())};e()}}K0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="pendingRedirect",i2=new Map;class Xz extends PL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=i2.get(this.auth._key());if(!e){try{const r=await Zz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}i2.set(this.auth._key(),e)}return this.bypassAuthState||i2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zz(t,e){const n=nG(e),r=tG(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function eG(t,e){i2.set(t._key(),e)}function tG(t){return mA(t._redirectPersistence)}function nG(t){return s2(Yz,t.config.apiKey,t.name)}async function rG(t,e,n=!1){if(vc(t.app))return Promise.reject(Jd(t));const r=Rh(t),a=qz(r,e),i=await new Xz(r,a,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=600*1e3;class sG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jL(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yu(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aG&&this.cachedEventUids.clear(),this.cachedEventUids.has(JN(e))}saveEventToCache(e){this.cachedEventUids.add(JN(e)),this.lastProcessedEventTime=Date.now()}}function JN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oG(t,e={}){return LA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cG=/^https?/;async function uG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oG(t);for(const n of e)try{if(AG(n))return}catch{}Bc(t,"unauthorized-domain")}function AG(t){const e=XE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!cG.test(n))return!1;if(lG.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=new Ix(3e4,6e4);function YN(){const t=wu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fG(t){return new Promise((e,n)=>{var a,s,i;function r(){YN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YN(),n(yu(t,"network-request-failed"))},timeout:dG.get()})}if((s=(a=wu().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=wu().gapi)!=null&&i.load)r();else{const o=rz("iframefcb");return wu()[o]=()=>{gapi.load?r():n(yu(t,"network-request-failed"))},EL(`${nz()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw o2=null,e})}let o2=null;function hG(t){return o2=o2||fG(t),o2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG=new Ix(5e3,15e3),pG="__/auth/iframe",gG="emulator/auth/iframe",xG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yG(t){const e=t.config;bn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?eS(e,gG):`https://${t.config.authDomain}/${pG}`,r={apiKey:e.apiKey,appName:t.name,v:Mm},a=vG.get(t.config.apiHost);a&&(r.eid=a);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${kx(r).slice(1)}`}async function wG(t){const e=await hG(t),n=wu().gapi;return bn(n,t,"internal-error"),e.open({where:document.body,url:yG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xG,dontclear:!0},r=>new Promise(async(a,s)=>{await r.restyle({setHideOnLeave:!1});const i=yu(t,"network-request-failed"),o=wu().setTimeout(()=>{s(i)},mG.get());function l(){wu().clearTimeout(o),a(r)}r.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CG=500,EG=600,_G="_blank",SG="http://localhost";class XN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TG(t,e,n,r=CG,a=EG){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...bG,width:r.toString(),height:a.toString(),top:s,left:i},u=Oi().toLowerCase();n&&(o=gL(u)?_G:n),mL(u)&&(e=e||SG,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(KV(u)&&o!=="_self")return BG(e||"",o),new XN(null);const h=window.open(e||"",o,d);bn(h,t,"popup-blocked");try{h.focus()}catch{}return new XN(h)}function BG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG="__/auth/handler",kG="emulator/auth/handler",IG=encodeURIComponent("fac");async function ZN(t,e,n,r,a,s){bn(t.config.authDomain,t,"auth-domain-config-required"),bn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mm,eventId:a};if(e instanceof TL){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",mH(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Fx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${IG}=${encodeURIComponent(l)}`:"";return`${FG(t)}?${kx(o).slice(1)}${u}`}function FG({config:t}){return t.emulator?eS(t,kG):`https://${t.authDomain}/${NG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="webStorageSupport";class RG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RL,this._completeRedirectFn=rG,this._overrideRedirectResult=eG}async _openPopup(e,n,r,a){var i;_A((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await ZN(e,n,r,XE(),a);return TG(e,s,sS())}async _openRedirect(e,n,r,a){await this._originValidation(e);const s=await ZN(e,n,r,XE(),a);return Uz(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:s}=this.eventManagers[n];return a?Promise.resolve(a):(_A(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wG(e),r=new sG(e);return n.register("authEvent",a=>(bn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gC,{type:gC},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[gC];s!==void 0&&n(!!s),Bc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bL()||pL()||nS()}}const DG=RG;var ek="@firebase/auth",tk="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MG(t){ym(new yh("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;bn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CL(t)},u=new ZV(r,a,s,l);return cz(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ym(new yh("auth-internal",e=>{const n=Rh(e.getProvider("auth").getImmediate());return(r=>new LG(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$d(ek,tk,UG(t)),$d(ek,tk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=300,jG=ZD("authIdTokenMaxAge")||PG;let nk=null;const OG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jG)return;const a=n==null?void 0:n.token;nk!==a&&(nk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function OL(t=aL()){const e=Y5(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lz(t,{popupRedirectResolver:DG,persistence:[Gz,Rz,RL]}),r=ZD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=OG(s.toString());Nz(n,i,()=>i(n.currentUser)),Bz(n,o=>i(o))}}const a=YD("auth");return a&&uz(n,`http://${a}`),n}function QG(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ez({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const s=yu("internal-error");s.customData=a,n(s)},r.type="text/javascript",r.charset="UTF-8",QG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MG("Browser");var HG="firebase",VG="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$d(HG,VG,"app");var rk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yd,QL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,B){function T(){}T.prototype=B.prototype,_.D=B.prototype,_.prototype=new T,_.prototype.constructor=_,_.C=function(O,R,L){for(var Q=Array(arguments.length-2),z=2;z<arguments.length;z++)Q[z-2]=arguments[z];return B.prototype[R].apply(O,Q)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,B,T){T||(T=0);var O=Array(16);if(typeof B=="string")for(var R=0;16>R;++R)O[R]=B.charCodeAt(T++)|B.charCodeAt(T++)<<8|B.charCodeAt(T++)<<16|B.charCodeAt(T++)<<24;else for(R=0;16>R;++R)O[R]=B[T++]|B[T++]<<8|B[T++]<<16|B[T++]<<24;B=_.g[0],T=_.g[1],R=_.g[2];var L=_.g[3],Q=B+(L^T&(R^L))+O[0]+3614090360&4294967295;B=T+(Q<<7&4294967295|Q>>>25),Q=L+(R^B&(T^R))+O[1]+3905402710&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=R+(T^L&(B^T))+O[2]+606105819&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^R&(L^B))+O[3]+3250441966&4294967295,T=R+(Q<<22&4294967295|Q>>>10),Q=B+(L^T&(R^L))+O[4]+4118548399&4294967295,B=T+(Q<<7&4294967295|Q>>>25),Q=L+(R^B&(T^R))+O[5]+1200080426&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=R+(T^L&(B^T))+O[6]+2821735955&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^R&(L^B))+O[7]+4249261313&4294967295,T=R+(Q<<22&4294967295|Q>>>10),Q=B+(L^T&(R^L))+O[8]+1770035416&4294967295,B=T+(Q<<7&4294967295|Q>>>25),Q=L+(R^B&(T^R))+O[9]+2336552879&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=R+(T^L&(B^T))+O[10]+4294925233&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^R&(L^B))+O[11]+2304563134&4294967295,T=R+(Q<<22&4294967295|Q>>>10),Q=B+(L^T&(R^L))+O[12]+1804603682&4294967295,B=T+(Q<<7&4294967295|Q>>>25),Q=L+(R^B&(T^R))+O[13]+4254626195&4294967295,L=B+(Q<<12&4294967295|Q>>>20),Q=R+(T^L&(B^T))+O[14]+2792965006&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=T+(B^R&(L^B))+O[15]+1236535329&4294967295,T=R+(Q<<22&4294967295|Q>>>10),Q=B+(R^L&(T^R))+O[1]+4129170786&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^R&(B^T))+O[6]+3225465664&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=R+(B^T&(L^B))+O[11]+643717713&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(R^L))+O[0]+3921069994&4294967295,T=R+(Q<<20&4294967295|Q>>>12),Q=B+(R^L&(T^R))+O[5]+3593408605&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^R&(B^T))+O[10]+38016083&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=R+(B^T&(L^B))+O[15]+3634488961&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(R^L))+O[4]+3889429448&4294967295,T=R+(Q<<20&4294967295|Q>>>12),Q=B+(R^L&(T^R))+O[9]+568446438&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^R&(B^T))+O[14]+3275163606&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=R+(B^T&(L^B))+O[3]+4107603335&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(R^L))+O[8]+1163531501&4294967295,T=R+(Q<<20&4294967295|Q>>>12),Q=B+(R^L&(T^R))+O[13]+2850285829&4294967295,B=T+(Q<<5&4294967295|Q>>>27),Q=L+(T^R&(B^T))+O[2]+4243563512&4294967295,L=B+(Q<<9&4294967295|Q>>>23),Q=R+(B^T&(L^B))+O[7]+1735328473&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=T+(L^B&(R^L))+O[12]+2368359562&4294967295,T=R+(Q<<20&4294967295|Q>>>12),Q=B+(T^R^L)+O[5]+4294588738&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^R)+O[8]+2272392833&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=R+(L^B^T)+O[11]+1839030562&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=T+(R^L^B)+O[14]+4259657740&4294967295,T=R+(Q<<23&4294967295|Q>>>9),Q=B+(T^R^L)+O[1]+2763975236&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^R)+O[4]+1272893353&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=R+(L^B^T)+O[7]+4139469664&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=T+(R^L^B)+O[10]+3200236656&4294967295,T=R+(Q<<23&4294967295|Q>>>9),Q=B+(T^R^L)+O[13]+681279174&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^R)+O[0]+3936430074&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=R+(L^B^T)+O[3]+3572445317&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=T+(R^L^B)+O[6]+76029189&4294967295,T=R+(Q<<23&4294967295|Q>>>9),Q=B+(T^R^L)+O[9]+3654602809&4294967295,B=T+(Q<<4&4294967295|Q>>>28),Q=L+(B^T^R)+O[12]+3873151461&4294967295,L=B+(Q<<11&4294967295|Q>>>21),Q=R+(L^B^T)+O[15]+530742520&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=T+(R^L^B)+O[2]+3299628645&4294967295,T=R+(Q<<23&4294967295|Q>>>9),Q=B+(R^(T|~L))+O[0]+4096336452&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~R))+O[7]+1126891415&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=R+(B^(L|~T))+O[14]+2878612391&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(R|~B))+O[5]+4237533241&4294967295,T=R+(Q<<21&4294967295|Q>>>11),Q=B+(R^(T|~L))+O[12]+1700485571&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~R))+O[3]+2399980690&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=R+(B^(L|~T))+O[10]+4293915773&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(R|~B))+O[1]+2240044497&4294967295,T=R+(Q<<21&4294967295|Q>>>11),Q=B+(R^(T|~L))+O[8]+1873313359&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~R))+O[15]+4264355552&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=R+(B^(L|~T))+O[6]+2734768916&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(R|~B))+O[13]+1309151649&4294967295,T=R+(Q<<21&4294967295|Q>>>11),Q=B+(R^(T|~L))+O[4]+4149444226&4294967295,B=T+(Q<<6&4294967295|Q>>>26),Q=L+(T^(B|~R))+O[11]+3174756917&4294967295,L=B+(Q<<10&4294967295|Q>>>22),Q=R+(B^(L|~T))+O[2]+718787259&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=T+(L^(R|~B))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+B&4294967295,_.g[1]=_.g[1]+(R+(Q<<21&4294967295|Q>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+L&4294967295}r.prototype.u=function(_,B){B===void 0&&(B=_.length);for(var T=B-this.blockSize,O=this.B,R=this.h,L=0;L<B;){if(R==0)for(;L<=T;)a(this,_,L),L+=this.blockSize;if(typeof _=="string"){for(;L<B;)if(O[R++]=_.charCodeAt(L++),R==this.blockSize){a(this,O),R=0;break}}else for(;L<B;)if(O[R++]=_[L++],R==this.blockSize){a(this,O),R=0;break}}this.h=R,this.o+=B},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var B=1;B<_.length-8;++B)_[B]=0;var T=8*this.o;for(B=_.length-8;B<_.length;++B)_[B]=T&255,T/=256;for(this.u(_),_=Array(16),B=T=0;4>B;++B)for(var O=0;32>O;O+=8)_[T++]=this.g[B]>>>O&255;return _};function s(_,B){var T=o;return Object.prototype.hasOwnProperty.call(T,_)?T[_]:T[_]=B(_)}function i(_,B){this.h=B;for(var T=[],O=!0,R=_.length-1;0<=R;R--){var L=_[R]|0;O&&L==B||(T[R]=L,O=!1)}this.g=T}var o={};function l(_){return-128<=_&&128>_?s(_,function(B){return new i([B|0],0>B?-1:0)}):new i([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return h;if(0>_)return E(u(-_));for(var B=[],T=1,O=0;_>=T;O++)B[O]=_/T|0,T*=4294967296;return new i(B,0)}function d(_,B){if(_.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(_.charAt(0)=="-")return E(d(_.substring(1),B));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(B,8)),O=h,R=0;R<_.length;R+=8){var L=Math.min(8,_.length-R),Q=parseInt(_.substring(R,R+L),B);8>L?(L=u(Math.pow(B,L)),O=O.j(L).add(u(Q))):(O=O.j(T),O=O.add(u(Q)))}return O}var h=l(0),m=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(w(this))return-E(this).m();for(var _=0,B=1,T=0;T<this.g.length;T++){var O=this.i(T);_+=(0<=O?O:4294967296+O)*B,B*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b(this))return"0";if(w(this))return"-"+E(this).toString(_);for(var B=u(Math.pow(_,6)),T=this,O="";;){var R=U(T,B).g;T=N(T,R.j(B));var L=((0<T.g.length?T.g[0]:T.h)>>>0).toString(_);if(T=R,b(T))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function b(_){if(_.h!=0)return!1;for(var B=0;B<_.g.length;B++)if(_.g[B]!=0)return!1;return!0}function w(_){return _.h==-1}t.l=function(_){return _=N(this,_),w(_)?-1:b(_)?0:1};function E(_){for(var B=_.g.length,T=[],O=0;O<B;O++)T[O]=~_.g[O];return new i(T,~_.h).add(m)}t.abs=function(){return w(this)?E(this):this},t.add=function(_){for(var B=Math.max(this.g.length,_.g.length),T=[],O=0,R=0;R<=B;R++){var L=O+(this.i(R)&65535)+(_.i(R)&65535),Q=(L>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);O=Q>>>16,L&=65535,Q&=65535,T[R]=Q<<16|L}return new i(T,T[T.length-1]&-2147483648?-1:0)};function N(_,B){return _.add(E(B))}t.j=function(_){if(b(this)||b(_))return h;if(w(this))return w(_)?E(this).j(E(_)):E(E(this).j(_));if(w(_))return E(this.j(E(_)));if(0>this.l(g)&&0>_.l(g))return u(this.m()*_.m());for(var B=this.g.length+_.g.length,T=[],O=0;O<2*B;O++)T[O]=0;for(O=0;O<this.g.length;O++)for(var R=0;R<_.g.length;R++){var L=this.i(O)>>>16,Q=this.i(O)&65535,z=_.i(R)>>>16,ie=_.i(R)&65535;T[2*O+2*R]+=Q*ie,I(T,2*O+2*R),T[2*O+2*R+1]+=L*ie,I(T,2*O+2*R+1),T[2*O+2*R+1]+=Q*z,I(T,2*O+2*R+1),T[2*O+2*R+2]+=L*z,I(T,2*O+2*R+2)}for(O=0;O<B;O++)T[O]=T[2*O+1]<<16|T[2*O];for(O=B;O<2*B;O++)T[O]=0;return new i(T,0)};function I(_,B){for(;(_[B]&65535)!=_[B];)_[B+1]+=_[B]>>>16,_[B]&=65535,B++}function k(_,B){this.g=_,this.h=B}function U(_,B){if(b(B))throw Error("division by zero");if(b(_))return new k(h,h);if(w(_))return B=U(E(_),B),new k(E(B.g),E(B.h));if(w(B))return B=U(_,E(B)),new k(E(B.g),B.h);if(30<_.g.length){if(w(_)||w(B))throw Error("slowDivide_ only works with positive integers.");for(var T=m,O=B;0>=O.l(_);)T=P(T),O=P(O);var R=D(T,1),L=D(O,1);for(O=D(O,2),T=D(T,2);!b(O);){var Q=L.add(O);0>=Q.l(_)&&(R=R.add(T),L=Q),O=D(O,1),T=D(T,1)}return B=N(_,R.j(B)),new k(R,B)}for(R=h;0<=_.l(B);){for(T=Math.max(1,Math.floor(_.m()/B.m())),O=Math.ceil(Math.log(T)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=u(T),Q=L.j(B);w(Q)||0<Q.l(_);)T-=O,L=u(T),Q=L.j(B);b(L)&&(L=m),R=R.add(L),_=N(_,Q)}return new k(R,_)}t.A=function(_){return U(this,_).h},t.and=function(_){for(var B=Math.max(this.g.length,_.g.length),T=[],O=0;O<B;O++)T[O]=this.i(O)&_.i(O);return new i(T,this.h&_.h)},t.or=function(_){for(var B=Math.max(this.g.length,_.g.length),T=[],O=0;O<B;O++)T[O]=this.i(O)|_.i(O);return new i(T,this.h|_.h)},t.xor=function(_){for(var B=Math.max(this.g.length,_.g.length),T=[],O=0;O<B;O++)T[O]=this.i(O)^_.i(O);return new i(T,this.h^_.h)};function P(_){for(var B=_.g.length+1,T=[],O=0;O<B;O++)T[O]=_.i(O)<<1|_.i(O-1)>>>31;return new i(T,_.h)}function D(_,B){var T=B>>5;B%=32;for(var O=_.g.length-T,R=[],L=0;L<O;L++)R[L]=0<B?_.i(L+T)>>>B|_.i(L+T+1)<<32-B:_.i(L+T);return new i(R,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QL=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Yd=i}).apply(typeof rk<"u"?rk:typeof self<"u"?self:typeof window<"u"?window:{});var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HL,rg,VL,l2,n_,zL,GL,qL;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,W,re){return S==Array.prototype||S==Object.prototype||(S[W]=re.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof ev=="object"&&ev];for(var W=0;W<S.length;++W){var re=S[W];if(re&&re.Math==Math)return re}throw Error("Cannot find global object")}var r=n(this);function a(S,W){if(W)e:{var re=r;S=S.split(".");for(var pe=0;pe<S.length-1;pe++){var Oe=S[pe];if(!(Oe in re))break e;re=re[Oe]}S=S[S.length-1],pe=re[S],W=W(pe),W!=pe&&W!=null&&e(re,S,{configurable:!0,writable:!0,value:W})}}function s(S,W){S instanceof String&&(S+="");var re=0,pe=!1,Oe={next:function(){if(!pe&&re<S.length){var Xe=re++;return{value:W(Xe,S[Xe]),done:!1}}return pe=!0,{done:!0,value:void 0}}};return Oe[Symbol.iterator]=function(){return Oe},Oe}a("Array.prototype.values",function(S){return S||function(){return s(this,function(W,re){return re})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(S){var W=typeof S;return W=W!="object"?W:S?Array.isArray(S)?"array":W:"null",W=="array"||W=="object"&&typeof S.length=="number"}function u(S){var W=typeof S;return W=="object"&&S!=null||W=="function"}function d(S,W,re){return S.call.apply(S.bind,arguments)}function h(S,W,re){if(!S)throw Error();if(2<arguments.length){var pe=Array.prototype.slice.call(arguments,2);return function(){var Oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Oe,pe),S.apply(W,Oe)}}return function(){return S.apply(W,arguments)}}function m(S,W,re){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(S,W){var re=Array.prototype.slice.call(arguments,1);return function(){var pe=re.slice();return pe.push.apply(pe,arguments),S.apply(this,pe)}}function b(S,W){function re(){}re.prototype=W.prototype,S.aa=W.prototype,S.prototype=new re,S.prototype.constructor=S,S.Qb=function(pe,Oe,Xe){for(var St=Array(arguments.length-2),fn=2;fn<arguments.length;fn++)St[fn-2]=arguments[fn];return W.prototype[Oe].apply(pe,St)}}function w(S){const W=S.length;if(0<W){const re=Array(W);for(let pe=0;pe<W;pe++)re[pe]=S[pe];return re}return[]}function E(S,W){for(let re=1;re<arguments.length;re++){const pe=arguments[re];if(l(pe)){const Oe=S.length||0,Xe=pe.length||0;S.length=Oe+Xe;for(let St=0;St<Xe;St++)S[Oe+St]=pe[St]}else S.push(pe)}}class N{constructor(W,re){this.i=W,this.j=re,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function I(S){return/^[\s\xa0]*$/.test(S)}function k(){var S=o.navigator;return S&&(S=S.userAgent)?S:""}function U(S){return U[" "](S),S}U[" "]=function(){};var P=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function D(S,W,re){for(const pe in S)W.call(re,S[pe],pe,S)}function _(S,W){for(const re in S)W.call(void 0,S[re],re,S)}function B(S){const W={};for(const re in S)W[re]=S[re];return W}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(S,W){let re,pe;for(let Oe=1;Oe<arguments.length;Oe++){pe=arguments[Oe];for(re in pe)S[re]=pe[re];for(let Xe=0;Xe<T.length;Xe++)re=T[Xe],Object.prototype.hasOwnProperty.call(pe,re)&&(S[re]=pe[re])}}function R(S){var W=1;S=S.split(":");const re=[];for(;0<W&&S.length;)re.push(S.shift()),W--;return S.length&&re.push(S.join(":")),re}function L(S){o.setTimeout(()=>{throw S},0)}function Q(){var S=q;let W=null;return S.g&&(W=S.g,S.g=S.g.next,S.g||(S.h=null),W.next=null),W}class z{constructor(){this.h=this.g=null}add(W,re){const pe=ie.get();pe.set(W,re),this.h?this.h.next=pe:this.g=pe,this.h=pe}}var ie=new N(()=>new J,S=>S.reset());class J{constructor(){this.next=this.g=this.h=null}set(W,re){this.h=W,this.g=re,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ae=!1,q=new z,Y=()=>{const S=o.Promise.resolve(void 0);ee=()=>{S.then(Ae)}};var Ae=()=>{for(var S;S=Q();){try{S.h.call(S.g)}catch(re){L(re)}var W=ie;W.j(S),100>W.h&&(W.h++,S.next=W.g,W.g=S)}ae=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(S,W){this.type=S,this.g=this.target=W,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,W=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const re=()=>{};o.addEventListener("test",re,W),o.removeEventListener("test",re,W)}catch{}return S}();function te(S,W){if(K.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var re=this.type=S.type,pe=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=W,W=S.relatedTarget){if(P){e:{try{U(W.nodeName);var Oe=!0;break e}catch{}Oe=!1}Oe||(W=null)}}else re=="mouseover"?W=S.fromElement:re=="mouseout"&&(W=S.toElement);this.relatedTarget=W,pe?(this.clientX=pe.clientX!==void 0?pe.clientX:pe.pageX,this.clientY=pe.clientY!==void 0?pe.clientY:pe.pageY,this.screenX=pe.screenX||0,this.screenY=pe.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:le[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&te.aa.h.call(this)}}b(te,K);var le={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function _e(S,W,re,pe,Oe){this.listener=S,this.proxy=null,this.src=W,this.type=re,this.capture=!!pe,this.ha=Oe,this.key=++Ce,this.da=this.fa=!1}function Ie(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function xe(S){this.src=S,this.g={},this.h=0}xe.prototype.add=function(S,W,re,pe,Oe){var Xe=S.toString();S=this.g[Xe],S||(S=this.g[Xe]=[],this.h++);var St=Re(S,W,pe,Oe);return-1<St?(W=S[St],re||(W.fa=!1)):(W=new _e(W,this.src,Xe,!!pe,Oe),W.fa=re,S.push(W)),W};function se(S,W){var re=W.type;if(re in S.g){var pe=S.g[re],Oe=Array.prototype.indexOf.call(pe,W,void 0),Xe;(Xe=0<=Oe)&&Array.prototype.splice.call(pe,Oe,1),Xe&&(Ie(W),S.g[re].length==0&&(delete S.g[re],S.h--))}}function Re(S,W,re,pe){for(var Oe=0;Oe<S.length;++Oe){var Xe=S[Oe];if(!Xe.da&&Xe.listener==W&&Xe.capture==!!re&&Xe.ha==pe)return Oe}return-1}var et="closure_lm_"+(1e6*Math.random()|0),De={};function we(S,W,re,pe,Oe){if(Array.isArray(W)){for(var Xe=0;Xe<W.length;Xe++)we(S,W[Xe],re,pe,Oe);return null}return re=Wt(re),S&&S[ye]?S.K(W,re,u(pe)?!!pe.capture:!1,Oe):ze(S,W,re,!1,pe,Oe)}function ze(S,W,re,pe,Oe,Xe){if(!W)throw Error("Invalid event type");var St=u(Oe)?!!Oe.capture:!!Oe,fn=Nt(S);if(fn||(S[et]=fn=new xe(S)),re=fn.add(W,re,pe,St,Xe),re.proxy)return re;if(pe=nt(),re.proxy=pe,pe.src=S,pe.listener=re,S.addEventListener)X||(Oe=St),Oe===void 0&&(Oe=!1),S.addEventListener(W.toString(),pe,Oe);else if(S.attachEvent)S.attachEvent(Ct(W.toString()),pe);else if(S.addListener&&S.removeListener)S.addListener(pe);else throw Error("addEventListener and attachEvent are unavailable.");return re}function nt(){function S(re){return W.call(S.src,S.listener,re)}const W=ut;return S}function it(S,W,re,pe,Oe){if(Array.isArray(W))for(var Xe=0;Xe<W.length;Xe++)it(S,W[Xe],re,pe,Oe);else pe=u(pe)?!!pe.capture:!!pe,re=Wt(re),S&&S[ye]?(S=S.i,W=String(W).toString(),W in S.g&&(Xe=S.g[W],re=Re(Xe,re,pe,Oe),-1<re&&(Ie(Xe[re]),Array.prototype.splice.call(Xe,re,1),Xe.length==0&&(delete S.g[W],S.h--)))):S&&(S=Nt(S))&&(W=S.g[W.toString()],S=-1,W&&(S=Re(W,re,pe,Oe)),(re=-1<S?W[S]:null)&&dt(re))}function dt(S){if(typeof S!="number"&&S&&!S.da){var W=S.src;if(W&&W[ye])se(W.i,S);else{var re=S.type,pe=S.proxy;W.removeEventListener?W.removeEventListener(re,pe,S.capture):W.detachEvent?W.detachEvent(Ct(re),pe):W.addListener&&W.removeListener&&W.removeListener(pe),(re=Nt(W))?(se(re,S),re.h==0&&(re.src=null,W[et]=null)):Ie(S)}}}function Ct(S){return S in De?De[S]:De[S]="on"+S}function ut(S,W){if(S.da)S=!0;else{W=new te(W,this);var re=S.listener,pe=S.ha||S.src;S.fa&&dt(S),S=re.call(pe,W)}return S}function Nt(S){return S=S[et],S instanceof xe?S:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wt(S){return typeof S=="function"?S:(S[It]||(S[It]=function(W){return S.handleEvent(W)}),S[It])}function Ut(){j.call(this),this.i=new xe(this),this.M=this,this.F=null}b(Ut,j),Ut.prototype[ye]=!0,Ut.prototype.removeEventListener=function(S,W,re,pe){it(this,S,W,re,pe)};function Ht(S,W){var re,pe=S.F;if(pe)for(re=[];pe;pe=pe.F)re.push(pe);if(S=S.M,pe=W.type||W,typeof W=="string")W=new K(W,S);else if(W instanceof K)W.target=W.target||S;else{var Oe=W;W=new K(pe,S),O(W,Oe)}if(Oe=!0,re)for(var Xe=re.length-1;0<=Xe;Xe--){var St=W.g=re[Xe];Oe=Yt(St,pe,!0,W)&&Oe}if(St=W.g=S,Oe=Yt(St,pe,!0,W)&&Oe,Oe=Yt(St,pe,!1,W)&&Oe,re)for(Xe=0;Xe<re.length;Xe++)St=W.g=re[Xe],Oe=Yt(St,pe,!1,W)&&Oe}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var S=this.i,W;for(W in S.g){for(var re=S.g[W],pe=0;pe<re.length;pe++)Ie(re[pe]);delete S.g[W],S.h--}}this.F=null},Ut.prototype.K=function(S,W,re,pe){return this.i.add(String(S),W,!1,re,pe)},Ut.prototype.L=function(S,W,re,pe){return this.i.add(String(S),W,!0,re,pe)};function Yt(S,W,re,pe){if(W=S.i.g[String(W)],!W)return!0;W=W.concat();for(var Oe=!0,Xe=0;Xe<W.length;++Xe){var St=W[Xe];if(St&&!St.da&&St.capture==re){var fn=St.listener,Wn=St.ha||St.src;St.fa&&se(S.i,St),Oe=fn.call(Wn,pe)!==!1&&Oe}}return Oe&&!pe.defaultPrevented}function Mt(S,W,re){if(typeof S=="function")re&&(S=m(S,re));else if(S&&typeof S.handleEvent=="function")S=m(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:o.setTimeout(S,W||0)}function kt(S){S.g=Mt(()=>{S.g=null,S.i&&(S.i=!1,kt(S))},S.l);const W=S.h;S.h=null,S.m.apply(null,W)}class xt extends j{constructor(W,re){super(),this.m=W,this.l=re,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xn(S){j.call(this),this.h=S,this.g={}}b(xn,j);var $t=[];function ir(S){D(S.g,function(W,re){this.g.hasOwnProperty(re)&&dt(W)},S),S.g={}}xn.prototype.N=function(){xn.aa.N.call(this),ir(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=o.JSON.stringify,Fn=o.JSON.parse,Tr=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function Bn(){}Bn.prototype.h=null;function rs(S){return S.h||(S.h=S.i())}function Xn(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ua(){K.call(this,"d")}b(ua,K);function Dn(){K.call(this,"c")}b(Dn,K);var en={},On=null;function as(){return On=On||new Ut}en.La="serverreachability";function Vr(S){K.call(this,en.La,S)}b(Vr,K);function pa(S){const W=as();Ht(W,new Vr(W))}en.STAT_EVENT="statevent";function ws(S,W){K.call(this,en.STAT_EVENT,S),this.stat=W}b(ws,K);function Qt(S){const W=as();Ht(W,new ws(W,S))}en.Ma="timingevent";function or(S,W){K.call(this,en.Ma,S),this.size=W}b(or,K);function Zn(S,W){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},W)}function Br(){this.g=!0}Br.prototype.xa=function(){this.g=!1};function Rr(S,W,re,pe,Oe,Xe){S.info(function(){if(S.g)if(Xe)for(var St="",fn=Xe.split("&"),Wn=0;Wn<fn.length;Wn++){var Sn=fn[Wn].split("=");if(1<Sn.length){var wr=Sn[0];Sn=Sn[1];var Nr=wr.split("_");St=2<=Nr.length&&Nr[1]=="type"?St+(wr+"="+Sn+"&"):St+(wr+"=redacted&")}}else St=null;else St=Xe;return"XMLHTTP REQ ("+pe+") [attempt "+Oe+"]: "+W+`
`+re+`
`+St})}function zr(S,W,re,pe,Oe,Xe,St){S.info(function(){return"XMLHTTP RESP ("+pe+") [ attempt "+Oe+"]: "+W+`
`+re+`
`+Xe+" "+St})}function de(S,W,re,pe){S.info(function(){return"XMLHTTP TEXT ("+W+"): "+be(S,re)+(pe?" "+pe:"")})}function Be(S,W){S.info(function(){return"TIMEOUT: "+W})}Br.prototype.info=function(){};function be(S,W){if(!S.g)return W;if(!W)return null;try{var re=JSON.parse(W);if(re){for(S=0;S<re.length;S++)if(Array.isArray(re[S])){var pe=re[S];if(!(2>pe.length)){var Oe=pe[1];if(Array.isArray(Oe)&&!(1>Oe.length)){var Xe=Oe[0];if(Xe!="noop"&&Xe!="stop"&&Xe!="close")for(var St=1;St<Oe.length;St++)Oe[St]=""}}}}return mn(re)}catch{return W}}var Ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Se={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ne;function qe(){}b(qe,Bn),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},Ne=new qe;function tt(S,W,re,pe){this.j=S,this.i=W,this.l=re,this.R=pe||1,this.U=new xn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var We={},Ye={};function yt(S,W,re){S.L=1,S.v=il(Es(W)),S.m=re,S.P=!0,Bt(S,null)}function Bt(S,W){S.F=Date.now(),Ft(S),S.A=Es(S.v);var re=S.A,pe=S.R;Array.isArray(pe)||(pe=[String(pe)]),dn(re.i,"t",pe),S.C=0,re=S.j.J,S.h=new Qe,S.g=ue(S.j,re?W:null,!S.m),0<S.O&&(S.M=new xt(m(S.Y,S,S.g),S.O)),W=S.U,re=S.g,pe=S.ca;var Oe="readystatechange";Array.isArray(Oe)||(Oe&&($t[0]=Oe.toString()),Oe=$t);for(var Xe=0;Xe<Oe.length;Xe++){var St=we(re,Oe[Xe],pe||W.handleEvent,!1,W.h||W);if(!St)break;W.g[St.key]=St}W=S.H?B(S.H):{},S.m?(S.u||(S.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,W)):(S.u="GET",S.g.ea(S.A,S.u,null,W)),pa(),Rr(S.i,S.u,S.A,S.l,S.R,S.m)}tt.prototype.ca=function(S){S=S.target;const W=this.M;W&&Na(S)==3?W.j():this.Y(S)},tt.prototype.Y=function(S){try{if(S==this.g)e:{const Nr=Na(this.g);var W=this.g.Ba();const oo=this.g.Z();if(!(3>Nr)&&(Nr!=3||this.g&&(this.h.h||this.g.oa()||qA(this.g)))){this.J||Nr!=4||W==7||(W==8||0>=oo?pa(3):pa(2)),Ln(this);var re=this.g.Z();this.X=re;t:if(Pt(this)){var pe=qA(this.g);S="";var Oe=pe.length,Xe=Na(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),Un(this);var St="";break t}this.h.i=new o.TextDecoder}for(W=0;W<Oe;W++)this.h.h=!0,S+=this.h.i.decode(pe[W],{stream:!(Xe&&W==Oe-1)});pe.length=0,this.h.g+=S,this.C=0,St=this.h.g}else St=this.g.oa();if(this.o=re==200,zr(this.i,this.u,this.A,this.l,this.R,Nr,re),this.o){if(this.T&&!this.K){t:{if(this.g){var fn,Wn=this.g;if((fn=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(fn)){var Sn=fn;break t}}Sn=null}if(re=Sn)de(this.i,this.l,re,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,re);else{this.o=!1,this.s=3,Qt(12),Qn(this),Un(this);break e}}if(this.P){re=!0;let ga;for(;!this.J&&this.C<St.length;)if(ga=Tt(this,St),ga==Ye){Nr==4&&(this.s=4,Qt(14),re=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(ga==We){this.s=4,Qt(15),de(this.i,this.l,St,"[Invalid Chunk]"),re=!1;break}else de(this.i,this.l,ga,null),Sa(this,ga);if(Pt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nr!=4||St.length!=0||this.h.h||(this.s=1,Qt(16),re=!1),this.o=this.o&&re,!re)de(this.i,this.l,St,"[Invalid Chunked Response]"),Qn(this),Un(this);else if(0<St.length&&!this.W){this.W=!0;var wr=this.j;wr.g==this&&wr.ba&&!wr.M&&(wr.j.info("Great, no buffering proxy detected. Bytes received: "+St.length),dl(wr),wr.M=!0,Qt(11))}}else de(this.i,this.l,St,null),Sa(this,St);Nr==4&&Qn(this),this.o&&!this.J&&(Nr==4?fl(this.j,this):(this.o=!1,Ft(this)))}else cl(this.g),re==400&&0<St.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Qn(this),Un(this)}}}catch{}finally{}};function Pt(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Tt(S,W){var re=S.C,pe=W.indexOf(`
`,re);return pe==-1?Ye:(re=Number(W.substring(re,pe)),isNaN(re)?We:(pe+=1,pe+re>W.length?Ye:(W=W.slice(pe,pe+re),S.C=pe+re,W)))}tt.prototype.cancel=function(){this.J=!0,Qn(this)};function Ft(S){S.S=Date.now()+S.I,un(S,S.I)}function un(S,W){if(S.B!=null)throw Error("WatchDog timer not null");S.B=Zn(m(S.ba,S),W)}function Ln(S){S.B&&(o.clearTimeout(S.B),S.B=null)}tt.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Be(this.i,this.A),this.L!=2&&(pa(),Qt(17)),Qn(this),this.s=2,Un(this)):un(this,this.S-S)};function Un(S){S.j.G==0||S.J||fl(S.j,S)}function Qn(S){Ln(S);var W=S.M;W&&typeof W.ma=="function"&&W.ma(),S.M=null,ir(S.U),S.g&&(W=S.g,S.g=null,W.abort(),W.ma())}function Sa(S,W){try{var re=S.j;if(re.G!=0&&(re.g==S||bs(re.h,S))){if(!S.K&&bs(re.h,S)&&re.G==3){try{var pe=re.Da.g.parse(W)}catch{pe=null}if(Array.isArray(pe)&&pe.length==3){var Oe=pe;if(Oe[0]==0){e:if(!re.u){if(re.g)if(re.g.F+3e3<S.F)Do(re),Mc(re);else break e;Jl(re),Qt(18)}}else re.za=Oe[1],0<re.za-re.T&&37500>Oe[2]&&re.F&&re.v==0&&!re.C&&(re.C=Zn(m(re.Za,re),6e3));if(1>=Oa(re.h)&&re.ca){try{re.ca()}catch{}re.ca=void 0}}else Us(re,11)}else if((S.K||re.g==S)&&Do(re),!I(W))for(Oe=re.Da.g.parse(W),W=0;W<Oe.length;W++){let Sn=Oe[W];if(re.T=Sn[0],Sn=Sn[1],re.G==2)if(Sn[0]=="c"){re.K=Sn[1],re.ia=Sn[2];const wr=Sn[3];wr!=null&&(re.la=wr,re.j.info("VER="+re.la));const Nr=Sn[4];Nr!=null&&(re.Aa=Nr,re.j.info("SVER="+re.Aa));const oo=Sn[5];oo!=null&&typeof oo=="number"&&0<oo&&(pe=1.5*oo,re.L=pe,re.j.info("backChannelRequestTimeoutMs_="+pe)),pe=re;const ga=S.g;if(ga){const pi=ga.g?ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var Xe=pe.h;Xe.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(Xe.j=Xe.l,Xe.g=new Set,Xe.h&&(Gr(Xe,Xe.h),Xe.h=null))}if(pe.D){const hl=ga.g?ga.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(pe.ya=hl,yr(pe.I,pe.D,hl))}}re.G=3,re.l&&re.l.ua(),re.ba&&(re.R=Date.now()-S.F,re.j.info("Handshake RTT: "+re.R+"ms")),pe=re;var St=S;if(pe.qa=V(pe,pe.J?pe.ia:null,pe.W),St.K){is(pe.h,St);var fn=St,Wn=pe.L;Wn&&(fn.I=Wn),fn.B&&(Ln(fn),Ft(fn)),pe.g=St}else jc(pe);0<re.i.length&&Pc(re)}else Sn[0]!="stop"&&Sn[0]!="close"||Us(re,7);else re.G==3&&(Sn[0]=="stop"||Sn[0]=="close"?Sn[0]=="stop"?Us(re,7):Ro(re):Sn[0]!="noop"&&re.l&&re.l.ta(Sn),re.v=0)}}pa(4)}catch{}}var Ai=class{constructor(S,W){this.g=S,this.map=W}};function Ta(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ss(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Oa(S){return S.h?1:S.g?S.g.size:0}function bs(S,W){return S.h?S.h==W:S.g?S.g.has(W):!1}function Gr(S,W){S.g?S.g.add(W):S.h=W}function is(S,W){S.h&&S.h==W?S.h=null:S.g&&S.g.has(W)&&S.g.delete(W)}Ta.prototype.cancel=function(){if(this.i=Dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function Dc(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let W=S.i;for(const re of S.g.values())W=W.concat(re.D);return W}return w(S.i)}function VA(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var W=[],re=S.length,pe=0;pe<re;pe++)W.push(S[pe]);return W}W=[],re=0;for(pe in S)W[re++]=S[pe];return W}function rl(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var W=[];S=S.length;for(var re=0;re<S;re++)W.push(re);return W}W=[],re=0;for(const pe in S)W[re++]=pe;return W}}}function Lu(S,W){if(S.forEach&&typeof S.forEach=="function")S.forEach(W,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,W,void 0);else for(var re=rl(S),pe=VA(S),Oe=pe.length,Xe=0;Xe<Oe;Xe++)W.call(void 0,pe[Xe],re&&re[Xe],S)}var Cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lc(S,W){if(S){S=S.split("&");for(var re=0;re<S.length;re++){var pe=S[re].indexOf("="),Oe=null;if(0<=pe){var Xe=S[re].substring(0,pe);Oe=S[re].substring(pe+1)}else Xe=S[re];W(Xe,Oe?decodeURIComponent(Oe.replace(/\+/g," ")):"")}}}function lr(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof lr){this.h=S.h,al(this,S.j),this.o=S.o,this.g=S.g,sl(this,S.s),this.l=S.l;var W=S.i,re=new to;re.i=W.i,W.g&&(re.g=new Map(W.g),re.h=W.h),eo(this,re),this.m=S.m}else S&&(W=String(S).match(Cs))?(this.h=!1,al(this,W[1]||"",!0),this.o=di(W[2]||""),this.g=di(W[3]||"",!0),sl(this,W[4]),this.l=di(W[5]||"",!0),eo(this,W[6]||"",!0),this.m=di(W[7]||"")):(this.h=!1,this.i=new to(null,this.h))}lr.prototype.toString=function(){var S=[],W=this.j;W&&S.push(Bo(W,Uu,!0),":");var re=this.g;return(re||W=="file")&&(S.push("//"),(W=this.o)&&S.push(Bo(W,Uu,!0),"@"),S.push(encodeURIComponent(String(re)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),re=this.s,re!=null&&S.push(":",String(re))),(re=this.l)&&(this.g&&re.charAt(0)!="/"&&S.push("/"),S.push(Bo(re,re.charAt(0)=="/"?No:Mu,!0))),(re=this.i.toString())&&S.push("?",re),(re=this.m)&&S.push("#",Bo(re,ko)),S.join("")};function Es(S){return new lr(S)}function al(S,W,re){S.j=re?di(W,!0):W,S.j&&(S.j=S.j.replace(/:$/,""))}function sl(S,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);S.s=W}else S.s=null}function eo(S,W,re){W instanceof to?(S.i=W,GA(S.i,S.h)):(re||(W=Bo(W,Uc)),S.i=new to(W,S.h))}function yr(S,W,re){S.i.set(W,re)}function il(S){return yr(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function di(S,W){return S?W?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function Bo(S,W,re){return typeof S=="string"?(S=encodeURI(S).replace(W,zA),re&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function zA(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Uu=/[#\/\?@]/g,Mu=/[#\?:]/g,No=/[#\?]/g,Uc=/[#\?@]/g,ko=/#/g;function to(S,W){this.h=this.g=null,this.i=S||null,this.j=!!W}function Dr(S){S.g||(S.g=new Map,S.h=0,S.i&&Lc(S.i,function(W,re){S.add(decodeURIComponent(W.replace(/\+/g," ")),re)}))}t=to.prototype,t.add=function(S,W){Dr(this),this.i=null,S=ro(this,S);var re=this.g.get(S);return re||this.g.set(S,re=[]),re.push(W),this.h+=1,this};function Io(S,W){Dr(S),W=ro(S,W),S.g.has(W)&&(S.i=null,S.h-=S.g.get(W).length,S.g.delete(W))}function no(S,W){return Dr(S),W=ro(S,W),S.g.has(W)}t.forEach=function(S,W){Dr(this),this.g.forEach(function(re,pe){re.forEach(function(Oe){S.call(W,Oe,pe,this)},this)},this)},t.na=function(){Dr(this);const S=Array.from(this.g.values()),W=Array.from(this.g.keys()),re=[];for(let pe=0;pe<W.length;pe++){const Oe=S[pe];for(let Xe=0;Xe<Oe.length;Xe++)re.push(W[pe])}return re},t.V=function(S){Dr(this);let W=[];if(typeof S=="string")no(this,S)&&(W=W.concat(this.g.get(ro(this,S))));else{S=Array.from(this.g.values());for(let re=0;re<S.length;re++)W=W.concat(S[re])}return W},t.set=function(S,W){return Dr(this),this.i=null,S=ro(this,S),no(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[W]),this.h+=1,this},t.get=function(S,W){return S?(S=this.V(S),0<S.length?String(S[0]):W):W};function dn(S,W,re){Io(S,W),0<re.length&&(S.i=null,S.g.set(ro(S,W),w(re)),S.h+=re.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],W=Array.from(this.g.keys());for(var re=0;re<W.length;re++){var pe=W[re];const Xe=encodeURIComponent(String(pe)),St=this.V(pe);for(pe=0;pe<St.length;pe++){var Oe=Xe;St[pe]!==""&&(Oe+="="+encodeURIComponent(String(St[pe]))),S.push(Oe)}}return this.i=S.join("&")};function ro(S,W){return W=String(W),S.j&&(W=W.toLowerCase()),W}function GA(S,W){W&&!S.j&&(Dr(S),S.i=null,S.g.forEach(function(re,pe){var Oe=pe.toLowerCase();pe!=Oe&&(Io(this,pe),dn(this,Oe,re))},S)),S.j=W}function Rs(S,W){const re=new Br;if(o.Image){const pe=new Image;pe.onload=g(Js,re,"TestLoadImage: loaded",!0,W,pe),pe.onerror=g(Js,re,"TestLoadImage: error",!1,W,pe),pe.onabort=g(Js,re,"TestLoadImage: abort",!1,W,pe),pe.ontimeout=g(Js,re,"TestLoadImage: timeout",!1,W,pe),o.setTimeout(function(){pe.ontimeout&&pe.ontimeout()},1e4),pe.src=S}else W(!1)}function fi(S,W){const re=new Br,pe=new AbortController,Oe=setTimeout(()=>{pe.abort(),Js(re,"TestPingServer: timeout",!1,W)},1e4);fetch(S,{signal:pe.signal}).then(Xe=>{clearTimeout(Oe),Xe.ok?Js(re,"TestPingServer: ok",!0,W):Js(re,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(Oe),Js(re,"TestPingServer: error",!1,W)})}function Js(S,W,re,pe,Oe){try{Oe&&(Oe.onload=null,Oe.onerror=null,Oe.onabort=null,Oe.ontimeout=null),pe(re)}catch{}}function ao(){this.g=new Tr}function hi(S,W,re){const pe=re||"";try{Lu(S,function(Oe,Xe){let St=Oe;u(Oe)&&(St=mn(Oe)),W.push(pe+Xe+"="+encodeURIComponent(St))})}catch(Oe){throw W.push(pe+"type="+encodeURIComponent("_badmap")),Oe}}function ol(S){this.l=S.Ub||null,this.j=S.eb||!1}b(ol,Bn),ol.prototype.g=function(){return new Fo(this.l,this.j)},ol.prototype.i=function(S){return function(){return S}}({});function Fo(S,W){Ut.call(this),this.D=S,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Fo,Ut),t=Fo.prototype,t.open=function(S,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=W,this.readyState=1,Ds(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(W.body=S),(this.D||o).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pu(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pu(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var W=S.value?S.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!S.done}))&&(this.response=this.responseText+=W)}S.done?mi(this):Ds(this),this.readyState==3&&Pu(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,mi(this))},t.Qa=function(S){this.g&&(this.response=S,mi(this))},t.ga=function(){this.g&&mi(this)};function mi(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Ds(S)}t.setRequestHeader=function(S,W){this.u.append(S,W)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],W=this.h.entries();for(var re=W.next();!re.done;)re=re.value,S.push(re[0]+": "+re[1]),re=W.next();return S.join(`\r
`)};function Ds(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function so(S){let W="";return D(S,function(re,pe){W+=pe,W+=":",W+=re,W+=`\r
`}),W}function Ba(S,W,re){e:{for(pe in re){var pe=!1;break e}pe=!0}pe||(re=so(re),typeof S=="string"?re!=null&&encodeURIComponent(String(re)):yr(S,W,re))}function Kn(S){Ut.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Kn,Ut);var ll=/^https?$/i,io=["POST","PUT"];t=Kn.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,W,re,pe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);W=W?W.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?rs(this.o):rs(Ne),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(W,String(S),!0),this.B=!1}catch(Xe){ju(this,Xe);return}if(S=re||"",re=new Map(this.headers),pe)if(Object.getPrototypeOf(pe)===Object.prototype)for(var Oe in pe)re.set(Oe,pe[Oe]);else if(typeof pe.keys=="function"&&typeof pe.get=="function")for(const Xe of pe.keys())re.set(Xe,pe.get(Xe));else throw Error("Unknown input type for opt_headers: "+String(pe));pe=Array.from(re.keys()).find(Xe=>Xe.toLowerCase()=="content-type"),Oe=o.FormData&&S instanceof o.FormData,!(0<=Array.prototype.indexOf.call(io,W,void 0))||pe||Oe||re.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Xe,St]of re)this.g.setRequestHeader(Xe,St);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ls(this),this.u=!0,this.g.send(S),this.u=!1}catch(Xe){ju(this,Xe)}};function ju(S,W){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=W,S.m=5,Gl(S),zi(S)}function Gl(S){S.A||(S.A=!0,Ht(S,"complete"),Ht(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Ht(this,"complete"),Ht(this,"abort"),zi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),Kn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},t.bb=function(){ql(this)};function ql(S){if(S.h&&typeof i<"u"&&(!S.v[1]||Na(S)!=4||S.Z()!=2)){if(S.u&&Na(S)==4)Mt(S.Ea,0,S);else if(Ht(S,"readystatechange"),Na(S)==4){S.h=!1;try{const St=S.Z();e:switch(St){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var re;if(!(re=W)){var pe;if(pe=St===0){var Oe=String(S.D).match(Cs)[1]||null;!Oe&&o.self&&o.self.location&&(Oe=o.self.location.protocol.slice(0,-1)),pe=!ll.test(Oe?Oe.toLowerCase():"")}re=pe}if(re)Ht(S,"complete"),Ht(S,"success");else{S.m=6;try{var Xe=2<Na(S)?S.g.statusText:""}catch{Xe=""}S.l=Xe+" ["+S.Z()+"]",Gl(S)}}finally{zi(S)}}}}function zi(S,W){if(S.g){Ls(S);const re=S.g,pe=S.v[0]?()=>{}:null;S.g=null,S.v=null,W||Ht(S,"ready");try{re.onreadystatechange=pe}catch{}}}function Ls(S){S.I&&(o.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function Na(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<Na(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var W=this.g.responseText;return S&&W.indexOf(S)==0&&(W=W.substring(S.length)),Fn(W)}};function qA(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function cl(S){const W={};S=(S.g&&2<=Na(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let pe=0;pe<S.length;pe++){if(I(S[pe]))continue;var re=R(S[pe]);const Oe=re[0];if(re=re[1],typeof re!="string")continue;re=re.trim();const Xe=W[Oe]||[];W[Oe]=Xe,Xe.push(re)}_(W,function(pe){return pe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(S,W,re){return re&&re.internalChannelParams&&re.internalChannelParams[S]||W}function ul(S){this.Aa=0,this.i=[],this.j=new Br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,S),this.cb=_s("retryDelaySeedMs",1e4,S),this.Wa=_s("forwardChannelMaxRetries",2,S),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Ta(S&&S.concurrentRequestLimit),this.Da=new ao,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ul.prototype,t.la=8,t.G=1,t.connect=function(S,W,re,pe){Qt(0),this.W=S,this.H=W||{},re&&pe!==void 0&&(this.H.OSID=re,this.H.OAID=pe),this.F=this.X,this.I=V(this,null,this.W),Pc(this)};function Ro(S){if(Kl(S),S.G==3){var W=S.U++,re=Es(S.I);if(yr(re,"SID",S.K),yr(re,"RID",W),yr(re,"TYPE","terminate"),Al(S,re),W=new tt(S,S.j,W),W.L=2,W.v=il(Es(re)),re=!1,o.navigator&&o.navigator.sendBeacon)try{re=o.navigator.sendBeacon(W.v.toString(),"")}catch{}!re&&o.Image&&(new Image().src=W.v,re=!0),re||(W.g=ue(W.j,null),W.g.ea(W.v)),W.F=Date.now(),Ft(W)}Oc(S)}function Mc(S){S.g&&(dl(S),S.g.cancel(),S.g=null)}function Kl(S){Mc(S),S.u&&(o.clearTimeout(S.u),S.u=null),Do(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&o.clearTimeout(S.s),S.s=null)}function Pc(S){if(!ss(S.h)&&!S.s){S.s=!0;var W=S.Ga;ee||Y(),ae||(ee(),ae=!0),q.add(W,S),S.B=0}}function Ou(S,W){return Oa(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=W.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=Zn(m(S.Ga,S,W),Yl(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const Oe=new tt(this,this.j,S);let Xe=this.o;if(this.S&&(Xe?(Xe=B(Xe),O(Xe,this.S)):Xe=this.S),this.m!==null||this.O||(Oe.H=Xe,Xe=null),this.P)e:{for(var W=0,re=0;re<this.i.length;re++){t:{var pe=this.i[re];if("__data__"in pe.map&&(pe=pe.map.__data__,typeof pe=="string")){pe=pe.length;break t}pe=void 0}if(pe===void 0)break;if(W+=pe,4096<W){W=re;break e}if(W===4096||re===this.i.length-1){W=re+1;break e}}W=1e3}else W=1e3;W=$l(this,Oe,W),re=Es(this.I),yr(re,"RID",S),yr(re,"CVER",22),this.D&&yr(re,"X-HTTP-Session-Id",this.D),Al(this,re),Xe&&(this.O?W="headers="+encodeURIComponent(String(so(Xe)))+"&"+W:this.m&&Ba(re,this.m,Xe)),Gr(this.h,Oe),this.Ua&&yr(re,"TYPE","init"),this.P?(yr(re,"$req",W),yr(re,"SID","null"),Oe.T=!0,yt(Oe,re,null)):yt(Oe,re,W),this.G=2}}else this.G==3&&(S?Wl(this,S):this.i.length==0||ss(this.h)||Wl(this))};function Wl(S,W){var re;W?re=W.l:re=S.U++;const pe=Es(S.I);yr(pe,"SID",S.K),yr(pe,"RID",re),yr(pe,"AID",S.T),Al(S,pe),S.m&&S.o&&Ba(pe,S.m,S.o),re=new tt(S,S.j,re,S.B+1),S.m===null&&(re.H=S.o),W&&(S.i=W.D.concat(S.i)),W=$l(S,re,1e3),re.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),Gr(S.h,re),yt(re,pe,W)}function Al(S,W){S.H&&D(S.H,function(re,pe){yr(W,pe,re)}),S.l&&Lu({},function(re,pe){yr(W,pe,re)})}function $l(S,W,re){re=Math.min(S.i.length,re);var pe=S.l?m(S.l.Na,S.l,S):null;e:{var Oe=S.i;let Xe=-1;for(;;){const St=["count="+re];Xe==-1?0<re?(Xe=Oe[0].g,St.push("ofs="+Xe)):Xe=0:St.push("ofs="+Xe);let fn=!0;for(let Wn=0;Wn<re;Wn++){let Sn=Oe[Wn].g;const wr=Oe[Wn].map;if(Sn-=Xe,0>Sn)Xe=Math.max(0,Oe[Wn].g-100),fn=!1;else try{hi(wr,St,"req"+Sn+"_")}catch{pe&&pe(wr)}}if(fn){pe=St.join("&");break e}}}return S=S.i.splice(0,re),W.D=S,pe}function jc(S){if(!S.g&&!S.u){S.Y=1;var W=S.Fa;ee||Y(),ae||(ee(),ae=!0),q.add(W,S),S.v=0}}function Jl(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=Zn(m(S.Fa,S),Yl(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,KA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=Zn(m(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),Mc(this),KA(this))};function dl(S){S.A!=null&&(o.clearTimeout(S.A),S.A=null)}function KA(S){S.g=new tt(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var W=Es(S.qa);yr(W,"RID","rpc"),yr(W,"SID",S.K),yr(W,"AID",S.T),yr(W,"CI",S.F?"0":"1"),!S.F&&S.ja&&yr(W,"TO",S.ja),yr(W,"TYPE","xmlhttp"),Al(S,W),S.m&&S.o&&Ba(W,S.m,S.o),S.L&&(S.g.I=S.L);var re=S.g;S=S.ia,re.L=1,re.v=il(Es(W)),re.m=null,re.P=!0,Bt(re,S)}t.Za=function(){this.C!=null&&(this.C=null,Mc(this),Jl(this),Qt(19))};function Do(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function fl(S,W){var re=null;if(S.g==W){Do(S),dl(S),S.g=null;var pe=2}else if(bs(S.h,W))re=W.D,is(S.h,W),pe=1;else return;if(S.G!=0){if(W.o)if(pe==1){re=W.m?W.m.length:0,W=Date.now()-W.F;var Oe=S.B;pe=as(),Ht(pe,new or(pe,re)),Pc(S)}else jc(S);else if(Oe=W.s,Oe==3||Oe==0&&0<W.X||!(pe==1&&Ou(S,W)||pe==2&&Jl(S)))switch(re&&0<re.length&&(W=S.h,W.i=W.i.concat(re)),Oe){case 1:Us(S,5);break;case 4:Us(S,10);break;case 3:Us(S,6);break;default:Us(S,2)}}}function Yl(S,W){let re=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(re*=2),re*W}function Us(S,W){if(S.j.info("Error code "+W),W==2){var re=m(S.fb,S),pe=S.Xa;const Oe=!pe;pe=new lr(pe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||al(pe,"https"),il(pe),Oe?Rs(pe.toString(),re):fi(pe.toString(),re)}else Qt(2);S.G=0,S.l&&S.l.sa(W),Oc(S),Kl(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Oc(S){if(S.G=0,S.ka=[],S.l){const W=Dc(S.h);(W.length!=0||S.i.length!=0)&&(E(S.ka,W),E(S.ka,S.i),S.h.i.length=0,w(S.i),S.i.length=0),S.l.ra()}}function V(S,W,re){var pe=re instanceof lr?Es(re):new lr(re);if(pe.g!="")W&&(pe.g=W+"."+pe.g),sl(pe,pe.s);else{var Oe=o.location;pe=Oe.protocol,W=W?W+"."+Oe.hostname:Oe.hostname,Oe=+Oe.port;var Xe=new lr(null);pe&&al(Xe,pe),W&&(Xe.g=W),Oe&&sl(Xe,Oe),re&&(Xe.l=re),pe=Xe}return re=S.D,W=S.ya,re&&W&&yr(pe,re,W),yr(pe,"VER",S.la),Al(S,pe),pe}function ue(S,W,re){if(W&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=S.Ca&&!S.pa?new Kn(new ol({eb:re})):new Kn(S.pa),W.Ha(S.J),W}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ke(){}t=ke.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Le(){}Le.prototype.g=function(S,W){return new He(S,W)};function He(S,W){Ut.call(this),this.g=new ul(W),this.l=S,this.h=W&&W.messageUrlParams||null,S=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(S?S["X-WebChannel-Content-Type"]=W.messageContentType:S={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(S?S["X-WebChannel-Client-Profile"]=W.va:S={"X-WebChannel-Client-Profile":W.va}),this.g.S=S,(S=W&&W.Sb)&&!I(S)&&(this.g.m=S),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!I(W)&&(this.g.D=W,S=this.h,S!==null&&W in S&&(S=this.h,W in S&&delete S[W])),this.j=new jt(this)}b(He,Ut),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Ro(this.g)},He.prototype.o=function(S){var W=this.g;if(typeof S=="string"){var re={};re.__data__=S,S=re}else this.u&&(re={},re.__data__=mn(S),S=re);W.i.push(new Ai(W.Ya++,S)),W.G==3&&Pc(W)},He.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,He.aa.N.call(this)};function ot(S){ua.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var W=S.__sm__;if(W){e:{for(const re in W){S=re;break e}S=void 0}(this.i=S)&&(S=this.i,W=W!==null&&S in W?W[S]:void 0),this.data=W}else this.data=S}b(ot,ua);function _t(){Dn.call(this),this.status=1}b(_t,Dn);function jt(S){this.g=S}b(jt,ke),jt.prototype.ua=function(){Ht(this.g,"a")},jt.prototype.ta=function(S){Ht(this.g,new ot(S))},jt.prototype.sa=function(S){Ht(this.g,new _t)},jt.prototype.ra=function(){Ht(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,qL=function(){return new Le},GL=function(){return as()},zL=en,n_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,l2=Ee,Se.COMPLETE="complete",VL=Se,Xn.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,rg=Xn,Kn.prototype.listenOnce=Kn.prototype.L,Kn.prototype.getLastError=Kn.prototype.Ka,Kn.prototype.getLastErrorCode=Kn.prototype.Ba,Kn.prototype.getStatus=Kn.prototype.Z,Kn.prototype.getResponseJson=Kn.prototype.Oa,Kn.prototype.getResponseText=Kn.prototype.oa,Kn.prototype.send=Kn.prototype.ea,Kn.prototype.setWithCredentials=Kn.prototype.Ha,HL=Kn}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});const ak="@firebase/firestore",sk="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new $5("@firebase/firestore");function P0(){return bh.logLevel}function Jt(t,...e){if(bh.logLevel<=rr.DEBUG){const n=e.map(oS);bh.debug(`Firestore (${jm}): ${t}`,...n)}}function SA(t,...e){if(bh.logLevel<=rr.ERROR){const n=e.map(oS);bh.error(`Firestore (${jm}): ${t}`,...n)}}function bm(t,...e){if(bh.logLevel<=rr.WARN){const n=e.map(oS);bh.warn(`Firestore (${jm}): ${t}`,...n)}}function oS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KL(t,r,n)}function KL(t,e,n){let r=`FIRESTORE (${jm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw SA(r),new Error(r)}function Fr(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||KL(e,a,r)}function In(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends DA{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ki.UNAUTHENTICATED))}shutdown(){}}class GG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qG{constructor(e){this.t=e,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fr(this.o===void 0,42304);let r=this.i;const a=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new vA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vA,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{Jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vA)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fr(typeof r.accessToken=="string",31837,{l:r}),new WL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fr(e===null||typeof e=="string",2055,{h:e}),new ki(e)}}class KG{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ki.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WG{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KG(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ik{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $G{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fr(this.o===void 0,3512);const r=s=>{s.error!=null&&Jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,Jt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const a=s=>{Jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):Jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ik(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fr(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ik(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=JG(40);for(let s=0;s<a.length;++s)r.length<20&&a[s]<n&&(r+=e.charAt(a[s]%62))}return r}}function ar(t,e){return t<e?-1:t>e?1:0}function r_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),s=e.charAt(r);if(a!==s)return xC(a)===xC(s)?ar(a,s):xC(a)?1:-1}return ar(t.length,e.length)}const YG=55296,XG=57343;function xC(t){const e=t.charCodeAt(0);return e>=YG&&e<=XG}function Cm(t,e,n){return t.length===e.length&&t.every((r,a)=>n(r,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="__name__";class pu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Cn(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Cn(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const s=pu.compareSegments(e.get(a),n.get(a));if(s!==0)return s}return ar(e.length,n.length)}static compareSegments(e,n){const r=pu.isNumericId(e),a=pu.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?pu.extractNumericId(e).compare(pu.extractNumericId(n)):r_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yd.fromString(e.substring(4,e.length-2))}}class na extends pu{construct(e,n,r){return new na(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new zt(mt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new na(n)}static emptyPath(){return new na([])}}const ZG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oi extends pu{construct(e,n,r){return new oi(e,n,r)}static isValidIdentifier(e){return ZG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ok}static keyField(){return new oi([ok])}static fromServerFormat(e){const n=[];let r="",a=0;const s=()=>{if(r.length===0)throw new zt(mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new zt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new zt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(r+=o,a++):(s(),a++)}if(s(),i)throw new zt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oi(n)}static emptyPath(){return new oi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.path=e}static fromPath(e){return new cn(na.fromString(e))}static fromName(e){return new cn(na.fromString(e).popFirst(5))}static empty(){return new cn(na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&na.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return na.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cn(new na(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t,e,n){if(!n)throw new zt(mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eq(t,e,n,r){if(e===!0&&r===!0)throw new zt(mt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lk(t){if(!cn.isDocumentKey(t))throw new zt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ck(t){if(cn.isDocumentKey(t))throw new zt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JL(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Cn(12329,{type:typeof t})}function wo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gy(t);throw new zt(mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tq(t,e){if(e<=0)throw new zt(mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,e){const n={typeString:t};return e&&(n.value=e),n}function Dx(t,e){if(!JL(t))throw new zt(mt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(a&&typeof i!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new zt(mt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=-62135596800,Ak=1e6;class pr{static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ak);return new pr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new zt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new zt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uk)throw new zt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ak}_compareTo(e){return this.seconds===e.seconds?ar(this.nanoseconds,e.nanoseconds):ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dx(e,pr._jsonSchema))return new pr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pr._jsonSchemaVersion="firestore/timestamp/1.0",pr._jsonSchema={type:gs("string",pr._jsonSchemaVersion),seconds:gs("number"),nanoseconds:gs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{static fromTimestamp(e){return new Nn(e)}static min(){return new Nn(new pr(0,0))}static max(){return new Nn(new pr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=-1;function nq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=Nn.fromTimestamp(r===1e9?new pr(n+1,0):new pr(n,r));return new af(a,cn.empty(),e)}function rq(t){return new af(t.readTime,t.key,$g)}class af{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new af(Nn.min(),cn.empty(),$g)}static max(){return new af(Nn.max(),cn.empty(),$g)}}function aq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=cn.comparator(t.documentKey,e.documentKey),n!==0?n:ar(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t){if(t.code!==mt.FAILED_PRECONDITION||t.message!==sq)throw t;Jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Cn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new bt((r,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,a)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof bt?n:bt.resolve(n)}catch(n){return bt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):bt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):bt.reject(n)}static resolve(e){return new bt((n,r)=>{n(e)})}static reject(e){return new bt((n,r)=>{r(e)})}static waitFor(e){return new bt((n,r)=>{let a=0,s=0,i=!1;e.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&n()},l=>r(l))}),i=!0,s===a&&n()})}static or(e){let n=bt.resolve(!1);for(const r of e)n=n.next(a=>a?bt.resolve(a):r());return n}static forEach(e,n){const r=[];return e.forEach((a,s)=>{r.push(n.call(this,a,s))}),this.waitFor(r)}static mapArray(e,n){return new bt((r,a)=>{const s=e.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{i[u]=d,++o,o===s&&r(i)},d=>a(d))}})}static doWhile(e,n){return new bt((r,a)=>{const s=()=>{e()===!0?n().next(()=>{s()},a):r()};s()})}}function oq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=-1;function Ky(t){return t==null}function M2(t){return t===0&&1/t==-1/0}function lq(t){return typeof t=="number"&&Number.isInteger(t)&&!M2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="";function cq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dk(e)),e=uq(t.get(n),e);return dk(e)}function uq(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const s=t.charAt(a);switch(s){case"\0":n+="";break;case YL:n+="";break;default:n+=s}}return n}function dk(t){return t+YL+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.comparator=e,this.root=n||si.EMPTY}insert(e,n){return new Ea(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new Ea(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tv(this.root,e,this.comparator,!1)}getReverseIterator(){return new tv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tv(this.root,e,this.comparator,!0)}}class tv{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,n,r,a,s){this.key=e,this.value=n,this.color=r??si.RED,this.left=a??si.EMPTY,this.right=s??si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,s){return new si(e??this.key,n??this.value,r??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const s=r(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,n,r),null):s===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return si.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Cn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Cn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Cn(27949);return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1;si.EMPTY=new class{constructor(){this.size=0}get key(){throw Cn(57766)}get value(){throw Cn(16141)}get color(){throw Cn(16727)}get left(){throw Cn(29726)}get right(){throw Cn(36894)}copy(e,n,r,a,s){return this}insert(e,n,r){return new si(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.comparator=e,this.data=new Ea(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hk(this.data.getIterator())}getIteratorFrom(e){return new hk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ks)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,s=r.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ks(this.comparator);return n.data=e,n}}class hk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.fields=e,e.sort(oi.comparator)}static empty(){return new Yo([])}unionWith(e){let n=new ks(oi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZL("Invalid base64 string: "+s):s}}(e);return new ui(n)}static fromUint8Array(e){const n=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new ui(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const Aq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sf(t){if(Fr(!!t,39018),typeof t=="string"){let e=0;const n=Aq.exec(t);if(Fr(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ja(t.seconds),nanos:Ja(t.nanos)}}function Ja(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function of(t){return typeof t=="string"?ui.fromBase64String(t):ui.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="server_timestamp",tU="__type__",nU="__previous_value__",rU="__local_write_time__";function uS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tU])==null?void 0:r.stringValue)===eU}function Wy(t){const e=t.mapValue.fields[nU];return uS(e)?Wy(e):e}function Jg(t){const e=sf(t.mapValue.fields[rU].timestampValue);return new pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e,n,r,a,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const P2="(default)";class Yg{constructor(e,n){this.projectId=e,this.database=n||P2}static empty(){return new Yg("","")}get isDefaultDatabase(){return this.database===P2}isEqual(e){return e instanceof Yg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU="__type__",fq="__max__",nv={mapValue:{}},sU="__vector__",j2="value";function lf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uS(t)?4:mq(t)?9007199254740991:hq(t)?10:11:Cn(28295,{value:t})}function Bu(t,e){if(t===e)return!0;const n=lf(t);if(n!==lf(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jg(t).isEqual(Jg(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=sf(a.timestampValue),o=sf(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return of(a.bytesValue).isEqual(of(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return Ja(a.geoPointValue.latitude)===Ja(s.geoPointValue.latitude)&&Ja(a.geoPointValue.longitude)===Ja(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ja(a.integerValue)===Ja(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Ja(a.doubleValue),o=Ja(s.doubleValue);return i===o?M2(i)===M2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Cm(t.arrayValue.values||[],e.arrayValue.values||[],Bu);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(fk(i)!==fk(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Bu(i[l],o[l])))return!1;return!0}(t,e);default:return Cn(52216,{left:t})}}function Xg(t,e){return(t.values||[]).find(n=>Bu(n,e))!==void 0}function Em(t,e){if(t===e)return 0;const n=lf(t),r=lf(e);if(n!==r)return ar(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ar(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=Ja(s.integerValue||s.doubleValue),l=Ja(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return mk(t.timestampValue,e.timestampValue);case 4:return mk(Jg(t),Jg(e));case 5:return r_(t.stringValue,e.stringValue);case 6:return function(s,i){const o=of(s),l=of(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=ar(o[u],l[u]);if(d!==0)return d}return ar(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=ar(Ja(s.latitude),Ja(i.latitude));return o!==0?o:ar(Ja(s.longitude),Ja(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pk(t.arrayValue,e.arrayValue);case 10:return function(s,i){var m,g,b,w;const o=s.fields||{},l=i.fields||{},u=(m=o[j2])==null?void 0:m.arrayValue,d=(g=l[j2])==null?void 0:g.arrayValue,h=ar(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((w=d==null?void 0:d.values)==null?void 0:w.length)||0);return h!==0?h:pk(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===nv.mapValue&&i===nv.mapValue)return 0;if(s===nv.mapValue)return 1;if(i===nv.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=r_(l[h],d[h]);if(m!==0)return m;const g=Em(o[l[h]],u[d[h]]);if(g!==0)return g}return ar(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Cn(23264,{he:n})}}function mk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ar(t,e);const n=sf(t),r=sf(e),a=ar(n.seconds,r.seconds);return a!==0?a:ar(n.nanos,r.nanos)}function pk(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const s=Em(n[a],r[a]);if(s)return s}return ar(n.length,r.length)}function _m(t){return a_(t)}function a_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=sf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return of(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return cn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",a=!0;for(const s of n.values||[])a?a=!1:r+=",",r+=a_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",s=!0;for(const i of r)s?s=!1:a+=",",a+=`${i}:${a_(n.fields[i])}`;return a+"}"}(t.mapValue):Cn(61005,{value:t})}function c2(t){switch(lf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wy(t);return e?16+c2(e):16;case 5:return 2*t.stringValue.length;case 6:return of(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,s)=>a+c2(s),0)}(t.arrayValue);case 10:case 11:return function(r){let a=0;return vf(r.fields,(s,i)=>{a+=s.length+c2(i)}),a}(t.mapValue);default:throw Cn(13486,{value:t})}}function gk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s_(t){return!!t&&"integerValue"in t}function AS(t){return!!t&&"arrayValue"in t}function xk(t){return!!t&&"nullValue"in t}function vk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function u2(t){return!!t&&"mapValue"in t}function hq(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[aU])==null?void 0:r.stringValue)===sU}function Eg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return vf(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eg(t.arrayValue.values[n]);return e}return{...t}}function mq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.value=e}static empty(){return new vo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!u2(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eg(n)}setAll(e){let n=oi.emptyPath(),r={},a=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,a),r={},a=[],n=o.popLast()}i?r[o.lastSegment()]=Eg(i):a.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,a)}delete(e){const n=this.field(e.popLast());u2(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bu(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];u2(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){vf(n,(a,s)=>e[a]=s);for(const a of r)delete e[a]}clone(){return new vo(Eg(this.value))}}function iU(t){const e=[];return vf(t.fields,(n,r)=>{const a=new oi([n]);if(u2(r)){const s=iU(r.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new Yo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,r,a,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Di(e,0,Nn.min(),Nn.min(),Nn.min(),vo.empty(),0)}static newFoundDocument(e,n,r,a){return new Di(e,1,n,Nn.min(),r,a,0)}static newNoDocument(e,n){return new Di(e,2,n,Nn.min(),Nn.min(),vo.empty(),0)}static newUnknownDocument(e,n){return new Di(e,3,n,Nn.min(),Nn.min(),vo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Nn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Di(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.position=e,this.inclusive=n}}function yk(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?r=cn.comparator(cn.fromName(i.referenceValue),n.key):r=Em(i,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bu(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n="asc"){this.field=e,this.dir=n}}function pq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{}class ps extends oU{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xq(e,n,r):n==="array-contains"?new wq(e,r):n==="in"?new bq(e,r):n==="not-in"?new Cq(e,r):n==="array-contains-any"?new Eq(e,r):new ps(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vq(e,r):new yq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Em(n,this.value)):n!==null&&lf(this.value)===lf(n)&&this.matchesComparison(Em(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Cn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nc extends oU{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nc(e,n)}matches(e){return lU(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lU(t){return t.op==="and"}function cU(t){return gq(t)&&lU(t)}function gq(t){for(const e of t.filters)if(e instanceof Nc)return!1;return!0}function i_(t){if(t instanceof ps)return t.field.canonicalString()+t.op.toString()+_m(t.value);if(cU(t))return t.filters.map(e=>i_(e)).join(",");{const e=t.filters.map(n=>i_(n)).join(",");return`${t.op}(${e})`}}function uU(t,e){return t instanceof ps?function(r,a){return a instanceof ps&&r.op===a.op&&r.field.isEqual(a.field)&&Bu(r.value,a.value)}(t,e):t instanceof Nc?function(r,a){return a instanceof Nc&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((s,i,o)=>s&&uU(i,a.filters[o]),!0):!1}(t,e):void Cn(19439)}function AU(t){return t instanceof ps?function(n){return`${n.field.canonicalString()} ${n.op} ${_m(n.value)}`}(t):t instanceof Nc?function(n){return n.op.toString()+" {"+n.getFilters().map(AU).join(" ,")+"}"}(t):"Filter"}class xq extends ps{constructor(e,n,r){super(e,n,r),this.key=cn.fromName(r.referenceValue)}matches(e){const n=cn.comparator(e.key,this.key);return this.matchesComparison(n)}}class vq extends ps{constructor(e,n){super(e,"in",n),this.keys=dU("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yq extends ps{constructor(e,n){super(e,"not-in",n),this.keys=dU("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dU(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>cn.fromName(r.referenceValue))}class wq extends ps{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return AS(n)&&Xg(n.arrayValue,this.value)}}class bq extends ps{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xg(this.value.arrayValue,n)}}class Cq extends ps{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xg(this.value.arrayValue,n)}}class Eq extends ps{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!AS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e,n=null,r=[],a=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function bk(t,e=null,n=[],r=[],a=null,s=null,i=null){return new _q(t,e,n,r,a,s,i)}function dS(t){const e=In(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>i_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ky(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_m(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_m(r)).join(",")),e.Te=n}return e.Te}function fS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uU(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wk(t.startAt,e.startAt)&&wk(t.endAt,e.endAt)}function o_(t){return cn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n=null,r=[],a=[],s=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sq(t,e,n,r,a,s,i,o){return new Hm(t,e,n,r,a,s,i,o)}function $y(t){return new Hm(t)}function Ck(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fU(t){return t.collectionGroup!==null}function _g(t){const e=In(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new ks(oi.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Zg(s,r))}),n.has(oi.keyField().canonicalString())||e.Ie.push(new Zg(oi.keyField(),r))}return e.Ie}function bu(t){const e=In(t);return e.Ee||(e.Ee=Tq(e,_g(t))),e.Ee}function Tq(t,e){if(t.limitType==="F")return bk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Zg(a.field,s)});const n=t.endAt?new O2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new O2(t.startAt.position,t.startAt.inclusive):null;return bk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function l_(t,e){const n=t.filters.concat([e]);return new Hm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Q2(t,e,n){return new Hm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jy(t,e){return fS(bu(t),bu(e))&&t.limitType===e.limitType}function hU(t){return`${dS(bu(t))}|lt:${t.limitType}`}function j0(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>AU(a)).join(", ")}]`),Ky(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>_m(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>_m(a)).join(",")),`Target(${r})`}(bu(t))}; limitType=${t.limitType})`}function Yy(t,e){return e.isFoundDocument()&&function(r,a){const s=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):cn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,a){for(const s of _g(r))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,a){for(const s of r.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(r,a){return!(r.startAt&&!function(i,o,l){const u=yk(i,o,l);return i.inclusive?u<=0:u<0}(r.startAt,_g(r),a)||r.endAt&&!function(i,o,l){const u=yk(i,o,l);return i.inclusive?u>=0:u>0}(r.endAt,_g(r),a))}(t,e)}function Bq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mU(t){return(e,n)=>{let r=!1;for(const a of _g(t)){const s=Nq(a,e,n);if(s!==0)return s;r=r||a.field.isKeyField()}return 0}}function Nq(t,e,n){const r=t.field.isKeyField()?cn.comparator(e.key,n.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Em(l,u):Cn(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Cn(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,s]of r)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){vf(this.inner,(n,r)=>{for(const[a,s]of r)e(a,s)})}isEmpty(){return XL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=new Ea(cn.comparator);function TA(){return kq}const pU=new Ea(cn.comparator);function ag(...t){let e=pU;for(const n of t)e=e.insert(n.key,n);return e}function gU(t){let e=pU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rh(){return Sg()}function xU(){return Sg()}function Sg(){return new Dh(t=>t.toString(),(t,e)=>t.isEqual(e))}const Iq=new Ea(cn.comparator),Fq=new ks(cn.comparator);function sr(...t){let e=Fq;for(const n of t)e=e.add(n);return e}const Rq=new ks(ar);function Dq(){return Rq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:M2(e)?"-0":e}}function vU(t){return{integerValue:""+t}}function Lq(t,e){return lq(e)?vU(e):hS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this._=void 0}}function Uq(t,e,n){return t instanceof H2?function(a,s){const i={fields:{[tU]:{stringValue:eU},[rU]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&uS(s)&&(s=Wy(s)),s&&(i.fields[nU]=s),{mapValue:i}}(n,e):t instanceof ex?wU(t,e):t instanceof tx?bU(t,e):function(a,s){const i=yU(a,s),o=Ek(i)+Ek(a.Ae);return s_(i)&&s_(a.Ae)?vU(o):hS(a.serializer,o)}(t,e)}function Mq(t,e,n){return t instanceof ex?wU(t,e):t instanceof tx?bU(t,e):n}function yU(t,e){return t instanceof V2?function(r){return s_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class H2 extends Xy{}class ex extends Xy{constructor(e){super(),this.elements=e}}function wU(t,e){const n=CU(e);for(const r of t.elements)n.some(a=>Bu(a,r))||n.push(r);return{arrayValue:{values:n}}}class tx extends Xy{constructor(e){super(),this.elements=e}}function bU(t,e){let n=CU(e);for(const r of t.elements)n=n.filter(a=>!Bu(a,r));return{arrayValue:{values:n}}}class V2 extends Xy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ek(t){return Ja(t.integerValue||t.doubleValue)}function CU(t){return AS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Pq(t,e){return t.field.isEqual(e.field)&&function(r,a){return r instanceof ex&&a instanceof ex||r instanceof tx&&a instanceof tx?Cm(r.elements,a.elements,Bu):r instanceof V2&&a instanceof V2?Bu(r.Ae,a.Ae):r instanceof H2&&a instanceof H2}(t.transform,e.transform)}class jq{constructor(e,n){this.version=e,this.transformResults=n}}class jl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jl}static exists(e){return new jl(void 0,e)}static updateTime(e){return new jl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function A2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zy{}function EU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mS(t.key,jl.none()):new Lx(t.key,t.data,jl.none());{const n=t.data,r=vo.empty();let a=new ks(oi.comparator);for(let s of e.fields)if(!a.has(s)){let i=n.field(s);i===null&&s.length>1&&(s=s.popLast(),i=n.field(s)),i===null?r.delete(s):r.set(s,i),a=a.add(s)}return new yf(t.key,r,new Yo(a.toArray()),jl.none())}}function Oq(t,e,n){t instanceof Lx?function(a,s,i){const o=a.value.clone(),l=Sk(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof yf?function(a,s,i){if(!A2(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Sk(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(_U(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Tg(t,e,n,r){return t instanceof Lx?function(s,i,o,l){if(!A2(s.precondition,i))return o;const u=s.value.clone(),d=Tk(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof yf?function(s,i,o,l){if(!A2(s.precondition,i))return o;const u=Tk(s.fieldTransforms,l,i),d=i.data;return d.setAll(_U(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,o){return A2(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function Qq(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),s=yU(r.transform,a||null);s!=null&&(n===null&&(n=vo.empty()),n.set(r.field,s))}return n||null}function _k(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Cm(r,a,(s,i)=>Pq(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lx extends Zy{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class yf extends Zy{constructor(e,n,r,a,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _U(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sk(t,e,n){const r=new Map;Fr(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const s=t[a],i=s.transform,o=e.data.field(s.field);r.set(s.field,Mq(i,o,n[a]))}return r}function Tk(t,e,n){const r=new Map;for(const a of t){const s=a.transform,i=n.data.field(a.field);r.set(a.field,Uq(s,i,e))}return r}class mS extends Zy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hq extends Zy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Oq(s,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xU();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=n.has(a.key)?null:o;const l=EU(i,o);l!==null&&r.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Nn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),sr())}isEqual(e){return this.batchId===e.batchId&&Cm(this.mutations,e.mutations,(n,r)=>_k(n,r))&&Cm(this.baseMutations,e.baseMutations,(n,r)=>_k(n,r))}}class pS{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){Fr(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=function(){return Iq}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,r[i].version);return new pS(e,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds,fr;function qq(t){switch(t){case mt.OK:return Cn(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Cn(15467,{code:t})}}function SU(t){if(t===void 0)return SA("GRPC error has no .code"),mt.UNKNOWN;switch(t){case ds.OK:return mt.OK;case ds.CANCELLED:return mt.CANCELLED;case ds.UNKNOWN:return mt.UNKNOWN;case ds.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case ds.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case ds.INTERNAL:return mt.INTERNAL;case ds.UNAVAILABLE:return mt.UNAVAILABLE;case ds.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case ds.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case ds.NOT_FOUND:return mt.NOT_FOUND;case ds.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case ds.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case ds.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case ds.ABORTED:return mt.ABORTED;case ds.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case ds.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case ds.DATA_LOSS:return mt.DATA_LOSS;default:return Cn(39323,{code:t})}}(fr=ds||(ds={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=new Yd([4294967295,4294967295],0);function Bk(t){const e=Kq().encode(t),n=new QL;return n.update(e),new Uint8Array(n.digest())}function Nk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yd([n,r],0),new Yd([a,s],0)]}class gS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sg(`Invalid padding: ${n}`);if(r<0)throw new sg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Yd.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Yd.fromNumber(r)));return a.compare(Wq)===1&&(a=new Yd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Bk(e),[r,a]=Nk(n);for(let s=0;s<this.hashCount;s++){const i=this.ye(r,a,s);if(!this.we(i))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new gS(s,a,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const n=Bk(e),[r,a]=Nk(n);for(let s=0;s<this.hashCount;s++){const i=this.ye(r,a,s);this.Se(i)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,r,a,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,Ux.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ew(Nn.min(),a,new Ea(ar),TA(),sr())}}class Ux{constructor(e,n,r,a,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ux(r,n,sr(),sr(),sr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class TU{constructor(e,n){this.targetId=e,this.Ce=n}}class BU{constructor(e,n,r=ui.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class kk{constructor(){this.ve=0,this.Fe=Ik(),this.Me=ui.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=sr(),n=sr(),r=sr();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Cn(38017,{changeType:s})}}),new Ux(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ik()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $q{constructor(e){this.Ge=e,this.ze=new Map,this.je=TA(),this.Je=rv(),this.He=rv(),this.Ye=new Ea(ar)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Cn(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,a)=>{this.rt(a)&&n(a)})}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const s=a.target;if(o_(s))if(r===0){const i=new cn(s.path);this.et(n,i,Di.newNoDocument(i,Nn.min()))}else Fr(r===1,20013,{expectedCount:r});else{const i=this._t(n);if(i!==r){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:s=0}=n;let i,o;try{i=of(r).toUint8Array()}catch(l){if(l instanceof ZL)return bm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new gS(i,a,s)}catch(l){return bm(l instanceof sg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),a++)}),a}Tt(e){const n=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&o_(o.target)){const l=new cn(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Di.newNoDocument(l,e))}s.Be&&(n.set(i,s.ke()),s.qe())}});let r=sr();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,i)=>i.setReadTime(e));const a=new ew(e,n,this.Ye,this.je,r);return this.je=TA(),this.Je=rv(),this.He=rv(),this.Ye=new Ea(ar),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new kk,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ks(ar),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ks(ar),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Jt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kk),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rv(){return new Ea(cn.comparator)}function Ik(){return new Ea(cn.comparator)}const Jq={asc:"ASCENDING",desc:"DESCENDING"},Yq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xq={and:"AND",or:"OR"};class Zq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function c_(t,e){return t.useProto3Json||Ky(e)?e:{value:e}}function z2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eK(t,e){return z2(t,e.toTimestamp())}function Cu(t){return Fr(!!t,49232),Nn.fromTimestamp(function(n){const r=sf(n);return new pr(r.seconds,r.nanos)}(t))}function xS(t,e){return u_(t,e).canonicalString()}function u_(t,e){const n=function(a){return new na(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kU(t){const e=na.fromString(t);return Fr(LU(e),10190,{key:e.toString()}),e}function A_(t,e){return xS(t.databaseId,e.path)}function vC(t,e){const n=kU(e);if(n.get(1)!==t.databaseId.projectId)throw new zt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new zt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new cn(FU(n))}function IU(t,e){return xS(t.databaseId,e)}function tK(t){const e=kU(t);return e.length===4?na.emptyPath():FU(e)}function d_(t){return new na(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FU(t){return Fr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fk(t,e,n){return{name:A_(t,e),fields:n.value.mapValue.fields}}function nK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Cn(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Fr(d===void 0||typeof d=="string",58123),ui.fromBase64String(d||"")):(Fr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ui.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?mt.UNKNOWN:SU(u.code);return new zt(d,u.message||"")}(i);n=new BU(r,a,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=vC(t,r.document.name),s=Cu(r.document.updateTime),i=r.document.createTime?Cu(r.document.createTime):Nn.min(),o=new vo({mapValue:{fields:r.document.fields}}),l=Di.newFoundDocument(a,s,i,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new d2(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=vC(t,r.document),s=r.readTime?Cu(r.readTime):Nn.min(),i=Di.newNoDocument(a,s),o=r.removedTargetIds||[];n=new d2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=vC(t,r.document),s=r.removedTargetIds||[];n=new d2([],s,a,null)}else{if(!("filter"in e))return Cn(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:s}=r,i=new Gq(a,s),o=r.targetId;n=new TU(o,i)}}return n}function rK(t,e){let n;if(e instanceof Lx)n={update:Fk(t,e.key,e.value)};else if(e instanceof mS)n={delete:A_(t,e.key)};else if(e instanceof yf)n={update:Fk(t,e.key,e.data),updateMask:dK(e.fieldMask)};else{if(!(e instanceof Hq))return Cn(16599,{Vt:e.type});n={verify:A_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof H2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ex)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof tx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof V2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Cn(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:eK(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Cn(27497)}(t,e.precondition)),n}function aK(t,e){return t&&t.length>0?(Fr(e!==void 0,14353),t.map(n=>function(a,s){let i=a.updateTime?Cu(a.updateTime):Cu(s);return i.isEqual(Nn.min())&&(i=Cu(s)),new jq(i,a.transformResults||[])}(n,e))):[]}function sK(t,e){return{documents:[IU(t,e.path)]}}function iK(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IU(t,a);const s=function(u){if(u.length!==0)return DU(Nc.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:O0(m.field),direction:cK(m.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=c_(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:a}}function oK(t){let e=tK(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){Fr(r===1,65062);const d=n.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=RU(h);return m instanceof Nc&&cU(m)?m.getFilters():[m]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(m=>function(b){return new Zg(Q0(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Ky(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new O2(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new O2(g,m)}(n.endAt)),Sq(e,a,i,s,o,"F",l,u)}function lK(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Cn(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RU(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Q0(n.unaryFilter.field);return ps.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Q0(n.unaryFilter.field);return ps.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Q0(n.unaryFilter.field);return ps.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Q0(n.unaryFilter.field);return ps.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Cn(61313);default:return Cn(60726)}}(t):t.fieldFilter!==void 0?function(n){return ps.create(Q0(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Cn(58110);default:return Cn(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nc.create(n.compositeFilter.filters.map(r=>RU(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Cn(1026)}}(n.compositeFilter.op))}(t):Cn(30097,{filter:t})}function cK(t){return Jq[t]}function uK(t){return Yq[t]}function AK(t){return Xq[t]}function O0(t){return{fieldPath:t.canonicalString()}}function Q0(t){return oi.fromServerFormat(t.fieldPath)}function DU(t){return t instanceof ps?function(n){if(n.op==="=="){if(vk(n.value))return{unaryFilter:{field:O0(n.field),op:"IS_NAN"}};if(xk(n.value))return{unaryFilter:{field:O0(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vk(n.value))return{unaryFilter:{field:O0(n.field),op:"IS_NOT_NAN"}};if(xk(n.value))return{unaryFilter:{field:O0(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O0(n.field),op:uK(n.op),value:n.value}}}(t):t instanceof Nc?function(n){const r=n.getFilters().map(a=>DU(a));return r.length===1?r[0]:{compositeFilter:{op:AK(n.op),filters:r}}}(t):Cn(54877,{filter:t})}function dK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,r,a,s=Nn.min(),i=Nn.min(),o=ui.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Od(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Od(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e){this.yt=e}}function hK(t){const e=oK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Q2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(){this.Cn=new pK}addToCollectionParentIndex(e,n){return this.Cn.add(n),bt.resolve()}getCollectionParents(e,n){return bt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return bt.resolve()}deleteFieldIndex(e,n){return bt.resolve()}deleteAllFieldIndexes(e){return bt.resolve()}createTargetIndexes(e,n){return bt.resolve()}getDocumentsMatchingTarget(e,n){return bt.resolve(null)}getIndexType(e,n){return bt.resolve(0)}getFieldIndexes(e,n){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,n){return bt.resolve(af.min())}getMinOffsetFromCollectionGroup(e,n){return bt.resolve(af.min())}updateCollectionGroup(e,n,r){return bt.resolve()}updateIndexEntries(e,n){return bt.resolve()}}class pK{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new ks(na.comparator),s=!a.has(r);return this.index[n]=a.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ks(na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UU=41943040;class go{static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(UU,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sm(0)}static cr(){return new Sm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="LruGarbageCollector",gK=1048576;function Lk([t,e],[n,r]){const a=ar(t,n);return a===0?ar(e,r):a}class xK{constructor(e){this.Ir=e,this.buffer=new ks(Lk),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Jt(Dk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qm(n)?Jt(Dk,"Ignoring IndexedDB error during garbage collection: ",n):await Om(n)}await this.Vr(3e5)})}}class yK{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return bt.resolve(qy.ce);const r=new xK(n);return this.mr.forEachTarget(e,a=>r.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>r.Ar(a))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Jt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(Rk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rk):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,i=Date.now(),this.nthSequenceNumber(e,a))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),P0()<=rr.DEBUG&&Jt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function wK(t,e){return new yK(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(){this.changes=new Dh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Di.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?bt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(r!==null&&Tg(r.mutation,a,Yo.empty(),pr.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,sr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=sr()){const a=rh();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,r).next(s=>{let i=ag();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=rh();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,sr()))}populateOverlays(e,n,r){const a=[];return r.forEach(s=>{n.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,a){let s=TA();const i=Sg(),o=function(){return Sg()}();return n.forEach((l,u)=>{const d=r.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof yf)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Tg(d.mutation,u,d.mutation.getFieldMask(),pr.now())):i.set(u.key,Yo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),n.forEach((u,d)=>o.set(u,new CK(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Sg();let a=new Ea((i,o)=>i-o),s=sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Yo.empty();d=o.applyToLocalView(u,d),r.set(l,d);const h=(a.get(o.batchId)||sr()).add(l);a=a.insert(o.batchId,h)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=xU();d.forEach(m=>{if(!s.has(m)){const g=EU(n.get(m),r.get(m));g!==null&&h.set(m,g),s=s.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return bt.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,a){return function(i){return cn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-s.size):bt.resolve(rh());let o=$g,l=s;return i.next(u=>bt.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,sr())).next(d=>({batchId:o,changes:gU(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new cn(n)).next(r=>{let a=ag();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const s=n.collectionGroup;let i=ag();return this.indexManager.getCollectionParents(e,s).next(o=>bt.forEach(o,l=>{const u=function(h,m){return new Hm(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,a).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Di.newInvalidDocument(d)))});let o=ag();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Tg(d.mutation,u,Yo.empty(),pr.now()),Yy(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return bt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Cu(a.createTime)}}(n)),bt.resolve()}getNamedQuery(e,n){return bt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(a){return{name:a.name,query:hK(a.bundledQuery),readTime:Cu(a.readTime)}}(n)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(){this.overlays=new Ea(cn.comparator),this.qr=new Map}getOverlay(e,n){return bt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rh();return bt.forEach(n,a=>this.getOverlay(e,a).next(s=>{s!==null&&r.set(a,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((a,s)=>{this.St(e,n,s)}),bt.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),bt.resolve()}getOverlaysForCollection(e,n,r){const a=rh(),s=n.length+1,i=new cn(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&a.set(l.getKey(),l)}return bt.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let s=new Ea((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=rh(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=rh(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return bt.resolve(o)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new zq(n,r));let s=this.qr.get(n);s===void 0&&(s=sr(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return bt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.Qr=new ks(Hs.$r),this.Ur=new ks(Hs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Hs(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Hs(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new cn(new na([])),r=new Hs(n,e),a=new Hs(n,e+1),s=[];return this.Ur.forEachInRange([r,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new cn(new na([])),r=new Hs(n,e),a=new Hs(n,e+1);let s=sr();return this.Ur.forEachInRange([r,a],i=>{s=s.add(i.key)}),s}containsKey(e){const n=new Hs(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Hs{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return cn.comparator(e.key,n.key)||ar(e.Yr,n.Yr)}static Kr(e,n){return ar(e.Yr,n.Yr)||cn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ks(Hs.$r)}checkEmpty(e){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Vq(s,n,r,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Hs(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bt.resolve(i)}lookupMutationBatch(e,n){return bt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),s=a<0?0:a;return bt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?cS:this.tr-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Hs(n,0),a=new Hs(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),bt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ks(ar);return n.forEach(a=>{const s=new Hs(a,0),i=new Hs(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{r=r.add(o.Yr)})}),bt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let s=r;cn.isDocumentKey(s)||(s=s.child(""));const i=new Hs(new cn(s),0);let o=new ks(ar);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),bt.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const a=this.Xr(r);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Fr(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return bt.forEach(n.mutations,a=>{const s=new Hs(a.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Hs(n,0),a=this.Zr.firstAfterOrEqual(r);return bt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,bt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(e){this.ri=e,this.docs=function(){return new Ea(cn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),s=a?a.size:0,i=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return bt.resolve(r?r.document.mutableCopy():Di.newInvalidDocument(n))}getEntries(e,n){let r=TA();return n.forEach(a=>{const s=this.docs.get(a);r=r.insert(a,s?s.document.mutableCopy():Di.newInvalidDocument(a))}),bt.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let s=TA();const i=n.path,o=new cn(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||aq(rq(d),r)<=0||(a.has(d.key)||Yy(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return bt.resolve(s)}getAllFromCollectionGroup(e,n,r,a){Cn(9500)}ii(e,n){return bt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kK(this)}getSize(e){return bt.resolve(this.size)}}class kK extends bK{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)}),bt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(e){this.persistence=e,this.si=new Dh(n=>dS(n),fS),this.lastRemoteSnapshotVersion=Nn.min(),this.highestTargetId=0,this.oi=0,this._i=new vS,this.targetCount=0,this.ai=Sm.ur()}forEachTarget(e,n){return this.si.forEach((r,a)=>n(a)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),bt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Sm(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,bt.resolve()}updateTargetData(e,n){return this.Pr(n),bt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,n,r){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),bt.waitFor(s).next(()=>a)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return bt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),bt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,s=[];return a&&n.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),bt.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),bt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return bt.resolve(r)}containsKey(e,n){return bt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n){this.ui={},this.overlays={},this.ci=new qy(0),this.li=!1,this.li=!0,this.hi=new TK,this.referenceDelegate=e(this),this.Pi=new IK(this),this.indexManager=new mK,this.remoteDocumentCache=function(a){return new NK(a)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new fK(n),this.Ii=new _K(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new BK(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Jt("MemoryPersistence","Starting transaction:",e);const a=new FK(this.ci.next());return this.referenceDelegate.Ei(),r(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,n){return bt.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class FK extends iq{constructor(e){super(),this.currentSequenceNumber=e}}class yS{constructor(e){this.persistence=e,this.Ri=new vS,this.Vi=null}static mi(e){return new yS(e)}get fi(){if(this.Vi)return this.Vi;throw Cn(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),bt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),bt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),bt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(a=>this.fi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.fi,r=>{const a=cn.fromPath(r);return this.gi(e,a).next(s=>{s||n.removeEntry(a,Nn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return bt.or([()=>bt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class G2{constructor(e,n){this.persistence=e,this.pi=new Dh(r=>cq(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=wK(this,n)}static mi(e,n){return new G2(e,n)}Ei(){}di(e){return bt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(a=>r+a))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return bt.forEach(this.pi,(r,a)=>this.br(e,r,a).next(s=>s?bt.resolve():n(a)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,i=>this.br(e,i,n).next(o=>{o||(r++,s.removeEntry(i,Nn.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=c2(e.data.value)),n}br(e,n,r){return bt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return bt.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=sr(),a=sr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new wS(e,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cH()?8:oq(Oi())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const s={result:null};return this.ys(e,n).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(e,n,a,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new RK;return this.Ss(e,n,i).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,i,o.size)})}).next(()=>s.result)}bs(e,n,r,a){return r.documentReadCount<this.fs?(P0()<=rr.DEBUG&&Jt("QueryEngine","SDK will not create cache indexes for query:",j0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),bt.resolve()):(P0()<=rr.DEBUG&&Jt("QueryEngine","Query:",j0(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(P0()<=rr.DEBUG&&Jt("QueryEngine","The SDK decides to create cache indexes for query:",j0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bu(n))):bt.resolve())}ys(e,n){if(Ck(n))return bt.resolve(null);let r=bu(n);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Q2(n,null,"F"),r=bu(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=sr(...s);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,o);return this.Cs(n,u,i,l.readTime)?this.ys(e,Q2(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,a){return Ck(n)||a.isEqual(Nn.min())?bt.resolve(null):this.ps.getDocuments(e,r).next(s=>{const i=this.Ds(n,s);return this.Cs(n,i,r,a)?bt.resolve(null):(P0()<=rr.DEBUG&&Jt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),j0(n)),this.vs(e,i,n,nq(a,$g)).next(o=>o))})}Ds(e,n){let r=new ks(mU(e));return n.forEach((a,s)=>{Yy(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,n,r){return P0()<=rr.DEBUG&&Jt("QueryEngine","Using full collection scan to execute query:",j0(n)),this.ps.getDocumentsMatchingQuery(e,n,af.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next(s=>(n.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="LocalStore",LK=3e8;class UK{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Ea(ar),this.xs=new Dh(s=>dS(s),fS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function MK(t,e,n,r){return new UK(t,e,n,r)}async function PU(t,e){const n=In(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(s=>(a=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let l=sr();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function PK(t,e){const n=In(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let g=bt.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(w=>{const E=u.docVersions.get(b);Fr(E!==null,48541),w.version.compareTo(E)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=sr();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,a))})}function jU(t){const e=In(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jK(t,e){const n=In(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=a.get(h);if(!m)return;o.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ui.EMPTY_BYTE_STRING,Nn.min()).withLastLimboFreeSnapshotVersion(Nn.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),a=a.insert(h,g),function(w,E,N){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=LK?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,g,d)&&o.push(n.Pi.updateTargetData(s,g))});let l=TA(),u=sr();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(OK(s,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(Nn.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return bt.waitFor(o).next(()=>i.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=a,s))}function OK(t,e,n){let r=sr(),a=sr();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=TA();return n.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Nn.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Jt(bS,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function QK(t,e){const n=In(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cS),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HK(t,e){const n=In(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Pi.getTargetData(r,e).next(s=>s?(a=s,bt.resolve(a)):n.Pi.allocateTargetId(r).next(i=>(a=new Od(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function f_(t,e,n){const r=In(t),a=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!Qm(i))throw i;Jt(bS,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Uk(t,e,n){const r=In(t);let a=Nn.min(),s=sr();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=In(l),m=h.xs.get(d);return m!==void 0?bt.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(r,i,bu(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(i,e,n?a:Nn.min(),n?s:sr())).next(o=>(VK(r,Bq(e),o),{documents:o,Qs:s})))}function VK(t,e,n){let r=t.Os.get(e)||Nn.min();n.forEach((a,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Mk{constructor(){this.activeTargetIds=Dq()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zK{constructor(){this.Mo=new Mk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="ConnectivityMonitor";class jk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Jt(Pk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Jt(Pk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av=null;function h_(){return av===null?av=function(){return 268435456+Math.round(2147483648*Math.random())}():av++,"0x"+av.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="RestConnection",qK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KK{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===P2?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,s){const i=h_(),o=this.zo(e,n.toUriEncodedString());Jt(yC,`Sending RPC '${e}' ${i}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=Um(u);return this.Jo(e,o,l,r,d).then(h=>(Jt(yC,`Received RPC '${e}' ${i}: `,h),h),h=>{throw bm(yC,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",r),h})}Ho(e,n,r,a,s,i){return this.Go(e,n,r,a,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,s)=>e[s]=a),r&&r.headers.forEach((a,s)=>e[s]=a)}zo(e,n){const r=qK[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="WebChannelConnection";class $K extends KK{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,s){const i=h_();return new Promise((o,l)=>{const u=new HL;u.setWithCredentials(!0),u.listenOnce(VL.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case l2.NO_ERROR:const h=u.getResponseJson();Jt(Ci,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case l2.TIMEOUT:Jt(Ci,`RPC '${e}' ${i} timed out`),l(new zt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case l2.HTTP_ERROR:const m=u.getStatus();if(Jt(Ci,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const w=function(N){const I=N.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(I)>=0?I:mt.UNKNOWN}(b.status);l(new zt(w,b.message))}else l(new zt(mt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new zt(mt.UNAVAILABLE,"Connection failed."));break;default:Cn(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Jt(Ci,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(a);Jt(Ci,`RPC '${e}' ${i} sending request:`,a),u.send(n,"POST",d,r,15)})}T_(e,n,r){const a=h_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=qL(),o=GL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Jt(Ci,`Creating RPC '${e}' stream ${a}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,g=!1;const b=new WK({Yo:E=>{g?Jt(Ci,`Not sending because RPC '${e}' stream ${a} is closed:`,E):(m||(Jt(Ci,`Opening RPC '${e}' stream ${a} transport.`),h.open(),m=!0),Jt(Ci,`RPC '${e}' stream ${a} sending:`,E),h.send(E))},Zo:()=>h.close()}),w=(E,N,I)=>{E.listen(N,k=>{try{I(k)}catch(U){setTimeout(()=>{throw U},0)}})};return w(h,rg.EventType.OPEN,()=>{g||(Jt(Ci,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),w(h,rg.EventType.CLOSE,()=>{g||(g=!0,Jt(Ci,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(h))}),w(h,rg.EventType.ERROR,E=>{g||(g=!0,bm(Ci,`RPC '${e}' stream ${a} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new zt(mt.UNAVAILABLE,"The operation could not be completed")))}),w(h,rg.EventType.MESSAGE,E=>{var N;if(!g){const I=E.data[0];Fr(!!I,16349);const k=I,U=(k==null?void 0:k.error)||((N=k[0])==null?void 0:N.error);if(U){Jt(Ci,`RPC '${e}' stream ${a} received error:`,U);const P=U.status;let D=function(T){const O=ds[T];if(O!==void 0)return SU(O)}(P),_=U.message;D===void 0&&(D=mt.INTERNAL,_="Unknown error status: "+P+" with message "+U.message),g=!0,b.a_(new zt(D,_)),h.close()}else Jt(Ci,`RPC '${e}' stream ${a} received:`,I),b.u_(I)}}),w(o,zL.STAT_EVENT,E=>{E.stat===n_.PROXY?Jt(Ci,`RPC '${e}' stream ${a} detected buffering proxy`):E.stat===n_.NOPROXY&&Jt(Ci,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function wC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){return new Zq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n,r=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&Jt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="PersistentStream";class QU{constructor(e,n,r,a,s,i,o,l){this.Mi=e,this.S_=r,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OU(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===mt.RESOURCE_EXHAUSTED?(SA(n.toString()),SA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.D_===n&&this.G_(r,a)},r=>{e(()=>{const a=new zt(mt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{r(()=>this.z_(a))}),this.stream.onMessage(a=>{r(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Jt(Ok,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Jt(Ok,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JK extends QU{constructor(e,n,r,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,i),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=nK(this.serializer,e),r=function(s){if(!("targetChange"in s))return Nn.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Nn.min():i.readTime?Cu(i.readTime):Nn.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=d_(this.serializer),n.addTarget=function(s,i){let o;const l=i.target;if(o=o_(l)?{documents:sK(s,l)}:{query:iK(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=NU(s,i.resumeToken);const u=c_(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Nn.min())>0){o.readTime=z2(s,i.snapshotVersion.toTimestamp());const u=c_(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=lK(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=d_(this.serializer),n.removeTarget=e,this.q_(n)}}class YK extends QU{constructor(e,n,r,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aK(e.writeResults,e.commitTime),r=Cu(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=d_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rK(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{}class ZK extends XK{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new zt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(e,u_(n,r),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new zt(mt.UNKNOWN,s.toString())})}Ho(e,n,r,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,u_(n,r),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new zt(mt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class eW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(SA(n),this.aa=!1):Jt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="RemoteStore";class tW{constructor(e,n,r,a,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{r.enqueueAndForget(async()=>{Lh(this)&&(Jt(Ch,"Restarting streams for network reachability change."),await async function(l){const u=In(l);u.Ea.add(4),await Mx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await nw(u)}(this))})}),this.Ra=new eW(r,a)}}async function nw(t){if(Lh(t))for(const e of t.da)await e(!0)}async function Mx(t){for(const e of t.da)await e(!1)}function HU(t,e){const n=In(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),SS(n)?_S(n):Vm(n).O_()&&ES(n,e))}function CS(t,e){const n=In(t),r=Vm(n);n.Ia.delete(e),r.O_()&&VU(n,e),n.Ia.size===0&&(r.O_()?r.L_():Lh(n)&&n.Ra.set("Unknown"))}function ES(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vm(t).Y_(e)}function VU(t,e){t.Va.Ue(e),Vm(t).Z_(e)}function _S(t){t.Va=new $q({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Vm(t).start(),t.Ra.ua()}function SS(t){return Lh(t)&&!Vm(t).x_()&&t.Ia.size>0}function Lh(t){return In(t).Ea.size===0}function zU(t){t.Va=void 0}async function nW(t){t.Ra.set("Online")}async function rW(t){t.Ia.forEach((e,n)=>{ES(t,e)})}async function aW(t,e){zU(t),SS(t)?(t.Ra.ha(e),_S(t)):t.Ra.set("Unknown")}async function sW(t,e,n){if(t.Ra.set("Online"),e instanceof BU&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(t,e)}catch(r){Jt(Ch,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await q2(t,r)}else if(e instanceof d2?t.Va.Ze(e):e instanceof TU?t.Va.st(e):t.Va.tt(e),!n.isEqual(Nn.min()))try{const r=await jU(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(ui.EMPTY_BYTE_STRING,d.snapshotVersion)),VU(s,l);const h=new Od(d.target,l,u,d.sequenceNumber);ES(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Jt(Ch,"Failed to raise snapshot:",r),await q2(t,r)}}async function q2(t,e,n){if(!Qm(e))throw e;t.Ea.add(1),await Mx(t),t.Ra.set("Offline"),n||(n=()=>jU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Jt(Ch,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await nw(t)})}function GU(t,e){return e().catch(n=>q2(t,n,e))}async function rw(t){const e=In(t),n=cf(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cS;for(;iW(e);)try{const a=await QK(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,oW(e,a)}catch(a){await q2(e,a)}qU(e)&&KU(e)}function iW(t){return Lh(t)&&t.Ta.length<10}function oW(t,e){t.Ta.push(e);const n=cf(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qU(t){return Lh(t)&&!cf(t).x_()&&t.Ta.length>0}function KU(t){cf(t).start()}async function lW(t){cf(t).ra()}async function cW(t){const e=cf(t);for(const n of t.Ta)e.ea(n.mutations)}async function uW(t,e,n){const r=t.Ta.shift(),a=pS.from(r,e,n);await GU(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await rw(t)}async function AW(t,e){e&&cf(t).X_&&await async function(r,a){if(function(i){return qq(i)&&i!==mt.ABORTED}(a.code)){const s=r.Ta.shift();cf(r).B_(),await GU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,a)),await rw(r)}}(t,e),qU(t)&&KU(t)}async function Qk(t,e){const n=In(t);n.asyncQueue.verifyOperationInProgress(),Jt(Ch,"RemoteStore received new credentials");const r=Lh(n);n.Ea.add(3),await Mx(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nw(n)}async function dW(t,e){const n=In(t);e?(n.Ea.delete(2),await nw(n)):e||(n.Ea.add(2),await Mx(n),n.Ra.set("Unknown"))}function Vm(t){return t.ma||(t.ma=function(n,r,a){const s=In(n);return s.sa(),new JK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:nW.bind(null,t),t_:rW.bind(null,t),r_:aW.bind(null,t),H_:sW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),SS(t)?_S(t):t.Ra.set("Unknown")):(await t.ma.stop(),zU(t))})),t.ma}function cf(t){return t.fa||(t.fa=function(n,r,a){const s=In(n);return s.sa(),new YK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:lW.bind(null,t),r_:AW.bind(null,t),ta:cW.bind(null,t),na:uW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await rw(t)):(await t.fa.stop(),t.Ta.length>0&&(Jt(Ch,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r,a,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=s,this.deferred=new vA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,s){const i=Date.now()+r,o=new TS(e,n,i,a,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new zt(mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function BS(t,e){if(SA("AsyncQueue",`${e}: ${t}`),Qm(t))return new zt(mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{static emptySet(e){return new nm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||cn.comparator(n.key,r.key):(n,r)=>cn.comparator(n.key,r.key),this.keyedMap=ag(),this.sortedSet=new Ea(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,s=r.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.ga=new Ea(cn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Cn(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tm{constructor(e,n,r,a,s,i,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,a,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Tm(e,n,nm.emptySet(n),i,r,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class hW{constructor(){this.queries=Vk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=In(n),s=a.queries;a.queries=Vk(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new zt(mt.ABORTED,"Firestore shutting down"))}}function Vk(){return new Dh(t=>hU(t),Jy)}async function NS(t,e){const n=In(t);let r=3;const a=e.query;let s=n.queries.get(a);s?!s.ba()&&e.Da()&&(r=2):(s=new fW,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(a,!0);break;case 1:s.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(i){const o=BS(i,`Initialization of query '${j0(e.query)}' failed`);return void e.onError(o)}n.queries.set(a,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&IS(n)}async function kS(t,e){const n=In(t),r=e.query;let a=3;const s=n.queries.get(r);if(s){const i=s.Sa.indexOf(e);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mW(t,e){const n=In(t);let r=!1;for(const a of e){const s=a.query,i=n.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(r=!0);i.wa=a}}r&&IS(n)}function pW(t,e,n){const r=In(t),a=r.queries.get(e);if(a)for(const s of a.Sa)s.onError(n);r.queries.delete(e)}function IS(t){t.Ca.forEach(e=>{e.next()})}var m_,zk;(zk=m_||(m_={})).Ma="default",zk.Cache="cache";class FS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Tm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Tm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.key=e}}class $U{constructor(e){this.key=e}}class gW{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=sr(),this.mutatedKeys=sr(),this.eu=mU(e),this.tu=new nm(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Hk,a=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,h)=>{const m=a.get(d),g=Yy(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;m&&g?m.data.isEqual(g.data)?b!==w&&(r.track({type:3,doc:g}),E=!0):this.su(m,g)||(r.track({type:2,doc:g}),E=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(o=!0)):!m&&g?(r.track({type:0,doc:g}),E=!0):m&&!g&&(r.track({type:1,doc:m}),E=!0,(l||u)&&(o=!0)),E&&(g?(i=i.add(g),s=w?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:i,iu:r,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cn(20277,{Rt:E})}};return w(g)-w(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),a=a??!1;const o=n&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Tm(this.query,e.tu,s,i,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=sr(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new $U(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new WU(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=sr();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Tm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const RS="SyncEngine";class xW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vW{constructor(e){this.key=e,this.hu=!1}}class yW{constructor(e,n,r,a,s,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Dh(o=>hU(o),Jy),this.Iu=new Map,this.Eu=new Set,this.du=new Ea(cn.comparator),this.Au=new Map,this.Ru=new vS,this.Vu={},this.mu=new Map,this.fu=Sm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wW(t,e,n=!0){const r=t8(t);let a;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await JU(r,e,n,!0),a}async function bW(t,e){const n=t8(t);await JU(n,e,!0,!1)}async function JU(t,e,n,r){const a=await HK(t.localStore,bu(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await CW(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&n&&HU(t.remoteStore,a),o}async function CW(t,e,n,r,a){t.pu=(h,m,g)=>async function(w,E,N,I){let k=E.view.ru(N);k.Cs&&(k=await Uk(w.localStore,E.query,!1).then(({documents:_})=>E.view.ru(_,k)));const U=I&&I.targetChanges.get(E.targetId),P=I&&I.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(k,w.isPrimaryClient,U,P);return qk(w,E.targetId,D.au),D.snapshot}(t,h,m,g);const s=await Uk(t.localStore,e,!0),i=new gW(e,s.Qs),o=i.ru(s.documents),l=Ux.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),u=i.applyChanges(o,t.isPrimaryClient,l);qk(t,n,u.au);const d=new xW(e,n,i);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function EW(t,e,n){const r=In(t),a=r.Tu.get(e),s=r.Iu.get(a.targetId);if(s.length>1)return r.Iu.set(a.targetId,s.filter(i=>!Jy(i,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await f_(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&CS(r.remoteStore,a.targetId),p_(r,a.targetId)}).catch(Om)):(p_(r,a.targetId),await f_(r.localStore,a.targetId,!0))}async function _W(t,e){const n=In(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),CS(n.remoteStore,r.targetId))}async function SW(t,e,n){const r=RW(t);try{const a=await function(i,o){const l=In(i),u=pr.now(),d=o.reduce((g,b)=>g.add(b.key),sr());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=TA(),w=sr();return l.Ns.getEntries(g,d).next(E=>{b=E,b.forEach((N,I)=>{I.isValidDocument()||(w=w.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(E=>{h=E;const N=[];for(const I of o){const k=Qq(I,h.get(I.key).overlayedDocument);k!=null&&N.push(new yf(I.key,k,iU(k.value.mapValue),jl.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,N,o)}).next(E=>{m=E;const N=E.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(g,E.batchId,N)})}).then(()=>({batchId:m.batchId,changes:gU(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Ea(ar)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(r,a.batchId,n),await Px(r,a.changes),await rw(r.remoteStore)}catch(a){const s=BS(a,"Failed to persist write");n.reject(s)}}async function YU(t,e){const n=In(t);try{const r=await jK(n.localStore,e);e.targetChanges.forEach((a,s)=>{const i=n.Au.get(s);i&&(Fr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Fr(i.hu,14607):a.removedDocuments.size>0&&(Fr(i.hu,42227),i.hu=!1))}),await Px(n,r,e)}catch(r){await Om(r)}}function Gk(t,e,n){const r=In(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach((s,i)=>{const o=i.view.va(e);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=In(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(u=!0)}),u&&IS(l)}(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TW(t,e,n){const r=In(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),s=a&&a.key;if(s){let i=new Ea(cn.comparator);i=i.insert(s,Di.newNoDocument(s,Nn.min()));const o=sr().add(s),l=new ew(Nn.min(),new Map,new Ea(ar),i,o);await YU(r,l),r.du=r.du.remove(s),r.Au.delete(e),DS(r)}else await f_(r.localStore,e,!1).then(()=>p_(r,e,n)).catch(Om)}async function BW(t,e){const n=In(t),r=e.batch.batchId;try{const a=await PK(n.localStore,e);ZU(n,r,null),XU(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Px(n,a)}catch(a){await Om(a)}}async function NW(t,e,n){const r=In(t);try{const a=await function(i,o){const l=In(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Fr(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);ZU(r,e,n),XU(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Px(r,a)}catch(a){await Om(a)}}function XU(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ZU(t,e,n){const r=In(t);let a=r.Vu[r.currentUser.toKey()];if(a){const s=a.get(e);s&&(n?s.reject(n):s.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function p_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||e8(t,r)})}function e8(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(CS(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),DS(t))}function qk(t,e,n){for(const r of n)r instanceof WU?(t.Ru.addReference(r.key,e),kW(t,r)):r instanceof $U?(Jt(RS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||e8(t,r.key)):Cn(19791,{wu:r})}function kW(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Jt(RS,"New document in limbo: "+n),t.Eu.add(r),DS(t))}function DS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new cn(na.fromString(e)),r=t.fu.next();t.Au.set(r,new vW(n)),t.du=t.du.insert(n,r),HU(t.remoteStore,new Od(bu($y(n.path)),r,"TargetPurposeLimboResolution",qy.ce))}}async function Px(t,e,n){const r=In(t),a=[],s=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{i.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){a.push(u);const h=wS.As(l.targetId,u);s.push(h)}}))}),await Promise.all(i),r.Pu.H_(a),await async function(l,u){const d=In(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>bt.forEach(u,m=>bt.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>bt.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Qm(h))throw h;Jt(bS,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(m,w)}}}(r.localStore,s))}async function IW(t,e){const n=In(t);if(!n.currentUser.isEqual(e)){Jt(RS,"User change. New user:",e.toKey());const r=await PU(n.localStore,e);n.currentUser=e,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new zt(mt.CANCELLED,i))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Px(n,r.Ls)}}function FW(t,e){const n=In(t),r=n.Au.get(e);if(r&&r.hu)return sr().add(r.key);{let a=sr();const s=n.Iu.get(e);if(!s)return a;for(const i of s){const o=n.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function t8(t){const e=In(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TW.bind(null,e),e.Pu.H_=mW.bind(null,e.eventManager),e.Pu.yu=pW.bind(null,e.eventManager),e}function RW(t){const e=In(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NW.bind(null,e),e}class K2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MK(this.persistence,new DK,e.initialUser,this.serializer)}Cu(e){return new MU(yS.mi,this.serializer)}Du(e){return new zK}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}K2.provider={build:()=>new K2};class DW extends K2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fr(this.persistence.referenceDelegate instanceof G2,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vK(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new MU(r=>G2.mi(r,n),this.serializer)}}class g_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IW.bind(null,this.syncEngine),await dW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hW}()}createDatastore(e){const n=tw(e.databaseInfo.databaseId),r=function(s){return new $K(s)}(e.databaseInfo);return function(s,i,o,l){return new ZK(s,i,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,a,s,i,o){return new tW(r,a,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Gk(this.syncEngine,n,0),function(){return jk.v()?new jk:new GK}())}createSyncEngine(e,n){return function(a,s,i,o,l,u,d){const h=new yW(a,s,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const s=In(a);Jt(Ch,"RemoteStore shutting down."),s.Ea.add(5),await Mx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}g_.provider={build:()=>new g_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):SA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="FirestoreClient";class LW{constructor(e,n,r,a,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=ki.UNAUTHENTICATED,this.clientId=lS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{Jt(uf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Jt(uf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=BS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bC(t,e){t.asyncQueue.verifyOperationInProgress(),Jt(uf,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async a=>{r.isEqual(a)||(await PU(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UW(t);Jt(uf,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Qk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,a)=>Qk(e.remoteStore,a)),t._onlineComponents=e}async function UW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Jt(uf,"Using user provided OfflineComponentProvider");try{await bC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===mt.FAILED_PRECONDITION||a.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;bm("Error using user provided cache. Falling back to memory cache: "+n),await bC(t,new K2)}}else Jt(uf,"Using default OfflineComponentProvider"),await bC(t,new DW(void 0));return t._offlineComponents}async function n8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Jt(uf,"Using user provided OnlineComponentProvider"),await Kk(t,t._uninitializedComponentsProvider._online)):(Jt(uf,"Using default OnlineComponentProvider"),await Kk(t,new g_))),t._onlineComponents}function MW(t){return n8(t).then(e=>e.syncEngine)}async function W2(t){const e=await n8(t),n=e.eventManager;return n.onListen=wW.bind(null,e.syncEngine),n.onUnlisten=EW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_W.bind(null,e.syncEngine),n}function PW(t,e,n={}){const r=new vA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new LS({next:m=>{d.Nu(),i.enqueueAndForget(()=>kS(s,h));const g=m.docs.has(o);!g&&m.fromCache?u.reject(new zt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new zt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new FS($y(o.path),d,{includeMetadataChanges:!0,qa:!0});return NS(s,h)}(await W2(t),t.asyncQueue,e,n,r)),r.promise}function jW(t,e,n={}){const r=new vA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new LS({next:m=>{d.Nu(),i.enqueueAndForget(()=>kS(s,h)),m.fromCache&&l.source==="server"?u.reject(new zt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new FS(o,d,{includeMetadataChanges:!0,qa:!0});return NS(s,h)}(await W2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8="firestore.googleapis.com",$k=!0;class Jk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new zt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a8,this.ssl=$k}else this.host=e.host,this.ssl=e.ssl??$k;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gK)throw new zt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r8(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new zt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new zt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new zt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aw{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new zt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new zt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zG;switch(r.type){case"firstParty":return new WG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new zt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wk.get(n);r&&(Jt("ComponentProvider","Removing Datastore"),Wk.delete(n),r.terminate())}(this),Promise.resolve()}}function OW(t,e,n,r={}){var u;t=wo(t,aw);const a=Um(e),s=t._getSettings(),i={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;a&&(eL(`https://${o}`),tL("Firestore",!0)),s.host!==a8&&s.host!==o&&bm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:r};if(!vh(l,i)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=ki.MOCK_USER;else{d=eH(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new zt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ki(m)}t._authCredentials=new GG(new WL(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new UA(this.firestore,e,this._query)}}class Ua{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ua(this.firestore,e,this._key)}toJSON(){return{type:Ua._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dx(n,Ua._jsonSchema))return new Ua(e,r||null,new cn(na.fromString(n.referencePath)))}}Ua._jsonSchemaVersion="firestore/documentReference/1.0",Ua._jsonSchema={type:gs("string",Ua._jsonSchemaVersion),referencePath:gs("string")};class Xd extends UA{constructor(e,n,r){super(e,n,$y(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ua(this.firestore,null,new cn(e))}withConverter(e){return new Xd(this.firestore,e,this._path)}}function xr(t,e,...n){if(t=Is(t),$L("collection","path",e),t instanceof aw){const r=na.fromString(e,...n);return ck(r),new Xd(t,null,r)}{if(!(t instanceof Ua||t instanceof Xd))throw new zt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(na.fromString(e,...n));return ck(r),new Xd(t.firestore,null,r)}}function vs(t,e,...n){if(t=Is(t),arguments.length===1&&(e=lS.newId()),$L("doc","path",e),t instanceof aw){const r=na.fromString(e,...n);return lk(r),new Ua(t,null,new cn(r))}{if(!(t instanceof Ua||t instanceof Xd))throw new zt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(na.fromString(e,...n));return lk(r),new Ua(t.firestore,t instanceof Xd?t.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="AsyncQueue";class Xk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OU(this,"async_queue_retry"),this._c=()=>{const r=wC();r&&Jt(Yk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=wC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new vA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qm(e))throw e;Jt(Yk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,SA("INTERNAL UNHANDLED ERROR: ",Zk(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=TS.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Cn(47125,{Pc:Zk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const s of r)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class BA extends aw{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new Xk,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xk(e),this._firestoreClient=void 0,await e}}}function s8(t,e){const n=typeof t=="object"?t:aL(),r=typeof t=="string"?t:P2,a=Y5(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const s=X9("firestore");s&&OW(a,...s)}return a}function sw(t){if(t._terminated)throw new zt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QW(t),t._firestoreClient}function QW(t){var r,a,s;const e=t._freezeSettings(),n=function(o,l,u,d){return new dq(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,r8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new LW(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(ui.fromBase64String(e))}catch(n){throw new zt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dl(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dx(e,Dl._jsonSchema))return Dl.fromBase64String(e.bytes)}}Dl._jsonSchemaVersion="firestore/bytes/1.0",Dl._jsonSchema={type:gs("string",Dl._jsonSchemaVersion),bytes:gs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new zt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new zt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new zt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ar(this._lat,e._lat)||ar(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Eu._jsonSchemaVersion}}static fromJSON(e){if(Dx(e,Eu._jsonSchema))return new Eu(e.latitude,e.longitude)}}Eu._jsonSchemaVersion="firestore/geoPoint/1.0",Eu._jsonSchema={type:gs("string",Eu._jsonSchemaVersion),latitude:gs("number"),longitude:gs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_u._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dx(e,_u._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _u(e.vectorValues);throw new zt(mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_u._jsonSchemaVersion="firestore/vectorValue/1.0",_u._jsonSchema={type:gs("string",_u._jsonSchemaVersion),vectorValues:gs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW=/^__.*__$/;class VW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yf(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lx(e,this.data,n,this.fieldTransforms)}}class i8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yf(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cn(40011,{Ac:t})}}class MS{constructor(e,n,r,a,s,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new MS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(o8(this.Ac)&&HW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||tw(e)}Cc(e,n,r,a=!1){return new MS({Ac:e,methodName:n,Dc:r,path:oi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ow(t){const e=t._freezeSettings(),n=tw(t._databaseId);return new zW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function l8(t,e,n,r,a,s={}){const i=t.Cc(s.merge||s.mergeFields?2:0,e,n,a);PS("Data must be an object, but it was:",i,r);const o=c8(r,i);let l,u;if(s.merge)l=new Yo(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=x_(e,h,n);if(!i.contains(m))throw new zt(mt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);A8(d,m)||d.push(m)}l=new Yo(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new VW(new vo(o),l,u)}class lw extends US{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lw}}function GW(t,e,n,r){const a=t.Cc(1,e,n);PS("Data must be an object, but it was:",a,r);const s=[],i=vo.empty();vf(r,(l,u)=>{const d=jS(e,l,n);u=Is(u);const h=a.yc(d);if(u instanceof lw)s.push(d);else{const m=jx(u,h);m!=null&&(s.push(d),i.set(d,m))}});const o=new Yo(s);return new i8(i,o,a.fieldTransforms)}function qW(t,e,n,r,a,s){const i=t.Cc(1,e,n),o=[x_(e,r,n)],l=[a];if(s.length%2!=0)throw new zt(mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(x_(e,s[m])),l.push(s[m+1]);const u=[],d=vo.empty();for(let m=o.length-1;m>=0;--m)if(!A8(u,o[m])){const g=o[m];let b=l[m];b=Is(b);const w=i.yc(g);if(b instanceof lw)u.push(g);else{const E=jx(b,w);E!=null&&(u.push(g),d.set(g,E))}}const h=new Yo(u);return new i8(d,h,i.fieldTransforms)}function KW(t,e,n,r=!1){return jx(n,t.Cc(r?4:3,e))}function jx(t,e){if(u8(t=Is(t)))return PS("Unsupported field value:",e,t),c8(t,e);if(t instanceof US)return function(r,a){if(!o8(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,a){const s=[];let i=0;for(const o of r){let l=jx(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,a){if((r=Is(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Lq(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pr.fromDate(r);return{timestampValue:z2(a.serializer,s)}}if(r instanceof pr){const s=new pr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:z2(a.serializer,s)}}if(r instanceof Eu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dl)return{bytesValue:NU(a.serializer,r._byteString)};if(r instanceof Ua){const s=a.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xS(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof _u)return function(i,o){return{mapValue:{fields:{[aU]:{stringValue:sU},[j2]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return hS(o.serializer,u)})}}}}}}(r,a);throw a.Sc(`Unsupported field value: ${Gy(r)}`)}(t,e)}function c8(t,e){const n={};return XL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vf(t,(r,a)=>{const s=jx(a,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function u8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof Eu||t instanceof Dl||t instanceof Ua||t instanceof US||t instanceof _u)}function PS(t,e,n){if(!u8(n)||!JL(n)){const r=Gy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function x_(t,e,n){if((e=Is(e))instanceof iw)return e._internalPath;if(typeof e=="string")return jS(t,e);throw $2("Field path arguments must be of type string or ",t,!1,void 0,n)}const WW=new RegExp("[~\\*/\\[\\]]");function jS(t,e,n){if(e.search(WW)>=0)throw $2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iw(...e.split("."))._internalPath}catch{throw $2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $2(t,e,n,r,a){const s=r&&!r.isEmpty(),i=a!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${r}`),i&&(l+=` in document ${a}`),l+=")"),new zt(mt.INVALID_ARGUMENT,o+t+l)}function A8(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n,r,a,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ua(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $W(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $W extends d8{data(){return super.data()}}function cw(t,e){return typeof e=="string"?jS(t,e):e instanceof iw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new zt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OS{}class QS extends OS{}function ts(t,e,...n){let r=[];e instanceof OS&&r.push(e),r=r.concat(n),function(s){const i=s.filter(l=>l instanceof HS).length,o=s.filter(l=>l instanceof uw).length;if(i>1||i>0&&o>0)throw new zt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)t=a._apply(t);return t}class uw extends QS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uw(e,n,r)}_apply(e){const n=this._parse(e);return h8(e._query,n),new UA(e.firestore,e.converter,l_(e._query,n))}_parse(e){const n=ow(e.firestore);return function(s,i,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new zt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){n3(h,d);const b=[];for(const w of h)b.push(t3(l,s,w));m={arrayValue:{values:b}}}else m=t3(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||n3(h,d),m=KW(o,i,h,d==="in"||d==="not-in");return ps.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bo(t,e,n){const r=e,a=cw("where",t);return uw._create(a,r,n)}class HS extends OS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new HS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nc.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)h8(i,l),i=l_(i,l)}(e._query,n),new UA(e.firestore,e.converter,l_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class VS extends QS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new VS(e,n)}_apply(e){const n=function(a,s,i){if(a.startAt!==null)throw new zt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new zt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zg(s,i)}(e._query,this._field,this._direction);return new UA(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Hm(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function Ws(t,e="asc"){const n=e,r=cw("orderBy",t);return VS._create(r,n)}class zS extends QS{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zS(e,n,r)}_apply(e){return new UA(e.firestore,e.converter,Q2(e._query,this._limit,this._limitType))}}function GS(t){return tq("limit",t),zS._create("limit",t,"F")}function t3(t,e,n){if(typeof(n=Is(n))=="string"){if(n==="")throw new zt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fU(e)&&n.indexOf("/")!==-1)throw new zt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(na.fromString(n));if(!cn.isDocumentKey(r))throw new zt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gk(t,new cn(r))}if(n instanceof Ua)return gk(t,n._key);throw new zt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gy(n)}.`)}function n3(t,e){if(!Array.isArray(t)||t.length===0)throw new zt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h8(t,e){const n=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new zt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new zt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JW{convertValue(e,n="none"){switch(lf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ja(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(of(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Cn(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vf(e,(a,s)=>{r[a]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,a,s;const n=(s=(a=(r=e.fields)==null?void 0:r[j2].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Ja(i.doubleValue));return new _u(n)}convertGeoPoint(e){return new Eu(Ja(e.latitude),Ja(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jg(e));default:return null}}convertTimestamp(e){const n=sf(e);return new pr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=na.fromString(e);Fr(LU(r),9688,{name:e});const a=new Yg(r.get(1),r.get(3)),s=new cn(r.popFirst(5));return a.isEqual(n)||SA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ig{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends d8{constructor(e,n,r,a,s,i){super(e,n,r,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new f2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lh._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lh._jsonSchemaVersion="firestore/documentSnapshot/1.0",lh._jsonSchema={type:gs("string",lh._jsonSchemaVersion),bundleSource:gs("string","DocumentSnapshot"),bundleName:gs("string"),bundle:gs("string")};class f2 extends lh{data(e={}){return super.data(e)}}class ch{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ig(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new f2(this._firestore,this._userDataWriter,r.key,r,new ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new zt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new f2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new ig(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new f2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new ig(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:YW(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new zt(mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ch._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cn(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t){t=wo(t,Ua);const e=wo(t.firestore,BA);return PW(sw(e),t._key).then(n=>g8(e,t,n))}ch._jsonSchemaVersion="firestore/querySnapshot/1.0",ch._jsonSchema={type:gs("string",ch._jsonSchemaVersion),bundleSource:gs("string","QuerySnapshot"),bundleName:gs("string"),bundle:gs("string")};class qS extends JW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ua(this.firestore,null,n)}}function Xi(t){t=wo(t,UA);const e=wo(t.firestore,BA),n=sw(e),r=new qS(e);return f8(t._query),jW(n,t._query).then(a=>new ch(e,r,t,a))}function p8(t,e,n){t=wo(t,Ua);const r=wo(t.firestore,BA),a=m8(t.converter,e);return Aw(r,[l8(ow(r),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,jl.none())])}function zm(t,e,n,...r){t=wo(t,Ua);const a=wo(t.firestore,BA),s=ow(a);let i;return i=typeof(e=Is(e))=="string"||e instanceof iw?qW(s,"updateDoc",t._key,e,n,r):GW(s,"updateDoc",t._key,e),Aw(a,[i.toMutation(t._key,jl.exists(!0))])}function wf(t){return Aw(wo(t.firestore,BA),[new mS(t._key,jl.none())])}function MA(t,e){const n=wo(t.firestore,BA),r=vs(t),a=m8(t.converter,e);return Aw(n,[l8(ow(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,jl.exists(!1))]).then(()=>r)}function PA(t,...e){var l,u,d;t=Is(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||e3(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(e3(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,i,o;if(t instanceof Ua)i=wo(t.firestore,BA),o=$y(t._key.path),s={next:h=>{e[r]&&e[r](g8(i,t,h))},error:e[r+1],complete:e[r+2]};else{const h=wo(t,UA);i=wo(h.firestore,BA),o=h._query;const m=new qS(i);s={next:g=>{e[r]&&e[r](new ch(i,m,h,g))},error:e[r+1],complete:e[r+2]},f8(t._query)}return function(m,g,b,w){const E=new LS(w),N=new FS(g,E,b);return m.asyncQueue.enqueueAndForget(async()=>NS(await W2(m),N)),()=>{E.Nu(),m.asyncQueue.enqueueAndForget(async()=>kS(await W2(m),N))}}(sw(i),o,a,s)}function Aw(t,e){return function(r,a){const s=new vA;return r.asyncQueue.enqueueAndForget(async()=>SW(await MW(r),a,s)),s.promise}(sw(t),e)}function g8(t,e,n){const r=n.docs.get(e._key),a=new qS(t);return new lh(t,a,e._key,r,new ig(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){jm=a})(Mm),ym(new yh("firestore",(r,{instanceIdentifier:a,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new BA(new qG(r.getProvider("auth-internal")),new $G(i,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new zt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yg(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),$d(ak,sk,e),$d(ak,sk,"esm2020")})();const XW={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},x8=X5(XW),Op=OL(x8),hr=s8(x8);var rn=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(rn||{}),Gn=(t=>(t.EVALUACION="Evaluacin",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedaggica",t))(Gn||{}),Zf=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Gua de Aprendizaje",t.RUBRICA="Rbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(Zf||{});const ys="w-6 h-6",dw="w-24 h-24",KS=()=>A.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[A.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),ZW=()=>A.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[A.jsx("path",{d:"M9 18h6"}),A.jsx("path",{d:"M10 22h4"}),A.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),e$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),t$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),og=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),lg=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),v8=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:dw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),r$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:dw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),a$=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:dw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:dw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),i$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),sv=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),CC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),iv=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),EC=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),o$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),l$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),u$=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s3=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),A$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),_C=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),d$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ys,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),f$=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ys,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),i3=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ys,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),h$=[{id:rn.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:A.jsx(n$,{})},{id:rn.PROFESORADO,label:"Profesorado",icon:A.jsx(r$,{})},{id:rn.COORDINACION_TP,label:"Coordinacin TP",icon:A.jsx(a$,{})},{id:rn.ESTUDIANTE,label:"Estudiantes",icon:A.jsx(s$,{})}],m$={[rn.SUBDIRECCION]:[{name:"Dashboard",icon:A.jsx(i$,{})},{name:"Administracin",icon:A.jsx(u$,{})},{name:"Seguimiento Curricular",icon:A.jsx(f$,{})},{name:"Acompaamiento docente",icon:A.jsx(c$,{})},{name:"Anlisis Taxonmico",icon:A.jsx(i3,{})},{name:"Interdisciplinario",icon:A.jsx(_C,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:A.jsx(r3,{})},{name:"Crear horarios",icon:A.jsx(CC,{})},{name:"Seguimiento de acciones pedaggicas",icon:A.jsx(iv,{})},{name:"Inclusin",icon:A.jsx(s3,{})},{name:"Calendario Acadmico",icon:A.jsx(sv,{})},{name:"Muro de Anuncios",icon:A.jsx(og,{})},{name:"Mensajera Interna",icon:A.jsx(lg,{})},{name:"Generador de Actas",icon:A.jsx(EC,{})}],[rn.PROFESORADO]:[{name:"Planificacin",icon:A.jsx(a3,{})},{name:"Mis Acompaamientos",icon:A.jsx(A$,{})},{name:"Recursos de Aprendizaje",icon:A.jsx(o$,{})},{name:"Anlisis Taxonmico",icon:A.jsx(i3,{})},{name:"Interdisciplinario",icon:A.jsx(_C,{})},{name:"Inclusin",icon:A.jsx(s3,{})},{name:"Actividades Remotas",icon:A.jsx(l$,{})},{name:"Evaluacin de Aprendizajes",icon:A.jsx(EC,{})},{name:"Evaluaciones Formativas",icon:A.jsx(iv,{})},{name:"Calendario Acadmico",icon:A.jsx(sv,{})},{name:"Muro de Anuncios",icon:A.jsx(og,{})},{name:"Mensajera Interna",icon:A.jsx(lg,{})},{name:"Generador de Actas",icon:A.jsx(r3,{})}],[rn.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:A.jsx(iv,{})},{name:"Asistencia Dual",icon:A.jsx(CC,{})},{name:"Paol",icon:A.jsx(d$,{})},{name:"Calendario Acadmico",icon:A.jsx(sv,{})},{name:"Muro de Anuncios",icon:A.jsx(og,{})},{name:"Mensajera Interna",icon:A.jsx(lg,{})},{name:"Generador de Actas",icon:A.jsx(EC,{})}],[rn.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:A.jsx(a3,{})},{name:"Evaluacin Formativa",icon:A.jsx(iv,{})},{name:"Tareas Interdisciplinarias",icon:A.jsx(_C,{})},{name:"Asistencia a Empresa",icon:A.jsx(CC,{})},{name:"Calendario Acadmico",icon:A.jsx(sv,{})},{name:"Muro de Anuncios",icon:A.jsx(og,{})},{name:"Mensajera Interna",icon:A.jsx(lg,{})}]},o3=["Currculum y Evaluacin","Convivencia Escolar","Orientacin","Gestin Pedaggica General"],Qp=["Pendiente","En Proceso","Cumplida"],v_=["1 Medio","2 Medio","3 Medio","4 Medio"],Hl=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],xs=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],y_=["Juan Prez","Mara Gonzlez","Carlos Soto","Ana Fernndez","Luis Rojas","Laura Muoz","Pedro Castillo","Sofa Reyes","Diego Flores","Valentina Castro"],h2=["Lunes","Martes","Mircoles","Jueves","Viernes"],w_=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],p$={"1 y 2 medio":{"Lengua y Literatura":6,Matemtica:6,Ingls:3,"Historia y Geografa":4,"Educacin Fsica":2,Ciencias:4,"Artes/Msica":2,Tecnologa:2,Orientacin:1},"3 y 4 medio (Humanista-Cientfico)":{"Lengua y Literatura":4,Matemtica:4,Ingls:2,"Historia y Geografa":3,"Educacin Ciudadana":2,Filosofa:3,"Ciencias para la Ciudadana":2,"Educacin Fsica":2},"3 y 4 medio (Tcnico-Profesional)":{"Lengua y Literatura":2,Matemtica:2,Ingls:2,"Historia y Geografa":2,Filosofa:2,"Educacin Fsica":2,"Mdulo TP":18}},Pd={[Gn.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Gn.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Gn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Gn.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},g$=Object.values(Zf),SC=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],TC=["Vinculado","Desvinculado","En proceso","Empresa"],uh=["3A","3B","3C","3D","4A","4B","4C","4D"],J2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],Bg=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],y8=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],ov=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],l3=({onLoginAttempt:t,onForgotPasswordRequest:e,error:n})=>{const[r,a]=Z.useState(""),[s,i]=Z.useState(""),[o,l]=Z.useState("login"),u=m=>{m.preventDefault(),t(r,s)},d=m=>{m.preventDefault(),e(r),l("forgot_sent")},h=()=>o==="forgot"?A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:m=>a(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),A.jsx("div",{children:A.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),A.jsx("div",{className:"text-sm text-center",children:A.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):o==="forgot_sent"?A.jsxs("div",{className:"text-center",children:[A.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),A.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",A.jsx("strong",{children:r}),", hemos enviado un enlace para restablecer su contrasea."]}),A.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),A.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):A.jsxs("form",{onSubmit:u,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:m=>a(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),n&&A.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:A.jsx("p",{children:n})}),A.jsx("div",{className:"text-sm text-center",children:A.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),A.jsx("div",{children:A.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[A.jsxs("div",{className:"text-center mb-10",children:[A.jsx("div",{className:"mb-4 flex justify-center items-center",children:A.jsx(KS,{})}),A.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),A.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),A.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},BC=({trigger:t,children:e,onOpen:n})=>{const[r,a]=Z.useState(!1),s=Z.useRef(null),i=()=>{const l=!r;a(l),l&&n&&n()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return Z.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),A.jsxs("div",{className:"relative",ref:s,children:[A.jsx("div",{onClick:i,children:t}),r&&A.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:e})]})},c3="usuariosLiceo",x$=({user:t,onClose:e,onSave:n})=>{const[r,a]=Z.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),s=o=>{a({...r,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...r};try{const u=localStorage.getItem(c3);let d=u?JSON.parse(u):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(c3,JSON.stringify(d)),n(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:A.jsxs("form",{onSubmit:i,children:[A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),A.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:r.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),A.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:r.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),A.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),A.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[A.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},u3="usuariosLiceo",v$=({user:t,onClose:e,onSave:n})=>{const[r,a]=Z.useState(""),[s,i]=Z.useState(""),[o,l]=Z.useState(null),u=d=>{if(d.preventDefault(),l(null),!r){l("La contrasea no puede estar en blanco.");return}if(r!==s){l("Las contraseas no coinciden.");return}const h={...t,password:r};try{const m=localStorage.getItem(u3);let g=m?JSON.parse(m):[];const b=g.findIndex(w=>w.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(u3,JSON.stringify(g)),n(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contrasea.")}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:A.jsxs("form",{onSubmit:u,children:[A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),A.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:r,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),A.jsx("div",{className:"mt-1",children:A.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&A.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:A.jsx("p",{children:o})})]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[A.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})},A3="anunciosMuro",d3="mensajesInternos",f3="lir-read-status",y$=({user:t})=>{if(t.fotoUrl)return A.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",n=String(e).split(" ").filter(r=>r).map(r=>r[0]).join("").toUpperCase();return A.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:n.substring(0,2)})},w$=({currentUser:t,onLogout:e,onNavigate:n,onUserUpdate:r,onChangeProfile:a,toggleSidebar:s,unreadMessagesCount:i,refreshUnreadCount:o})=>{const[l,u]=Z.useState([]),[d,h]=Z.useState([]),[m,g]=Z.useState(!1),[b,w]=Z.useState(!1),E=Z.useCallback(()=>{try{const U=localStorage.getItem(`${f3}-${t.id}`);return U?JSON.parse(U):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),N=Z.useCallback(U=>{try{localStorage.setItem(`${f3}-${t.id}`,JSON.stringify(U))}catch(P){console.error("Failed to set read status:",P)}},[t.id]);Z.useEffect(()=>{const U=JSON.parse(localStorage.getItem(A3)||"[]"),P=E();u(U.filter(_=>!P.announcements.includes(_.id)));const D=JSON.parse(localStorage.getItem(d3)||"[]");h(D.filter(_=>_.para===t.email).sort((_,B)=>new Date(B.fecha).getTime()-new Date(_.fecha).getTime()).slice(0,5))},[t.id,E,i]);const I=()=>{const U=E(),P=JSON.parse(localStorage.getItem(A3)||"[]").map(D=>D.id);U.announcements=P,N(U),u([])},k=()=>{const U=E(),D=JSON.parse(localStorage.getItem(d3)||"[]").filter(_=>_.para===t.email).map(_=>_.id);U.messages=[...new Set([...U.messages,...D])],N(U),o()};return A.jsxs(A.Fragment,{children:[A.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:A.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:s,children:A.jsx(e$,{})}),A.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("Dashboard"),children:[A.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[A.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),A.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),A.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),A.jsx("div",{className:"flex-1 flex justify-center",children:A.jsx("button",{onClick:()=>n("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:A.jsx(t$,{})})}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(BC,{onOpen:I,trigger:A.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[A.jsx(og,{}),l.length>0&&A.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l.length})]}),children:A.jsxs("div",{className:"p-2",children:[A.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),A.jsxs("ul",{className:"mt-1",children:[l.slice(0,3).map(U=>A.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[A.jsx("p",{className:"font-bold dark:text-slate-200",children:U.titulo}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.mensaje})]},U.id)),l.length===0&&A.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),A.jsx("button",{onClick:()=>n("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),A.jsx(BC,{onOpen:k,trigger:A.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[A.jsx(lg,{}),i>0&&A.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:i})]}),children:A.jsxs("div",{className:"p-2",children:[A.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),A.jsxs("ul",{className:"mt-1",children:[d.slice(0,3).map(U=>A.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[A.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",U.de]}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.asunto})]},U.id)),d.length===0&&A.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),A.jsx("button",{onClick:()=>n("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),A.jsx(BC,{trigger:A.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:A.jsx(y$,{user:t})}),children:A.jsxs("div",{className:"p-2",children:[A.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),A.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[A.jsx("li",{children:A.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),A.jsx("li",{children:A.jsx("button",{onClick:()=>w(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),t.email==="subdi@lir.cl"&&A.jsx("li",{children:A.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cambiar Perfil"})}),A.jsx("li",{children:A.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),m&&A.jsx(x$,{user:t,onClose:()=>g(!1),onSave:r}),b&&A.jsx(v$,{user:t,onClose:()=>w(!1),onSave:r})]})};var Kf={};const b$={apiKey:Kf.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:Kf.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:Kf.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:Kf.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:Kf.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:Kf.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:Kf.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},w8=RN().length===0?X5(b$):RN()[0],So=s8(w8);OL(w8);const Ox="reemplazos_docentes",C$="usuarios",WS=t=>{var n,r,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((a=(r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n))==null?void 0:a.toISOString())||e.fechaCreacion,fechaActualizacion:((o=(i=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:i.call(s))==null?void 0:o.toISOString())||e.fechaActualizacion}},E$=t=>{const e=t.data();return{id:t.id,...e}},_$=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:pr.fromDate(new Date),fechaActualizacion:pr.fromDate(new Date)};return(await MA(xr(So,Ox),n)).id}catch(n){throw console.error("Error al guardar reemplazo:",n),new Error("No se pudo guardar el reemplazo")}},S$=async(t,e)=>{try{const n=vs(So,Ox,t),r=await Bm(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await wf(n)}catch(n){throw console.error("Error al eliminar reemplazo:",n),new Error("No se pudo eliminar el reemplazo")}},T$=(t,e,n=50)=>{const r=ts(xr(So,Ox),bo("userId","==",t),Ws("diaAusencia","desc"),GS(n));return PA(r,a=>{const s=a.docs.map(WS);e(s)},a=>{console.error("Error en suscripcin a reemplazos:",a)})},B$=t=>{const e=ts(xr(So,C$),bo("profile","==",rn.PROFESORADO));return PA(e,r=>{const a=r.docs.map(E$);t(a)},r=>{console.error("Error al obtener la lista de profesores:",r),t([])})},N$=async(t,e,n)=>{try{let r=ts(xr(So,Ox),bo("userId","==",t));const s=(await Xi(r)).docs.map(WS),i=s.length,o=s.filter(u=>u.resultado==="Hora realizada").length,l=s.filter(u=>u.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:i,horasRealizadas:o,horasCubiertas:l,porcentajeRealizadas:i>0?o/i*100:0}}catch(r){throw console.error("Error al obtener estadsticas:",r),new Error("No se pudieron obtener las estadsticas")}},k$=async(t,e)=>{try{const n=ts(xr(So,Ox),bo("userId","==",t),Ws("diaAusencia","desc"),GS(100)),a=(await Xi(n)).docs.map(WS),s=e.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(n){return console.error("Error en bsqueda de reemplazos:",n),[]}},I$=Array.from({length:12},(t,e)=>e+1),h3={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},F$=t=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!0),[s,i]=Z.useState(null);Z.useEffect(()=>t?T$(t,h=>{n(h),a(!1)}):void 0,[t]);const o=Z.useCallback(async d=>{try{return i(null),await _$(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=Z.useCallback(async d=>{try{i(null),await S$(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),u=Z.useCallback(async d=>{try{return i(null),d.trim()?await k$(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la bsqueda"),[]}},[t,e]);return{reemplazos:e,loading:r,error:s,save:o,remove:l,search:u}},R$=t=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!0);Z.useEffect(()=>t?B$(t):void 0,[t]);const s=Z.useMemo(()=>e.map(i=>i.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:s,loading:r}},D$=({selectedBlocks:t,onChange:e,legend:n,disabled:r=!1})=>A.jsxs("fieldset",{children:[A.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:n}),A.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:I$.map(a=>A.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${r?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[A.jsx("input",{type:"checkbox",value:a,checked:t.includes(a),onChange:e,disabled:r,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),A.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),L$=({userId:t})=>{const[e,n]=Z.useState(null),[r,a]=Z.useState(!1),s=Z.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await N$(t,o,l);n(u)}catch(i){console.error("Error al cargar estadsticas:",i)}finally{a(!1)}},[t]);return Z.useEffect(()=>{t&&s()},[t,s]),r?A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx("div",{className:"animate-pulse flex justify-center",children:A.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[A.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadsticas del Mes"}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),A.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),A.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),A.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),A.jsxs("div",{className:"text-center",children:[A.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),A.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},U$=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:n,save:r,remove:a,search:s,loading:i,error:o}=F$(e),{profesorNames:l,loading:u}=R$(e),[d,h]=Z.useState(h3),[m,g]=Z.useState(""),[b,w]=Z.useState([]),[E,N]=Z.useState(null),[I,k]=Z.useState(!1),[U,P]=Z.useState(!1);Z.useEffect(()=>{(async()=>{if(!m.trim()){w(n);return}P(!0);try{const L=await s(m);w(L)}catch(L){console.error("Error en bsqueda:",L),w(n)}finally{P(!1)}})()},[n,m,s]);const D=Z.useCallback(R=>{const{name:L,value:Q}=R.target;h(z=>({...z,[L]:Q}))},[]),_=Z.useCallback(R=>{const L=parseInt(R.target.value,10);h(Q=>{const z=Q.bloquesAfectados,ie=z.includes(L)?z.filter(J=>J!==L):[...z,L].sort((J,ee)=>J-ee);return{...Q,bloquesAfectados:ie}})},[]),B=Z.useCallback(async R=>{R.preventDefault(),N(null),k(!0);const{docenteAusente:L,asignaturaAusente:Q,curso:z,diaAusencia:ie,bloquesAfectados:J,docenteReemplazante:ee,asignaturaReemplazante:ae}=d;if(!L||!Q||!z||!ie||!ee||!ae||J.length===0){N("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),k(!1);return}if(L===ee){N("El docente ausente y el reemplazante no pueden ser la misma persona."),k(!1);return}const q=new Date(ie),Y=new Date;if(Y.setHours(0,0,0,0),q<Y&&!window.confirm("La fecha seleccionada es anterior a hoy. Desea continuar?")){k(!1);return}try{const Ae=Q.trim().toLowerCase()===ae.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",j={...d,resultado:Ae};await r(j),h(h3);const K=Ae==="Hora realizada"?" Reemplazo registrado - Hora realizada":" Reemplazo registrado - Hora cubierta, no realizada",X=document.createElement("div");X.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",X.textContent=K,document.body.appendChild(X),setTimeout(()=>{document.body.removeChild(X)},3e3)}catch(Ae){console.error("Error al guardar reemplazo:",Ae),N("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{k(!1)}},[d,r]),T=Z.useCallback(async R=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await a(R)}catch(L){console.error("Error al eliminar reemplazo:",L),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),O="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),A.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx(L$,{userId:e}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?A.jsxs("div",{className:"flex justify-center items-center py-8",children:[A.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),A.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):A.jsxs("form",{onSubmit:B,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),A.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:D,className:O,disabled:I,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(R=>A.jsx("option",{value:R,children:R},R))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:D,className:O,disabled:I,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione una asignatura"}),Hl.map(R=>A.jsx("option",{value:R,children:R},R))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:d.curso,onChange:D,className:O,disabled:I,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un curso"}),xs.map(R=>A.jsx("option",{value:R,children:R},R))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Da Ausencia"}),A.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:D,className:O,disabled:I,required:!0})]}),A.jsx(D$,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:_,disabled:I})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),A.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:D,className:O,disabled:I,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(R=>A.jsx("option",{value:R,children:R},R))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:D,className:O,disabled:I,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione una asignatura"}),Hl.map(R=>A.jsx("option",{value:R,children:R},R))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&A.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),A.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?" Hora realizada":" Hora cubierta, no realizada"}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(E||o)&&A.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:A.jsx("p",{className:"text-red-600 dark:text-red-400",children:E||o})}),A.jsx("div",{className:"pt-4 text-right",children:A.jsxs("button",{type:"submit",disabled:I||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[I&&A.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),I?"Registrando...":"Registrar Reemplazo"]})})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),A.jsxs("div",{className:"mb-6",children:[A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:R=>g(R.target.value),className:`${O} md:w-1/2 pl-10`,disabled:U}),A.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:U?A.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):A.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:U?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?A.jsxs("div",{className:"flex justify-center items-center py-8",children:[A.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),A.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),A.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(R=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(R.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.curso}),A.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteAusente,A.jsx("br",{}),A.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaAusente})]}),A.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteReemplazante,A.jsx("br",{}),A.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaReemplazante})]}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.bloquesAfectados.join(", ")}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${R.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:R.resultado})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:A.jsx("button",{onClick:()=>T(R.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:I,children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la bsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!m&&A.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los ltimos ",b.length," registros"]})]})]})},M$=t=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const e=xr(hr,"reemplazos"),n=ts(e,Ws("fecha","desc"));return PA(n,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Reemplazos cargados para dashboard:",s.length),t(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a reemplazos:",e),e}},P$=t=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const e=xr(hr,"acompanamientos"),n=ts(e,Ws("fecha","desc"));return PA(n,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Acompaamientos cargados para dashboard:",s.length),t(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a acompaamientos:",e),e}},j$=t=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const e=xr(hr,"calendar_events"),n=ts(e,Ws("date","asc"));return PA(n,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),t(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a eventos del calendario:",e),e}},uu=({title:t,value:e,description:n,isLoading:r=!1})=>A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),r?A.jsxs("div",{className:"flex items-center mt-2",children:[A.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),A.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]})]}),Wf=({title:t,data:e,colorClass:n,valueFormatter:r=s=>String(s),isLoading:a=!1})=>{const s=Z.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=Z.useMemo(()=>Math.max(...s,1),[s]);return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),a?A.jsxs("div",{className:"flex justify-center items-center py-8",children:[A.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),A.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):A.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),A.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:r(o.value)})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:A.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},O$=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState([]),[a,s]=Z.useState([]),[i,o]=Z.useState(!0),[l,u]=Z.useState(null);return Z.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log(" Todos los datos del dashboard cargados"))};try{const g=M$(E=>{e(E),m()}),b=P$(E=>{r(E),m()}),w=j$(E=>{s(E),m()});return()=>{g(),b(),w()}}catch(g){console.error(" Error al configurar suscripciones del dashboard:",g),u(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:n,calendarEvents:a,loading:i,error:l}},Q$=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",t),console.log(" Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log(" Dashboard - Verificacin de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log(" Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log(" Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log(" Dashboard - Comparacin con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:n,calendarEvents:r,loading:a,error:s}=O$(),[i,o]=Z.useState(Bg);if(console.log(" Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:n.length,calendarEvents:r.length,loading:a,error:s,currentUser:t==null?void 0:t.profile}),Z.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):Bg)}catch(g){console.error("Error al leer rbrica personalizada",g),o(Bg)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!t),console.log(" Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log(" Dashboard - comparacin exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log(" Dashboard - currentUser es null/undefined"),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[A.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",t.profile),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[A.jsx("span",{className:"text-6xl mb-4",children:""}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),A.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[A.jsx("p",{children:A.jsx("strong",{children:"Debug Info:"})}),A.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),A.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),A.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[A.jsx("span",{className:"text-6xl mb-4",children:""}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),A.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),A.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const l=Z.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(P=>P.resultado==="Hora realizada").length,w=g-b,E=`${(b/g*100).toFixed(1)}%`,N=(P,D)=>P.reduce((_,B)=>{const T=B[D];return typeof T=="string"&&(_[T]=(_[T]||0)+1),_},{}),I=N(e,"docenteAusente"),k=N(e,"docenteReemplazante"),U=N(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:w,tasaCobertura:E,inasistenciasPorDocente:Object.entries(I).map(([P,D])=>({label:P,value:D})),reemplazosPorDocente:Object.entries(k).map(([P,D])=>({label:P,value:D})),inasistenciasPorCurso:Object.entries(U).map(([P,D])=>({label:P,value:D})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:w}]}},[e]),u=Z.useMemo(()=>{const g=n.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(D=>{D.criteria.forEach(_=>{b.set(_.name,D.domain)})});let w=0,E=0;const N={},I={};n.forEach(D=>{N[D.docente]||(N[D.docente]={total:0,count:0}),Object.entries(D.rubricaResultados).forEach(([_,B])=>{w+=B,E++,N[D.docente].total+=B,N[D.docente].count++;const T=b.get(_);T&&(I[T]||(I[T]={total:0,count:0}),I[T].total+=B,I[T].count++)})});const k=E>0?(w/E).toFixed(2):"N/A",U=Object.entries(N).map(([D,_])=>({label:D,value:_.count>0?(_.total/_.count).toFixed(2):0})),P=Object.entries(I).map(([D,_])=>({label:D,value:_.count>0?(_.total/_.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:k,desempenoPorDocente:U,desempenoPorDominio:P}},[n,i]),d=Z.useMemo(()=>{const g={[Gn.EVALUACION]:0,[Gn.ACTO]:0,[Gn.ACTIVIDAD_FOCALIZADA]:0,[Gn.SALIDA_PEDAGOGICA]:0};for(const w of r)g.hasOwnProperty(w.type)&&g[w.type]++;const b=Object.entries(g).map(([w,E])=>({label:Pd[w].label,value:E}));return{totalEvaluaciones:g[Gn.EVALUACION],totalActos:g[Gn.ACTO],totalActividadesFocalizadas:g[Gn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[Gn.SALIDA_PEDAGOGICA],distribucionEventos:b}},[r]);return a?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[A.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&r.length===0?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[A.jsx("span",{className:"text-6xl mb-4",children:""}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),A.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[A.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),A.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),A.jsx("p",{children:" Calendario Acadmico"})]})]}):A.jsxs("div",{className:"space-y-12 animate-fade-in",children:[A.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[A.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),A.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),A.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&A.jsxs("div",{className:"space-y-8",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(uu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),A.jsx(uu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),A.jsx(uu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),A.jsx(uu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[A.jsx(Wf,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),A.jsx(Wf,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),A.jsx(Wf,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),A.jsx(Wf,{title:"Distribucin de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),n.length>0&&A.jsxs("div",{className:"space-y-8",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(uu,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),A.jsx(uu,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[A.jsx(Wf,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a}),A.jsx(Wf,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a})]})]}),r.length>0&&A.jsxs("div",{className:"space-y-8",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(uu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),A.jsx(uu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),A.jsx(uu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),A.jsx(uu,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[A.jsx(Wf,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?A.jsxs("div",{className:"flex justify-center items-center py-8",children:[A.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),A.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):A.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[r.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var w,E;return A.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin ttulo"}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&A.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",g.ubicacion]})]}),A.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((w=Pd[g.type])==null?void 0:w.color)||"bg-gray-100 text-gray-800"}`,children:((E=Pd[g.type])==null?void 0:E.label)||g.type})]})},g.id||b)}),r.filter(g=>new Date(g.date)>=new Date).length===0&&A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),A.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+n.length+r.length}),A.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...n.map(g=>g.docente)]).size}),A.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),A.jsxs("div",{className:"text-center",children:[A.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),A.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),A.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[A.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),A.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let H$,V$;function z$(){return{geminiUrl:H$,vertexUrl:V$}}function G$(t,e,n,r){var a,s;if(!(t!=null&&t.baseUrl)){const i=z$();return e?(a=i.vertexUrl)!==null&&a!==void 0?a:n:(s=i.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uh{}function nn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function v(t,e,n){for(let s=0;s<e.length-1;s++){const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];v(d,e.slice(s+1),n[u])}else for(const u of l)v(u,e.slice(s+1),n)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(s+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],a=t[r];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(i=>x(i,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var m3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(m3||(m3={}));var p3;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(p3||(p3={}));var Gt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Gt||(Gt={}));var g3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(g3||(g3={}));var x3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(x3||(x3={}));var v3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(v3||(v3={}));var y3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(y3||(y3={}));var w3;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(w3||(w3={}));var b3;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(b3||(b3={}));var C3;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(C3||(C3={}));var E3;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(E3||(E3={}));var _3;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(_3||(_3={}));var S3;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(S3||(S3={}));var T3;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(T3||(T3={}));var B3;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(B3||(B3={}));var N3;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(N3||(N3={}));var Y2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Y2||(Y2={}));var k3;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(k3||(k3={}));var C_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(C_||(C_={}));var I3;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(I3||(I3={}));var F3;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(F3||(F3={}));var R3;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(R3||(R3={}));var D3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(D3||(D3={}));var L3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(L3||(L3={}));var U3;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(U3||(U3={}));var M3;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(M3||(M3={}));var P3;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(P3||(P3={}));var j3;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(j3||(j3={}));var O3;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(O3||(O3={}));var Q3;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Q3||(Q3={}));var H3;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(H3||(H3={}));var V3;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(V3||(V3={}));var z3;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(z3||(z3={}));var G3;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(G3||(G3={}));var q3;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(q3||(q3={}));var K3;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(K3||(K3={}));var W3;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(W3||(W3={}));var $3;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})($3||($3={}));var J3;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(J3||(J3={}));var Y3;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Y3||(Y3={}));var X3;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(X3||(X3={}));var W0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(W0||(W0={}));class E_{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Hp{get text(){var e,n,r,a,s,i,o,l;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(m))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,a,s,i,o,l;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,a,s,i,o,l;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,a,s,i,o,l,u;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,a,s,i,o,l,u;if(((a=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Z3{}class eI{}class q${}class K${}class tI{}class nI{}class rI{}class W${}class aI{}class sI{}class iI{}class oI{}class $${}class J${}class Y${}class lI{}class X${get text(){var e,n,r;let a="",s=!1;const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;s=!0,a+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var e,n,r;let a="";const s=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&s.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(a+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class X2{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new X2;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const a=e.response;if(a){const s=new aI,i=a.videos;s.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?b_(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),s.raiMediaFilteredCount=a.raiMediaFilteredCount,s.raiMediaFilteredReasons=a.raiMediaFilteredReasons,r.response=s}}else{const a=e.response;if(a){const s=new aI,i=a.generateVideoResponse,o=i==null?void 0:i.generatedSamples;s.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?b_(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),s.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,r.response=s}}return r}}class Z${get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function b8(t,e){const n=Hr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function C8(t){return Array.isArray(t)?t.map(e=>Z2(e)):[Z2(t)]}function Z2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function E8(t){const e=Z2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _8(t){const e=Z2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function S8(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>cI(e)):[cI(t)]}function __(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function uI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function AI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Pi(t){if(t==null)throw new Error("ContentUnion is required");return __(t)?t:{role:"user",parts:S8(t)}}function T8(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Pi(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Pi(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Pi(n)):[Pi(e)]}function Ol(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(uI(t)||AI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Pi(t)]}const e=[],n=[],r=__(t[0]);for(const a of t){const s=__(a);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(a);else{if(uI(a)||AI(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return r||e.push({role:"user",parts:S8(n)}),e}function eJ(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Gt).includes(n[0].toUpperCase())?n[0].toUpperCase():Gt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Gt).includes(r.toUpperCase())?r.toUpperCase():Gt.TYPE_UNSPECIFIED})}}function rm(t){const e={},n=["items"],r=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&eJ(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(Gt).includes(o.toUpperCase())?o.toUpperCase():Gt.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=rm(o);else if(r.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(rm(u))}e[i]=l}else if(a.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=rm(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function $S(t){return rm(t)}function JS(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function YS(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Gm(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=rm(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=rm(e.response));return t}function qm(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function tJ(t,e,n,r=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function jA(t,e){if(typeof e!="string")throw new Error("name must be a string");return tJ(t,e,"cachedContents")}function B8(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mh(t){return b_(t)}function nJ(t){return t!=null&&typeof t=="object"&&"name"in t}function rJ(t){return t!=null&&typeof t=="object"&&"video"in t}function aJ(t){return t!=null&&typeof t=="object"&&"uri"in t}function N8(t){var e;let n;if(nJ(t)&&(n=t.name),!(aJ(t)&&(n=t.uri,n===void 0))&&!(rJ(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function k8(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function I8(t){for(const e of["models","tunedModels","publisherModels"])if(sJ(t,e))return t[e];return[]}function sJ(t,e){return t!==null&&typeof t=="object"&&e in t}function iJ(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function oJ(t,e={}){const n=[],r=new Set;for(const a of t){const s=a.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const i=iJ(a,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function F8(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function lJ(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Km(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function R8(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cJ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function uJ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function AJ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function dJ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],cJ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],uJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],AJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function D8(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>dJ(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function fJ(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const U=x(t,["propertyOrdering"]);U!=null&&v(e,["propertyOrdering"],U);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const _=x(t,["type"]);return _!=null&&v(e,["type"],_),e}function hJ(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(t,["category"]);n!=null&&v(e,["category"],n);const r=x(t,["threshold"]);return r!=null&&v(e,["threshold"],r),e}function mJ(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function pJ(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function gJ(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],pJ(n)),e}function xJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function vJ(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],xJ(n)),e}function yJ(){return{}}function wJ(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>mJ(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],gJ(r));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],vJ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],yJ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function bJ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function CJ(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function EJ(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],CJ(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function _J(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],bJ(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],EJ(r)),e}function SJ(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function L8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],SJ(n)),e}function TJ(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],L8(r)),e}function BJ(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>TJ(a))),v(e,["speakerVoiceConfigs"],r)}return e}function NJ(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],L8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],BJ(r));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function kJ(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function IJ(t,e,n){const r={},a=x(e,["systemInstruction"]);n!==void 0&&a!=null&&v(n,["systemInstruction"],D8(Pi(a)));const s=x(e,["temperature"]);s!=null&&v(r,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(r,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(r,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(r,["seed"],w);const E=x(e,["responseMimeType"]);E!=null&&v(r,["responseMimeType"],E);const N=x(e,["responseSchema"]);N!=null&&v(r,["responseSchema"],fJ($S(N)));const I=x(e,["responseJsonSchema"]);if(I!=null&&v(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=x(e,["safetySettings"]);if(n!==void 0&&k!=null){let R=k;Array.isArray(R)&&(R=R.map(L=>hJ(L))),v(n,["safetySettings"],R)}const U=x(e,["tools"]);if(n!==void 0&&U!=null){let R=qm(U);Array.isArray(R)&&(R=R.map(L=>wJ(Gm(L)))),v(n,["tools"],R)}const P=x(e,["toolConfig"]);if(n!==void 0&&P!=null&&v(n,["toolConfig"],_J(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);n!==void 0&&D!=null&&v(n,["cachedContent"],jA(t,D));const _=x(e,["responseModalities"]);_!=null&&v(r,["responseModalities"],_);const B=x(e,["mediaResolution"]);B!=null&&v(r,["mediaResolution"],B);const T=x(e,["speechConfig"]);if(T!=null&&v(r,["speechConfig"],NJ(JS(T))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(r,["thinkingConfig"],kJ(O)),r}function FJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["request","model"],Hr(t,r));const a=x(e,["contents"]);if(a!=null){let i=Ol(a);Array.isArray(i)&&(i=i.map(o=>D8(o))),v(n,["request","contents"],i)}const s=x(e,["config"]);return s!=null&&v(n,["request","generationConfig"],IJ(t,s,n)),n}function RJ(t,e){const n={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=x(e,["fileName"]);r!=null&&v(n,["fileName"],r);const a=x(e,["inlinedRequests"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>FJ(t,i))),v(n,["requests","requests"],s)}return n}function DJ(t,e){const n={},r=x(t,["displayName"]);if(e!==void 0&&r!=null&&v(e,["batch","displayName"],r),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function LJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["src"]);a!=null&&v(n,["batch","inputConfig"],RJ(t,F8(t,a)));const s=x(e,["config"]);return s!=null&&v(n,["config"],DJ(s,n)),n}function UJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Km(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function MJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Km(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function PJ(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);if(e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function jJ(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],PJ(n,e)),e}function OJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Km(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function QJ(t){const e={},n=x(t,["format"]);n!=null&&v(e,["instancesFormat"],n);const r=x(t,["gcsUri"]);r!=null&&v(e,["gcsSource","uris"],r);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigquerySource","inputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function HJ(t){const e={},n=x(t,["format"]);n!=null&&v(e,["predictionsFormat"],n);const r=x(t,["gcsUri"]);r!=null&&v(e,["gcsDestination","outputUriPrefix"],r);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigqueryDestination","outputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function VJ(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const a=x(t,["dest"]);return e!==void 0&&a!=null&&v(e,["outputConfig"],HJ(lJ(a))),n}function zJ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],Hr(t,r));const a=x(e,["src"]);a!=null&&v(n,["inputConfig"],QJ(F8(t,a)));const s=x(e,["config"]);return s!=null&&v(n,["config"],VJ(s,n)),n}function GJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Km(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function qJ(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Km(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function KJ(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),n}function WJ(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],KJ(n,e)),e}function $J(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],Km(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function JJ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function YJ(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function XJ(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function ZJ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],JJ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],YJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],XJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function eY(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>ZJ(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function tY(t){const e={},n=x(t,["citationSources"]);return n!=null&&v(e,["citations"],n),e}function nY(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function rY(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>nY(a))),v(e,["urlMetadata"],r)}return e}function aY(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],eY(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],tY(r));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],rY(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function sY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>aY(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function U8(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["code"]);r!=null&&v(e,["code"],r);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function iY(t){const e={},n=x(t,["response"]);n!=null&&v(e,["response"],sY(n));const r=x(t,["error"]);return r!=null&&v(e,["error"],U8(r)),e}function oY(t){const e={},n=x(t,["responsesFile"]);n!=null&&v(e,["fileName"],n);const r=x(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>iY(s))),v(e,["inlinedResponses"],a)}return e}function S_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata","displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["metadata","state"]);a!=null&&v(e,["state"],R8(a));const s=x(t,["metadata","createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],oY(u)),e}function lY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["operations"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>S_(i))),v(e,["batchJobs"],s)}return e}function cY(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["done"]);r!=null&&v(e,["done"],r);const a=x(t,["error"]);return a!=null&&v(e,["error"],U8(a)),e}function M8(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["code"]);r!=null&&v(e,["code"],r);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function uY(t){const e={},n=x(t,["instancesFormat"]);n!=null&&v(e,["format"],n);const r=x(t,["gcsSource","uris"]);r!=null&&v(e,["gcsUri"],r);const a=x(t,["bigquerySource","inputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function AY(t){const e={},n=x(t,["predictionsFormat"]);n!=null&&v(e,["format"],n);const r=x(t,["gcsDestination","outputUriPrefix"]);r!=null&&v(e,["gcsUri"],r);const a=x(t,["bigqueryDestination","outputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function T_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["state"]);a!=null&&v(e,["state"],R8(a));const s=x(t,["error"]);s!=null&&v(e,["error"],M8(s));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],uY(h));const m=x(t,["outputConfig"]);return m!=null&&v(e,["dest"],AY(m)),e}function dY(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["batchPredictionJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>T_(i))),v(e,["batchJobs"],s)}return e}function fY(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["done"]);r!=null&&v(e,["done"],r);const a=x(t,["error"]);return a!=null&&v(e,["error"],M8(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Eh;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Eh||(Eh={}));class Qx{constructor(e,n,r,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,a)}init(e,n,r){var a,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(a=i.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hY extends Uh{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${a}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Qx(Eh.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=zJ(this.apiClient,e);return o=nn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>T_(d))}else{const u=LJ(this.apiClient,e);return o=nn("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>S_(d))}}async get(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=GJ(this.apiClient,e);return o=nn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>T_(d))}else{const u=UJ(this.apiClient,e);return o=nn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>S_(d))}}async cancel(e){var n,r,a,s;let i="",o={};if(this.apiClient.isVertexAI()){const l=qJ(this.apiClient,e);i=nn("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=MJ(this.apiClient,e);i=nn("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=WJ(e);return o=nn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=dY(d),m=new lI;return Object.assign(m,h),m})}else{const u=jJ(e);return o=nn("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=lY(d),m=new lI;return Object.assign(m,h),m})}}async delete(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=$J(this.apiClient,e);return o=nn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>fY(d))}else{const u=OJ(this.apiClient,e);return o=nn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>cY(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mY(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function pY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function gY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function xY(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],mY(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],pY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],gY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function dI(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>xY(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function vY(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function yY(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function wY(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],yY(n)),e}function bY(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function CY(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],bY(n)),e}function EY(){return{}}function _Y(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>vY(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],wY(r));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],CY(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],EY());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function SY(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function TY(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function BY(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],TY(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function NY(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],SY(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],BY(r)),e}function kY(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Ol(i);Array.isArray(d)&&(d=d.map(h=>dI(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],dI(Pi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>_Y(h))),v(e,["tools"],d)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],NY(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function IY(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],b8(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],kY(a,n)),n}function FY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],jA(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function RY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],jA(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function DY(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),n}function LY(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],jA(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],DY(a,n)),n}function UY(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),n}function MY(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],UY(n,e)),e}function PY(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function jY(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function OY(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function QY(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],PY(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],jY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],OY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function fI(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>QY(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function HY(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function VY(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function zY(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],VY(n)),e}function GY(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function qY(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],GY(n)),e}function KY(){return{}}function WY(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function $Y(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],WY(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function JY(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],$Y(n)),e}function YY(){return{}}function XY(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>HY(m))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],zY(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],qY(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],KY());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],JY(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],YY());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function ZY(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function eX(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function tX(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],eX(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function nX(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],ZY(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],tX(r)),e}function rX(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Ol(i);Array.isArray(h)&&(h=h.map(m=>fI(m))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],fI(Pi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>XY(m))),v(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],nX(u));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),n}function aX(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["model"],b8(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],rX(a,n)),n}function sX(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],jA(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function iX(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],jA(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function oX(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&v(e,["ttl"],r);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),n}function lX(t,e){const n={},r=x(e,["name"]);r!=null&&v(n,["_url","name"],jA(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],oX(a,n)),n}function cX(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),n}function uX(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],cX(n,e)),e}function m2(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function AX(){return{}}function dX(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>m2(i))),v(e,["cachedContents"],s)}return e}function p2(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function fX(){return{}}function hX(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>p2(i))),v(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mX extends Uh{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Qx(Eh.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=aX(this.apiClient,e);return o=nn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>p2(d))}else{const u=IY(this.apiClient,e);return o=nn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>m2(d))}}async get(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=sX(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>p2(d))}else{const u=FY(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>m2(d))}}async delete(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=iX(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=fX(),h=new iI;return Object.assign(h,d),h})}else{const u=RY(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=AX(),h=new iI;return Object.assign(h,d),h})}}async update(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=lX(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>p2(d))}else{const u=LY(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>m2(d))}}async listInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=uX(e);return o=nn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=hX(d),m=new oI;return Object.assign(m,h),m})}else{const u=MY(e);return o=nn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=dX(d),m=new oI;return Object.assign(m,h),m})}}}function hI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sa(t){return this instanceof sa?(this.v=t,this):new sa(t)}function am(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){r[g]&&(a[g]=function(w){return new Promise(function(E,N){s.push([g,w,E,N])>1||l(g,w)})},b&&(a[g]=b(a[g])))}function l(g,b){try{u(r[g](b))}catch(w){m(s[0][3],w)}}function u(g){g.value instanceof sa?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,b){g(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ng(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hI=="function"?hI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(i){return new Promise(function(o,l){i=t[s](i),a(o,l,i.done,i.value)})}}function a(s,i,o,l){Promise.resolve(l).then(function(u){s({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pX(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:P8(n)}function P8(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function gX(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function mI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const a=[];let s=!0;for(;r<n&&t[r].role==="model";)a.push(t[r]),s&&!P8(t[r])&&(s=!1),r++;s?e.push(...a):e.pop()}return e}class xX{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new vX(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vX{constructor(e,n,r,a={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),gX(s)}async sendMessage(e){var n;await this.sendPromise;const r=Pi(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,o;const l=await a,u=(i=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const r=Pi(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?mI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,a;return am(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,m=Ng(e),g;g=yield sa(m.next()),i=g.done,!i;h=!0){u=g.value,h=!1;const b=u;if(pX(b)){const w=(a=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content;w!==void 0&&d.push(w)}yield yield sa(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=m.return)&&(yield sa(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let a=[];n.length>0&&n.every(s=>s.role!==void 0)?a=n:a.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...mI(r)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,fw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yX(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),n}function wX(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],yX(n,e)),e}function bX(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["message"]);r!=null&&v(e,["message"],r);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function CX(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const w=x(t,["error"]);return w!=null&&v(e,["error"],bX(w)),e}function EX(t){const e={},n=x(t,["file"]);n!=null&&v(e,["file"],CX(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function _X(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","file"],N8(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function SX(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","file"],N8(n));const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function TX(t){const e={},n=x(t,["details"]);n!=null&&v(e,["details"],n);const r=x(t,["message"]);r!=null&&v(e,["message"],r);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function B_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const w=x(t,["error"]);return w!=null&&v(e,["error"],TX(w)),e}function BX(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>B_(i))),v(e,["files"],s)}return e}function NX(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&v(e,["sdkHttpResponse"],n),e}function kX(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IX extends Uh{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Qx(Eh.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>B_(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=wX(e);return s=nn("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=BX(l),d=new $$;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=EX(e);return s=nn("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),a.then(l=>{const u=NX(l),d=new J$;return Object.assign(d,u),d})}}async get(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=_X(e);return s=nn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),a.then(l=>B_(l))}}async delete(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=SX(e);return s=nn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),a.then(()=>{const l=kX(),u=new Y$;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FX(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function j8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],FX(n)),e}function RX(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],j8(r)),e}function DX(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>RX(a))),v(e,["speakerVoiceConfigs"],r)}return e}function LX(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],j8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],DX(r));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function UX(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function MX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function PX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function jX(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],UX(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],MX(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],PX(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function OX(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>jX(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function QX(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function HX(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function VX(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],HX(n)),e}function zX(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function GX(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],zX(n)),e}function qX(){return{}}function KX(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>QX(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],VX(r));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],GX(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],qX());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function WX(t){const e={},n=x(t,["handle"]);if(n!=null&&v(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pI(){return{}}function $X(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function JX(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],$X(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function YX(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function XX(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],YX(r)),e}function ZX(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function eZ(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],LX(YS(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],OX(Pi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=qm(b);Array.isArray(P)&&(P=P.map(D=>KX(Gm(D)))),v(e,["setup","tools"],P)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],WX(w));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],pI());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],pI());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],JX(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],XX(k));const U=x(t,["proactivity"]);return e!==void 0&&U!=null&&v(e,["setup","proactivity"],ZX(U)),n}function tZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],eZ(a,n)),n}function nZ(){return{}}function rZ(){return{}}function aZ(t){const e={},n=x(t,["media"]);n!=null&&v(e,["mediaChunks"],C8(n));const r=x(t,["audio"]);r!=null&&v(e,["audio"],_8(r));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],E8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],nZ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],rZ()),e}function O8(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["weight"]);return r!=null&&v(e,["weight"],r),e}function sZ(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>O8(a))),v(e,["weightedPrompts"],r)}return e}function Q8(t){const e={},n=x(t,["temperature"]);n!=null&&v(e,["temperature"],n);const r=x(t,["topK"]);r!=null&&v(e,["topK"],r);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function iZ(t){const e={},n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],Q8(n)),e}function H8(t){const e={},n=x(t,["model"]);return n!=null&&v(e,["model"],n),e}function V8(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>O8(a))),v(e,["weightedPrompts"],r)}return e}function N_(t){const e={},n=x(t,["setup"]);n!=null&&v(e,["setup"],H8(n));const r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],V8(r));const a=x(t,["musicGenerationConfig"]);a!=null&&v(e,["musicGenerationConfig"],Q8(a));const s=x(t,["playbackControl"]);return s!=null&&v(e,["playbackControl"],s),e}function oZ(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function lZ(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],oZ(n)),e}function cZ(t){const e={},n=x(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],lZ(n)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function uZ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function AZ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function dZ(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function fZ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],uZ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],AZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],dZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function hZ(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>fZ(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function mZ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function pZ(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function gZ(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],pZ(n)),e}function xZ(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function vZ(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],xZ(n)),e}function yZ(){return{}}function wZ(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function bZ(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],wZ(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function CZ(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],bZ(n)),e}function EZ(){return{}}function _Z(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>mZ(m))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],gZ(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],vZ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],yZ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],CZ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],EZ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function SZ(t){const e={},n=x(t,["handle"]);n!=null&&v(e,["handle"],n);const r=x(t,["transparent"]);return r!=null&&v(e,["transparent"],r),e}function gI(){return{}}function TZ(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function BZ(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],TZ(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function NZ(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function kZ(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],NZ(r)),e}function IZ(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function FZ(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],cZ(YS(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],hZ(Pi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=qm(b);Array.isArray(P)&&(P=P.map(D=>_Z(Gm(D)))),v(e,["setup","tools"],P)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],SZ(w));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],gI());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],gI());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],BZ(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],kZ(k));const U=x(t,["proactivity"]);return e!==void 0&&U!=null&&v(e,["setup","proactivity"],IZ(U)),n}function RZ(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],FZ(a,n)),n}function DZ(){return{}}function LZ(){return{}}function UZ(t){const e={},n=x(t,["media"]);n!=null&&v(e,["mediaChunks"],C8(n));const r=x(t,["audio"]);r!=null&&v(e,["audio"],_8(r));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],E8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],DZ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],LZ()),e}function MZ(){return{}}function PZ(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function jZ(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function OZ(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function QZ(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],PZ(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],jZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],OZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function HZ(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>QZ(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function xI(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["finished"]);return r!=null&&v(e,["finished"],r),e}function VZ(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function zZ(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>VZ(a))),v(e,["urlMetadata"],r)}return e}function GZ(t){const e={},n=x(t,["modelTurn"]);n!=null&&v(e,["modelTurn"],HZ(n));const r=x(t,["turnComplete"]);r!=null&&v(e,["turnComplete"],r);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],xI(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],xI(l));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],zZ(u)),e}function qZ(t){const e={},n=x(t,["id"]);n!=null&&v(e,["id"],n);const r=x(t,["args"]);r!=null&&v(e,["args"],r);const a=x(t,["name"]);return a!=null&&v(e,["name"],a),e}function KZ(t){const e={},n=x(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>qZ(a))),v(e,["functionCalls"],r)}return e}function WZ(t){const e={},n=x(t,["ids"]);return n!=null&&v(e,["ids"],n),e}function lv(t){const e={},n=x(t,["modality"]);n!=null&&v(e,["modality"],n);const r=x(t,["tokenCount"]);return r!=null&&v(e,["tokenCount"],r),e}function $Z(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&v(e,["cachedContentTokenCount"],r);const a=x(t,["responseTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>lv(g))),v(e,["promptTokensDetails"],m)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>lv(g))),v(e,["cacheTokensDetails"],m)}const d=x(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>lv(g))),v(e,["responseTokensDetails"],m)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>lv(g))),v(e,["toolUsePromptTokensDetails"],m)}return e}function JZ(t){const e={},n=x(t,["timeLeft"]);return n!=null&&v(e,["timeLeft"],n),e}function YZ(t){const e={},n=x(t,["newHandle"]);n!=null&&v(e,["newHandle"],n);const r=x(t,["resumable"]);r!=null&&v(e,["resumable"],r);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function XZ(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],MZ());const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],GZ(r));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],KZ(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],WZ(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],$Z(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],JZ(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],YZ(l)),e}function ZZ(){return{}}function eee(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["weight"]);return r!=null&&v(e,["weight"],r),e}function tee(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>eee(a))),v(e,["weightedPrompts"],r)}return e}function nee(t){const e={},n=x(t,["temperature"]);n!=null&&v(e,["temperature"],n);const r=x(t,["topK"]);r!=null&&v(e,["topK"],r);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function ree(t){const e={},n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],tee(n));const r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],nee(r)),e}function aee(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);r!=null&&v(e,["mimeType"],r);const a=x(t,["sourceMetadata"]);return a!=null&&v(e,["sourceMetadata"],ree(a)),e}function see(t){const e={},n=x(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>aee(a))),v(e,["audioChunks"],r)}return e}function iee(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["filteredReason"]);return r!=null&&v(e,["filteredReason"],r),e}function oee(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],ZZ());const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],see(r));const a=x(t,["filteredPrompt"]);return a!=null&&v(e,["filteredPrompt"],iee(a)),e}function lee(t){const e={},n=x(t,["sessionId"]);return n!=null&&v(e,["sessionId"],n),e}function cee(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function uee(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Aee(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function dee(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],cee(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],uee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Aee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function fee(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>dee(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function vI(t){const e={},n=x(t,["text"]);n!=null&&v(e,["text"],n);const r=x(t,["finished"]);return r!=null&&v(e,["finished"],r),e}function hee(t){const e={},n=x(t,["modelTurn"]);n!=null&&v(e,["modelTurn"],fee(n));const r=x(t,["turnComplete"]);r!=null&&v(e,["turnComplete"],r);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],vI(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],vI(l)),e}function mee(t){const e={},n=x(t,["args"]);n!=null&&v(e,["args"],n);const r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}function pee(t){const e={},n=x(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>mee(a))),v(e,["functionCalls"],r)}return e}function gee(t){const e={},n=x(t,["ids"]);return n!=null&&v(e,["ids"],n),e}function cv(t){const e={},n=x(t,["modality"]);n!=null&&v(e,["modality"],n);const r=x(t,["tokenCount"]);return r!=null&&v(e,["tokenCount"],r),e}function xee(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&v(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&v(e,["cachedContentTokenCount"],r);const a=x(t,["candidatesTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>cv(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>cv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>cv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>cv(b))),v(e,["toolUsePromptTokensDetails"],g)}const m=x(t,["trafficType"]);return m!=null&&v(e,["trafficType"],m),e}function vee(t){const e={},n=x(t,["timeLeft"]);return n!=null&&v(e,["timeLeft"],n),e}function yee(t){const e={},n=x(t,["newHandle"]);n!=null&&v(e,["newHandle"],n);const r=x(t,["resumable"]);r!=null&&v(e,["resumable"],r);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function wee(t){const e={},n=x(t,["setupComplete"]);n!=null&&v(e,["setupComplete"],lee(n));const r=x(t,["serverContent"]);r!=null&&v(e,["serverContent"],hee(r));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],pee(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],gee(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],xee(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],vee(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],yee(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bee(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Cee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Eee(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function _ee(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],bee(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Cee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Eee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function hw(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>_ee(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function See(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const U=x(t,["propertyOrdering"]);U!=null&&v(e,["propertyOrdering"],U);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const _=x(t,["type"]);return _!=null&&v(e,["type"],_),e}function Tee(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(t,["category"]);n!=null&&v(e,["category"],n);const r=x(t,["threshold"]);return r!=null&&v(e,["threshold"],r),e}function Bee(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Nee(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function kee(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],Nee(n)),e}function Iee(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function Fee(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],Iee(n)),e}function Ree(){return{}}function Dee(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Bee(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],kee(r));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],Fee(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Ree());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function Lee(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function Uee(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function Mee(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],Uee(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function Pee(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],Lee(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],Mee(r)),e}function jee(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function z8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],jee(n)),e}function Oee(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],z8(r)),e}function Qee(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Oee(a))),v(e,["speakerVoiceConfigs"],r)}return e}function Hee(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],z8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],Qee(r));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function Vee(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function zee(t,e,n){const r={},a=x(e,["systemInstruction"]);n!==void 0&&a!=null&&v(n,["systemInstruction"],hw(Pi(a)));const s=x(e,["temperature"]);s!=null&&v(r,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(r,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(r,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(r,["seed"],w);const E=x(e,["responseMimeType"]);E!=null&&v(r,["responseMimeType"],E);const N=x(e,["responseSchema"]);N!=null&&v(r,["responseSchema"],See($S(N)));const I=x(e,["responseJsonSchema"]);if(I!=null&&v(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=x(e,["safetySettings"]);if(n!==void 0&&k!=null){let R=k;Array.isArray(R)&&(R=R.map(L=>Tee(L))),v(n,["safetySettings"],R)}const U=x(e,["tools"]);if(n!==void 0&&U!=null){let R=qm(U);Array.isArray(R)&&(R=R.map(L=>Dee(Gm(L)))),v(n,["tools"],R)}const P=x(e,["toolConfig"]);if(n!==void 0&&P!=null&&v(n,["toolConfig"],Pee(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);n!==void 0&&D!=null&&v(n,["cachedContent"],jA(t,D));const _=x(e,["responseModalities"]);_!=null&&v(r,["responseModalities"],_);const B=x(e,["mediaResolution"]);B!=null&&v(r,["mediaResolution"],B);const T=x(e,["speechConfig"]);if(T!=null&&v(r,["speechConfig"],Hee(JS(T))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(r,["thinkingConfig"],Vee(O)),r}function yI(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);if(a!=null){let i=Ol(a);Array.isArray(i)&&(i=i.map(o=>hw(o))),v(n,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(n,["generationConfig"],zee(t,s,n)),n}function Gee(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&v(e,["requests[]","taskType"],r);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["requests[]","title"],a);const s=x(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);a!=null&&v(n,["requests[]","content"],T8(t,a));const s=x(e,["config"]);s!=null&&v(n,["config"],Gee(s,n));const i=x(e,["model"]);return i!==void 0&&v(n,["requests[]","model"],Hr(t,i)),n}function Kee(t,e){const n={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=x(t,["numberOfImages"]);e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r);const a=x(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const s=x(t,["guidanceScale"]);if(e!==void 0&&s!=null&&v(e,["parameters","guidanceScale"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const m=x(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&v(e,["parameters","outputOptions","compressionQuality"],m),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Wee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(n,["config"],Kee(s,n)),n}function $ee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function Jee(t,e,n){const r={},a=x(e,["pageSize"]);n!==void 0&&a!=null&&v(n,["_query","pageSize"],a);const s=x(e,["pageToken"]);n!==void 0&&s!=null&&v(n,["_query","pageToken"],s);const i=x(e,["filter"]);n!==void 0&&i!=null&&v(n,["_query","filter"],i);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&v(n,["_url","models_url"],k8(t,o)),r}function Yee(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],Jee(t,r,n)),n}function Xee(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),n}function Zee(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],Xee(a,n)),n}function ete(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function tte(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);if(a!=null){let i=Ol(a);Array.isArray(i)&&(i=i.map(o=>hw(o))),v(n,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(n,["config"],tte(s)),n}function rte(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Mh(n));const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function ate(t,e){const n={},r=x(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=x(t,["durationSeconds"]);if(e!==void 0&&a!=null&&v(e,["parameters","durationSeconds"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(t,["aspectRatio"]);if(e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ste(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=x(e,["image"]);if(s!=null&&v(n,["instances[0]","image"],rte(s)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(n,["config"],ate(i,n)),n}function ite(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function ote(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function lte(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function cte(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],ite(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],ote(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],lte(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Wm(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>cte(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function ute(t){const e={},n=x(t,["anyOf"]);n!=null&&v(e,["anyOf"],n);const r=x(t,["default"]);r!=null&&v(e,["default"],r);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const w=x(t,["minProperties"]);w!=null&&v(e,["minProperties"],w);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const N=x(t,["nullable"]);N!=null&&v(e,["nullable"],N);const I=x(t,["pattern"]);I!=null&&v(e,["pattern"],I);const k=x(t,["properties"]);k!=null&&v(e,["properties"],k);const U=x(t,["propertyOrdering"]);U!=null&&v(e,["propertyOrdering"],U);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const _=x(t,["type"]);return _!=null&&v(e,["type"],_),e}function Ate(t){const e={},n=x(t,["featureSelectionPreference"]);return n!=null&&v(e,["featureSelectionPreference"],n),e}function dte(t){const e={},n=x(t,["method"]);n!=null&&v(e,["method"],n);const r=x(t,["category"]);r!=null&&v(e,["category"],r);const a=x(t,["threshold"]);return a!=null&&v(e,["threshold"],a),e}function fte(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=x(t,["description"]);n!=null&&v(e,["description"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function hte(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function mte(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],hte(n)),e}function pte(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function gte(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],pte(n)),e}function xte(){return{}}function vte(t){const e={},n=x(t,["apiKeyString"]);return n!=null&&v(e,["apiKeyString"],n),e}function yte(t){const e={},n=x(t,["apiKeyConfig"]);n!=null&&v(e,["apiKeyConfig"],vte(n));const r=x(t,["authType"]);r!=null&&v(e,["authType"],r);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function wte(t){const e={},n=x(t,["authConfig"]);return n!=null&&v(e,["authConfig"],yte(n)),e}function bte(){return{}}function G8(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>fte(m))),v(e,["functionDeclarations"],h)}const r=x(t,["retrieval"]);r!=null&&v(e,["retrieval"],r);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],mte(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],gte(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],xte());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],wte(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],bte());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function Cte(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["allowedFunctionNames"]);return r!=null&&v(e,["allowedFunctionNames"],r),e}function Ete(t){const e={},n=x(t,["latitude"]);n!=null&&v(e,["latitude"],n);const r=x(t,["longitude"]);return r!=null&&v(e,["longitude"],r),e}function _te(t){const e={},n=x(t,["latLng"]);n!=null&&v(e,["latLng"],Ete(n));const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function Ste(t){const e={},n=x(t,["functionCallingConfig"]);n!=null&&v(e,["functionCallingConfig"],Cte(n));const r=x(t,["retrievalConfig"]);return r!=null&&v(e,["retrievalConfig"],_te(r)),e}function Tte(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function Bte(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],Tte(n)),e}function Nte(t){const e={},n=x(t,["voiceConfig"]);if(n!=null&&v(e,["voiceConfig"],Bte(n)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=x(t,["languageCode"]);return r!=null&&v(e,["languageCode"],r),e}function kte(t){const e={},n=x(t,["includeThoughts"]);n!=null&&v(e,["includeThoughts"],n);const r=x(t,["thinkingBudget"]);return r!=null&&v(e,["thinkingBudget"],r),e}function Ite(t,e,n){const r={},a=x(e,["systemInstruction"]);n!==void 0&&a!=null&&v(n,["systemInstruction"],Wm(Pi(a)));const s=x(e,["temperature"]);s!=null&&v(r,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(r,["topP"],i);const o=x(e,["topK"]);o!=null&&v(r,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(r,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(r,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(r,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(r,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(r,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(r,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&v(r,["seed"],w);const E=x(e,["responseMimeType"]);E!=null&&v(r,["responseMimeType"],E);const N=x(e,["responseSchema"]);N!=null&&v(r,["responseSchema"],ute($S(N)));const I=x(e,["responseJsonSchema"]);I!=null&&v(r,["responseJsonSchema"],I);const k=x(e,["routingConfig"]);k!=null&&v(r,["routingConfig"],k);const U=x(e,["modelSelectionConfig"]);U!=null&&v(r,["modelConfig"],Ate(U));const P=x(e,["safetySettings"]);if(n!==void 0&&P!=null){let ie=P;Array.isArray(ie)&&(ie=ie.map(J=>dte(J))),v(n,["safetySettings"],ie)}const D=x(e,["tools"]);if(n!==void 0&&D!=null){let ie=qm(D);Array.isArray(ie)&&(ie=ie.map(J=>G8(Gm(J)))),v(n,["tools"],ie)}const _=x(e,["toolConfig"]);n!==void 0&&_!=null&&v(n,["toolConfig"],Ste(_));const B=x(e,["labels"]);n!==void 0&&B!=null&&v(n,["labels"],B);const T=x(e,["cachedContent"]);n!==void 0&&T!=null&&v(n,["cachedContent"],jA(t,T));const O=x(e,["responseModalities"]);O!=null&&v(r,["responseModalities"],O);const R=x(e,["mediaResolution"]);R!=null&&v(r,["mediaResolution"],R);const L=x(e,["speechConfig"]);L!=null&&v(r,["speechConfig"],Nte(JS(L)));const Q=x(e,["audioTimestamp"]);Q!=null&&v(r,["audioTimestamp"],Q);const z=x(e,["thinkingConfig"]);return z!=null&&v(r,["thinkingConfig"],kte(z)),r}function wI(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);if(a!=null){let i=Ol(a);Array.isArray(i)&&(i=i.map(o=>Wm(o))),v(n,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(n,["generationConfig"],Ite(t,s,n)),n}function Fte(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&v(e,["instances[]","task_type"],r);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["instances[]","title"],a);const s=x(t,["outputDimensionality"]);e!==void 0&&s!=null&&v(e,["parameters","outputDimensionality"],s);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),n}function Rte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);a!=null&&v(n,["instances[]","content"],T8(t,a));const s=x(e,["config"]);return s!=null&&v(n,["config"],Fte(s,n)),n}function Dte(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const w=x(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","compressionQuality"],w);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const N=x(t,["imageSize"]);e!==void 0&&N!=null&&v(e,["parameters","sampleImageSize"],N);const I=x(t,["enhancePrompt"]);return e!==void 0&&I!=null&&v(e,["parameters","enhancePrompt"],I),n}function Lte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(n,["config"],Dte(s,n)),n}function mw(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Mh(r));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Ute(t){const e={},n=x(t,["maskMode"]);n!=null&&v(e,["maskMode"],n);const r=x(t,["segmentationClasses"]);r!=null&&v(e,["maskClasses"],r);const a=x(t,["maskDilation"]);return a!=null&&v(e,["dilation"],a),e}function Mte(t){const e={},n=x(t,["controlType"]);n!=null&&v(e,["controlType"],n);const r=x(t,["enableControlImageComputation"]);return r!=null&&v(e,["computeControl"],r),e}function Pte(t){const e={},n=x(t,["styleDescription"]);return n!=null&&v(e,["styleDescription"],n),e}function jte(t){const e={},n=x(t,["subjectType"]);n!=null&&v(e,["subjectType"],n);const r=x(t,["subjectDescription"]);return r!=null&&v(e,["subjectDescription"],r),e}function Ote(t){const e={},n=x(t,["referenceImage"]);n!=null&&v(e,["referenceImage"],mw(n));const r=x(t,["referenceId"]);r!=null&&v(e,["referenceId"],r);const a=x(t,["referenceType"]);a!=null&&v(e,["referenceType"],a);const s=x(t,["maskImageConfig"]);s!=null&&v(e,["maskImageConfig"],Ute(s));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],Mte(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],Pte(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],jte(l)),e}function Qte(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&v(e,["parameters","storageUri"],r);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const w=x(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&v(e,["parameters","outputOptions","compressionQuality"],w);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const N=x(t,["editMode"]);e!==void 0&&N!=null&&v(e,["parameters","editMode"],N);const I=x(t,["baseSteps"]);return e!==void 0&&I!=null&&v(e,["parameters","editConfig","baseSteps"],I),n}function Hte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=x(e,["referenceImages"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Ote(l))),v(n,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(n,["config"],Qte(i,n)),n}function Vte(t,e){const n={},r=x(t,["includeRaiReason"]);e!==void 0&&r!=null&&v(e,["parameters","includeRaiReason"],r);const a=x(t,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const s=x(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","compressionQuality"],s);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),n}function zte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["image"]);a!=null&&v(n,["instances[0]","image"],mw(a));const s=x(e,["upscaleFactor"]);s!=null&&v(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=x(e,["config"]);return i!=null&&v(n,["config"],Vte(i,n)),n}function Gte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function qte(t,e,n){const r={},a=x(e,["pageSize"]);n!==void 0&&a!=null&&v(n,["_query","pageSize"],a);const s=x(e,["pageToken"]);n!==void 0&&s!=null&&v(n,["_query","pageToken"],s);const i=x(e,["filter"]);n!==void 0&&i!=null&&v(n,["_query","filter"],i);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&v(n,["_url","models_url"],k8(t,o)),r}function Kte(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],qte(t,r,n)),n}function Wte(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&v(e,["displayName"],r);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),n}function $te(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],Wte(a,n)),n}function Jte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","name"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],a),n}function Yte(t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&v(e,["systemInstruction"],Wm(Pi(r)));const a=x(t,["tools"]);if(e!==void 0&&a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>G8(o))),v(e,["tools"],i)}const s=x(t,["generationConfig"]);return e!==void 0&&s!=null&&v(e,["generationConfig"],s),n}function Xte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);if(a!=null){let i=Ol(a);Array.isArray(i)&&(i=i.map(o=>Wm(o))),v(n,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(n,["config"],Yte(s,n)),n}function Zte(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["contents"]);if(a!=null){let i=Ol(a);Array.isArray(i)&&(i=i.map(o=>Wm(o))),v(n,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(n,["config"],s),n}function ene(t){const e={},n=x(t,["uri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["videoBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Mh(r));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function tne(t,e){const n={},r=x(t,["numberOfVideos"]);e!==void 0&&r!=null&&v(e,["parameters","sampleCount"],r);const a=x(t,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const s=x(t,["fps"]);e!==void 0&&s!=null&&v(e,["parameters","fps"],s);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const m=x(t,["negativePrompt"]);e!==void 0&&m!=null&&v(e,["parameters","negativePrompt"],m);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const w=x(t,["lastFrame"]);e!==void 0&&w!=null&&v(e,["instances[0]","lastFrame"],mw(w));const E=x(t,["compressionQuality"]);return e!==void 0&&E!=null&&v(e,["parameters","compressionQuality"],E),n}function nne(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["_url","model"],Hr(t,r));const a=x(e,["prompt"]);a!=null&&v(n,["instances[0]","prompt"],a);const s=x(e,["image"]);s!=null&&v(n,["instances[0]","image"],mw(s));const i=x(e,["video"]);i!=null&&v(n,["instances[0]","video"],ene(i));const o=x(e,["config"]);return o!=null&&v(n,["config"],tne(o,n)),n}function rne(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function ane(t){const e={},n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function sne(t){const e={},n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function ine(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],rne(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],ane(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],sne(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function one(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>ine(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function lne(t){const e={},n=x(t,["citationSources"]);return n!=null&&v(e,["citations"],n),e}function cne(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function une(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>cne(a))),v(e,["urlMetadata"],r)}return e}function Ane(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],one(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],lne(r));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],une(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function bI(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Ane(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function dne(t){const e={},n=x(t,["values"]);return n!=null&&v(e,["values"],n),e}function fne(){return{}}function hne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>dne(i))),v(e,["embeddings"],s)}return x(t,["metadata"])!=null&&v(e,["metadata"],fne()),e}function mne(t){const e={},n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Mh(n));const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function q8(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&v(e,["scores"],r);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function pne(t){const e={},n=x(t,["_self"]);n!=null&&v(e,["image"],mne(n));const r=x(t,["raiFilteredReason"]);r!=null&&v(e,["raiFilteredReason"],r);const a=x(t,["_self"]);return a!=null&&v(e,["safetyAttributes"],q8(a)),e}function gne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>pne(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],q8(a)),e}function xne(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&v(e,["createTime"],r);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function k_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["version"]);s!=null&&v(e,["version"],s);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],xne(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function vne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["_self"]);if(a!=null){let s=I8(a);Array.isArray(s)&&(s=s.map(i=>k_(i))),v(e,["models"],s)}return e}function yne(){return{}}function wne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);r!=null&&v(e,["totalTokens"],r);const a=x(t,["cachedContentTokenCount"]);return a!=null&&v(e,["cachedContentTokenCount"],a),e}function bne(t){const e={},n=x(t,["video","uri"]);n!=null&&v(e,["uri"],n);const r=x(t,["video","encodedVideo"]);r!=null&&v(e,["videoBytes"],Mh(r));const a=x(t,["encoding"]);return a!=null&&v(e,["mimeType"],a),e}function Cne(t){const e={},n=x(t,["_self"]);return n!=null&&v(e,["video"],bne(n)),e}function Ene(t){const e={},n=x(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Cne(i))),v(e,["generatedVideos"],s)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&v(e,["raiMediaFilteredCount"],r);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function _ne(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata"]);r!=null&&v(e,["metadata"],r);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],Ene(i)),e}function Sne(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Tne(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["data"]);r!=null&&v(e,["data"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Bne(t){const e={},n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Nne(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],Sne(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Tne(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Bne(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function kne(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>Nne(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Ine(t){const e={},n=x(t,["citations"]);return n!=null&&v(e,["citations"],n),e}function Fne(t){const e={},n=x(t,["retrievedUrl"]);n!=null&&v(e,["retrievedUrl"],n);const r=x(t,["urlRetrievalStatus"]);return r!=null&&v(e,["urlRetrievalStatus"],r),e}function Rne(t){const e={},n=x(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Fne(a))),v(e,["urlMetadata"],r)}return e}function Dne(t){const e={},n=x(t,["content"]);n!=null&&v(e,["content"],kne(n));const r=x(t,["citationMetadata"]);r!=null&&v(e,["citationMetadata"],Ine(r));const a=x(t,["finishMessage"]);a!=null&&v(e,["finishMessage"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Rne(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function CI(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Dne(d))),v(e,["candidates"],u)}const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const s=x(t,["responseId"]);s!=null&&v(e,["responseId"],s);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function Lne(t){const e={},n=x(t,["truncated"]);n!=null&&v(e,["truncated"],n);const r=x(t,["token_count"]);return r!=null&&v(e,["tokenCount"],r),e}function Une(t){const e={},n=x(t,["values"]);n!=null&&v(e,["values"],n);const r=x(t,["statistics"]);return r!=null&&v(e,["statistics"],Lne(r)),e}function Mne(t){const e={},n=x(t,["billableCharacterCount"]);return n!=null&&v(e,["billableCharacterCount"],n),e}function Pne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Une(i))),v(e,["embeddings"],s)}const a=x(t,["metadata"]);return a!=null&&v(e,["metadata"],Mne(a)),e}function jne(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["gcsUri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],Mh(r));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function K8(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&v(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&v(e,["scores"],r);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function XS(t){const e={},n=x(t,["_self"]);n!=null&&v(e,["image"],jne(n));const r=x(t,["raiFilteredReason"]);r!=null&&v(e,["raiFilteredReason"],r);const a=x(t,["_self"]);a!=null&&v(e,["safetyAttributes"],K8(a));const s=x(t,["prompt"]);return s!=null&&v(e,["enhancedPrompt"],s),e}function One(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>XS(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],K8(a)),e}function Qne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>XS(s))),v(e,["generatedImages"],a)}return e}function Hne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>XS(s))),v(e,["generatedImages"],a)}return e}function Vne(t){const e={},n=x(t,["endpoint"]);n!=null&&v(e,["name"],n);const r=x(t,["deployedModelId"]);return r!=null&&v(e,["deployedModelId"],r),e}function zne(t){const e={},n=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&v(e,["createTime"],r);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function Gne(t){const e={},n=x(t,["checkpointId"]);n!=null&&v(e,["checkpointId"],n);const r=x(t,["epoch"]);r!=null&&v(e,["epoch"],r);const a=x(t,["step"]);return a!=null&&v(e,["step"],a),e}function I_(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["versionId"]);s!=null&&v(e,["version"],s);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>Vne(m))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],zne(l));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>Gne(m))),v(e,["checkpoints"],h)}return e}function qne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["_self"]);if(a!=null){let s=I8(a);Array.isArray(s)&&(s=s.map(i=>I_(i))),v(e,["models"],s)}return e}function Kne(){return{}}function Wne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);return r!=null&&v(e,["totalTokens"],r),e}function $ne(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["tokensInfo"]);return r!=null&&v(e,["tokensInfo"],r),e}function Jne(t){const e={},n=x(t,["gcsUri"]);n!=null&&v(e,["uri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["videoBytes"],Mh(r));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Yne(t){const e={},n=x(t,["_self"]);return n!=null&&v(e,["video"],Jne(n)),e}function Xne(t){const e={},n=x(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Yne(i))),v(e,["generatedVideos"],s)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&v(e,["raiMediaFilteredCount"],r);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function Zne(t){const e={},n=x(t,["name"]);n!=null&&v(e,["name"],n);const r=x(t,["metadata"]);r!=null&&v(e,["metadata"],r);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response"]);return i!=null&&v(e,["response"],Xne(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ere="Content-Type",tre="X-Server-Timeout",nre="User-Agent",F_="x-goog-api-client",rre="1.12.0",are=`google-genai-sdk/${rre}`,sre="v1beta1",ire="v1beta",EI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ore{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:sre,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ire,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const a=[this.getRequestUrlInternal(n)];return r&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))a.searchParams.append(i,String(o));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(a,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[a,s]of Object.entries(n))typeof s=="object"?r[a]=Object.assign(Object.assign({},r[a]),s):s!==void 0&&(r[a]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,r);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(a,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const a=new AbortController,s=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>a.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=s}return n&&n.extraBody!==null&&lre(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async a=>(await _I(a),new E_(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async a=>(await _I(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var n;return am(this,arguments,function*(){const a=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield sa(a.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,b=m.code,w=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new fw({message:w,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(EI);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield sa(new E_(m)),i=i.slice(d[0].length),d=i.match(EI)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=are+" "+this.clientOptions.userAgentExtra;return e[nre]=n,e[F_]=n,e[ere]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))n.append(r,a);e.timeout&&e.timeout>0&&n.append(tre,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,i=await s.stat(e);a.sizeBytes=String(i.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=o;const l=await this.fetchUploadUrl(a,n);return s.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let a={};n!=null&&n.httpOptions?a=n.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},i=await this.request({path:nn("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=i==null?void 0:i.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function _I(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(r);throw n>=400&&n<600?new fw({message:a,status:n}):new Error(a)}}function lre(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,i){const o=Object.assign({},s);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const a=r(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cre="mcp_used/unknown";let ure=!1;function W8(t){for(const e of t)if(Are(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ure}function $8(t){var e;const n=(e=t[F_])!==null&&e!==void 0?e:"";t[F_]=(n+` ${cre}`).trimStart()}function Are(t){return t!==null&&typeof t=="object"&&t instanceof ZS}function dre(t,e=100){return am(this,arguments,function*(){let r,a=0;for(;a<e;){const s=yield sa(t.listTools({cursor:r}));for(const i of s.tools)yield yield sa(i),a++;if(!s.nextCursor)break;r=s.nextCursor}})}class ZS{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ZS(e,n)}async initialize(){var e,n,r,a;if(this.mcpTools.length>0)return;const s={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(n=void 0,Ng(dre(d))),u;u=await l.next(),e=u.done,!e;o=!0){a=u.value,o=!1;const h=a;i.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),oJ(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await a.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fre(t,e,n){const r=new Z$;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data);const s=oee(a);Object.assign(r,s),e(r)}class hre{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=gre(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(k=>{u=k}),h=e.callbacks,m=function(){u({})},g=this.apiClient,b={onopen:m,onmessage:k=>{fre(g,h.onmessage,k)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(k){}},w=this.webSocketFactory.create(l,pre(i),b);w.connect(),await d;const E=Hr(this.apiClient,e.model),N=H8({model:E}),I=N_({setup:N});return w.send(JSON.stringify(I)),new mre(w,this.apiClient)}}class mre{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=sZ(e),r=V8(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=iZ(e),r=N_(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=N_({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(W0.PLAY)}pause(){this.sendPlaybackControl(W0.PAUSE)}stop(){this.sendPlaybackControl(W0.STOP)}resetContext(){this.sendPlaybackControl(W0.RESET_CONTEXT)}close(){this.conn.close()}}function pre(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function gre(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xre="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vre(t,e,n){const r=new X$;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const s=JSON.parse(a);if(t.isVertexAI()){const i=wee(s);Object.assign(r,i)}else{const i=XZ(s);Object.assign(r,i)}e(r)}class yre{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new hre(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,a,s,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&W8(e.config.tools)&&$8(h);const m=Ere(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const T=this.apiClient.getApiKey();let O="BidiGenerateContent",R="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",R="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${O}?${R}=${T}`}let g=()=>{};const b=new Promise(T=>{g=T}),w=e.callbacks,E=function(){var T;(T=w==null?void 0:w.onopen)===null||T===void 0||T.call(w),g({})},N=this.apiClient,I={onopen:E,onmessage:T=>{vre(N,w.onmessage,T)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(T){}},k=this.webSocketFactory.create(d,Cre(m),I);k.connect(),await b;let U=Hr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const T=this.apiClient.getProject(),O=this.apiClient.getLocation();U=`projects/${T}/locations/${O}/`+U}let P={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Y2.AUDIO]}:e.config.responseModalities=[Y2.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],_=[];for(const T of D)if(this.isCallableTool(T)){const O=T;_.push(await O.tool())}else _.push(T);_.length>0&&(e.config.tools=_);const B={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=RZ(this.apiClient,B):P=tZ(this.apiClient,B),delete P.config,k.send(JSON.stringify(P)),new bre(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const wre={turnComplete:!0};class bre{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ol(n.turns),e.isVertexAI()?r=r.map(a=>Wm(a)):r=r.map(a=>hw(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(xre)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},wre),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:UZ(e)}:n={realtimeInput:aZ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Cre(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Ere(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SI=10;function TI(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(sm(i)){a=!0;break}if(!a)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function sm(t){return"callTool"in t&&typeof t.callTool=="function"}function _re(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>sm(a)))!==null&&r!==void 0?r:!1}function Sre(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>!sm(a)))!==null&&r!==void 0?r:!1}function BI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tre extends Uh{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,a,s,i,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!_re(n)||TI(n.config))return await this.generateContentInternal(l);if(Sre(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=Ol(l.contents),m=(s=(a=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:SI;let g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,w=[];for(const E of(o=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(sm(E)){const I=await E.callTool(u.functionCalls);w.push(...I)}g++,d={role:"user",parts:w},l.contents=Ol(l.contents),l.contents.push(b),l.contents.push(d),BI(l.config)&&(h.push(b),h.push(d))}return BI(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),TI(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var a;let s;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((a=l==null?void 0:l.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:i.push(l);let o;return s?o={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Qx(Eh.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,a;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const i=await Promise.all(s.map(async l=>sm(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&W8(e.config.tools)){const l=(a=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&a!==void 0?a:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),$8(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var n,r,a;const s=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(sm(i)){const o=i,l=await o.tool();for(const u of(a=l.functionDeclarations)!==null&&a!==void 0?a:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,o)}}return s}async processAfcStream(e){var n,r,a;const s=(a=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:SI;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var m,g;return am(this,arguments,function*(){for(var b,w,E,N;o<s;){i&&(o++,i=!1);const P=yield sa(u.processParamsMaybeAddMcpUsage(h)),D=yield sa(u.generateContentStreamInternal(P)),_=[],B=[];try{for(var I=!0,k=(w=void 0,Ng(D)),U;U=yield sa(k.next()),b=U.done,!b;I=!0){N=U.value,I=!1;const T=N;if(yield yield sa(T),T.candidates&&(!((m=T.candidates[0])===null||m===void 0)&&m.content)){B.push(T.candidates[0].content);for(const O of(g=T.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<s&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(O.functionCall.name)){const R=yield sa(d.get(O.functionCall.name).callTool([O.functionCall]));_.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(T){w={error:T}}finally{try{!I&&!b&&(E=k.return)&&(yield sa(E.call(k)))}finally{if(w)throw w.error}}if(_.length>0){i=!0;const T=new Hp;T.candidates=[{content:{role:"user",parts:_}}],yield yield sa(T);const O=[];O.push(...B),O.push({role:"user",parts:_});const R=Ol(h.contents).concat(O);h.contents=R}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=wI(this.apiClient,e);return o=nn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=CI(d),m=new Hp;return Object.assign(m,h),m})}else{const u=yI(this.apiClient,e);return o=nn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=bI(d),m=new Hp;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=wI(this.apiClient,e);return o=nn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(h){return am(this,arguments,function*(){var m,g,b,w;try{for(var E=!0,N=Ng(h),I;I=yield sa(N.next()),m=I.done,!m;E=!0){w=I.value,E=!1;const k=w,U=CI(yield sa(k.json()));U.sdkHttpResponse={headers:k.headers};const P=new Hp;Object.assign(P,U),yield yield sa(P)}}catch(k){g={error:k}}finally{try{!E&&!m&&(b=N.return)&&(yield sa(b.call(N)))}finally{if(g)throw g.error}}})})}else{const u=yI(this.apiClient,e);return o=nn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(h){return am(this,arguments,function*(){var m,g,b,w;try{for(var E=!0,N=Ng(h),I;I=yield sa(N.next()),m=I.done,!m;E=!0){w=I.value,E=!1;const k=w,U=bI(yield sa(k.json()));U.sdkHttpResponse={headers:k.headers};const P=new Hp;Object.assign(P,U),yield yield sa(P)}}catch(k){g={error:k}}finally{try{!E&&!m&&(b=N.return)&&(yield sa(b.call(N)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Rte(this.apiClient,e);return o=nn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Pne(d),m=new Z3;return Object.assign(m,h),m})}else{const u=qee(this.apiClient,e);return o=nn("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=hne(d),m=new Z3;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Lte(this.apiClient,e);return o=nn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=One(d),m=new eI;return Object.assign(m,h),m})}else{const u=Wee(this.apiClient,e);return o=nn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=gne(d),m=new eI;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Hte(this.apiClient,e);return s=nn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=Qne(l),d=new q$;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=zte(this.apiClient,e);return s=nn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=Hne(l),d=new K$;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Gte(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>I_(d))}else{const u=$ee(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>k_(d))}}async listInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Kte(this.apiClient,e);return o=nn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=qne(d),m=new tI;return Object.assign(m,h),m})}else{const u=Yee(this.apiClient,e);return o=nn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=vne(d),m=new tI;return Object.assign(m,h),m})}}async update(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=$te(this.apiClient,e);return o=nn("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>I_(d))}else{const u=Zee(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>k_(d))}}async delete(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Jte(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Kne(),h=new nI;return Object.assign(h,d),h})}else{const u=ete(this.apiClient,e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=yne(),h=new nI;return Object.assign(h,d),h})}}async countTokens(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Xte(this.apiClient,e);return o=nn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Wne(d),m=new rI;return Object.assign(m,h),m})}else{const u=nte(this.apiClient,e);return o=nn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=wne(d),m=new rI;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Zte(this.apiClient,e);return s=nn("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=$ne(l),d=new W$;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=nne(this.apiClient,e);return o=nn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Zne(d),m=new X2;return Object.assign(m,h),m})}else{const u=ste(this.apiClient,e);return o=nn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>{const h=_ne(d),m=new X2;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bre(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["_url","operationName"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function Nre(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["_url","operationName"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function kre(t){const e={},n=x(t,["operationName"]);n!=null&&v(e,["operationName"],n);const r=x(t,["resourceName"]);r!=null&&v(e,["_url","resourceName"],r);const a=x(t,["config"]);return a!=null&&v(e,["config"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ire extends Uh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Nre(e);return o=nn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i}else{const u=Bre(e);return o=nn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=kre(e);return s=nn("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fre(t){const e={},n=x(t,["voiceName"]);return n!=null&&v(e,["voiceName"],n),e}function J8(t){const e={},n=x(t,["prebuiltVoiceConfig"]);return n!=null&&v(e,["prebuiltVoiceConfig"],Fre(n)),e}function Rre(t){const e={},n=x(t,["speaker"]);n!=null&&v(e,["speaker"],n);const r=x(t,["voiceConfig"]);return r!=null&&v(e,["voiceConfig"],J8(r)),e}function Dre(t){const e={},n=x(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Rre(a))),v(e,["speakerVoiceConfigs"],r)}return e}function Lre(t){const e={},n=x(t,["voiceConfig"]);n!=null&&v(e,["voiceConfig"],J8(n));const r=x(t,["multiSpeakerVoiceConfig"]);r!=null&&v(e,["multiSpeakerVoiceConfig"],Dre(r));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function Ure(t){const e={},n=x(t,["fps"]);n!=null&&v(e,["fps"],n);const r=x(t,["endOffset"]);r!=null&&v(e,["endOffset"],r);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Mre(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["data"]);n!=null&&v(e,["data"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function Pre(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&v(e,["mimeType"],r),e}function jre(t){const e={},n=x(t,["videoMetadata"]);n!=null&&v(e,["videoMetadata"],Ure(n));const r=x(t,["thought"]);r!=null&&v(e,["thought"],r);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Mre(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Pre(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Ore(t){const e={},n=x(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>jre(s))),v(e,["parts"],a)}const r=x(t,["role"]);return r!=null&&v(e,["role"],r),e}function Qre(t){const e={},n=x(t,["behavior"]);n!=null&&v(e,["behavior"],n);const r=x(t,["description"]);r!=null&&v(e,["description"],r);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function Hre(t){const e={},n=x(t,["startTime"]);n!=null&&v(e,["startTime"],n);const r=x(t,["endTime"]);return r!=null&&v(e,["endTime"],r),e}function Vre(t){const e={},n=x(t,["timeRangeFilter"]);return n!=null&&v(e,["timeRangeFilter"],Hre(n)),e}function zre(t){const e={},n=x(t,["mode"]);n!=null&&v(e,["mode"],n);const r=x(t,["dynamicThreshold"]);return r!=null&&v(e,["dynamicThreshold"],r),e}function Gre(t){const e={},n=x(t,["dynamicRetrievalConfig"]);return n!=null&&v(e,["dynamicRetrievalConfig"],zre(n)),e}function qre(){return{}}function Kre(t){const e={},n=x(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Qre(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["googleSearch"]);r!=null&&v(e,["googleSearch"],Vre(r));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],Gre(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],qre());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function Wre(t){const e={},n=x(t,["handle"]);if(n!=null&&v(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NI(){return{}}function $re(t){const e={},n=x(t,["disabled"]);n!=null&&v(e,["disabled"],n);const r=x(t,["startOfSpeechSensitivity"]);r!=null&&v(e,["startOfSpeechSensitivity"],r);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Jre(t){const e={},n=x(t,["automaticActivityDetection"]);n!=null&&v(e,["automaticActivityDetection"],$re(n));const r=x(t,["activityHandling"]);r!=null&&v(e,["activityHandling"],r);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function Yre(t){const e={},n=x(t,["targetTokens"]);return n!=null&&v(e,["targetTokens"],n),e}function Xre(t){const e={},n=x(t,["triggerTokens"]);n!=null&&v(e,["triggerTokens"],n);const r=x(t,["slidingWindow"]);return r!=null&&v(e,["slidingWindow"],Yre(r)),e}function Zre(t){const e={},n=x(t,["proactiveAudio"]);return n!=null&&v(e,["proactiveAudio"],n),e}function eae(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&v(e,["setup","generationConfig"],r);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],Lre(YS(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],Ore(Pi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=qm(b);Array.isArray(P)&&(P=P.map(D=>Kre(Gm(D)))),v(e,["setup","tools"],P)}const w=x(t,["sessionResumption"]);e!==void 0&&w!=null&&v(e,["setup","sessionResumption"],Wre(w));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],NI());const N=x(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&v(e,["setup","outputAudioTranscription"],NI());const I=x(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&v(e,["setup","realtimeInputConfig"],Jre(I));const k=x(t,["contextWindowCompression"]);e!==void 0&&k!=null&&v(e,["setup","contextWindowCompression"],Xre(k));const U=x(t,["proactivity"]);return e!==void 0&&U!=null&&v(e,["setup","proactivity"],Zre(U)),n}function tae(t,e){const n={},r=x(e,["model"]);r!=null&&v(n,["setup","model"],Hr(t,r));const a=x(e,["config"]);return a!=null&&v(n,["config"],eae(a,n)),n}function nae(t,e,n){const r={},a=x(e,["expireTime"]);n!==void 0&&a!=null&&v(n,["expireTime"],a);const s=x(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&v(n,["newSessionExpireTime"],s);const i=x(e,["uses"]);n!==void 0&&i!=null&&v(n,["uses"],i);const o=x(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&v(n,["bidiGenerateContentSetup"],tae(t,o));const l=x(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&v(n,["fieldMask"],l),r}function rae(t,e){const n={},r=x(e,["config"]);return r!=null&&v(n,["config"],nae(t,r,n)),n}function aae(t){const e={},n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sae(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const a=Object.keys(r).map(s=>`${n}.${s}`);e.push(...a)}else e.push(n)}return e.join(",")}function iae(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const s=sae(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];a.length>0&&(o=a.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class oae extends Uh{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=rae(this.apiClient,e);s=nn("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=iae(o,e.config);return a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),a.then(u=>aae(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lae(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function cae(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),n}function uae(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],cae(n,e)),e}function Aae(t){const e={},n=x(t,["textInput"]);n!=null&&v(e,["textInput"],n);const r=x(t,["output"]);return r!=null&&v(e,["output"],r),e}function dae(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=x(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Aae(a))),v(e,["examples","examples"],r)}return e}function fae(t,e){const n={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&v(e,["displayName"],r),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(t,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const s=x(t,["learningRateMultiplier"]);if(s!=null&&v(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),n}function hae(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["trainingDataset"]);r!=null&&v(e,["tuningTask","trainingData"],dae(r));const a=x(t,["config"]);return a!=null&&v(e,["config"],fae(a,e)),e}function mae(t){const e={},n=x(t,["name"]);n!=null&&v(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&v(e,["config"],r),e}function pae(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&v(e,["_query","pageSize"],r);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),n}function gae(t){const e={},n=x(t,["config"]);return n!=null&&v(e,["config"],pae(n,e)),e}function xae(t,e){const n={},r=x(t,["gcsUri"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],r);const a=x(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function vae(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&v(n,["validationDatasetUri"],r);const a=x(t,["vertexDatasetResource"]);return e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),n}function yae(t,e){const n={},r=x(t,["validationDataset"]);e!==void 0&&r!=null&&v(e,["supervisedTuningSpec"],vae(r,n));const a=x(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function wae(t){const e={},n=x(t,["baseModel"]);n!=null&&v(e,["baseModel"],n);const r=x(t,["trainingDataset"]);r!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],xae(r,e));const a=x(t,["config"]);return a!=null&&v(e,["config"],yae(a,e)),e}function bae(t){const e={},n=x(t,["name"]);n!=null&&v(e,["model"],n);const r=x(t,["name"]);return r!=null&&v(e,["endpoint"],r),e}function Y8(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const a=x(t,["state"]);a!=null&&v(e,["state"],B8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],bae(h));const m=x(t,["distillationSpec"]);m!=null&&v(e,["distillationSpec"],m);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const w=x(t,["pipelineJob"]);w!=null&&v(e,["pipelineJob"],w);const E=x(t,["satisfiesPzi"]);E!=null&&v(e,["satisfiesPzi"],E);const N=x(t,["satisfiesPzs"]);N!=null&&v(e,["satisfiesPzs"],N);const I=x(t,["serviceAccount"]);I!=null&&v(e,["serviceAccount"],I);const k=x(t,["tunedModelDisplayName"]);return k!=null&&v(e,["tunedModelDisplayName"],k),e}function Cae(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>Y8(i))),v(e,["tuningJobs"],s)}return e}function Eae(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const a=x(t,["metadata"]);a!=null&&v(e,["metadata"],a);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function _ae(t){const e={},n=x(t,["checkpointId"]);n!=null&&v(e,["checkpointId"],n);const r=x(t,["epoch"]);r!=null&&v(e,["epoch"],r);const a=x(t,["step"]);a!=null&&v(e,["step"],a);const s=x(t,["endpoint"]);return s!=null&&v(e,["endpoint"],s),e}function Sae(t){const e={},n=x(t,["model"]);n!=null&&v(e,["model"],n);const r=x(t,["endpoint"]);r!=null&&v(e,["endpoint"],r);const a=x(t,["checkpoints"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>_ae(i))),v(e,["checkpoints"],s)}return e}function R_(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&v(e,["name"],r);const a=x(t,["state"]);a!=null&&v(e,["state"],B8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const m=x(t,["tunedModel"]);m!=null&&v(e,["tunedModel"],Sae(m));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const w=x(t,["encryptionSpec"]);w!=null&&v(e,["encryptionSpec"],w);const E=x(t,["partnerModelTuningSpec"]);E!=null&&v(e,["partnerModelTuningSpec"],E);const N=x(t,["distillationSpec"]);N!=null&&v(e,["distillationSpec"],N);const I=x(t,["experiment"]);I!=null&&v(e,["experiment"],I);const k=x(t,["labels"]);k!=null&&v(e,["labels"],k);const U=x(t,["pipelineJob"]);U!=null&&v(e,["pipelineJob"],U);const P=x(t,["satisfiesPzi"]);P!=null&&v(e,["satisfiesPzi"],P);const D=x(t,["satisfiesPzs"]);D!=null&&v(e,["satisfiesPzs"],D);const _=x(t,["serviceAccount"]);_!=null&&v(e,["serviceAccount"],_);const B=x(t,["tunedModelDisplayName"]);return B!=null&&v(e,["tunedModelDisplayName"],B),e}function Tae(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&v(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&v(e,["nextPageToken"],r);const a=x(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>R_(i))),v(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bae extends Uh{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Qx(Eh.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:C_.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=mae(e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>R_(d))}else{const u=lae(e);return o=nn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>Y8(d))}}async listInternal(e){var n,r,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=gae(e);return o=nn("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Tae(d),m=new sI;return Object.assign(m,h),m})}else{const u=uae(e);return o=nn("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Cae(d),m=new sI;return Object.assign(m,h),m})}}async tuneInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=wae(e);return s=nn("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>R_(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=hae(e);return s=nn("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>Eae(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nae{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kae=1024*1024*8,Iae=3,Fae=1e3,Rae=2,NC="x-goog-upload-status";async function Dae(t,e,n){var r,a,s;let i=0,o=0,l=new E_(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(kae,i-o),m=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let g=0,b=Fae;for(;g<Iae&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[NC]));)g++,await Uae(b),b=b*Rae;if(o+=h,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[NC])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[NC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Lae(t){return{size:t.size,type:t.type}}function Uae(t){return new Promise(e=>setTimeout(e,t))}class Mae{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Dae(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Lae(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pae{create(e,n,r){return new jae(e,n,r)}}class jae{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kI="x-goog-api-key";class Oae{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(kI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(kI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qae="gl-node/";class Ks{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=G$(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const a=new Oae(this.apiKey);this.apiClient=new ore({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Qae+"web",uploader:new Mae,downloader:new Nae}),this.models=new Tre(this.apiClient),this.live=new yre(this.apiClient,a,new Pae),this.batches=new hY(this.apiClient),this.chats=new xX(this.models,this.apiClient),this.caches=new mX(this.apiClient),this.files=new IX(this.apiClient),this.operations=new Ire(this.apiClient),this.authTokens=new oae(this.apiClient),this.tunings=new Bae(this.apiClient)}}const II="apiCallLogs",Hae="lir-sessionUser",el=t=>{try{const e=localStorage.getItem(Hae);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesin.");return}const n=JSON.parse(e),r=localStorage.getItem(II),a=r?JSON.parse(r):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:n.id,userEmail:n.email,module:t},...a].slice(0,2e3);localStorage.setItem(II,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},kC="asignacionesHorario",IC="horariosGenerados",Vae="usuariosLiceo",zae=({horarios:t})=>Object.keys(t).length===0?A.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no se ha generado ningn horario. Utilice la pestaa de "Configuracin" para generar uno.'})}):A.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full border-collapse",children:[A.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),A.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),xs.map(e=>A.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),A.jsx("tbody",{children:h2.map(e=>A.jsxs(At.Fragment,{children:[A.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:A.jsx("th",{colSpan:2+xs.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),w_.map(({bloque:n,inicio:r,fin:a})=>A.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[A.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:n}),A.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${r} - ${a}`}),xs.map(s=>{var o,l;const i=(l=(o=t[s])==null?void 0:o[e])==null?void 0:l[n];return A.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?A.jsxs("div",{className:"flex flex-col justify-center h-full",children:[A.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),A.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):A.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${e}-${n}`)})]},`${e}-${n}`))]},e))})]})}),Gae=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState({curso:"",asignatura:"",profesor:""}),[a,s]=Z.useState([]),[i,o]=Z.useState({}),[l,u]=Z.useState(xs[0]),[d,h]=Z.useState(!1),[m,g]=Z.useState(null),[b,w]=Z.useState(null),[E,N]=Z.useState(null),[I,k]=Z.useState({asignatura:"",profesor:""}),[U,P]=Z.useState("edicion"),[D,_]=Z.useState("");Z.useEffect(()=>{try{const J=localStorage.getItem(kC);J&&e(JSON.parse(J));const ee=localStorage.getItem(IC);ee&&o(JSON.parse(ee));const ae=localStorage.getItem(Vae);if(ae){const Y=JSON.parse(ae).filter(Ae=>Ae.profile===rn.PROFESORADO).map(Ae=>Ae.nombreCompleto).sort();s(Y)}}catch(J){console.error("Error al cargar datos de localStorage",J),g("No se pudieron cargar los datos guardados.")}},[]);const B=J=>{if(J.preventDefault(),!n.curso||!n.asignatura||!n.profesor){g("Todos los campos de la asignacin son obligatorios.");return}const ee=[...t,{...n,id:crypto.randomUUID()}];e(ee),localStorage.setItem(kC,JSON.stringify(ee)),r({curso:"",asignatura:"",profesor:""}),g(null)},T=J=>{const ee=t.filter(ae=>ae.id!==J);e(ee),localStorage.setItem(kC,JSON.stringify(ee))},O=async()=>{if(t.length===0){g("Debe agregar al menos una asignacin de profesor antes de generar el horario.");return}h(!0),g(null),w(null);try{el("Crear Horarios");const J=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),ee=`
                Eres un asistente experto en planificacin de horarios escolares para un liceo tcnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Das de la semana: ${h2.join(", ")}
                - Bloques horarios por da: 10 bloques con los siguientes horarios: ${JSON.stringify(w_,null,2)}
                - Cursos del liceo: ${xs.join(", ")}

                **Contexto Adicional de Especialidades (3 y 4 Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecnica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecnica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3/4 Medio Automotriz" y "3/4 Medio Industrial" correctamente.

                **Reglas de Asignacin de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura segn el nivel del curso:
                ${JSON.stringify(p$,null,2)}
                Notas sobre las reglas:
                - '1 y 2 medio' aplica a cursos que empiezan con '1' o '2'.
                - '3 y 4 medio' aplica a cursos que empiezan con '3' o '4'.
                - Algunas reglas aplican a cursos especficos (ej. Mecnica).

                **Asignaciones de Profesores (Input):**
                Aqu est la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRTICA INVIOLABLE:**
                La restriccin ms importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo da y mismo bloque horario. Es fsicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las dems. No deben existir topes de horario para ningn profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${D||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma ms balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo da si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un nico objeto JSON vlido, sin texto adicional antes o despus. La estructura del JSON debe ser la siguiente:
                {
                  "1A": {
                    "Lunes": { "1": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1B": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada da de la semana. Cada da tiene claves para cada bloque del 1 al 10. Si un bloque est vaco, usa \`{ "asignatura": null, "profesor": null }\`.
            `,ae=await J.models.generateContent({model:"gemini-2.5-flash",contents:ee,config:{responseMimeType:"application/json"}}),q=JSON.parse(ae.text);o(q),localStorage.setItem(IC,JSON.stringify(q)),w("Horario generado y guardado con xito!")}catch(J){console.error("Error al generar horario con IA:",J),g("Ocurri un error al contactar con la IA o al procesar la respuesta. Por favor, intntelo de nuevo.")}finally{h(!1)}},R=(J,ee,ae)=>{N({dia:J,bloque:ee}),k({asignatura:(ae==null?void 0:ae.asignatura)||"",profesor:(ae==null?void 0:ae.profesor)||""})},L=()=>{if(!E)return;const{dia:J,bloque:ee}=E,ae={...i};ae[l]||(ae[l]={}),ae[l][J]||(ae[l][J]={}),ae[l][J][ee]={asignatura:I.asignatura||null,profesor:I.profesor||null},o(ae),localStorage.setItem(IC,JSON.stringify(ae)),N(null)},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",z=()=>{const J=i[l]||{};return A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[A.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),h2.map(ee=>A.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:ee},ee))]})}),A.jsx("tbody",{children:w_.map(({bloque:ee,inicio:ae,fin:q})=>A.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[A.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[A.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:ee}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${ae} - ${q}`})]}),h2.map(Y=>{var K;const Ae=(E==null?void 0:E.dia)===Y&&(E==null?void 0:E.bloque)===ee,j=(K=J[Y])==null?void 0:K[ee];return A.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Ae&&R(Y,ee,j),children:Ae?A.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[A.jsx("input",{type:"text",placeholder:"Asignatura",value:I.asignatura,onChange:X=>k(te=>({...te,asignatura:X.target.value})),className:Q+" text-xs mb-1"}),A.jsx("input",{type:"text",placeholder:"Profesor",value:I.profesor,onChange:X=>k(te=>({...te,profesor:X.target.value})),className:Q+" text-xs"}),A.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[A.jsx("button",{onClick:()=>N(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),A.jsx("button",{onClick:L,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):j!=null&&j.asignatura?A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:j.asignatura}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",j.profesor,")"]})]}):A.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${Y}-${ee}`)})]},ee))})]})})},ie=()=>A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 1. Configuracin de Asignaciones"}),A.jsxs("form",{onSubmit:B,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:n.curso,onChange:J=>r(ee=>({...ee,curso:J.target.value})),className:Q,children:[A.jsx("option",{value:"",children:"Seleccione"}),xs.map(J=>A.jsx("option",{value:J,children:J},J))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignatura",value:n.asignatura,onChange:J=>r(ee=>({...ee,asignatura:J.target.value})),className:Q,children:[A.jsx("option",{value:"",children:"Seleccione"}),Hl.map(J=>A.jsx("option",{value:J,children:J},J))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),A.jsxs("select",{name:"profesor",value:n.profesor,onChange:J=>r(ee=>({...ee,profesor:J.target.value})),className:Q,children:[A.jsx("option",{value:"",children:"Seleccione"}),a.map(J=>A.jsx("option",{value:J,children:J},J))]})]}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),A.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:A.jsx("ul",{className:"space-y-2",children:t.map(J=>A.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[A.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[J.curso," - ",J.asignatura," - ",A.jsx("strong",{children:J.profesor})]}),A.jsx("button",{onClick:()=>T(J.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:""})]},J.id))})})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 2. Generacin Automtica con IA"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),A.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:D,onChange:J=>_(J.target.value),rows:3,placeholder:"Ej: Dejar los mdulos tericos en la maana y los prcticos en la tarde. Evitar poner 2 bloques de matemtica seguidos.",className:Q})]}),A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsxs("button",{onClick:O,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),m&&A.jsx("p",{className:"text-red-600",children:m}),b&&A.jsx("p",{className:"text-green-600",children:b})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 3. Visualizacin y Edicin por Curso"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),A.jsx("select",{id:"selectCurso",value:l,onChange:J=>u(J.target.value),className:Q+" md:w-1/3",children:xs.map(J=>A.jsx("option",{value:J,children:J},J))})]}),Object.keys(i).length>0?z():A.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"An no se ha generado ningn horario. Utilice el botn de generacin con IA."})})]})]});return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx("button",{onClick:()=>P("edicion"),className:`${U==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuracin y Edicin por Curso"}),A.jsx("button",{onClick:()=>P("global"),className:`${U==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),U==="edicion"?ie():A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),A.jsx(zae,{horarios:i})]})]})},pw="acciones",qae=async()=>{try{const t=ts(xr(hr,pw),Ws("fechaRegistro","desc"));return(await Xi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedaggicas")}},Kae=async t=>{try{return{id:(await MA(xr(hr,pw),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear accin:",e),new Error("No se pudo crear la accin pedaggica")}},FI=async(t,e)=>{try{const n=vs(hr,pw,t);await zm(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar accin:",n,"ID:",t),new Error("No se pudo actualizar la accin pedaggica")}},Wae=async t=>{try{const e=vs(hr,pw,t);await wf(e)}catch(e){throw console.error("Error al eliminar accin:",e,"ID:",t),new Error("No se pudo eliminar la accin pedaggica")}},RI={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},$ae={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Jae=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState(!1),[a,s]=Z.useState(null),[i,o]=Z.useState(RI),[l,u]=Z.useState(null),[d,h]=Z.useState(""),[m,g]=Z.useState(""),[b,w]=Z.useState(""),E=Z.useCallback(async()=>{r(!0);try{const T=await qae();e(T),s(null)}catch(T){console.error("Error al cargar acciones desde Firestore",T),s("No se pudieron cargar las acciones pedaggicas desde la nube.")}finally{r(!1)}},[]);Z.useEffect(()=>{E()},[E]);const N=Z.useCallback(T=>{const{name:O,value:R}=T.target;o(L=>({...L,[O]:R}))},[]),I=Z.useCallback(()=>{o(RI),u(null),s(null)},[]),k=Z.useCallback(async T=>{T.preventDefault();const{fechaRegistro:O,responsable:R,area:L,descripcion:Q,fechaCumplimiento:z,estado:ie}=i;if(!O||!R||!L||!Q||!z){s("Todos los campos son obligatorios.");return}try{l?await FI(l,i):await Kae(i),await E(),I()}catch(J){console.error("Error al guardar accin:",J),s("Error al guardar la accin en la nube.")}},[i,l,E,I]),U=Z.useCallback(T=>{window.scrollTo({top:0,behavior:"smooth"}),u(T.id),o(T)},[]),P=Z.useCallback(async T=>{if(window.confirm("Est seguro de que desea eliminar esta accin?"))try{await Wae(T),await E()}catch(O){console.error("Error al eliminar accin:",O),s("No se pudo eliminar la accin en la nube.")}},[E]),D=Z.useCallback(async T=>{try{const O=t.find(R=>R.id===T);if(O){const L=(Qp.indexOf(O.estado)+1)%Qp.length,Q=Qp[L];await FI(T,{estado:Q}),await E()}}catch(O){console.error("Error al cambiar estado:",O),s("No se pudo cambiar el estado de la accin en la nube.")}},[t,E]),_=Z.useMemo(()=>t.filter(T=>{const O=d===""||T.responsable.toLowerCase().includes(d.toLowerCase())||T.descripcion.toLowerCase().includes(d.toLowerCase()),R=m===""||T.area===m,L=b===""||T.estado===b;return O&&R&&L}),[t,d,m,b]),B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedaggicas"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando accin existente.":"Registre una nueva accin de seguimiento."}),n&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),a&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),A.jsxs("form",{onSubmit:k,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),A.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:N,className:B})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),A.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:N,placeholder:"Nombre del responsable",className:B})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"rea Vinculada"}),A.jsxs("select",{name:"area",value:i.area,onChange:N,className:B,children:[A.jsx("option",{value:"",children:"Seleccione un rea"}),o3.map(T=>A.jsx("option",{value:T,children:T},T))]})]}),A.jsxs("div",{className:"lg:col-span-3",children:[A.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripcin de la Accin"}),A.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:N,rows:3,placeholder:"Detalle de la accin a realizar...",className:B})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),A.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:N,className:B})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),A.jsx("select",{name:"estado",value:i.estado,onChange:N,className:B,children:Qp.map(T=>A.jsx("option",{value:T,children:T},T))})]})]}),A.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&A.jsx("button",{type:"button",onClick:I,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Accin":"Registrar Accin"})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!n&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedaggicas registradas en la nube."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:T=>h(T.target.value),className:B+" md:col-span-1"}),A.jsxs("select",{value:m,onChange:T=>g(T.target.value),className:B,children:[A.jsx("option",{value:"",children:"Filtrar por rea"}),o3.map(T=>A.jsx("option",{value:T,children:T},T))]}),A.jsxs("select",{value:b,onChange:T=>w(T.target.value),className:B,children:[A.jsx("option",{value:"",children:"Filtrar por Estado"}),Qp.map(T=>A.jsx("option",{value:T,children:T},T))]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"rea"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripcin"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&_.length>0?_.map(T=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:T.responsable}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:T.area}),A.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:T.descripcion}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("span",{children:["Reg: ",T.fechaRegistro]}),A.jsxs("span",{className:"font-semibold",children:["Comp: ",T.fechaCumplimiento]})]})}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${$ae[T.estado]}`,children:T.estado})}),A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[A.jsx("button",{onClick:()=>D(T.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:""}),A.jsx("button",{onClick:()=>U(T),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),A.jsx("button",{onClick:()=>P(T.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},T.id)):!n&&A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})},gw="planificaciones",X8="actividades_calendario",Z8="eventos_calendario",eM=t=>{var n,r,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((a=(r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n))==null?void 0:a.toISOString())||e.fechaCreacion}},Yae=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:pr.fromDate(new Date),fechaActualizacion:pr.fromDate(new Date)};return(await MA(xr(So,gw),n)).id}catch(n){throw console.error("Error al guardar planificacin:",n),new Error("No se pudo guardar la planificacin")}},Xae=async(t,e,n)=>{try{const r=vs(So,gw,t),a=await Bm(r);if(!a.exists()||a.data().userId!==n)throw new Error("No tienes permisos para actualizar esta planificacin");await zm(r,{...e,fechaActualizacion:pr.fromDate(new Date)})}catch(r){throw console.error("Error al actualizar planificacin:",r),new Error("No se pudo actualizar la planificacin")}},Zae=async(t,e)=>{try{const n=vs(So,gw,t),r=await Bm(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificacin");await wf(n)}catch(n){throw console.error("Error al eliminar planificacin:",n),new Error("No se pudo eliminar la planificacin")}},ese=(t,e)=>{const n=ts(xr(So,gw),bo("userId","==",t),Ws("fechaCreacion","desc"));return PA(n,r=>{const a=r.docs.map(eM);e(a)},r=>{console.error("Error en suscripcin a planificaciones:",r)})},tse=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:pr.fromDate(new Date),fechaActualizacion:pr.fromDate(new Date)};return(await MA(xr(So,X8),n)).id}catch(n){throw console.error("Error al guardar actividad:",n),new Error("No se pudo guardar la actividad")}},nse=(t,e)=>{const n=ts(xr(So,X8),bo("userId","==",t),Ws("fecha","desc"));return PA(n,r=>{const a=r.docs.map(eM);e(a)},r=>{console.error("Error en suscripcin a actividades:",r)})},rse=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:pr.fromDate(new Date)};return(await MA(xr(So,Z8),n)).id}catch(n){throw console.error("Error al guardar evento:",n),new Error("No se pudo guardar el evento")}},ase=async(t,e,n,r)=>{try{const a=ts(xr(So,Z8),bo("userId","==",t),bo("date","==",e),bo("type","==",Gn.ACTIVIDAD_FOCALIZADA),GS(1));return(await Xi(a)).docs.some(i=>{const o=i.data();return o.responsables===n&&o.ubicacion===r})}catch(a){return console.error("Error al verificar evento existente:",a),!1}},sse={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},ise=t=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!0),[s,i]=Z.useState(null);Z.useEffect(()=>t?ese(t,h=>{n(h),a(!1)}):void 0,[t]);const o=Z.useCallback(async d=>{try{i(null),await Yae(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=Z.useCallback(async(d,h)=>{try{i(null),await Xae(d,h,t)}catch(m){throw i(m instanceof Error?m.message:"Error al actualizar"),m}},[t]),u=Z.useCallback(async d=>{try{i(null),await Zae(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]);return{planificaciones:e,loading:r,error:s,save:o,update:l,remove:u}},ose=t=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!0),[s,i]=Z.useState(null);Z.useEffect(()=>t?nse(t,u=>{n(u),a(!1)}):void 0,[t]);const o=Z.useCallback(async l=>{try{return i(null),await tse(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:r,error:s,save:o}},lse=({lesson:t,onClose:e,onSave:n,isLoading:r=!1})=>{const[a,s]=Z.useState(t),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await n(a),e()}catch(l){console.error("Error al guardar leccin:",l)}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),A.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),A.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:r})]},l))}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[A.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Cancelar"}),A.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:r,children:[r&&A.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},cse=({plan:t,onEditLesson:e,onUseLesson:n,isLoading:r=!1})=>A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",t.indicadoresEvaluacion]})]}),A.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((a,s)=>A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[A.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",a.actividades]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]}),A.jsxs("div",{className:"flex gap-2 mt-4",children:[A.jsx("button",{onClick:()=>e(s,a),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Editar"}),A.jsx("button",{onClick:()=>n(a,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:r,children:"Usar para Plan de Clase"})]})]},s))})]}),use=({plan:t,onBack:e,onSave:n,isLoading:r=!1})=>{const[a,s]=Z.useState(t),[i,o]=Z.useState(!1),l=d=>{const{name:h,value:m}=d.target,[g,b]=h.split(".");s(g==="momentosClase"?w=>({...w,momentosClase:{...w.momentosClase,[b]:m}}):w=>({...w,[h]:m}))},u=async()=>{o(!0);try{await n(a)}catch(d){console.error("Error al guardar plan de clase:",d)}finally{o(!1)}};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),A.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:r||i,children:" Volver"})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),A.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:r||i})]}),A.jsxs("div",{children:[A.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),A.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:l,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:r||i})]}),A.jsxs("div",{children:[A.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),A.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:r||i})]})]}),A.jsx("div",{className:"text-right mt-6",children:A.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:r||i,children:[i&&A.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},Ase=({userId:t})=>{const{actividades:e,save:n}=ose(t),[r,a]=Z.useState("list"),[s,i]=Z.useState(null),[o,l]=Z.useState(!1),[u,d]=Z.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,g]=Z.useState(h);Z.useEffect(()=>{r==="summary"&&s&&b()},[r,s,t]);const b=async()=>{if(s)try{const D=await ase(t,s.fecha,s.nombre,s.ubicacion);d(D)}catch(D){console.error("Error al verificar evento en calendario:",D)}},w=D=>{const{name:_,value:B}=D.target;g(T=>({...T,[_]:B}))},E=(D,_,B)=>{g(T=>({...T,tareas:T.tareas.map(O=>O.id===D?{...O,[_]:B}:O)}))},N=()=>{g(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},I=D=>{g(_=>({..._,tareas:_.tareas.filter(B=>B.id!==D)}))},k=async D=>{D.preventDefault(),l(!0);const _=`Basado en la siguiente informacin de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripcin: ${m.descripcion}
    - Tareas: ${m.tareas.map(B=>B.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propsito principal de la actividad.`;try{el("Planificacin - Actividad Calendario");const T=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:_}),O={...m,objetivo:T.text.replace(/(\*\*|\*)/g,"")},R=await n(O),L={...O,id:R};i(L),a("summary")}catch(B){console.error("Error al generar objetivo con IA:",B),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l.");try{const T={...m,objetivo:"No generado"},O=await n(T),R={...T,id:O};i(R),a("summary")}catch(T){console.error("Error al guardar actividad:",T),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},U=async D=>{if(!D)return;const _={date:D.fecha,type:Gn.ACTIVIDAD_FOCALIZADA,responsables:D.nombre,ubicacion:D.ubicacion,horario:D.hora};try{await rse(_,t),d(!0),alert("Actividad aadida al Calendario Acadmico.")}catch(B){console.error("Error adding to calendar:",B),alert("Hubo un error al agregar la actividad al calendario.")}},P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return r==="form"?A.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:A.jsxs("form",{onSubmit:k,className:"space-y-8",children:[A.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[A.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacin General"}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("input",{name:"nombre",value:m.nombre,onChange:w,placeholder:"Nombre de la Actividad",className:P,required:!0,disabled:o}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:w,className:P,required:!0,disabled:o}),A.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:w,className:P,required:!0,disabled:o})]}),A.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:w,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:P,required:!0,disabled:o}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:w,placeholder:"Ubicacin",className:P,required:!0,disabled:o}),A.jsx("input",{name:"participantes",value:m.participantes,onChange:w,placeholder:"Participantes",className:P,required:!0,disabled:o})]}),A.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:w,placeholder:"Recursos Generales Necesarios",rows:2,className:P,disabled:o})]})]}),A.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),A.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),A.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((D,_)=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[A.jsx("button",{type:"button",onClick:()=>I(D.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:""}),A.jsx("textarea",{value:D.descripcion,onChange:B=>E(D.id,"descripcion",B.target.value),placeholder:`Descripcin de la Tarea ${_+1}`,rows:2,className:P,required:!0,disabled:o}),A.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[A.jsx("input",{value:D.responsable,onChange:B=>E(D.id,"responsable",B.target.value),placeholder:"Responsable",className:P,required:!0,disabled:o}),A.jsx("input",{value:D.recursos,onChange:B=>E(D.id,"recursos",B.target.value),placeholder:"Recursos Necesarios",className:P,disabled:o})]})]},D.id))})]}),A.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[A.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),A.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),A.jsxs("div",{className:"flex justify-end gap-4",children:[A.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),A.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?A.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):r==="summary"&&s?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[A.jsx("span",{className:"text-2xl",children:""}),A.jsxs("div",{children:[A.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),A.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),A.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),A.jsxs("div",{className:"space-y-4 text-sm",children:[A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),A.jsx("span",{children:s.nombre})]}),A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),A.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),A.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),A.jsx("p",{children:s.descripcion})]}),A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),A.jsx("span",{children:s.ubicacion})]}),A.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[A.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),A.jsx("span",{children:s.participantes})]}),A.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),A.jsx("p",{children:s.recursosGenerales})]}),A.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[A.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),A.jsx("p",{children:s.objetivo})]})]}),A.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[A.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),A.jsx("button",{onClick:()=>U(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),A.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),A.jsx("button",{onClick:()=>{a("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),A.jsx("div",{className:"space-y-3",children:e.length>0?e.map(D=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):A.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},dse=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:n,save:r,update:a,remove:s,loading:i}=ise(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=Z.useState(o),[d,h]=Z.useState(null),[m,g]=Z.useState(!1),[b,w]=Z.useState(null),[E,N]=Z.useState("unidad"),[I,k]=Z.useState(null),[U,P]=Z.useState(null),D=Z.useMemo(()=>t.asignaturas||[],[t.asignaturas]),_=Z.useMemo(()=>{const q=t.cursos||[],Y=new Set;return q.forEach(Ae=>{Ae.startsWith("1")?Y.add("1 Medio"):Ae.startsWith("2")?Y.add("2 Medio"):Ae.startsWith("3")?Y.add("3 Medio"):Ae.startsWith("4")&&Y.add("4 Medio")}),Array.from(Y)},[t.cursos]);Z.useEffect(()=>{u(q=>({...q,asignatura:D[0]||"",nivel:_[0]||""}))},[D,_]);const B=q=>{const{name:Y,value:Ae}=q.target;u(j=>({...j,[Y]:Y==="cantidadClases"?parseInt(Ae,10):Ae}))},T=()=>{const{asignatura:q,nivel:Y,nombreUnidad:Ae,contenidos:j,cantidadClases:K,observaciones:X,ideasParaUnidad:te}=l;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica completa en formato JSON estructurado, basndote en la informacin proporcionada.

    **Informacin Base:**
    - Asignatura: ${q}
    - Nivel: ${Y}
    - Nombre de la Unidad: "${Ae}"
    - Contenidos clave a trabajar (insumo principal): "${j}"
    - Cantidad de clases para la unidad: ${K}
    - Ideas y perspectiva del docente para la unidad: "${te||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${X||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${K} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},O=async q=>{if(q.preventDefault(),g(!0),w(null),console.log(" Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",sse),!l.contenidos||!l.nombreUnidad){w("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{el("Planificacin - Unidad");const Y=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),Ae=T(),j={type:Gt.OBJECT,properties:{objetivosAprendizaje:{type:Gt.STRING},indicadoresEvaluacion:{type:Gt.STRING},detallesLeccion:{type:Gt.ARRAY,items:{type:Gt.OBJECT,properties:{objetivosAprendizaje:{type:Gt.STRING},contenidosConceptuales:{type:Gt.STRING},habilidadesBloom:{type:Gt.STRING},perfilEgreso:{type:Gt.STRING},actividades:{type:Gt.STRING},asignaturasInterdisciplinariedad:{type:Gt.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},K=await Y.models.generateContent({model:"gemini-2.5-flash",contents:Ae,config:{responseMimeType:"application/json",responseSchema:j}}),X=JSON.parse(K.text),te={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:X.objetivosAprendizaje,indicadoresEvaluacion:X.indicadoresEvaluacion,detallesLeccion:X.detallesLeccion};if(d)await a(d.id,te),h({...te,id:d.id});else{const le=await r(te);h({...te,id:le})}}catch(Y){console.error("Error al generar planificacin con IA",Y),w("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{g(!1)}},R=async(q,Y)=>{g(!0),w(null);const Ae=`A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${Y.asignatura}
    - Nivel: ${Y.nivel}
    - Objetivo de la clase: ${q.objetivosAprendizaje}
    - Contenidos: ${q.contenidosConceptuales}
    - Actividades sugeridas: ${q.actividades}
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{el("Planificacin - Utilizar Clase");const j=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),K={type:Gt.OBJECT,properties:{inicio:{type:Gt.STRING},desarrollo:{type:Gt.STRING},cierre:{type:Gt.STRING}},required:["inicio","desarrollo","cierre"]},X=await j.models.generateContent({model:"gemini-2.5-flash",contents:Ae,config:{responseMimeType:"application/json",responseSchema:K}}),te=JSON.parse(X.text),le={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:Y.asignatura,nivel:Y.nivel,contenidos:q.contenidosConceptuales,observaciones:"",nombreClase:q.actividades,duracionClase:80,momentosClase:te,detalleLeccionOrigen:q};await r(le),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),N("clase")}catch(j){console.error("Error al generar plan de clase con IA",j),w("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{g(!1)}},L=q=>{q.tipo==="Unidad"&&(u({asignatura:q.asignatura,nivel:q.nivel,nombreUnidad:q.nombreUnidad,contenidos:q.contenidos,cantidadClases:q.cantidadClases,observaciones:q.observaciones,ideasParaUnidad:q.ideasParaUnidad||""}),h(q),window.scrollTo({top:0,behavior:"smooth"}))},Q=async q=>{if(window.confirm("Est seguro de que desea eliminar esta planificacin?"))try{await s(q),(d==null?void 0:d.id)===q&&(h(null),u(o))}catch(Y){console.error("Error al eliminar planificacin:",Y),alert("Error al eliminar la planificacin. Por favor, intente nuevamente.")}},z=(q,Y)=>{d&&P({planId:d.id,lessonIndex:q,lessonData:Y})},ie=async q=>{if(U)try{const{planId:Y,lessonIndex:Ae}=U,j=n.find(te=>te.id===Y&&te.tipo==="Unidad");if(!j)return;const K=[...j.detallesLeccion];K[Ae]=q;const X={...j,detallesLeccion:K};await a(Y,X),h(X),P(null)}catch(Y){console.error("Error al actualizar leccin:",Y),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=()=>A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."}),i?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):A.jsxs("form",{onSubmit:O,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsx("select",{name:"asignatura",value:l.asignatura,onChange:B,className:J,disabled:m,children:D.length>0?D.map(q=>A.jsx("option",{value:q,children:q},q)):A.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),A.jsx("select",{name:"nivel",value:l.nivel,onChange:B,className:J,disabled:m,children:_.length>0?_.map(q=>A.jsx("option",{value:q,children:q},q)):A.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:B,className:J,placeholder:"Ej: La Clula y sus procesos",disabled:m})]}),A.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[A.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:B,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificacin debe abordar.",className:J,disabled:m})]}),A.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[A.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),A.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:B,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:J,disabled:m})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),A.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:B,className:J,min:"1",max:"20",disabled:m})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),A.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:B,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:J,disabled:m})]})]}),A.jsx("div",{className:"pt-4 text-right",children:A.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?A.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),b&&A.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),d&&A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),A.jsx(cse,{plan:d,onEditLesson:z,onUseLesson:R,isLoading:m})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):A.jsx("div",{className:"space-y-4",children:n.filter(q=>q.tipo==="Unidad").length>0?n.filter(q=>q.tipo==="Unidad").map(q=>A.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===q.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreUnidad}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>L(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),A.jsx("button",{onClick:()=>Q(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:""})]})]})},q.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),ae=()=>{const q=n.filter(Y=>Y.tipo==="Clase").sort((Y,Ae)=>new Date(Ae.fechaCreacion).getTime()-new Date(Y.fechaCreacion).getTime());return I?A.jsx(use,{plan:I,onBack:()=>k(null),onSave:async Y=>{try{await a(Y.id,Y),k(Y)}catch(Ae){console.error("Error al actualizar plan de clase:",Ae),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):A.jsx("div",{className:"space-y-4",children:q.length>0?q.map(Y=>A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:Y.nombreClase}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(Y.fechaCreacion).toLocaleString("es-CL")]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",Y.contenidos]})]}),A.jsx("div",{className:"flex items-center gap-2",children:A.jsx("button",{onClick:()=>k(Y),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},Y.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return!t||!t.email&&!t.id?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),A.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx("button",{onClick:()=>N("unidad"),className:`${E==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),A.jsx("button",{onClick:()=>N("clase"),className:`${E==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),A.jsx("button",{onClick:()=>N("calendario"),className:`${E==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),E==="unidad"&&ee(),E==="clase"&&ae(),E==="calendario"&&A.jsx(Ase,{userId:e}),U&&A.jsx(lse,{lesson:U.lessonData,onClose:()=>P(null),onSave:ie,isLoading:m})]})},xw="events",fse=async()=>{try{const t=ts(xr(hr,xw),Ws("date","asc"));return(await Xi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},hse=async t=>{try{return{id:(await MA(xr(hr,xw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},mse=async(t,e)=>{try{const n=vs(hr,xw,t);await zm(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar evento:",n,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},pse=async t=>{try{const e=vs(hr,xw,t);await wf(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},gse=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],xse=t=>{switch(t.type){case Gn.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Gn.ACTO:return`Acto: ${t.ubicacion}`;case Gn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Gn.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},vse=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:a,date:s,isLoading:i})=>{const[o,l]=Z.useState({});Z.useEffect(()=>{l(a||{type:Gn.EVALUACION,subtype:Zf.PRUEBA_PARCIAL,asignatura:Hl[0],curso:xs[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=w=>{const{name:E,value:N}=w.target;l(I=>({...I,[E]:N}))},h=w=>{l(E=>{if(E.type===Gn.SALIDA_PEDAGOGICA){const N=E.cursos||[],I=N.includes(w)?N.filter(k=>k!==w):[...N,w];return{...E,cursos:I.sort()}}return E})},m=w=>{switch(w.preventDefault(),o.type){case Gn.EVALUACION:n({date:s,type:Gn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos,enlace:o.subtype===Zf.RUBRICA||o.subtype===Zf.PAUTA_COTEJO?o.enlace:void 0});break;case Gn.ACTO:n({date:s,type:Gn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario});break;case Gn.ACTIVIDAD_FOCALIZADA:n({date:s,type:Gn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario});break;case Gn.SALIDA_PEDAGOGICA:n({date:s,type:Gn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos});break}};if(!t)return null;const g=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case Gn.EVALUACION:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),A.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:g$.map(w=>A.jsx("option",{value:w,children:w},w))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:Hl.map(w=>A.jsx("option",{value:w,children:w},w))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:xs.map(w=>A.jsx("option",{value:w,children:w},w))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),A.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos,onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Zf.RUBRICA||o.subtype===Zf.PAUTA_COTEJO)&&A.jsxs("div",{children:[A.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),A.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace,onChange:d,placeholder:"https://...",className:u})]})]});case Gn.ACTO:case Gn.ACTIVIDAD_FOCALIZADA:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),A.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables,onChange:d,required:!0,className:u})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicacin"}),A.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion,onChange:d,required:!0,className:u})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),A.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario,onChange:d,required:!0,className:u})]})]});case Gn.SALIDA_PEDAGOGICA:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),A.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable,onChange:d,required:!0,className:u})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),A.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion,onChange:d,required:!0,className:u})]}),A.jsxs("fieldset",{children:[A.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),A.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:xs.map(w=>A.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[A.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(w),onChange:()=>h(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{children:w})]},w))})]})]});default:return null}};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:A.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:w=>w.stopPropagation(),children:A.jsxs("form",{onSubmit:m,children:[A.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),A.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(Gn).map(w=>A.jsx("option",{value:w,children:w},w))})]}),b()]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[A.jsx("div",{children:a&&r&&A.jsx("button",{type:"button",onClick:r,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),A.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},yse=({profile:t})=>{const[e,n]=Z.useState(new Date),[r,a]=Z.useState([]),[s,i]=Z.useState(!1),[o,l]=Z.useState(null),[u,d]=Z.useState(!1),[h,m]=Z.useState(Object.values(Gn)),[g,b]=Z.useState(!1),[w,E]=Z.useState(null),[N,I]=Z.useState(null),k=Z.useCallback(async()=>{i(!0);try{const R=await fse();a(R),l(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);Z.useEffect(()=>{k()},[k]);const U=Z.useMemo(()=>{const R=e.getFullYear(),L=e.getMonth(),Q=new Date(R,L,1).getDay(),z=new Date(R,L+1,0).getDate(),ie=[];let J=1;for(let ee=0;ee<6;ee++){const ae=[];for(let q=0;q<7;q++)ee===0&&q<Q||J>z?ae.push(null):(ae.push(new Date(R,L,J)),J++);if(ie.push(ae),J>z)break}return ie},[e]),P=R=>{m(L=>L.includes(R)?L.filter(Q=>Q!==R):[...L,R])},D=()=>{h.length===Object.values(Gn).length?m([]):m(Object.values(Gn))},_=R=>{t!==rn.ESTUDIANTE&&(E(R.toISOString().split("T")[0]),I(null),b(!0))},B=(R,L)=>{L.stopPropagation(),t!==rn.ESTUDIANTE&&(E(R.date),I(R),b(!0))},T=async R=>{d(!0);try{N?await mse(N.id,R):await hse(R),await k(),b(!1)}catch(L){console.error("Error al guardar evento:",L),l("Error al guardar el evento en la nube.")}finally{d(!1)}},O=async()=>{if(N){d(!0);try{await pse(N.id),await k(),b(!1)}catch(R){console.error("Error al eliminar evento:",R),l("No se pudo eliminar el evento en la nube.")}finally{d(!1)}}};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Acadmico"}),s&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!s&&r.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),A.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:A.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),A.jsx("div",{className:"ml-3",children:A.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y acadmico."})})]})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),A.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[A.jsx("button",{onClick:D,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(Gn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Gn).map(R=>A.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(R)?`shadow-sm ${Pd[R].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[A.jsx("input",{type:"checkbox",checked:h.includes(R),onChange:()=>P(R),className:"hidden"}),A.jsx("span",{children:Pd[R].icon}),A.jsx("span",{children:Pd[R].label})]},R))]})]}),A.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[A.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[A.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),A.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),A.jsx("button",{onClick:()=>n(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),A.jsx("div",{className:"grid grid-cols-7",children:gse.map(R=>A.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:R},R))}),A.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:U.flat().map((R,L)=>{const Q=R&&R.toDateString()===new Date().toDateString(),z=R==null?void 0:R.toISOString().split("T")[0],ie=z?r.filter(J=>J.date===z&&h.includes(J.type)):[];return A.jsx("div",{onClick:()=>R&&_(R),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${R?t!==rn.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:R&&A.jsxs(A.Fragment,{children:[A.jsx("span",{className:`self-end text-sm font-semibold ${Q?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:R.getDate()}),A.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:ie.map(J=>A.jsxs("div",{onClick:ee=>B(J,ee),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Pd[J.type].color}`,children:[A.jsx("span",{children:Pd[J.type].icon}),A.jsx("span",{className:"truncate",children:xse(J)})]},J.id))}),t!==rn.ESTUDIANTE&&A.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},L)})})]}),g&&A.jsx(vse,{isOpen:g,onClose:()=>b(!1),onSave:T,onDelete:O,event:N,date:w,isLoading:u})]})},vw="anuncios",wse=async()=>{try{const t=ts(xr(hr,vw),Ws("fechaPublicacion","desc"));return(await Xi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},bse=async t=>{try{return{id:(await MA(xr(hr,vw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},Cse=async(t,e)=>{try{const n=vs(hr,vw,t);await zm(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar anuncio:",n,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Ese=async t=>{try{const e=vs(hr,vw,t);await wf(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},DI=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],_se=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!1),[s,i]=Z.useState(null),[o,l]=Z.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=Z.useState({tipo:"Todos",cursos:[]}),h=Z.useCallback(async()=>{a(!0);try{const _=await wse();n(_),i(null)}catch(_){console.error("Error al cargar anuncios desde Firestore",_),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);Z.useEffect(()=>{h()},[h]);const m=_=>{const{name:B,value:T}=_.target;l(O=>({...O,[B]:T}))},g=_=>{d({tipo:_,cursos:_==="Cursos"?[]:void 0})},b=_=>{d(B=>{var O;if(B.tipo!=="Cursos")return B;const T=(O=B.cursos)!=null&&O.includes(_)?B.cursos.filter(R=>R!==_):[...B.cursos||[],_];return{...B,cursos:T}})},w=async _=>{if(_.preventDefault(),!o.titulo||!o.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const B={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await bse(B),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(B){console.error("Error al crear anuncio:",B),i("Error al publicar el anuncio en la nube.")}},E=async _=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await Ese(_),await h()}catch(B){console.error("Error al eliminar anuncio:",B),i("No se pudo eliminar el anuncio en la nube.")}},N=async _=>{try{const B=e.find(T=>T.id===_);B&&(await Cse(_,{destacado:!B.destacado}),await h())}catch(B){console.error("Error al actualizar anuncio:",B),i("No se pudo actualizar el estado del anuncio en la nube.")}},I=Z.useMemo(()=>[...e].sort((_,B)=>_.destacado&&!B.destacado?-1:!_.destacado&&B.destacado?1:new Date(B.fechaPublicacion).getTime()-new Date(_.fechaPublicacion).getTime()),[e]),k=Z.useMemo(()=>{const _=t.profile,B=t.curso;return I.filter(T=>{if(_===rn.SUBDIRECCION)return!0;if(!T.destinatarios)return _!==rn.ESTUDIANTE;const{tipo:O,cursos:R}=T.destinatarios;return O==="Todos"||O==="Profesores"&&_===rn.PROFESORADO||O==="Coordinacin TP"&&_===rn.COORDINACION_TP?!0:O==="Cursos"?_===rn.ESTUDIANTE?R==null?void 0:R.includes(B||""):!0:!1})},[I,t]),U=_=>t.profile===rn.ESTUDIANTE?!1:t.profile===rn.SUBDIRECCION||t.profile===_.profileCreador,P=()=>t.profile===rn.SUBDIRECCION||t.profile===rn.PROFESORADO,D="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),r&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),t.profile!==rn.ESTUDIANTE?A.jsxs(A.Fragment,{children:[A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),A.jsxs("form",{onSubmit:w,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),A.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:D})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),A.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:D})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),A.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(_=>A.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[A.jsx("input",{type:"radio",name:"destinatarioTipo",value:_,checked:u.tipo===_,onChange:()=>g(_),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),A.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:_.replace("Coordinacin TP","Coord. TP")})]},_))})]}),u.tipo==="Cursos"&&A.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:xs.map(_=>{var B;return A.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:(B=u.cursos)==null?void 0:B.includes(_),onChange:()=>b(_),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),A.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:_})]},_)})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),A.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:D})]}),A.jsx("div",{className:"pt-2 text-right",children:A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!r&&k.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!r&&k.length>0&&k.map((_,B)=>{const T=DI[B%DI.length];return A.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${T.bg} ${T.rotate}`,children:[_.destacado&&A.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:A.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),A.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:_.titulo}),A.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:_.mensaje}),_.adjunto&&A.jsx("div",{className:"font-sans text-sm mb-4",children:A.jsxs("a",{href:_.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),A.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:_.autor}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(_.fechaPublicacion).toLocaleString("es-CL")})]}),A.jsxs("div",{className:"flex items-center",children:[P()&&A.jsx("button",{onClick:()=>N(_.id),title:_.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:A.jsx("span",{className:`text-xl transition-opacity ${_.destacado?"opacity-100":"opacity-30"}`,children:""})}),U(_)&&A.jsx("button",{onClick:()=>E(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},_.id)})})]})},FC="actasDeReunion",tM=window.SpeechRecognition||window.webkitSpeechRecognition,LI=!!tM,Sse=({isListening:t})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Tse=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState(null),[a,s]=Z.useState({tipoReunion:SC[0],asistentes:"",textoReunion:""}),[i,o]=Z.useState(!1),[l,u]=Z.useState(!1),[d,h]=Z.useState(null),m=Z.useRef(null);Z.useEffect(()=>{try{const U=localStorage.getItem(FC);if(U){const P=JSON.parse(U);e(P),P.length>0&&!n&&r(P[0])}}catch(U){console.error("Error al leer actas de localStorage",U)}},[n]);const g=U=>{const{name:P,value:D}=U.target;s(_=>({..._,[P]:D}))},b=Z.useCallback(()=>{var U;if(!LI){h("El reconocimiento de voz no es compatible con este navegador.");return}i?(U=m.current)==null||U.stop():(m.current=new tM,m.current.lang="es-CL",m.current.continuous=!0,m.current.interimResults=!0,m.current.onresult=P=>{let D="";for(let _=P.resultIndex;_<P.results.length;++_)P.results[_].isFinal&&(D+=P.results[_][0].transcript+". ");s(_=>({..._,textoReunion:_.textoReunion+D}))},m.current.onstart=()=>o(!0),m.current.onend=()=>o(!1),m.current.onerror=P=>{console.error("Speech recognition error",P.error),h(`Error de reconocimiento: ${P.error}`),o(!1)},m.current.start())},[i]),w=async U=>{U.preventDefault();const{tipoReunion:P,asistentes:D,textoReunion:_}=a;if(!P||!D.trim()||!_.trim()){h("Todos los campos son obligatorios.");return}u(!0),h(null);try{el("Generador de Actas");const B=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),T=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${_}"
                
                Asistentes a la reunin para referencia de nombres: ${D}
            `,O={type:Gt.OBJECT,properties:{temas:{type:Gt.ARRAY,description:"Lista de los principales temas tratados en la reunin.",items:{type:Gt.STRING}},acuerdos:{type:Gt.ARRAY,description:"Lista de los acuerdos o decisiones tomadas.",items:{type:Gt.STRING}},plazos:{type:Gt.ARRAY,description:"Lista de fechas lmite o plazos mencionados en el texto.",items:{type:Gt.STRING}},responsables:{type:Gt.ARRAY,description:"Lista de las personas asignadas como responsables de tareas.",items:{type:Gt.STRING}}},required:["temas","acuerdos","plazos","responsables"]},R=await B.models.generateContent({model:"gemini-2.5-flash",contents:T,config:{responseMimeType:"application/json",responseSchema:O}}),L=JSON.parse(R.text),Q={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...a,...L},z=[Q,...t];e(z),localStorage.setItem(FC,JSON.stringify(z)),s({tipoReunion:SC[0],asistentes:"",textoReunion:""}),r(Q)}catch(B){console.error("Error al analizar acta con IA:",B),h("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{u(!1)}},E=U=>{if(window.confirm("Est seguro de que desea eliminar esta acta?")){const P=t.filter(D=>D.id!==U);e(P),localStorage.setItem(FC,JSON.stringify(P)),(n==null?void 0:n.id)===U&&r(P.length>0?P[0]:null)}},N=U=>{r(U)},I=U=>U.temas||U.acuerdos||U.plazos||U.responsables?A.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),U.temas&&U.temas.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.temas.map((D,_)=>A.jsx("li",{children:D},_))})]}),U.acuerdos&&U.acuerdos.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.acuerdos.map((D,_)=>A.jsx("li",{children:D},_))})]}),U.plazos&&U.plazos.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.plazos.map((D,_)=>A.jsx("li",{children:D},_))})]}),U.responsables&&U.responsables.length>0&&A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),A.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.responsables.map((D,_)=>A.jsx("li",{children:D},_))})]})]}):null,k="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[A.jsxs("div",{className:"md:col-span-1 space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),A.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:A.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),A.jsx("div",{className:"ml-3",children:A.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",A.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),A.jsxs("form",{onSubmit:w,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),A.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:g,required:!0,className:k,children:SC.map(U=>A.jsx("option",{value:U,children:U},U))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),A.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:g,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:k})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),A.jsxs("div",{className:"relative",children:[A.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:g,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:k}),LI&&A.jsx("button",{type:"button",onClick:b,title:i?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${i?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:A.jsx(Sse,{isListening:i})})]})]}),d&&A.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d}),A.jsx("div",{className:"pt-2 text-right",children:A.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?A.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),A.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.sort((U,P)=>new Date(P.fechaCreacion).getTime()-new Date(U.fechaCreacion).getTime()).map(U=>A.jsxs("button",{onClick:()=>N(U),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===U.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.tipoReunion}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(U.fechaCreacion).toLocaleDateString("es-CL")})]},U.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),A.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?A.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${n.tipoReunion}`}),A.jsx("button",{onClick:()=>E(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[A.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),A.jsx("h2",{children:"Asistentes"}),A.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((U,P)=>U.trim()&&A.jsx("li",{children:U.trim()},P))}),I(n),A.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:A.jsx("p",{children:n.textoReunion})})]}):A.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[A.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),A.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},Bse="modulepreload",Nse=function(t){return"/"+t},UI={},D_=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(n.map(u=>{if(u=Nse(u),u in UI)return;UI[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Bse,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Or(t){"@babel/helpers - typeof";return Or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(t)}var Ui=Uint8Array,Xo=Uint16Array,e4=Int32Array,yw=new Ui([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ww=new Ui([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),L_=new Ui([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nM=function(t,e){for(var n=new Xo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new e4(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return{b:n,r:a}},rM=nM(yw,2),aM=rM.b,U_=rM.r;aM[28]=258,U_[258]=28;var sM=nM(ww,0),kse=sM.b,MI=sM.r,M_=new Xo(32768);for(var oa=0;oa<32768;++oa){var Ed=(oa&43690)>>1|(oa&21845)<<1;Ed=(Ed&52428)>>2|(Ed&13107)<<2,Ed=(Ed&61680)>>4|(Ed&3855)<<4,M_[oa]=((Ed&65280)>>8|(Ed&255)<<8)>>1}var Su=function(t,e,n){for(var r=t.length,a=0,s=new Xo(e);a<r;++a)t[a]&&++s[t[a]-1];var i=new Xo(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(n){o=new Xo(1<<e);var l=15-e;for(a=0;a<r;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],h=i[t[a]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[M_[h]>>l]=u}else for(o=new Xo(r),a=0;a<r;++a)t[a]&&(o[a]=M_[i[t[a]-1]++]>>15-t[a]);return o},Af=new Ui(288);for(var oa=0;oa<144;++oa)Af[oa]=8;for(var oa=144;oa<256;++oa)Af[oa]=9;for(var oa=256;oa<280;++oa)Af[oa]=7;for(var oa=280;oa<288;++oa)Af[oa]=8;var nx=new Ui(32);for(var oa=0;oa<32;++oa)nx[oa]=5;var Ise=Su(Af,9,0),Fse=Su(Af,9,1),Rse=Su(nx,5,0),Dse=Su(nx,5,1),RC=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},hc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},DC=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},t4=function(t){return(t+7)/8|0},iM=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ui(t.subarray(e,n))},Lse=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],xc=function(t,e,n){var r=new Error(e||Lse[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,xc),!n)throw r;return r},Use=function(t,e,n,r){var a=t.length,s=0;if(!a||e.f&&!e.l)return n||new Ui(0);var i=!n,o=i||e.i!=2,l=e.i;i&&(n=new Ui(a*3));var u=function(xe){var se=n.length;if(xe>se){var Re=new Ui(Math.max(se*2,xe));Re.set(n),n=Re}},d=e.f||0,h=e.p||0,m=e.b||0,g=e.l,b=e.d,w=e.m,E=e.n,N=a*8;do{if(!g){d=hc(t,h,1);var I=hc(t,h+1,3);if(h+=3,I)if(I==1)g=Fse,b=Dse,w=9,E=5;else if(I==2){var D=hc(t,h,31)+257,_=hc(t,h+10,15)+4,B=D+hc(t,h+5,31)+1;h+=14;for(var T=new Ui(B),O=new Ui(19),R=0;R<_;++R)O[L_[R]]=hc(t,h+R*3,7);h+=_*3;for(var L=RC(O),Q=(1<<L)-1,z=Su(O,L,1),R=0;R<B;){var ie=z[hc(t,h,Q)];h+=ie&15;var k=ie>>4;if(k<16)T[R++]=k;else{var J=0,ee=0;for(k==16?(ee=3+hc(t,h,3),h+=2,J=T[R-1]):k==17?(ee=3+hc(t,h,7),h+=3):k==18&&(ee=11+hc(t,h,127),h+=7);ee--;)T[R++]=J}}var ae=T.subarray(0,D),q=T.subarray(D);w=RC(ae),E=RC(q),g=Su(ae,w,1),b=Su(q,E,1)}else xc(1);else{var k=t4(h)+4,U=t[k-4]|t[k-3]<<8,P=k+U;if(P>a){l&&xc(0);break}o&&u(m+U),n.set(t.subarray(k,P),m),e.b=m+=U,e.p=h=P*8,e.f=d;continue}if(h>N){l&&xc(0);break}}o&&u(m+131072);for(var Y=(1<<w)-1,Ae=(1<<E)-1,j=h;;j=h){var J=g[DC(t,h)&Y],K=J>>4;if(h+=J&15,h>N){l&&xc(0);break}if(J||xc(2),K<256)n[m++]=K;else if(K==256){j=h,g=null;break}else{var X=K-254;if(K>264){var R=K-257,te=yw[R];X=hc(t,h,(1<<te)-1)+aM[R],h+=te}var le=b[DC(t,h)&Ae],ye=le>>4;le||xc(3),h+=le&15;var q=kse[ye];if(ye>3){var te=ww[ye];q+=DC(t,h)&(1<<te)-1,h+=te}if(h>N){l&&xc(0);break}o&&u(m+131072);var Ce=m+X;if(m<q){var _e=s-q,Ie=Math.min(q,Ce);for(_e+m<0&&xc(3);m<Ie;++m)n[m]=r[_e+m]}for(;m<Ce;++m)n[m]=n[m-q]}}e.l=g,e.p=j,e.b=m,e.f=d,g&&(d=1,e.m=w,e.d=b,e.n=E)}while(!d);return m!=n.length&&i?iM(n,0,m):n.subarray(0,m)},uA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Vp=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},LC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var a=n.length,s=n.slice();if(!a)return{t:lM,l:0};if(a==1){var i=new Ui(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(P,D){return P.f-D.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=n[n[u].f<n[h].f?u++:h++],l=n[u!=d&&n[u].f<n[h].f?u++:h++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,r=1;r<a;++r)s[r].s>m&&(m=s[r].s);var g=new Xo(m+1),b=P_(n[d-1],g,0);if(b>e){var r=0,w=0,E=b-e,N=1<<E;for(s.sort(function(D,_){return g[_.s]-g[D.s]||D.f-_.f});r<a;++r){var I=s[r].s;if(g[I]>e)w+=N-(1<<b-g[I]),g[I]=e;else break}for(w>>=E;w>0;){var k=s[r].s;g[k]<e?w-=1<<e-g[k]++-1:++r}for(;r>=0&&w;--r){var U=s[r].s;g[U]==e&&(--g[U],++w)}b=e}return{t:new Ui(g),l:b}},P_=function(t,e,n){return t.s==-1?Math.max(P_(t.l,e,n+1),P_(t.r,e,n+1)):e[t.s]=n},PI=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Xo(++e),r=0,a=t[0],s=1,i=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[o]}return{c:n.subarray(0,r),n:e}},zp=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},oM=function(t,e,n){var r=n.length,a=t4(e+2);t[a]=r&255,t[a+1]=r>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<r;++s)t[a+s+4]=n[s];return(a+4+r)*8},jI=function(t,e,n,r,a,s,i,o,l,u,d){uA(e,d++,n),++a[256];for(var h=LC(a,15),m=h.t,g=h.l,b=LC(s,15),w=b.t,E=b.l,N=PI(m),I=N.c,k=N.n,U=PI(w),P=U.c,D=U.n,_=new Xo(19),B=0;B<I.length;++B)++_[I[B]&31];for(var B=0;B<P.length;++B)++_[P[B]&31];for(var T=LC(_,7),O=T.t,R=T.l,L=19;L>4&&!O[L_[L-1]];--L);var Q=u+5<<3,z=zp(a,Af)+zp(s,nx)+i,ie=zp(a,m)+zp(s,w)+i+14+3*L+zp(_,O)+2*_[16]+3*_[17]+7*_[18];if(l>=0&&Q<=z&&Q<=ie)return oM(e,d,t.subarray(l,l+u));var J,ee,ae,q;if(uA(e,d,1+(ie<z)),d+=2,ie<z){J=Su(m,g,0),ee=m,ae=Su(w,E,0),q=w;var Y=Su(O,R,0);uA(e,d,k-257),uA(e,d+5,D-1),uA(e,d+10,L-4),d+=14;for(var B=0;B<L;++B)uA(e,d+3*B,O[L_[B]]);d+=3*L;for(var Ae=[I,P],j=0;j<2;++j)for(var K=Ae[j],B=0;B<K.length;++B){var X=K[B]&31;uA(e,d,Y[X]),d+=O[X],X>15&&(uA(e,d,K[B]>>5&127),d+=K[B]>>12)}}else J=Ise,ee=Af,ae=Rse,q=nx;for(var B=0;B<o;++B){var te=r[B];if(te>255){var X=te>>18&31;Vp(e,d,J[X+257]),d+=ee[X+257],X>7&&(uA(e,d,te>>23&31),d+=yw[X]);var le=te&31;Vp(e,d,ae[le]),d+=q[le],le>3&&(Vp(e,d,te>>5&8191),d+=ww[le])}else Vp(e,d,J[te]),d+=ee[te]}return Vp(e,d,J[256]),d+ee[256]},Mse=new e4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lM=new Ui(0),Pse=function(t,e,n,r,a,s){var i=s.z||t.length,o=new Ui(r+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(r,o.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var h=Mse[e-1],m=h>>13,g=h&8191,b=(1<<n)-1,w=s.p||new Xo(32768),E=s.h||new Xo(b+1),N=Math.ceil(n/3),I=2*N,k=function(et){return(t[et]^t[et+1]<<N^t[et+2]<<I)&b},U=new e4(25e3),P=new Xo(288),D=new Xo(32),_=0,B=0,T=s.i||0,O=0,R=s.w||0,L=0;T+2<i;++T){var Q=k(T),z=T&32767,ie=E[Q];if(w[z]=ie,E[Q]=z,R<=T){var J=i-T;if((_>7e3||O>24576)&&(J>423||!u)){d=jI(t,l,0,U,P,D,B,O,L,T-L,d),O=_=B=0,L=T;for(var ee=0;ee<286;++ee)P[ee]=0;for(var ee=0;ee<30;++ee)D[ee]=0}var ae=2,q=0,Y=g,Ae=z-ie&32767;if(J>2&&Q==k(T-Ae))for(var j=Math.min(m,J)-1,K=Math.min(32767,T),X=Math.min(258,J);Ae<=K&&--Y&&z!=ie;){if(t[T+ae]==t[T+ae-Ae]){for(var te=0;te<X&&t[T+te]==t[T+te-Ae];++te);if(te>ae){if(ae=te,q=Ae,te>j)break;for(var le=Math.min(Ae,te-2),ye=0,ee=0;ee<le;++ee){var Ce=T-Ae+ee&32767,_e=w[Ce],Ie=Ce-_e&32767;Ie>ye&&(ye=Ie,ie=Ce)}}}z=ie,ie=w[z],Ae+=z-ie&32767}if(q){U[O++]=268435456|U_[ae]<<18|MI[q];var xe=U_[ae]&31,se=MI[q]&31;B+=yw[xe]+ww[se],++P[257+xe],++D[se],R=T+ae,++_}else U[O++]=t[T],++P[t[T]]}}for(T=Math.max(T,R);T<i;++T)U[O++]=t[T],++P[t[T]];d=jI(t,l,u,U,P,D,B,O,L,T-L,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=E,s.p=w,s.i=T,s.w=R)}else{for(var T=s.w||0;T<i+u;T+=65535){var Re=T+65535;Re>=i&&(l[d/8|0]=u,Re=i),d=oM(l,d+1,t.subarray(T,Re))}s.i=i}return iM(o,0,r+t4(d)+a)},cM=function(){var t=1,e=0;return{p:function(n){for(var r=t,a=e,s=n.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=r+=n[i];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}t=r,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},jse=function(t,e,n,r,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Ui(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return Pse(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,a)},uM=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Ose=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=cM();a.p(e.dictionary),uM(t,2,a.d())}},Qse=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&xc(6,"invalid zlib data"),(t[1]>>5&1)==1&&xc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function j_(t,e){e||(e={});var n=cM();n.p(t);var r=jse(t,e,e.dictionary?6:2,4);return Ose(r,e),uM(r,r.length-4,n.d()),r}function Hse(t,e){return Use(t.subarray(Qse(t),-4),{i:2},e,e)}var Vse=typeof TextDecoder<"u"&&new TextDecoder,zse=0;try{Vse.decode(lM,{stream:!0}),zse=1}catch{}var yn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function UC(){yn.console&&typeof yn.console.log=="function"&&yn.console.log.apply(yn.console,arguments)}var Zr={log:UC,warn:function(t){yn.console&&(typeof yn.console.warn=="function"?yn.console.warn.apply(yn.console,arguments):UC.call(null,arguments))},error:function(t){yn.console&&(typeof yn.console.error=="function"?yn.console.error.apply(yn.console,arguments):UC(t))}};function MC(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Yf(r.response,e,n)},r.onerror=function(){Zr.error("could not download file")},r.send()}function OI(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function uv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var kg,O_,Yf=yn.saveAs||((typeof window>"u"?"undefined":Or(window))!=="object"||window!==yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yn.URL||yn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?OI(a.href)?MC(t,e,n):uv(a,a.target="_blank"):uv(a)):(a.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){uv(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(OI(t))MC(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){uv(r)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Or(s)!=="object"&&(Zr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return MC(t,e,n);var a=t.type==="application/octet-stream",s=/constructor/i.test(yn.HTMLElement)||yn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":Or(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=yn.URL||yn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function AM(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,s=n[r].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function PC(t,e){var n=t[0],r=t[1],a=t[2],s=t[3];n=Ei(n,r,a,s,e[0],7,-680876936),s=Ei(s,n,r,a,e[1],12,-389564586),a=Ei(a,s,n,r,e[2],17,606105819),r=Ei(r,a,s,n,e[3],22,-1044525330),n=Ei(n,r,a,s,e[4],7,-176418897),s=Ei(s,n,r,a,e[5],12,1200080426),a=Ei(a,s,n,r,e[6],17,-1473231341),r=Ei(r,a,s,n,e[7],22,-45705983),n=Ei(n,r,a,s,e[8],7,1770035416),s=Ei(s,n,r,a,e[9],12,-1958414417),a=Ei(a,s,n,r,e[10],17,-42063),r=Ei(r,a,s,n,e[11],22,-1990404162),n=Ei(n,r,a,s,e[12],7,1804603682),s=Ei(s,n,r,a,e[13],12,-40341101),a=Ei(a,s,n,r,e[14],17,-1502002290),n=_i(n,r=Ei(r,a,s,n,e[15],22,1236535329),a,s,e[1],5,-165796510),s=_i(s,n,r,a,e[6],9,-1069501632),a=_i(a,s,n,r,e[11],14,643717713),r=_i(r,a,s,n,e[0],20,-373897302),n=_i(n,r,a,s,e[5],5,-701558691),s=_i(s,n,r,a,e[10],9,38016083),a=_i(a,s,n,r,e[15],14,-660478335),r=_i(r,a,s,n,e[4],20,-405537848),n=_i(n,r,a,s,e[9],5,568446438),s=_i(s,n,r,a,e[14],9,-1019803690),a=_i(a,s,n,r,e[3],14,-187363961),r=_i(r,a,s,n,e[8],20,1163531501),n=_i(n,r,a,s,e[13],5,-1444681467),s=_i(s,n,r,a,e[2],9,-51403784),a=_i(a,s,n,r,e[7],14,1735328473),n=Si(n,r=_i(r,a,s,n,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Si(s,n,r,a,e[8],11,-2022574463),a=Si(a,s,n,r,e[11],16,1839030562),r=Si(r,a,s,n,e[14],23,-35309556),n=Si(n,r,a,s,e[1],4,-1530992060),s=Si(s,n,r,a,e[4],11,1272893353),a=Si(a,s,n,r,e[7],16,-155497632),r=Si(r,a,s,n,e[10],23,-1094730640),n=Si(n,r,a,s,e[13],4,681279174),s=Si(s,n,r,a,e[0],11,-358537222),a=Si(a,s,n,r,e[3],16,-722521979),r=Si(r,a,s,n,e[6],23,76029189),n=Si(n,r,a,s,e[9],4,-640364487),s=Si(s,n,r,a,e[12],11,-421815835),a=Si(a,s,n,r,e[15],16,530742520),n=Ti(n,r=Si(r,a,s,n,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Ti(s,n,r,a,e[7],10,1126891415),a=Ti(a,s,n,r,e[14],15,-1416354905),r=Ti(r,a,s,n,e[5],21,-57434055),n=Ti(n,r,a,s,e[12],6,1700485571),s=Ti(s,n,r,a,e[3],10,-1894986606),a=Ti(a,s,n,r,e[10],15,-1051523),r=Ti(r,a,s,n,e[1],21,-2054922799),n=Ti(n,r,a,s,e[8],6,1873313359),s=Ti(s,n,r,a,e[15],10,-30611744),a=Ti(a,s,n,r,e[6],15,-1560198380),r=Ti(r,a,s,n,e[13],21,1309151649),n=Ti(n,r,a,s,e[4],6,-145523070),s=Ti(s,n,r,a,e[11],10,-1120210379),a=Ti(a,s,n,r,e[2],15,718787259),r=Ti(r,a,s,n,e[9],21,-343485551),t[0]=Qd(n,t[0]),t[1]=Qd(r,t[1]),t[2]=Qd(a,t[2]),t[3]=Qd(s,t[3])}function bw(t,e,n,r,a,s){return e=Qd(Qd(e,t),Qd(r,s)),Qd(e<<a|e>>>32-a,n)}function Ei(t,e,n,r,a,s,i){return bw(e&n|~e&r,t,e,a,s,i)}function _i(t,e,n,r,a,s,i){return bw(e&r|n&~r,t,e,a,s,i)}function Si(t,e,n,r,a,s,i){return bw(e^n^r,t,e,a,s,i)}function Ti(t,e,n,r,a,s,i){return bw(n^(e|~r),t,e,a,s,i)}function dM(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)PC(r,Gse(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(PC(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,PC(r,a),r}function Gse(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}kg=yn.atob.bind(yn),O_=yn.btoa.bind(yn);var QI="0123456789abcdef".split("");function qse(t){for(var e="",n=0;n<4;n++)e+=QI[t>>8*n+4&15]+QI[t>>8*n&15];return e}function Kse(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Q_(t){return dM(t).map(Kse).join("")}var Wse=function(t){for(var e=0;e<t.length;e++)t[e]=qse(t[e]);return t.join("")}(dM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qd(t,e){if(Wse){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function H_(t,e){var n,r,a,s;if(t!==n){for(var i=(a=t,s=1+(256/t.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var h=e.length,m=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,i=o[(o[m]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var HI={print:4,modify:8,copy:16,"annot-forms":32};function H0(t,e,n,r){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(HI.perm!==void 0)throw new Error("Invalid permission: "+o);a+=HI[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=Q_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=H_(this.encryptionKey,this.padding)}function V0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var a=t.charCodeAt(r);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[r]}return e}function VI(t){if(Or(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!a],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[n]){var i=e[n][s];try{i[0].apply(t,r)}catch(o){yn.console&&Zr.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ey(t){if(!(this instanceof ey))return new ey(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function fM(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function eh(t,e,n,r,a){if(!(this instanceof eh))return new eh(t,e,n,r,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,fM.call(this,r,a)}function $0(t,e,n,r,a){if(!(this instanceof $0))return new $0(t,e,n,r,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,fM.call(this,r,a)}function sn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;Or(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=VI;var b="1.3",w=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(V){b=V};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var N=g.__private__.getPageFormat=function(V){return E[V]};a=a||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},k=I.COMPAT;function U(){this.saveGraphicsState(),we(new Qt(xt,0,0,-xt,0,Us()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",k=I.ADVANCED}function P(){this.restoreGraphicsState(),u="S",k=I.COMPAT}var D=g.__private__.combineFontStyleAndFontWeight=function(V,ue){if(V=="bold"&&ue=="normal"||V=="bold"&&ue==400||V=="normal"&&ue=="italic"||V=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(V=ue==400||ue==="normal"?V==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||V!=="normal"?(ue==700?"bold":ue)+""+V:"bold"),V};g.advancedAPI=function(V){var ue=k===I.COMPAT;return ue&&U.call(this),typeof V!="function"||(V(this),ue&&P.call(this)),this},g.compatAPI=function(V){var ue=k===I.ADVANCED;return ue&&P.call(this),typeof V!="function"||(V(this),ue&&U.call(this)),this},g.isAdvancedAPI=function(){return k===I.ADVANCED};var _,B=function(V){if(k!==I.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=g.roundToPrecision=g.__private__.roundToPrecision=function(V,ue){var ke=e||ue;if(isNaN(V)||isNaN(ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(ke).replace(/0+$/,"")};_=g.hpf=g.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return T(V,16)};var O=g.f2=g.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return T(V,2)},R=g.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return T(V,3)},L=g.scale=g.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return k===I.COMPAT?V*xt:k===I.ADVANCED?V:void 0},Q=function(V){return k===I.COMPAT?Us()-V:k===I.ADVANCED?V:void 0},z=function(V){return L(Q(V))};g.__private__.setPrecision=g.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var ie,J="00000000000000000000000000000000",ee=g.__private__.getFileId=function(){return J},ae=g.__private__.setFileId=function(V){return J=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():J.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Dr=new H0(d.userPermissions,d.userPassword,d.ownerPassword,J)),J};g.setFileId=function(V){return ae(V),this},g.getFileId=function(){return ee()};var q=g.__private__.convertDateToPDFDate=function(V){var ue=V.getTimezoneOffset(),ke=ue<0?"+":"-",Le=Math.floor(Math.abs(ue/60)),He=Math.abs(ue%60),ot=[ke,X(Le),"'",X(He),"'"].join("");return["D:",V.getFullYear(),X(V.getMonth()+1),X(V.getDate()),X(V.getHours()),X(V.getMinutes()),X(V.getSeconds()),ot].join("")},Y=g.__private__.convertPDFDateToDate=function(V){var ue=parseInt(V.substr(2,4),10),ke=parseInt(V.substr(6,2),10)-1,Le=parseInt(V.substr(8,2),10),He=parseInt(V.substr(10,2),10),ot=parseInt(V.substr(12,2),10),_t=parseInt(V.substr(14,2),10);return new Date(ue,ke,Le,He,ot,_t,0)},Ae=g.__private__.setCreationDate=function(V){var ue;if(V===void 0&&(V=new Date),V instanceof Date)ue=q(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=V}return ie=ue},j=g.__private__.getCreationDate=function(V){var ue=ie;return V==="jsDate"&&(ue=Y(ie)),ue};g.setCreationDate=function(V){return Ae(V),this},g.getCreationDate=function(V){return j(V)};var K,X=g.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},te=g.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},le=0,ye=[],Ce=[],_e=0,Ie=[],xe=[],se=!1,Re=Ce,et=function(){le=0,_e=0,Ce=[],ye=[],Ie=[],be=zr(),Ee=zr()};g.__private__.setCustomOutputDestination=function(V){se=!0,Re=V};var De=function(V){se||(Re=V)};g.__private__.resetCustomOutputDestination=function(){se=!1,Re=Ce};var we=g.__private__.out=function(V){return V=V.toString(),_e+=V.length+1,Re.push(V),Re},ze=g.__private__.write=function(V){return we(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},nt=g.__private__.getArrayBuffer=function(V){for(var ue=V.length,ke=new ArrayBuffer(ue),Le=new Uint8Array(ke);ue--;)Le[ue]=V.charCodeAt(ue);return ke},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return it};var dt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(V){return dt=k===I.ADVANCED?V/xt:V,this};var Ct,ut=g.__private__.getFontSize=g.getFontSize=function(){return k===I.COMPAT?dt:dt*xt},Nt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(V){return Nt=V,this},g.__private__.getR2L=g.getR2L=function(){return Nt};var It,Wt=g.__private__.setZoomMode=function(V){var ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Ct=V;else if(isNaN(V)){if(ue.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Ct=V}else Ct=parseInt(V,10)};g.__private__.getZoomMode=function(){return Ct};var Ut,Ht=g.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');It=V};g.__private__.getPageMode=function(){return It};var Yt=g.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Ut=V};g.__private__.getLayoutMode=function(){return Ut},g.__private__.setDisplayMode=g.setDisplayMode=function(V,ue,ke){return Wt(V),Yt(ue),Ht(ke),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(V){if(Object.keys(Mt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[V]},g.__private__.getDocumentProperties=function(){return Mt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(V){for(var ue in Mt)Mt.hasOwnProperty(ue)&&V[ue]&&(Mt[ue]=V[ue]);return this},g.__private__.setDocumentProperty=function(V,ue){if(Object.keys(Mt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[V]=ue};var kt,xt,xn,$t,ir,mn={},Fn={},Tr=[],Bn={},rs={},Xn={},Yr={},ua=null,Dn=0,en=[],On=new VI(g),as=t.hotfixes||[],Vr={},pa={},ws=[],Qt=function V(ue,ke,Le,He,ot,_t){if(!(this instanceof V))return new V(ue,ke,Le,He,ot,_t);isNaN(ue)&&(ue=1),isNaN(ke)&&(ke=0),isNaN(Le)&&(Le=0),isNaN(He)&&(He=1),isNaN(ot)&&(ot=0),isNaN(_t)&&(_t=0),this._matrix=[ue,ke,Le,He,ot,_t]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(V)},Qt.prototype.multiply=function(V){var ue=V.sx*this.sx+V.shy*this.shx,ke=V.sx*this.shy+V.shy*this.sy,Le=V.shx*this.sx+V.sy*this.shx,He=V.shx*this.shy+V.sy*this.sy,ot=V.tx*this.sx+V.ty*this.shx+this.tx,_t=V.tx*this.shy+V.ty*this.sy+this.ty;return new Qt(ue,ke,Le,He,ot,_t)},Qt.prototype.decompose=function(){var V=this.sx,ue=this.shy,ke=this.shx,Le=this.sy,He=this.tx,ot=this.ty,_t=Math.sqrt(V*V+ue*ue),jt=(V/=_t)*ke+(ue/=_t)*Le;ke-=V*jt,Le-=ue*jt;var S=Math.sqrt(ke*ke+Le*Le);return jt/=S,V*(Le/=S)<ue*(ke/=S)&&(V=-V,ue=-ue,jt=-jt,_t=-_t),{scale:new Qt(_t,0,0,S,0,0),translate:new Qt(1,0,0,1,He,ot),rotate:new Qt(V,ue,-ue,V,0,0),skew:new Qt(1,0,jt,1,0,0)}},Qt.prototype.toString=function(V){return this.join(" ")},Qt.prototype.inversed=function(){var V=this.sx,ue=this.shy,ke=this.shx,Le=this.sy,He=this.tx,ot=this.ty,_t=1/(V*Le-ue*ke),jt=Le*_t,S=-ue*_t,W=-ke*_t,re=V*_t;return new Qt(jt,S,W,re,-jt*He-W*ot,-S*He-re*ot)},Qt.prototype.applyToPoint=function(V){var ue=V.x*this.sx+V.y*this.shx+this.tx,ke=V.x*this.shy+V.y*this.sy+this.ty;return new $l(ue,ke)},Qt.prototype.applyToRectangle=function(V){var ue=this.applyToPoint(V),ke=this.applyToPoint(new $l(V.x+V.w,V.y+V.h));return new jc(ue.x,ue.y,ke.x-ue.x,ke.y-ue.y)},Qt.prototype.clone=function(){var V=this.sx,ue=this.shy,ke=this.shx,Le=this.sy,He=this.tx,ot=this.ty;return new Qt(V,ue,ke,Le,He,ot)},g.Matrix=Qt;var or=g.matrixMult=function(V,ue){return ue.multiply(V)},Zn=new Qt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Zn;var Br=function(V,ue){if(!rs[V]){var ke=(ue instanceof eh?"Sh":"P")+(Object.keys(Bn).length+1).toString(10);ue.id=ke,rs[V]=ke,Bn[ke]=ue,On.publish("addPattern",ue)}};g.ShadingPattern=eh,g.TilingPattern=$0,g.addShadingPattern=function(V,ue){return B("addShadingPattern()"),Br(V,ue),this},g.beginTilingPattern=function(V){B("beginTilingPattern()"),dl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},g.endTilingPattern=function(V,ue){B("endTilingPattern()"),ue.stream=xe[K].join(`
`),Br(V,ue),On.publish("endTilingPattern",ue),ws.pop().restore()};var Rr=g.__private__.newObject=function(){var V=zr();return de(V,!0),V},zr=g.__private__.newObjectDeferred=function(){return le++,ye[le]=function(){return _e},le},de=function(V,ue){return ue=typeof ue=="boolean"&&ue,ye[V]=_e,ue&&we(V+" 0 obj"),V},Be=g.__private__.newAdditionalObject=function(){var V={objId:zr(),content:""};return Ie.push(V),V},be=zr(),Ee=zr(),Se=g.__private__.decodeColorString=function(V){var ue=V.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length===5&&(ue[4]==="k"||ue[4]==="K")&&(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var ke=parseFloat(ue[0]);ue=[ke,ke,ke,"r"]}for(var Le="#",He=0;He<3;He++)Le+=("0"+Math.floor(255*parseFloat(ue[He])).toString(16)).slice(-2);return Le},Ne=g.__private__.encodeColorString=function(V){var ue;typeof V=="string"&&(V={ch1:V});var ke=V.ch1,Le=V.ch2,He=V.ch3,ot=V.ch4,_t=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ke=="string"&&ke.charAt(0)!=="#"){var jt=new AM(ke);if(jt.ok)ke=jt.toHex();else if(!/^\d*\.?\d*$/.test(ke))throw new Error('Invalid color "'+ke+'" passed to jsPDF.encodeColorString.')}if(typeof ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ke)&&(ke="#"+ke[1]+ke[1]+ke[2]+ke[2]+ke[3]+ke[3]),typeof ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ke)){var S=parseInt(ke.substr(1),16);ke=S>>16&255,Le=S>>8&255,He=255&S}if(Le===void 0||ot===void 0&&ke===Le&&Le===He)if(typeof ke=="string")ue=ke+" "+_t[0];else switch(V.precision){case 2:ue=O(ke/255)+" "+_t[0];break;case 3:default:ue=R(ke/255)+" "+_t[0]}else if(ot===void 0||Or(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return ue=["1.","1.","1.",_t[1]].join(" ");if(typeof ke=="string")ue=[ke,Le,He,_t[1]].join(" ");else switch(V.precision){case 2:ue=[O(ke/255),O(Le/255),O(He/255),_t[1]].join(" ");break;default:case 3:ue=[R(ke/255),R(Le/255),R(He/255),_t[1]].join(" ")}}else if(typeof ke=="string")ue=[ke,Le,He,ot,_t[2]].join(" ");else switch(V.precision){case 2:ue=[O(ke),O(Le),O(He),O(ot),_t[2]].join(" ");break;case 3:default:ue=[R(ke),R(Le),R(He),R(ot),_t[2]].join(" ")}return ue},qe=g.__private__.getFilters=function(){return i},tt=g.__private__.putStream=function(V){var ue=(V=V||{}).data||"",ke=V.filters||qe(),Le=V.alreadyAppliedFilters||[],He=V.addLength1||!1,ot=ue.length,_t=V.objectId,jt=function(fn){return fn};if(d!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(jt=Dr.encryptor(_t,0));var S={};ke===!0&&(ke=["FlateEncode"]);var W=V.additionalKeyValues||[],re=(S=sn.API.processDataByFilters!==void 0?sn.API.processDataByFilters(ue,ke):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(S.data.length!==0&&(W.push({key:"Length",value:S.data.length}),He===!0&&W.push({key:"Length1",value:ot})),re.length!=0)if(re.split("/").length-1==1)W.push({key:"Filter",value:re});else{W.push({key:"Filter",value:"["+re+"]"});for(var pe=0;pe<W.length;pe+=1)if(W[pe].key==="DecodeParms"){for(var Oe=[],Xe=0;Xe<S.reverseChain.split("/").length-1;Xe+=1)Oe.push("null");Oe.push(W[pe].value),W[pe].value="["+Oe.join(" ")+"]"}}we("<<");for(var St=0;St<W.length;St++)we("/"+W[St].key+" "+W[St].value);we(">>"),S.data.length!==0&&(we("stream"),we(jt(S.data)),we("endstream"))},Qe=g.__private__.putPage=function(V){var ue=V.number,ke=V.data,Le=V.objId,He=V.contentsObjId;de(Le,!0),we("<</Type /Page"),we("/Parent "+V.rootDictionaryObjId+" 0 R"),we("/Resources "+V.resourceDictionaryObjId+" 0 R"),we("/MediaBox ["+parseFloat(_(V.mediaBox.bottomLeftX))+" "+parseFloat(_(V.mediaBox.bottomLeftY))+" "+_(V.mediaBox.topRightX)+" "+_(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&we("/CropBox ["+_(V.cropBox.bottomLeftX)+" "+_(V.cropBox.bottomLeftY)+" "+_(V.cropBox.topRightX)+" "+_(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&we("/BleedBox ["+_(V.bleedBox.bottomLeftX)+" "+_(V.bleedBox.bottomLeftY)+" "+_(V.bleedBox.topRightX)+" "+_(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&we("/TrimBox ["+_(V.trimBox.bottomLeftX)+" "+_(V.trimBox.bottomLeftY)+" "+_(V.trimBox.topRightX)+" "+_(V.trimBox.topRightY)+"]"),V.artBox!==null&&we("/ArtBox ["+_(V.artBox.bottomLeftX)+" "+_(V.artBox.bottomLeftY)+" "+_(V.artBox.topRightX)+" "+_(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&we("/UserUnit "+V.userUnit),On.publish("putPage",{objId:Le,pageContext:en[ue],pageNumber:ue,page:ke}),we("/Contents "+He+" 0 R"),we(">>"),we("endobj");var ot=ke.join(`
`);return k===I.ADVANCED&&(ot+=`
Q`),de(He,!0),tt({data:ot,filters:qe(),objectId:He}),we("endobj"),Le},We=g.__private__.putPages=function(){var V,ue,ke=[];for(V=1;V<=Dn;V++)en[V].objId=zr(),en[V].contentsObjId=zr();for(V=1;V<=Dn;V++)ke.push(Qe({number:V,data:xe[V],objId:en[V].objId,contentsObjId:en[V].contentsObjId,mediaBox:en[V].mediaBox,cropBox:en[V].cropBox,bleedBox:en[V].bleedBox,trimBox:en[V].trimBox,artBox:en[V].artBox,userUnit:en[V].userUnit,rootDictionaryObjId:be,resourceDictionaryObjId:Ee}));de(be,!0),we("<</Type /Pages");var Le="/Kids [";for(ue=0;ue<Dn;ue++)Le+=ke[ue]+" 0 R ";we(Le+"]"),we("/Count "+Dn),we(">>"),we("endobj"),On.publish("postPutPages")},Ye=function(V){On.publish("putFont",{font:V,out:we,newObject:Rr,putStream:tt}),V.isAlreadyPutted!==!0&&(V.objectNumber=Rr(),we("<<"),we("/Type /Font"),we("/BaseFont /"+V0(V.postScriptName)),we("/Subtype /Type1"),typeof V.encoding=="string"&&we("/Encoding /"+V.encoding),we("/FirstChar 32"),we("/LastChar 255"),we(">>"),we("endobj"))},yt=function(){for(var V in mn)mn.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&Ye(mn[V])},Bt=function(V){V.objectNumber=Rr();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[_(V.x),_(V.y),_(V.x+V.width),_(V.y+V.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var ke=V.pages[1].join(`
`);tt({data:ke,additionalKeyValues:ue,objectId:V.objectNumber}),we("endobj")},Pt=function(){for(var V in Vr)Vr.hasOwnProperty(V)&&Bt(Vr[V])},Tt=function(V,ue){var ke,Le=[],He=1/(ue-1);for(ke=0;ke<1;ke+=He)Le.push(ke);if(Le.push(1),V[0].offset!=0){var ot={offset:0,color:V[0].color};V.unshift(ot)}if(V[V.length-1].offset!=1){var _t={offset:1,color:V[V.length-1].color};V.push(_t)}for(var jt="",S=0,W=0;W<Le.length;W++){for(ke=Le[W];ke>V[S+1].offset;)S++;var re=V[S].offset,pe=(ke-re)/(V[S+1].offset-re),Oe=V[S].color,Xe=V[S+1].color;jt+=te(Math.round((1-pe)*Oe[0]+pe*Xe[0]).toString(16))+te(Math.round((1-pe)*Oe[1]+pe*Xe[1]).toString(16))+te(Math.round((1-pe)*Oe[2]+pe*Xe[2]).toString(16))}return jt.trim()},Ft=function(V,ue){ue||(ue=21);var ke=Rr(),Le=Tt(V.colors,ue),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+ue+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:Le,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ke}),we("endobj"),V.objectNumber=Rr(),we("<< /ShadingType "+V.type),we("/ColorSpace /DeviceRGB");var ot="/Coords ["+_(parseFloat(V.coords[0]))+" "+_(parseFloat(V.coords[1]))+" ";V.type===2?ot+=_(parseFloat(V.coords[2]))+" "+_(parseFloat(V.coords[3])):ot+=_(parseFloat(V.coords[2]))+" "+_(parseFloat(V.coords[3]))+" "+_(parseFloat(V.coords[4]))+" "+_(parseFloat(V.coords[5])),we(ot+="]"),V.matrix&&we("/Matrix ["+V.matrix.toString()+"]"),we("/Function "+ke+" 0 R"),we("/Extend [true true]"),we(">>"),we("endobj")},un=function(V,ue){var ke=zr(),Le=Rr();ue.push({resourcesOid:ke,objectOid:Le}),V.objectNumber=Le;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+V.boundingBox.map(_).join(" ")+"]"}),He.push({key:"XStep",value:_(V.xStep)}),He.push({key:"YStep",value:_(V.yStep)}),He.push({key:"Resources",value:ke+" 0 R"}),V.matrix&&He.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),tt({data:V.stream,additionalKeyValues:He,objectId:V.objectNumber}),we("endobj")},Ln=function(V){var ue;for(ue in Bn)Bn.hasOwnProperty(ue)&&(Bn[ue]instanceof eh?Ft(Bn[ue]):Bn[ue]instanceof $0&&un(Bn[ue],V))},Un=function(V){for(var ue in V.objectNumber=Rr(),we("<<"),V)switch(ue){case"opacity":we("/ca "+O(V[ue]));break;case"stroke-opacity":we("/CA "+O(V[ue]))}we(">>"),we("endobj")},Qn=function(){var V;for(V in Xn)Xn.hasOwnProperty(V)&&Un(Xn[V])},Sa=function(){for(var V in we("/XObject <<"),Vr)Vr.hasOwnProperty(V)&&Vr[V].objectNumber>=0&&we("/"+V+" "+Vr[V].objectNumber+" 0 R");On.publish("putXobjectDict"),we(">>")},Ai=function(){Dr.oid=Rr(),we("<<"),we("/Filter /Standard"),we("/V "+Dr.v),we("/R "+Dr.r),we("/U <"+Dr.toHexString(Dr.U)+">"),we("/O <"+Dr.toHexString(Dr.O)+">"),we("/P "+Dr.P),we(">>"),we("endobj")},Ta=function(){for(var V in we("/Font <<"),mn)mn.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&we("/"+V+" "+mn[V].objectNumber+" 0 R");we(">>")},ss=function(){if(Object.keys(Bn).length>0){for(var V in we("/Shading <<"),Bn)Bn.hasOwnProperty(V)&&Bn[V]instanceof eh&&Bn[V].objectNumber>=0&&we("/"+V+" "+Bn[V].objectNumber+" 0 R");On.publish("putShadingPatternDict"),we(">>")}},Oa=function(V){if(Object.keys(Bn).length>0){for(var ue in we("/Pattern <<"),Bn)Bn.hasOwnProperty(ue)&&Bn[ue]instanceof g.TilingPattern&&Bn[ue].objectNumber>=0&&Bn[ue].objectNumber<V&&we("/"+ue+" "+Bn[ue].objectNumber+" 0 R");On.publish("putTilingPatternDict"),we(">>")}},bs=function(){if(Object.keys(Xn).length>0){var V;for(V in we("/ExtGState <<"),Xn)Xn.hasOwnProperty(V)&&Xn[V].objectNumber>=0&&we("/"+V+" "+Xn[V].objectNumber+" 0 R");On.publish("putGStateDict"),we(">>")}},Gr=function(V){de(V.resourcesOid,!0),we("<<"),we("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ta(),ss(),Oa(V.objectOid),bs(),Sa(),we(">>"),we("endobj")},is=function(){var V=[];yt(),Qn(),Pt(),Ln(V),On.publish("putResources"),V.forEach(Gr),Gr({resourcesOid:Ee,objectOid:Number.MAX_SAFE_INTEGER}),On.publish("postPutResources")},Dc=function(){On.publish("putAdditionalObjects");for(var V=0;V<Ie.length;V++){var ue=Ie[V];de(ue.objId,!0),we(ue.content),we("endobj")}On.publish("postPutAdditionalObjects")},VA=function(V){Fn[V.fontName]=Fn[V.fontName]||{},Fn[V.fontName][V.fontStyle]=V.id},rl=function(V,ue,ke,Le,He){var ot={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:V,fontName:ue,fontStyle:ke,encoding:Le,isStandardFont:He||!1,metadata:{}};return On.publish("addFont",{font:ot,instance:this}),mn[ot.id]=ot,VA(ot),ot.id},Lu=function(V){for(var ue=0,ke=it.length;ue<ke;ue++){var Le=rl.call(this,V[ue][0],V[ue][1],V[ue][2],it[ue][3],!0);h===!1&&(m[Le]=!0);var He=V[ue][0].split("-");VA({id:Le,fontName:He[0],fontStyle:He[1]||""})}On.publish("addFonts",{fonts:mn,dictionary:Fn})},Cs=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Le){var ue=Le.stack||"";~ue.indexOf(" at ")&&(ue=ue.split(" at ")[1]);var ke="Error in function "+ue.split(`
`)[0].split("<")[0]+": "+Le.message;if(!yn.console)throw new Error(ke);yn.console.error(ke,Le),yn.alert&&alert(ke)}},V.foo.bar=V,V.foo},Lc=function(V,ue){var ke,Le,He,ot,_t,jt,S,W,re;if(He=(ue=ue||{}).sourceEncoding||"Unicode",_t=ue.outputEncoding,(ue.autoencode||_t)&&mn[kt].metadata&&mn[kt].metadata[He]&&mn[kt].metadata[He].encoding&&(ot=mn[kt].metadata[He].encoding,!_t&&mn[kt].encoding&&(_t=mn[kt].encoding),!_t&&ot.codePages&&(_t=ot.codePages[0]),typeof _t=="string"&&(_t=ot[_t]),_t)){for(S=!1,jt=[],ke=0,Le=V.length;ke<Le;ke++)(W=_t[V.charCodeAt(ke)])?jt.push(String.fromCharCode(W)):jt.push(V[ke]),jt[ke].charCodeAt(0)>>8&&(S=!0);V=jt.join("")}for(ke=V.length;S===void 0&&ke!==0;)V.charCodeAt(ke-1)>>8&&(S=!0),ke--;if(!S)return V;for(jt=ue.noBOM?[]:[254,255],ke=0,Le=V.length;ke<Le;ke++){if((re=(W=V.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(re),jt.push(W-(re<<8))}return String.fromCharCode.apply(void 0,jt)},lr=g.__private__.pdfEscape=g.pdfEscape=function(V,ue){return Lc(V,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Es=g.__private__.beginPage=function(V){xe[++Dn]=[],en[Dn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},eo(Dn),De(xe[K])},al=function(V,ue){var ke,Le,He;switch(n=ue||n,typeof V=="string"&&(ke=N(V.toLowerCase()),Array.isArray(ke)&&(Le=ke[0],He=ke[1])),Array.isArray(V)&&(Le=V[0]*xt,He=V[1]*xt),isNaN(Le)&&(Le=a[0],He=a[1]),(Le>14400||He>14400)&&(Zr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),He=Math.min(14400,He)),a=[Le,He],n.substr(0,1)){case"l":He>Le&&(a=[He,Le]);break;case"p":Le>He&&(a=[He,Le])}Es(a),ju(ll),we(_s),Ou!==0&&we(Ou+" J"),Wl!==0&&we(Wl+" j"),On.publish("addPage",{pageNumber:Dn})},sl=function(V){V>0&&V<=Dn&&(xe.splice(V,1),en.splice(V,1),Dn--,K>Dn&&(K=Dn),this.setPage(K))},eo=function(V){V>0&&V<=Dn&&(K=V)},yr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return xe.length-1},il=function(V,ue,ke){var Le,He=void 0;return ke=ke||{},V=V!==void 0?V:mn[kt].fontName,ue=ue!==void 0?ue:mn[kt].fontStyle,Le=V.toLowerCase(),Fn[Le]!==void 0&&Fn[Le][ue]!==void 0?He=Fn[Le][ue]:Fn[V]!==void 0&&Fn[V][ue]!==void 0?He=Fn[V][ue]:ke.disableWarning===!1&&Zr.warn("Unable to look up font label for font '"+V+"', '"+ue+"'. Refer to getFontList() for available fonts."),He||ke.noFallback||(He=Fn.times[ue])==null&&(He=Fn.times.normal),He},di=g.__private__.putInfo=function(){var V=Rr(),ue=function(Le){return Le};for(var ke in d!==null&&(ue=Dr.encryptor(V,0)),we("<<"),we("/Producer ("+lr(ue("jsPDF "+sn.version))+")"),Mt)Mt.hasOwnProperty(ke)&&Mt[ke]&&we("/"+ke.substr(0,1).toUpperCase()+ke.substr(1)+" ("+lr(ue(Mt[ke]))+")");we("/CreationDate ("+lr(ue(ie))+")"),we(">>"),we("endobj")},Bo=g.__private__.putCatalog=function(V){var ue=(V=V||{}).rootDictionaryObjId||be;switch(Rr(),we("<<"),we("/Type /Catalog"),we("/Pages "+ue+" 0 R"),Ct||(Ct="fullwidth"),Ct){case"fullwidth":we("/OpenAction [3 0 R /FitH null]");break;case"fullheight":we("/OpenAction [3 0 R /FitV null]");break;case"fullpage":we("/OpenAction [3 0 R /Fit]");break;case"original":we("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ke=""+Ct;ke.substr(ke.length-1)==="%"&&(Ct=parseInt(Ct)/100),typeof Ct=="number"&&we("/OpenAction [3 0 R /XYZ null null "+O(Ct)+"]")}switch(Ut||(Ut="continuous"),Ut){case"continuous":we("/PageLayout /OneColumn");break;case"single":we("/PageLayout /SinglePage");break;case"two":case"twoleft":we("/PageLayout /TwoColumnLeft");break;case"tworight":we("/PageLayout /TwoColumnRight")}It&&we("/PageMode /"+It),On.publish("putCatalog"),we(">>"),we("endobj")},zA=g.__private__.putTrailer=function(){we("trailer"),we("<<"),we("/Size "+(le+1)),we("/Root "+le+" 0 R"),we("/Info "+(le-1)+" 0 R"),d!==null&&we("/Encrypt "+Dr.oid+" 0 R"),we("/ID [ <"+J+"> <"+J+"> ]"),we(">>")},Uu=g.__private__.putHeader=function(){we("%PDF-"+b),we("%")},Mu=g.__private__.putXRef=function(){var V="0000000000";we("xref"),we("0 "+(le+1)),we("0000000000 65535 f ");for(var ue=1;ue<=le;ue++)typeof ye[ue]=="function"?we((V+ye[ue]()).slice(-10)+" 00000 n "):ye[ue]!==void 0?we((V+ye[ue]).slice(-10)+" 00000 n "):we("0000000000 00000 n ")},No=g.__private__.buildDocument=function(){et(),De(Ce),On.publish("buildDocument"),Uu(),We(),Dc(),is(),d!==null&&Ai(),di(),Bo();var V=_e;return Mu(),zA(),we("startxref"),we(""+V),we("%%EOF"),De(xe[K]),Ce.join(`
`)},Uc=g.__private__.getBlob=function(V){return new Blob([nt(V)],{type:"application/pdf"})},ko=g.output=g.__private__.output=Cs(function(V,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",V){case void 0:return No();case"save":g.save(ue.filename);break;case"arraybuffer":return nt(No());case"blob":return Uc(No());case"bloburi":case"bloburl":if(yn.URL!==void 0&&typeof yn.URL.createObjectURL=="function")return yn.URL&&yn.URL.createObjectURL(Uc(No()))||void 0;Zr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ke="",Le=No();try{ke=O_(Le)}catch{ke=O_(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+ue.filename+";base64,"+ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(He=ue.pdfObjectUrl,ot="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",jt=yn.open();return jt!==null&&jt.document.write(_t),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yn)==="[object Window]"){var S='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',W=yn.open();if(W!==null){W.document.write(S);var re=this;W.document.documentElement.querySelector("#pdfViewer").onload=function(){W.document.title=ue.filename,W.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(re.output("bloburl"))}}return W}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',Oe=yn.open();if(Oe!==null&&(Oe.document.write(pe),Oe.document.title=ue.filename),Oe||typeof safari>"u")return Oe;break;case"datauri":case"dataurl":return yn.document.location.href=this.output("datauristring",ue);default:return null}}),to=function(V){return Array.isArray(as)===!0&&as.indexOf(V)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=to("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var Dr=null;Ae(),ae();var Io=function(V){return d!==null?Dr.encryptor(V,0):function(ue){return ue}},no=g.__private__.getPageInfo=g.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:en[V].objId,pageNumber:V,pageContext:en[V]}},dn=g.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in en)if(en[ue].objId===V)break;return no(ue)},ro=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:en[K].objId,pageNumber:K,pageContext:en[K]}};g.addPage=function(){return al.apply(this,arguments),this},g.setPage=function(){return eo.apply(this,arguments),De.call(this,xe[K]),this},g.insertPage=function(V){return this.addPage(),this.movePage(K,V),this},g.movePage=function(V,ue){var ke,Le;if(V>ue){ke=xe[V],Le=en[V];for(var He=V;He>ue;He--)xe[He]=xe[He-1],en[He]=en[He-1];xe[ue]=ke,en[ue]=Le,this.setPage(ue)}else if(V<ue){ke=xe[V],Le=en[V];for(var ot=V;ot<ue;ot++)xe[ot]=xe[ot+1],en[ot]=en[ot+1];xe[ue]=ke,en[ue]=Le,this.setPage(ue)}return this},g.deletePage=function(){return sl.apply(this,arguments),this},g.__private__.text=g.text=function(V,ue,ke,Le,He){var ot,_t,jt,S,W,re,pe,Oe,Xe,St=(Le=Le||{}).scope||this;if(typeof V=="number"&&typeof ue=="number"&&(typeof ke=="string"||Array.isArray(ke))){var fn=ke;ke=ue,ue=V,V=fn}if(arguments[3]instanceof Qt?(B("The transform parameter of text() with a Matrix value"),Xe=He):(jt=arguments[4],S=arguments[5],Or(pe=arguments[3])==="object"&&pe!==null||(typeof jt=="string"&&(S=jt,jt=null),typeof pe=="string"&&(S=pe,pe=null),typeof pe=="number"&&(jt=pe,pe=null),Le={flags:pe,angle:jt,align:S})),isNaN(ue)||isNaN(ke)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return St;var Wn="",Sn=!1,wr=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:Kn,Nr=St.internal.scaleFactor;function oo(Vn){return Vn=Vn.split("	").join(Array(Le.TabLen||9).join(" ")),lr(Vn,pe)}function ga(Vn){for(var zn,qr=Vn.concat(),xa=[],co=qr.length;co--;)typeof(zn=qr.shift())=="string"?xa.push(zn):Array.isArray(Vn)&&(zn.length===1||zn[1]===void 0&&zn[2]===void 0)?xa.push(zn[0]):xa.push([zn[0],zn[1],zn[2]]);return xa}function pi(Vn,zn){var qr;if(typeof Vn=="string")qr=zn(Vn)[0];else if(Array.isArray(Vn)){for(var xa,co,Jc=Vn.concat(),Yc=[],ec=Jc.length;ec--;)typeof(xa=Jc.shift())=="string"?Yc.push(zn(xa)[0]):Array.isArray(xa)&&typeof xa[0]=="string"&&(co=zn(xa[0],xa[1],xa[2]),Yc.push([co[0],co[1],co[2]]));qr=Yc}return qr}var hl=!1,Qc=!0;if(typeof V=="string")hl=!0;else if(Array.isArray(V)){var WA=V.concat();_t=[];for(var Qu,Qa=WA.length;Qa--;)(typeof(Qu=WA.shift())!="string"||Array.isArray(Qu)&&typeof Qu[0]!="string")&&(Qc=!1);hl=Qc}if(hl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Hc=dt/St.internal.scaleFactor,Hu=Hc*(wr-1);switch(Le.baseline){case"bottom":ke-=Hu;break;case"top":ke+=Hc-Hu;break;case"hanging":ke+=Hc-2*Hu;break;case"middle":ke+=Hc/2-Hu}if((re=Le.maxWidth||0)>0&&(typeof V=="string"?V=St.splitTextToSize(V,re):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Vn,zn){return Vn.concat(St.splitTextToSize(zn,re))},[]))),ot={text:V,x:ue,y:ke,options:Le,mutex:{pdfEscape:lr,activeFontKey:kt,fonts:mn,activeFontSize:dt}},On.publish("preProcessText",ot),V=ot.text,jt=(Le=ot.options).angle,!(Xe instanceof Qt)&&jt&&typeof jt=="number"){jt*=Math.PI/180,Le.rotationDirection===0&&(jt=-jt),k===I.ADVANCED&&(jt=-jt);var Vu=Math.cos(jt),$A=Math.sin(jt);Xe=new Qt(Vu,$A,-$A,Vu,0,0)}else jt&&jt instanceof Qt&&(Xe=jt);k!==I.ADVANCED||Xe||(Xe=Zn),(W=Le.charSpace||Kl)!==void 0&&(Wn+=_(L(W))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Oe=Le.horizontalScale)!==void 0&&(Wn+=_(100*Oe)+` Tz
`),Le.lang;var gi=-1,ep=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,_f=St.internal.getCurrentPageInfo().pageContext;switch(ep){case 0:case!1:case"fill":gi=0;break;case 1:case!0:case"stroke":gi=1;break;case 2:case"fillThenStroke":gi=2;break;case 3:case"invisible":gi=3;break;case 4:case"fillAndAddForClipping":gi=4;break;case 5:case"strokeAndAddPathForClipping":gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gi=6;break;case 7:case"addToPathForClipping":gi=7}var Gh=_f.usedRenderingMode!==void 0?_f.usedRenderingMode:-1;gi!==-1?Wn+=gi+` Tr
`:Gh!==-1&&(Wn+=`0 Tr
`),gi!==-1&&(_f.usedRenderingMode=gi),S=Le.align||"left";var lo,os=dt*wr,Vc=St.internal.pageSize.getWidth(),Sf=mn[kt];W=Le.charSpace||Kl,re=Le.maxWidth||0,pe=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Xl=[],zc=function(Vn){return St.getStringUnitWidth(Vn,{font:Sf,charSpace:W,fontSize:dt,doKerning:!1})*dt/Nr};if(Object.prototype.toString.call(V)==="[object Array]"){var Ys;_t=ga(V),S!=="left"&&(lo=_t.map(zc));var Ss,Gc=0;if(S==="right"){ue-=lo[0],V=[],Qa=_t.length;for(var xi=0;xi<Qa;xi++)xi===0?(Ss=Ls(ue),Ys=Na(ke)):(Ss=L(Gc-lo[xi]),Ys=-os),V.push([_t[xi],Ss,Ys]),Gc=lo[xi]}else if(S==="center"){ue-=lo[0]/2,V=[],Qa=_t.length;for(var Lo=0;Lo<Qa;Lo++)Lo===0?(Ss=Ls(ue),Ys=Na(ke)):(Ss=L((Gc-lo[Lo])/2),Ys=-os),V.push([_t[Lo],Ss,Ys]),Gc=lo[Lo]}else if(S==="left"){V=[],Qa=_t.length;for(var ml=0;ml<Qa;ml++)V.push(_t[ml])}else if(S==="justify"&&Sf.encoding==="Identity-H"){V=[],Qa=_t.length,re=re!==0?re:Vc;for(var Uo=0,Aa=0;Aa<Qa;Aa++)if(Ys=Aa===0?Na(ke):-os,Ss=Aa===0?Ls(ue):Uo,Aa<Qa-1){var Mo=L((re-lo[Aa])/(_t[Aa].split(" ").length-1)),ka=_t[Aa].split(" ");V.push([ka[0]+" ",Ss,Ys]),Uo=0;for(var vi=1;vi<ka.length;vi++){var zu=(zc(ka[vi-1]+" "+ka[vi])-zc(ka[vi]))*Nr+Mo;vi==ka.length-1?V.push([ka[vi],zu,0]):V.push([ka[vi]+" ",zu,0]),Uo-=zu}}else V.push([_t[Aa],Ss,Ys]);V.push(["",Uo,0])}else{if(S!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Qa=_t.length,re=re!==0?re:Vc,Aa=0;Aa<Qa;Aa++)Ys=Aa===0?Na(ke):-os,Ss=Aa===0?Ls(ue):0,Aa<Qa-1?Xl.push(_(L((re-lo[Aa])/(_t[Aa].split(" ").length-1)))):Xl.push(0),V.push([_t[Aa],Ss,Ys])}}var pl=typeof Le.R2L=="boolean"?Le.R2L:Nt;pl===!0&&(V=pi(V,function(Vn,zn,qr){return[Vn.split("").reverse().join(""),zn,qr]})),ot={text:V,x:ue,y:ke,options:Le,mutex:{pdfEscape:lr,activeFontKey:kt,fonts:mn,activeFontSize:dt}},On.publish("postProcessText",ot),V=ot.text,Sn=ot.mutex.isHex||!1;var JA=mn[kt].encoding;JA!=="WinAnsiEncoding"&&JA!=="StandardEncoding"||(V=pi(V,function(Vn,zn,qr){return[oo(Vn),zn,qr]})),_t=ga(V),V=[];for(var qc,Kc,Wc,Gu=0,YA=1,$c=Array.isArray(_t[0])?YA:Gu,Zl="",qu=function(Vn,zn,qr){var xa="";return qr instanceof Qt?(qr=typeof Le.angle=="number"?or(qr,new Qt(1,0,0,1,Vn,zn)):or(new Qt(1,0,0,1,Vn,zn),qr),k===I.ADVANCED&&(qr=or(new Qt(1,0,0,-1,0,0),qr)),xa=qr.join(" ")+` Tm
`):xa=_(Vn)+" "+_(zn)+` Td
`,xa},da=0;da<_t.length;da++){switch(Zl="",$c){case YA:Wc=(Sn?"<":"(")+_t[da][0]+(Sn?">":")"),qc=parseFloat(_t[da][1]),Kc=parseFloat(_t[da][2]);break;case Gu:Wc=(Sn?"<":"(")+_t[da]+(Sn?">":")"),qc=Ls(ue),Kc=Na(ke)}Xl!==void 0&&Xl[da]!==void 0&&(Zl=Xl[da]+` Tw
`),da===0?V.push(Zl+qu(qc,Kc,Xe)+Wc):$c===Gu?V.push(Zl+Wc):$c===YA&&V.push(Zl+qu(qc,Kc,Xe)+Wc)}V=$c===Gu?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Gi=`BT
/`;return Gi+=kt+" "+dt+` Tf
`,Gi+=_(dt*wr)+` TL
`,Gi+=Ro+`
`,Gi+=Wn,Gi+=V,we(Gi+="ET"),m[kt]=!0,St};var GA=g.__private__.clip=g.clip=function(V){return we(V==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return GA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return we("n"),this};var Rs=g.__private__.isValidStyle=function(V){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ue=!0),ue};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(V){return Rs(V)&&(u=V),this};var fi=g.__private__.getStyle=g.getStyle=function(V){var ue=u;switch(V){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=V}return ue},Js=g.close=function(){return we("h"),this};g.stroke=function(){return we("S"),this},g.fill=function(V){return ao("f",V),this},g.fillEvenOdd=function(V){return ao("f*",V),this},g.fillStroke=function(V){return ao("B",V),this},g.fillStrokeEvenOdd=function(V){return ao("B*",V),this};var ao=function(V,ue){Or(ue)==="object"?Fo(ue,V):we(V)},hi=function(V){V===null||k===I.ADVANCED&&V===void 0||(V=fi(V),we(V))};function ol(V,ue,ke,Le,He){var ot=new $0(ue||this.boundingBox,ke||this.xStep,Le||this.yStep,this.gState,He||this.matrix);ot.stream=this.stream;var _t=V+"$$"+this.cloneIndex+++"$$";return Br(_t,ot),ot}var Fo=function(V,ue){var ke=rs[V.key],Le=Bn[ke];if(Le instanceof eh)we("q"),we(Pu(ue)),Le.gState&&g.setGState(Le.gState),we(V.matrix.toString()+" cm"),we("/"+ke+" sh"),we("Q");else if(Le instanceof $0){var He=new Qt(1,0,0,-1,0,Us());V.matrix&&(He=He.multiply(V.matrix||Zn),ke=ol.call(Le,V.key,V.boundingBox,V.xStep,V.yStep,He).id),we("q"),we("/Pattern cs"),we("/"+ke+" scn"),Le.gState&&g.setGState(Le.gState),we(ue),we("Q")}},Pu=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mi=g.moveTo=function(V,ue){return we(_(L(V))+" "+_(z(ue))+" m"),this},Ds=g.lineTo=function(V,ue){return we(_(L(V))+" "+_(z(ue))+" l"),this},so=g.curveTo=function(V,ue,ke,Le,He,ot){return we([_(L(V)),_(z(ue)),_(L(ke)),_(z(Le)),_(L(He)),_(z(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(V,ue,ke,Le,He){if(isNaN(V)||isNaN(ue)||isNaN(ke)||isNaN(Le)||!Rs(He))throw new Error("Invalid arguments passed to jsPDF.line");return k===I.COMPAT?this.lines([[ke-V,Le-ue]],V,ue,[1,1],He||"S"):this.lines([[ke-V,Le-ue]],V,ue,[1,1]).stroke()},g.__private__.lines=g.lines=function(V,ue,ke,Le,He,ot){var _t,jt,S,W,re,pe,Oe,Xe,St,fn,Wn,Sn;if(typeof V=="number"&&(Sn=ke,ke=ue,ue=V,V=Sn),Le=Le||[1,1],ot=ot||!1,isNaN(ue)||isNaN(ke)||!Array.isArray(V)||!Array.isArray(Le)||!Rs(He)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mi(ue,ke),_t=Le[0],jt=Le[1],W=V.length,fn=ue,Wn=ke,S=0;S<W;S++)(re=V[S]).length===2?(fn=re[0]*_t+fn,Wn=re[1]*jt+Wn,Ds(fn,Wn)):(pe=re[0]*_t+fn,Oe=re[1]*jt+Wn,Xe=re[2]*_t+fn,St=re[3]*jt+Wn,fn=re[4]*_t+fn,Wn=re[5]*jt+Wn,so(pe,Oe,Xe,St,fn,Wn));return ot&&Js(),hi(He),this},g.path=function(V){for(var ue=0;ue<V.length;ue++){var ke=V[ue],Le=ke.c;switch(ke.op){case"m":mi(Le[0],Le[1]);break;case"l":Ds(Le[0],Le[1]);break;case"c":so.apply(this,Le);break;case"h":Js()}}return this},g.__private__.rect=g.rect=function(V,ue,ke,Le,He){if(isNaN(V)||isNaN(ue)||isNaN(ke)||isNaN(Le)||!Rs(He))throw new Error("Invalid arguments passed to jsPDF.rect");return k===I.COMPAT&&(Le=-Le),we([_(L(V)),_(z(ue)),_(L(ke)),_(L(Le)),"re"].join(" ")),hi(He),this},g.__private__.triangle=g.triangle=function(V,ue,ke,Le,He,ot,_t){if(isNaN(V)||isNaN(ue)||isNaN(ke)||isNaN(Le)||isNaN(He)||isNaN(ot)||!Rs(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ke-V,Le-ue],[He-ke,ot-Le],[V-He,ue-ot]],V,ue,[1,1],_t,!0),this},g.__private__.roundedRect=g.roundedRect=function(V,ue,ke,Le,He,ot,_t){if(isNaN(V)||isNaN(ue)||isNaN(ke)||isNaN(Le)||isNaN(He)||isNaN(ot)||!Rs(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*ke),ot=Math.min(ot,.5*Le),this.lines([[ke-2*He,0],[He*jt,0,He,ot-ot*jt,He,ot],[0,Le-2*ot],[0,ot*jt,-He*jt,ot,-He,ot],[2*He-ke,0],[-He*jt,0,-He,-ot*jt,-He,-ot],[0,2*ot-Le],[0,-ot*jt,He*jt,-ot,He,-ot]],V+He,ue,[1,1],_t,!0),this},g.__private__.ellipse=g.ellipse=function(V,ue,ke,Le,He){if(isNaN(V)||isNaN(ue)||isNaN(ke)||isNaN(Le)||!Rs(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*ke,_t=4/3*(Math.SQRT2-1)*Le;return mi(V+ke,ue),so(V+ke,ue-_t,V+ot,ue-Le,V,ue-Le),so(V-ot,ue-Le,V-ke,ue-_t,V-ke,ue),so(V-ke,ue+_t,V-ot,ue+Le,V,ue+Le),so(V+ot,ue+Le,V+ke,ue+_t,V+ke,ue),hi(He),this},g.__private__.circle=g.circle=function(V,ue,ke,Le){if(isNaN(V)||isNaN(ue)||isNaN(ke)||!Rs(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ue,ke,ke,Le)},g.setFont=function(V,ue,ke){return ke&&(ue=D(ue,ke)),kt=il(V,ue,{disableWarning:!1}),this};var Ba=g.__private__.getFont=g.getFont=function(){return mn[il.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var V,ue,ke={};for(V in Fn)if(Fn.hasOwnProperty(V))for(ue in ke[V]=[],Fn[V])Fn[V].hasOwnProperty(ue)&&ke[V].push(ue);return ke},g.addFont=function(V,ue,ke,Le,He){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(ke=D(ke,Le)),He=He||"Identity-H",rl.call(this,V,ue,ke,He)};var Kn,ll=t.lineWidth||.200025,io=g.__private__.getLineWidth=g.getLineWidth=function(){return ll},ju=g.__private__.setLineWidth=g.setLineWidth=function(V){return ll=V,we(_(L(V))+" w"),this};g.__private__.setLineDash=sn.API.setLineDash=sn.API.setLineDashPattern=function(V,ue){if(V=V||[],ue=ue||0,isNaN(ue)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(ke){return _(L(ke))}).join(" "),ue=_(L(ue)),we("["+V+"] "+ue+" d"),this};var Gl=g.__private__.getLineHeight=g.getLineHeight=function(){return dt*Kn};g.__private__.getLineHeight=g.getLineHeight=function(){return dt*Kn};var ql=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Kn=V),this},zi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Kn};ql(t.lineHeight);var Ls=g.__private__.getHorizontalCoordinate=function(V){return L(V)},Na=g.__private__.getVerticalCoordinate=function(V){return k===I.ADVANCED?V:en[K].mediaBox.topRightY-en[K].mediaBox.bottomLeftY-L(V)},qA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(V){return _(Ls(V))},cl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(V){return _(Na(V))},_s=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Se(_s)},g.__private__.setStrokeColor=g.setDrawColor=function(V,ue,ke,Le){return _s=Ne({ch1:V,ch2:ue,ch3:ke,ch4:Le,pdfColorType:"draw",precision:2}),we(_s),this};var ul=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Se(ul)},g.__private__.setFillColor=g.setFillColor=function(V,ue,ke,Le){return ul=Ne({ch1:V,ch2:ue,ch3:ke,ch4:Le,pdfColorType:"fill",precision:2}),we(ul),this};var Ro=t.textColor||"0 g",Mc=g.__private__.getTextColor=g.getTextColor=function(){return Se(Ro)};g.__private__.setTextColor=g.setTextColor=function(V,ue,ke,Le){return Ro=Ne({ch1:V,ch2:ue,ch3:ke,ch4:Le,pdfColorType:"text",precision:3}),this};var Kl=t.charSpace,Pc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Kl||0)};g.__private__.setCharSpace=g.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Kl=V,this};var Ou=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(V){var ue=g.CapJoinStyles[V];if(ue===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ou=ue,we(ue+" J"),this};var Wl=0;g.__private__.setLineJoin=g.setLineJoin=function(V){var ue=g.CapJoinStyles[V];if(ue===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wl=ue,we(ue+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return we(_(L(V))+" M"),this},g.GState=ey,g.setGState=function(V){(V=typeof V=="string"?Xn[Yr[V]]:Al(null,V)).equals(ua)||(we("/"+V.id+" gs"),ua=V)};var Al=function(V,ue){if(!V||!Yr[V]){var ke=!1;for(var Le in Xn)if(Xn.hasOwnProperty(Le)&&Xn[Le].equals(ue)){ke=!0;break}if(ke)ue=Xn[Le];else{var He="GS"+(Object.keys(Xn).length+1).toString(10);Xn[He]=ue,ue.id=He}return V&&(Yr[V]=ue.id),On.publish("addGState",ue),ue}};g.addGState=function(V,ue){return Al(V,ue),this},g.saveGraphicsState=function(){return we("q"),Tr.push({key:kt,size:dt,color:Ro}),this},g.restoreGraphicsState=function(){we("Q");var V=Tr.pop();return kt=V.key,dt=V.size,Ro=V.color,ua=null,this},g.setCurrentTransformationMatrix=function(V){return we(V.toString()+" cm"),this},g.comment=function(V){return we("#"+V),this};var $l=function(V,ue){var ke=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ke},set:function(ot){isNaN(ot)||(ke=parseFloat(ot))}});var Le=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ot){isNaN(ot)||(Le=parseFloat(ot))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(ot){He=ot.toString()}}),this},jc=function(V,ue,ke,Le){$l.call(this,V,ue),this.type="rect";var He=ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(_t){isNaN(_t)||(He=parseFloat(_t))}});var ot=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(_t){isNaN(_t)||(ot=parseFloat(_t))}}),this},Jl=function(){this.page=Dn,this.currentPage=K,this.pages=xe.slice(0),this.pagesContext=en.slice(0),this.x=xn,this.y=$t,this.matrix=ir,this.width=fl(K),this.height=Us(K),this.outputDestination=Re,this.id="",this.objectNumber=-1};Jl.prototype.restore=function(){Dn=this.page,K=this.currentPage,en=this.pagesContext,xe=this.pages,xn=this.x,$t=this.y,ir=this.matrix,Yl(K,this.width),Oc(K,this.height),Re=this.outputDestination};var dl=function(V,ue,ke,Le,He){ws.push(new Jl),Dn=K=0,xe=[],xn=V,$t=ue,ir=He,Es([ke,Le])},KA=function(V){if(pa[V])ws.pop().restore();else{var ue=new Jl,ke="Xo"+(Object.keys(Vr).length+1).toString(10);ue.id=ke,pa[V]=ke,Vr[ke]=ue,On.publish("addFormObject",ue),ws.pop().restore()}};for(var Do in g.beginFormObject=function(V,ue,ke,Le,He){return dl(V,ue,ke,Le,He),this},g.endFormObject=function(V){return KA(V),this},g.doFormObject=function(V,ue){var ke=Vr[pa[V]];return we("q"),we(ue.toString()+" cm"),we("/"+ke.id+" Do"),we("Q"),this},g.getFormObject=function(V){var ue=Vr[pa[V]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},g.save=function(V,ue){return V=V||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(Yf(Uc(No()),V),typeof Yf.unload=="function"&&yn.setTimeout&&setTimeout(Yf.unload,911),this):new Promise(function(ke,Le){try{var He=Yf(Uc(No()),V);typeof Yf.unload=="function"&&yn.setTimeout&&setTimeout(Yf.unload,911),ke(He)}catch(ot){Le(ot.message)}})},sn.API)sn.API.hasOwnProperty(Do)&&(Do==="events"&&sn.API.events.length?function(V,ue){var ke,Le,He;for(He=ue.length-1;He!==-1;He--)ke=ue[He][0],Le=ue[He][1],V.subscribe.apply(V,[ke].concat(typeof Le=="function"?[Le]:Le))}(On,sn.API.events):g[Do]=sn.API[Do]);var fl=g.getPageWidth=function(V){return(en[V=V||K].mediaBox.topRightX-en[V].mediaBox.bottomLeftX)/xt},Yl=g.setPageWidth=function(V,ue){en[V].mediaBox.topRightX=ue*xt+en[V].mediaBox.bottomLeftX},Us=g.getPageHeight=function(V){return(en[V=V||K].mediaBox.topRightY-en[V].mediaBox.bottomLeftY)/xt},Oc=g.setPageHeight=function(V,ue){en[V].mediaBox.topRightY=ue*xt+en[V].mediaBox.bottomLeftY};return g.internal={pdfEscape:lr,getStyle:fi,getFont:Ba,getFontSize:ut,getCharSpace:Pc,getTextColor:Mc,getLineHeight:Gl,getLineHeightFactor:zi,getLineWidth:io,write:ze,getHorizontalCoordinate:Ls,getVerticalCoordinate:Na,getCoordinateString:qA,getVerticalCoordinateString:cl,collections:{},newObject:Rr,newAdditionalObject:Be,newObjectDeferred:zr,newObjectDeferredBegin:de,getFilters:qe,putStream:tt,events:On,scaleFactor:xt,pageSize:{getWidth:function(){return fl(K)},setWidth:function(V){Yl(K,V)},getHeight:function(){return Us(K)},setHeight:function(V){Oc(K,V)}},encryptionOptions:d,encryption:Dr,getEncryptor:Io,output:ko,getNumberOfPages:yr,pages:xe,out:we,f2:O,f3:R,getPageInfo:no,getPageInfoByObjId:dn,getCurrentPageInfo:ro,getPDFVersion:w,Point:$l,Rectangle:jc,Matrix:Qt,hasHotfix:to},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return fl(K)},set:function(V){Yl(K,V)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Us(K)},set:function(V){Oc(K,V)},enumerable:!0,configurable:!0}),Lu.call(g,it),kt="F1",al(a,n),On.publish("initialized"),g}H0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},H0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},H0.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},H0.prototype.processOwnerPassword=function(t,e){return H_(Q_(e).substr(0,5),t)},H0.prototype.encryptor=function(t,e){var n=Q_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return H_(n,r)}},ey.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Or(t)!==Or(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},sn.API={events:[]},sn.version="2.5.2";var Da=sn.API,n4=1,Ph=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},y0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},kn=function(t){return t.toFixed(2)},_d=function(t){return t.toFixed(5)};Da.__acroform__={};var To=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},zI=function(t){return t*n4},fu=function(t){var e=new mM,n=Zt.internal.getHeight(t)||0,r=Zt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(kn(r)),Number(kn(n))],e},$se=Da.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Jse=Da.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Yse=Da.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Ya=Da.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Yse(t,e-1)},Xa=Da.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $se(t,e-1)},Za=Da.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jse(t,e-1)},Xse=Da.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=n(a)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(a+i)||0,l.upperRight_Y=r(s)||0,[Number(kn(l.lowerLeft_X)),Number(kn(l.lowerLeft_Y)),Number(kn(l.upperRight_X)),Number(kn(l.upperRight_Y))]},Zse=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=V_(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+kn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=fu(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},V_=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(R){return R.split(`
`)}):a.map(function(R){return[R]});var s=n,i=Zt.internal.getHeight(t)||0;i=i<0?-i:i;var o=Zt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(R,L,Q){if(R+1<a.length){var z=L+" "+a[R+1][0];return Av(z,t,Q).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,h=Av("3",t,s).height,m=t.multiline?i-s:(i-h)/2,g=m+=2,b=0,w=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Av(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var N="",I=0,k=0;k<a.length;k++)if(a.hasOwnProperty(k)){var U=!1;if(a[k].length!==1&&E!==a[k].length-1){if((h+2)*(I+2)+2>i)continue e;N+=a[k][E],U=!0,w=k,k--}else{N=(N+=a[k][E]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var P=parseInt(k),D=l(P,N,s),_=k>=a.length-1;if(D&&!_){N+=" ",E=0;continue}if(D||_){if(_)w=P;else if(t.multiline&&(h+2)*(I+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(I+2)+2>i)continue e;w=P}}for(var B="",T=b;T<=w;T++){var O=a[T];if(t.multiline){if(T===w){B+=O[E]+" ",E=(E+1)%O.length;continue}if(T===b){B+=O[O.length-1]+" ";continue}}B+=O[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,d=Av(B,t,s).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=kn(u)+" "+kn(g)+` Td
`,e+="("+Ph(B)+`) Tj
`,e+=-kn(u)+` 0 Td
`,g=-(s+2),d=0,b=U?w:w+1,I++,N=""}break}return r.text=e,r.fontSize=s,r},Av=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},eie={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},tie=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},nie=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,a=t[n];e.internal.newObjectDeferredBegin(a.objId,!0),Or(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[r]}},rie=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(kc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(eie)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");n4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new pM,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s.objId=void 0,s.hasAnnotation&&tie(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,a){var s=!r;for(var i in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var o=r[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=Xse(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Zt.createDefaultAppearanceStream(o),Or(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Zse(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&nie(a.internal.acroformPlugin.xForms,a)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},hM=Da.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Or(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),a+="("+Ph(r(t[s].toString()))+")"):a+=t[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},jC=function(t,e,n){var r=function(a){return a};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ph(r(t))+")"},xu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xu.prototype.toString=function(){return this.objId+" 0 R"},xu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},xu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],a=this[r];a&&(Array.isArray(a)?t.push({key:r,value:hM(a,this.objId,this.scope)}):a instanceof xu?(a.scope=this.scope,t.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:r,value:a}))}return t};var mM=function(){xu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};To(mM,xu);var pM=function(){xu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ph(n(t))+")"}},set:function(n){t=n}})};To(pM,xu);var kc=function t(){xu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ya(e,3)},set:function(N){N?this.F=Xa(e,3):this.F=Za(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(N){r=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(N){r[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(N){r[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(N){r[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(N){r[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ty)return;s="FieldObject"+t.FieldNum++}var N=function(I){return I};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Ph(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(N){i=N}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/n4:u},set:function(N){u=N}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof ty||this instanceof Ah))return jC(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof zs?m:jC(m,this.objId,this.scope)},set:function(N){N=N.toString(),m=this instanceof zs?N:N.substr(0,1)==="("?y0(N.substr(1,N.length-2)):y0(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof zs?y0(m.substr(1,m.length-1)):m},set:function(N){N=N.toString(),m=this instanceof zs?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof zs?g:jC(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=this instanceof zs?N:N.substr(0,1)==="("?y0(N.substr(1,N.length-2)):y0(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof zs?y0(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof zs?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(N){N=!!N,w=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(N){b=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,1)},set:function(N){N?this.Ff=Xa(this.Ff,1):this.Ff=Za(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,2)},set:function(N){N?this.Ff=Xa(this.Ff,2):this.Ff=Za(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,3)},set:function(N){N?this.Ff=Xa(this.Ff,3):this.Ff=Za(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');E=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(E){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};To(kc,xu);var im=function(){kc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return hM(e,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,18)},set:function(n){n?this.Ff=Xa(this.Ff,18):this.Ff=Za(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Xa(this.Ff,19):this.Ff=Za(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,20)},set:function(n){n?(this.Ff=Xa(this.Ff,20),e.sort()):this.Ff=Za(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,22)},set:function(n){n?this.Ff=Xa(this.Ff,22):this.Ff=Za(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,23)},set:function(n){n?this.Ff=Xa(this.Ff,23):this.Ff=Za(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,27)},set:function(n){n?this.Ff=Xa(this.Ff,27):this.Ff=Za(this.Ff,27)}}),this.hasAppearanceStream=!1};To(im,kc);var om=function(){im.call(this),this.fontName="helvetica",this.combo=!1};To(om,im);var lm=function(){om.call(this),this.combo=!0};To(lm,om);var g2=function(){lm.call(this),this.edit=!0};To(g2,lm);var zs=function(){kc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,15)},set:function(n){n?this.Ff=Xa(this.Ff,15):this.Ff=Za(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,16)},set:function(n){n?this.Ff=Xa(this.Ff,16):this.Ff=Za(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,17)},set:function(n){n?this.Ff=Xa(this.Ff,17):this.Ff=Za(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,26)},set:function(n){n?this.Ff=Xa(this.Ff,26):this.Ff=Za(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+Ph(n(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Or(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};To(zs,kc);var x2=function(){zs.call(this),this.pushButton=!0};To(x2,zs);var cm=function(){zs.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};To(cm,zs);var ty=function(){var t,e;kc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),r)i.push("/"+s+" ("+Ph(a(r[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){Or(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};To(ty,kc),cm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},cm.prototype.createOption=function(t){var e=new ty;return e.Parent=this,e.optionName=t,this.Kids.push(e),aie.call(this.scope,e),e};var v2=function(){zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zt.CheckBox.createAppearanceStream()};To(v2,zs);var Ah=function(){kc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,13)},set:function(e){e?this.Ff=Xa(this.Ff,13):this.Ff=Za(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,21)},set:function(e){e?this.Ff=Xa(this.Ff,21):this.Ff=Za(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,23)},set:function(e){e?this.Ff=Xa(this.Ff,23):this.Ff=Za(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,24)},set:function(e){e?this.Ff=Xa(this.Ff,24):this.Ff=Za(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,25)},set:function(e){e?this.Ff=Xa(this.Ff,25):this.Ff=Za(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,26)},set:function(e){e?this.Ff=Xa(this.Ff,26):this.Ff=Za(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};To(Ah,kc);var y2=function(){Ah.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ya(this.Ff,14)},set:function(t){t?this.Ff=Xa(this.Ff,14):this.Ff=Za(this.Ff,14)}}),this.password=!0};To(y2,Ah);var Zt={CheckBox:{createAppearanceStream:function(){return{N:{On:Zt.CheckBox.YesNormal},D:{On:Zt.CheckBox.YesPushDown,Off:Zt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=fu(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=V_(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+kn(s.fontSize)+" Tf "+a),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=fu(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),a=[],s=Zt.internal.getHeight(t),i=Zt.internal.getWidth(t),o=V_(t,t.caption);return a.push("1 g"),a.push("0 0 "+kn(i)+" "+kn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+kn(i-1)+" "+kn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+kn(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=fu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Zt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Zt.RadioButton.Circle.YesNormal,e.D[t]=Zt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=fu(t);e.scope=t.scope;var n=[],r=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Zt.internal.Bezier_C,s=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+_d(Zt.internal.getWidth(t)/2)+" "+_d(Zt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=fu(t);e.scope=t.scope;var n=[],r=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*Zt.internal.Bezier_C).toFixed(5)),i=Number((r*Zt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+_d(Zt.internal.getWidth(t)/2)+" "+_d(Zt.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+_d(Zt.internal.getWidth(t)/2)+" "+_d(Zt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=fu(t);e.scope=t.scope;var n=[],r=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*Zt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+_d(Zt.internal.getWidth(t)/2)+" "+_d(Zt.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Zt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Zt.RadioButton.Cross.YesNormal,e.D[t]=Zt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=fu(t);e.scope=t.scope;var n=[],r=Zt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+kn(Zt.internal.getWidth(t)-2)+" "+kn(Zt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(kn(r.x1.x)+" "+kn(r.x1.y)+" m"),n.push(kn(r.x2.x)+" "+kn(r.x2.y)+" l"),n.push(kn(r.x4.x)+" "+kn(r.x4.y)+" m"),n.push(kn(r.x3.x)+" "+kn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=fu(t);e.scope=t.scope;var n=Zt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+kn(Zt.internal.getWidth(t)-2)+" "+kn(Zt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(kn(n.x1.x)+" "+kn(n.x1.y)+" m"),r.push(kn(n.x2.x)+" "+kn(n.x2.y)+" l"),r.push(kn(n.x4.x)+" "+kn(n.x4.y)+" m"),r.push(kn(n.x3.x)+" "+kn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=fu(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+kn(Zt.internal.getWidth(t))+" "+kn(Zt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Zt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Zt.internal.getWidth(t),n=Zt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Zt.internal.getWidth=function(t){var e=0;return Or(t)==="object"&&(e=zI(t.Rect[2])),e},Zt.internal.getHeight=function(t){var e=0;return Or(t)==="object"&&(e=zI(t.Rect[3])),e};var aie=Da.addField=function(t){if(rie(this,t),!(t instanceof kc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Da.AcroFormChoiceField=im,Da.AcroFormListBox=om,Da.AcroFormComboBox=lm,Da.AcroFormEditBox=g2,Da.AcroFormButton=zs,Da.AcroFormPushButton=x2,Da.AcroFormRadioButton=cm,Da.AcroFormCheckBox=v2,Da.AcroFormTextField=Ah,Da.AcroFormPasswordField=y2,Da.AcroFormAppearance=Zt,Da.AcroForm={ChoiceField:im,ListBox:om,ComboBox:lm,EditBox:g2,Button:zs,PushButton:x2,RadioButton:cm,CheckBox:v2,TextField:Ah,PasswordField:y2,Appearance:Zt},sn.AcroForm={ChoiceField:im,ListBox:om,ComboBox:lm,EditBox:g2,Button:zs,PushButton:x2,RadioButton:cm,CheckBox:v2,TextField:Ah,PasswordField:y2,Appearance:Zt};sn.AcroForm;function gM(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(R,L){var Q,z,ie,J,ee,ae=e;if((L=L||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(D(R))for(ee in n)for(ie=n[ee],Q=0;Q<ie.length;Q+=1){for(J=!0,z=0;z<ie[Q].length;z+=1)if(ie[Q][z]!==void 0&&ie[Q][z]!==R[z]){J=!1;break}if(J===!0){ae=ee;break}}else for(ee in n)for(ie=n[ee],Q=0;Q<ie.length;Q+=1){for(J=!0,z=0;z<ie[Q].length;z+=1)if(ie[Q][z]!==void 0&&ie[Q][z]!==R.charCodeAt(z)){J=!1;break}if(J===!0){ae=ee;break}}return ae===e&&L!==e&&(ae=L),ae},a=function R(L){for(var Q=this.internal.write,z=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:L.width}),J.push({key:"Height",value:L.height}),L.colorSpace===E.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===E.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var ee="",ae=0,q=L.transparency.length;ae<q;ae++)ee+=L.transparency[ae]+" "+L.transparency[ae]+" ";J.push({key:"Mask",value:"["+ee+"]"})}L.sMask!==void 0&&J.push({key:"SMask",value:L.objectId+1+" 0 R"});var Y=L.filter!==void 0?["/"+L.filter]:void 0;if(z({data:L.data,additionalKeyValues:J,alreadyAppliedFilters:Y,objectId:L.objectId}),Q("endobj"),"sMask"in L&&L.sMask!==void 0){var Ae="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,j={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:Ae,data:L.sMask};"filter"in L&&(j.filter=L.filter),R.call(this,j)}if(L.colorSpace===E.INDEXED){var K=this.internal.newObject();z({data:B(new Uint8Array(L.palette)),objectId:K}),Q("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var L in R)a.call(this,R[L])},i=function(){var R,L=this.internal.collections.addImage_images,Q=this.internal.write;for(var z in L)Q("/I"+(R=L[z]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof t["process"+R.toUpperCase()]=="function"},h=function(R){return Or(R)==="object"&&R.nodeType===1},m=function(R,L){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var Q=""+R.getAttribute("src");if(Q.indexOf("data:image/")===0)return kg(unescape(Q).split("base64,").pop());var z=t.loadFile(Q,!0);if(z!==void 0)return z}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ie;switch(L){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;case"JPEG":case"JPG":default:ie="image/jpeg"}return kg(R.toDataURL(ie,1).split("base64,").pop())}},g=function(R){var L=this.internal.collections.addImage_images;if(L){for(var Q in L)if(R===L[Q].alias)return L[Q]}},b=function(R,L,Q){return R||L||(R=-96,L=-96),R<0&&(R=-1*Q.width*72/R/this.internal.scaleFactor),L<0&&(L=-1*Q.height*72/L/this.internal.scaleFactor),R===0&&(R=L*Q.width/Q.height),L===0&&(L=R*Q.height/Q.width),[R,L]},w=function(R,L,Q,z,ie,J){var ee=b.call(this,Q,z,ie),ae=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,Y=l.call(this);if(Q=ee[0],z=ee[1],Y[ie.index]=ie,J){J*=Math.PI/180;var Ae=Math.cos(J),j=Math.sin(J),K=function(te){return te.toFixed(4)},X=[K(Ae),K(j),K(-1*j),K(Ae),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,ae(R),q(L+z),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([ae(Q),"0","0",ae(z),"0","0","cm"].join(" "))):this.internal.write([ae(Q),"0","0",ae(z),ae(R),q(L+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(R){var L,Q,z=0;if(typeof R=="string")for(Q=R.length,L=0;L<Q;L++)z=(z<<5)-z+R.charCodeAt(L),z|=0;else if(D(R))for(Q=R.byteLength/2,L=0;L<Q;L++)z=(z<<5)-z+R[L],z|=0;return z},k=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var L=!0;return R.length===0&&(L=!1),R.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(L=!1),L},U=t.__addimage__.extractImageFromDataUrl=function(R){var L=(R=R||"").split("base64,"),Q=null;if(L.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(z)&&(Q={mimeType:z[1],charset:z[2],data:L[1]})}return Q},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return P()&&R instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(R){return P()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},_=t.__addimage__.binaryStringToUint8Array=function(R){for(var L=R.length,Q=new Uint8Array(L),z=0;z<L;z++)Q[z]=R.charCodeAt(z);return Q},B=t.__addimage__.arrayBufferToBinaryString=function(R){for(var L="",Q=D(R)?R:new Uint8Array(R),z=0;z<Q.length;z+=8192)L+=String.fromCharCode.apply(null,Q.subarray(z,z+8192));return L};t.addImage=function(){var R,L,Q,z,ie,J,ee,ae,q;if(typeof arguments[1]=="number"?(L=e,Q=arguments[1],z=arguments[2],ie=arguments[3],J=arguments[4],ee=arguments[5],ae=arguments[6],q=arguments[7]):(L=arguments[1],Q=arguments[2],z=arguments[3],ie=arguments[4],J=arguments[5],ee=arguments[6],ae=arguments[7],q=arguments[8]),Or(R=arguments[0])==="object"&&!h(R)&&"imageData"in R){var Y=R;R=Y.imageData,L=Y.format||L||e,Q=Y.x||Q||0,z=Y.y||z||0,ie=Y.w||Y.width||ie,J=Y.h||Y.height||J,ee=Y.alias||ee,ae=Y.compression||ae,q=Y.rotation||Y.angle||q}var Ae=this.internal.getFilters();if(ae===void 0&&Ae.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(Q)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=T.call(this,R,L,ee,ae);return w.call(this,Q,z,ie,J,j,q),this};var T=function(R,L,Q,z){var ie,J,ee;if(typeof R=="string"&&r(R)===e){R=unescape(R);var ae=O(R,!1);(ae!==""||(ae=t.loadFile(R,!0))!==void 0)&&(R=ae)}if(h(R)&&(R=m(R,L)),L=r(R,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ee=Q)==null||ee.length===0)&&(Q=function(q){return typeof q=="string"||D(q)?I(q):D(q.data)?I(q.data):null}(R)),(ie=g.call(this,Q))||(P()&&(R instanceof Uint8Array||L==="RGBA"||(J=R,R=_(R))),ie=this["process"+L.toUpperCase()](R,u.call(this),Q,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in t.image_compression?q:N.NONE}(z),J)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},O=t.__addimage__.convertBase64ToBinaryString=function(R,L){var Q;L=typeof L!="boolean"||L;var z,ie="";if(typeof R=="string"){z=(Q=U(R))!==null?Q.data:R;try{ie=kg(z)}catch(J){if(L)throw k(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};t.getImageProperties=function(R){var L,Q,z="";if(h(R)&&(R=m(R)),typeof R=="string"&&r(R)===e&&((z=O(R,!1))===""&&(z=t.loadFile(R)||""),R=z),Q=r(R),!d(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!P()||R instanceof Uint8Array||(R=_(R)),!(L=this["process"+Q.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=Q,L}})(sn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};sn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(w.objId),I=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(N(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(N(I))+") >>",w.content=s;var k=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(w.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var U=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var P=this.annotations._nameMap[r.options.name];r.options.pageNumber=P.page,r.options.top=P.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var D=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+D+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+a),h:u(r+s)},options:i,type:"link"})},t.textWithLink=function(n,r,a,s){var i,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(n,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(n,r,a,s),a+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,a-u,o,i,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(sn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return i(w)&&a.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return i(w)&&s(w)&&e[w.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(w){var E=0,N=n,I="",k=0;for(E=0;E<w.length;E+=1)N[w.charCodeAt(E)]!==void 0?(k++,typeof(N=N[w.charCodeAt(E)])=="number"&&(I+=String.fromCharCode(N),N=n,k=0),E===w.length-1&&(N=n,I+=w.charAt(E-(k-1)),E-=k-1,k=0)):(N=n,I+=w.charAt(E-k),E-=k,k=0);return I};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(w,E,N){return i(w)?s(w)===!1?-1:!u(w)||!i(E)&&!i(N)||!i(N)&&o(E)||o(w)&&!i(E)||o(w)&&l(E)||o(w)&&o(E)?0:d(w)&&i(E)&&!o(E)&&i(N)&&u(N)?3:o(w)||!i(N)?1:2:-1},g=function(w){var E=0,N=0,I=0,k="",U="",P="",D=(w=w||"").split("\\s+"),_=[];for(E=0;E<D.length;E+=1){for(_.push(""),N=0;N<D[E].length;N+=1)k=D[E][N],U=D[E][N-1],P=D[E][N+1],i(k)?(I=m(k,U,P),_[E]+=I!==-1?String.fromCharCode(e[k.charCodeAt(0)][I]):k):_[E]+=k;_[E]=h(_[E])}return _.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var w,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(E)){var I=0;for(N=[],I=0;I<E.length;I+=1)Array.isArray(E[I])?N.push([g(E[I][0]),E[I][1],E[I][2]]):N.push([g(E[I])]);w=N}else w=g(E);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",b])}(sn.API),sn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(sn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,w=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var N=u.maxWidth;N>0?typeof l=="string"?l=this.splitTextToSize(l,N):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,U){return k.concat(E.splitTextToSize(U,N))},[])):l=Array.isArray(l)?l:[l];for(var I=0;I<l.length;I++)g<(w=this.getStringUnitWidth(l[I],{font:h})*d)&&(g=w);return g!==0&&(b=l.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,m){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,b,w,E,N=[],I=[],k=[],U={},P={},D=[],_=[],B=(m=m||{}).autoSize||!1,T=m.printHeaders!==!1,O=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,R=m.margins||Object.assign({width:this.getPageWidth()},e),L=typeof m.padding=="number"?m.padding:3,Q=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=z,this.setFontSize(O),h==null)I=N=Object.keys(d[0]),k=N.map(function(){return"left"});else if(Array.isArray(h)&&Or(h[0])==="object")for(N=h.map(function(Y){return Y.name}),I=h.map(function(Y){return Y.prompt||Y.name||""}),k=h.map(function(Y){return Y.align||"left"}),g=0;g<h.length;g+=1)P[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(I=N=h,k=N.map(function(){return"left"}));if(B||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(U[E=N[g]]=d.map(function(Y){return Y[E]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(I[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=U[E],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)D.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[E]=Math.max.apply(null,D)+L+L,D=[]}if(T){var ie={};for(g=0;g<N.length;g+=1)ie[N[g]]={},ie[N[g]].text=I[g],ie[N[g]].align=k[g];var J=o.call(this,ie,P);_=N.map(function(Y){return new s(l,u,P[Y],J,ie[Y].text,void 0,ie[Y].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var ee=h.reduce(function(Y,Ae){return Y[Ae.name]=Ae.align,Y},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var ae=o.call(this,d[g],P);for(w=0;w<N.length;w+=1){var q=d[g][N[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:w,data:q},this),i.call(this,new s(l,u,P[N[w]],ae,q,g+2,ee[N[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(sn.API);var xM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},vM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],z_=gM(vM),yM=[100,200,300,400,500,600,700,800,900],sie=gM(yM);function G_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return xM[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(s){return typeof z_[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,r].join(" ")}}}function GI(t,e,n,r){var a;for(a=n;a>=0&&a<e.length;a+=r)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=r)if(t[e[a]])return t[e[a]]}var iie={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function KI(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function oie(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},iie,n.genericFontFamilies||{}),s=null,i=null,o=0;o<e.length;++o)if(a[(s=G_(e[o])).family]&&(s.family=a[s.family]),t.hasOwnProperty(s.family)){i=t[s.family];break}if(!(i=i||t[r]))throw new Error("Could not find a font-family for the rule '"+KI(s)+"' and default family '"+r+"'.");if(i=function(l,u){if(u[l])return u[l];var d=z_[l],h=d<=z_.normal?-1:1,m=GI(u,vM,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=xM[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=sie[l],h=GI(u,yM,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+KI(s)+"'.");return i}function WI(t){return t.trimLeft()}function lie(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function cie(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var dv,$I,JI,OC=["times"];(function(t){var e,n,r,a,s,i,o,l,u,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new i,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new i,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=j;Object.defineProperty(this,"pdf",{get:function(){return K}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(De){X=!!De}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(De){te=!!De}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(De){isNaN(De)||(le=De)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(De){isNaN(De)||(ye=De)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(De){var we;typeof De=="number"?we=[De,De,De,De]:((we=new Array(4))[0]=De[0],we[1]=De.length>=2?De[1]:we[0],we[2]=De.length>=3?De[2]:we[0],we[3]=De.length>=4?De[3]:we[1]),u.margin=we}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(De){Ce=De}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(De){_e=De}});var Ie=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ie},set:function(De){Ie=De}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(De){De instanceof d&&(u=De)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(De){u.path=De}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(De){xe=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var we;we=m(De),this.ctx.fillStyle=we.style,this.ctx.isFillTransparent=we.a===0,this.ctx.fillOpacity=we.a,this.pdf.setFillColor(we.r,we.g,we.b,{a:we.a}),this.pdf.setTextColor(we.r,we.g,we.b,{a:we.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var we=m(De);this.ctx.strokeStyle=we.style,this.ctx.isStrokeTransparent=we.a===0,this.ctx.strokeOpacity=we.a,we.a===0?this.pdf.setDrawColor(255,255,255):(we.a,this.pdf.setDrawColor(we.r,we.g,we.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var se=null;function Re(De,we){if(se===null){var ze=function(nt){var it=[];return Object.keys(nt).forEach(function(dt){nt[dt].forEach(function(Ct){var ut=null;switch(Ct){case"bold":ut={family:dt,weight:"bold"};break;case"italic":ut={family:dt,style:"italic"};break;case"bolditalic":ut={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:dt}}ut!==null&&(ut.ref={name:dt,style:Ct},it.push(ut))})}),it}(De.getFontList());se=function(nt){for(var it={},dt=0;dt<nt.length;++dt){var Ct=G_(nt[dt]),ut=Ct.family,Nt=Ct.stretch,It=Ct.style,Wt=Ct.weight;it[ut]=it[ut]||{},it[ut][Nt]=it[ut][Nt]||{},it[ut][Nt][It]=it[ut][Nt][It]||{},it[ut][Nt][It][Wt]=Ct}return it}(ze.concat(we))}return se}var et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(De){se=null,et=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var we;if(this.ctx.font=De,(we=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var ze=we[1],nt=(we[2],we[3]),it=we[4],dt=(we[5],we[6]),Ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(Ct==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:Ct==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var ut=function(Mt){var kt,xt,xn=[],$t=Mt.trim();if($t==="")return OC;if($t in qI)return[qI[$t]];for(;$t!=="";){switch(xt=null,kt=($t=WI($t)).charAt(0)){case'"':case"'":xt=lie($t.substring(1),kt);break;default:xt=cie($t)}if(xt===null||(xn.push(xt[0]),($t=WI(xt[1]))!==""&&$t.charAt(0)!==","))return OC;$t=$t.replace(/^,/,"")}return xn}(dt);if(this.fontFaces){var Nt=oie(Re(this.pdf,this.fontFaces),ut.map(function(Mt){return{family:Mt,stretch:"normal",weight:nt,style:ze}}));this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var It="";(nt==="bold"||parseInt(nt,10)>=700||ze==="bold")&&(It="bold"),ze==="italic"&&(It+="italic"),It.length===0&&(It="normal");for(var Wt="",Ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ht=0;Ht<ut.length;Ht++){if(this.pdf.internal.getFont(ut[Ht],It,{noFallback:!0,disableWarning:!0})!==void 0){Wt=ut[Ht];break}if(It==="bolditalic"&&this.pdf.internal.getFont(ut[Ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=ut[Ht],It="bold";else if(this.pdf.internal.getFont(ut[Ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=ut[Ht],It="normal";break}}if(Wt===""){for(var Yt=0;Yt<ut.length;Yt++)if(Ut[ut[Yt]]){Wt=Ut[ut[Yt]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,It)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){U.call(this,"fill",!1)},h.prototype.stroke=function(){U.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,K){if(isNaN(j)||isNaN(K))throw Zr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new i(j,K));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(j,K)},h.prototype.closePath=function(){var j=new i(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Or(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){j=new i(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(j.x,j.y)},h.prototype.lineTo=function(j,K){if(isNaN(j)||isNaN(K))throw Zr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new i(j,K));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new i(X.x,X.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,K,X,te){if(isNaN(X)||isNaN(te)||isNaN(j)||isNaN(K))throw Zr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new i(X,te)),ye=this.ctx.transform.applyToPoint(new i(j,K));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:le.x,y:le.y}),this.ctx.lastPoint=new i(le.x,le.y)},h.prototype.bezierCurveTo=function(j,K,X,te,le,ye){if(isNaN(le)||isNaN(ye)||isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw Zr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new i(le,ye)),_e=this.ctx.transform.applyToPoint(new i(j,K)),Ie=this.ctx.transform.applyToPoint(new i(X,te));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Ie.x,y2:Ie.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new i(Ce.x,Ce.y)},h.prototype.arc=function(j,K,X,te,le,ye){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te)||isNaN(le))throw Zr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new i(j,K));j=Ce.x,K=Ce.y;var _e=this.ctx.transform.applyToPoint(new i(0,X)),Ie=this.ctx.transform.applyToPoint(new i(0,0));X=Math.sqrt(Math.pow(_e.x-Ie.x,2)+Math.pow(_e.y-Ie.y,2))}Math.abs(le-te)>=2*Math.PI&&(te=0,le=2*Math.PI),this.path.push({type:"arc",x:j,y:K,radius:X,startAngle:te,endAngle:le,counterclockwise:ye})},h.prototype.arcTo=function(j,K,X,te,le){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw Zr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,K),this.lineTo(j+X,K),this.lineTo(j+X,K+te),this.lineTo(j,K+te),this.lineTo(j,K),this.lineTo(j+X,K),this.lineTo(j,K)},h.prototype.fillRect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw Zr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,K,X,te),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},h.prototype.strokeRect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw Zr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(j,K,X,te),this.stroke())},h.prototype.clearRect=function(j,K,X,te){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te))throw Zr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,K,X,te))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(K),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(j){var K,X,te,le;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))K=0,X=0,te=0,le=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(ye!==null)K=parseInt(ye[1]),X=parseInt(ye[2]),te=parseInt(ye[3]),le=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)K=parseInt(ye[1]),X=parseInt(ye[2]),te=parseInt(ye[3]),le=parseFloat(ye[4]);else{if(le=1,typeof j=="string"&&j.charAt(0)!=="#"){var Ce=new AM(j);j=Ce.ok?Ce.toHex():"#000000"}j.length===4?(K=j.substring(1,2),K+=K,X=j.substring(2,3),X+=X,te=j.substring(3,4),te+=te):(K=j.substring(1,3),X=j.substring(3,5),te=j.substring(5,7)),K=parseInt(K,16),X=parseInt(X,16),te=parseInt(te,16)}}return{r:K,g:X,b:te,a:le,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,K,X,te){if(isNaN(K)||isNaN(X)||typeof j!="string")throw Zr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var le=ae(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;L.call(this,{text:j,x:K,y:X,scale:ye,angle:le,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(j,K,X,te){if(isNaN(K)||isNaN(X)||typeof j!="string")throw Zr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var le=ae(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;L.call(this,{text:j,x:K,y:X,scale:ye,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(j){if(typeof j!="string")throw Zr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,X=this.pdf.internal.scaleFactor,te=K.internal.getFontSize(),le=K.getStringUnitWidth(j)*te/K.internal.scaleFactor,ye=function(Ce){var _e=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this};return new ye({width:le*=Math.round(96*X/72*1e4)/1e4})},h.prototype.scale=function(j,K){if(isNaN(j)||isNaN(K))throw Zr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new l(j,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.rotate=function(j){if(isNaN(j))throw Zr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.translate=function(j,K){if(isNaN(j)||isNaN(K))throw Zr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new l(1,0,0,1,j,K);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.transform=function(j,K,X,te,le,ye){if(isNaN(j)||isNaN(K)||isNaN(X)||isNaN(te)||isNaN(le)||isNaN(ye))throw Zr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new l(j,K,X,te,le,ye);this.ctx.transform=this.ctx.transform.multiply(Ce)},h.prototype.setTransform=function(j,K,X,te,le,ye){j=isNaN(j)?1:j,K=isNaN(K)?0:K,X=isNaN(X)?0:X,te=isNaN(te)?1:te,le=isNaN(le)?0:le,ye=isNaN(ye)?0:ye,this.ctx.transform=new l(j,K,X,te,le,ye)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,K,X,te,le,ye,Ce,_e,Ie){var xe=this.pdf.getImageProperties(j),se=1,Re=1,et=1,De=1;te!==void 0&&_e!==void 0&&(et=_e/te,De=Ie/le,se=xe.width/te*_e/te,Re=xe.height/le*Ie/le),ye===void 0&&(ye=K,Ce=X,K=0,X=0),te!==void 0&&_e===void 0&&(_e=te,Ie=le),te===void 0&&_e===void 0&&(_e=xe.width,Ie=xe.height);for(var we,ze=this.ctx.transform.decompose(),nt=ae(ze.rotate.shx),it=new l,dt=(it=(it=(it=it.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new o(ye-K*et,Ce-X*De,te*se,le*Re)),Ct=E.call(this,dt),ut=[],Nt=0;Nt<Ct.length;Nt+=1)ut.indexOf(Ct[Nt])===-1&&ut.push(Ct[Nt]);if(k(ut),this.autoPaging)for(var It=ut[0],Wt=ut[ut.length-1],Ut=It;Ut<Wt+1;Ut++){this.pdf.setPage(Ut);var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Yt=Ut===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Ut===1?0:Mt+(Ut-2)*kt;if(this.ctx.clip_path.length!==0){var xn=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(we,this.posX+this.margin[3],-xt+Yt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=xn}var $t=JSON.parse(JSON.stringify(dt));$t=I([$t],this.posX+this.margin[3],-xt+Yt+this.ctx.prevPageLastElemOffset)[0];var ir=(Ut>It||Ut<Wt)&&w.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,kt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",$t.x,$t.y,$t.w,$t.h,null,null,nt),ir&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,nt)};var E=function(j,K,X){var te=[];K=K||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":te.push(Math.floor((j.y+le)/X)+1);break;case"arc":te.push(Math.floor((j.y+le-j.radius)/X)+1),te.push(Math.floor((j.y+le+j.radius)/X)+1);break;case"qct":var ye=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);te.push(Math.floor((ye.y+le)/X)+1),te.push(Math.floor((ye.y+ye.h+le)/X)+1);break;case"bct":var Ce=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);te.push(Math.floor((Ce.y+le)/X)+1),te.push(Math.floor((Ce.y+Ce.h+le)/X)+1);break;case"rect":te.push(Math.floor((j.y+le)/X)+1),te.push(Math.floor((j.y+j.h+le)/X)+1)}for(var _e=0;_e<te.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<te[_e];)N.call(this);return te},N=function(){var j=this.fillStyle,K=this.strokeStyle,X=this.font,te=this.lineCap,le=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=K,this.font=X,this.lineCap=te,this.lineWidth=le,this.lineJoin=ye},I=function(j,K,X){for(var te=0;te<j.length;te++)switch(j[te].type){case"bct":j[te].x2+=K,j[te].y2+=X;case"qct":j[te].x1+=K,j[te].y1+=X;case"mt":case"lt":case"arc":default:j[te].x+=K,j[te].y+=X}return j},k=function(j){return j.sort(function(K,X){return K-X})},U=function(j,K){for(var X,te,le=this.fillStyle,ye=this.strokeStyle,Ce=this.lineCap,_e=this.lineWidth,Ie=Math.abs(_e*this.ctx.transform.scaleX),xe=this.lineJoin,se=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),et=[],De=0;De<Re.length;De++)if(Re[De].x!==void 0)for(var we=E.call(this,Re[De]),ze=0;ze<we.length;ze+=1)et.indexOf(we[ze])===-1&&et.push(we[ze]);for(var nt=0;nt<et.length;nt++)for(;this.pdf.internal.getNumberOfPages()<et[nt];)N.call(this);if(k(et),this.autoPaging)for(var it=et[0],dt=et[et.length-1],Ct=it;Ct<dt+1;Ct++){this.pdf.setPage(Ct),this.fillStyle=le,this.strokeStyle=ye,this.lineCap=Ce,this.lineWidth=Ie,this.lineJoin=xe;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=Ct===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Ct===1?0:It+(Ct-2)*Wt;if(this.ctx.clip_path.length!==0){var Ht=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(X,this.posX+this.margin[3],-Ut+Nt+this.ctx.prevPageLastElemOffset),P.call(this,j,!0),this.path=Ht}if(te=JSON.parse(JSON.stringify(se)),this.path=I(te,this.posX+this.margin[3],-Ut+Nt+this.ctx.prevPageLastElemOffset),K===!1||Ct===0){var Yt=(Ct>it||Ct<dt)&&w.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Wt,null).clip().discardPath()),P.call(this,j,K),Yt&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}else this.lineWidth=Ie,P.call(this,j,K),this.lineWidth=_e;this.path=se},P=function(j,K){if((j!=="stroke"||K||!b.call(this))&&(j==="stroke"||K||!g.call(this))){for(var X,te,le=[],ye=this.path,Ce=0;Ce<ye.length;Ce++){var _e=ye[Ce];switch(_e.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:_e,deltas:[],abs:[]});break;case"lt":var Ie=le.length;if(ye[Ce-1]&&!isNaN(ye[Ce-1].x)&&(X=[_e.x-ye[Ce-1].x,_e.y-ye[Ce-1].y],Ie>0)){for(;Ie>=0;Ie--)if(le[Ie-1].close!==!0&&le[Ie-1].begin!==!0){le[Ie-1].deltas.push(X),le[Ie-1].abs.push(_e);break}}break;case"bct":X=[_e.x1-ye[Ce-1].x,_e.y1-ye[Ce-1].y,_e.x2-ye[Ce-1].x,_e.y2-ye[Ce-1].y,_e.x-ye[Ce-1].x,_e.y-ye[Ce-1].y],le[le.length-1].deltas.push(X);break;case"qct":var xe=ye[Ce-1].x+2/3*(_e.x1-ye[Ce-1].x),se=ye[Ce-1].y+2/3*(_e.y1-ye[Ce-1].y),Re=_e.x+2/3*(_e.x1-_e.x),et=_e.y+2/3*(_e.y1-_e.y),De=_e.x,we=_e.y;X=[xe-ye[Ce-1].x,se-ye[Ce-1].y,Re-ye[Ce-1].x,et-ye[Ce-1].y,De-ye[Ce-1].x,we-ye[Ce-1].y],le[le.length-1].deltas.push(X);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(_e)}}te=K?null:j==="stroke"?"stroke":"fill";for(var ze=!1,nt=0;nt<le.length;nt++)if(le[nt].arc)for(var it=le[nt].abs,dt=0;dt<it.length;dt++){var Ct=it[dt];Ct.type==="arc"?B.call(this,Ct.x,Ct.y,Ct.radius,Ct.startAngle,Ct.endAngle,Ct.counterclockwise,void 0,K,!ze):Q.call(this,Ct.x,Ct.y),ze=!0}else if(le[nt].close===!0)this.pdf.internal.out("h"),ze=!1;else if(le[nt].begin!==!0){var ut=le[nt].start.x,Nt=le[nt].start.y;z.call(this,le[nt].deltas,ut,Nt),ze=!0}te&&T.call(this,te),K&&O.call(this)}},D=function(j){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-X;case"top":return j+K-X;case"hanging":return j+K-2*X;case"middle":return j+K/2-X;case"ideographic":return j;case"alphabetic":default:return j}},_=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(K,X){this.colorStops.push([K,X])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(j,K,X,te,le,ye,Ce,_e,Ie){for(var xe=J.call(this,X,te,le,ye),se=0;se<xe.length;se++){var Re=xe[se];se===0&&(Ie?R.call(this,Re.x1+j,Re.y1+K):Q.call(this,Re.x1+j,Re.y1+K)),ie.call(this,j,K,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}_e?O.call(this):T.call(this,Ce)},T=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(j,K){this.pdf.internal.out(n(j)+" "+r(K)+" m")},L=function(j){var K;switch(j.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var X=this.pdf.getTextDimensions(j.text),te=D.call(this,j.y),le=_.call(this,te)-X.h,ye=this.ctx.transform.applyToPoint(new i(j.x,te)),Ce=this.ctx.transform.decompose(),_e=new l;_e=(_e=(_e=_e.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var Ie,xe,se,Re=this.ctx.transform.applyToRectangle(new o(j.x,te,X.w,X.h)),et=_e.applyToRectangle(new o(j.x,le,X.w,X.h)),De=E.call(this,et),we=[],ze=0;ze<De.length;ze+=1)we.indexOf(De[ze])===-1&&we.push(De[ze]);if(k(we),this.autoPaging)for(var nt=we[0],it=we[we.length-1],dt=nt;dt<it+1;dt++){this.pdf.setPage(dt);var Ct=dt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],It=Nt-this.margin[0],Wt=this.pdf.internal.pageSize.width-this.margin[1],Ut=Wt-this.margin[3],Ht=dt===1?0:ut+(dt-2)*It;if(this.ctx.clip_path.length!==0){var Yt=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Ie,this.posX+this.margin[3],-1*Ht+Ct),P.call(this,"fill",!0),this.path=Yt}var Mt=I([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-Ht+Ct+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*j.scale),se=this.lineWidth,this.lineWidth=se*j.scale);var kt=this.autoPaging!=="text";if(kt||Mt.y+Mt.h<=Nt){if(kt||Mt.y>=Ct&&Mt.x<=Wt){var xt=kt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Wt-Mt.x)[0],xn=I([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Ht+Ct+this.ctx.prevPageLastElemOffset)[0],$t=kt&&(dt>nt||dt<it)&&w.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,It,null).clip().discardPath()),this.pdf.text(xt,xn.x,xn.y,{angle:j.angle,align:K,renderingMode:j.renderingMode}),$t&&this.pdf.restoreGraphicsState()}}else Mt.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-Mt.y);j.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=se)}else j.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*j.scale),se=this.lineWidth,this.lineWidth=se*j.scale),this.pdf.text(j.text,ye.x+this.posX,ye.y+this.posY,{angle:j.angle,align:K,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=se)},Q=function(j,K,X,te){X=X||0,te=te||0,this.pdf.internal.out(n(j+X)+" "+r(K+te)+" l")},z=function(j,K,X){return this.pdf.lines(j,K,X,null,null)},ie=function(j,K,X,te,le,ye,Ce,_e){this.pdf.internal.out([e(a(X+j)),e(s(te+K)),e(a(le+j)),e(s(ye+K)),e(a(Ce+j)),e(s(_e+K)),"c"].join(" "))},J=function(j,K,X,te){for(var le=2*Math.PI,ye=Math.PI/2;K>X;)K-=le;var Ce=Math.abs(X-K);Ce<le&&te&&(Ce=le-Ce);for(var _e=[],Ie=te?-1:1,xe=K;Ce>1e-5;){var se=xe+Ie*Math.min(Ce,ye);_e.push(ee.call(this,j,xe,se)),Ce-=Math.abs(se-xe),xe=se}return _e},ee=function(j,K,X){var te=(X-K)/2,le=j*Math.cos(te),ye=j*Math.sin(te),Ce=le,_e=-ye,Ie=Ce*Ce+_e*_e,xe=Ie+Ce*le+_e*ye,se=4/3*(Math.sqrt(2*Ie*xe)-xe)/(Ce*ye-_e*le),Re=Ce-se*_e,et=_e+se*Ce,De=Re,we=-et,ze=te+K,nt=Math.cos(ze),it=Math.sin(ze);return{x1:j*Math.cos(K),y1:j*Math.sin(K),x2:Re*nt-et*it,y2:Re*it+et*nt,x3:De*nt-we*it,y3:De*it+we*nt,x4:j*Math.cos(X),y4:j*Math.sin(X)}},ae=function(j){return 180*j/Math.PI},q=function(j,K,X,te,le,ye){var Ce=j+.5*(X-j),_e=K+.5*(te-K),Ie=le+.5*(X-le),xe=ye+.5*(te-ye),se=Math.min(j,le,Ce,Ie),Re=Math.max(j,le,Ce,Ie),et=Math.min(K,ye,_e,xe),De=Math.max(K,ye,_e,xe);return new o(se,et,Re-se,De-et)},Y=function(j,K,X,te,le,ye,Ce,_e){var Ie,xe,se,Re,et,De,we,ze,nt,it,dt,Ct,ut,Nt,It=X-j,Wt=te-K,Ut=le-X,Ht=ye-te,Yt=Ce-le,Mt=_e-ye;for(xe=0;xe<41;xe++)nt=(we=(se=j+(Ie=xe/40)*It)+Ie*((et=X+Ie*Ut)-se))+Ie*(et+Ie*(le+Ie*Yt-et)-we),it=(ze=(Re=K+Ie*Wt)+Ie*((De=te+Ie*Ht)-Re))+Ie*(De+Ie*(ye+Ie*Mt-De)-ze),xe==0?(dt=nt,Ct=it,ut=nt,Nt=it):(dt=Math.min(dt,nt),Ct=Math.min(Ct,it),ut=Math.max(ut,nt),Nt=Math.max(Nt,it));return new o(Math.round(dt),Math.round(Ct),Math.round(ut-dt),Math.round(Nt-Ct))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,K,X=(j=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:K}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(sn.API),function(t){var e=function(s){var i,o,l,u,d,h,m,g,b,w;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(w=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,g+33,b+33,w+33)):o.push(122);return function(E,N){for(var I=N;I>0;I--)E.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},n=function(s){var i,o,l,u,d,h=String,m="length",g=255,b="charCodeAt",w="slice",E="replace";for(s[w](-2),s=s[w](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[w](s[m]%5||5))[m];d>u;u+=5)o=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(N,I){for(var k=I;k>0;k--)N.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},r=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=j_(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(sn.API),function(t){t.loadFile=function(e,n,r){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,m=0,g=function(b){var w=b.length,E=[],N=String.fromCharCode;for(m=0;m<w;m+=1)E.push(N(255&b.charCodeAt(m)));return E.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(a,s,i)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(sn.API),function(t){function e(){return(yn.html2canvas?Promise.resolve(yn.html2canvas):D_(()=>Promise.resolve().then(()=>Nbe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function n(){return(yn.DOMPurify?Promise.resolve(yn.DOMPurify):D_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var o=Or(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(n).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],b=g.src.find(function(w){return w.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(r(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||sn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,sn.getPageSize=function(i,o,l){if(Or(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,w=0;if(m.hasOwnProperty(h))b=m[h][1]/d,w=m[h][0]/d;else try{b=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",w>b&&(g=w,w=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>w&&(g=w,w=b,b=g)}return{width:w,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(G_):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(sn.API),sn.API.addJS=function(t){return JI=t,this.internal.events.subscribe("postPutResources",function(){dv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(dv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),$I=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+JI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){dv!==void 0&&$I!==void 0&&this.internal.out("/Names <</JavaScript "+dv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=r.exec(i);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var h=n.internal.newObject();d.push(h);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,s){var i={title:a,options:s,children:[]};return r==null&&(r=this.root),r.children.push(i),i},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var i=r.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=n.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var s=0;s<a.children.length;s++)r.count++,this.count_r(r,a.children[s]);return r.count}}])}(sn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=i||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,w={width:0,height:0,numcomponents:1},E=4;E<b;E+=2){if(E+=g,e.indexOf(h.charCodeAt(E+1))!==-1){m=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),w={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:m,numcomponents:h.charCodeAt(E+9)};break}g=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:a}}return d}}(sn.API);var w0,fv,YI,XI,ZI,uie=function(){var t,e,n;function r(s){var i,o,l,u,d,h,m,g,b,w,E,N,I,k;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var U,P;for(P=[],U=0;U<4;++U)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),s=(h!=null?h.data:void 0)||this.imgData,N=0;0<=i?N<i:N>i;0<=i?++N:--N)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(I=0;0<=w?I<w:I>w;0<=w?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(E=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,E.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(h,m,g,b){var w,E,N,I,k,U,P,D,_,B,T,O,R,L,Q,z,ie,J,ee,ae,q,Y=Math.ceil((u.width-h)/g),Ae=Math.ceil((u.height-m)/b),j=u.width==Y&&u.height==Ae;for(L=i*Y,O=j?o:new Uint8Array(L*Ae),U=s.length,R=0,E=0;R<Ae&&l<U;){switch(s[l++]){case 0:for(I=ie=0;ie<L;I=ie+=1)O[E++]=s[l++];break;case 1:for(I=J=0;J<L;I=J+=1)w=s[l++],k=I<i?0:O[E-i],O[E++]=(w+k)%256;break;case 2:for(I=ee=0;ee<L;I=ee+=1)w=s[l++],N=(I-I%i)/i,Q=R&&O[(R-1)*L+N*i+I%i],O[E++]=(Q+w)%256;break;case 3:for(I=ae=0;ae<L;I=ae+=1)w=s[l++],N=(I-I%i)/i,k=I<i?0:O[E-i],Q=R&&O[(R-1)*L+N*i+I%i],O[E++]=(w+Math.floor((k+Q)/2))%256;break;case 4:for(I=q=0;q<L;I=q+=1)w=s[l++],N=(I-I%i)/i,k=I<i?0:O[E-i],R===0?Q=z=0:(Q=O[(R-1)*L+N*i+I%i],z=N&&O[(R-1)*L+(N-1)*i+I%i]),P=k+Q-z,D=Math.abs(P-k),B=Math.abs(P-Q),T=Math.abs(P-z),_=D<=B&&D<=T?k:B<=T?Q:z,O[E++]=(w+_)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!j){var K=((m+R*b)*u.width+h)*i,X=R*L;for(I=0;I<Y;I+=1){for(var te=0;te<i;te+=1)o[K++]=O[X++];K+=(g-1)*i}}R++}}return s=Hse(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var s,i,o,l,u,d,h,m,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=h=0,m=o.length;h<m;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(g=d[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,i){var o,l,u,d,h,m,g,b,w,E,N;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=s.data||s).length,h=w||i,d=m=0,l===1)for(;d<b;)g=w?4*i[d/4]:m,E=h[g++],u[d++]=E,u[d++]=E,u[d++]=E,u[d++]=o?h[g++]:255,m=g;else for(;d<b;)g=w?4*i[d/4]:m,u[d++]=h[g++],u[d++]=h[g++],u[d++]=h[g++],u[d++]=o?h[g++]:255,m=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(yn)==="[object Window]"){try{e=yn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(s){var i;if(a()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var i,o,l,u,d,h,m,g;if(this.animation){for(g=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,g.push(i.image=t(l));return g}},r.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var i,o,l,u,d,h,m=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%u,b=l[g],m.renderFrame(s,g),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,b.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Aie(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<(7&a)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,m=null,g=0,b=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&w)==0&&(m=null),g=w>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,U=t[e++],P=U>>6&1,D=1<<(7&U)+1,_=o,B=l,T=!1;U>>7&&(T=!0,_=e,B=D,e+=3*D);var O=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:E,y:N,width:I,height:k,has_local_palette:T,palette_offset:_,palette_size:B,data_offset:O,data_length:e-O,transparent_index:m,interlaced:!!P,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(L){if(L<0||L>=d.length)throw new Error("Frame index out of range.");return d[L]},this.decodeAndBlitFrameBGRA=function(L,Q){var z=this.frameInfo(L),ie=z.width*z.height,J=new Uint8Array(ie);eF(t,z.data_offset,J,ie);var ee=z.palette_offset,ae=z.transparent_index;ae===null&&(ae=256);var q=z.width,Y=n-q,Ae=q,j=4*(z.y*n+z.x),K=4*((z.y+z.height)*n+z.x),X=j,te=4*Y;z.interlaced===!0&&(te+=4*n*7);for(var le=8,ye=0,Ce=J.length;ye<Ce;++ye){var _e=J[ye];if(Ae===0&&(Ae=q,(X+=te)>=K&&(te=4*Y+4*n*(le-1),X=j+(q+Y)*(le<<1),le>>=1)),_e===ae)X+=4;else{var Ie=t[ee+3*_e],xe=t[ee+3*_e+1],se=t[ee+3*_e+2];Q[X++]=se,Q[X++]=xe,Q[X++]=Ie,Q[X++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(L,Q){var z=this.frameInfo(L),ie=z.width*z.height,J=new Uint8Array(ie);eF(t,z.data_offset,J,ie);var ee=z.palette_offset,ae=z.transparent_index;ae===null&&(ae=256);var q=z.width,Y=n-q,Ae=q,j=4*(z.y*n+z.x),K=4*((z.y+z.height)*n+z.x),X=j,te=4*Y;z.interlaced===!0&&(te+=4*n*7);for(var le=8,ye=0,Ce=J.length;ye<Ce;++ye){var _e=J[ye];if(Ae===0&&(Ae=q,(X+=te)>=K&&(te=4*Y+4*n*(le-1),X=j+(q+Y)*(le<<1),le>>=1)),_e===ae)X+=4;else{var Ie=t[ee+3*_e],xe=t[ee+3*_e+1],se=t[ee+3*_e+2];Q[X++]=Ie,Q[X++]=xe,Q[X++]=se,Q[X++]=255}--Ae}}}function eF(t,e,n,r){for(var a=t[e++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,h=0,m=0,g=t[e++],b=new Int32Array(4096),w=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var E=h&u;if(h>>=l,d-=l,E!==s){if(E===i)break;for(var N=E<o?E:w,I=0,k=N;k>s;)k=b[k]>>8,++I;var U=k;if(m+I+(N!==E?1:0)>r)return void Zr.log("Warning, gif stream longer than expected.");n[m++]=U;var P=m+=I;for(N!==E&&(n[m++]=U),k=N;I--;)k=b[k],n[--P]=255&k,k>>=8;w!==null&&o<4096&&(b[o++]=w<<8|U,o>=u+1&&l<12&&(++l,u=u<<1|1)),w=E}else o=i+1,u=(1<<(l=a+1))-1,w=null}return m!==r&&Zr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function QC(t){var e,n,r,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),w=[],E=0,N=7,I=new Array(64),k=new Array(64),U=new Array(64),P=new Array(256),D=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(j,K){for(var X=0,te=0,le=new Array,ye=1;ye<=16;ye++){for(var Ce=1;Ce<=j[ye];Ce++)le[K[te]]=[],le[K[te]][0]=X,le[K[te]][1]=ye,te++,X++;X*=2}return le}function ee(j){for(var K=j[0],X=j[1]-1;X>=0;)K&1<<X&&(E|=1<<N),X--,--N<0&&(E==255?(ae(255),ae(0)):ae(E),N=7,E=0)}function ae(j){w.push(j)}function q(j){ae(j>>8&255),ae(255&j)}function Y(j,K,X,te,le){for(var ye,Ce=le[0],_e=le[240],Ie=function(it,dt){var Ct,ut,Nt,It,Wt,Ut,Ht,Yt,Mt,kt,xt=0;for(Mt=0;Mt<8;++Mt){Ct=it[xt],ut=it[xt+1],Nt=it[xt+2],It=it[xt+3],Wt=it[xt+4],Ut=it[xt+5],Ht=it[xt+6];var xn=Ct+(Yt=it[xt+7]),$t=Ct-Yt,ir=ut+Ht,mn=ut-Ht,Fn=Nt+Ut,Tr=Nt-Ut,Bn=It+Wt,rs=It-Wt,Xn=xn+Bn,Yr=xn-Bn,ua=ir+Fn,Dn=ir-Fn;it[xt]=Xn+ua,it[xt+4]=Xn-ua;var en=.707106781*(Dn+Yr);it[xt+2]=Yr+en,it[xt+6]=Yr-en;var On=.382683433*((Xn=rs+Tr)-(Dn=mn+$t)),as=.5411961*Xn+On,Vr=1.306562965*Dn+On,pa=.707106781*(ua=Tr+mn),ws=$t+pa,Qt=$t-pa;it[xt+5]=Qt+as,it[xt+3]=Qt-as,it[xt+1]=ws+Vr,it[xt+7]=ws-Vr,xt+=8}for(xt=0,Mt=0;Mt<8;++Mt){Ct=it[xt],ut=it[xt+8],Nt=it[xt+16],It=it[xt+24],Wt=it[xt+32],Ut=it[xt+40],Ht=it[xt+48];var or=Ct+(Yt=it[xt+56]),Zn=Ct-Yt,Br=ut+Ht,Rr=ut-Ht,zr=Nt+Ut,de=Nt-Ut,Be=It+Wt,be=It-Wt,Ee=or+Be,Se=or-Be,Ne=Br+zr,qe=Br-zr;it[xt]=Ee+Ne,it[xt+32]=Ee-Ne;var tt=.707106781*(qe+Se);it[xt+16]=Se+tt,it[xt+48]=Se-tt;var Qe=.382683433*((Ee=be+de)-(qe=Rr+Zn)),We=.5411961*Ee+Qe,Ye=1.306562965*qe+Qe,yt=.707106781*(Ne=de+Rr),Bt=Zn+yt,Pt=Zn-yt;it[xt+40]=Pt+We,it[xt+24]=Pt-We,it[xt+8]=Bt+Ye,it[xt+56]=Bt-Ye,xt++}for(Mt=0;Mt<64;++Mt)kt=it[Mt]*dt[Mt],g[Mt]=kt>0?kt+.5|0:kt-.5|0;return g}(j,K),xe=0;xe<64;++xe)b[_[xe]]=Ie[xe];var se=b[0]-X;X=b[0],se==0?ee(te[0]):(ee(te[m[ye=32767+se]]),ee(h[ye]));for(var Re=63;Re>0&&b[Re]==0;)Re--;if(Re==0)return ee(Ce),X;for(var et,De=1;De<=Re;){for(var we=De;b[De]==0&&De<=Re;)++De;var ze=De-we;if(ze>=16){et=ze>>4;for(var nt=1;nt<=et;++nt)ee(_e);ze&=15}ye=32767+b[De],ee(le[(ze<<4)+m[ye]]),ee(h[ye]),De++}return Re!=63&&ee(Ce),X}function Ae(j){j=Math.min(Math.max(j,1),100),s!=j&&(function(K){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var le=i((X[te]*K+50)/100);le=Math.min(Math.max(le,1),255),o[_[te]]=le}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var _e=i((ye[Ce]*K+50)/100);_e=Math.min(Math.max(_e,1),255),l[_[Ce]]=_e}for(var Ie=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,se=0;se<8;se++)for(var Re=0;Re<8;Re++)u[xe]=1/(o[_[xe]]*Ie[se]*Ie[Re]*8),d[xe]=1/(l[_[xe]]*Ie[se]*Ie[Re]*8),xe++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),s=j)}this.encode=function(j,K){K&&Ae(K),w=new Array,E=0,N=7,q(65496),q(65504),q(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),q(1),q(1),ae(0),ae(0),function(){q(65499),q(132),ae(0);for(var ut=0;ut<64;ut++)ae(o[ut]);ae(1);for(var Nt=0;Nt<64;Nt++)ae(l[Nt])}(),function(ut,Nt){q(65472),q(17),ae(8),q(Nt),q(ut),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)}(j.width,j.height),function(){q(65476),q(418),ae(0);for(var ut=0;ut<16;ut++)ae(B[ut+1]);for(var Nt=0;Nt<=11;Nt++)ae(T[Nt]);ae(16);for(var It=0;It<16;It++)ae(O[It+1]);for(var Wt=0;Wt<=161;Wt++)ae(R[Wt]);ae(1);for(var Ut=0;Ut<16;Ut++)ae(L[Ut+1]);for(var Ht=0;Ht<=11;Ht++)ae(Q[Ht]);ae(17);for(var Yt=0;Yt<16;Yt++)ae(z[Yt+1]);for(var Mt=0;Mt<=161;Mt++)ae(ie[Mt])}(),q(65498),q(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var X=0,te=0,le=0;E=0,N=7,this.encode.displayName="_encode_";for(var ye,Ce,_e,Ie,xe,se,Re,et,De,we=j.data,ze=j.width,nt=j.height,it=4*ze,dt=0;dt<nt;){for(ye=0;ye<it;){for(xe=it*dt+ye,Re=-1,et=0,De=0;De<64;De++)se=xe+(et=De>>3)*it+(Re=4*(7&De)),dt+et>=nt&&(se-=it*(dt+1+et-nt)),ye+Re>=it&&(se-=ye+Re-it+4),Ce=we[se++],_e=we[se++],Ie=we[se++],I[De]=(D[Ce]+D[_e+256>>0]+D[Ie+512>>0]>>16)-128,k[De]=(D[Ce+768>>0]+D[_e+1024>>0]+D[Ie+1280>>0]>>16)-128,U[De]=(D[Ce+1280>>0]+D[_e+1536>>0]+D[Ie+1792>>0]>>16)-128;X=Y(I,u,X,e,r),te=Y(k,d,te,n,a),le=Y(U,d,le,n,a),ye+=32}dt+=8}if(N>=0){var Ct=[];Ct[1]=N+1,Ct[0]=(1<<N+1)-1,ee(Ct)}return q(65497),new Uint8Array(w)},t=t||50,function(){for(var j=String.fromCharCode,K=0;K<256;K++)P[K]=j(K)}(),e=J(B,T),n=J(L,Q),r=J(O,R),a=J(z,ie),function(){for(var j=1,K=2,X=1;X<=15;X++){for(var te=j;te<K;te++)m[32767+te]=X,h[32767+te]=[],h[32767+te][1]=X,h[32767+te][0]=te;for(var le=-(K-1);le<=-j;le++)m[32767+le]=X,h[32767+le]=[],h[32767+le][1]=X,h[32767+le][0]=K-1+le;j<<=1,K<<=1}}(),function(){for(var j=0;j<256;j++)D[j]=19595*j,D[j+256>>0]=38470*j,D[j+512>>0]=7471*j+32768,D[j+768>>0]=-11059*j,D[j+1024>>0]=-21709*j,D[j+1280>>0]=32768*j+8421375,D[j+1536>>0]=-27439*j,D[j+1792>>0]=-5329*j}(),Ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function mc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tF(t){function e(B){if(!B)throw Error("assert :P")}function n(B,T,O){for(var R=0;4>R;R++)if(B[T+R]!=O.charCodeAt(R))return!0;return!1}function r(B,T,O,R,L){for(var Q=0;Q<L;Q++)B[T+Q]=O[R+Q]}function a(B,T,O,R){for(var L=0;L<R;L++)B[T+L]=O}function s(B){return new Int32Array(B)}function i(B,T){for(var O=[],R=0;R<B;R++)O.push(new T);return O}function o(B,T){var O=[];return function R(L,Q,z){for(var ie=z[Q],J=0;J<ie&&(L.push(z.length>Q+1?[]:new T),!(z.length<Q+1));J++)R(L[J],Q+1,z)}(O,0,B),O}var l=function(){var B=this;function T(C,M){for(var G=1<<M-1>>>0;C&G;)G>>>=1;return G?(C&G-1)+G:C}function O(C,M,G,ne,ce){e(!(ne%G));do C[M+(ne-=G)]=ce;while(0<ne)}function R(C,M,G,ne,ce){if(e(2328>=ce),512>=ce)var fe=s(512);else if((fe=s(ce))==null)return 0;return function(he,me,ve,Te,Ue,Je){var Ke,Ve,gt=me,st=1<<ve,Me=s(16),je=s(16);for(e(Ue!=0),e(Te!=null),e(he!=null),e(0<ve),Ve=0;Ve<Ue;++Ve){if(15<Te[Ve])return 0;++Me[Te[Ve]]}if(Me[0]==Ue)return 0;for(je[1]=0,Ke=1;15>Ke;++Ke){if(Me[Ke]>1<<Ke)return 0;je[Ke+1]=je[Ke]+Me[Ke]}for(Ve=0;Ve<Ue;++Ve)Ke=Te[Ve],0<Te[Ve]&&(Je[je[Ke]++]=Ve);if(je[15]==1)return(Te=new L).g=0,Te.value=Je[0],O(he,gt,1,st,Te),st;var ct,vt=-1,ht=st-1,Vt=0,Lt=1,tn=1,Ot=1<<ve;for(Ve=0,Ke=1,Ue=2;Ke<=ve;++Ke,Ue<<=1){if(Lt+=tn<<=1,0>(tn-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke])(Te=new L).g=Ke,Te.value=Je[Ve++],O(he,gt+Vt,Ue,Ot,Te),Vt=T(Vt,Ke)}for(Ke=ve+1,Ue=2;15>=Ke;++Ke,Ue<<=1){if(Lt+=tn<<=1,0>(tn-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke]){if(Te=new L,(Vt&ht)!=vt){for(gt+=Ot,ct=1<<(vt=Ke)-ve;15>vt&&!(0>=(ct-=Me[vt]));)++vt,ct<<=1;st+=Ot=1<<(ct=vt-ve),he[me+(vt=Vt&ht)].g=ct+ve,he[me+vt].value=gt-me-vt}Te.g=Ke-ve,Te.value=Je[Ve++],O(he,gt+(Vt>>ve),Ue,Ot,Te),Vt=T(Vt,Ke)}}return Lt!=2*je[15]-1?0:st}(C,M,G,ne,ce,fe)}function L(){this.value=this.g=0}function Q(){this.value=this.g=0}function z(){this.G=i(5,L),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Qa,Q)}function ie(C,M,G,ne){e(C!=null),e(M!=null),e(2147483648>ne),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=M,C.pa=G,C.Jd=M,C.Yc=G+ne,C.Zc=4<=ne?G+ne-4+1:G,ye(C)}function J(C,M){for(var G=0;0<M--;)G|=_e(C,128)<<M;return G}function ee(C,M){var G=J(C,M);return Ce(C)?-G:G}function ae(C,M,G,ne){var ce,fe=0;for(e(C!=null),e(M!=null),e(4294967288>ne),C.Sb=ne,C.Ra=0,C.u=0,C.h=0,4<ne&&(ne=4),ce=0;ce<ne;++ce)fe+=M[G+ce]<<8*ce;C.Ra=fe,C.bb=ne,C.oa=M,C.pa=G}function q(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<Vu-8>>>0,++C.bb,C.u-=8;X(C)&&(C.h=1,C.u=0)}function Y(C,M){if(e(0<=M),!C.h&&M<=Hu){var G=K(C)&Hc[M];return C.u+=M,q(C),G}return C.h=1,C.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(C){return C.Ra>>>(C.u&Vu-1)>>>0}function X(C){return e(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>Vu}function te(C,M){C.u=M,C.h=X(C)}function le(C){C.u>=$A&&(e(C.u>=$A),q(C))}function ye(C){e(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(e(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function Ce(C){return J(C,1)}function _e(C,M){var G=C.Ca;0>C.b&&ye(C);var ne=C.b,ce=G*M>>>8,fe=(C.I>>>ne>ce)+0;for(fe?(G-=ce,C.I-=ce+1<<ne>>>0):G=ce+1,ne=G,ce=0;256<=ne;)ce+=8,ne>>=8;return ne=7^ce+gi[ne],C.b-=ne,C.Ca=(G<<ne)-1,fe}function Ie(C,M,G){C[M+0]=G>>24&255,C[M+1]=G>>16&255,C[M+2]=G>>8&255,C[M+3]=G>>0&255}function xe(C,M){return C[M+0]<<0|C[M+1]<<8}function se(C,M){return xe(C,M)|C[M+2]<<16}function Re(C,M){return xe(C,M)|xe(C,M+2)<<16}function et(C,M){var G=1<<M;return e(C!=null),e(0<M),C.X=s(G),C.X==null?0:(C.Mb=32-M,C.Xa=M,1)}function De(C,M){e(C!=null),e(M!=null),e(C.Xa==M.Xa),r(M.X,0,C.X,0,1<<M.Xa)}function we(){this.X=[],this.Xa=this.Mb=0}function ze(C,M,G,ne){e(G!=null),e(ne!=null);var ce=G[0],fe=ne[0];return ce==0&&(ce=(C*fe+M/2)/M),fe==0&&(fe=(M*ce+C/2)/C),0>=ce||0>=fe?0:(G[0]=ce,ne[0]=fe,1)}function nt(C,M){return C+(1<<M)-1>>>M}function it(C,M){return((4278255360&C)+(4278255360&M)>>>0&4278255360)+((16711935&C)+(16711935&M)>>>0&16711935)>>>0}function dt(C,M){B[M]=function(G,ne,ce,fe,he,me,ve){var Te;for(Te=0;Te<he;++Te){var Ue=B[C](me[ve+Te-1],ce,fe+Te);me[ve+Te]=it(G[ne+Te],Ue)}}}function Ct(){this.ud=this.hd=this.jd=0}function ut(C,M){return((4278124286&(C^M))>>>1)+(C&M)>>>0}function Nt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function It(C,M){return Nt(C+(C-M+.5>>1))}function Wt(C,M,G){return Math.abs(M-G)-Math.abs(C-G)}function Ut(C,M,G,ne,ce,fe,he){for(ne=fe[he-1],G=0;G<ce;++G)fe[he+G]=ne=it(C[M+G],ne)}function Ht(C,M,G,ne,ce){var fe;for(fe=0;fe<G;++fe){var he=C[M+fe],me=he>>8&255,ve=16711935&(ve=(ve=16711935&he)+((me<<16)+me));ne[ce+fe]=(4278255360&he)+ve>>>0}}function Yt(C,M){M.jd=C>>0&255,M.hd=C>>8&255,M.ud=C>>16&255}function Mt(C,M,G,ne,ce,fe){var he;for(he=0;he<ne;++he){var me=M[G+he],ve=me>>>8,Te=me,Ue=255&(Ue=(Ue=me>>>16)+((C.jd<<24>>24)*(ve<<24>>24)>>>5));Te=255&(Te=(Te=Te+((C.hd<<24>>24)*(ve<<24>>24)>>>5))+((C.ud<<24>>24)*(Ue<<24>>24)>>>5)),ce[fe+he]=(4278255360&me)+(Ue<<16)+Te}}function kt(C,M,G,ne,ce){B[M]=function(fe,he,me,ve,Te,Ue,Je,Ke,Ve){for(ve=Je;ve<Ke;++ve)for(Je=0;Je<Ve;++Je)Te[Ue++]=ce(me[ne(fe[he++])])},B[C]=function(fe,he,me,ve,Te,Ue,Je){var Ke=8>>fe.b,Ve=fe.Ea,gt=fe.K[0],st=fe.w;if(8>Ke)for(fe=(1<<fe.b)-1,st=(1<<Ke)-1;he<me;++he){var Me,je=0;for(Me=0;Me<Ve;++Me)Me&fe||(je=ne(ve[Te++])),Ue[Je++]=ce(gt[je&st]),je>>=Ke}else B["VP8LMapColor"+G](ve,Te,gt,st,Ue,Je,he,me,Ve)}}function xt(C,M,G,ne,ce){for(G=M+G;M<G;){var fe=C[M++];ne[ce++]=fe>>16&255,ne[ce++]=fe>>8&255,ne[ce++]=fe>>0&255}}function xn(C,M,G,ne,ce){for(G=M+G;M<G;){var fe=C[M++];ne[ce++]=fe>>16&255,ne[ce++]=fe>>8&255,ne[ce++]=fe>>0&255,ne[ce++]=fe>>24&255}}function $t(C,M,G,ne,ce){for(G=M+G;M<G;){var fe=(he=C[M++])>>16&240|he>>12&15,he=he>>0&240|he>>28&15;ne[ce++]=fe,ne[ce++]=he}}function ir(C,M,G,ne,ce){for(G=M+G;M<G;){var fe=(he=C[M++])>>16&248|he>>13&7,he=he>>5&224|he>>3&31;ne[ce++]=fe,ne[ce++]=he}}function mn(C,M,G,ne,ce){for(G=M+G;M<G;){var fe=C[M++];ne[ce++]=fe>>0&255,ne[ce++]=fe>>8&255,ne[ce++]=fe>>16&255}}function Fn(C,M,G,ne,ce,fe){if(fe==0)for(G=M+G;M<G;)Ie(ne,((fe=C[M++])[0]>>24|fe[1]>>8&65280|fe[2]<<8&16711680|fe[3]<<24)>>>0),ce+=32;else r(ne,ce,C,M,G)}function Tr(C,M){B[M][0]=B[C+"0"],B[M][1]=B[C+"1"],B[M][2]=B[C+"2"],B[M][3]=B[C+"3"],B[M][4]=B[C+"4"],B[M][5]=B[C+"5"],B[M][6]=B[C+"6"],B[M][7]=B[C+"7"],B[M][8]=B[C+"8"],B[M][9]=B[C+"9"],B[M][10]=B[C+"10"],B[M][11]=B[C+"11"],B[M][12]=B[C+"12"],B[M][13]=B[C+"13"],B[M][14]=B[C+"0"],B[M][15]=B[C+"0"]}function Bn(C){return C==Bf||C==Xc||C==nc||C==ZA}function rs(){this.eb=[],this.size=this.A=this.fb=0}function Xn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rs,this.f.kb=new Xn,this.sd=null}function ua(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function en(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function On(C,M){var G=C.T,ne=M.ba.f.RGBA,ce=ne.eb,fe=ne.fb+C.ka*ne.A,he=cs[M.ba.S],me=C.y,ve=C.O,Te=C.f,Ue=C.N,Je=C.ea,Ke=C.W,Ve=M.cc,gt=M.dc,st=M.Mc,Me=M.Nc,je=C.ka,ct=C.ka+C.T,vt=C.U,ht=vt+1>>1;for(je==0?he(me,ve,null,null,Te,Ue,Je,Ke,Te,Ue,Je,Ke,ce,fe,null,null,vt):(he(M.ec,M.fc,me,ve,Ve,gt,st,Me,Te,Ue,Je,Ke,ce,fe-ne.A,ce,fe,vt),++G);je+2<ct;je+=2)Ve=Te,gt=Ue,st=Je,Me=Ke,Ue+=C.Rc,Ke+=C.Rc,fe+=2*ne.A,he(me,(ve+=2*C.fa)-C.fa,me,ve,Ve,gt,st,Me,Te,Ue,Je,Ke,ce,fe-ne.A,ce,fe,vt);return ve+=C.fa,C.j+ct<C.o?(r(M.ec,M.fc,me,ve,vt),r(M.cc,M.dc,Te,Ue,ht),r(M.Mc,M.Nc,Je,Ke,ht),G--):1&ct||he(me,ve,null,null,Te,Ue,Je,Ke,Te,Ue,Je,Ke,ce,fe+ne.A,null,null,vt),G}function as(C,M,G){var ne=C.F,ce=[C.J];if(ne!=null){var fe=C.U,he=M.ba.S,me=he==Wu||he==nc;M=M.ba.f.RGBA;var ve=[0],Te=C.ka;ve[0]=C.T,C.Kb&&(Te==0?--ve[0]:(--Te,ce[0]-=C.width),C.j+C.ka+C.T==C.o&&(ve[0]=C.o-C.j-Te));var Ue=M.eb;Te=M.fb+Te*M.A,C=zn(ne,ce[0],C.width,fe,ve,Ue,Te+(me?0:3),M.A),e(G==ve),C&&Bn(he)&&Gi(Ue,Te,me,fe,ve,M.A)}return 0}function Vr(C){var M=C.ma,G=M.ba.S,ne=11>G,ce=G==XA||G==Tf||G==Wu||G==tc||G==12||Bn(G);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Qc(M.Oa,C,ce?11:12))return 0;if(ce&&Bn(G)&&_t(),C.da)alert("todo:use_scaling");else{if(ne){if(M.Ib=en,C.Kb){if(G=C.U+1>>1,M.memory=s(C.U+2*G),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+C.U,M.Mc=M.cc,M.Nc=M.dc+G,M.Ib=On,_t()}}else alert("todo:EmitYUV");ce&&(M.Jb=as,ne&&He())}if(ne&&!s1){for(C=0;256>C;++C)tb[C]=89858*(C-128)+Va>>wl,If[C]=-22014*(C-128)+Va,np[C]=-45773*(C-128),za[C]=113618*(C-128)+Va>>wl;for(C=tu;C<Xh;++C)M=76283*(C-16)+Va>>wl,Ff[C-tu]=wr(M,255),rp[C-tu]=wr(M+8>>4,15);s1=1}return 1}function pa(C){var M=C.ma,G=C.U,ne=C.T;return e(!(1&C.ka)),0>=G||0>=ne?0:(G=M.Ib(C,M),M.Jb!=null&&M.Jb(C,M,G),M.Dc+=G,1)}function ws(C){C.ma.memory=null}function Qt(C,M,G,ne){return Y(C,8)!=47?0:(M[0]=Y(C,14)+1,G[0]=Y(C,14)+1,ne[0]=Y(C,1),Y(C,3)!=0?0:!C.h)}function or(C,M){if(4>C)return C+1;var G=C-2>>1;return(2+(1&C)<<G)+Y(M,G)+1}function Zn(C,M){return 120<M?M-120:1<=(G=((G=ac[M-1])>>4)*C+(8-(15&G)))?G:1;var G}function Br(C,M,G){var ne=K(G),ce=C[M+=255&ne].g-8;return 0<ce&&(te(G,G.u+8),ne=K(G),M+=C[M].value,M+=ne&(1<<ce)-1),te(G,G.u+C[M].g),C[M].value}function Rr(C,M,G){return G.g+=C.g,G.value+=C.value<<M>>>0,e(8>=G.g),C.g}function zr(C,M,G){var ne=C.xc;return e((M=ne==0?0:C.vc[C.md*(G>>ne)+(M>>ne)])<C.Wb),C.Ya[M]}function de(C,M,G,ne){var ce=C.ab,fe=C.c*M,he=C.C;M=he+M;var me=G,ve=ne;for(ne=C.Ta,G=C.Ua;0<ce--;){var Te=C.gc[ce],Ue=he,Je=M,Ke=me,Ve=ve,gt=(ve=ne,me=G,Te.Ea);switch(e(Ue<Je),e(Je<=Te.nc),Te.hc){case 2:Gh(Ke,Ve,(Je-Ue)*gt,ve,me);break;case 0:var st=Ue,Me=Je,je=ve,ct=me,vt=(Ot=Te).Ea;st==0&&(ep(Ke,Ve,null,null,1,je,ct),Ut(Ke,Ve+1,0,0,vt-1,je,ct+1),Ve+=vt,ct+=vt,++st);for(var ht=1<<Ot.b,Vt=ht-1,Lt=nt(vt,Ot.b),tn=Ot.K,Ot=Ot.w+(st>>Ot.b)*Lt;st<Me;){var ur=tn,br=Ot,Hn=1;for(_f(Ke,Ve,je,ct-vt,1,je,ct);Hn<vt;){var Mn=(Hn&~Vt)+ht;Mn>vt&&(Mn=vt),(0,Xl[ur[br++]>>8&15])(Ke,Ve+ +Hn,je,ct+Hn-vt,Mn-Hn,je,ct+Hn),Hn=Mn}Ve+=vt,ct+=vt,++st&Vt||(Ot+=Lt)}Je!=Te.nc&&r(ve,me-gt,ve,me+(Je-Ue-1)*gt,gt);break;case 1:for(gt=Ke,Me=Ve,vt=(Ke=Te.Ea)-(ct=Ke&~(je=(Ve=1<<Te.b)-1)),st=nt(Ke,Te.b),ht=Te.K,Te=Te.w+(Ue>>Te.b)*st;Ue<Je;){for(Vt=ht,Lt=Te,tn=new Ct,Ot=Me+ct,ur=Me+Ke;Me<Ot;)Yt(Vt[Lt++],tn),zc(tn,gt,Me,Ve,ve,me),Me+=Ve,me+=Ve;Me<ur&&(Yt(Vt[Lt++],tn),zc(tn,gt,Me,vt,ve,me),Me+=vt,me+=vt),++Ue&je||(Te+=st)}break;case 3:if(Ke==ve&&Ve==me&&0<Te.b){for(Me=ve,Ke=gt=me+(Je-Ue)*gt-(ct=(Je-Ue)*nt(Te.Ea,Te.b)),Ve=ve,je=me,st=[],ct=(vt=ct)-1;0<=ct;--ct)st[ct]=Ve[je+ct];for(ct=vt-1;0<=ct;--ct)Me[Ke+ct]=st[ct];lo(Te,Ue,Je,ve,gt,ve,me)}else lo(Te,Ue,Je,Ke,Ve,ve,me)}me=ne,ve=G}ve!=G&&r(ne,G,me,ve,fe)}function Be(C,M){var G=C.V,ne=C.Ba+C.c*C.C,ce=M-C.C;if(e(M<=C.l.o),e(16>=ce),0<ce){var fe=C.l,he=C.Ta,me=C.Ua,ve=fe.width;if(de(C,ce,G,ne),ce=me=[me],e((G=C.C)<(ne=M)),e(fe.v<fe.va),ne>fe.o&&(ne=fe.o),G<fe.j){var Te=fe.j-G;G=fe.j,ce[0]+=Te*ve}if(G>=ne?G=0:(ce[0]+=4*fe.v,fe.ka=G-fe.j,fe.U=fe.va-fe.v,fe.T=ne-G,G=1),G){if(me=me[0],11>(G=C.ca).S){var Ue=G.f.RGBA,Je=(ne=G.S,ce=fe.U,fe=fe.T,Te=Ue.eb,Ue.A),Ke=fe;for(Ue=Ue.fb+C.Ma*Ue.A;0<Ke--;){var Ve=he,gt=me,st=ce,Me=Te,je=Ue;switch(ne){case Ms:Ys(Ve,gt,st,Me,je);break;case XA:Ss(Ve,gt,st,Me,je);break;case Bf:Ss(Ve,gt,st,Me,je),Gi(Me,je,0,st,1,0);break;case gl:Lo(Ve,gt,st,Me,je);break;case Tf:Fn(Ve,gt,st,Me,je,1);break;case Xc:Fn(Ve,gt,st,Me,je,1),Gi(Me,je,0,st,1,0);break;case Wu:Fn(Ve,gt,st,Me,je,0);break;case nc:Fn(Ve,gt,st,Me,je,0),Gi(Me,je,1,st,1,0);break;case tc:Gc(Ve,gt,st,Me,je);break;case ZA:Gc(Ve,gt,st,Me,je),Vn(Me,je,st,1,0);break;case Kh:xi(Ve,gt,st,Me,je);break;default:e(0)}me+=ve,Ue+=Je}C.Ma+=fe}else alert("todo:EmitRescaledRowsYUVA");e(C.Ma<=G.height)}}C.C=M,e(C.C<=C.i)}function be(C){var M;if(0<C.ua)return 0;for(M=0;M<C.Wb;++M){var G=C.Ya[M].G,ne=C.Ya[M].H;if(0<G[1][ne[1]+0].g||0<G[2][ne[2]+0].g||0<G[3][ne[3]+0].g)return 0}return 1}function Ee(C,M,G,ne,ce,fe){if(C.Z!=0){var he=C.qd,me=C.rd;for(e(vl[C.Z]!=null);M<G;++M)vl[C.Z](he,me,ne,ce,ne,ce,fe),he=ne,me=ce,ce+=fe;C.qd=he,C.rd=me}}function Se(C,M){var G=C.l.ma,ne=G.Z==0||G.Z==1?C.l.j:C.C;if(ne=C.C<ne?ne:C.C,e(M<=C.l.o),M>ne){var ce=C.l.width,fe=G.ca,he=G.tb+ce*ne,me=C.V,ve=C.Ba+C.c*ne,Te=C.gc;e(C.ab==1),e(Te[0].hc==3),Vc(Te[0],ne,M,me,ve,fe,he),Ee(G,ne,M,fe,he,ce)}C.C=C.Ma=M}function Ne(C,M,G,ne,ce,fe,he){var me=C.$/ne,ve=C.$%ne,Te=C.m,Ue=C.s,Je=G+C.$,Ke=Je;ce=G+ne*ce;var Ve=G+ne*fe,gt=280+Ue.ua,st=C.Pb?me:16777216,Me=0<Ue.ua?Ue.Wa:null,je=Ue.wc,ct=Je<Ve?zr(Ue,ve,me):null;e(C.C<fe),e(Ve<=ce);var vt=!1;e:for(;;){for(;vt||Je<Ve;){var ht=0;if(me>=st){var Vt=Je-G;e((st=C).Pb),st.wd=st.m,st.xd=Vt,0<st.s.ua&&De(st.s.Wa,st.s.vb),st=me+n1}if(ve&je||(ct=zr(Ue,ve,me)),e(ct!=null),ct.Qb&&(M[Je]=ct.qb,vt=!0),!vt)if(le(Te),ct.jc){ht=Te,Vt=M;var Lt=Je,tn=ct.pd[K(ht)&Qa-1];e(ct.jc),256>tn.g?(te(ht,ht.u+tn.g),Vt[Lt]=tn.value,ht=0):(te(ht,ht.u+tn.g-256),e(256<=tn.value),ht=tn.value),ht==0&&(vt=!0)}else ht=Br(ct.G[0],ct.H[0],Te);if(Te.h)break;if(vt||256>ht){if(!vt)if(ct.nd)M[Je]=(ct.qb|ht<<8)>>>0;else{if(le(Te),vt=Br(ct.G[1],ct.H[1],Te),le(Te),Vt=Br(ct.G[2],ct.H[2],Te),Lt=Br(ct.G[3],ct.H[3],Te),Te.h)break;M[Je]=(Lt<<24|vt<<16|ht<<8|Vt)>>>0}if(vt=!1,++Je,++ve>=ne&&(ve=0,++me,he!=null&&me<=fe&&!(me%16)&&he(C,me),Me!=null))for(;Ke<Je;)ht=M[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht}else if(280>ht){if(ht=or(ht-256,Te),Vt=Br(ct.G[4],ct.H[4],Te),le(Te),Vt=Zn(ne,Vt=or(Vt,Te)),Te.h)break;if(Je-G<Vt||ce-Je<ht)break e;for(Lt=0;Lt<ht;++Lt)M[Je+Lt]=M[Je+Lt-Vt];for(Je+=ht,ve+=ht;ve>=ne;)ve-=ne,++me,he!=null&&me<=fe&&!(me%16)&&he(C,me);if(e(Je<=ce),ve&je&&(ct=zr(Ue,ve,me)),Me!=null)for(;Ke<Je;)ht=M[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht}else{if(!(ht<gt))break e;for(vt=ht-280,e(Me!=null);Ke<Je;)ht=M[Ke++],Me.X[(506832829*ht&4294967295)>>>Me.Mb]=ht;ht=Je,e(!(vt>>>(Vt=Me).Xa)),M[ht]=Vt.X[vt],vt=!0}vt||e(Te.h==X(Te))}if(C.Pb&&Te.h&&Je<ce)e(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&De(C.s.vb,C.s.Wa);else{if(Te.h)break e;he!=null&&he(C,me>fe?fe:me),C.a=0,C.$=Je-G}return 1}return C.a=3,0}function qe(C){e(C!=null),C.vc=null,C.yc=null,C.Ya=null;var M=C.Wa;M!=null&&(M.X=null),C.vb=null,e(C!=null)}function tt(){var C=new KA;return C==null?null:(C.a=0,C.xb=ed,Tr("Predictor","VP8LPredictors"),Tr("Predictor","VP8LPredictors_C"),Tr("PredictorAdd","VP8LPredictorsAdd"),Tr("PredictorAdd","VP8LPredictorsAdd_C"),Gh=Ht,zc=Mt,Ys=xt,Ss=xn,Gc=$t,xi=ir,Lo=mn,B.VP8LMapColor32b=os,B.VP8LMapColor8b=Sf,C)}function Qe(C,M,G,ne,ce){var fe=1,he=[C],me=[M],ve=ne.m,Te=ne.s,Ue=null,Je=0;e:for(;;){if(G)for(;fe&&Y(ve,1);){var Ke=he,Ve=me,gt=ne,st=1,Me=gt.m,je=gt.gc[gt.ab],ct=Y(Me,2);if(gt.Oc&1<<ct)fe=0;else{switch(gt.Oc|=1<<ct,je.hc=ct,je.Ea=Ke[0],je.nc=Ve[0],je.K=[null],++gt.ab,e(4>=gt.ab),ct){case 0:case 1:je.b=Y(Me,3)+2,st=Qe(nt(je.Ea,je.b),nt(je.nc,je.b),0,gt,je.K),je.K=je.K[0];break;case 3:var vt,ht=Y(Me,8)+1,Vt=16<ht?0:4<ht?1:2<ht?2:3;if(Ke[0]=nt(je.Ea,Vt),je.b=Vt,vt=st=Qe(ht,1,0,gt,je.K)){var Lt,tn=ht,Ot=je,ur=1<<(8>>Ot.b),br=s(ur);if(br==null)vt=0;else{var Hn=Ot.K[0],Mn=Ot.w;for(br[0]=Ot.K[0][0],Lt=1;Lt<1*tn;++Lt)br[Lt]=it(Hn[Mn+Lt],br[Lt-1]);for(;Lt<4*ur;++Lt)br[Lt]=0;Ot.K[0]=null,Ot.K[0]=br,vt=1}}st=vt;break;case 2:break;default:e(0)}fe=st}}if(he=he[0],me=me[0],fe&&Y(ve,1)&&!(fe=1<=(Je=Y(ve,4))&&11>=Je)){ne.a=3;break e}var kr;if(kr=fe)t:{var Cr,Tn,Lr,An=ne,vn=he,cr=me,Ar=Je,us=G,Ga=An.m,va=An.s,ya=[null],Ia=1,fo=0,Er=Ju[Ar];n:for(;;){if(us&&Y(Ga,1)){var Fa=Y(Ga,3)+2,Po=nt(vn,Fa),nu=nt(cr,Fa),Zu=Po*nu;if(!Qe(Po,nu,0,An,ya))break n;for(ya=ya[0],va.xc=Fa,Cr=0;Cr<Zu;++Cr){var ru=ya[Cr]>>8&65535;ya[Cr]=ru,ru>=Ia&&(Ia=ru+1)}}if(Ga.h)break n;for(Tn=0;5>Tn;++Tn){var ea=qi[Tn];!Tn&&0<Ar&&(ea+=1<<Ar),fo<ea&&(fo=ea)}var Rf=i(Ia*Er,L),Zh=Ia,Zs=i(Zh,z);if(Zs==null)var aa=null;else e(65536>=Zh),aa=Zs;var eA=s(fo);if(aa==null||eA==null||Rf==null){An.a=1;break n}var au=Rf;for(Cr=Lr=0;Cr<Ia;++Cr){var yi=aa[Cr],su=yi.G,wi=yi.H,Df=0,nd=1,e0=0;for(Tn=0;5>Tn;++Tn){ea=qi[Tn],su[Tn]=au,wi[Tn]=Lr,!Tn&&0<Ar&&(ea+=1<<Ar);a:{var Lf,t0=ea,Uf=An,rd=eA,l1=au,c1=Lr,Mf=0,lc=Uf.m,rb=Y(lc,1);if(a(rd,0,0,t0),rb){var u1=Y(lc,1)+1,A1=Y(lc,1),ap=Y(lc,A1==0?1:8);rd[ap]=1,u1==2&&(rd[ap=Y(lc,8)]=1);var ad=1}else{var sp=s(19),ip=Y(lc,4)+4;if(19<ip){Uf.a=3;var Pf=0;break a}for(Lf=0;Lf<ip;++Lf)sp[rc[Lf]]=Y(lc,3);var n0=void 0,sd=void 0,d1=Uf,f1=sp,cc=t0,jf=rd,r0=0,jo=d1.m,id=8,op=i(128,L);r:for(;R(op,0,7,f1,19);){if(Y(jo,1)){var h1=2+2*Y(jo,3);if((n0=2+Y(jo,h1))>cc)break r}else n0=cc;for(sd=0;sd<cc&&n0--;){le(jo);var lp=op[0+(127&K(jo))];te(jo,jo.u+lp.g);var tA=lp.value;if(16>tA)jf[sd++]=tA,tA!=0&&(id=tA);else{var m1=tA==16,cp=tA-16,up=Ao[cp],Ap=Y(jo,Wh[cp])+up;if(sd+Ap>cc)break r;for(var p1=m1?id:0;0<Ap--;)jf[sd++]=p1}}r0=1;break r}r0||(d1.a=3),ad=r0}(ad=ad&&!lc.h)&&(Mf=R(l1,c1,8,rd,t0)),ad&&Mf!=0?Pf=Mf:(Uf.a=3,Pf=0)}if(Pf==0)break n;if(nd&&$u[Tn]==1&&(nd=au[Lr].g==0),Df+=au[Lr].g,Lr+=Pf,3>=Tn){var nA,a0=eA[0];for(nA=1;nA<ea;++nA)eA[nA]>a0&&(a0=eA[nA]);e0+=a0}}if(yi.nd=nd,yi.Qb=0,nd&&(yi.qb=(su[3][wi[3]+0].value<<24|su[1][wi[1]+0].value<<16|su[2][wi[2]+0].value)>>>0,Df==0&&256>su[0][wi[0]+0].value&&(yi.Qb=1,yi.qb+=su[0][wi[0]+0].value<<8)),yi.jc=!yi.Qb&&6>e0,yi.jc){var Of,uc=yi;for(Of=0;Of<Qa;++Of){var bl=Of,Ac=uc.pd[bl],Qf=uc.G[0][uc.H[0]+bl];256<=Qf.value?(Ac.g=Qf.g+256,Ac.value=Qf.value):(Ac.g=0,Ac.value=0,bl>>=Rr(Qf,8,Ac),bl>>=Rr(uc.G[1][uc.H[1]+bl],16,Ac),bl>>=Rr(uc.G[2][uc.H[2]+bl],0,Ac),Rr(uc.G[3][uc.H[3]+bl],24,Ac))}}}va.vc=ya,va.Wb=Ia,va.Ya=aa,va.yc=Rf,kr=1;break t}kr=0}if(!(fe=kr)){ne.a=3;break e}if(0<Je){if(Te.ua=1<<Je,!et(Te.Wa,Je)){ne.a=1,fe=0;break e}}else Te.ua=0;var Hf=ne,dp=he,g1=me,fp=Hf.s,hp=fp.xc;if(Hf.c=dp,Hf.i=g1,fp.md=nt(dp,hp),fp.wc=hp==0?-1:(1<<hp)-1,G){ne.xb=a1;break e}if((Ue=s(he*me))==null){ne.a=1,fe=0;break e}fe=(fe=Ne(ne,Ue,0,he,me,me,null))&&!ve.h;break e}return fe?(ce!=null?ce[0]=Ue:(e(Ue==null),e(G)),ne.$=0,G||qe(Te)):qe(Te),fe}function We(C,M){var G=C.c*C.i,ne=G+M+16*M;return e(C.c<=M),C.V=s(ne),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+G+M,1)}function Ye(C,M){var G=C.C,ne=M-G,ce=C.V,fe=C.Ba+C.c*G;for(e(M<=C.l.o);0<ne;){var he=16<ne?16:ne,me=C.l.ma,ve=C.l.width,Te=ve*he,Ue=me.ca,Je=me.tb+ve*G,Ke=C.Ta,Ve=C.Ua;de(C,he,ce,fe),qr(Ke,Ve,Ue,Je,Te),Ee(me,G,G+he,Ue,Je,ve),ne-=he,ce+=he*C.c,G+=he}e(G==M),C.C=C.Ma=M}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=function(){var C=[];return function M(G,ne,ce){for(var fe=ce[ne],he=0;he<fe&&(G.push(ce.length>ne+1?[]:0),!(ce.length<ne+1));he++)M(G[he],ne+1,ce)}(C,0,[3,11]),C}()}function Ft(){this.jb=s(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function un(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ln(){this.ld=this.La=this.dd=this.tc=0}function Un(){this.Na=this.la=0}function Qn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Sa(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ai(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ln),this.Y=0,this.ya=Array(new Sa),this.aa=0,this.l=new Oa}function Ta(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ss(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new yt,this.Kc=new Bt,this.ed=new un,this.Qa=new Pt,this.Ic=this.$c=this.Aa=0,this.D=new Ai,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,Ae),this.ia=0,this.pb=i(4,Qn),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ta),this.Hd=0,this.rb=Array(new Un),this.sb=0,this.wa=Array(new Ln),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Sa),this.L=this.aa=0,this.gd=o([4,2],Ln),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Oa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function bs(){var C=new ss;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,Ha||(Ha=VA)),C}function Gr(C,M,G){return C.a==0&&(C.a=M,C.sc=G,C.cb=0),0}function is(C,M,G){return 3<=G&&C[M+0]==157&&C[M+1]==1&&C[M+2]==42}function Dc(C,M){if(C==null)return 0;if(C.a=0,C.sc="OK",M==null)return Gr(C,2,"null VP8Io passed to VP8GetHeaders()");var G=M.data,ne=M.w,ce=M.ha;if(4>ce)return Gr(C,7,"Truncated header.");var fe=G[ne+0]|G[ne+1]<<8|G[ne+2]<<16,he=C.Od;if(he.Rb=!(1&fe),he.td=fe>>1&7,he.yd=fe>>4&1,he.ub=fe>>5,3<he.td)return Gr(C,3,"Incorrect keyframe parameters.");if(!he.yd)return Gr(C,4,"Frame not displayable.");ne+=3,ce-=3;var me=C.Kc;if(he.Rb){if(7>ce)return Gr(C,7,"cannot parse picture header");if(!is(G,ne,ce))return Gr(C,3,"Bad code word");me.c=16383&(G[ne+4]<<8|G[ne+3]),me.Td=G[ne+4]>>6,me.i=16383&(G[ne+6]<<8|G[ne+5]),me.Ud=G[ne+6]>>6,ne+=7,ce-=7,C.za=me.c+15>>4,C.Ub=me.i+15>>4,M.width=me.c,M.height=me.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,a((fe=C.Pa).jb,0,255,fe.jb.length),e((fe=C.Qa)!=null),fe.Cb=0,fe.Bb=0,fe.Fb=1,a(fe.Zb,0,0,fe.Zb.length),a(fe.Lb,0,0,fe.Lb)}if(he.ub>ce)return Gr(C,7,"bad partition length");ie(fe=C.m,G,ne,he.ub),ne+=he.ub,ce-=he.ub,he.Rb&&(me.Ld=Ce(fe),me.Kd=Ce(fe)),me=C.Qa;var ve,Te=C.Pa;if(e(fe!=null),e(me!=null),me.Cb=Ce(fe),me.Cb){if(me.Bb=Ce(fe),Ce(fe)){for(me.Fb=Ce(fe),ve=0;4>ve;++ve)me.Zb[ve]=Ce(fe)?ee(fe,7):0;for(ve=0;4>ve;++ve)me.Lb[ve]=Ce(fe)?ee(fe,6):0}if(me.Bb)for(ve=0;3>ve;++ve)Te.jb[ve]=Ce(fe)?J(fe,8):255}else me.Bb=0;if(fe.Ka)return Gr(C,3,"cannot parse segment header");if((me=C.ed).zd=Ce(fe),me.Tb=J(fe,6),me.wb=J(fe,3),me.Pc=Ce(fe),me.Pc&&Ce(fe)){for(Te=0;4>Te;++Te)Ce(fe)&&(me.vd[Te]=ee(fe,6));for(Te=0;4>Te;++Te)Ce(fe)&&(me.od[Te]=ee(fe,6))}if(C.L=me.Tb==0?0:me.zd?1:2,fe.Ka)return Gr(C,3,"cannot parse filter header");var Ue=ce;if(ce=ve=ne,ne=ve+Ue,me=Ue,C.Xb=(1<<J(C.m,2))-1,Ue<3*(Te=C.Xb))G=7;else{for(ve+=3*Te,me-=3*Te,Ue=0;Ue<Te;++Ue){var Je=G[ce+0]|G[ce+1]<<8|G[ce+2]<<16;Je>me&&(Je=me),ie(C.Jc[+Ue],G,ve,Je),ve+=Je,me-=Je,ce+=3}ie(C.Jc[+Te],G,ve,me),G=ve<ne?0:5}if(G!=0)return Gr(C,G,"cannot parse partitions");for(G=J(ve=C.m,7),ce=Ce(ve)?ee(ve,4):0,ne=Ce(ve)?ee(ve,4):0,me=Ce(ve)?ee(ve,4):0,Te=Ce(ve)?ee(ve,4):0,ve=Ce(ve)?ee(ve,4):0,Ue=C.Qa,Je=0;4>Je;++Je){if(Ue.Cb){var Ke=Ue.Zb[Je];Ue.Fb||(Ke+=G)}else{if(0<Je){C.pb[Je]=C.pb[0];continue}Ke=G}var Ve=C.pb[Je];Ve.Sc[0]=Nf[wr(Ke+ce,127)],Ve.Sc[1]=kf[wr(Ke+0,127)],Ve.Eb[0]=2*Nf[wr(Ke+ne,127)],Ve.Eb[1]=101581*kf[wr(Ke+me,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=Nf[wr(Ke+Te,117)],Ve.Qc[1]=kf[wr(Ke+ve,127)],Ve.lc=Ke+ve}if(!he.Rb)return Gr(C,4,"Not a key frame.");for(Ce(fe),he=C.Pa,G=0;4>G;++G){for(ce=0;8>ce;++ce)for(ne=0;3>ne;++ne)for(me=0;11>me;++me)Te=_e(fe,Yu[G][ce][ne][me])?J(fe,8):xl[G][ce][ne][me],he.Wc[G][ce].Yb[ne][me]=Te;for(ce=0;17>ce;++ce)he.Xc[G][ce]=he.Wc[G][r1[ce]]}return C.kc=Ce(fe),C.kc&&(C.Bd=J(fe,8)),C.cb=1}function VA(C,M,G,ne,ce,fe,he){var me=M[ce].Yb[G];for(G=0;16>ce;++ce){if(!_e(C,me[G+0]))return ce;for(;!_e(C,me[G+1]);)if(me=M[++ce].Yb[0],G=0,ce==16)return 16;var ve=M[ce+1].Yb;if(_e(C,me[G+2])){var Te=C,Ue=0;if(_e(Te,(Ke=me)[(Je=G)+3]))if(_e(Te,Ke[Je+6])){for(me=0,Je=2*(Ue=_e(Te,Ke[Je+8]))+(Ke=_e(Te,Ke[Je+9+Ue])),Ue=0,Ke=fa[Je];Ke[me];++me)Ue+=Ue+_e(Te,Ke[me]);Ue+=3+(8<<Je)}else _e(Te,Ke[Je+7])?(Ue=7+2*_e(Te,165),Ue+=_e(Te,145)):Ue=5+_e(Te,159);else Ue=_e(Te,Ke[Je+4])?3+_e(Te,Ke[Je+5]):2;me=ve[2]}else Ue=1,me=ve[1];ve=he+mr[ce],0>(Te=C).b&&ye(Te);var Je,Ke=Te.b,Ve=(Je=Te.Ca>>1)-(Te.I>>Ke)>>31;--Te.b,Te.Ca+=Ve,Te.Ca|=1,Te.I-=(Je+1&Ve)<<Ke,fe[ve]=((Ue^Ve)-Ve)*ne[(0<ce)+0]}return 16}function rl(C){var M=C.rb[C.sb-1];M.la=0,M.Na=0,a(C.zc,0,0,C.zc.length),C.ja=0}function Lu(C,M){if(C==null)return 0;if(M==null)return Gr(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!Dc(C,M))return 0;if(e(C.cb),M.ac==null||M.ac(M)){M.ob&&(C.L=0);var G=oc[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=M.v-G>>4,C.zb=M.j-G>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=M.o+15+G>>4,C.Hb=M.va+15+G>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var ne=C.ed;for(G=0;4>G;++G){var ce;if(C.Qa.Cb){var fe=C.Qa.Lb[G];C.Qa.Fb||(fe+=ne.Tb)}else fe=ne.Tb;for(ce=0;1>=ce;++ce){var he=C.gd[G][ce],me=fe;if(ne.Pc&&(me+=ne.vd[0],ce&&(me+=ne.od[0])),0<(me=0>me?0:63<me?63:me)){var ve=me;0<ne.wb&&(ve=4<ne.wb?ve>>2:ve>>1)>9-ne.wb&&(ve=9-ne.wb),1>ve&&(ve=1),he.dd=ve,he.tc=2*me+ve,he.ld=40<=me?2:15<=me?1:0}else he.tc=0;he.La=ce}}}G=0}else Gr(C,6,"Frame setup failed"),G=C.a;if(G=G==0){if(G){C.$c=0,0<C.Aa||(C.Ic=i1);e:{G=C.Ic,ne=4*(ve=C.za);var Te=32*ve,Ue=ve+1,Je=0<C.L?ve*(0<C.Aa?2:1):0,Ke=(C.Aa==2?2:1)*ve;if((he=ne+832+(ce=3*(16*G+oc[C.L])/2*Te)+(fe=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=he)G=0;else{if(he>C.Vb){if(C.Vb=0,C.Ec=s(he),C.Fc=0,C.Ec==null){G=Gr(C,1,"no memory during frame initialization.");break e}C.Vb=he}he=C.Ec,me=C.Fc,C.Ac=he,C.Bc=me,me+=ne,C.Gd=i(Te,Ta),C.Hd=0,C.rb=i(Ue+1,Un),C.sb=1,C.wa=Je?i(Je,Ln):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=ve),e(!0),C.oc=he,C.pc=me,me+=832,C.ya=i(Ke,Sa),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=ve),C.R=16*ve,C.B=8*ve,ve=(Te=oc[C.L])*C.R,Te=Te/2*C.B,C.sa=he,C.ta=me+ve,C.qa=C.sa,C.ra=C.ta+16*G*C.R+Te,C.Ha=C.qa,C.Ia=C.ra+8*G*C.B+Te,C.$c=0,me+=ce,C.mb=fe?he:null,C.nb=fe?me:null,e(me+fe<=C.Fc+C.Vb),rl(C),a(C.Ac,C.Bc,0,ne),G=1}}if(G){if(M.ka=0,M.y=C.sa,M.O=C.ta,M.f=C.qa,M.N=C.ra,M.ea=C.Ha,M.Vd=C.Ia,M.fa=C.R,M.Rc=C.B,M.F=null,M.J=0,!ec){for(G=-255;255>=G;++G)xa[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)co[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)Jc[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)Yc[255+G]=0>G?0:255<G?255:G;ec=1}ml=di,Uo=sl,Mo=eo,ka=yr,vi=il,Aa=al,zu=ul,pl=Ro,JA=Pc,qc=Ou,Kc=Mc,Wc=Kl,Gu=Wl,YA=Al,$c=zi,Zl=Ls,qu=Na,da=qA,Xs[0]=Rs,Xs[1]=zA,Xs[2]=ro,Xs[3]=GA,Xs[4]=fi,Xs[5]=ao,Xs[6]=Js,Xs[7]=hi,Xs[8]=Fo,Xs[9]=ol,sc[0]=to,sc[1]=Mu,sc[2]=No,sc[3]=Uc,sc[4]=Dr,sc[5]=Io,sc[6]=no,Ki[0]=so,Ki[1]=Uu,Ki[2]=Pu,Ki[3]=mi,Ki[4]=Kn,Ki[5]=Ba,Ki[6]=ll,G=1}else G=0}G&&(G=function(Ve,gt){for(Ve.M=0;Ve.M<Ve.Va;++Ve.M){var st,Me=Ve.Jc[Ve.M&Ve.Xb],je=Ve.m,ct=Ve;for(st=0;st<ct.za;++st){var vt=je,ht=ct,Vt=ht.Ac,Lt=ht.Bc+4*st,tn=ht.zc,Ot=ht.ya[ht.aa+st];if(ht.Qa.Bb?Ot.$b=_e(vt,ht.Pa.jb[0])?2+_e(vt,ht.Pa.jb[2]):_e(vt,ht.Pa.jb[1]):Ot.$b=0,ht.kc&&(Ot.Ad=_e(vt,ht.Bd)),Ot.Za=!_e(vt,145)+0,Ot.Za){var ur=Ot.Ob,br=0;for(ht=0;4>ht;++ht){var Hn,Mn=tn[0+ht];for(Hn=0;4>Hn;++Hn){Mn=tp[Vt[Lt+Hn]][Mn];for(var kr=Zc[_e(vt,Mn[0])];0<kr;)kr=Zc[2*kr+_e(vt,Mn[kr])];Mn=-kr,Vt[Lt+Hn]=Mn}r(ur,br,Vt,Lt,4),br+=4,tn[0+ht]=Mn}}else Mn=_e(vt,156)?_e(vt,128)?1:3:_e(vt,163)?2:0,Ot.Ob[0]=Mn,a(Vt,Lt,Mn,4),a(tn,0,Mn,4);Ot.Dd=_e(vt,142)?_e(vt,114)?_e(vt,183)?1:3:2:0}if(ct.m.Ka)return Gr(Ve,7,"Premature end-of-partition0 encountered.");for(;Ve.ja<Ve.za;++Ve.ja){if(ct=Me,vt=(je=Ve).rb[je.sb-1],Vt=je.rb[je.sb+je.ja],st=je.ya[je.aa+je.ja],Lt=je.kc?st.Ad:0)vt.la=Vt.la=0,st.Za||(vt.Na=Vt.Na=0),st.Hc=0,st.Gc=0,st.ia=0;else{var Cr,Tn;if(vt=Vt,Vt=ct,Lt=je.Pa.Xc,tn=je.ya[je.aa+je.ja],Ot=je.pb[tn.$b],ht=tn.ad,ur=0,br=je.rb[je.sb-1],Mn=Hn=0,a(ht,ur,0,384),tn.Za)var Lr=0,An=Lt[3];else{kr=s(16);var vn=vt.Na+br.Na;if(vn=Ha(Vt,Lt[1],vn,Ot.Eb,0,kr,0),vt.Na=br.Na=(0<vn)+0,1<vn)ml(kr,0,ht,ur);else{var cr=kr[0]+3>>3;for(kr=0;256>kr;kr+=16)ht[ur+kr]=cr}Lr=1,An=Lt[0]}var Ar=15&vt.la,us=15&br.la;for(kr=0;4>kr;++kr){var Ga=1&us;for(cr=Tn=0;4>cr;++cr)Ar=Ar>>1|(Ga=(vn=Ha(Vt,An,vn=Ga+(1&Ar),Ot.Sc,Lr,ht,ur))>Lr)<<7,Tn=Tn<<2|(3<vn?3:1<vn?2:ht[ur+0]!=0),ur+=16;Ar>>=4,us=us>>1|Ga<<7,Hn=(Hn<<8|Tn)>>>0}for(An=Ar,Lr=us>>4,Cr=0;4>Cr;Cr+=2){for(Tn=0,Ar=vt.la>>4+Cr,us=br.la>>4+Cr,kr=0;2>kr;++kr){for(Ga=1&us,cr=0;2>cr;++cr)vn=Ga+(1&Ar),Ar=Ar>>1|(Ga=0<(vn=Ha(Vt,Lt[2],vn,Ot.Qc,0,ht,ur)))<<3,Tn=Tn<<2|(3<vn?3:1<vn?2:ht[ur+0]!=0),ur+=16;Ar>>=2,us=us>>1|Ga<<5}Mn|=Tn<<4*Cr,An|=Ar<<4<<Cr,Lr|=(240&us)<<Cr}vt.la=An,br.la=Lr,tn.Hc=Hn,tn.Gc=Mn,tn.ia=43690&Mn?0:Ot.ia,Lt=!(Hn|Mn)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[st.$b][st.Za],je.wa[je.Y+je.ja].La|=!Lt),ct.Ka)return Gr(Ve,7,"Premature end-of-file encountered.")}if(rl(Ve),je=gt,ct=1,st=(Me=Ve).D,vt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(st.M=Me.M,st.uc=vt,pi(Me,st),ct=1,st=(Tn=Me.D).Nb,vt=(Mn=oc[Me.L])*Me.R,Vt=Mn/2*Me.B,kr=16*st*Me.R,cr=8*st*Me.B,Lt=Me.sa,tn=Me.ta-vt+kr,Ot=Me.qa,ht=Me.ra-Vt+cr,ur=Me.Ha,br=Me.Ia-Vt+cr,us=(Ar=Tn.M)==0,Hn=Ar>=Me.Va-1,Me.Aa==2&&pi(Me,Tn),Tn.uc)for(Ga=(vn=Me).D.M,e(vn.D.uc),Tn=vn.yb;Tn<vn.Hb;++Tn){Lr=Tn,An=Ga;var va=(ya=(ea=vn).D).Nb;Cr=ea.R;var ya=ya.wa[ya.Y+Lr],Ia=ea.sa,fo=ea.ta+16*va*Cr+16*Lr,Er=ya.dd,Fa=ya.tc;if(Fa!=0)if(e(3<=Fa),ea.L==1)0<Lr&&Zl(Ia,fo,Cr,Fa+4),ya.La&&da(Ia,fo,Cr,Fa),0<An&&$c(Ia,fo,Cr,Fa+4),ya.La&&qu(Ia,fo,Cr,Fa);else{var Po=ea.B,nu=ea.qa,Zu=ea.ra+8*va*Po+8*Lr,ru=ea.Ha,ea=ea.Ia+8*va*Po+8*Lr;va=ya.ld,0<Lr&&(pl(Ia,fo,Cr,Fa+4,Er,va),qc(nu,Zu,ru,ea,Po,Fa+4,Er,va)),ya.La&&(Wc(Ia,fo,Cr,Fa,Er,va),YA(nu,Zu,ru,ea,Po,Fa,Er,va)),0<An&&(zu(Ia,fo,Cr,Fa+4,Er,va),JA(nu,Zu,ru,ea,Po,Fa+4,Er,va)),ya.La&&(Kc(Ia,fo,Cr,Fa,Er,va),Gu(nu,Zu,ru,ea,Po,Fa,Er,va))}}if(Me.ia&&alert("todo:DitherRow"),je.put!=null){if(Tn=16*Ar,Ar=16*(Ar+1),us?(je.y=Me.sa,je.O=Me.ta+kr,je.f=Me.qa,je.N=Me.ra+cr,je.ea=Me.Ha,je.W=Me.Ia+cr):(Tn-=Mn,je.y=Lt,je.O=tn,je.f=Ot,je.N=ht,je.ea=ur,je.W=br),Hn||(Ar-=Mn),Ar>je.o&&(Ar=je.o),je.F=null,je.J=null,Me.Fa!=null&&0<Me.Fa.length&&Tn<Ar&&(je.J=Oc(Me,je,Tn,Ar-Tn),je.F=Me.mb,je.F==null&&je.F.length==0)){ct=Gr(Me,3,"Could not decode alpha data.");break e}Tn<je.j&&(Mn=je.j-Tn,Tn=je.j,e(!(1&Mn)),je.O+=Me.R*Mn,je.N+=Me.B*(Mn>>1),je.W+=Me.B*(Mn>>1),je.F!=null&&(je.J+=je.width*Mn)),Tn<Ar&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=Tn-je.j,je.U=je.va-je.v,je.T=Ar-Tn,ct=je.put(je))}st+1!=Me.Ic||Hn||(r(Me.sa,Me.ta-vt,Lt,tn+16*Me.R,vt),r(Me.qa,Me.ra-Vt,Ot,ht+8*Me.B,Vt),r(Me.Ha,Me.Ia-Vt,ur,br+8*Me.B,Vt))}if(!ct)return Gr(Ve,6,"Output aborted.")}return 1}(C,M)),M.bc!=null&&M.bc(M),G&=1}return G?(C.cb=0,G):0}function Cs(C,M,G,ne,ce){ce=C[M+G+32*ne]+(ce>>3),C[M+G+32*ne]=-256&ce?0>ce?0:255:ce}function Lc(C,M,G,ne,ce,fe){Cs(C,M,0,G,ne+ce),Cs(C,M,1,G,ne+fe),Cs(C,M,2,G,ne-fe),Cs(C,M,3,G,ne-ce)}function lr(C){return(20091*C>>16)+C}function Es(C,M,G,ne){var ce,fe=0,he=s(16);for(ce=0;4>ce;++ce){var me=C[M+0]+C[M+8],ve=C[M+0]-C[M+8],Te=(35468*C[M+4]>>16)-lr(C[M+12]),Ue=lr(C[M+4])+(35468*C[M+12]>>16);he[fe+0]=me+Ue,he[fe+1]=ve+Te,he[fe+2]=ve-Te,he[fe+3]=me-Ue,fe+=4,M++}for(ce=fe=0;4>ce;++ce)me=(C=he[fe+0]+4)+he[fe+8],ve=C-he[fe+8],Te=(35468*he[fe+4]>>16)-lr(he[fe+12]),Cs(G,ne,0,0,me+(Ue=lr(he[fe+4])+(35468*he[fe+12]>>16))),Cs(G,ne,1,0,ve+Te),Cs(G,ne,2,0,ve-Te),Cs(G,ne,3,0,me-Ue),fe++,ne+=32}function al(C,M,G,ne){var ce=C[M+0]+4,fe=35468*C[M+4]>>16,he=lr(C[M+4]),me=35468*C[M+1]>>16;Lc(G,ne,0,ce+he,C=lr(C[M+1]),me),Lc(G,ne,1,ce+fe,C,me),Lc(G,ne,2,ce-fe,C,me),Lc(G,ne,3,ce-he,C,me)}function sl(C,M,G,ne,ce){Es(C,M,G,ne),ce&&Es(C,M+16,G,ne+4)}function eo(C,M,G,ne){Uo(C,M+0,G,ne,1),Uo(C,M+32,G,ne+128,1)}function yr(C,M,G,ne){var ce;for(C=C[M+0]+4,ce=0;4>ce;++ce)for(M=0;4>M;++M)Cs(G,ne,M,ce,C)}function il(C,M,G,ne){C[M+0]&&ka(C,M+0,G,ne),C[M+16]&&ka(C,M+16,G,ne+4),C[M+32]&&ka(C,M+32,G,ne+128),C[M+48]&&ka(C,M+48,G,ne+128+4)}function di(C,M,G,ne){var ce,fe=s(16);for(ce=0;4>ce;++ce){var he=C[M+0+ce]+C[M+12+ce],me=C[M+4+ce]+C[M+8+ce],ve=C[M+4+ce]-C[M+8+ce],Te=C[M+0+ce]-C[M+12+ce];fe[0+ce]=he+me,fe[8+ce]=he-me,fe[4+ce]=Te+ve,fe[12+ce]=Te-ve}for(ce=0;4>ce;++ce)he=(C=fe[0+4*ce]+3)+fe[3+4*ce],me=fe[1+4*ce]+fe[2+4*ce],ve=fe[1+4*ce]-fe[2+4*ce],Te=C-fe[3+4*ce],G[ne+0]=he+me>>3,G[ne+16]=Te+ve>>3,G[ne+32]=he-me>>3,G[ne+48]=Te-ve>>3,ne+=64}function Bo(C,M,G){var ne,ce=M-32,fe=ls,he=255-C[ce-1];for(ne=0;ne<G;++ne){var me,ve=fe,Te=he+C[M-1];for(me=0;me<G;++me)C[M+me]=ve[Te+C[ce+me]];M+=32}}function zA(C,M){Bo(C,M,4)}function Uu(C,M){Bo(C,M,8)}function Mu(C,M){Bo(C,M,16)}function No(C,M){var G;for(G=0;16>G;++G)r(C,M+32*G,C,M-32,16)}function Uc(C,M){var G;for(G=16;0<G;--G)a(C,M,C[M-1],16),M+=32}function ko(C,M,G){var ne;for(ne=0;16>ne;++ne)a(M,G+32*ne,C,16)}function to(C,M){var G,ne=16;for(G=0;16>G;++G)ne+=C[M-1+32*G]+C[M+G-32];ko(ne>>5,C,M)}function Dr(C,M){var G,ne=8;for(G=0;16>G;++G)ne+=C[M-1+32*G];ko(ne>>4,C,M)}function Io(C,M){var G,ne=8;for(G=0;16>G;++G)ne+=C[M+G-32];ko(ne>>4,C,M)}function no(C,M){ko(128,C,M)}function dn(C,M,G){return C+2*M+G+2>>2}function ro(C,M){var G,ne=M-32;for(ne=new Uint8Array([dn(C[ne-1],C[ne+0],C[ne+1]),dn(C[ne+0],C[ne+1],C[ne+2]),dn(C[ne+1],C[ne+2],C[ne+3]),dn(C[ne+2],C[ne+3],C[ne+4])]),G=0;4>G;++G)r(C,M+32*G,ne,0,ne.length)}function GA(C,M){var G=C[M-1],ne=C[M-1+32],ce=C[M-1+64],fe=C[M-1+96];Ie(C,M+0,16843009*dn(C[M-1-32],G,ne)),Ie(C,M+32,16843009*dn(G,ne,ce)),Ie(C,M+64,16843009*dn(ne,ce,fe)),Ie(C,M+96,16843009*dn(ce,fe,fe))}function Rs(C,M){var G,ne=4;for(G=0;4>G;++G)ne+=C[M+G-32]+C[M-1+32*G];for(ne>>=3,G=0;4>G;++G)a(C,M+32*G,ne,4)}function fi(C,M){var G=C[M-1+0],ne=C[M-1+32],ce=C[M-1+64],fe=C[M-1-32],he=C[M+0-32],me=C[M+1-32],ve=C[M+2-32],Te=C[M+3-32];C[M+0+96]=dn(ne,ce,C[M-1+96]),C[M+1+96]=C[M+0+64]=dn(G,ne,ce),C[M+2+96]=C[M+1+64]=C[M+0+32]=dn(fe,G,ne),C[M+3+96]=C[M+2+64]=C[M+1+32]=C[M+0+0]=dn(he,fe,G),C[M+3+64]=C[M+2+32]=C[M+1+0]=dn(me,he,fe),C[M+3+32]=C[M+2+0]=dn(ve,me,he),C[M+3+0]=dn(Te,ve,me)}function Js(C,M){var G=C[M+1-32],ne=C[M+2-32],ce=C[M+3-32],fe=C[M+4-32],he=C[M+5-32],me=C[M+6-32],ve=C[M+7-32];C[M+0+0]=dn(C[M+0-32],G,ne),C[M+1+0]=C[M+0+32]=dn(G,ne,ce),C[M+2+0]=C[M+1+32]=C[M+0+64]=dn(ne,ce,fe),C[M+3+0]=C[M+2+32]=C[M+1+64]=C[M+0+96]=dn(ce,fe,he),C[M+3+32]=C[M+2+64]=C[M+1+96]=dn(fe,he,me),C[M+3+64]=C[M+2+96]=dn(he,me,ve),C[M+3+96]=dn(me,ve,ve)}function ao(C,M){var G=C[M-1+0],ne=C[M-1+32],ce=C[M-1+64],fe=C[M-1-32],he=C[M+0-32],me=C[M+1-32],ve=C[M+2-32],Te=C[M+3-32];C[M+0+0]=C[M+1+64]=fe+he+1>>1,C[M+1+0]=C[M+2+64]=he+me+1>>1,C[M+2+0]=C[M+3+64]=me+ve+1>>1,C[M+3+0]=ve+Te+1>>1,C[M+0+96]=dn(ce,ne,G),C[M+0+64]=dn(ne,G,fe),C[M+0+32]=C[M+1+96]=dn(G,fe,he),C[M+1+32]=C[M+2+96]=dn(fe,he,me),C[M+2+32]=C[M+3+96]=dn(he,me,ve),C[M+3+32]=dn(me,ve,Te)}function hi(C,M){var G=C[M+0-32],ne=C[M+1-32],ce=C[M+2-32],fe=C[M+3-32],he=C[M+4-32],me=C[M+5-32],ve=C[M+6-32],Te=C[M+7-32];C[M+0+0]=G+ne+1>>1,C[M+1+0]=C[M+0+64]=ne+ce+1>>1,C[M+2+0]=C[M+1+64]=ce+fe+1>>1,C[M+3+0]=C[M+2+64]=fe+he+1>>1,C[M+0+32]=dn(G,ne,ce),C[M+1+32]=C[M+0+96]=dn(ne,ce,fe),C[M+2+32]=C[M+1+96]=dn(ce,fe,he),C[M+3+32]=C[M+2+96]=dn(fe,he,me),C[M+3+64]=dn(he,me,ve),C[M+3+96]=dn(me,ve,Te)}function ol(C,M){var G=C[M-1+0],ne=C[M-1+32],ce=C[M-1+64],fe=C[M-1+96];C[M+0+0]=G+ne+1>>1,C[M+2+0]=C[M+0+32]=ne+ce+1>>1,C[M+2+32]=C[M+0+64]=ce+fe+1>>1,C[M+1+0]=dn(G,ne,ce),C[M+3+0]=C[M+1+32]=dn(ne,ce,fe),C[M+3+32]=C[M+1+64]=dn(ce,fe,fe),C[M+3+64]=C[M+2+64]=C[M+0+96]=C[M+1+96]=C[M+2+96]=C[M+3+96]=fe}function Fo(C,M){var G=C[M-1+0],ne=C[M-1+32],ce=C[M-1+64],fe=C[M-1+96],he=C[M-1-32],me=C[M+0-32],ve=C[M+1-32],Te=C[M+2-32];C[M+0+0]=C[M+2+32]=G+he+1>>1,C[M+0+32]=C[M+2+64]=ne+G+1>>1,C[M+0+64]=C[M+2+96]=ce+ne+1>>1,C[M+0+96]=fe+ce+1>>1,C[M+3+0]=dn(me,ve,Te),C[M+2+0]=dn(he,me,ve),C[M+1+0]=C[M+3+32]=dn(G,he,me),C[M+1+32]=C[M+3+64]=dn(ne,G,he),C[M+1+64]=C[M+3+96]=dn(ce,ne,G),C[M+1+96]=dn(fe,ce,ne)}function Pu(C,M){var G;for(G=0;8>G;++G)r(C,M+32*G,C,M-32,8)}function mi(C,M){var G;for(G=0;8>G;++G)a(C,M,C[M-1],8),M+=32}function Ds(C,M,G){var ne;for(ne=0;8>ne;++ne)a(M,G+32*ne,C,8)}function so(C,M){var G,ne=8;for(G=0;8>G;++G)ne+=C[M+G-32]+C[M-1+32*G];Ds(ne>>4,C,M)}function Ba(C,M){var G,ne=4;for(G=0;8>G;++G)ne+=C[M+G-32];Ds(ne>>3,C,M)}function Kn(C,M){var G,ne=4;for(G=0;8>G;++G)ne+=C[M-1+32*G];Ds(ne>>3,C,M)}function ll(C,M){Ds(128,C,M)}function io(C,M,G){var ne=C[M-G],ce=C[M+0],fe=3*(ce-ne)+qh[1020+C[M-2*G]-C[M+G]],he=Ku[112+(fe+4>>3)];C[M-G]=ls[255+ne+Ku[112+(fe+3>>3)]],C[M+0]=ls[255+ce-he]}function ju(C,M,G,ne){var ce=C[M+0],fe=C[M+G];return uo[255+C[M-2*G]-C[M-G]]>ne||uo[255+fe-ce]>ne}function Gl(C,M,G,ne){return 4*uo[255+C[M-G]-C[M+0]]+uo[255+C[M-2*G]-C[M+G]]<=ne}function ql(C,M,G,ne,ce){var fe=C[M-3*G],he=C[M-2*G],me=C[M-G],ve=C[M+0],Te=C[M+G],Ue=C[M+2*G],Je=C[M+3*G];return 4*uo[255+me-ve]+uo[255+he-Te]>ne?0:uo[255+C[M-4*G]-fe]<=ce&&uo[255+fe-he]<=ce&&uo[255+he-me]<=ce&&uo[255+Je-Ue]<=ce&&uo[255+Ue-Te]<=ce&&uo[255+Te-ve]<=ce}function zi(C,M,G,ne){var ce=2*ne+1;for(ne=0;16>ne;++ne)Gl(C,M+ne,G,ce)&&io(C,M+ne,G)}function Ls(C,M,G,ne){var ce=2*ne+1;for(ne=0;16>ne;++ne)Gl(C,M+ne*G,1,ce)&&io(C,M+ne*G,1)}function Na(C,M,G,ne){var ce;for(ce=3;0<ce;--ce)zi(C,M+=4*G,G,ne)}function qA(C,M,G,ne){var ce;for(ce=3;0<ce;--ce)Ls(C,M+=4,G,ne)}function cl(C,M,G,ne,ce,fe,he,me){for(fe=2*fe+1;0<ce--;){if(ql(C,M,G,fe,he))if(ju(C,M,G,me))io(C,M,G);else{var ve=C,Te=M,Ue=G,Je=ve[Te-2*Ue],Ke=ve[Te-Ue],Ve=ve[Te+0],gt=ve[Te+Ue],st=ve[Te+2*Ue],Me=27*(ct=qh[1020+3*(Ve-Ke)+qh[1020+Je-gt]])+63>>7,je=18*ct+63>>7,ct=9*ct+63>>7;ve[Te-3*Ue]=ls[255+ve[Te-3*Ue]+ct],ve[Te-2*Ue]=ls[255+Je+je],ve[Te-Ue]=ls[255+Ke+Me],ve[Te+0]=ls[255+Ve-Me],ve[Te+Ue]=ls[255+gt-je],ve[Te+2*Ue]=ls[255+st-ct]}M+=ne}}function _s(C,M,G,ne,ce,fe,he,me){for(fe=2*fe+1;0<ce--;){if(ql(C,M,G,fe,he))if(ju(C,M,G,me))io(C,M,G);else{var ve=C,Te=M,Ue=G,Je=ve[Te-Ue],Ke=ve[Te+0],Ve=ve[Te+Ue],gt=Ku[112+((st=3*(Ke-Je))+4>>3)],st=Ku[112+(st+3>>3)],Me=gt+1>>1;ve[Te-2*Ue]=ls[255+ve[Te-2*Ue]+Me],ve[Te-Ue]=ls[255+Je+st],ve[Te+0]=ls[255+Ke-gt],ve[Te+Ue]=ls[255+Ve-Me]}M+=ne}}function ul(C,M,G,ne,ce,fe){cl(C,M,G,1,16,ne,ce,fe)}function Ro(C,M,G,ne,ce,fe){cl(C,M,1,G,16,ne,ce,fe)}function Mc(C,M,G,ne,ce,fe){var he;for(he=3;0<he;--he)_s(C,M+=4*G,G,1,16,ne,ce,fe)}function Kl(C,M,G,ne,ce,fe){var he;for(he=3;0<he;--he)_s(C,M+=4,1,G,16,ne,ce,fe)}function Pc(C,M,G,ne,ce,fe,he,me){cl(C,M,ce,1,8,fe,he,me),cl(G,ne,ce,1,8,fe,he,me)}function Ou(C,M,G,ne,ce,fe,he,me){cl(C,M,1,ce,8,fe,he,me),cl(G,ne,1,ce,8,fe,he,me)}function Wl(C,M,G,ne,ce,fe,he,me){_s(C,M+4*ce,ce,1,8,fe,he,me),_s(G,ne+4*ce,ce,1,8,fe,he,me)}function Al(C,M,G,ne,ce,fe,he,me){_s(C,M+4,1,ce,8,fe,he,me),_s(G,ne+4,1,ce,8,fe,he,me)}function $l(){this.ba=new Yr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Jl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function dl(){this.ua=0,this.Wa=new we,this.vb=new we,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new L}function KA(){this.xb=this.a=0,this.l=new Oa,this.ca=new Yr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new dl,this.ab=0,this.gc=i(4,Jl),this.Oc=0}function Do(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fl(C,M,G,ne,ce,fe,he){for(C=C==null?0:C[M+0],M=0;M<he;++M)ce[fe+M]=C+G[ne+M]&255,C=ce[fe+M]}function Yl(C,M,G,ne,ce,fe,he){var me;if(C==null)fl(null,null,G,ne,ce,fe,he);else for(me=0;me<he;++me)ce[fe+me]=C[M+me]+G[ne+me]&255}function Us(C,M,G,ne,ce,fe,he){if(C==null)fl(null,null,G,ne,ce,fe,he);else{var me,ve=C[M+0],Te=ve,Ue=ve;for(me=0;me<he;++me)Te=Ue+(ve=C[M+me])-Te,Ue=G[ne+me]+(-256&Te?0>Te?0:255:Te)&255,Te=ve,ce[fe+me]=Ue}}function Oc(C,M,G,ne){var ce=M.width,fe=M.o;if(e(C!=null&&M!=null),0>G||0>=ne||G+ne>fe)return null;if(!C.Cc){if(C.ga==null){var he;if(C.ga=new Do,(he=C.ga==null)||(he=M.width*M.o,e(C.Gb.length==0),C.Gb=s(he),C.Uc=0,C.Gb==null?he=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,he=1),he=!he),!he){he=C.ga;var me=C.Fa,ve=C.P,Te=C.qc,Ue=C.mb,Je=C.nb,Ke=ve+1,Ve=Te-1,gt=he.l;if(e(me!=null&&Ue!=null&&M!=null),vl[0]=null,vl[1]=fl,vl[2]=Yl,vl[3]=Us,he.ca=Ue,he.tb=Je,he.c=M.width,he.i=M.height,e(0<he.c&&0<he.i),1>=Te)M=0;else if(he.$a=me[ve+0]>>0&3,he.Z=me[ve+0]>>2&3,he.Lc=me[ve+0]>>4&3,ve=me[ve+0]>>6&3,0>he.$a||1<he.$a||4<=he.Z||1<he.Lc||ve)M=0;else if(gt.put=pa,gt.ac=Vr,gt.bc=ws,gt.ma=he,gt.width=M.width,gt.height=M.height,gt.Da=M.Da,gt.v=M.v,gt.va=M.va,gt.j=M.j,gt.o=M.o,he.$a)e:{e(he.$a==1),M=tt();t:for(;;){if(M==null){M=0;break e}if(e(he!=null),he.mc=M,M.c=he.c,M.i=he.i,M.l=he.l,M.l.ma=he,M.l.width=he.c,M.l.height=he.i,M.a=0,ae(M.m,me,Ke,Ve),!Qe(he.c,he.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&be(M.s)?(he.ic=1,me=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(me),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(he.ic=0,M=We(M,he.c)),!M))break t;M=1;break e}he.mc=null,M=0}else M=Ve>=he.c*he.i;he=!M}if(he)return null;C.ga.Lc!=1?C.Ga=0:ne=fe-G}e(C.ga!=null),e(G+ne<=fe);e:{if(M=(me=C.ga).c,fe=me.l.o,me.$a==0){if(Ke=C.rc,Ve=C.Vc,gt=C.Fa,ve=C.P+1+G*M,Te=C.mb,Ue=C.nb+G*M,e(ve<=C.P+C.qc),me.Z!=0)for(e(vl[me.Z]!=null),he=0;he<ne;++he)vl[me.Z](Ke,Ve,gt,ve,Te,Ue,M),Ke=Te,Ve=Ue,Ue+=M,ve+=M;else for(he=0;he<ne;++he)r(Te,Ue,gt,ve,M),Ke=Te,Ve=Ue,Ue+=M,ve+=M;C.rc=Ke,C.Vc=Ve}else{if(e(me.mc!=null),M=G+ne,e((he=me.mc)!=null),e(M<=he.i),he.C>=M)M=1;else if(me.ic||He(),me.ic){me=he.V,Ke=he.Ba,Ve=he.c;var st=he.i,Me=(gt=1,ve=he.$/Ve,Te=he.$%Ve,Ue=he.m,Je=he.s,he.$),je=Ve*st,ct=Ve*M,vt=Je.wc,ht=Me<ct?zr(Je,Te,ve):null;e(Me<=je),e(M<=st),e(be(Je));t:for(;;){for(;!Ue.h&&Me<ct;){if(Te&vt||(ht=zr(Je,Te,ve)),e(ht!=null),le(Ue),256>(st=Br(ht.G[0],ht.H[0],Ue)))me[Ke+Me]=st,++Me,++Te>=Ve&&(Te=0,++ve<=M&&!(ve%16)&&Se(he,ve));else{if(!(280>st)){gt=0;break t}st=or(st-256,Ue);var Vt,Lt=Br(ht.G[4],ht.H[4],Ue);if(le(Ue),!(Me>=(Lt=Zn(Ve,Lt=or(Lt,Ue)))&&je-Me>=st)){gt=0;break t}for(Vt=0;Vt<st;++Vt)me[Ke+Me+Vt]=me[Ke+Me+Vt-Lt];for(Me+=st,Te+=st;Te>=Ve;)Te-=Ve,++ve<=M&&!(ve%16)&&Se(he,ve);Me<ct&&Te&vt&&(ht=zr(Je,Te,ve))}e(Ue.h==X(Ue))}Se(he,ve>M?M:ve);break t}!gt||Ue.h&&Me<je?(gt=0,he.a=Ue.h?5:3):he.$=Me,M=gt}else M=Ne(he,he.V,he.Ba,he.c,he.i,M,Ye);if(!M){ne=0;break e}}G+ne>=fe&&(C.Cc=1),ne=1}if(!ne)return null;if(C.Cc&&((ne=C.ga)!=null&&(ne.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+G*ce}function V(C,M,G,ne,ce,fe){for(;0<ce--;){var he,me=C,ve=M+(G?1:0),Te=C,Ue=M+(G?0:3);for(he=0;he<ne;++he){var Je=Te[Ue+4*he];Je!=255&&(Je*=32897,me[ve+4*he+0]=me[ve+4*he+0]*Je>>23,me[ve+4*he+1]=me[ve+4*he+1]*Je>>23,me[ve+4*he+2]=me[ve+4*he+2]*Je>>23)}M+=fe}}function ue(C,M,G,ne,ce){for(;0<ne--;){var fe;for(fe=0;fe<G;++fe){var he=C[M+2*fe+0],me=15&(Te=C[M+2*fe+1]),ve=4369*me,Te=(240&Te|Te>>4)*ve>>16;C[M+2*fe+0]=(240&he|he>>4)*ve>>16&240|(15&he|he<<4)*ve>>16>>4&15,C[M+2*fe+1]=240&Te|me}M+=ce}}function ke(C,M,G,ne,ce,fe,he,me){var ve,Te,Ue=255;for(Te=0;Te<ce;++Te){for(ve=0;ve<ne;++ve){var Je=C[M+ve];fe[he+4*ve]=Je,Ue&=Je}M+=G,he+=me}return Ue!=255}function Le(C,M,G,ne,ce){var fe;for(fe=0;fe<ce;++fe)G[ne+fe]=C[M+fe]>>8}function He(){Gi=V,Vn=ue,zn=ke,qr=Le}function ot(C,M,G){B[C]=function(ne,ce,fe,he,me,ve,Te,Ue,Je,Ke,Ve,gt,st,Me,je,ct,vt){var ht,Vt=vt-1>>1,Lt=me[ve+0]|Te[Ue+0]<<16,tn=Je[Ke+0]|Ve[gt+0]<<16;e(ne!=null);var Ot=3*Lt+tn+131074>>2;for(M(ne[ce+0],255&Ot,Ot>>16,st,Me),fe!=null&&(Ot=3*tn+Lt+131074>>2,M(fe[he+0],255&Ot,Ot>>16,je,ct)),ht=1;ht<=Vt;++ht){var ur=me[ve+ht]|Te[Ue+ht]<<16,br=Je[Ke+ht]|Ve[gt+ht]<<16,Hn=Lt+ur+tn+br+524296,Mn=Hn+2*(ur+tn)>>3;Ot=Mn+Lt>>1,Lt=(Hn=Hn+2*(Lt+br)>>3)+ur>>1,M(ne[ce+2*ht-1],255&Ot,Ot>>16,st,Me+(2*ht-1)*G),M(ne[ce+2*ht-0],255&Lt,Lt>>16,st,Me+(2*ht-0)*G),fe!=null&&(Ot=Hn+tn>>1,Lt=Mn+br>>1,M(fe[he+2*ht-1],255&Ot,Ot>>16,je,ct+(2*ht-1)*G),M(fe[he+2*ht+0],255&Lt,Lt>>16,je,ct+(2*ht+0)*G)),Lt=ur,tn=br}1&vt||(Ot=3*Lt+tn+131074>>2,M(ne[ce+vt-1],255&Ot,Ot>>16,st,Me+(vt-1)*G),fe!=null&&(Ot=3*tn+Lt+131074>>2,M(fe[he+vt-1],255&Ot,Ot>>16,je,ct+(vt-1)*G)))}}function _t(){cs[Ms]=ic,cs[XA]=yl,cs[gl]=eu,cs[Tf]=$h,cs[Wu]=Jh,cs[tc]=td,cs[Kh]=Yh,cs[Bf]=yl,cs[Xc]=$h,cs[nc]=Jh,cs[ZA]=td}function jt(C){return C&-16384?0>C?0:255:C>>eb}function S(C,M){return jt((19077*C>>8)+(26149*M>>8)-14234)}function W(C,M,G){return jt((19077*C>>8)-(6419*M>>8)-(13320*G>>8)+8708)}function re(C,M){return jt((19077*C>>8)+(33050*M>>8)-17685)}function pe(C,M,G,ne,ce){ne[ce+0]=S(C,G),ne[ce+1]=W(C,M,G),ne[ce+2]=re(C,M)}function Oe(C,M,G,ne,ce){ne[ce+0]=re(C,M),ne[ce+1]=W(C,M,G),ne[ce+2]=S(C,G)}function Xe(C,M,G,ne,ce){var fe=W(C,M,G);M=fe<<3&224|re(C,M)>>3,ne[ce+0]=248&S(C,G)|fe>>5,ne[ce+1]=M}function St(C,M,G,ne,ce){var fe=240&re(C,M)|15;ne[ce+0]=240&S(C,G)|W(C,M,G)>>4,ne[ce+1]=fe}function fn(C,M,G,ne,ce){ne[ce+0]=255,pe(C,M,G,ne,ce+1)}function Wn(C,M,G,ne,ce){Oe(C,M,G,ne,ce),ne[ce+3]=255}function Sn(C,M,G,ne,ce){pe(C,M,G,ne,ce),ne[ce+3]=255}function wr(C,M){return 0>C?0:C>M?M:C}function Nr(C,M,G){B[C]=function(ne,ce,fe,he,me,ve,Te,Ue,Je){for(var Ke=Ue+(-2&Je)*G;Ue!=Ke;)M(ne[ce+0],fe[he+0],me[ve+0],Te,Ue),M(ne[ce+1],fe[he+0],me[ve+0],Te,Ue+G),ce+=2,++he,++ve,Ue+=2*G;1&Je&&M(ne[ce+0],fe[he+0],me[ve+0],Te,Ue)}}function oo(C,M,G){return G==0?C==0?M==0?6:5:M==0?4:0:G}function ga(C,M,G,ne,ce){switch(C>>>30){case 3:Uo(M,G,ne,ce,0);break;case 2:Aa(M,G,ne,ce);break;case 1:ka(M,G,ne,ce)}}function pi(C,M){var G,ne,ce=M.M,fe=M.Nb,he=C.oc,me=C.pc+40,ve=C.oc,Te=C.pc+584,Ue=C.oc,Je=C.pc+600;for(G=0;16>G;++G)he[me+32*G-1]=129;for(G=0;8>G;++G)ve[Te+32*G-1]=129,Ue[Je+32*G-1]=129;for(0<ce?he[me-1-32]=ve[Te-1-32]=Ue[Je-1-32]=129:(a(he,me-32-1,127,21),a(ve,Te-32-1,127,9),a(Ue,Je-32-1,127,9)),ne=0;ne<C.za;++ne){var Ke=M.ya[M.aa+ne];if(0<ne){for(G=-1;16>G;++G)r(he,me+32*G-4,he,me+32*G+12,4);for(G=-1;8>G;++G)r(ve,Te+32*G-4,ve,Te+32*G+4,4),r(Ue,Je+32*G-4,Ue,Je+32*G+4,4)}var Ve=C.Gd,gt=C.Hd+ne,st=Ke.ad,Me=Ke.Hc;if(0<ce&&(r(he,me-32,Ve[gt].y,0,16),r(ve,Te-32,Ve[gt].f,0,8),r(Ue,Je-32,Ve[gt].ea,0,8)),Ke.Za){var je=he,ct=me-32+16;for(0<ce&&(ne>=C.za-1?a(je,ct,Ve[gt].y[15],4):r(je,ct,Ve[gt+1].y,0,4)),G=0;4>G;G++)je[ct+128+G]=je[ct+256+G]=je[ct+384+G]=je[ct+0+G];for(G=0;16>G;++G,Me<<=2)je=he,ct=me+Xu[G],Xs[Ke.Ob[G]](je,ct),ga(Me,st,16*+G,je,ct)}else if(je=oo(ne,ce,Ke.Ob[0]),sc[je](he,me),Me!=0)for(G=0;16>G;++G,Me<<=2)ga(Me,st,16*+G,he,me+Xu[G]);for(G=Ke.Gc,je=oo(ne,ce,Ke.Dd),Ki[je](ve,Te),Ki[je](Ue,Je),Me=st,je=ve,ct=Te,255&(Ke=G>>0)&&(170&Ke?Mo(Me,256,je,ct):vi(Me,256,je,ct)),Ke=Ue,Me=Je,255&(G>>=8)&&(170&G?Mo(st,320,Ke,Me):vi(st,320,Ke,Me)),ce<C.Ub-1&&(r(Ve[gt].y,0,he,me+480,16),r(Ve[gt].f,0,ve,Te+224,8),r(Ve[gt].ea,0,Ue,Je+224,8)),G=8*fe*C.B,Ve=C.sa,gt=C.ta+16*ne+16*fe*C.R,st=C.qa,Ke=C.ra+8*ne+G,Me=C.Ha,je=C.Ia+8*ne+G,G=0;16>G;++G)r(Ve,gt+G*C.R,he,me+32*G,16);for(G=0;8>G;++G)r(st,Ke+G*C.B,ve,Te+32*G,8),r(Me,je+G*C.B,Ue,Je+32*G,8)}}function hl(C,M,G,ne,ce,fe,he,me,ve){var Te=[0],Ue=[0],Je=0,Ke=ve!=null?ve.kd:0,Ve=ve??new jc;if(C==null||12>G)return 7;Ve.data=C,Ve.w=M,Ve.ha=G,M=[M],G=[G],Ve.gb=[Ve.gb];e:{var gt=M,st=G,Me=Ve.gb;if(e(C!=null),e(st!=null),e(Me!=null),Me[0]=0,12<=st[0]&&!n(C,gt[0],"RIFF")){if(n(C,gt[0]+8,"WEBP")){Me=3;break e}var je=Re(C,gt[0]+4);if(12>je||4294967286<je){Me=3;break e}if(Ke&&je>st[0]-8){Me=7;break e}Me[0]=je,gt[0]+=12,st[0]-=12}Me=0}if(Me!=0)return Me;for(je=0<Ve.gb[0],G=G[0];;){e:{var ct=C;st=M,Me=G;var vt=Te,ht=Ue,Vt=gt=[0];if((Ot=Je=[Je])[0]=0,8>Me[0])Me=7;else{if(!n(ct,st[0],"VP8X")){if(Re(ct,st[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Lt=Re(ct,st[0]+8),tn=1+se(ct,st[0]+12);if(2147483648<=tn*(ct=1+se(ct,st[0]+15))){Me=3;break e}Vt!=null&&(Vt[0]=Lt),vt!=null&&(vt[0]=tn),ht!=null&&(ht[0]=ct),st[0]+=18,Me[0]-=18,Ot[0]=1}Me=0}}if(Je=Je[0],gt=gt[0],Me!=0)return Me;if(st=!!(2&gt),!je&&Je)return 3;if(fe!=null&&(fe[0]=!!(16&gt)),he!=null&&(he[0]=st),me!=null&&(me[0]=0),he=Te[0],gt=Ue[0],Je&&st&&ve==null){Me=0;break}if(4>G){Me=7;break}if(je&&Je||!je&&!Je&&!n(C,M[0],"ALPH")){G=[G],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{Lt=C,Me=M,je=G;var Ot=Ve.gb;vt=Ve.na,ht=Ve.P,Vt=Ve.Sa,tn=22,e(Lt!=null),e(je!=null),ct=Me[0];var ur=je[0];for(e(vt!=null),e(Vt!=null),vt[0]=null,ht[0]=null,Vt[0]=0;;){if(Me[0]=ct,je[0]=ur,8>ur){Me=7;break e}var br=Re(Lt,ct+4);if(4294967286<br){Me=3;break e}var Hn=8+br+1&-2;if(tn+=Hn,0<Ot&&tn>Ot){Me=3;break e}if(!n(Lt,ct,"VP8 ")||!n(Lt,ct,"VP8L")){Me=0;break e}if(ur[0]<Hn){Me=7;break e}n(Lt,ct,"ALPH")||(vt[0]=Lt,ht[0]=ct+8,Vt[0]=br),ct+=Hn,ur-=Hn}}if(G=G[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],Me!=0)break}G=[G],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(Ot=C,Me=M,je=G,vt=Ve.gb[0],ht=Ve.Ja,Vt=Ve.xa,Lt=Me[0],ct=!n(Ot,Lt,"VP8 "),tn=!n(Ot,Lt,"VP8L"),e(Ot!=null),e(je!=null),e(ht!=null),e(Vt!=null),8>je[0])Me=7;else{if(ct||tn){if(Ot=Re(Ot,Lt+4),12<=vt&&Ot>vt-12){Me=3;break e}if(Ke&&Ot>je[0]-8){Me=7;break e}ht[0]=Ot,Me[0]+=8,je[0]-=8,Vt[0]=tn}else Vt[0]=5<=je[0]&&Ot[Lt+0]==47&&!(Ot[Lt+4]>>5),ht[0]=je[0];Me=0}if(G=G[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],M=M[0],Me!=0)break;if(4294967286<Ve.Ja)return 3;if(me==null||st||(me[0]=Ve.xa?2:1),he=[he],gt=[gt],Ve.xa){if(5>G){Me=7;break}me=he,Ke=gt,st=fe,C==null||5>G?C=0:5<=G&&C[M+0]==47&&!(C[M+4]>>5)?(je=[0],Ot=[0],vt=[0],ae(ht=new j,C,M,G),Qt(ht,je,Ot,vt)?(me!=null&&(me[0]=je[0]),Ke!=null&&(Ke[0]=Ot[0]),st!=null&&(st[0]=vt[0]),C=1):C=0):C=0}else{if(10>G){Me=7;break}me=gt,C==null||10>G||!is(C,M+3,G-3)?C=0:(Ke=C[M+0]|C[M+1]<<8|C[M+2]<<16,st=16383&(C[M+7]<<8|C[M+6]),C=16383&(C[M+9]<<8|C[M+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=Ve.Ja||!st||!C?C=0:(he&&(he[0]=st),me&&(me[0]=C),C=1))}if(!C||(he=he[0],gt=gt[0],Je&&(Te[0]!=he||Ue[0]!=gt)))return 3;ve!=null&&(ve[0]=Ve,ve.offset=M-ve.w,e(4294967286>M-ve.w),e(ve.offset==ve.ha-G));break}return Me==0||Me==7&&Je&&ve==null?(fe!=null&&(fe[0]|=Ve.na!=null&&0<Ve.na.length),ne!=null&&(ne[0]=he),ce!=null&&(ce[0]=gt),0):Me}function Qc(C,M,G){var ne=M.width,ce=M.height,fe=0,he=0,me=ne,ve=ce;if(M.Da=C!=null&&0<C.Da,M.Da&&(me=C.cd,ve=C.bd,fe=C.v,he=C.j,11>G||(fe&=-2,he&=-2),0>fe||0>he||0>=me||0>=ve||fe+me>ne||he+ve>ce))return 0;if(M.v=fe,M.j=he,M.va=fe+me,M.o=he+ve,M.U=me,M.T=ve,M.da=C!=null&&0<C.da,M.da){if(!ze(me,ve,G=[C.ib],fe=[C.hb]))return 0;M.ib=G[0],M.hb=fe[0]}return M.ob=C!=null&&C.ob,M.Kb=C==null||!C.Sd,M.da&&(M.ob=M.ib<3*ne/4&&M.hb<3*ce/4,M.Kb=0),1}function WA(C){if(C==null)return 2;if(11>C.S){var M=C.f.RGBA;M.fb+=(C.height-1)*M.A,M.A=-M.A}else M=C.f.kb,C=C.height,M.O+=(C-1)*M.fa,M.fa=-M.fa,M.N+=(C-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(C-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(C-1)*M.lb,M.lb=-M.lb);return 0}function Qu(C,M,G,ne){if(ne==null||0>=C||0>=M)return 2;if(G!=null){if(G.Da){var ce=G.cd,fe=G.bd,he=-2&G.v,me=-2&G.j;if(0>he||0>me||0>=ce||0>=fe||he+ce>C||me+fe>M)return 2;C=ce,M=fe}if(G.da){if(!ze(C,M,ce=[G.ib],fe=[G.hb]))return 2;C=ce[0],M=fe[0]}}ne.width=C,ne.height=M;e:{var ve=ne.width,Te=ne.height;if(C=ne.S,0>=ve||0>=Te||!(C>=Ms&&13>C))C=2;else{if(0>=ne.Rd&&ne.sd==null){he=fe=ce=M=0;var Ue=(me=ve*o1[C])*Te;if(11>C||(fe=(Te+1)/2*(M=(ve+1)/2),C==12&&(he=(ce=ve)*Te)),(Te=s(Ue+2*fe+he))==null){C=1;break e}ne.sd=Te,11>C?((ve=ne.f.RGBA).eb=Te,ve.fb=0,ve.A=me,ve.size=Ue):((ve=ne.f.kb).y=Te,ve.O=0,ve.fa=me,ve.Fd=Ue,ve.f=Te,ve.N=0+Ue,ve.Ab=M,ve.Cd=fe,ve.ea=Te,ve.W=0+Ue+fe,ve.Db=M,ve.Ed=fe,C==12&&(ve.F=Te,ve.J=0+Ue+2*fe),ve.Tc=he,ve.lb=ce)}if(M=1,ce=ne.S,fe=ne.width,he=ne.height,ce>=Ms&&13>ce)if(11>ce)C=ne.f.RGBA,M&=(me=Math.abs(C.A))*(he-1)+fe<=C.size,M&=me>=fe*o1[ce],M&=C.eb!=null;else{C=ne.f.kb,me=(fe+1)/2,Ue=(he+1)/2,ve=Math.abs(C.fa),Te=Math.abs(C.Ab);var Je=Math.abs(C.Db),Ke=Math.abs(C.lb),Ve=Ke*(he-1)+fe;M&=ve*(he-1)+fe<=C.Fd,M&=Te*(Ue-1)+me<=C.Cd,M=(M&=Je*(Ue-1)+me<=C.Ed)&ve>=fe&Te>=me&Je>=me,M&=C.y!=null,M&=C.f!=null,M&=C.ea!=null,ce==12&&(M&=Ke>=fe,M&=Ve<=C.Tc,M&=C.F!=null)}else M=0;C=M?0:2}}return C!=0||G!=null&&G.fd&&(C=WA(ne)),C}var Qa=64,Hc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hu=24,Vu=32,$A=8,gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(C){return C},B.Predictor2=function(C,M,G){return M[G+0]},B.Predictor3=function(C,M,G){return M[G+1]},B.Predictor4=function(C,M,G){return M[G-1]},B.Predictor5=function(C,M,G){return ut(ut(C,M[G+1]),M[G+0])},B.Predictor6=function(C,M,G){return ut(C,M[G-1])},B.Predictor7=function(C,M,G){return ut(C,M[G+0])},B.Predictor8=function(C,M,G){return ut(M[G-1],M[G+0])},B.Predictor9=function(C,M,G){return ut(M[G+0],M[G+1])},B.Predictor10=function(C,M,G){return ut(ut(C,M[G-1]),ut(M[G+0],M[G+1]))},B.Predictor11=function(C,M,G){var ne=M[G+0];return 0>=Wt(ne>>24&255,C>>24&255,(M=M[G-1])>>24&255)+Wt(ne>>16&255,C>>16&255,M>>16&255)+Wt(ne>>8&255,C>>8&255,M>>8&255)+Wt(255&ne,255&C,255&M)?ne:C},B.Predictor12=function(C,M,G){var ne=M[G+0];return(Nt((C>>24&255)+(ne>>24&255)-((M=M[G-1])>>24&255))<<24|Nt((C>>16&255)+(ne>>16&255)-(M>>16&255))<<16|Nt((C>>8&255)+(ne>>8&255)-(M>>8&255))<<8|Nt((255&C)+(255&ne)-(255&M)))>>>0},B.Predictor13=function(C,M,G){var ne=M[G-1];return(It((C=ut(C,M[G+0]))>>24&255,ne>>24&255)<<24|It(C>>16&255,ne>>16&255)<<16|It(C>>8&255,ne>>8&255)<<8|It(C>>0&255,ne>>0&255))>>>0};var ep=B.PredictorAdd0;B.PredictorAdd1=Ut,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var _f=B.PredictorAdd2;kt("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),kt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var Gh,lo=B.ColorIndexInverseTransform,os=B.MapARGB,Vc=B.VP8LColorIndexInverseTransformAlpha,Sf=B.MapAlpha,Xl=B.VP8LPredictorsAdd=[];Xl.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var zc,Ys,Ss,Gc,xi,Lo,ml,Uo,Aa,Mo,ka,vi,zu,pl,JA,qc,Kc,Wc,Gu,YA,$c,Zl,qu,da,Gi,Vn,zn,qr,xa=s(511),co=s(2041),Jc=s(225),Yc=s(767),ec=0,qh=co,Ku=Jc,ls=Yc,uo=xa,Ms=0,XA=1,gl=2,Tf=3,Wu=4,tc=5,Kh=6,Bf=7,Xc=8,nc=9,ZA=10,Wh=[2,3,7],Ao=[3,3,11],qi=[280,256,256,256,40],$u=[0,1,1,1,0],rc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ac=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ju=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],n1=8,Nf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ha=null,fa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],xl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],tp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Yu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],r1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sc=[],Xs=[],Ki=[],a1=1,ed=2,vl=[],cs=[];ot("UpsampleRgbLinePair",pe,3),ot("UpsampleBgrLinePair",Oe,3),ot("UpsampleRgbaLinePair",Sn,4),ot("UpsampleBgraLinePair",Wn,4),ot("UpsampleArgbLinePair",fn,4),ot("UpsampleRgba4444LinePair",St,2),ot("UpsampleRgb565LinePair",Xe,2);var ic=B.UpsampleRgbLinePair,eu=B.UpsampleBgrLinePair,yl=B.UpsampleRgbaLinePair,$h=B.UpsampleBgraLinePair,Jh=B.UpsampleArgbLinePair,td=B.UpsampleRgba4444LinePair,Yh=B.UpsampleRgb565LinePair,wl=16,Va=1<<wl-1,tu=-227,Xh=482,eb=6,s1=0,tb=s(256),za=s(256),np=s(256),If=s(256),Ff=s(Xh-tu),rp=s(Xh-tu);Nr("YuvToRgbRow",pe,3),Nr("YuvToBgrRow",Oe,3),Nr("YuvToRgbaRow",Sn,4),Nr("YuvToBgraRow",Wn,4),Nr("YuvToArgbRow",fn,4),Nr("YuvToRgba4444Row",St,2),Nr("YuvToRgb565Row",Xe,2);var Xu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],oc=[0,2,8],nb=[8,7,6,4,4,2,2,2,1,1,1,1],i1=1;this.WebPDecodeRGBA=function(C,M,G,ne,ce){var fe=XA,he=new $l,me=new Yr;he.ba=me,me.S=fe,me.width=[me.width],me.height=[me.height];var ve=me.width,Te=me.height,Ue=new ua;if(Ue==null||C==null)var Je=2;else e(Ue!=null),Je=hl(C,M,G,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(Je!=0?ve=0:(ve!=null&&(ve[0]=Ue.width[0]),Te!=null&&(Te[0]=Ue.height[0]),ve=1),ve){me.width=me.width[0],me.height=me.height[0],ne!=null&&(ne[0]=me.width),ce!=null&&(ce[0]=me.height);e:{if(ne=new Oa,(ce=new jc).data=C,ce.w=M,ce.ha=G,ce.kd=1,M=[0],e(ce!=null),((C=hl(ce.data,ce.w,ce.ha,null,null,null,M,null,ce))==0||C==7)&&M[0]&&(C=4),(M=C)==0){if(e(he!=null),ne.data=ce.data,ne.w=ce.w+ce.offset,ne.ha=ce.ha-ce.offset,ne.put=pa,ne.ac=Vr,ne.bc=ws,ne.ma=he,ce.xa){if((C=tt())==null){he=1;break e}if(function(Ke,Ve){var gt=[0],st=[0],Me=[0];t:for(;;){if(Ke==null)return 0;if(Ve==null)return Ke.a=2,0;if(Ke.l=Ve,Ke.a=0,ae(Ke.m,Ve.data,Ve.w,Ve.ha),!Qt(Ke.m,gt,st,Me)){Ke.a=3;break t}if(Ke.xb=ed,Ve.width=gt[0],Ve.height=st[0],!Qe(gt[0],st[0],1,Ke,null))break t;return 1}return e(Ke.a!=0),0}(C,ne)){if(ne=(M=Qu(ne.width,ne.height,he.Oa,he.ba))==0){t:{ne=C;n:for(;;){if(ne==null){ne=0;break t}if(e(ne.s.yc!=null),e(ne.s.Ya!=null),e(0<ne.s.Wb),e((G=ne.l)!=null),e((ce=G.ma)!=null),ne.xb!=0){if(ne.ca=ce.ba,ne.tb=ce.tb,e(ne.ca!=null),!Qc(ce.Oa,G,Tf)){ne.a=2;break n}if(!We(ne,G.width)||G.da)break n;if((G.da||Bn(ne.ca.S))&&He(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&He()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!et(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break n}ne.xb=0}if(!Ne(ne,ne.V,ne.Ba,ne.c,ne.i,G.o,Be))break n;ce.Dc=ne.Ma,ne=1;break t}e(ne.a!=0),ne=0}ne=!ne}ne&&(M=C.a)}else M=C.a}else{if((C=new bs)==null){he=1;break e}if(C.Fa=ce.na,C.P=ce.P,C.qc=ce.Sa,Dc(C,ne)){if((M=Qu(ne.width,ne.height,he.Oa,he.ba))==0){if(C.Aa=0,G=he.Oa,e((ce=C)!=null),G!=null){if(0<(ve=0>(ve=G.Md)?0:100<ve?255:255*ve/100)){for(Te=Ue=0;4>Te;++Te)12>(Je=ce.pb[Te]).lc&&(Je.ia=ve*nb[0>Je.lc?0:Je.lc]>>3),Ue|=Je.ia;Ue&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=G.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}Lu(C,ne)||(M=C.a)}}else M=C.a}M==0&&he.Oa!=null&&he.Oa.fd&&(M=WA(he.ba))}he=M}fe=he!=0?null:11>fe?me.f.RGBA.eb:me.f.kb.y}else fe=null;return fe};var o1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(B,T){for(var O="",R=0;R<4;R++)O+=String.fromCharCode(B[T++]);return O}function d(B,T){return(B[T+0]<<0|B[T+1]<<8|B[T+2]<<16)>>>0}function h(B,T){return(B[T+0]<<0|B[T+1]<<8|B[T+2]<<16|B[T+3]<<24)>>>0}new l;var m=[0],g=[0],b=[],w=new l,E=t,N=function(B,T){var O={},R=0,L=!1,Q=0,z=0;if(O.frames=[],!function(K,X,te,le){for(var ye=0;ye<le;ye++)if(K[X+ye]!=te.charCodeAt(ye))return!0;return!1}(B,T,"RIFF",4)){var ie,J;for(h(B,T+=4),T+=8;T<B.length;){var ee=u(B,T),ae=h(B,T+=4);T+=4;var q=ae+(1&ae);switch(ee){case"VP8 ":case"VP8L":O.frames[R]===void 0&&(O.frames[R]={}),(j=O.frames[R]).src_off=L?z:T-8,j.src_size=Q+ae+8,R++,L&&(L=!1,Q=0,z=0);break;case"VP8X":(j=O.header={}).feature_flags=B[T];var Y=T+4;j.canvas_width=1+d(B,Y),Y+=3,j.canvas_height=1+d(B,Y),Y+=3;break;case"ALPH":L=!0,Q=q+8,z=T-8;break;case"ANIM":(j=O.header).bgcolor=h(B,T),Y=T+4,j.loop_count=(ie=B)[(J=Y)+0]<<0|ie[J+1]<<8,Y+=2;break;case"ANMF":var Ae,j;(j=O.frames[R]={}).offset_x=2*d(B,T),T+=3,j.offset_y=2*d(B,T),T+=3,j.width=1+d(B,T),T+=3,j.height=1+d(B,T),T+=3,j.duration=d(B,T),T+=3,Ae=B[T++],j.dispose=1&Ae,j.blend=Ae>>1&1}ee!="ANMF"&&(T+=q)}return O}}(E,0);N.response=E,N.rgbaoutput=!0,N.dataurl=!1;var I=N.header?N.header:null,k=N.frames?N.frames:null;if(I){I.loop_counter=I.loop_count,m=[I.canvas_height],g=[I.canvas_width];for(var U=0;U<k.length&&k[U].blend!=0;U++);}var P=k[0],D=w.WebPDecodeRGBA(E,P.src_off,P.src_size,g,m);P.rgba=D,P.imgwidth=g[0],P.imgheight=m[0];for(var _=0;_<g[0]*m[0]*4;_++)b[_]=D[_];return this.width=g,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof j_=="function"},n=function(m,g,b,w){var E=4,N=i;switch(w){case t.image_compression.FAST:E=1,N=s;break;case t.image_compression.MEDIUM:E=6,N=o;break;case t.image_compression.SLOW:E=9,N=l}m=r(m,g,b,N);var I=j_(m,{level:E});return t.__addimage__.arrayBufferToBinaryString(I)},r=function(m,g,b,w){for(var E,N,I,k=m.length/g,U=new Uint8Array(m.length+k),P=d(),D=0;D<k;D+=1){if(I=D*g,E=m.subarray(I,I+g),w)U.set(w(E,b,N),I+D);else{for(var _,B=P.length,T=[];_<B;_+=1)T[_]=P[_](E,b,N);var O=h(T.concat());U.set(T[O],I+D)}N=E}return U},a=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var b,w=[],E=m.length;w[0]=1;for(var N=0;N<E;N+=1)b=m[N-g]||0,w[N+1]=m[N]-b+256&255;return w},i=function(m,g,b){var w,E=[],N=m.length;E[0]=2;for(var I=0;I<N;I+=1)w=b&&b[I]||0,E[I+1]=m[I]-w+256&255;return E},o=function(m,g,b){var w,E,N=[],I=m.length;N[0]=3;for(var k=0;k<I;k+=1)w=m[k-g]||0,E=b&&b[k]||0,N[k+1]=m[k]+256-(w+E>>>1)&255;return N},l=function(m,g,b){var w,E,N,I,k=[],U=m.length;k[0]=4;for(var P=0;P<U;P+=1)w=m[P-g]||0,E=b&&b[P]||0,N=b&&b[P-g]||0,I=u(w,E,N),k[P+1]=m[P]-I+256&255;return k},u=function(m,g,b){if(m===g&&g===b)return m;var w=Math.abs(g-b),E=Math.abs(m-b),N=Math.abs(m+g-b-b);return w<=E&&w<=N?m:E<=N?g:b},d=function(){return[a,s,i,o,l]},h=function(m){var g=m.map(function(b){return b.reduce(function(w,E){return w+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,b,w){var E,N,I,k,U,P,D,_,B,T,O,R,L,Q,z,ie=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(I=new uie(m)).imgData,N=I.bits,E=I.colorSpace,U=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){B=(_=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,O=new Uint8Array(B*I.colors),T=new Uint8Array(B);var ee,ae=I.pixelBitlength-I.bits;for(Q=0,z=0;Q<B;Q++){for(L=_[Q],ee=0;ee<ae;)O[z++]=L>>>ee&255,ee+=I.bits;T[Q]=L>>>ee&255}}if(I.bits===16){B=(_=new Uint32Array(I.decodePixels().buffer)).length,O=new Uint8Array(B*(32/I.pixelBitlength)*I.colors),T=new Uint8Array(B*(32/I.pixelBitlength)),R=I.colors>1,Q=0,z=0;for(var q=0;Q<B;)L=_[Q++],O[z++]=L>>>0&255,R&&(O[z++]=L>>>16&255,L=_[Q++],O[z++]=L>>>0&255),T[q++]=L>>>16&255;N=8}w!==t.image_compression.NONE&&e()?(m=n(O,I.width*I.colors,I.colors,w),D=n(T,I.width,1,w)):(m=O,D=T,ie=void 0)}if(I.colorType===3&&(E=this.color_spaces.INDEXED,P=I.palette,I.transparency.indexed)){var Y=I.transparency.indexed,Ae=0;for(Q=0,B=Y.length;Q<B;++Q)Ae+=Y[Q];if((Ae/=255)===B-1&&Y.indexOf(0)!==-1)k=[Y.indexOf(0)];else if(Ae!==B){for(_=I.decodePixels(),T=new Uint8Array(_.length),Q=0,B=_.length;Q<B;Q++)T[Q]=Y[_[Q]];D=n(T,I.width,1)}}var j=function(K){var X;switch(K){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X}(w);return ie===this.decode.FLATE_DECODE&&(J="/Predictor "+j+" "),J+="/Colors "+U+" /BitsPerComponent "+N+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:b,data:m,index:g,filter:ie,decodeParameters:J,transparency:k,palette:P,sMask:D,predictor:j,width:I.width,height:I.height,bitsPerComponent:N,colorSpace:E}}}})(sn.API),function(t){t.processGIF89A=function(e,n,r,a){var s=new Aie(e),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new QC(100).encode(u,100);return t.processJPEG.call(this,d,n,r,a)},t.processGIF87A=t.processGIF89A}(sn.API),mc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Zr.log("bit decode error:"+n)}},mc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}n!==0&&(this.pos+=4-n)}},mc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},mc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},mc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},mc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&n)/n*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},mc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},mc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=i}},mc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,a){var s=new mc(e,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new QC(100).encode(l,100);return t.processJPEG.call(this,u,n,r,a)}}(sn.API),tF.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,a){var s=new tF(e),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new QC(100).encode(l,100);return t.processJPEG.call(this,u,n,r,a)}}(sn.API),sn.API.processRGBA=function(t,e,n){for(var r=t.data,a=r.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=r[u],h=r[u+1],m=r[u+2],g=r[u+3];s[o++]=d,s[o++]=h,s[o++]=m,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},sn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},w0=sn.API,fv=w0.getCharWidthsArray=function(t,e){var n,r,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,g=t.length,b=0,w=o[0]||l,E=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(m=h&&Or(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/d:0,E.push((o[r]||w)/l+m)),b=r;return E},YI=w0.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return w0.processArabic&&(t=w0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,a)/n:fv.apply(this,arguments).reduce(function(s,i){return s+i},0)},XI=function(t,e,n,r){for(var a=[],s=0,i=t.length,o=0;s!==i&&o+e[s]<n;)o+=e[s],s++;a.push(t.slice(0,s));var l=s;for(o=0;s!==i;)o+e[s]>r&&(a.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&a.push(t.slice(l,s)),a},ZI=function(t,e,n){n||(n={});var r,a,s,i,o,l,u,d=[],h=[d],m=n.textIndent||0,g=0,b=0,w=t.split(" "),E=fv.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var N=Array(l).join(" "),I=[];w.map(function(U){(U=U.split(/\s*\n/)).length>1?I=I.concat(U.map(function(P,D){return(D&&P.length?`
`:"")+P})):I.push(U[0])}),w=I,l=YI.apply(this,[N,n])}for(s=0,i=w.length;s<i;s++){var k=0;if(r=w[s],l&&r[0]==`
`&&(r=r.substr(1),k=1),m+g+(b=(a=fv.apply(this,[r,n])).reduce(function(U,P){return U+P},0))>e||k){if(b>e){for(o=XI.apply(this,[r,a,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=a.slice(r.length-(d[0]?d[0].length:0)).reduce(function(U,P){return U+P},0)}else d=[r];h.push(d),m=b+l,g=E}else d.push(r),m+=g+b,g=E}return u=l?function(U,P){return(P?N:"")+U.join(" ")}:function(U){return U.join(" ")},h.map(u)},w0.splitTextToSize=function(t,e,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(ZI.apply(this,[r[o],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},a=0;a<e.length;a++)n[e[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=e[a];var s=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,g,b,w,E=["{"];for(var N in h){if(m=h[N],isNaN(parseInt(N,10))?g="'"+N+"'":(N=parseInt(N,10),g=(g=s(N).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof m=="number")m<0?(b=s(m).slice(3),w="-"):(b=s(m).slice(2),w=""),b=w+b.slice(0,-1)+r[b.slice(-1)];else{if(Or(m)!=="object")throw new Error("Don't know what to do with value type "+Or(m)+".");b=i(m)}E.push(g+b)}return E.push("}"),E.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,w,E={},N=1,I=E,k=[],U="",P="",D=h.length-1,_=1;_<D;_+=1)(w=h[_])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(w):w=="{"?(k.push([I,b]),I={},b=void 0):w=="}"?((g=k.pop())[0][g[1]]=I,b=void 0,I=g[0]):w=="-"?N=-1:b===void 0?n.hasOwnProperty(w)?(U+=n[w],b=parseInt(U,16)*N,N=1,U=""):U+=w:n.hasOwnProperty(w)?(P+=n[w],I[b]=parseInt(P,16)*N,N=1,b=void 0,P=""):P+=w;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(sn.API),function(t){var e=function(n){for(var r=n.length,a=new Uint8Array(r),s=0;s<r;s++)a[s]=n.charCodeAt(s);return a};t.API.events.push(["addFont",function(n){var r=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(kg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,r)}}])}(sn),function(t){function e(){return(yn.canvg?Promise.resolve(yn.canvg):D_(()=>import("./index.es-Ba0Neo4s.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}sn.API.addSvgAsImage=function(n,r,a,s,i,o,l,u){if(isNaN(r)||isNaN(a))throw Zr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Zr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,a,s,i,l,u)})}}(),sn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,n);return this},sn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function m(b,w){var E,N=!1;for(E=0;E<b.length;E+=1)b[E]===w&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)n[o[h]].value=n[o[h]].defaultValue,n[o[h]].explicitSet=!1}if(Or(t)==="object"){for(a in t)if(s=t[a],m(o,a)&&s!==void 0){if(n[a].type==="boolean"&&typeof s=="boolean")n[a].value=s;else if(n[a].type==="name"&&m(n[a].valueSet,s))n[a].value=s;else if(n[a].type==="integer"&&Number.isInteger(s))n[a].value=s;else if(n[a].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[a].value="["+l.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?w.push("/"+b+" /"+n[b].value):w.push("/"+b+" "+n[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(sn.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=s.length;h<m;++h){if(o=i.metadata.characterToGlyph(s.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(s){var i,o,l,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(s).sort(function(g,b){return g-b})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var w=u();d({data:g,addLength1:!0,objectId:w}),l("endobj");var E=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var N=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+V0(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var I=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+V0(o.fontName)),l("/FontDescriptor "+N+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+V0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+I+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=u();d({data:m,addLength1:!0,objectId:b}),l("endobj");var w=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var E=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+V0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var N=0;N<o.metadata.hmtx.widths.length;N++)o.metadata.hmtx.widths[N]=parseInt(o.metadata.hmtx.widths[N]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+V0(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},h=s.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,w=g,E="",N=0,I="",k=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(I=o,w=g,Array.isArray(o)&&(I=o[0]),N=0;N<I.length;N+=1)b[w].metadata.hasOwnProperty("cmap")&&(i=b[w].metadata.cmap.unicode.codeMap[I[N].charCodeAt(0)]),i||I[N].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?E+=I[N]:E+="";var U="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?U=m(E,w).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(U=n(E,b[w])),h.isHex=!0,{text:U,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(sn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(sn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var a,s,i,o,l,u,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,k=0;this.__bidiEngine__={};var U=function(R){var L=R.charCodeAt(),Q=L>>8,z=w[Q];return z!==void 0?h[256*z+(255&L)]:Q===252||Q===253?"AL":N.test(Q)?"L":Q===8?"R":"N"},P=function(R){for(var L,Q=0;Q<R.length;Q++){if((L=U(R.charAt(Q)))==="L")return!1;if(L==="R")return!0}return!1},D=function(R,L,Q,z){var ie,J,ee,ae,q=L[z];switch(q){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(q="AN");break;case"AL":I=!0,q="R";break;case"WS":q="N";break;case"CS":z<1||z+1>=L.length||(ie=Q[z-1])!=="EN"&&ie!=="AN"||(J=L[z+1])!=="EN"&&J!=="AN"?q="N":I&&(J="AN"),q=J===ie?J:"N";break;case"ES":q=(ie=z>0?Q[z-1]:"B")==="EN"&&z+1<L.length&&L[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&Q[z-1]==="EN"){q="EN";break}if(I){q="N";break}for(ee=z+1,ae=L.length;ee<ae&&L[ee]==="ET";)ee++;q=ee<ae&&L[ee]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(ae=L.length,ee=z+1;ee<ae&&L[ee]==="NSM";)ee++;if(ee<ae){var Y=R[z],Ae=Y>=1425&&Y<=2303||Y===64286;if(ie=L[ee],Ae&&(ie==="R"||ie==="AL")){q="R";break}}}q=z<1||(ie=L[z-1])==="B"?"N":Q[z-1];break;case"B":I=!1,a=!0,q=k;break;case"S":s=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":q="N"}return q},_=function(R,L,Q){var z=R.split("");return Q&&B(z,Q,{hiLevel:k}),z.reverse(),L&&L.reverse(),z.join("")},B=function(R,L,Q){var z,ie,J,ee,ae,q=-1,Y=R.length,Ae=0,j=[],K=k?g:m,X=[];for(I=!1,a=!1,s=!1,ie=0;ie<Y;ie++)X[ie]=U(R[ie]);for(J=0;J<Y;J++){if(ae=Ae,j[J]=D(R,X,j,J),z=240&(Ae=K[ae][b[j[J]]]),Ae&=15,L[J]=ee=K[Ae][5],z>0)if(z===16){for(ie=q;ie<J;ie++)L[ie]=1;q=-1}else q=-1;if(K[Ae][6])q===-1&&(q=J);else if(q>-1){for(ie=q;ie<J;ie++)L[ie]=ee;q=-1}X[J]==="B"&&(L[J]=0),Q.hiLevel|=ee}s&&function(te,le,ye){for(var Ce=0;Ce<ye;Ce++)if(te[Ce]==="S"){le[Ce]=k;for(var _e=Ce-1;_e>=0&&te[_e]==="WS";_e--)le[_e]=k}}(X,L,Y)},T=function(R,L,Q,z,ie){if(!(ie.hiLevel<R)){if(R===1&&k===1&&!a)return L.reverse(),void(Q&&Q.reverse());for(var J,ee,ae,q,Y=L.length,Ae=0;Ae<Y;){if(z[Ae]>=R){for(ae=Ae+1;ae<Y&&z[ae]>=R;)ae++;for(q=Ae,ee=ae-1;q<ee;q++,ee--)J=L[q],L[q]=L[ee],L[ee]=J,Q&&(J=Q[q],Q[q]=Q[ee],Q[ee]=J);Ae=ae}Ae++}}},O=function(R,L,Q){var z=R.split(""),ie={hiLevel:k};return Q||(Q=[]),B(z,Q,ie),function(J,ee,ae){if(ae.hiLevel!==0&&d)for(var q,Y=0;Y<J.length;Y++)ee[Y]===1&&(q=E.indexOf(J[Y]))>=0&&(J[Y]=E[q+1])}(z,Q,ie),T(2,z,L,Q,ie),T(1,z,L,Q,ie),z.join("")};return this.__bidiEngine__.doBidiReorder=function(R,L,Q){if(function(ie,J){if(J)for(var ee=0;ee<ie.length;ee++)J[ee]=ee;o===void 0&&(o=P(ie)),u===void 0&&(u=P(ie))}(R,L),i||!l||u)if(i&&l&&o^u)k=o?1:0,R=_(R,L,Q);else if(!i&&l&&u)k=o?1:0,R=O(R,L,Q),R=_(R,L);else if(!i||o||l||u){if(i&&!l&&o^u)R=_(R,L),o?(k=0,R=O(R,L,Q)):(k=1,R=O(R,L,Q),R=_(R,L));else if(i&&o&&!l&&u)k=1,R=O(R,L,Q),R=_(R,L);else if(!i&&!l&&o^u){var z=d;o?(k=1,R=O(R,L,Q),k=0,d=!1,R=O(R,L,Q),d=z):(k=0,R=O(R,L,Q),R=_(R,L),k=1,d=!1,R=O(R,L,Q),d=z,R=_(R,L))}}else k=0,R=O(R,L,Q);else k=o?1:0,R=O(R,L,Q);return R},this.__bidiEngine__.setOptions=function(R){R&&(i=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var a=r.text,s=(r.x,r.y,r.options||{}),i=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([n.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([n.doBidiReorder(a[o])]);r.text=i}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])}(sn),sn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new df(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Sie(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new die(this.contents),this.head=new hie(this),this.name=new vie(this),this.cmap=new wM(this),this.toUnicode={},this.hhea=new mie(this),this.maxp=new yie(this),this.hmtx=new wie(this),this.post=new gie(this),this.os2=new pie(this),this.loca=new _ie(this),this.glyf=new bie(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),(32768&(n=a>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var a,s,i,o;for(i=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return i*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ic,df=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,a;for(a=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,a,s,i,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*a+16777216*s+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,a,s;for(s=[],r=0,a=e.length;r<a;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),die=function(){var t;function e(n){var r,a,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,a,s,i,o,l,u,d,h,m,g,b,w;for(w in g=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(a=new df).writeInt(this.scalarType),a.writeShort(g),a.writeShort(h),a.writeShort(i),a.writeShort(d),s=16*g,u=a.pos+s,o=null,b=[],n)for(m=n[w],a.writeString(w),a.writeInt(t(m)),a.writeInt(u),a.writeInt(m.length),b=b.concat(m),w==="head"&&(o=u),u+=m.length;u%4;)b.push(0),u++;return a.write(b),r=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(r),a.data},t=function(n){var r,a,s,i;for(n=bM.call(n);n.length%4;)n.push(0);for(s=new df(n),a=0,r=0,i=n.length;r<i;r=r+=4)a+=s.readUInt32();return 4294967295&a},e}(),fie={}.hasOwnProperty,Nu=function(t,e){for(var n in e)fie.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ic=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var hie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new df).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),nF=function(){function t(e,n){var r,a,s,i,o,l,u,d,h,m,g,b,w,E,N,I,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),e.pos+=2,w=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),u=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),d=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),a=(this.length-e.pos+this.offset)/2,o=function(){var U,P;for(P=[],l=U=0;0<=a?U<a:U>a;l=0<=a?++U:--U)P.push(e.readUInt16());return P}(),l=N=0,k=s.length;N<k;l=++N)for(E=s[l],r=I=b=w[l];b<=E?I<=E:I>=E;r=b<=E?++I:--I)d[l]===0?i=r+u[l]:(i=o[d[l]/2+(r-b)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[r]=65535&i}e.pos=h}return t.encode=function(e,n){var r,a,s,i,o,l,u,d,h,m,g,b,w,E,N,I,k,U,P,D,_,B,T,O,R,L,Q,z,ie,J,ee,ae,q,Y,Ae,j,K,X,te,le,ye,Ce,_e,Ie,xe,se;switch(z=new df,i=Object.keys(e).sort(function(Re,et){return Re-et}),n){case"macroman":for(w=0,E=function(){var Re=[];for(b=0;b<256;++b)Re.push(0);return Re}(),I={0:0},s={},ie=0,q=i.length;ie<q;ie++)I[_e=e[a=i[ie]]]==null&&(I[_e]=++w),s[a]={old:e[a],new:I[e[a]]},E[a]=I[e[a]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(E),{charMap:s,subtable:z.data,maxGlyphID:w+1};case"unicode":for(L=[],h=[],k=0,I={},r={},N=u=null,J=0,Y=i.length;J<Y;J++)I[P=e[a=i[J]]]==null&&(I[P]=++k),r[a]={old:P,new:I[P]},o=I[P]-a,N!=null&&o===u||(N&&h.push(N),L.push(a),u=o),N=a;for(N&&h.push(N),h.push(65535),L.push(65535),O=2*(T=L.length),B=2*Math.pow(Math.log(T)/Math.LN2,2),m=Math.log(B/2)/Math.LN2,_=2*T-B,l=[],D=[],g=[],b=ee=0,Ae=L.length;ee<Ae;b=++ee){if(R=L[b],d=h[b],R===65535){l.push(0),D.push(0);break}if(R-(Q=r[R].new)>=32768)for(l.push(0),D.push(2*(g.length+T-b)),a=ae=R;R<=d?ae<=d:ae>=d;a=R<=d?++ae:--ae)g.push(r[a].new);else l.push(Q-R),D.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*T+2*g.length),z.writeUInt16(0),z.writeUInt16(O),z.writeUInt16(B),z.writeUInt16(m),z.writeUInt16(_),ye=0,j=h.length;ye<j;ye++)a=h[ye],z.writeUInt16(a);for(z.writeUInt16(0),Ce=0,K=L.length;Ce<K;Ce++)a=L[Ce],z.writeUInt16(a);for(Ie=0,X=l.length;Ie<X;Ie++)o=l[Ie],z.writeUInt16(o);for(xe=0,te=D.length;xe<te;xe++)U=D[xe],z.writeUInt16(U);for(se=0,le=g.length;se<le;se++)w=g[se],z.writeUInt16(w);return{charMap:r,subtable:z.data,maxGlyphID:k+1}}},t}(),wM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,a,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r=new nF(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var a,s;return r==null&&(r="macroman"),a=nF.encode(n,r),(s=new df).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),mie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),pie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(n.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(n.readInt());return a}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(n.readInt());return a}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),gie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="post",e.prototype.parse=function(n){var r,a,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var i;for(a=n.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(n.readUInt32());return u}).call(this)}},e}(),xie=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},vie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="name",e.prototype.parse=function(n){var r,a,s,i,o,l,u,d,h,m,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},i=h=0,m=a.length;h<m;i=++h)s=a[i],n.pos=s.offset,d=n.readString(s.length),o=new xie(d,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),yie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),wie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,a,s,i,o,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)h.push(n.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(a));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),bM=[].slice,bie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,a,s,i,o,l,u,d,h,m;return n in this.cache?this.cache[n]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(n),(s=i.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+a,o=(l=new df(r.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[n]=o===-1?new Eie(l,d,m,u,h):new Cie(l,o,d,m,u,h),this.cache[n]))},e.prototype.encode=function(n,r,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=r.length;l<u;l++)s=n[r[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},e}(),Cie=function(){function t(e,n,r,a,s,i){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Eie=function(){function t(e,n,r,a,s){var i,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new df(bM.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),_ie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Nu(e,Ic),e.prototype.tag="loca",e.prototype.parse=function(n){var r,a;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*n.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(n.readUInt32());return i}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<r.length&&r[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),h=0;h<a.length;++h)d[4*h+3]=255&a[h],d[4*h+2]=(65280&a[h])>>8,d[4*h+1]=(16711680&a[h])>>16,d[4*h]=(4278190080&a[h])>>24;return d},e}(),Sie=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,a,s;for(n in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=a[r];return e},t.prototype.glyphsFor=function(e){var n,r,a,s,i,o,l;for(a={},i=0,o=e.length;i<o;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in n=[],a)(r=a[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],a[s]=r;return a},t.prototype.encode=function(e,n){var r,a,s,i,o,l,u,d,h,m,g,b,w,E,N;for(a in r=wM.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},N=r.charMap)g[(l=N[a]).old]=l.new;for(b in m=r.maxGlyphID,i)b in g||(g[b]=m++);return d=function(I){var k,U;for(k in U={},I)U[I[k]]=k;return U}(g),h=Object.keys(d).sort(function(I,k){return I-k}),w=function(){var I,k,U;for(U=[],I=0,k=h.length;I<k;I++)o=h[I],U.push(d[o]);return U}(),s=this.font.glyf.encode(i,w,g),u=this.font.loca.encode(s.offsets,w),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();sn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,a,s,i;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in s=["<<"],n)i=n[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+n},e}();function CM(t,e,n,r,a){r=r||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),n+=o*(2-s),r.valign==="middle"?n-=m/2*u:r.valign==="bottom"&&(n-=m*u),r.halign==="center"||r.halign==="right"){var g=o;if(r.halign==="center"&&(g*=.5),h&&m>=1){for(var b=0;b<h.length;b++)a.text(h[b],e-a.getStringUnitWidth(h[b])*g,n),n+=u;return a}e-=a.getStringUnitWidth(t)*g}return r.halign==="justify"?a.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):a.text(t,e,n),a}var rF={},um=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:rF=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,a,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,a,s){return this.jsPDFDocument.rect(e,n,r,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return rF||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),q_=function(t,e){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},q_(t,e)};function EM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");q_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _M=function(t){EM(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function Tie(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Bie(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function ny(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],a=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function SM(t,e,n,r){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var i=TM(a,!1);i&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,i)}function TM(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function Cw(t,e){var n,r,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function BM(t,e){var n=Cw(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function Nie(t,e,n,r,a){var s={},i=1.3333333333333333,o=HC(e,function(k){return a.getComputedStyle(k).backgroundColor});o!=null&&(s.fillColor=o);var l=HC(e,function(k){return a.getComputedStyle(k).color});l!=null&&(s.textColor=l);var u=Iie(r,n);u&&(s.cellPadding=u);var d="borderTopColor",h=i*n,m=r.borderTopWidth;if(r.borderBottomWidth===m&&r.borderRightWidth===m&&r.borderLeftWidth===m){var g=(parseFloat(m)||0)/h;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var b=HC(e,function(k){return a.getComputedStyle(k)[d]});b!=null&&(s.lineColor=b);var w=["left","right","center","justify"];w.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),w=["middle","bottom","top"],w.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var E=parseInt(r.fontSize||"");isNaN(E)||(s.fontSize=E/i);var N=kie(r);N&&(s.fontStyle=N);var I=(r.fontFamily||"").toLowerCase();return t.indexOf(I)!==-1&&(s.font=I),s}function kie(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function HC(t,e){var n=NM(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var a=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function NM(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:NM(t.parentElement,e):n}function Iie(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(o){return parseInt(o||"0")/r}),i=Cw(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function kM(t,e,n,r,a){var s,i;r===void 0&&(r=!1),a===void 0&&(a=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],w=(i=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),E=Fie(l,u,n,b,r,a);E&&(w==="thead"?d.push(E):w==="tfoot"?m.push(E):h.push(E))}return{head:d,body:h,foot:m}}function Fie(t,e,n,r,a,s){for(var i=new _M(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=Nie(t,l,e,u,n)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Rie(l)})}}var h=n.getComputedStyle(r);if(i.length>0&&(a||h.display!=="none"))return i}function Rie(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function Die(t,e,n){for(var r=0,a=[t,e,n];r<a.length;r++){var s=a[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function pA(t,e,n,r,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function IM(t,e){var n=new um(t),r=n.getDocumentOptions(),a=n.getGlobalOptions();Die(a,r,e);var s=pA({},a,r,e),i;typeof window<"u"&&(i=window);var o=Lie(a,r,e),l=Uie(a,r,e),u=Mie(n,s),d=jie(n,s,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function Lie(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=n[l];r.columnStyles=pA({},u,d,h)}else{var m=[t,e,n],g=m.map(function(b){return b[l]||{}});r[l]=pA({},g[0],g[1],g[2])}},s=0,i=Object.keys(r);s<i.length;s++){var o=i[s];a(o)}return r}function Uie(t,e,n){for(var r=[t,e,n],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=r;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function Mie(t,e){var n,r,a,s,i,o,l,u,d,h,m,g,b=Cw(e.margin,40/t.scaleFactor()),w=(n=Pie(t,e.startY))!==null&&n!==void 0?n:b.top,E;e.showFoot===!0?E="everyPage":e.showFoot===!1?E="never":E=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var I=(s=e.useCss)!==null&&s!==void 0?s:!1,k=e.theme||(I?"plain":"striped"),U=!!e.horizontalPageBreak,P=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:I,theme:k,startY:w,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:N,showFoot:E,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:U,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function Pie(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),a=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var i=n.startPageNumber+n.pageNumber-1;s=i===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function jie(t,e,n){var r=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(n){var o=kM(t,e.html,n,i,e.useCss)||{};r=o.head||r,a=o.body||r,s=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Oie(r,a,s);return{columns:l,head:r,body:a,foot:s}}function Oie(t,e,n){var r=t[0]||e[0]||n[0]||[],a=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(r)?o=r[parseInt(s)]:o=r[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(r)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var K_=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),Qie=function(t){EM(e,t);function e(n,r,a,s,i,o){var l=t.call(this,n,r,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return e}(K_),Hie=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,a,s,i){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new Qie(e,this,r,a,s,i),h=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,a=this.hooks.didDrawPage;r<a.length;r++){var s=a[r];s(new K_(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,a=this.hooks.willDrawPage;r<a.length;r++){var s=a[r];s(new K_(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),FM=function(){function t(e,n,r,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof _M&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,a){var s;return Math.max(r,((s=n.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var a=n.cells[r.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(a,s){var i=r.cells[s.index];if(!i)return 0;var o=n.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},t}(),RM=function(){function t(e,n,r){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");r=this.x+a/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*n,s=r*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=Cw(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),Vie=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,a=e.allRows();r<a.length;r++){var s=a[r],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(n=Math.max(n,i.styles.cellWidth))}return n},t}();function zie(t,e){Gie(t,e);var n=[],r=0;e.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(e);i?s.width=i:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var a=e.getWidth(t.pageSize().width)-r;a&&(a=W_(n,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=W_(n,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Kie(e),Wie(e,t),qie(e)}function Gie(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,a=BM(t,e);e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,l,null);var h=u.padding("horizontal");u.contentWidth=ny(u.text,u.styles,t)+h;var m=ny(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/n;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function W_(t,e,n){for(var r=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var i=t[s],o=i.wrappedWidth/a,l=r*o,u=i.width+l,d=n(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(g){return e<0?g.width>n(g):!0});m.length&&(e=W_(m,e,n))}return e}function qie(t){for(var e={},n=1,r=t.allRows(),a=0;a<r.length;a++)for(var s=r[a],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,n=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=r.length-a,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:s}}}}}function Kie(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],a=null,s=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])s+=l.width,delete r.cells[l.index];else if(a){var u=a;delete r.cells[l.index],a=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function Wie(t,e){for(var n={count:0,height:0},r=0,a=t.allRows();r<a.length;r++){for(var s=a[r],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=aF(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=aF(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<m*u.rowSpan?n={height:m,count:u.rowSpan}:n&&n.count>0&&n.height>m&&(m=n.height),m>s.height&&(s.height=m)}}n.count--}}function aF(t,e,n,r,a){return t.map(function(s){return $ie(s,e,n,r,a)})}function $ie(t,e,n,r,a){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=ny(t,n,r))return t;for(;e<ny(t+a,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function DM(t,e){var n=new um(t),r=Jie(e,n.scaleFactor()),a=new Hie(e,r);return zie(n,a),n.applyStyles(n.userStyles),a}function Jie(t,e){var n=t.content,r=Xie(n.columns);if(n.head.length===0){var a=sF(r,"head");a&&n.head.push(a)}if(n.foot.length===0){var a=sF(r,"foot");a&&n.foot.push(a)}var s=t.settings.theme,i=t.styles;return{columns:r,head:VC("head",n.head,r,i,s,e),body:VC("body",n.body,r,i,s,e),foot:VC("foot",n.foot,r,i,s,e)}}function VC(t,e,n,r,a,s){var i={},o=e.map(function(l,u){for(var d=0,h={},m=0,g=0,b=0,w=n;b<w.length;b++){var E=w[b];if(i[E.index]==null||i[E.index].left===0)if(g===0){var N=void 0;Array.isArray(l)?N=l[E.index-m-d]:N=l[E.dataKey];var I={};typeof N=="object"&&!Array.isArray(N)&&(I=(N==null?void 0:N.styles)||{});var k=Zie(t,E,u,a,r,s,I),U=new RM(N,k,t);h[E.dataKey]=U,h[E.index]=U,g=U.colSpan-1,i[E.index]={left:U.rowSpan-1,times:g}}else g--,m++;else i[E.index].left--,g=i[E.index].times,d++}return new FM(l,u,t,h)});return o}function sF(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var a=Yie(e,r.raw);a!=null&&(n[r.dataKey]=a)}}),Object.keys(n).length>0?n:null}function Yie(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Xie(t){return t.map(function(e,n){var r,a;return typeof e=="object"?a=(r=e.dataKey)!==null&&r!==void 0?r:n:a=n,new Vie(a,e,n)})}function Zie(t,e,n,r,a,s,i){var o=Bie(r),l;t==="head"?l=a.headStyles:t==="body"?l=a.bodyStyles:t==="foot"&&(l=a.footStyles);var u=pA({},o.table,o[t],a.styles,l),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&n%2===0?pA({},o.alternateRow,a.alternateRowStyles):{},g=Tie(s),b=pA({},g,u,m,h);return pA(b,i)}function eoe(t,e,n){var r;n===void 0&&(n={});var a=BM(t,e),s=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var g=e.columns.find(function(b){return b.dataKey===m||b.index===m});g&&!s.has(g.index)&&(s.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(s.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||a>=h)u=!1,i.push(d),o.push(e.columns[d]),a-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function toe(t,e){for(var n=[],r=0;r<e.columns.length;r++){var a=eoe(t,e,{start:r});a.columns.length&&(n.push(a),r=a.lastIndex)}return n}function LM(t,e){var n=e.settings,r=n.startY,a=n.margin,s={x:a.left,y:r},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+a.bottom+i;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,g){return m+g.height},0);o+=u}var d=new um(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(MM(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var h=pA({},s);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?noe(d,e,h,s):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(m){return NA(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,g){var b=g===e.body.length-1;ry(d,e,m,b,h,s,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(m){return NA(d,e,m,s,e.columns)})),SM(d,e,h,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function noe(t,e,n,r){var a=toe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Ig(t,e,n,r,u.columns,!0):iF(t,e,r,u.columns),roe(t,e,n,r,u.columns),zC(t,e,r,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Ig(t,e,n,r,d,!0):iF(t,e,r,d),u=oF(t,e,i+1,r,d),zC(t,e,r,d)}var h=u-i;a.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Ig(t,e,n,r,m.columns,!0),oF(t,e,i+1,r,m.columns,h),zC(t,e,r,m.columns)}),i=u};i<e.body.length-1;)l()}function iF(t,e,n,r){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return NA(t,e,s,n,r)})}function roe(t,e,n,r,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,i){var o=i===e.body.length-1;ry(t,e,s,o,n,r,a)})}function oF(t,e,n,r,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var i=Math.min(n+s,e.body.length),o=-1;return e.body.slice(n,i).forEach(function(l,u){var d=n+u===e.body.length-1,h=UM(t,e,d,r);l.canEntireRowFit(h,a)&&(NA(t,e,l,r,a),o=n+u)}),o}function zC(t,e,n,r){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return NA(t,e,s,n,r)})}function aoe(t,e,n){var r=n.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/r);return Math.max(0,s)}function soe(t,e,n,r){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,i=0,o=n.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new RM(u.raw,u.styles,u.section);d=pA(d,u),d.text=[];var h=aoe(u,e,r);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var m=r.scaleFactor(),g=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,g),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var b=new FM(t.raw,-1,t.section,a,!0);b.height=s;for(var w=0,E=n.columns;w<E.length;w++){var l=E[w],d=b.cells[l.index];d&&(d.height=b.height);var u=t.cells[l.index];u&&(u.height=t.height)}return b}function ioe(t,e,n,r){var a=t.pageSize().height,s=r.settings.margin,i=s.top+s.bottom,o=a-i;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function ry(t,e,n,r,a,s,i){var o=UM(t,e,r,s);if(n.canEntireRowFit(o,i))NA(t,e,n,s,i);else if(ioe(t,n,o,e)){var l=soe(n,o,e,t);NA(t,e,n,s,i),Ig(t,e,a,s,i),ry(t,e,l,r,a,s,i)}else Ig(t,e,a,s,i),ry(t,e,n,r,a,s,i)}function NA(t,e,n,r,a){r.x=e.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}ooe(t,l,r);var d=l.getTextPos();CM(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function ooe(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var a=TM(r.lineWidth,r.fillColor);a&&t.rect(e.x,n.y,e.width,e.height,a)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),loe(t,e,n,r.lineWidth))}function loe(t,e,n,r){var a,s,i,o;r.top&&(a=n.x,s=n.y,i=n.x+e.width,o=n.y,r.right&&(i+=.5*r.right),r.left&&(a-=.5*r.left),l(r.top,a,s,i,o)),r.bottom&&(a=n.x,s=n.y+e.height,i=n.x+e.width,o=n.y+e.height,r.right&&(i+=.5*r.right),r.left&&(a-=.5*r.left),l(r.bottom,a,s,i,o)),r.left&&(a=n.x,s=n.y,i=n.x,o=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,a,s,i,o)),r.right&&(a=n.x+e.width,s=n.y,i=n.x+e.width,o=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,a,s,i,o));function l(u,d,h,m,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,m,g,"S")}}function UM(t,e,n,r){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-a}function Ig(t,e,n,r,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return NA(t,e,o,r,a)}),e.callEndPageHooks(t,r);var i=e.settings.margin;SM(t,e,n,r),MM(t),e.pageNumber++,r.x=i.left,r.y=i.top,n.y=i.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return NA(t,e,o,r,a)}),t.applyStyles(t.userStyles))}function MM(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function coe(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],a=IM(this,r),s=DM(this,a);return LM(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,a){CM(e,n,r,a,this)},t.API.autoTableSetDefaults=function(e){return um.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){um.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new um(this),s=kM(a,e,window,n,!1),i=s.head,o=s.body,l=((r=i[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var GC;function Zo(t,e){var n=IM(t,e),r=DM(t,n);LM(t,r)}try{if(typeof window<"u"&&window){var lF=window,cF=lF.jsPDF||((GC=lF.jspdf)===null||GC===void 0?void 0:GC.jsPDF);cF&&coe(cF)}}catch(t){console.error("Could not apply autoTable plugin",t)}const uoe="usuariosLiceo",uF="rubricasInteractivas",AF="evaluacionesPruebas",dF="rubricasEstaticas",Aoe=["Seleccin mltiple","Verdadero o Falso","Desarrollo","Trminos pareados","Comprensin de lectura"],fF={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},w2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},doe=({open:t})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):A.jsxs(A.Fragment,{children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),foe=({item:t,index:e,showAnswers:n})=>{const r=Z.useMemo(()=>t.tipo==="Trminos pareados"?[...t.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[t]);return A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&A.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Seleccin mltiple"&&A.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((a,s)=>{const i=n&&s===t.respuestaCorrecta;return A.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[A.jsx("div",{className:"w-5 h-5 border rounded-full"}),A.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),t.tipo==="Desarrollo"&&A.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&A.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[A.jsx("span",{children:"V ___ F ___"}),n&&A.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Trminos pareados"&&A.jsxs("div",{className:"mt-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),A.jsx("div",{className:"space-y-2",children:t.pares.map((a,s)=>A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definicin"}),A.jsx("div",{className:"space-y-2",children:r.map((a,s)=>A.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),n&&A.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[A.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),A.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((a,s)=>A.jsxs("li",{children:[A.jsx("strong",{children:a.concepto}),"  ",a.definicion]},s))})]})]}),t.tipo==="Comprensin de lectura"&&A.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[A.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((a,s)=>{if(a.tipo==="Seleccin mltiple"){const i=a;return A.jsxs("div",{className:"pt-2",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&A.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),A.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=n&&l===i.respuestaCorrecta;return A.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[A.jsx("div",{className:"w-5 h-5 border rounded-full"}),A.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return A.jsxs("div",{className:"pt-2",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&A.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),A.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},t.id)},hoe=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState(null),[a,s]=Z.useState(!1),[i,o]=Z.useState(!1),[l,u]=Z.useState(null),[d,h]=Z.useState(!1),m={nombre:"",asignatura:Hl[0],nivel:v_[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=Z.useState(m);Z.useEffect(()=>{try{const B=localStorage.getItem(AF);B&&e(JSON.parse(B))}catch(B){console.error("Error loading tests from localStorage",B)}},[]);const w=B=>{e(B),localStorage.setItem(AF,JSON.stringify(B))},E=B=>{const{name:T,value:O}=B.target;b(R=>({...R,[T]:O}))},N=B=>{b(T=>{const O={...T.tiposActividad};return O[B]?delete O[B]:O[B]=fF[B][0],{...T,tiposActividad:O}})},I=(B,T)=>{b(O=>({...O,tiposActividad:{...O.tiposActividad,[B]:T}}))},k=B=>{b(T=>{const O=T.selectedNee.includes(B)?T.selectedNee.filter(R=>R!==B):[...T.selectedNee,B];return{...T,selectedNee:O}})},U=async B=>{if(B.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const T=Object.entries(g.tiposActividad).map(([L,Q])=>`- ${Q} tem(s) de tipo '${L}'`).join(`
`),O=g.isNee&&g.selectedNee.length>0?`
            **Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes caractersticas: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negacin o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes ms pequeas si es posible.
            - Para 'Comprensin de Lectura', usa textos ms cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Seleccin Mltiple', asegrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",R=`
            Eres un experto en evaluacin educativa para la educacin media en Chile.
            Genera una prueba o gua de trabajo completa en formato JSON estructurado.
            
            Informacin base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de tems solicitados:
              ${T}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
            
            ${O}

            Tu respuesta DEBE ser un nico objeto JSON que contenga:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluacin.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de tem solicitado. Cada actividad debe tener:
                - 'id': Un UUID.
                - 'titulo': Un ttulo descriptivo (ej: "Actividad 1: Seleccin Mltiple").
                - 'instrucciones': Instrucciones para esa actividad especfica.
                - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                    - 'id': Un UUID.
                    - 'tipo': El tipo de tem.
                    - 'pregunta': El enunciado de la pregunta.
                    - 'puntaje': Un puntaje numrico.
                    - 'habilidadBloom': La habilidad principal de la Taxonoma de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                    - Campos adicionales segn el tipo:
                        - Para 'Seleccin mltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (ndice numrico de la respuesta correcta, de 0 a 3).
                        - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                        - Para 'Trminos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                        - Para 'Comprensin de lectura': 'texto' (string con el texto) y 'preguntas' (un array de sub-preguntas que pueden ser 'Seleccin mltiple' o 'Desarrollo', y cada una debe tener tambin 'habilidadBloom').
                        - Para 'Desarrollo': no necesita campos adicionales.
        `;try{el("Evaluacin - Pruebas");const Q=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:R,config:{responseMimeType:"application/json"}}),z=JSON.parse(Q.text);let ie=0;z.actividades.forEach(ee=>{ee.items.forEach(ae=>{ie+=ae.puntaje||0,ae.tipo==="Comprensin de lectura"&&ae.preguntas.forEach(q=>{ie+=q.puntaje||0})})});const J={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:z.objetivo,instruccionesGenerales:z.instruccionesGenerales,puntajeIdeal:ie,actividades:z.actividades,dificultad:g.dificultad,adaptacionNEE:g.isNee?g.selectedNee:void 0};r(J),h(!1)}catch(L){console.error(L),u("Error al generar la prueba con IA. Intntelo de nuevo.")}finally{s(!1)}},P=()=>{n&&(w([n,...t.filter(B=>B.id!==n.id)]),alert("Prueba guardada con xito."))},D=B=>{window.confirm("Eliminar esta prueba?")&&(w(t.filter(T=>T.id!==B)),(n==null?void 0:n.id)===B&&r(null))},_=async B=>{o(!0);const T=new sn("p","mm","a4"),O=20,R=T.internal.pageSize.getHeight(),L=T.internal.pageSize.getWidth(),Q=L-O*2;let z=O;const ie=ae=>{ae.setFillColor(230,230,230),ae.rect(0,0,L,25,"F"),ae.setFontSize(9),ae.setTextColor(0,0,0),ae.text("LICEO INDUSTRIAL DE RECOLETA",O,15,{align:"left"}),ae.text("SUBDIRECCIN DE GESTIN PEDAGGICA",L-O,15,{align:"right"})};ie(T),z=30,T.setTextColor(0,0,0),T.setFont("helvetica","bold"),T.setFontSize(16),T.text(B.nombre,L/2,z,{align:"center"}),z+=10,Zo(T,{startY:z,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},B.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},B.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},B.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:B.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:B.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:ae=>{ie(T)}}),z=T.lastAutoTable.finalY+10;const J=ae=>{z+ae>R-O&&(T.addPage(),ie(T),z=O+15,T.setTextColor(0,0,0))},ee=(ae,q)=>{T.setFont("helvetica",q.isBold?"bold":"normal"),T.setFontSize(q.fontSize);const Y=Array.isArray(ae)?ae.join(`
`):ae;return T.getTextDimensions(Y,{maxWidth:q.width}).h};for(const ae of B.actividades){let q=ee(ae.titulo,{fontSize:12,width:Q,isBold:!0})+ee(ae.instrucciones,{fontSize:10,width:Q})+12;J(q),T.setFont("helvetica","bold"),T.setFontSize(12),T.setTextColor(0,0,0),T.text(ae.titulo,O,z),z+=8,T.setFont("helvetica","normal"),T.setFontSize(10);const Y=T.splitTextToSize(ae.instrucciones,Q);T.text(Y,O,z),z+=Y.length*(10*.35*1.15)+4;for(const[Ae,j]of ae.items.entries()){let K=0;const X=`${Ae+1}. ${j.pregunta} (${j.puntaje} pts)`;switch(K+=ee(X,{fontSize:10,width:Q,isBold:!0}),j.tipo){case"Seleccin mltiple":j.opciones.forEach(ye=>{K+=ee(ye,{fontSize:10,width:Q-5})+3}),K+=7;break;case"Verdadero o Falso":K+=10;break;case"Desarrollo":K+=30;break;case"Trminos pareados":K+=j.pares.length*12+20;break;case"Comprensin de lectura":const le=j;K+=ee(le.texto,{fontSize:10,width:Q-10})+10,le.preguntas.forEach(ye=>{const Ce=`${ye.pregunta} (${ye.puntaje} pts)`;K+=ee(Ce,{fontSize:10,width:Q-5,isBold:!0}),ye.tipo==="Seleccin mltiple"?(ye.opciones.forEach(_e=>{K+=ee(_e,{fontSize:10,width:Q-10})+3}),K+=7):ye.tipo==="Desarrollo"&&(K+=30),K+=5}),K+=15;break}J(K),T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(0,0,0);const te=T.splitTextToSize(X,Q);if(T.text(te,O,z),z+=te.length*5+4,T.setFont("helvetica","normal"),j.tipo==="Seleccin mltiple")j.opciones.forEach((le,ye)=>{T.text(`${String.fromCharCode(65+ye)}) ${le}`,O+5,z),z+=7});else if(j.tipo==="Verdadero o Falso")T.text("V ______   F ______",O+5,z),z+=10;else if(j.tipo==="Desarrollo")T.setDrawColor(200,200,200),T.setFillColor(245,245,245),T.rect(O,z,Q,25,"FD"),z+=30;else if(j.tipo==="Trminos pareados"){const le=[...j.pares.map(Ce=>Ce.definicion)].sort(()=>Math.random()-.5),ye=j.pares.map((Ce,_e)=>[`${_e+1}. ${Ce.concepto}`,`(   ) ${le[_e]}`]);Zo(T,{startY:z,head:[["Columna A: Concepto","Columna B: Definicin"]],body:ye,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Ce=>ie(T)}),z=T.lastAutoTable.finalY+10}else if(j.tipo==="Comprensin de lectura"){const le=j;T.setFillColor(240,240,240),T.setDrawColor(200,200,200);const ye=T.splitTextToSize(le.texto,Q-10),Ce=ye.length*(10*.35*1.15)+8;T.rect(O,z,Q,Ce,"FD"),z+=4,T.setFont("helvetica","normal"),T.setFontSize(10),T.setTextColor(0,0,0),T.text(ye,O+5,z),z+=Ce;for(const[_e,Ie]of le.preguntas.entries()){const xe=`${_e+1}. ${Ie.pregunta} (${Ie.puntaje} pts)`;T.setFont("helvetica","bold");const se=T.splitTextToSize(xe,Q-5);T.text(se,O+5,z),z+=se.length*5+4,T.setFont("helvetica","normal"),Ie.tipo==="Seleccin mltiple"?Ie.opciones.forEach((Re,et)=>{T.text(`${String.fromCharCode(65+et)}) ${Re}`,O+10,z),z+=7}):Ie.tipo==="Desarrollo"&&(T.setDrawColor(200,200,200),T.setFillColor(245,245,245),T.rect(O+5,z,Q-5,25,"FD"),z+=30)}}z+=5}}T.save(`${B.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return n?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("button",{onClick:()=>r(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[A.jsx(doe,{open:!d})," ",A.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),A.jsx("button",{onClick:P,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),A.jsxs("button",{onClick:()=>_(n),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":A.jsx(v8,{})," PDF"]})]})]}),A.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[A.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[A.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),A.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),A.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:n.nombre}),A.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Asignatura:"})," ",n.asignatura]}),A.jsxs("p",{className:"text-right",children:[A.jsx("strong",{children:"Puntaje Ideal:"})," ",n.puntajeIdeal]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Nivel:"})," ",n.nivel]})]}),A.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[A.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",n.dificultad||"Intermedio"]}),n.adaptacionNEE&&n.adaptacionNEE.length>0&&A.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",n.adaptacionNEE.join(", ")]})]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",n.objetivo]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Instrucciones Generales:"})," ",n.instruccionesGenerales]})]}),n.actividades.map(B=>A.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[A.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:B.titulo}),A.jsx("p",{className:"italic text-sm mb-4",children:B.instrucciones}),A.jsx("div",{className:"space-y-6",children:B.items.map((T,O)=>A.jsx(foe,{item:T,index:O,showAnswers:d},T.id))})]},B.id))]})]}):A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),A.jsxs("form",{onSubmit:U,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:E,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),A.jsx("div",{}),A.jsx("select",{name:"asignatura",value:g.asignatura,onChange:E,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Hl.map(B=>A.jsx("option",{children:B},B))}),A.jsx("select",{name:"nivel",value:g.nivel,onChange:E,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:v_.map(B=>A.jsx("option",{children:B},B))})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),A.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((B,T)=>A.jsx("button",{type:"button",onClick:()=>b(O=>({...O,dificultad:B})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${T===0?"rounded-l-lg":""} ${T===2?"rounded-r-lg":""}
                                            ${g.dificultad===B?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:B},B))})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:g.isNee,onChange:B=>b(T=>({...T,isNee:B.target.checked,selectedNee:B.target.checked?T.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&A.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:J2.map(B=>A.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(B),onChange:()=>k(B),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),A.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:B})]},B))})]})]})]}),A.jsx("textarea",{name:"contenido",value:g.contenido,onChange:E,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("div",{className:"space-y-3",children:Aoe.map(B=>A.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[A.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[B],onChange:()=>N(B),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:B})]}),g.tiposActividad[B]&&A.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[A.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),fF[B].map(T=>A.jsx("button",{type:"button",onClick:()=>I(B,T),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[B]===T?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:T},T))]})]},B))}),l&&A.jsx("p",{className:"text-red-500 text-sm",children:l}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),A.jsx("div",{className:"space-y-2",children:t.length>0?t.map(B=>A.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.nombre}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[B.asignatura," - ",B.nivel," (",new Date(B.fechaCreacion).toLocaleDateString(),")"]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>r(B),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),A.jsx("button",{onClick:()=>D(B.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},B.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},moe=({rubricas:t,onUpdate:e})=>{const[n,r]=Z.useState(null),[a,s]=Z.useState("list"),[i,o]=Z.useState(!1),[l,u]=Z.useState(""),d=async(U,P)=>{if(!U.trim()||!P.trim()){alert("El ttulo y la descripcin son obligatorios.");return}o(!0);const D=`Crea una rbrica de evaluacin detallada sobre "${U}" con el propsito de "${P}". Genera entre 3 y 5 dimensiones de evaluacin. Para cada dimensin, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado.`,_={type:Gt.ARRAY,items:{type:Gt.OBJECT,properties:{dimension:{type:Gt.STRING},insuficiente:{type:Gt.STRING},suficiente:{type:Gt.STRING},competente:{type:Gt.STRING},avanzado:{type:Gt.STRING}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{el("Evaluacin - Rbricas");const T=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json",responseSchema:_}}),O=JSON.parse(T.text),R={id:crypto.randomUUID(),titulo:U,descripcion:P,fechaCreacion:new Date().toISOString(),dimensiones:O.map(L=>({id:crypto.randomUUID(),nombre:L.dimension,niveles:{insuficiente:L.insuficiente,suficiente:L.suficiente,competente:L.competente,avanzado:L.avanzado}}))};r(R)}catch(B){console.error(B),alert("Error al generar la rbrica con IA.")}finally{o(!1)}},h=async()=>{if(!l.trim()||!n)return;const U=crypto.randomUUID(),P={id:U,nombre:l,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};r(B=>B?{...B,dimensiones:[...B.dimensiones,P]}:null),u("");const D=`Para una rbrica sobre "${n.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensin: "${l}". Considera las dimensiones existentes como contexto: ${n.dimensiones.map(B=>B.nombre).join(", ")}.`,_={type:Gt.OBJECT,properties:{insuficiente:{type:Gt.STRING},suficiente:{type:Gt.STRING},competente:{type:Gt.STRING},avanzado:{type:Gt.STRING}},required:["insuficiente","suficiente","competente","avanzado"]};try{el("Evaluacin - Rbricas (Aadir Dimensin)");const T=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json",responseSchema:_}}),O=JSON.parse(T.text);r(R=>R?{...R,dimensiones:R.dimensiones.map(L=>L.id===U?{...L,niveles:O,isLoading:!1}:L)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),r(T=>T?{...T,dimensiones:T.dimensiones.filter(O=>O.id!==U)}:null)}},m=()=>{if(!n)return;const P=t.some(D=>D.id===n.id)?t.map(D=>D.id===n.id?n:D):[n,...t];e(P),s("list"),r(null)},g=U=>{r(U),s("form")},b=U=>{window.confirm("Eliminar esta rbrica?")&&e(t.filter(P=>P.id!==U))},w=()=>{r({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),s("form")},E=(U,P,D)=>{n&&r(_=>_?{..._,dimensiones:_.dimensiones.map(B=>B.id!==U?B:P==="nombre"?{...B,nombre:D}:{...B,niveles:{...B.niveles,[P]:D}})}:null)},N=(U,P)=>{r(D=>D?{...D,[U]:P}:null)},I=U=>{n&&r(P=>P?{...P,dimensiones:P.dimensiones.filter(D=>D.id!==U)}:null)},k=()=>{if(!n)return null;const U="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",P=`${U} resize-none text-sm`;return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),A.jsx("button",{onClick:()=>s("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),A.jsx("input",{value:n.titulo,onChange:D=>N("titulo",D.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${U} mt-1`})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),A.jsx("textarea",{value:n.descripcion,onChange:D=>N("descripcion",D.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${U} mt-1`})]})]}),n.dimensiones.length===0&&A.jsx("div",{className:"text-center py-4",children:A.jsx("button",{onClick:()=>d(n.titulo,n.descripcion),disabled:i||!n.titulo||!n.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:i?"Generando...":" Generar Rbrica con IA"})}),n.dimensiones.length>0&&A.jsxs("div",{className:"space-y-4",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),A.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:A.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(D=>A.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:D},D))})}),A.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.dimensiones.map(D=>A.jsxs("tr",{children:[A.jsx("td",{className:"p-2 w-1/5",children:A.jsx("textarea",{value:D.nombre,onChange:_=>E(D.id,"nombre",_.target.value),rows:4,className:P})}),Object.keys(D.niveles).map(_=>A.jsx("td",{className:"p-2 w-1/5",children:D.isLoading?A.jsx("div",{className:"flex justify-center items-center h-full",children:A.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):A.jsx("textarea",{value:D.niveles[_],onChange:B=>E(D.id,_,B.target.value),rows:4,className:P})},_)),A.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:A.jsx("button",{onClick:()=>I(D.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},D.id))})]})}),A.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[A.jsxs("div",{className:"flex-grow",children:[A.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),A.jsx("input",{value:l,onChange:D=>u(D.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${U} mt-1`})]}),A.jsx("button",{onClick:h,disabled:!l.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),A.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:A.jsx("button",{onClick:m,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rbrica"})})]})};return a==="list"?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),A.jsx("button",{onClick:w,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(U=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.titulo}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:U.descripcion})]}),A.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[A.jsx("button",{onClick:()=>g(U),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),A.jsx("button",{onClick:()=>b(U.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},U.id)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):k()},poe=({allUsers:t,rubricasEstaticas:e})=>{const[n,r]=Z.useState([]),[a,s]=Z.useState(null),[i,o]=Z.useState(null),[l,u]=Z.useState({rubricaEstaticaId:"",curso:""}),[d,h]=Z.useState(null);Z.useEffect(()=>{try{const k=localStorage.getItem(uF);k&&r(JSON.parse(k))}catch(k){console.error("Error loading interactive rubrics",k)}},[]);const m=k=>{r(k),localStorage.setItem(uF,JSON.stringify(k))},g=k=>{k.preventDefault();const U=e.find(D=>D.id===l.rubricaEstaticaId);if(!U||!l.curso){alert("Debe seleccionar una rbrica y un curso.");return}const P={id:crypto.randomUUID(),nombre:U.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:U.id,resultados:{}};m([P,...n]),u({rubricaEstaticaId:"",curso:""})},b=k=>{s(k),o(JSON.parse(JSON.stringify(k)))},w=(k,U,P)=>{i&&o(D=>{if(!D)return null;const _=JSON.parse(JSON.stringify(D));return _.resultados[k]||(_.resultados[k]={puntajes:{},feedback:""}),_.resultados[k].puntajes[U]=P,_})},E=()=>{i&&(m(n.map(k=>k.id===i.id?i:k)),s(i),alert("Cambios guardados."))},N=Z.useCallback(k=>{const U=i,P=e.find(R=>R.id===(U==null?void 0:U.rubricaEstaticaId));if(!U||!P)return{score:0,maxScore:0,grade:"N/A"};const D=P.dimensiones.length*4,_=U.resultados[k];if(!_)return{score:0,maxScore:D,grade:"1.0"};const B=Object.values(_.puntajes).reduce((R,L)=>R+L,0),T=1+6*(B/D),O=D>0?T.toFixed(1):"1.0";return{score:B,maxScore:D,grade:O}},[i,e]),I=async k=>{if(!i)return;const U=e.find(B=>B.id===i.rubricaEstaticaId),P=i.resultados[k];if(!U||!P||Object.keys(P.puntajes).length===0)return;h(k);const _=`Genera una retroalimentacin constructiva para un estudiante basada en estos puntajes de rbrica (de 1 a 4): ${U.dimensiones.map(B=>`${B.nombre}: ${P.puntajes[B.nombre]||"N/A"}/4`).join("; ")}. Destaca fortalezas y sugiere 1-2 reas de mejora concretas. S breve y motivador.`;try{el("Evaluacin - Rbricas Interactivas (Feedback)");const T=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:_});o(O=>{if(!O)return null;const R=JSON.parse(JSON.stringify(O));return R.resultados[k].feedback=T.text.replace(/(\*\*|\*)/g,""),R})}catch(B){console.error(B),alert("Error al generar feedback.")}finally{h(null)}};if(a&&i){const k=e.find(P=>P.id===a.rubricaEstaticaId),U=t.filter(P=>P.profile===rn.ESTUDIANTE&&w2(P.curso||"")===a.curso).map(P=>P.nombreCompleto).sort();return k?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),A.jsx("p",{className:"text-slate-500",children:a.curso})]}),A.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:" Volver"})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full border-collapse",children:[A.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(P=>A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:P.nombre},P.id)),A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),A.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentacin"})]})}),A.jsx("tbody",{children:U.map(P=>{var T;const{score:D,maxScore:_,grade:B}=N(P);return A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[A.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:P}),k.dimensiones.map(O=>A.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:A.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(R=>{var L;return A.jsx("button",{onClick:()=>w(P,O.nombre,R),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((L=i.resultados[P])==null?void 0:L.puntajes[O.nombre])===R?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:R},R)})})},O.id)),A.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[D,"/",_]}),A.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:B}),A.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:A.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[A.jsx("p",{className:"text-xs w-full",children:((T=i.resultados[P])==null?void 0:T.feedback)||"Sin generar"}),A.jsx("button",{onClick:()=>I(P),disabled:d===P,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===P?"...":"Generar IA"})]})})]},P)})})]})}),A.jsx("div",{className:"mt-6 flex justify-end",children:A.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):A.jsxs("div",{children:["Error: Rbrica base no encontrada. ",A.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluacin con Rbrica"}),A.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[A.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[A.jsx("option",{value:"",children:"Seleccione una Rbrica Guardada"}),e.map(k=>A.jsx("option",{value:k.id,children:k.titulo},k.id))]}),A.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un Curso"}),xs.map(k=>A.jsx("option",{value:k,children:k},k))]}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluacin"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),A.jsx("div",{className:"space-y-2",children:n.map(k=>A.jsxs("button",{onClick:()=>b(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[A.jsx("p",{className:"font-semibold",children:k.nombre}),A.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},goe=({allUsers:t})=>{const[e,n]=Z.useState(""),r=Z.useMemo(()=>Array.from(new Set(t.filter(s=>s.profile===rn.ESTUDIANTE&&s.curso).map(s=>w2(s.curso)))).sort(),[t]),a=Z.useMemo(()=>{const s=t.filter(i=>i.profile===rn.ESTUDIANTE);return e?s.filter(i=>w2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nminas de Cursos"}),A.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el mdulo de ",A.jsx("strong",{className:"font-semibold",children:"Administracin"}),"."]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),A.jsxs("select",{id:"curso-filter",value:e,onChange:s=>n(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),r.map(s=>A.jsx("option",{value:s,children:s},s))]})]}),A.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),A.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:w2(s.curso||"")}),A.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},xoe=()=>{const[t,e]=Z.useState("pruebas"),[n,r]=Z.useState([]),[a,s]=Z.useState([]);Z.useEffect(()=>{const l=()=>{try{const u=localStorage.getItem(uoe);u&&r(JSON.parse(u));const d=localStorage.getItem(dF);d&&s(JSON.parse(d))}catch(u){console.error("Error loading data for evaluation module",u)}};return l(),window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=l=>{s(l),localStorage.setItem(dF,JSON.stringify(l)),window.dispatchEvent(new Event("storage"))},o=({tabName:l,label:u})=>A.jsx("button",{onClick:()=>e(l),className:`${t===l?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:u});return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin de Aprendizajes"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx(o,{tabName:"pruebas",label:"Pruebas y Guas"}),A.jsx(o,{tabName:"rubricas",label:"Generador de Rbricas"}),A.jsx(o,{tabName:"rubricasInteractivas",label:"Rbricas Interactivas"}),A.jsx(o,{tabName:"nominas",label:"Gestin de Nminas"})]})}),A.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&A.jsx(hoe,{}),t==="rubricas"&&A.jsx(moe,{rubricas:a,onUpdate:i}),t==="rubricasInteractivas"&&A.jsx(poe,{allUsers:n,rubricasEstaticas:a}),t==="nominas"&&A.jsx(goe,{allUsers:n})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ay={};ay.version="0.18.5";var PM=1252,voe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],r4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},a4=function(t){voe.indexOf(t)!=-1&&(PM=r4[0]=t)};function yoe(){a4(1252)}var Cc=function(t){a4(t)};function s4(){Cc(1200),yoe()}function hF(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function woe(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function jM(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var cg=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?woe(t.slice(2)):e==254&&n==255?jM(t.slice(2)):e==65279?t.slice(1):t},hv=function(e){return String.fromCharCode(e)},mF=function(e){return String.fromCharCode(e)},rx,Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ax(t){for(var e="",n=0,r=0,a=0,s=0,i=0,o=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),s=n>>2,r=t.charCodeAt(u++),i=(n&3)<<4|r>>4,a=t.charCodeAt(u++),o=(r&15)<<2|a>>6,l=a&63,isNaN(r)?o=l=64:isNaN(a)&&(l=64),e+=Hd.charAt(s)+Hd.charAt(i)+Hd.charAt(o)+Hd.charAt(l);return e}function tl(t){var e="",n=0,r=0,a=0,s=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=Hd.indexOf(t.charAt(u++)),i=Hd.indexOf(t.charAt(u++)),n=s<<2|i>>4,e+=String.fromCharCode(n),o=Hd.indexOf(t.charAt(u++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Hd.indexOf(t.charAt(u++)),a=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(a));return e}var qn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),OA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function ff(t){return qn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function pF(t){return qn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var $o=function(e){return qn?OA(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function Ew(t){if(typeof ArrayBuffer>"u")return $o(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function bf(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function boe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function i4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return i4(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var Gs=qn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:OA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),a=0;for(e=0,n=0;e<t.length;n+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Coe(t){for(var e=[],n=0,r=t.length+250,a=ff(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[n++]=i;else if(i<2048)a[n++]=192|i>>6&31,a[n++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++s)&1023;a[n++]=240|i>>8&7,a[n++]=128|i>>2&63,a[n++]=128|o>>6&15|(i&3)<<4,a[n++]=128|o&63}else a[n++]=224|i>>12&15,a[n++]=128|i>>6&63,a[n++]=128|i&63;n>r&&(e.push(a.slice(0,n)),n=0,a=ff(65535),r=65530)}return e.push(a.slice(0,n)),Gs(e)}var Yi=/\u0000/g,ug=/[\u0001-\u0006]/g;function Am(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Ec(t,e){var n=""+t;return n.length>=e?n:La("0",e-n.length)+n}function o4(t,e){var n=""+t;return n.length>=e?n:La(" ",e-n.length)+n}function sy(t,e){var n=""+t;return n.length>=e?n:n+La(" ",e-n.length)}function Eoe(t,e){var n=""+Math.round(t);return n.length>=e?n:La("0",e-n.length)+n}function _oe(t,e){var n=""+t;return n.length>=e?n:La("0",e-n.length)+n}var gF=Math.pow(2,32);function b0(t,e){if(t>gF||t<-gF)return Eoe(t,e);var n=Math.round(t);return _oe(n,e)}function iy(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var xF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],qC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Soe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var gn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},vF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Toe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function oy(t,e,n){for(var r=t<0?-1:1,a=t*r,s=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(a);u<e&&(h=Math.floor(a),o=h*i+s,d=h*u+l,!(a-h<5e-8));)a=1/(a-h),s=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=s):(d=u,o=i)),!n)return[0,r*o,d];var m=Math.floor(r*o/d);return[m,r*o-m*d,d]}function ah(t,e,n){if(t>2958465||t<0)return null;var r=t|0,a=Math.floor(86400*(t-r)),s=0,i=[],o={D:r,T:a,u:86400*(t-r)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++r,++o.D)),r===60)i=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)i=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=Roe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var OM=new Date(1899,11,31,0,0,0),Boe=OM.getTime(),Noe=new Date(1900,2,1,0,0,0);function QM(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Noe&&(n+=1440*60*1e3),(n-(Boe+(t.getTimezoneOffset()-OM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function l4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function koe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ioe(t){var e=t<0?12:11,n=l4(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function Foe(t){var e=l4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function sx(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Ioe(t):e===10?n=t.toFixed(10).substr(0,12):n=Foe(t),l4(koe(n.toUpperCase()))}function _h(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):sx(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Vl(14,QM(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Roe(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Doe(t,e,n,r){var a="",s=0,i=0,o=n.y,l,u=0;switch(t){case 98:o=n.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,u=e.length;break;case 3:return qC[n.m-1][1];case 5:return qC[n.m-1][0];default:return qC[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,u=e.length;break;case 3:return xF[n.q][0];default:return xF[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Ec(n.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,s=Math.round(i*(n.S+n.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=Ec(s,2+r),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?Ec(l,u):"";return d}function Vd(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var HM=/%/g;function Loe(t,e,n){var r=e.replace(HM,""),a=e.length-r.length;return yA(t,r,n*Math.pow(10,2*a))+La("%",a)}function Uoe(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return yA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function VM(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+VM(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),n=(e/Math.pow(10,s)).toPrecision(r+1+(a+s)%a),n.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+s):n+="E+"+(i-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,a)+"."+n.substr(2+a),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var zM=/# (\?+)( ?)\/( ?)(\d+)/;function Moe(t,e,n){var r=parseInt(t[4],10),a=Math.round(e*r),s=Math.floor(a/r),i=a-s*r,o=r;return n+(s===0?"":""+s)+" "+(i===0?La(" ",t[1].length+1+t[4].length):o4(i,t[1].length)+t[2]+"/"+t[3]+Ec(o,t[4].length))}function Poe(t,e,n){return n+(e===0?"":""+e)+La(" ",t[1].length+2+t[4].length)}var GM=/^#*0*\.([0#]+)/,qM=/\).*[0#]/,KM=/\(###\) ###\\?-####/;function $i(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function yF(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function wF(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function joe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Ooe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Tl(t,e,n){if(t.charCodeAt(0)===40&&!e.match(qM)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Tl("n",r,n):"("+Tl("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Uoe(t,e,n);if(e.indexOf("%")!==-1)return Loe(t,e,n);if(e.indexOf("E")!==-1)return VM(e,n);if(e.charCodeAt(0)===36)return"$"+Tl(t,e.substr(e.charAt(1)==" "?2:1),n);var a,s,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+b0(l,e.length);if(e.match(/^[#?]+$/))return a=b0(n,0),a==="0"&&(a=""),a.length>e.length?a:$i(e.substr(0,e.length-a.length))+a;if(s=e.match(zM))return Moe(s,l,u);if(e.match(/^#+0+$/))return u+b0(l,e.length-e.indexOf("0"));if(s=e.match(GM))return a=yF(n,s[1].length).replace(/^([^\.]+)$/,"$1."+$i(s[1])).replace(/\.$/,"."+$i(s[1])).replace(/\.(\d*)$/,function(b,w){return"."+w+La("0",$i(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+yF(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Vd(b0(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Tl(t,e,-n):Vd(""+(Math.floor(n)+joe(n,s[1].length)))+"."+Ec(wF(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Tl(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Am(Tl(t,e.replace(/[\\-]/g,""),n)),i=0,Am(Am(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(KM))return a=Tl(t,"##########",n),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=oy(l,Math.pow(10,i)-1,!1),a=""+u,d=yA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=sy(o[2],i),d.length<s[4].length&&(d=$i(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=oy(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?o4(o[1],i)+s[2]+"/"+s[3]+sy(o[2],i):La(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=b0(n,0),e.length<=a.length?a:$i(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return $i(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=wF(n,s[1].length),n<0?"-"+Tl(t,e,-n):Vd(Ooe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Ec(0,3-b.length):"")+b})+"."+Ec(i,s[1].length);switch(e){case"###,##0.00":return Tl(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=Vd(b0(l,0));return g!=="0"?u+g:"";case"###,###.00":return Tl(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Tl(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Qoe(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return yA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Hoe(t,e,n){var r=e.replace(HM,""),a=e.length-r.length;return yA(t,r,n*Math.pow(10,2*a))+La("%",a)}function WM(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+WM(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),n=(e/Math.pow(10,s)).toPrecision(r+1+(a+s)%a),!n.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+s):n+="E+"+(i-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function hu(t,e,n){if(t.charCodeAt(0)===40&&!e.match(qM)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?hu("n",r,n):"("+hu("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Qoe(t,e,n);if(e.indexOf("%")!==-1)return Hoe(t,e,n);if(e.indexOf("E")!==-1)return WM(e,n);if(e.charCodeAt(0)===36)return"$"+hu(t,e.substr(e.charAt(1)==" "?2:1),n);var a,s,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+Ec(l,e.length);if(e.match(/^[#?]+$/))return a=""+n,n===0&&(a=""),a.length>e.length?a:$i(e.substr(0,e.length-a.length))+a;if(s=e.match(zM))return Poe(s,l,u);if(e.match(/^#+0+$/))return u+Ec(l,e.length-e.indexOf("0"));if(s=e.match(GM))return a=(""+n).replace(/^([^\.]+)$/,"$1."+$i(s[1])).replace(/\.$/,"."+$i(s[1])),a=a.replace(/\.(\d*)$/,function(b,w){return"."+w+La("0",$i(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Vd(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+hu(t,e,-n):Vd(""+n)+"."+La("0",s[1].length);if(s=e.match(/^#,#*,#0/))return hu(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Am(hu(t,e.replace(/[\\-]/g,""),n)),i=0,Am(Am(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(KM))return a=hu(t,"##########",n),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=oy(l,Math.pow(10,i)-1,!1),a=""+u,d=yA("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=sy(o[2],i),d.length<s[4].length&&(d=$i(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=oy(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?o4(o[1],i)+s[2]+"/"+s[3]+sy(o[2],i):La(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+n,e.length<=a.length?a:$i(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return $i(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+hu(t,e,-n):Vd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Ec(0,3-b.length):"")+b})+"."+Ec(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Vd(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return hu(t,e.slice(0,e.lastIndexOf(".")),n)+$i(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function yA(t,e,n){return(n|0)===n?hu(t,e,n):Tl(t,e,n)}function Voe(t){for(var e=[],n=!1,r=0,a=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(a,r-a),a=r+1}if(e[e.length]=t.substr(a),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var $M=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function $m(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":iy(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match($M))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function zoe(t,e,n,r){for(var a=[],s="",i=0,o="",l="t",u,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!iy(t,i))throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(h=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=ah(e,n,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=ah(e,n),u==null))return"";for(s=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var w={t:o,v:o};if(u==null&&(u=ah(e,n)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(w.v=u.H>=12?"P":"A"),w.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(w.v=u.H>=12?"PM":"AM"),w.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(w.v=u.H>=12?"":""),w.t="T",i+=5,m="h"):(w.t="t",++i),u==null&&w.t==="T")return"";a[a.length]=w,l=o;break;case"[":for(s=o;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match($M)){if(u==null&&(u=ah(e,n),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",$m(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<t.length&&(o=t.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"t",v:o},++i;break}var E=0,N=0,I;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=m,l="h",E<1&&(E=1);break;case"s":(I=a[i].v.match(/\.0+$/))&&(N=Math.max(N,I[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&a[i].v.match(/[Hh]/)&&(E=1),E<2&&a[i].v.match(/[Mm]/)&&(E=2),E<3&&a[i].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var k="",U;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=Doe(a[i].t.charCodeAt(0),a[i].v,u,N),a[i].t="t";break;case"n":case"?":for(U=i+1;a[U]!=null&&((o=a[U].t)==="?"||o==="D"||(o===" "||o==="t")&&a[U+1]!=null&&(a[U+1].t==="?"||a[U+1].t==="t"&&a[U+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[U].v==="/"||a[U].v===" "&&a[U+1]!=null&&a[U+1].t=="?"));)a[i].v+=a[U].v,a[U]={v:"",t:";"},++U;k+=a[i].v,i=U-1;break;case"G":a[i].t="t",a[i].v=_h(e,n);break}var P="",D,_;if(k.length>0){k.charCodeAt(0)==40?(D=e<0&&k.charCodeAt(0)===45?-e:e,_=yA("n",k,D)):(D=e<0&&r>1?-e:e,_=yA("n",k,D),D<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),U=_.length-1;var B=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){B=i;break}var T=a.length;if(B===a.length&&_.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(U>=a[i].v.length-1?(U-=a[i].v.length,a[i].v=_.substr(U+1,a[i].v.length)):U<0?a[i].v="":(a[i].v=_.substr(0,U+1),U=-1),a[i].t="t",T=i);U>=0&&T<a.length&&(a[T].v=_.substr(0,U+1)+a[T].v)}else if(B!==a.length&&_.indexOf("E")===-1){for(U=_.indexOf(".")-1,i=B;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===B?a[i].v.indexOf(".")-1:a[i].v.length-1,P=a[i].v.substr(d+1);d>=0;--d)U>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(P=_.charAt(U--)+P);a[i].v=P,a[i].t="t",T=i}for(U>=0&&T<a.length&&(a[T].v=_.substr(0,U+1)+a[T].v),U=_.indexOf(".")+1,i=B;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==B)){for(d=a[i].v.indexOf(".")>-1&&i===B?a[i].v.indexOf(".")+1:0,P=a[i].v.substr(0,d);d<a[i].v.length;++d)U<_.length&&(P+=_.charAt(U++));a[i].v=P,a[i].t="t",T=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(D=r>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=yA(a[i].t,a[i].v,D),a[i].t="t");var O="";for(i=0;i!==a.length;++i)a[i]!=null&&(O+=a[i].v);return O}var bF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function CF(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function Goe(t,e){var n=Voe(t),r=n.length,a=n[r-1].indexOf("@");if(r<4&&a>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||a>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=a>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=a>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=a>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var i=n[0].match(bF),o=n[1].match(bF);return CF(e,i)?[r,n[0]]:CF(e,o)?[r,n[1]]:[r,n[i!=null&&o!=null?2:1]]}return[r,s]}function Vl(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:gn)[t],r==null&&(r=n.table&&n.table[vF[t]]||gn[vF[t]]),r==null&&(r=Toe[t]||"General");break}if(iy(r,0))return _h(e,n);e instanceof Date&&(e=QM(e,n.date1904));var a=Goe(r,e);if(iy(a[1]))return _h(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return zoe(a[1],e,n,a[0])}function wA(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(gn[n]==null){e<0&&(e=n);continue}if(gn[n]==t){e=n;break}}e<0&&(e=391)}return gn[e]=t,e}function _w(t){for(var e=0;e!=392;++e)t[e]!==void 0&&wA(t[e],e)}function Jm(){gn=Soe()}var qoe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},JM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Koe(t){var e=typeof t=="number"?gn[t]:t;return e=e.replace(JM,"(\\d+)"),new RegExp("^"+e+"$")}function Woe(t,e,n){var r=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(e.match(JM)||[]).forEach(function(h,m){var g=parseInt(n[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:a=g;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:r==-1&&a==-1&&s==-1?d:u+"T"+d}var $oe=function(){var t={};t.version="1.2.0";function e(){for(var _=0,B=new Array(256),T=0;T!=256;++T)_=T,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,B[T]=_;return typeof Int32Array<"u"?new Int32Array(B):B}var n=e();function r(_){var B=0,T=0,O=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)R[O]=_[O];for(O=0;O!=256;++O)for(T=_[O],B=256+O;B<4096;B+=256)T=R[B]=T>>>8^_[T&255];var L=[];for(O=1;O!=16;++O)L[O-1]=typeof Int32Array<"u"?R.subarray(O*256,O*256+256):R.slice(O*256,O*256+256);return L}var a=r(n),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],h=a[6],m=a[7],g=a[8],b=a[9],w=a[10],E=a[11],N=a[12],I=a[13],k=a[14];function U(_,B){for(var T=B^-1,O=0,R=_.length;O<R;)T=T>>>8^n[(T^_.charCodeAt(O++))&255];return~T}function P(_,B){for(var T=B^-1,O=_.length-15,R=0;R<O;)T=k[_[R++]^T&255]^I[_[R++]^T>>8&255]^N[_[R++]^T>>16&255]^E[_[R++]^T>>>24]^w[_[R++]]^b[_[R++]]^g[_[R++]]^m[_[R++]]^h[_[R++]]^d[_[R++]]^u[_[R++]]^l[_[R++]]^o[_[R++]]^i[_[R++]]^s[_[R++]]^n[_[R++]];for(O+=15;R<O;)T=T>>>8^n[(T^_[R++])&255];return~T}function D(_,B){for(var T=B^-1,O=0,R=_.length,L=0,Q=0;O<R;)L=_.charCodeAt(O++),L<128?T=T>>>8^n[(T^L)&255]:L<2048?(T=T>>>8^n[(T^(192|L>>6&31))&255],T=T>>>8^n[(T^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,Q=_.charCodeAt(O++)&1023,T=T>>>8^n[(T^(240|L>>8&7))&255],T=T>>>8^n[(T^(128|L>>2&63))&255],T=T>>>8^n[(T^(128|Q>>6&15|(L&3)<<4))&255],T=T>>>8^n[(T^(128|Q&63))&255]):(T=T>>>8^n[(T^(224|L>>12&15))&255],T=T>>>8^n[(T^(128|L>>6&63))&255],T=T>>>8^n[(T^(128|L&63))&255]);return~T}return t.table=n,t.bstr=U,t.buf=P,t.str=D,t}(),ln=function(){var e={};e.version="1.2.1";function n(de,Be){for(var be=de.split("/"),Ee=Be.split("/"),Se=0,Ne=0,qe=Math.min(be.length,Ee.length);Se<qe;++Se){if(Ne=be[Se].length-Ee[Se].length)return Ne;if(be[Se]!=Ee[Se])return be[Se]<Ee[Se]?-1:1}return be.length-Ee.length}function r(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:r(de.slice(0,-1));var Be=de.lastIndexOf("/");return Be===-1?de:de.slice(0,Be+1)}function a(de){if(de.charAt(de.length-1)=="/")return a(de.slice(0,-1));var Be=de.lastIndexOf("/");return Be===-1?de:de.slice(Be+1)}function s(de,Be){typeof Be=="string"&&(Be=new Date(Be));var be=Be.getHours();be=be<<6|Be.getMinutes(),be=be<<5|Be.getSeconds()>>>1,de.write_shift(2,be);var Ee=Be.getFullYear()-1980;Ee=Ee<<4|Be.getMonth()+1,Ee=Ee<<5|Be.getDate(),de.write_shift(2,Ee)}function i(de){var Be=de.read_shift(2)&65535,be=de.read_shift(2)&65535,Ee=new Date,Se=be&31;be>>>=5;var Ne=be&15;be>>>=4,Ee.setMilliseconds(0),Ee.setFullYear(be+1980),Ee.setMonth(Ne-1),Ee.setDate(Se);var qe=Be&31;Be>>>=5;var tt=Be&63;return Be>>>=6,Ee.setHours(Be),Ee.setMinutes(tt),Ee.setSeconds(qe<<1),Ee}function o(de){ii(de,0);for(var Be={},be=0;de.l<=de.length-4;){var Ee=de.read_shift(2),Se=de.read_shift(2),Ne=de.l+Se,qe={};switch(Ee){case 21589:be=de.read_shift(1),be&1&&(qe.mtime=de.read_shift(4)),Se>5&&(be&2&&(qe.atime=de.read_shift(4)),be&4&&(qe.ctime=de.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}de.l=Ne,Be[Ee]=qe}return Be}var l;function u(){return l||(l={})}function d(de,Be){if(de[0]==80&&de[1]==75)return Xn(de,Be);if((de[0]|32)==109&&(de[1]|32)==105)return ws(de,Be);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var be=3,Ee=512,Se=0,Ne=0,qe=0,tt=0,Qe=0,We=[],Ye=de.slice(0,512);ii(Ye,0);var yt=h(Ye);switch(be=yt[0],be){case 3:Ee=512;break;case 4:Ee=4096;break;case 0:if(yt[1]==0)return Xn(de,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+be)}Ee!==512&&(Ye=de.slice(0,Ee),ii(Ye,28));var Bt=de.slice(0,Ee);m(Ye,be);var Pt=Ye.read_shift(4,"i");if(be===3&&Pt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Pt);Ye.l+=4,qe=Ye.read_shift(4,"i"),Ye.l+=4,Ye.chk("00100000","Mini Stream Cutoff Size: "),tt=Ye.read_shift(4,"i"),Se=Ye.read_shift(4,"i"),Qe=Ye.read_shift(4,"i"),Ne=Ye.read_shift(4,"i");for(var Tt=-1,Ft=0;Ft<109&&(Tt=Ye.read_shift(4,"i"),!(Tt<0));++Ft)We[Ft]=Tt;var un=g(de,Ee);E(Qe,Ne,un,Ee,We);var Ln=I(un,qe,We,Ee);Ln[qe].name="!Directory",Se>0&&tt!==Q&&(Ln[tt].name="!MiniFAT"),Ln[We[0]].name="!FAT",Ln.fat_addrs=We,Ln.ssz=Ee;var Un={},Qn=[],Sa=[],Ai=[];k(qe,Ln,un,Qn,Se,Un,Sa,tt),b(Sa,Ai,Qn),Qn.shift();var Ta={FileIndex:Sa,FullPaths:Ai};return Be&&Be.raw&&(Ta.raw={header:Bt,sectors:un}),Ta}function h(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(z,"Header Signature: "),de.l+=16;var Be=de.read_shift(2,"u");return[de.read_shift(2,"u"),Be]}function m(de,Be){var be=9;switch(de.l+=2,be=de.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+be);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+be)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function g(de,Be){for(var be=Math.ceil(de.length/Be)-1,Ee=[],Se=1;Se<be;++Se)Ee[Se-1]=de.slice(Se*Be,(Se+1)*Be);return Ee[be-1]=de.slice(be*Be),Ee}function b(de,Be,be){for(var Ee=0,Se=0,Ne=0,qe=0,tt=0,Qe=be.length,We=[],Ye=[];Ee<Qe;++Ee)We[Ee]=Ye[Ee]=Ee,Be[Ee]=be[Ee];for(;tt<Ye.length;++tt)Ee=Ye[tt],Se=de[Ee].L,Ne=de[Ee].R,qe=de[Ee].C,We[Ee]===Ee&&(Se!==-1&&We[Se]!==Se&&(We[Ee]=We[Se]),Ne!==-1&&We[Ne]!==Ne&&(We[Ee]=We[Ne])),qe!==-1&&(We[qe]=Ee),Se!==-1&&Ee!=We[Ee]&&(We[Se]=We[Ee],Ye.lastIndexOf(Se)<tt&&Ye.push(Se)),Ne!==-1&&Ee!=We[Ee]&&(We[Ne]=We[Ee],Ye.lastIndexOf(Ne)<tt&&Ye.push(Ne));for(Ee=1;Ee<Qe;++Ee)We[Ee]===Ee&&(Ne!==-1&&We[Ne]!==Ne?We[Ee]=We[Ne]:Se!==-1&&We[Se]!==Se&&(We[Ee]=We[Se]));for(Ee=1;Ee<Qe;++Ee)if(de[Ee].type!==0){if(tt=Ee,tt!=We[tt])do tt=We[tt],Be[Ee]=Be[tt]+"/"+Be[Ee];while(tt!==0&&We[tt]!==-1&&tt!=We[tt]);We[Ee]=-1}for(Be[0]+="/",Ee=1;Ee<Qe;++Ee)de[Ee].type!==2&&(Be[Ee]+="/")}function w(de,Be,be){for(var Ee=de.start,Se=de.size,Ne=[],qe=Ee;be&&Se>0&&qe>=0;)Ne.push(Be.slice(qe*L,qe*L+L)),Se-=L,qe=th(be,qe*4);return Ne.length===0?lt(0):Gs(Ne).slice(0,de.size)}function E(de,Be,be,Ee,Se){var Ne=Q;if(de===Q){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var qe=be[de],tt=(Ee>>>2)-1;if(!qe)return;for(var Qe=0;Qe<tt&&(Ne=th(qe,Qe*4))!==Q;++Qe)Se.push(Ne);E(th(qe,Ee-4),Be-1,be,Ee,Se)}}function N(de,Be,be,Ee,Se){var Ne=[],qe=[];Se||(Se=[]);var tt=Ee-1,Qe=0,We=0;for(Qe=Be;Qe>=0;){Se[Qe]=!0,Ne[Ne.length]=Qe,qe.push(de[Qe]);var Ye=be[Math.floor(Qe*4/Ee)];if(We=Qe*4&tt,Ee<4+We)throw new Error("FAT boundary crossed: "+Qe+" 4 "+Ee);if(!de[Ye])break;Qe=th(de[Ye],We)}return{nodes:Ne,data:LF([qe])}}function I(de,Be,be,Ee){var Se=de.length,Ne=[],qe=[],tt=[],Qe=[],We=Ee-1,Ye=0,yt=0,Bt=0,Pt=0;for(Ye=0;Ye<Se;++Ye)if(tt=[],Bt=Ye+Be,Bt>=Se&&(Bt-=Se),!qe[Bt]){Qe=[];var Tt=[];for(yt=Bt;yt>=0;){Tt[yt]=!0,qe[yt]=!0,tt[tt.length]=yt,Qe.push(de[yt]);var Ft=be[Math.floor(yt*4/Ee)];if(Pt=yt*4&We,Ee<4+Pt)throw new Error("FAT boundary crossed: "+yt+" 4 "+Ee);if(!de[Ft]||(yt=th(de[Ft],Pt),Tt[yt]))break}Ne[Bt]={nodes:tt,data:LF([Qe])}}return Ne}function k(de,Be,be,Ee,Se,Ne,qe,tt){for(var Qe=0,We=Ee.length?2:0,Ye=Be[de].data,yt=0,Bt=0,Pt;yt<Ye.length;yt+=128){var Tt=Ye.slice(yt,yt+128);ii(Tt,64),Bt=Tt.read_shift(2),Pt=m4(Tt,0,Bt-We),Ee.push(Pt);var Ft={name:Pt,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},un=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);un!==0&&(Ft.ct=U(Tt,Tt.l-8));var Ln=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);Ln!==0&&(Ft.mt=U(Tt,Tt.l-8)),Ft.start=Tt.read_shift(4,"i"),Ft.size=Tt.read_shift(4,"i"),Ft.size<0&&Ft.start<0&&(Ft.size=Ft.type=0,Ft.start=Q,Ft.name=""),Ft.type===5?(Qe=Ft.start,Se>0&&Qe!==Q&&(Be[Qe].name="!StreamData")):Ft.size>=4096?(Ft.storage="fat",Be[Ft.start]===void 0&&(Be[Ft.start]=N(be,Ft.start,Be.fat_addrs,Be.ssz)),Be[Ft.start].name=Ft.name,Ft.content=Be[Ft.start].data.slice(0,Ft.size)):(Ft.storage="minifat",Ft.size<0?Ft.size=0:Qe!==Q&&Ft.start!==Q&&Be[Qe]&&(Ft.content=w(Ft,Be[Qe].data,(Be[tt]||{}).data))),Ft.content&&ii(Ft.content,0),Ne[Pt]=Ft,qe.push(Ft)}}function U(de,Be){return new Date((Wo(de,Be+4)/1e7*Math.pow(2,32)+Wo(de,Be)/1e7-11644473600)*1e3)}function P(de,Be){return u(),d(l.readFileSync(de),Be)}function D(de,Be){var be=Be&&Be.type;switch(be||qn&&Buffer.isBuffer(de)&&(be="buffer"),be||"base64"){case"file":return P(de,Be);case"base64":return d($o(tl(de)),Be);case"binary":return d($o(de),Be)}return d(de,Be)}function _(de,Be){var be=Be||{},Ee=be.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=Ee+"/",de.FileIndex[0]={name:Ee,type:5}),be.CLSID&&(de.FileIndex[0].clsid=be.CLSID),B(de)}function B(de){var Be="Sh33tJ5";if(!ln.find(de,"/"+Be)){var be=lt(4);be[0]=55,be[1]=be[3]=50,be[2]=54,de.FileIndex.push({name:Be,type:2,content:be,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+Be),T(de)}}function T(de,Be){_(de);for(var be=!1,Ee=!1,Se=de.FullPaths.length-1;Se>=0;--Se){var Ne=de.FileIndex[Se];switch(Ne.type){case 0:Ee?be=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:Ee=!0,isNaN(Ne.R*Ne.L*Ne.C)&&(be=!0),Ne.R>-1&&Ne.L>-1&&Ne.R==Ne.L&&(be=!0);break;default:be=!0;break}}if(!(!be&&!Be)){var qe=new Date(1987,1,19),tt=0,Qe=Object.create?Object.create(null):{},We=[];for(Se=0;Se<de.FullPaths.length;++Se)Qe[de.FullPaths[Se]]=!0,de.FileIndex[Se].type!==0&&We.push([de.FullPaths[Se],de.FileIndex[Se]]);for(Se=0;Se<We.length;++Se){var Ye=r(We[Se][0]);Ee=Qe[Ye],Ee||(We.push([Ye,{name:a(Ye).replace("/",""),type:1,clsid:J,ct:qe,mt:qe,content:null}]),Qe[Ye]=!0)}for(We.sort(function(Pt,Tt){return n(Pt[0],Tt[0])}),de.FullPaths=[],de.FileIndex=[],Se=0;Se<We.length;++Se)de.FullPaths[Se]=We[Se][0],de.FileIndex[Se]=We[Se][1];for(Se=0;Se<We.length;++Se){var yt=de.FileIndex[Se],Bt=de.FullPaths[Se];if(yt.name=a(Bt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||J,Se===0)yt.C=We.length>1?1:-1,yt.size=0,yt.type=5;else if(Bt.slice(-1)=="/"){for(tt=Se+1;tt<We.length&&r(de.FullPaths[tt])!=Bt;++tt);for(yt.C=tt>=We.length?-1:tt,tt=Se+1;tt<We.length&&r(de.FullPaths[tt])!=r(Bt);++tt);yt.R=tt>=We.length?-1:tt,yt.type=1}else r(de.FullPaths[Se+1]||"")==r(Bt)&&(yt.R=Se+1),yt.type=2}}}function O(de,Be){var be=Be||{};if(be.fileType=="mad")return Qt(de,be);switch(T(de),be.fileType){case"zip":return ua(de,be)}var Ee=function(Pt){for(var Tt=0,Ft=0,un=0;un<Pt.FileIndex.length;++un){var Ln=Pt.FileIndex[un];if(Ln.content){var Un=Ln.content.length;Un>0&&(Un<4096?Tt+=Un+63>>6:Ft+=Un+511>>9)}}for(var Qn=Pt.FullPaths.length+3>>2,Sa=Tt+7>>3,Ai=Tt+127>>7,Ta=Sa+Ft+Qn+Ai,ss=Ta+127>>7,Oa=ss<=109?0:Math.ceil((ss-109)/127);Ta+ss+Oa+127>>7>ss;)Oa=++ss<=109?0:Math.ceil((ss-109)/127);var bs=[1,Oa,ss,Ai,Qn,Ft,Tt,0];return Pt.FileIndex[0].size=Tt<<6,bs[7]=(Pt.FileIndex[0].start=bs[0]+bs[1]+bs[2]+bs[3]+bs[4]+bs[5])+(bs[6]+7>>3),bs}(de),Se=lt(Ee[7]<<9),Ne=0,qe=0;{for(Ne=0;Ne<8;++Ne)Se.write_shift(1,ie[Ne]);for(Ne=0;Ne<8;++Ne)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),Ne=0;Ne<3;++Ne)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,Ee[2]),Se.write_shift(4,Ee[0]+Ee[1]+Ee[2]+Ee[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,Ee[3]?Ee[0]+Ee[1]+Ee[2]-1:Q),Se.write_shift(4,Ee[3]),Se.write_shift(-4,Ee[1]?Ee[0]-1:Q),Se.write_shift(4,Ee[1]),Ne=0;Ne<109;++Ne)Se.write_shift(-4,Ne<Ee[2]?Ee[1]+Ne:-1)}if(Ee[1])for(qe=0;qe<Ee[1];++qe){for(;Ne<236+qe*127;++Ne)Se.write_shift(-4,Ne<Ee[2]?Ee[1]+Ne:-1);Se.write_shift(-4,qe===Ee[1]-1?Q:qe+1)}var tt=function(Pt){for(qe+=Pt;Ne<qe-1;++Ne)Se.write_shift(-4,Ne+1);Pt&&(++Ne,Se.write_shift(-4,Q))};for(qe=Ne=0,qe+=Ee[1];Ne<qe;++Ne)Se.write_shift(-4,ee.DIFSECT);for(qe+=Ee[2];Ne<qe;++Ne)Se.write_shift(-4,ee.FATSECT);tt(Ee[3]),tt(Ee[4]);for(var Qe=0,We=0,Ye=de.FileIndex[0];Qe<de.FileIndex.length;++Qe)Ye=de.FileIndex[Qe],Ye.content&&(We=Ye.content.length,!(We<4096)&&(Ye.start=qe,tt(We+511>>9)));for(tt(Ee[6]+7>>3);Se.l&511;)Se.write_shift(-4,ee.ENDOFCHAIN);for(qe=Ne=0,Qe=0;Qe<de.FileIndex.length;++Qe)Ye=de.FileIndex[Qe],Ye.content&&(We=Ye.content.length,!(!We||We>=4096)&&(Ye.start=qe,tt(We+63>>6)));for(;Se.l&511;)Se.write_shift(-4,ee.ENDOFCHAIN);for(Ne=0;Ne<Ee[4]<<2;++Ne){var yt=de.FullPaths[Ne];if(!yt||yt.length===0){for(Qe=0;Qe<17;++Qe)Se.write_shift(4,0);for(Qe=0;Qe<3;++Qe)Se.write_shift(4,-1);for(Qe=0;Qe<12;++Qe)Se.write_shift(4,0);continue}Ye=de.FileIndex[Ne],Ne===0&&(Ye.start=Ye.size?Ye.start-1:Q);var Bt=Ne===0&&be.root||Ye.name;if(We=2*(Bt.length+1),Se.write_shift(64,Bt,"utf16le"),Se.write_shift(2,We),Se.write_shift(1,Ye.type),Se.write_shift(1,Ye.color),Se.write_shift(-4,Ye.L),Se.write_shift(-4,Ye.R),Se.write_shift(-4,Ye.C),Ye.clsid)Se.write_shift(16,Ye.clsid,"hex");else for(Qe=0;Qe<4;++Qe)Se.write_shift(4,0);Se.write_shift(4,Ye.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,Ye.start),Se.write_shift(4,Ye.size),Se.write_shift(4,0)}for(Ne=1;Ne<de.FileIndex.length;++Ne)if(Ye=de.FileIndex[Ne],Ye.size>=4096)if(Se.l=Ye.start+1<<9,qn&&Buffer.isBuffer(Ye.content))Ye.content.copy(Se,Se.l,0,Ye.size),Se.l+=Ye.size+511&-512;else{for(Qe=0;Qe<Ye.size;++Qe)Se.write_shift(1,Ye.content[Qe]);for(;Qe&511;++Qe)Se.write_shift(1,0)}for(Ne=1;Ne<de.FileIndex.length;++Ne)if(Ye=de.FileIndex[Ne],Ye.size>0&&Ye.size<4096)if(qn&&Buffer.isBuffer(Ye.content))Ye.content.copy(Se,Se.l,0,Ye.size),Se.l+=Ye.size+63&-64;else{for(Qe=0;Qe<Ye.size;++Qe)Se.write_shift(1,Ye.content[Qe]);for(;Qe&63;++Qe)Se.write_shift(1,0)}if(qn)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function R(de,Be){var be=de.FullPaths.map(function(Qe){return Qe.toUpperCase()}),Ee=be.map(function(Qe){var We=Qe.split("/");return We[We.length-(Qe.slice(-1)=="/"?2:1)]}),Se=!1;Be.charCodeAt(0)===47?(Se=!0,Be=be[0].slice(0,-1)+Be):Se=Be.indexOf("/")!==-1;var Ne=Be.toUpperCase(),qe=Se===!0?be.indexOf(Ne):Ee.indexOf(Ne);if(qe!==-1)return de.FileIndex[qe];var tt=!Ne.match(ug);for(Ne=Ne.replace(Yi,""),tt&&(Ne=Ne.replace(ug,"!")),qe=0;qe<be.length;++qe)if((tt?be[qe].replace(ug,"!"):be[qe]).replace(Yi,"")==Ne||(tt?Ee[qe].replace(ug,"!"):Ee[qe]).replace(Yi,"")==Ne)return de.FileIndex[qe];return null}var L=64,Q=-2,z="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(de,Be,be){u();var Ee=O(de,be);l.writeFileSync(Be,Ee)}function q(de){for(var Be=new Array(de.length),be=0;be<de.length;++be)Be[be]=String.fromCharCode(de[be]);return Be.join("")}function Y(de,Be){var be=O(de,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,be),be;case"binary":return typeof be=="string"?be:q(be);case"base64":return ax(typeof be=="string"?be:q(be));case"buffer":if(qn)return Buffer.isBuffer(be)?be:OA(be);case"array":return typeof be=="string"?$o(be):be}return be}var Ae;function j(de){try{var Be=de.InflateRaw,be=new Be;if(be._processChunk(new Uint8Array([3,0]),be._finishFlushFlag),be.bytesRead)Ae=de;else throw new Error("zlib does not expose bytesRead")}catch(Ee){console.error("cannot use native zlib: "+(Ee.message||Ee))}}function K(de,Be){if(!Ae)return Bn(de,Be);var be=Ae.InflateRaw,Ee=new be,Se=Ee._processChunk(de.slice(de.l),Ee._finishFlushFlag);return de.l+=Ee.bytesRead,Se}function X(de){return Ae?Ae.deflateRawSync(de):kt(de)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ye=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ce(de){var Be=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var _e=typeof Uint8Array<"u",Ie=_e?new Uint8Array(256):[],xe=0;xe<256;++xe)Ie[xe]=Ce(xe);function se(de,Be){var be=Ie[de&255];return Be<=8?be>>>8-Be:(be=be<<8|Ie[de>>8&255],Be<=16?be>>>16-Be:(be=be<<8|Ie[de>>16&255],be>>>24-Be))}function Re(de,Be){var be=Be&7,Ee=Be>>>3;return(de[Ee]|(be<=6?0:de[Ee+1]<<8))>>>be&3}function et(de,Be){var be=Be&7,Ee=Be>>>3;return(de[Ee]|(be<=5?0:de[Ee+1]<<8))>>>be&7}function De(de,Be){var be=Be&7,Ee=Be>>>3;return(de[Ee]|(be<=4?0:de[Ee+1]<<8))>>>be&15}function we(de,Be){var be=Be&7,Ee=Be>>>3;return(de[Ee]|(be<=3?0:de[Ee+1]<<8))>>>be&31}function ze(de,Be){var be=Be&7,Ee=Be>>>3;return(de[Ee]|(be<=1?0:de[Ee+1]<<8))>>>be&127}function nt(de,Be,be){var Ee=Be&7,Se=Be>>>3,Ne=(1<<be)-1,qe=de[Se]>>>Ee;return be<8-Ee||(qe|=de[Se+1]<<8-Ee,be<16-Ee)||(qe|=de[Se+2]<<16-Ee,be<24-Ee)||(qe|=de[Se+3]<<24-Ee),qe&Ne}function it(de,Be,be){var Ee=Be&7,Se=Be>>>3;return Ee<=5?de[Se]|=(be&7)<<Ee:(de[Se]|=be<<Ee&255,de[Se+1]=(be&7)>>8-Ee),Be+3}function dt(de,Be,be){var Ee=Be&7,Se=Be>>>3;return be=(be&1)<<Ee,de[Se]|=be,Be+1}function Ct(de,Be,be){var Ee=Be&7,Se=Be>>>3;return be<<=Ee,de[Se]|=be&255,be>>>=8,de[Se+1]=be,Be+8}function ut(de,Be,be){var Ee=Be&7,Se=Be>>>3;return be<<=Ee,de[Se]|=be&255,be>>>=8,de[Se+1]=be&255,de[Se+2]=be>>>8,Be+16}function Nt(de,Be){var be=de.length,Ee=2*be>Be?2*be:Be+5,Se=0;if(be>=Be)return de;if(qn){var Ne=pF(Ee);if(de.copy)de.copy(Ne);else for(;Se<de.length;++Se)Ne[Se]=de[Se];return Ne}else if(_e){var qe=new Uint8Array(Ee);if(qe.set)qe.set(de);else for(;Se<be;++Se)qe[Se]=de[Se];return qe}return de.length=Ee,de}function It(de){for(var Be=new Array(de),be=0;be<de;++be)Be[be]=0;return Be}function Wt(de,Be,be){var Ee=1,Se=0,Ne=0,qe=0,tt=0,Qe=de.length,We=_e?new Uint16Array(32):It(32);for(Ne=0;Ne<32;++Ne)We[Ne]=0;for(Ne=Qe;Ne<be;++Ne)de[Ne]=0;Qe=de.length;var Ye=_e?new Uint16Array(Qe):It(Qe);for(Ne=0;Ne<Qe;++Ne)We[Se=de[Ne]]++,Ee<Se&&(Ee=Se),Ye[Ne]=0;for(We[0]=0,Ne=1;Ne<=Ee;++Ne)We[Ne+16]=tt=tt+We[Ne-1]<<1;for(Ne=0;Ne<Qe;++Ne)tt=de[Ne],tt!=0&&(Ye[Ne]=We[tt+16]++);var yt=0;for(Ne=0;Ne<Qe;++Ne)if(yt=de[Ne],yt!=0)for(tt=se(Ye[Ne],Ee)>>Ee-yt,qe=(1<<Ee+4-yt)-1;qe>=0;--qe)Be[tt|qe<<yt]=yt&15|Ne<<4;return Ee}var Ut=_e?new Uint16Array(512):It(512),Ht=_e?new Uint16Array(32):It(32);if(!_e){for(var Yt=0;Yt<512;++Yt)Ut[Yt]=0;for(Yt=0;Yt<32;++Yt)Ht[Yt]=0}(function(){for(var de=[],Be=0;Be<32;Be++)de.push(5);Wt(de,Ht,32);var be=[];for(Be=0;Be<=143;Be++)be.push(8);for(;Be<=255;Be++)be.push(9);for(;Be<=279;Be++)be.push(7);for(;Be<=287;Be++)be.push(8);Wt(be,Ut,288)})();var Mt=function(){for(var Be=_e?new Uint8Array(32768):[],be=0,Ee=0;be<ye.length-1;++be)for(;Ee<ye[be+1];++Ee)Be[Ee]=be;for(;Ee<32768;++Ee)Be[Ee]=29;var Se=_e?new Uint8Array(259):[];for(be=0,Ee=0;be<le.length-1;++be)for(;Ee<le[be+1];++Ee)Se[Ee]=be;function Ne(tt,Qe){for(var We=0;We<tt.length;){var Ye=Math.min(65535,tt.length-We),yt=We+Ye==tt.length;for(Qe.write_shift(1,+yt),Qe.write_shift(2,Ye),Qe.write_shift(2,~Ye&65535);Ye-- >0;)Qe[Qe.l++]=tt[We++]}return Qe.l}function qe(tt,Qe){for(var We=0,Ye=0,yt=_e?new Uint16Array(32768):[];Ye<tt.length;){var Bt=Math.min(65535,tt.length-Ye);if(Bt<10){for(We=it(Qe,We,+(Ye+Bt==tt.length)),We&7&&(We+=8-(We&7)),Qe.l=We/8|0,Qe.write_shift(2,Bt),Qe.write_shift(2,~Bt&65535);Bt-- >0;)Qe[Qe.l++]=tt[Ye++];We=Qe.l*8;continue}We=it(Qe,We,+(Ye+Bt==tt.length)+2);for(var Pt=0;Bt-- >0;){var Tt=tt[Ye];Pt=(Pt<<5^Tt)&32767;var Ft=-1,un=0;if((Ft=yt[Pt])&&(Ft|=Ye&-32768,Ft>Ye&&(Ft-=32768),Ft<Ye))for(;tt[Ft+un]==tt[Ye+un]&&un<250;)++un;if(un>2){Tt=Se[un],Tt<=22?We=Ct(Qe,We,Ie[Tt+1]>>1)-1:(Ct(Qe,We,3),We+=5,Ct(Qe,We,Ie[Tt-23]>>5),We+=3);var Ln=Tt<8?0:Tt-4>>2;Ln>0&&(ut(Qe,We,un-le[Tt]),We+=Ln),Tt=Be[Ye-Ft],We=Ct(Qe,We,Ie[Tt]>>3),We-=3;var Un=Tt<4?0:Tt-2>>1;Un>0&&(ut(Qe,We,Ye-Ft-ye[Tt]),We+=Un);for(var Qn=0;Qn<un;++Qn)yt[Pt]=Ye&32767,Pt=(Pt<<5^tt[Ye])&32767,++Ye;Bt-=un-1}else Tt<=143?Tt=Tt+48:We=dt(Qe,We,1),We=Ct(Qe,We,Ie[Tt]),yt[Pt]=Ye&32767,++Ye}We=Ct(Qe,We,0)-1}return Qe.l=(We+7)/8|0,Qe.l}return function(Qe,We){return Qe.length<8?Ne(Qe,We):qe(Qe,We)}}();function kt(de){var Be=lt(50+Math.floor(de.length*1.1)),be=Mt(de,Be);return Be.slice(0,be)}var xt=_e?new Uint16Array(32768):It(32768),xn=_e?new Uint16Array(32768):It(32768),$t=_e?new Uint16Array(128):It(128),ir=1,mn=1;function Fn(de,Be){var be=we(de,Be)+257;Be+=5;var Ee=we(de,Be)+1;Be+=5;var Se=De(de,Be)+4;Be+=4;for(var Ne=0,qe=_e?new Uint8Array(19):It(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qe=1,We=_e?new Uint8Array(8):It(8),Ye=_e?new Uint8Array(8):It(8),yt=qe.length,Bt=0;Bt<Se;++Bt)qe[te[Bt]]=Ne=et(de,Be),Qe<Ne&&(Qe=Ne),We[Ne]++,Be+=3;var Pt=0;for(We[0]=0,Bt=1;Bt<=Qe;++Bt)Ye[Bt]=Pt=Pt+We[Bt-1]<<1;for(Bt=0;Bt<yt;++Bt)(Pt=qe[Bt])!=0&&(tt[Bt]=Ye[Pt]++);var Tt=0;for(Bt=0;Bt<yt;++Bt)if(Tt=qe[Bt],Tt!=0){Pt=Ie[tt[Bt]]>>8-Tt;for(var Ft=(1<<7-Tt)-1;Ft>=0;--Ft)$t[Pt|Ft<<Tt]=Tt&7|Bt<<3}var un=[];for(Qe=1;un.length<be+Ee;)switch(Pt=$t[ze(de,Be)],Be+=Pt&7,Pt>>>=3){case 16:for(Ne=3+Re(de,Be),Be+=2,Pt=un[un.length-1];Ne-- >0;)un.push(Pt);break;case 17:for(Ne=3+et(de,Be),Be+=3;Ne-- >0;)un.push(0);break;case 18:for(Ne=11+ze(de,Be),Be+=7;Ne-- >0;)un.push(0);break;default:un.push(Pt),Qe<Pt&&(Qe=Pt);break}var Ln=un.slice(0,be),Un=un.slice(be);for(Bt=be;Bt<286;++Bt)Ln[Bt]=0;for(Bt=Ee;Bt<30;++Bt)Un[Bt]=0;return ir=Wt(Ln,xt,286),mn=Wt(Un,xn,30),Be}function Tr(de,Be){if(de[0]==3&&!(de[1]&3))return[ff(Be),2];for(var be=0,Ee=0,Se=pF(Be||1<<18),Ne=0,qe=Se.length>>>0,tt=0,Qe=0;(Ee&1)==0;){if(Ee=et(de,be),be+=3,Ee>>>1)Ee>>1==1?(tt=9,Qe=5):(be=Fn(de,be),tt=ir,Qe=mn);else{be&7&&(be+=8-(be&7));var We=de[be>>>3]|de[(be>>>3)+1]<<8;if(be+=32,We>0)for(!Be&&qe<Ne+We&&(Se=Nt(Se,Ne+We),qe=Se.length);We-- >0;)Se[Ne++]=de[be>>>3],be+=8;continue}for(;;){!Be&&qe<Ne+32767&&(Se=Nt(Se,Ne+32767),qe=Se.length);var Ye=nt(de,be,tt),yt=Ee>>>1==1?Ut[Ye]:xt[Ye];if(be+=yt&15,yt>>>=4,(yt>>>8&255)===0)Se[Ne++]=yt;else{if(yt==256)break;yt-=257;var Bt=yt<8?0:yt-4>>2;Bt>5&&(Bt=0);var Pt=Ne+le[yt];Bt>0&&(Pt+=nt(de,be,Bt),be+=Bt),Ye=nt(de,be,Qe),yt=Ee>>>1==1?Ht[Ye]:xn[Ye],be+=yt&15,yt>>>=4;var Tt=yt<4?0:yt-2>>1,Ft=ye[yt];for(Tt>0&&(Ft+=nt(de,be,Tt),be+=Tt),!Be&&qe<Pt&&(Se=Nt(Se,Pt+100),qe=Se.length);Ne<Pt;)Se[Ne]=Se[Ne-Ft],++Ne}}}return Be?[Se,be+7>>>3]:[Se.slice(0,Ne),be+7>>>3]}function Bn(de,Be){var be=de.slice(de.l||0),Ee=Tr(be,Be);return de.l+=Ee[1],Ee[0]}function rs(de,Be){if(de)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function Xn(de,Be){var be=de;ii(be,0);var Ee=[],Se=[],Ne={FileIndex:Ee,FullPaths:Se};_(Ne,{root:Be.root});for(var qe=be.length-4;(be[qe]!=80||be[qe+1]!=75||be[qe+2]!=5||be[qe+3]!=6)&&qe>=0;)--qe;be.l=qe+4,be.l+=4;var tt=be.read_shift(2);be.l+=6;var Qe=be.read_shift(4);for(be.l=Qe,qe=0;qe<tt;++qe){be.l+=20;var We=be.read_shift(4),Ye=be.read_shift(4),yt=be.read_shift(2),Bt=be.read_shift(2),Pt=be.read_shift(2);be.l+=8;var Tt=be.read_shift(4),Ft=o(be.slice(be.l+yt,be.l+yt+Bt));be.l+=yt+Bt+Pt;var un=be.l;be.l=Tt+4,Yr(be,We,Ye,Ne,Ft),be.l=un}return Ne}function Yr(de,Be,be,Ee,Se){de.l+=2;var Ne=de.read_shift(2),qe=de.read_shift(2),tt=i(de);if(Ne&8257)throw new Error("Unsupported ZIP encryption");for(var Qe=de.read_shift(4),We=de.read_shift(4),Ye=de.read_shift(4),yt=de.read_shift(2),Bt=de.read_shift(2),Pt="",Tt=0;Tt<yt;++Tt)Pt+=String.fromCharCode(de[de.l++]);if(Bt){var Ft=o(de.slice(de.l,de.l+Bt));(Ft[21589]||{}).mt&&(tt=Ft[21589].mt),((Se||{})[21589]||{}).mt&&(tt=Se[21589].mt)}de.l+=Bt;var un=de.slice(de.l,de.l+We);switch(qe){case 8:un=K(de,Ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var Ln=!1;Ne&8&&(Qe=de.read_shift(4),Qe==134695760&&(Qe=de.read_shift(4),Ln=!0),We=de.read_shift(4),Ye=de.read_shift(4)),We!=Be&&rs(Ln,"Bad compressed size: "+Be+" != "+We),Ye!=be&&rs(Ln,"Bad uncompressed size: "+be+" != "+Ye),Zn(Ee,Pt,un,{unsafe:!0,mt:tt})}function ua(de,Be){var be=Be||{},Ee=[],Se=[],Ne=lt(1),qe=be.compression?8:0,tt=0,Qe=0,We=0,Ye=0,yt=0,Bt=de.FullPaths[0],Pt=Bt,Tt=de.FileIndex[0],Ft=[],un=0;for(Qe=1;Qe<de.FullPaths.length;++Qe)if(Pt=de.FullPaths[Qe].slice(Bt.length),Tt=de.FileIndex[Qe],!(!Tt.size||!Tt.content||Pt=="Sh33tJ5")){var Ln=Ye,Un=lt(Pt.length);for(We=0;We<Pt.length;++We)Un.write_shift(1,Pt.charCodeAt(We)&127);Un=Un.slice(0,Un.l),Ft[yt]=$oe.buf(Tt.content,0);var Qn=Tt.content;qe==8&&(Qn=X(Qn)),Ne=lt(30),Ne.write_shift(4,67324752),Ne.write_shift(2,20),Ne.write_shift(2,tt),Ne.write_shift(2,qe),Tt.mt?s(Ne,Tt.mt):Ne.write_shift(4,0),Ne.write_shift(-4,Ft[yt]),Ne.write_shift(4,Qn.length),Ne.write_shift(4,Tt.content.length),Ne.write_shift(2,Un.length),Ne.write_shift(2,0),Ye+=Ne.length,Ee.push(Ne),Ye+=Un.length,Ee.push(Un),Ye+=Qn.length,Ee.push(Qn),Ne=lt(46),Ne.write_shift(4,33639248),Ne.write_shift(2,0),Ne.write_shift(2,20),Ne.write_shift(2,tt),Ne.write_shift(2,qe),Ne.write_shift(4,0),Ne.write_shift(-4,Ft[yt]),Ne.write_shift(4,Qn.length),Ne.write_shift(4,Tt.content.length),Ne.write_shift(2,Un.length),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(4,0),Ne.write_shift(4,Ln),un+=Ne.l,Se.push(Ne),un+=Un.length,Se.push(Un),++yt}return Ne=lt(22),Ne.write_shift(4,101010256),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,yt),Ne.write_shift(2,yt),Ne.write_shift(4,un),Ne.write_shift(4,Ye),Ne.write_shift(2,0),Gs([Gs(Ee),Gs(Se),Ne])}var Dn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function en(de,Be){if(de.ctype)return de.ctype;var be=de.name||"",Ee=be.match(/\.([^\.]+)$/);return Ee&&Dn[Ee[1]]||Be&&(Ee=(be=Be).match(/[\.\\]([^\.\\])+$/),Ee&&Dn[Ee[1]])?Dn[Ee[1]]:"application/octet-stream"}function On(de){for(var Be=ax(de),be=[],Ee=0;Ee<Be.length;Ee+=76)be.push(Be.slice(Ee,Ee+76));return be.join(`\r
`)+`\r
`}function as(de){var Be=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Ye=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Ye.length==1?"0"+Ye:Ye)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var be=[],Ee=Be.split(`\r
`),Se=0;Se<Ee.length;++Se){var Ne=Ee[Se];if(Ne.length==0){be.push("");continue}for(var qe=0;qe<Ne.length;){var tt=76,Qe=Ne.slice(qe,qe+tt);Qe.charAt(tt-1)=="="?tt--:Qe.charAt(tt-2)=="="?tt-=2:Qe.charAt(tt-3)=="="&&(tt-=3),Qe=Ne.slice(qe,qe+tt),qe+=tt,qe<Ne.length&&(Qe+="="),be.push(Qe)}}return be.join(`\r
`)}function Vr(de){for(var Be=[],be=0;be<de.length;++be){for(var Ee=de[be];be<=de.length&&Ee.charAt(Ee.length-1)=="=";)Ee=Ee.slice(0,Ee.length-1)+de[++be];Be.push(Ee)}for(var Se=0;Se<Be.length;++Se)Be[Se]=Be[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(Ne){return String.fromCharCode(parseInt(Ne.slice(1),16))});return $o(Be.join(`\r
`))}function pa(de,Be,be){for(var Ee="",Se="",Ne="",qe,tt=0;tt<10;++tt){var Qe=Be[tt];if(!Qe||Qe.match(/^\s*$/))break;var We=Qe.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":Ee=We[2].trim();break;case"content-type":Ne=We[2].trim();break;case"content-transfer-encoding":Se=We[2].trim();break}}switch(++tt,Se.toLowerCase()){case"base64":qe=$o(tl(Be.slice(tt).join("")));break;case"quoted-printable":qe=Vr(Be.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var Ye=Zn(de,Ee.slice(be.length),qe,{unsafe:!0});Ne&&(Ye.ctype=Ne)}function ws(de,Be){if(q(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var be=Be&&Be.root||"",Ee=(qn&&Buffer.isBuffer(de)?de.toString("binary"):q(de)).split(`\r
`),Se=0,Ne="";for(Se=0;Se<Ee.length;++Se)if(Ne=Ee[Se],!!/^Content-Location:/i.test(Ne)&&(Ne=Ne.slice(Ne.indexOf("file")),be||(be=Ne.slice(0,Ne.lastIndexOf("/")+1)),Ne.slice(0,be.length)!=be))for(;be.length>0&&(be=be.slice(0,be.length-1),be=be.slice(0,be.lastIndexOf("/")+1),Ne.slice(0,be.length)!=be););var qe=(Ee[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var tt="--"+(qe[1]||""),Qe=[],We=[],Ye={FileIndex:Qe,FullPaths:We};_(Ye);var yt,Bt=0;for(Se=0;Se<Ee.length;++Se){var Pt=Ee[Se];Pt!==tt&&Pt!==tt+"--"||(Bt++&&pa(Ye,Ee.slice(yt,Se),be),yt=Se)}return Ye}function Qt(de,Be){var be=Be||{},Ee=be.boundary||"SheetJS";Ee="------="+Ee;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ee.slice(2)+'"',"","",""],Ne=de.FullPaths[0],qe=Ne,tt=de.FileIndex[0],Qe=1;Qe<de.FullPaths.length;++Qe)if(qe=de.FullPaths[Qe].slice(Ne.length),tt=de.FileIndex[Qe],!(!tt.size||!tt.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(un){return"_x"+un.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(un){return"_u"+un.charCodeAt(0).toString(16)+"_"});for(var We=tt.content,Ye=qn&&Buffer.isBuffer(We)?We.toString("binary"):q(We),yt=0,Bt=Math.min(1024,Ye.length),Pt=0,Tt=0;Tt<=Bt;++Tt)(Pt=Ye.charCodeAt(Tt))>=32&&Pt<128&&++yt;var Ft=yt>=Bt*4/5;Se.push(Ee),Se.push("Content-Location: "+(be.root||"file:///C:/SheetJS/")+qe),Se.push("Content-Transfer-Encoding: "+(Ft?"quoted-printable":"base64")),Se.push("Content-Type: "+en(tt,qe)),Se.push(""),Se.push(Ft?as(Ye):On(Ye))}return Se.push(Ee+`--\r
`),Se.join(`\r
`)}function or(de){var Be={};return _(Be,de),Be}function Zn(de,Be,be,Ee){var Se=Ee&&Ee.unsafe;Se||_(de);var Ne=!Se&&ln.find(de,Be);if(!Ne){var qe=de.FullPaths[0];Be.slice(0,qe.length)==qe?qe=Be:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+Be).replace("//","/")),Ne={name:a(Be),type:2},de.FileIndex.push(Ne),de.FullPaths.push(qe),Se||ln.utils.cfb_gc(de)}return Ne.content=be,Ne.size=be?be.length:0,Ee&&(Ee.CLSID&&(Ne.clsid=Ee.CLSID),Ee.mt&&(Ne.mt=Ee.mt),Ee.ct&&(Ne.ct=Ee.ct)),Ne}function Br(de,Be){_(de);var be=ln.find(de,Be);if(be){for(var Ee=0;Ee<de.FileIndex.length;++Ee)if(de.FileIndex[Ee]==be)return de.FileIndex.splice(Ee,1),de.FullPaths.splice(Ee,1),!0}return!1}function Rr(de,Be,be){_(de);var Ee=ln.find(de,Be);if(Ee){for(var Se=0;Se<de.FileIndex.length;++Se)if(de.FileIndex[Se]==Ee)return de.FileIndex[Se].name=a(be),de.FullPaths[Se]=be,!0}return!1}function zr(de){T(de,!0)}return e.find=R,e.read=D,e.parse=d,e.write=Y,e.writeFile=ae,e.utils={cfb_new:or,cfb_add:Zn,cfb_del:Br,cfb_mov:Rr,cfb_gc:zr,ReadShift:Fg,CheckField:xP,prep_blob:ii,bconcat:Gs,use_zlib:j,_deflateRaw:kt,_inflateRaw:Bn,consts:ee},e}();function Joe(t){return typeof t=="string"?Ew(t):Array.isArray(t)?boe(t):t}function Hx(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=Ew(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?vu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var a=new Blob([Joe(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=bf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Yoe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function ja(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function EF(t,e){for(var n=[],r=ja(t),a=0;a!==r.length;++a)n[t[r[a]][e]]==null&&(n[t[r[a]][e]]=r[a]);return n}function Sw(t){for(var e=[],n=ja(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function Tw(t){for(var e=[],n=ja(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function Xoe(t){for(var e=[],n=ja(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var ly=new Date(1899,11,30,0,0,0);function Fs(t,e){var n=t.getTime(),r=ly.getTime()+(t.getTimezoneOffset()-ly.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var YM=new Date,Zoe=ly.getTime()+(YM.getTimezoneOffset()-ly.getTimezoneOffset())*6e4,_F=YM.getTimezoneOffset();function Bw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Zoe),e.getTimezoneOffset()!==_F&&e.setTime(e.getTime()+(e.getTimezoneOffset()-_F)*6e4),e}function ele(t){var e=0,n=0,r=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(n=1,s>3&&(r=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(a[s],10)}return e}var SF=new Date("2017-02-19T19:06:09.000Z"),XM=isNaN(SF.getFullYear())?new Date("2/19/17"):SF,tle=XM.getFullYear()==2017;function la(t,e){var n=new Date(t);if(tle)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(XM.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Sh(t,e){if(qn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return vu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return vu(jM(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return vu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return vu(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var r=[],a=0;a!=t.length;++a)r.push(String.fromCharCode(t[a]));return r.join("")}function ca(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=ca(t[n]));return e}function La(t,e){for(var n="";n.length<e;)n+=t;return n}function _c(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(a,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var nle=["january","february","march","april","may","june","july","august","september","october","november","december"];function Nm(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&nle.indexOf(i)==-1)return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(a>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var rle=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,a){if(t||typeof r=="string")return n.split(r);for(var s=n.split(r),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function ZM(t){return t?t.content&&t.type?Sh(t.content,!0):t.data?cg(t.data):t.asNodeBuffer&&qn?cg(t.asNodeBuffer().toString("binary")):t.asBinary?cg(t.asBinary()):t._data&&t._data.getContent?cg(Sh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function eP(t){if(!t)return null;if(t.data)return hF(t.data);if(t.asNodeBuffer&&qn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?hF(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function ale(t){return t&&t.name.slice(-4)===".bin"?eP(t):ZM(t)}function kl(t,e){for(var n=t.FullPaths||ja(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),a=r.replace(/\\/g,"/"),s=0;s<n.length;++s){var i=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||a==i)return t.files?t.files[n[s]]:t.FileIndex[s]}return null}function c4(t,e){var n=kl(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function fs(t,e,n){if(!n)return ale(c4(t,e));if(!e)return null;try{return fs(t,e)}catch{return null}}function Jo(t,e,n){if(!n)return ZM(c4(t,e));if(!e)return null;try{return Jo(t,e)}catch{return null}}function sle(t,e,n){return eP(c4(t,e))}function TF(t){for(var e=t.FullPaths||ja(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function jn(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return qn?r=OA(n):r=Coe(n),ln.utils.cfb_add(t,e,r)}ln.utils.cfb_add(t,e,n)}else t.file(e,n)}function u4(){return ln.utils.cfb_new()}function tP(t,e){switch(e.type){case"base64":return ln.read(t,{type:"base64"});case"binary":return ln.read(t,{type:"binary"});case"buffer":case"array":return ln.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Ag(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var a=r.shift();a===".."?n.pop():a!=="."&&n.push(a)}return n.join("/")}var ns=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ile=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,BF=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,ole=/<[^>]*>/g,Vi=ns.match(BF)?BF:ole,lle=/<\w*:/,cle=/<(\/?)\w+:/;function _n(t,e,n){for(var r={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(r[0]=t.slice(0,a)),a===t.length)return r;var i=t.match(ile),o=0,l="",u=0,d="",h="",m=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],s=0;s!=h.length&&h.charCodeAt(s)!==61;++s);for(d=h.slice(0,s).trim();h.charCodeAt(s+1)==32;)++s;for(m=(a=h.charCodeAt(s+1))==34||a==39?1:0,l=h.slice(s+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,r[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(r[g]&&d.slice(o-3,o)=="ext")continue;r[g]=l,r[g.toLowerCase()]=l}}return r}function ku(t){return t.replace(cle,"<$1")}var nP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},A4=Sw(nP),gr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var a=r+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(o,l){return nP[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return n(a.slice(0,s))+a.slice(s+9,i)+n(a.slice(i+3))}}(),d4=/[&<>'"]/g,ule=/[\u0000-\u0008\u000b-\u001f]/g;function Qr(t){var e=t+"";return e.replace(d4,function(n){return A4[n]}).replace(ule,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function NF(t){return Qr(t).replace(/ /g,"_x0020_")}var rP=/[\u0000-\u001f]/g;function f4(t){var e=t+"";return e.replace(d4,function(n){return A4[n]}).replace(/\n/g,"<br/>").replace(rP,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ale(t){var e=t+"";return e.replace(d4,function(n){return A4[n]}).replace(rP,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var kF=function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}}();function dle(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ia(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function KC(t){for(var e="",n=0,r=0,a=0,s=0,i=0,o=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(a=t.charCodeAt(n++),r>191&&r<224){i=(r&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(n++),o=((r&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function IF(t){var e=ff(2*t.length),n,r,a=1,s=0,i=0,o;for(r=0;r<t.length;r+=a)a=1,(o=t.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(t.charCodeAt(r+1)&63),a=2):o<240?(n=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),a=3):(a=4,n=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,i=55296+(n>>>10&1023),n=56320+(n&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function FF(t){return OA(t,"binary").toString("utf8")}var mv="foo bar baz",Jr=qn&&(FF(mv)==KC(mv)&&FF||IF(mv)==KC(mv)&&IF)||KC,vu=qn?function(t){return OA(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,a=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,a=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},ix=function(){var t={};return function(n,r){var a=n+"|"+(r||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}}(),aP=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)r=r.replace(t[a][0],t[a][1]);return r}}(),fle=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),hle=/<\/?(?:vt:)?variant>/g,mle=/<(?:vt:)([^>]*)>([\s\S]*)</;function RF(t,e){var n=_n(t),r=t.match(fle(n.baseType))||[],a=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return a}return r.forEach(function(s){var i=s.replace(hle,"").match(mle);i&&a.push({v:Jr(i[2]),t:i[1]})}),a}var sP=/(^\s|\s$|\n)/;function li(t,e){return"<"+t+(e.match(sP)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function ox(t){return ja(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Rt(t,e,n){return"<"+t+(n!=null?ox(n):"")+(e!=null?(e.match(sP)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function $_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function ple(t,e){switch(typeof t){case"string":var n=Rt("vt:lpwstr",Qr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Rt((t|0)==t?"vt:i4":"vt:r8",Qr(String(t)));case"boolean":return Rt("vt:bool",t?"true":"false")}if(t instanceof Date)return Rt("vt:filetime",$_(t));throw new Error("Unable to serialize "+t)}function h4(t){if(qn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Jr(bf(i4(t)));throw new Error("Bad input format: expected Buffer or string")}var lx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ns={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},jh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ko={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function gle(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return r==2047?a==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,a+=Math.pow(2,52)),n*Math.pow(2,r-52)*a)}function xle(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=r?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[n+o]=s&255;t[n+6]=(a&15)<<4|s&15,t[n+7]=a>>4|r}var DF=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var a=0,s=t[0][r].length;a<s;a+=n)e.push.apply(e,t[0][r].slice(a,a+n));return e},LF=qn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:OA(e)})):DF(t)}:DF,UF=function(t,e,n){for(var r=[],a=e;a<n;a+=2)r.push(String.fromCharCode(gA(t,a)));return r.join("").replace(Yi,"")},m4=qn?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(Yi,""):UF(t,e,n)}:UF,MF=function(t,e,n){for(var r=[],a=e;a<e+n;++a)r.push(("0"+t[a].toString(16)).slice(-2));return r.join("")},iP=qn?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):MF(t,e,n)}:MF,PF=function(t,e,n){for(var r=[],a=e;a<n;a++)r.push(String.fromCharCode(z0(t,a)));return r.join("")},Vx=qn?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):PF(e,n,r)}:PF,oP=function(t,e){var n=Wo(t,e);return n>0?Vx(t,e+4,e+4+n-1):""},lP=oP,cP=function(t,e){var n=Wo(t,e);return n>0?Vx(t,e+4,e+4+n-1):""},uP=cP,AP=function(t,e){var n=2*Wo(t,e);return n>0?Vx(t,e+4,e+4+n-1):""},dP=AP,fP=function(e,n){var r=Wo(e,n);return r>0?m4(e,n+4,n+4+r):""},hP=fP,mP=function(t,e){var n=Wo(t,e);return n>0?Vx(t,e+4,e+4+n):""},pP=mP,gP=function(t,e){return gle(t,e)},cy=gP,p4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};qn&&(lP=function(e,n){if(!Buffer.isBuffer(e))return oP(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},uP=function(e,n){if(!Buffer.isBuffer(e))return cP(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},dP=function(e,n){if(!Buffer.isBuffer(e))return AP(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},hP=function(e,n){if(!Buffer.isBuffer(e))return fP(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},pP=function(e,n){if(!Buffer.isBuffer(e))return mP(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},cy=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):gP(e,n)},p4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var z0=function(t,e){return t[e]},gA=function(t,e){return t[e+1]*256+t[e]},vle=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Wo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},th=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},yle=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Fg(t,e){var n="",r,a,s=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,qn&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(gA(this,u)),u+=2;t*=2;break;case"utf8":n=Vx(this,this.l,this.l+t);break;case"utf16le":t*=2,n=m4(this,this.l,this.l+t);break;case"wstr":return Fg.call(this,t,"dbcs");case"lpstr-ansi":n=lP(this,this.l),t=4+Wo(this,this.l);break;case"lpstr-cp":n=uP(this,this.l),t=4+Wo(this,this.l);break;case"lpwstr":n=dP(this,this.l),t=4+2*Wo(this,this.l);break;case"lpp4":t=4+Wo(this,this.l),n=hP(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Wo(this,this.l),n=pP(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(i=z0(this,this.l+t++))!==0;)s.push(hv(i));n=s.join("");break;case"_wstr":for(t=0,n="";(i=gA(this,this.l+t))!==0;)s.push(hv(i)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=z0(this,u),this.l=u+1,o=Fg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(hv(gA(this,u))),u+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=z0(this,u),this.l=u+1,o=Fg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(hv(z0(this,u))),u+=1}n=s.join("");break;default:switch(t){case 1:return r=z0(this,this.l),this.l++,r;case 2:return r=(e==="i"?vle:gA)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?th:yle)(this,this.l),this.l+=4,r):(a=Wo(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=cy(this,this.l):a=cy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:n=iP(this,this.l,t);break}}return this.l+=t,n}var wle=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},ble=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Cle=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function Ele(t,e,n){var r=0,a=0;if(n==="dbcs"){for(a=0;a!=e.length;++a)Cle(this,e.charCodeAt(a),this.l+2*a);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;r=e.length}else if(n==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,wle(this,e,this.l);break;case 8:if(r=8,n==="f"){xle(this,e,this.l);break}case 16:break;case-4:r=4,ble(this,e,this.l);break}return this.l+=r,this}function xP(t,e){var n=iP(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function ii(t,e){t.l=e,t.read_shift=Fg,t.chk=xP,t.write_shift=Ele}function Qi(t,e){t.l+=e}function lt(t){var e=ff(t);return ii(e,0),e}function QA(t,e,n){if(t){var r,a,s;ii(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=hx[o]||hx[65535];for(r=t.read_shift(1),s=r&127,a=1;a<4&&r&128;++a)s+=((r=t.read_shift(1))&127)<<7*a;l=t.l+s;var d=u.f&&u.f(t,s,n);if(t.l=l,e(d,u,o))return}}}function Co(){var t=[],e=qn?256:2048,n=function(u){var d=lt(u);return ii(d,0),d},r=n(e),a=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(a(),r=n(Math.max(u+1,e)))},i=function(){return a(),Gs(t)},o=function(u){a(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:i,_bufs:t}}function Et(t,e,n,r){var a=+e,s;if(!isNaN(a)){r||(r=hx[a].p||(n||[]).length||0),s=1+(a>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&p4(n)&&t.push(n)}}function Rg(t,e,n){var r=ca(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function jF(t,e,n){var r=ca(t);return r.s=Rg(r.s,e.s,n),r.e=Rg(r.e,e.s,n),r}function Dg(t,e){if(t.cRel&&t.c<0)for(t=ca(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ca(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=wn(t);return!t.cRel&&t.cRel!=null&&(n=Tle(n)),!t.rRel&&t.rRel!=null&&(n=_le(n)),n}function WC(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ba(t.s.c)+":"+(t.e.cRel?"":"$")+ba(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+es(t.s.r)+":"+(t.e.rRel?"":"$")+es(t.e.r):Dg(t.s,e.biff)+":"+Dg(t.e,e.biff)}function g4(t){return parseInt(Sle(t),10)-1}function es(t){return""+(t+1)}function _le(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Sle(t){return t.replace(/\$(\d+)$/,"$1")}function x4(t){for(var e=Ble(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function ba(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Tle(t){return t.replace(/^([A-Z])/,"$$$1")}function Ble(t){return t.replace(/^\$([A-Z])/,"$1")}function Nle(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ca(t){for(var e=0,n=0,r=0;r<t.length;++r){var a=t.charCodeAt(r);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(n=26*n+(a-64))}return{c:n-1,r:e-1}}function wn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function _o(t){var e=t.indexOf(":");return e==-1?{s:Ca(t),e:Ca(t)}:{s:Ca(t.slice(0,e)),e:Ca(t.slice(e+1))}}function Rn(t,e){return typeof e>"u"||typeof e=="number"?Rn(t.s,t.e):(typeof t!="string"&&(t=wn(t)),typeof e!="string"&&(e=wn(e)),t==e?t:t+":"+e)}function vr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,a=0,s=t.length;for(n=0;r<s&&!((a=t.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(e.s.c=--n,n=0;r<s&&!((a=t.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;if(e.s.r=--n,r===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((a=t.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(e.e.c=--n,n=0;r!=s&&!((a=t.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;return e.e.r=--n,e}function OF(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Vl(t.z,n?Fs(e):e)}catch{}try{return t.w=Vl((t.XF||{}).numFmtId||(n?14:0),n?Fs(e):e)}catch{return""+e}}function kA(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?HA[t.v]||t.v:e==null?OF(t,t.v):OF(t,e))}function Cf(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function vP(t,e,n){var r=n||{},a=t?Array.isArray(t):r.dense,s=t||(a?[]:{}),i=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?Ca(r.origin):r.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=vr(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},b=i+h,w=o+m;if(u.s.r>b&&(u.s.r=b),u.s.c>w&&(u.s.c=w),u.e.r<b&&(u.e.r=b),u.e.c<w&&(u.e.c=w),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||gn[14],r.cellDates?(g.t="d",g.w=Vl(g.z,Fs(g.v))):(g.t="n",g.v=Fs(g.v),g.w=Vl(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][w]&&s[b][w].z&&(g.z=s[b][w].z),s[b][w]=g;else{var E=wn({c:w,r:b});s[E]&&s[E].z&&(g.z=s[E].z),s[E]=g}}}return u.s.c<1e7&&(s["!ref"]=Rn(u)),s}function Ym(t,e){return vP(null,t,e)}function kle(t){return t.read_shift(4,"i")}function Sc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function ji(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function qs(t,e){var n=!1;return e==null&&(n=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function Ile(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Fle(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function v4(t,e){var n=t.l,r=t.read_shift(1),a=ji(t),s=[],i={t:a,h:a};if((r&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(Ile(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=n+e,i}function Rle(t,e){var n=!1;return e==null&&(n=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),qs(t.t,e),n?e.slice(0,e.l):e}var Dle=v4;function Lle(t,e){var n=!1;return e==null&&(n=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),qs(t.t,e),e.write_shift(4,1),Fle({},e),n?e.slice(0,e.l):e}function zl(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Oh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Qh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Hh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Ule=ji,yP=qs;function y4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function uy(t,e){var n=!1;return e==null&&(n=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var Mle=ji,J_=y4,w4=uy;function b4(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var a=r===0?cy([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):th(e,0)>>2;return n?a/100:a}function wP(t,e){e==null&&(e=lt(4));var n=0,r=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?a:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function bP(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Ple(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Vh=bP,Xm=Ple;function Mi(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Th(t,e){return(e||lt(8)).write_shift(8,t,"f")}function jle(t){var e={},n=t.read_shift(1),r=n>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=a;var u=dh[a];u&&(e.rgb=ux(u));break;case 2:e.rgb=ux([i,o,l]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function Ay(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Ole(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function Qle(t,e){e||(e=lt(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function CP(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Hle(t){return CP(t,1)}function Vle(t){return CP(t,2)}var C4=2,po=3,pv=11,QF=12,dy=19,gv=64,zle=65,Gle=71,qle=4108,Kle=4126,Vs=80,EP=81,Wle=[Vs,EP],Y_={1:{n:"CodePage",t:C4},2:{n:"Category",t:Vs},3:{n:"PresentationFormat",t:Vs},4:{n:"ByteCount",t:po},5:{n:"LineCount",t:po},6:{n:"ParagraphCount",t:po},7:{n:"SlideCount",t:po},8:{n:"NoteCount",t:po},9:{n:"HiddenCount",t:po},10:{n:"MultimediaClipCount",t:po},11:{n:"ScaleCrop",t:pv},12:{n:"HeadingPairs",t:qle},13:{n:"TitlesOfParts",t:Kle},14:{n:"Manager",t:Vs},15:{n:"Company",t:Vs},16:{n:"LinksUpToDate",t:pv},17:{n:"CharacterCount",t:po},19:{n:"SharedDoc",t:pv},22:{n:"HyperlinksChanged",t:pv},23:{n:"AppVersion",t:po,p:"version"},24:{n:"DigSig",t:zle},26:{n:"ContentType",t:Vs},27:{n:"ContentStatus",t:Vs},28:{n:"Language",t:Vs},29:{n:"Version",t:Vs},255:{},2147483648:{n:"Locale",t:dy},2147483651:{n:"Behavior",t:dy},1919054434:{}},X_={1:{n:"CodePage",t:C4},2:{n:"Title",t:Vs},3:{n:"Subject",t:Vs},4:{n:"Author",t:Vs},5:{n:"Keywords",t:Vs},6:{n:"Comments",t:Vs},7:{n:"Template",t:Vs},8:{n:"LastAuthor",t:Vs},9:{n:"RevNumber",t:Vs},10:{n:"EditTime",t:gv},11:{n:"LastPrinted",t:gv},12:{n:"CreatedDate",t:gv},13:{n:"ModifiedDate",t:gv},14:{n:"PageCount",t:po},15:{n:"WordCount",t:po},16:{n:"CharCount",t:po},17:{n:"Thumbnail",t:Gle},18:{n:"Application",t:Vs},19:{n:"DocSecurity",t:po},255:{},2147483648:{n:"Locale",t:dy},2147483651:{n:"Behavior",t:dy},1919054434:{}},HF={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},$le=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Jle(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Yle=Jle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),dh=ca(Yle),HA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},_P={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Z_={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},xv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function E4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Xle(t){var e=E4();if(!t||!t.match)return e;var n={};if((t.match(Vi)||[]).forEach(function(r){var a=_n(r);switch(a[0].replace(lle,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[a.Extension]=a.ContentType;break;case"<Override":e[Z_[a.ContentType]]!==void 0&&e[Z_[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Ns.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function SP(t,e){var n=Xoe(Z_),r=[],a;r[r.length]=ns,r[r.length]=Rt("Types",null,{xmlns:Ns.CT,"xmlns:xsd":Ns.xsd,"xmlns:xsi":Ns.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Rt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(a=t[l][0],r[r.length]=Rt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:xv[l][e.bookType]||xv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Rt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:xv[l][e.bookType]||xv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Rt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Yn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function cx(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Lg(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(Vi)||[]).forEach(function(a){var s=_n(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Ag(s.Target,e);n[o]=i,r[s.Id]=i}}),n["!id"]=r,n}function dm(t){var e=[ns,Rt("Relationships",null,{xmlns:Ns.RELS})];return ja(t["!id"]).forEach(function(n){e[e.length]=Rt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function jr(t,e,n,r,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=r,a.Target=n,[Yn.HLINK,Yn.XPATH,Yn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var Zle="application/vnd.oasis.opendocument.spreadsheet";function ece(t,e){for(var n=h4(t),r,a;r=lx.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(a=_n(r[0],!1),a.path=="/"&&a.type!==Zle)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function tce(t){var e=[ns];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function VF(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function nce(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function rce(t){var e=[ns];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(VF(t[n][0],t[n][1])),e.push(nce("",t[n][0]));return e.push(VF("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function TP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ay.version+"</meta:generator></office:meta></office:document-meta>"}var Ql=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ace=function(){for(var t=new Array(Ql.length),e=0;e<Ql.length;++e){var n=Ql[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function BP(t){var e={};t=Jr(t);for(var n=0;n<Ql.length;++n){var r=Ql[n],a=t.match(ace[n]);a!=null&&a.length>0&&(e[r[1]]=gr(a[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=la(e[r[1]]))}return e}function $C(t,e,n,r,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Qr(e),r[r.length]=n?Rt(t,e,n):li(t,e))}function NP(t,e){var n=e||{},r=[ns,Rt("cp:coreProperties",null,{"xmlns:cp":Ns.CORE_PROPS,"xmlns:dc":Ns.dc,"xmlns:dcterms":Ns.dcterms,"xmlns:dcmitype":Ns.dcmitype,"xmlns:xsi":Ns.xsi})],a={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&$C("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:$_(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a),t.ModifiedDate!=null&&$C("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:$_(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a));for(var s=0;s!=Ql.length;++s){var i=Ql[s],o=n.Props&&n.Props[i[1]]!=null?n.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&$C(i[0],o,null,r,a)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var fh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],kP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function IP(t,e,n,r){var a=[];if(typeof t=="string")a=RF(t,r);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?RF(e,r).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l);break}o+=l}}function sce(t,e,n){var r={};return e||(e={}),t=Jr(t),fh.forEach(function(a){var s=(t.match(ix(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=gr(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(r[a[1]]=i[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&IP(r.HeadingPairs,r.TitlesOfParts,e,n),e}function FP(t){var e=[],n=Rt;return t||(t={}),t.Application="SheetJS",e[e.length]=ns,e[e.length]=Rt("Properties",null,{xmlns:Ns.EXT_PROPS,"xmlns:vt":Ns.vt}),fh.forEach(function(r){if(t[r[1]]!==void 0){var a;switch(r[2]){case"string":a=Qr(String(t[r[1]]));break;case"bool":a=t[r[1]]?"true":"false";break}a!==void 0&&(e[e.length]=n(r[0],a))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Qr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var ice=/<[^>]+>[^<]*/g;function oce(t,e){var n={},r="",a=t.match(ice);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=_n(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=gr(o.name);break;case"</property>":r=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":n[r]=gr(d);break;case"bool":n[r]=ia(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=la(d);break;case"cy":case"error":n[r]=gr(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return n}function RP(t){var e=[ns,Rt("Properties",null,{xmlns:Ns.CUST_PROPS,"xmlns:vt":Ns.vt})];if(!t)return e.join("");var n=1;return ja(t).forEach(function(a){++n,e[e.length]=Rt("property",ple(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Qr(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var e5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},JC;function lce(t,e,n){JC||(JC=Sw(e5)),e=JC[e]||e,t[e]=n}function cce(t,e){var n=[];return ja(e5).map(function(r){for(var a=0;a<Ql.length;++a)if(Ql[a][1]==r)return Ql[a];for(a=0;a<fh.length;++a)if(fh[a][1]==r)return fh[a];throw r}).forEach(function(r){if(t[r[1]]!=null){var a=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),n.push(li(e5[r[1]]||r[1],a))}}),Rt("DocumentProperties",n.join(""),{xmlns:Ko.o})}function uce(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",a=[];return t&&ja(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Ql.length;++i)if(s==Ql[i][1])return;for(i=0;i<fh.length;++i)if(s==fh[i][1])return;for(i=0;i<n.length;++i)if(s==n[i])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Rt(NF(s),o,{"dt:dt":l}))}}),e&&ja(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Rt(NF(s),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Ko.o+'">'+a.join("")+"</"+r+">"}function _4(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Ace(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),a=(n-r)/Math.pow(2,32);r*=1e7,a*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),a+=s);var i=lt(8);return i.write_shift(4,r),i.write_shift(4,a),i}function DP(t,e,n){var r=t.l,a=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return a}function LP(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function UP(t,e,n){return e===31?LP(t):DP(t,e,n)}function t5(t,e,n){return UP(t,e,n===!1?0:4)}function dce(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return UP(t,e,0)}function fce(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var a=t.l;n[r]=t.read_shift(0,"lpwstr").replace(Yi,""),t.l-a&2&&(t.l+=2)}return n}function hce(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(Yi,"");return n}function mce(t){var e=t.l,n=fy(t,EP);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=fy(t,po);return[n,r]}function pce(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(mce(t));return n}function zF(t,e){for(var n=t.read_shift(4),r={},a=0;a!=n;++a){var s=t.read_shift(4),i=t.read_shift(4);r[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Yi,"").replace(ug,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function MP(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function gce(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function fy(t,e,n){var r=t.read_shift(2),a,s=n||{};if(t.l+=2,e!==QF&&r!==e&&Wle.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===QF?r:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return DP(t,r,4).replace(Yi,"");case 31:return LP(t);case 64:return _4(t);case 65:return MP(t);case 71:return gce(t);case 80:return t5(t,r,!s.raw).replace(Yi,"");case 81:return dce(t,r).replace(Yi,"");case 4108:return pce(t);case 4126:case 4127:return r==4127?fce(t):hce(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function GF(t,e){var n=lt(4),r=lt(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=lt(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Ace(e);break;case 31:case 80:for(r=lt(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Gs([n,r])}function qF(t,e){var n=t.l,r=t.read_shift(4),a=t.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),h=t.read_shift(4);s[i]=[d,h+n]}s.sort(function(I,k){return I[1]-k[1]});var m={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var g=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(g=!1,t.l=s[i][1]),g)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[s[i][0]];if(m[b.n]=fy(t,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Cc(o=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(s[i][0]===1){if(o=m.CodePage=fy(t,C4),Cc(o),l!==-1){var w=t.l;t.l=s[l][1],u=zF(t,o),t.l=w}}else if(s[i][0]===0){if(o===0){l=i,t.l=s[i+1][1];continue}u=zF(t,o)}else{var E=u[s[i][0]],N;switch(t[t.l]){case 65:t.l+=4,N=MP(t);break;case 30:t.l+=4,N=t5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,N=t5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,N=t.read_shift(4,"i");break;case 19:t.l+=4,N=t.read_shift(4);break;case 5:t.l+=4,N=t.read_shift(8,"f");break;case 11:t.l+=4,N=Wa(t,4);break;case 64:t.l+=4,N=la(_4(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[E]=N}}return t.l=n+r,m}var PP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function xce(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function KF(t,e,n){var r=lt(8),a=[],s=[],i=8,o=0,l=lt(8),u=lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!e){u=lt(8),u.write_shift(4,0),a.unshift(u);var d=[lt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=lt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Gs(d),s.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(PP.indexOf(t[o][0])>-1||kP.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=n[g];if(b.p=="version"&&typeof m=="string"){var w=m.split(".");m=(+w[0]<<16)+(+w[1]||0)}l=GF(b.t,m)}else{var E=xce(m);E==-1&&(E=31,m=String(m)),l=GF(E,m)}s.push(l),u=lt(8),u.write_shift(4,e?g:2+o),a.push(u),i+=8+l.length}var N=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,N),N+=s[o].length;return r.write_shift(4,i),r.write_shift(4,s.length),Gs([r].concat(a).concat(s))}function WF(t,e,n){var r=t.content;if(!r)return{};ii(r,0);var a,s,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),d=r.read_shift(16);if(d!==ln.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(a=r.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=r.read_shift(16),o=r.read_shift(4),a===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);a===2&&(i=r.read_shift(16),l=r.read_shift(4));var h=qF(r,e),m={SystemIdentifier:u};for(var g in h)m[g]=h[g];if(m.FMTID=s,a===1)return m;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var b;try{b=qF(r,null)}catch{}for(g in b)m[g]=b[g];return m.FMTID=[s,i],m}function $F(t,e,n,r,a,s){var i=lt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,ln.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var l=KF(t,n,r);if(o.push(l),a){var u=KF(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Gs(o)}function Sd(t,e){return t.read_shift(e),null}function vce(t,e){e||(e=lt(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function yce(t,e,n){for(var r=[],a=t.l+e;t.l<a;)r.push(n(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return r}function Wa(t,e){return t.read_shift(e)===1}function Ji(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function hs(t){return t.read_shift(2,"u")}function Fl(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function jP(t,e){return yce(t,e,hs)}function wce(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function OP(t,e,n){return n||(n=lt(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function zx(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),a="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else n.biff==12&&(a="wstr");n.biff>=2&&n.biff<=5&&(a="cpstr");var i=r?t.read_shift(r,a):"";return i}function bce(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,a=n&8,s=1+(n&1),i=0,o,l={};a&&(i=t.read_shift(2)),r&&(o=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),r&&(t.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Cce(t){var e=t.t||"",n=lt(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=lt(2*e.length);r.write_shift(2*e.length,e,"utf16le");var a=[n,r];return Gs(a)}function Bh(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Gx(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):Bh(t,r,n)}function zh(t,e,n){if(n.biff>5)return Gx(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function QP(t,e,n){return n||(n=lt(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function Ece(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function _ce(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var a=t.read_shift((r?e-24:e)>>1,"utf16le").replace(Yi,"");return r&&(t.l+=24),a}function Sce(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return n+r.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Yi,"");return n+i}function Tce(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return _ce(t);case"0303000000000000c000000000000046":return Sce(t);default:throw new Error("Unsupported Moniker "+n)}}function vv(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(Yi,""):"";return n}function JF(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function Bce(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var a=t.read_shift(2);t.l+=2;var s,i,o,l,u="",d,h;a&16&&(s=vv(t,n-t.l)),a&128&&(i=vv(t,n-t.l)),(a&257)===257&&(o=vv(t,n-t.l)),(a&257)===1&&(l=Tce(t,n-t.l)),a&8&&(u=vv(t,n-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(h=_4(t)),t.l=n;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return d&&(g.guid=d),h&&(g.time=h),s&&(g.Tooltip=s),g}function Nce(t){var e=lt(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var a=r.indexOf("#"),s=a>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)e.write_shift(4,i[n]);if(s==28)r=r.slice(1),JF(r,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));var o=a>-1?r.slice(0,a):r;for(e.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)e.write_shift(2,o.charCodeAt(n));e.write_shift(2,0),s&8&&JF(a>-1?r.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function HP(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),a=t.read_shift(1);return[e,n,r,a]}function VP(t,e){var n=HP(t);return n[3]=0,n}function Iu(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function Nh(t,e,n,r){return r||(r=lt(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function kce(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function Ice(t,e,n){return e===0?"":zh(t,e,n)}function Fce(t,e,n){var r=n.biff>8?4:2,a=t.read_shift(r),s=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[a,s,i]}function zP(t){var e=t.read_shift(2),n=b4(t);return[e,n]}function Rce(t,e,n){t.l+=4,e-=4;var r=t.l+e,a=zx(t,e,n),s=t.read_shift(2);if(r-=t.l,s!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return t.l+=s,a}function Nw(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2);return{s:{c:r,r:e},e:{c:a,r:n}}}function GP(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function qP(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),a=t.read_shift(1);return{s:{c:r,r:e},e:{c:a,r:n}}}var Dce=qP;function KP(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function Lce(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Uce(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Bi(t){t.l+=2,t.l+=t.read_shift(2)}var Mce={0:Bi,4:Bi,5:Bi,6:Bi,7:Uce,8:Bi,9:Bi,10:Bi,11:Bi,12:Bi,13:Lce,14:Bi,15:Bi,16:Bi,17:Bi,18:Bi,19:Bi,20:Bi,21:KP};function Pce(t,e){for(var n=t.l+e,r=[];t.l<n;){var a=t.read_shift(2);t.l-=2;try{r.push(Mce[a](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function yv(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function S4(t,e,n){var r=1536,a=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,a=8;break;case"biff4":r=4,a=6;break;case"biff3":r=3,a=6;break;case"biff2":r=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=lt(a);return s.write_shift(2,r),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function jce(t,e){return e===0||t.read_shift(2),1200}function Oce(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,a=zh(t,0,n);return t.read_shift(e+r-t.l),a}function Qce(t,e){var n=!e||e.biff==8,r=lt(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function Hce(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function Vce(t,e,n){var r=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=zx(t,0,n);return i.length===0&&(i="Sheet1"),{pos:r,hs:a,dt:s,name:i}}function zce(t,e){var n=!e||e.biff>=8?2:1,r=lt(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=r.slice(0,r.l);return a.l=r.l,a}function Gce(t,e){for(var n=t.l+e,r=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<n;++i)s.push(bce(t));return s.Count=r,s.Unique=a,s}function qce(t,e){var n=lt(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],a=0;a<t.length;++a)r[a]=Cce(t[a]);var s=Gs([n].concat(r));return s.parts=[n.length].concat(r.map(function(i){return i.length})),s}function Kce(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function Wce(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function $ce(t){var e=kce(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function Jce(t){return t.read_shift(2),t.read_shift(4)}function YF(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var a=t.read_shift(2);n&&n.biff==2&&(r=1-(a>>15),a&=32767);var s={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[s,a]}function Yce(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,n],Dim:[r,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Xce(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Zce(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function eue(t){var e=lt(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function tue(){}function nue(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=zx(t,0,n),r}function rue(t,e){var n=t.name||"Arial",r=e&&e.biff==5,a=r?15+n.length:16+2*n.length,s=lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function aue(t){var e=Iu(t);return e.isst=t.read_shift(4),e}function sue(t,e,n,r){var a=lt(10);return Nh(t,e,r,a),a.write_shift(4,n),a}function iue(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,a=Iu(t);n.biff==2&&t.l++;var s=Gx(t,r-t.l,n);return a.val=s,a}function oue(t,e,n,r,a){var s=!a||a.biff==8,i=lt(8+ +s+(1+s)*n.length);return Nh(t,e,r,i),i.write_shift(2,n.length),s&&i.write_shift(1,1),i.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),i}function lue(t,e,n){var r=t.read_shift(2),a=zh(t,0,n);return[r,a]}function cue(t,e,n,r){var a=n&&n.biff==5;r||(r=lt(a?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(a?1:2,e.length),a||r.write_shift(1,1),r.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}var uue=zh;function XF(t,e,n){var r=t.l+e,a=n.biff==8||!n.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),o=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:s,c:o},e:{r:i,c:l}}}function Aue(t,e){var n=e.biff==8||!e.biff?4:2,r=lt(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function due(t){var e=t.read_shift(2),n=t.read_shift(2),r=zP(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function fue(t,e){for(var n=t.l+e-2,r=t.read_shift(2),a=t.read_shift(2),s=[];t.l<n;)s.push(zP(t));if(t.l!==n)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r,c:a,C:i,rkrec:s}}function hue(t,e){for(var n=t.l+e-2,r=t.read_shift(2),a=t.read_shift(2),s=[];t.l<n;)s.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r,c:a,C:i,ixfe:s}}function mue(t,e,n,r){var a={},s=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return a.patternType=$le[o>>26],r.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function pue(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=mue(t,e,r.fStyle,n),r}function ZF(t,e,n,r){var a=n&&n.biff==5;r||(r=lt(a?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),a||r.write_shift(4,0),r.write_shift(2,0),r}function gue(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function xue(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function e6(t,e,n){var r=Iu(t);(n.biff==2||e==9)&&++t.l;var a=wce(t);return r.val=a,r.t=a===!0||a===!1?"b":"e",r}function vue(t,e,n,r,a,s){var i=lt(8);return Nh(t,e,r,i),OP(n,s,i),i}function yue(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=Iu(t),a=Mi(t);return r.val=a,r}function wue(t,e,n,r){var a=lt(14);return Nh(t,e,r,a),Th(n,a),a}var t6=Ice;function bue(t,e,n){var r=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Bh(t,s),o=[];r>t.l;)o.push(Gx(t));return[s,a,i,o]}function n6(t,e,n){var r=t.read_shift(2),a,s={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(a=Rce(t,e-2,n)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var Cue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function r6(t,e,n){var r=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),l=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var u=Bh(t,i,n);a&32&&(u=Cue[u.charCodeAt(0)]);var d=r-t.l;n&&n.biff==2&&--d;var h=r==t.l||o===0||!(d>0)?[]:Phe(t,d,n,o);return{chKey:s,Name:u,itab:l,rgce:h}}function WP(t,e,n){if(n.biff<8)return Eue(t,e,n);for(var r=[],a=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(Fce(t,n.biff>8?12:6,n));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return r}function Eue(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=zx(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function _ue(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),a=t.read_shift(2),s=Bh(t,r,n),i=Bh(t,a,n);return[s,i]}function Sue(t,e,n){var r=qP(t);t.l++;var a=t.read_shift(1);return e-=8,[jhe(t,e,n),a,r]}function a6(t,e,n){var r=Dce(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,Uhe(t,e,n)]}function Tue(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function Bue(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=zh(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:a},o,i,s]}}function Nue(t,e,n){return Bue(t,e,n)}function kue(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(Nw(t));return n}function Iue(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)GP(t[n],e);return e}function Fue(t,e,n){if(n&&n.biff<8)return Due(t,e,n);var r=KP(t),a=Pce(t,e-22,r[1]);return{cmo:r,ft:a}}var Rue={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=n,{fmt:r}}};function Due(t,e,n){t.l+=4;var r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Rue[r]||Qi)(t,e,n)),{cmo:[a,r,s],ft:i}}function Lue(t,e,n){var r=t.l,a="";try{t.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=Ece(t,6,n);var o=t.read_shift(2);t.read_shift(2),hs(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-r!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=Bh(t,t.lens[u+1]-t.lens[u]-1);if(a+=h,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return t.l=r+e,{t:a}}catch{return t.l=r+e,{t:a}}}function Uue(t,e){var n=Nw(t);t.l+=16;var r=Bce(t,e-24);return[n,r]}function Mue(t){var e=lt(24),n=Ca(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(r[a],16));return Gs([e,Nce(t[1])])}function Pue(t,e){t.read_shift(2);var n=Nw(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(Yi,""),[n,r]}function jue(t){var e=t[1].Tooltip,n=lt(10+2*(e.length+1));n.write_shift(2,2048);var r=Ca(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var a=0;a<e.length;++a)n.write_shift(2,e.charCodeAt(a));return n.write_shift(2,0),n}function Oue(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=HF[n]||n,n=t.read_shift(2),e[1]=HF[n]||n,e}function Que(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Hue(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(VP(t));return n}function Vue(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(VP(t));return n}function zue(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function $P(t,e,n){if(!n.cellStyles)return Qi(t,e);var r=n&&n.biff>=12?4:2,a=t.read_shift(r),s=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}function Gue(t,e){var n=lt(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function que(t,e){var n={};return e<32||(t.l+=16,n.header=Mi(t),n.footer=Mi(t),t.l+=2),n}function Kue(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var a=t.read_shift(1);return t.l+=3,a&16&&(r.area=!0),r}function Wue(t){for(var e=lt(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var $ue=Iu,Jue=jP,Yue=Gx;function Xue(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),a={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,a}function Zue(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=Iu(t);++t.l;var a=zh(t,e-7,n);return r.t="str",r.val=a,r}function eAe(t){var e=Iu(t);++t.l;var n=Mi(t);return e.t="n",e.val=n,e}function tAe(t,e,n){var r=lt(15);return $x(r,t,e),r.write_shift(8,n,"f"),r}function nAe(t){var e=Iu(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function rAe(t,e,n){var r=lt(9);return $x(r,t,e),r.write_shift(2,n),r}function aAe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function sAe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function iAe(t,e,n){var r=t.l+e,a=Iu(t),s=t.read_shift(2),i=Bh(t,s,n);return t.l=r,a.t="str",a.val=i,a}var oAe=[2,3,48,49,131,139,140,245],n5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Sw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var u=[],d=ff(1);switch(l.type){case"base64":d=$o(tl(o));break;case"binary":d=$o(o);break;case"buffer":case"array":d=o;break}ii(d,0);var h=d.read_shift(1),m=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var w=0,E=521;h==2&&(w=d.read_shift(2)),d.l+=3,h!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),h!=2&&(E=d.read_shift(2));var N=d.read_shift(2),I=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(I=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var k=[],U={},P=Math.min(d.length,h==2?521:E-10-(g?264:0)),D=b?32:11;d.l<P&&d[d.l]!=13;)switch(U={},U.name=rx.utils.decode(I,d.slice(d.l,d.l+D)).replace(/[\u0000\r\n].*$/g,""),d.l+=D,U.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(U.offset=d.read_shift(4)),U.len=d.read_shift(1),h==2&&(U.offset=d.read_shift(2)),U.dec=d.read_shift(1),U.name.length&&k.push(U),h!=2&&(d.l+=b?13:14),U.type){case"B":(!g||U.len!=8)&&l.WTF&&console.log("Skipping "+U.name+":"+U.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+U.name+":"+U.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+U.type)}if(d[d.l]!==13&&(d.l=E-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=E;var _=0,B=0;for(u[0]=[],B=0;B!=k.length;++B)u[0][B]=k[B].name;for(;w-- >0;){if(d[d.l]===42){d.l+=N;continue}for(++d.l,u[++_]=[],B=0,B=0;B!=k.length;++B){var T=d.slice(d.l,d.l+k[B].len);d.l+=k[B].len,ii(T,0);var O=rx.utils.decode(I,T);switch(k[B].type){case"C":O.trim().length&&(u[_][B]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[_][B]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[_][B]=O;break;case"F":u[_][B]=parseFloat(O.trim());break;case"+":case"I":u[_][B]=b?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[_][B]=!0;break;case"N":case"F":u[_][B]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[_][B]="##MEMO##"+(b?parseInt(O.trim(),10):T.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[_][B]=+O||0);break;case"@":u[_][B]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":u[_][B]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":u[_][B]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][B]=-T.read_shift(-8,"f");break;case"B":if(g&&k[B].len==8){u[_][B]=T.read_shift(8,"f");break}case"G":case"P":T.l+=k[B].len;break;case"0":if(k[B].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[B].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=k,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ym(n(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function a(o,l){try{return Cf(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Cc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Co(),h=py(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),b=o["!cols"]||[],w=0,E=0,N=0,I=1;for(w=0;w<m.length;++w){if(((b[w]||{}).DBF||{}).name){m[w]=b[w].DBF.name,++N;continue}if(m[w]!=null){if(++N,typeof m[w]=="number"&&(m[w]=m[w].toString(10)),typeof m[w]!="string")throw new Error("DBF Invalid column name "+m[w]+" |"+typeof m[w]+"|");if(m.indexOf(m[w])!==w){for(E=0;E<1024;++E)if(m.indexOf(m[w]+"_"+E)==-1){m[w]+="_"+E;break}}}}var k=vr(o["!ref"]),U=[],P=[],D=[];for(w=0;w<=k.e.c-k.s.c;++w){var _="",B="",T=0,O=[];for(E=0;E<g.length;++E)g[E][w]!=null&&O.push(g[E][w]);if(O.length==0||m[w]==null){U[w]="?";continue}for(E=0;E<O.length;++E){switch(typeof O[E]){case"number":B="B";break;case"string":B="C";break;case"boolean":B="L";break;case"object":B=O[E]instanceof Date?"D":"C";break;default:B="C"}T=Math.max(T,String(O[E]).length),_=_&&_!=B?"C":B}T>250&&(T=250),B=((b[w]||{}).DBF||{}).type,B=="C"&&b[w].DBF.len>T&&(T=b[w].DBF.len),_=="B"&&B=="N"&&(_="N",D[w]=b[w].DBF.dec,T=b[w].DBF.len),P[w]=_=="C"||B=="N"?T:s[_]||0,I+=P[w],U[w]=_}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,g.length),R.write_shift(2,296+32*N),R.write_shift(2,I),w=0;w<4;++w)R.write_shift(4,0);for(R.write_shift(4,0|(+e[PM]||3)<<8),w=0,E=0;w<m.length;++w)if(m[w]!=null){var L=d.next(32),Q=(m[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,Q,"sbcs"),L.write_shift(1,U[w]=="?"?"C":U[w],"sbcs"),L.write_shift(4,E),L.write_shift(1,P[w]||s[U[w]]||0),L.write_shift(1,D[w]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),E+=P[w]||s[U[w]]||0}var z=d.next(264);for(z.write_shift(4,13),w=0;w<65;++w)z.write_shift(4,0);for(w=0;w<g.length;++w){var ie=d.next(I);for(ie.write_shift(1,0),E=0;E<m.length;++E)if(m[E]!=null)switch(U[E]){case"L":ie.write_shift(1,g[w][E]==null?63:g[w][E]?84:70);break;case"B":ie.write_shift(8,g[w][E]||0,"f");break;case"N":var J="0";for(typeof g[w][E]=="number"&&(J=g[w][E].toFixed(D[E]||0)),N=0;N<P[E]-J.length;++N)ie.write_shift(1,32);ie.write_shift(1,J,"sbcs");break;case"D":g[w][E]?(ie.write_shift(4,("0000"+g[w][E].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(g[w][E].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+g[w][E].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var ee=String(g[w][E]!=null?g[w][E]:"").slice(0,P[E]);for(ie.write_shift(1,ee,"sbcs"),N=0;N<P[E]-ee.length;++N)ie.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:r,from_sheet:i}}(),JP=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ja(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(m,g){var b=t[g];return typeof b=="number"?mF(b):b},r=function(m,g,b){var w=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return w==59?m:mF(w)};t["|"]=254;function a(m,g){switch(g.type){case"base64":return s(tl(m),g);case"binary":return s(m,g);case"buffer":return s(qn&&Buffer.isBuffer(m)?m.toString("binary"):bf(m),g);case"array":return s(Sh(m),g)}throw new Error("Unrecognized type "+g.type)}function s(m,g){var b=m.split(/[\n\r]+/),w=-1,E=-1,N=0,I=0,k=[],U=[],P=null,D={},_=[],B=[],T=[],O=0,R;for(+g.codepage>=0&&Cc(+g.codepage);N!==b.length;++N){O=0;var L=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),Q=L.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),z=Q[0],ie;if(L.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&U.push(L.slice(3).replace(/;;/g,";"));break;case"C":var J=!1,ee=!1,ae=!1,q=!1,Y=-1,Ae=-1;for(I=1;I<Q.length;++I)switch(Q[I].charAt(0)){case"A":break;case"X":E=parseInt(Q[I].slice(1))-1,ee=!0;break;case"Y":for(w=parseInt(Q[I].slice(1))-1,ee||(E=0),R=k.length;R<=w;++R)k[R]=[];break;case"K":ie=Q[I].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(_c(ie))?isNaN(Nm(ie).getDate())||(ie=la(ie)):(ie=_c(ie),P!==null&&$m(P)&&(ie=Bw(ie))),J=!0;break;case"E":q=!0;var j=fm(Q[I].slice(1),{r:w,c:E});k[w][E]=[k[w][E],j];break;case"S":ae=!0,k[w][E]=[k[w][E],"S5S"];break;case"G":break;case"R":Y=parseInt(Q[I].slice(1))-1;break;case"C":Ae=parseInt(Q[I].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}if(J&&(k[w][E]&&k[w][E].length==2?k[w][E][0]=ie:k[w][E]=ie,P=null),ae){if(q)throw new Error("SYLK shared formula cannot have own formula");var K=Y>-1&&k[Y][Ae];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");k[w][E][1]=h7(K[1],{r:w-Y,c:E-Ae})}break;case"F":var X=0;for(I=1;I<Q.length;++I)switch(Q[I].charAt(0)){case"X":E=parseInt(Q[I].slice(1))-1,++X;break;case"Y":for(w=parseInt(Q[I].slice(1))-1,R=k.length;R<=w;++R)k[R]=[];break;case"M":O=parseInt(Q[I].slice(1))/20;break;case"F":break;case"G":break;case"P":P=U[parseInt(Q[I].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=Q[I].slice(1).split(" "),R=parseInt(T[0],10);R<=parseInt(T[1],10);++R)O=parseInt(T[2],10),B[R-1]=O===0?{hidden:!0}:{wch:O},hf(B[R-1]);break;case"C":E=parseInt(Q[I].slice(1))-1,B[E]||(B[E]={});break;case"R":w=parseInt(Q[I].slice(1))-1,_[w]||(_[w]={}),O>0?(_[w].hpt=O,_[w].hpx=Im(O)):O===0&&(_[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}X<1&&(P=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+L)}}return _.length>0&&(D["!rows"]=_),B.length>0&&(D["!cols"]=B),g&&g.sheetRows&&(k=k.slice(0,g.sheetRows)),[k,D]}function i(m,g){var b=a(m,g),w=b[0],E=b[1],N=Ym(w,g);return ja(E).forEach(function(I){N[I]=E[I]}),N}function o(m,g){return Cf(i(m,g),g)}function l(m,g,b,w){var E="C;Y"+(b+1)+";X"+(w+1)+";K";switch(m.t){case"n":E+=m.v||0,m.f&&!m.F&&(E+=";E"+F4(m.f,{r:b,c:w}));break;case"b":E+=m.v?"TRUE":"FALSE";break;case"e":E+=m.w||m.v;break;case"d":E+='"'+(m.w||m.v)+'"';break;case"s":E+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(m,g){g.forEach(function(b,w){var E="F;W"+(w+1)+" "+(w+1)+" ";b.hidden?E+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=Ax(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=dx(b.wpx)),typeof b.wch=="number"&&(E+=Math.round(b.wch))),E.charAt(E.length-1)!=" "&&m.push(E)})}function d(m,g){g.forEach(function(b,w){var E="F;";b.hidden?E+="M0;":b.hpt?E+="M"+20*b.hpt+";":b.hpx&&(E+="M"+20*fx(b.hpx)+";"),E.length>2&&m.push(E+"R"+(w+1))})}function h(m,g){var b=["ID;PWXL;N;E"],w=[],E=vr(m["!ref"]),N,I=Array.isArray(m),k=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&u(b,m["!cols"]),m["!rows"]&&d(b,m["!rows"]),b.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var U=E.s.r;U<=E.e.r;++U)for(var P=E.s.c;P<=E.e.c;++P){var D=wn({r:U,c:P});N=I?(m[U]||[])[P]:m[D],!(!N||N.v==null&&(!N.f||N.F))&&w.push(l(N,m,U,P))}return b.join(k)+k+w.join(k)+k+"E"+k}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),YP=function(){function t(s,i){switch(i.type){case"base64":return e(tl(s),i);case"binary":return e(s,i);case"buffer":return e(qn&&Buffer.isBuffer(s)?s.toString("binary"):bf(s),i);case"array":return e(Sh(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),g=m[0],b=m[1];++d;for(var w=o[d]||"";(w.match(/["]/g)||[]).length&1&&d<o.length-1;)w+=`
`+o[++d];switch(w=w.trim(),+g){case-1:if(w==="BOT"){h[++l]=[],u=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?h[l][u]=!0:w==="FALSE"?h[l][u]=!1:isNaN(_c(b))?isNaN(Nm(b).getDate())?h[l][u]=b:h[l][u]=la(b):h[l][u]=_c(b),++u;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),h[l][u++]=w!==""?w:null;break}if(w==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function n(s,i){return Ym(t(s,i),i)}function r(s,i){return Cf(n(s,i),i)}var a=function(){var s=function(l,u,d,h,m){l.push(u),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=vr(l["!ref"]),h,m=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var w=wn({r:g,c:b});if(h=m?(l[g]||[])[b]:l[w],!h){i(u,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,E,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Vl(h.z||gn[14],Fs(la(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var N=`\r
`,I=u.join(N);return I}}();return{to_workbook:r,to_sheet:n,from_sheet:a}}(),XP=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,m){for(var g=h.split(`
`),b=-1,w=-1,E=0,N=[];E!==g.length;++E){var I=g[E].trim().split(":");if(I[0]==="cell"){var k=Ca(I[1]);if(N.length<=k.r)for(b=N.length;b<=k.r;++b)N[b]||(N[b]=[]);switch(b=k.r,w=k.c,I[2]){case"t":N[b][w]=t(I[3]);break;case"v":N[b][w]=+I[3];break;case"vtf":var U=I[I.length-1];case"vtc":switch(I[3]){case"nl":N[b][w]=!!+I[4];break;default:N[b][w]=+I[4];break}I[2]=="vtf"&&(N[b][w]=[N[b][w],U])}}}return m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),N}function r(h,m){return Ym(n(h,m),m)}function a(h,m){return Cf(r(h,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],b,w="",E=_o(h["!ref"]),N=Array.isArray(h),I=E.s.r;I<=E.e.r;++I)for(var k=E.s.c;k<=E.e.c;++k)if(w=wn({r:I,c:k}),b=N?(h[I]||[])[k]:h[w],!(!b||b.v==null||b.t==="z")){switch(g=["cell",w,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var U=Fs(la(b.v));g[2]="vtc",g[3]="nd",g[4]=""+U,g[5]=b.w||Vl(b.z||gn[14],U);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[s,i,o,i,u(h),l].join(`
`)}return{to_workbook:a,to_sheet:r,from_sheet:d}}(),km=function(){function t(d,h,m,g,b){b.raw?h[m][g]=d:d===""||(d==="TRUE"?h[m][g]=!0:d==="FALSE"?h[m][g]=!1:isNaN(_c(d))?isNaN(Nm(d).getDate())?h[m][g]=d:h[m][g]=la(d):h[m][g]=_c(d))}function e(d,h){var m=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),w=b.length-1;w>=0&&b[w].length===0;)--w;for(var E=10,N=0,I=0;I<=w;++I)N=b[I].indexOf(" "),N==-1?N=b[I].length:N++,E=Math.max(E,N);for(I=0;I<=w;++I){g[I]=[];var k=0;for(t(b[I].slice(0,E).trim(),g,I,k,m),k=1;k<=(b[I].length-E)/10+1;++k)t(b[I].slice(E+(k-1)*10,E+k*10).trim(),g,I,k,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function a(d){for(var h={},m=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?m=!m:!m&&b in n&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(w,E){return w[0]-E[0]||r[w[1]]-r[E[1]]}),n[b.pop()[1]]||44}function s(d,h){var m=h||{},g="",b=m.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=a(d.slice(0,1024)):m&&m.FS?g=m.FS:g=a(d.slice(0,1024));var E=0,N=0,I=0,k=0,U=0,P=g.charCodeAt(0),D=!1,_=0,B=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var T=m.dateNF!=null?Koe(m.dateNF):null;function O(){var R=d.slice(k,U),L={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)L.t="z";else if(m.raw)L.t="s",L.v=R;else if(R.trim().length===0)L.t="s",L.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(L.t="s",L.v=R.slice(2,-1).replace(/""/g,'"')):bfe(R)?(L.t="n",L.f=R.slice(1)):(L.t="s",L.v=R);else if(R=="TRUE")L.t="b",L.v=!0;else if(R=="FALSE")L.t="b",L.v=!1;else if(!isNaN(I=_c(R)))L.t="n",m.cellText!==!1&&(L.w=R),L.v=I;else if(!isNaN(Nm(R).getDate())||T&&R.match(T)){L.z=m.dateNF||gn[14];var Q=0;T&&R.match(T)&&(R=Woe(R,m.dateNF,R.match(T)||[]),Q=1),m.cellDates?(L.t="d",L.v=la(R,Q)):(L.t="n",L.v=Fs(la(R,Q))),m.cellText!==!1&&(L.w=Vl(L.z,L.v instanceof Date?Fs(L.v):L.v)),m.cellNF||delete L.z}else L.t="s",L.v=R;if(L.t=="z"||(m.dense?(b[E]||(b[E]=[]),b[E][N]=L):b[wn({c:N,r:E})]=L),k=U+1,B=d.charCodeAt(k),w.e.c<N&&(w.e.c=N),w.e.r<E&&(w.e.r=E),_==P)++N;else if(N=0,++E,m.sheetRows&&m.sheetRows<=E)return!0}e:for(;U<d.length;++U)switch(_=d.charCodeAt(U)){case 34:B===34&&(D=!D);break;case P:case 10:case 13:if(!D&&O())break e;break}return U-k>0&&O(),b["!ref"]=Rn(w),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):Ym(e(d,h),h)}function o(d,h){var m="",g=h.type=="string"?[0,0,0,0]:O4(d,h);switch(h.type){case"base64":m=tl(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof rx<"u"||(m=qn&&Buffer.isBuffer(d)?d.toString("binary"):bf(d));break;case"array":m=Sh(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=Jr(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=Jr(m):h.type=="binary"&&typeof rx<"u",m.slice(0,19)=="socialcalc:version:"?XP.to_sheet(h.type=="string"?m:Jr(m),h):i(m,h)}function l(d,h){return Cf(o(d,h),h)}function u(d){for(var h=[],m=vr(d["!ref"]),g,b=Array.isArray(d),w=m.s.r;w<=m.e.r;++w){for(var E=[],N=m.s.c;N<=m.e.c;++N){var I=wn({r:w,c:N});if(g=b?(d[w]||[])[N]:d[I],!g||g.v==null){E.push("          ");continue}for(var k=(g.w||(kA(g),g.w)||"").slice(0,10);k.length<10;)k+=" ";E.push(k+(N===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function lAe(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var a=JP.to_workbook(t,n);return n.WTF=r,a}catch(s){if(n.WTF=r,!s.message.match(/SYLK bad record ID/)&&r)throw s;return km.to_workbook(t,e)}}var hh=function(){function t(j,K,X){if(j){ii(j,j.l||0);for(var te=X.Enum||Y;j.l<j.length;){var le=j.read_shift(2),ye=te[le]||te[65535],Ce=j.read_shift(2),_e=j.l+Ce,Ie=ye.f&&ye.f(j,Ce,X);if(j.l=_e,K(Ie,ye,le))return}}}function e(j,K){switch(K.type){case"base64":return n($o(tl(j)),K);case"binary":return n($o(j),K);case"buffer":case"array":return n(j,K)}throw"Unsupported type "+K.type}function n(j,K){if(!j)return j;var X=K||{},te=X.dense?[]:{},le="Sheet1",ye="",Ce=0,_e={},Ie=[],xe=[],se={s:{r:0,c:0},e:{r:0,c:0}},Re=X.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)X.Enum=Y,t(j,function(ze,nt,it){switch(it){case 0:X.vers=ze,ze>=4096&&(X.qpro=!0);break;case 6:se=ze;break;case 204:ze&&(ye=ze);break;case 222:ye=ze;break;case 15:case 51:X.qpro||(ze[1].v=ze[1].v.slice(1));case 13:case 14:case 16:it==14&&(ze[2]&112)==112&&(ze[2]&15)>1&&(ze[2]&15)<15&&(ze[1].z=X.dateNF||gn[14],X.cellDates&&(ze[1].t="d",ze[1].v=Bw(ze[1].v))),X.qpro&&ze[3]>Ce&&(te["!ref"]=Rn(se),_e[le]=te,Ie.push(le),te=X.dense?[]:{},se={s:{r:0,c:0},e:{r:0,c:0}},Ce=ze[3],le=ye||"Sheet"+(Ce+1),ye="");var dt=X.dense?(te[ze[0].r]||[])[ze[0].c]:te[wn(ze[0])];if(dt){dt.t=ze[1].t,dt.v=ze[1].v,ze[1].z!=null&&(dt.z=ze[1].z),ze[1].f!=null&&(dt.f=ze[1].f);break}X.dense?(te[ze[0].r]||(te[ze[0].r]=[]),te[ze[0].r][ze[0].c]=ze[1]):te[wn(ze[0])]=ze[1];break}},X);else if(j[2]==26||j[2]==14)X.Enum=Ae,j[2]==14&&(X.qpro=!0,j.l=0),t(j,function(ze,nt,it){switch(it){case 204:le=ze;break;case 22:ze[1].v=ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ze[3]>Ce&&(te["!ref"]=Rn(se),_e[le]=te,Ie.push(le),te=X.dense?[]:{},se={s:{r:0,c:0},e:{r:0,c:0}},Ce=ze[3],le="Sheet"+(Ce+1)),Re>0&&ze[0].r>=Re)break;X.dense?(te[ze[0].r]||(te[ze[0].r]=[]),te[ze[0].r][ze[0].c]=ze[1]):te[wn(ze[0])]=ze[1],se.e.c<ze[0].c&&(se.e.c=ze[0].c),se.e.r<ze[0].r&&(se.e.r=ze[0].r);break;case 27:ze[14e3]&&(xe[ze[14e3][0]]=ze[14e3][1]);break;case 1537:xe[ze[0]]=ze[1],ze[0]==Ce&&(le=ze[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(te["!ref"]=Rn(se),_e[ye||le]=te,Ie.push(ye||le),!xe.length)return{SheetNames:Ie,Sheets:_e};for(var et={},De=[],we=0;we<xe.length;++we)_e[Ie[we]]?(De.push(xe[we]||Ie[we]),et[xe[we]]=_e[xe[we]]||_e[Ie[we]]):(De.push(xe[we]),et[xe[we]]={"!ref":"A1"});return{SheetNames:De,Sheets:et}}function r(j,K){var X=K||{};if(+X.codepage>=0&&Cc(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Co(),le=vr(j["!ref"]),ye=Array.isArray(j),Ce=[];Dt(te,0,s(1030)),Dt(te,6,l(le));for(var _e=Math.min(le.e.r,8191),Ie=le.s.r;Ie<=_e;++Ie)for(var xe=es(Ie),se=le.s.c;se<=le.e.c;++se){Ie===le.s.r&&(Ce[se]=ba(se));var Re=Ce[se]+xe,et=ye?(j[Ie]||[])[se]:j[Re];if(!(!et||et.t=="z"))if(et.t=="n")(et.v|0)==et.v&&et.v>=-32768&&et.v<=32767?Dt(te,13,g(Ie,se,et.v)):Dt(te,14,w(Ie,se,et.v));else{var De=kA(et);Dt(te,15,h(Ie,se,De.slice(0,239)))}}return Dt(te,1),te.end()}function a(j,K){var X=K||{};if(+X.codepage>=0&&Cc(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Co();Dt(te,0,i(j));for(var le=0,ye=0;le<j.SheetNames.length;++le)(j.Sheets[j.SheetNames[le]]||{})["!ref"]&&Dt(te,27,q(j.SheetNames[le],ye++));var Ce=0;for(le=0;le<j.SheetNames.length;++le){var _e=j.Sheets[j.SheetNames[le]];if(!(!_e||!_e["!ref"])){for(var Ie=vr(_e["!ref"]),xe=Array.isArray(_e),se=[],Re=Math.min(Ie.e.r,8191),et=Ie.s.r;et<=Re;++et)for(var De=es(et),we=Ie.s.c;we<=Ie.e.c;++we){et===Ie.s.r&&(se[we]=ba(we));var ze=se[we]+De,nt=xe?(_e[et]||[])[we]:_e[ze];if(!(!nt||nt.t=="z"))if(nt.t=="n")Dt(te,23,O(et,we,Ce,nt.v));else{var it=kA(nt);Dt(te,22,_(et,we,Ce,it.slice(0,239)))}}++Ce}}return Dt(te,1),te.end()}function s(j){var K=lt(2);return K.write_shift(2,j),K}function i(j){var K=lt(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var X=0,te=0,le=0,ye=0;ye<j.SheetNames.length;++ye){var Ce=j.SheetNames[ye],_e=j.Sheets[Ce];if(!(!_e||!_e["!ref"])){++le;var Ie=_o(_e["!ref"]);X<Ie.e.r&&(X=Ie.e.r),te<Ie.e.c&&(te=Ie.e.c)}}return X>8191&&(X=8191),K.write_shift(2,X),K.write_shift(1,le),K.write_shift(1,te),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function o(j,K,X){var te={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&X.qpro?(te.s.c=j.read_shift(1),j.l++,te.s.r=j.read_shift(2),te.e.c=j.read_shift(1),j.l++,te.e.r=j.read_shift(2),te):(te.s.c=j.read_shift(2),te.s.r=j.read_shift(2),K==12&&X.qpro&&(j.l+=2),te.e.c=j.read_shift(2),te.e.r=j.read_shift(2),K==12&&X.qpro&&(j.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(j){var K=lt(8);return K.write_shift(2,j.s.c),K.write_shift(2,j.s.r),K.write_shift(2,j.e.c),K.write_shift(2,j.e.r),K}function u(j,K,X){var te=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(te[0].c=j.read_shift(1),te[3]=j.read_shift(1),te[0].r=j.read_shift(2),j.l+=2):(te[2]=j.read_shift(1),te[0].c=j.read_shift(2),te[0].r=j.read_shift(2)),te}function d(j,K,X){var te=j.l+K,le=u(j,K,X);if(le[1].t="s",X.vers==20768){j.l++;var ye=j.read_shift(1);return le[1].v=j.read_shift(ye,"utf8"),le}return X.qpro&&j.l++,le[1].v=j.read_shift(te-j.l,"cstr"),le}function h(j,K,X){var te=lt(7+X.length);te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,j),te.write_shift(1,39);for(var le=0;le<te.length;++le){var ye=X.charCodeAt(le);te.write_shift(1,ye>=128?95:ye)}return te.write_shift(1,0),te}function m(j,K,X){var te=u(j,K,X);return te[1].v=j.read_shift(2,"i"),te}function g(j,K,X){var te=lt(7);return te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,j),te.write_shift(2,X,"i"),te}function b(j,K,X){var te=u(j,K,X);return te[1].v=j.read_shift(8,"f"),te}function w(j,K,X){var te=lt(13);return te.write_shift(1,255),te.write_shift(2,K),te.write_shift(2,j),te.write_shift(8,X,"f"),te}function E(j,K,X){var te=j.l+K,le=u(j,K,X);if(le[1].v=j.read_shift(8,"f"),X.qpro)j.l=te;else{var ye=j.read_shift(2);U(j.slice(j.l,j.l+ye),le),j.l+=ye}return le}function N(j,K,X){var te=K&32768;return K&=-32769,K=(te?j:0)+(K>=8192?K-16384:K),(te?"":"$")+(X?ba(K):es(K))}var I={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function U(j,K){ii(j,0);for(var X=[],te=0,le="",ye="",Ce="",_e="";j.l<j.length;){var Ie=j[j.l++];switch(Ie){case 0:X.push(j.read_shift(8,"f"));break;case 1:ye=N(K[0].c,j.read_shift(2),!0),le=N(K[0].r,j.read_shift(2),!1),X.push(ye+le);break;case 2:{var xe=N(K[0].c,j.read_shift(2),!0),se=N(K[0].r,j.read_shift(2),!1);ye=N(K[0].c,j.read_shift(2),!0),le=N(K[0].r,j.read_shift(2),!1),X.push(xe+se+":"+ye+le)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(j.read_shift(2));break;case 6:{for(var Re="";Ie=j[j.l++];)Re+=String.fromCharCode(Ie);X.push('"'+Re.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:_e=X.pop(),Ce=X.pop(),X.push(["AND","OR"][Ie-20]+"("+Ce+","+_e+")");break;default:if(Ie<32&&k[Ie])_e=X.pop(),Ce=X.pop(),X.push(Ce+k[Ie]+_e);else if(I[Ie]){if(te=I[Ie][1],te==69&&(te=j[j.l++]),te>X.length){console.error("WK1 bad formula parse 0x"+Ie.toString(16)+":|"+X.join("|")+"|");return}var et=X.slice(-te);X.length-=te,X.push(I[Ie][0]+"("+et.join(",")+")")}else return Ie<=7?console.error("WK1 invalid opcode "+Ie.toString(16)):Ie<=24?console.error("WK1 unsupported op "+Ie.toString(16)):Ie<=30?console.error("WK1 invalid opcode "+Ie.toString(16)):Ie<=115?console.error("WK1 unsupported function opcode "+Ie.toString(16)):console.error("WK1 unrecognized opcode "+Ie.toString(16))}}X.length==1?K[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function P(j){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=j.read_shift(2),K[3]=j[j.l++],K[0].c=j[j.l++],K}function D(j,K){var X=P(j);return X[1].t="s",X[1].v=j.read_shift(K-4,"cstr"),X}function _(j,K,X,te){var le=lt(6+te.length);le.write_shift(2,j),le.write_shift(1,X),le.write_shift(1,K),le.write_shift(1,39);for(var ye=0;ye<te.length;++ye){var Ce=te.charCodeAt(ye);le.write_shift(1,Ce>=128?95:Ce)}return le.write_shift(1,0),le}function B(j,K){var X=P(j);X[1].v=j.read_shift(2);var te=X[1].v>>1;if(X[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return X[1].v=te,X}function T(j,K){var X=P(j),te=j.read_shift(4),le=j.read_shift(4),ye=j.read_shift(2);if(ye==65535)return te===0&&le===3221225472?(X[1].t="e",X[1].v=15):te===0&&le===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var Ce=ye&32768;return ye=(ye&32767)-16446,X[1].v=(1-Ce*2)*(le*Math.pow(2,ye+32)+te*Math.pow(2,ye)),X}function O(j,K,X,te){var le=lt(14);if(le.write_shift(2,j),le.write_shift(1,X),le.write_shift(1,K),te==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var ye=0,Ce=0,_e=0,Ie=0;return te<0&&(ye=1,te=-te),Ce=Math.log2(te)|0,te/=Math.pow(2,Ce-31),Ie=te>>>0,(Ie&2147483648)==0&&(te/=2,++Ce,Ie=te>>>0),te-=Ie,Ie|=2147483648,Ie>>>=0,te*=Math.pow(2,32),_e=te>>>0,le.write_shift(4,_e),le.write_shift(4,Ie),Ce+=16383+(ye?32768:0),le.write_shift(2,Ce),le}function R(j,K){var X=T(j);return j.l+=K-14,X}function L(j,K){var X=P(j),te=j.read_shift(4);return X[1].v=te>>6,X}function Q(j,K){var X=P(j),te=j.read_shift(8,"f");return X[1].v=te,X}function z(j,K){var X=Q(j);return j.l+=K-10,X}function ie(j,K){return j[j.l+K-1]==0?j.read_shift(K,"cstr"):""}function J(j,K){var X=j[j.l++];X>K-1&&(X=K-1);for(var te="";te.length<X;)te+=String.fromCharCode(j[j.l++]);return te}function ee(j,K,X){if(!(!X.qpro||K<21)){var te=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var le=j.read_shift(K-21,"cstr");return[te,le]}}function ae(j,K){for(var X={},te=j.l+K;j.l<te;){var le=j.read_shift(2);if(le==14e3){for(X[le]=[0,""],X[le][0]=j.read_shift(2);j[j.l];)X[le][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return X}function q(j,K){var X=lt(5+j.length);X.write_shift(2,14e3),X.write_shift(2,K);for(var te=0;te<j.length;++te){var le=j.charCodeAt(te);X[X.l++]=le>127?95:le}return X[X.l++]=0,X}var Y={0:{n:"BOF",f:hs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:J},65535:{n:""}},Ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:B},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ee},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:a,to_workbook:e}}();function cAe(t){var e={},n=t.match(Vi),r=0,a=!1;if(n)for(;r!=n.length;++r){var s=_n(n[r]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=r4[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var uAe=function(){var t=ix("t"),e=ix("rPr");function n(s){var i=s.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:gr(i[1])},l=s.match(e);return l&&(o.s=cAe(l[1])),o}var r=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(r,"").split(a).map(n).filter(function(o){return o.v})}}(),AAe=function(){var e=/(\r\n|\n)/g;function n(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function r(a){var s=[[],a.v,[]];return a.v?(a.s&&n(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(r).join("")}}(),dAe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,fAe=/<(?:\w+:)?r>/,hAe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function T4(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=gr(Jr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Jr(t),n&&(r.h=f4(r.t))):t.match(fAe)&&(r.r=Jr(t),r.t=gr(Jr((t.replace(hAe,"").match(dAe)||[]).join("").replace(Vi,""))),n&&(r.h=AAe(uAe(r.r)))),r):{t:""}}var mAe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,pAe=/<(?:\w+:)?(?:si|sstItem)>/g,gAe=/<\/(?:\w+:)?(?:si|sstItem)>/;function xAe(t,e){var n=[],r="";if(!t)return n;var a=t.match(mAe);if(a){r=a[2].replace(pAe,"").split(gAe);for(var s=0;s!=r.length;++s){var i=T4(r[s].trim(),e);i!=null&&(n[n.length]=i)}a=_n(a[1]),n.Count=a.count,n.Unique=a.uniqueCount}return n}var vAe=/^\s|\s$|[\t\n\r]/;function ZP(t,e){if(!e.bookSST)return"";var n=[ns];n[n.length]=Rt("sst",null,{xmlns:jh[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var a=t[r],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(vAe)&&(s+=' xml:space="preserve"'),s+=">"+Qr(a.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function yAe(t){return[t.read_shift(4),t.read_shift(4)]}function wAe(t,e){var n=[],r=!1;return QA(t,function(s,i,o){switch(o){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function bAe(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var CAe=Rle;function EAe(t){var e=Co();Et(e,159,bAe(t));for(var n=0;n<t.length;++n)Et(e,19,CAe(t[n]));return Et(e,160),e.end()}function e7(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function bA(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function _Ae(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=bA(t,4),e.U=bA(t,4),e.W=bA(t,4),e}function SAe(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=s,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function TAe(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(SAe(t));return e}function BAe(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function NAe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=bA(t,4),e.U=bA(t,4),e.W=bA(t,4),e}function kAe(t){var e=NAe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function t7(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var a=!1;switch(r.AlgID){case 26126:case 26127:case 26128:a=r.Flags==36;break;case 26625:a=r.Flags==4;break;case 0:a=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function n7(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function IAe(t){var e=bA(t);switch(e.Minor){case 2:return[e.Minor,FAe(t)];case 3:return[e.Minor,RAe()];case 4:return[e.Minor,DAe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function FAe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=t7(t,n),a=n7(t,t.length-t.l);return{t:"Std",h:r,v:a}}function RAe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function DAe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(Vi,function(s){var i=_n(s);switch(ku(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=i[o]});break;case"<dataIntegrity":r.encryptedHmacKey=i.encryptedHmacKey,r.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(i);break;default:throw i[0]}}),r}function LAe(t,e){var n={},r=n.EncryptionVersionInfo=bA(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,n.EncryptionHeader=t7(t,a),e-=a,n.EncryptionVerifier=n7(t,e),n}function UAe(t){var e={},n=e.EncryptionVersionInfo=bA(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function B4(t){var e=0,n,r=e7(t),a=r.length+1,s,i,o,l,u;for(n=ff(a),n[0]=r.length,s=1;s!=a;++s)n[s]=r[s-1];for(s=a-1;s>=0;--s)i=n[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var r7=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(i){return(i/2|i*128)&255},a=function(i,o){return r(i^o)},s=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=n[l]),d*=2,--l;return o};return function(i){for(var o=e7(i),l=s(o),u=o.length,d=ff(16),h=0;h!=16;++h)d[h]=0;var m,g,b;for((u&1)===1&&(m=l>>8,d[u]=a(t[0],m),--u,m=l&255,g=o[o.length-1],d[u]=a(g,m));u>0;)--u,m=l>>8,d[u]=a(o[u],m),--u,m=l&255,d[u]=a(o[u],m);for(u=15,b=15-o.length;b>0;)m=l>>8,d[u]=a(t[b],m),--u,--b,m=l&255,d[u]=a(o[u],m),--u,--b;return d}}(),MAe=function(t,e,n,r,a){a||(a=e),r||(r=r7(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=r[n],i=(i>>5|i<<3)&255,a[s]=i,++n;return[a,n,r]},PAe=function(t){var e=0,n=r7(t);return function(r){var a=MAe("",r,e,n);return e=a[1],a[0]}};function jAe(t,e,n,r){var a={key:hs(t),verificationBytes:hs(t)};return n.password&&(a.verifier=B4(n.password)),r.valid=a.verificationBytes===a.verifier,r.valid&&(r.insitu=PAe(n.password)),a}function OAe(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=UAe(t):r.Data=LAe(t,e),r}function QAe(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?OAe(t,e-2,r):jAe(t,n.biff>=8?e:e-2,n,r),r}var a7=function(){function t(a,s){switch(s.type){case"base64":return e(tl(a),s);case"binary":return e(a,s);case"buffer":return e(qn&&Buffer.isBuffer(a)?a.toString("binary"):bf(a),s);case"array":return e(Sh(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,b,w=-1;b=m.exec(d);){switch(b[0]){case"\\cell":var E=d.slice(g,m.lastIndex-b[0].length);if(E[0]==" "&&(E=E.slice(1)),++w,E.length){var N={v:E,t:"s"};Array.isArray(o)?o[h][w]=N:o[wn({r:h,c:w})]=N}break}g=m.lastIndex}w>u.e.c&&(u.e.c=w)}),o["!ref"]=Rn(u),o}function n(a,s){return Cf(t(a,s),s)}function r(a){for(var s=["{\\rtf1\\ansi"],i=vr(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=wn({r:u,c:d});o=l?(a[u]||[])[d]:a[h],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(kA(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function HAe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function ux(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function VAe(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,a=Math.max(e,n,r),s=Math.min(e,n,r),i=a-s;if(i===0)return[0,0,e];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case e:o=((n-r)/i+6)%6;break;case n:o=(r-e)/i+2;break;case r:o=(e-n)/i+4;break}return[o/6,l,u/2]}function zAe(t){var e=t[0],n=t[1],r=t[2],a=n*2*(r<.5?r:1-r),s=r-a/2,i=[s,s,s],o=6*e,l;if(n!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function hy(t,e){if(e===0)return t;var n=VAe(HAe(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),ux(zAe(n))}var s7=6,GAe=15,qAe=1,Li=s7;function Ax(t){return Math.floor((t+Math.round(128/Li)/256)*Li)}function dx(t){return Math.floor((t-5)/Li*100+.5)/100}function my(t){return Math.round((t*Li+5)/Li*256)/256}function YC(t){return my(dx(Ax(t)))}function N4(t){var e=Math.abs(t-YC(t)),n=Li;if(e>.005)for(Li=qAe;Li<GAe;++Li)Math.abs(t-YC(t))<=e&&(e=Math.abs(t-YC(t)),n=Li);Li=n}function hf(t){t.width?(t.wpx=Ax(t.width),t.wch=dx(t.wpx),t.MDW=Li):t.wpx?(t.wch=dx(t.wpx),t.width=my(t.wch),t.MDW=Li):typeof t.wch=="number"&&(t.width=my(t.wch),t.wpx=Ax(t.width),t.MDW=Li),t.customWidth&&delete t.customWidth}var KAe=96,i7=KAe;function fx(t){return t*96/i7}function Im(t){return t*i7/96}var WAe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function $Ae(t,e,n,r){e.Borders=[];var a={},s=!1;(t[0].match(Vi)||[]).forEach(function(i){var o=_n(i);switch(ku(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=ia(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=ia(o.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function JAe(t,e,n,r){e.Fills=[];var a={},s=!1;(t[0].match(Vi)||[]).forEach(function(i){var o=_n(i);switch(ku(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function YAe(t,e,n,r){e.Fonts=[];var a={},s=!1;(t[0].match(Vi)||[]).forEach(function(i){var o=_n(i);switch(ku(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Jr(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?ia(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?ia(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?ia(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?ia(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?ia(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?ia(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?ia(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=r4[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=ia(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=dh[a.color.index];a.color.index==81&&(l=dh[1]),l||(l=dh[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(a.color.rgb=hy(n.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function XAe(t,e,n){e.NumberFmt=[];for(var r=ja(gn),a=0;a<r.length;++a)e.NumberFmt[r[a]]=gn[r[a]];var s=t[0].match(Vi);if(s)for(a=0;a<s.length;++a){var i=_n(s[a]);switch(ku(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=gr(Jr(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}wA(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function ZAe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Rt("numFmt",null,{numFmtId:r,formatCode:Qr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Rt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var wv=["numFmtId","fillId","fontId","borderId","xfId"],bv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ede(t,e,n){e.CellXf=[];var r,a=!1;(t[0].match(Vi)||[]).forEach(function(s){var i=_n(s),o=0;switch(ku(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=i,delete r[0],o=0;o<wv.length;++o)r[wv[o]]&&(r[wv[o]]=parseInt(r[wv[o]],10));for(o=0;o<bv.length;++o)r[bv[o]]&&(r[bv[o]]=ia(r[bv[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ia(i.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function tde(t){var e=[];return e[e.length]=Rt("cellXfs",null),t.forEach(function(n){e[e.length]=Rt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Rt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var nde=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&XAe(h,d,u),(h=o.match(a))&&YAe(h,d,l,u),(h=o.match(r))&&JAe(h,d,l,u),(h=o.match(s))&&$Ae(h,d,l,u),(h=o.match(n))&&ede(h,d,u),d}}();function o7(t,e){var n=[ns,Rt("styleSheet",null,{xmlns:jh[0],"xmlns:vt":Ns.vt})],r;return t.SSF&&(r=ZAe(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=tde(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function rde(t,e){var n=t.read_shift(2),r=ji(t);return[n,r]}function ade(t,e,n){n||(n=lt(6+4*e.length)),n.write_shift(2,t),qs(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function sde(t,e,n){var r={};r.sz=t.read_shift(2)/20;var a=Ole(t);a.fItalic&&(r.italic=1),a.fCondense&&(r.condense=1),a.fExtend&&(r.extend=1),a.fShadow&&(r.shadow=1),a.fOutline&&(r.outline=1),a.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=jle(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ji(t),r}function ide(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),Qle(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Ay(t.color,e);var r=0;return r=2,e.write_shift(1,r),qs(t.name,e),e.length>e.l?e.slice(0,e.l):e}var ode=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],XC,lde=Qi;function s6(t,e){e||(e=lt(84)),XC||(XC=Sw(ode));var n=XC[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(Ay({auto:1},e),Ay({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function cde(t,e){var n=t.l+e,r=t.read_shift(2),a=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:a}}function l7(t,e,n){n||(n=lt(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Gp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var ude=Qi;function Ade(t,e){return e||(e=lt(51)),e.write_shift(1,0),Gp(null,e),Gp(null,e),Gp(null,e),Gp(null,e),Gp(null,e),e.length>e.l?e.slice(0,e.l):e}function dde(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),uy(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function fde(t,e,n){var r=lt(2052);return r.write_shift(4,t),uy(e,r),uy(n,r),r.length>r.l?r.slice(0,r.l):r}function hde(t,e,n){var r={};r.NumberFmt=[];for(var a in gn)r.NumberFmt[a]=gn[a];r.CellXf=[],r.Fonts=[];var s=[],i=!1;return QA(t,function(l,u,d){switch(d){case 44:r.NumberFmt[l[0]]=l[1],wA(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=hy(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),r}function mde(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&++n}),n!=0&&(Et(t,615,Sc(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&Et(t,44,ade(a,e[a]))}),Et(t,616))}}function pde(t){var e=1;Et(t,611,Sc(e)),Et(t,43,ide({sz:12,color:{theme:1},name:"Calibri",family:2})),Et(t,612)}function gde(t){var e=2;Et(t,603,Sc(e)),Et(t,45,s6({patternType:"none"})),Et(t,45,s6({patternType:"gray125"})),Et(t,604)}function xde(t){var e=1;Et(t,613,Sc(e)),Et(t,46,Ade()),Et(t,614)}function vde(t){var e=1;Et(t,626,Sc(e)),Et(t,47,l7({numFmtId:0},65535)),Et(t,627)}function yde(t,e){Et(t,617,Sc(e.length)),e.forEach(function(n){Et(t,47,l7(n,0))}),Et(t,618)}function wde(t){var e=1;Et(t,619,Sc(e)),Et(t,48,dde({xfId:0,name:"Normal"})),Et(t,620)}function bde(t){var e=0;Et(t,505,Sc(e)),Et(t,506)}function Cde(t){var e=0;Et(t,508,fde(e,"TableStyleMedium9","PivotStyleMedium4")),Et(t,509)}function Ede(t,e){var n=Co();return Et(n,278),mde(n,t.SSF),pde(n),gde(n),xde(n),vde(n),yde(n,e.cellXfs),wde(n),bde(n),Cde(n),Et(n,279),n.end()}var _de=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Sde(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(Vi)||[]).forEach(function(a){var s=_n(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"<a:sysClr":r.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[_de.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Tde(){}function Bde(){}var Nde=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,kde=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Ide=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Fde(t,e,n){e.themeElements={};var r;[["clrScheme",Nde,Sde],["fontScheme",kde,Tde],["fmtScheme",Ide,Bde]].forEach(function(a){if(!(r=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](r,e,n)})}var Rde=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function c7(t,e){(!t||t.length===0)&&(t=k4());var n,r={};if(!(n=t.match(Rde)))throw new Error("themeElements not found in theme");return Fde(n[0],r,e),r.raw=t,r}function k4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[ns];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Dde(t,e,n){var r=t.l+e,a=t.read_shift(4);if(a!==124226){if(!n.cellStyles){t.l=r;return}var s=t.slice(t.l);t.l=r;var i;try{i=tP(s,{type:"array"})}catch{return}var o=Jo(i,"theme/theme/theme1.xml",!0);if(o)return c7(o,n)}}function Lde(t){return t.read_shift(4)}function Ude(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Mde(t,4);break;case 2:e.xclrValue=HP(t);break;case 3:e.xclrValue=Lde(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Mde(t,e){return Qi(t,e)}function Pde(t,e){return Qi(t,e)}function jde(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=Ude(t);break;case 6:r[1]=Pde(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function Ode(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(jde(t,n-t.l));return{ixfe:r,ext:s}}function Qde(t,e){e.forEach(function(n){n[0]})}function Hde(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ji(t)}}function Vde(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),qs(t.name,e),e.slice(0,e.l)}function zde(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Gde(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function qde(t,e){var n=lt(8+2*e.length);return n.write_shift(4,t),qs(e,n),n.slice(0,n.l)}function Kde(t){return t.l+=4,t.read_shift(4)!=0}function Wde(t,e){var n=lt(8);return n.write_shift(4,t),n.write_shift(4,1),n}function $de(t,e,n){var r={Types:[],Cell:[],Value:[]},a=n||{},s=[],i=!1,o=2;return QA(t,function(l,u,d){switch(d){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?r.Cell.push({type:r.Types[h[0]-1].name,index:h[1]}):o==0&&r.Value.push({type:r.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Jde(){var t=Co();return Et(t,332),Et(t,334,Sc(1)),Et(t,335,Vde({name:"XLDAPR",version:12e4,flags:3496657072})),Et(t,336),Et(t,339,qde(1,"XLDAPR")),Et(t,52),Et(t,35,Sc(514)),Et(t,4096,Sc(0)),Et(t,4097,Fl(1)),Et(t,36),Et(t,53),Et(t,340),Et(t,337,Wde(1)),Et(t,51,Gde([[1,0]])),Et(t,338),Et(t,333),t.end()}function Yde(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var a=!1,s=2,i;return t.replace(Vi,function(o){var l=_n(o);switch(ku(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==l.name&&(i=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):s==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&n.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function u7(){var t=[ns];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Xde(t){var e=[];if(!t)return e;var n=1;return(t.match(Vi)||[]).forEach(function(r){var a=_n(r);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?n=a.i:a.i=n,e.push(a);break}}),e}function Zde(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=wn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function efe(t,e,n){var r=[];return QA(t,function(s,i,o){switch(o){case 63:r.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function tfe(t,e,n,r){if(!t)return t;var a=r||{},s=!1;QA(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function nfe(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}var J0=1024;function A7(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),a=[Rt("xml",null,{"xmlns:v":Ko.v,"xmlns:o":Ko.o,"xmlns:x":Ko.x,"xmlns:mv":Ko.mv}).replace(/\/>/,">"),Rt("o:shapelayout",Rt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Rt("v:shapetype",[Rt("v:stroke",null,{joinstyle:"miter"}),Rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];J0<t*1e3;)J0+=1e3;return e.forEach(function(s){var i=Ca(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Rt("v:fill",l,o),d={on:"t",obscured:"t"};++J0,a=a.concat(["<v:shape"+ox({id:"_x0000_s"+J0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Rt("v:shadow",null,d),Rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",li("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),li("x:AutoFill","False"),li("x:Row",String(i.r)),li("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function i6(t,e,n,r){var a=Array.isArray(t),s;e.forEach(function(i){var o=Ca(i.ref);if(a?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[i.ref],!s){s={t:"z"},a?t[o.r][o.c]=s:t[i.ref]=s;var l=vr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Rn(l);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:n};i.h&&(d.h=i.h);for(var h=s.c.length-1;h>=0;--h){if(!n&&s.c[h].T)return;n&&!s.c[h].T&&s.c.splice(h,1)}if(n&&r){for(h=0;h<r.length;++h)if(d.a==r[h].id){d.a=r[h].name||d.a;break}}s.c.push(d)})}function rfe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&n.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=_n(o[0]),u={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Ca(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&T4(h[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=m.h),r.push(u)}}}}),r}function d7(t){var e=[ns,Rt("comments",null,{xmlns:jh[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(a){var s=Qr(a.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&n.indexOf("tc="+a.ID)==-1&&(n.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var a=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?a=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(a=n.indexOf(Qr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(li("t",Qr(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;e.push(li("t",Qr(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function afe(t,e){var n=[],r=!1,a={},s=0;return t.replace(Vi,function(o,l){var u=_n(o);switch(ku(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&n.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),n}function sfe(t,e,n){var r=[ns,Rt("ThreadedComments",null,{xmlns:Ns.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(Rt("threadedComment",li("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function ife(t,e){var n=[],r=!1;return t.replace(Vi,function(s){var i=_n(s);switch(ku(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),n}function ofe(t){var e=[ns,Rt("personList",null,{xmlns:Ns.TCMNT,"xmlns:x":jh[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Rt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function lfe(t){var e={};e.iauthor=t.read_shift(4);var n=Vh(t);return e.rfx=n.s,e.ref=wn(n.s),t.l+=16,e}function cfe(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),Xm(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var ufe=ji;function Afe(t){return qs(t.slice(0,54))}function dfe(t,e){var n=[],r=[],a={},s=!1;return QA(t,function(o,l,u){switch(u){case 632:r.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=r[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,n.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function ffe(t){var e=Co(),n=[];return Et(e,628),Et(e,630),t.forEach(function(r){r[1].forEach(function(a){n.indexOf(a.a)>-1||(n.push(a.a.slice(0,54)),Et(e,632,Afe(a.a)))})}),Et(e,631),Et(e,633),t.forEach(function(r){r[1].forEach(function(a){a.iauthor=n.indexOf(a.a);var s={s:Ca(r[0]),e:Ca(r[0])};Et(e,635,cfe([s,a])),a.t&&a.t.length>0&&Et(e,637,Lle(a)),Et(e,636),delete a.iauthor})}),Et(e,634),Et(e,629),e.end()}var hfe="application/vnd.ms-office.vbaProject";function mfe(t){var e=ln.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var a=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ln.utils.cfb_add(e,a,t.FileIndex[r].content)}}),ln.write(e)}function pfe(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var a=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&ln.utils.cfb_add(t,a,e.FileIndex[r].content)}})}var f7=["xlsb","xlsm","xlam","biff8","xla"];function gfe(){return{"!type":"dialog"}}function xfe(){return{"!type":"dialog"}}function vfe(){return{"!type":"macro"}}function yfe(){return{"!type":"macro"}}var fm=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,a+(o?"":"$")+ba(d)+(l?"":"$")+es(u)}return function(a,s){return e=s,a.replace(t,n)}}(),I4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,F4=function(){return function(e,n){return e.replace(I4,function(r,a,s,i,o,l){var u=x4(i)-(s?0:n.c),d=g4(l)-(o?0:n.r),h=d==0?"":o?d+1:"["+d+"]",m=u==0?"":s?u+1:"["+u+"]";return a+"R"+h+"C"+m})}}();function h7(t,e){return t.replace(I4,function(n,r,a,s,i,o){return r+(a=="$"?a+s:ba(x4(s)+e.c))+(i=="$"?i+o:es(g4(o)+e.r))})}function wfe(t,e,n){var r=_o(e),a=r.s,s=Ca(n),i={r:s.r-a.r,c:s.c-a.c};return h7(t,i)}function bfe(t){return t.length!=1}function o6(t){return t.replace(/_xlfn\./g,"")}function As(t){t.l+=1}function mf(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function m7(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return p7(t);n.biff==12&&(r=4)}var a=t.read_shift(r),s=t.read_shift(r),i=mf(t),o=mf(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function p7(t){var e=mf(t),n=mf(t),r=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:a,cRel:n[1],rRel:n[2]}}}function Cfe(t,e,n){if(n.biff<8)return p7(t);var r=t.read_shift(n.biff==12?4:2),a=t.read_shift(n.biff==12?4:2),s=mf(t),i=mf(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function g7(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return Efe(t);var r=t.read_shift(n&&n.biff==12?4:2),a=mf(t);return{r,c:a[0],cRel:a[1],rRel:a[2]}}function Efe(t){var e=mf(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function _fe(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Sfe(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Tfe(t);var a=t.read_shift(r>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function Tfe(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),a==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:a,rRel:r}}function Bfe(t,e,n){var r=(t[t.l++]&96)>>5,a=m7(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,a]}function Nfe(t,e,n){var r=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=m7(t,s,n);return[r,a,i]}function kfe(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Ife(t,e,n){var r=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,a]}function Ffe(t,e,n){var r=(t[t.l++]&96)>>5,a=Cfe(t,e-1,n);return[r,a]}function Rfe(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function l6(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Dfe(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),a=[],s=0;s<=r;++s)a.push(t.read_shift(n&&n.biff==2?1:2));return a}function Lfe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Ufe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Mfe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Pfe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function x7(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function jfe(t){return t.read_shift(2),x7(t)}function Ofe(t){return t.read_shift(2),x7(t)}function Qfe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var a=g7(t,0,n);return[r,a]}function Hfe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var a=Sfe(t,0,n);return[r,a]}function Vfe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=g7(t,0,n);return[r,a,s]}function zfe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(n&&n.biff<=3?1:2);return[Khe[a],w7[a],r]}function Gfe(t,e,n){var r=t[t.l++],a=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:qfe(t);return[a,(s[0]===0?w7:qhe)[s[1]]]}function qfe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Kfe(t,e,n){t.l+=n&&n.biff==2?3:4}function Wfe(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),a=t.read_shift(n&&n.biff==2?1:2);return[r,a]}function $fe(t){return t.l++,HA[t.read_shift(1)]}function Jfe(t){return t.l++,t.read_shift(2)}function Yfe(t){return t.l++,t.read_shift(1)!==0}function Xfe(t){return t.l++,Mi(t)}function Zfe(t,e,n){return t.l++,zx(t,e-1,n)}function ehe(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Wa(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=HA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Mi(t);break;case 2:n[1]=zh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function the(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),a=[],s=0;s!=r;++s)a.push((n.biff==12?Vh:Nw)(t));return a}function nhe(t,e,n){var r=0,a=0;n.biff==12?(r=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--a==0&&(a=256));for(var s=0,i=[];s!=r&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=ehe(t,n.biff);return i}function rhe(t,e,n){var r=t.read_shift(1)>>>5&3,a=!n||n.biff>=8?4:2,s=t.read_shift(a);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function ahe(t,e,n){if(n.biff==5)return she(t);var r=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[r,a,s]}function she(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function ihe(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var a=t.read_shift(n&&n.biff==2?1:2);return[r,a]}function ohe(t,e,n){var r=t.read_shift(1)>>>5&3,a=t.read_shift(n&&n.biff==2?1:2);return[r,a]}function lhe(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function che(t,e,n){var r=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,a]}var uhe=Qi,Ahe=Qi,dhe=Qi;function qx(t,e,n){return t.l+=2,[_fe(t)]}function R4(t){return t.l+=6,[]}var fhe=qx,hhe=R4,mhe=R4,phe=qx;function v7(t){return t.l+=2,[hs(t),t.read_shift(2)&1]}var ghe=qx,xhe=v7,vhe=R4,yhe=qx,whe=qx,bhe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Che(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=bhe[n>>2&31];return{ixti:e,coltype:n&3,rt:i,idx:r,c:a,C:s}}function Ehe(t){return t.l+=2,[t.read_shift(4)]}function _he(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function She(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function The(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Bhe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function Nhe(t){return t.l+=4,[0,0]}var c6={1:{n:"PtgExp",f:Wfe},2:{n:"PtgTbl",f:dhe},3:{n:"PtgAdd",f:As},4:{n:"PtgSub",f:As},5:{n:"PtgMul",f:As},6:{n:"PtgDiv",f:As},7:{n:"PtgPower",f:As},8:{n:"PtgConcat",f:As},9:{n:"PtgLt",f:As},10:{n:"PtgLe",f:As},11:{n:"PtgEq",f:As},12:{n:"PtgGe",f:As},13:{n:"PtgGt",f:As},14:{n:"PtgNe",f:As},15:{n:"PtgIsect",f:As},16:{n:"PtgUnion",f:As},17:{n:"PtgRange",f:As},18:{n:"PtgUplus",f:As},19:{n:"PtgUminus",f:As},20:{n:"PtgPercent",f:As},21:{n:"PtgParen",f:As},22:{n:"PtgMissArg",f:As},23:{n:"PtgStr",f:Zfe},26:{n:"PtgSheet",f:_he},27:{n:"PtgEndSheet",f:She},28:{n:"PtgErr",f:$fe},29:{n:"PtgBool",f:Yfe},30:{n:"PtgInt",f:Jfe},31:{n:"PtgNum",f:Xfe},32:{n:"PtgArray",f:Rfe},33:{n:"PtgFunc",f:zfe},34:{n:"PtgFuncVar",f:Gfe},35:{n:"PtgName",f:rhe},36:{n:"PtgRef",f:Qfe},37:{n:"PtgArea",f:Bfe},38:{n:"PtgMemArea",f:ihe},39:{n:"PtgMemErr",f:uhe},40:{n:"PtgMemNoMem",f:Ahe},41:{n:"PtgMemFunc",f:ohe},42:{n:"PtgRefErr",f:lhe},43:{n:"PtgAreaErr",f:kfe},44:{n:"PtgRefN",f:Hfe},45:{n:"PtgAreaN",f:Ffe},46:{n:"PtgMemAreaN",f:The},47:{n:"PtgMemNoMemN",f:Bhe},57:{n:"PtgNameX",f:ahe},58:{n:"PtgRef3d",f:Vfe},59:{n:"PtgArea3d",f:Nfe},60:{n:"PtgRefErr3d",f:che},61:{n:"PtgAreaErr3d",f:Ife},255:{}},khe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ihe={1:{n:"PtgElfLel",f:v7},2:{n:"PtgElfRw",f:yhe},3:{n:"PtgElfCol",f:fhe},6:{n:"PtgElfRwV",f:whe},7:{n:"PtgElfColV",f:phe},10:{n:"PtgElfRadical",f:ghe},11:{n:"PtgElfRadicalS",f:vhe},13:{n:"PtgElfColS",f:hhe},15:{n:"PtgElfColSV",f:mhe},16:{n:"PtgElfRadicalLel",f:xhe},25:{n:"PtgList",f:Che},29:{n:"PtgSxName",f:Ehe},255:{}},Fhe={0:{n:"PtgAttrNoop",f:Nhe},1:{n:"PtgAttrSemi",f:Pfe},2:{n:"PtgAttrIf",f:Ufe},4:{n:"PtgAttrChoose",f:Dfe},8:{n:"PtgAttrGoto",f:Lfe},16:{n:"PtgAttrSum",f:Kfe},32:{n:"PtgAttrBaxcel",f:l6},33:{n:"PtgAttrBaxcel",f:l6},64:{n:"PtgAttrSpace",f:jfe},65:{n:"PtgAttrSpaceSemi",f:Ofe},128:{n:"PtgAttrIfError",f:Mfe},255:{}};function Kx(t,e,n,r){if(r.biff<8)return Qi(t,e);for(var a=t.l+e,s=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=nhe(t,0,r),s.push(n[i][1]);break;case"PtgMemArea":n[i][2]=the(t,n[i][1],r),s.push(n[i][2]);break;case"PtgExp":r&&r.biff==12&&(n[i][1][1]=t.read_shift(4),s.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return e=a-t.l,e!==0&&s.push(Qi(t,e)),s}function Wx(t,e,n){for(var r=t.l+e,a,s,i=[];r!=t.l;)e=r-t.l,s=t[t.l],a=c6[s]||c6[khe[s]],(s===24||s===25)&&(a=(s===24?Ihe:Fhe)[t[t.l+1]]),!a||!a.f?Qi(t,e):i.push([a.n,a.f(t,e,n)]);return i}function Rhe(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],a=[],s=0;s<r.length;++s){var i=r[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var Dhe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Lhe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function y7(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var a="";if(n.biff>8)switch(t[r[0]][0]){case 357:return a=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?a:a+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return a=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?a:a+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(a=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?a:a+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function u6(t,e,n){var r=y7(t,e,n);return r=="#REF"?r:Lhe(r,n)}function Fi(t,e,n,r,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,m=0,g,b="";if(!t[0]||!t[0][0])return"";for(var w=-1,E="",N=0,I=t[0].length;N<I;++N){var k=t[0][N];switch(k[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),w>=0){switch(t[0][w][1][0]){case 0:E=La(" ",t[0][w][1][1]);break;case 1:E=La("\r",t[0][w][1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}u=u+E,w=-1}o.push(u+Dhe[k[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Rg(k[1][1],i,a),o.push(Dg(d,s));break;case"PtgRefN":d=n?Rg(k[1][1],n,a):k[1][1],o.push(Dg(d,s));break;case"PtgRef3d":h=k[1][1],d=Rg(k[1][2],i,a),b=u6(r,h,a),o.push(b+"!"+Dg(d,s));break;case"PtgFunc":case"PtgFuncVar":var U=k[1][0],P=k[1][1];U||(U=0),U&=127;var D=U==0?[]:o.slice(-U);o.length-=U,P==="User"&&(P=D.shift()),o.push(P+"("+D.join(",")+")");break;case"PtgBool":o.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(k[1]);break;case"PtgNum":o.push(String(k[1]));break;case"PtgStr":o.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(k[1]);break;case"PtgAreaN":g=jF(k[1][1],n?{s:n}:i,a),o.push(WC(g,a));break;case"PtgArea":g=jF(k[1][1],i,a),o.push(WC(g,a));break;case"PtgArea3d":h=k[1][1],g=k[1][2],b=u6(r,h,a),o.push(b+"!"+WC(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=k[1][2];var _=(r.names||[])[m-1]||(r[0]||[])[m],B=_?_.Name:"SH33TJSNAME"+String(m);B&&B.slice(0,6)=="_xlfn."&&!a.xlfn&&(B=B.slice(6)),o.push(B);break;case"PtgNameX":var T=k[1][1];m=k[1][2];var O;if(a.biff<=5)T<0&&(T=-T),r[T]&&(O=r[T][m]);else{var R="";if(((r[T]||[])[0]||[])[0]==14849||(((r[T]||[])[0]||[])[0]==1025?r[T][m]&&r[T][m].itab>0&&(R=r.SheetNames[r[T][m].itab-1]+"!"):R=r.SheetNames[m-1]+"!"),r[T]&&r[T][m])R+=r[T][m].Name;else if(r[0]&&r[0][m])R+=r[0][m].Name;else{var L=(y7(r,T,a)||"").split(";;");L[m-1]?R=L[m-1]:R+="SH33TJSERRX"}o.push(R);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var Q="(",z=")";if(w>=0){switch(E="",t[0][w][1][0]){case 2:Q=La(" ",t[0][w][1][1])+Q;break;case 3:Q=La("\r",t[0][w][1][1])+Q;break;case 4:z=La(" ",t[0][w][1][1])+z;break;case 5:z=La("\r",t[0][w][1][1])+z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}o.push(Q+o.pop()+z);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:k[1][1],r:k[1][0]};var ie={c:n.c,r:n.r};if(r.sharedf[wn(d)]){var J=r.sharedf[wn(d)];o.push(Fi(J,i,ie,r,a))}else{var ee=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Fi(u[1],i,ie,r,a)),ee=!0;break}ee||o.push(k[1])}break;case"PtgArray":o.push("{"+Rhe(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&w>=0&&ae.indexOf(t[0][N][0])==-1){k=t[0][w];var q=!0;switch(k[1][0]){case 4:q=!1;case 0:E=La(" ",k[1][1]);break;case 5:q=!1;case 1:E=La("\r",k[1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}o.push((q?E:"")+o.pop()+(q?"":E)),w=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function Uhe(t,e,n){var r=t.l+e,a=n.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],Qi(t,e-2)];var o=Wx(t,i,n);return e!==i+a&&(s=Kx(t,e-i-a,o,n)),t.l=r,[o,s]}function Mhe(t,e,n){var r=t.l+e,a=n.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],Qi(t,e-2)];var o=Wx(t,i,n);return e!==i+a&&(s=Kx(t,e-i-a,o,n)),t.l=r,[o,s]}function Phe(t,e,n,r){var a=t.l+e,s=Wx(t,r,n),i;return a!==t.l&&(i=Kx(t,a-t.l,s,n)),[s,i]}function jhe(t,e,n){var r=t.l+e,a,s=t.read_shift(2),i=Wx(t,s,n);return s==65535?[[],Qi(t,e-2)]:(e!==s+2&&(a=Kx(t,r-s-2,i,n)),[i,a])}function Ohe(t){var e;if(gA(t,t.l+6)!==65535)return[Mi(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Qhe(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Th(t);return Th(0)}function ZC(t,e,n){var r=t.l+e,a=Iu(t);n.biff==2&&++t.l;var s=Ohe(t),i=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var o=Mhe(t,r-t.l,n);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function Hhe(t,e,n,r,a){var s=Nh(e,n,a),i=Qhe(t.v),o=lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=lt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Gs([s,i,o,u]);return h}function kw(t,e,n){var r=t.read_shift(4),a=Wx(t,r,n),s=t.read_shift(4),i=s>0?Kx(t,s,a,n):null;return[a,i]}var Vhe=kw,Iw=kw,zhe=kw,Ghe=kw,qhe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},w7={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Khe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function A6(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Whe(t){var e="of:="+t.replace(I4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function eE(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function $he(t){return t.replace(/\./,"!")}var Ug={},hm={},Mg=typeof Map<"u";function D4(t,e,n){var r=0,a=t.length;if(n){if(Mg?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=Mg?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<a;++r)if(t[r].t===e)return t.Count++,r;return t[a]={t:e},t.Count++,t.Unique++,n&&(Mg?(n.has(e)||n.set(e,[]),n.get(e).push(a)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(a))),a}function Fw(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Li=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=dx(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=my(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function mh(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function Ef(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(r==null&&n.ssf){for(;a<392;++a)if(n.ssf[a]==null){wA(e.z,a),n.ssf[a]=e.z,n.revssf[e.z]=r=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===r)return a;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function b7(t,e,n,r,a,s){try{r.cellNF&&(t.z=gn[e])}catch(o){if(r.WTF)throw o}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=la(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(gn[e]==null&&wA(qoe[e]||"General",e),t.t==="e")t.w=t.w||HA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=sx(t.v);else if(t.t==="d"){var i=Fs(t.v);(i|0)===i?t.w=i.toString(10):t.w=sx(i)}else{if(t.v===void 0)return"";t.w=_h(t.v,hm)}else t.t==="d"?t.w=Vl(e,Fs(t.v),hm):t.w=Vl(e,t.v,hm)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&n!=null)try{t.s=s.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=hy(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=hy(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&s.Fills)throw o}}}function Jhe(t,e,n){if(t&&t["!ref"]){var r=vr(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function Yhe(t,e){var n=vr(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=Rn(n))}var Xhe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Zhe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,e0e=/<(?:\w:)?hyperlink [^>]*>/mg,t0e=/"(\w*:\w*)"/,n0e=/<(?:\w:)?col\b[^>]*[\/]?>/g,r0e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,a0e=/<(?:\w:)?pageMargins[^>]*\/>/g,C7=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,s0e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,i0e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function o0e(t,e,n,r,a,s,i){if(!t)return t;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(Zhe);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var m=u.match(C7);m?L4(m[0],o,a,n):(m=u.match(s0e))&&c0e(m[0],m[1]||"",o,a,n);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(t0e);b&&Yhe(o,b[1])}var w=u.match(i0e);w&&w[1]&&b0e(w[1],a);var E=[];if(e.cellStyles){var N=u.match(n0e);N&&g0e(E,N)}h&&_0e(h[1],o,e,l,s,i);var I=d.match(r0e);I&&(o["!autofilter"]=v0e(I[0]));var k=[],U=d.match(Xhe);if(U)for(g=0;g!=U.length;++g)k[g]=vr(U[g].slice(U[g].indexOf('"')+1));var P=d.match(e0e);P&&h0e(o,P,r);var D=d.match(a0e);if(D&&(o["!margins"]=m0e(_n(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Rn(l)),e.sheetRows>0&&o["!ref"]){var _=vr(o["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>l.e.r&&(_.e.r=l.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>l.e.c&&(_.e.c=l.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Rn(_))}return E.length>0&&(o["!cols"]=E),k.length>0&&(o["!merges"]=k),o}function l0e(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Rn(t[n])+'"/>';return e+"</mergeCells>"}function L4(t,e,n,r){var a=_n(t);n.Sheets[r]||(n.Sheets[r]={}),a.codeName&&(n.Sheets[r].CodeName=gr(Jr(a.codeName)))}function c0e(t,e,n,r,a){L4(t.slice(0,t.indexOf(">")),n,r,a)}function u0e(t,e,n,r,a){var s=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,i.codeName=vu(Qr(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Rt("outlinePr",null,u)}!s&&!o||(a[a.length]=Rt("sheetPr",o,i))}var A0e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],d0e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function f0e(t){var e={sheet:1};return A0e.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),d0e.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=B4(t.password).toString(16).toUpperCase()),Rt("sheetProtection",null,e)}function h0e(t,e,n){for(var r=Array.isArray(t),a=0;a!=e.length;++a){var s=_n(Jr(e[a]),!0);if(!s.ref)return;var i=((n||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+gr(s.location))):(s.Target="#"+gr(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=vr(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=wn({c:u,r:l});r?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function m0e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function p0e(t){return mh(t),Rt("pageMargins",null,t)}function g0e(t,e){for(var n=!1,r=0;r!=e.length;++r){var a=_n(e[r],!0);a.hidden&&(a.hidden=ia(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!n&&a.width&&(n=!0,N4(a.width)),hf(a);s<=i;)t[s++]=ca(a)}}function x0e(t,e){for(var n=["<cols>"],r,a=0;a!=e.length;++a)(r=e[a])&&(n[n.length]=Rt("col",null,Fw(a,r)));return n[n.length]="</cols>",n.join("")}function v0e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function y0e(t,e,n,r){var a=typeof t.ref=="string"?t.ref:Rn(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,i=_o(a);i.s.r==i.e.r&&(i.e.r=_o(e["!ref"]).e.r,a=Rn(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Rt("autoFilter",null,{ref:a})}var w0e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function b0e(t,e){e.Views||(e.Views=[{}]),(t.match(w0e)||[]).forEach(function(n,r){var a=_n(n);e.Views[r]||(e.Views[r]={}),+a.zoomScale&&(e.Views[r].zoom=+a.zoomScale),ia(a.rightToLeft)&&(e.Views[r].RTL=!0)})}function C0e(t,e,n,r){var a={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Rt("sheetViews",Rt("sheetView",null,a),{})}function E0e(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=HA[t.v];break;case"d":r&&r.cellDates?a=la(t.v,-1).toISOString():(t=ca(t),t.t="n",a=""+(t.v=Fs(la(t.v)))),typeof t.z>"u"&&(t.z=gn[14]);break;default:a=t.v;break}var o=li("v",Qr(a)),l={r:e},u=Ef(r.cellXfs,t,r);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=li("v",""+D4(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Rt("f",Qr(t.f),d)+(t.v!=null?o:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),Rt("c",o,l)}var _0e=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=ix("v"),i=ix("f");return function(l,u,d,h,m,g){for(var b=0,w="",E=[],N=[],I=0,k=0,U=0,P="",D,_,B=0,T=0,O,R,L=0,Q=0,z=Array.isArray(g.CellXf),ie,J=[],ee=[],ae=Array.isArray(u),q=[],Y={},Ae=!1,j=!!d.sheetStubs,K=l.split(e),X=0,te=K.length;X!=te;++X){w=K[X].trim();var le=w.length;if(le!==0){var ye=0;e:for(b=0;b<le;++b)switch(w[b]){case">":if(w[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(_=_n(w.slice(ye,b),!0),B=_.r!=null?parseInt(_.r,10):B+1,T=-1,d.sheetRows&&d.sheetRows<B)continue;Y={},Ae=!1,_.ht&&(Ae=!0,Y.hpt=parseFloat(_.ht),Y.hpx=Im(Y.hpt)),_.hidden=="1"&&(Ae=!0,Y.hidden=!0),_.outlineLevel!=null&&(Ae=!0,Y.level=+_.outlineLevel),Ae&&(q[B-1]=Y)}break;case"<":ye=b;break}if(ye>=b)break;if(_=_n(w.slice(ye,b),!0),B=_.r!=null?parseInt(_.r,10):B+1,T=-1,!(d.sheetRows&&d.sheetRows<B)){h.s.r>B-1&&(h.s.r=B-1),h.e.r<B-1&&(h.e.r=B-1),d&&d.cellStyles&&(Y={},Ae=!1,_.ht&&(Ae=!0,Y.hpt=parseFloat(_.ht),Y.hpx=Im(Y.hpt)),_.hidden=="1"&&(Ae=!0,Y.hidden=!0),_.outlineLevel!=null&&(Ae=!0,Y.level=+_.outlineLevel),Ae&&(q[B-1]=Y)),E=w.slice(b).split(t);for(var Ce=0;Ce!=E.length&&E[Ce].trim().charAt(0)=="<";++Ce);for(E=E.slice(Ce),b=0;b!=E.length;++b)if(w=E[b].trim(),w.length!==0){if(N=w.match(n),I=b,k=0,U=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,N!=null&&N.length===2){for(I=0,P=N[1],k=0;k!=P.length&&!((U=P.charCodeAt(k)-64)<1||U>26);++k)I=26*I+U;--I,T=I}else++T;for(k=0;k!=w.length&&w.charCodeAt(k)!==62;++k);if(++k,_=_n(w.slice(0,k),!0),_.r||(_.r=wn({r:B-1,c:T})),P=w.slice(k),D={t:""},(N=P.match(s))!=null&&N[1]!==""&&(D.v=gr(N[1])),d.cellFormula){if((N=P.match(i))!=null&&N[1]!==""){if(D.f=gr(Jr(N[1])).replace(/\r\n/g,`
`),d.xlfn||(D.f=o6(D.f)),N[0].indexOf('t="array"')>-1)D.F=(P.match(a)||[])[1],D.F.indexOf(":")>-1&&J.push([vr(D.F),D.F]);else if(N[0].indexOf('t="shared"')>-1){R=_n(N[0]);var _e=gr(Jr(N[1]));d.xlfn||(_e=o6(_e)),ee[parseInt(R.si,10)]=[R,_e,_.r]}}else(N=P.match(/<f[^>]*\/>/))&&(R=_n(N[0]),ee[R.si]&&(D.f=wfe(ee[R.si][1],ee[R.si][2],_.r)));var Ie=Ca(_.r);for(k=0;k<J.length;++k)Ie.r>=J[k][0].s.r&&Ie.r<=J[k][0].e.r&&Ie.c>=J[k][0].s.c&&Ie.c<=J[k][0].e.c&&(D.F=J[k][1])}if(_.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(j)D.t="z";else continue;else D.t=_.t||"n";switch(h.s.c>T&&(h.s.c=T),h.e.c<T&&(h.e.c=T),D.t){case"n":if(D.v==""||D.v==null){if(!j)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!j)continue;D.t="z"}else O=Ug[parseInt(D.v,10)],D.v=O.t,D.r=O.r,d.cellHTML&&(D.h=O.h);break;case"str":D.t="s",D.v=D.v!=null?Jr(D.v):"",d.cellHTML&&(D.h=f4(D.v));break;case"inlineStr":N=P.match(r),D.t="s",N!=null&&(O=T4(N[1]))?(D.v=O.t,d.cellHTML&&(D.h=O.h)):D.v="";break;case"b":D.v=ia(D.v);break;case"d":d.cellDates?D.v=la(D.v,1):(D.v=Fs(la(D.v,1)),D.t="n");break;case"e":(!d||d.cellText!==!1)&&(D.w=D.v),D.v=_P[D.v];break}if(L=Q=0,ie=null,z&&_.s!==void 0&&(ie=g.CellXf[_.s],ie!=null&&(ie.numFmtId!=null&&(L=ie.numFmtId),d.cellStyles&&ie.fillId!=null&&(Q=ie.fillId))),b7(D,L,Q,d,m,g),d.cellDates&&z&&D.t=="n"&&$m(gn[L])&&(D.t="d",D.v=Bw(D.v)),_.cm&&d.xlmeta){var xe=(d.xlmeta.Cell||[])[+_.cm-1];xe&&xe.type=="XLDAPR"&&(D.D=!0)}if(ae){var se=Ca(_.r);u[se.r]||(u[se.r]=[]),u[se.r][se.c]=D}else u[_.r]=D}}}}q.length>0&&(u["!rows"]=q)}}();function S0e(t,e,n,r){var a=[],s=[],i=vr(t["!ref"]),o="",l,u="",d=[],h=0,m=0,g=t["!rows"],b=Array.isArray(t),w={r:u},E,N=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=ba(m);for(h=i.s.r;h<=i.e.r;++h){for(s=[],u=es(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var I=b?(t[h]||[])[m]:t[l];I!==void 0&&(o=E0e(I,l,t,e))!=null&&s.push(o)}(s.length>0||g&&g[h])&&(w={r:u},g&&g[h]&&(E=g[h],E.hidden&&(w.hidden=1),N=-1,E.hpx?N=fx(E.hpx):E.hpt&&(N=E.hpt),N>-1&&(w.ht=N,w.customHeight=1),E.level&&(w.outlineLevel=E.level)),a[a.length]=Rt("row",s.join(""),w))}if(g)for(;h<g.length;++h)g&&g[h]&&(w={r:h+1},E=g[h],E.hidden&&(w.hidden=1),N=-1,E.hpx?N=fx(E.hpx):E.hpt&&(N=E.hpt),N>-1&&(w.ht=N,w.customHeight=1),E.level&&(w.outlineLevel=E.level),a[a.length]=Rt("row","",w));return a.join("")}function E7(t,e,n,r){var a=[ns,Rt("worksheet",null,{xmlns:jh[0],"xmlns:r":Ns.r})],s=n.SheetNames[t],i=0,o="",l=n.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=vr(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Rn(d)}r||(r={}),l["!comments"]=[];var h=[];u0e(l,n,t,e,a),a[a.length]=Rt("dimension",null,{ref:u}),a[a.length]=C0e(l,e,t,n),e.sheetFormat&&(a[a.length]=Rt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=x0e(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=S0e(l,e),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=f0e(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=y0e(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=l0e(l["!merges"]));var m=-1,g,b=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(b=jr(r,-1,Qr(w[1].Target).replace(/#.*$/,""),Yn.HLINK),g["r:id"]="rId"+b),(m=w[1].Target.indexOf("#"))>-1&&(g.location=Qr(w[1].Target.slice(m+1))),w[1].Tooltip&&(g.tooltip=Qr(w[1].Tooltip)),a[a.length]=Rt("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=p0e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=li("ignoredErrors",Rt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=jr(r,-1,"../drawings/drawing"+(t+1)+".xml",Yn.DRAW),a[a.length]=Rt("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=jr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Yn.VML),a[a.length]=Rt("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function T0e(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=a/20),n}function B0e(t,e,n){var r=lt(145),a=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;a.hpx?s=fx(a.hpx)*20:a.hpt&&(s=a.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(n)?(n[u.r]||[])[u.c]:n[wn(u)];b&&(h<0&&(h=g),m=g)}h<0||(++o,r.write_shift(4,h),r.write_shift(4,m))}var w=r.l;return r.l=l,r.write_shift(4,o),r.l=w,r.length>r.l?r.slice(0,r.l):r}function N0e(t,e,n,r){var a=B0e(r,n,e);(a.length>17||(e["!rows"]||[])[r])&&Et(t,0,a)}var k0e=Vh,I0e=Xm;function F0e(){}function R0e(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Ule(t),n}function D0e(t,e,n){n==null&&(n=lt(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var a=1;a<3;++a)n.write_shift(1,0);return Ay({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),yP(t,n),n.slice(0,n.l)}function L0e(t){var e=zl(t);return[e]}function U0e(t,e,n){return n==null&&(n=lt(8)),Oh(e,n)}function M0e(t){var e=Qh(t);return[e]}function P0e(t,e,n){return n==null&&(n=lt(4)),Hh(e,n)}function j0e(t){var e=zl(t),n=t.read_shift(1);return[e,n,"b"]}function O0e(t,e,n){return n==null&&(n=lt(9)),Oh(e,n),n.write_shift(1,t.v?1:0),n}function Q0e(t){var e=Qh(t),n=t.read_shift(1);return[e,n,"b"]}function H0e(t,e,n){return n==null&&(n=lt(5)),Hh(e,n),n.write_shift(1,t.v?1:0),n}function V0e(t){var e=zl(t),n=t.read_shift(1);return[e,n,"e"]}function z0e(t,e,n){return n==null&&(n=lt(9)),Oh(e,n),n.write_shift(1,t.v),n}function G0e(t){var e=Qh(t),n=t.read_shift(1);return[e,n,"e"]}function q0e(t,e,n){return n==null&&(n=lt(8)),Hh(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function K0e(t){var e=zl(t),n=t.read_shift(4);return[e,n,"s"]}function W0e(t,e,n){return n==null&&(n=lt(12)),Oh(e,n),n.write_shift(4,e.v),n}function $0e(t){var e=Qh(t),n=t.read_shift(4);return[e,n,"s"]}function J0e(t,e,n){return n==null&&(n=lt(8)),Hh(e,n),n.write_shift(4,e.v),n}function Y0e(t){var e=zl(t),n=Mi(t);return[e,n,"n"]}function X0e(t,e,n){return n==null&&(n=lt(16)),Oh(e,n),Th(t.v,n),n}function _7(t){var e=Qh(t),n=Mi(t);return[e,n,"n"]}function Z0e(t,e,n){return n==null&&(n=lt(12)),Hh(e,n),Th(t.v,n),n}function eme(t){var e=zl(t),n=b4(t);return[e,n,"n"]}function tme(t,e,n){return n==null&&(n=lt(12)),Oh(e,n),wP(t.v,n),n}function nme(t){var e=Qh(t),n=b4(t);return[e,n,"n"]}function rme(t,e,n){return n==null&&(n=lt(8)),Hh(e,n),wP(t.v,n),n}function ame(t){var e=zl(t),n=v4(t);return[e,n,"is"]}function sme(t){var e=zl(t),n=ji(t);return[e,n,"str"]}function ime(t,e,n){return n==null&&(n=lt(12+4*t.v.length)),Oh(e,n),qs(t.v,n),n.length>n.l?n.slice(0,n.l):n}function ome(t){var e=Qh(t),n=ji(t);return[e,n,"str"]}function lme(t,e,n){return n==null&&(n=lt(8+4*t.v.length)),Hh(e,n),qs(t.v,n),n.length>n.l?n.slice(0,n.l):n}function cme(t,e,n){var r=t.l+e,a=zl(t);a.r=n["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(n.cellFormula){t.l+=2;var o=Iw(t,r-t.l,n);i[3]=Fi(o,null,a,n.supbooks,n)}else t.l=r;return i}function ume(t,e,n){var r=t.l+e,a=zl(t);a.r=n["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(n.cellFormula){t.l+=2;var o=Iw(t,r-t.l,n);i[3]=Fi(o,null,a,n.supbooks,n)}else t.l=r;return i}function Ame(t,e,n){var r=t.l+e,a=zl(t);a.r=n["!row"];var s=Mi(t),i=[a,s,"n"];if(n.cellFormula){t.l+=2;var o=Iw(t,r-t.l,n);i[3]=Fi(o,null,a,n.supbooks,n)}else t.l=r;return i}function dme(t,e,n){var r=t.l+e,a=zl(t);a.r=n["!row"];var s=ji(t),i=[a,s,"str"];if(n.cellFormula){t.l+=2;var o=Iw(t,r-t.l,n);i[3]=Fi(o,null,a,n.supbooks,n)}else t.l=r;return i}var fme=Vh,hme=Xm;function mme(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function pme(t,e){var n=t.l+e,r=Vh(t),a=y4(t),s=ji(t),i=ji(t),o=ji(t);t.l=n;var l={rfx:r,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function gme(t,e){var n=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Xm({s:Ca(t[0]),e:Ca(t[0])},n),w4("rId"+e,n);var r=t[1].Target.indexOf("#"),a=r==-1?"":t[1].Target.slice(r+1);return qs(a||"",n),qs(t[1].Tooltip||"",n),qs("",n),n.slice(0,n.l)}function xme(){}function vme(t,e,n){var r=t.l+e,a=bP(t),s=t.read_shift(1),i=[a];if(i[2]=s,n.cellFormula){var o=Vhe(t,r-t.l,n);i[1]=o}else t.l=r;return i}function yme(t,e,n){var r=t.l+e,a=Vh(t),s=[a];if(n.cellFormula){var i=Ghe(t,r-t.l,n);s[1]=i,t.l=r}else t.l=r;return s}function wme(t,e,n){n==null&&(n=lt(18));var r=Fw(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof r.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),n.write_shift(2,a),n}var S7=["left","right","top","bottom","header","footer"];function bme(t){var e={};return S7.forEach(function(n){e[n]=Mi(t)}),e}function Cme(t,e){return e==null&&(e=lt(48)),mh(t),S7.forEach(function(n){Th(t[n],e)}),e}function Eme(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function _me(t,e,n){n==null&&(n=lt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function Sme(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),Xm(t,e),e}function Tme(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?B4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function Bme(){}function Nme(){}function kme(t,e,n,r,a,s,i){if(!t)return t;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,b,w,E,N,I,k,U,P,D=[];o.biff=12,o["!row"]=0;var _=0,B=!1,T=[],O={},R=o.supbooks||a.supbooks||[[]];if(R.sharedf=O,R.arrayf=T,R.SheetNames=a.SheetNames||a.Sheets.map(function(ae){return ae.name}),!o.supbooks&&(o.supbooks=R,a.Names))for(var L=0;L<a.Names.length;++L)R[0][L+1]=a.Names[L];var Q=[],z=[],ie=!1;hx[16]={n:"BrtShortReal",f:_7};var J;if(QA(t,function(q,Y,Ae){if(!m)switch(Ae){case 148:u=q;break;case 0:g=q,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),U=es(E=g.r),o["!row"]=g.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=Im(q.hpt)),z[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:q[2]},q[2]){case"n":b.v=q[1];break;case"s":k=Ug[q[1]],b.v=k.t,b.r=k.r;break;case"b":b.v=!!q[1];break;case"e":b.v=q[1],o.cellText!==!1&&(b.w=HA[b.v]);break;case"str":b.t="s",b.v=q[1];break;case"is":b.t="s",b.v=q[1].t;break}if((w=i.CellXf[q[0].iStyleRef])&&b7(b,w.numFmtId,null,o,s,i),N=q[0].c==-1?N+1:q[0].c,o.dense?(l[E]||(l[E]=[]),l[E][N]=b):l[ba(N)+U]=b,o.cellFormula){for(B=!1,_=0;_<T.length;++_){var j=T[_];g.r>=j[0].s.r&&g.r<=j[0].e.r&&N>=j[0].s.c&&N<=j[0].e.c&&(b.F=Rn(j[0]),B=!0)}!B&&q.length>3&&(b.f=q[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>N&&(d.s.c=N),d.e.r<g.r&&(d.e.r=g.r),d.e.c<N&&(d.e.c=N),o.cellDates&&w&&b.t=="n"&&$m(gn[w.numFmtId])){var K=ah(b.v);K&&(b.t="d",b.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}J&&(J.type=="XLDAPR"&&(b.D=!0),J=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},N=q[0].c==-1?N+1:q[0].c,o.dense?(l[E]||(l[E]=[]),l[E][N]=b):l[ba(N)+U]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>N&&(d.s.c=N),d.e.r<g.r&&(d.e.r=g.r),d.e.c<N&&(d.e.c=N),J&&(J.type=="XLDAPR"&&(b.D=!0),J=void 0);break;case 176:D.push(q);break;case 49:J=((o.xlmeta||{}).Cell||[])[q-1];break;case 494:var X=r["!id"][q.relId];for(X?(q.Target=X.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=X):q.relId==""&&(q.Target="#"+q.loc),E=q.rfx.s.r;E<=q.rfx.e.r;++E)for(N=q.rfx.s.c;N<=q.rfx.e.c;++N)o.dense?(l[E]||(l[E]=[]),l[E][N]||(l[E][N]={t:"z",v:void 0}),l[E][N].l=q):(I=wn({c:N,r:E}),l[I]||(l[I]={t:"z",v:void 0}),l[I].l=q);break;case 426:if(!o.cellFormula)break;T.push(q),P=o.dense?l[E][N]:l[ba(N)+U],P.f=Fi(q[1],d,{r:g.r,c:N},R,o),P.F=Rn(q[0]);break;case 427:if(!o.cellFormula)break;O[wn(q[0].s)]=q[1],P=o.dense?l[E][N]:l[ba(N)+U],P.f=Fi(q[1],d,{r:g.r,c:N},R,o);break;case 60:if(!o.cellStyles)break;for(;q.e>=q.s;)Q[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},ie||(ie=!0,N4(q.w/256)),hf(Q[q.e+1]);break;case 161:l["!autofilter"]={ref:Rn(q)};break;case 476:l["!margins"]=q;break;case 147:a.Sheets[n]||(a.Sheets[n]={}),q.name&&(a.Sheets[n].CodeName=q.name),(q.above||q.left)&&(l["!outline"]={above:q.above,left:q.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),q.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!Y.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+Ae.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Rn(u||d)),o.sheetRows&&l["!ref"]){var ee=vr(l["!ref"]);o.sheetRows<=+ee.e.r&&(ee.e.r=o.sheetRows-1,ee.e.r>d.e.r&&(ee.e.r=d.e.r),ee.e.r<ee.s.r&&(ee.s.r=ee.e.r),ee.e.c>d.e.c&&(ee.e.c=d.e.c),ee.e.c<ee.s.c&&(ee.s.c=ee.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Rn(ee))}return D.length>0&&(l["!merges"]=D),Q.length>0&&(l["!cols"]=Q),z.length>0&&(l["!rows"]=z),l}function Ime(t,e,n,r,a,s,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ca(e),e.z=e.z||gn[14],e.v=Fs(la(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:n,c:r};switch(l.s=Ef(a.cellXfs,e,a),e.l&&s["!links"].push([wn(l),e.l]),e.c&&s["!comments"].push([wn(l),e.c]),e.t){case"s":case"str":return a.bookSST?(o=D4(a.Strings,e.v,a.revStrings),l.t="s",l.v=o,i?Et(t,18,J0e(e,l)):Et(t,7,W0e(e,l))):(l.t="str",i?Et(t,17,lme(e,l)):Et(t,6,ime(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Et(t,13,rme(e,l)):Et(t,2,tme(e,l)):i?Et(t,16,Z0e(e,l)):Et(t,5,X0e(e,l)),!0;case"b":return l.t="b",i?Et(t,15,H0e(e,l)):Et(t,4,O0e(e,l)),!0;case"e":return l.t="e",i?Et(t,14,q0e(e,l)):Et(t,3,z0e(e,l)),!0}return i?Et(t,12,P0e(e,l)):Et(t,1,U0e(e,l)),!0}function Fme(t,e,n,r){var a=vr(e["!ref"]||"A1"),s,i="",o=[];Et(t,145);var l=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=es(d),N0e(t,e,a,d);var h=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(o[m]=ba(m)),s=o[m]+i;var g=l?(e[d]||[])[m]:e[s];if(!g){h=!1;continue}h=Ime(t,g,d,m,r,e,h)}}Et(t,146)}function Rme(t,e){!e||!e["!merges"]||(Et(t,177,mme(e["!merges"].length)),e["!merges"].forEach(function(n){Et(t,176,hme(n))}),Et(t,178))}function Dme(t,e){!e||!e["!cols"]||(Et(t,390),e["!cols"].forEach(function(n,r){n&&Et(t,60,wme(r,n))}),Et(t,391))}function Lme(t,e){!e||!e["!ref"]||(Et(t,648),Et(t,649,Sme(vr(e["!ref"]))),Et(t,650))}function Ume(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var a=jr(n,-1,r[1].Target.replace(/#.*$/,""),Yn.HLINK);Et(t,494,gme(r,a))}}),delete e["!links"]}function Mme(t,e,n,r){if(e["!comments"].length>0){var a=jr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Yn.VML);Et(t,551,w4("rId"+a)),e["!legacy"]=a}}function Pme(t,e,n,r){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Rn(a.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=_o(s);o.s.r==o.e.r&&(o.e.r=_o(e["!ref"]).e.r,s=Rn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Et(t,161,Xm(vr(s))),Et(t,162)}}function jme(t,e,n){Et(t,133),Et(t,137,_me(e,n)),Et(t,138),Et(t,134)}function Ome(t,e){e["!protect"]&&Et(t,535,Tme(e["!protect"]))}function Qme(t,e,n,r){var a=Co(),s=n.SheetNames[t],i=n.Sheets[s]||{},o=s;try{n&&n.Workbook&&(o=n.Workbook.Sheets[t].CodeName||o)}catch{}var l=vr(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Et(a,129),(n.vbaraw||i["!outline"])&&Et(a,147,D0e(o,i["!outline"])),Et(a,148,I0e(l)),jme(a,i,n.Workbook),Dme(a,i),Fme(a,i,t,e),Ome(a,i),Pme(a,i,n,t),Rme(a,i),Ume(a,i,r),i["!margins"]&&Et(a,476,Cme(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Lme(a,i),Mme(a,i,t,r),Et(a,130),a.end()}function Hme(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=n?+i[2]:i[2])});var a=gr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){r=s.replace(/<.*?>/g,"")}),[e,a,r]}function Vme(t,e,n,r,a,s){var i=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=Hme(h);d.s.r=d.s.c=0,d.e.c=o,u=ba(o),m[0].forEach(function(g,b){i[u+es(b)]={t:"n",v:g,z:m[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Rn(d)),i}function zme(t,e,n,r,a){if(!t)return t;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(C7);return o&&L4(o[0],s,a,n),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}function Gme(t,e){t.l+=10;var n=ji(t);return{name:n}}function qme(t,e,n,r,a){if(!t)return t;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return QA(t,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[n]||(a.Sheets[n]={}),l.name&&(a.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}var U4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Kme=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Wme=[],$me=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function d6(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],a=0;a!=e.length;++a){var s=e[a];if(r[s[0]]==null)r[s[0]]=s[1];else switch(s[2]){case"bool":typeof r[s[0]]=="string"&&(r[s[0]]=ia(r[s[0]]));break;case"int":typeof r[s[0]]=="string"&&(r[s[0]]=parseInt(r[s[0]],10));break}}}function f6(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=ia(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function T7(t){f6(t.WBProps,U4),f6(t.CalcPr,$me),d6(t.WBView,Kme),d6(t.Sheets,Wme),hm.date1904=ia(t.WBProps.date1904)}function Jme(t){return!t.Workbook||!t.Workbook.WBProps?"false":ia(t.Workbook.WBProps.date1904)?"true":"false"}var Yme="][*?/\\".split("");function B7(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return Yme.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function Xme(t,e,n){t.forEach(function(r,a){B7(r);for(var s=0;s<a;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=e&&e[a]&&e[a].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Zme(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Xme(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)Jhe(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}var epe=/<\w+:workbook/;function tpe(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,a="xmlns",s={},i=0;if(t.replace(Vi,function(l,u){var d=_n(l);switch(ku(d[0])){case"<?xml":break;case"<workbook":l.match(epe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":U4.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":n.WBProps[h[0]]=ia(d[h[0]]);break;case"int":n.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:n.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(n.WBProps.CodeName=Jr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=gr(Jr(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":s={},s.Name=Jr(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ia(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=gr(Jr(t.slice(i,u))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),jh.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return T7(n),n}function N7(t){var e=[ns];e[e.length]=Rt("workbook",null,{xmlns:jh[0],"xmlns:r":Ns.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(U4.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Rt("workbookPr",null,r);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:Qr(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Rt("sheet",null,i)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Rt("definedName",Qr(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function npe(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=J_(t),n.name=ji(t),n}function rpe(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),w4(t.strRelID,e),qs(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function ape(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var a=e>8?ji(t):"";return a.length>0&&(n.CodeName=a),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function spe(t,e){e||(e=lt(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),yP(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function ipe(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function ope(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=Mle(t),i=zhe(t,0,n),o=y4(t);t.l=r;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function lpe(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],hx[16]={n:"BrtFRTArchID$",f:ipe},QA(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Fi(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(d),a=!0;break;case 36:r.pop(),a=!1;break;case 37:r.push(d),a=!0;break;case 38:r.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),T7(n),n.Names=s,n.supbooks=i,n}function cpe(t,e){Et(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,a={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};Et(t,156,rpe(a))}Et(t,144)}function upe(t,e){e||(e=lt(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return qs("SheetJS",e),qs(ay.version,e),qs(ay.version,e),qs("7262",e),e.length>e.l?e.slice(0,e.l):e}function Ape(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function dpe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,a=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&a==-1?a=r:n[r].Hidden==1&&s==-1&&(s=r);s>a||(Et(t,135),Et(t,158,Ape(a)),Et(t,136))}}function fpe(t,e){var n=Co();return Et(n,131),Et(n,128,upe()),Et(n,153,spe(t.Workbook&&t.Workbook.WBProps||null)),dpe(n,t),cpe(n,t),Et(n,132),n.end()}function hpe(t,e,n){return e.slice(-4)===".bin"?lpe(t,n):tpe(t,n)}function mpe(t,e,n,r,a,s,i,o){return e.slice(-4)===".bin"?kme(t,r,n,a,s,i,o):o0e(t,r,n,a,s,i,o)}function ppe(t,e,n,r,a,s,i,o){return e.slice(-4)===".bin"?qme(t,r,n,a,s):zme(t,r,n,a,s)}function gpe(t,e,n,r,a,s,i,o){return e.slice(-4)===".bin"?vfe():yfe()}function xpe(t,e,n,r,a,s,i,o){return e.slice(-4)===".bin"?gfe():xfe()}function vpe(t,e,n,r){return e.slice(-4)===".bin"?hde(t,n,r):nde(t,n,r)}function ype(t,e,n){return c7(t,n)}function wpe(t,e,n){return e.slice(-4)===".bin"?wAe(t,n):xAe(t,n)}function bpe(t,e,n){return e.slice(-4)===".bin"?dfe(t,n):rfe(t,n)}function Cpe(t,e,n){return e.slice(-4)===".bin"?efe(t):Xde(t)}function Epe(t,e,n,r){return n.slice(-4)===".bin"?tfe(t,e,n,r):void 0}function _pe(t,e,n){return e.slice(-4)===".bin"?$de(t,e,n):Yde(t,e,n)}function Spe(t,e,n){return(e.slice(-4)===".bin"?fpe:N7)(t)}function Tpe(t,e,n,r,a){return(e.slice(-4)===".bin"?Qme:E7)(t,n,r,a)}function Bpe(t,e,n){return(e.slice(-4)===".bin"?Ede:o7)(t,n)}function Npe(t,e,n){return(e.slice(-4)===".bin"?EAe:ZP)(t,n)}function kpe(t,e,n){return(e.slice(-4)===".bin"?ffe:d7)(t)}function Ipe(t){return(t.slice(-4)===".bin"?Jde:u7)()}var k7=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,I7=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function pc(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var a=t.match(k7),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(I7),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}function Fpe(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(k7),a,s,i,o;if(r)for(o=0;o!=r.length;++o)a=r[o].match(I7),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),n[i]=a[2].slice(1,a[2].length-1));return n}var Pg;function Rpe(t,e){var n=Pg[t]||gr(t);return n==="General"?_h(e):Vl(n,e)}function Dpe(t,e,n,r){var a=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ia(r);break;case"i2":case"int":a=parseInt(r,10);break;case"r4":case"float":a=parseFloat(r);break;case"date":case"dateTime.tz":a=la(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[gr(e)]=a}function Lpe(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||HA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=sx(t.v):t.w=_h(t.v):t.w=Rpe(e||"General",t.v)}catch(s){if(n.WTF)throw s}try{var r=Pg[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&$m(r)){var a=ah(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(n.WTF)throw s}}}function Upe(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=WAe[r.Pattern]||r.Pattern)}t[e.ID]=e}function Mpe(t,e,n,r,a,s,i,o,l,u){var d="General",h=r.StyleID,m={};u=u||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);s[h]!==void 0&&(s[h].nf&&(d=s[h].nf),s[h].Interior&&g.push(s[h].Interior),!!s[h].Parent);)h=s[h].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=ia(t);break;case"String":r.t="s",r.r=kF(gr(t)),r.v=t.indexOf("<")>-1?gr(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(la(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=gr(t):r.v<60&&(r.v=r.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=_P[t],u.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=kF(e||t));break}if(Lpe(r,d,u),u.cellFormula!==!1)if(r.Formula){var w=gr(r.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),r.f=fm(w,a),delete r.Formula,r.ArrayRange=="RC"?r.F=fm("RC:RC",a):r.ArrayRange&&(r.F=fm(r.ArrayRange,a),l.push([vr(r.F),r.F]))}else for(b=0;b<l.length;++b)a.r>=l[b][0].s.r&&a.r<=l[b][0].e.r&&a.c>=l[b][0].s.c&&a.c<=l[b][0].e.c&&(r.F=l[b][1]);u.cellStyles&&(g.forEach(function(E){!m.patternType&&E.patternType&&(m.patternType=E.patternType)}),r.s=m),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function Ppe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function tE(t,e){var n=e||{};Jm();var r=cg(h4(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=Jr(r));var a=r.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ca(n);return i.type="string",km.to_workbook(r,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(nt){a.indexOf("<"+nt)>=0&&(s=!0)}),s)return Cge(r,n);Pg={"General Number":"General","General Date":gn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":gn[15],"Short Date":gn[14],"Long Time":gn[19],"Medium Time":gn[18],"Short Time":gn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:gn[2],Standard:gn[4],Percent:gn[10],Scientific:gn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],m=n.dense?[]:{},g="",b={},w={},E=pc('<Data ss:Type="String">'),N=0,I=0,k=0,U={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},D={},_="",B=0,T=[],O={},R={},L=0,Q=[],z=[],ie={},J=[],ee,ae=!1,q=[],Y=[],Ae={},j=0,K=0,X={Sheets:[],WBProps:{date1904:!1}},te={};lx.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var le="";o=lx.exec(r);)switch(o[3]=(le=o[3]).toLowerCase()){case"data":if(le=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?Mpe(r.slice(N,o.index),_,E,l[l.length-1][0]=="comment"?ie:b,{c:I,r:k},P,J[I],w,q,n):(_="",E=pc(o[0]),N=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(z.length>0&&(b.c=z),(!n.sheetRows||n.sheetRows>k)&&b.v!==void 0&&(n.dense?(m[k]||(m[k]=[]),m[k][I]=b):m[ba(I)+es(k)]=b),b.HRef&&(b.l={Target:gr(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(j=I+(parseInt(b.MergeAcross,10)|0),K=k+(parseInt(b.MergeDown,10)|0),T.push({s:{c:I,r:k},e:{c:j,r:K}})),!n.sheetStubs)b.MergeAcross?I=j+1:++I;else if(b.MergeAcross||b.MergeDown){for(var ye=I;ye<=j;++ye)for(var Ce=k;Ce<=K;++Ce)(ye>I||Ce>k)&&(n.dense?(m[Ce]||(m[Ce]=[]),m[Ce][ye]={t:"z"}):m[ba(ye)+es(Ce)]={t:"z"});I=j+1}else++I;else b=Fpe(o[0]),b.Index&&(I=+b.Index-1),I<U.s.c&&(U.s.c=I),I>U.e.c&&(U.e.c=I),o[0].slice(-2)==="/>"&&++I,z=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(k<U.s.r&&(U.s.r=k),k>U.e.r&&(U.e.r=k),o[0].slice(-2)==="/>"&&(w=pc(o[0]),w.Index&&(k=+w.Index-1)),I=0,++k):(w=pc(o[0]),w.Index&&(k=+w.Index-1),Ae={},(w.AutoFitHeight=="0"||w.Height)&&(Ae.hpx=parseInt(w.Height,10),Ae.hpt=fx(Ae.hpx),Y[k]=Ae),w.Hidden=="1"&&(Ae.hidden=!0,Y[k]=Ae));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(g),U.s.r<=U.e.r&&U.s.c<=U.e.c&&(m["!ref"]=Rn(U),n.sheetRows&&n.sheetRows<=U.e.r&&(m["!fullref"]=m["!ref"],U.e.r=n.sheetRows-1,m["!ref"]=Rn(U))),T.length&&(m["!merges"]=T),J.length>0&&(m["!cols"]=J),Y.length>0&&(m["!rows"]=Y),d[g]=m}else U={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=I=0,l.push([o[3],!1]),u=pc(o[0]),g=gr(u.Name),m=n.dense?[]:{},T=[],q=[],Y=[],te={name:g,Hidden:0},X.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),J=[],ae=!1}break;case"style":o[1]==="/"?Upe(P,D,n):D=pc(o[0]);break;case"numberformat":D.nf=gr(pc(o[0]).Format||"General"),Pg[D.nf]&&(D.nf=Pg[D.nf]);for(var _e=0;_e!=392&&gn[_e]!=D.nf;++_e);if(_e==392){for(_e=57;_e!=392;++_e)if(gn[_e]==null){wA(D.nf,_e);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ee=pc(o[0]),ee.Hidden&&(ee.hidden=!0,delete ee.Hidden),ee.Width&&(ee.wpx=parseInt(ee.Width,10)),!ae&&ee.wpx>10){ae=!0,Li=s7;for(var Ie=0;Ie<J.length;++Ie)J[Ie]&&hf(J[Ie])}ae&&hf(ee),J[ee.Index-1||J.length]=ee;for(var xe=0;xe<+ee.Span;++xe)J[J.length]=ca(ee);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var se=_n(o[0]),Re={Name:se.Name,Ref:fm(se.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(Re.Sheet=X.Sheets.length-1),X.Names.push(Re);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?_+=r.slice(B,o.index):B=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;D.Interior=pc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?lce(O,le,r.slice(L,o.index)):L=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Ppe(ie),z.push(ie)}else l.push([o[3],!1]),u=pc(o[0]),ie={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var et=pc(o[0]);m["!autofilter"]={ref:fm(et.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return x6(r,n);var De=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(L,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else L=o.index+o[0].length;break;case"header":m["!margins"]||mh(m["!margins"]={},"xlml"),isNaN(+_n(o[0]).Margin)||(m["!margins"].header=+_n(o[0]).Margin);break;case"footer":m["!margins"]||mh(m["!margins"]={},"xlml"),isNaN(+_n(o[0]).Margin)||(m["!margins"].footer=+_n(o[0]).Margin);break;case"pagemargins":var we=_n(o[0]);m["!margins"]||mh(m["!margins"]={},"xlml"),isNaN(+we.Top)||(m["!margins"].top=+we.Top),isNaN(+we.Left)||(m["!margins"].left=+we.Left),isNaN(+we.Right)||(m["!margins"].right=+we.Right),isNaN(+we.Bottom)||(m["!margins"].bottom=+we.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Dpe(R,le,Q,r.slice(L,o.index)):(Q=o,L=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ze={};return!n.bookSheets&&!n.bookProps&&(ze.Sheets=d),ze.SheetNames=h,ze.Workbook=X,ze.SSF=ca(gn),ze.Props=O,ze.Custprops=R,ze}function r5(t,e){switch(P4(e=e||{}),e.type||"base64"){case"base64":return tE(tl(t),e);case"binary":case"buffer":case"file":return tE(t,e);case"array":return tE(bf(t),e)}}function jpe(t,e){var n=[];return t.Props&&n.push(cce(t.Props,e)),t.Custprops&&n.push(uce(t.Props,t.Custprops)),n.join("")}function Ope(){return""}function Qpe(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,a){var s=[];s.push(Rt("NumberFormat",null,{"ss:Format":Qr(gn[r.numFmtId])}));var i={"ss:ID":"s"+(21+a)};n.push(Rt("Style",s.join(""),i))}),Rt("Styles",n.join(""))}function F7(t){return Rt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+F4(t.Ref,{r:0,c:0})})}function Hpe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var a=e[r];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||n.push(F7(a)))}return Rt("Names",n.join(""))}function Vpe(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var a=r.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||s.push(F7(o)))}return s.join("")}function zpe(t,e,n,r){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Rt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Rt("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Rt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)a.push(Rt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&a.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(li("ProtectContents","True")),t["!protect"].objects&&a.push(li("ProtectObjects","True")),t["!protect"].scenarios&&a.push(li("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(li("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(li("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Rt("WorksheetOptions",a.join(""),{xmlns:Ko.x})}function Gpe(t){return t.map(function(e){var n=dle(e.t||""),r=Rt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Rt("Comment",r,{"ss:Author":e.a})}).join("")}function qpe(t,e,n,r,a,s,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Qr(F4(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Ca(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Qr(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Qr(t.l.Tooltip))),n["!merges"])for(var u=n["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",m="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=HA[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||gn[14]);break;case"s":h="String",m=Ale(t.v||"");break}var g=Ef(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?m:"",w=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(w+=Gpe(t.c)),Rt("Cell",w,o)}function Kpe(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Im(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Wpe(t,e,n,r){if(!t["!ref"])return"";var a=vr(t["!ref"]),s=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(E,N){hf(E);var I=!!E.width,k=Fw(N,E),U={"ss:Index":N+1};I&&(U["ss:Width"]=Ax(k.width)),E.hidden&&(U["ss:Hidden"]="1"),o.push(Rt("Column",null,U))});for(var l=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[Kpe(u,(t["!rows"]||[])[u])],h=a.s.c;h<=a.e.c;++h){var m=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>h)&&!(s[i].s.r>u)&&!(s[i].e.c<h)&&!(s[i].e.r<u)){(s[i].s.c!=h||s[i].s.r!=u)&&(m=!0);break}if(!m){var g={r:u,c:h},b=wn(g),w=l?(t[u]||[])[h]:t[b];d.push(qpe(w,b,t,e,n,r,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function $pe(t,e,n){var r=[],a=n.SheetNames[t],s=n.Sheets[a],i=s?Vpe(s,e,t,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=s?Wpe(s,e,t,n):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(zpe(s,e,t,n)),r.join("")}function Jpe(t,e){e||(e={}),t.SSF||(t.SSF=ca(gn)),t.SSF&&(Jm(),_w(t.SSF),e.revssf=Tw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Ef(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(jpe(t,e)),n.push(Ope()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Rt("Worksheet",$pe(r,e,t),{"ss:Name":Qr(t.SheetNames[r])}));return n[2]=Qpe(t,e),n[3]=Hpe(t),ns+Rt("Workbook",n.join(""),{xmlns:Ko.ss,"xmlns:o":Ko.o,"xmlns:x":Ko.x,"xmlns:ss":Ko.ss,"xmlns:dt":Ko.dt,"xmlns:html":Ko.html})}function Ype(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Hle(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=Vle(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var Xpe=[60,1084,2066,2165,2175];function Zpe(t,e,n,r,a){var s=r,i=[],o=n.slice(n.l,n.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),n.l+=s;for(var l=gA(n,n.l),u=a5[l],d=0;u!=null&&Xpe.indexOf(l)>-1;)s=gA(n,n.l+2),d=n.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=n.slice(d,n.l+4+s),i.push(o),n.l+=4+s,u=a5[l=gA(n,n.l)];var h=Gs(i);ii(h,0);var m=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(m),m+=i[g].length;if(h.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+r;return e.f(h,h.length,a)}function Au(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=gn[r])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||HA[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=sx(t.v):t.w=_h(t.v):t.w=Vl(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&r&&t.t=="n"&&$m(gn[r]||String(r))){var a=ah(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function Cv(t,e,n){return{v:t,ixfe:e,t:n}}function ege(t,e){var n={opts:{}},r={},a=e.dense?[]:{},s={},i={},o=null,l=[],u="",d={},h,m="",g,b,w,E,N={},I=[],k,U,P=[],D=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},B={},T=function(kt){return kt<8?dh[kt]:kt<64&&D[kt-8]||dh[kt]},O=function(kt,xt,xn){var $t=xt.XF.data;if(!(!$t||!$t.patternType||!xn||!xn.cellStyles)){xt.s={},xt.s.patternType=$t.patternType;var ir;(ir=ux(T($t.icvFore)))&&(xt.s.fgColor={rgb:ir}),(ir=ux(T($t.icvBack)))&&(xt.s.bgColor={rgb:ir})}},R=function(kt,xt,xn){if(!(Ae>1)&&!(xn.sheetRows&&kt.r>=xn.sheetRows)){if(xn.cellStyles&&xt.XF&&xt.XF.data&&O(kt,xt,xn),delete xt.ixfe,delete xt.XF,h=kt,m=wn(kt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),kt.r<i.s.r&&(i.s.r=kt.r),kt.c<i.s.c&&(i.s.c=kt.c),kt.r+1>i.e.r&&(i.e.r=kt.r+1),kt.c+1>i.e.c&&(i.e.c=kt.c+1),xn.cellFormula&&xt.f){for(var $t=0;$t<I.length;++$t)if(!(I[$t][0].s.c>kt.c||I[$t][0].s.r>kt.r)&&!(I[$t][0].e.c<kt.c||I[$t][0].e.r<kt.r)){xt.F=Rn(I[$t][0]),(I[$t][0].s.c!=kt.c||I[$t][0].s.r!=kt.r)&&delete xt.f,xt.f&&(xt.f=""+Fi(I[$t][1],i,kt,q,L));break}}xn.dense?(a[kt.r]||(a[kt.r]=[]),a[kt.r][kt.c]=xt):a[m]=xt}},L={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:I,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(L.password=e.password);var Q,z=[],ie=[],J=[],ee=[],ae=!1,q=[];q.SheetNames=L.snames,q.sharedf=L.sharedf,q.arrayf=L.arrayf,q.names=[],q.XTI=[];var Y=0,Ae=0,j=0,K=[],X=[],te;L.codepage=1200,Cc(1200);for(var le=!1;t.l<t.length-1;){var ye=t.l,Ce=t.read_shift(2);if(Ce===0&&Y===10)break;var _e=t.l===t.length?0:t.read_shift(2),Ie=a5[Ce];if(Ie&&Ie.f){if(e.bookSheets&&Y===133&&Ce!==133)break;if(Y=Ce,Ie.r===2||Ie.r==12){var xe=t.read_shift(2);if(_e-=2,!L.enc&&xe!==Ce&&((xe&255)<<8|xe>>8)!==Ce)throw new Error("rt mismatch: "+xe+"!="+Ce);Ie.r==12&&(t.l+=10,_e-=10)}var se={};if(Ce===10?se=Ie.f(t,_e,L):se=Zpe(Ce,Ie,t,_e,L),Ae==0&&[9,521,1033,2057].indexOf(Y)===-1)continue;switch(Ce){case 34:n.opts.Date1904=_.WBProps.date1904=se;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(L.enc||(t.l=0),L.enc=se,!e.password)throw new Error("File is password-protected");if(se.valid==null)throw new Error("Encryption scheme unsupported");if(!se.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=se;break;case 66:var Re=Number(se);switch(Re){case 21010:Re=1200;break;case 32768:Re=1e4;break;case 32769:Re=1252;break}Cc(L.codepage=Re),le=!0;break;case 317:L.rrtabid=se;break;case 25:L.winlocked=se;break;case 439:n.opts.RefreshAll=se;break;case 12:n.opts.CalcCount=se;break;case 16:n.opts.CalcDelta=se;break;case 17:n.opts.CalcIter=se;break;case 13:n.opts.CalcMode=se;break;case 14:n.opts.CalcPrecision=se;break;case 95:n.opts.CalcSaveRecalc=se;break;case 15:L.CalcRefMode=se;break;case 2211:n.opts.FullCalc=se;break;case 129:se.fDialog&&(a["!type"]="dialog"),se.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),se.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:P.push(se);break;case 430:q.push([se]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(se);break;case 24:case 536:te={Name:se.Name,Ref:Fi(se.rgce,i,null,q,L)},se.itab>0&&(te.Sheet=se.itab-1),q.names.push(te),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(se),se.Name=="_xlnm._FilterDatabase"&&se.itab>0&&se.rgce&&se.rgce[0]&&se.rgce[0][0]&&se.rgce[0][0][0]=="PtgArea3d"&&(X[se.itab-1]={ref:Rn(se.rgce[0][0][1][2])});break;case 22:L.ExternCount=se;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(se),q.XTI=q.XTI.concat(se);break;case 2196:if(L.biff<8)break;te!=null&&(te.Comment=se[1]);break;case 18:a["!protect"]=se;break;case 19:se!==0&&L.WTF&&console.error("Password verifier: "+se);break;case 133:s[se.pos]=se,L.snames.push(se.name);break;case 10:{if(--Ae)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Rn(i),e.sheetRows&&e.sheetRows<=i.e.r){var et=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Rn(i),i.e.r=et}i.e.r++,i.e.c++}z.length>0&&(a["!merges"]=z),ie.length>0&&(a["!objects"]=ie),J.length>0&&(a["!cols"]=J),ee.length>0&&(a["!rows"]=ee),_.Sheets.push(B)}u===""?d=a:r[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[Ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[se.BIFFVer]||8),L.biffguess=se.BIFFVer==0,se.BIFFVer==0&&se.dt==4096&&(L.biff=5,le=!0,Cc(L.codepage=28591)),L.biff==8&&se.BIFFVer==0&&se.dt==16&&(L.biff=2),Ae++)break;if(a=e.dense?[]:{},L.biff<8&&!le&&(le=!0,Cc(L.codepage=e.codepage||1252)),L.biff<5||se.BIFFVer==0&&se.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:t.l-_e,name:u};s[De.pos]=De,L.snames.push(u)}else u=(s[ye]||{name:""}).name;se.dt==32&&(a["!type"]="chart"),se.dt==64&&(a["!type"]="macro"),z=[],ie=[],L.arrayf=I=[],J=[],ee=[],ae=!1,B={Hidden:(s[ye]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[se.r]||[])[se.c]:a[wn({c:se.c,r:se.r})])&&++se.c,k={ixfe:se.ixfe,XF:P[se.ixfe]||{},v:se.val,t:"n"},j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:se.c,r:se.r},k,e);break;case 5:case 517:k={ixfe:se.ixfe,XF:P[se.ixfe],v:se.val,t:se.t},j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:se.c,r:se.r},k,e);break;case 638:k={ixfe:se.ixfe,XF:P[se.ixfe],v:se.rknum,t:"n"},j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:se.c,r:se.r},k,e);break;case 189:for(var we=se.c;we<=se.C;++we){var ze=se.rkrec[we-se.c][0];k={ixfe:ze,XF:P[ze],v:se.rkrec[we-se.c][1],t:"n"},j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:we,r:se.r},k,e)}break;case 6:case 518:case 1030:{if(se.val=="String"){o=se;break}if(k=Cv(se.val,se.cell.ixfe,se.tt),k.XF=P[k.ixfe],e.cellFormula){var nt=se.formula;if(nt&&nt[0]&&nt[0][0]&&nt[0][0][0]=="PtgExp"){var it=nt[0][0][1][0],dt=nt[0][0][1][1],Ct=wn({r:it,c:dt});N[Ct]?k.f=""+Fi(se.formula,i,se.cell,q,L):k.F=((e.dense?(a[it]||[])[dt]:a[Ct])||{}).F}else k.f=""+Fi(se.formula,i,se.cell,q,L)}j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R(se.cell,k,e),o=se}break;case 7:case 519:if(o)o.val=se,k=Cv(se,o.cell.ixfe,"s"),k.XF=P[k.ixfe],e.cellFormula&&(k.f=""+Fi(o.formula,i,o.cell,q,L)),j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R(o.cell,k,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{I.push(se);var ut=wn(se[0].s);if(g=e.dense?(a[se[0].s.r]||[])[se[0].s.c]:a[ut],e.cellFormula&&g){if(!o||!ut||!g)break;g.f=""+Fi(se[1],i,se[0],q,L),g.F=Rn(se[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;N[wn(o.cell)]=se[0],g=e.dense?(a[o.cell.r]||[])[o.cell.c]:a[wn(o.cell)],(g||{}).f=""+Fi(se[0],i,h,q,L)}}break;case 253:k=Cv(l[se.isst].t,se.ixfe,"s"),l[se.isst].h&&(k.h=l[se.isst].h),k.XF=P[k.ixfe],j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:se.c,r:se.r},k,e);break;case 513:e.sheetStubs&&(k={ixfe:se.ixfe,XF:P[se.ixfe],t:"z"},j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:se.c,r:se.r},k,e));break;case 190:if(e.sheetStubs)for(var Nt=se.c;Nt<=se.C;++Nt){var It=se.ixfe[Nt-se.c];k={ixfe:It,XF:P[It],t:"z"},j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:Nt,r:se.r},k,e)}break;case 214:case 516:case 4:k=Cv(se.val,se.ixfe,"s"),k.XF=P[k.ixfe],j>0&&(k.z=K[k.ixfe>>8&63]),Au(k,e,n.opts.Date1904),R({c:se.c,r:se.r},k,e);break;case 0:case 512:Ae===1&&(i=se);break;case 252:l=se;break;case 1054:if(L.biff==4){K[j++]=se[1];for(var Wt=0;Wt<j+163&&gn[Wt]!=se[1];++Wt);Wt>=163&&wA(se[1],j+163)}else wA(se[1],se[0]);break;case 30:{K[j++]=se;for(var Ut=0;Ut<j+163&&gn[Ut]!=se;++Ut);Ut>=163&&wA(se,j+163)}break;case 229:z=z.concat(se);break;case 93:ie[se.cmo[0]]=L.lastobj=se;break;case 438:L.lastobj.TxO=se;break;case 127:L.lastobj.ImData=se;break;case 440:for(E=se[0].s.r;E<=se[0].e.r;++E)for(w=se[0].s.c;w<=se[0].e.c;++w)g=e.dense?(a[E]||[])[w]:a[wn({c:w,r:E})],g&&(g.l=se[1]);break;case 2048:for(E=se[0].s.r;E<=se[0].e.r;++E)for(w=se[0].s.c;w<=se[0].e.c;++w)g=e.dense?(a[E]||[])[w]:a[wn({c:w,r:E})],g&&g.l&&(g.l.Tooltip=se[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;g=e.dense?(a[se[0].r]||[])[se[0].c]:a[wn(se[0])];var Ht=ie[se[2]];g||(e.dense?(a[se[0].r]||(a[se[0].r]=[]),g=a[se[0].r][se[0].c]={t:"z"}):g=a[wn(se[0])]={t:"z"},i.e.r=Math.max(i.e.r,se[0].r),i.s.r=Math.min(i.s.r,se[0].r),i.e.c=Math.max(i.e.c,se[0].c),i.s.c=Math.min(i.s.c,se[0].c)),g.c||(g.c=[]),b={a:se[1],t:Ht.TxO.t},g.c.push(b)}break;case 2173:Qde(P[se.ixfe],se.ext);break;case 125:{if(!L.cellStyles)break;for(;se.e>=se.s;)J[se.e--]={width:se.w/256,level:se.level||0,hidden:!!(se.flags&1)},ae||(ae=!0,N4(se.w/256)),hf(J[se.e+1])}break;case 520:{var Yt={};se.level!=null&&(ee[se.r]=Yt,Yt.level=se.level),se.hidden&&(ee[se.r]=Yt,Yt.hidden=!0),se.hpt&&(ee[se.r]=Yt,Yt.hpt=se.hpt,Yt.hpx=Im(se.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||mh(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ce]]=se;break;case 161:a["!margins"]||mh(a["!margins"]={}),a["!margins"].header=se.header,a["!margins"].footer=se.footer;break;case 574:se.RTL&&(_.Views[0].RTL=!0);break;case 146:D=se;break;case 2198:Q=se;break;case 140:U=se;break;case 442:u?B.CodeName=se||B.name:_.WBProps.CodeName=se||"ThisWorkbook";break}}else Ie||console.error("Missing Info for XLS Record 0x"+Ce.toString(16)),t.l+=_e}return n.SheetNames=ja(s).sort(function(Mt,kt){return Number(Mt)-Number(kt)}).map(function(Mt){return s[Mt].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&X.forEach(function(Mt,kt){n.Sheets[n.SheetNames[kt]]["!autofilter"]=Mt}),n.Strings=l,n.SSF=ca(gn),L.enc&&(n.Encryption=L.enc),Q&&(n.Themes=Q),n.Metadata={},U!==void 0&&(n.Metadata.Country=U),q.names.length>0&&(_.Names=q.names),n.Workbook=_,n}var jg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function tge(t,e,n){var r=ln.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var a=WF(r,Y_,jg.DSI);for(var s in a)e[s]=a[s]}catch(u){if(n.WTF)throw u}var i=ln.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=WF(i,X_,jg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(n.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(IP(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function nge(t,e){var n=[],r=[],a=[],s=0,i,o=EF(Y_,"n"),l=EF(X_,"n");if(t.Props)for(i=ja(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?n:Object.prototype.hasOwnProperty.call(l,i[s])?r:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=ja(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?n:Object.prototype.hasOwnProperty.call(l,i[s])?r:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)PP.indexOf(a[s][0])>-1||kP.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);r.length&&ln.utils.cfb_add(e,"/SummaryInformation",$F(r,jg.SI,l,X_)),(n.length||u.length)&&ln.utils.cfb_add(e,"/DocumentSummaryInformation",$F(n,jg.DSI,o,Y_,u.length?u:null,jg.UDI))}function R7(t,e){e||(e={}),P4(e),s4(),e.codepage&&a4(e.codepage);var n,r;if(t.FullPaths){if(ln.find(t,"/encryption"))throw new Error("File is password-protected");n=ln.find(t,"!CompObj"),r=ln.find(t,"/Workbook")||ln.find(t,"/Book")}else{switch(e.type){case"base64":t=$o(tl(t));break;case"binary":t=$o(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ii(t,0),r={content:t}}var a,s;if(n&&Ype(n),e.bookProps&&!e.bookSheets)a={};else{var i=qn?"buffer":"array";if(r&&r.content)a=ege(r.content,e);else if((s=ln.find(t,"PerfectOffice_MAIN"))&&s.content)a=hh.to_workbook(s.content,(e.type=i,e));else if((s=ln.find(t,"NativeContent_MAIN"))&&s.content)a=hh.to_workbook(s.content,(e.type=i,e));else throw(s=ln.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&ln.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=mfe(t))}var o={};return t.FullPaths&&tge(t,o,e),a.Props=a.Custprops=o,e.bookFiles&&(a.cfb=t),a}function rge(t,e){var n=e||{},r=ln.utils.cfb_new({root:"R"}),a="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":a="/Workbook",n.biff=8;break;case"biff5":a="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return ln.utils.cfb_add(r,a,D7(t,n)),n.biff==8&&(t.Props||t.Custprops)&&nge(t,r),n.biff==8&&t.vbaraw&&pfe(r,ln.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var hx={0:{f:T0e},1:{f:L0e},2:{f:eme},3:{f:V0e},4:{f:j0e},5:{f:Y0e},6:{f:sme},7:{f:K0e},8:{f:dme},9:{f:Ame},10:{f:cme},11:{f:ume},12:{f:M0e},13:{f:nme},14:{f:G0e},15:{f:Q0e},16:{f:_7},17:{f:ome},18:{f:$0e},19:{f:v4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ope},40:{},42:{},43:{f:sde},44:{f:rde},45:{f:lde},46:{f:ude},47:{f:cde},48:{},49:{f:kle},50:{},51:{f:zde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:$P},62:{f:ame},63:{f:Zde},64:{f:Bme},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Qi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Eme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:R0e},148:{f:k0e,p:16},151:{f:xme},152:{},153:{f:ape},154:{},155:{},156:{f:npe},157:{},158:{},159:{T:1,f:yAe},160:{T:-1},161:{T:1,f:Vh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:fme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Hde},336:{T:-1},337:{f:Kde,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:J_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:WP},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:vme},427:{f:yme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:bme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:F0e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:pme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:J_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ufe},633:{T:1},634:{T:-1},635:{T:1,f:lfe},636:{T:-1},637:{f:Dle},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Gme},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Nme},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},a5={6:{f:ZC},10:{f:Sd},12:{f:hs},13:{f:hs},14:{f:Wa},15:{f:Wa},16:{f:Mi},17:{f:Wa},18:{f:Wa},19:{f:hs},20:{f:t6},21:{f:t6},23:{f:WP},24:{f:r6},25:{f:Wa},26:{},27:{},28:{f:Nue},29:{},34:{f:Wa},35:{f:n6},38:{f:Mi},39:{f:Mi},40:{f:Mi},41:{f:Mi},42:{f:Wa},43:{f:Wa},47:{f:QAe},49:{f:nue},51:{f:hs},60:{},61:{f:Yce},64:{f:Wa},65:{f:tue},66:{f:hs},77:{},80:{},81:{},82:{},85:{f:hs},89:{},90:{},91:{},92:{f:Oce},93:{f:Fue},94:{},95:{f:Wa},96:{},97:{},99:{f:Wa},125:{f:$P},128:{f:gue},129:{f:Hce},130:{f:hs},131:{f:Wa},132:{f:Wa},133:{f:Vce},134:{},140:{f:Oue},141:{f:hs},144:{},146:{f:Vue},151:{},152:{},153:{},154:{},155:{},156:{f:hs},157:{},158:{},160:{f:Jue},161:{f:que},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:fue},190:{f:hue},193:{f:Sd},197:{},198:{},199:{},200:{},201:{},202:{f:Wa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:hs},220:{},221:{f:Wa},222:{},224:{f:pue},225:{f:jce},226:{f:Sd},227:{},229:{f:kue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Gce},253:{f:aue},255:{f:Kce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:jP},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Wa},353:{f:Sd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:bue},431:{f:Wa},432:{},433:{},434:{},437:{},438:{f:Lue},439:{f:Wa},440:{f:Uue},441:{},442:{f:Gx},443:{},444:{f:hs},445:{},446:{},448:{f:Sd},449:{f:Jce,r:2},450:{f:Sd},512:{f:XF},513:{f:$ue},515:{f:yue},516:{f:iue},517:{f:e6},519:{f:Yue},520:{f:Wce},523:{},545:{f:a6},549:{f:YF},566:{},574:{f:Zce},638:{f:due},659:{},1048:{},1054:{f:lue},1084:{},1212:{f:Sue},2048:{f:Pue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Sd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:zue,r:12},2173:{f:Ode,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Wa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:_ue,r:12},2197:{},2198:{f:Dde,r:12},2199:{},2200:{},2201:{},2202:{f:Tue,r:12},2203:{f:Sd},2204:{},2205:{},2206:{},2207:{},2211:{f:$ce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:hs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Kue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Hue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:XF},1:{},2:{f:nAe},3:{f:eAe},4:{f:Zue},5:{f:e6},7:{f:aAe},8:{},9:{f:yv},11:{},22:{f:hs},30:{f:uue},31:{},32:{},33:{f:a6},36:{},37:{f:YF},50:{f:sAe},62:{},52:{},67:{},68:{f:hs},69:{},86:{},126:{},127:{f:Xue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:iAe},223:{},234:{},354:{},421:{},518:{f:ZC},521:{f:yv},536:{f:r6},547:{f:n6},561:{},579:{},1030:{f:ZC},1033:{f:yv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Dt(t,e,n,r){var a=e;if(!isNaN(a)){var s=r||(n||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&p4(n)&&t.push(n)}}function age(t,e,n,r){var a=(n||[]).length||0;if(a<=8224)return Dt(t,e,n,a);var s=e;if(!isNaN(s)){for(var i=n.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u;l<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u}}}function $x(t,e,n){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function sge(t,e,n,r){var a=lt(9);return $x(a,t,e),OP(n,r||"b",a),a}function ige(t,e,n){var r=lt(8+2*n.length);return $x(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function oge(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Fs(la(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Dt(t,2,rAe(n,r,a)):Dt(t,3,tAe(n,r,a));return;case"b":case"e":Dt(t,5,sge(n,r,e.v,e.t));return;case"s":case"str":Dt(t,4,ige(n,r,(e.v||"").slice(0,255)));return}Dt(t,1,$x(null,n,r))}function lge(t,e,n,r){var a=Array.isArray(e),s=vr(e["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Rn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=es(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=ba(d)),i=l[d]+o;var h=a?(e[u]||[])[d]:e[i];h&&oge(t,h,u,d)}}}function cge(t,e){for(var n=e||{},r=Co(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(a=s);if(a==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Dt(r,n.biff==4?1033:n.biff==3?521:9,S4(t,16,n)),lge(r,t.Sheets[t.SheetNames[a]],a,n),Dt(r,10),r.end()}function uge(t,e,n){Dt(t,49,rue({sz:12,name:"Arial"},n))}function Age(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&Dt(t,1054,cue(a,e[a],n))})}function dge(t,e){var n=lt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Dt(t,2151,n),n=lt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),GP(vr(e["!ref"]||"A1"),n),n.write_shift(4,4),Dt(t,2152,n)}function fge(t,e){for(var n=0;n<16;++n)Dt(t,224,ZF({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Dt(t,224,ZF(r,0,e))})}function hge(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Dt(t,440,Mue(r)),r[1].Tooltip&&Dt(t,2048,jue(r))}delete e["!links"]}function mge(t,e){if(e){var n=0;e.forEach(function(r,a){++n<=256&&r&&Dt(t,125,Gue(Fw(a,r),a))})}}function pge(t,e,n,r,a){var s=16+Ef(a.cellXfs,e,a);if(e.v==null&&!e.bf){Dt(t,513,Nh(n,r,s));return}if(e.bf)Dt(t,6,Hhe(e,n,r,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Fs(la(e.v)):e.v;Dt(t,515,wue(n,r,i,s));break;case"b":case"e":Dt(t,517,vue(n,r,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var o=D4(a.Strings,e.v,a.revStrings);Dt(t,253,sue(n,r,o,s))}else Dt(t,516,oue(n,r,(e.v||"").slice(0,255),s,a));break;default:Dt(t,513,Nh(n,r,s))}}function gge(t,e,n){var r=Co(),a=n.SheetNames[t],s=n.Sheets[a]||{},i=(n||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(s),u=e.biff==8,d,h="",m=[],g=vr(s["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Dt(r,2057,S4(n,16,e)),Dt(r,13,Fl(1)),Dt(r,12,Fl(100)),Dt(r,15,Ji(!0)),Dt(r,17,Ji(!1)),Dt(r,16,Th(.001)),Dt(r,95,Ji(!0)),Dt(r,42,Ji(!1)),Dt(r,43,Ji(!1)),Dt(r,130,Fl(1)),Dt(r,128,xue()),Dt(r,131,Ji(!1)),Dt(r,132,Ji(!1)),u&&mge(r,s["!cols"]),Dt(r,512,Aue(g,e)),u&&(s["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){h=es(w);for(var E=g.s.c;E<=g.e.c;++E){w===g.s.r&&(m[E]=ba(E)),d=m[E]+h;var N=l?(s[w]||[])[E]:s[d];N&&(pge(r,N,w,E,e),u&&N.l&&s["!links"].push([d,N.l]))}}var I=o.CodeName||o.name||a;return u&&Dt(r,574,eue((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Dt(r,229,Iue(s["!merges"])),u&&hge(r,s),Dt(r,442,QP(I)),u&&dge(r,s),Dt(r,10),r.end()}function xge(t,e,n){var r=Co(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=n.biff==8,l=n.biff==5;if(Dt(r,2057,S4(t,5,n)),n.bookType=="xla"&&Dt(r,135),Dt(r,225,o?Fl(1200):null),Dt(r,193,vce(2)),l&&Dt(r,191),l&&Dt(r,192),Dt(r,226),Dt(r,92,Qce("SheetJS",n)),Dt(r,66,Fl(o?1200:1252)),o&&Dt(r,353,Fl(0)),o&&Dt(r,448),Dt(r,317,Wue(t.SheetNames.length)),o&&t.vbaraw&&Dt(r,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Dt(r,442,QP(u))}Dt(r,156,Fl(17)),Dt(r,25,Ji(!1)),Dt(r,18,Ji(!1)),Dt(r,19,Fl(0)),o&&Dt(r,431,Ji(!1)),o&&Dt(r,444,Fl(0)),Dt(r,61,Xce()),Dt(r,64,Ji(!1)),Dt(r,141,Fl(0)),Dt(r,34,Ji(Jme(t)=="true")),Dt(r,14,Ji(!0)),o&&Dt(r,439,Ji(!1)),Dt(r,218,Fl(0)),uge(r,t,n),Age(r,t.SSF,n),fge(r,n),o&&Dt(r,352,Ji(!1));var d=r.end(),h=Co();o&&Dt(h,140,Que()),o&&n.Strings&&age(h,252,qce(n.Strings)),Dt(h,10);var m=h.end(),g=Co(),b=0,w=0;for(w=0;w<t.SheetNames.length;++w)b+=(o?12:11)+(o?2:1)*t.SheetNames[w].length;var E=d.length+b+m.length;for(w=0;w<t.SheetNames.length;++w){var N=s[w]||{};Dt(g,133,zce({pos:E,hs:N.Hidden||0,dt:0,name:t.SheetNames[w]},n)),E+=e[w].length}var I=g.end();if(b!=I.length)throw new Error("BS8 "+b+" != "+I.length);var k=[];return d.length&&k.push(d),I.length&&k.push(I),m.length&&k.push(m),Gs(k)}function vge(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=ca(gn)),t&&t.SSF&&(Jm(),_w(t.SSF),n.revssf=Tw(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,j4(n),n.cellXfs=[],Ef(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)r[r.length]=gge(a,n,t);return r.unshift(xge(t,r,n)),Gs(r)}function D7(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var a=_o(r["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return vge(t,e);case 4:case 3:case 2:return cge(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function h6(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,o=s&&s.index||t.length,l=rle(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var w=l[i].trim(),E=w.slice(0,3).toLowerCase();if(E=="<tr"){if(++u,n.sheetRows&&n.sheetRows<=u){--u;break}d=0;continue}if(!(E!="<td"&&E!="<th")){var N=w.split(/<\/t[dh]>/i);for(o=0;o<N.length;++o){var I=N[o].trim();if(I.match(/<t[dh]/i)){for(var k=I,U=0;k.charAt(0)=="<"&&(U=k.indexOf(">"))>-1;)k=k.slice(U+1);for(var P=0;P<b.length;++P){var D=b[P];D.s.c==d&&D.s.r<u&&u<=D.e.r&&(d=D.e.c+1,P=-1)}var _=_n(I.slice(0,I.indexOf(">")));m=_.colspan?+_.colspan:1,((h=+_.rowspan)>1||m>1)&&b.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+m-1}});var B=_.t||_["data-t"]||"";if(!k.length){d+=m;continue}if(k=aP(k),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!k.length){d+=m;continue}var T={t:"s",v:k};n.raw||!k.trim().length||B=="s"||(k==="TRUE"?T={t:"b",v:!0}:k==="FALSE"?T={t:"b",v:!1}:isNaN(_c(k))?isNaN(Nm(k).getDate())||(T={t:"d",v:la(k)},n.cellDates||(T={t:"n",v:Fs(T.v)}),T.z=n.dateNF||gn[14]):T={t:"n",v:_c(k)}),n.dense?(r[u]||(r[u]=[]),r[u][d]=T):r[wn({r:u,c:d})]=T,d+=m}}}}return r["!ref"]=Rn(g),b.length&&(r["!merges"]=b),r}function yge(t,e,n,r){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>n||a[u].s.c>i)&&!(a[u].e.r<n||a[u].e.c<i)){if(a[u].s.r<n||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=wn({r:n,c:i}),h=r.dense?(t[n]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||f4(h.w||(kA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),r.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(r.id||"sjs")+"-"+d,s.push(Rt("td",m,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var wge='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bge="</body></html>";function Cge(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return Cf(h6(n[0],e),e);var r=V4();return n.forEach(function(a,s){z4(r,h6(a,e),"Sheet"+(s+1))}),r}function Ege(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function L7(t,e){var n=e||{},r=n.header!=null?n.header:wge,a=n.footer!=null?n.footer:bge,s=[r],i=_o(t["!ref"]);n.dense=Array.isArray(t),s.push(Ege(t,i,n));for(var o=i.s.r;o<=i.e.r;++o)s.push(yge(t,i,o,n));return s.push("</table>"+a),s.join("")}function U7(t,e,n){var r=n||{},a=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var i=typeof r.origin=="string"?Ca(r.origin):r.origin;a=i.r,s=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=_o(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var h=[],m=0,g=t["!rows"]||(t["!rows"]=[]),b=0,w=0,E=0,N=0,I=0,k=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&w<l;++b){var U=o[b];if(m6(U)){if(r.display)continue;g[w]={hidden:!0}}var P=U.children;for(E=N=0;E<P.length;++E){var D=P[E];if(!(r.display&&m6(D))){var _=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):aP(D.innerHTML),B=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<h.length;++m){var T=h[m];T.s.c==N+s&&T.s.r<w+a&&w+a<=T.e.r&&(N=T.e.c+1-s,m=-1)}k=+D.getAttribute("colspan")||1,((I=+D.getAttribute("rowspan")||1)>1||k>1)&&h.push({s:{r:w+a,c:N+s},e:{r:w+a+(I||1)-1,c:N+s+(k||1)-1}});var O={t:"s",v:_},R=D.getAttribute("data-t")||D.getAttribute("t")||"";_!=null&&(_.length==0?O.t=R||"z":r.raw||_.trim().length==0||R=="s"||(_==="TRUE"?O={t:"b",v:!0}:_==="FALSE"?O={t:"b",v:!1}:isNaN(_c(_))?isNaN(Nm(_).getDate())||(O={t:"d",v:la(_)},r.cellDates||(O={t:"n",v:Fs(O.v)}),O.z=r.dateNF||gn[14]):O={t:"n",v:_c(_)})),O.z===void 0&&B!=null&&(O.z=B);var L="",Q=D.getElementsByTagName("A");if(Q&&Q.length)for(var z=0;z<Q.length&&!(Q[z].hasAttribute("href")&&(L=Q[z].getAttribute("href"),L.charAt(0)!="#"));++z);L&&L.charAt(0)!="#"&&(O.l={Target:L}),r.dense?(t[w+a]||(t[w+a]=[]),t[w+a][N+s]=O):t[wn({c:N+s,r:w+a})]=O,u.e.c<N+s&&(u.e.c=N+s),N+=k}}++w}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,w-1+a),t["!ref"]=Rn(u),w>=l&&(t["!fullref"]=Rn((u.e.r=o.length-b+w-1+a,u))),t}function M7(t,e){var n=e||{},r=n.dense?[]:{};return U7(r,t,e)}function _ge(t,e){return Cf(M7(t,e),e)}function m6(t){var e="",n=Sge(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Sge(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Tge(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=gr(e.replace(/<[^>]*>/g,""));return[n]}var p6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function P7(t,e){var n=e||{},r=h4(t),a=[],s,i,o={name:""},l="",u=0,d,h,m={},g=[],b=n.dense?[]:{},w,E,N={value:""},I="",k=0,U=[],P=-1,D=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},B=0,T={},O=[],R={},L=0,Q=0,z=[],ie=1,J=1,ee=[],ae={Names:[]},q={},Y=["",""],Ae=[],j={},K="",X=0,te=!1,le=!1,ye=0;for(lx.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=lx.exec(r);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?b["!ref"]=Rn(_):b["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=_.e.r&&(b["!fullref"]=b["!ref"],_.e.r=n.sheetRows-1,b["!ref"]=Rn(_)),O.length&&(b["!merges"]=O),z.length&&(b["!rows"]=z),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),m[d.name]=b,le=!1):w[0].charAt(w[0].length-2)!=="/"&&(d=_n(w[0],!1),P=D=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,b=n.dense?[]:{},O=[],z=[],le=!0);break;case"table-row-group":w[1]==="/"?--B:++B;break;case"table-row":case"":if(w[1]==="/"){P+=ie,ie=1;break}if(h=_n(w[0],!1),h.?P=h.-1:P==-1&&(P=0),ie=+h["number-rows-repeated"]||1,ie<10)for(ye=0;ye<ie;++ye)B>0&&(z[P+ye]={level:B});D=-1;break;case"covered-table-cell":w[1]!=="/"&&++D,n.sheetStubs&&(n.dense?(b[P]||(b[P]=[]),b[P][D]={t:"z"}):b[wn({r:P,c:D})]={t:"z"}),I="",U=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++D,N=_n(w[0],!1),J=parseInt(N["number-columns-repeated"]||"1",10),E={t:"z",v:null},N.formula&&n.cellFormula!=!1&&(E.f=A6(gr(N.formula))),(N.||N["value-type"])=="string"&&(E.t="s",E.v=gr(N["string-value"]||""),n.dense?(b[P]||(b[P]=[]),b[P][D]=E):b[wn({r:P,c:D})]=E),D+=J-1;else if(w[1]!=="/"){++D,I="",k=0,U=[],J=1;var Ce=ie?P+ie-1:P;if(D>_.e.c&&(_.e.c=D),D<_.s.c&&(_.s.c=D),P<_.s.r&&(_.s.r=P),Ce>_.e.r&&(_.e.r=Ce),N=_n(w[0],!1),Ae=[],j={},E={t:N.||N["value-type"],v:null},n.cellFormula)if(N.formula&&(N.formula=gr(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(L=parseInt(N["number-matrix-rows-spanned"],10)||0,Q=parseInt(N["number-matrix-columns-spanned"],10)||0,R={s:{r:P,c:D},e:{r:P+L-1,c:D+Q-1}},E.F=Rn(R),ee.push([R,E.F])),N.formula)E.f=A6(N.formula);else for(ye=0;ye<ee.length;++ye)P>=ee[ye][0].s.r&&P<=ee[ye][0].e.r&&D>=ee[ye][0].s.c&&D<=ee[ye][0].e.c&&(E.F=ee[ye][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(L=parseInt(N["number-rows-spanned"],10)||0,Q=parseInt(N["number-columns-spanned"],10)||0,R={s:{r:P,c:D},e:{r:P+L-1,c:D+Q-1}},O.push(R)),N["number-columns-repeated"]&&(J=parseInt(N["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=ia(N["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(N.value);break;case"percentage":E.t="n",E.v=parseFloat(N.value);break;case"currency":E.t="n",E.v=parseFloat(N.value);break;case"date":E.t="d",E.v=la(N["date-value"]),n.cellDates||(E.t="n",E.v=Fs(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=ele(N["time-value"])/86400,n.cellDates&&(E.t="d",E.v=Bw(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(N.);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",N["string-value"]!=null&&(I=gr(N["string-value"]),U=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(te=!1,E.t==="s"&&(E.v=I||"",U.length&&(E.R=U),te=k==0),q.Target&&(E.l=q),Ae.length>0&&(E.c=Ae,Ae=[]),I&&n.cellText!==!1&&(E.w=I),te&&(E.t="z",delete E.v),(!te||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=P))for(var _e=0;_e<ie;++_e){if(J=parseInt(N["number-columns-repeated"]||"1",10),n.dense)for(b[P+_e]||(b[P+_e]=[]),b[P+_e][D]=_e==0?E:ca(E);--J>0;)b[P+_e][D+J]=ca(E);else for(b[wn({r:P+_e,c:D})]=E;--J>0;)b[wn({r:P+_e,c:D+J})]=ca(E);_.e.c<=D&&(_.e.c=D)}J=parseInt(N["number-columns-repeated"]||"1",10),D+=J-1,J=0,E={},I="",U=[]}q={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s;j.t=I,U.length&&(j.R=U),j.a=K,Ae.push(j)}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);K="",X=0,I="",k=0,U=[];break;case"creator":w[1]==="/"?K=r.slice(X,w.index):X=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);I="",k=0,U=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(T[o.name]=l,(s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&(l="",o=_n(w[0],!1),a.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=_n(w[0],!1),l+=p6[w[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=_n(w[0],!1),l+=p6[w[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(u,w.index);break}else u=w.index+w[0].length;break;case"named-range":i=_n(w[0],!1),Y=eE(i["cell-range-address"]);var Ie={Name:i.name,Ref:Y[0]+"!"+Y[1]};le&&(Ie.Sheet=g.length),ae.Names.push(Ie);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(w[1]==="/"&&(!N||!N["string-value"])){var xe=Tge(r.slice(k,w.index));I=(I.length>0?I+`
`:"")+xe[0]}else _n(w[0],!1),k=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{Y=eE(_n(w[0])["target-range-address"]),m[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(q=_n(w[0],!1),!q.href)break;q.Target=gr(q.href),delete q.href,q.Target.charAt(0)=="#"&&q.Target.indexOf(".")>-1?(Y=eE(q.Target.slice(1)),q.Target="#"+Y[0]+"!"+Y[1]):q.Target.match(/^\.\.[\\\/]/)&&(q.Target=q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(w)}}var se={Sheets:m,SheetNames:g,Workbook:ae};return n.bookSheets&&delete se.Sheets,se}function g6(t,e){e=e||{},kl(t,"META-INF/manifest.xml")&&ece(fs(t,"META-INF/manifest.xml"),e);var n=Jo(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=P7(Jr(n),e);return kl(t,"meta.xml")&&(r.Props=BP(fs(t,"meta.xml"))),r}function x6(t,e){return P7(t,e)}var Bge=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+ox({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ns+e}}(),v6=function(){var t=function(s){return Qr(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,i,o){var l=[];l.push('      <table:table table:name="'+Qr(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=_o(s["!ref"]||"A1"),m=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",E=s["!rows"]||[];for(u=0;u<h.s.r;++u)w=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+w+`></table:table-row>
`);for(;u<=h.e.r;++u){for(w=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+w+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var N=!1,I={},k="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>d)&&!(m[g].s.r>u)&&!(m[g].e.c<d)&&!(m[g].e.r<u)){(m[g].s.c!=d||m[g].s.r!=u)&&(N=!0),I["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,I["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(N){l.push(n);continue}var U=wn({r:u,c:d}),P=b?(s[u]||[])[d]:s[U];if(P&&P.f&&(I["table:formula"]=Qr(Whe(P.f)),P.F&&P.F.slice(0,U.length)==U)){var D=_o(P.F);I["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,I["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!P){l.push(e);continue}switch(P.t){case"b":k=P.v?"TRUE":"FALSE",I["office:value-type"]="boolean",I["office:boolean-value"]=P.v?"true":"false";break;case"n":k=P.w||String(P.v||0),I["office:value-type"]="float",I["office:value"]=P.v||0;break;case"s":case"str":k=P.v==null?"":P.v,I["office:value-type"]="string";break;case"d":k=P.w||la(P.v).toISOString(),I["office:value-type"]="date",I["office:date-value"]=la(P.v).toISOString(),I["table:style-name"]="ce1";break;default:l.push(e);continue}var _=t(k);if(P.l&&P.l.Target){var B=P.l.Target;B=B.charAt(0)=="#"?"#"+$he(B.slice(1)):B,B.charAt(0)!="#"&&!B.match(/^\w+:/)&&(B="../"+B),_=Rt("text:a",_,{"xlink:href":B.replace(/&/g,"&amp;")})}l.push("          "+Rt("table:table-cell",Rt("text:p",_,{}),I)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;hf(h),h.ods=o;var m=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ns],u=ox({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=ox({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(TP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(r(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function j7(t,e){if(e.bookType=="fods")return v6(t,e);var n=u4(),r="",a=[],s=[];return r="mimetype",jn(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",jn(n,r,v6(t,e)),a.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",jn(n,r,Bge(t,e)),a.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",jn(n,r,ns+TP()),a.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",jn(n,r,rce(s)),a.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",jn(n,r,tce(a)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function kh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function s5(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Jr(bf(t))}function Nge(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):$o(vu(t))}function kge(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function pf(t){var e=t.reduce(function(a,s){return a+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(a){n.set(a,r),r+=a.length}),n}function y6(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Ige(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,a=e+13;a>=e;--a)r=r*256+t[a];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function Fge(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,a=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=n>=0?0:128}function mx(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function Pr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Pa(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Sr(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],a=mx(t,n),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);o=t.slice(l,n[0])}break;case 5:i=4,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 1:i=8,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 2:i=mx(t,n),o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(r))}var u={data:o,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function ri(t){var e=[];return t.forEach(function(n,r){n.forEach(function(a){a.data&&(e.push(Pr(r*8+a.type)),a.type==2&&e.push(Pr(a.data.length)),e.push(a.data))})}),pf(e)}function M4(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function Bl(t){for(var e,n=[],r=[0];r[0]<t.length;){var a=mx(t,r),s=Sr(t.slice(r[0],r[0]+a));r[0]+=a;var i={id:Pa(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Sr(o.data),u=Pa(l[3][0].data);i.messages.push({meta:l,data:t.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Pa(s[3][0].data)>>>0>0),n.push(i)}return n}function C0(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:Pr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:Pr(+!!n.merge),type:0}]);var a=[];n.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Pr(i.data.length)}],r[2].push({data:ri(i.meta),type:2})});var s=ri(r);e.push(Pr(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),pf(e)}function Rge(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=mx(e,n),a=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var i=e[n[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[n[0]],o>1&&(i|=e[n[0]+1]<<8),o>2&&(i|=e[n[0]+2]<<16),o>3&&(i|=e[n[0]+3]<<24),i>>>=0,i++,n[0]+=o}a.push(e.slice(n[0],n[0]+i)),n[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(u=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),a=[pf(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=pf(a);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function Nl(t){for(var e=[],n=0;n<t.length;){var r=t[n++],a=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(Rge(r,t.slice(n,n+a))),n+=a}if(n!==t.length)throw new Error("data is not a valid framed stream!");return pf(e)}function E0(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),a=new Uint8Array(4);e.push(a);var s=Pr(r),i=s.length;e.push(s),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),i+=r,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,n+=r}return pf(e)}function Dge(t,e,n,r){var a=kh(t),s=a.getUint32(4,!0),i=(r>1?12:8)+y6(s&(r>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=y6(s&(r>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:n[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function Lge(t,e,n){var r=kh(t),a=r.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=Ige(t,s),s+=16),a&2&&(u=r.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+r.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=r.getUint32(s,!0),s+=4),a&16&&(i=r.getUint32(s,!0),s+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:n[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return h}function nE(t,e){var n=new Uint8Array(32),r=kh(n),a=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,Fge(n,a,t.v),s|=1,a+=16;break;case"b":n[1]=6,r.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,a)}function rE(t,e){var n=new Uint8Array(32),r=kh(n),a=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":n[2]=6,r.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,a)}function Uge(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return Dge(t,e,n,t[0]);case 5:return Lge(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ii(t){var e=Sr(t);return mx(e[1][0].data)}function w6(t,e){var n=Sr(e.data),r=Pa(n[1][0].data),a=n[3],s=[];return(a||[]).forEach(function(i){var o=Sr(i.data),l=Pa(o[1][0].data)>>>0;switch(r){case 1:s[l]=s5(o[3][0].data);break;case 8:{var u=t[Ii(o[9][0].data)][0],d=Sr(u.data),h=t[Ii(d[1][0].data)][0],m=Pa(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=Sr(h.data);s[l]=g[3].map(function(b){return s5(b.data)}).join("")}break}}),s}function Mge(t,e){var n,r,a,s,i,o,l,u,d,h,m,g,b,w,E=Sr(t),N=Pa(E[1][0].data)>>>0,I=Pa(E[2][0].data)>>>0,k=((r=(n=E[8])==null?void 0:n[0])==null?void 0:r.data)&&Pa(E[8][0].data)>0||!1,U,P;if((s=(a=E[7])==null?void 0:a[0])!=null&&s.data&&e!=0)U=(o=(i=E[7])==null?void 0:i[0])==null?void 0:o.data,P=(u=(l=E[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=E[4])==null?void 0:d[0])!=null&&h.data&&e!=1)U=(g=(m=E[4])==null?void 0:m[0])==null?void 0:g.data,P=(w=(b=E[3])==null?void 0:b[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var D=k?4:1,_=kh(U),B=[],T=0;T<U.length/2;++T){var O=_.getUint16(T*2,!0);O<65535&&B.push([T,O])}if(B.length!=I)throw"Expected ".concat(I," cells, found ").concat(B.length);var R=[];for(T=0;T<B.length-1;++T)R[B[T][0]]=P.subarray(B[T][1]*D,B[T+1][1]*D);return B.length>=1&&(R[B[B.length-1][0]]=P.subarray(B[B.length-1][1]*D)),{R:N,cells:R}}function Pge(t,e){var n,r=Sr(e.data),a=(n=r==null?void 0:r[7])!=null&&n[0]?Pa(r[7][0].data)>>>0>0?1:0:-1,s=M4(r[5],function(i){return Mge(i,a)});return{nrows:Pa(r[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function jge(t,e,n){var r,a=Sr(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Pa(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Pa(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));n["!ref"]=Rn(s);var i=Sr(a[4][0].data),o=w6(t,t[Ii(i[4][0].data)][0]),l=(r=i[17])!=null&&r[0]?w6(t,t[Ii(i[17][0].data)][0]):[],u=Sr(i[3][0].data),d=0;u[1].forEach(function(h){var m=Sr(h.data),g=t[Ii(m[2][0].data)][0],b=Pa(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var w=Pge(t,g);w.data.forEach(function(E,N){E.forEach(function(I,k){var U=wn({r:d+N,c:k}),P=Uge(I,o,l);P&&(n[U]=P)})}),d+=w.nrows})}function Oge(t,e){var n=Sr(e.data),r={"!ref":"A1"},a=t[Ii(n[2][0].data)],s=Pa(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return jge(t,a[0],r),r}function Qge(t,e){var n,r=Sr(e.data),a={name:(n=r[1])!=null&&n[0]?s5(r[1][0].data):"",sheets:[]},s=M4(r[2],Ii);return s.forEach(function(i){t[i].forEach(function(o){var l=Pa(o.meta[1][0].data);l==6e3&&a.sheets.push(Oge(t,o))})}),a}function Hge(t,e){var n=V4(),r=Sr(e.data),a=M4(r[1],Ii);if(a.forEach(function(s){t[s].forEach(function(i){var o=Pa(i.meta[1][0].data);if(o==2){var l=Qge(t,i);l.sheets.forEach(function(u,d){z4(n,u,d==0?l.name:l.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function aE(t){var e,n,r,a,s={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Nl(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Bl(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){s[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(r=(n=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:a[0].data)&&Pa(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=Pa(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Hge(s,o)}function Vge(t,e,n){var r,a,s,i;if(!((r=t[6])!=null&&r[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Pa(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=kh(t[7][0].data),d=0,h=[],m=kh(t[4][0].data),g=0,b=[],w=0;w<e.length;++w){if(e[w]==null){u.setUint16(w*2,65535,!0),m.setUint16(w*2,65535);continue}u.setUint16(w*2,d,!0),m.setUint16(w*2,g,!0);var E,N;switch(typeof e[w]){case"string":E=nE({t:"s",v:e[w]},n),N=rE({t:"s",v:e[w]},n);break;case"number":E=nE({t:"n",v:e[w]},n),N=rE({t:"n",v:e[w]},n);break;case"boolean":E=nE({t:"b",v:e[w]},n),N=rE({t:"b",v:e[w]},n);break;default:throw new Error("Unsupported value "+e[w])}h.push(E),d+=E.length,b.push(N),g+=N.length,++l}for(t[2][0].data=Pr(l);w<t[7][0].data.length/2;++w)u.setUint16(w*2,65535,!0),m.setUint16(w*2,65535,!0);return t[6][0].data=pf(h),t[3][0].data=pf(b),l}function zge(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=_o(n["!ref"]);r.s.r=r.s.c=0;var a=!1;r.e.c>9&&(a=!0,r.e.c=9),r.e.r>49&&(a=!0,r.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Rn(r)));var s=py(n,{range:r,header:1}),i=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(X){typeof X=="string"&&i.push(X)})});var o={},l=[],u=ln.read(e.numbers,{type:"base64"});u.FileIndex.map(function(K,X){return[K,u.FullPaths[X]]}).forEach(function(K){var X=K[0],te=K[1];if(X.type==2&&X.name.match(/\.iwa/)){var le=X.content,ye=Nl(le),Ce=Bl(ye);Ce.forEach(function(_e){l.push(_e.id),o[_e.id]={deps:[],location:te,type:Pa(_e.messages[0].meta[1][0].data)}})}}),l.sort(function(K,X){return K-X});var d=l.filter(function(K){return K>1}).map(function(K){return[K,Pr(K)]});u.FileIndex.map(function(K,X){return[K,u.FullPaths[X]]}).forEach(function(K){var X=K[0];if(K[1],!!X.name.match(/\.iwa/)){var te=Bl(Nl(X.content));te.forEach(function(le){le.messages.forEach(function(ye){d.forEach(function(Ce){le.messages.some(function(_e){return Pa(_e.meta[1][0].data)!=11006&&kge(_e.data,Ce[1])})&&o[Ce[0]].deps.push(le.id)})})})}});for(var h=ln.find(u,o[1].location),m=Bl(Nl(h.content)),g,b=0;b<m.length;++b){var w=m[b];w.id==1&&(g=w)}var E=Ii(Sr(g.messages[0].data)[1][0].data);for(h=ln.find(u,o[E].location),m=Bl(Nl(h.content)),b=0;b<m.length;++b)w=m[b],w.id==E&&(g=w);for(E=Ii(Sr(g.messages[0].data)[2][0].data),h=ln.find(u,o[E].location),m=Bl(Nl(h.content)),b=0;b<m.length;++b)w=m[b],w.id==E&&(g=w);for(E=Ii(Sr(g.messages[0].data)[2][0].data),h=ln.find(u,o[E].location),m=Bl(Nl(h.content)),b=0;b<m.length;++b)w=m[b],w.id==E&&(g=w);var N=Sr(g.messages[0].data);{N[6][0].data=Pr(r.e.r+1),N[7][0].data=Pr(r.e.c+1);var I=Ii(N[46][0].data),k=ln.find(u,o[I].location),U=Bl(Nl(k.content));{for(var P=0;P<U.length&&U[P].id!=I;++P);if(U[P].id!=I)throw"Bad ColumnRowUIDMapArchive";var D=Sr(U[P].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var _=0;_<=r.e.c;++_){var B=[];B[1]=B[2]=[{type:0,data:Pr(_+420690)}],D[1].push({type:2,data:ri(B)}),D[2].push({type:0,data:Pr(_)}),D[3].push({type:0,data:Pr(_)})}D[4]=[],D[5]=[],D[6]=[];for(var T=0;T<=r.e.r;++T)B=[],B[1]=B[2]=[{type:0,data:Pr(T+726270)}],D[4].push({type:2,data:ri(B)}),D[5].push({type:0,data:Pr(T)}),D[6].push({type:0,data:Pr(T)});U[P].messages[0].data=ri(D)}k.content=E0(C0(U)),k.size=k.content.length,delete N[46];var O=Sr(N[4][0].data);{O[7][0].data=Pr(r.e.r+1);var R=Sr(O[1][0].data),L=Ii(R[2][0].data);k=ln.find(u,o[L].location),U=Bl(Nl(k.content));{if(U[0].id!=L)throw"Bad HeaderStorageBucket";var Q=Sr(U[0].messages[0].data);for(T=0;T<s.length;++T){var z=Sr(Q[2][0].data);z[1][0].data=Pr(T),z[4][0].data=Pr(s[T].length),Q[2][T]={type:Q[2][0].type,data:ri(z)}}U[0].messages[0].data=ri(Q)}k.content=E0(C0(U)),k.size=k.content.length;var ie=Ii(O[2][0].data);k=ln.find(u,o[ie].location),U=Bl(Nl(k.content));{if(U[0].id!=ie)throw"Bad HeaderStorageBucket";for(Q=Sr(U[0].messages[0].data),_=0;_<=r.e.c;++_)z=Sr(Q[2][0].data),z[1][0].data=Pr(_),z[4][0].data=Pr(r.e.r+1),Q[2][_]={type:Q[2][0].type,data:ri(z)};U[0].messages[0].data=ri(Q)}k.content=E0(C0(U)),k.size=k.content.length;var J=Ii(O[4][0].data);(function(){for(var K=ln.find(u,o[J].location),X=Bl(Nl(K.content)),te,le=0;le<X.length;++le){var ye=X[le];ye.id==J&&(te=ye)}var Ce=Sr(te.messages[0].data);{Ce[3]=[];var _e=[];i.forEach(function(se,Re){_e[1]=[{type:0,data:Pr(Re)}],_e[2]=[{type:0,data:Pr(1)}],_e[3]=[{type:2,data:Nge(se)}],Ce[3].push({type:2,data:ri(_e)})})}te.messages[0].data=ri(Ce);var Ie=C0(X),xe=E0(Ie);K.content=xe,K.size=K.content.length})();var ee=Sr(O[3][0].data);{var ae=ee[1][0];delete ee[2];var q=Sr(ae.data);{var Y=Ii(q[2][0].data);(function(){for(var K=ln.find(u,o[Y].location),X=Bl(Nl(K.content)),te,le=0;le<X.length;++le){var ye=X[le];ye.id==Y&&(te=ye)}var Ce=Sr(te.messages[0].data);{delete Ce[6],delete ee[7];var _e=new Uint8Array(Ce[5][0].data);Ce[5]=[];for(var Ie=0,xe=0;xe<=r.e.r;++xe){var se=Sr(_e);Ie+=Vge(se,s[xe],i),se[1][0].data=Pr(xe),Ce[5].push({data:ri(se),type:2})}Ce[1]=[{type:0,data:Pr(r.e.c+1)}],Ce[2]=[{type:0,data:Pr(r.e.r+1)}],Ce[3]=[{type:0,data:Pr(Ie)}],Ce[4]=[{type:0,data:Pr(r.e.r+1)}]}te.messages[0].data=ri(Ce);var Re=C0(X),et=E0(Re);K.content=et,K.size=K.content.length})()}ae.data=ri(q)}O[3][0].data=ri(ee)}N[4][0].data=ri(O)}g.messages[0].data=ri(N);var Ae=C0(m),j=E0(Ae);return h.content=j,h.size=h.content.length,u}function O7(t){return function(n){for(var r=0;r!=t.length;++r){var a=t[r];n[a[0]]===void 0&&(n[a[0]]=a[1]),a[2]==="n"&&(n[a[0]]=Number(n[a[0]]))}}}function P4(t){O7([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function j4(t){O7([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Gge(t){return Yn.WS.indexOf(t)>-1?"sheet":t==Yn.CS?"chart":t==Yn.DS?"dialog":t==Yn.MS?"macro":t&&t.length?t:"sheet"}function qge(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,Gge(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Kge(t,e,n,r,a,s,i,o,l,u,d,h){try{s[r]=Lg(Jo(t,n,!0),e);var m=fs(t,e),g;switch(o){case"sheet":g=mpe(m,e,a,l,s[r],u,d,h);break;case"chart":if(g=ppe(m,e,a,l,s[r],u,d,h),!g||!g["!drawel"])break;var b=Ag(g["!drawel"].Target,e),w=cx(b),E=nfe(Jo(t,b,!0),Lg(Jo(t,w,!0),b)),N=Ag(E,b),I=cx(N);g=Vme(Jo(t,N,!0),N,l,Lg(Jo(t,I,!0),N),u,g);break;case"macro":g=gpe(m,e,a,l,s[r],u,d,h);break;case"dialog":g=xpe(m,e,a,l,s[r],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=g;var k=[];s&&s[r]&&ja(s[r]).forEach(function(U){var P="";if(s[r][U].Type==Yn.CMNT){P=Ag(s[r][U].Target,e);var D=bpe(fs(t,P,!0),P,l);if(!D||!D.length)return;i6(g,D,!1)}s[r][U].Type==Yn.TCMNT&&(P=Ag(s[r][U].Target,e),k=k.concat(afe(fs(t,P,!0),l)))}),k&&k.length&&i6(g,k,!0,l.people||[])}catch(U){if(l.WTF)throw U}}function Sl(t){return t.charAt(0)=="/"?t.slice(1):t}function Wge(t,e){if(Jm(),e=e||{},P4(e),kl(t,"META-INF/manifest.xml")||kl(t,"objectdata.xml"))return g6(t,e);if(kl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof aE<"u"){if(t.FileIndex)return aE(t);var n=ln.utils.cfb_new();return TF(t).forEach(function(z){jn(n,z,sle(t,z))}),aE(n)}throw new Error("Unsupported NUMBERS file")}if(!kl(t,"[Content_Types].xml"))throw kl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):kl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=TF(t),a=Xle(Jo(t,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",fs(t,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!fs(t,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(Ug=[],a.sst)try{Ug=wpe(fs(t,Sl(a.sst)),a.sst,e)}catch(z){if(e.WTF)throw z}e.cellStyles&&a.themes.length&&(l=ype(Jo(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=vpe(fs(t,Sl(a.style)),a.style,l,e))}a.links.map(function(z){try{var ie=Lg(Jo(t,cx(Sl(z))),z);return Epe(fs(t,Sl(z)),ie,z,e)}catch{}});var d=hpe(fs(t,Sl(a.workbooks[0])),a.workbooks[0],e),h={},m="";a.coreprops.length&&(m=fs(t,Sl(a.coreprops[0]),!0),m&&(h=BP(m)),a.extprops.length!==0&&(m=fs(t,Sl(a.extprops[0]),!0),m&&sce(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(m=Jo(t,Sl(a.custprops[0]),!0),m&&(g=oce(m,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ie){return ie.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var w={};e.bookDeps&&a.calcchain&&(w=Cpe(fs(t,Sl(a.calcchain)),a.calcchain));var E=0,N={},I,k;{var U=d.Sheets;h.Worksheets=U.length,h.SheetNames=[];for(var P=0;P!=U.length;++P)h.SheetNames[P]=U[P].name}var D=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),B=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");kl(t,B)||(B="xl/_rels/workbook."+D+".rels");var T=Lg(Jo(t,B,!0),B.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=_pe(fs(t,Sl(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=ife(fs(t,Sl(a.people[0])),e)),T&&(T=qge(T,d.Sheets));var O=fs(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var R="sheet";if(T&&T[E]?(I="xl/"+T[E][1].replace(/[\/]?xl\//,""),kl(t,I)||(I=T[E][1]),kl(t,I)||(I=B.replace(/_rels\/.*$/,"")+T[E][1]),R=T[E][2]):(I="xl/worksheets/sheet"+(E+1-O)+"."+D,I=I.replace(/sheet0\./,"sheet.")),k=I.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(E!=e.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var L=!1,Q=0;Q!=e.sheets.length;++Q)typeof e.sheets[Q]=="number"&&e.sheets[Q]==E&&(L=1),typeof e.sheets[Q]=="string"&&e.sheets[Q].toLowerCase()==h.SheetNames[E].toLowerCase()&&(L=1);if(!L)continue e}}Kge(t,I,k,h.SheetNames[E],E,N,i,R,e,d,l,u)}return b={Directory:a,Workbook:d,Props:h,Custprops:g,Deps:w,Sheets:i,SheetNames:h.SheetNames,Strings:Ug,Styles:u,Themes:l,SSF:ca(gn)},e&&e.bookFiles&&(t.files?(b.keys=r,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(z,ie){z=z.replace(/^Root Entry[\/]/,""),b.keys.push(z),b.files[z]=t.FileIndex[ie]}))),e&&e.bookVBA&&(a.vba.length>0?b.vbaraw=fs(t,Sl(a.vba[0]),!0):a.defaults&&a.defaults.bin===hfe&&(b.vbaraw=fs(t,"xl/vbaProject.bin",!0))),b}function $ge(t,e){var n=e||{},r="Workbook",a=ln.find(t,r);try{if(r="/!DataSpaces/Version",a=ln.find(t,r),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(_Ae(a.content),r="/!DataSpaces/DataSpaceMap",a=ln.find(t,r),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=TAe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=ln.find(t,r),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=BAe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=ln.find(t,r),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);kAe(a.content)}catch{}if(r="/EncryptionInfo",a=ln.find(t,r),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=IAe(a.content);if(r="/EncryptedPackage",a=ln.find(t,r),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,n.password||"",n);throw new Error("File is password-protected")}function Jge(t,e){return e.bookType=="ods"?j7(t,e):e.bookType=="numbers"?zge(t,e):e.bookType=="xlsb"?Yge(t,e):Xge(t,e)}function Yge(t,e){J0=1024,t&&!t.SSF&&(t.SSF=ca(gn)),t&&t.SSF&&(Jm(),_w(t.SSF),e.revssf=Tw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Mg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=f7.indexOf(e.bookType)>-1,a=E4();j4(e=e||{});var s=u4(),i="",o=0;if(e.cellXfs=[],Ef(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",jn(s,i,NP(t.Props,e)),a.coreprops.push(i),jr(e.rels,2,i,Yn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,jn(s,i,FP(t.Props)),a.extprops.push(i),jr(e.rels,3,i,Yn.EXT_PROPS),t.Custprops!==t.Props&&ja(t.Custprops||{}).length>0&&(i="docProps/custom.xml",jn(s,i,RP(t.Custprops)),a.custprops.push(i),jr(e.rels,4,i,Yn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,jn(s,i,Tpe(o-1,i,e,t,d)),a.sheets.push(i),jr(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Yn.WS[0])}if(h){var g=h["!comments"],b=!1,w="";g&&g.length>0&&(w="xl/comments"+o+"."+n,jn(s,w,kpe(g,w)),a.comments.push(w),jr(d,-1,"../comments"+o+"."+n,Yn.CMNT),b=!0),h["!legacy"]&&b&&jn(s,"xl/drawings/vmlDrawing"+o+".vml",A7(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&jn(s,cx(i),dm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,jn(s,i,Npe(e.Strings,i,e)),a.strs.push(i),jr(e.wbrels,-1,"sharedStrings."+n,Yn.SST)),i="xl/workbook."+n,jn(s,i,Spe(t,i)),a.workbooks.push(i),jr(e.rels,1,i,Yn.WB),i="xl/theme/theme1.xml",jn(s,i,k4(t.Themes,e)),a.themes.push(i),jr(e.wbrels,-1,"theme/theme1.xml",Yn.THEME),i="xl/styles."+n,jn(s,i,Bpe(t,i,e)),a.styles.push(i),jr(e.wbrels,-1,"styles."+n,Yn.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",jn(s,i,t.vbaraw),a.vba.push(i),jr(e.wbrels,-1,"vbaProject.bin",Yn.VBA)),i="xl/metadata."+n,jn(s,i,Ipe(i)),a.metadata.push(i),jr(e.wbrels,-1,"metadata."+n,Yn.XLMETA),jn(s,"[Content_Types].xml",SP(a,e)),jn(s,"_rels/.rels",dm(e.rels)),jn(s,"xl/_rels/workbook."+n+".rels",dm(e.wbrels)),delete e.revssf,delete e.ssf,s}function Xge(t,e){J0=1024,t&&!t.SSF&&(t.SSF=ca(gn)),t&&t.SSF&&(Jm(),_w(t.SSF),e.revssf=Tw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Mg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=f7.indexOf(e.bookType)>-1,a=E4();j4(e=e||{});var s=u4(),i="",o=0;if(e.cellXfs=[],Ef(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",jn(s,i,NP(t.Props,e)),a.coreprops.push(i),jr(e.rels,2,i,Yn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,jn(s,i,FP(t.Props)),a.extprops.push(i),jr(e.rels,3,i,Yn.EXT_PROPS),t.Custprops!==t.Props&&ja(t.Custprops||{}).length>0&&(i="docProps/custom.xml",jn(s,i,RP(t.Custprops)),a.custprops.push(i),jr(e.rels,4,i,Yn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,jn(s,i,E7(o-1,e,t,h)),a.sheets.push(i),jr(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Yn.WS[0])}if(m){var b=m["!comments"],w=!1,E="";if(b&&b.length>0){var N=!1;b.forEach(function(I){I[1].forEach(function(k){k.T==!0&&(N=!0)})}),N&&(E="xl/threadedComments/threadedComment"+o+"."+n,jn(s,E,sfe(b,d,e)),a.threadedcomments.push(E),jr(h,-1,"../threadedComments/threadedComment"+o+"."+n,Yn.TCMNT)),E="xl/comments"+o+"."+n,jn(s,E,d7(b)),a.comments.push(E),jr(h,-1,"../comments"+o+"."+n,Yn.CMNT),w=!0}m["!legacy"]&&w&&jn(s,"xl/drawings/vmlDrawing"+o+".vml",A7(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&jn(s,cx(i),dm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,jn(s,i,ZP(e.Strings,e)),a.strs.push(i),jr(e.wbrels,-1,"sharedStrings."+n,Yn.SST)),i="xl/workbook."+n,jn(s,i,N7(t)),a.workbooks.push(i),jr(e.rels,1,i,Yn.WB),i="xl/theme/theme1.xml",jn(s,i,k4(t.Themes,e)),a.themes.push(i),jr(e.wbrels,-1,"theme/theme1.xml",Yn.THEME),i="xl/styles."+n,jn(s,i,o7(t,e)),a.styles.push(i),jr(e.wbrels,-1,"styles."+n,Yn.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",jn(s,i,t.vbaraw),a.vba.push(i),jr(e.wbrels,-1,"vbaProject.bin",Yn.VBA)),i="xl/metadata."+n,jn(s,i,u7()),a.metadata.push(i),jr(e.wbrels,-1,"metadata."+n,Yn.XLMETA),d.length>1&&(i="xl/persons/person.xml",jn(s,i,ofe(d)),a.people.push(i),jr(e.wbrels,-1,"persons/person.xml",Yn.PEOPLE)),jn(s,"[Content_Types].xml",SP(a,e)),jn(s,"_rels/.rels",dm(e.rels)),jn(s,"xl/_rels/workbook."+n+".rels",dm(e.wbrels)),delete e.revssf,delete e.ssf,s}function O4(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=tl(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function Zge(t,e){return ln.find(t,"EncryptedPackage")?$ge(t,e):R7(t,e)}function exe(t,e){var n,r=t,a=e||{};return a.type||(a.type=qn&&Buffer.isBuffer(t)?"buffer":"base64"),n=tP(r,a),Wge(n,a)}function Q7(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return r5(t.slice(n),e);default:break e}return km.to_workbook(t,e)}function txe(t,e){var n="",r=O4(t,e);switch(e.type){case"base64":n=tl(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=Sh(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=Jr(n)),e.type="binary",Q7(n,e)}function nxe(t,e){var n=t;return e.type=="base64"&&(n=tl(n)),n=rx.utils.decode(1200,n.slice(2),"str"),e.type="binary",Q7(n,e)}function rxe(t){return t.match(/[^\x00-\x7F]/)?vu(t):t}function sE(t,e,n,r){return r?(n.type="string",km.to_workbook(t,n)):km.to_workbook(e,n)}function px(t,e){s4();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return px(new Uint8Array(t),(n=ca(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,a=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),hm={},n.dateNF&&(hm.dateNF=n.dateNF),n.type||(n.type=qn&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=qn?"buffer":"binary",r=Yoe(t),typeof Uint8Array<"u"&&!qn&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,r=rxe(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return n=ca(n),n.type="array",px(i4(r),n)}switch((a=O4(r,n))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Zge(ln.read(r,n),n);break;case 9:if(a[1]<=8)return R7(r,n);break;case 60:return r5(r,n);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return lAe(r,n);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return YP.to_workbook(r,n);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?exe(r,n):sE(t,r,n,s);case 239:return a[3]===60?r5(r,n):sE(t,r,n,s);case 255:if(a[1]===254)return nxe(r,n);if(a[1]===0&&a[2]===2&&a[3]===0)return hh.to_workbook(r,n);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return hh.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return n5.to_workbook(r,n);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return a7.to_workbook(r,n);break;case 10:case 13:case 32:return txe(r,n);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return oAe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?n5.to_workbook(r,n):sE(t,r,n,s)}function H7(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Hx(e.file,ln.write(t,{type:qn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ln.write(t,e)}function axe(t,e){var n=ca(e||{}),r=Jge(t,n);return sxe(r,n)}function sxe(t,e){var n={},r=qn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?ln.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(Ew(a))}return e.password&&typeof encrypt_agile<"u"?H7(encrypt_agile(a,e.password),e):e.type==="file"?Hx(e.file,a):e.type=="string"?Jr(a):a}function ixe(t,e){var n=e||{},r=rge(t,n);return H7(r,n)}function mu(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return ax(vu(r));case"binary":return vu(r);case"string":return t;case"file":return Hx(e.file,r,"utf8");case"buffer":return qn?OA(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):mu(r,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function oxe(t,e){switch(e.type){case"base64":return ax(t);case"binary":return t;case"string":return t;case"file":return Hx(e.file,t,"binary");case"buffer":return qn?OA(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Ev(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?ax(n):e.type=="string"?Jr(n):n;case"file":return Hx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function V7(t,e){s4(),Zme(t);var n=ca(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=V7(t,n);return n.type="array",Ew(r)}var a=0;if(n.sheet&&(typeof n.sheet=="number"?a=n.sheet:a=t.SheetNames.indexOf(n.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return mu(Jpe(t,n),n);case"slk":case"sylk":return mu(JP.from_sheet(t.Sheets[t.SheetNames[a]],n),n);case"htm":case"html":return mu(L7(t.Sheets[t.SheetNames[a]],n),n);case"txt":return oxe(z7(t.Sheets[t.SheetNames[a]],n),n);case"csv":return mu(H4(t.Sheets[t.SheetNames[a]],n),n,"\uFEFF");case"dif":return mu(YP.from_sheet(t.Sheets[t.SheetNames[a]],n),n);case"dbf":return Ev(n5.from_sheet(t.Sheets[t.SheetNames[a]],n),n);case"prn":return mu(km.from_sheet(t.Sheets[t.SheetNames[a]],n),n);case"rtf":return mu(a7.from_sheet(t.Sheets[t.SheetNames[a]],n),n);case"eth":return mu(XP.from_sheet(t.Sheets[t.SheetNames[a]],n),n);case"fods":return mu(j7(t,n),n);case"wk1":return Ev(hh.sheet_to_wk1(t.Sheets[t.SheetNames[a]],n),n);case"wk3":return Ev(hh.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Ev(D7(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),ixe(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return axe(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function lxe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Q4(t,e,n){var r={};return r.type="file",r.file=e,lxe(r),V7(t,r)}function cxe(t,e,n,r,a,s,i,o){var l=es(n),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch{m.__rowNum__=n}else m.__rowNum__=n;if(!i||t[n])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[n][g]:t[r[g]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;s[g]!=null&&(m[s[g]]=u);continue}var w=b.v;switch(b.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(w==null)if(b.t=="e"&&w===null)m[s[g]]=null;else if(u!==void 0)m[s[g]]=u;else if(d&&w===null)m[s[g]]=null;else continue;else m[s[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?w:kA(b,w,o);w!=null&&(h=!1)}}return{row:m,isempty:h}}function py(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof d){case"string":l=vr(d);break;case"number":l=vr(t["!ref"]),l.s.r=d;break;default:l=d}r>0&&(a=0);var h=es(l.s.r),m=[],g=[],b=0,w=0,E=Array.isArray(t),N=l.s.r,I=0,k={};E&&!t[N]&&(t[N]=[]);var U=u.skipHidden&&t["!cols"]||[],P=u.skipHidden&&t["!rows"]||[];for(I=l.s.c;I<=l.e.c;++I)if(!(U[I]||{}).hidden)switch(m[I]=ba(I),n=E?t[N][I]:t[m[I]+h],r){case 1:s[I]=I-l.s.c;break;case 2:s[I]=m[I];break;case 3:s[I]=u.header[I-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=i=kA(n,null,u),w=k[i]||0,!w)k[i]=1;else{do o=i+"_"+w++;while(k[o]);k[i]=w,k[o]=1}s[I]=o}for(N=l.s.r+a;N<=l.e.r;++N)if(!(P[N]||{}).hidden){var D=cxe(t,l,N,m,r,s,E,u);(D.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=D.row)}return g.length=b,g}var b6=/"/g;function uxe(t,e,n,r,a,s,i,o){for(var l=!0,u=[],d="",h=es(n),m=e.s.c;m<=e.e.c;++m)if(r[m]){var g=o.dense?(t[n]||[])[m]:t[r[m]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:kA(g,null,o));for(var b=0,w=0;b!==d.length;++b)if((w=d.charCodeAt(b))===a||w===s||w===34||o.forceQuotes){d='"'+d.replace(b6,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(b6,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function H4(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var a=vr(t["!ref"]),s=r.FS!==void 0?r.FS:",",i=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];r.dense=Array.isArray(t);for(var m=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(m[b]||{}).hidden||(h[b]=ba(b));for(var w=0,E=a.s.r;E<=a.e.r;++E)(g[E]||{}).hidden||(d=uxe(t,a,E,h,i,l,s,r),d!=null&&(r.strip&&(d=d.replace(u,"")),(d||r.blankrows!==!1)&&n.push((w++?o:"")+d)));return delete r.dense,n.join("")}function z7(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=H4(t,e);return n}function Axe(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var a=vr(t["!ref"]),s="",i=[],o,l=[],u=Array.isArray(t);for(o=a.s.c;o<=a.e.c;++o)i[o]=ba(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=es(d),o=a.s.c;o<=a.e.c;++o)if(e=i[o]+s,n=u?(t[d]||[])[o]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function G7(t,e,n){var r=n||{},a=+!r.skipHeader,s=t||{},i=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?Ca(r.origin):r.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+a}};if(s["!ref"]){var h=vr(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var m=r.header||[],g=0;e.forEach(function(w,E){ja(w).forEach(function(N){(g=m.indexOf(N))==-1&&(m[g=m.length]=N);var I=w[N],k="z",U="",P=wn({c:o+g,r:i+E+a});u=gx(s,P),I&&typeof I=="object"&&!(I instanceof Date)?s[P]=I:(typeof I=="number"?k="n":typeof I=="boolean"?k="b":typeof I=="string"?k="s":I instanceof Date?(k="d",r.cellDates||(k="n",I=Fs(I)),U=r.dateNF||gn[14]):I===null&&r.nullError&&(k="e",I=0),u?(u.t=k,u.v=I,delete u.w,delete u.R,U&&(u.z=U)):s[P]=u={t:k,v:I},U&&(u.z=U))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var b=es(i);if(a)for(g=0;g<m.length;++g)s[ba(g+o)+b]={t:"s",v:m[g]};return s["!ref"]=Rn(d),s}function dxe(t,e){return G7(null,t,e)}function gx(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=Ca(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?gx(t,wn(e)):gx(t,wn({r:e,c:n||0}))}function fxe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function V4(){return{SheetNames:[],Sheets:{}}}function z4(t,e,n,r){var a=1;if(!n)for(;a<=65535&&t.SheetNames.indexOf(n="Sheet"+a)!=-1;++a,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||n;for(++a;a<=65535&&t.SheetNames.indexOf(n=i+a)!=-1;++a);}if(B7(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function hxe(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=fxe(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function mxe(t,e){return t.z=e,t}function q7(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function pxe(t,e,n){return q7(t,"#"+e,n)}function gxe(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function xxe(t,e,n,r){for(var a=typeof e!="string"?e:vr(e),s=typeof e=="string"?e:Rn(e),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=gx(t,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=n,r&&(l.D=!0))}return t}var Ll={encode_col:ba,encode_row:es,encode_cell:wn,encode_range:Rn,decode_col:x4,decode_row:g4,split_cell:Nle,decode_cell:Ca,decode_range:_o,format_cell:kA,sheet_add_aoa:vP,sheet_add_json:G7,sheet_add_dom:U7,aoa_to_sheet:Ym,json_to_sheet:dxe,table_to_sheet:M7,table_to_book:_ge,sheet_to_csv:H4,sheet_to_txt:z7,sheet_to_json:py,sheet_to_html:L7,sheet_to_formulae:Axe,sheet_to_row_object_array:py,sheet_get_cell:gx,book_new:V4,book_append_sheet:z4,book_set_sheet_visibility:hxe,cell_set_number_format:mxe,cell_set_hyperlink:q7,cell_set_internal_link:pxe,cell_add_comment:gxe,sheet_set_array_formula:xxe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const vxe=async()=>{try{const t=ts(xr(hr,"apiLogs"),Ws("timestamp","desc"));return(await Xi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener logs de API:",t),new Error("No se pudieron cargar los logs de API")}},yxe=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let r=0,a=0;const s=[];for(const l of n)try{const u=xr(hr,l),d=await Xi(u),h=d.size;r+=h,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&m++}),a+=m}catch(u){console.warn(`Error accediendo a coleccin ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=xr(hr,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=ts(l,bo("timestamp",">=",u.toISOString()),Ws("timestamp","desc")),h=await Xi(d),m={};h.docs.forEach(g=>{const b=g.data(),w=new Date(b.timestamp).toLocaleDateString("es-CL");m[w]=(m[w]||0)+1}),Object.entries(m).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:r,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadsticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},C6=500,_0=({title:t,value:e,description:n,alert:r})=>A.jsxs("div",{className:`p-5 rounded-xl border ${r?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),A.jsx("p",{className:`text-3xl font-bold mt-2 ${r?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),n&&A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),iE=({title:t,data:e,colorClass:n})=>{const r=Z.useMemo(()=>Math.max(...e.map(a=>a.value),1),[e]);return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),A.jsx("div",{className:"space-y-4",children:e.length>0?e.map(a=>A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),A.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:A.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/r*100}%`}})})]},a.label)):A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},wxe=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState(!1),[a,s]=Z.useState(null),[i,o]=Z.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}),l=Z.useCallback(async()=>{r(!0);try{const g=await vxe();e(g),s(null)}catch(g){console.error("Error al cargar logs de la API desde Firestore:",g),s("No se pudieron cargar los logs de API desde la nube.")}finally{r(!1)}},[]),u=Z.useCallback(async()=>{try{const g=await yxe();o(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}},[]);Z.useEffect(()=>{l(),u();const g=setInterval(()=>{l(),u()},300*1e3);return()=>clearInterval(g)},[l,u]);const{stats:d,userStats:h,moduleStats:m}=Z.useMemo(()=>{const g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),w=b-g.getDay()*24*60*60*1e3,E=new Date(g.getFullYear(),g.getMonth(),1).getTime(),N={today:0,week:0,month:0},I={},k={};t.forEach(D=>{const _=new Date(D.timestamp).getTime();_>=b&&N.today++,_>=w&&N.week++,_>=E&&N.month++,I[D.userId]||(I[D.userId]={email:D.userEmail,today:0,month:0,total:0}),I[D.userId].total++,_>=b&&I[D.userId].today++,_>=E&&I[D.userId].month++,k[D.module]=(k[D.module]||0)+1});const U=Object.values(I).sort((D,_)=>_.total-D.total),P=Object.entries(k).map(([D,_])=>({label:D,value:_})).sort((D,_)=>_.value-D.value);return{stats:N,userStats:U,moduleStats:P}},[t]);return A.jsxs("div",{className:"space-y-8",children:[n&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas desde la nube..."}),a&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),!n&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsx(_0,{title:"Llamadas Hoy",value:n?"--":d.today,description:`Lmite recomendado: ${C6}`,alert:d.today>C6}),A.jsx(_0,{title:"Llamadas esta Semana",value:n?"--":d.week}),A.jsx(_0,{title:"Llamadas este Mes",value:n?"--":d.month})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[A.jsx(iE,{title:"Uso por Mdulo",data:m,colorClass:"bg-sky-500"}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),A.jsx("div",{className:"overflow-x-auto max-h-96",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),A.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),A.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),A.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&h.length>0?h.map(g=>A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:g.email}),A.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.today}),A.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.month}),A.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:g.total})]},g.email)):A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:n?"Cargando...":"No hay registros."})})})]})})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore en tiempo real."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsx(_0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),A.jsx(_0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),A.jsx(_0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[A.jsx(iE,{title:"Actividad por Coleccin",data:i.collectionsActivity,colorClass:"bg-green-500"}),A.jsx(iE,{title:"Actividad Diaria (ltimos 7 das)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},Rw=xr(hr,"usuarios");async function Dw(){return(await Xi(Rw)).docs.map(e=>({id:e.id,...e.data()}))}async function oE(t){await p8(vs(Rw,t.email),t)}async function E6(t,e){await zm(vs(Rw,t),e)}async function bxe(t){await wf(vs(Rw,t))}const _6=Object.values(rn),Cxe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.629 5.629l-2.371 2.37-1.414-1.414 2.371-2.371A6 6 0 0115 7zm-3.707 5.293L6 17.586V20h2.414l5.293-5.293a1 1 0 00-1.414-1.414z"})}),S6=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Exe=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState(!1),[a,s]=Z.useState("Usuarios"),[i,o]=Z.useState({nombreCompleto:"",email:"",rut:"",profile:rn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=Z.useState(null),[d,h]=Z.useState(""),[m,g]=Z.useState(""),[b,w]=Z.useState(""),[E,N]=Z.useState(null),[I,k]=Z.useState(null),[U,P]=Z.useState(null),D=Z.useCallback(async()=>{r(!0);try{const q=await Dw();e(q)}catch(q){console.error("Error al cargar usuarios desde Firestore",q),N("No se pudieron cargar los usuarios desde la nube.")}finally{r(!1)}},[]);Z.useEffect(()=>{D()},[D]);const _=Z.useCallback(q=>{const{name:Y,value:Ae}=q.target;o(j=>({...j,[Y]:Ae,curso:Y==="profile"&&Ae!==rn.ESTUDIANTE?"":j.curso}))},[]),B=Z.useCallback((q,Y)=>{o(Ae=>{const j=Ae[q]||[],K=j.includes(Y)?j.filter(X=>X!==Y):[...j,Y];return{...Ae,[q]:K}})},[]),T=Z.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:rn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),N(null)},[]),O=Z.useCallback(async q=>{var Re,et;q.preventDefault();const{nombreCompleto:Y,email:Ae,profile:j,curso:K,cursos:X,asignaturas:te}=i;if(!Y.trim()||!Ae.trim()){N("Nombre Completo y Email son obligatorios.");return}if(j===rn.ESTUDIANTE&&!K){N('El campo "Curso" es obligatorio para el perfil de Estudiante.');return}const le=j===rn.ESTUDIANTE?S6(K||""):void 0,ye=j===rn.PROFESORADO?X:void 0,Ce=j===rn.PROFESORADO?te:void 0,_e=(Re=i.password)!=null&&Re.trim()?i.password.trim():void 0,Ie=(et=i.rut)!=null&&et.trim()?i.rut.trim():void 0,se={...{nombreCompleto:i.nombreCompleto,email:i.email,profile:i.profile}};_e!==void 0&&(se.password=_e),Ie!==void 0&&(se.rut=Ie),le!==void 0&&(se.curso=le),ye!==void 0&&(se.cursos=ye),Ce!==void 0&&(se.asignaturas=Ce);try{l?await E6(i.email,se):await oE(se),await D(),T()}catch(De){console.error("Error al guardar usuario:",De),N("Error al guardar el usuario en la nube.")}},[i,l,D,T]),R=Z.useCallback(q=>{window.scrollTo({top:0,behavior:"smooth"}),u(q.id),o({nombreCompleto:q.nombreCompleto,email:q.email,rut:q.rut||"",profile:q.profile,password:"",curso:q.curso||"",cursos:q.cursos||[],asignaturas:q.asignaturas||[]})},[]),L=Z.useCallback(async q=>{if(window.confirm("Est seguro de que desea eliminar este usuario?"))try{await bxe(q),await D()}catch(Y){console.error("Error al eliminar usuario:",Y),N("No se pudo borrar el usuario en la nube.")}},[D]),Q=async()=>{if(window.confirm(`ADVERTENCIA: Esta accin es irreversible.

Est seguro de que desea restablecer las contraseas de TODOS los usuarios a la contrasea por defecto ('recoleta')?

Cualquier contrasea personalizada ser eliminada.`))try{await Promise.all(t.map(Y=>E6(Y.email,{password:void 0}))),await D(),alert("Todas las contraseas han sido restablecidas exitosamente a 'recoleta'.")}catch(Y){console.error("Error al restablecer contraseas:",Y),N("Error al restablecer contraseas en la nube.")}},z=Z.useMemo(()=>Array.from(new Set(t.filter(q=>q.profile===rn.ESTUDIANTE&&q.curso).map(q=>q.curso))).sort(),[t]),ie=Z.useMemo(()=>t.filter(q=>(d===""||q.nombreCompleto.toLowerCase().includes(d.toLowerCase())||q.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||q.profile===m)&&(b===""||q.curso===b)),[t,d,m,b]),J=async q=>{var j;const Y=(j=q.target.files)==null?void 0:j[0];if(!Y)return;k({message:"Procesando archivo de estudiantes...",isError:!1});const Ae=new FileReader;Ae.onload=async K=>{var X;try{const te=new Uint8Array((X=K.target)==null?void 0:X.result),le=px(te,{type:"array"}),ye=le.SheetNames[0],Ce=le.Sheets[ye],_e=Ll.sheet_to_json(Ce);if(_e.length===0)throw new Error("El archivo Excel est vaco.");const Ie=Object.keys(_e[0]).map(Re=>Re.trim().toLowerCase());if(!Ie.includes("nombre")||!Ie.includes("correo")||!Ie.includes("curso"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo', y 'Curso'.");const xe={};Object.keys(_e[0]).forEach(Re=>{xe[Re.trim().toLowerCase()]=Re});const se=_e.map(Re=>{const et=Re[xe.nombre],De=Re[xe.correo],we=Re[xe.curso];return!et||!De||!we?null:{id:crypto.randomUUID(),nombreCompleto:String(et).trim(),email:String(De).trim(),profile:rn.ESTUDIANTE,curso:S6(String(we).trim())}}).filter(Re=>Re!==null&&!t.some(et=>et.email.toLowerCase()===Re.email.toLowerCase()));se.length>0&&(await Promise.all(se.map(Re=>oE(Re))),await D()),k({message:`Carga completada. Se agregaron ${se.length} nuevos estudiantes.`,isError:!1})}catch(te){k({message:`Error: ${te.message}`,isError:!0})}finally{q.target&&(q.target.value="")}},Ae.readAsArrayBuffer(Y)},ee=async q=>{var j;const Y=(j=q.target.files)==null?void 0:j[0];if(!Y)return;P({message:"Procesando archivo de personal...",isError:!1});const Ae=new FileReader;Ae.onload=async K=>{var X;try{const te=new Uint8Array((X=K.target)==null?void 0:X.result),le=px(te,{type:"array"}),ye=le.SheetNames[0],Ce=le.Sheets[ye],_e=Ll.sheet_to_json(Ce);if(_e.length===0)throw new Error("El archivo Excel est vaco.");const Ie=Object.keys(_e[0]).map(we=>we.trim().toLowerCase());if(!Ie.includes("nombre")||!Ie.includes("correo")||!Ie.includes("perfil"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo' y 'Perfil'.");const xe={};Object.keys(_e[0]).forEach(we=>{xe[we.trim().toLowerCase()]=we});const se=Ie.includes("curso");let Re=0;const et=_e.map(we=>{const ze=we[xe.nombre],nt=we[xe.correo],it=we[xe.perfil];if(!ze||!nt||!it)return null;const dt=String(it).trim();return dt===rn.ESTUDIANTE||!Object.values(rn).includes(dt)?(console.warn(`Perfil invlido o de estudiante omitido: ${dt}`),null):se&&we[xe.curso]?(console.warn(`Fila omitida: El perfil '${dt}' es para personal, pero se encontr una columna 'Curso' con datos. Use la carga de Estudiantes para este tipo de archivo.`),Re++,null):{id:crypto.randomUUID(),nombreCompleto:String(ze).trim(),email:String(nt).trim(),profile:dt}}).filter(we=>we!==null&&!t.some(ze=>ze.email.toLowerCase()===we.email.toLowerCase()));et.length>0&&(await Promise.all(et.map(we=>oE(we))),await D());let De=`Carga completada. Se agregaron ${et.length} nuevos miembros del personal.`;Re>0&&(De+=` Se omitieron ${Re} filas porque parecan ser de estudiantes (contenan una columna 'Curso'). Por favor, use la opcin 'Cargar Estudiantes' para ellas.`),P({message:De,isError:!1})}catch(te){P({message:`Error: ${te.message}`,isError:!0})}finally{q.target&&(q.target.value="")}},Ae.readAsArrayBuffer(Y)},ae="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),A.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&A.jsxs("div",{className:"space-y-8",children:[n&&A.jsx("div",{className:"text-center text-amber-600",children:"Cargando usuarios desde la nube..."}),E&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:E}),!n&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay usuarios registrados en la nube."}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),A.jsxs("form",{onSubmit:O,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),A.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:_,className:ae,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),A.jsx("input",{type:"email",name:"email",value:i.email,onChange:_,className:ae,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),A.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:_,placeholder:"Dejar en blanco para no cambiar",className:ae})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),A.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:_,placeholder:"12.345.678-9",className:ae})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),A.jsx("select",{name:"profile",value:i.profile,onChange:_,className:ae,required:!0,children:_6.map(q=>A.jsx("option",{value:q,children:q},q))})]}),i.profile===rn.ESTUDIANTE&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:i.curso,onChange:_,className:ae,required:!0,children:[A.jsx("option",{value:"",children:"Seleccione un curso"}),xs.map(q=>A.jsx("option",{value:q,children:q},q))]})]})]}),i.profile===rn.PROFESORADO&&A.jsxs("div",{className:"lg:col-span-3 mt-6 pt-6 border-t dark:border-slate-700",children:[A.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200",children:"Asignaciones de Profesor"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Cursos Asignados"}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:xs.map(q=>A.jsxs("label",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"checkbox",checked:(i.cursos||[]).includes(q),onChange:()=>B("cursos",q),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),A.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:q})]},q))})]}),A.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Asignaturas Asignadas"}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:Hl.map(q=>A.jsxs("label",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"checkbox",checked:(i.asignaturas||[]).includes(q),onChange:()=>B("asignaturas",q),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),A.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 truncate",title:q,children:q})]},q))})]})]})]}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center col-span-full pt-2",children:['Nota: La contrasea por defecto para todos los usuarios es "',A.jsx("strong",{children:"recoleta"}),'".']}),E&&A.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:E}),A.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&A.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cargas Masivas desde Excel"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[A.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Estudiantes"}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",A.jsx("strong",{children:"Nombre"}),", ",A.jsx("strong",{children:"Correo"}),", ",A.jsx("strong",{children:"Curso"}),"."]}),A.jsx("input",{type:"file",onChange:J,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),I&&A.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${I.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:I.message})]}),A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[A.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Personal (Profesores, etc.)"}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",A.jsx("strong",{children:"Nombre"}),", ",A.jsx("strong",{children:"Correo"}),", ",A.jsx("strong",{children:"Perfil"}),"."]}),A.jsx("input",{type:"file",onChange:ee,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),U&&A.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${U.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:U.message})]})]})]}),!n&&t.length>0&&A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:q=>h(q.target.value),className:ae}),A.jsxs("select",{value:m,onChange:q=>g(q.target.value),className:ae,children:[A.jsx("option",{value:"",children:"Filtrar por Perfil"}),_6.map(q=>A.jsx("option",{value:q,children:q},q))]}),A.jsxs("select",{value:b,onChange:q=>w(q.target.value),className:ae,children:[A.jsx("option",{value:"",children:"Filtrar por Curso"}),z.map(q=>A.jsx("option",{value:q,children:q},q))]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nombre Completo"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Email"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Perfil / Curso"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ie.map(q=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:q.nombreCompleto}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:q.email}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300",children:[q.profile," ",q.curso&&`(${q.curso})`]})}),A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[A.jsx("button",{onClick:()=>R(q),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),A.jsx("button",{onClick:()=>L(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},q.id))})]})})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Gestin de Contraseas Masivas"}),A.jsx("div",{className:"p-4 border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:A.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),A.jsx("div",{className:"ml-3",children:A.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:"Esta accin restablecer las contraseas de TODOS los usuarios a la contrasea por defecto ('recoleta'). selo con precaucin."})})]})}),A.jsx("div",{className:"mt-4",children:A.jsxs("button",{onClick:Q,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 flex items-center gap-2",children:[A.jsx(Cxe,{}),"Restablecer Todas las Contraseas"]})})]})]}),a==="Monitor de Uso"&&A.jsx(wxe,{})]})},T6="seguimientoDualRecords",_xe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Sxe=({record:t,onSave:e,onClose:n})=>{const[r,a]=Z.useState(t),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:m}=l.target;a(g=>({...g,[u]:h==="checkbox"?m:d}))},o=()=>{e(r)};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:n,children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[A.jsxs("div",{className:"p-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),A.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),A.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:r.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!r.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),A.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:r.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!r.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]})]})]}),A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),A.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:r.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!r.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),A.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:r.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!r.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]})]})]}),A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),A.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:r.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),A.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[A.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!r.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),A.jsx("span",{children:"Realizada"})]})]})]}),A.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[A.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),A.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:r.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),A.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:r.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),A.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Txe=()=>{const[t,e]=Z.useState([]),n=Z.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:uh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:TC[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[r,a]=Z.useState(n),[s,i]=Z.useState(null),[o,l]=Z.useState(""),[u,d]=Z.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[h,m]=Z.useState(null),[g,b]=Z.useState(null),[w,E]=Z.useState(!1),[N,I]=Z.useState(null);Z.useEffect(()=>{try{const ee=localStorage.getItem(T6);ee&&e(JSON.parse(ee))}catch(ee){console.error("Error al cargar datos de localStorage",ee)}},[]);const k=Z.useCallback(ee=>{e(ee),localStorage.setItem(T6,JSON.stringify(ee))},[]),U=Z.useCallback(ee=>{const{name:ae,value:q}=ee.target;a(Y=>({...Y,[ae]:q}))},[]),P=Z.useCallback(ee=>{const{name:ae,value:q}=ee.target;d(Y=>({...Y,[ae]:q}))},[]),D=Z.useCallback(()=>{a(n),i(null),m(null)},[n]),_=Z.useCallback(ee=>{ee.preventDefault();const q=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(Ae=>!r[Ae].trim());if(q){m(`El campo '${q}' es obligatorio.`);return}const Y=s?t.map(Ae=>Ae.id===s?{...Ae,...r}:Ae):[{...r,id:crypto.randomUUID()},...t];k(Y),D()},[r,s,t,k,D]),B=Z.useCallback(ee=>{window.scrollTo({top:0,behavior:"smooth"}),i(ee.id),a(ee)},[]),T=Z.useCallback(ee=>{window.confirm("Est seguro de que desea eliminar este registro?")&&k(t.filter(ae=>ae.id!==ee))},[t,k]),O=ee=>{I(ee),E(!0)},R=()=>{I(null),E(!1)},L=ee=>{const ae=t.map(q=>q.id===ee.id?ee:q);k(ae),R()},Q=()=>{const ee=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],ae=Ll.aoa_to_sheet([ee]),q=Ll.book_new();Ll.book_append_sheet(q,ae,"Plantilla"),Q4(q,"Plantilla_Seguimiento_Dual.xlsx")},z=ee=>{var Y;const ae=(Y=ee.target.files)==null?void 0:Y[0];if(!ae)return;b({message:"Procesando archivo...",isError:!1});const q=new FileReader;q.onload=Ae=>{var j;try{const K=new Uint8Array((j=Ae.target)==null?void 0:j.result),X=px(K,{type:"array",cellDates:!0}),te=X.SheetNames[0],le=X.Sheets[te],ye=Ll.sheet_to_json(le);if(ye.length===0)throw new Error("El archivo est vaco.");const Ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},_e=Object.keys(ye[0]).map(Re=>Re.trim().toLowerCase()),xe=["nombre","rut","curso 2025","empresa","estado"].find(Re=>!_e.includes(Re));if(xe)throw new Error(`Falta la columna requerida: '${xe}'`);const se=ye.map(Re=>{const et={id:crypto.randomUUID()};for(const De in Re){const we=Ce[De.trim().toLowerCase()];if(we){let ze=Re[De];ze instanceof Date&&(ze=ze.toISOString().split("T")[0]),typeof ze=="boolean"||typeof ze=="string"&&(ze.toLowerCase()==="true"||ze.toLowerCase()==="false")?et[we]=String(ze).toLowerCase()==="true":et[we]=ze}}return!et.nombreEstudiante||!et.rutEstudiante?null:et}).filter(Boolean);se.length>0?(k([...se,...t]),b({message:`Carga exitosa. Se agregaron ${se.length} nuevos registros.`,isError:!1})):b({message:"No se encontraron nuevos registros vlidos para agregar.",isError:!1})}catch(K){console.error(K),b({message:`Error al procesar el archivo: ${K.message}`,isError:!0})}},q.readAsArrayBuffer(ae)},ie="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",J=Z.useMemo(()=>t.filter(ee=>(o===""||ee.nombreEstudiante.toLowerCase().includes(o.toLowerCase())||ee.nombreEmpresa.toLowerCase().includes(o.toLowerCase())||ee.rutEstudiante.includes(o))&&(u.curso===""||ee.curso===u.curso)&&(u.empresa===""||ee.nombreEmpresa===u.empresa)&&(u.estado===""||ee.estado===u.estado)&&(u.comuna===""||ee.comuna===u.comuna)&&(u.profesor===""||ee.profesorTutorEmpresa===u.profesor)).sort((ee,ae)=>ee.nombreEstudiante.localeCompare(ae.nombreEstudiante)),[t,o,u]);return Z.useMemo(()=>{const ee=new Set,ae=new Set;return t.forEach(q=>{q.nombreEmpresa&&ee.add(q.nombreEmpresa),q.comuna&&ae.add(q.comuna)}),{empresas:Array.from(ee).sort(),comunas:Array.from(ae).sort()}},[t]),A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Prctica Dual"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:s?"Editando registro existente.":"Registre un nuevo estudiante en prctica."}),A.jsxs("form",{onSubmit:_,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),A.jsx("input",{type:"text",name:"nombreEstudiante",value:r.nombreEstudiante,onChange:U,className:ie,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),A.jsx("input",{type:"text",name:"rutEstudiante",value:r.rutEstudiante,onChange:U,className:ie,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsx("select",{name:"curso",value:r.curso,onChange:U,className:ie,required:!0,children:uh.map(ee=>A.jsx("option",{value:ee,children:ee},ee))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),A.jsxs("select",{name:"profesorTutorEmpresa",value:r.profesorTutorEmpresa,onChange:U,className:ie,children:[A.jsx("option",{value:"",children:"Seleccione un profesor"}),y_.map(ee=>A.jsx("option",{value:ee,children:ee},ee))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),A.jsx("input",{type:"text",name:"nombreEmpresa",value:r.nombreEmpresa,onChange:U,className:ie,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),A.jsx("input",{type:"text",name:"rutEmpresa",value:r.rutEmpresa,onChange:U,className:ie})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),A.jsx("input",{type:"text",name:"direccionEmpresa",value:r.direccionEmpresa,onChange:U,className:ie})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),A.jsx("input",{type:"text",name:"comuna",value:r.comuna,onChange:U,className:ie})]}),A.jsxs("div",{className:"lg:col-span-4",children:[A.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),A.jsx("select",{name:"estado",value:r.estado,onChange:U,className:ie,children:TC.map(ee=>A.jsx("option",{value:ee,children:ee},ee))})]})]}),r.estado==="Desvinculado"&&A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),A.jsx("input",{type:"date",name:"fechaDesvinculacion",value:r.fechaDesvinculacion||"",onChange:U,className:`${ie} border-red-300`})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),A.jsx("input",{type:"text",name:"motivoDesvinculacion",value:r.motivoDesvinculacion||"",onChange:U,className:`${ie} border-red-300`})]})]}),h&&A.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:h}),A.jsxs("div",{className:"flex justify-end items-center gap-4",children:[s&&A.jsx("button",{type:"button",onClick:D,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:s?"Actualizar":"Agregar"})]})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[A.jsx("button",{onClick:Q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),A.jsx("input",{type:"file",onChange:z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&A.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:o,onChange:ee=>l(ee.target.value),className:`${ie} md:col-span-2 lg:col-span-1`}),A.jsxs("select",{name:"curso",value:u.curso,onChange:P,className:ie,children:[A.jsx("option",{value:"",children:"Todos los Cursos"}),uh.map(ee=>A.jsx("option",{children:ee},ee))]}),A.jsxs("select",{name:"estado",value:u.estado,onChange:P,className:ie,children:[A.jsx("option",{value:"",children:"Todos los Estados"}),TC.map(ee=>A.jsx("option",{children:ee},ee))]}),A.jsxs("select",{name:"profesor",value:u.profesor,onChange:P,className:ie,children:[A.jsx("option",{value:"",children:"Todos los Profesores"}),y_.map(ee=>A.jsx("option",{children:ee},ee))]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),A.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:J.map(ee=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[A.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:ee.nombreEstudiante}),A.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:ee.curso})]}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ee.nombreEmpresa}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ee.profesorTutorEmpresa}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:A.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_xe[ee.estado]}`,children:ee.estado})}),A.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[A.jsx("button",{onClick:()=>O(ee),className:"text-blue-600 hover:underline",children:"Supervisin"}),A.jsx("button",{onClick:()=>B(ee),className:"text-yellow-600 hover:underline",children:"Editar"}),A.jsx("button",{onClick:()=>T(ee.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},ee.id))})]})})]}),w&&N&&A.jsx(Sxe,{record:N,onClose:R,onSave:L})]})},K7=xr(hr,"actividadesRemotas");async function B6(){return(await Xi(K7)).docs.map(e=>({id:e.id,...e.data()}))}async function Bxe(t){const e=vs(K7);await p8(e,t)}const Nxe=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState([]),[a,s]=Z.useState(null),[i,o]=Z.useState(!1),[l,u]=Z.useState(!1),[d,h]=Z.useState(null),[m,g]=Z.useState(""),[b,w]=Z.useState(null),[E,N]=Z.useState([]),I={asignatura:Hl[0],nivel:v_[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[k,U]=Z.useState(I);Z.useEffect(()=>{async function _(){u(!0);try{const B=await B6();e(B);const T=await Dw();r(T)}catch{h("No se pudieron cargar los datos desde la nube.")}finally{u(!1)}}_()},[]);const P=async()=>{if(b)try{await Bxe({...b,id:void 0});const _=await B6();e(_),U(I),N([]),o(!1),w(null),s(null)}catch{h("No se pudo guardar la actividad en la nube.")}},D=Z.useMemo(()=>n.filter(_=>_.profile===rn.ESTUDIANTE).sort((_,B)=>_.nombreCompleto.localeCompare(B.nombreCompleto)),[n]);return Z.useMemo(()=>m.trim()?D.filter(_=>_.nombreCompleto.toLowerCase().includes(m.toLowerCase())):D,[D,m]),A.jsxs("div",{className:"animate-fade-in",children:[b?A.jsxs("div",{children:[A.jsx("h2",{children:"Previsualizacin"}),A.jsx("button",{onClick:P,children:"Confirmar y Guardar"})]}):a?A.jsx("div",{children:"Ver resultados"}):i?A.jsx("div",{children:"Crear nueva actividad"}):A.jsx("div",{children:"Listado de actividades"}),l&&A.jsx("div",{children:"Cargando..."}),d&&A.jsx("div",{className:"text-red-500",children:d})]})},kxe="actividadesRemotas",lE="respuestasActividades",Ixe=t=>[...t].sort(()=>Math.random()-.5),Fxe=(t,e)=>{if(e===0)return"1.0";const r=e*.6;let a;return t>=r?a=4+(t-r)*3/(e-r):a=1+t*3/(r||1),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},N6=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rxe=({actividad:t,onComplete:e,currentUser:n})=>{var I,k,U,P;const[r,a]=Z.useState({}),[s,i]=Z.useState(!1),[o,l]=Z.useState(!1),[u,d]=Z.useState(!1),[h,m]=Z.useState({}),g=`progress-${n.id}-${t.id}`;Z.useEffect(()=>{const D={};t.tipos.forEach(_=>{if(_==="Trminos Pareados"){const B=t.generatedContent[_];B&&(D[_]=Ixe(B.map(T=>T.definicion)))}}),m(D);try{const _=localStorage.getItem(g);_&&a(JSON.parse(_))}catch(_){console.error("Could not load saved progress",_)}},[t,g]);const b=(D,_)=>{a(B=>({...B,[D]:_}))},w=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(r)),d(!0),setTimeout(()=>d(!1),2e3)}catch(D){console.error("Could not save progress",D),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},E=async()=>{i(!0);let D=0,_=0;const B=[],T={};for(const R of t.tipos){const L=t.generatedContent[R],Q=r[R];if(R==="Quiz"||R==="Comprensin de Lectura"){const z=R==="Quiz"?L:L.preguntas,ie=Q||{};let J=0,ee=0;z.forEach((ae,q)=>{ee+=1,ie[q]===ae.respuestaCorrecta&&(J+=1)}),D+=J,_+=ee,B.push(`${R}: ${J}/${ee} correctas.`),T[R]={puntaje:J,puntajeMaximo:ee}}else if(R==="Trminos Pareados"){const z=L,ie=Q||{};let J=0,ee=0;z.forEach(ae=>{ee+=2,ie[ae.id]===ae.definicion&&(J+=2)}),D+=J,_+=ee,B.push(`${R}: ${J/2}/${z.length} correctas.`),T[R]={puntaje:J,puntajeMaximo:ee}}else if(R==="Desarrollo"){const z=L,ie=Q||{};let J=0,ee=0;for(let ae=0;ae<z.length;ae++){const q=z[ae];ee+=3;try{el("Autoaprendizaje - Evaluar Desarrollo");const Y=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),Ae=`Evala la siguiente respuesta de un estudiante a la pregunta de desarrollo, basndote en la rbrica proporcionada. Asigna un puntaje de 0 a 3. Pregunta: "${q.pregunta}". Rbrica: "${q.rubrica}". Respuesta: "${ie[ae]||""}". Proporciona tambin una frase corta de feedback.`,j={type:Gt.OBJECT,properties:{puntaje:{type:Gt.INTEGER,description:"Un puntaje de 0 a 3."},feedback:{type:Gt.STRING}},required:["puntaje","feedback"]},K=await Y.models.generateContent({model:"gemini-2.5-flash",contents:Ae,config:{responseMimeType:"application/json",responseSchema:j}}),X=JSON.parse(K.text),te=Math.max(0,Math.min(3,X.puntaje||0));J+=te,B.push(`${R} #${ae+1}: Puntaje ${te}/3. (${X.feedback})`)}catch(Y){console.error(Y),B.push(`${R} #${ae+1}: No se pudo evaluar automticamente.`)}}D+=J,_+=ee,T[R]={puntaje:J,puntajeMaximo:ee}}}let O=`Buen trabajo! Tu puntaje total es ${D} de ${_}.`;e({respuestas:r,puntaje:D,puntajeMaximo:_,retroalimentacion:O,calificacion:Fxe(D,_),puntajesPorSeccion:T}),localStorage.removeItem(g),i(!1)},N=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((I=t.recursos.archivos)==null?void 0:I.length));return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[A.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"Hola!"}),A.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),N&&A.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[A.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),A.jsxs("div",{className:"space-y-4",children:[((k=t.recursos)==null?void 0:k.instrucciones)&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((U=t.recursos)==null?void 0:U.enlaces)&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((D,_)=>D.trim()&&A.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:D},_))]}),((P=t.recursos)==null?void 0:P.archivos)&&t.recursos.archivos.length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),A.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((D,_)=>A.jsx("li",{children:A.jsx("a",{href:D.url,download:D.nombre,className:"text-blue-500 hover:underline",children:D.nombre})},_))})]})]})]}),t.tipos.map(D=>{const _=t.generatedContent[D];if(!_)return null;switch(D){case"Quiz":case"Comprensin de Lectura":{const B=D==="Quiz",T=_,O=B?T:T.preguntas;return A.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),!B&&A.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:T.texto}),A.jsx("div",{className:"space-y-6",children:O.map((R,L)=>A.jsxs("div",{children:[A.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[L+1,". ",R.pregunta]}),A.jsx("div",{className:"mt-2 space-y-2",children:R.opciones.map((Q,z)=>{var ie;return A.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[A.jsx("input",{type:"radio",name:`q-${D}-${L}-${t.id}`,value:Q,checked:((ie=r[D])==null?void 0:ie[L])===Q,onChange:()=>b(D,{...r[D]||{},[L]:Q}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),A.jsx("span",{children:Q})]},z)})})]},`${D}-${L}`))})]},D)}case"Trminos Pareados":{const B=_,T=h[D]||[];return A.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),B.map(O=>A.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:O.concepto},O.id))]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definicin"}),B.map(O=>{var R;return A.jsx("div",{className:"h-14 flex items-center",children:A.jsxs("select",{value:((R=r[D])==null?void 0:R[O.id])||"",onChange:L=>b(D,{...r[D]||{},[O.id]:L.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[A.jsx("option",{value:"",children:"Seleccionar definicin..."}),T.map((L,Q)=>A.jsx("option",{value:L,children:L},Q))]})},O.id)})]})]})]},D)}case"Desarrollo":{const B=_;return A.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),B.map((T,O)=>{var R;return A.jsxs("div",{className:"mb-6",children:[A.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:T.pregunta}),A.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[A.jsx("strong",{children:"Rbrica:"})," ",T.rubrica]}),A.jsx("textarea",{value:((R=r[D])==null?void 0:R[O])||"",onChange:L=>b(D,{...r[D]||{},[O]:L.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},O)})]},D)}default:return null}}),A.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[A.jsx("button",{onClick:w,disabled:s||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?A.jsxs(A.Fragment,{children:[A.jsx(N6,{})," Guardando..."]}):u?" Guardado":"Guardar Progreso"}),A.jsx("button",{onClick:E,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:s?A.jsxs(A.Fragment,{children:[A.jsx(N6,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},Dxe=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState([]),[s,i]=Z.useState(null),[o,l]=Z.useState("list"),[u,d]=Z.useState(null),[h,m]=Z.useState(null);Z.useEffect(()=>{try{const E=localStorage.getItem(kxe);if(E){const I=JSON.parse(E),k=t.curso||"",U=t.nombreCompleto,P=I.filter(D=>{var O,R,L,Q;const _=!((O=D.cursosDestino)!=null&&O.length)&&!((R=D.estudiantesDestino)!=null&&R.length),B=((L=D.cursosDestino)==null?void 0:L.includes(k))??!1,T=((Q=D.estudiantesDestino)==null?void 0:Q.includes(U))??!1;if(B||T)return!0;if(_&&k){const z=D.nivel.charAt(0),ie=k.charAt(0);return z===ie}return!1});n(P)}const N=localStorage.getItem(lE);if(N){const I=JSON.parse(N).filter(k=>k.estudianteId===t.nombreCompleto);a(I)}}catch(E){console.error("Error loading data",E)}},[t]);const g=E=>{m(E)},b=()=>{h&&(i(h),l("activity"),m(null))},w=Z.useCallback(async E=>{if(!s)return;let N;const I=`
            Un estudiante ha completado una actividad sobre "${s.contenido}".
            Su puntaje total fue ${E.puntaje} de ${E.puntajeMaximo}.
            Detalle por seccin: ${JSON.stringify(E.puntajesPorSeccion||{})}
            Respuestas de desarrollo: ${JSON.stringify(E.respuestas.Desarrollo||{})}
            
            Genera una retroalimentacin detallada y constructiva en espaol. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
            - "resumenGeneral": Un prrafo breve y motivador sobre el desempeo general.
            - "areasDeFortaleza": Un array de 2 o 3 strings destacando lo que hizo bien.
            - "areasDeMejora": Un array de 2 o 3 strings con reas a mejorar.
            - "planDeMejora": Un array de 3 objetos, cada uno con "paso" (string, ej: "Repasar conceptos clave") y "detalle" (string, una sugerencia concreta).
            - "feedbackPorSeccion": Un objeto donde cada clave es el tipo de actividad (ej: "Quiz") y el valor es un string con feedback especfico para esa seccin.
        `;try{el("Autoaprendizaje - Retroalimentacin Detallada");const _=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:I,config:{responseMimeType:"application/json"}});N=JSON.parse(_.text.trim().replace(/(\*\*|\*)/g,""))}catch(D){console.error("Error generating detailed feedback:",D)}const k={id:crypto.randomUUID(),actividadId:s.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...E,retroalimentacionDetallada:N},U=JSON.parse(localStorage.getItem(lE)||"[]"),P=[k,...U.filter(D=>!(D.actividadId===k.actividadId&&D.estudianteId===k.estudianteId))];localStorage.setItem(lE,JSON.stringify(P)),a(D=>[k,...D.filter(_=>_.actividadId!==k.actividadId)]),d(k),l("result")},[s,t.nombreCompleto]);if(o==="activity"&&s)return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[s.asignatura,": ",s.tipos.join(", ")]}),A.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",s.plazoEntrega]}),A.jsx(Rxe,{actividad:s,onComplete:w,currentUser:t})]});if(o==="result"&&u){const E=u.retroalimentacionDetallada,N=u.puntajesPorSeccion||{},I=(k,U)=>{const P=U>0?k/U:0;return P<.4?"bg-red-100 text-red-800":P<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return A.jsxs("div",{className:"space-y-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentacin de la Actividad"}),E?A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentacin General"}),A.jsx("p",{className:"text-slate-600 mb-6",children:E.resumenGeneral}),A.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[A.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),A.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${I(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:" reas de Fortaleza"}),A.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:E.areasDeFortaleza.map((k,U)=>A.jsx("li",{children:k},U))})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:" reas de Mejora"}),A.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:E.areasDeMejora.map((k,U)=>A.jsx("li",{children:k},U))})]})]})]}),A.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(N).map(([k,{puntaje:U,puntajeMaximo:P}])=>{var D;return A.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[A.jsxs("div",{className:"flex justify-between items-center mb-2",children:[A.jsx("h3",{className:"text-xl font-bold",children:k}),A.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${I(U,P)}`,children:[U," / ",P]})]}),A.jsx("p",{className:"text-slate-500 text-sm",children:(D=E.feedbackPorSeccion)==null?void 0:D[k]})]},k)})}),A.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),A.jsx("div",{className:"space-y-4",children:E.planDeMejora.map((k,U)=>A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:""}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold",children:k.paso}),A.jsx("p",{className:"text-slate-600 text-sm",children:k.detalle})]})]},U))})]})]}):A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[A.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"Actividad Completada!"}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[A.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),A.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),A.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-sm text-slate-500",children:"Calificacin"}),A.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),A.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[A.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentacin"}),A.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),A.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),A.jsxs("p",{className:"mt-4 text-slate-600",children:["Ests seguro de que deseas comenzar esta actividad? ",A.jsx("strong",{children:"Tendrs solo una oportunidad para responder."})]}),A.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habr una segunda oportunidad."}),A.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[A.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),A.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"S, comenzar"})]})]})}),A.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),A.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),A.jsx("div",{className:"space-y-4",children:e.length>0?e.map(E=>{const N=r.find(k=>k.actividadId===E.id),I=!!N;return A.jsx("div",{className:`p-4 border rounded-lg ${I?"bg-green-50":"bg-slate-50"}`,children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"font-bold text-slate-800",children:[E.asignatura," - ",E.tipos.join(", ")]}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",E.plazoEntrega]})]}),I?A.jsxs("div",{className:"text-right",children:[A.jsx("button",{onClick:()=>{d(N),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),A.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",N.puntaje,"/",N.puntajeMaximo]})]}):A.jsx("button",{onClick:()=>g(E),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},E.id)}):A.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},k6="estudiantesInclusion",Lxe="usuariosLiceo",Uxe=({student:t,onClose:e,onSave:n,profesores:r})=>{const[a,s]=Z.useState("intervenciones"),[i,o]=Z.useState(t),[l,u]=Z.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=Z.useState(d),[g,b]=Z.useState({trimestre:"T1",meta:""}),[w,E]=Z.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[N,I]=Z.useState(null),[k,U]=Z.useState(!1),P={motivo:"",acuerdos:"",asistentes:""},[D,_]=Z.useState(P),B=()=>{n(i)},T=()=>{if(!h.responsable||!h.accion){alert("Responsable y Accin son campos obligatorios.");return}let xe;l?xe=(i.intervenciones||[]).map(Re=>Re.id===l.id?{...Re,...h}:Re):xe=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const se=xe.sort((Re,et)=>new Date(et.fecha).getTime()-new Date(Re.fecha).getTime());o(Re=>({...Re,intervenciones:se})),m(d),u(null)},O=xe=>{u(xe),m({responsable:xe.responsable,accion:xe.accion,observaciones:xe.observaciones})},R=xe=>{window.confirm("Eliminar esta intervencin?")&&o(se=>({...se,intervenciones:(se.intervenciones||[]).filter(Re=>Re.id!==xe)}))},L=xe=>{const{name:se,value:Re}=xe.target;o(et=>({...et,[se]:Re,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!g.meta.trim())return;const xe={...g,id:crypto.randomUUID(),cumplida:!1};o(se=>({...se,metasProgreso:[...se.metasProgreso||[],xe]})),b({trimestre:"T1",meta:""})},z=xe=>{o(se=>({...se,metasProgreso:(se.metasProgreso||[]).map(Re=>Re.id===xe?{...Re,cumplida:!Re.cumplida}:Re)}))},ie=xe=>{o(se=>({...se,metasProgreso:(se.metasProgreso||[]).filter(Re=>Re.id!==xe)}))},J=Z.useMemo(()=>{const xe=i.metasProgreso||[];if(xe.length===0)return{percent:0,color:"bg-slate-300"};const se=xe.filter(De=>De.cumplida).length,Re=Math.round(se/xe.length*100),et=Re<40?"bg-red-500":Re<75?"bg-yellow-500":"bg-green-500";return{percent:Re,color:et}},[i.metasProgreso]),ee=Z.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const xe=new Date(i.fechaActualizacionApoyos),se=new Date;return se.setMonth(se.getMonth()-3),xe<se},[i.fechaActualizacionApoyos]),ae=()=>{if(!w.titulo.trim()||!w.fecha)return;const xe={...w,id:crypto.randomUUID(),resuelta:!1};o(se=>({...se,alertas:[...se.alertas||[],xe].sort((Re,et)=>new Date(Re.fecha).getTime()-new Date(et.fecha).getTime())})),E({titulo:"",fecha:new Date().toISOString().split("T")[0]})},q=xe=>{o(se=>({...se,alertas:(se.alertas||[]).map(Re=>Re.id===xe?{...Re,resuelta:!Re.resuelta}:Re)}))},Y=xe=>{o(se=>({...se,alertas:(se.alertas||[]).filter(Re=>Re.id!==xe)}))},Ae=xe=>{xe.target.files&&xe.target.files[0]&&I(xe.target.files[0])},j=()=>{if(!N)return;U(!0);const xe=new FileReader;xe.readAsDataURL(N),xe.onloadend=()=>{const se={id:crypto.randomUUID(),nombre:N.name,url:xe.result,fechaSubida:new Date().toISOString()};o(Re=>({...Re,archivos:[se,...Re.archivos||[]]})),I(null),U(!1)},xe.onerror=()=>{alert("Error al leer el archivo."),U(!1)}},K=xe=>{window.confirm("Eliminar este archivo?")&&o(se=>({...se,archivos:(se.archivos||[]).filter(Re=>Re.id!==xe)}))},X=()=>{if(!D.motivo.trim()||!D.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const xe={...D,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(se=>({...se,reuniones:[xe,...se.reuniones||[]].sort((Re,et)=>new Date(et.fecha).getTime()-new Date(Re.fecha).getTime())})),_(P)},te=xe=>{window.confirm("Eliminar este registro de reunin?")&&o(se=>({...se,reuniones:(se.reuniones||[]).filter(Re=>Re.id!==xe)}))},le=()=>{var it,dt,Ct;const xe=new sn("p","mm","a4"),se=20,Re=xe.internal.pageSize.getWidth(),et=xe.internal.pageSize.getHeight();let De=se;const we=ut=>{ut.setFontSize(10),ut.setTextColor(100),ut.text("Ficha de Seguimiento - Mdulo Inclusin",se,15)};we(xe),xe.setFontSize(18),xe.setFont("helvetica","bold"),xe.setTextColor(40),xe.text(i.nombre,se,De+10),De+=15,xe.setFontSize(11),xe.setFont("helvetica","normal"),xe.setTextColor(80),xe.text(`Curso: ${i.curso}`,se,De),xe.text(`Dificultad: ${i.dificultad}`,se,De+6),De+=15;const ze=ut=>{De+ut>et-se&&(xe.addPage(),we(xe),De=se)},nt=ut=>{ze(15),xe.setFontSize(14),xe.setFont("helvetica","bold"),xe.text(ut,se,De),De+=10};if((it=i.intervenciones)!=null&&it.length&&(nt("Historial de Intervenciones"),Zo(xe,{startY:De,head:[["Fecha","Responsable","Accin","Observaciones"]],body:i.intervenciones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.responsable,ut.accion,ut.observaciones]),theme:"grid",didDrawPage:ut=>we(xe)}),De=xe.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){ze(30),nt("Seguimiento y Apoyos"),xe.setFontSize(11),xe.setFont("helvetica","normal");const ut=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Nt=xe.splitTextToSize(ut,Re-se*2);xe.text(Nt,se,De),De+=Nt.length*5+10}(dt=i.metasProgreso)!=null&&dt.length&&(ze(30),nt("Metas de Progreso"),Zo(xe,{startY:De,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ut=>[ut.trimestre,ut.meta,ut.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ut=>we(xe)}),De=xe.lastAutoTable.finalY+10),(Ct=i.reuniones)!=null&&Ct.length&&(nt("Reuniones con Apoderados"),Zo(xe,{startY:De,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.motivo,ut.acuerdos,ut.asistentes]),theme:"grid",didDrawPage:ut=>we(xe)})),xe.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},ye=()=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervencin":"Registrar Nueva Intervencin"}),A.jsxs("select",{value:h.responsable,onChange:xe=>m(se=>({...se,responsable:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Seleccione Responsable..."}),r.map(xe=>A.jsx("option",{value:xe,children:xe},xe))]}),A.jsx("textarea",{value:h.accion,onChange:xe=>m(se=>({...se,accion:xe.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("textarea",{value:h.observaciones,onChange:xe=>m(se=>({...se,observaciones:xe.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsxs("div",{className:"flex justify-end gap-2",children:[l&&A.jsx("button",{onClick:()=>{u(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edicin"}),A.jsx("button",{onClick:T,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),A.jsx("div",{className:"space-y-3",children:(i.intervenciones||[]).map(xe=>A.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.accion}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:xe.observaciones}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - ",xe.responsable]})]}),A.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[A.jsx("button",{onClick:()=>O(xe),className:"text-blue-500",children:""}),A.jsx("button",{onClick:()=>R(xe.id),className:"text-red-500",children:""})]})]})},xe.id))})]}),Ce=()=>A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),ee&&A.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl",children:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),A.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),A.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",J.percent,"%"]}),A.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:A.jsx("div",{className:`${J.color} h-4 rounded-full transition-all duration-500`,style:{width:`${J.percent}%`}})})]}),A.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[A.jsxs("select",{value:g.trimestre,onChange:xe=>b(se=>({...se,trimestre:xe.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"T1",children:"T1"}),A.jsx("option",{value:"T2",children:"T2"}),A.jsx("option",{value:"T3",children:"T3"})]}),A.jsx("input",{value:g.meta,onChange:xe=>b(se=>({...se,meta:xe.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),A.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(xe=>A.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[A.jsx("input",{type:"checkbox",checked:xe.cumplida,onChange:()=>z(xe.id),className:"h-5 w-5 rounded text-amber-500"}),A.jsxs("span",{className:`flex-grow text-sm ${xe.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[A.jsxs("strong",{children:[xe.trimestre,":"]})," ",xe.meta]}),A.jsx("button",{onClick:()=>ie(xe.id),className:"text-red-500 text-sm",children:""})]},xe.id))})]})]}),_e=()=>A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),A.jsx("input",{type:"text",value:w.titulo,onChange:xe=>E(se=>({...se,titulo:xe.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),A.jsx("input",{type:"date",value:w.fecha,onChange:xe=>E(se=>({...se,fecha:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),A.jsx("button",{onClick:ae,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),A.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(xe=>A.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[A.jsx("input",{type:"checkbox",checked:xe.resuelta,onChange:()=>q(xe.id),className:"h-5 w-5 rounded text-amber-500"}),A.jsxs("span",{className:`flex-grow text-sm ${xe.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[xe.titulo," (",new Date(xe.fecha+"T12:00:00").toLocaleDateString(),")"]}),A.jsx("button",{onClick:()=>Y(xe.id),className:"text-red-500 text-sm",children:""})]},xe.id))})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),A.jsx("input",{type:"file",onChange:Ae,className:"w-full text-sm"}),A.jsx("button",{onClick:j,disabled:!N||k,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:k?"Subiendo...":"Subir"})]}),A.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(xe=>A.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[A.jsx("a",{href:xe.url,download:xe.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:xe.nombre}),A.jsx("button",{onClick:()=>K(xe.id),className:"text-red-500 text-sm ml-2",children:""})]},xe.id))})]})]}),Ie=()=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),A.jsx("input",{value:D.motivo,onChange:xe=>_(se=>({...se,motivo:xe.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("textarea",{value:D.acuerdos,onChange:xe=>_(se=>({...se,acuerdos:xe.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("input",{value:D.asistentes,onChange:xe=>_(se=>({...se,asistentes:xe.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("div",{className:"text-right",children:A.jsx("button",{onClick:X,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunin"})})]}),A.jsx("div",{className:"space-y-3",children:(i.reuniones||[]).map(xe=>A.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.motivo}),A.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[A.jsx("strong",{children:"Acuerdos:"})," ",xe.acuerdos]}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - Asistentes: ",xe.asistentes]})]}),A.jsx("button",{onClick:()=>te(xe.id),className:"text-red-500 flex-shrink-0 ml-4",children:""})]})},xe.id))})]});return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:xe=>xe.stopPropagation(),children:[A.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),A.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:""})]})]}),A.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:A.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(xe=>A.jsx("button",{onClick:()=>s(xe),className:`${a===xe?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:xe==="alertas"?"Alertas y Archivos":xe==="seguimiento"?"Seguimiento y Metas":xe},xe))})}),A.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&ye(),a==="seguimiento"&&Ce(),a==="reuniones"&&Ie(),a==="alertas"&&_e()]}),A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[A.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),A.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Mxe=({student:t,onClose:e,onConfirm:n})=>{const[r,a]=Z.useState(J2[0]),s=()=>{n(t,r)};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[A.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),A.jsx("select",{id:"dificultad",value:r,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:J2.map(i=>A.jsx("option",{value:i,children:i},i))})]}),A.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),A.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},I6=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState([]),[s,i]=Z.useState(null),[o,l]=Z.useState(null),[u,d]=Z.useState(""),[h,m]=Z.useState(""),[g,b]=Z.useState("");Z.useEffect(()=>{try{const _=localStorage.getItem(k6);_&&n(JSON.parse(_));const B=localStorage.getItem(Lxe);B&&a(JSON.parse(B))}catch(_){console.error("Error al cargar datos de Inclusin desde localStorage",_)}},[]);const w=Z.useCallback(_=>{n(_),localStorage.setItem(k6,JSON.stringify(_))},[]),E=(_,B)=>{if(e.some(O=>O.nombre===_.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const T={id:crypto.randomUUID(),nombre:_.nombreCompleto,curso:_.curso||"",dificultad:B,intervenciones:[],archivos:[],reuniones:[]};w([T,...e]),i(T)},N=_=>{w(e.map(B=>B.id===_.id?_:B)),i(_)},I=_=>{window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin?")&&(w(e.filter(B=>B.id!==_)),(s==null?void 0:s.id)===_&&i(null))},k=_=>{const B=P.map(T=>({Nombre:T.nombre,Curso:T.curso,Dificultad:T.dificultad,"N Intervenciones":T.intervenciones.length,"Alertas Pendientes":(T.alertas||[]).filter(O=>!O.resuelta).length}));if(_==="xlsx"){const T=Ll.json_to_sheet(B),O=Ll.book_new();Ll.book_append_sheet(O,T,"Estudiantes_Inclusion"),Q4(O,"Estudiantes_Inclusion.xlsx")}else{const T=new sn;T.text("Listado de Estudiantes - Programa de Inclusin",14,15),Zo(T,{startY:20,head:[Object.keys(B[0])],body:B.map(Object.values)}),T.save("Estudiantes_Inclusion.pdf")}},U=Z.useMemo(()=>r.filter(_=>{var B;return _.profile===rn.ESTUDIANTE&&(((B=t.cursos)==null?void 0:B.includes(_.curso||""))||t.profile===rn.SUBDIRECCION)}).filter(_=>!e.some(B=>B.nombre===_.nombreCompleto)),[r,e,t]),P=Z.useMemo(()=>e.filter(_=>_.nombre.toLowerCase().includes(u.toLowerCase())&&(h===""||_.curso===h)&&(g===""||_.dificultad===g)).sort((_,B)=>_.nombre.localeCompare(B.nombre)),[e,u,h,g]),D=Z.useMemo(()=>r.filter(_=>_.profile===rn.PROFESORADO).map(_=>_.nombreCompleto).sort(),[r]);return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Estudiantes en PIE"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>k("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),A.jsx("button",{onClick:()=>k("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:u,onChange:_=>d(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsxs("select",{value:h,onChange:_=>m(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Todos los Cursos"}),xs.map(_=>A.jsx("option",{children:_},_))]}),A.jsxs("select",{value:g,onChange:_=>b(_.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Todas las Dificultades"}),J2.map(_=>A.jsx("option",{children:_},_))]})]}),A.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:P.map(_=>A.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:_.nombre}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[_.curso," - ",_.dificultad]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>i(_),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),A.jsx("button",{onClick:()=>I(_.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:""})]})]},_.id))})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nmina"}),A.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:U.map(_=>A.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:_.nombreCompleto}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.curso})]}),A.jsx("button",{onClick:()=>l(_),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},_.id))})]})]}),o&&A.jsx(Mxe,{student:o,onClose:()=>l(null),onConfirm:(_,B)=>{E(_,B),l(null)}}),s&&A.jsx(Uxe,{student:s,onClose:()=>i(null),onSave:N,profesores:D})]})},F6="asistenciaDualRecords",Pxe=({currentUser:t})=>{const[e,n]=Z.useState(t.curso||""),[r,a]=Z.useState([]),[s,i]=Z.useState(!1),[o,l]=Z.useState(null),u=`asistenciaPersonalDual-${t.id}`;Z.useEffect(()=>{try{const m=localStorage.getItem(u);m&&a(JSON.parse(m))}catch(m){console.error("Error al cargar historial de asistencia",m),l({text:"No se pudo cargar el historial local.",type:"error"})}},[u]);const d=m=>{const g=[m,...r];a(g),localStorage.setItem(u,JSON.stringify(g));try{const b=localStorage.getItem(F6),w=b?JSON.parse(b):[],E=[m,...w];localStorage.setItem(F6,JSON.stringify(E))}catch(b){console.error("Error al guardar en el historial compartido",b),l({text:"Se registr su asistencia, pero hubo un problema al notificar a coordinacin.",type:"error"})}},h=m=>{if(!e){l({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),l(null),navigator.geolocation.getCurrentPosition(g=>{const b={id:crypto.randomUUID(),nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};d(b),i(!1),l({text:`Marca de ${m} registrada con xito!`,type:"success"})},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicacin.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:b=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${g.code}).`;break}l({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Asistencia a Empresa"}),A.jsx("p",{className:"text-slate-500 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),A.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 mb-1",children:"Seleccione su curso"}),A.jsxs("select",{id:"curso",value:e,onChange:m=>n(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2",children:[A.jsx("option",{value:"",children:"-- Mi curso --"}),uh.map(m=>A.jsx("option",{value:m,children:m},m))]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[A.jsx("button",{onClick:()=>h("Entrada"),disabled:s||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),A.jsx("button",{onClick:()=>h("Salida"),disabled:s||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&A.jsxs("div",{className:"text-center text-slate-600 pt-4 flex items-center justify-center gap-2",children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("span",{children:"Obteniendo ubicacin..."})]}),o&&A.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text})]})]}),A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mi Historial de Asistencia"}),A.jsx("div",{className:"overflow-x-auto max-h-96",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[A.jsx("thead",{className:"bg-slate-50 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Fecha y Hora"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Tipo"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Curso"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:r.length>0?r.map(m=>A.jsxs("tr",{className:"hover:bg-slate-50",children:[A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:new Date(m.fechaHora).toLocaleString("es-CL")}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.tipo})}),A.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:m.curso})]},m.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},jxe="asistenciaDual",Oxe=async(t,e)=>{try{const n=new Date(t,e,1),r=new Date(t,e+1,0,23,59,59,999),a=ts(xr(hr,jxe),bo("fechaHora",">=",n.toISOString()),bo("fechaHora","<=",r.toISOString()),Ws("fechaHora","asc"));return(await Xi(a)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Error al obtener registros por mes:",n),new Error("No se pudieron cargar los registros del mes")}},_v=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},Qxe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),Hxe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd",transform:"rotate(180 10 10)"})}),Vxe=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState([]),[a,s]=Z.useState(!1),[i,o]=Z.useState(null),[l,u]=Z.useState(new Date),[d,h]=Z.useState("todos"),[m,g]=Z.useState(""),b=Z.useCallback(async()=>{s(!0);try{const D=l.getFullYear(),_=l.getMonth(),B=await Oxe(D,_);e(B);const T=await Dw();r(T),o(null)}catch(D){console.error("Error al cargar datos desde Firestore",D),o("No se pudieron cargar los datos de asistencia desde la nube.")}finally{s(!1)}},[l]);Z.useEffect(()=>{b()},[b]);const{monthDays:w,monthName:E,year:N}=Z.useMemo(()=>{const D=l.getFullYear(),_=l.getMonth();return{monthDays:new Date(D,_+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:D}},[l]),I=Z.useMemo(()=>{let D=n.filter(_=>_.profile===rn.ESTUDIANTE&&_.curso&&uh.includes(_v(_.curso)));return d!=="todos"&&(D=D.filter(_=>_v(_.curso||"")===d)),m&&(D=D.filter(_=>_.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),D.sort((_,B)=>_.nombreCompleto.localeCompare(B.nombreCompleto))},[n,d,m]),k=Z.useMemo(()=>{const D=new Map,_=l.getMonth(),B=l.getFullYear();return t.filter(O=>{const R=new Date(O.fechaHora);return R.getMonth()!==_||R.getFullYear()!==B?!1:d==="todos"?uh.includes(_v(O.curso||"")):_v(O.curso||"")===d}).forEach(O=>{const R=new Date(O.fechaHora).getDate();D.has(O.nombreEstudiante)||D.set(O.nombreEstudiante,new Map);const L=D.get(O.nombreEstudiante);L.has(R)||L.set(R,{});const Q=L.get(R);O.tipo==="Entrada"?(!Q.entrada||new Date(O.fechaHora)<new Date(Q.entrada.fechaHora))&&(Q.entrada=O):O.tipo==="Salida"&&(!Q.salida||new Date(O.fechaHora)>new Date(Q.salida.fechaHora))&&(Q.salida=O)}),D},[t,l,d]),U=D=>{u(_=>{const B=new Date(_);return B.setMonth(B.getMonth()+D),B})},P=["D","L","M","M","J","V","S"];return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),a&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando datos de asistencia desde la nube..."}),i&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:i}),!a&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de asistencia para este mes en la nube."}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[A.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[A.jsx("button",{onClick:()=>U(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"<"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${E} ${N}`}),A.jsx("button",{onClick:()=>U(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:">"})]}),A.jsxs("select",{value:d,onChange:D=>h(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50",children:[A.jsx("option",{value:"todos",children:"Todos los Cursos"}),uh.map(D=>A.jsx("option",{value:D,children:D},D))]}),A.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:D=>g(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50"})]}),!a&&A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:w},(D,_)=>{const T=new Date(N,l.getMonth(),_+1).getDay(),O=T===0||T===6;return A.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${O?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[A.jsx("div",{className:"font-semibold",children:P[T]}),A.jsx("div",{children:_+1})]},_)})]})}),A.jsx("tbody",{children:I.length>0?I.map(D=>A.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[A.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:D.nombreCompleto}),Array.from({length:w},(_,B)=>{var Q;const T=B+1,O=(Q=k.get(D.nombreCompleto))==null?void 0:Q.get(T),R=new Date(N,l.getMonth(),B+1),L=R.getDay()===0||R.getDay()===6;return A.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${L?"bg-slate-100 dark:bg-slate-700/50":""}`,children:A.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(O==null?void 0:O.entrada)&&A.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var z,ie;return window.open(`https://www.google.com/maps?q=${(z=O.entrada)==null?void 0:z.ubicacion.latitud},${(ie=O.entrada)==null?void 0:ie.ubicacion.longitud}`,"_blank")},children:[A.jsx(Qxe,{}),A.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(O.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(O==null?void 0:O.salida)&&A.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var z,ie;return window.open(`https://www.google.com/maps?q=${(z=O.salida)==null?void 0:z.ubicacion.latitud},${(ie=O.salida)==null?void 0:ie.ubicacion.longitud}`,"_blank")},children:[A.jsx(Hxe,{}),A.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(O.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},T)})]},D.id)):A.jsx("tr",{children:A.jsx("td",{colSpan:w+1,className:"text-center p-8 text-slate-500",children:a?"Cargando...":"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},R6="evaluacionesFormativas",D6="calificacionesFormativas",L6="trabajosGrupalesFormativos",zxe="usuariosLiceo",W7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},gy={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},$7=t=>t.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Gxe=({cursos:t,onSelect:e})=>A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(n=>{const r=$7(n);return A.jsxs("div",{className:"space-y-2 text-center",children:[A.jsxs("button",{onClick:()=>e(n),className:`relative w-full h-48 rounded-md shadow-lg ${r.bg} ${r.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[A.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${r.spine} rounded-l-md`}),A.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${r.text}`,children:[A.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:n.slice(0,2)}),A.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:n.slice(2)})]})]}),A.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]},n)})}):A.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),A.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),qxe=({curso:t,asignaturas:e,onSelect:n,onBack:r})=>{const a=$7(t);return A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),A.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",t]})]}),A.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(s=>A.jsxs("button",{onClick:()=>n(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[A.jsx("span",{className:"text-2xl",children:gy[s]||gy.Default}),A.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):A.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[A.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),A.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},Kxe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[a,s]=Z.useState([]),[i,o]=Z.useState({}),[l,u]=Z.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=Z.useState(null),[m,g]=Z.useState(null);Z.useEffect(()=>{try{const T=localStorage.getItem(R6);T&&s(JSON.parse(T));const O=localStorage.getItem(D6);O&&o(JSON.parse(O))}catch(T){console.error("Error al cargar datos",T)}},[]);const b=T=>{s(T),localStorage.setItem(R6,JSON.stringify(T))},w=T=>{o(T),localStorage.setItem(D6,JSON.stringify(T))},E=Z.useMemo(()=>n.filter(T=>T.profile===rn.ESTUDIANTE&&W7(T.curso||"")===t).map(T=>T.nombreCompleto).sort((T,O)=>T.localeCompare(O)),[n,t]),N=Z.useMemo(()=>a.filter(T=>T.curso===t&&T.asignatura===e).sort((T,O)=>new Date(T.fecha).getTime()-new Date(O.fecha).getTime()),[a,t,e]),I=T=>{const{name:O,value:R}=T.target;d?h(L=>L?{...L,[O]:R}:null):u(L=>({...L,[O]:R}))},k=T=>{if(T.preventDefault(),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const O={id:crypto.randomUUID(),asignatura:e,curso:t,...l};b([...a,O]);const R=E.reduce((L,Q)=>(L[Q]="trabajado",L),{});w({...i,[O.id]:R}),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),g(null)},U=(T,O)=>{var Q;const L=(((Q=i[T])==null?void 0:Q[O])||"trabajado")==="trabajado"?"no trabajado":"trabajado";w({...i,[T]:{...i[T]||{},[O]:L}})},P=T=>h(T),D=()=>{d&&(b(a.map(T=>T.id===d.id?d:T)),h(null))},_=T=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?")){b(a.filter(R=>R.id!==T));const O={...i};delete O[T],w(O)}},B=Z.useCallback(T=>{if(N.length===0)return"-";let O=0,R=0;return N.forEach(L=>{var z;const Q=(z=i[L.id])==null?void 0:z[T];Q==="trabajado"?(O+=7,R++):Q==="no trabajado"&&(O+=2,R++)}),R===0?"-":(O/R).toFixed(1)},[i,N]);return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),A.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),A.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[A.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),A.jsxs("div",{className:"w-full",children:[A.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),A.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"w-full",children:[A.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),A.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsx("div",{className:"w-full",children:A.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&A.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),A.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),N.map(T=>A.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===T.id?A.jsxs("div",{className:"flex flex-col gap-1",children:[A.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),A.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),A.jsx("button",{onClick:D,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("span",{className:"font-semibold",children:T.nombreActividad}),A.jsx("span",{className:"font-normal text-slate-500",children:T.fecha}),A.jsxs("div",{className:"flex gap-2 mt-1",children:[A.jsx("button",{onClick:()=>P(T),className:"text-blue-500 hover:text-blue-700",children:""}),A.jsx("button",{onClick:()=>_(T.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},T.id)),A.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:E.map(T=>A.jsxs("tr",{children:[A.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:T}),N.map(O=>{var Q;const L=((Q=i[O.id])==null?void 0:Q[T])==="trabajado";return A.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:A.jsx("button",{onClick:()=>U(O.id,T),className:`text-3xl transition-opacity duration-200 ${L?"opacity-100":"opacity-20"}`,children:gy[e]||gy.Default})},O.id)}),A.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:B(T)})]},T))})]})})]})},Wxe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[a,s]=Z.useState([]),[i,o]=Z.useState(null),[l,u]=Z.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=Z.useState({}),[m,g]=Z.useState(2);Z.useEffect(()=>{try{const P=localStorage.getItem(L6);P&&s(JSON.parse(P))}catch(P){console.error("Error al cargar trabajos grupales",P)}},[]);const b=P=>{s(P),localStorage.setItem(L6,JSON.stringify(P))},w=Z.useMemo(()=>n.filter(P=>P.profile===rn.ESTUDIANTE&&W7(P.curso||"")===t).sort((P,D)=>P.nombreCompleto.localeCompare(D.nombreCompleto)),[n,t]);Z.useEffect(()=>{if(i){const P={};i.grupos.forEach(D=>{D.integrantes.forEach(_=>{P[_.nombre]={groupNumber:String(D.numero),role:_.rol||""}})}),h(P)}else h({})},[i]);const E=P=>{if(P.preventDefault(),!l.nombre.trim())return;const D={id:crypto.randomUUID(),curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};b([D,...a]),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})},N=()=>{if(!i)return;const P=new Map;for(const B of w){const T=d[B.nombreCompleto];if(T&&T.groupNumber){const O=parseInt(T.groupNumber,10);isNaN(O)||(P.has(O)||P.set(O,[]),P.get(O).push({nombre:B.nombreCompleto,rol:T.role||void 0}))}}const D=Array.from(P.entries()).map(([B,T])=>({numero:B,integrantes:T})).sort((B,T)=>B.numero-T.numero),_={...i,grupos:D};b(a.map(B=>B.id===_.id?_:B)),o(_),alert("Grupos guardados con xito.")},I=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const P=[...w].sort(()=>Math.random()-.5),D={};P.forEach((_,B)=>{var T;D[_.nombreCompleto]={groupNumber:String(B%m+1),role:((T=d[_.nombreCompleto])==null?void 0:T.role)||""}}),h(D)},k=(P,D,_)=>{h(B=>({...B,[P]:{...B[P],[D]:_}}))},U=Z.useMemo(()=>{const P=new Map;return Object.entries(d).forEach(([D,_])=>{_.groupNumber&&(P.has(_.groupNumber)||P.set(_.groupNumber,[]),P.get(_.groupNumber).push({nombre:D,rol:_.role}))}),Array.from(P.entries()).sort((D,_)=>parseInt(D[0])-parseInt(_[0]))},[d]);return i?A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),A.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),A.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"md:col-span-1 space-y-4",children:[A.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"number",value:m,onChange:P=>g(parseInt(P.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),A.jsx("button",{onClick:I,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),A.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),A.jsx("table",{className:"w-full text-sm",children:A.jsx("tbody",{children:w.map(P=>{var D;return A.jsxs("tr",{children:[A.jsx("td",{className:"py-1 pr-2",children:P.nombreCompleto}),A.jsx("td",{className:"py-1",children:A.jsx("input",{type:"number",value:((D=d[P.nombreCompleto])==null?void 0:D.groupNumber)||"",onChange:_=>k(P.nombreCompleto,"groupNumber",_.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},P.id)})})})]})]}),A.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[A.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),A.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:U.map(([P,D])=>A.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[A.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",P]}),A.jsx("ul",{className:"space-y-2",children:D.map(_=>A.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[A.jsx("span",{className:"flex-1 truncate",children:_.nombre}),A.jsxs("select",{value:_.rol||"",onChange:B=>k(_.nombre,"role",B.target.value),className:"p-1 border rounded text-xs w-32",children:[A.jsx("option",{value:"",children:"-- Asignar Rol --"}),y8.map(B=>A.jsx("option",{value:B,children:B},B))]})]},_.nombre))})]},P))})]})]})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),A.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),A.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),A.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[A.jsx("input",{value:l.nombre,onChange:P=>u({...l,nombre:P.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),A.jsx("input",{type:"date",value:l.fecha,onChange:P=>u({...l,fecha:P.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.filter(P=>P.curso===t&&P.asignatura===e).map(P=>A.jsxs("button",{onClick:()=>o(P),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[A.jsx("p",{className:"font-bold",children:P.nombreActividad}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",P.fechaPresentacion]})]},P.id))]})]})},$xe=({currentUser:t})=>{const[e,n]=Z.useState("calificaciones"),[r,a]=Z.useState(null),[s,i]=Z.useState(null),[o,l]=Z.useState([]);Z.useEffect(()=>{try{const g=localStorage.getItem(zxe);g&&l(JSON.parse(g))}catch(g){console.error("Error al cargar usuarios",g)}},[]);const u=Z.useMemo(()=>t.cursos||[],[t.cursos]),d=Z.useMemo(()=>t.asignaturas||[],[t.asignaturas]),h=({tab:g,label:b})=>A.jsx("button",{onClick:()=>n(g),className:`${e===g?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),m=()=>{if(!r)return A.jsx(Gxe,{cursos:u,onSelect:a});if(!s)return A.jsx(qxe,{curso:r,asignaturas:d,onSelect:i,onBack:()=>a(null)});if(e==="calificaciones")return A.jsx(Kxe,{curso:r,asignatura:s,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return A.jsx(Wxe,{curso:r,asignatura:s,allUsers:o,onBack:()=>i(null)})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:A.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[A.jsx(h,{tab:"calificaciones",label:"Calificaciones"}),A.jsx(h,{tab:"grupos",label:"Trabajos Grupales"})]})}),A.jsx("div",{className:"mt-6",children:m()})]})},Jx="acompanamientos",Jxe=async()=>{try{const t=ts(xr(hr,Jx),Ws("fecha","desc"));return(await Xi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompaamientos:",t),new Error("No se pudieron cargar los registros de acompaamiento")}},Yxe=async t=>{try{return{id:(await MA(xr(hr,Jx),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompaamiento:",e),new Error("No se pudo crear el registro de acompaamiento")}},Xxe=async(t,e)=>{try{const n=vs(hr,Jx,t);await zm(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acompaamiento:",n,"ID:",t),new Error("No se pudo actualizar el registro de acompaamiento")}},Zxe=async t=>{try{const e=vs(hr,Jx,t);await wf(e)}catch(e){throw console.error("Error al eliminar acompaamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompaamiento")}},e1e=async t=>{try{const e=ts(xr(hr,Jx),bo("docente","==",t),Ws("fecha","desc"));return(await Xi(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompaamientos por docente:",e),new Error("No se pudieron cargar los acompaamientos del docente")}},t1e=async()=>{try{const t=vs(hr,"configuracion","rubricaAcompanamiento"),e=await Bm(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rbrica personalizada:",t),null}},n1e=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState([]),[a,s]=Z.useState(!1),[i,o]=Z.useState(!1),[l,u]=Z.useState(null),[d,h]=Z.useState("list"),[m,g]=Z.useState(null),[b,w]=Z.useState(!1),[E,N]=Z.useState(!1),I=Bg,k=Z.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[U,P]=Z.useState(k),D=Z.useCallback(async()=>{s(!0);try{const ae=await Jxe();e(ae),u(null)}catch(ae){console.error("Error al cargar acompaamientos desde Firestore",ae),u("No se pudieron cargar los registros de acompaamiento desde la nube.")}finally{s(!1)}},[]),_=Z.useCallback(async()=>{o(!0);try{const q=(await Dw()).filter(Y=>Y.profile===rn.PROFESORADO).map(Y=>Y.nombreCompleto).sort();r(q)}catch(ae){console.error("Error al cargar profesores desde Firestore",ae),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);Z.useEffect(()=>{D(),_()},[D,_]);const B=ae=>{P(q=>({...q,[ae.target.name]:ae.target.value}))},T=(ae,q)=>{P(Y=>({...Y,rubricaResultados:{...Y.rubricaResultados,[ae]:q}}))},O=async()=>{w(!0);const{rubricaResultados:ae,observacionesGenerales:q}=U;let Y=`Resultados de la Rbrica:
`;I.forEach(j=>{j.criteria.forEach(K=>{const X=ae[K.name];if(X&&K.levels[X-1]){const te=K.levels[X-1];Y+=`- Criterio: "${K.name}" | Nivel: ${X} (${te})
`}})}),Y+=`
Observaciones Generales del Evaluador:
${q||"No se proveyeron observaciones adicionales."}`;const Ae=`
            Eres un asesor pedaggico experto. Tu tarea es generar una retroalimentacin formal, tcnica y constructiva para un docente, basada en una observacin de clase.
            La retroalimentacin debe ser estructurada y usar un lenguaje pedaggico preciso.

            A continuacin, los datos de la observacin:
            ${Y}

            Genera una retroalimentacin que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectndolos con los criterios de la rbrica.
            - ## reas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqu con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prcticas y accionables que el docente pueda implementar.
        `;try{el("Acompaamiento - Consolidar Feedback");const X=(await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:Ae})).text.replace(/(\*\*|\*)/g,"");P(te=>({...te,retroalimentacionConsolidada:X}))}catch(j){console.error("Error al generar retroalimentacin con IA",j),alert("No se pudo generar la retroalimentacin. Intntelo de nuevo.")}finally{w(!1)}},R=async()=>{const ae=m;if(!ae)return;N(!0);const q=t.find(Ie=>Ie.id===ae);if(!q){N(!1);return}const Y=new sn({orientation:"p",unit:"mm",format:"a4"}),Ae=20,j=Y.internal.pageSize.getWidth(),K=Y.internal.pageSize.getHeight(),X=j-Ae*2;let te=Ae;const le=Ie=>{Ie.setFont("helvetica","bold"),Ie.setFontSize(10),Ie.setTextColor(100),Ie.text("LICEO INDUSTRIAL DE RECOLETA",j/2,15,{align:"center"})};le(Y),Y.setFont("helvetica","bold"),Y.setFontSize(18),Y.setTextColor(40),Y.text("Informe de Acompaamiento Docente",j/2,te+10,{align:"center"}),te+=25,Zo(Y,{startY:te,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},q.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(q.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},q.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},q.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),te=Y.lastAutoTable.finalY+10;const ye=[],Ce=["Dbil","Incipiente","Satisfactorio","Avanzado"];I.forEach(Ie=>{ye.push([{content:Ie.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),Ie.criteria.forEach(xe=>{const se=q.rubricaResultados[xe.name],Re=se?Ce[se-1]:"No evaluado";ye.push([xe.name,Re])})}),Zo(Y,{startY:te,head:[["Indicador","Nivel de Logro"]],body:ye,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:Ie=>{Ie.pageNumber>1&&le(Y)}}),te=Y.lastAutoTable.finalY+15;const _e=(Ie,xe)=>{te>K-Ae-10&&(Y.addPage(),le(Y),te=Ae),Y.setFont("helvetica",xe.style),Y.setFontSize(xe.size);const se=Y.splitTextToSize(Ie,X),Re=se.length*(xe.size*.352778*1.15);te+Re>K-Ae&&(Y.addPage(),le(Y),te=Ae),Y.text(se,Ae,te,{align:"left"}),te+=Re+(xe.isTitle?5:8)};q.retroalimentacionConsolidada?q.retroalimentacionConsolidada.split(/(?=## )/).forEach(xe=>{if(xe.trim()){const se=xe.trim().split(`
`),Re=se[0].replace("## ",""),et=se.slice(1).join(`
`).trim();_e(Re,{size:14,style:"bold",isTitle:!0}),_e(et,{size:11,style:"normal",isTitle:!1})}}):(_e("Retroalimentacin Consolidada",{size:14,style:"bold",isTitle:!0}),_e("No se ha generado retroalimentacin.",{size:11,style:"normal",isTitle:!1})),Y.save(`Acompanamiento_${q.docente.replace(/\s/g,"_")}_${new Date(q.fecha).toLocaleDateString("es-CL")}.pdf`),N(!1)},L=async ae=>{if(ae.preventDefault(),!U.docente||!U.curso||!U.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let q=m;if(m)await Xxe(m,U);else{const Y=await Yxe(U);g(Y.id),P({...U}),q=Y.id}await D(),q&&alert("Guardado correctamente!")}catch(q){console.error("Error al guardar acompaamiento:",q),u("Error al guardar el registro en la nube.")}},Q=()=>{P(k),g(null),h("form"),u(null)},z=ae=>{P(ae),g(ae.id),h("form"),u(null)},ie=async ae=>{if(window.confirm("Est seguro de que desea eliminar este registro de acompaamiento?"))try{await Zxe(ae),await D()}catch(q){console.error("Error al eliminar acompaamiento:",q),u("No se pudo eliminar el registro en la nube.")}},J=()=>A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompaamiento"}),A.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),a&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!a&&t.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompaamiento en la nube."}),A.jsx("div",{className:"space-y-4",children:!a&&t.length>0&&t.map(ae=>A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ae.curso," - ",ae.asignatura]}),A.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(ae.fecha).toLocaleDateString("es-CL")]})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>z(ae),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),A.jsx("button",{onClick:()=>ie(ae.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},ae.id))})]}),ee=()=>A.jsx("div",{className:"animate-fade-in",children:A.jsxs("form",{onSubmit:L,className:"space-y-8",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompaamiento":"Nuevo Acompaamiento Docente"}),A.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:" Volver al listado"})]}),l&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),A.jsxs("select",{name:"docente",value:U.docente,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[A.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),n.map(ae=>A.jsx("option",{value:ae,children:ae},ae))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),A.jsxs("select",{name:"curso",value:U.curso,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Seleccione"}),xs.map(ae=>A.jsx("option",{value:ae,children:ae},ae))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),A.jsxs("select",{name:"asignatura",value:U.asignatura,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{value:"",children:"Seleccione"}),Hl.map(ae=>A.jsx("option",{value:ae,children:ae},ae))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),A.jsx("input",{type:"text",name:"bloques",value:U.bloques,onChange:B,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:I.map(ae=>A.jsx(At.Fragment,{children:ae.criteria.map((q,Y)=>A.jsxs("tr",{children:[Y===0&&A.jsx("td",{rowSpan:ae.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:ae.domain}),A.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:q.name}),q.levels.map((Ae,j)=>{const K=j+1,X=U.rubricaResultados[q.name]===K;return A.jsx("td",{onClick:()=>T(q.name,K),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${X?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:Ae},K)})]},q.name))},ae.domain))})]})}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),A.jsx("textarea",{name:"observacionesGenerales",value:U.observacionesGenerales,onChange:B,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentacin Consolidada"}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("textarea",{name:"retroalimentacionConsolidada",value:U.retroalimentacionConsolidada,onChange:B,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentacin aqu..."}),A.jsx("button",{type:"button",onClick:O,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),A.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[A.jsx("button",{type:"button",onClick:R,disabled:!m||E,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:E?"...":"Exportar PDF"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompaamiento"})]})]})});return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompaamiento Docente"}),A.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?J():ee()})]})},cE="mensajesInternos",r1e="usuariosLiceo",U6="lir-read-status",a1e=({currentUser:t,refreshUnreadCount:e})=>{const[n,r]=Z.useState("inbox"),[a,s]=Z.useState([]),[i,o]=Z.useState([]),[l,u]=Z.useState(null),[d,h]=Z.useState({announcements:[],messages:[]}),m={para:"",asunto:"",cuerpo:""},[g,b]=Z.useState(m);Z.useEffect(()=>{try{const _=localStorage.getItem(cE);_&&s(JSON.parse(_));const B=localStorage.getItem(r1e);B&&o(JSON.parse(B));const T=localStorage.getItem(`${U6}-${t.id}`);T&&h(JSON.parse(T))}catch(_){console.error("Error loading messaging data",_)}},[t.id]);const w=_=>{s(_),localStorage.setItem(cE,JSON.stringify(_))},E=_=>{h(_),localStorage.setItem(`${U6}-${t.id}`,JSON.stringify(_)),e()},N=_=>{if(u(_),n==="inbox"&&!d.messages.includes(_.id)){const B={...d,messages:[...d.messages,_.id]};E(B)}},I=_=>{if(_.preventDefault(),!g.para||!g.asunto.trim()||!g.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const B={id:crypto.randomUUID(),de:t.email,para:g.para,asunto:g.asunto,cuerpo:g.cuerpo,fecha:new Date().toISOString()},T=localStorage.getItem(cE),O=T?JSON.parse(T):[],R=[B,...O];w(R),b(m),r("sent")},k=_=>{window.confirm("Est seguro de que desea eliminar este mensaje?")&&(w(a.filter(B=>B.id!==_)),u(null))},U=_=>{b({para:_.de,asunto:`Re: ${_.asunto}`,cuerpo:`

--- Mensaje Original ---
${_.cuerpo}`}),r("compose")},P=Z.useMemo(()=>a.filter(_=>_.para===t.email).sort((_,B)=>new Date(B.fecha).getTime()-new Date(_.fecha).getTime()),[a,t.email]),D=Z.useMemo(()=>a.filter(_=>_.de===t.email).sort((_,B)=>new Date(B.fecha).getTime()-new Date(_.fecha).getTime()),[a,t.email]);return A.jsxs("div",{className:"bg-white rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[A.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 flex flex-col",children:[A.jsx("div",{className:"p-4 border-b",children:A.jsx("button",{onClick:()=>{r("compose"),u(null)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700",children:"Redactar"})}),A.jsxs("nav",{className:"p-2 space-y-1",children:[A.jsx("button",{onClick:()=>{r("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="inbox"?"bg-amber-100 text-amber-800":"hover:bg-slate-200"}`,children:"Recibidos"}),A.jsx("button",{onClick:()=>{r("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="sent"?"bg-amber-100 text-amber-800":"hover:bg-slate-200"}`,children:"Enviados"})]})]}),n!=="compose"&&A.jsx("div",{className:"w-1/3 md:w-2/5 border-r overflow-y-auto",children:(n==="inbox"?P:D).map(_=>{const B=n==="inbox"&&!d.messages.includes(_.id);return A.jsxs("div",{onClick:()=>N(_),className:`p-4 border-b cursor-pointer ${(l==null?void 0:l.id)===_.id?"bg-amber-50":"hover:bg-slate-50"}`,children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsx("p",{className:`font-bold truncate ${B?"text-slate-800":"text-slate-600"}`,children:n==="inbox"?_.de:`Para: ${_.para}`}),B&&A.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),A.jsx("p",{className:`truncate text-sm ${B?"text-slate-700 font-semibold":"text-slate-500"}`,children:_.asunto}),A.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(_.fecha).toLocaleString("es-CL")})]},_.id)})}),A.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n==="compose"?A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Nuevo Mensaje"}),A.jsxs("form",{onSubmit:I,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 mb-1",children:"Para:"}),A.jsxs("select",{id:"para",value:g.para,onChange:_=>b({...g,para:_.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm",children:[A.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(_=>_.email!==t.email).map(_=>A.jsxs("option",{value:_.email,children:[_.nombreCompleto," (",_.email,")"]},_.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 mb-1",children:"Asunto:"}),A.jsx("input",{type:"text",id:"asunto",value:g.asunto,onChange:_=>b({...g,asunto:_.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 mb-1",children:"Cuerpo del Mensaje:"}),A.jsx("textarea",{id:"cuerpo",value:g.cuerpo,onChange:_=>b({...g,cuerpo:_.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700",children:"Enviar Mensaje"})})]})]}):l?A.jsxs("div",{children:[A.jsxs("div",{className:"border-b pb-4 mb-4",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:l.asunto}),A.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:[A.jsx("strong",{children:"De:"})," ",l.de," ",A.jsx("br",{}),A.jsx("strong",{children:"Para:"})," ",l.para," ",A.jsx("br",{}),A.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),A.jsx("div",{className:"whitespace-pre-wrap text-slate-700",children:l.cuerpo}),A.jsxs("div",{className:"mt-8 pt-4 border-t flex gap-2",children:[n==="inbox"&&A.jsx("button",{onClick:()=>U(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Responder"}),A.jsx("button",{onClick:()=>k(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200",children:"Eliminar"})]})]}):A.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500",children:A.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i5=function(t,e){return i5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},i5(t,e)};function Fc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i5(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var o5=function(){return o5=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o5.apply(this,arguments)};function Wi(t,e,n,r){function a(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function o(d){try{u(r.next(d))}catch(h){i(h)}}function l(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((r=r.apply(t,[])).next())})}function Ni(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],a=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Sv(t,e,n){if(arguments.length===2)for(var r=0,a=e.length,s;r<a;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var IA=function(){function t(e,n,r,a){this.left=e,this.top=n,this.width=r,this.height=a}return t.prototype.add=function(e,n,r,a){return new t(this.left+e,this.top+n,this.width+r,this.height+a)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(a){return a.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Lw=function(t,e){return IA.fromClientRect(t,e.getBoundingClientRect())},s1e=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),a=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new IA(0,0,r,a)},Uw=function(t){for(var e=[],n=0,r=t.length;n<r;){var a=t.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),n--)}else e.push(a)}return e},$a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],a=-1,s="";++a<n;){var i=t[a];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(a+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},M6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Tv=0;Tv<M6.length;Tv++)i1e[M6.charCodeAt(Tv)]=Tv;var P6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bv=0;Bv<P6.length;Bv++)dg[P6.charCodeAt(Bv)]=Bv;var o1e=function(t){var e=t.length*.75,n=t.length,r,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)s=dg[t.charCodeAt(r)],i=dg[t.charCodeAt(r+1)],o=dg[t.charCodeAt(r+2)],l=dg[t.charCodeAt(r+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},l1e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},c1e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},ph=5,G4=11,uE=2,u1e=G4-ph,J7=65536>>ph,A1e=1<<ph,AE=A1e-1,d1e=1024>>ph,f1e=J7+d1e,h1e=f1e,m1e=32,p1e=h1e+m1e,g1e=65536>>G4,x1e=1<<u1e,v1e=x1e-1,j6=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},y1e=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},w1e=function(t,e){var n=o1e(t),r=Array.isArray(n)?c1e(n):new Uint32Array(n),a=Array.isArray(n)?l1e(n):new Uint16Array(n),s=24,i=j6(a,s/2,r[4]/2),o=r[5]===2?j6(a,(s+r[4])/2):y1e(r,Math.ceil((s+r[4])/4));return new b1e(r[0],r[1],r[2],r[3],i,o)},b1e=function(){function t(e,n,r,a,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>ph],n=(n<<uE)+(e&AE),this.data[n];if(e<=65535)return n=this.index[J7+(e-55296>>ph)],n=(n<<uE)+(e&AE),this.data[n];if(e<this.highStart)return n=p1e-g1e+(e>>G4),n=this.index[n],n+=e>>ph&v1e,n=this.index[n],n=(n<<uE)+(e&AE),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),O6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nv=0;Nv<O6.length;Nv++)C1e[O6.charCodeAt(Nv)]=Nv;var E1e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Q6=50,_1e=1,Y7=2,X7=3,S1e=4,T1e=5,H6=7,Z7=8,V6=9,zd=10,l5=11,z6=12,c5=13,B1e=14,fg=15,u5=16,kv=17,qp=18,N1e=19,G6=20,A5=21,Kp=22,dE=23,S0=24,qo=25,hg=26,mg=27,T0=28,k1e=29,nh=30,I1e=31,Iv=32,Fv=33,d5=34,f5=35,h5=36,xx=37,m5=38,b2=39,C2=40,fE=41,ej=42,F1e=43,R1e=[9001,65288],tj="!",nr="",Rv="",p5=w1e(E1e),AA=[nh,h5],g5=[_1e,Y7,X7,T1e],nj=[zd,Z7],q6=[mg,hg],D1e=g5.concat(nj),K6=[m5,b2,C2,d5,f5],L1e=[fg,c5],U1e=function(t,e){e===void 0&&(e="strict");var n=[],r=[],a=[];return t.forEach(function(s,i){var o=p5.get(s);if(o>Q6?(a.push(!0),o-=Q6):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),n.push(u5);if(o===S1e||o===l5){if(i===0)return r.push(i),n.push(nh);var l=n[i-1];return D1e.indexOf(l)===-1?(r.push(r[i-1]),n.push(l)):(r.push(i),n.push(nh))}if(r.push(i),o===I1e)return n.push(e==="strict"?A5:xx);if(o===ej||o===k1e)return n.push(nh);if(o===F1e)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(xx):n.push(nh);n.push(o)}),[r,n,a]},hE=function(t,e,n,r){var a=r[n];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=n;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==zd)break}if(a===zd)for(var s=n;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var i=r[l];if(i===e)return!0;if(i!==zd)break}if(o!==zd)break}return!1},W6=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===zd)n--;else return r}return 0},M1e=function(t,e,n,r,a){if(n[r]===0)return nr;var s=r-1;if(Array.isArray(a)&&a[s]===!0)return nr;var i=s-1,o=s+1,l=e[s],u=i>=0?e[i]:0,d=e[o];if(l===Y7&&d===X7)return nr;if(g5.indexOf(l)!==-1)return tj;if(g5.indexOf(d)!==-1||nj.indexOf(d)!==-1)return nr;if(W6(s,e)===Z7)return Rv;if(p5.get(t[s])===l5||(l===Iv||l===Fv)&&p5.get(t[o])===l5||l===H6||d===H6||l===V6||[zd,c5,fg].indexOf(l)===-1&&d===V6||[kv,qp,N1e,S0,T0].indexOf(d)!==-1||W6(s,e)===Kp||hE(dE,Kp,s,e)||hE([kv,qp],A5,s,e)||hE(z6,z6,s,e))return nr;if(l===zd)return Rv;if(l===dE||d===dE)return nr;if(d===u5||l===u5)return Rv;if([c5,fg,A5].indexOf(d)!==-1||l===B1e||u===h5&&L1e.indexOf(l)!==-1||l===T0&&d===h5||d===G6||AA.indexOf(d)!==-1&&l===qo||AA.indexOf(l)!==-1&&d===qo||l===mg&&[xx,Iv,Fv].indexOf(d)!==-1||[xx,Iv,Fv].indexOf(l)!==-1&&d===hg||AA.indexOf(l)!==-1&&q6.indexOf(d)!==-1||q6.indexOf(l)!==-1&&AA.indexOf(d)!==-1||[mg,hg].indexOf(l)!==-1&&(d===qo||[Kp,fg].indexOf(d)!==-1&&e[o+1]===qo)||[Kp,fg].indexOf(l)!==-1&&d===qo||l===qo&&[qo,T0,S0].indexOf(d)!==-1)return nr;if([qo,T0,S0,kv,qp].indexOf(d)!==-1)for(var h=s;h>=0;){var m=e[h];if(m===qo)return nr;if([T0,S0].indexOf(m)!==-1)h--;else break}if([mg,hg].indexOf(d)!==-1)for(var h=[kv,qp].indexOf(l)!==-1?i:s;h>=0;){var m=e[h];if(m===qo)return nr;if([T0,S0].indexOf(m)!==-1)h--;else break}if(m5===l&&[m5,b2,d5,f5].indexOf(d)!==-1||[b2,d5].indexOf(l)!==-1&&[b2,C2].indexOf(d)!==-1||[C2,f5].indexOf(l)!==-1&&d===C2||K6.indexOf(l)!==-1&&[G6,hg].indexOf(d)!==-1||K6.indexOf(d)!==-1&&l===mg||AA.indexOf(l)!==-1&&AA.indexOf(d)!==-1||l===S0&&AA.indexOf(d)!==-1||AA.concat(qo).indexOf(l)!==-1&&d===Kp&&R1e.indexOf(t[o])===-1||AA.concat(qo).indexOf(d)!==-1&&l===qp)return nr;if(l===fE&&d===fE){for(var g=n[s],b=1;g>0&&(g--,e[g]===fE);)b++;if(b%2!==0)return nr}return l===Iv&&d===Fv?nr:Rv},P1e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=U1e(t,e.lineBreak),r=n[0],a=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[qo,nh,ej].indexOf(o)!==-1?xx:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,a,i]},j1e=function(){function t(e,n,r,a){this.codePoints=e,this.required=n===tj,this.start=r,this.end=a}return t.prototype.slice=function(){return $a.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),O1e=function(t,e){var n=Uw(t),r=P1e(n,e),a=r[0],s=r[1],i=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=nr;u<o&&(d=M1e(n,s,a,++u,i))===nr;);if(d!==nr||u===o){var h=new j1e(n,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},Q1e=1,H1e=2,Yx=4,$6=8,xy=10,J6=47,Og=92,V1e=9,z1e=32,Dv=34,Wp=61,G1e=35,q1e=36,K1e=37,Lv=39,Uv=40,$p=41,W1e=95,xo=45,$1e=33,J1e=60,Y1e=62,X1e=64,Z1e=91,eve=93,tve=61,nve=123,Mv=63,rve=125,Y6=124,ave=126,sve=128,X6=65533,mE=42,sh=43,ive=44,ove=58,lve=59,vx=46,cve=0,uve=8,Ave=11,dve=14,fve=31,hve=127,du=-1,rj=48,aj=97,sj=101,mve=102,pve=117,gve=122,ij=65,oj=69,lj=70,xve=85,vve=90,Ri=function(t){return t>=rj&&t<=57},yve=function(t){return t>=55296&&t<=57343},B0=function(t){return Ri(t)||t>=ij&&t<=lj||t>=aj&&t<=mve},wve=function(t){return t>=aj&&t<=gve},bve=function(t){return t>=ij&&t<=vve},Cve=function(t){return wve(t)||bve(t)},Eve=function(t){return t>=sve},Pv=function(t){return t===xy||t===V1e||t===z1e},vy=function(t){return Cve(t)||Eve(t)||t===W1e},Z6=function(t){return vy(t)||Ri(t)||t===xo},_ve=function(t){return t>=cve&&t<=uve||t===Ave||t>=dve&&t<=fve||t===hve},Id=function(t,e){return t!==Og?!1:e!==xy},jv=function(t,e,n){return t===xo?vy(e)||Id(e,n):vy(t)?!0:!!(t===Og&&Id(t,e))},pE=function(t,e,n){return t===sh||t===xo?Ri(e)?!0:e===vx&&Ri(n):Ri(t===vx?e:t)},Sve=function(t){var e=0,n=1;(t[e]===sh||t[e]===xo)&&(t[e]===xo&&(n=-1),e++);for(var r=[];Ri(t[e]);)r.push(t[e++]);var a=r.length?parseInt($a.apply(void 0,r),10):0;t[e]===vx&&e++;for(var s=[];Ri(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt($a.apply(void 0,s),10):0;(t[e]===oj||t[e]===sj)&&e++;var l=1;(t[e]===sh||t[e]===xo)&&(t[e]===xo&&(l=-1),e++);for(var u=[];Ri(t[e]);)u.push(t[e++]);var d=u.length?parseInt($a.apply(void 0,u),10):0;return n*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},Tve={type:2},Bve={type:3},Nve={type:4},kve={type:13},Ive={type:8},Fve={type:21},Rve={type:9},Dve={type:10},Lve={type:11},Uve={type:12},Mve={type:14},Ov={type:23},Pve={type:1},jve={type:25},Ove={type:24},Qve={type:26},Hve={type:27},Vve={type:28},zve={type:29},Gve={type:31},x5={type:32},cj=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Uw(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==x5;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Dv:return this.consumeStringToken(Dv);case G1e:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Z6(n)||Id(r,a)){var s=jv(n,r,a)?H1e:Q1e,i=this.consumeName();return{type:5,value:i,flags:s}}break;case q1e:if(this.peekCodePoint(0)===Wp)return this.consumeCodePoint(),kve;break;case Lv:return this.consumeStringToken(Lv);case Uv:return Tve;case $p:return Bve;case mE:if(this.peekCodePoint(0)===Wp)return this.consumeCodePoint(),Mve;break;case sh:if(pE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ive:return Nve;case xo:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(pE(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(jv(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===xo&&u===Y1e)return this.consumeCodePoint(),this.consumeCodePoint(),Ove;break;case vx:if(pE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case J6:if(this.peekCodePoint(0)===mE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===mE&&(d=this.consumeCodePoint(),d===J6))return this.consumeToken();if(d===du)return this.consumeToken()}break;case ove:return Qve;case lve:return Hve;case J1e:if(this.peekCodePoint(0)===$1e&&this.peekCodePoint(1)===xo&&this.peekCodePoint(2)===xo)return this.consumeCodePoint(),this.consumeCodePoint(),jve;break;case X1e:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(jv(h,m,g)){var i=this.consumeName();return{type:7,value:i}}break;case Z1e:return Vve;case Og:if(Id(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case eve:return zve;case tve:if(this.peekCodePoint(0)===Wp)return this.consumeCodePoint(),Ive;break;case nve:return Lve;case rve:return Uve;case pve:case xve:var b=this.peekCodePoint(0),w=this.peekCodePoint(1);return b===sh&&(B0(w)||w===Mv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Y6:if(this.peekCodePoint(0)===Wp)return this.consumeCodePoint(),Rve;if(this.peekCodePoint(0)===Y6)return this.consumeCodePoint(),Fve;break;case ave:if(this.peekCodePoint(0)===Wp)return this.consumeCodePoint(),Dve;break;case du:return x5}return Pv(e)?(this.consumeWhiteSpace(),Gve):Ri(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):vy(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:$a(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();B0(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Mv&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var a=parseInt($a.apply(void 0,e.map(function(l){return l===Mv?rj:l})),16),s=parseInt($a.apply(void 0,e.map(function(l){return l===Mv?lj:l})),16);return{type:30,start:a,end:s}}var i=parseInt($a.apply(void 0,e),16);if(this.peekCodePoint(0)===xo&&B0(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];B0(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var s=parseInt($a.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Uv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Uv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===du)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Lv||n===Dv){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===du||this.peekCodePoint(0)===$p)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Ov)}for(;;){var a=this.consumeCodePoint();if(a===du||a===$p)return{type:22,value:$a.apply(void 0,e)};if(Pv(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===du||this.peekCodePoint(0)===$p?(this.consumeCodePoint(),{type:22,value:$a.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ov);if(a===Dv||a===Lv||a===Uv||_ve(a))return this.consumeBadUrlRemnants(),Ov;if(a===Og)if(Id(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ov;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;Pv(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===$p||e===du)return;Id(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var a=Math.min(n,e);r+=$a.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var a=this._value[r];if(a===du||a===void 0||a===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(a===xy)return this._value.splice(0,r),Pve;if(a===Og){var s=this._value[r+1];s!==du&&s!==void 0&&(s===xy?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Id(a,s)&&(n+=this.consumeStringSlice(r),n+=$a(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Yx,r=this.peekCodePoint(0);for((r===sh||r===xo)&&e.push(this.consumeCodePoint());Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(r===vx&&Ri(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=$6;Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===oj||r===sj)&&((a===sh||a===xo)&&Ri(s)||Ri(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=$6;Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Sve(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(jv(a,s,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return a===K1e?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(B0(e)){for(var n=$a(e);B0(this.peekCodePoint(0))&&n.length<6;)n+=$a(this.consumeCodePoint());Pv(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||yve(r)||r>1114111?X6:r}return e===du?X6:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(Z6(n))e+=$a(n);else if(Id(n,this.peekCodePoint(0)))e+=$a(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),uj=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new cj;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Kve(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?x5:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Xx=function(t){return t.type===15},Zm=function(t){return t.type===17},$r=function(t){return t.type===20},qve=function(t){return t.type===0},v5=function(t,e){return $r(t)&&t.value===e},Aj=function(t){return t.type!==31},Fm=function(t){return t.type!==31&&t.type!==4},Fu=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},Kve=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},gf=function(t){return t.type===17||t.type===15},ms=function(t){return t.type===16||gf(t)},dj=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ci={type:17,number:0,flags:Yx},q4={type:16,number:50,flags:Yx},Gd={type:16,number:100,flags:Yx},pg=function(t,e,n){var r=t[0],a=t[1];return[ra(r,e),ra(typeof a<"u"?a:r,n)]},ra=function(t,e){if(t.type===16)return t.number/100*e;if(Xx(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},fj="deg",hj="grad",mj="rad",pj="turn",Mw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case fj:return Math.PI*e.number/180;case hj:return Math.PI/200*e.number;case mj:return e.number;case pj:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},gj=function(t){return t.type===15&&(t.unit===fj||t.unit===hj||t.unit===mj||t.unit===pj)},xj=function(t){var e=t.filter($r).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ci,ci];case"to top":case"bottom":return Ul(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ci,Gd];case"to right":case"left":return Ul(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Gd,Gd];case"to bottom":case"top":return Ul(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Gd,ci];case"to left":case"right":return Ul(270)}return 0},Ul=function(t){return Math.PI*t/180},Zd={name:"color",parse:function(t,e){if(e.type===18){var n=Wve[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return qd(parseInt(r+r,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return qd(parseInt(r+r,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return qd(parseInt(r,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return qd(parseInt(r,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=CA[e.value.toUpperCase()];if(typeof o<"u")return o}return CA.TRANSPARENT}},ef=function(t){return(255&t)===0},Qs=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+r+","+n+","+e/255+")":"rgb("+a+","+r+","+n+")"},qd=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},eR=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},tR=function(t,e){var n=e.filter(Fm);if(n.length===3){var r=n.map(eR),a=r[0],s=r[1],i=r[2];return qd(a,s,i,1)}if(n.length===4){var o=n.map(eR),a=o[0],s=o[1],i=o[2],l=o[3];return qd(a,s,i,l)}return 0};function gE(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var nR=function(t,e){var n=e.filter(Fm),r=n[0],a=n[1],s=n[2],i=n[3],o=(r.type===17?Ul(r.number):Mw.parse(t,r))/(Math.PI*2),l=ms(a)?a.number/100:0,u=ms(s)?s.number/100:0,d=typeof i<"u"&&ms(i)?ra(i,1):1;if(l===0)return qd(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,m=u*2-h,g=gE(m,h,o+1/3),b=gE(m,h,o),w=gE(m,h,o-1/3);return qd(g*255,b*255,w*255,d)},Wve={hsl:nR,hsla:nR,rgb:tR,rgba:tR},Qg=function(t,e){return Zd.parse(t,uj.create(e).parseComponentValue())},CA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},$ve={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if($r(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Jve={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Pw=function(t,e){var n=Zd.parse(t,e[0]),r=e[1];return r&&ms(r)?{color:n,stop:r}:{color:n,stop:null}},rR=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=ci),r.stop===null&&(r.stop=Gd);for(var a=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=ra(o,e);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,m=a[u-1],g=(d-m)/(h+1),b=1;b<=h;b++)a[u+b-1]=g*b;u=null}}return t.map(function(w,E){var N=w.color;return{color:N,stop:Math.max(Math.min(1,a[E]/e),0)}})},Yve=function(t,e,n){var r=e/2,a=n/2,s=ra(t[0],e)-r,i=a-ra(t[1],n);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Xve=function(t,e,n){var r=typeof t=="number"?t:Yve(t,e,n),a=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,i=n/2,o=a/2,l=Math.sin(r-Math.PI/2)*o,u=Math.cos(r-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},gc=function(t,e){return Math.sqrt(t*t+e*e)},aR=function(t,e,n,r,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=gc(n-l,r-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Zve=function(t,e,n,r,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-a)));break;case 2:if(t.shape===0)s=i=Math.min(gc(e,n),gc(e,n-a),gc(e-r,n),gc(e-r,n-a));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-a))/Math.min(Math.abs(e),Math.abs(e-r)),l=aR(r,a,e,n,!0),u=l[0],d=l[1];s=gc(u-e,(d-n)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-a)));break;case 3:if(t.shape===0)s=i=Math.max(gc(e,n),gc(e,n-a),gc(e-r,n),gc(e-r,n-a));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-a))/Math.max(Math.abs(e),Math.abs(e-r)),h=aR(r,a,e,n,!1),u=h[0],d=h[1];s=gc(u-e,(d-n)/o),i=o*s}break}return Array.isArray(t.size)&&(s=ra(t.size[0],r),i=t.size.length===2?ra(t.size[1],a):s),[s,i]},e2e=function(t,e){var n=Ul(180),r=[];return Fu(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){n=xj(a);return}else if(gj(i)){n=Mw.parse(t,i);return}}var o=Pw(t,a);r.push(o)}),{angle:n,stops:r,type:1}},Qv=function(t,e){var n=Ul(180),r=[];return Fu(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=xj(a);return}else if(gj(i)){n=(Mw.parse(t,i)+Ul(270))%Ul(360);return}}var o=Pw(t,a);r.push(o)}),{angle:n,stops:r,type:1}},t2e=function(t,e){var n=Ul(180),r=[],a=1,s=0,i=3,o=[];return Fu(e).forEach(function(l,u){var d=l[0];if(u===0){if($r(d)&&d.value==="linear"){a=1;return}else if($r(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=Zd.parse(t,d.values[0]);r.push({stop:ci,color:h})}else if(d.name==="to"){var h=Zd.parse(t,d.values[0]);r.push({stop:Gd,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(Fm);if(m.length===2){var h=Zd.parse(t,m[1]),g=m[0];Zm(g)&&r.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),a===1?{angle:(n+Ul(180))%Ul(360),stops:r,type:a}:{size:i,shape:s,stops:r,position:o,type:a}},vj="closest-side",yj="farthest-side",wj="closest-corner",bj="farthest-corner",Cj="circle",Ej="ellipse",_j="cover",Sj="contain",n2e=function(t,e){var n=0,r=3,a=[],s=[];return Fu(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,m){if(u)if($r(m))switch(m.value){case"center":return s.push(q4),h;case"top":case"left":return s.push(ci),h;case"right":case"bottom":return s.push(Gd),h}else(ms(m)||gf(m))&&s.push(m);else if($r(m))switch(m.value){case Cj:return n=0,!1;case Ej:return n=1,!1;case"at":return u=!0,!1;case vj:return r=0,!1;case _j:case yj:return r=1,!1;case Sj:case wj:return r=2,!1;case bj:return r=3,!1}else if(gf(m)||ms(m))return Array.isArray(r)||(r=[]),r.push(m),!1;return h},l)}if(l){var d=Pw(t,i);a.push(d)}}),{size:r,shape:n,stops:a,position:s,type:2}},Hv=function(t,e){var n=0,r=3,a=[],s=[];return Fu(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if($r(h))switch(h.value){case"center":return s.push(q4),!1;case"top":case"left":return s.push(ci),!1;case"right":case"bottom":return s.push(Gd),!1}else if(ms(h)||gf(h))return s.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if($r(h))switch(h.value){case Cj:return n=0,!1;case Ej:return n=1,!1;case Sj:case vj:return r=0,!1;case yj:return r=1,!1;case wj:return r=2,!1;case _j:case bj:return r=3,!1}else if(gf(h)||ms(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},l)),l){var u=Pw(t,i);a.push(u)}}),{size:r,shape:n,stops:a,position:s,type:2}},r2e=function(t){return t.type===1},a2e=function(t){return t.type===2},K4={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=Tj[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function s2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Tj[t.name])}var Tj={"linear-gradient":e2e,"-moz-linear-gradient":Qv,"-ms-linear-gradient":Qv,"-o-linear-gradient":Qv,"-webkit-linear-gradient":Qv,"radial-gradient":n2e,"-moz-radial-gradient":Hv,"-ms-radial-gradient":Hv,"-o-radial-gradient":Hv,"-webkit-radial-gradient":Hv,"-webkit-gradient":t2e},i2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Fm(r)&&s2e(r)}).map(function(r){return K4.parse(t,r)})}},o2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if($r(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},l2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Fu(e).map(function(n){return n.filter(ms)}).map(dj)}},c2e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Fu(e).map(function(n){return n.filter($r).map(function(r){return r.value}).join(" ")}).map(u2e)}},u2e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},mm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(mm||(mm={}));var A2e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Fu(e).map(function(n){return n.filter(d2e)})}},d2e=function(t){return $r(t)||ms(t)},jw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},f2e=jw("top"),h2e=jw("right"),m2e=jw("bottom"),p2e=jw("left"),Ow=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return dj(n.filter(ms))}}},g2e=Ow("top-left"),x2e=Ow("top-right"),v2e=Ow("bottom-right"),y2e=Ow("bottom-left"),Qw=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},w2e=Qw("top"),b2e=Qw("right"),C2e=Qw("bottom"),E2e=Qw("left"),Hw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Xx(n)?n.number:0}}},_2e=Hw("top"),S2e=Hw("right"),T2e=Hw("bottom"),B2e=Hw("left"),N2e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k2e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},I2e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter($r).reduce(function(n,r){return n|F2e(r.value)},0)}},F2e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},R2e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},D2e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},yy;(function(t){t.NORMAL="normal",t.STRICT="strict"})(yy||(yy={}));var L2e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return yy.STRICT;case"normal":default:return yy.NORMAL}}},U2e={name:"line-height",initialValue:"normal",prefix:!1,type:4},sR=function(t,e){return $r(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:ms(t)?ra(t,e):e},M2e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:K4.parse(t,e)}},P2e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},y5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Vw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},j2e=Vw("top"),O2e=Vw("right"),Q2e=Vw("bottom"),H2e=Vw("left"),V2e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter($r).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},z2e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},zw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},G2e=zw("top"),q2e=zw("right"),K2e=zw("bottom"),W2e=zw("left"),$2e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},J2e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Y2e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&v5(e[0],"none")?[]:Fu(e).map(function(n){for(var r={color:CA.TRANSPARENT,offsetX:ci,offsetY:ci,blur:ci},a=0,s=0;s<n.length;s++){var i=n[s];gf(i)?(a===0?r.offsetX=i:a===1?r.offsetY=i:r.blur=i,a++):r.color=Zd.parse(t,i)}return r})}},X2e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Z2e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=nye[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},eye=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},tye=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,a,s,i,o]:null},nye={matrix:eye,matrix3d:tye},iR={type:16,number:50,flags:Yx},rye=[iR,iR],aye={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(ms);return n.length!==2?rye:[n[0],n[1]]}},sye={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Hg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Hg||(Hg={}));var iye={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Hg.BREAK_ALL;case"keep-all":return Hg.KEEP_ALL;case"normal":default:return Hg.NORMAL}}},oye={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Zm(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Bj={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},lye={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Zm(e)?e.number:1}},cye={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uye={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter($r).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Aye={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(a){switch(a.type){case 20:case 0:n.push(a.value);break;case 17:n.push(a.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},dye={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fye={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Zm(e))return e.number;if($r(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},hye={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter($r).map(function(n){return n.value})}},mye={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Bs=function(t,e){return(t&e)!==0},pye={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},gye={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],a=e.filter(Aj),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&Zm(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},xye={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(Aj),a=0;a<r.length;a++){var s=r[a],i=r[a+1];if($r(s)&&s.value!=="none"){var o=i&&Zm(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},vye={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Xx).map(function(n){return Bj.parse(t,n)})}},yye={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],a=e.filter(qve);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;r.push({open:i,close:o})}return r}},oR=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},wye={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&v5(e[0],"none")?[]:Fu(e).map(function(n){for(var r={color:255,offsetX:ci,offsetY:ci,blur:ci,spread:ci,inset:!1},a=0,s=0;s<n.length;s++){var i=n[s];v5(i,"inset")?r.inset=!0:gf(i)?(a===0?r.offsetX=i:a===1?r.offsetY=i:a===2?r.blur=i:r.spread=i,a++):r.color=Zd.parse(t,i)}return r})}},bye={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter($r).forEach(function(a){switch(a.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(a){r.indexOf(a)===-1&&r.push(a)}),r}},Cye={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Eye={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Xx(e)?e.number:0}},_ye=function(){function t(e,n){var r,a;this.animationDuration=Kt(e,vye,n.animationDuration),this.backgroundClip=Kt(e,$ve,n.backgroundClip),this.backgroundColor=Kt(e,Jve,n.backgroundColor),this.backgroundImage=Kt(e,i2e,n.backgroundImage),this.backgroundOrigin=Kt(e,o2e,n.backgroundOrigin),this.backgroundPosition=Kt(e,l2e,n.backgroundPosition),this.backgroundRepeat=Kt(e,c2e,n.backgroundRepeat),this.backgroundSize=Kt(e,A2e,n.backgroundSize),this.borderTopColor=Kt(e,f2e,n.borderTopColor),this.borderRightColor=Kt(e,h2e,n.borderRightColor),this.borderBottomColor=Kt(e,m2e,n.borderBottomColor),this.borderLeftColor=Kt(e,p2e,n.borderLeftColor),this.borderTopLeftRadius=Kt(e,g2e,n.borderTopLeftRadius),this.borderTopRightRadius=Kt(e,x2e,n.borderTopRightRadius),this.borderBottomRightRadius=Kt(e,v2e,n.borderBottomRightRadius),this.borderBottomLeftRadius=Kt(e,y2e,n.borderBottomLeftRadius),this.borderTopStyle=Kt(e,w2e,n.borderTopStyle),this.borderRightStyle=Kt(e,b2e,n.borderRightStyle),this.borderBottomStyle=Kt(e,C2e,n.borderBottomStyle),this.borderLeftStyle=Kt(e,E2e,n.borderLeftStyle),this.borderTopWidth=Kt(e,_2e,n.borderTopWidth),this.borderRightWidth=Kt(e,S2e,n.borderRightWidth),this.borderBottomWidth=Kt(e,T2e,n.borderBottomWidth),this.borderLeftWidth=Kt(e,B2e,n.borderLeftWidth),this.boxShadow=Kt(e,wye,n.boxShadow),this.color=Kt(e,N2e,n.color),this.direction=Kt(e,k2e,n.direction),this.display=Kt(e,I2e,n.display),this.float=Kt(e,R2e,n.cssFloat),this.fontFamily=Kt(e,Aye,n.fontFamily),this.fontSize=Kt(e,dye,n.fontSize),this.fontStyle=Kt(e,mye,n.fontStyle),this.fontVariant=Kt(e,hye,n.fontVariant),this.fontWeight=Kt(e,fye,n.fontWeight),this.letterSpacing=Kt(e,D2e,n.letterSpacing),this.lineBreak=Kt(e,L2e,n.lineBreak),this.lineHeight=Kt(e,U2e,n.lineHeight),this.listStyleImage=Kt(e,M2e,n.listStyleImage),this.listStylePosition=Kt(e,P2e,n.listStylePosition),this.listStyleType=Kt(e,y5,n.listStyleType),this.marginTop=Kt(e,j2e,n.marginTop),this.marginRight=Kt(e,O2e,n.marginRight),this.marginBottom=Kt(e,Q2e,n.marginBottom),this.marginLeft=Kt(e,H2e,n.marginLeft),this.opacity=Kt(e,lye,n.opacity);var s=Kt(e,V2e,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Kt(e,z2e,n.overflowWrap),this.paddingTop=Kt(e,G2e,n.paddingTop),this.paddingRight=Kt(e,q2e,n.paddingRight),this.paddingBottom=Kt(e,K2e,n.paddingBottom),this.paddingLeft=Kt(e,W2e,n.paddingLeft),this.paintOrder=Kt(e,bye,n.paintOrder),this.position=Kt(e,J2e,n.position),this.textAlign=Kt(e,$2e,n.textAlign),this.textDecorationColor=Kt(e,cye,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Kt(e,uye,(a=n.textDecorationLine)!==null&&a!==void 0?a:n.textDecoration),this.textShadow=Kt(e,Y2e,n.textShadow),this.textTransform=Kt(e,X2e,n.textTransform),this.transform=Kt(e,Z2e,n.transform),this.transformOrigin=Kt(e,aye,n.transformOrigin),this.visibility=Kt(e,sye,n.visibility),this.webkitTextStrokeColor=Kt(e,Cye,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kt(e,Eye,n.webkitTextStrokeWidth),this.wordBreak=Kt(e,iye,n.wordBreak),this.zIndex=Kt(e,oye,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ef(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Bs(this.display,4)||Bs(this.display,33554432)||Bs(this.display,268435456)||Bs(this.display,536870912)||Bs(this.display,67108864)||Bs(this.display,134217728)},t}(),Sye=function(){function t(e,n){this.content=Kt(e,pye,n.content),this.quotes=Kt(e,yye,n.quotes)}return t}(),lR=function(){function t(e,n){this.counterIncrement=Kt(e,gye,n.counterIncrement),this.counterReset=Kt(e,xye,n.counterReset)}return t}(),Kt=function(t,e,n){var r=new cj,a=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(a);var s=new uj(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,$r(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Mw.parse(t,s.parseComponentValue());case"color":return Zd.parse(t,s.parseComponentValue());case"image":return K4.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return gf(o)?o:ci;case"length-percentage":var l=s.parseComponentValue();return ms(l)?l:ci;case"time":return Bj.parse(t,s.parseComponentValue())}break}},Tye="data-html2canvas-debug",Bye=function(t){var e=t.getAttribute(Tye);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},w5=function(t,e){var n=Bye(t);return n===1||e===n},Ru=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,w5(n,3))debugger;this.styles=new _ye(e,window.getComputedStyle(n,null)),E5(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Lw(this.context,n),w5(n,4)&&(this.flags|=16)}return t}(),Nye="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",cR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vv=0;Vv<cR.length;Vv++)gg[cR.charCodeAt(Vv)]=Vv;var kye=function(t){var e=t.length*.75,n=t.length,r,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)s=gg[t.charCodeAt(r)],i=gg[t.charCodeAt(r+1)],o=gg[t.charCodeAt(r+2)],l=gg[t.charCodeAt(r+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},Iye=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},Fye=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},gh=5,W4=11,xE=2,Rye=W4-gh,Nj=65536>>gh,Dye=1<<gh,vE=Dye-1,Lye=1024>>gh,Uye=Nj+Lye,Mye=Uye,Pye=32,jye=Mye+Pye,Oye=65536>>W4,Qye=1<<Rye,Hye=Qye-1,uR=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Vye=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},zye=function(t,e){var n=kye(t),r=Array.isArray(n)?Fye(n):new Uint32Array(n),a=Array.isArray(n)?Iye(n):new Uint16Array(n),s=24,i=uR(a,s/2,r[4]/2),o=r[5]===2?uR(a,(s+r[4])/2):Vye(r,Math.ceil((s+r[4])/4));return new Gye(r[0],r[1],r[2],r[3],i,o)},Gye=function(){function t(e,n,r,a,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>gh],n=(n<<xE)+(e&vE),this.data[n];if(e<=65535)return n=this.index[Nj+(e-55296>>gh)],n=(n<<xE)+(e&vE),this.data[n];if(e<this.highStart)return n=jye-Oye+(e>>W4),n=this.index[n],n+=e>>gh&Hye,n=this.index[n],n=(n<<xE)+(e&vE),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),AR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zv=0;zv<AR.length;zv++)qye[AR.charCodeAt(zv)]=zv;var Kye=1,yE=2,wE=3,dR=4,fR=5,Wye=7,hR=8,bE=9,CE=10,mR=11,pR=12,gR=13,xR=14,EE=15,$ye=function(t){for(var e=[],n=0,r=t.length;n<r;){var a=t.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),n--)}else e.push(a)}return e},Jye=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],a=-1,s="";++a<n;){var i=t[a];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(a+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Yye=zye(Nye),Il="",_E="",Xye=function(t){return Yye.get(t)},Zye=function(t,e,n){var r=n-2,a=e[r],s=e[n-1],i=e[n];if(s===yE&&i===wE)return Il;if(s===yE||s===wE||s===dR||i===yE||i===wE||i===dR)return _E;if(s===hR&&[hR,bE,mR,pR].indexOf(i)!==-1||(s===mR||s===bE)&&(i===bE||i===CE)||(s===pR||s===CE)&&i===CE||i===gR||i===fR||i===Wye||s===Kye)return Il;if(s===gR&&i===xR){for(;a===fR;)a=e[--r];if(a===xR)return Il}if(s===EE&&i===EE){for(var o=0;a===EE;)o++,a=e[--r];if(o%2===0)return Il}return _E},ewe=function(t){var e=$ye(t),n=e.length,r=0,a=0,s=e.map(Xye);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=Il;r<n&&(i=Zye(e,s,++r))===Il;);if(i!==Il||r===n){var o=Jye.apply(null,e.slice(a,r));return a=r,{value:o,done:!1}}return{done:!0,value:null}}}},twe=function(t){for(var e=ewe(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},nwe=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var a=n.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(r),s===e)return!0}}return!1},rwe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,a=Uw(r.data).map(function(l){return $a(l)}),s=0,i={},o=a.every(function(l,u){n.setStart(r,s),n.setEnd(r,s+l.length);var d=n.getBoundingClientRect();s+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},awe=function(){return typeof new Image().crossOrigin<"u"},swe=function(){return typeof new XMLHttpRequest().responseType=="string"},iwe=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},vR=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},owe=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var a=new Image,s=e.toDataURL();a.src=s;var i=b5(n,n,0,0,a);return r.fillStyle="red",r.fillRect(0,0,n,n),yR(i).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=n+"px",vR(l)?yR(b5(n,n,0,0,u)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),vR(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},b5=function(t,e,n,r,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},yR=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ai={get SUPPORT_RANGE_BOUNDS(){var t=nwe(document);return Object.defineProperty(ai,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ai.SUPPORT_RANGE_BOUNDS&&rwe(document);return Object.defineProperty(ai,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=iwe(document);return Object.defineProperty(ai,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?owe(document):Promise.resolve(!1);return Object.defineProperty(ai,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=awe();return Object.defineProperty(ai,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=swe();return Object.defineProperty(ai,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ai,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ai,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Vg=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),lwe=function(t,e,n,r){var a=Awe(e,n),s=[],i=0;return a.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(ai.SUPPORT_RANGE_BOUNDS){var l=wR(r,i,o.length).getClientRects();if(l.length>1){var u=$4(o),d=0;u.forEach(function(m){s.push(new Vg(m,IA.fromDOMRectList(t,wR(r,d+i,m.length).getClientRects()))),d+=m.length})}else s.push(new Vg(o,IA.fromDOMRectList(t,l)))}else{var h=r.splitText(o.length);s.push(new Vg(o,cwe(t,r))),r=h}else ai.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},cwe=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(r,e);var s=Lw(t,r);return r.firstChild&&a.replaceChild(r.firstChild,r),s}}return IA.EMPTY},wR=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var a=r.createRange();return a.setStart(t,e),a.setEnd(t,e+n),a},$4=function(t){if(ai.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return twe(t)},uwe=function(t,e){if(ai.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return fwe(t,e)},Awe=function(t,e){return e.letterSpacing!==0?$4(t):uwe(t,e)},dwe=[32,160,4961,65792,65793,4153,4241],fwe=function(t,e){for(var n=O1e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],a,s=function(){if(a.value){var i=a.value.slice(),o=Uw(i),l="";o.forEach(function(u){dwe.indexOf(u)===-1?l+=$a(u):(l.length&&r.push(l),r.push($a(u)),l="")}),l.length&&r.push(l)}};!(a=n.next()).done;)s();return r},hwe=function(){function t(e,n,r){this.text=mwe(n.data,r.textTransform),this.textBounds=lwe(e,this.text,r,n)}return t}(),mwe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(pwe,gwe);case 2:return t.toUpperCase();default:return t}},pwe=/(^|\s|:|-|\(|\))([a-z])/g,gwe=function(t,e,n){return t.length>0?e+n.toUpperCase():t},kj=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a.src=r.currentSrc||r.src,a.intrinsicWidth=r.naturalWidth,a.intrinsicHeight=r.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Ru),Ij=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a.canvas=r,a.intrinsicWidth=r.width,a.intrinsicHeight=r.height,a}return e}(Ru),Fj=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this,s=new XMLSerializer,i=Lw(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),a.intrinsicWidth=r.width.baseVal.value,a.intrinsicHeight=r.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Ru),Rj=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a.value=r.value,a}return e}(Ru),C5=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a.start=r.start,a.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,a}return e}(Ru),xwe=[{type:15,flags:0,unit:"px",number:3}],vwe=[{type:16,flags:0,number:50}],ywe=function(t){return t.width>t.height?new IA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new IA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},wwe=function(t){var e=t.type===bwe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},wy="checkbox",by="radio",bwe="password",bR=707406591,J4=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;switch(a.type=r.type.toLowerCase(),a.checked=r.checked,a.value=wwe(r),(a.type===wy||a.type===by)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=ywe(a.bounds)),a.type){case wy:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=xwe;break;case by:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=vwe;break}return a}return e}(Ru),Dj=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Ru),Lj=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a.value=r.value,a}return e}(Ru),Uj=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;a.src=r.src,a.width=parseInt(r.width,10)||0,a.height=parseInt(r.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){a.tree=Pj(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?Qg(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):CA.TRANSPARENT,i=r.contentWindow.document.body?Qg(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):CA.TRANSPARENT;a.backgroundColor=ef(s)?ef(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Ru),Cwe=["OL","UL","MENU"],E2=function(t,e,n,r){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,jj(a)&&a.data.trim().length>0)n.textNodes.push(new hwe(t,a,n.styles));else if(Y0(a))if(Vj(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return E2(t,o,n,r)});else{var i=Mj(t,a);i.styles.isVisible()&&(Ewe(a,i,r)?i.flags|=4:_we(i.styles)&&(i.flags|=2),Cwe.indexOf(a.tagName)!==-1&&(i.flags|=8),n.elements.push(i),a.slot,a.shadowRoot?E2(t,a.shadowRoot,i,r):!Cy(a)&&!Oj(a)&&!Ey(a)&&E2(t,a,i,r))}},Mj=function(t,e){return _5(e)?new kj(t,e):Qj(e)?new Ij(t,e):Oj(e)?new Fj(t,e):Swe(e)?new Rj(t,e):Twe(e)?new C5(t,e):Bwe(e)?new J4(t,e):Ey(e)?new Dj(t,e):Cy(e)?new Lj(t,e):Hj(e)?new Uj(t,e):new Ru(t,e)},Pj=function(t,e){var n=Mj(t,e);return n.flags|=4,E2(t,e,n,n),n},Ewe=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Y4(t)&&n.styles.isTransparent()},_we=function(t){return t.isPositioned()||t.isFloating()},jj=function(t){return t.nodeType===Node.TEXT_NODE},Y0=function(t){return t.nodeType===Node.ELEMENT_NODE},E5=function(t){return Y0(t)&&typeof t.style<"u"&&!_2(t)},_2=function(t){return typeof t.className=="object"},Swe=function(t){return t.tagName==="LI"},Twe=function(t){return t.tagName==="OL"},Bwe=function(t){return t.tagName==="INPUT"},Nwe=function(t){return t.tagName==="HTML"},Oj=function(t){return t.tagName==="svg"},Y4=function(t){return t.tagName==="BODY"},Qj=function(t){return t.tagName==="CANVAS"},CR=function(t){return t.tagName==="VIDEO"},_5=function(t){return t.tagName==="IMG"},Hj=function(t){return t.tagName==="IFRAME"},ER=function(t){return t.tagName==="STYLE"},kwe=function(t){return t.tagName==="SCRIPT"},Cy=function(t){return t.tagName==="TEXTAREA"},Ey=function(t){return t.tagName==="SELECT"},Vj=function(t){return t.tagName==="SLOT"},_R=function(t){return t.tagName.indexOf("-")>0},Iwe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,a=e.counterReset,s=!0;r!==null&&r.forEach(function(o){var l=n.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=n.counters[o.counter];i.push(o.counter),l||(l=n.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),SR={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},TR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Fwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Rwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},N0=function(t,e,n,r,a,s){return t<e||t>n?yx(t,a,s.length>0):r.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=r.values[l];return i},"")+s},zj=function(t,e,n,r){var a="";do n||t--,a=r(t)+a,t/=e;while(t*e>=e);return a},Ka=function(t,e,n,r,a){var s=n-e+1;return(t<0?"-":"")+(zj(Math.abs(t),s,r,function(i){return $a(Math.floor(i%s)+e)})+a)},$f=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return zj(Math.abs(t),r,!1,function(a){return e[Math.floor(a%r)]})+n},G0=1,Nd=2,kd=4,xg=8,dA=function(t,e,n,r,a,s){if(t<-9999||t>9999)return yx(t,4,a.length>0);var i=Math.abs(t),o=a;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Bs(s,G0)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Bs(s,Nd)||u===1&&l===1&&Bs(s,kd)&&t>100||u===1&&l>1&&Bs(s,xg)?o=e[u]+(l>0?n[l-1]:"")+o:u===1&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},BR="",NR="",kR="",SE="",yx=function(t,e,n){var r=n?". ":"",a=n?"":"",s=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Ka(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return $f(t,"",a);case 6:return N0(t,1,3999,SR,3,r).toLowerCase();case 7:return N0(t,1,3999,SR,3,r);case 8:return Ka(t,945,969,!1,r);case 9:return Ka(t,97,122,!1,r);case 10:return Ka(t,65,90,!1,r);case 11:return Ka(t,1632,1641,!0,r);case 12:case 49:return N0(t,1,9999,TR,3,r);case 35:return N0(t,1,9999,TR,3,r).toLowerCase();case 13:return Ka(t,2534,2543,!0,r);case 14:case 30:return Ka(t,6112,6121,!0,r);case 15:return $f(t,"",a);case 16:return $f(t,"",a);case 17:case 48:return dA(t,"",BR,"",a,Nd|kd|xg);case 47:return dA(t,"",NR,"",a,G0|Nd|kd|xg);case 42:return dA(t,"",BR,"",a,Nd|kd|xg);case 41:return dA(t,"",NR,"",a,G0|Nd|kd|xg);case 26:return dA(t,"","",kR,a,0);case 25:return dA(t,"","",kR,a,G0|Nd|kd);case 31:return dA(t,"","",SE,s,G0|Nd|kd);case 33:return dA(t,"","",SE,s,0);case 32:return dA(t,"","",SE,s,G0|Nd|kd);case 18:return Ka(t,2406,2415,!0,r);case 20:return N0(t,1,19999,Rwe,3,r);case 21:return Ka(t,2790,2799,!0,r);case 22:return Ka(t,2662,2671,!0,r);case 22:return N0(t,1,10999,Fwe,3,r);case 23:return $f(t,"");case 24:return $f(t,"");case 27:return Ka(t,3302,3311,!0,r);case 28:return $f(t,"",a);case 29:return $f(t,"",a);case 34:return Ka(t,3792,3801,!0,r);case 37:return Ka(t,6160,6169,!0,r);case 38:return Ka(t,4160,4169,!0,r);case 39:return Ka(t,2918,2927,!0,r);case 40:return Ka(t,1776,1785,!0,r);case 43:return Ka(t,3046,3055,!0,r);case 44:return Ka(t,3174,3183,!0,r);case 45:return Ka(t,3664,3673,!0,r);case 46:return Ka(t,3872,3881,!0,r);case 3:default:return Ka(t,48,57,!0,r)}},Gj="data-html2canvas-ignore",IR=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new Iwe,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,a=Dwe(e,n);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=Mwe(a).then(function(){return Wi(r,void 0,void 0,function(){var d,h;return Ni(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(Qwe),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Uwe(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(jwe(document.doctype)+"<html></html>"),Owe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(w5(e,2))debugger;if(Qj(e))return this.createCanvasClone(e);if(CR(e))return this.createVideoClone(e);if(ER(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return _5(n)&&(_5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),_R(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return TE(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=r,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,n,r){(!Y0(n)||!kwe(n)&&!n.hasAttribute(Gj)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Y0(n)||!ER(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Y0(s)&&Vj(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(n,o,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(jj(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Y0(e)&&(E5(e)||_2(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&E5(a)&&(this.clonedReferenceElement=a),Y4(a)&&zwe(a);var l=this.counters.parse(new lR(this.context,s)),u=this.resolvePseudoContent(e,a,i,zg.BEFORE);_R(e)&&(n=!0),CR(e)||this.cloneChildNodes(e,a,n),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,o,zg.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||_2(e))&&!Hj(e)||n)&&TE(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(Cy(e)||Ey(e))&&(Cy(a)||Ey(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,a){var s=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new lR(this.context,r));var l=new Sye(this.context,r),u=o.createElement("html2canvaspseudoelement");TE(r,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",u.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter($r);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Fm),w=b[0],E=b[1];if(w&&$r(w)){var N=s.counters.getCounterValue(w.value),I=E&&$r(E)?y5.parse(s.context,E.value):3;u.appendChild(o.createTextNode(yx(N,I,!1)))}}else if(h.name==="counters"){var k=h.values.filter(Fm),w=k[0],U=k[1],E=k[2];if(w&&$r(w)){var P=s.counters.getCounterValues(w.value),D=E&&$r(E)?y5.parse(s.context,E.value):3,_=U&&U.type===0?U.value:"",B=P.map(function(R){return yx(R,D,!1)}).join(_);u.appendChild(o.createTextNode(B))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(oR(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(oR(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=S5+" "+T5;var d=a===zg.BEFORE?" "+S5:" "+T5;return _2(n)?n.className.baseValue+=d:n.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),zg;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(zg||(zg={}));var Dwe=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(Gj,"true"),t.body.appendChild(n),n},Lwe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Uwe=function(t){return Promise.all([].slice.call(t.images,0).map(Lwe))},Mwe=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var a=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},Pwe=["all","d","content"],TE=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);Pwe.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},jwe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Owe=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Qwe=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},Hwe=":before",Vwe=":after",S5="___html2canvas___pseudoelement_before",T5="___html2canvas___pseudoelement_after",FR=`{
    content: "" !important;
    display: none !important;
}`,zwe=function(t){Gwe(t,"."+S5+Hwe+FR+`
         .`+T5+Vwe+FR)},Gwe=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},qj=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),qwe=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(NE(e)||Jwe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Wi(this,void 0,void 0,function(){var n,r,a,s,i=this;return Ni(this,function(o){switch(o.label){case 0:return n=qj.isSameOrigin(e),r=!BE(e)&&this._options.useCORS===!0&&ai.SUPPORT_CORS_IMAGES&&!n,a=!BE(e)&&!n&&!NE(e)&&typeof this._options.proxy=="string"&&ai.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!BE(e)&&!NE(e)&&!a&&!r?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(Ywe(s)||r)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var o=ai.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},t}(),Kwe=/^data:image\/svg\+xml/i,Wwe=/^data:image\/.*;base64,/i,$we=/^data:image\/.*/i,Jwe=function(t){return ai.SUPPORT_SVG_DRAWING||!Xwe(t)},BE=function(t){return $we.test(t)},Ywe=function(t){return Wwe.test(t)},NE=function(t){return t.substr(0,4)==="blob"},Xwe=function(t){return t.substr(-3).toLowerCase()==="svg"||Kwe.test(t)},qt=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),k0=function(t,e,n){return new qt(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Gv=function(){function t(e,n,r,a){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=a}return t.prototype.subdivide=function(e,n){var r=k0(this.start,this.startControl,e),a=k0(this.startControl,this.endControl,e),s=k0(this.endControl,this.end,e),i=k0(r,a,e),o=k0(a,s,e),l=k0(i,o,e);return n?new t(this.start,r,i,l):new t(l,o,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Rl=function(t){return t.type===1},Zwe=function(){function t(e){var n=e.styles,r=e.bounds,a=pg(n.borderTopLeftRadius,r.width,r.height),s=a[0],i=a[1],o=pg(n.borderTopRightRadius,r.width,r.height),l=o[0],u=o[1],d=pg(n.borderBottomRightRadius,r.width,r.height),h=d[0],m=d[1],g=pg(n.borderBottomLeftRadius,r.width,r.height),b=g[0],w=g[1],E=[];E.push((s+l)/r.width),E.push((b+h)/r.width),E.push((i+w)/r.height),E.push((u+m)/r.height);var N=Math.max.apply(Math,E);N>1&&(s/=N,i/=N,l/=N,u/=N,h/=N,m/=N,b/=N,w/=N);var I=r.width-l,k=r.height-m,U=r.width-h,P=r.height-w,D=n.borderTopWidth,_=n.borderRightWidth,B=n.borderBottomWidth,T=n.borderLeftWidth,O=ra(n.paddingTop,e.bounds.width),R=ra(n.paddingRight,e.bounds.width),L=ra(n.paddingBottom,e.bounds.width),Q=ra(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?ma(r.left+T/3,r.top+D/3,s-T/3,i-D/3,Ir.TOP_LEFT):new qt(r.left+T/3,r.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?ma(r.left+I,r.top+D/3,l-_/3,u-D/3,Ir.TOP_RIGHT):new qt(r.left+r.width-_/3,r.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?ma(r.left+U,r.top+k,h-_/3,m-B/3,Ir.BOTTOM_RIGHT):new qt(r.left+r.width-_/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=b>0||w>0?ma(r.left+T/3,r.top+P,b-T/3,w-B/3,Ir.BOTTOM_LEFT):new qt(r.left+T/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?ma(r.left+T*2/3,r.top+D*2/3,s-T*2/3,i-D*2/3,Ir.TOP_LEFT):new qt(r.left+T*2/3,r.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?ma(r.left+I,r.top+D*2/3,l-_*2/3,u-D*2/3,Ir.TOP_RIGHT):new qt(r.left+r.width-_*2/3,r.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?ma(r.left+U,r.top+k,h-_*2/3,m-B*2/3,Ir.BOTTOM_RIGHT):new qt(r.left+r.width-_*2/3,r.top+r.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||w>0?ma(r.left+T*2/3,r.top+P,b-T*2/3,w-B*2/3,Ir.BOTTOM_LEFT):new qt(r.left+T*2/3,r.top+r.height-B*2/3),this.topLeftBorderStroke=s>0||i>0?ma(r.left+T/2,r.top+D/2,s-T/2,i-D/2,Ir.TOP_LEFT):new qt(r.left+T/2,r.top+D/2),this.topRightBorderStroke=s>0||i>0?ma(r.left+I,r.top+D/2,l-_/2,u-D/2,Ir.TOP_RIGHT):new qt(r.left+r.width-_/2,r.top+D/2),this.bottomRightBorderStroke=h>0||m>0?ma(r.left+U,r.top+k,h-_/2,m-B/2,Ir.BOTTOM_RIGHT):new qt(r.left+r.width-_/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=b>0||w>0?ma(r.left+T/2,r.top+P,b-T/2,w-B/2,Ir.BOTTOM_LEFT):new qt(r.left+T/2,r.top+r.height-B/2),this.topLeftBorderBox=s>0||i>0?ma(r.left,r.top,s,i,Ir.TOP_LEFT):new qt(r.left,r.top),this.topRightBorderBox=l>0||u>0?ma(r.left+I,r.top,l,u,Ir.TOP_RIGHT):new qt(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||m>0?ma(r.left+U,r.top+k,h,m,Ir.BOTTOM_RIGHT):new qt(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=b>0||w>0?ma(r.left,r.top+P,b,w,Ir.BOTTOM_LEFT):new qt(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?ma(r.left+T,r.top+D,Math.max(0,s-T),Math.max(0,i-D),Ir.TOP_LEFT):new qt(r.left+T,r.top+D),this.topRightPaddingBox=l>0||u>0?ma(r.left+Math.min(I,r.width-_),r.top+D,I>r.width+_?0:Math.max(0,l-_),Math.max(0,u-D),Ir.TOP_RIGHT):new qt(r.left+r.width-_,r.top+D),this.bottomRightPaddingBox=h>0||m>0?ma(r.left+Math.min(U,r.width-T),r.top+Math.min(k,r.height-B),Math.max(0,h-_),Math.max(0,m-B),Ir.BOTTOM_RIGHT):new qt(r.left+r.width-_,r.top+r.height-B),this.bottomLeftPaddingBox=b>0||w>0?ma(r.left+T,r.top+Math.min(P,r.height-B),Math.max(0,b-T),Math.max(0,w-B),Ir.BOTTOM_LEFT):new qt(r.left+T,r.top+r.height-B),this.topLeftContentBox=s>0||i>0?ma(r.left+T+Q,r.top+D+O,Math.max(0,s-(T+Q)),Math.max(0,i-(D+O)),Ir.TOP_LEFT):new qt(r.left+T+Q,r.top+D+O),this.topRightContentBox=l>0||u>0?ma(r.left+Math.min(I,r.width+T+Q),r.top+D+O,I>r.width+T+Q?0:l-T+Q,u-(D+O),Ir.TOP_RIGHT):new qt(r.left+r.width-(_+R),r.top+D+O),this.bottomRightContentBox=h>0||m>0?ma(r.left+Math.min(U,r.width-(T+Q)),r.top+Math.min(k,r.height+D+O),Math.max(0,h-(_+R)),m-(B+L),Ir.BOTTOM_RIGHT):new qt(r.left+r.width-(_+R),r.top+r.height-(B+L)),this.bottomLeftContentBox=b>0||w>0?ma(r.left+T+Q,r.top+P,Math.max(0,b-(T+Q)),w-(B+L),Ir.BOTTOM_LEFT):new qt(r.left+T+Q,r.top+r.height-(B+L))}return t}(),Ir;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ir||(Ir={}));var ma=function(t,e,n,r,a){var s=4*((Math.sqrt(2)-1)/3),i=n*s,o=r*s,l=t+n,u=e+r;switch(a){case Ir.TOP_LEFT:return new Gv(new qt(t,u),new qt(t,u-o),new qt(l-i,e),new qt(l,e));case Ir.TOP_RIGHT:return new Gv(new qt(t,e),new qt(t+i,e),new qt(l,u-o),new qt(l,u));case Ir.BOTTOM_RIGHT:return new Gv(new qt(l,e),new qt(l,e+o),new qt(t+i,u),new qt(t,u));case Ir.BOTTOM_LEFT:default:return new Gv(new qt(l,u),new qt(l-i,u),new qt(t,e+o),new qt(t,e))}},_y=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},ebe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Sy=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},tbe=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),qv=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),nbe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),rbe=function(t){return t.type===0},Kj=function(t){return t.type===1},abe=function(t){return t.type===2},RR=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},sbe=function(t,e,n,r,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+a);case 3:return s.add(e,n+a)}return s})},Wj=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),$j=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new Zwe(this.container),this.container.styles.opacity<1&&this.effects.push(new nbe(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new tbe(r,a,s))}if(this.container.styles.overflowX!==0){var i=_y(this.curves),o=Sy(this.curves);RR(i,o)?this.effects.push(new qv(i,6)):(this.effects.push(new qv(i,2)),this.effects.push(new qv(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,a=this.effects.slice(0);r;){var s=r.effects.filter(function(l){return!Kj(l)});if(n||r.container.styles.position!==0||!r.parent){if(a.unshift.apply(a,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=_y(r.curves),o=Sy(r.curves);RR(i,o)||a.unshift(new qv(o,6))}}else a.unshift.apply(a,s);r=r.parent}return a.filter(function(l){return Bs(l.target,e)})},t}(),B5=function(t,e,n,r){t.container.elements.forEach(function(a){var s=Bs(a.flags,4),i=Bs(a.flags,2),o=new $j(a,t);Bs(a.styles.display,2048)&&r.push(o);var l=Bs(a.flags,8)?[]:r;if(s||i){var u=s||a.styles.isPositioned()?n:e,d=new Wj(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var m=0;u.negativeZIndex.some(function(b,w){return h>b.element.container.styles.zIndex.order?(m=w,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(h>0){var g=0;u.positiveZIndex.some(function(b,w){return h>=b.element.container.styles.zIndex.order?(g=w+1,!1):g>0}),u.positiveZIndex.splice(g,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);B5(o,d,s?d:n,l)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),B5(o,e,n,l);Bs(a.flags,8)&&Jj(a,l)})},Jj=function(t,e){for(var n=t instanceof C5?t.start:1,r=t instanceof C5?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof Rj&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=yx(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},ibe=function(t){var e=new $j(t,null),n=new Wj(e),r=[];return B5(e,n,n,r),Jj(e.container,r),n},DR=function(t,e){switch(e){case 0:return Ml(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ml(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ml(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ml(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},obe=function(t,e){switch(e){case 0:return Ml(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ml(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ml(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ml(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},lbe=function(t,e){switch(e){case 0:return Ml(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ml(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ml(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ml(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},cbe=function(t,e){switch(e){case 0:return Kv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Kv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Kv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Kv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Kv=function(t,e){var n=[];return Rl(t)?n.push(t.subdivide(.5,!1)):n.push(t),Rl(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Ml=function(t,e,n,r){var a=[];return Rl(t)?a.push(t.subdivide(.5,!1)):a.push(t),Rl(n)?a.push(n.subdivide(.5,!0)):a.push(n),Rl(r)?a.push(r.subdivide(.5,!0).reverse()):a.push(r),Rl(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Yj=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Ty=function(t){var e=t.styles,n=t.bounds,r=ra(e.paddingLeft,n.width),a=ra(e.paddingRight,n.width),s=ra(e.paddingTop,n.width),i=ra(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},ube=function(t,e){return t===0?e.bounds:t===2?Ty(e):Yj(e)},Abe=function(t,e){return t===0?e.bounds:t===2?Ty(e):Yj(e)},kE=function(t,e,n){var r=ube(q0(t.styles.backgroundOrigin,e),t),a=Abe(q0(t.styles.backgroundClip,e),t),s=dbe(q0(t.styles.backgroundSize,e),n,r),i=s[0],o=s[1],l=pg(q0(t.styles.backgroundPosition,e),r.width-i,r.height-o),u=fbe(q0(t.styles.backgroundRepeat,e),l,s,r,a),d=Math.round(r.left+l[0]),h=Math.round(r.top+l[1]);return[u,d,h,i,o]},I0=function(t){return $r(t)&&t.value===mm.AUTO},Wv=function(t){return typeof t=="number"},dbe=function(t,e,n){var r=e[0],a=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(ms(i)&&o&&ms(o))return[ra(i,n.width),ra(o,n.height)];var l=Wv(s);if($r(i)&&(i.value===mm.CONTAIN||i.value===mm.COVER)){if(Wv(s)){var u=n.width/n.height;return u<s!=(i.value===mm.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=Wv(r),h=Wv(a),m=d||h;if(I0(i)&&(!o||I0(o))){if(d&&h)return[r,a];if(!l&&!m)return[n.width,n.height];if(m&&l){var g=d?r:a*s,b=h?a:r/s;return[g,b]}var w=d?r:n.width,E=h?a:n.height;return[w,E]}if(l){var N=0,I=0;return ms(i)?N=ra(i,n.width):ms(o)&&(I=ra(o,n.height)),I0(i)?N=I*s:(!o||I0(o))&&(I=N/s),[N,I]}var k=null,U=null;if(ms(i)?k=ra(i,n.width):o&&ms(o)&&(U=ra(o,n.height)),k!==null&&(!o||I0(o))&&(U=d&&h?k/r*a:n.height),U!==null&&I0(i)&&(k=d&&h?U/a*r:n.width),k!==null&&U!==null)return[k,U];throw new Error("Unable to calculate background-size for element")},q0=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},fbe=function(t,e,n,r,a){var s=e[0],i=e[1],o=n[0],l=n[1];switch(t){case 2:return[new qt(Math.round(r.left),Math.round(r.top+i)),new qt(Math.round(r.left+r.width),Math.round(r.top+i)),new qt(Math.round(r.left+r.width),Math.round(l+r.top+i)),new qt(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new qt(Math.round(r.left+s),Math.round(r.top)),new qt(Math.round(r.left+s+o),Math.round(r.top)),new qt(Math.round(r.left+s+o),Math.round(r.height+r.top)),new qt(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new qt(Math.round(r.left+s),Math.round(r.top+i)),new qt(Math.round(r.left+s+o),Math.round(r.top+i)),new qt(Math.round(r.left+s+o),Math.round(r.top+i+l)),new qt(Math.round(r.left+s),Math.round(r.top+i+l))];default:return[new qt(Math.round(a.left),Math.round(a.top)),new qt(Math.round(a.left+a.width),Math.round(a.top)),new qt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new qt(Math.round(a.left),Math.round(a.height+a.top))]}},hbe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",LR="Hidden Text",mbe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),a.src=hbe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(LR)),r.appendChild(s),r.appendChild(a);var o=a.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(LR)),r.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),Xj=function(){function t(e,n){this.context=e,this.options=n}return t}(),pbe=1e4,gbe=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a._activeEffects=[],a.canvas=r.canvas?r.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),r.canvas||(a.canvas.width=Math.floor(r.width*r.scale),a.canvas.height=Math.floor(r.height*r.scale),a.canvas.style.width=r.width+"px",a.canvas.style.height=r.height+"px"),a.fontMetrics=new mbe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-r.x,-r.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),a}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(a){return r.applyEffect(a)})},e.prototype.applyEffect=function(n){this.ctx.save(),abe(n)&&(this.ctx.globalAlpha=n.opacity),rbe(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),Kj(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Wi(this,void 0,void 0,function(){var r;return Ni(this,function(a){switch(a.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Wi(this,void 0,void 0,function(){return Ni(this,function(r){switch(r.label){case 0:if(Bs(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,a){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+a);else{var i=$4(n.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,n.bounds.top+a),o+s.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=bbe(n.fontFamily).join(", "),s=Xx(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(n,r){return Wi(this,void 0,void 0,function(){var a,s,i,o,l,u,d,h,m=this;return Ni(this,function(g){return a=this.createFontStyle(r),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=r.paintOrder,n.textBounds.forEach(function(b){h.forEach(function(w){switch(w){case 0:m.ctx.fillStyle=Qs(r.color),m.renderTextWithLetterSpacing(b,r.letterSpacing,u);var E=r.textShadow;E.length&&b.text.trim().length&&(E.slice(0).reverse().forEach(function(N){m.ctx.shadowColor=Qs(N.color),m.ctx.shadowOffsetX=N.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=N.offsetY.number*m.options.scale,m.ctx.shadowBlur=N.blur.number,m.renderTextWithLetterSpacing(b,r.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),r.textDecorationLine.length&&(m.ctx.fillStyle=Qs(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(N){switch(N){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=Qs(r.webkitTextStrokeColor),m.ctx.lineWidth=r.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,a){if(a&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=Ty(n),i=Sy(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Wi(this,void 0,void 0,function(){var r,a,s,i,o,l,I,I,u,d,h,m,U,g,b,P,w,E,N,I,k,U,P;return Ni(this,function(D){switch(D.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,a=n.curves,s=r.styles,i=0,o=r.textNodes,D.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof kj))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return I=D.sent(),this.renderReplacedElement(r,a,I),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Ij&&this.renderReplacedElement(r,a,r.canvas),!(r instanceof Fj))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return I=D.sent(),this.renderReplacedElement(r,a,I),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof Uj&&r.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:d=D.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),D.label=14;case 14:if(r instanceof J4&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===wy?r.checked&&(this.ctx.save(),this.path([new qt(r.bounds.left+h*.39363,r.bounds.top+h*.79),new qt(r.bounds.left+h*.16,r.bounds.top+h*.5549),new qt(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new qt(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new qt(r.bounds.left+h*.72983,r.bounds.top+h*.23),new qt(r.bounds.left+h*.84,r.bounds.top+h*.34085),new qt(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=Qs(bR),this.ctx.fill(),this.ctx.restore()):r.type===by&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Qs(bR),this.ctx.fill(),this.ctx.restore())),xbe(r)&&r.value.length){switch(m=this.createFontStyle(s),U=m[0],g=m[1],b=this.fontMetrics.getMetrics(U,g).baseline,this.ctx.font=U,this.ctx.fillStyle=Qs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ybe(r.styles.textAlign),P=Ty(r),w=0,r.styles.textAlign){case 1:w+=P.width/2;break;case 2:w+=P.width;break}E=P.add(w,0,0,-P.height/2+1),this.ctx.save(),this.path([new qt(P.left,P.top),new qt(P.left+P.width,P.top),new qt(P.left+P.width,P.top+P.height),new qt(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Vg(r.value,E),s.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Bs(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(N=r.styles.listStyleImage,N.type!==0)return[3,18];I=void 0,k=N.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(k)];case 16:return I=D.sent(),this.ctx.drawImage(I,r.bounds.left-(I.width+10),r.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+k),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(U=this.createFontStyle(s)[0],this.ctx.font=U,this.ctx.fillStyle=Qs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new IA(r.bounds.left,r.bounds.top+ra(r.styles.paddingTop,r.bounds.width),r.bounds.width,sR(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Vg(n.listValue,P),s.letterSpacing,sR(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Wi(this,void 0,void 0,function(){var r,a,N,s,i,N,o,l,N,u,d,N,h,m,N,g,b,N,w,E,N;return Ni(this,function(I){switch(I.label){case 0:if(Bs(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:I.sent(),r=0,a=n.negativeZIndex,I.label=2;case 2:return r<a.length?(N=a[r],[4,this.renderStack(N)]):[3,5];case 3:I.sent(),I.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:I.sent(),s=0,i=n.nonInlineLevel,I.label=7;case 7:return s<i.length?(N=i[s],[4,this.renderNode(N)]):[3,10];case 8:I.sent(),I.label=9;case 9:return s++,[3,7];case 10:o=0,l=n.nonPositionedFloats,I.label=11;case 11:return o<l.length?(N=l[o],[4,this.renderStack(N)]):[3,14];case 12:I.sent(),I.label=13;case 13:return o++,[3,11];case 14:u=0,d=n.nonPositionedInlineLevel,I.label=15;case 15:return u<d.length?(N=d[u],[4,this.renderStack(N)]):[3,18];case 16:I.sent(),I.label=17;case 17:return u++,[3,15];case 18:h=0,m=n.inlineLevel,I.label=19;case 19:return h<m.length?(N=m[h],[4,this.renderNode(N)]):[3,22];case 20:I.sent(),I.label=21;case 21:return h++,[3,19];case 22:g=0,b=n.zeroOrAutoZIndexOrTransformedOrOpacity,I.label=23;case 23:return g<b.length?(N=b[g],[4,this.renderStack(N)]):[3,26];case 24:I.sent(),I.label=25;case 25:return g++,[3,23];case 26:w=0,E=n.positiveZIndex,I.label=27;case 27:return w<E.length?(N=E[w],[4,this.renderStack(N)]):[3,30];case 28:I.sent(),I.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(a,s){var i=Rl(a)?a.start:a;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Rl(a)&&r.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(n,r,a,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(n,r,a){var s;if(n.width===r&&n.height===a)return n;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,a),o},e.prototype.renderBackgroundImage=function(n){return Wi(this,void 0,void 0,function(){var r,a,s,i,o,l;return Ni(this,function(u){switch(u.label){case 0:r=n.styles.backgroundImage.length-1,a=function(d){var h,m,g,O,J,ee,Q,z,B,b,O,J,ee,Q,z,w,E,N,I,k,U,P,D,_,B,T,O,R,L,Q,z,ie,J,ee,ae,q,Y,Ae,j,K,X,te;return Ni(this,function(le){switch(le.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return h=le.sent(),[3,4];case 3:return le.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(g=kE(n,r,[h.width,h.height,h.width/h.height]),O=g[0],J=g[1],ee=g[2],Q=g[3],z=g[4],B=s.ctx.createPattern(s.resizeImage(h,Q,z),"repeat"),s.renderRepeat(O,B,J,ee)),[3,6];case 5:r2e(d)?(b=kE(n,r,[null,null,null]),O=b[0],J=b[1],ee=b[2],Q=b[3],z=b[4],w=Xve(d.angle,Q,z),E=w[0],N=w[1],I=w[2],k=w[3],U=w[4],P=document.createElement("canvas"),P.width=Q,P.height=z,D=P.getContext("2d"),_=D.createLinearGradient(N,k,I,U),rR(d.stops,E).forEach(function(ye){return _.addColorStop(ye.stop,Qs(ye.color))}),D.fillStyle=_,D.fillRect(0,0,Q,z),Q>0&&z>0&&(B=s.ctx.createPattern(P,"repeat"),s.renderRepeat(O,B,J,ee))):a2e(d)&&(T=kE(n,r,[null,null,null]),O=T[0],R=T[1],L=T[2],Q=T[3],z=T[4],ie=d.position.length===0?[q4]:d.position,J=ra(ie[0],Q),ee=ra(ie[ie.length-1],z),ae=Zve(d,J,ee,Q,z),q=ae[0],Y=ae[1],q>0&&Y>0&&(Ae=s.ctx.createRadialGradient(R+J,L+ee,0,R+J,L+ee,q),rR(d.stops,q*2).forEach(function(ye){return Ae.addColorStop(ye.stop,Qs(ye.color))}),s.path(O),s.ctx.fillStyle=Ae,q!==Y?(j=n.bounds.left+.5*n.bounds.width,K=n.bounds.top+.5*n.bounds.height,X=Y/q,te=1/X,s.ctx.save(),s.ctx.translate(j,K),s.ctx.transform(1,0,0,X,0,0),s.ctx.translate(-j,-K),s.ctx.fillRect(R,te*(L-K)+K,Q,z*te),s.ctx.restore()):s.ctx.fill())),le.label=6;case 6:return r--,[2]}})},s=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,a){return Wi(this,void 0,void 0,function(){return Ni(this,function(s){return this.path(DR(a,r)),this.ctx.fillStyle=Qs(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,a,s){return Wi(this,void 0,void 0,function(){var i,o;return Ni(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=obe(s,a),this.path(i),this.ctx.fillStyle=Qs(n),this.ctx.fill(),o=lbe(s,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Wi(this,void 0,void 0,function(){var r,a,s,i,o,l,u,d,h=this;return Ni(this,function(m){switch(m.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,a=!ef(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=vbe(q0(r.backgroundClip,0),n.curves),a||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),ef(r.backgroundColor)||(this.ctx.fillStyle=Qs(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=_y(n.curves),w=g.inset?0:pbe,E=sbe(b,-w+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(E)):(h.mask(b),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=g.offsetX.number+w,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=Qs(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?Qs(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=s,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!ef(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,a,s,i){return Wi(this,void 0,void 0,function(){var o,l,u,d,h,m,g,b,w,E,N,I,k,U,P,D,P,D;return Ni(this,function(_){return this.ctx.save(),o=cbe(s,a),l=DR(s,a),i===2&&(this.path(l),this.ctx.clip()),Rl(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Rl(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),a===0||a===2?g=Math.abs(u-h):g=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=r<3?r*3:r*2,w=r<3?r*2:r,i===3&&(b=r,w=r),E=!0,g<=b*2?E=!1:g<=b*2+w?(N=g/(2*b+w),b*=N,w*=N):(I=Math.floor((g+w)/(b+w)),k=(g-I*b)/(I-1),U=(g-(I+1)*b)/I,w=U<=0||Math.abs(w-k)<Math.abs(w-U)?k:U),E&&(i===3?this.ctx.setLineDash([0,b+w]):this.ctx.setLineDash([b,w])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Qs(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Rl(l[0])&&(P=l[3],D=l[0],this.ctx.beginPath(),this.formatPath([new qt(P.end.x,P.end.y),new qt(D.start.x,D.start.y)]),this.ctx.stroke()),Rl(l[1])&&(P=l[1],D=l[2],this.ctx.beginPath(),this.formatPath([new qt(P.end.x,P.end.y),new qt(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Wi(this,void 0,void 0,function(){var r;return Ni(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Qs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=ibe(n),[4,this.renderStack(r)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Xj),xbe=function(t){return t instanceof Lj||t instanceof Dj?!0:t instanceof J4&&t.type!==by&&t.type!==wy},vbe=function(t,e){switch(t){case 0:return _y(e);case 2:return ebe(e);case 1:default:return Sy(e)}},ybe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},wbe=["-apple-system","system-ui"],bbe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return wbe.indexOf(e)===-1}):t},Cbe=function(t){Fc(e,t);function e(n,r){var a=t.call(this,n,r)||this;return a.canvas=r.canvas?r.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=r,a.canvas.width=Math.floor(r.width*r.scale),a.canvas.height=Math.floor(r.height*r.scale),a.canvas.style.width=r.width+"px",a.canvas.style.height=r.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-r.x,-r.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),a}return e.prototype.render=function(n){return Wi(this,void 0,void 0,function(){var r,a;return Ni(this,function(s){switch(s.label){case 0:return r=b5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,Ebe(r)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Qs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Xj),Ebe=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},_be=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Sv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Sv([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Sv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Sv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),Sbe=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new _be({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new qwe(this,e)}return t.instanceCount=1,t}(),Zj=function(t,e){return e===void 0&&(e={}),Tbe(t,e)};typeof window<"u"&&qj.setContext(window);var Tbe=function(t,e){return Wi(void 0,void 0,void 0,function(){var n,r,a,s,i,o,l,u,d,h,m,g,b,w,E,N,I,k,U,P,_,D,_,B,T,O,R,L,Q,z,ie,J,ee,ae,q,Y,Ae,j,K,X;return Ni(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return a={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(T=e.imageTimeout)!==null&&T!==void 0?T:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=o5({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},a),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(Q=e.windowHeight)!==null&&Q!==void 0?Q:r.innerHeight,scrollX:(z=e.scrollX)!==null&&z!==void 0?z:r.pageXOffset,scrollY:(ie=e.scrollY)!==null&&ie!==void 0?ie:r.pageYOffset},o=new IA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new Sbe(s,o),u=(J=e.foreignObjectRendering)!==null&&J!==void 0?J:!1,d={allowTaint:(ee=e.allowTaint)!==null&&ee!==void 0?ee:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new IR(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=te.sent(),b=Y4(m)||Nwe(m)?s1e(m.ownerDocument):Lw(l,m),w=b.width,E=b.height,N=b.left,I=b.top,k=Bbe(l,m,e.backgroundColor),U={canvas:e.canvas,backgroundColor:k,scale:(q=(ae=e.scale)!==null&&ae!==void 0?ae:r.devicePixelRatio)!==null&&q!==void 0?q:1,x:((Y=e.x)!==null&&Y!==void 0?Y:0)+N,y:((Ae=e.y)!==null&&Ae!==void 0?Ae:0)+I,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(w),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(E)},u?(l.logger.debug("Document cloned, using foreign object rendering"),_=new Cbe(l,U),[4,_.render(m)]):[3,3];case 2:return P=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+N+","+I+" with size "+w+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),D=Pj(l,m),k===D.styles.backgroundColor&&(D.styles.backgroundColor=CA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+U.x+","+U.y+" with size "+U.width+"x"+U.height),_=new gbe(l,U),[4,_.render(D)];case 4:P=te.sent(),te.label=5;case 5:return(!((X=e.removeContainer)!==null&&X!==void 0)||X)&&(IR.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,P]}})})},Bbe=function(t,e,n){var r=e.ownerDocument,a=r.documentElement?Qg(t,getComputedStyle(r.documentElement).backgroundColor):CA.TRANSPARENT,s=r.body?Qg(t,getComputedStyle(r.body).backgroundColor):CA.TRANSPARENT,i=typeof n=="string"?Qg(t,n):n===null?CA.TRANSPARENT:4294967295;return e===r.documentElement?ef(a)?ef(s)?i:s:a:i};const Nbe=Object.freeze(Object.defineProperty({__proto__:null,default:Zj},Symbol.toStringTag,{value:"Module"})),UR="planificacionesInterdisciplinarias",MR="entregasTareasInterdisciplinarias",kbe="usuariosLiceo",Ibe=({planificaciones:t,onActivityUpdate:e})=>{const[n,r]=Z.useState(null),a=Z.useMemo(()=>{const l=[];return t.forEach(u=>{u.actividades.forEach(d=>l.push({...d,planId:u.id,type:"activity"})),u.fechasClave.forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),s=Z.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let w=0;w<g.length;w++)b=g.charCodeAt(w)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return A.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,m]=Z.useState(l.activity),g=w=>{m({...h,[w.target.name]:w.target.value})},b=()=>{d(l.planId,h),u()};return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[A.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),A.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),A.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),A.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),A.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),A.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[A.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),A.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),A.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificacin primero."})]}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[A.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"min-w-full",children:[A.jsx("thead",{children:A.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),A.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),A.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return A.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&r({planId:l.planId,activity:l}),children:[A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),n&&A.jsx(o,{data:n,onClose:()=>r(null),onSave:e})]})},Fbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Rbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),Dbe=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[A.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),A.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),Lbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Ube=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Mbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),Pbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),jbe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),PR=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Td=({icon:t,label:e,children:n,aiButton:r})=>A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,A.jsx("span",{children:e})]}),r]}),n]}),Obe=({initialPlan:t,onSave:e})=>{const[n,r]=Z.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,s]=Z.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[i,o]=Z.useState({nombre:"",fecha:""}),[l,u]=Z.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[d,h]=Z.useState(!1),[m,g]=Z.useState(!1);Z.useEffect(()=>{r(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const b=async U=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}U==="objetivos"?h(!0):g(!0);let P="";U==="objetivos"?P=`Basado en la siguiente descripcin de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista.
            Descripcin del Proyecto: "${n.descripcionProyecto}"`:P=`Basado en la siguiente descripcin y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista.
            Descripcin del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"An no definidos, genralos a partir de la descripcin."}"`;try{const _=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:P});r(B=>({...B,[U]:_.text.replace(/(\*\*|\*)/g,"")}))}catch(D){console.error(`Error al generar ${U}`,D),alert(`Hubo un error al generar los ${U}. Intntelo de nuevo.`)}finally{U==="objetivos"?h(!1):g(!1)}},w=U=>{r(P=>({...P,[U.target.name]:U.target.value}))},E=(U,P)=>{r(D=>{const _=D[U],B=_.includes(P)?_.filter(T=>T!==P):[..._,P];return{...D,[U]:B}})},N=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}r(U=>({...U,actividades:[...U.actividades,{...a,id:crypto.randomUUID()}]})),s({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},I=()=>{!i.nombre||!i.fecha||(r(U=>({...U,fechasClave:[...U.fechasClave,{...i,id:crypto.randomUUID()}]})),o({nombre:"",fecha:""}))},k=()=>{var P;if(!l.instrucciones||!l.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const U={id:crypto.randomUUID(),numero:(((P=n.tareas)==null?void 0:P.length)||0)+1,...l};r(D=>({...D,tareas:[...D.tareas||[],U]})),u({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return A.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[A.jsx("div",{className:"text-center mb-12",children:A.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:"Proyecto Interdisciplinario en Liceo Industrial Recoleta"})}),A.jsxs("div",{className:"space-y-6",children:[A.jsx(Td,{icon:A.jsx(Fbe,{}),label:"Nombre del Proyecto",children:A.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:w,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(Td,{icon:A.jsx(Rbe,{}),label:"Profesores",children:A.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:w,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(Td,{icon:A.jsx(Dbe,{}),label:"Cursos",children:A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:xs.map(U=>A.jsx("button",{type:"button",onClick:()=>E("cursos",U),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(U)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:U},U))})}),A.jsx(Td,{icon:A.jsx(Lbe,{}),label:"Asignaturas",children:A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:Hl.map(U=>A.jsx("button",{type:"button",onClick:()=>E("asignaturas",U),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(U)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:U},U))})}),A.jsx(Td,{icon:A.jsx(Ube,{}),label:"Descripcin del Proyecto",children:A.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:w,placeholder:"Detalle aqu la metodologa, el producto final esperado y el propsito del proyecto. Esta informacin es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(Td,{icon:A.jsx(Mbe,{}),label:"Objetivos",aiButton:A.jsx("button",{type:"button",onClick:()=>b("objetivos"),disabled:!n.descripcionProyecto.trim()||d,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:A.jsx(PR,{})}),children:d?A.jsx("div",{className:"p-4 text-center",children:"Generando..."}):A.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:w,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(Td,{icon:A.jsx(Pbe,{}),label:"Indicadores de xito",aiButton:A.jsx("button",{type:"button",onClick:()=>b("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||m,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:A.jsx(PR,{})}),children:m?A.jsx("div",{className:"p-4 text-center",children:"Generando..."}):A.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:w,placeholder:"Liste los indicadores de logro o evaluacin...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),A.jsx(Td,{icon:A.jsx(jbe,{}),label:"Carta Gantt",children:A.jsxs("div",{className:"space-y-4 mt-2",children:[A.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[A.jsx("input",{value:a.nombre,onChange:U=>s({...a,nombre:U.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),A.jsx("input",{type:"date",value:a.fechaInicio,onChange:U=>s({...a,fechaInicio:U.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("input",{type:"date",value:a.fechaFin,onChange:U=>s({...a,fechaFin:U.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:N,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),A.jsx("ul",{className:"text-xs",children:n.actividades.map(U=>A.jsx("li",{children:U.nombre},U.id))})]}),A.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),A.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[A.jsx("input",{value:i.nombre,onChange:U=>o({...i,nombre:U.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),A.jsx("input",{type:"date",value:i.fecha,onChange:U=>o({...i,fecha:U.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:I,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),A.jsx("ul",{className:"text-xs",children:n.fechasClave.map(U=>A.jsxs("li",{children:[U.nombre," (",U.fecha,")"]},U.id))})]}),A.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[A.jsx("input",{value:l.instrucciones,onChange:U=>u({...l,instrucciones:U.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),A.jsx("input",{type:"date",value:l.fechaEntrega,onChange:U=>u({...l,fechaEntrega:U.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),A.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(U=>A.jsxs("li",{children:[U.numero,". ",U.instrucciones]},U.id))})]})]})}),A.jsx("div",{className:"flex justify-end pt-6",children:A.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})})]})]})},jR=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState("list"),[a,s]=Z.useState(null),[i,o]=Z.useState(null),[l,u]=Z.useState(null);Z.useEffect(()=>{try{const I=localStorage.getItem(UR);I&&e(JSON.parse(I))}catch(I){console.error("Error al cargar planificaciones interdisciplinarias",I)}},[]);const d=I=>{e(I),localStorage.setItem(UR,JSON.stringify(I))},h=Z.useCallback((I,k)=>{const U=t.map(P=>P.id===I?{...P,actividades:P.actividades.map(D=>D.id===k.id?k:D)}:P);d(U)},[t]),m=I=>{d(a?t.map(k=>k.id===a.id?I:k):[{...I,id:crypto.randomUUID()},...t]),r("list"),s(null)},g=I=>{s(I),r("form")},b=I=>{window.confirm("Est seguro de eliminar esta planificacin?")&&d(t.filter(k=>k.id!==I))},w=()=>{s(null),r("form")},E=async I=>{o(I.id);const k=new sn("p","mm","a4"),U=15,P=k.internal.pageSize.getWidth(),D=k.internal.pageSize.getHeight(),_=P-U*2;let B=U;const T=22,O=14,R=11,L=()=>{k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text("Proyecto Interdisciplinario",U,12),k.text("Liceo Industrial de Recoleta",P-U,12,{align:"right"}),k.setDrawColor(220),k.line(U,15,P-U,15)},Q=ae=>{B+ae>D-U&&(k.addPage(),L(),B=U+15)},z=(ae,q)=>{if(!q||Array.isArray(q)&&q.length===0||typeof q=="string"&&!q.trim())return;const Y=10;k.setFontSize(R);const Ae=Array.isArray(q)?q.join(", "):String(q),j=k.splitTextToSize(Ae,_),K=j.length*(R*.35*1.15);Q(Y+K+12),k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text(ae,U,B),B+=6,k.setDrawColor(200),k.line(U,B,U+30,B),B+=8,k.setFont("helvetica","normal"),k.setFontSize(R),k.setTextColor(80),k.text(j,U,B),B+=K+12};L(),B=U+20,k.setFont("helvetica","bold"),k.setFontSize(T),k.setTextColor(0);const ie=k.splitTextToSize(I.nombreProyecto,_);if(k.text(ie,U,B),B+=ie.length*(T*.4)+10,Zo(k,{startY:B,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},I.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},I.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},I.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:R,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),B=k.lastAutoTable.finalY+15,z("Descripcin del Proyecto",I.descripcionProyecto),z("Objetivos de Aprendizaje",I.objetivos),z("Indicadores de Logro",I.indicadoresLogro),I.tareas&&I.tareas.length>0){const ae=I.tareas.map(Y=>[Y.numero.toString(),Y.instrucciones,Y.fechaEntrega]),q=(ae.length+1)*10+15;Q(q+15),k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text("Tareas para Estudiantes",U,B),B+=10,Zo(k,{startY:B,head:[["#","Instrucciones","Fecha de Entrega"]],body:ae,theme:"striped",headStyles:{fillColor:[52,73,94]}}),B=k.lastAutoTable.finalY+15}const J=document.getElementById("gantt-container-vertical");if(J)try{const q=(await Zj(J,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");k.addPage(),L(),B=U+15,k.setFont("helvetica","bold"),k.setFontSize(O),k.setTextColor(40),k.text("Cronograma del Proyecto",U,B),B+=10;const Y=k.getImageProperties(q),Ae=_,j=Y.height*Ae/Y.width;k.addImage(q,"PNG",U,B,Ae,j)}catch(ae){console.error("Error generating timeline image:",ae)}const ee=k.internal.pages.length-1;for(let ae=1;ae<=ee;ae++)k.setPage(ae),k.setFont("helvetica","normal"),k.setFontSize(9),k.setTextColor(150),k.text(`Pgina ${ae} de ${ee}`,P-U,k.internal.pageSize.getHeight()-10,{align:"right"});k.save(`Proyecto_${I.nombreProyecto.replace(/\s/g,"_")}.pdf`),o(null)},N=({plan:I,onBack:k})=>{var L,Q;const[U,P]=Z.useState([]),[D,_]=Z.useState([]),[B,T]=Z.useState(((L=I.tareas)==null?void 0:L[0])||null);Z.useEffect(()=>{try{const z=localStorage.getItem(kbe);z&&P(JSON.parse(z));const ie=localStorage.getItem(MR);ie&&_(JSON.parse(ie))}catch(z){console.error(z)}},[]);const O=Z.useMemo(()=>U.filter(z=>z.profile===rn.ESTUDIANTE&&I.cursos.includes(z.curso||"")).sort((z,ie)=>z.nombreCompleto.localeCompare(ie.nombreCompleto)),[U,I.cursos]),R=(z,ie)=>{const J=D.map(ee=>ee.id===z?{...ee,feedbackProfesor:ie,fechaFeedback:new Date().toISOString()}:ee);_(J),localStorage.setItem(MR,JSON.stringify(J))};return B?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Entregas de Tareas"}),A.jsx("button",{onClick:k,className:"font-semibold",children:" Volver"})]}),A.jsx("select",{value:B.id,onChange:z=>{var ie;return T(((ie=I.tareas)==null?void 0:ie.find(J=>J.id===z.target.value))||null)},className:"mb-4 p-2 border rounded",children:(Q=I.tareas)==null?void 0:Q.map(z=>A.jsxs("option",{value:z.id,children:["Tarea ",z.numero,": ",z.instrucciones]},z.id))}),A.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:O.map(z=>{const ie=D.find(J=>J.planificacionId===I.id&&J.tareaId===B.id&&J.estudianteId===z.id);return A.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[A.jsxs("p",{className:"font-bold",children:[z.nombreCompleto," - ",ie!=null&&ie.completada?A.jsx("span",{className:"text-green-600",children:"Entregado"}):A.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),ie&&A.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[ie.observacionesEstudiante&&A.jsxs("p",{children:[A.jsx("strong",{children:"Comentario:"})," ",ie.observacionesEstudiante]}),ie.enlaceUrl&&A.jsxs("p",{children:[A.jsx("strong",{children:"Enlace:"})," ",A.jsx("a",{href:ie.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:ie.enlaceUrl})]}),ie.archivoAdjunto&&A.jsxs("p",{children:[A.jsx("strong",{children:"Archivo:"})," ",A.jsx("a",{href:ie.archivoAdjunto.url,download:ie.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:ie.archivoAdjunto.nombre})]}),A.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:ie.feedbackProfesor||"",onBlur:J=>R(ie.id,J.target.value),rows:2,className:"w-full mt-2 p-1 border rounded"})]})]},z.id)})})]}):A.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return l?A.jsx(N,{plan:l,onBack:()=>u(null)}):A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[n==="list"?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),A.jsx("button",{onClick:w,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),A.jsx("div",{className:"space-y-4",children:t.map(I=>A.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:I.nombreProyecto}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",I.cursos.join(", ")]})]}),A.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[A.jsx("button",{onClick:()=>u(I),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),A.jsx("button",{onClick:()=>E(I),disabled:i===I.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:i===I.id?"Exportando...":"Exportar PDF"}),A.jsx("button",{onClick:()=>g(I),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),A.jsx("button",{onClick:()=>b(I.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]})},I.id))})]}):A.jsx(Obe,{initialPlan:a,onSave:m}),t.length>0&&A.jsx("div",{id:"gantt-container-vertical",children:A.jsx(Ibe,{planificaciones:t,onActivityUpdate:h})})]})},IE="paolMaquinas",OR="paolRegistros",Qbe=()=>{const[t,e]=Z.useState([]),[n,r]=Z.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=Z.useState(a),[o,l]=Z.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=Z.useState(u),[m,g]=Z.useState(null),[b,w]=Z.useState({maquinaId:"",curso:"",profesor:"",fecha:""});Z.useEffect(()=>{try{const L=localStorage.getItem(IE);if(L&&JSON.parse(L).length>0)e(JSON.parse(L));else{const z=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidrulica",especialidad:"Automotriz"}];e(z),localStorage.setItem(IE,JSON.stringify(z))}const Q=localStorage.getItem(OR);Q&&r(JSON.parse(Q))}catch(L){console.error("Error al cargar datos de Paol desde localStorage",L)}},[]);const E=Z.useCallback(L=>{e(L),localStorage.setItem(IE,JSON.stringify(L))},[]),N=Z.useCallback(L=>{r(L),localStorage.setItem(OR,JSON.stringify(L))},[]),I=L=>{L.preventDefault(),d.nombre.trim()&&(E(m?t.map(Q=>Q.id===m.id?{...m,...d}:Q):[{...d,id:crypto.randomUUID()},...t]),h(u),g(null))},k=Z.useCallback(L=>{if(n.some(Q=>Q.maquinaId===L)){alert("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");return}window.confirm("Eliminar esta mquina?")&&E(t.filter(Q=>Q.id!==L))},[t,n,E]),U=L=>{L.preventDefault();const Q=o||s;if(!Q.curso||!Q.profesorResponsable.trim()||!Q.maquinaId||Q.totalHoras<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}N(o?n.map(z=>z.id===o.id?o:z):[{...s,id:crypto.randomUUID()},...n]),i(a),l(null)},P=Z.useCallback(L=>{window.confirm("Eliminar este registro de uso?")&&N(n.filter(Q=>Q.id!==L))},[n,N]),D=Z.useMemo(()=>n.filter(L=>(b.maquinaId===""||L.maquinaId===b.maquinaId)&&(b.curso===""||L.curso===b.curso)&&(b.profesor===""||L.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||L.fecha===b.fecha)).sort((L,Q)=>new Date(Q.fecha).getTime()-new Date(L.fecha).getTime()),[n,b]),_=Z.useMemo(()=>new Map(t.map(L=>[L.id,L])),[t]),B=()=>{const L=D.map(ie=>{var J,ee;return{Fecha:ie.fecha,Curso:ie.curso,Profesor:ie.profesorResponsable,Mquina:((J=_.get(ie.maquinaId))==null?void 0:J.nombre)||"N/A",Especialidad:((ee=_.get(ie.maquinaId))==null?void 0:ee.especialidad)||"N/A","Total Horas":ie.totalHoras,Observaciones:ie.observaciones}}),Q=Ll.json_to_sheet(L),z=Ll.book_new();Ll.book_append_sheet(z,Q,"RegistrosPaol"),Q4(z,"Registros_Paol.xlsx")},T=()=>{const L=new sn;Zo(L,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:D.map(Q=>{var z,ie;return[Q.fecha,Q.curso,Q.profesorResponsable,((z=_.get(Q.maquinaId))==null?void 0:z.nombre)||"N/A",((ie=_.get(Q.maquinaId))==null?void 0:ie.especialidad)||"N/A",Q.totalHoras,Q.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:Q=>{L.setFontSize(10),L.setFont("helvetica","bold"),L.text("LICEO INDUSTRIAL DE RECOLETA",Q.settings.margin.left,15)}}),L.save("Registros_Paol.pdf")},O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",R=()=>{const L=o||s,Q=o?l:i;return A.jsxs("form",{onSubmit:U,className:"space-y-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),A.jsx("input",{name:"fecha",type:"date",value:L.fecha,onChange:z=>Q({...L,fecha:z.target.value}),className:O,required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Curso"}),A.jsxs("select",{name:"curso",value:L.curso,onChange:z=>Q({...L,curso:z.target.value}),className:O,required:!0,children:[A.jsx("option",{value:"",children:"Curso"}),xs.map(z=>A.jsx("option",{children:z},z))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),A.jsxs("select",{name:"profesorResponsable",value:L.profesorResponsable,onChange:z=>Q({...L,profesorResponsable:z.target.value}),className:O,required:!0,children:[A.jsx("option",{value:"",children:"Profesor Responsable"}),y_.map(z=>A.jsx("option",{value:z,children:z},z))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Mquina"}),A.jsxs("select",{name:"maquinaId",value:L.maquinaId,onChange:z=>Q({...L,maquinaId:z.target.value}),className:O,required:!0,children:[A.jsx("option",{value:"",children:"Mquina"}),t.map(z=>A.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),A.jsx("input",{name:"totalHoras",type:"number",value:L.totalHoras,onChange:z=>Q({...L,totalHoras:Number(z.target.value)}),className:O,required:!0,min:"0.5",step:"0.5"})]}),A.jsxs("div",{className:"lg:col-span-3",children:[A.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),A.jsx("textarea",{name:"observaciones",value:L.observaciones,onChange:z=>Q({...L,observaciones:z.target.value}),placeholder:"Observaciones...",className:`${O}`,rows:1})]})]}),A.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&A.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Paol: Registro de Uso de Mquinas"}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),R()]}),A.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Mquinas"}),A.jsxs("form",{onSubmit:I,className:"flex gap-2 mb-4",children:[A.jsx("input",{value:d.nombre,onChange:L=>h({...d,nombre:L.target.value}),placeholder:"Nombre mquina",className:O}),A.jsxs("select",{value:d.especialidad,onChange:L=>h({...d,especialidad:L.target.value}),className:O,children:[A.jsx("option",{value:"Industrial",children:"Industrial"}),A.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),A.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"":"+"})]}),A.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(L=>A.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[A.jsxs("span",{children:[L.nombre," ",A.jsxs("span",{className:"text-xs text-slate-500",children:["(",L.especialidad,")"]})]}),A.jsxs("div",{className:"space-x-2",children:[A.jsx("button",{onClick:()=>{g(L),h(L)},className:"text-blue-500",children:""}),A.jsx("button",{onClick:()=>k(L.id),className:"text-red-500",children:""})]})]},L.id))})]}),A.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:B,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),A.jsx("button",{onClick:T,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[A.jsx("input",{type:"date",value:b.fecha,onChange:L=>w({...b,fecha:L.target.value}),className:O}),A.jsxs("select",{value:b.curso,onChange:L=>w({...b,curso:L.target.value}),className:O,children:[A.jsx("option",{value:"",children:"Todos los Cursos"}),xs.map(L=>A.jsx("option",{children:L},L))]}),A.jsxs("select",{value:b.maquinaId,onChange:L=>w({...b,maquinaId:L.target.value}),className:O,children:[A.jsx("option",{value:"",children:"Todas las Mquinas"}),t.map(L=>A.jsx("option",{value:L.id,children:L.nombre},L.id))]}),A.jsx("input",{value:b.profesor,onChange:L=>w({...b,profesor:L.target.value}),placeholder:"Buscar profesor...",className:O})]}),A.jsx("div",{className:"max-h-96 overflow-y-auto",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Mquina"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),A.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),A.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.map(L=>{var Q;return A.jsxs("tr",{children:[A.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.fecha}),A.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Q=_.get(L.maquinaId))==null?void 0:Q.nombre)||"N/A"}),A.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[L.profesorResponsable," (",L.curso,")"]}),A.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:L.totalHoras}),A.jsxs("td",{className:"px-3 py-2 text-center",children:[A.jsx("button",{onClick:()=>l(L),className:"text-blue-500",children:""}),A.jsx("button",{onClick:()=>P(L.id),className:"text-red-500 ml-2",children:""})]})]},L.id)})})]})})]})]})]})};function Zi(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Zi(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var FE={exports:{}},RE={},DE={exports:{}},LE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QR;function Hbe(){if(QR)return LE;QR=1;var t=Bx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var g=m(),b=r({inst:{value:g,getSnapshot:m}}),w=b[0].inst,E=b[1];return s(function(){w.value=g,w.getSnapshot=m,l(w)&&E({inst:w})},[h,g,m]),a(function(){return l(w)&&E({inst:w}),h(function(){l(w)&&E({inst:w})})},[h]),i(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!n(h,g)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return LE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,LE}var HR;function Vbe(){return HR||(HR=1,DE.exports=Hbe()),DE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR;function zbe(){if(VR)return RE;VR=1;var t=Bx(),e=Vbe();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return RE.useSyncExternalStoreWithSelector=function(u,d,h,m,g){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=o(function(){function N(D){if(!I){if(I=!0,k=D,D=m(D),g!==void 0&&w.hasValue){var _=w.value;if(g(_,D))return U=_}return U=D}if(_=U,r(k,D))return _;var B=m(D);return g!==void 0&&g(_,B)?(k=D,_):(k=D,U=B)}var I=!1,k,U,P=h===void 0?null:h;return[function(){return N(d())},P===null?void 0:function(){return N(P())}]},[d,h,m,g]);var E=a(u,b[0],b[1]);return i(function(){w.hasValue=!0,w.value=E},[E]),l(E),E},RE}var zR;function Gbe(){return zR||(zR=1,FE.exports=zbe()),FE.exports}var qbe=Gbe();const Kbe=W5(qbe),Wbe={},GR=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(b=>b(e,g))}},a=()=>e,l={setState:r,getState:a,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Wbe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,a,l);return l},$be=t=>t?GR(t):GR,{useDebugValue:Jbe}=At,{useSyncExternalStoreWithSelector:Ybe}=Kbe,Xbe=t=>t;function eO(t,e=Xbe,n){const r=Ybe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Jbe(r),r}const qR=(t,e)=>{const n=$be(t),r=(a,s=e)=>eO(n,a,s);return Object.assign(r,n),r},Zbe=(t,e)=>t?qR(t,e):qR;function Hi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,a]of t)if(!Object.is(a,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var eCe={value:()=>{}};function Gw(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new S2(n)}function S2(t){this._=t}function tCe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}S2.prototype=Gw.prototype={constructor:S2,on:function(t,e){var n=this._,r=tCe(t+"",n),a,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((a=(t=r[s]).type)&&(a=nCe(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<i;)if(a=(t=r[s]).type)n[a]=KR(n[a],t.name,e);else if(e==null)for(a in n)n[a]=KR(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new S2(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,s;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,a=s.length;r<a;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,s=r.length;a<s;++a)r[a].value.apply(e,n)}};function nCe(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function KR(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=eCe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var N5="http://www.w3.org/1999/xhtml";const WR={svg:"http://www.w3.org/2000/svg",xhtml:N5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qw(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),WR.hasOwnProperty(e)?{space:WR[e],local:t}:t}function rCe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===N5&&e.documentElement.namespaceURI===N5?e.createElement(t):e.createElementNS(n,t)}}function aCe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tO(t){var e=qw(t);return(e.local?aCe:rCe)(e)}function sCe(){}function X4(t){return t==null?sCe:function(){return this.querySelector(t)}}function iCe(t){typeof t!="function"&&(t=X4(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var s=e[a],i=s.length,o=r[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new nl(r,this._parents)}function oCe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lCe(){return[]}function nO(t){return t==null?lCe:function(){return this.querySelectorAll(t)}}function cCe(t){return function(){return oCe(t.apply(this,arguments))}}function uCe(t){typeof t=="function"?t=cCe(t):t=nO(t);for(var e=this._groups,n=e.length,r=[],a=[],s=0;s<n;++s)for(var i=e[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(r.push(t.call(l,l.__data__,u,i)),a.push(l));return new nl(r,a)}function rO(t){return function(){return this.matches(t)}}function aO(t){return function(e){return e.matches(t)}}var ACe=Array.prototype.find;function dCe(t){return function(){return ACe.call(this.children,t)}}function fCe(){return this.firstElementChild}function hCe(t){return this.select(t==null?fCe:dCe(typeof t=="function"?t:aO(t)))}var mCe=Array.prototype.filter;function pCe(){return Array.from(this.children)}function gCe(t){return function(){return mCe.call(this.children,t)}}function xCe(t){return this.selectAll(t==null?pCe:gCe(typeof t=="function"?t:aO(t)))}function vCe(t){typeof t!="function"&&(t=rO(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var s=e[a],i=s.length,o=r[a]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new nl(r,this._parents)}function sO(t){return new Array(t.length)}function yCe(){return new nl(this._enter||this._groups.map(sO),this._parents)}function By(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}By.prototype={constructor:By,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function wCe(t){return function(){return t}}function bCe(t,e,n,r,a,s){for(var i=0,o,l=e.length,u=s.length;i<u;++i)(o=e[i])?(o.__data__=s[i],r[i]=o):n[i]=new By(t,s[i]);for(;i<l;++i)(o=e[i])&&(a[i]=o)}function CCe(t,e,n,r,a,s,i){var o,l,u=new Map,d=e.length,h=s.length,m=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(m[o]=g=i.call(l,l.__data__,o,e)+"",u.has(g)?a[o]=l:u.set(g,l));for(o=0;o<h;++o)g=i.call(t,s[o],o,s)+"",(l=u.get(g))?(r[o]=l,l.__data__=s[o],u.delete(g)):n[o]=new By(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(m[o])===l&&(a[o]=l)}function ECe(t){return t.__data__}function _Ce(t,e){if(!arguments.length)return Array.from(this,ECe);var n=e?CCe:bCe,r=this._parents,a=this._groups;typeof t!="function"&&(t=wCe(t));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=r[u],h=a[u],m=h.length,g=SCe(t.call(d,d&&d.__data__,u,r)),b=g.length,w=o[u]=new Array(b),E=i[u]=new Array(b),N=l[u]=new Array(m);n(d,h,w,E,N,g,e);for(var I=0,k=0,U,P;I<b;++I)if(U=w[I]){for(I>=k&&(k=I+1);!(P=E[k])&&++k<b;);U._next=P||null}}return i=new nl(i,r),i._enter=o,i._exit=l,i}function SCe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TCe(){return new nl(this._exit||this._groups.map(sO),this._parents)}function BCe(t,e,n){var r=this.enter(),a=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?s.remove():n(s),r&&a?r.merge(a).order():a}function NCe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,s=r.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=n[l],d=r[l],h=u.length,m=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(m[b]=g);for(;l<a;++l)o[l]=n[l];return new nl(o,this._parents)}function kCe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],a=r.length-1,s=r[a],i;--a>=0;)(i=r[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function ICe(t){t||(t=FCe);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var n=this._groups,r=n.length,a=new Array(r),s=0;s<r;++s){for(var i=n[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new nl(a,this._parents).order()}function FCe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function RCe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function DCe(){return Array.from(this)}function LCe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,s=r.length;a<s;++a){var i=r[a];if(i)return i}return null}function UCe(){let t=0;for(const e of this)++t;return t}function MCe(){return!this.node()}function PCe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],s=0,i=a.length,o;s<i;++s)(o=a[s])&&t.call(o,o.__data__,s,a);return this}function jCe(t){return function(){this.removeAttribute(t)}}function OCe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function QCe(t,e){return function(){this.setAttribute(t,e)}}function HCe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function VCe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zCe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function GCe(t,e){var n=qw(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?OCe:jCe:typeof e=="function"?n.local?zCe:VCe:n.local?HCe:QCe)(n,e))}function iO(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qCe(t){return function(){this.style.removeProperty(t)}}function KCe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function WCe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function $Ce(t,e,n){return arguments.length>1?this.each((e==null?qCe:typeof e=="function"?WCe:KCe)(t,e,n??"")):Rm(this.node(),t)}function Rm(t,e){return t.style.getPropertyValue(e)||iO(t).getComputedStyle(t,null).getPropertyValue(e)}function JCe(t){return function(){delete this[t]}}function YCe(t,e){return function(){this[t]=e}}function XCe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ZCe(t,e){return arguments.length>1?this.each((e==null?JCe:typeof e=="function"?XCe:YCe)(t,e)):this.node()[t]}function oO(t){return t.trim().split(/^|\s+/)}function Z4(t){return t.classList||new lO(t)}function lO(t){this._node=t,this._names=oO(t.getAttribute("class")||"")}lO.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function cO(t,e){for(var n=Z4(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function uO(t,e){for(var n=Z4(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function eEe(t){return function(){cO(this,t)}}function tEe(t){return function(){uO(this,t)}}function nEe(t,e){return function(){(e.apply(this,arguments)?cO:uO)(this,t)}}function rEe(t,e){var n=oO(t+"");if(arguments.length<2){for(var r=Z4(this.node()),a=-1,s=n.length;++a<s;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?nEe:e?eEe:tEe)(n,e))}function aEe(){this.textContent=""}function sEe(t){return function(){this.textContent=t}}function iEe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function oEe(t){return arguments.length?this.each(t==null?aEe:(typeof t=="function"?iEe:sEe)(t)):this.node().textContent}function lEe(){this.innerHTML=""}function cEe(t){return function(){this.innerHTML=t}}function uEe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function AEe(t){return arguments.length?this.each(t==null?lEe:(typeof t=="function"?uEe:cEe)(t)):this.node().innerHTML}function dEe(){this.nextSibling&&this.parentNode.appendChild(this)}function fEe(){return this.each(dEe)}function hEe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mEe(){return this.each(hEe)}function pEe(t){var e=typeof t=="function"?t:tO(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function gEe(){return null}function xEe(t,e){var n=typeof t=="function"?t:tO(t),r=e==null?gEe:typeof e=="function"?e:X4(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function vEe(){var t=this.parentNode;t&&t.removeChild(this)}function yEe(){return this.each(vEe)}function wEe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bEe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function CEe(t){return this.select(t?bEe:wEe)}function EEe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _Ee(t){return function(e){t.call(this,e,this.__data__)}}function SEe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function TEe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,a=e.length,s;n<a;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function BEe(t,e,n){return function(){var r=this.__on,a,s=_Ee(e);if(r){for(var i=0,o=r.length;i<o;++i)if((a=r[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=n),a.value=e;return}}this.addEventListener(t.type,s,n),a={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(a):this.__on=[a]}}function NEe(t,e,n){var r=SEe(t+""),a,s=r.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=r[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?BEe:TEe,a=0;a<s;++a)this.each(o(r[a],e,n));return this}function AO(t,e,n){var r=iO(t),a=r.CustomEvent;typeof a=="function"?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function kEe(t,e){return function(){return AO(this,t,e)}}function IEe(t,e){return function(){return AO(this,t,e.apply(this,arguments))}}function FEe(t,e){return this.each((typeof e=="function"?IEe:kEe)(t,e))}function*REe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,s=r.length,i;a<s;++a)(i=r[a])&&(yield i)}var dO=[null];function nl(t,e){this._groups=t,this._parents=e}function Zx(){return new nl([[document.documentElement]],dO)}function DEe(){return this}nl.prototype=Zx.prototype={constructor:nl,select:iCe,selectAll:uCe,selectChild:hCe,selectChildren:xCe,filter:vCe,data:_Ce,enter:yCe,exit:TCe,join:BCe,merge:NCe,selection:DEe,order:kCe,sort:ICe,call:RCe,nodes:DCe,node:LCe,size:UCe,empty:MCe,each:PCe,attr:GCe,style:$Ce,property:ZCe,classed:rEe,text:oEe,html:AEe,raise:fEe,lower:mEe,append:pEe,insert:xEe,remove:yEe,clone:CEe,datum:EEe,on:NEe,dispatch:FEe,[Symbol.iterator]:REe};function yc(t){return typeof t=="string"?new nl([[document.querySelector(t)]],[document.documentElement]):new nl([[t]],dO)}function LEe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function gu(t,e){if(t=LEe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const UEe={passive:!1},wx={capture:!0,passive:!1};function UE(t){t.stopImmediatePropagation()}function pm(t){t.preventDefault(),t.stopImmediatePropagation()}function fO(t){var e=t.document.documentElement,n=yc(t).on("dragstart.drag",pm,wx);"onselectstart"in e?n.on("selectstart.drag",pm,wx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function hO(t,e){var n=t.document.documentElement,r=yc(t).on("dragstart.drag",null);e&&(r.on("click.drag",pm,wx),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $v=t=>()=>t;function k5(t,{sourceEvent:e,subject:n,target:r,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}k5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function MEe(t){return!t.ctrlKey&&!t.button}function PEe(){return this.parentNode}function jEe(t,e){return e??{x:t.x,y:t.y}}function OEe(){return navigator.maxTouchPoints||"ontouchstart"in this}function QEe(){var t=MEe,e=PEe,n=jEe,r=OEe,a={},s=Gw("start","drag","end"),i=0,o,l,u,d,h=0;function m(U){U.on("mousedown.drag",g).filter(r).on("touchstart.drag",E).on("touchmove.drag",N,UEe).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(U,P){if(!(d||!t.call(this,U,P))){var D=k(this,e.call(this,U,P),U,P,"mouse");D&&(yc(U.view).on("mousemove.drag",b,wx).on("mouseup.drag",w,wx),fO(U.view),UE(U),u=!1,o=U.clientX,l=U.clientY,D("start",U))}}function b(U){if(pm(U),!u){var P=U.clientX-o,D=U.clientY-l;u=P*P+D*D>h}a.mouse("drag",U)}function w(U){yc(U.view).on("mousemove.drag mouseup.drag",null),hO(U.view,u),pm(U),a.mouse("end",U)}function E(U,P){if(t.call(this,U,P)){var D=U.changedTouches,_=e.call(this,U,P),B=D.length,T,O;for(T=0;T<B;++T)(O=k(this,_,U,P,D[T].identifier,D[T]))&&(UE(U),O("start",U,D[T]))}}function N(U){var P=U.changedTouches,D=P.length,_,B;for(_=0;_<D;++_)(B=a[P[_].identifier])&&(pm(U),B("drag",U,P[_]))}function I(U){var P=U.changedTouches,D=P.length,_,B;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),_=0;_<D;++_)(B=a[P[_].identifier])&&(UE(U),B("end",U,P[_]))}function k(U,P,D,_,B,T){var O=s.copy(),R=gu(T||D,P),L,Q,z;if((z=n.call(U,new k5("beforestart",{sourceEvent:D,target:m,identifier:B,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:O}),_))!=null)return L=z.x-R[0]||0,Q=z.y-R[1]||0,function ie(J,ee,ae){var q=R,Y;switch(J){case"start":a[B]=ie,Y=i++;break;case"end":delete a[B],--i;case"drag":R=gu(ae||ee,P),Y=i;break}O.call(J,U,new k5(J,{sourceEvent:ee,subject:z,target:m,identifier:B,active:Y,x:R[0]+L,y:R[1]+Q,dx:R[0]-q[0],dy:R[1]-q[1],dispatch:O}),_)}}return m.filter=function(U){return arguments.length?(t=typeof U=="function"?U:$v(!!U),m):t},m.container=function(U){return arguments.length?(e=typeof U=="function"?U:$v(U),m):e},m.subject=function(U){return arguments.length?(n=typeof U=="function"?U:$v(U),m):n},m.touchable=function(U){return arguments.length?(r=typeof U=="function"?U:$v(!!U),m):r},m.on=function(){var U=s.on.apply(s,arguments);return U===s?m:U},m.clickDistance=function(U){return arguments.length?(h=(U=+U)*U,m):Math.sqrt(h)},m}function eT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mO(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function e1(){}var bx=.7,Ny=1/bx,gm="\\s*([+-]?\\d+)\\s*",Cx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HEe=/^#([0-9a-f]{3,8})$/,VEe=new RegExp(`^rgb\\(${gm},${gm},${gm}\\)$`),zEe=new RegExp(`^rgb\\(${Tu},${Tu},${Tu}\\)$`),GEe=new RegExp(`^rgba\\(${gm},${gm},${gm},${Cx}\\)$`),qEe=new RegExp(`^rgba\\(${Tu},${Tu},${Tu},${Cx}\\)$`),KEe=new RegExp(`^hsl\\(${Cx},${Tu},${Tu}\\)$`),WEe=new RegExp(`^hsla\\(${Cx},${Tu},${Tu},${Cx}\\)$`),$R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eT(e1,Ex,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:JR,formatHex:JR,formatHex8:$Ee,formatHsl:JEe,formatRgb:YR,toString:YR});function JR(){return this.rgb().formatHex()}function $Ee(){return this.rgb().formatHex8()}function JEe(){return pO(this).formatHsl()}function YR(){return this.rgb().formatRgb()}function Ex(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=HEe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?XR(e):n===3?new yo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Jv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Jv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VEe.exec(t))?new yo(e[1],e[2],e[3],1):(e=zEe.exec(t))?new yo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=GEe.exec(t))?Jv(e[1],e[2],e[3],e[4]):(e=qEe.exec(t))?Jv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=KEe.exec(t))?tD(e[1],e[2]/100,e[3]/100,1):(e=WEe.exec(t))?tD(e[1],e[2]/100,e[3]/100,e[4]):$R.hasOwnProperty(t)?XR($R[t]):t==="transparent"?new yo(NaN,NaN,NaN,0):null}function XR(t){return new yo(t>>16&255,t>>8&255,t&255,1)}function Jv(t,e,n,r){return r<=0&&(t=e=n=NaN),new yo(t,e,n,r)}function YEe(t){return t instanceof e1||(t=Ex(t)),t?(t=t.rgb(),new yo(t.r,t.g,t.b,t.opacity)):new yo}function I5(t,e,n,r){return arguments.length===1?YEe(t):new yo(t,e,n,r??1)}function yo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}eT(yo,I5,mO(e1,{brighter(t){return t=t==null?Ny:Math.pow(Ny,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bx:Math.pow(bx,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yo(xh(this.r),xh(this.g),xh(this.b),ky(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZR,formatHex:ZR,formatHex8:XEe,formatRgb:eD,toString:eD}));function ZR(){return`#${ih(this.r)}${ih(this.g)}${ih(this.b)}`}function XEe(){return`#${ih(this.r)}${ih(this.g)}${ih(this.b)}${ih((isNaN(this.opacity)?1:this.opacity)*255)}`}function eD(){const t=ky(this.opacity);return`${t===1?"rgb(":"rgba("}${xh(this.r)}, ${xh(this.g)}, ${xh(this.b)}${t===1?")":`, ${t})`}`}function ky(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ih(t){return t=xh(t),(t<16?"0":"")+t.toString(16)}function tD(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new wc(t,e,n,r)}function pO(t){if(t instanceof wc)return new wc(t.h,t.s,t.l,t.opacity);if(t instanceof e1||(t=Ex(t)),!t)return new wc;if(t instanceof wc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),s=Math.max(e,n,r),i=NaN,o=s-a,l=(s+a)/2;return o?(e===s?i=(n-r)/o+(n<r)*6:n===s?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new wc(i,o,l,t.opacity)}function ZEe(t,e,n,r){return arguments.length===1?pO(t):new wc(t,e,n,r??1)}function wc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}eT(wc,ZEe,mO(e1,{brighter(t){return t=t==null?Ny:Math.pow(Ny,t),new wc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bx:Math.pow(bx,t),new wc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new yo(ME(t>=240?t-240:t+120,a,r),ME(t,a,r),ME(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new wc(nD(this.h),Yv(this.s),Yv(this.l),ky(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ky(this.opacity);return`${t===1?"hsl(":"hsla("}${nD(this.h)}, ${Yv(this.s)*100}%, ${Yv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nD(t){return t=(t||0)%360,t<0?t+360:t}function Yv(t){return Math.max(0,Math.min(1,t||0))}function ME(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gO=t=>()=>t;function e_e(t,e){return function(n){return t+n*e}}function t_e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function n_e(t){return(t=+t)==1?xO:function(e,n){return n-e?t_e(e,n,t):gO(isNaN(e)?n:e)}}function xO(t,e){var n=e-t;return n?e_e(t,n):gO(isNaN(t)?e:t)}const rD=function t(e){var n=n_e(e);function r(a,s){var i=n((a=I5(a)).r,(s=I5(s)).r),o=n(a.g,s.g),l=n(a.b,s.b),u=xO(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return r.gamma=t,r}(1);function Fd(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var F5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PE=new RegExp(F5.source,"g");function r_e(t){return function(){return t}}function a_e(t){return function(e){return t(e)+""}}function s_e(t,e){var n=F5.lastIndex=PE.lastIndex=0,r,a,s,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=F5.exec(t))&&(a=PE.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),o[i]?o[i]+=s:o[++i]=s),(r=r[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Fd(r,a)})),n=PE.lastIndex;return n<e.length&&(s=e.slice(n),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?a_e(l[0].x):r_e(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var aD=180/Math.PI,R5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vO(t,e,n,r,a,s){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*aD,skewX:Math.atan(l)*aD,scaleX:i,scaleY:o}}var Xv;function i_e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?R5:vO(e.a,e.b,e.c,e.d,e.e,e.f)}function o_e(t){return t==null||(Xv||(Xv=document.createElementNS("http://www.w3.org/2000/svg","g")),Xv.setAttribute("transform",t),!(t=Xv.transform.baseVal.consolidate()))?R5:(t=t.matrix,vO(t.a,t.b,t.c,t.d,t.e,t.f))}function yO(t,e,n,r){function a(u){return u.length?u.pop()+" ":""}function s(u,d,h,m,g,b){if(u!==h||d!==m){var w=g.push("translate(",null,e,null,n);b.push({i:w-4,x:Fd(u,h)},{i:w-2,x:Fd(d,m)})}else(h||m)&&g.push("translate("+h+e+m+n)}function i(u,d,h,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:h.push(a(h)+"rotate(",null,r)-2,x:Fd(u,d)})):d&&h.push(a(h)+"rotate("+d+r)}function o(u,d,h,m){u!==d?m.push({i:h.push(a(h)+"skewX(",null,r)-2,x:Fd(u,d)}):d&&h.push(a(h)+"skewX("+d+r)}function l(u,d,h,m,g,b){if(u!==h||d!==m){var w=g.push(a(g)+"scale(",null,",",null,")");b.push({i:w-4,x:Fd(u,h)},{i:w-2,x:Fd(d,m)})}else(h!==1||m!==1)&&g.push(a(g)+"scale("+h+","+m+")")}return function(u,d){var h=[],m=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,m),i(u.rotate,d.rotate,h,m),o(u.skewX,d.skewX,h,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,m),u=d=null,function(g){for(var b=-1,w=m.length,E;++b<w;)h[(E=m[b]).i]=E.x(g);return h.join("")}}}var l_e=yO(i_e,"px, ","px)","deg)"),c_e=yO(o_e,", ",")",")"),u_e=1e-12;function sD(t){return((t=Math.exp(t))+1/t)/2}function A_e(t){return((t=Math.exp(t))-1/t)/2}function d_e(t){return((t=Math.exp(2*t))-1)/(t+1)}const f_e=function t(e,n,r){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],h=i[1],m=i[2],g=d-o,b=h-l,w=g*g+b*b,E,N;if(w<u_e)N=Math.log(m/u)/e,E=function(_){return[o+_*g,l+_*b,u*Math.exp(e*_*N)]};else{var I=Math.sqrt(w),k=(m*m-u*u+r*w)/(2*u*n*I),U=(m*m-u*u-r*w)/(2*m*n*I),P=Math.log(Math.sqrt(k*k+1)-k),D=Math.log(Math.sqrt(U*U+1)-U);N=(D-P)/e,E=function(_){var B=_*N,T=sD(P),O=u/(n*I)*(T*d_e(e*B+P)-A_e(P));return[o+O*g,l+O*b,u*T/sD(e*B+P)]}}return E.duration=N*1e3*e/Math.SQRT2,E}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return t(i,o,l)},a}(Math.SQRT2,2,4);var Dm=0,vg=0,Jp=0,wO=1e3,Iy,yg,Fy=0,Ih=0,Kw=0,_x=typeof performance=="object"&&performance.now?performance:Date,bO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tT(){return Ih||(bO(h_e),Ih=_x.now()+Kw)}function h_e(){Ih=0}function Ry(){this._call=this._time=this._next=null}Ry.prototype=CO.prototype={constructor:Ry,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?tT():+n)+(e==null?0:+e),!this._next&&yg!==this&&(yg?yg._next=this:Iy=this,yg=this),this._call=t,this._time=n,D5()},stop:function(){this._call&&(this._call=null,this._time=1/0,D5())}};function CO(t,e,n){var r=new Ry;return r.restart(t,e,n),r}function m_e(){tT(),++Dm;for(var t=Iy,e;t;)(e=Ih-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Dm}function iD(){Ih=(Fy=_x.now())+Kw,Dm=vg=0;try{m_e()}finally{Dm=0,g_e(),Ih=0}}function p_e(){var t=_x.now(),e=t-Fy;e>wO&&(Kw-=e,Fy=t)}function g_e(){for(var t,e=Iy,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Iy=n);yg=t,D5(r)}function D5(t){if(!Dm){vg&&(vg=clearTimeout(vg));var e=t-Ih;e>24?(t<1/0&&(vg=setTimeout(iD,t-_x.now()-Kw)),Jp&&(Jp=clearInterval(Jp))):(Jp||(Fy=_x.now(),Jp=setInterval(p_e,wO)),Dm=1,bO(iD))}}function oD(t,e,n){var r=new Ry;return e=e==null?0:+e,r.restart(a=>{r.stop(),t(a+e)},e,n),r}var x_e=Gw("start","end","cancel","interrupt"),v_e=[],EO=0,lD=1,L5=2,T2=3,cD=4,U5=5,B2=6;function Ww(t,e,n,r,a,s){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;y_e(t,n,{name:e,index:r,group:a,on:x_e,tween:v_e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:EO})}function nT(t,e){var n=Rc(t,e);if(n.state>EO)throw new Error("too late; already scheduled");return n}function Du(t,e){var n=Rc(t,e);if(n.state>T2)throw new Error("too late; already running");return n}function Rc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function y_e(t,e,n){var r=t.__transition,a;r[e]=n,n.timer=CO(s,0,n.time);function s(u){n.state=lD,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,h,m,g;if(n.state!==lD)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===T2)return oD(i);g.state===cD?(g.state=B2,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=B2,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[d])}if(oD(function(){n.state===T2&&(n.state=cD,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=L5,n.on.call("start",t,t.__data__,n.index,n.group),n.state===L5){for(n.state=T2,a=new Array(m=n.tween.length),d=0,h=-1;d<m;++d)(g=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(a[++h]=g);a.length=h+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=U5,1),h=-1,m=a.length;++h<m;)a[h].call(t,d);n.state===U5&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=B2,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function N2(t,e){var n=t.__transition,r,a,s=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((r=n[i]).name!==e){s=!1;continue}a=r.state>L5&&r.state<U5,r.state=B2,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[i]}s&&delete t.__transition}}function w_e(t){return this.each(function(){N2(this,t)})}function b_e(t,e){var n,r;return function(){var a=Du(this,t),s=a.tween;if(s!==n){r=n=s;for(var i=0,o=r.length;i<o;++i)if(r[i].name===e){r=r.slice(),r.splice(i,1);break}}a.tween=r}}function C_e(t,e,n){var r,a;if(typeof n!="function")throw new Error;return function(){var s=Du(this,t),i=s.tween;if(i!==r){a=(r=i).slice();for(var o={name:e,value:n},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function E_e(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Rc(this.node(),n).tween,a=0,s=r.length,i;a<s;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((e==null?b_e:C_e)(n,t,e))}function rT(t,e,n){var r=t._id;return t.each(function(){var a=Du(this,r);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return Rc(a,r).value[e]}}function _O(t,e){var n;return(typeof e=="number"?Fd:e instanceof Ex?rD:(n=Ex(e))?(e=n,rD):s_e)(t,e)}function __e(t){return function(){this.removeAttribute(t)}}function S_e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function T_e(t,e,n){var r,a=n+"",s;return function(){var i=this.getAttribute(t);return i===a?null:i===r?s:s=e(r=i,n)}}function B_e(t,e,n){var r,a=n+"",s;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===r?s:s=e(r=i,n)}}function N_e(t,e,n){var r,a,s;return function(){var i,o=n(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===r&&l===a?s:(a=l,s=e(r=i,o)))}}function k_e(t,e,n){var r,a,s;return function(){var i,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===r&&l===a?s:(a=l,s=e(r=i,o)))}}function I_e(t,e){var n=qw(t),r=n==="transform"?c_e:_O;return this.attrTween(t,typeof e=="function"?(n.local?k_e:N_e)(n,r,rT(this,"attr."+t,e)):e==null?(n.local?S_e:__e)(n):(n.local?B_e:T_e)(n,r,e))}function F_e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function R_e(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function D_e(t,e){var n,r;function a(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&R_e(t,s)),n}return a._value=e,a}function L_e(t,e){var n,r;function a(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&F_e(t,s)),n}return a._value=e,a}function U_e(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=qw(t);return this.tween(n,(r.local?D_e:L_e)(r,e))}function M_e(t,e){return function(){nT(this,t).delay=+e.apply(this,arguments)}}function P_e(t,e){return e=+e,function(){nT(this,t).delay=e}}function j_e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?M_e:P_e)(e,t)):Rc(this.node(),e).delay}function O_e(t,e){return function(){Du(this,t).duration=+e.apply(this,arguments)}}function Q_e(t,e){return e=+e,function(){Du(this,t).duration=e}}function H_e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?O_e:Q_e)(e,t)):Rc(this.node(),e).duration}function V_e(t,e){if(typeof e!="function")throw new Error;return function(){Du(this,t).ease=e}}function z_e(t){var e=this._id;return arguments.length?this.each(V_e(e,t)):Rc(this.node(),e).ease}function G_e(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Du(this,t).ease=n}}function q_e(t){if(typeof t!="function")throw new Error;return this.each(G_e(this._id,t))}function K_e(t){typeof t!="function"&&(t=rO(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var s=e[a],i=s.length,o=r[a]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new FA(r,this._parents,this._name,this._id)}function W_e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,s=Math.min(r,a),i=new Array(r),o=0;o<s;++o)for(var l=e[o],u=n[o],d=l.length,h=i[o]=new Array(d),m,g=0;g<d;++g)(m=l[g]||u[g])&&(h[g]=m);for(;o<r;++o)i[o]=e[o];return new FA(i,this._parents,this._name,this._id)}function $_e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function J_e(t,e,n){var r,a,s=$_e(e)?nT:Du;return function(){var i=s(this,t),o=i.on;o!==r&&(a=(r=o).copy()).on(e,n),i.on=a}}function Y_e(t,e){var n=this._id;return arguments.length<2?Rc(this.node(),n).on.on(t):this.each(J_e(n,t,e))}function X_e(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Z_e(){return this.on("end.remove",X_e(this._id))}function e5e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=X4(t));for(var r=this._groups,a=r.length,s=new Array(a),i=0;i<a;++i)for(var o=r[i],l=o.length,u=s[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),u[m]=h,Ww(u[m],e,n,m,u,Rc(d,n)));return new FA(s,this._parents,e,n)}function t5e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nO(t));for(var r=this._groups,a=r.length,s=[],i=[],o=0;o<a;++o)for(var l=r[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),g,b=Rc(d,n),w=0,E=m.length;w<E;++w)(g=m[w])&&Ww(g,e,n,w,m,b);s.push(m),i.push(d)}return new FA(s,i,e,n)}var n5e=Zx.prototype.constructor;function r5e(){return new n5e(this._groups,this._parents)}function a5e(t,e){var n,r,a;return function(){var s=Rm(this,t),i=(this.style.removeProperty(t),Rm(this,t));return s===i?null:s===n&&i===r?a:a=e(n=s,r=i)}}function SO(t){return function(){this.style.removeProperty(t)}}function s5e(t,e,n){var r,a=n+"",s;return function(){var i=Rm(this,t);return i===a?null:i===r?s:s=e(r=i,n)}}function i5e(t,e,n){var r,a,s;return function(){var i=Rm(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Rm(this,t))),i===l?null:i===r&&l===a?s:(a=l,s=e(r=i,o))}}function o5e(t,e){var n,r,a,s="style."+e,i="end."+s,o;return function(){var l=Du(this,t),u=l.on,d=l.value[s]==null?o||(o=SO(e)):void 0;(u!==n||a!==d)&&(r=(n=u).copy()).on(i,a=d),l.on=r}}function l5e(t,e,n){var r=(t+="")=="transform"?l_e:_O;return e==null?this.styleTween(t,a5e(t,r)).on("end.style."+t,SO(t)):typeof e=="function"?this.styleTween(t,i5e(t,r,rT(this,"style."+t,e))).each(o5e(this._id,t)):this.styleTween(t,s5e(t,r,e),n).on("end.style."+t,null)}function c5e(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function u5e(t,e,n){var r,a;function s(){var i=e.apply(this,arguments);return i!==a&&(r=(a=i)&&c5e(t,i,n)),r}return s._value=e,s}function A5e(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,u5e(t,e,n??""))}function d5e(t){return function(){this.textContent=t}}function f5e(t){return function(){var e=t(this);this.textContent=e??""}}function h5e(t){return this.tween("text",typeof t=="function"?f5e(rT(this,"text",t)):d5e(t==null?"":t+""))}function m5e(t){return function(e){this.textContent=t.call(this,e)}}function p5e(t){var e,n;function r(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&m5e(a)),e}return r._value=t,r}function g5e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,p5e(t))}function x5e(){for(var t=this._name,e=this._id,n=TO(),r=this._groups,a=r.length,s=0;s<a;++s)for(var i=r[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Rc(l,e);Ww(l,t,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new FA(r,this._parents,t,n)}function v5e(){var t,e,n=this,r=n._id,a=n.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};n.each(function(){var u=Du(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),a===0&&s()})}var y5e=0;function FA(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function TO(){return++y5e}var fA=Zx.prototype;FA.prototype={constructor:FA,select:e5e,selectAll:t5e,selectChild:fA.selectChild,selectChildren:fA.selectChildren,filter:K_e,merge:W_e,selection:r5e,transition:x5e,call:fA.call,nodes:fA.nodes,node:fA.node,size:fA.size,empty:fA.empty,each:fA.each,on:Y_e,attr:I_e,attrTween:U_e,style:l5e,styleTween:A5e,text:h5e,textTween:g5e,remove:Z_e,tween:E_e,delay:j_e,duration:H_e,ease:z_e,easeVarying:q_e,end:v5e,[Symbol.iterator]:fA[Symbol.iterator]};function w5e(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var b5e={time:null,delay:0,duration:250,ease:w5e};function C5e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function E5e(t){var e,n;t instanceof FA?(e=t._id,t=t._name):(e=TO(),(n=b5e).time=tT(),t=t==null?null:t+"");for(var r=this._groups,a=r.length,s=0;s<a;++s)for(var i=r[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&Ww(l,t,e,u,i,n||C5e(l,e));return new FA(r,this._parents,t,e)}Zx.prototype.interrupt=w_e;Zx.prototype.transition=E5e;const Zv=t=>()=>t;function _5e(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function xA(t,e,n){this.k=t,this.x=e,this.y=n}xA.prototype={constructor:xA,scale:function(t){return t===1?this:new xA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new xA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tf=new xA(1,0,0);xA.prototype;function jE(t){t.stopImmediatePropagation()}function Yp(t){t.preventDefault(),t.stopImmediatePropagation()}function S5e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function T5e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function uD(){return this.__zoom||tf}function B5e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function N5e(){return navigator.maxTouchPoints||"ontouchstart"in this}function k5e(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function I5e(){var t=S5e,e=T5e,n=k5e,r=B5e,a=N5e,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=f_e,u=Gw("start","zoom","end"),d,h,m,g=500,b=150,w=0,E=10;function N(z){z.property("__zoom",uD).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(z,ie,J,ee){var ae=z.selection?z.selection():z;ae.property("__zoom",uD),z!==ae?P(z,ie,J,ee):ae.interrupt().each(function(){D(this,arguments).event(ee).start().zoom(null,typeof ie=="function"?ie.apply(this,arguments):ie).end()})},N.scaleBy=function(z,ie,J,ee){N.scaleTo(z,function(){var ae=this.__zoom.k,q=typeof ie=="function"?ie.apply(this,arguments):ie;return ae*q},J,ee)},N.scaleTo=function(z,ie,J,ee){N.transform(z,function(){var ae=e.apply(this,arguments),q=this.__zoom,Y=J==null?U(ae):typeof J=="function"?J.apply(this,arguments):J,Ae=q.invert(Y),j=typeof ie=="function"?ie.apply(this,arguments):ie;return n(k(I(q,j),Y,Ae),ae,i)},J,ee)},N.translateBy=function(z,ie,J,ee){N.transform(z,function(){return n(this.__zoom.translate(typeof ie=="function"?ie.apply(this,arguments):ie,typeof J=="function"?J.apply(this,arguments):J),e.apply(this,arguments),i)},null,ee)},N.translateTo=function(z,ie,J,ee,ae){N.transform(z,function(){var q=e.apply(this,arguments),Y=this.__zoom,Ae=ee==null?U(q):typeof ee=="function"?ee.apply(this,arguments):ee;return n(tf.translate(Ae[0],Ae[1]).scale(Y.k).translate(typeof ie=="function"?-ie.apply(this,arguments):-ie,typeof J=="function"?-J.apply(this,arguments):-J),q,i)},ee,ae)};function I(z,ie){return ie=Math.max(s[0],Math.min(s[1],ie)),ie===z.k?z:new xA(ie,z.x,z.y)}function k(z,ie,J){var ee=ie[0]-J[0]*z.k,ae=ie[1]-J[1]*z.k;return ee===z.x&&ae===z.y?z:new xA(z.k,ee,ae)}function U(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function P(z,ie,J,ee){z.on("start.zoom",function(){D(this,arguments).event(ee).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(ee).end()}).tween("zoom",function(){var ae=this,q=arguments,Y=D(ae,q).event(ee),Ae=e.apply(ae,q),j=J==null?U(Ae):typeof J=="function"?J.apply(ae,q):J,K=Math.max(Ae[1][0]-Ae[0][0],Ae[1][1]-Ae[0][1]),X=ae.__zoom,te=typeof ie=="function"?ie.apply(ae,q):ie,le=l(X.invert(j).concat(K/X.k),te.invert(j).concat(K/te.k));return function(ye){if(ye===1)ye=te;else{var Ce=le(ye),_e=K/Ce[2];ye=new xA(_e,j[0]-Ce[0]*_e,j[1]-Ce[1]*_e)}Y.zoom(null,ye)}})}function D(z,ie,J){return!J&&z.__zooming||new _(z,ie)}function _(z,ie){this.that=z,this.args=ie,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,ie),this.taps=0}_.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,ie){return this.mouse&&z!=="mouse"&&(this.mouse[1]=ie.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=ie.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=ie.invert(this.touch1[0])),this.that.__zoom=ie,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var ie=yc(this.that).datum();u.call(z,this.that,new _5e(z,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:u}),ie)}};function B(z,...ie){if(!t.apply(this,arguments))return;var J=D(this,ie).event(z),ee=this.__zoom,ae=Math.max(s[0],Math.min(s[1],ee.k*Math.pow(2,r.apply(this,arguments)))),q=gu(z);if(J.wheel)(J.mouse[0][0]!==q[0]||J.mouse[0][1]!==q[1])&&(J.mouse[1]=ee.invert(J.mouse[0]=q)),clearTimeout(J.wheel);else{if(ee.k===ae)return;J.mouse=[q,ee.invert(q)],N2(this),J.start()}Yp(z),J.wheel=setTimeout(Y,b),J.zoom("mouse",n(k(I(ee,ae),J.mouse[0],J.mouse[1]),J.extent,i));function Y(){J.wheel=null,J.end()}}function T(z,...ie){if(m||!t.apply(this,arguments))return;var J=z.currentTarget,ee=D(this,ie,!0).event(z),ae=yc(z.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",K,!0),q=gu(z,J),Y=z.clientX,Ae=z.clientY;fO(z.view),jE(z),ee.mouse=[q,this.__zoom.invert(q)],N2(this),ee.start();function j(X){if(Yp(X),!ee.moved){var te=X.clientX-Y,le=X.clientY-Ae;ee.moved=te*te+le*le>w}ee.event(X).zoom("mouse",n(k(ee.that.__zoom,ee.mouse[0]=gu(X,J),ee.mouse[1]),ee.extent,i))}function K(X){ae.on("mousemove.zoom mouseup.zoom",null),hO(X.view,ee.moved),Yp(X),ee.event(X).end()}}function O(z,...ie){if(t.apply(this,arguments)){var J=this.__zoom,ee=gu(z.changedTouches?z.changedTouches[0]:z,this),ae=J.invert(ee),q=J.k*(z.shiftKey?.5:2),Y=n(k(I(J,q),ee,ae),e.apply(this,ie),i);Yp(z),o>0?yc(this).transition().duration(o).call(P,Y,ee,z):yc(this).call(N.transform,Y,ee,z)}}function R(z,...ie){if(t.apply(this,arguments)){var J=z.touches,ee=J.length,ae=D(this,ie,z.changedTouches.length===ee).event(z),q,Y,Ae,j;for(jE(z),Y=0;Y<ee;++Y)Ae=J[Y],j=gu(Ae,this),j=[j,this.__zoom.invert(j),Ae.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==j[2]&&(ae.touch1=j,ae.taps=0):(ae.touch0=j,q=!0,ae.taps=1+!!d);d&&(d=clearTimeout(d)),q&&(ae.taps<2&&(h=j[0],d=setTimeout(function(){d=null},g)),N2(this),ae.start())}}function L(z,...ie){if(this.__zooming){var J=D(this,ie).event(z),ee=z.changedTouches,ae=ee.length,q,Y,Ae,j;for(Yp(z),q=0;q<ae;++q)Y=ee[q],Ae=gu(Y,this),J.touch0&&J.touch0[2]===Y.identifier?J.touch0[0]=Ae:J.touch1&&J.touch1[2]===Y.identifier&&(J.touch1[0]=Ae);if(Y=J.that.__zoom,J.touch1){var K=J.touch0[0],X=J.touch0[1],te=J.touch1[0],le=J.touch1[1],ye=(ye=te[0]-K[0])*ye+(ye=te[1]-K[1])*ye,Ce=(Ce=le[0]-X[0])*Ce+(Ce=le[1]-X[1])*Ce;Y=I(Y,Math.sqrt(ye/Ce)),Ae=[(K[0]+te[0])/2,(K[1]+te[1])/2],j=[(X[0]+le[0])/2,(X[1]+le[1])/2]}else if(J.touch0)Ae=J.touch0[0],j=J.touch0[1];else return;J.zoom("touch",n(k(Y,Ae,j),J.extent,i))}}function Q(z,...ie){if(this.__zooming){var J=D(this,ie).event(z),ee=z.changedTouches,ae=ee.length,q,Y;for(jE(z),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),q=0;q<ae;++q)Y=ee[q],J.touch0&&J.touch0[2]===Y.identifier?delete J.touch0:J.touch1&&J.touch1[2]===Y.identifier&&delete J.touch1;if(J.touch1&&!J.touch0&&(J.touch0=J.touch1,delete J.touch1),J.touch0)J.touch0[1]=this.__zoom.invert(J.touch0[0]);else if(J.end(),J.taps===2&&(Y=gu(Y,this),Math.hypot(h[0]-Y[0],h[1]-Y[1])<E)){var Ae=yc(this).on("dblclick.zoom");Ae&&Ae.apply(this,arguments)}}}return N.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:Zv(+z),N):r},N.filter=function(z){return arguments.length?(t=typeof z=="function"?z:Zv(!!z),N):t},N.touchable=function(z){return arguments.length?(a=typeof z=="function"?z:Zv(!!z),N):a},N.extent=function(z){return arguments.length?(e=typeof z=="function"?z:Zv([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),N):e},N.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],N):[s[0],s[1]]},N.translateExtent=function(z){return arguments.length?(i[0][0]=+z[0][0],i[1][0]=+z[1][0],i[0][1]=+z[0][1],i[1][1]=+z[1][1],N):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},N.constrain=function(z){return arguments.length?(n=z,N):n},N.duration=function(z){return arguments.length?(o=+z,N):o},N.interpolate=function(z){return arguments.length?(l=z,N):l},N.on=function(){var z=u.on.apply(u,arguments);return z===u?N:z},N.clickDistance=function(z){return arguments.length?(w=(z=+z)*z,N):Math.sqrt(w)},N.tapDistance=function(z){return arguments.length?(E=+z,N):E},N}KD();const $w=Z.createContext(null),F5e=$w.Provider,RA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},BO=RA.error001();function _a(t,e){const n=Z.useContext($w);if(n===null)throw new Error(BO);return eO(n,t,e)}const $s=()=>{const t=Z.useContext($w);if(t===null)throw new Error(BO);return Z.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},R5e=t=>t.userSelectionActive?"none":"all";function NO({position:t,children:e,className:n,style:r,...a}){const s=_a(R5e),i=`${t}`.split("-");return At.createElement("div",{className:Zi(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...a},e)}function D5e({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:At.createElement(NO,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const L5e=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=Z.useRef(null),[m,g]=Z.useState({x:0,y:0,width:0,height:0}),b=Zi(["react-flow__edge-textwrapper",u]);return Z.useEffect(()=>{if(h.current){const w=h.current.getBBox();g({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:At.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},a&&At.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),At.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:r},n),l)};var U5e=Z.memo(L5e);const aT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Lm=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),sT=(t={x:0,y:0},e)=>({x:Lm(t.x,e[0][0],e[1][0]),y:Lm(t.y,e[0][1],e[1][1])}),AD=(t,e,n)=>t<e?Lm(Math.abs(t-e),1,50)/50:t>n?-Lm(Math.abs(t-n),1,50)/50:0,kO=(t,e)=>{const n=AD(t.x,35,e.width-35)*20,r=AD(t.y,35,e.height-35)*20;return[n,r]},IO=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},M5e=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),iT=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),P5e=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),dD=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),M5=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},j5e=t=>Pl(t.width)&&Pl(t.height)&&Pl(t.x)&&Pl(t.y),Pl=t=>!isNaN(t)&&isFinite(t),Ma=Symbol.for("internals"),FO=["Enter"," ","Escape"],O5e=(t,e)=>{},Q5e=t=>"nativeEvent"in t;function P5(t){var a,s;const e=Q5e(t)?t.nativeEvent:t,n=((s=(a=e.composedPath)==null?void 0:a.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const RO=t=>"clientX"in t,nf=(t,e)=>{var s,i;const n=RO(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,a=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:a-((e==null?void 0:e.top)??0)}},Dy=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},t1=({id:t,path:e,labelX:n,labelY:r,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),g&&At.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&Pl(n)&&Pl(r)?At.createElement(U5e,{x:n,y:r,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);t1.displayName="BaseEdge";function Xp(t,e,n){return n===void 0?n:r=>{const a=e().edges.find(s=>s.id===t);a&&n(r,{...a})}}function DO({sourceX:t,sourceY:e,targetX:n,targetY:r}){const a=Math.abs(n-t)/2,s=n<t?n+a:n-a,i=Math.abs(r-e)/2,o=r<e?r+i:r-i;return[s,o,a,i]}function LO({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=t*.125+a*.375+i*.375+n*.125,u=e*.125+s*.375+o*.375+r*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Fh;(function(t){t.Strict="strict",t.Loose="loose"})(Fh||(Fh={}));var oh;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(oh||(oh={}));var Sx;(function(t){t.Partial="partial",t.Full="full"})(Sx||(Sx={}));var jd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(jd||(jd={}));var Ly;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ly||(Ly={}));var on;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(on||(on={}));function fD({pos:t,x1:e,y1:n,x2:r,y2:a}){return t===on.Left||t===on.Right?[.5*(e+r),n]:[e,.5*(n+a)]}function UO({sourceX:t,sourceY:e,sourcePosition:n=on.Bottom,targetX:r,targetY:a,targetPosition:s=on.Top}){const[i,o]=fD({pos:n,x1:t,y1:e,x2:r,y2:a}),[l,u]=fD({pos:s,x1:r,y1:a,x2:t,y2:e}),[d,h,m,g]=LO({sourceX:t,sourceY:e,targetX:r,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${r},${a}`,d,h,m,g]}const oT=Z.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:a=on.Bottom,targetPosition:s=on.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:w})=>{const[E,N,I]=UO({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:r,targetPosition:s});return At.createElement(t1,{path:E,labelX:N,labelY:I,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:w})});oT.displayName="SimpleBezierEdge";const hD={[on.Left]:{x:-1,y:0},[on.Right]:{x:1,y:0},[on.Top]:{x:0,y:-1},[on.Bottom]:{x:0,y:1}},H5e=({source:t,sourcePosition:e=on.Bottom,target:n})=>e===on.Left||e===on.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},mD=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function V5e({source:t,sourcePosition:e=on.Bottom,target:n,targetPosition:r=on.Top,center:a,offset:s}){const i=hD[e],o=hD[r],l={x:t.x+i.x*s,y:t.y+i.y*s},u={x:n.x+o.x*s,y:n.y+o.y*s},d=H5e({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",m=d[h];let g=[],b,w;const E={x:0,y:0},N={x:0,y:0},[I,k,U,P]=DO({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[h]*o[h]===-1){b=a.x??I,w=a.y??k;const _=[{x:b,y:l.y},{x:b,y:u.y}],B=[{x:l.x,y:w},{x:u.x,y:w}];i[h]===m?g=h==="x"?_:B:g=h==="x"?B:_}else{const _=[{x:l.x,y:u.y}],B=[{x:u.x,y:l.y}];if(h==="x"?g=i.x===m?B:_:g=i.y===m?_:B,e===r){const Q=Math.abs(t[h]-n[h]);if(Q<=s){const z=Math.min(s-1,s-Q);i[h]===m?E[h]=(l[h]>t[h]?-1:1)*z:N[h]=(u[h]>n[h]?-1:1)*z}}if(e!==r){const Q=h==="x"?"y":"x",z=i[h]===o[Q],ie=l[Q]>u[Q],J=l[Q]<u[Q];(i[h]===1&&(!z&&ie||z&&J)||i[h]!==1&&(!z&&J||z&&ie))&&(g=h==="x"?_:B)}const T={x:l.x+E.x,y:l.y+E.y},O={x:u.x+N.x,y:u.y+N.y},R=Math.max(Math.abs(T.x-g[0].x),Math.abs(O.x-g[0].x)),L=Math.max(Math.abs(T.y-g[0].y),Math.abs(O.y-g[0].y));R>=L?(b=(T.x+O.x)/2,w=g[0].y):(b=g[0].x,w=(T.y+O.y)/2)}return[[t,{x:l.x+E.x,y:l.y+E.y},...g,{x:u.x+N.x,y:u.y+N.y},n],b,w,U,P]}function z5e(t,e,n,r){const a=Math.min(mD(t,e)/2,mD(e,n)/2,r),{x:s,y:i}=e;if(t.x===s&&s===n.x||t.y===i&&i===n.y)return`L${s} ${i}`;if(t.y===i){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function j5({sourceX:t,sourceY:e,sourcePosition:n=on.Bottom,targetX:r,targetY:a,targetPosition:s=on.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,m,g,b]=V5e({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((E,N,I)=>{let k="";return I>0&&I<d.length-1?k=z5e(d[I-1],N,d[I+1],i):k=`${I===0?"M":"L"}${N.x} ${N.y}`,E+=k,E},""),h,m,g,b]}const Jw=Z.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=on.Bottom,targetPosition:m=on.Top,markerEnd:g,markerStart:b,pathOptions:w,interactionWidth:E})=>{const[N,I,k]=j5({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:m,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return At.createElement(t1,{path:N,labelX:I,labelY:k,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:E})});Jw.displayName="SmoothStepEdge";const lT=Z.memo(t=>{var e;return At.createElement(Jw,{...t,pathOptions:Z.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});lT.displayName="StepEdge";function G5e({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[a,s,i,o]=DO({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,a,s,i,o]}const cT=Z.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[b,w,E]=G5e({sourceX:t,sourceY:e,targetX:n,targetY:r});return At.createElement(t1,{path:b,labelX:w,labelY:E,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})});cT.displayName="StraightEdge";function e2(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function pD({pos:t,x1:e,y1:n,x2:r,y2:a,c:s}){switch(t){case on.Left:return[e-e2(e-r,s),n];case on.Right:return[e+e2(r-e,s),n];case on.Top:return[e,n-e2(n-a,s)];case on.Bottom:return[e,n+e2(a-n,s)]}}function MO({sourceX:t,sourceY:e,sourcePosition:n=on.Bottom,targetX:r,targetY:a,targetPosition:s=on.Top,curvature:i=.25}){const[o,l]=pD({pos:n,x1:t,y1:e,x2:r,y2:a,c:i}),[u,d]=pD({pos:s,x1:r,y1:a,x2:t,y2:e,c:i}),[h,m,g,b]=LO({sourceX:t,sourceY:e,targetX:r,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${a}`,h,m,g,b]}const Uy=Z.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:a=on.Bottom,targetPosition:s=on.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,pathOptions:w,interactionWidth:E})=>{const[N,I,k]=MO({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:r,targetPosition:s,curvature:w==null?void 0:w.curvature});return At.createElement(t1,{path:N,labelX:I,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:E})});Uy.displayName="BezierEdge";const uT=Z.createContext(null),q5e=uT.Provider;uT.Consumer;const K5e=()=>Z.useContext(uT),W5e=t=>"id"in t&&"source"in t&&"target"in t,$5e=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,O5=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,J5e=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Y5e=(t,e)=>{if(!t.source||!t.target)return e;let n;return W5e(t)?n={...t}:n={...t,id:$5e(t)},J5e(n,e)?e:e.concat(n)},Q5=({x:t,y:e},[n,r,a],s,[i,o])=>{const l={x:(t-n)/a,y:(e-r)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},PO=({x:t,y:e},[n,r,a])=>({x:t*a+n,y:e*a+r}),xm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-r};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:a}},AT=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,a)=>{const{x:s,y:i}=xm(a,e).positionAbsolute;return M5e(r,iT({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return P5e(n)},jO=(t,e,[n,r,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(e.x-n)/a,y:(e.y-r)/a,width:e.width/a,height:e.height/a},u=[];return t.forEach(d=>{const{width:h,height:m,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:w}=xm(d,o),E={x:w.x,y:w.y,width:h||0,height:m||0},N=M5(l,E),I=typeof h>"u"||typeof m>"u"||h===null||m===null,k=s&&N>0,U=(h||0)*(m||0);(I||k||N>=U||d.dragging)&&u.push(d)}),u},OO=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},QO=(t,e,n,r,a,s=.1)=>{const i=e/(t.width*(1+s)),o=n/(t.height*(1+s)),l=Math.min(i,o),u=Lm(l,r,a),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*u,g=n/2-h*u;return{x:m,y:g,zoom:u}},Xf=(t,e=0)=>t.transition().duration(e);function gD(t,e,n,r){return(e[n]||[]).reduce((a,s)=>{var i,o;return`${t.id}-${s.id}-${n}`!==r&&a.push({id:s.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function X5e(t,e,n,r,a,s){const{x:i,y:o}=nf(t),u=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const w=dT(void 0,u),E=u.getAttribute("data-handleid"),N=s({nodeId:b,id:E,type:w});if(N){const I=a.find(k=>k.nodeId===b&&k.type===w&&k.id===E);return{handle:{id:E,type:w,nodeId:b,x:(I==null?void 0:I.x)||n.x,y:(I==null?void 0:I.y)||n.y},validHandleResult:N}}}}let d=[],h=1/0;if(a.forEach(b=>{const w=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(w<=r){const E=s(b);w<=h&&(w<h?d=[{handle:b,validHandleResult:E}]:w===h&&d.push({handle:b,validHandleResult:E}),h=w)}}),!d.length)return{handle:null,validHandleResult:HO()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:w})=>g?b.type==="target":m?w.isValid:!0)||d[0]}const Z5e={source:null,target:null,sourceHandle:null,targetHandle:null},HO=()=>({handleDomNode:null,isValid:!1,connection:Z5e,endHandle:null});function VO(t,e,n,r,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...HO(),handleDomNode:l};if(l){const d=dT(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),w={source:o?h:n,sourceHandle:o?m:r,target:o?n:h,targetHandle:o?r:m};u.connection=w,g&&b&&(e===Fh.Strict?o&&d==="source"||!o&&d==="target":h!==n||m!==r)&&(u.endHandle={nodeId:h,handleId:m,type:d},u.isValid=s(w))}return u}function eSe({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((a,s)=>{if(s[Ma]){const{handleBounds:i}=s[Ma];let o=[],l=[];i&&(o=gD(s,i,"source",`${e}-${n}-${r}`),l=gD(s,i,"target",`${e}-${n}-${r}`)),a.push(...o,...l)}return a},[])}function dT(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function OE(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function tSe(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function zO({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=IO(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:w,panBy:E,getNodes:N,cancelConnection:I}=s();let k=0,U;const{x:P,y:D}=nf(t),_=d==null?void 0:d.elementFromPoint(P,D),B=dT(l,_),T=m==null?void 0:m.getBoundingClientRect();if(!T||!B)return;let O,R=nf(t,T),L=!1,Q=null,z=!1,ie=null;const J=eSe({nodes:N(),nodeId:n,handleId:e,handleType:B}),ee=()=>{if(!g)return;const[Y,Ae]=kO(R,T);E({x:Y,y:Ae}),k=requestAnimationFrame(ee)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:B,connectionStartHandle:{nodeId:n,handleId:e,type:B},connectionEndHandle:null}),w==null||w(t,{nodeId:n,handleId:e,handleType:B});function ae(Y){const{transform:Ae}=s();R=nf(Y,T);const{handle:j,validHandleResult:K}=X5e(Y,d,Q5(R,Ae,!1,[1,1]),b,J,X=>VO(X,h,n,e,a?"target":"source",o,d));if(U=j,L||(ee(),L=!0),ie=K.handleDomNode,Q=K.connection,z=K.isValid,i({connectionPosition:U&&z?PO({x:U.x,y:U.y},Ae):R,connectionStatus:tSe(!!U,z),connectionEndHandle:K.endHandle}),!U&&!z&&!ie)return OE(O);Q.source!==Q.target&&ie&&(OE(O),O=ie,ie.classList.add("connecting","react-flow__handle-connecting"),ie.classList.toggle("valid",z),ie.classList.toggle("react-flow__handle-valid",z))}function q(Y){var Ae,j;(U||ie)&&Q&&z&&(r==null||r(Q)),(j=(Ae=s()).onConnectEnd)==null||j.call(Ae,Y),l&&(u==null||u(Y)),OE(O),I(),cancelAnimationFrame(k),L=!1,z=!1,Q=null,ie=null,d.removeEventListener("mousemove",ae),d.removeEventListener("mouseup",q),d.removeEventListener("touchmove",ae),d.removeEventListener("touchend",q)}d.addEventListener("mousemove",ae),d.addEventListener("mouseup",q),d.addEventListener("touchmove",ae),d.addEventListener("touchend",q)}const xD=()=>!0,nSe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),rSe=(t,e,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},GO=Z.forwardRef(({type:t="source",position:e=on.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...m},g)=>{var T,O;const b=i||null,w=t==="target",E=$s(),N=K5e(),{connectOnClick:I,noPanClassName:k}=_a(nSe,Hi),{connecting:U,clickConnecting:P}=_a(rSe(N,b,t),Hi);N||(O=(T=E.getState()).onError)==null||O.call(T,"010",RA.error010());const D=R=>{const{defaultEdgeOptions:L,onConnect:Q,hasDefaultEdges:z}=E.getState(),ie={...L,...R};if(z){const{edges:J,setEdges:ee}=E.getState();ee(Y5e(ie,J))}Q==null||Q(ie),o==null||o(ie)},_=R=>{if(!N)return;const L=RO(R);a&&(L&&R.button===0||!L)&&zO({event:R,handleId:b,nodeId:N,onConnect:D,isTarget:w,getState:E.getState,setState:E.setState,isValidConnection:n||E.getState().isValidConnection||xD}),L?d==null||d(R):h==null||h(R)},B=R=>{const{onClickConnectStart:L,onClickConnectEnd:Q,connectionClickStartHandle:z,connectionMode:ie,isValidConnection:J}=E.getState();if(!N||!z&&!a)return;if(!z){L==null||L(R,{nodeId:N,handleId:b,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:b}});return}const ee=IO(R.target),ae=n||J||xD,{connection:q,isValid:Y}=VO({nodeId:N,id:b,type:t},ie,z.nodeId,z.handleId||null,z.type,ae,ee);Y&&D(q),Q==null||Q(R),E.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":b,"data-nodeid":N,"data-handlepos":e,"data-id":`${N}-${b}-${t}`,className:Zi(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",k,u,{source:!w,target:w,connectable:r,connectablestart:a,connectableend:s,connecting:P,connectionindicator:r&&(a&&!U||s&&U)}]),onMouseDown:_,onTouchStart:_,onClick:I?B:void 0,ref:g,...m},l)});GO.displayName="Handle";var My=Z.memo(GO);const qO=({data:t,isConnectable:e,targetPosition:n=on.Top,sourcePosition:r=on.Bottom})=>At.createElement(At.Fragment,null,At.createElement(My,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,At.createElement(My,{type:"source",position:r,isConnectable:e}));qO.displayName="DefaultNode";var H5=Z.memo(qO);const KO=({data:t,isConnectable:e,sourcePosition:n=on.Bottom})=>At.createElement(At.Fragment,null,t==null?void 0:t.label,At.createElement(My,{type:"source",position:n,isConnectable:e}));KO.displayName="InputNode";var WO=Z.memo(KO);const $O=({data:t,isConnectable:e,targetPosition:n=on.Top})=>At.createElement(At.Fragment,null,At.createElement(My,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);$O.displayName="OutputNode";var JO=Z.memo($O);const fT=()=>null;fT.displayName="GroupNode";const aSe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),t2=t=>t.id;function sSe(t,e){return Hi(t.selectedNodes.map(t2),e.selectedNodes.map(t2))&&Hi(t.selectedEdges.map(t2),e.selectedEdges.map(t2))}const YO=Z.memo(({onSelectionChange:t})=>{const e=$s(),{selectedNodes:n,selectedEdges:r}=_a(aSe,sSe);return Z.useEffect(()=>{const a={nodes:n,edges:r};t==null||t(a),e.getState().onSelectionChange.forEach(s=>s(a))},[n,r,t]),null});YO.displayName="SelectionListener";const iSe=t=>!!t.onSelectionChange;function oSe({onSelectionChange:t}){const e=_a(iSe);return t||e?At.createElement(YO,{onSelectionChange:t}):null}const lSe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function F0(t,e){Z.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Jn(t,e,n){Z.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const cSe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:w,maxZoom:E,nodeExtent:N,onNodesChange:I,onEdgesChange:k,elementsSelectable:U,connectionMode:P,snapGrid:D,snapToGrid:_,translateExtent:B,connectOnClick:T,defaultEdgeOptions:O,fitView:R,fitViewOptions:L,onNodesDelete:Q,onEdgesDelete:z,onNodeDrag:ie,onNodeDragStart:J,onNodeDragStop:ee,onSelectionDrag:ae,onSelectionDragStart:q,onSelectionDragStop:Y,noPanClassName:Ae,nodeOrigin:j,rfId:K,autoPanOnConnect:X,autoPanOnNodeDrag:te,onError:le,connectionRadius:ye,isValidConnection:Ce,nodeDragThreshold:_e})=>{const{setNodes:Ie,setEdges:xe,setDefaultNodesAndEdges:se,setMinZoom:Re,setMaxZoom:et,setTranslateExtent:De,setNodeExtent:we,reset:ze}=_a(lSe,Hi),nt=$s();return Z.useEffect(()=>{const it=r==null?void 0:r.map(dt=>({...dt,...O}));return se(n,it),()=>{ze()}},[]),Jn("defaultEdgeOptions",O,nt.setState),Jn("connectionMode",P,nt.setState),Jn("onConnect",a,nt.setState),Jn("onConnectStart",s,nt.setState),Jn("onConnectEnd",i,nt.setState),Jn("onClickConnectStart",o,nt.setState),Jn("onClickConnectEnd",l,nt.setState),Jn("nodesDraggable",u,nt.setState),Jn("nodesConnectable",d,nt.setState),Jn("nodesFocusable",h,nt.setState),Jn("edgesFocusable",m,nt.setState),Jn("edgesUpdatable",g,nt.setState),Jn("elementsSelectable",U,nt.setState),Jn("elevateNodesOnSelect",b,nt.setState),Jn("snapToGrid",_,nt.setState),Jn("snapGrid",D,nt.setState),Jn("onNodesChange",I,nt.setState),Jn("onEdgesChange",k,nt.setState),Jn("connectOnClick",T,nt.setState),Jn("fitViewOnInit",R,nt.setState),Jn("fitViewOnInitOptions",L,nt.setState),Jn("onNodesDelete",Q,nt.setState),Jn("onEdgesDelete",z,nt.setState),Jn("onNodeDrag",ie,nt.setState),Jn("onNodeDragStart",J,nt.setState),Jn("onNodeDragStop",ee,nt.setState),Jn("onSelectionDrag",ae,nt.setState),Jn("onSelectionDragStart",q,nt.setState),Jn("onSelectionDragStop",Y,nt.setState),Jn("noPanClassName",Ae,nt.setState),Jn("nodeOrigin",j,nt.setState),Jn("rfId",K,nt.setState),Jn("autoPanOnConnect",X,nt.setState),Jn("autoPanOnNodeDrag",te,nt.setState),Jn("onError",le,nt.setState),Jn("connectionRadius",ye,nt.setState),Jn("isValidConnection",Ce,nt.setState),Jn("nodeDragThreshold",_e,nt.setState),F0(t,Ie),F0(e,xe),F0(w,Re),F0(E,et),F0(B,De),F0(N,we),null},vD={display:"none"},uSe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},XO="react-flow__node-desc",ZO="react-flow__edge-desc",ASe="react-flow__aria-live",dSe=t=>t.ariaLiveMessage;function fSe({rfId:t}){const e=_a(dSe);return At.createElement("div",{id:`${ASe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:uSe},e)}function hSe({rfId:t,disableKeyboardA11y:e}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${XO}-${t}`,style:vD},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${ZO}-${t}`,style:vD},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&At.createElement(fSe,{rfId:t}))}var Tx=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=Z.useState(!1),a=Z.useRef(!1),s=Z.useRef(new Set([])),[i,o]=Z.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,m)=>h.concat(...m),[]);return[u,d]}return[[],[]]},[t]);return Z.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(a.current=g.ctrlKey||g.metaKey||g.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&P5(g))return!1;const w=wD(g.code,o);s.current.add(g[w]),yD(i,s.current,!1)&&(g.preventDefault(),r(!0))},h=g=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&P5(g))return!1;const w=wD(g.code,o);yD(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(g[w]),g.key==="Meta"&&s.current.clear(),a.current=!1},m=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,r]),n};function yD(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(a=>e.has(a)))}function wD(t,e){return e.includes(t)?"code":"key"}function eQ(t,e,n,r){var o,l;const a=t.parentNode||t.parentId;if(!a)return n;const s=e.get(a),i=xm(s,r);return eQ(s,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=s[Ma])==null?void 0:o.z)??0)>(n.z??0)?((l=s[Ma])==null?void 0:l.z)??0:n.z??0},r)}function tQ(t,e,n){t.forEach(r=>{var s;const a=r.parentNode||r.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n!=null&&n[r.id]){const{x:i,y:o,z:l}=eQ(r,t,{...r.position,z:((s=r[Ma])==null?void 0:s.z)??0},e);r.positionAbsolute={x:i,y:o},r[Ma].z=l,n!=null&&n[r.id]&&(r[Ma].isParent=!0)}})}function QE(t,e,n,r){const a=new Map,s={},i=r?1e3:0;return t.forEach(o=>{var g;const l=(Pl(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(s[h]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ma,{enumerable:!1,value:{handleBounds:m||(g=u==null?void 0:u[Ma])==null?void 0:g.handleBounds,z:l}}),a.set(o.id,d)}),tQ(a,n,s),a}function nQ(t,e={}){const{getNodes:n,width:r,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!u&&d;if(o&&l&&(m||!e.initial)){const b=n().filter(E=>{var I;const N=e.includeHiddenNodes?E.width&&E.height:!E.hidden;return(I=e.nodes)!=null&&I.length?N&&e.nodes.some(k=>k.id===E.id):N}),w=b.every(E=>E.width&&E.height);if(b.length>0&&w){const E=AT(b,h),{x:N,y:I,zoom:k}=QO(E,r,a,e.minZoom??s,e.maxZoom??i,e.padding??.1),U=tf.translate(N,I).scale(k);return typeof e.duration=="number"&&e.duration>0?o.transform(Xf(l,e.duration),U):o.transform(l,U),!0}}return!1}function mSe(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ma]:r[Ma],selected:n.selected})}),new Map(e)}function pSe(t,e){return e.map(n=>{const r=t.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function n2({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:mSe(t,a)}),i==null||i(t)),e!=null&&e.length&&(u&&r({edges:pSe(e,s)}),o==null||o(e))}const R0=()=>{},gSe={zoomIn:R0,zoomOut:R0,zoomTo:R0,getZoom:()=>1,setViewport:R0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:R0,fitBounds:R0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},xSe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),vSe=()=>{const t=$s(),{d3Zoom:e,d3Selection:n}=_a(xSe,Hi);return Z.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(Xf(n,a==null?void 0:a.duration),1.2),zoomOut:a=>e.scaleBy(Xf(n,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>e.scaleTo(Xf(n,s==null?void 0:s.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=t.getState().transform,u=tf.translate(a.x??i,a.y??o).scale(a.zoom??l);e.transform(Xf(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>nQ(t.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-a*d,m=l/2-s*d,g=tf.translate(h,m).scale(d);e.transform(Xf(n,i==null?void 0:i.duration),g)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:m}=QO(a,i,o,l,u,(s==null?void 0:s.padding)??.1),g=tf.translate(d,h).scale(m);e.transform(Xf(n,s==null?void 0:s.duration),g)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Q5(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),h={x:a.x-u,y:a.y-d};return Q5(h,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=PO(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:gSe,[e,n])};function Yw(){const t=vSe(),e=$s(),n=Z.useCallback(()=>e.getState().getNodes().map(w=>({...w})),[]),r=Z.useCallback(w=>e.getState().nodeInternals.get(w),[]),a=Z.useCallback(()=>{const{edges:w=[]}=e.getState();return w.map(E=>({...E}))},[]),s=Z.useCallback(w=>{const{edges:E=[]}=e.getState();return E.find(N=>N.id===w)},[]),i=Z.useCallback(w=>{const{getNodes:E,setNodes:N,hasDefaultNodes:I,onNodesChange:k}=e.getState(),U=E(),P=typeof w=="function"?w(U):w;if(I)N(P);else if(k){const D=P.length===0?U.map(_=>({type:"remove",id:_.id})):P.map(_=>({item:_,type:"reset"}));k(D)}},[]),o=Z.useCallback(w=>{const{edges:E=[],setEdges:N,hasDefaultEdges:I,onEdgesChange:k}=e.getState(),U=typeof w=="function"?w(E):w;if(I)N(U);else if(k){const P=U.length===0?E.map(D=>({type:"remove",id:D.id})):U.map(D=>({item:D,type:"reset"}));k(P)}},[]),l=Z.useCallback(w=>{const E=Array.isArray(w)?w:[w],{getNodes:N,setNodes:I,hasDefaultNodes:k,onNodesChange:U}=e.getState();if(k){const D=[...N(),...E];I(D)}else if(U){const P=E.map(D=>({item:D,type:"add"}));U(P)}},[]),u=Z.useCallback(w=>{const E=Array.isArray(w)?w:[w],{edges:N=[],setEdges:I,hasDefaultEdges:k,onEdgesChange:U}=e.getState();if(k)I([...N,...E]);else if(U){const P=E.map(D=>({item:D,type:"add"}));U(P)}},[]),d=Z.useCallback(()=>{const{getNodes:w,edges:E=[],transform:N}=e.getState(),[I,k,U]=N;return{nodes:w().map(P=>({...P})),edges:E.map(P=>({...P})),viewport:{x:I,y:k,zoom:U}}},[]),h=Z.useCallback(({nodes:w,edges:E})=>{const{nodeInternals:N,getNodes:I,edges:k,hasDefaultNodes:U,hasDefaultEdges:P,onNodesDelete:D,onEdgesDelete:_,onNodesChange:B,onEdgesChange:T}=e.getState(),O=(w||[]).map(ie=>ie.id),R=(E||[]).map(ie=>ie.id),L=I().reduce((ie,J)=>{const ee=J.parentNode||J.parentId,ae=!O.includes(J.id)&&ee&&ie.find(Y=>Y.id===ee);return(typeof J.deletable=="boolean"?J.deletable:!0)&&(O.includes(J.id)||ae)&&ie.push(J),ie},[]),Q=k.filter(ie=>typeof ie.deletable=="boolean"?ie.deletable:!0),z=Q.filter(ie=>R.includes(ie.id));if(L||z){const ie=OO(L,Q),J=[...z,...ie],ee=J.reduce((ae,q)=>(ae.includes(q.id)||ae.push(q.id),ae),[]);if((P||U)&&(P&&e.setState({edges:k.filter(ae=>!ee.includes(ae.id))}),U&&(L.forEach(ae=>{N.delete(ae.id)}),e.setState({nodeInternals:new Map(N)}))),ee.length>0&&(_==null||_(J),T&&T(ee.map(ae=>({id:ae,type:"remove"})))),L.length>0&&(D==null||D(L),B)){const ae=L.map(q=>({id:q.id,type:"remove"}));B(ae)}}},[]),m=Z.useCallback(w=>{const E=j5e(w),N=E?null:e.getState().nodeInternals.get(w.id);return!E&&!N?[null,null,E]:[E?w:dD(N),N,E]},[]),g=Z.useCallback((w,E=!0,N)=>{const[I,k,U]=m(w);return I?(N||e.getState().getNodes()).filter(P=>{if(!U&&(P.id===k.id||!P.positionAbsolute))return!1;const D=dD(P),_=M5(D,I);return E&&_>0||_>=I.width*I.height}):[]},[]),b=Z.useCallback((w,E,N=!0)=>{const[I]=m(w);if(!I)return!1;const k=M5(I,E);return N&&k>0||k>=I.width*I.height},[]);return Z.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,n,r,a,s,i,o,l,u,d,h,g,b])}const ySe={actInsideInputWithModifier:!1};var wSe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=$s(),{deleteElements:r}=Yw(),a=Tx(t,ySe),s=Tx(e);Z.useEffect(()=>{if(a){const{edges:i,getNodes:o}=n.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[a]),Z.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function bSe(t){const e=$s();Z.useEffect(()=>{let n;const r=()=>{var s,i;if(!t.current)return;const a=aT(t.current);(a.height===0||a.width===0)&&((i=(s=e.getState()).onError)==null||i.call(s,"004",RA.error004())),e.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const hT={position:"absolute",width:"100%",height:"100%",top:0,left:0},CSe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,r2=t=>({x:t.x,y:t.y,zoom:t.k}),D0=(t,e)=>t.target.closest(`.${e}`),bD=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),CD=t=>{const e=t.ctrlKey&&Dy()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},ESe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),_Se=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=oh.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:w,zoomActivationKeyCode:E,preventScrolling:N=!0,children:I,noWheelClassName:k,noPanClassName:U})=>{const P=Z.useRef(),D=$s(),_=Z.useRef(!1),B=Z.useRef(!1),T=Z.useRef(null),O=Z.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:L,d3ZoomHandler:Q,userSelectionActive:z}=_a(ESe,Hi),ie=Tx(E),J=Z.useRef(0),ee=Z.useRef(!1),ae=Z.useRef();return bSe(T),Z.useEffect(()=>{if(T.current){const q=T.current.getBoundingClientRect(),Y=I5e().scaleExtent([b,w]).translateExtent(g),Ae=yc(T.current).call(Y),j=tf.translate(m.x,m.y).scale(Lm(m.zoom,b,w)),K=[[0,0],[q.width,q.height]],X=Y.constrain()(j,K,g);Y.transform(Ae,X),Y.wheelDelta(CD),D.setState({d3Zoom:Y,d3Selection:Ae,d3ZoomHandler:Ae.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:T.current.closest(".react-flow")})}},[]),Z.useEffect(()=>{L&&R&&(i&&!ie&&!z?L.on("wheel.zoom",q=>{if(D0(q,k))return!1;q.preventDefault(),q.stopImmediatePropagation();const Y=L.property("__zoom").k||1;if(q.ctrlKey&&s){const Ce=gu(q),_e=CD(q),Ie=Y*Math.pow(2,_e);R.scaleTo(L,Ie,Ce,q);return}const Ae=q.deltaMode===1?20:1;let j=l===oh.Vertical?0:q.deltaX*Ae,K=l===oh.Horizontal?0:q.deltaY*Ae;!Dy()&&q.shiftKey&&l!==oh.Vertical&&(j=q.deltaY*Ae,K=0),R.translateBy(L,-(j/Y)*o,-(K/Y)*o,{internal:!0});const X=r2(L.property("__zoom")),{onViewportChangeStart:te,onViewportChange:le,onViewportChangeEnd:ye}=D.getState();clearTimeout(ae.current),ee.current||(ee.current=!0,e==null||e(q,X),te==null||te(X)),ee.current&&(t==null||t(q,X),le==null||le(X),ae.current=setTimeout(()=>{n==null||n(q,X),ye==null||ye(X),ee.current=!1},150))},{passive:!1}):typeof Q<"u"&&L.on("wheel.zoom",function(q,Y){if(!N&&q.type==="wheel"&&!q.ctrlKey||D0(q,k))return null;q.preventDefault(),Q.call(this,q,Y)},{passive:!1}))},[z,i,l,L,R,Q,ie,s,N,k,e,t,n]),Z.useEffect(()=>{R&&R.on("start",q=>{var j,K;if(!q.sourceEvent||q.sourceEvent.internal)return null;J.current=(j=q.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:Y}=D.getState(),Ae=r2(q.transform);_.current=!0,O.current=Ae,((K=q.sourceEvent)==null?void 0:K.type)==="mousedown"&&D.setState({paneDragging:!0}),Y==null||Y(Ae),e==null||e(q.sourceEvent,Ae)})},[R,e]),Z.useEffect(()=>{R&&(z&&!_.current?R.on("zoom",null):z||R.on("zoom",q=>{var Ae;const{onViewportChange:Y}=D.getState();if(D.setState({transform:[q.transform.x,q.transform.y,q.transform.k]}),B.current=!!(r&&bD(h,J.current??0)),(t||Y)&&!((Ae=q.sourceEvent)!=null&&Ae.internal)){const j=r2(q.transform);Y==null||Y(j),t==null||t(q.sourceEvent,j)}}))},[z,R,t,h,r]),Z.useEffect(()=>{R&&R.on("end",q=>{if(!q.sourceEvent||q.sourceEvent.internal)return null;const{onViewportChangeEnd:Y}=D.getState();if(_.current=!1,D.setState({paneDragging:!1}),r&&bD(h,J.current??0)&&!B.current&&r(q.sourceEvent),B.current=!1,(n||Y)&&CSe(O.current,q.transform)){const Ae=r2(q.transform);O.current=Ae,clearTimeout(P.current),P.current=setTimeout(()=>{Y==null||Y(Ae),n==null||n(q.sourceEvent,Ae)},i?150:0)}})},[R,i,h,n,r]),Z.useEffect(()=>{R&&R.filter(q=>{const Y=ie||a,Ae=s&&q.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&q.button===1&&q.type==="mousedown"&&(D0(q,"react-flow__node")||D0(q,"react-flow__edge")))return!0;if(!h&&!Y&&!i&&!u&&!s||z||!u&&q.type==="dblclick"||D0(q,k)&&q.type==="wheel"||D0(q,U)&&(q.type!=="wheel"||i&&q.type==="wheel"&&!ie)||!s&&q.ctrlKey&&q.type==="wheel"||!Y&&!i&&!Ae&&q.type==="wheel"||!h&&(q.type==="mousedown"||q.type==="touchstart")||Array.isArray(h)&&!h.includes(q.button)&&q.type==="mousedown")return!1;const j=Array.isArray(h)&&h.includes(q.button)||!q.button||q.button<=1;return(!q.ctrlKey||q.type==="wheel")&&j})},[z,R,a,s,i,u,h,d,ie]),At.createElement("div",{className:"react-flow__renderer",ref:T,style:hT},I)},SSe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function TSe(){const{userSelectionActive:t,userSelectionRect:e}=_a(SSe,Hi);return t&&e?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function ED(t,e){const n=e.parentNode||e.parentId,r=t.find(a=>a.id===n);if(r){const a=e.position.x+e.width-r.width,s=e.position.y+e.height-r.height;if(a>0||s>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),s>0&&(r.style.height+=s),e.position.x<0){const i=Math.abs(e.position.x);r.position.x=r.position.x-i,r.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);r.position.y=r.position.y-i,r.style.height+=i,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function rQ(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,a)=>{const s=t.filter(o=>o.id===a.id);if(s.length===0)return r.push(a),r;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&ED(r,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&ED(r,i);break}case"remove":return r}return r.push(i),r},n)}function aQ(t,e){return rQ(t,e)}function BSe(t,e){return rQ(t,e)}const Rd=(t,e)=>({id:t,type:"select",selected:e});function X0(t,e){return t.reduce((n,r)=>{const a=e.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(Rd(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(Rd(r.id,!1))),n},[])}const HE=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},NSe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),sQ=Z.memo(({isSelecting:t,selectionMode:e=Sx.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const m=Z.useRef(null),g=$s(),b=Z.useRef(0),w=Z.useRef(0),E=Z.useRef(),{userSelectionActive:N,elementsSelectable:I,dragging:k}=_a(NSe,Hi),U=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,w.current=0},P=Q=>{s==null||s(Q),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},D=Q=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){Q.preventDefault();return}i==null||i(Q)},_=o?Q=>o(Q):void 0,B=Q=>{const{resetSelectedElements:z,domNode:ie}=g.getState();if(E.current=ie==null?void 0:ie.getBoundingClientRect(),!I||!t||Q.button!==0||Q.target!==m.current||!E.current)return;const{x:J,y:ee}=nf(Q,E.current);z(),g.setState({userSelectionRect:{width:0,height:0,startX:J,startY:ee,x:J,y:ee}}),r==null||r(Q)},T=Q=>{const{userSelectionRect:z,nodeInternals:ie,edges:J,transform:ee,onNodesChange:ae,onEdgesChange:q,nodeOrigin:Y,getNodes:Ae}=g.getState();if(!t||!E.current||!z)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=nf(Q,E.current),K=z.startX??0,X=z.startY??0,te={...z,x:j.x<K?j.x:K,y:j.y<X?j.y:X,width:Math.abs(j.x-K),height:Math.abs(j.y-X)},le=Ae(),ye=jO(ie,te,ee,e===Sx.Partial,!0,Y),Ce=OO(ye,J).map(Ie=>Ie.id),_e=ye.map(Ie=>Ie.id);if(b.current!==_e.length){b.current=_e.length;const Ie=X0(le,_e);Ie.length&&(ae==null||ae(Ie))}if(w.current!==Ce.length){w.current=Ce.length;const Ie=X0(J,Ce);Ie.length&&(q==null||q(Ie))}g.setState({userSelectionRect:te})},O=Q=>{if(Q.button!==0)return;const{userSelectionRect:z}=g.getState();!N&&z&&Q.target===m.current&&(P==null||P(Q)),g.setState({nodesSelectionActive:b.current>0}),U(),a==null||a(Q)},R=Q=>{N&&(g.setState({nodesSelectionActive:b.current>0}),a==null||a(Q)),U()},L=I&&(t||N);return At.createElement("div",{className:Zi(["react-flow__pane",{dragging:k,selection:t}]),onClick:L?void 0:HE(P,m),onContextMenu:HE(D,m),onWheel:HE(_,m),onMouseEnter:L?void 0:l,onMouseDown:L?B:void 0,onMouseMove:L?T:u,onMouseUp:L?O:void 0,onMouseLeave:L?R:d,ref:m,style:hT},h,At.createElement(TSe,null))});sQ.displayName="Pane";function iQ(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:iQ(r,e):!1}function _D(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function kSe(t,e,n,r){return Array.from(t.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!iQ(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function ISe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function oQ(t,e,n,r,a=[0,0],s){const i=ISe(t,t.extent||r);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=n.get(l),{x:m,y:g}=xm(h,a).positionAbsolute;o=h&&Pl(m)&&Pl(g)&&Pl(h.width)&&Pl(h.height)?[[m+t.width*a[0],g+t.height*a[1]],[m+h.width-t.width+t.width*a[0],g+h.height-t.height+t.height*a[1]]]:o}else s==null||s("005",RA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=n.get(l),{x:m,y:g}=xm(h,a).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+g],[t.extent[1][0]+m,t.extent[1][1]+g]]}let u={x:0,y:0};if(l){const h=n.get(l);u=xm(h,a).positionAbsolute}const d=o&&o!=="parent"?sT(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function VE({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?r.find(a=>a.id===t):r[0],r]}const SD=(t,e,n,r)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const s=Array.from(a),i=e.getBoundingClientRect(),o={x:i.width*r[0],y:i.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/n,y:(u.top-i.top-o.y)/n,...aT(l)}})};function Zp(t,e,n){return n===void 0?n:r=>{const a=e().nodeInternals.get(t);a&&n(r,{...a})}}function V5({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",RA.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):a([t])}function FSe(){const t=$s();return Z.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:s}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function zE(t){return(e,n,r)=>t==null?void 0:t(e,r)}function lQ({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=$s(),[l,u]=Z.useState(!1),d=Z.useRef([]),h=Z.useRef({x:null,y:null}),m=Z.useRef(0),g=Z.useRef(null),b=Z.useRef({x:0,y:0}),w=Z.useRef(null),E=Z.useRef(!1),N=Z.useRef(!1),I=Z.useRef(!1),k=FSe();return Z.useEffect(()=>{if(t!=null&&t.current){const U=yc(t.current),P=({x:B,y:T})=>{const{nodeInternals:O,onNodeDrag:R,onSelectionDrag:L,updateNodePositions:Q,nodeExtent:z,snapGrid:ie,snapToGrid:J,nodeOrigin:ee,onError:ae}=o.getState();h.current={x:B,y:T};let q=!1,Y={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&z){const j=AT(d.current,ee);Y=iT(j)}if(d.current=d.current.map(j=>{const K={x:B-j.distance.x,y:T-j.distance.y};J&&(K.x=ie[0]*Math.round(K.x/ie[0]),K.y=ie[1]*Math.round(K.y/ie[1]));const X=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];d.current.length>1&&z&&!j.extent&&(X[0][0]=j.positionAbsolute.x-Y.x+z[0][0],X[1][0]=j.positionAbsolute.x+(j.width??0)-Y.x2+z[1][0],X[0][1]=j.positionAbsolute.y-Y.y+z[0][1],X[1][1]=j.positionAbsolute.y+(j.height??0)-Y.y2+z[1][1]);const te=oQ(j,K,O,X,ee,ae);return q=q||j.position.x!==te.position.x||j.position.y!==te.position.y,j.position=te.position,j.positionAbsolute=te.positionAbsolute,j}),!q)return;Q(d.current,!0,!0),u(!0);const Ae=a?R:zE(L);if(Ae&&w.current){const[j,K]=VE({nodeId:a,dragItems:d.current,nodeInternals:O});Ae(w.current,j,K)}},D=()=>{if(!g.current)return;const[B,T]=kO(b.current,g.current);if(B!==0||T!==0){const{transform:O,panBy:R}=o.getState();h.current.x=(h.current.x??0)-B/O[2],h.current.y=(h.current.y??0)-T/O[2],R({x:B,y:T})&&P(h.current)}m.current=requestAnimationFrame(D)},_=B=>{var ee;const{nodeInternals:T,multiSelectionActive:O,nodesDraggable:R,unselectNodesAndEdges:L,onNodeDragStart:Q,onSelectionDragStart:z}=o.getState();N.current=!0;const ie=a?Q:zE(z);(!i||!s)&&!O&&a&&((ee=T.get(a))!=null&&ee.selected||L()),a&&s&&i&&V5({id:a,store:o,nodeRef:t});const J=k(B);if(h.current=J,d.current=kSe(T,R,J,a),ie&&d.current){const[ae,q]=VE({nodeId:a,dragItems:d.current,nodeInternals:T});ie(B.sourceEvent,ae,q)}};if(e)U.on(".drag",null);else{const B=QEe().on("start",T=>{const{domNode:O,nodeDragThreshold:R}=o.getState();R===0&&_(T),I.current=!1;const L=k(T);h.current=L,g.current=(O==null?void 0:O.getBoundingClientRect())||null,b.current=nf(T.sourceEvent,g.current)}).on("drag",T=>{var Q,z;const O=k(T),{autoPanOnNodeDrag:R,nodeDragThreshold:L}=o.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(I.current=!0),!I.current){if(!E.current&&N.current&&R&&(E.current=!0,D()),!N.current){const ie=O.xSnapped-(((Q=h==null?void 0:h.current)==null?void 0:Q.x)??0),J=O.ySnapped-(((z=h==null?void 0:h.current)==null?void 0:z.y)??0);Math.sqrt(ie*ie+J*J)>L&&_(T)}(h.current.x!==O.xSnapped||h.current.y!==O.ySnapped)&&d.current&&N.current&&(w.current=T.sourceEvent,b.current=nf(T.sourceEvent,g.current),P(O))}}).on("end",T=>{if(!(!N.current||I.current)&&(u(!1),E.current=!1,N.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:O,nodeInternals:R,onNodeDragStop:L,onSelectionDragStop:Q}=o.getState(),z=a?L:zE(Q);if(O(d.current,!1,!1),z){const[ie,J]=VE({nodeId:a,dragItems:d.current,nodeInternals:R});z(T.sourceEvent,ie,J)}}}).filter(T=>{const O=T.target;return!T.button&&(!n||!_D(O,`.${n}`,t))&&(!r||_D(O,r,t))});return U.call(B),()=>{U.on(".drag",null)}}}},[t,e,n,r,s,o,a,i,k]),l}function cQ(){const t=$s();return Z.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(I=>I.selected&&(I.draggable||d&&typeof I.draggable>"u")),m=o?l[0]:5,g=o?l[1]:5,b=n.isShiftPressed?4:1,w=n.x*m*b,E=n.y*g*b,N=h.map(I=>{if(I.positionAbsolute){const k={x:I.positionAbsolute.x+w,y:I.positionAbsolute.y+E};o&&(k.x=l[0]*Math.round(k.x/l[0]),k.y=l[1]*Math.round(k.y/l[1]));const{positionAbsolute:U,position:P}=oQ(I,k,r,a,void 0,u);I.position=P,I.positionAbsolute=U}return I});s(N,!0,!1)},[])}const vm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var eg=t=>{const e=({id:n,type:r,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:w,style:E,className:N,isDraggable:I,isSelectable:k,isConnectable:U,isFocusable:P,selectNodesOnDrag:D,sourcePosition:_,targetPosition:B,hidden:T,resizeObserver:O,dragHandle:R,zIndex:L,isParent:Q,noDragClassName:z,noPanClassName:ie,initialized:J,disableKeyboardA11y:ee,ariaLabel:ae,rfId:q,hasHandleBounds:Y})=>{const Ae=$s(),j=Z.useRef(null),K=Z.useRef(null),X=Z.useRef(_),te=Z.useRef(B),le=Z.useRef(r),ye=k||I||d||h||m||g,Ce=cQ(),_e=Zp(n,Ae.getState,h),Ie=Zp(n,Ae.getState,m),xe=Zp(n,Ae.getState,g),se=Zp(n,Ae.getState,b),Re=Zp(n,Ae.getState,w),et=ze=>{const{nodeDragThreshold:nt}=Ae.getState();if(k&&(!D||!I||nt>0)&&V5({id:n,store:Ae,nodeRef:j}),d){const it=Ae.getState().nodeInternals.get(n);it&&d(ze,{...it})}},De=ze=>{if(!P5(ze)&&!ee)if(FO.includes(ze.key)&&k){const nt=ze.key==="Escape";V5({id:n,store:Ae,unselect:nt,nodeRef:j})}else I&&u&&Object.prototype.hasOwnProperty.call(vm,ze.key)&&(Ae.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),Ce({x:vm[ze.key].x,y:vm[ze.key].y,isShiftPressed:ze.shiftKey}))};Z.useEffect(()=>()=>{K.current&&(O==null||O.unobserve(K.current),K.current=null)},[]),Z.useEffect(()=>{if(j.current&&!T){const ze=j.current;(!J||!Y||K.current!==ze)&&(K.current&&(O==null||O.unobserve(K.current)),O==null||O.observe(ze),K.current=ze)}},[T,J,Y]),Z.useEffect(()=>{const ze=le.current!==r,nt=X.current!==_,it=te.current!==B;j.current&&(ze||nt||it)&&(ze&&(le.current=r),nt&&(X.current=_),it&&(te.current=B),Ae.getState().updateNodeDimensions([{id:n,nodeElement:j.current,forceUpdate:!0}]))},[n,r,_,B]);const we=lQ({nodeRef:j,disabled:T||!I,noDragClassName:z,handleSelector:R,nodeId:n,isSelectable:k,selectNodesOnDrag:D});return T?null:At.createElement("div",{className:Zi(["react-flow__node",`react-flow__node-${r}`,{[ie]:I},N,{selected:u,selectable:k,parent:Q,dragging:we}]),ref:j,style:{zIndex:L,transform:`translate(${o}px,${l}px)`,pointerEvents:ye?"all":"none",visibility:J?"visible":"hidden",...E},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:_e,onMouseMove:Ie,onMouseLeave:xe,onContextMenu:se,onClick:et,onDoubleClick:Re,onKeyDown:P?De:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":ee?void 0:`${XO}-${q}`,"aria-label":ae},At.createElement(q5e,{value:n},At.createElement(t,{id:n,data:a,type:r,xPos:s,yPos:i,selected:u,isConnectable:U,sourcePosition:_,targetPosition:B,dragging:we,dragHandle:R,zIndex:L})))};return e.displayName="NodeWrapper",Z.memo(e)};const RSe=t=>{const e=t.getNodes().filter(n=>n.selected);return{...AT(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function DSe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=$s(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=_a(RSe,Hi),d=cQ(),h=Z.useRef(null);if(Z.useEffect(()=>{var b;n||(b=h.current)==null||b.focus({preventScroll:!0})},[n]),lQ({nodeRef:h}),u||!a||!s)return null;const m=t?b=>{const w=r.getState().getNodes().filter(E=>E.selected);t(b,w)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(vm,b.key)&&d({x:vm[b.key].x,y:vm[b.key].y,isShiftPressed:b.shiftKey})};return At.createElement("div",{className:Zi(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},At.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:a,height:s,top:o,left:i}}))}var LSe=Z.memo(DSe);const USe=t=>t.nodesSelectionActive,uQ=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:w,multiSelectionKeyCode:E,panActivationKeyCode:N,zoomActivationKeyCode:I,elementsSelectable:k,zoomOnScroll:U,zoomOnPinch:P,panOnScroll:D,panOnScrollSpeed:_,panOnScrollMode:B,zoomOnDoubleClick:T,panOnDrag:O,defaultViewport:R,translateExtent:L,minZoom:Q,maxZoom:z,preventScrolling:ie,onSelectionContextMenu:J,noWheelClassName:ee,noPanClassName:ae,disableKeyboardA11y:q})=>{const Y=_a(USe),Ae=Tx(h),j=Tx(N),K=j||O,X=j||D,te=Ae||m&&K!==!0;return wSe({deleteKeyCode:o,multiSelectionKeyCode:E}),At.createElement(_Se,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:U,zoomOnPinch:P,panOnScroll:X,panOnScrollSpeed:_,panOnScrollMode:B,zoomOnDoubleClick:T,panOnDrag:!Ae&&K,defaultViewport:R,translateExtent:L,minZoom:Q,maxZoom:z,zoomActivationKeyCode:I,preventScrolling:ie,noWheelClassName:ee,noPanClassName:ae},At.createElement(sQ,{onSelectionStart:b,onSelectionEnd:w,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:K,isSelecting:!!te,selectionMode:g},t,Y&&At.createElement(LSe,{onSelectionContextMenu:J,noPanClassName:ae,disableKeyboardA11y:q})))};uQ.displayName="FlowRenderer";var MSe=Z.memo(uQ);function PSe(t){return _a(Z.useCallback(n=>t?jO(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function jSe(t){const e={input:eg(t.input||WO),default:eg(t.default||H5),output:eg(t.output||JO),group:eg(t.group||fT)},n={},r=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=eg(t[s]||H5),a),n);return{...e,...r}}const OSe=({x:t,y:e,width:n,height:r,origin:a})=>!n||!r?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-r*a[1]},QSe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),AQ=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:s,onError:i}=_a(QSe,Hi),o=PSe(t.onlyRenderVisibleElements),l=Z.useRef(),u=Z.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));s(m)});return l.current=d,d},[]);return Z.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:hT},o.map(d=>{var P,D,_;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",RA.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||a&&typeof d.selectable>"u"),w=!!(d.connectable||n&&typeof d.connectable>"u"),E=!!(d.focusable||r&&typeof d.focusable>"u"),N=t.nodeExtent?sT(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,I=(N==null?void 0:N.x)??0,k=(N==null?void 0:N.y)??0,U=OSe({x:I,y:k,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return At.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||on.Bottom,targetPosition:d.targetPosition||on.Top,hidden:d.hidden,xPos:I,yPos:k,xPosOrigin:U.x,yPosOrigin:U.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:w,isFocusable:E,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((P=d[Ma])==null?void 0:P.z)??0,isParent:!!((D=d[Ma])!=null&&D.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((_=d[Ma])!=null&&_.handleBounds)})}))};AQ.displayName="NodeRenderer";var HSe=Z.memo(AQ);const VSe=(t,e,n)=>n===on.Left?t-e:n===on.Right?t+e:t,zSe=(t,e,n)=>n===on.Top?t-e:n===on.Bottom?t+e:t,TD="react-flow__edgeupdater",BD=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>At.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:Zi([TD,`${TD}-${o}`]),cx:VSe(e,r,t),cy:zSe(n,r,t),r,stroke:"transparent",fill:"transparent"}),GSe=()=>!0;var L0=t=>{const e=({id:n,className:r,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:w,style:E,source:N,target:I,sourceX:k,sourceY:U,targetX:P,targetY:D,sourcePosition:_,targetPosition:B,elementsSelectable:T,hidden:O,sourceHandleId:R,targetHandleId:L,onContextMenu:Q,onMouseEnter:z,onMouseMove:ie,onMouseLeave:J,reconnectRadius:ee,onReconnect:ae,onReconnectStart:q,onReconnectEnd:Y,markerEnd:Ae,markerStart:j,rfId:K,ariaLabel:X,isFocusable:te,isReconnectable:le,pathOptions:ye,interactionWidth:Ce,disableKeyboardA11y:_e})=>{const Ie=Z.useRef(null),[xe,se]=Z.useState(!1),[Re,et]=Z.useState(!1),De=$s(),we=Z.useMemo(()=>`url('#${O5(j,K)}')`,[j,K]),ze=Z.useMemo(()=>`url('#${O5(Ae,K)}')`,[Ae,K]);if(O)return null;const nt=xt=>{var Tr;const{edges:xn,addSelectedEdges:$t,unselectNodesAndEdges:ir,multiSelectionActive:mn}=De.getState(),Fn=xn.find(Bn=>Bn.id===n);Fn&&(T&&(De.setState({nodesSelectionActive:!1}),Fn.selected&&mn?(ir({nodes:[],edges:[Fn]}),(Tr=Ie.current)==null||Tr.blur()):$t([n])),i&&i(xt,Fn))},it=Xp(n,De.getState,o),dt=Xp(n,De.getState,Q),Ct=Xp(n,De.getState,z),ut=Xp(n,De.getState,ie),Nt=Xp(n,De.getState,J),It=(xt,xn)=>{if(xt.button!==0)return;const{edges:$t,isValidConnection:ir}=De.getState(),mn=xn?I:N,Fn=(xn?L:R)||null,Tr=xn?"target":"source",Bn=ir||GSe,rs=xn,Xn=$t.find(Dn=>Dn.id===n);et(!0),q==null||q(xt,Xn,Tr);const Yr=Dn=>{et(!1),Y==null||Y(Dn,Xn,Tr)};zO({event:xt,handleId:Fn,nodeId:mn,onConnect:Dn=>ae==null?void 0:ae(Xn,Dn),isTarget:rs,getState:De.getState,setState:De.setState,isValidConnection:Bn,edgeUpdaterType:Tr,onReconnectEnd:Yr})},Wt=xt=>It(xt,!0),Ut=xt=>It(xt,!1),Ht=()=>se(!0),Yt=()=>se(!1),Mt=!T&&!i,kt=xt=>{var xn;if(!_e&&FO.includes(xt.key)&&T){const{unselectNodesAndEdges:$t,addSelectedEdges:ir,edges:mn}=De.getState();xt.key==="Escape"?((xn=Ie.current)==null||xn.blur(),$t({edges:[mn.find(Tr=>Tr.id===n)]})):ir([n])}};return At.createElement("g",{className:Zi(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:l,animated:u,inactive:Mt,updating:xe}]),onClick:nt,onDoubleClick:it,onContextMenu:dt,onMouseEnter:Ct,onMouseMove:ut,onMouseLeave:Nt,onKeyDown:te?kt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":X===null?void 0:X||`Edge from ${N} to ${I}`,"aria-describedby":te?`${ZO}-${K}`:void 0,ref:Ie},!Re&&At.createElement(t,{id:n,source:N,target:I,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:w,data:s,style:E,sourceX:k,sourceY:U,targetX:P,targetY:D,sourcePosition:_,targetPosition:B,sourceHandleId:R,targetHandleId:L,markerStart:we,markerEnd:ze,pathOptions:ye,interactionWidth:Ce}),le&&At.createElement(At.Fragment,null,(le==="source"||le===!0)&&At.createElement(BD,{position:_,centerX:k,centerY:U,radius:ee,onMouseDown:Wt,onMouseEnter:Ht,onMouseOut:Yt,type:"source"}),(le==="target"||le===!0)&&At.createElement(BD,{position:B,centerX:P,centerY:D,radius:ee,onMouseDown:Ut,onMouseEnter:Ht,onMouseOut:Yt,type:"target"})))};return e.displayName="EdgeWrapper",Z.memo(e)};function qSe(t){const e={default:L0(t.default||Uy),straight:L0(t.bezier||cT),step:L0(t.step||lT),smoothstep:L0(t.step||Jw),simplebezier:L0(t.simplebezier||oT)},n={},r=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=L0(t[s]||Uy),a),n);return{...e,...r}}function ND(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,a=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case on.Top:return{x:r+s/2,y:a};case on.Right:return{x:r+s,y:a+i/2};case on.Bottom:return{x:r+s/2,y:a+i};case on.Left:return{x:r,y:a+i/2}}}function kD(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const KSe=(t,e,n,r,a,s)=>{const i=ND(n,t,e),o=ND(s,r,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function WSe({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+r,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=iT({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*m)>0}function ID(t){var r,a,s,i,o;const e=((r=t==null?void 0:t[Ma])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const $Se=[{level:0,isMaxLevel:!0,edges:[]}];function JSe(t,e,n=!1){let r=-1;const a=t.reduce((i,o)=>{var d,h;const l=Pl(o.zIndex);let u=l?o.zIndex:0;if(n){const m=e.get(o.target),g=e.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),w=Math.max(((d=g==null?void 0:g[Ma])==null?void 0:d.z)||0,((h=m==null?void 0:m[Ma])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(b?w:0)}return i[u]?i[u].push(o):i[u]=[o],r=u>r?u:r,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===r}});return s.length===0?$Se:s}function YSe(t,e,n){const r=_a(Z.useCallback(a=>t?a.edges.filter(s=>{const i=e.get(s.source),o=e.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&WSe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return JSe(r,e,n)}const XSe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ZSe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),FD={[Ly.Arrow]:XSe,[Ly.ArrowClosed]:ZSe};function e4e(t){const e=$s();return Z.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(FD,t)?FD[t]:((s=(a=e.getState()).onError)==null||s.call(a,"009",RA.error009(t)),null)},[t])}const t4e=({id:t,type:e,color:n,width:r=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=e4e(e);return l?At.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},At.createElement(l,{color:n,strokeWidth:i})):null},n4e=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=O5(i,e);r.includes(o)||(a.push({id:o,color:i.color||t,...i}),r.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},dQ=({defaultColor:t,rfId:e})=>{const n=_a(Z.useCallback(n4e({defaultColor:t,rfId:e}),[t,e]),(r,a)=>!(r.length!==a.length||r.some((s,i)=>s.id!==a[i].id)));return At.createElement("defs",null,n.map(r=>At.createElement(t4e,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};dQ.displayName="MarkerDefinitions";var r4e=Z.memo(dQ);const a4e=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),fQ=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:w,children:E,disableKeyboardA11y:N})=>{const{edgesFocusable:I,edgesUpdatable:k,elementsSelectable:U,width:P,height:D,connectionMode:_,nodeInternals:B,onError:T}=_a(a4e,Hi),O=YSe(e,B,n);return P?At.createElement(At.Fragment,null,O.map(({level:R,edges:L,isMaxLevel:Q})=>At.createElement("svg",{key:R,style:{zIndex:R},width:P,height:D,className:"react-flow__edges react-flow__container"},Q&&At.createElement(r4e,{defaultColor:t,rfId:r}),At.createElement("g",null,L.map(z=>{const[ie,J,ee]=ID(B.get(z.source)),[ae,q,Y]=ID(B.get(z.target));if(!ee||!Y)return null;let Ae=z.type||"default";a[Ae]||(T==null||T("011",RA.error011(Ae)),Ae="default");const j=a[Ae]||a.default,K=_===Fh.Strict?q.target:(q.target??[]).concat(q.source??[]),X=kD(J.source,z.sourceHandle),te=kD(K,z.targetHandle),le=(X==null?void 0:X.position)||on.Bottom,ye=(te==null?void 0:te.position)||on.Top,Ce=!!(z.focusable||I&&typeof z.focusable>"u"),_e=z.reconnectable||z.updatable,Ie=typeof m<"u"&&(_e||k&&typeof _e>"u");if(!X||!te)return T==null||T("008",RA.error008(X,z)),null;const{sourceX:xe,sourceY:se,targetX:Re,targetY:et}=KSe(ie,X,le,ae,te,ye);return At.createElement(j,{key:z.id,id:z.id,className:Zi([z.className,s]),type:Ae,data:z.data,selected:!!z.selected,animated:!!z.animated,hidden:!!z.hidden,label:z.label,labelStyle:z.labelStyle,labelShowBg:z.labelShowBg,labelBgStyle:z.labelBgStyle,labelBgPadding:z.labelBgPadding,labelBgBorderRadius:z.labelBgBorderRadius,style:z.style,source:z.source,target:z.target,sourceHandleId:z.sourceHandle,targetHandleId:z.targetHandle,markerEnd:z.markerEnd,markerStart:z.markerStart,sourceX:xe,sourceY:se,targetX:Re,targetY:et,sourcePosition:le,targetPosition:ye,elementsSelectable:U,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:w,rfId:r,ariaLabel:z.ariaLabel,isFocusable:Ce,isReconnectable:Ie,pathOptions:"pathOptions"in z?z.pathOptions:void 0,interactionWidth:z.interactionWidth,disableKeyboardA11y:N})})))),E):null};fQ.displayName="EdgeRenderer";var s4e=Z.memo(fQ);const i4e=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function o4e({children:t}){const e=_a(i4e);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function l4e(t){const e=Yw(),n=Z.useRef(!1);Z.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const c4e={[on.Left]:on.Right,[on.Right]:on.Left,[on.Top]:on.Bottom,[on.Bottom]:on.Top},hQ=({nodeId:t,handleType:e,style:n,type:r=jd.Bezier,CustomComponent:a,connectionStatus:s})=>{var D,_,B;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=_a(Z.useCallback(T=>({fromNode:T.nodeInternals.get(t),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[t]),Hi),h=(D=i==null?void 0:i[Ma])==null?void 0:D.handleBounds;let m=h==null?void 0:h[e];if(d===Fh.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const g=o?m.find(T=>T.id===o):m[0],b=g?g.x+g.width/2:(i.width??0)/2,w=g?g.y+g.height/2:i.height??0,E=(((_=i.positionAbsolute)==null?void 0:_.x)??0)+b,N=(((B=i.positionAbsolute)==null?void 0:B.y)??0)+w,I=g==null?void 0:g.position,k=I?c4e[I]:null;if(!I||!k)return null;if(a)return At.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:E,fromY:N,toX:l,toY:u,fromPosition:I,toPosition:k,connectionStatus:s});let U="";const P={sourceX:E,sourceY:N,sourcePosition:I,targetX:l,targetY:u,targetPosition:k};return r===jd.Bezier?[U]=MO(P):r===jd.Step?[U]=j5({...P,borderRadius:0}):r===jd.SmoothStep?[U]=j5(P):r===jd.SimpleBezier?[U]=UO(P):U=`M${E},${N} ${l},${u}`,At.createElement("path",{d:U,fill:"none",className:"react-flow__connection-path",style:n})};hQ.displayName="ConnectionLine";const u4e=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function A4e({containerStyle:t,style:e,type:n,component:r}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=_a(u4e,Hi);return!(a&&s&&o&&i)?null:At.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:Zi(["react-flow__connection",u])},At.createElement(hQ,{nodeId:a,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function RD(t,e){return Z.useRef(null),$s(),Z.useMemo(()=>e(t),[t])}const mQ=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:w,onSelectionEnd:E,connectionLineType:N,connectionLineStyle:I,connectionLineComponent:k,connectionLineContainerStyle:U,selectionKeyCode:P,selectionOnDrag:D,selectionMode:_,multiSelectionKeyCode:B,panActivationKeyCode:T,zoomActivationKeyCode:O,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:Q,selectNodesOnDrag:z,defaultViewport:ie,translateExtent:J,minZoom:ee,maxZoom:ae,preventScrolling:q,defaultMarkerColor:Y,zoomOnScroll:Ae,zoomOnPinch:j,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:te,zoomOnDoubleClick:le,panOnDrag:ye,onPaneClick:Ce,onPaneMouseEnter:_e,onPaneMouseMove:Ie,onPaneMouseLeave:xe,onPaneScroll:se,onPaneContextMenu:Re,onEdgeContextMenu:et,onEdgeMouseEnter:De,onEdgeMouseMove:we,onEdgeMouseLeave:ze,onReconnect:nt,onReconnectStart:it,onReconnectEnd:dt,reconnectRadius:Ct,noDragClassName:ut,noWheelClassName:Nt,noPanClassName:It,elevateEdgesOnSelect:Wt,disableKeyboardA11y:Ut,nodeOrigin:Ht,nodeExtent:Yt,rfId:Mt})=>{const kt=RD(t,jSe),xt=RD(e,qSe);return l4e(s),At.createElement(MSe,{onPaneClick:Ce,onPaneMouseEnter:_e,onPaneMouseMove:Ie,onPaneMouseLeave:xe,onPaneContextMenu:Re,onPaneScroll:se,deleteKeyCode:R,selectionKeyCode:P,selectionOnDrag:D,selectionMode:_,onSelectionStart:w,onSelectionEnd:E,multiSelectionKeyCode:B,panActivationKeyCode:T,zoomActivationKeyCode:O,elementsSelectable:Q,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:Ae,zoomOnPinch:j,zoomOnDoubleClick:le,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:te,panOnDrag:ye,defaultViewport:ie,translateExtent:J,minZoom:ee,maxZoom:ae,onSelectionContextMenu:b,preventScrolling:q,noDragClassName:ut,noWheelClassName:Nt,noPanClassName:It,disableKeyboardA11y:Ut},At.createElement(o4e,null,At.createElement(s4e,{edgeTypes:xt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:L,onEdgeContextMenu:et,onEdgeMouseEnter:De,onEdgeMouseMove:we,onEdgeMouseLeave:ze,onReconnect:nt,onReconnectStart:it,onReconnectEnd:dt,reconnectRadius:Ct,defaultMarkerColor:Y,noPanClassName:It,elevateEdgesOnSelect:!!Wt,disableKeyboardA11y:Ut,rfId:Mt},At.createElement(A4e,{style:I,type:N,component:k,containerStyle:U})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(HSe,{nodeTypes:kt,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:z,onlyRenderVisibleElements:L,noPanClassName:It,noDragClassName:ut,disableKeyboardA11y:Ut,nodeOrigin:Ht,nodeExtent:Yt,rfId:Mt})))};mQ.displayName="GraphView";var d4e=Z.memo(mQ);const z5=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Bd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:z5,nodeExtent:z5,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Fh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:O5e,isValidConnection:void 0},f4e=()=>Zbe((t,e)=>({...Bd,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:s}=e();t({nodeInternals:QE(n,r,a,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",s=typeof r<"u",i=a?QE(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?r:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),g=n.reduce((w,E)=>{const N=a.get(E.id);if(N!=null&&N.hidden)a.set(N.id,{...N,[Ma]:{...N[Ma],handleBounds:void 0}});else if(N){const I=aT(E.nodeElement);!!(I.width&&I.height&&(N.width!==I.width||N.height!==I.height||E.forceUpdate))&&(a.set(N.id,{...N,[Ma]:{...N[Ma],handleBounds:{source:SD(".source",E.nodeElement,m,u),target:SD(".target",E.nodeElement,m,u)}},...I}),w.push({id:N.id,type:"dimensions",dimensions:I}))}return w},[]);tQ(a,u);const b=i||s&&!i&&nQ(e,{initial:!0,...o});t({nodeInternals:new Map(a),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:s}=e(),i=n.map(o=>{const l={id:o.id,type:"position",dragging:a};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const u=aQ(n,o()),d=QE(u,a,i,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:s}=e();let i,o=null;r?i=n.map(l=>Rd(l,!0)):(i=X0(s(),n),o=X0(a,[])),n2({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:s}=e();let i,o=null;r?i=n.map(l=>Rd(l,!0)):(i=X0(a,n),o=X0(s(),[])),n2({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:s}=e(),i=n||s(),o=r||a,l=i.map(d=>(d.selected=!1,Rd(d.id,!1))),u=o.map(d=>Rd(d.id,!1));n2({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=e();r==null||r.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=e();r==null||r.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(o=>o.selected).map(o=>Rd(o.id,!1)),i=n.filter(o=>o.selected).map(o=>Rd(o.id,!1));n2({changedNodes:s,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(a=>{a.positionAbsolute=sT(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!n.x&&!n.y)return!1;const u=tf.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[a,s]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Bd.connectionNodeId,connectionHandleId:Bd.connectionHandleId,connectionHandleType:Bd.connectionHandleType,connectionStatus:Bd.connectionStatus,connectionStartHandle:Bd.connectionStartHandle,connectionEndHandle:Bd.connectionEndHandle}),reset:()=>t({...Bd})}),Object.is),mT=({children:t})=>{const e=Z.useRef(null);return e.current||(e.current=f4e()),At.createElement(F5e,{value:e.current},t)};mT.displayName="ReactFlowProvider";const pQ=({children:t})=>Z.useContext($w)?At.createElement(At.Fragment,null,t):At.createElement(mT,null,t);pQ.displayName="ReactFlowWrapper";const h4e={input:WO,default:H5,output:JO,group:fT},m4e={default:Uy,straight:cT,step:lT,smoothstep:Jw,simplebezier:oT},p4e=[0,0],g4e=[15,15],x4e={x:0,y:0,zoom:1},v4e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},gQ=Z.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:s=h4e,edgeTypes:i=m4e,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:N,onNodeMouseEnter:I,onNodeMouseMove:k,onNodeMouseLeave:U,onNodeContextMenu:P,onNodeDoubleClick:D,onNodeDragStart:_,onNodeDrag:B,onNodeDragStop:T,onNodesDelete:O,onEdgesDelete:R,onSelectionChange:L,onSelectionDragStart:Q,onSelectionDrag:z,onSelectionDragStop:ie,onSelectionContextMenu:J,onSelectionStart:ee,onSelectionEnd:ae,connectionMode:q=Fh.Strict,connectionLineType:Y=jd.Bezier,connectionLineStyle:Ae,connectionLineComponent:j,connectionLineContainerStyle:K,deleteKeyCode:X="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:le=!1,selectionMode:ye=Sx.Full,panActivationKeyCode:Ce="Space",multiSelectionKeyCode:_e=Dy()?"Meta":"Control",zoomActivationKeyCode:Ie=Dy()?"Meta":"Control",snapToGrid:xe=!1,snapGrid:se=g4e,onlyRenderVisibleElements:Re=!1,selectNodesOnDrag:et=!0,nodesDraggable:De,nodesConnectable:we,nodesFocusable:ze,nodeOrigin:nt=p4e,edgesFocusable:it,edgesUpdatable:dt,elementsSelectable:Ct,defaultViewport:ut=x4e,minZoom:Nt=.5,maxZoom:It=2,translateExtent:Wt=z5,preventScrolling:Ut=!0,nodeExtent:Ht,defaultMarkerColor:Yt="#b1b1b7",zoomOnScroll:Mt=!0,zoomOnPinch:kt=!0,panOnScroll:xt=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:$t=oh.Free,zoomOnDoubleClick:ir=!0,panOnDrag:mn=!0,onPaneClick:Fn,onPaneMouseEnter:Tr,onPaneMouseMove:Bn,onPaneMouseLeave:rs,onPaneScroll:Xn,onPaneContextMenu:Yr,children:ua,onEdgeContextMenu:Dn,onEdgeDoubleClick:en,onEdgeMouseEnter:On,onEdgeMouseMove:as,onEdgeMouseLeave:Vr,onEdgeUpdate:pa,onEdgeUpdateStart:ws,onEdgeUpdateEnd:Qt,onReconnect:or,onReconnectStart:Zn,onReconnectEnd:Br,reconnectRadius:Rr=10,edgeUpdaterRadius:zr=10,onNodesChange:de,onEdgesChange:Be,noDragClassName:be="nodrag",noWheelClassName:Ee="nowheel",noPanClassName:Se="nopan",fitView:Ne=!1,fitViewOptions:qe,connectOnClick:tt=!0,attributionPosition:Qe,proOptions:We,defaultEdgeOptions:Ye,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Pt=!1,autoPanOnConnect:Tt=!0,autoPanOnNodeDrag:Ft=!0,connectionRadius:un=20,isValidConnection:Ln,onError:Un,style:Qn,id:Sa,nodeDragThreshold:Ai,...Ta},ss)=>{const Oa=Sa||"1";return At.createElement("div",{...Ta,style:{...Qn,...v4e},ref:ss,className:Zi(["react-flow",a]),"data-testid":"rf__wrapper",id:Sa},At.createElement(pQ,null,At.createElement(d4e,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:I,onNodeMouseMove:k,onNodeMouseLeave:U,onNodeContextMenu:P,onNodeDoubleClick:D,nodeTypes:s,edgeTypes:i,connectionLineType:Y,connectionLineStyle:Ae,connectionLineComponent:j,connectionLineContainerStyle:K,selectionKeyCode:te,selectionOnDrag:le,selectionMode:ye,deleteKeyCode:X,multiSelectionKeyCode:_e,panActivationKeyCode:Ce,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Re,selectNodesOnDrag:et,defaultViewport:ut,translateExtent:Wt,minZoom:Nt,maxZoom:It,preventScrolling:Ut,zoomOnScroll:Mt,zoomOnPinch:kt,zoomOnDoubleClick:ir,panOnScroll:xt,panOnScrollSpeed:xn,panOnScrollMode:$t,panOnDrag:mn,onPaneClick:Fn,onPaneMouseEnter:Tr,onPaneMouseMove:Bn,onPaneMouseLeave:rs,onPaneScroll:Xn,onPaneContextMenu:Yr,onSelectionContextMenu:J,onSelectionStart:ee,onSelectionEnd:ae,onEdgeContextMenu:Dn,onEdgeDoubleClick:en,onEdgeMouseEnter:On,onEdgeMouseMove:as,onEdgeMouseLeave:Vr,onReconnect:or??pa,onReconnectStart:Zn??ws,onReconnectEnd:Br??Qt,reconnectRadius:Rr??zr,defaultMarkerColor:Yt,noDragClassName:be,noWheelClassName:Ee,noPanClassName:Se,elevateEdgesOnSelect:Bt,rfId:Oa,disableKeyboardA11y:Pt,nodeOrigin:nt,nodeExtent:Ht}),At.createElement(cSe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:b,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:N,nodesDraggable:De,nodesConnectable:we,nodesFocusable:ze,edgesFocusable:it,edgesUpdatable:dt,elementsSelectable:Ct,elevateNodesOnSelect:yt,minZoom:Nt,maxZoom:It,nodeExtent:Ht,onNodesChange:de,onEdgesChange:Be,snapToGrid:xe,snapGrid:se,connectionMode:q,translateExtent:Wt,connectOnClick:tt,defaultEdgeOptions:Ye,fitView:Ne,fitViewOptions:qe,onNodesDelete:O,onEdgesDelete:R,onNodeDragStart:_,onNodeDrag:B,onNodeDragStop:T,onSelectionDrag:z,onSelectionDragStart:Q,onSelectionDragStop:ie,noPanClassName:Se,nodeOrigin:nt,rfId:Oa,autoPanOnConnect:Tt,autoPanOnNodeDrag:Ft,onError:Un,connectionRadius:un,isValidConnection:Ln,nodeDragThreshold:Ai}),At.createElement(oSe,{onSelectionChange:L}),ua,At.createElement(D5e,{proOptions:We,position:Qe}),At.createElement(hSe,{rfId:Oa,disableKeyboardA11y:Pt})))});gQ.displayName="ReactFlow";function xQ(t){return e=>{const[n,r]=Z.useState(e),a=Z.useCallback(s=>r(i=>t(s,i)),[]);return[n,r,a]}}const y4e=xQ(aQ),w4e=xQ(BSe);function b4e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function C4e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function E4e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function _4e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function S4e(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const wg=({children:t,className:e,...n})=>At.createElement("button",{type:"button",className:Zi(["react-flow__controls-button",e]),...n},t);wg.displayName="ControlButton";const T4e=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),vQ=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const m=$s(),[g,b]=Z.useState(!1),{isInteractive:w,minZoomReached:E,maxZoomReached:N}=_a(T4e,Hi),{zoomIn:I,zoomOut:k,fitView:U}=Yw();if(Z.useEffect(()=>{b(!0)},[]),!g)return null;const P=()=>{I(),s==null||s()},D=()=>{k(),i==null||i()},_=()=>{U(a),o==null||o()},B=()=>{m.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),l==null||l(!w)};return At.createElement(NO,{className:Zi(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&At.createElement(At.Fragment,null,At.createElement(wg,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},At.createElement(b4e,null)),At.createElement(wg,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},At.createElement(C4e,null))),n&&At.createElement(wg,{className:"react-flow__controls-fitview",onClick:_,title:"fit view","aria-label":"fit view"},At.createElement(E4e,null)),r&&At.createElement(wg,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity"},w?At.createElement(S4e,null):At.createElement(_4e,null)),d)};vQ.displayName="Controls";var B4e=Z.memo(vQ),Tc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Tc||(Tc={}));function N4e({color:t,dimensions:e,lineWidth:n}){return At.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function k4e({color:t,radius:e}){return At.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const I4e={[Tc.Dots]:"#91919a",[Tc.Lines]:"#eee",[Tc.Cross]:"#e2e2e2"},F4e={[Tc.Dots]:1,[Tc.Lines]:1,[Tc.Cross]:6},R4e=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function yQ({id:t,variant:e=Tc.Dots,gap:n=20,size:r,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=Z.useRef(null),{transform:d,patternId:h}=_a(R4e,Hi),m=i||I4e[e],g=r||F4e[e],b=e===Tc.Dots,w=e===Tc.Cross,E=Array.isArray(n)?n:[n,n],N=[E[0]*d[2]||1,E[1]*d[2]||1],I=g*d[2],k=w?[I,I]:N,U=b?[I/s,I/s]:[k[0]/s,k[1]/s];return At.createElement("svg",{className:Zi(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},At.createElement("pattern",{id:h+t,x:d[0]%N[0],y:d[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${U[0]},-${U[1]})`},b?At.createElement(k4e,{color:m,radius:I/s}):At.createElement(N4e,{dimensions:k,color:m,lineWidth:a})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}yQ.displayName="Background";var D4e=Z.memo(yQ);function L4e(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),e&&(r.href=e),a.href=t,a.href}const U4e=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function rf(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let U0=null;function wQ(t={}){return U0||(t.includeStyleProperties?(U0=t.includeStyleProperties,U0):(U0=rf(window.getComputedStyle(document.documentElement)),U0))}function Py(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function M4e(t){const e=Py(t,"border-left-width"),n=Py(t,"border-right-width");return t.clientWidth+e+n}function P4e(t){const e=Py(t,"border-top-width"),n=Py(t,"border-bottom-width");return t.clientHeight+e+n}function bQ(t,e={}){const n=e.width||M4e(t),r=e.height||P4e(t);return{width:n,height:r}}function j4e(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Go=16384;function O4e(t){(t.width>Go||t.height>Go)&&(t.width>Go&&t.height>Go?t.width>t.height?(t.height*=Go/t.width,t.width=Go):(t.width*=Go/t.height,t.height=Go):t.width>Go?(t.height*=Go/t.width,t.width=Go):(t.width*=Go/t.height,t.height=Go))}function jy(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Q4e(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function H4e(t,e,n){const r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return a.setAttribute("width",`${e}`),a.setAttribute("height",`${n}`),a.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(t),Q4e(a)}const Eo=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Eo(n,e)};function V4e(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function z4e(t,e){return wQ(e).map(n=>{const r=t.getPropertyValue(n),a=t.getPropertyPriority(n);return`${n}: ${r}${a?" !important":""};`}).join(" ")}function G4e(t,e,n,r){const a=`.${t}:${e}`,s=n.cssText?V4e(n):z4e(n,r);return document.createTextNode(`${a}{${s}}`)}function DD(t,e,n,r){const a=window.getComputedStyle(t,n),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=U4e();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(G4e(i,n,a,r)),e.appendChild(o)}function q4e(t,e,n){DD(t,e,":before",n),DD(t,e,":after",n)}const LD="application/font-woff",UD="image/jpeg",K4e={woff:LD,woff2:LD,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:UD,jpeg:UD,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function W4e(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function pT(t){const e=W4e(t).toLowerCase();return K4e[e]||""}function $4e(t){return t.split(/,/)[1]}function G5(t){return t.search(/^(data:)/)!==-1}function J4e(t,e){return`data:${e};base64,${t}`}async function CQ(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const a=await r.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(n({res:r,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const GE={};function Y4e(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function gT(t,e,n){const r=Y4e(t,e,n.includeQueryParams);if(GE[r]!=null)return GE[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let a;try{const s=await CQ(t,n.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),$4e(o)));a=J4e(s,e)}catch(s){a=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return GE[r]=a,a}async function X4e(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):jy(e)}async function Z4e(t,e){if(t.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,i==null||i.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return jy(o)}const n=t.poster,r=pT(n),a=await gT(n,r,e);return jy(a)}async function eTe(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Xw(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function tTe(t,e){return Eo(t,HTMLCanvasElement)?X4e(t):Eo(t,HTMLVideoElement)?Z4e(t,e):Eo(t,HTMLIFrameElement)?eTe(t,e):t.cloneNode(EQ(t))}const nTe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",EQ=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function rTe(t,e,n){var r,a;if(EQ(e))return e;let s=[];return nTe(t)&&t.assignedNodes?s=rf(t.assignedNodes()):Eo(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=rf(t.contentDocument.body.childNodes):s=rf(((a=t.shadowRoot)!==null&&a!==void 0?a:t).childNodes),s.length===0||Eo(t,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Xw(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function aTe(t,e,n){const r=e.style;if(!r)return;const a=window.getComputedStyle(t);a.cssText?(r.cssText=a.cssText,r.transformOrigin=a.transformOrigin):wQ(n).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Eo(t,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),r.setProperty(s,i,a.getPropertyPriority(s))})}function sTe(t,e){Eo(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Eo(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function iTe(t,e){if(Eo(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(a=>t.value===a.getAttribute("value"));r&&r.setAttribute("selected","")}}function oTe(t,e,n){return Eo(e,Element)&&(aTe(t,e,n),q4e(t,e,n),sTe(t,e),iTe(t,e)),e}async function lTe(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const o=n[s].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!r[o]&&(r[o]=await Xw(u,e,!0))}}const a=Object.values(r);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);t.appendChild(i)}return t}async function Xw(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>tTe(r,e)).then(r=>rTe(t,r,e)).then(r=>oTe(t,r,e)).then(r=>lTe(r,e))}const _Q=/url\((['"]?)([^'"]+?)\1\)/g,cTe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,uTe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ATe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function dTe(t){const e=[];return t.replace(_Q,(n,r,a)=>(e.push(a),n)),e.filter(n=>!G5(n))}async function fTe(t,e,n,r,a){try{const s=n?L4e(e,n):e,i=pT(e);let o;return a||(o=await gT(s,i,r)),t.replace(ATe(e),`$1${o}$3`)}catch{}return t}function hTe(t,{preferredFontFormat:e}){return e?t.replace(uTe,n=>{for(;;){const[r,,a]=cTe.exec(n)||[];if(!a)return"";if(a===e)return`src: ${r};`}}):t}function SQ(t){return t.search(_Q)!==-1}async function TQ(t,e,n){if(!SQ(t))return t;const r=hTe(t,n);return dTe(r).reduce((s,i)=>s.then(o=>fTe(o,i,e,n)),Promise.resolve(r))}async function M0(t,e,n){var r;const a=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(a){const s=await TQ(a,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function mTe(t,e){await M0("background",t,e)||await M0("background-image",t,e),await M0("mask",t,e)||await M0("-webkit-mask",t,e)||await M0("mask-image",t,e)||await M0("-webkit-mask-image",t,e)}async function pTe(t,e){const n=Eo(t,HTMLImageElement);if(!(n&&!G5(t.src))&&!(Eo(t,SVGImageElement)&&!G5(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,a=await gT(r,pT(r),e);await new Promise((s,i)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=a):t.href.baseVal=a})}async function gTe(t,e){const r=rf(t.childNodes).map(a=>BQ(a,e));await Promise.all(r).then(()=>t)}async function BQ(t,e){Eo(t,Element)&&(await mTe(t,e),await pTe(t,e),await gTe(t,e))}function xTe(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(a=>{n[a]=r[a]}),t}const MD={};async function PD(t){let e=MD[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},MD[t]=e,e}async function jD(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),CQ(o,e.fetchRequestInit,({result:l})=>(n=n.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>n)}function OD(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=o.exec(r),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(l[0])}return e}async function vTe(t,e){const n=[],r=[];return t.forEach(a=>{if("cssRules"in a)try{rf(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=PD(l).then(d=>jD(d,e)).then(d=>OD(d).forEach(h=>{try{a.insertRule(h,h.startsWith("@import")?o+=1:a.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(s){const i=t.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&r.push(PD(a.href).then(o=>jD(o,e)).then(o=>OD(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(a=>{if("cssRules"in a)try{rf(a.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),n))}function yTe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>SQ(e.style.getPropertyValue("src")))}async function wTe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=rf(t.ownerDocument.styleSheets),r=await vTe(n,e);return yTe(r)}function NQ(t){return t.trim().replace(/["']/g,"")}function bTe(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(NQ(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function CTe(t,e){const n=await wTe(t,e),r=bTe(t);return(await Promise.all(n.filter(s=>r.has(NQ(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return TQ(s.cssText,i,e)}))).join(`
`)}async function ETe(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await CTe(t,e);if(n){const r=document.createElement("style"),a=document.createTextNode(n);r.appendChild(a),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function _Te(t,e={}){const{width:n,height:r}=bQ(t,e),a=await Xw(t,e,!0);return await ETe(a,e),await BQ(a,e),xTe(a,e),await H4e(a,n,r)}async function STe(t,e={}){const{width:n,height:r}=bQ(t,e),a=await _Te(t,e),s=await jy(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||j4e(),u=e.canvasWidth||n,d=e.canvasHeight||r;return i.width=u*l,i.height=d*l,e.skipAutoScale||O4e(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function Zw(t,e={}){return(await STe(t,e)).toDataURL()}const QD="recursosAprendizaje_mindMaps_v2",TTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),BTe=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),NTe=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),kTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),q5=(t,e)=>t.children.length===0?e:t.children.reduce((n,r)=>n+q5(r,e),0),K5=(t,e="tree")=>{const n=[],r=[];if(e==="tree"){const i=(o,l,u,d)=>{const h=l*250;n.push({id:o.id,position:{x:h,y:u},data:{label:o.label},type:l===0?"input":"default",sourcePosition:on.Right,targetPosition:on.Left});const m=q5(o,80);let g=u-m/2;o.children.forEach(b=>{const w=q5(b,80),E=g+w/2;r.push({id:`e-${o.id}-${b.id}`,source:o.id,target:b.id,type:"smoothstep",animated:!0}),i(b,l+1,E),g+=w})};i(t,0,0)}else{n.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;t.children.forEach((l,u)=>{const d=u/t.children.length*2*Math.PI,h=i*Math.cos(d),m=i*Math.sin(d);n.push({id:l.id,position:{x:h,y:m},data:{label:l.label}}),r.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),l.children.forEach((g,b)=>{const w=d+(b-(l.children.length-1)/2)*.2,E=h+o*.5*Math.cos(w),N=m+o*.5*Math.sin(w);n.push({id:g.id,position:{x:E,y:N},data:{label:g.label}}),r.push({id:`e-${l.id}-${g.id}`,source:l.id,target:g.id,type:"smoothstep"})})})}return{nodes:n,edges:r}},kQ=({node:t,onUpdate:e,onAddChild:n,onDelete:r,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return A.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[A.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),A.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&A.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),t.children.map(o=>A.jsx(kQ,{node:o,onUpdate:e,onAddChild:n,onDelete:r,level:a+1},o.id))]})},ITe=({mapData:t,onBack:e,onSave:n})=>{const[r,a]=Z.useState(t.treeData),[s,i]=Z.useState("tree"),[o,l]=Z.useState(!1),[u,d,h]=y4e([]),[m,g,b]=w4e([]),{fitView:w}=Yw();Z.useEffect(()=>{const{nodes:P,edges:D}=K5(r,s);d(P),g(D),setTimeout(()=>w({duration:300}),50)},[r,s,d,g,w]);const E=(P,D)=>{const _=JSON.parse(JSON.stringify(r)),B=T=>T.id===P?(T.label=D,!0):T.children.some(B);B(_),a(_)},N=P=>{const D=JSON.parse(JSON.stringify(r)),_=B=>B.id===P?(B.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):B.children.some(_);_(D),a(D)},I=P=>{const D=JSON.parse(JSON.stringify(r)),_=B=>{const T=B.children.findIndex(O=>O.id===P);return T!==-1?(B.children.splice(T,1),!0):B.children.some(_)};_(D),a(D)},k=()=>{l(!0);const{nodes:P,edges:D}=K5(r,s);n({...t,treeData:r,nodes:P,edges:D}),setTimeout(()=>l(!1),1e3)},U=async P=>{const D=document.querySelector(".react-flow");D&&Zw(D,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(_=>{{const B=document.createElement("a");B.download=`${t.tema}.png`,B.href=_,B.click()}}).catch(_=>console.error("oops, something went wrong!",_))};return A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),A.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[A.jsxs(gQ,{nodes:u,edges:m,onNodesChange:h,onEdgesChange:b,fitView:!0,children:[A.jsx(B4e,{}),A.jsx(D4e,{})]}),A.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:A.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[A.jsx(TTe,{})," Pantalla completa"]})})]}),A.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),A.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[A.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[A.jsx(BTe,{})," Vista en rbol"]}),A.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[A.jsx(NTe,{})," Vista con tema central"]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:A.jsx(kQ,{node:r,onUpdate:E,onAddChild:N,onDelete:I})}),A.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[A.jsx("button",{onClick:()=>U(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),A.jsx("button",{onClick:k,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},FTe=({onBack:t})=>{const[e,n]=Z.useState("list"),[r,a]=Z.useState([]),[s,i]=Z.useState(null),[o,l]=Z.useState(!1),[u,d]=Z.useState(""),[h,m]=Z.useState(""),[g,b]=Z.useState("");Z.useEffect(()=>{try{const P=localStorage.getItem(QD);P&&a(JSON.parse(P))}catch(P){console.error("Error loading mind maps",P)}},[]);const w=P=>{a(P),localStorage.setItem(QD,JSON.stringify(P))},E=async P=>{if(P.preventDefault(),!u.trim()){alert("El tema es obligatorio.");return}l(!0);const D=`Basado en el tema central "${u}", y considerando el contenido adicional "${g}", genera una estructura jerrquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lgico del tema en subtemas.

La respuesta DEBE ser un nico objeto JSON vlido. Cada nodo en el JSON debe tener las propiedades "id" (un string nico generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const B=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json"}}),T=JSON.parse(B.text.trim()),{nodes:O,edges:R}=K5(T),L={id:crypto.randomUUID(),tema:u,nivel:h,treeData:T,nodes:O,edges:R,createdAt:new Date().toISOString()};i(L),n("editor")}catch(_){console.error("AI Generation Error:",_),alert("Hubo un error al generar el mapa mental con la IA. Intntelo de nuevo.")}finally{l(!1)}},N=P=>{const _=r.findIndex(B=>B.id===P.id)>-1?r.map(B=>B.id===P.id?P:B):[P,...r];w(_)},I=P=>{i(P),n("editor")},k=P=>{window.confirm("Eliminar este mapa mental?")&&w(r.filter(D=>D.id!==P))},U=()=>{switch(e){case"editor":return s?A.jsx(mT,{children:A.jsx(ITe,{mapData:s,onBack:()=>n("list"),onSave:N})}):null;case"config":return A.jsxs("div",{className:"max-w-2xl mx-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),A.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),A.jsxs("form",{onSubmit:E,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",id:"tema",value:u,onChange:P=>d(P.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),A.jsx("textarea",{id:"contenido",value:g,onChange:P=>b(P.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsx("div",{className:"flex justify-end pt-4",children:A.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:o?A.jsx(kTe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),A.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.length>0?r.map(P=>A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[A.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:P.tema}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(P.createdAt).toLocaleDateString("es-CL")]}),A.jsxs("div",{className:"mt-4 flex gap-2",children:[A.jsx("button",{onClick:()=>I(P),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),A.jsx("button",{onClick:()=>k(P.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},P.id)):A.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[A.jsx("span",{className:"text-4xl",children:""}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),U()]})},RTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),DTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),LTe=({onBack:t})=>{const[e,n]=Z.useState("Media"),[r,a]=Z.useState(10),[s,i]=Z.useState(!1),[o,l]=Z.useState(Array(10).fill("")),[u,d]=Z.useState(""),[h,m]=Z.useState(null),[g,b]=Z.useState({ai:!1,puzzle:!1}),w=Z.useRef(null);Z.useEffect(()=>{l(D=>{const _=Array(r).fill("");for(let B=0;B<Math.min(D.length,r);B++)_[B]=D[B];return _})},[r]);const E=(D,_)=>{const B=[...o];B[D]=_,l(B)},N=async()=>{if(u.trim()){b(D=>({...D,ai:!0}));try{const D=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),_=`Genera una lista de ${r} palabras clave, en espaol, relacionadas con el tema "${u}". Las palabras no deben contener espacios ni caracteres especiales.`,B={type:Gt.OBJECT,properties:{palabras:{type:Gt.ARRAY,items:{type:Gt.STRING}}},required:["palabras"]},T=await D.models.generateContent({model:"gemini-2.5-flash",contents:_,config:{responseMimeType:"application/json",responseSchema:B}}),L=[...JSON.parse(T.text).palabras.map(Q=>Q.toUpperCase().replace(/\s/g,"")).slice(0,r)];for(;L.length<r;)L.push("");l(L)}catch(D){console.error("Error generating words with AI:",D),alert("No se pudieron generar las palabras. Intntelo de nuevo.")}finally{b(D=>({...D,ai:!1}))}}},I=(D,_,B,T,O,R)=>{for(let L=0;L<D.length;L++){const Q=B+L*O.y,z=T+L*O.x;if(Q<0||Q>=R||z<0||z>=R||_[Q][z]&&_[Q][z]!==D[L])return!1}return!0},k=(D,_,B,T,O)=>{for(let R=0;R<D.length;R++)_[B+R*O.y][T+R*O.x]=D[R]},U=()=>{b(D=>({...D,puzzle:!0})),m(null),setTimeout(()=>{const D=o.map(L=>L.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(D.length===0){alert("Por favor, ingrese al menos una palabra vlida."),b(L=>({...L,puzzle:!1}));return}const _=Math.max(...D.map(L=>L.length));let B=Math.max(_,D.length)+2;e==="Media"&&(B+=3),e==="Difcil"&&(B+=5),B=Math.min(Math.max(B,10),25);const T=Array(B).fill(null).map(()=>Array(B).fill(null)),O=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];e!=="Fcil"&&O.push({x:1,y:-1}),e==="Difcil"&&O.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const L of D.sort((Q,z)=>z.length-Q.length)){let Q=!1;for(let z=0;z<100;z++){const ie=O[Math.floor(Math.random()*O.length)],J=Math.floor(Math.random()*B),ee=Math.floor(Math.random()*B);if(I(L,T,J,ee,ie,B)){k(L,T,J,ee,ie),Q=!0;break}}Q||console.warn(`No se pudo colocar la palabra: ${L}`)}const R=T.map(L=>L.map(Q=>Q||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)]));m({grid:R,words:D.sort()}),b(L=>({...L,puzzle:!1}))},100)},P=()=>{w.current&&Zw(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(D=>{const _=document.createElement("a");_.download="sopa-de-letras.png",_.href=D,_.click()}).catch(D=>{console.error("oops, something went wrong!",D),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl",children:""}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!h&&A.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),A.jsxs("select",{value:e,onChange:D=>n(D.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[A.jsx("option",{children:"Fcil"}),A.jsx("option",{children:"Media"}),A.jsx("option",{children:"Difcil"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(D=>A.jsx("button",{onClick:()=>{a(D),i(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!s&&r===D?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:D},D)),A.jsx("button",{onClick:()=>i(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${s?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),s&&A.jsx("input",{type:"number",value:r,onChange:D=>a(parseInt(D.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{id:"ai-theme",type:"text",value:u,onChange:D=>d(D.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:N,disabled:g.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:g.ai?A.jsx(RTe,{}):A.jsxs(A.Fragment,{children:[A.jsx(DTe,{}),A.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:o.map((D,_)=>A.jsx("input",{type:"text",value:D,onChange:B=>E(_,B.target.value),placeholder:`Palabra ${_+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},_))})]}),A.jsx("div",{className:"text-right pt-4",children:A.jsx("button",{onClick:U,disabled:g.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:g.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),h&&A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{ref:w,className:"p-6 bg-white",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[A.jsx("div",{className:"md:col-span-2",children:A.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${h.grid.length}, minmax(0, 1fr))`},children:h.grid.flat().map((D,_)=>A.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:D},_))})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),A.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:h.words.map(D=>A.jsx("li",{children:D},D))})]})]})}),A.jsxs("div",{className:"flex justify-end gap-4",children:[A.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),A.jsx("button",{onClick:P,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]})},HD="recursosAprendizaje_timelines",UTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),MTe=({timeline:t,onSave:e,onBack:n})=>{const[r,a]=Z.useState(t),s=Z.useRef(null),i=(d,h,m)=>{a(g=>({...g,events:g.events.map(b=>b.id===d?{...b,[h]:m}:b)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},h=[...r.events,d].sort((m,g)=>parseInt(m.date)-parseInt(g.date));a(m=>({...m,events:h}))},l=d=>{a(h=>({...h,events:h.events.filter(m=>m.id!==d)}))},u=()=>{s.current&&Zw(s.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${r.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.tema}),A.jsx("button",{onClick:n,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:A.jsxs("div",{ref:s,className:"relative p-10",children:[A.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),A.jsx("div",{className:"relative",children:r.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const m=h%2===0;return A.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[A.jsx("div",{className:"w-1/2",children:m&&A.jsx("div",{className:"text-right pr-8",children:A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[A.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),A.jsx("div",{className:"z-10 flex-shrink-0",children:A.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),A.jsx("div",{className:"w-1/2",children:!m&&A.jsx("div",{className:"text-left pl-8",children:A.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[A.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),A.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),A.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:r.events.map(d=>A.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[A.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),A.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripcin",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),A.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),A.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[A.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:u,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),A.jsx("button",{onClick:()=>e(r),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},PTe=({onBack:t})=>{const[e,n]=Z.useState("list"),[r,a]=Z.useState([]),[s,i]=Z.useState(null),[o,l]=Z.useState(!1),[u,d]=Z.useState(""),[h,m]=Z.useState(""),[g,b]=Z.useState("");Z.useEffect(()=>{try{const k=localStorage.getItem(HD);k&&a(JSON.parse(k))}catch(k){console.error("Error al cargar lneas de tiempo",k)}},[]);const w=k=>{a(k),localStorage.setItem(HD,JSON.stringify(k))},E=async k=>{if(k.preventDefault(),!u.trim()){alert("El tema es obligatorio.");return}l(!0);const U=h&&g?`entre ${h} y ${g}`:h?`a partir de ${h}`:g?`hasta ${g}`:"",P=`Genera una lnea de tiempo sobre el tema "${u}" ${U}. Crea entre 5 y 10 hitos clave ordenados cronolgicamente. Para cada hito, proporciona una fecha o ao, una descripcin breve y un emoji representativo.`,D={type:Gt.OBJECT,properties:{events:{type:Gt.ARRAY,items:{type:Gt.OBJECT,properties:{date:{type:Gt.STRING},description:{type:Gt.STRING},icon:{type:Gt.STRING}},required:["date","description"]}}},required:["events"]};try{const B=await new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:D}}),T=JSON.parse(B.text),O={id:crypto.randomUUID(),tema:u,fechaInicio:h,fechaFin:g,createdAt:new Date().toISOString(),events:T.events.map(R=>({...R,id:crypto.randomUUID()}))};i(O),n("editor")}catch(_){console.error("AI Generation Error:",_),alert("Hubo un error al generar la lnea de tiempo. Intntelo de nuevo.")}finally{l(!1)}},N=k=>{r.findIndex(P=>P.id===k.id)>-1?w(r.map(P=>P.id===k.id?k:P)):w([k,...r]),n("list"),i(null)},I=k=>{window.confirm("Eliminar esta lnea de tiempo?")&&w(r.filter(U=>U.id!==k))};return e==="editor"&&s?A.jsx(MTe,{timeline:s,onSave:N,onBack:()=>n("list")}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl",children:""}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),A.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),A.jsxs("form",{onSubmit:E,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("input",{type:"text",id:"tema",value:u,onChange:k=>d(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),A.jsx("input",{type:"text",id:"fechaInicio",value:h,onChange:k=>m(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),A.jsx("input",{type:"text",id:"fechaFin",value:g,onChange:k=>b(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?A.jsx(UTe,{}):"Generar con IA"})})]})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),r.length>0?r.map(k=>A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>{i(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),A.jsx("button",{onClick:()=>I(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):A.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},jTe=()=>A.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),OTe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),QTe=({onBack:t})=>{const[e,n]=Z.useState(10),[r,a]=Z.useState(!1),[s,i]=Z.useState(Array(10).fill("")),[o,l]=Z.useState(Array(10).fill("")),[u,d]=Z.useState(""),[h,m]=Z.useState(null),[g,b]=Z.useState(!1),[w,E]=Z.useState({ai:!1,puzzle:!1}),N=Z.useRef(null);Z.useEffect(()=>{const T=e;i(O=>Array.from({length:T},(R,L)=>O[L]||"")),l(O=>Array.from({length:T},(R,L)=>O[L]||""))},[e]);const I=(T,O)=>{const R=[...s];R[T]=O,i(R)},k=(T,O)=>{const R=[...o];R[T]=O,l(R)},U=async()=>{if(u.trim()){E(T=>({...T,ai:!0}));try{const T=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),O=`Genera una lista de ${e} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${u}". Las palabras no deben contener espacios.`,R={type:Gt.OBJECT,properties:{items:{type:Gt.ARRAY,items:{type:Gt.OBJECT,properties:{word:{type:Gt.STRING},clue:{type:Gt.STRING}},required:["word","clue"]}}},required:["items"]},L=await T.models.generateContent({model:"gemini-2.5-flash",contents:O,config:{responseMimeType:"application/json",responseSchema:R}}),Q=JSON.parse(L.text),z=Q.items.map(J=>J.word.toUpperCase().replace(/\s/g,"")),ie=Q.items.map(J=>J.clue);i(Array.from({length:e},(J,ee)=>z[ee]||"")),l(Array.from({length:e},(J,ee)=>ie[ee]||""))}catch(T){console.error("Error generating words/clues with AI:",T),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{E(T=>({...T,ai:!1}))}}},P=Z.useCallback(()=>{try{const T=s.map((se,Re)=>({word:se.toUpperCase().replace(/[^A-Z]/g,""),clue:o[Re]})).filter(se=>se.word.length>0);if(T.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;T.sort((se,Re)=>Re.word.length-se.word.length);const O=T[0].word.length,R=Math.max(O,T.length)*2;let L=Array.from({length:R},()=>Array(R).fill(null));const Q=[],z=T.shift(),ie=Math.floor(R/2),J=Math.floor((R-z.word.length)/2);for(let se=0;se<z.word.length;se++)L[ie][J+se]=z.word[se];Q.push({word:z.word,clue:z.clue,direction:"across",row:ie,col:J});for(const se of T){let Re={score:-1,row:-1,col:-1,direction:"across"};for(const et of Q)for(let De=0;De<et.word.length;De++)for(let we=0;we<se.word.length;we++)if(et.word[De]===se.word[we]){let ze=0,nt,it,dt;et.direction==="across"?(dt="down",nt=et.row-we,it=et.col+De):(dt="across",nt=et.row+De,it=et.col-we);let Ct=!0;for(let ut=0;ut<se.word.length;ut++){const Nt=nt+(dt==="down"?ut:0),It=it+(dt==="across"?ut:0);if(Nt<0||Nt>=R||It<0||It>=R){Ct=!1;break}const Wt=L[Nt][It],Ut=Nt===et.row+(et.direction==="down"?De:0)&&It===et.col+(et.direction==="across"?De:0);if(Wt&&!Ut){Ct=!1;break}if(Wt&&Ut&&Wt!==se.word[we]){Ct=!1;break}if(!Ut){if(dt==="across"&&(Nt>0&&L[Nt-1][It]||Nt<R-1&&L[Nt+1][It])){Ct=!1;break}if(dt==="down"&&(It>0&&L[Nt][It-1]||It<R-1&&L[Nt][It+1])){Ct=!1;break}}Wt&&ze++}Ct&&ze>Re.score&&(Re={score:ze,row:nt,col:it,direction:dt})}if(Re.score>-1){for(let et=0;et<se.word.length;et++){const De=Re.row+(Re.direction==="down"?et:0),we=Re.col+(Re.direction==="across"?et:0);L[De][we]=se.word[et]}Q.push({word:se.word,clue:se.clue,direction:Re.direction,row:Re.row,col:Re.col})}}let ee=R,ae=-1,q=R,Y=-1;Q.forEach(se=>{ee=Math.min(ee,se.row),ae=Math.max(ae,se.row+(se.direction==="down"?se.word.length-1:0)),q=Math.min(q,se.col),Y=Math.max(Y,se.col+(se.direction==="across"?se.word.length-1:0))}),ae===-1&&(ee=Q[0].row,ae=Q[0].row,q=Q[0].col,Y=Q[0].col+Q[0].word.length-1);const Ae=1,j=Math.max(0,ee-Ae),K=Math.min(R,ae+1+Ae),X=Math.max(0,q-Ae),te=Math.min(R,Y+1+Ae),le=L.slice(j,K).map(se=>se.slice(X,te)),ye=Q.map(se=>({...se,row:se.row-j,col:se.col-X})).sort((se,Re)=>se.row-Re.row||se.col-Re.col);let Ce=1;const _e=[],Ie=new Map;ye.forEach(se=>{const Re=`${se.row},${se.col}`;Ie.has(Re)||Ie.set(Re,Ce++),_e.push({...se,number:Ie.get(Re)})});const xe=le.map(se=>se.map(Re=>({char:Re,number:null})));return _e.forEach(se=>{const Re=`${se.row},${se.col}`;xe[se.row]&&xe[se.row][se.col]!==void 0&&(xe[se.row][se.col].number=Ie.get(Re))}),{grid:xe,clues:{across:_e.filter(se=>se.direction==="across").sort((se,Re)=>se.number-Re.number),down:_e.filter(se=>se.direction==="down").sort((se,Re)=>se.number-Re.number)}}}catch(T){return console.error("Error generating crossword grid:",T),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[s,o]),D=()=>{E(T=>({...T,puzzle:!0})),m(null),setTimeout(()=>{const T=P();T&&m(T),E(O=>({...O,puzzle:!1}))},100)},_=()=>{N.current&&(b(!1),setTimeout(()=>{Zw(N.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(T=>{const O=document.createElement("a");O.download="crucigrama.png",O.href=T,O.click()}).catch(T=>console.error("Error generating image",T))},100))},B=()=>h?A.jsxs("div",{className:"space-y-6",children:[A.jsx("div",{ref:N,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsx("div",{children:A.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${h.grid[0].length}, 2rem)`},children:h.grid.flat().map((T,O)=>A.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:T.char?"white":"black"},children:[T.number&&A.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:T.number}),g&&T.char&&A.jsx("span",{children:T.char})]},O))})}),A.jsxs("div",{className:"text-sm",children:[A.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),A.jsx("ul",{className:"space-y-1",children:h.clues.across.map(T=>A.jsxs("li",{children:[A.jsxs("strong",{children:[T.number,"."]})," ",T.clue]},`${T.word}-${T.clue}`))}),A.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),A.jsx("ul",{className:"space-y-1",children:h.clues.down.map(T=>A.jsxs("li",{children:[A.jsxs("strong",{children:[T.number,"."]})," ",T.clue]},`${T.word}-${T.clue}`))})]})]})}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("label",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:g,onChange:()=>b(!g),className:"h-5 w-5 rounded"}),A.jsx("span",{children:"Mostrar Solucin"})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),A.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl",children:""}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),A.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),h?B():A.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(T=>A.jsx("button",{onClick:()=>{n(T),a(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!r&&e===T?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:T},T)),A.jsx("button",{onClick:()=>a(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${r?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),r&&A.jsx("input",{type:"number",value:e,onChange:T=>n(parseInt(T.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{id:"ai-theme",type:"text",value:u,onChange:T=>d(T.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("button",{onClick:U,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?A.jsx(jTe,{}):A.jsxs(A.Fragment,{children:[A.jsx(OTe,{}),A.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),A.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((T,O)=>A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[A.jsx("input",{type:"text",value:s[O],onChange:R=>I(O,R.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),A.jsx("textarea",{value:o[O],onChange:R=>k(O,R.target.value),placeholder:`Pista ${O+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},O))}),A.jsx("div",{className:"text-right pt-4",children:A.jsx("button",{onClick:D,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},HTe=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],VTe=({recurso:t,onClick:e})=>A.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[A.jsx("div",{className:"text-6xl mb-4",children:t.icon}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),zTe=()=>{const[t,e]=Z.useState("menu"),n=()=>t==="mapasMentales"?A.jsx(FTe,{onBack:()=>e("menu")}):t==="sopaDeLetras"?A.jsx(LTe,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?A.jsx(PTe,{onBack:()=>e("menu")}):t==="crucigramas"?A.jsx(QTe,{onBack:()=>e("menu")}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:HTe.map(r=>A.jsx(VTe,{recurso:r,onClick:()=>e(r.id)},r.id))})]});return A.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},GTe="evaluacionesFormativas",qTe="calificacionesFormativas",qE="trabajosGrupalesFormativos",KTe=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState({}),[s,i]=Z.useState([]),[o,l]=Z.useState(null),[u,d]=Z.useState(!1),[h,m]=Z.useState(null),g=Z.useRef(null);Z.useEffect(()=>{try{const I=localStorage.getItem(GTe);I&&n(JSON.parse(I));const k=localStorage.getItem(qTe);k&&a(JSON.parse(k));const U=localStorage.getItem(qE);U&&i(JSON.parse(U))}catch(I){console.error("Error al cargar datos desde localStorage",I)}},[]);const b=Z.useMemo(()=>{if(!t.curso)return[];const k=e.filter(U=>U.curso===t.curso).reduce((U,P)=>((U[P.asignatura]=U[P.asignatura]||[]).push(P),U),{});return Object.entries(k).map(([U,P])=>{let D=0,_=0;const B=P.map(O=>{var Q;const R=(Q=r[O.id])==null?void 0:Q[t.nombreCompleto];let L="No Trabajado";return R==="trabajado"?(D+=7,_++,L="Trabajado"):R==="no trabajado"&&(D+=2,_++,L="No Trabajado"),{id:O.id,nombreActividad:O.nombreActividad,fecha:O.fecha,estado:L}}).filter(O=>{var R;return(R=r[O.id])==null?void 0:R[t.nombreCompleto]}),T=_>0?(D/_).toFixed(1):"N/A";return{asignatura:U,promedio:T,actividades:B.sort((O,R)=>new Date(R.fecha).getTime()-new Date(O.fecha).getTime())}}).filter(U=>U.actividades.length>0).sort((U,P)=>U.asignatura.localeCompare(P.asignatura))},[e,r,t]);Z.useEffect(()=>{if(b.reduce((_,B)=>_+B.actividades.length,0)===0){l(null);return}const k=b.reduce((_,B)=>{const T=parseFloat(B.promedio);return isNaN(T)?_:_+T},0),U=b.length>0?k/b.length:0,P=ov.find(_=>U>=_.promedioMin&&U<=_.promedioMax)||null,D=ov.filter(_=>U>=_.promedioMin);if(l({puntajeTotal:0,promedio:U,rangoActual:P,insigniasGanadas:D}),g.current!==null){const _=ov.find(B=>g.current>=B.promedioMin&&g.current<=B.promedioMax)||null;P&&(!_||P.nombre!==_.nombre)&&m(P)}g.current=U},[b]);const w=Z.useMemo(()=>t.curso?s.filter(I=>I.curso===t.curso).map(I=>{const k=I.grupos.find(U=>U.integrantes.some(P=>P.nombre===t.nombreCompleto));return k?{...I,miGrupo:k}:null}).filter(I=>I!==null).sort((I,k)=>new Date(k.fechaPresentacion).getTime()-new Date(I.fechaPresentacion).getTime()):[],[s,t]),E=(I,k)=>{const U=localStorage.getItem(qE),D=(U?JSON.parse(U):[]).map(_=>{if(_.id===I){const B=_.grupos.map(T=>{if(T.integrantes.some(R=>R.nombre===t.nombreCompleto)){const R=T.integrantes.map(L=>L.nombre===t.nombreCompleto?{...L,rol:k||void 0}:L);return{...T,integrantes:R}}return T});return{..._,grupos:B}}return _});localStorage.setItem(qE,JSON.stringify(D)),i(D)},N=I=>{const k=parseFloat(I);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[h&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>m(null),children:A.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:I=>I.stopPropagation(),children:[A.jsx("div",{className:"text-8xl animate-bounce",children:h.emoji}),A.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),A.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:h.nombre}),A.jsx("p",{className:"text-slate-600 mt-4",children:h.mensaje}),A.jsx("button",{onClick:()=>m(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),u&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:A.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:I=>I.stopPropagation(),children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),A.jsx("div",{className:"overflow-y-auto space-y-3",children:ov.map(I=>{const k=o==null?void 0:o.insigniasGanadas.some(U=>U.nombre===I.nombre);return A.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[A.jsx("div",{className:"text-5xl",children:I.emoji}),A.jsxs("div",{children:[A.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:I.nombre}),A.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",I.promedioMin," y ",I.promedioMax]})]})]},I.nombre)})})]})}),A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),A.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),o&&o.rangoActual&&A.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),A.jsx("h2",{className:"text-3xl font-bold",children:o.rangoActual.nombre}),A.jsx("button",{onClick:()=>d(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("div",{className:"text-7xl",children:o.rangoActual.emoji}),A.jsx("p",{className:"font-bold text-2xl mt-2",children:o.promedio.toFixed(1)}),A.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(I=>A.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[A.jsxs("div",{className:"flex justify-between items-start mb-4",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800",children:I.asignatura}),A.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),A.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${N(I.promedio)}`,children:I.promedio})]}),A.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[A.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),I.actividades.map(k=>A.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),A.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),A.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},k.id))]})]},I.asignatura))}):A.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[A.jsx("span",{className:"text-5xl",children:""}),A.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),A.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),w.length>0&&A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),A.jsx("div",{className:"space-y-4",children:w.map(I=>{const k=I.miGrupo.integrantes.filter(P=>P.nombre!==t.nombreCompleto&&P.rol).map(P=>P.rol),U=y8.filter(P=>!k.includes(P));return A.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[A.jsx("h3",{className:"font-bold text-slate-800",children:I.nombreActividad}),A.jsxs("p",{className:"text-sm text-slate-500",children:[I.asignatura," - Presentacin: ",new Date(I.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),A.jsxs("div",{className:"mt-3 pt-3 border-t",children:[A.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",I.miGrupo.numero]}),A.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:I.miGrupo.integrantes.map(P=>A.jsxs("li",{className:"grid grid-cols-2 items-center",children:[A.jsx("span",{className:P.nombre===t.nombreCompleto?"font-bold":"",children:P.nombre}),P.nombre===t.nombreCompleto?A.jsxs("select",{value:P.rol||"",onChange:D=>E(I.id,D.target.value),className:"text-sm p-1 border rounded w-full",children:[A.jsx("option",{value:"",children:"-- Seleccionar rol --"}),P.rol&&!U.includes(P.rol)&&A.jsx("option",{value:P.rol,children:P.rol}),U.map(D=>A.jsx("option",{value:D,children:D},D))]}):A.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:P.rol||"Sin rol"})]},P.nombre))})]})]},I.id)})})]})]})},WTe="planificacionesInterdisciplinarias",VD="entregasTareasInterdisciplinarias",$Te=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState([]),[s,i]=Z.useState(null);Z.useEffect(()=>{const m=()=>{try{const g=localStorage.getItem(WTe);g&&n(JSON.parse(g));const b=localStorage.getItem(VD);b&&a(JSON.parse(b))}catch(g){console.error("Error al cargar datos desde localStorage",g)}};return m(),window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)},[]);const o=Z.useMemo(()=>e.filter(m=>m.cursos.includes(t.curso||"")),[e,t.curso]),l=m=>{a(m),localStorage.setItem(VD,JSON.stringify(m)),window.dispatchEvent(new Event("storage"))},u=(m,g)=>{let b=r.find(w=>w.planificacionId===m&&w.tareaId===g&&w.estudianteId===t.id);return b||(b={id:crypto.randomUUID(),planificacionId:m,tareaId:g,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}),b},d=m=>{const g=r.findIndex(w=>w.id===m.id);let b;g>-1?b=r.map(w=>w.id===m.id?m:w):b=[...r,m],l(b)},h=({plan:m,tarea:g})=>{const b=Z.useMemo(()=>u(m.id,g.id),[m.id,g.id,r]),[w,E]=Z.useState(!1),[N,I]=Z.useState({observaciones:b.observacionesEstudiante||"",enlace:b.enlaceUrl||""}),k=D=>{var B;const _=(B=D.target.files)==null?void 0:B[0];if(_){const T=new FileReader;T.onloadend=()=>{d({...b,archivoAdjunto:{nombre:_.name,url:T.result},fechaCompletado:new Date().toISOString()})},T.readAsDataURL(_)}},U=()=>{d({...b,observacionesEstudiante:N.observaciones,enlaceUrl:N.enlace,fechaCompletado:new Date().toISOString()})},P=()=>{d({...b,completada:!b.completada,fechaCompletado:new Date().toISOString()})};return A.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[A.jsxs("div",{className:"flex items-start gap-3",children:[A.jsx("input",{type:"checkbox",checked:b.completada,onChange:P,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("p",{className:`font-semibold ${b.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",g.numero,": ",g.instrucciones]}),A.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",g.fechaEntrega]}),g.recursoUrl&&A.jsx("a",{href:g.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),A.jsx("button",{onClick:()=>E(!w),className:"text-sm font-semibold",children:w?"Ocultar":"Entregar"})]}),w&&A.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[A.jsx("textarea",{value:N.observaciones,onChange:D=>I({...N,observaciones:D.target.value}),onBlur:U,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),A.jsx("input",{type:"url",value:N.enlace,onChange:D=>I({...N,enlace:D.target.value}),onBlur:U,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),A.jsx("input",{type:"file",onChange:k,className:"text-sm"}),b.archivoAdjunto&&A.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",b.archivoAdjunto.nombre]})]}),b.feedbackProfesor&&A.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[A.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),A.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:b.feedbackProfesor})]})]})};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),o.length>0?o.map(m=>{const g=m.tareas||[],w=r.filter(N=>N.planificacionId===m.id&&N.estudianteId===t.id).filter(N=>N.completada).length,E=g.length>0?w/g.length*100:0;return A.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[A.jsxs("button",{onClick:()=>i(s===m.id?null:m.id),className:"w-full text-left",children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:m.nombreProyecto}),A.jsxs("div",{className:"mt-2 space-y-1",children:[A.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[A.jsx("span",{children:"Progreso"}),A.jsxs("span",{children:[Math.round(E),"%"]})]}),A.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:A.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${E}%`}})})]})]}),s===m.id&&A.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:g.length>0?g.map(N=>A.jsx(h,{plan:m,tarea:N},N.id)):A.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},m.id)}):A.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[A.jsx("span",{className:"text-5xl",children:""}),A.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),A.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},JTe=({data:t})=>A.jsx("div",{className:"space-y-4",children:t.map((n,r)=>A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),A.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[n.value.toFixed(2)," / 4.00"]})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:A.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${n.value/4*100}%`}})})]},n.label+r))}),YTe=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!1),[s,i]=Z.useState(null),[o,l]=Z.useState(null),[u,d]=Z.useState(Bg),h=Z.useCallback(async()=>{a(!0);try{const E=(await e1e(t.nombreCompleto)).sort((N,I)=>new Date(I.fecha).getTime()-new Date(N.fecha).getTime());n(E),i(null)}catch(w){console.error("Error al cargar acompaamientos desde Firestore",w),i("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[t.nombreCompleto]),m=Z.useCallback(async()=>{try{const w=await t1e();w&&d(w)}catch(w){console.error("Error al cargar rbrica personalizada",w)}},[]);Z.useEffect(()=>{h(),m()},[h,m]);const g=Z.useMemo(()=>{if(!o)return[];const w={};return u.forEach(E=>{w[E.domain]={total:0,count:0},E.criteria.forEach(N=>{const I=o.rubricaResultados[N.name];I&&(w[E.domain].total+=I,w[E.domain].count++)})}),Object.entries(w).map(([E,N])=>({label:E,value:N.count>0?N.total/N.count:0}))},[o,u]),b=w=>{const E=new sn;E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),E.setFont("helvetica","bold"),E.setFontSize(16),E.setTextColor(40),E.text("Informe de Acompaamiento Docente",E.internal.pageSize.getWidth()/2,25,{align:"center"}),E.setFontSize(12),E.setFont("helvetica","normal"),Zo(E,{startY:35,body:[["Docente:",w.docente],["Fecha:",new Date(w.fecha).toLocaleDateString("es-CL")],["Asignatura:",w.asignatura],["Curso:",w.curso],["Bloques:",w.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let N=E.lastAutoTable.finalY+15;if(Object.keys(w.rubricaResultados).length>0){const U=[],P=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(D=>{U.push([{content:D.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),D.criteria.forEach(_=>{const B=w.rubricaResultados[_.name],T=B?P[B-1]:"No evaluado";U.push([_.name,T])})}),Zo(E,{startY:N,head:[["Indicador","Nivel de Logro"]],body:U,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),N=E.lastAutoTable.finalY+15}const I=(U,P)=>{if(!P)return;N>250&&(E.addPage(),N=20,E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),N=25),E.setFont("helvetica","bold"),E.setFontSize(14),E.setTextColor(40),E.text(U,14,N),N+=8,E.setFont("helvetica","normal"),E.setFontSize(11),E.setTextColor(60);const D=E.splitTextToSize(P.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);E.text(D,14,N),N+=D.length*5+10};I("Observaciones Generales",w.observacionesGenerales),I("Retroalimentacin Consolidada",w.retroalimentacionConsolidada);const k=E.getNumberOfPages();for(let U=1;U<=k;U++)E.setPage(U),E.setFontSize(8),E.setTextColor(128),E.text(`Pgina ${U} de ${k}`,E.internal.pageSize.getWidth()/2,E.internal.pageSize.getHeight()-10,{align:"center"});E.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(w.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsxs("div",{children:[A.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),A.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),A.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[A.jsx(v8,{})," Exportar PDF"]})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsx("div",{className:"lg:col-span-2 space-y-6",children:A.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[A.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),A.jsx("h3",{children:"Observaciones Generales"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),A.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:A.jsx(JTe,{data:g})})]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),r&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!r&&e.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),A.jsx("div",{className:"space-y-4",children:!r&&e.length>0?e.map(w=>A.jsx("button",{onClick:()=>l(w),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[w.curso," - ",w.asignatura]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(w.fecha).toLocaleDateString("es-CL"),w.bloques&&` | Bloques: ${w.bloques}`]}),Object.keys(w.rubricaResultados).length>0&&A.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(w.rubricaResultados).length," criterios"]})]}),A.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},w.id)):!r&&A.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[A.jsx("span",{className:"text-5xl",children:""}),A.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},XTe=t=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const e=xr(hr,"planificaciones"),n=ts(e,Ws("fechaCreacion","desc"));return PA(n,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Todas las planificaciones cargadas:",s.length),t(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(e){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",e),e}},ZTe=(t,e)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",t),!t)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const n=xr(hr,"planificaciones"),r=ts(n,bo("userId","==",t),Ws("fechaCreacion","desc"));return PA(r,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log(" Planificaciones del usuario cargadas:",i.length),e(i)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(n){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",n),n}},eBe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),tBe=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),nBe=()=>A.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),rBe=({plan:t,onClose:e})=>{const n=a=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",a.objetivosAprendizaje]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",a.indicadoresEvaluacion]}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[A.jsx("strong",{children:"Contenidos Clave:"})," ",a.contenidos]})]}),A.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",a.cantidadClases,")"]}),A.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:a.detallesLeccion.map((s,i)=>A.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[A.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",s.actividades]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[A.jsxs("span",{children:[A.jsx("strong",{children:"Objetivo:"})," ",s.objetivosAprendizaje]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Contenidos:"})," ",s.contenidosConceptuales]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Habilidad (Bloom):"})," ",s.habilidadesBloom]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Perfil de Egreso:"})," ",s.perfilEgreso]}),A.jsxs("span",{className:"md:col-span-2",children:[A.jsx("strong",{children:"Interdisciplinariedad:"})," ",s.asignaturasInterdisciplinariedad]})]})]},i))})]}),r=a=>A.jsxs("div",{className:"space-y-4",children:[A.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[A.jsx("strong",{children:"Contenidos:"})," ",a.contenidos]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),A.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.inicio})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),A.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.desarrollo})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),A.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.cierre})]})]})]});return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:a=>a.stopPropagation(),children:[A.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),A.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:A.jsx(tBe,{})})]}),A.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?n(t):r(t)})]})})},aBe=t=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!0),[s,i]=Z.useState(null),o=Z.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return Z.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),a(!1);return}console.log(" Configurando suscripcin a planificaciones..."),console.log(" Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let l;if(o)console.log(" Cargando todas las planificaciones (vista admin)"),l=XTe(u=>{console.log(" Planificaciones admin cargadas:",u.length),n(u),a(!1),i(null)});else{const u=t.email||t.id||"";console.log(" Cargando planificaciones del usuario:",u),l=ZTe(u,d=>{console.log(" Planificaciones del usuario cargadas:",d.length),n(d),a(!1),i(null)})}return l}catch(l){console.error(" Error al configurar suscripcin:",l),i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[t,o]),{planificaciones:e,loading:r,error:s,canViewAllPlans:o}},sBe=({currentUser:t})=>{console.log(" SeguimientoCurricular - currentUser recibido:",t),console.log(" currentUser.email:",t==null?void 0:t.email),console.log(" currentUser.id:",t==null?void 0:t.id),console.log(" currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:n,error:r,canViewAllPlans:a}=aBe(t),[s,i]=Z.useState("1"),[o,l]=Z.useState(null),[u,d]=Z.useState(null),h=Z.useMemo(()=>{const w={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"}[s];return e.filter(E=>E.nivel===w)},[e,s]),m=b=>{l(w=>w===b?null:b)},g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];return!t||!t.email&&!t.id?A.jsx("div",{className:"flex justify-center items-center py-8",children:A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),A.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):n?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),A.jsx("div",{className:"flex justify-center items-center py-12",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(nBe,{}),A.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):r?A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),A.jsx("div",{className:"flex justify-center items-center py-12",children:A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:r})]})})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&A.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:" Vista administrativa - Todas las planificaciones"})]}),A.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:A.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>A.jsx("button",{onClick:()=>i(b.key),className:`${s===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),A.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:a?"Ningn profesor ha creado planificaciones an":"Crea planificaciones desde el mdulo de Planificacin"})]}):A.jsx("div",{className:"space-y-4",children:Hl.map(b=>{const w=h.filter(N=>N.asignatura===b);if(w.length===0)return null;const E=o===b;return A.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[A.jsxs("button",{onClick:()=>m(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),A.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[w.length," planificacin",w.length!==1?"es":""]})]}),A.jsx("span",{className:`transform transition-transform duration-200 ${E?"rotate-180":""}`,children:A.jsx(eBe,{})})]}),E&&A.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:A.jsx("ul",{className:"space-y-3",children:w.map(N=>A.jsx("li",{children:A.jsx("button",{onClick:()=>d(N),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:N.tipo==="Unidad"?N.nombreUnidad:N.nombreClase}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[A.jsx("span",{className:"font-medium",children:"Autor:"})," ",N.autor||"No especificado"]}),A.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(N.fechaCreacion).toLocaleDateString("es-CL")]})]}),A.jsx("div",{className:"ml-3",children:A.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${N.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:N.tipo})})]})})},N.id))})})]},b)})})]}),u&&A.jsx(rBe,{plan:u,onClose:()=>d(null)})]})},xT="analisis",iBe=async()=>{try{const t=ts(xr(hr,xT),Ws("uploadDate","desc"));return(await Xi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anlisis:",t),new Error("No se pudieron cargar los anlisis taxonmicos")}},oBe=async t=>{try{return{id:(await MA(xr(hr,xT),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anlisis:",e),new Error("No se pudo crear el anlisis taxonmico")}},lBe=async t=>{try{const e=vs(hr,xT,t);await wf(e)}catch(e){throw console.error("Error al eliminar anlisis:",e,"ID:",t),new Error("No se pudo eliminar el anlisis taxonmico")}},zD=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],GD={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},cBe=()=>A.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qD=({currentUser:t})=>{const[e,n]=Z.useState([]),[r,a]=Z.useState(!1),[s,i]=Z.useState(null),[o,l]=Z.useState(null),[u,d]=Z.useState(""),[h,m]=Z.useState(!1),[g,b]=Z.useState(null),[w,E]=Z.useState(null),N=Z.useCallback(async()=>{a(!0);try{const D=await iBe();n(D),i(null)}catch(D){console.error("Error al cargar anlisis desde Firestore",D),i("No se pudieron cargar los anlisis desde la nube.")}finally{a(!1)}},[]);Z.useEffect(()=>{N()},[N]);const I=async D=>{var B;const _=(B=D.target.files)==null?void 0:B[0];if(_){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(_.type)){i("Por favor, suba un archivo PDF o DOCX vlido."),b(null),E(null),d("");return}b(_),d(_.name),i(null);const O=new FileReader;O.onloadend=()=>{const R=O.result.split(",")[1];if(!R){i("No se pudo procesar el archivo. Puede que est vaco o corrupto."),E(null);return}E({mimeType:_.type,data:R})},O.onerror=()=>{i("Error al leer el archivo."),E(null)},O.readAsDataURL(_)}},k=async()=>{if(!u.trim()||!w){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}m(!0),i(null);const D=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,_={type:Gt.OBJECT,properties:{analysisResults:{type:Gt.ARRAY,description:"Un array con cada pregunta identificada y su clasificacin de Bloom.",items:{type:Gt.OBJECT,properties:{question:{type:Gt.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:Gt.STRING,description:"El nivel de Bloom correspondiente.",enum:zD}},required:["question","habilidadBloom"]}},summary:{type:Gt.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:Gt.INTEGER},Comprender:{type:Gt.INTEGER},Aplicar:{type:Gt.INTEGER},Analizar:{type:Gt.INTEGER},Evaluar:{type:Gt.INTEGER},Crear:{type:Gt.INTEGER}}}},required:["analysisResults","summary"]};try{el("Anlisis Taxonmico");const B=new Ks({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),T={inlineData:{mimeType:w.mimeType,data:w.data}},O=await B.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:D},T]},config:{responseMimeType:"application/json",responseSchema:_}}),R=JSON.parse(O.text),L={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:R.analysisResults,summary:R.summary},Q=await oBe(L);await N(),l(Q),d(""),b(null),E(null)}catch(B){console.error(B),i("Hubo un error al analizar el documento. Asegrese de que el archivo no est protegido o vaco. Intntelo de nuevo.")}finally{m(!1)}},U=async D=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await lBe(D),await N(),(o==null?void 0:o.id)===D&&l(null)}catch(_){console.error("Error al eliminar anlisis:",_),i("No se pudo eliminar el anlisis en la nube.")}},P=Z.useMemo(()=>o?Object.values(o.summary).reduce((D,_)=>D+(_||0),0):0,[o]);return A.jsxs("div",{className:"space-y-8 animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonmico de Evaluaciones"}),r&&A.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anlisis desde la nube..."}),s&&A.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),A.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:A.jsxs("div",{className:"space-y-1 text-center",children:[A.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:A.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),A.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[A.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[A.jsx("span",{children:"Cargue un archivo"}),A.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:I,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),A.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),A.jsx("input",{type:"text",id:"documentName",value:u,onChange:D=>d(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),A.jsx("button",{onClick:k,disabled:h||!w,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?A.jsx(cBe,{}):"Analizar con IA"})]})]}),A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),!r&&e.length===0&&A.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados en la nube."}),A.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!r&&e.length>0&&e.map(D=>A.jsxs("button",{onClick:()=>l(D),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===D.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[A.jsx("p",{className:"font-semibold truncate",children:D.documentName}),A.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(D.uploadDate).toLocaleString("es-CL")})]},D.id))})]})]}),A.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),A.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),A.jsx("button",{onClick:()=>U(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonmico (",P," preguntas)"]}),A.jsx("div",{className:"space-y-3",children:zD.map(D=>{const _=o.summary[D]||0,B=P>0?_/P*100:0;return A.jsxs("div",{children:[A.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[A.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),A.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[_," (",B.toFixed(0),"%)"]})]}),A.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:A.jsx("div",{className:`${GD[D]} h-4 rounded-full`,style:{width:`${B}%`}})})]},D)})})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),A.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:A.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[A.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),A.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),A.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((D,_)=>A.jsxs("tr",{children:[A.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:D.question}),A.jsx("td",{className:"px-4 py-3 text-sm",children:A.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${GD[D.habilidadBloom]}`,children:D.habilidadBloom})})]},_))})]})})]})]}):A.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[A.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})},uBe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(//g,""),e=e.replace(/\s+(medio|bsico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),e=e.replace(/^(\d)(?![])/,"$1"),e=e.replace(/\s+/g,"").toUpperCase(),e},ABe=({currentUser:t,onLogout:e,onUserUpdate:n,onChangeProfile:r,unreadMessagesCount:a,refreshUnreadCount:s})=>{const i=t.profile,o=Z.useMemo(()=>{const E=m$[i]??[];return i!==rn.ESTUDIANTE?E:E.filter(N=>{if(N.name==="Asistencia a Empresa"){const I=uBe(t.curso||"");return I.startsWith("3")||I.startsWith("4")}return!0})},[i,t.curso]),[l,u]=Z.useState(null),[d,h]=Z.useState(!1);Z.useEffect(()=>{o.length>0?u(o[0]):u(null)},[o]);const m=Z.useCallback(E=>{u(E),window.innerWidth<768&&h(!1)},[]),g=Z.useCallback(E=>{const N=o.find(I=>I.name===E);N&&m(N)},[o,m]),b=()=>A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[A.jsx(ZW,{}),A.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestin LIR"})]}),A.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:o.map(E=>A.jsxs("button",{onClick:()=>m(E),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(l==null?void 0:l.name)===E.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[E.icon,A.jsx("span",{className:"ml-4",children:E.name})]},E.name))})]}),w=()=>{if(!l)return A.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:A.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un mdulo del men para comenzar."})});if(l.name==="Calendario Acadmico")return A.jsx(yse,{profile:i});if(l.name==="Muro de Anuncios")return A.jsx(_se,{currentUser:t});if(l.name==="Mensajera Interna")return A.jsx(a1e,{currentUser:t,refreshUnreadCount:s});if(l.name==="Generador de Actas")return A.jsx(Tse,{});if(i===rn.SUBDIRECCION){if(l.name==="Dashboard")return console.log("=== DASHBOARD PRINCIPAL DEBUG ==="),console.log(" Dashboard principal - currentUser antes de pasar:",t),console.log(" Dashboard principal - profile del usuario:",t==null?void 0:t.profile),console.log(" Dashboard principal - email del usuario:",t==null?void 0:t.email),console.log("====================================="),A.jsx(Q$,{currentUser:t});if(l.name==="Administracin")return A.jsx(Exe,{});if(l.name==="Seguimiento Curricular")return A.jsx(sBe,{currentUser:t});if(l.name==="Acompaamiento docente")return A.jsx(n1e,{currentUser:t});if(l.name==="Anlisis Taxonmico")return A.jsx(qD,{currentUser:t});if(l.name==="Interdisciplinario")return A.jsx(jR,{});if(l.name==="Registro de inasistencias y reemplazos docentes")return A.jsx(U$,{currentUser:t});if(l.name==="Crear horarios")return A.jsx(Gae,{});if(l.name==="Seguimiento de acciones pedaggicas")return A.jsx(Jae,{});if(l.name==="Inclusin")return A.jsx(I6,{currentUser:t})}if(i===rn.PROFESORADO){if(l.name==="Planificacin")return A.jsx(dse,{currentUser:t});if(l.name==="Mis Acompaamientos")return A.jsx(YTe,{currentUser:t});if(l.name==="Recursos de Aprendizaje")return A.jsx(zTe,{});if(l.name==="Anlisis Taxonmico")return A.jsx(qD,{currentUser:t});if(l.name==="Interdisciplinario")return A.jsx(jR,{});if(l.name==="Inclusin")return A.jsx(I6,{currentUser:t});if(l.name==="Actividades Remotas")return A.jsx(Nxe,{});if(l.name==="Evaluacin de Aprendizajes")return A.jsx(xoe,{});if(l.name==="Evaluaciones Formativas")return A.jsx($xe,{currentUser:t})}if(i===rn.COORDINACION_TP){if(l.name==="Seguimiento Dual")return A.jsx(Txe,{});if(l.name==="Asistencia Dual")return A.jsx(Vxe,{});if(l.name==="Paol")return A.jsx(Qbe,{})}if(i===rn.ESTUDIANTE){if(l.name==="Auto-aprendizaje")return A.jsx(Dxe,{currentUser:t});if(l.name==="Evaluacin Formativa")return A.jsx(KTe,{currentUser:t});if(l.name==="Tareas Interdisciplinarias")return A.jsx($Te,{currentUser:t});if(l.name==="Asistencia a Empresa")return A.jsx(Pxe,{currentUser:t})}return A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:l.name}),A.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:A.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",A.jsx("span",{className:"font-semibold",children:l.name}),"."]})})]})};return A.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[A.jsx(w$,{currentUser:t,onLogout:e,onNavigate:g,onUserUpdate:n,onChangeProfile:r,toggleSidebar:()=>h(!d),unreadMessagesCount:a,refreshUnreadCount:s}),A.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d&&A.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),A.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${d?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:A.jsx(b,{})}),A.jsx("main",{className:"flex-1 overflow-y-auto",children:A.jsx("div",{className:"p-6 md:p-8",children:w()})})]})]})},dBe=({onSelectProfile:t,isAdminView:e=!1})=>A.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[A.jsxs("div",{className:"text-center mb-10",children:[A.jsx("div",{className:"mb-4 flex justify-center items-center",children:A.jsx(KS,{})}),A.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:h$.map(n=>A.jsxs("button",{onClick:()=>t(n.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[A.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:n.icon}),A.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:n.label})]},n.id))}),A.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),fBe=()=>{const[t,e]=Z.useState(null),[n,r]=Z.useState(null),[a,s]=Z.useState(!0),[i,o]=Z.useState(null),[l,u]=Z.useState(!1),[d,h]=Z.useState(null);Z.useEffect(()=>{console.log(" Iniciando listener de Auth...");const N=kz(Op,async I=>{try{if(console.log(" Auth state changed:",(I==null?void 0:I.email)||"No user"),e(I),!I)console.log(" Usuario no autenticado, limpiando estado"),r(null),h(null),u(!1),o(null);else{console.log(" Cargando datos de Firestore para:",I.email);try{const k=vs(hr,"usuarios",I.email),U=await Bm(k);if(U.exists()){const P={id:I.email,...U.data()};console.log(" Datos de usuario cargados:",{nombre:P.nombreCompleto,profile:P.profile,email:P.email}),r(P),o(null),P.profile===rn.SUBDIRECCION&&(console.log(" Usuario SUBDIRECCION detectado, habilitando selector de perfil"),u(!0))}else console.log(" Usuario no encontrado en Firestore para:",I.email),r(null),o("Usuario no encontrado en la base de datos. Contacte al administrador."),await KN(Op)}catch(k){console.error(" Error especfico de Firestore:",k),r(null),o("Error al conectar con la base de datos. Verifique su conexin.")}}}catch(k){console.error(" Error general en Auth state change:",k),r(null),e(null),o("Error de autenticacin. Intente nuevamente.")}finally{s(!1),console.log(" Auth inicializacin completada")}});return()=>{console.log(" Limpiando listener de Auth"),N()}},[]);const m=async(N,I)=>{if(o(null),!N.trim()||!I.trim()){o("Por favor ingrese email y contrasea");return}try{console.log(" Intentando login para:",N);const k=vs(hr,"usuarios",N.trim().toLowerCase());if(!(await Bm(k)).exists()){o("Usuario no registrado en el sistema");return}await Tz(Op,N.trim().toLowerCase(),I),console.log(" Login exitoso")}catch(k){switch(console.error(" Error de login:",k),k.code){case"auth/user-not-found":o("No existe una cuenta con este correo electrnico");break;case"auth/wrong-password":o("Contrasea incorrecta");break;case"auth/invalid-email":o("Formato de correo electrnico invlido");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente ms tarde o restablezca su contrasea");break;case"auth/network-request-failed":o("Error de conexin. Verifique su internet");break;case"auth/invalid-credential":o("Credenciales invlidas. Verifique su email y contrasea");break;default:o(`Error de autenticacin: ${k.message}`)}}},g=async N=>{try{return console.log(" Enviando email de recuperacin a:",N),await Sz(Op,N),console.log(" Email de recuperacin enviado"),{success:!0,message:"Email de recuperacin enviado correctamente"}}catch(I){switch(console.error(" Error al enviar email de recuperacin:",I),I.code){case"auth/user-not-found":return{success:!1,message:"No existe una cuenta con este correo"};case"auth/invalid-email":return{success:!1,message:"Correo electrnico invlido"};default:return{success:!1,message:"Error al enviar email de recuperacin"}}}},b=N=>{console.log(" Admin seleccion perfil:",N),h(N),u(!1)},w=async()=>{try{console.log(" Cerrando sesin..."),await KN(Op),e(null),r(null),h(null),u(!1),o(null),console.log(" Sesin cerrada exitosamente")}catch(N){console.error(" Error al cerrar sesin:",N)}};if(a)return A.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"mb-4 flex justify-center items-center",children:A.jsx(KS,{})}),A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."}),A.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-500",children:"Verificando autenticacin y permisos"})]})});const E=()=>{if(i&&!t)return A.jsx(l3,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i});if(t&&l&&(n==null?void 0:n.profile)===rn.SUBDIRECCION)return A.jsx(dBe,{onSelectProfile:b,isAdminView:!0});if(t&&n){const N=d||n.profile;return console.log(" Renderizando Dashboard para:",{user:n.nombreCompleto,originalProfile:n.profile,effectiveProfile:N}),A.jsx(ABe,{currentUser:{...n,profile:N},onLogout:w})}return t&&!n?A.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:A.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[A.jsx("div",{className:"mb-4 text-red-500",children:A.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error de datos de usuario"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"No se pudieron cargar los datos del usuario desde la base de datos."}),A.jsx("button",{onClick:w,className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Volver al Login"})]})}):A.jsx(l3,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i})};return A.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:E()})},IQ=document.getElementById("root");if(!IQ)throw new Error("Could not find root element to mount to");const hBe=V9.createRoot(IQ);hBe.render(A.jsx(At.StrictMode,{children:A.jsx(fBe,{})}));export{Or as _,mBe as c,W5 as g};
